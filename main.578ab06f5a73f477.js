"use strict";(self.webpackChunkplanning_poker=self.webpackChunkplanning_poker||[]).push([[179],{9058:(Nt,He,z)=>{z.d(He,{BH:()=>Te,G6:()=>Dt,L:()=>xe,LL:()=>Ue,Pz:()=>Ve,Sg:()=>je,UG:()=>fe,ZB:()=>be,ZR:()=>Ae,aH:()=>ce,b$:()=>Hn,eu:()=>ye,hl:()=>me,jU:()=>Qt,m9:()=>os,ne:()=>Ln,pd:()=>_n,r3:()=>$n,ru:()=>ct,tV:()=>le,uI:()=>nt,vZ:()=>er,w1:()=>Xn,xO:()=>Qn,xb:()=>yn,z$:()=>Ye,zd:()=>qt});const De=function(ge){const ee=[];let te=0;for(let J=0;J<ge.length;J++){let ne=ge.charCodeAt(J);ne<128?ee[te++]=ne:ne<2048?(ee[te++]=ne>>6|192,ee[te++]=63&ne|128):55296==(64512&ne)&&J+1<ge.length&&56320==(64512&ge.charCodeAt(J+1))?(ne=65536+((1023&ne)<<10)+(1023&ge.charCodeAt(++J)),ee[te++]=ne>>18|240,ee[te++]=ne>>12&63|128,ee[te++]=ne>>6&63|128,ee[te++]=63&ne|128):(ee[te++]=ne>>12|224,ee[te++]=ne>>6&63|128,ee[te++]=63&ne|128)}return ee},Ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ge,ee){if(!Array.isArray(ge))throw Error("encodeByteArray takes an array as a parameter");this.init_();const te=ee?this.byteToCharMapWebSafe_:this.byteToCharMap_,J=[];for(let ne=0;ne<ge.length;ne+=3){const Re=ge[ne],Ze=ne+1<ge.length,ht=Ze?ge[ne+1]:0,Jt=ne+2<ge.length,rn=Jt?ge[ne+2]:0;let lr=(15&ht)<<2|rn>>6,Ei=63&rn;Jt||(Ei=64,Ze||(lr=64)),J.push(te[Re>>2],te[(3&Re)<<4|ht>>4],te[lr],te[Ei])}return J.join("")},encodeString(ge,ee){return this.HAS_NATIVE_SUPPORT&&!ee?btoa(ge):this.encodeByteArray(De(ge),ee)},decodeString(ge,ee){return this.HAS_NATIVE_SUPPORT&&!ee?atob(ge):function(ge){const ee=[];let te=0,J=0;for(;te<ge.length;){const ne=ge[te++];if(ne<128)ee[J++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const Re=ge[te++];ee[J++]=String.fromCharCode((31&ne)<<6|63&Re)}else if(ne>239&&ne<365){const Jt=((7&ne)<<18|(63&ge[te++])<<12|(63&ge[te++])<<6|63&ge[te++])-65536;ee[J++]=String.fromCharCode(55296+(Jt>>10)),ee[J++]=String.fromCharCode(56320+(1023&Jt))}else{const Re=ge[te++],Ze=ge[te++];ee[J++]=String.fromCharCode((15&ne)<<12|(63&Re)<<6|63&Ze)}}return ee.join("")}(this.decodeStringToByteArray(ge,ee))},decodeStringToByteArray(ge,ee){this.init_();const te=ee?this.charToByteMapWebSafe_:this.charToByteMap_,J=[];for(let ne=0;ne<ge.length;){const Re=te[ge.charAt(ne++)],ht=ne<ge.length?te[ge.charAt(ne)]:0;++ne;const rn=ne<ge.length?te[ge.charAt(ne)]:64;++ne;const Ft=ne<ge.length?te[ge.charAt(ne)]:64;if(++ne,null==Re||null==ht||null==rn||null==Ft)throw new Pe;J.push(Re<<2|ht>>4),64!==rn&&(J.push(ht<<4&240|rn>>2),64!==Ft&&J.push(rn<<6&192|Ft))}return J},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ge=0;ge<this.ENCODED_VALS.length;ge++)this.byteToCharMap_[ge]=this.ENCODED_VALS.charAt(ge),this.charToByteMap_[this.byteToCharMap_[ge]]=ge,this.byteToCharMapWebSafe_[ge]=this.ENCODED_VALS_WEBSAFE.charAt(ge),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ge]]=ge,ge>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ge)]=ge,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ge)]=ge)}}};class Pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xe=function(ge){return function(ge){const ee=De(ge);return Ie.encodeByteArray(ee,!0)}(ge).replace(/\./g,"")},le=function(ge){try{return Ie.decodeString(ge,!0)}catch(ee){console.error("base64Decode failed: ",ee)}return null};function be(ge,ee){if(!(ee instanceof Object))return ee;switch(ee.constructor){case Date:return new Date(ee.getTime());case Object:void 0===ge&&(ge={});break;case Array:ge=[];break;default:return ee}for(const te in ee)!ee.hasOwnProperty(te)||!Je(te)||(ge[te]=be(ge[te],ee[te]));return ge}function Je(ge){return"__proto__"!==ge}const ut=()=>{try{return function Ke(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ge=process.env.__FIREBASE_DEFAULTS__;return ge?JSON.parse(ge):void 0})()||(()=>{if(typeof document>"u")return;let ge;try{ge=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ee=ge&&le(ge[1]);return ee&&JSON.parse(ee)})()}catch(ge){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ge}`)}},ce=()=>{var ge;return null===(ge=ut())||void 0===ge?void 0:ge.config},Ve=ge=>{var ee;return null===(ee=ut())||void 0===ee?void 0:ee[`_${ge}`]};class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ee,te)=>{this.resolve=ee,this.reject=te})}wrapCallback(ee){return(te,J)=>{te?this.reject(te):this.resolve(J),"function"==typeof ee&&(this.promise.catch(()=>{}),1===ee.length?ee(te):ee(te,J))}}}function je(ge,ee){if(ge.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const J=ee||"demo-project",ne=ge.iat||0,Re=ge.sub||ge.user_id;if(!Re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ze=Object.assign({iss:`https://securetoken.google.com/${J}`,aud:J,iat:ne,exp:ne+3600,auth_time:ne,sub:Re,user_id:Re,firebase:{sign_in_provider:"custom",identities:{}}},ge);return[xe(JSON.stringify({alg:"none",type:"JWT"})),xe(JSON.stringify(Ze)),""].join(".")}function Ye(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function nt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function fe(){var ge;const ee=null===(ge=ut())||void 0===ge?void 0:ge.forceEnvironment;if("node"===ee)return!0;if("browser"===ee)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Qt(){return"object"==typeof self&&self.self===self}function ct(){const ge="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ge&&void 0!==ge.id}function Hn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xn(){const ge=Ye();return ge.indexOf("MSIE ")>=0||ge.indexOf("Trident/")>=0}function Dt(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function me(){try{return"object"==typeof indexedDB}catch{return!1}}function ye(){return new Promise((ge,ee)=>{try{let te=!0;const J="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(J);ne.onsuccess=()=>{ne.result.close(),te||self.indexedDB.deleteDatabase(J),ge(!0)},ne.onupgradeneeded=()=>{te=!1},ne.onerror=()=>{var Re;ee((null===(Re=ne.error)||void 0===Re?void 0:Re.message)||"")}}catch(te){ee(te)}})}class Ae extends Error{constructor(ee,te,J){super(te),this.code=ee,this.customData=J,this.name="FirebaseError",Object.setPrototypeOf(this,Ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ue.prototype.create)}}class Ue{constructor(ee,te,J){this.service=ee,this.serviceName=te,this.errors=J}create(ee,...te){const J=te[0]||{},ne=`${this.service}/${ee}`,Re=this.errors[ee],Ze=Re?function yt(ge,ee){return ge.replace(dt,(te,J)=>{const ne=ee[J];return null!=ne?String(ne):`<${J}?>`})}(Re,J):"Error";return new Ae(ne,`${this.serviceName}: ${Ze} (${ne}).`,J)}}const dt=/\{\$([^}]+)}/g;function $n(ge,ee){return Object.prototype.hasOwnProperty.call(ge,ee)}function yn(ge){for(const ee in ge)if(Object.prototype.hasOwnProperty.call(ge,ee))return!1;return!0}function er(ge,ee){if(ge===ee)return!0;const te=Object.keys(ge),J=Object.keys(ee);for(const ne of te){if(!J.includes(ne))return!1;const Re=ge[ne],Ze=ee[ne];if(Li(Re)&&Li(Ze)){if(!er(Re,Ze))return!1}else if(Re!==Ze)return!1}for(const ne of J)if(!te.includes(ne))return!1;return!0}function Li(ge){return null!==ge&&"object"==typeof ge}function Qn(ge){const ee=[];for(const[te,J]of Object.entries(ge))Array.isArray(J)?J.forEach(ne=>{ee.push(encodeURIComponent(te)+"="+encodeURIComponent(ne))}):ee.push(encodeURIComponent(te)+"="+encodeURIComponent(J));return ee.length?"&"+ee.join("&"):""}function qt(ge){const ee={};return ge.replace(/^\?/,"").split("&").forEach(J=>{if(J){const[ne,Re]=J.split("=");ee[decodeURIComponent(ne)]=decodeURIComponent(Re)}}),ee}function _n(ge){const ee=ge.indexOf("?");if(!ee)return"";const te=ge.indexOf("#",ee);return ge.substring(ee,te>0?te:void 0)}function Ln(ge,ee){const te=new Vn(ge,ee);return te.subscribe.bind(te)}class Vn{constructor(ee,te){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=te,this.task.then(()=>{ee(this)}).catch(J=>{this.error(J)})}next(ee){this.forEachObserver(te=>{te.next(ee)})}error(ee){this.forEachObserver(te=>{te.error(ee)}),this.close(ee)}complete(){this.forEachObserver(ee=>{ee.complete()}),this.close()}subscribe(ee,te,J){let ne;if(void 0===ee&&void 0===te&&void 0===J)throw new Error("Missing Observer.");ne=function zn(ge,ee){if("object"!=typeof ge||null===ge)return!1;for(const te of ee)if(te in ge&&"function"==typeof ge[te])return!0;return!1}(ee,["next","error","complete"])?ee:{next:ee,error:te,complete:J},void 0===ne.next&&(ne.next=wr),void 0===ne.error&&(ne.error=wr),void 0===ne.complete&&(ne.complete=wr);const Re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch{}}),this.observers.push(ne),Re}unsubscribeOne(ee){void 0===this.observers||void 0===this.observers[ee]||(delete this.observers[ee],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ee){if(!this.finalized)for(let te=0;te<this.observers.length;te++)this.sendOne(te,ee)}sendOne(ee,te){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ee])try{te(this.observers[ee])}catch(J){typeof console<"u"&&console.error&&console.error(J)}})}close(ee){this.finalized||(this.finalized=!0,void 0!==ee&&(this.finalError=ee),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wr(){}function os(ge){return ge&&ge._delegate?ge._delegate:ge}},1626:(Nt,He,z)=>{z.r(He),z.d(He,{PagesModule:()=>Ge});var w=z(6814),ue=z(9692),q=z(7398);class De{constructor(k,b,B,X){this.id=k,this.name=b,this.roomService=B,this.router=X}delete(){this.roomService.deleteRoom(this.id)}join(){this.router.navigate(["room",this.id])}}class ve{constructor(k,b,B,X=!0){this.userId=k,this.userName=b,this.value=B,this.hidden=X}updateVote(k){this.value=k}showVote(){this.hidden=!1}updateValues(k){this.updateCurrentVote(k.value),this.updateHidden(k.hidden)}updateHidden(k){this.hidden!==k&&(this.hidden=k)}updateCurrentVote(k){this.value!==k&&(this.value=k)}}class Ie{constructor(k,b=[]){this.name=k,this.votes=b}vote(k){this.votes=this.votes.filter(b=>b.userId!==k.userId),this.votes.push(k)}deleteVote(k){this.votes=this.votes.filter(b=>b!==k)}showVotes(){this.votes.forEach(k=>k.showVote())}revote(){this.votes=[]}getResult(){const k=this.votes.length;return Math.round(this.votes.reduce((b,B)=>b+B.value/k,0))}updateValues(k){this.updateName(k.name),this.updateVotes(k.votes)}updateName(k){this.name===k||!k||(this.name=k)}updateVotes(k){this.votes!==k&&(0===k.length?this.votes=[]:k.forEach(b=>{const B=this.votes.find(X=>X.userId===b.userId);B?B.updateValues(b):this.pushVote(b),this.votes=this.votes.filter(X=>k.map($e=>$e.userId).includes(X.userId))}))}pushVote(k){this.votes.push(new ve(k.userId,k.userName,k.value,k.hidden))}}class Pe{get name(){return this._name}get creator(){return this._creator}constructor(k,b,B=[],X=0,$e){this.tasks=B,this.currentTask=X,this.id=$e,this._name=k,this._creator=b}createTask(k){this.tasks.push(new Ie(k))}nextTask(){this.currentTask==this.tasks.length-1||this.currentTask++}previousTask(){0==this.currentTask||this.currentTask--}deleteTask(k){this.tasks=this.tasks.filter(b=>b!==k),this.setTaskIndex(0)}setTaskIndex(k){this.currentTask=k}updateValues(k){this.updateName(k.name),this.updateCreator(k.creator),this.updateTasks(k.tasks),this.updateCurrentTask(k.currentTask)}updateName(k){this._name===k||!k||(this._name=k)}updateCreator(k){this._creator===k||!k||(this._creator=k)}updateTasks(k){this.tasks!==k&&(0===k.length?this.tasks=[]:k.forEach(b=>{const B=this.tasks.find(X=>X.name===b.name);B?B.updateValues(b):this.pushTask(b),this.tasks=this.tasks.filter(X=>k.map($e=>$e.name).includes(X.name))}))}pushTask(k){this.tasks.push(new Ie(k.name,k.votes.map(b=>new ve(b.userId,b.userName,b.value,b.hidden))))}updateCurrentTask(k){this.currentTask!==k&&(this.currentTask=k)}}var P=z(5879);let xe=(()=>{class M{constructor(){this.objectsForDestruction=[]}toDestroy(b){this.objectsForDestruction.push(b)}ngOnDestroy(){this.objectsForDestruction.forEach(b=>b.unsubscribe())}static#e=this.\u0275fac=function(B){return new(B||M)};static#t=this.\u0275cmp=P.Xpm({type:M,selectors:[["ng-component"]],decls:0,vars:0,template:function(B,X){},encapsulation:2})}return M})();var le=z(9027);let he=(()=>{class M{constructor(b){this.firestore=b}createRoom(b){this.firestore.collection("rooms").add(this.roomObjectModel(b))}updateRoom(b){this.firestore.doc("rooms/"+b.id).update(this.roomObjectModel(b))}deleteRoom(b){this.firestore.doc("rooms/"+b).delete()}listenerRoom(b){return this.firestore.doc("rooms/"+b).valueChanges().pipe((0,q.U)(B=>Object.assign({id:b},B)))}getRooms(){return this.firestore.collection("rooms").snapshotChanges().pipe((0,q.U)(b=>b.map(this.actionToRoomModel)))}actionToRoomModel(b){const B=b.payload.doc.data();return Object.assign({id:b.payload.doc.id},B)}roomObjectModel(b){return Object.assign({name:b.name,creator:b.creator,tasks:b.tasks.map(B=>this.taskObjectModel(B)),currentTask:b.currentTask})}taskObjectModel(b){return Object.assign({name:b.name,votes:b.votes.map(B=>this.voteObjectModel(B))})}voteObjectModel(b){return Object.assign({userId:b.userId,userName:b.userName,value:b.value,hidden:b.hidden})}static#e=this.\u0275fac=function(B){return new(B||M)(P.LFG(le.ST))};static#t=this.\u0275prov=P.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"})}return M})();var be=z(7213),Je=z(5619);let Ke=(()=>{class M{constructor(){this.toDestroy=[]}ngOnDestroy(){this.toDestroy.forEach(b=>b.unsubscribe())}pushToDestroy(b){this.toDestroy.push(b)}static#e=this.\u0275fac=function(B){return new(B||M)};static#t=this.\u0275cmp=P.Xpm({type:M,selectors:[["ng-component"]],decls:0,vars:0,template:function(B,X){},encapsulation:2})}return M})(),ft=(()=>{class M{constructor(){this.escapeKeydown=new P.vpe,this.enterKeydown=new P.vpe}onEscapeKeydown(b){this.escapeKeydown.emit()}onEnterKeydown(b){this.enterKeydown.emit()}static#e=this.\u0275fac=function(B){return new(B||M)};static#t=this.\u0275dir=P.lG2({type:M,selectors:[["","modalKeydowns",""]],hostBindings:function(B,X){1&B&&P.NdJ("keydown.escape",function(ot){return X.onEscapeKeydown(ot)},!1,P.evT)("keydown.enter",function(ot){return X.onEnterKeydown(ot)},!1,P.evT)},outputs:{escapeKeydown:"escapeKeydown",enterKeydown:"enterKeydown"}})}return M})();const tt=["button"];function pt(M,k){if(1&M){const b=P.EpF();P.TgZ(0,"div",2),P.NdJ("click",function(){P.CHM(b);const X=P.oxw();return P.KtG(X.close())}),P.qZA()}}function ut(M,k){if(1&M){const b=P.EpF();P.TgZ(0,"div",3),P.NdJ("escapeKeydown",function(){P.CHM(b);const X=P.oxw();return P.KtG(X.close())}),P.TgZ(1,"div",4)(2,"h1"),P._uU(3),P.qZA()(),P.TgZ(4,"div",5),P.Hsn(5),P.qZA(),P.TgZ(6,"div",6),P.Hsn(7,1),P.qZA()()}if(2&M){const b=P.oxw();P.xp6(3),P.Oqu(b.modalTitle)}}const kt=["*",[["button"]]],Ee=["*","button"];let ce=(()=>{class M extends Ke{constructor(){super(),this.buttons=[],this.modalTitle="",this.isOpen=new Je.X(!1),this.isOpen$=this.isOpen.asObservable(),this.pushToDestroy(this.isOpen)}open(){this.isOpen.next(!0)}close(){this.isOpen.next(!1)}static#e=this.\u0275fac=function(B){return new(B||M)};static#t=this.\u0275cmp=P.Xpm({type:M,selectors:[["app-modal"]],viewQuery:function(B,X){if(1&B&&P.Gf(tt,5),2&B){let $e;P.iGM($e=P.CRH())&&(X.buttons=$e)}},inputs:{modalTitle:"modalTitle"},features:[P.qOj],ngContentSelectors:Ee,decls:4,vars:6,consts:[["class","background",3,"click",4,"ngIf"],["class","modal","modalKeydowns","",3,"escapeKeydown",4,"ngIf"],[1,"background",3,"click"],["modalKeydowns","",1,"modal",3,"escapeKeydown"],[1,"modal__header"],[1,"modal__body"],[1,"modal__footer"]],template:function(B,X){1&B&&(P.F$t(kt),P.YNc(0,pt,1,0,"div",0),P.ALo(1,"async"),P.YNc(2,ut,8,1,"div",1),P.ALo(3,"async")),2&B&&(P.Q6J("ngIf",P.lcZ(1,2,X.isOpen$)),P.xp6(2),P.Q6J("ngIf",P.lcZ(3,4,X.isOpen$)))},dependencies:[w.O5,ft,w.Ov],styles:[".background[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000;opacity:.5;z-index:99}.modal[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fff;padding:20px;border-radius:8px;box-shadow:0 0 10px #00000080;z-index:100}.modal[_ngcontent-%COMP%]   .modal__header[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%]   .modal__body[_ngcontent-%COMP%]{margin-bottom:10px}.modal[_ngcontent-%COMP%]   .modal__footer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row-reverse;gap:10px}"]})}return M})();var Ve=z(4176);let Te=(()=>{class M{constructor(b){this.element=b}ngOnInit(){this.setStyle()}setStyle(){this.element.nativeElement.classList.add("main-input")}static#e=this.\u0275fac=function(B){return new(B||M)(P.Y36(P.SBq))};static#t=this.\u0275dir=P.lG2({type:M,selectors:[["","main-input",""]]})}return M})(),je=(()=>{class M{static#e=this.\u0275fac=function(B){return new(B||M)};static#t=this.\u0275cmp=P.Xpm({type:M,selectors:[["app-room-item"]],inputs:{room:"room"},decls:8,vars:1,consts:[[1,"room"],[1,"room__name"],[1,"buttons"],["main-button","",3,"click"],["main-button","","theme","error",3,"click"]],template:function(B,X){1&B&&(P.TgZ(0,"div",0)(1,"h2",1),P._uU(2),P.qZA(),P.TgZ(3,"div",2)(4,"button",3),P.NdJ("click",function(){return X.room.join()}),P._uU(5,"Entrar"),P.qZA(),P.TgZ(6,"button",4),P.NdJ("click",function(){return X.room.delete()}),P._uU(7,"Deletar"),P.qZA()()()),2&B&&(P.xp6(2),P.Oqu(X.room.name))},dependencies:[Ve.j],styles:[".room[_ngcontent-%COMP%]{background:transparent;display:flex;justify-content:space-between}.room[_ngcontent-%COMP%]   .room__name[_ngcontent-%COMP%]{padding:0 16px}.room[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;gap:10px;margin-right:10px}"]})}return M})();const Ye=["modal"];function nt(M,k){1&M&&P._UZ(0,"app-room-item",14),2&M&&P.Q6J("room",k.$implicit)}function fe(M,k){1&M&&(P.TgZ(0,"h3",15),P._uU(1,"N\xe3o h\xe1 salas no momento!"),P.qZA())}let Qt=(()=>{class M extends xe{constructor(b,B,X){super(),this.roomService=b,this.userAuth=B,this.router=X,this.rooms=[]}ngOnInit(){this.toDestroy(this.roomService.getRooms().pipe((0,q.U)(b=>b.map(B=>new De(B.id,B.name,this.roomService,this.router)))).subscribe({next:b=>this.rooms=b,error:b=>{throw b}}))}createRoom(b){this.isNullOrEmpty(b)||this.userAuth.currentUser.then(B=>this.roomService.createRoom(new Pe(b,B?.uid))).finally(()=>this.modal.close())}isNullOrEmpty(b){return null==b||""===b}static#e=this.\u0275fac=function(B){return new(B||M)(P.Y36(he),P.Y36(be.zQ),P.Y36(ue.F0))};static#t=this.\u0275cmp=P.Xpm({type:M,selectors:[["app-rooms"]],viewQuery:function(B,X){if(1&B&&P.Gf(Ye,5),2&B){let $e;P.iGM($e=P.CRH())&&(X.modal=$e.first)}},features:[P.qOj],decls:18,vars:2,consts:[[1,"rooms-content"],[1,"actions"],[1,"rooms__header"],["main-button","","theme","primary",3,"click"],[1,"rooms"],[1,"rooms__list"],[3,"room",4,"ngFor","ngForOf"],["class","no-room",4,"ngIf"],["modalTitle","Criar sala"],["modal",""],["main-input","","type","text","placeholder","Digite o nome da sala",1,"input"],["name",""],["main-button","",3,"click"],["main-button","","theme","error",3,"click"],[3,"room"],[1,"no-room"]],template:function(B,X){if(1&B){const $e=P.EpF();P.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),P._uU(3,"Escolha ou crie uma sala"),P.qZA(),P.TgZ(4,"button",3),P.NdJ("click",function(){P.CHM($e);const nn=P.MAs(11);return P.KtG(nn.open())}),P._uU(5,"Criar sala"),P.qZA()(),P.TgZ(6,"div",4)(7,"div",5),P.YNc(8,nt,1,1,"app-room-item",6),P.YNc(9,fe,2,0,"h3",7),P.qZA()()(),P.TgZ(10,"app-modal",8,9),P._UZ(12,"input",10,11),P.TgZ(14,"button",12),P.NdJ("click",function(){P.CHM($e);const nn=P.MAs(13);return P.KtG(X.createRoom(nn.value))}),P._uU(15,"Criar"),P.qZA(),P.TgZ(16,"button",13),P.NdJ("click",function(){P.CHM($e);const nn=P.MAs(11);return P.KtG(nn.close())}),P._uU(17,"Cancelar"),P.qZA()()}2&B&&(P.xp6(8),P.Q6J("ngForOf",X.rooms),P.xp6(1),P.Q6J("ngIf",0==X.rooms.length))},dependencies:[w.sg,w.O5,ce,Ve.j,Te,je],styles:[".rooms-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{max-width:1260px;margin:0 auto 16px;display:flex;justify-content:space-between}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]{max-width:1260px;display:block;margin:0 auto}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]{border:1px solid gray;border-radius:4px;width:100%}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   app-room-item[_ngcontent-%COMP%]{display:block;padding:10px 0}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   .no-room[_ngcontent-%COMP%]{line-height:3.25rem;text-align:center}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2n){background-color:#f5f5f5}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{border-radius:4px 4px 0 0}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:last-child{border-radius:0 0 4px 4px}"]})}return M})();var ct=z(2459),Hn=z(5592),un=z(7453),Xn=z(4829),Tn=z(4564),bt=z(8251),Dt=z(7400),me=z(2714);let Fe=(()=>{class M{constructor(b,B){this._renderer=b,this._elementRef=B,this.onChange=X=>{},this.onTouched=()=>{}}setProperty(b,B){this._renderer.setProperty(this._elementRef.nativeElement,b,B)}registerOnTouched(b){this.onTouched=b}registerOnChange(b){this.onChange=b}setDisabledState(b){this.setProperty("disabled",b)}static#e=this.\u0275fac=function(B){return new(B||M)(P.Y36(P.Qsj),P.Y36(P.SBq))};static#t=this.\u0275dir=P.lG2({type:M})}return M})(),Ce=(()=>{class M extends Fe{static#e=this.\u0275fac=function(){let b;return function(X){return(b||(b=P.n5z(M)))(X||M)}}();static#t=this.\u0275dir=P.lG2({type:M,features:[P.qOj]})}return M})();const Ae=new P.OlP("NgValueAccessor"),dt={provide:Ae,useExisting:(0,P.Gpc)(()=>Dn),multi:!0},St=new P.OlP("CompositionEventMode");let Dn=(()=>{class M extends Fe{constructor(b,B,X){super(b,B),this._compositionMode=X,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function fr(){const M=(0,w.q)()?(0,w.q)().getUserAgent():"";return/android (\d+)/.test(M.toLowerCase())}())}writeValue(b){this.setProperty("value",b??"")}_handleInput(b){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(b)}_compositionStart(){this._composing=!0}_compositionEnd(b){this._composing=!1,this._compositionMode&&this.onChange(b)}static#e=this.\u0275fac=function(B){return new(B||M)(P.Y36(P.Qsj),P.Y36(P.SBq),P.Y36(St,8))};static#t=this.\u0275dir=P.lG2({type:M,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(B,X){1&B&&P.NdJ("input",function(ot){return X._handleInput(ot.target.value)})("blur",function(){return X.onTouched()})("compositionstart",function(){return X._compositionStart()})("compositionend",function(ot){return X._compositionEnd(ot.target.value)})},features:[P._Bn([dt]),P.qOj]})}return M})();const sn=new P.OlP("NgValidators"),mn=new P.OlP("NgAsyncValidators");function Ln(M){return null!=M}function Vn(M){return(0,P.QGY)(M)?(0,ct.D)(M):M}function Yr(M){let k={};return M.forEach(b=>{k=null!=b?{...k,...b}:k}),0===Object.keys(k).length?null:k}function zn(M,k){return k.map(b=>b(M))}function _o(M){return M.map(k=>function wr(M){return!M.validate}(k)?k:b=>k.validate(b))}function Zi(M){return null!=M?function xt(M){if(!M)return null;const k=M.filter(Ln);return 0==k.length?null:function(b){return Yr(zn(b,k))}}(_o(M)):null}function _r(M){return null!=M?function ln(M){if(!M)return null;const k=M.filter(Ln);return 0==k.length?null:function(b){return function ye(...M){const k=(0,Tn.jO)(M),{args:b,keys:B}=(0,un.D)(M),X=new Hn.y($e=>{const{length:ot}=b;if(!ot)return void $e.complete();const nn=new Array(ot);let Wn=ot,Kr=ot;for(let Di=0;Di<ot;Di++){let Xr=!1;(0,Xn.Xf)(b[Di]).subscribe((0,bt.x)($e,zi=>{Xr||(Xr=!0,Kr--),nn[Di]=zi},()=>Wn--,void 0,()=>{(!Wn||!Xr)&&(Kr||$e.next(B?(0,me.n)(B,nn):nn),$e.complete())}))}});return k?X.pipe((0,Dt.Z)(k)):X}(zn(b,k).map(Vn)).pipe((0,q.U)(Yr))}}(_o(M)):null}function pn(M,k){return null===M?[k]:Array.isArray(M)?[...M,k]:[M,k]}function Qi(M){return M._rawValidators}function Br(M){return M._rawAsyncValidators}function ai(M){return M?Array.isArray(M)?M:[M]:[]}function Lr(M,k){return Array.isArray(M)?M.includes(k):M===k}function jr(M,k){const b=ai(k);return ai(M).forEach(X=>{Lr(b,X)||b.push(X)}),b}function vi(M,k){return ai(k).filter(b=>!Lr(M,b))}class Vi{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(k){this._rawValidators=k||[],this._composedValidatorFn=Zi(this._rawValidators)}_setAsyncValidators(k){this._rawAsyncValidators=k||[],this._composedAsyncValidatorFn=_r(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(k){this._onDestroyCallbacks.push(k)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(k=>k()),this._onDestroyCallbacks=[]}reset(k=void 0){this.control&&this.control.reset(k)}hasError(k,b){return!!this.control&&this.control.hasError(k,b)}getError(k,b){return this.control?this.control.getError(k,b):null}}class Or extends Vi{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class os{constructor(k){this._cd=k}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let te=(()=>{class M extends os{constructor(b){super(b)}static#e=this.\u0275fac=function(B){return new(B||M)(P.Y36(Or,2))};static#t=this.\u0275dir=P.lG2({type:M,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(B,X){2&B&&P.ekj("ng-untouched",X.isUntouched)("ng-touched",X.isTouched)("ng-pristine",X.isPristine)("ng-dirty",X.isDirty)("ng-valid",X.isValid)("ng-invalid",X.isInvalid)("ng-pending",X.isPending)},features:[P.qOj]})}return M})();const It="VALID",Xt="INVALID",Gn="PENDING",qn="DISABLED";function Ws(M){return null!=M&&!Array.isArray(M)&&"object"==typeof M}class Qo{constructor(k,b){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(k),this._assignAsyncValidators(b)}get validator(){return this._composedValidatorFn}set validator(k){this._rawValidators=this._composedValidatorFn=k}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(k){this._rawAsyncValidators=this._composedAsyncValidatorFn=k}get parent(){return this._parent}get valid(){return this.status===It}get invalid(){return this.status===Xt}get pending(){return this.status==Gn}get disabled(){return this.status===qn}get enabled(){return this.status!==qn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(k){this._assignValidators(k)}setAsyncValidators(k){this._assignAsyncValidators(k)}addValidators(k){this.setValidators(jr(k,this._rawValidators))}addAsyncValidators(k){this.setAsyncValidators(jr(k,this._rawAsyncValidators))}removeValidators(k){this.setValidators(vi(k,this._rawValidators))}removeAsyncValidators(k){this.setAsyncValidators(vi(k,this._rawAsyncValidators))}hasValidator(k){return Lr(this._rawValidators,k)}hasAsyncValidator(k){return Lr(this._rawAsyncValidators,k)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(k={}){this.touched=!0,this._parent&&!k.onlySelf&&this._parent.markAsTouched(k)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(k=>k.markAllAsTouched())}markAsUntouched(k={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(b=>{b.markAsUntouched({onlySelf:!0})}),this._parent&&!k.onlySelf&&this._parent._updateTouched(k)}markAsDirty(k={}){this.pristine=!1,this._parent&&!k.onlySelf&&this._parent.markAsDirty(k)}markAsPristine(k={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(b=>{b.markAsPristine({onlySelf:!0})}),this._parent&&!k.onlySelf&&this._parent._updatePristine(k)}markAsPending(k={}){this.status=Gn,!1!==k.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!k.onlySelf&&this._parent.markAsPending(k)}disable(k={}){const b=this._parentMarkedDirty(k.onlySelf);this.status=qn,this.errors=null,this._forEachChild(B=>{B.disable({...k,onlySelf:!0})}),this._updateValue(),!1!==k.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...k,skipPristineCheck:b}),this._onDisabledChange.forEach(B=>B(!0))}enable(k={}){const b=this._parentMarkedDirty(k.onlySelf);this.status=It,this._forEachChild(B=>{B.enable({...k,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:k.emitEvent}),this._updateAncestors({...k,skipPristineCheck:b}),this._onDisabledChange.forEach(B=>B(!1))}_updateAncestors(k){this._parent&&!k.onlySelf&&(this._parent.updateValueAndValidity(k),k.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(k){this._parent=k}getRawValue(){return this.value}updateValueAndValidity(k={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===It||this.status===Gn)&&this._runAsyncValidator(k.emitEvent)),!1!==k.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!k.onlySelf&&this._parent.updateValueAndValidity(k)}_updateTreeValidity(k={emitEvent:!0}){this._forEachChild(b=>b._updateTreeValidity(k)),this.updateValueAndValidity({onlySelf:!0,emitEvent:k.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qn:It}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(k){if(this.asyncValidator){this.status=Gn,this._hasOwnPendingAsyncValidator=!0;const b=Vn(this.asyncValidator(this));this._asyncValidationSubscription=b.subscribe(B=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(B,{emitEvent:k})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(k,b={}){this.errors=k,this._updateControlsErrors(!1!==b.emitEvent)}get(k){let b=k;return null==b||(Array.isArray(b)||(b=b.split(".")),0===b.length)?null:b.reduce((B,X)=>B&&B._find(X),this)}getError(k,b){const B=b?this.get(b):this;return B&&B.errors?B.errors[k]:null}hasError(k,b){return!!this.getError(k,b)}get root(){let k=this;for(;k._parent;)k=k._parent;return k}_updateControlsErrors(k){this.status=this._calculateStatus(),k&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(k)}_initObservables(){this.valueChanges=new P.vpe,this.statusChanges=new P.vpe}_calculateStatus(){return this._allControlsDisabled()?qn:this.errors?Xt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Gn)?Gn:this._anyControlsHaveStatus(Xt)?Xt:It}_anyControlsHaveStatus(k){return this._anyControls(b=>b.status===k)}_anyControlsDirty(){return this._anyControls(k=>k.dirty)}_anyControlsTouched(){return this._anyControls(k=>k.touched)}_updatePristine(k={}){this.pristine=!this._anyControlsDirty(),this._parent&&!k.onlySelf&&this._parent._updatePristine(k)}_updateTouched(k={}){this.touched=this._anyControlsTouched(),this._parent&&!k.onlySelf&&this._parent._updateTouched(k)}_registerOnCollectionChange(k){this._onCollectionChange=k}_setUpdateStrategy(k){Ws(k)&&null!=k.updateOn&&(this._updateOn=k.updateOn)}_parentMarkedDirty(k){return!k&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(k){return null}_assignValidators(k){this._rawValidators=Array.isArray(k)?k.slice():k,this._composedValidatorFn=function Jr(M){return Array.isArray(M)?Zi(M):M||null}(this._rawValidators)}_assignAsyncValidators(k){this._rawAsyncValidators=Array.isArray(k)?k.slice():k,this._composedAsyncValidatorFn=function vo(M){return Array.isArray(M)?_r(M):M||null}(this._rawAsyncValidators)}}const Ji=new P.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>co}),co="always";function Hr(M,k,b=co){(function us(M,k){const b=Qi(M);null!==k.validator?M.setValidators(pn(b,k.validator)):"function"==typeof b&&M.setValidators([b]);const B=Br(M);null!==k.asyncValidator?M.setAsyncValidators(pn(B,k.asyncValidator)):"function"==typeof B&&M.setAsyncValidators([B]);const X=()=>M.updateValueAndValidity();Is(k._rawValidators,X),Is(k._rawAsyncValidators,X)})(M,k),k.valueAccessor.writeValue(M.value),(M.disabled||"always"===b)&&k.valueAccessor.setDisabledState?.(M.disabled),function $r(M,k){k.valueAccessor.registerOnChange(b=>{M._pendingValue=b,M._pendingChange=!0,M._pendingDirty=!0,"change"===M.updateOn&&li(M,k)})}(M,k),function xo(M,k){const b=(B,X)=>{k.valueAccessor.writeValue(B),X&&k.viewToModelUpdate(B)};M.registerOnChange(b),k._registerOnDestroy(()=>{M._unregisterOnChange(b)})}(M,k),function du(M,k){k.valueAccessor.registerOnTouched(()=>{M._pendingTouched=!0,"blur"===M.updateOn&&M._pendingChange&&li(M,k),"submit"!==M.updateOn&&M.markAsTouched()})}(M,k),function Mi(M,k){if(k.valueAccessor.setDisabledState){const b=B=>{k.valueAccessor.setDisabledState(B)};M.registerOnDisabledChange(b),k._registerOnDestroy(()=>{M._unregisterOnDisabledChange(b)})}}(M,k)}function ui(M,k,b=!0){const B=()=>{};k.valueAccessor&&(k.valueAccessor.registerOnChange(B),k.valueAccessor.registerOnTouched(B)),function Qs(M,k){let b=!1;if(null!==M){if(null!==k.validator){const X=Qi(M);if(Array.isArray(X)&&X.length>0){const $e=X.filter(ot=>ot!==k.validator);$e.length!==X.length&&(b=!0,M.setValidators($e))}}if(null!==k.asyncValidator){const X=Br(M);if(Array.isArray(X)&&X.length>0){const $e=X.filter(ot=>ot!==k.asyncValidator);$e.length!==X.length&&(b=!0,M.setAsyncValidators($e))}}}const B=()=>{};return Is(k._rawValidators,B),Is(k._rawAsyncValidators,B),b}(M,k),M&&(k._invokeOnDestroyCallbacks(),M._registerOnCollectionChange(()=>{}))}function Is(M,k){M.forEach(b=>{b.registerOnValidatorChange&&b.registerOnValidatorChange(k)})}function li(M,k){M._pendingDirty&&M.markAsDirty(),M.setValue(M._pendingValue,{emitModelToViewChange:!1}),k.viewToModelUpdate(M._pendingValue),M._pendingChange=!1}function ks(M,k){const b=M.indexOf(k);b>-1&&M.splice(b,1)}function ws(M){return"object"==typeof M&&null!==M&&2===Object.keys(M).length&&"value"in M&&"disabled"in M}const Ts=class extends Qo{constructor(k=null,b,B){super(function ti(M){return(Ws(M)?M.validators:M)||null}(b),function as(M,k){return(Ws(k)?k.asyncValidators:M)||null}(B,b)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(k),this._setUpdateStrategy(b),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ws(b)&&(b.nonNullable||b.initialValueIsDefault)&&(this.defaultValue=ws(k)?k.value:k)}setValue(k,b={}){this.value=this._pendingValue=k,this._onChange.length&&!1!==b.emitModelToViewChange&&this._onChange.forEach(B=>B(this.value,!1!==b.emitViewToModelChange)),this.updateValueAndValidity(b)}patchValue(k,b={}){this.setValue(k,b)}reset(k=this.defaultValue,b={}){this._applyFormState(k),this.markAsPristine(b),this.markAsUntouched(b),this.setValue(this.value,b),this._pendingChange=!1}_updateValue(){}_anyControls(k){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(k){this._onChange.push(k)}_unregisterOnChange(k){ks(this._onChange,k)}registerOnDisabledChange(k){this._onDisabledChange.push(k)}_unregisterOnDisabledChange(k){ks(this._onDisabledChange,k)}_forEachChild(k){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(k){ws(k)?(this.value=this._pendingValue=k.value,k.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=k}};let ji=(()=>{class M{static#e=this.\u0275fac=function(B){return new(B||M)};static#t=this.\u0275mod=P.oAB({type:M});static#n=this.\u0275inj=P.cJS({})}return M})();const Xi=new P.OlP("NgModelWithFormControlWarning"),Ls={provide:Or,useExisting:(0,P.Gpc)(()=>Hi)};let Hi=(()=>{class M extends Or{set isDisabled(b){}static#e=this._ngModelWarningSentOnce=!1;constructor(b,B,X,$e,ot){super(),this._ngModelWarningConfig=$e,this.callSetDisabledState=ot,this.update=new P.vpe,this._ngModelWarningSent=!1,this._setValidators(b),this._setAsyncValidators(B),this.valueAccessor=function tr(M,k){if(!k)return null;let b,B,X;return Array.isArray(k),k.forEach($e=>{$e.constructor===Dn?b=$e:function Ns(M){return Object.getPrototypeOf(M.constructor)===Ce}($e)?B=$e:X=$e}),X||B||b||null}(0,X)}ngOnChanges(b){if(this._isControlChanged(b)){const B=b.form.previousValue;B&&ui(B,this,!1),Hr(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}(function zr(M,k){if(!M.hasOwnProperty("model"))return!1;const b=M.model;return!!b.isFirstChange()||!Object.is(k,b.currentValue)})(b,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&ui(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(b){this.viewModel=b,this.update.emit(b)}_isControlChanged(b){return b.hasOwnProperty("form")}static#t=this.\u0275fac=function(B){return new(B||M)(P.Y36(sn,10),P.Y36(mn,10),P.Y36(Ae,10),P.Y36(Xi,8),P.Y36(Ji,8))};static#n=this.\u0275dir=P.lG2({type:M,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[P._Bn([Ls]),P.qOj,P.TTD]})}return M})(),sr=(()=>{class M{static#e=this.\u0275fac=function(B){return new(B||M)};static#t=this.\u0275mod=P.oAB({type:M});static#n=this.\u0275inj=P.cJS({imports:[ji]})}return M})(),wo=(()=>{class M{static withConfig(b){return{ngModule:M,providers:[{provide:Ji,useValue:b.callSetDisabledState??co}]}}static#e=this.\u0275fac=function(B){return new(B||M)};static#t=this.\u0275mod=P.oAB({type:M});static#n=this.\u0275inj=P.cJS({imports:[sr]})}return M})(),eo=(()=>{class M{static withConfig(b){return{ngModule:M,providers:[{provide:Xi,useValue:b.warnOnNgModelWithFormControl??"always"},{provide:Ji,useValue:b.callSetDisabledState??co}]}}static#e=this.\u0275fac=function(B){return new(B||M)};static#t=this.\u0275mod=P.oAB({type:M});static#n=this.\u0275inj=P.cJS({imports:[sr]})}return M})();const za=["modal"];function wa(M,k){if(1&M){const b=P.EpF();P.TgZ(0,"div",13)(1,"div",14)(2,"button",9),P.NdJ("click",function(){P.CHM(b);const X=P.oxw();return P.KtG(X.setTask(0))}),P._uU(3),P.qZA(),P.TgZ(4,"button",9),P.NdJ("click",function(){P.CHM(b);const X=P.oxw();return P.KtG(X.previousTask())}),P._uU(5),P.qZA()(),P.TgZ(6,"h3"),P._uU(7),P.qZA(),P.TgZ(8,"div",15)(9,"button",9),P.NdJ("click",function(){P.CHM(b);const X=P.oxw();return P.KtG(X.nextTask())}),P._uU(10),P.qZA(),P.TgZ(11,"button",9),P.NdJ("click",function(){P.CHM(b);const X=P.oxw();return P.KtG(X.setTask(X.room.tasks.length-1))}),P._uU(12),P.qZA()()()}if(2&M){const b=P.oxw();P.xp6(2),P.Q6J("disabled",0==b.room.currentTask),P.xp6(1),P.Oqu("<<"),P.xp6(1),P.Q6J("disabled",0==b.room.currentTask),P.xp6(1),P.Oqu("<"),P.xp6(2),P.Oqu(b.room.tasks[b.room.currentTask].name),P.xp6(2),P.Q6J("disabled",b.room.currentTask==b.room.tasks.length-1),P.xp6(1),P.Oqu(">"),P.xp6(1),P.Q6J("disabled",b.room.currentTask==b.room.tasks.length-1),P.xp6(1),P.Oqu(">>")}}function fu(M,k){1&M&&(P.TgZ(0,"h3",16),P._uU(1,"N\xe3o h\xe1 tasks no momento"),P.qZA())}function To(M,k){if(1&M){const b=P.EpF();P.TgZ(0,"div",17)(1,"span",18),P._uU(2),P.qZA(),P.TgZ(3,"button",19),P.NdJ("click",function(){const $e=P.CHM(b).$implicit,ot=P.oxw();return P.KtG(ot.deleteTask($e))}),P._uU(4,"delete"),P.qZA()()}if(2&M){const b=k.$implicit;P.xp6(2),P.Oqu(b.name)}}function aa(M,k){1&M&&(P.TgZ(0,"h3",20),P._uU(1,"N\xe3o h\xe1 tasks no momento"),P.qZA())}let hs=(()=>{class M{constructor(b){this.roomService=b,this.createTaskForm=new Ts("")}ngOnInit(){}nextTask(){this.room.nextTask(),this.roomService.updateRoom(this.room)}previousTask(){this.room.previousTask(),this.roomService.updateRoom(this.room)}setTask(b){this.room.setTaskIndex(b),this.roomService.updateRoom(this.room)}createTask(b){this.room.createTask(b),this.createTaskForm.reset(),this.roomService.updateRoom(this.room)}deleteTask(b){this.room.deleteTask(b),this.roomService.updateRoom(this.room)}static#e=this.\u0275fac=function(B){return new(B||M)(P.Y36(he))};static#t=this.\u0275cmp=P.Xpm({type:M,selectors:[["app-tasks"]],viewQuery:function(B,X){if(1&B&&P.Gf(za,5),2&B){let $e;P.iGM($e=P.CRH())&&(X.modal=$e.first)}},inputs:{room:"room"},decls:16,vars:6,consts:[[1,"update-tasks"],["main-button","",1,"update-tasks-btn",3,"click"],["class","tasks-control",4,"ngIf","ngIfElse"],["noTasks",""],["modalTitle","Tasks"],["modal",""],[1,"create-task"],["main-input","","type","text","placeholder","Digite o nome da task",3,"formControl","keyup"],["name",""],["main-button","",3,"disabled","click"],[1,"task__list"],["class","task",4,"ngFor","ngForOf"],["class","no-tasks-modal",4,"ngIf"],[1,"tasks-control"],[1,"tasks-control__previous"],[1,"tasks-control__next"],[1,"no-tasks"],[1,"task"],[1,"task__name"],["main-button","","theme","error",3,"click"],[1,"no-tasks-modal"]],template:function(B,X){if(1&B){const $e=P.EpF();P.TgZ(0,"div",0)(1,"button",1),P.NdJ("click",function(){P.CHM($e);const nn=P.MAs(7);return P.KtG(nn.open())}),P._uU(2,"Atualizar tasks"),P.qZA()(),P.YNc(3,wa,13,9,"div",2),P.YNc(4,fu,2,0,"ng-template",null,3,P.W1O),P.TgZ(6,"app-modal",4,5)(8,"div",6)(9,"input",7,8),P.NdJ("keyup",function(){return 0}),P.qZA(),P.TgZ(11,"button",9),P.NdJ("click",function(){P.CHM($e);const nn=P.MAs(10);return X.createTask(nn.value),P.KtG(nn.focus())}),P._uU(12,"Criar"),P.qZA()(),P.TgZ(13,"div",10),P.YNc(14,To,5,1,"div",11),P.YNc(15,aa,2,0,"h3",12),P.qZA()()}if(2&B){const $e=P.MAs(5),ot=P.MAs(10);P.xp6(3),P.Q6J("ngIf",X.room.tasks[X.room.currentTask])("ngIfElse",$e),P.xp6(6),P.Q6J("formControl",X.createTaskForm),P.xp6(2),P.Q6J("disabled",!ot.value),P.xp6(3),P.Q6J("ngForOf",X.room.tasks),P.xp6(1),P.Q6J("ngIf",0==X.room.tasks.length)}},dependencies:[w.sg,w.O5,ce,Ve.j,Te,Dn,te,Hi],styles:[".update-tasks[_ngcontent-%COMP%]{margin-bottom:1rem;display:flex;flex-direction:row-reverse}.tasks-control[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;background-color:transparent;border:2px solid #9e9e9e;color:#2e2e2e;border-radius:4px}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%], .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%]{display:flex;gap:5px}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background:transparent}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled), .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled){color:#2e2e2e}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled):hover, .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled):hover{background:#bdbdbd;color:#2e2e2e}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled):active, .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled):active{background:#424242;color:#c2c2c2}.no-tasks[_ngcontent-%COMP%]{border:1px solid gray;border-radius:4px;line-height:3.25rem;text-align:center}app-modal[_ngcontent-%COMP%]   .create-task[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:16px}app-modal[_ngcontent-%COMP%]   .create-task[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]{border:1px solid gray;border-radius:4px}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2n){background-color:#f5f5f5}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-radius:4px 4px 0 0}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-radius:0 0 4px 4px}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   .no-tasks-modal[_ngcontent-%COMP%]{line-height:3.25rem;text-align:center}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]   .task__name[_ngcontent-%COMP%]{max-width:50vw;min-width:180px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;margin-right:1rem}"]})}return M})();class gi{constructor(k,b,B=!1,X){this.type=k,this.value=b,this.isFliped=B,this.creator=X}toggleFlip(){this.isFliped=!this.isFliped}}var Wr=z(6825);const Uo=[(0,Wr.X$)("hover",[(0,Wr.SB)("true",(0,Wr.oB)({transform:"translateY(-20%)"})),(0,Wr.SB)("false",(0,Wr.oB)({transform:"translateY(0)"})),(0,Wr.eR)("true <=> false",(0,Wr.jt)("200ms ease-in-out"))])];var Ss=function(M){return M[M.DIAMONDS=1]="DIAMONDS",M[M.SPADES=2]="SPADES",M[M.HEARTS=3]="HEARTS",M[M.CLUBS=4]="CLUBS",M}(Ss||{});const ol=[(0,Wr.X$)("flipAnimation",[(0,Wr.SB)("true",(0,Wr.oB)({transform:"rotateY(179deg)"})),(0,Wr.SB)("false",(0,Wr.oB)({transform:"rotateY(0)"})),(0,Wr.eR)("true => false",(0,Wr.jt)("500ms ease-out")),(0,Wr.eR)("false => true",(0,Wr.jt)("500ms ease-in"))])];function Ta(M,k){if(1&M&&(P.TgZ(0,"span",10),P._uU(1),P.qZA()),2&M){const b=P.oxw();P.xp6(1),P.Oqu(b.card.creator)}}function Ga(M,k){if(1&M&&(P.TgZ(0,"span",10),P._uU(1),P.qZA()),2&M){const b=P.oxw();P.xp6(1),P.Oqu(b.card.creator)}}let pu=(()=>{class M{constructor(){this.isHovered=!1}getCardType(){switch(this.card.type){case Ss.HEARTS:return"\u2665";case Ss.DIAMONDS:return"\u2666";case Ss.SPADES:return"\u2660";case Ss.CLUBS:return"\u2663"}}getCardValue(){switch(this.card.value){case 1:return"A";case 11:return"J";case 12:return"Q";case 13:return"K";default:return this.card.value}}getClasses(){return{"card-front--red":[Ss.HEARTS,Ss.DIAMONDS].includes(this.card.type),"card-front--black":[Ss.SPADES,Ss.CLUBS].includes(this.card.type)}}changeIsHovered(b){this.isHovered="mouseenter"===b.type}static#e=this.\u0275fac=function(B){return new(B||M)};static#t=this.\u0275cmp=P.Xpm({type:M,selectors:[["app-card"]],hostBindings:function(B,X){1&B&&P.NdJ("mouseenter",function(ot){return X.changeIsHovered(ot)})("mouseleave",function(ot){return X.changeIsHovered(ot)})},inputs:{card:"card"},decls:14,vars:7,consts:[[1,"card"],[1,"card-side","card-front",3,"ngClass"],["class","creator-name",4,"ngIf"],[1,"retangle"],[1,"card-type"],[1,"card-value"],[1,"number"],[1,"type"],[1,"card-side","card-back"],["src","assets/images/back-card.png","alt","card back",1,"back-image"],[1,"creator-name"]],template:function(B,X){1&B&&(P.TgZ(0,"div",0)(1,"div",1),P.YNc(2,Ta,2,1,"span",2),P.TgZ(3,"div",3)(4,"span",4),P._uU(5),P.qZA()(),P.TgZ(6,"div",5)(7,"span",6),P._uU(8),P.qZA(),P.TgZ(9,"span",7),P._uU(10),P.qZA()()(),P.TgZ(11,"div",8),P.YNc(12,Ga,2,1,"span",2),P._UZ(13,"img",9),P.qZA()()),2&B&&(P.Q6J("@flipAnimation",X.card.isFliped),P.xp6(1),P.Q6J("ngClass",X.getClasses()),P.xp6(1),P.Q6J("ngIf",X.card.creator),P.xp6(3),P.Oqu(X.getCardType()),P.xp6(3),P.Oqu(X.getCardValue()),P.xp6(2),P.Oqu(X.getCardType()),P.xp6(2),P.Q6J("ngIf",X.card.creator))},dependencies:[w.mk,w.O5],styles:[".card[_ngcontent-%COMP%]{position:relative;width:6rem;height:8rem;background-color:#f8f9fa;border-radius:8px;box-shadow:0 0 10px #00000026;transform-style:preserve-3d;transform:transform 1s}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;transform:rotateY(0)}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .retangle[_ngcontent-%COMP%]{width:60%;height:65%;border-radius:6px;display:flex;align-items:center;justify-content:center}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .retangle[_ngcontent-%COMP%]   .card-type[_ngcontent-%COMP%]{font-size:2rem}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{position:absolute;top:0;left:.5rem}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{font-size:.75rem}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .creator-name[_ngcontent-%COMP%]{position:absolute;top:0;right:.5rem;font-size:.75rem;max-width:3.25rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:700}.card[_ngcontent-%COMP%]   .card-front--red[_ngcontent-%COMP%]{color:red}.card[_ngcontent-%COMP%]   .card-front--red[_ngcontent-%COMP%]   .retangle[_ngcontent-%COMP%]{border:2px solid red}.card[_ngcontent-%COMP%]   .card-front--black[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]   .card-front--black[_ngcontent-%COMP%]   .retangle[_ngcontent-%COMP%]{border:2px solid black}.card[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]{transform:rotateY(-180deg)}.card[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]   .back-image[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:8px;background-size:cover;background-position:center}.card[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]   .creator-name[_ngcontent-%COMP%]{position:absolute;display:block;top:.25rem;right:.25rem;max-width:5rem;padding:0 .5rem;font-size:.75rem;line-height:1.5rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:700;background:black;color:#fff;border:2px solid white;border-radius:6px}.card[_ngcontent-%COMP%]   .card-side[_ngcontent-%COMP%]{backface-visibility:hidden;width:100%;height:100%;border-radius:8px;position:absolute;-webkit-user-select:none;user-select:none}"],data:{animation:ol}})}return M})();function rs(M,k){if(1&M){const b=P.EpF();P.TgZ(0,"div",5)(1,"button",6),P.NdJ("click",function(){P.CHM(b);const X=P.oxw();return P.KtG(X.showVotes())}),P._uU(2,"Virar cartas"),P.qZA(),P.TgZ(3,"button",7),P.NdJ("click",function(){P.CHM(b);const X=P.oxw();return P.KtG(X.revote())}),P._uU(4,"Revotar"),P.qZA()()}if(2&M){const b=P.oxw();P.xp6(1),P.Q6J("disabled",b.flippedVotes),P.xp6(2),P.Q6J("disabled",!b.flippedVotes)}}function ua(M,k){if(1&M&&P._UZ(0,"app-card",8),2&M){const b=k.$implicit,B=P.oxw();P.Q6J("card",B.mapVote(b))}}function Lu(M,k){if(1&M){const b=P.EpF();P.TgZ(0,"app-card",11,12),P.NdJ("click",function(){const $e=P.CHM(b).$implicit,ot=P.oxw(2);return P.KtG(ot.vote($e.value))}),P.qZA()}if(2&M){const b=k.$implicit,B=P.MAs(1);P.Q6J("@hover",B.isHovered)("card",b)}}function to(M,k){if(1&M&&(P.TgZ(0,"div",9),P.YNc(1,Lu,2,2,"app-card",10),P.qZA()),2&M){const b=P.oxw();P.xp6(1),P.Q6J("ngForOf",b.cards)}}let al=(()=>{class M{get task(){return this.room.tasks[this.room.currentTask]}get flippedVotes(){return this.task.votes.some(b=>!b.hidden)}constructor(b,B){this.userAuth=b,this.roomService=B,this.cards=[new gi(1,1),new gi(2,2),new gi(3,3),new gi(4,5),new gi(1,8),new gi(2,13),new gi(3,21),new gi(4,34),new gi(1,55),new gi(2,89)]}mapVote(b){return new gi(Ss.HEARTS,b.value,b.hidden,b.userName)}vote(b){this.flippedVotes||this.userAuth.currentUser.then(B=>this.task.vote(new ve(B?.uid,B?.displayName,b))).finally(()=>this.roomService.updateRoom(this.room))}showVotes(){this.flippedVotes||(this.task.showVotes(),this.roomService.updateRoom(this.room))}revote(){this.task.revote(),this.roomService.updateRoom(this.room)}getResult(){return this.task.getResult()}static#e=this.\u0275fac=function(B){return new(B||M)(P.Y36(be.zQ),P.Y36(he))};static#t=this.\u0275cmp=P.Xpm({type:M,selectors:[["app-votes"]],inputs:{room:"room"},decls:7,vars:4,consts:[["class","actions",4,"ngIf"],[1,"votes-result"],[1,"current-votes-list"],[3,"card",4,"ngFor","ngForOf"],["class","votes",4,"ngIf"],[1,"actions"],["main-button","",1,"current-votes__btn-flip",3,"disabled","click"],["main-button","","theme","accent",1,"current-votes__btn-revote",3,"disabled","click"],[3,"card"],[1,"votes"],["class","card",3,"card","click",4,"ngFor","ngForOf"],[1,"card",3,"card","click"],["cardComponent",""]],template:function(B,X){1&B&&(P.YNc(0,rs,5,2,"div",0),P.TgZ(1,"div",1)(2,"h1"),P._uU(3),P.qZA()(),P.TgZ(4,"div",2),P.YNc(5,ua,1,1,"app-card",3),P.qZA(),P.YNc(6,to,2,1,"div",4)),2&B&&(P.Q6J("ngIf",X.task.votes.length>0),P.xp6(3),P.Oqu(X.flippedVotes?X.getResult():"-"),P.xp6(2),P.Q6J("ngForOf",X.task.votes),P.xp6(1),P.Q6J("ngIf",!X.flippedVotes))},dependencies:[w.sg,w.O5,pu,Ve.j],styles:[".actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem;margin-bottom:.5rem}.votes-result[_ngcontent-%COMP%]{border:3px solid #9e9e9e;color:#2e2e2e;border-radius:4px;text-align:center;font-size:3rem;line-height:8rem}.current-votes-list[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:.5rem 0;overflow-y:hidden;overflow-x:auto}.votes[_ngcontent-%COMP%]{display:flex;position:absolute;bottom:0;left:50%;transform:translate(calc(-50% - 2rem));overflow-x:show}.votes[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:2rem;height:3rem;cursor:pointer}"],data:{animation:[Uo]}})}return M})();function $i(M,k){if(1&M&&P._UZ(0,"app-votes",3),2&M){const b=P.oxw(2);P.Q6J("room",b.room)}}function qa(M,k){if(1&M&&(P.TgZ(0,"div",1)(1,"h1",2),P._uU(2),P.qZA(),P._UZ(3,"app-tasks",3),P.YNc(4,$i,1,1,"app-votes",4),P.qZA()),2&M){const b=P.oxw();P.xp6(2),P.Oqu(b.room.name),P.xp6(1),P.Q6J("room",b.room),P.xp6(1),P.Q6J("ngIf",b.room.tasks[b.room.currentTask])}}const L=[{path:"rooms",component:Qt,title:"Salas"},{path:"room/:id",component:(()=>{class M extends xe{constructor(b,B){super(),this.activatedRoute=b,this.roomService=B,this.roomId=this.activatedRoute.snapshot.paramMap.get("id")}ngOnInit(){this.startListenerRoom()}startListenerRoom(){this.toDestroy(this.roomService.listenerRoom(this.roomId).subscribe(b=>{this.room?this.room?.updateValues(b):this.startRoom(b)}))}startRoom(b){this.room=new Pe(b.name,b.creator,b.tasks.map(B=>new Ie(B.name,B.votes.map(X=>new ve(X.userId,X.userName,X.value,X.hidden)))),b.currentTask,b.id)}static#e=this.\u0275fac=function(B){return new(B||M)(P.Y36(ue.gz),P.Y36(he))};static#t=this.\u0275cmp=P.Xpm({type:M,selectors:[["app-room"]],features:[P.qOj],decls:1,vars:1,consts:[["class","current-room",4,"ngIf"],[1,"current-room"],[1,"room-name"],[3,"room"],[3,"room",4,"ngIf"]],template:function(B,X){1&B&&P.YNc(0,qa,5,3,"div",0),2&B&&P.Q6J("ngIf",X.room)},dependencies:[w.O5,hs,al],styles:[".current-room[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin:0 auto;max-width:1260px;width:100%}.current-room[_ngcontent-%COMP%]   .room-name[_ngcontent-%COMP%]{font-size:3rem;text-align:center}"]})}return M})(),title:(()=>{class M{constructor(b){this.roomService=b}resolve(b){const B=b.paramMap.get("id");return this.roomService.listenerRoom(B).pipe((0,q.U)(X=>X.name))}static#e=this.\u0275fac=function(B){return new(B||M)(P.LFG(he))};static#t=this.\u0275prov=P.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"})}return M})()},{path:"**",redirectTo:"rooms"}];let G=(()=>{class M{static#e=this.\u0275fac=function(B){return new(B||M)};static#t=this.\u0275mod=P.oAB({type:M});static#n=this.\u0275inj=P.cJS({imports:[ue.Bz.forChild(L),ue.Bz]})}return M})();var de=z(6208);let Ge=(()=>{class M{static#e=this.\u0275fac=function(B){return new(B||M)};static#t=this.\u0275mod=P.oAB({type:M});static#n=this.\u0275inj=P.cJS({imports:[G,w.ez,de.m,wo,eo]})}return M})()},4176:(Nt,He,z)=>{z.d(He,{j:()=>ue});var w=z(5879);let ue=(()=>{class q{constructor(ve){this.element=ve,this.theme="primary"}ngOnInit(){this.setStyle()}setStyle(){this.element.nativeElement.classList.add("main-button"),this.element.nativeElement.classList.add(`main-button--${this.theme}`)}static#e=this.\u0275fac=function(Ie){return new(Ie||q)(w.Y36(w.SBq))};static#t=this.\u0275dir=w.lG2({type:q,selectors:[["button","main-button",""]],inputs:{theme:"theme"}})}return q})()},6208:(Nt,He,z)=>{z.d(He,{m:()=>q});var w=z(6814),ue=z(5879);let q=(()=>{class De{static#e=this.\u0275fac=function(Pe){return new(Pe||De)};static#t=this.\u0275mod=ue.oAB({type:De});static#n=this.\u0275inj=ue.cJS({imports:[w.ez]})}return De})()},6662:(Nt,He,z)=>{var w=z(6593),ue=z(9692),q=z(5879),De=z(7213),ve=z(6814),Ie=z(4176);function Pe(v,h){if(1&v){const m=q.EpF();q.TgZ(0,"div",3)(1,"div",4),q._UZ(2,"img",5),q.TgZ(3,"span",6),q._uU(4),q.qZA()(),q.TgZ(5,"div",7)(6,"button",8),q.NdJ("click",function(){q.CHM(m);const F=q.oxw();return q.KtG(F.logout())}),q._uU(7,"Sair"),q.qZA()()()}if(2&v){const m=h.ngIf;q.xp6(2),q.Q6J("src",m.photoURL,q.LSH),q.xp6(2),q.Oqu(m.displayName)}}let P=(()=>{class v{constructor(m,T,F){this.auth=m,this.router=T,this.ngZone=F}ngOnInit(){}logout(){this.auth.signOut().then(()=>this.ngZone.run(()=>this.router.navigate([""])))}static#e=this.\u0275fac=function(T){return new(T||v)(q.Y36(De.zQ),q.Y36(ue.F0),q.Y36(q.R0b))};static#t=this.\u0275cmp=q.Xpm({type:v,selectors:[["app-header"]],decls:5,vars:4,consts:[[1,"header"],[1,"header-title",3,"routerLink"],["class","user-content",4,"ngIf"],[1,"user-content"],[1,"user"],["alt","user image",1,"user-image",3,"src"],[1,"user-name"],[1,"logout"],["main-button","","theme","error",1,"logout-btn",3,"click"]],template:function(T,F){1&T&&(q.TgZ(0,"div",0)(1,"h4",1),q._uU(2,"Planning Poker"),q.qZA(),q.YNc(3,Pe,8,2,"div",2),q.ALo(4,"async"),q.qZA()),2&T&&(q.xp6(1),q.Q6J("routerLink",""),q.xp6(2),q.Q6J("ngIf",q.lcZ(4,2,F.auth.user)))},dependencies:[ve.O5,ue.rH,Ie.j,ve.Ov],styles:[".header[_ngcontent-%COMP%]{background:#ff1a40;width:100vw;height:120px;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;padding:0 2rem}.header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{color:#fff;flex-basis:100%;text-align:center;cursor:pointer}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;flex-basis:100%}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{flex-basis:100%;width:100%;display:flex;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{margin:0 .5rem;color:#fff}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]{width:3rem;height:3rem;border-radius:50%}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{flex-basis:100%;display:flex;justify-content:center}@media (min-width: 641px){.header[_ngcontent-%COMP%]{height:100px}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{flex-basis:content}}@media (min-width: 961px){.header[_ngcontent-%COMP%]{height:80px}.header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]{flex-basis:content}}"]})}return v})(),xe=(()=>{class v{static#e=this.\u0275fac=function(T){return new(T||v)};static#t=this.\u0275cmp=q.Xpm({type:v,selectors:[["app-layout"]],decls:3,vars:0,consts:[[1,"page"]],template:function(T,F){1&T&&(q._UZ(0,"app-header"),q.TgZ(1,"div",0),q._UZ(2,"router-outlet"),q.qZA())},dependencies:[ue.lC,P],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .page[_ngcontent-%COMP%]{overflow:hidden;flex:1 1 auto;padding:16px;height:calc(100vh - 120px);position:relative}@media (min-width: 641px){[_nghost-%COMP%]   .page[_ngcontent-%COMP%]{height:calc(100vh - 100px)}}@media (min-width: 961px){[_nghost-%COMP%]   .page[_ngcontent-%COMP%]{height:calc(100vh - 80px)}}"]})}return v})();var le=z(7142);let he=(()=>{class v{constructor(m,T,F){this.auth=m,this.router=T,this.ngZone=F}login(){this.auth.signInWithPopup(this.googleAuthProvider()).then(()=>this.ngZone.run(()=>this.router.navigate(["rooms"])))}googleAuthProvider(){return new le.Z.auth.GoogleAuthProvider}static#e=this.\u0275fac=function(T){return new(T||v)(q.Y36(De.zQ),q.Y36(ue.F0),q.Y36(q.R0b))};static#t=this.\u0275cmp=q.Xpm({type:v,selectors:[["app-login"]],decls:2,vars:0,consts:[["main-button","","theme","error",1,"login-btn","login-btn--google",3,"click"]],template:function(T,F){1&T&&(q.TgZ(0,"button",0),q.NdJ("click",function(){return F.login()}),q._uU(1,"Entrar pelo google"),q.qZA())},dependencies:[Ie.j],styles:[".login-btn[_ngcontent-%COMP%]{position:fixed;height:60px;width:320px;font-size:1.5rem;line-height:1.75rem;top:50%;left:50%;transform:translate(-50%,-50%)}"]})}return v})();var be=z(7398);const Ke=[{path:"",component:xe,canMatch:[(v,h)=>(0,q.f3M)(De.zQ).user.pipe((0,be.U)(m=>null!=m))],children:[{path:"",loadChildren:()=>Promise.resolve().then(z.bind(z,1626)).then(v=>v.PagesModule)}]},{path:"",component:he},{path:"**",redirectTo:""}];let ft=(()=>{class v{static#e=this.\u0275fac=function(T){return new(T||v)};static#t=this.\u0275mod=q.oAB({type:v});static#n=this.\u0275inj=q.cJS({imports:[ue.Bz.forRoot(Ke,{preloadingStrategy:ue.wm,useHash:!0,anchorScrolling:"enabled"}),ue.Bz]})}return v})(),tt=(()=>{class v{static#e=this.\u0275fac=function(T){return new(T||v)};static#t=this.\u0275cmp=q.Xpm({type:v,selectors:[["app-root"]],decls:1,vars:0,template:function(T,F){1&T&&q._UZ(0,"router-outlet")},dependencies:[ue.lC]})}return v})();var pt=z(6208);let ut=(()=>{class v{static#e=this.\u0275fac=function(T){return new(T||v)};static#t=this.\u0275mod=q.oAB({type:v});static#n=this.\u0275inj=q.cJS({imports:[ve.ez,ue.Bz,pt.m]})}return v})();var kt=z(7217),Ee=z(9027),ce=z(8326),Ve=z(5592),Te=z(2096),je=z(2459),Ye=z(6321),nt=z(9360),fe=z(8251),ct=z(4664),Hn=z(3106),un=z(5861),Xn=z(534),Tn=z(9058),bt=z(4537);const Dt="firebasestorage.googleapis.com",me="storageBucket";class Ae extends Tn.ZR{constructor(h,m,T=0){super(yt(h),`Firebase Storage: ${m} (${yt(h)})`),this.status_=T,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ae.prototype)}get status(){return this.status_}set status(h){this.status_=h}_codeEquals(h){return yt(h)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(h){this.customData.serverResponse=h,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ue=function(v){return v.UNKNOWN="unknown",v.OBJECT_NOT_FOUND="object-not-found",v.BUCKET_NOT_FOUND="bucket-not-found",v.PROJECT_NOT_FOUND="project-not-found",v.QUOTA_EXCEEDED="quota-exceeded",v.UNAUTHENTICATED="unauthenticated",v.UNAUTHORIZED="unauthorized",v.UNAUTHORIZED_APP="unauthorized-app",v.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",v.INVALID_CHECKSUM="invalid-checksum",v.CANCELED="canceled",v.INVALID_EVENT_NAME="invalid-event-name",v.INVALID_URL="invalid-url",v.INVALID_DEFAULT_BUCKET="invalid-default-bucket",v.NO_DEFAULT_BUCKET="no-default-bucket",v.CANNOT_SLICE_BLOB="cannot-slice-blob",v.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",v.NO_DOWNLOAD_URL="no-download-url",v.INVALID_ARGUMENT="invalid-argument",v.INVALID_ARGUMENT_COUNT="invalid-argument-count",v.APP_DELETED="app-deleted",v.INVALID_ROOT_OPERATION="invalid-root-operation",v.INVALID_FORMAT="invalid-format",v.INTERNAL_ERROR="internal-error",v.UNSUPPORTED_ENVIRONMENT="unsupported-environment",v}(Ue||{});function yt(v){return"storage/"+v}function dt(){return new Ae(Ue.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function sn(){return new Ae(Ue.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mn(){return new Ae(Ue.CANCELED,"User canceled the upload/download.")}function Fr(){return new Ae(Ue.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Qn(v){return new Ae(Ue.INVALID_ARGUMENT,v)}function qt(){return new Ae(Ue.APP_DELETED,"The Firebase app was deleted.")}function _n(v){return new Ae(Ue.INVALID_ROOT_OPERATION,"The operation '"+v+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ut(v,h){return new Ae(Ue.INVALID_FORMAT,"String does not match format '"+v+"': "+h)}function Ln(v){throw new Ae(Ue.INTERNAL_ERROR,"Internal error: "+v)}class Vn{constructor(h,m){this.bucket=h,this.path_=m}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const h=encodeURIComponent;return"/b/"+h(this.bucket)+"/o/"+h(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(h,m){let T;try{T=Vn.makeFromUrl(h,m)}catch{return new Vn(h,"")}if(""===T.path)return T;throw function Gt(v){return new Ae(Ue.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+v+"'.")}(h)}static makeFromUrl(h,m){let T=null;const F="([A-Za-z0-9.\\-_]+)",se=new RegExp("^gs://"+F+"(/(.*))?$","i");function Me(Bn){Bn.path_=decodeURIComponent(Bn.path)}const _t=m.replace(/[.]/g,"\\."),Zn=[{regex:se,indices:{bucket:1,path:3},postModify:function $(Bn){"/"===Bn.path.charAt(Bn.path.length-1)&&(Bn.path_=Bn.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${_t}/v[A-Za-z0-9_]+/b/${F}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Me},{regex:new RegExp(`^https?://${m===Dt?"(?:storage.googleapis.com|storage.cloud.google.com)":m}/${F}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Me}];for(let Bn=0;Bn<Zn.length;Bn++){const ei=Zn[Bn],Si=ei.regex.exec(h);if(Si){let _s=Si[ei.indices.path];_s||(_s=""),T=new Vn(Si[ei.indices.bucket],_s),ei.postModify(T);break}}if(null==T)throw function $n(v){return new Ae(Ue.INVALID_URL,"Invalid URL '"+v+"'.")}(h);return T}}class Yr{constructor(h){this.promise_=Promise.reject(h)}getPromise(){return this.promise_}cancel(h=!1){}}function ln(v){return"string"==typeof v||v instanceof String}function _r(v){return pn()&&v instanceof Blob}function pn(){return typeof Blob<"u"&&!(0,Tn.UG)()}function Qi(v,h,m,T){if(T<h)throw Qn(`Invalid value for '${v}'. Expected ${h} or greater.`);if(T>m)throw Qn(`Invalid value for '${v}'. Expected ${m} or less.`)}function Br(v,h,m){let T=h;return null==m&&(T=`https://${h}`),`${m}://${T}/v0${v}`}function ai(v){const h=encodeURIComponent;let m="?";for(const T in v)v.hasOwnProperty(T)&&(m=m+(h(T)+"=")+h(v[T])+"&");return m=m.slice(0,-1),m}var Lr=function(v){return v[v.NO_ERROR=0]="NO_ERROR",v[v.NETWORK_ERROR=1]="NETWORK_ERROR",v[v.ABORT=2]="ABORT",v}(Lr||{});function jr(v,h){const m=v>=500&&v<600,F=-1!==[408,429].indexOf(v),$=-1!==h.indexOf(v);return m||F||$}class vi{constructor(h,m,T,F,$,re,se,_e,Me,it,_t,tn=!0){this.url_=h,this.method_=m,this.headers_=T,this.body_=F,this.successCodes_=$,this.additionalRetryCodes_=re,this.callback_=se,this.errorCallback_=_e,this.timeout_=Me,this.progressCallback_=it,this.connectionFactory_=_t,this.retry=tn,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Yt,Pt)=>{this.resolve_=Yt,this.reject_=Pt,this.start_()})}start_(){const m=(T,F)=>{const $=this.resolve_,re=this.reject_,se=F.connection;if(F.wasSuccessCode)try{const _e=this.callback_(se,se.getResponse());!function _o(v){return void 0!==v}(_e)?$():$(_e)}catch(_e){re(_e)}else if(null!==se){const _e=dt();_e.serverResponse=se.getErrorText(),re(this.errorCallback_?this.errorCallback_(se,_e):_e)}else re(F.canceled?this.appDelete_?qt():mn():sn())};this.canceled_?m(0,new Vi(!1,null,!0)):this.backoffId_=function zn(v,h,m){let T=1,F=null,$=null,re=!1,se=0;function _e(){return 2===se}let Me=!1;function it(...In){Me||(Me=!0,h.apply(null,In))}function _t(In){F=setTimeout(()=>{F=null,v(Yt,_e())},In)}function tn(){$&&clearTimeout($)}function Yt(In,...Sr){if(Me)return void tn();if(In)return tn(),void it.call(null,In,...Sr);if(_e()||re)return tn(),void it.call(null,In,...Sr);let Zn;T<64&&(T*=2),1===se?(se=2,Zn=0):Zn=1e3*(T+Math.random()),_t(Zn)}let Pt=!1;function on(In){Pt||(Pt=!0,tn(),!Me&&(null!==F?(In||(se=2),clearTimeout(F),_t(0)):In||(se=1)))}return _t(0),$=setTimeout(()=>{re=!0,on(!0)},m),on}((T,F)=>{if(F)return void T(!1,new Vi(!1,null,!0));const $=this.connectionFactory_();this.pendingConnection_=$;const re=se=>{null!==this.progressCallback_&&this.progressCallback_(se.loaded,se.lengthComputable?se.total:-1)};null!==this.progressCallback_&&$.addUploadProgressListener(re),$.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&$.removeUploadProgressListener(re),this.pendingConnection_=null;const se=$.getErrorCode()===Lr.NO_ERROR,_e=$.getStatus();if(!se||jr(_e,this.additionalRetryCodes_)&&this.retry){const it=$.getErrorCode()===Lr.ABORT;return void T(!1,new Vi(!1,null,it))}const Me=-1!==this.successCodes_.indexOf(_e);T(!0,new Vi(Me,$))})},m,this.timeout_)}getPromise(){return this.promise_}cancel(h){this.canceled_=!0,this.appDelete_=h||!1,null!==this.backoffId_&&function wr(v){v(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Vi{constructor(h,m,T){this.wasSuccessCode=h,this.connection=m,this.canceled=!!T}}function J(...v){const h=function te(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==h){const m=new h;for(let T=0;T<v.length;T++)m.append(v[T]);return m.getBlob()}if(pn())return new Blob(v);throw new Ae(Ue.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ze={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ht{constructor(h,m){this.data=h,this.contentType=m||null}}function Jt(v,h){switch(v){case Ze.RAW:return new ht(rn(h));case Ze.BASE64:case Ze.BASE64URL:return new ht(Ft(v,h));case Ze.DATA_URL:return new ht(function Ei(v){const h=new lr(v);return h.base64?Ft(Ze.BASE64,h.rest):function Tt(v){let h;try{h=decodeURIComponent(v)}catch{throw Ut(Ze.DATA_URL,"Malformed data URL.")}return rn(h)}(h.rest)}(h),function yo(v){return new lr(v).contentType}(h))}throw dt()}function rn(v){const h=[];for(let m=0;m<v.length;m++){let T=v.charCodeAt(m);T<=127?h.push(T):T<=2047?h.push(192|T>>6,128|63&T):55296==(64512&T)?m<v.length-1&&56320==(64512&v.charCodeAt(m+1))?(T=65536|(1023&T)<<10|1023&v.charCodeAt(++m),h.push(240|T>>18,128|T>>12&63,128|T>>6&63,128|63&T)):h.push(239,191,189):56320==(64512&T)?h.push(239,191,189):h.push(224|T>>12,128|T>>6&63,128|63&T)}return new Uint8Array(h)}function Ft(v,h){switch(v){case Ze.BASE64:{const F=-1!==h.indexOf("-"),$=-1!==h.indexOf("_");if(F||$)throw Ut(v,"Invalid character '"+(F?"-":"_")+"' found: is it base64url encoded?");break}case Ze.BASE64URL:{const F=-1!==h.indexOf("+"),$=-1!==h.indexOf("/");if(F||$)throw Ut(v,"Invalid character '"+(F?"+":"/")+"' found: is it base64 encoded?");h=h.replace(/-/g,"+").replace(/_/g,"/");break}}let m;try{m=function Re(v){if(typeof atob>"u")throw function Pi(v){return new Ae(Ue.UNSUPPORTED_ENVIRONMENT,`${v} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(v)}(h)}catch(F){throw F.message.includes("polyfill")?F:Ut(v,"Invalid character found")}const T=new Uint8Array(m.length);for(let F=0;F<m.length;F++)T[F]=m.charCodeAt(F);return T}class lr{constructor(h){this.base64=!1,this.contentType=null;const m=h.match(/^data:([^,]+)?,/);if(null===m)throw Ut(Ze.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const T=m[1]||null;null!=T&&(this.base64=function ka(v,h){return v.length>=h.length&&v.substring(v.length-h.length)===h}(T,";base64"),this.contentType=this.base64?T.substring(0,T.length-7):T),this.rest=h.substring(h.indexOf(",")+1)}}class We{constructor(h,m){let T=0,F="";_r(h)?(this.data_=h,T=h.size,F=h.type):h instanceof ArrayBuffer?(m?this.data_=new Uint8Array(h):(this.data_=new Uint8Array(h.byteLength),this.data_.set(new Uint8Array(h))),T=this.data_.length):h instanceof Uint8Array&&(m?this.data_=h:(this.data_=new Uint8Array(h.length),this.data_.set(h)),T=h.length),this.size_=T,this.type_=F}size(){return this.size_}type(){return this.type_}slice(h,m){if(_r(this.data_)){const F=function ne(v,h,m){return v.webkitSlice?v.webkitSlice(h,m):v.mozSlice?v.mozSlice(h,m):v.slice?v.slice(h,m):null}(this.data_,h,m);return null===F?null:new We(F)}{const T=new Uint8Array(this.data_.buffer,h,m-h);return new We(T,!0)}}static getBlob(...h){if(pn()){const m=h.map(T=>T instanceof We?T.data_:T);return new We(J.apply(null,m))}{const m=h.map(re=>ln(re)?Jt(Ze.RAW,re).data:re.data_);let T=0;m.forEach(re=>{T+=re.byteLength});const F=new Uint8Array(T);let $=0;return m.forEach(re=>{for(let se=0;se<re.length;se++)F[$++]=re[se]}),new We(F,!0)}}uploadData(){return this.data_}}function Oe(v){let h;try{h=JSON.parse(v)}catch{return null}return function Zi(v){return"object"==typeof v&&!Array.isArray(v)}(h)?h:null}function Wt(v){const h=v.lastIndexOf("/",v.length-2);return-1===h?v:v.slice(h+1)}function It(v,h){return h}class Xt{constructor(h,m,T,F){this.server=h,this.local=m||h,this.writable=!!T,this.xform=F||It}}let Gn=null;function ti(){if(Gn)return Gn;const v=[];v.push(new Xt("bucket")),v.push(new Xt("generation")),v.push(new Xt("metageneration")),v.push(new Xt("name","fullPath",!0));const m=new Xt("name");m.xform=function h($,re){return function qn(v){return!ln(v)||v.length<2?v:Wt(v)}(re)},v.push(m);const F=new Xt("size");return F.xform=function T($,re){return void 0!==re?Number(re):re},v.push(F),v.push(new Xt("timeCreated")),v.push(new Xt("updated")),v.push(new Xt("md5Hash",null,!0)),v.push(new Xt("cacheControl",null,!0)),v.push(new Xt("contentDisposition",null,!0)),v.push(new Xt("contentEncoding",null,!0)),v.push(new Xt("contentLanguage",null,!0)),v.push(new Xt("contentType",null,!0)),v.push(new Xt("metadata","customMetadata",!0)),Gn=v,Gn}function vo(v,h,m){const T=Oe(h);return null===T?null:function as(v,h,m){const T={type:"file"},F=m.length;for(let $=0;$<F;$++){const re=m[$];T[re.local]=re.xform(T,h[re.server])}return function Jr(v,h){Object.defineProperty(v,"ref",{get:function m(){const $=new Vn(v.bucket,v.fullPath);return h._makeStorageReference($)}})}(T,v),T}(v,T,m)}function Ks(v,h){const m={},T=h.length;for(let F=0;F<T;F++){const $=h[F];$.writable&&(m[$.server]=v[$.local])}return JSON.stringify(m)}const Zs="prefixes",Qo="items";class Ii{constructor(h,m,T,F){this.url=h,this.method=m,this.handler=T,this.timeout=F,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Yi(v){if(!v)throw dt()}function Eo(v,h){return function m(T,F){const $=vo(v,F,h);return Yi(null!==$),$}}function Nr(v){return function h(m,T){let F;return F=401===m.getStatus()?m.getErrorText().includes("Firebase App Check token is invalid")?function en(){return new Ae(Ue.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Dn(){return new Ae(Ue.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===m.getStatus()?function St(v){return new Ae(Ue.QUOTA_EXCEEDED,"Quota for bucket '"+v+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(v.bucket):403===m.getStatus()?function Fn(v){return new Ae(Ue.UNAUTHORIZED,"User does not have permission to access '"+v+"'.")}(v.path):T,F.status=m.getStatus(),F.serverResponse=T.serverResponse,F}}function Hr(v){const h=Nr(v);return function m(T,F){let $=h(T,F);return 404===T.getStatus()&&($=function fr(v){return new Ae(Ue.OBJECT_NOT_FOUND,"Object '"+v+"' does not exist.")}(v.path)),$.serverResponse=F.serverResponse,$}}function ui(v,h,m){const F=Br(h.fullServerUrl(),v.host,v._protocol),re=v.maxOperationRetryTime,se=new Ii(F,"GET",Eo(v,m),re);return se.errorHandler=Hr(h),se}function Is(v,h,m,T,F){const $={};$.prefix=h.isRoot?"":h.path+"/",m&&m.length>0&&($.delimiter=m),T&&($.pageToken=T),F&&($.maxResults=F);const se=Br(h.bucketOnlyServerUrl(),v.host,v._protocol),Me=v.maxOperationRetryTime,it=new Ii(se,"GET",function Ji(v,h){return function m(T,F){const $=function Yo(v,h,m){const T=Oe(m);return null===T?null:function xn(v,h,m){const T={prefixes:[],items:[],nextPageToken:m.nextPageToken};if(m[Zs])for(const F of m[Zs]){const $=F.replace(/\/$/,""),re=v._makeStorageReference(new Vn(h,$));T.prefixes.push(re)}if(m[Qo])for(const F of m[Qo]){const $=v._makeStorageReference(new Vn(h,F.name));T.items.push($)}return T}(v,h,T)}(v,h,F);return Yi(null!==$),$}}(v,h.bucket),Me);return it.urlParams=$,it.errorHandler=Nr(h),it}function li(v,h,m){const T=Object.assign({},m);return T.fullPath=v.path,T.size=h.size(),T.contentType||(T.contentType=function du(v,h){return v&&v.contentType||h&&h.type()||"application/octet-stream"}(null,h)),T}class ho{constructor(h,m,T,F){this.current=h,this.total=m,this.finalized=!!T,this.metadata=F||null}}function Jo(v,h){let m=null;try{m=v.getResponseHeader("X-Goog-Upload-Status")}catch{Yi(!1)}return Yi(!!m&&-1!==(h||["active"]).indexOf(m)),m}const Xo={STATE_CHANGED:"state_changed"},zr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ns(v){switch(v){case"running":case"pausing":case"canceling":return zr.RUNNING;case"paused":return zr.PAUSED;case"success":return zr.SUCCESS;case"canceled":return zr.CANCELED;default:return zr.ERROR}}class wn{constructor(h,m,T){if(function xt(v){return"function"==typeof v}(h)||null!=m||null!=T)this.next=h,this.error=m??void 0,this.complete=T??void 0;else{const $=h;this.next=$.next,this.error=$.error,this.complete=$.complete}}}function tr(v){return(...h)=>{Promise.resolve().then(()=>v(...h))}}let Ni=null;class Ys{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Lr.NO_ERROR,this.sendPromise_=new Promise(h=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Lr.ABORT,h()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Lr.NETWORK_ERROR,h()}),this.xhr_.addEventListener("load",()=>{h()})})}send(h,m,T,F){if(this.sent_)throw Ln("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(m,h,!0),void 0!==F)for(const $ in F)F.hasOwnProperty($)&&this.xhr_.setRequestHeader($,F[$].toString());return void 0!==T?this.xhr_.send(T):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ln("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ln("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ln("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ln("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(h){return this.xhr_.getResponseHeader(h)}addUploadProgressListener(h){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",h)}removeUploadProgressListener(h){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",h)}}class Gr extends Ys{initXhr(){this.xhr_.responseType="text"}}function Vr(){return Ni?Ni():new Gr}class cr{constructor(h,m,T=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=h,this._blob=m,this._metadata=T,this._mappings=ti(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=F=>{if(this._request=void 0,this._chunkMultiplier=1,F._codeEquals(Ue.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const $=this.isExponentialBackoffExpired();if(jr(F.status,[])){if(!$)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();F=sn()}this._error=F,this._transition("error")}},this._metadataErrorHandler=F=>{this._request=void 0,F._codeEquals(Ue.CANCELED)?this.completeTransitions_():(this._error=F,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((F,$)=>{this._resolve=F,this._reject=$,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const h=this._transferred;return m=>this._updateProgress(h+m)}_shouldDoResumable(h){return h.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(h){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([m,T])=>{switch(this._state){case"running":h(m,T);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((h,m)=>{const T=function hu(v,h,m,T,F){const $=h.bucketOnlyServerUrl(),re=li(h,T,F),se={name:re.fullPath},_e=Br($,v.host,v._protocol),it={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${T.size()}`,"X-Goog-Upload-Header-Content-Type":re.contentType,"Content-Type":"application/json; charset=utf-8"},_t=Ks(re,m),Pt=new Ii(_e,"POST",function Yt(on){let In;Jo(on);try{In=on.getResponseHeader("X-Goog-Upload-URL")}catch{Yi(!1)}return Yi(ln(In)),In},v.maxUploadRetryTime);return Pt.urlParams=se,Pt.headers=it,Pt.body=_t,Pt.errorHandler=Nr(h),Pt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),F=this._ref.storage._makeRequest(T,Vr,h,m);this._request=F,F.getPromise().then($=>{this._request=void 0,this._uploadUrl=$,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const h=this._uploadUrl;this._resolveToken((m,T)=>{const F=function Fa(v,h,m,T){const _e=new Ii(m,"POST",function $(Me){const it=Jo(Me,["active","final"]);let _t=null;try{_t=Me.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Yi(!1)}_t||Yi(!1);const tn=Number(_t);return Yi(!isNaN(tn)),new ho(tn,T.size(),"final"===it)},v.maxUploadRetryTime);return _e.headers={"X-Goog-Upload-Command":"query"},_e.errorHandler=Nr(h),_e}(this._ref.storage,this._ref._location,h,this._blob),$=this._ref.storage._makeRequest(F,Vr,m,T);this._request=$,$.getPromise().then(re=>{this._request=void 0,this._updateProgress(re.current),this._needToFetchStatus=!1,re.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const h=262144*this._chunkMultiplier,m=new ho(this._transferred,this._blob.size()),T=this._uploadUrl;this._resolveToken((F,$)=>{let re;try{re=function La(v,h,m,T,F,$,re,se){const _e=new ho(0,0);if(re?(_e.current=re.current,_e.total=re.total):(_e.current=0,_e.total=T.size()),T.size()!==_e.total)throw function er(){return new Ae(Ue.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const Me=_e.total-_e.current;let it=Me;F>0&&(it=Math.min(it,F));const _t=_e.current;let Yt="";Yt=0===it?"finalize":Me===it?"upload, finalize":"upload";const Pt={"X-Goog-Upload-Command":Yt,"X-Goog-Upload-Offset":`${_e.current}`},on=T.slice(_t,_t+it);if(null===on)throw Fr();const Zn=new Ii(m,"POST",function In(Bn,ei){const Si=Jo(Bn,["active","final"]),Qr=_e.current+it,_s=T.size();let so;return so="final"===Si?Eo(h,$)(Bn,ei):null,new ho(Qr,_s,"final"===Si,so)},h.maxUploadRetryTime);return Zn.headers=Pt,Zn.body=on.uploadData(),Zn.progressCallback=se||null,Zn.errorHandler=Nr(v),Zn}(this._ref._location,this._ref.storage,T,this._blob,h,this._mappings,m,this._makeProgressCallback())}catch(_e){return this._error=_e,void this._transition("error")}const se=this._ref.storage._makeRequest(re,Vr,F,$,!1);this._request=se,se.getPromise().then(_e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_e.current),_e.finalized?(this._metadata=_e.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((h,m)=>{const T=ui(this._ref.storage,this._ref._location,this._mappings),F=this._ref.storage._makeRequest(T,Vr,h,m);this._request=F,F.getPromise().then($=>{this._request=void 0,this._metadata=$,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((h,m)=>{const T=function xo(v,h,m,T,F){const $=h.bucketOnlyServerUrl(),re={"X-Goog-Upload-Protocol":"multipart"},_e=function se(){let Zn="";for(let Bn=0;Bn<2;Bn++)Zn+=Math.random().toString().slice(2);return Zn}();re["Content-Type"]="multipart/related; boundary="+_e;const Me=li(h,T,F),it=Ks(Me,m),Yt=We.getBlob("--"+_e+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+it+"\r\n--"+_e+"\r\nContent-Type: "+Me.contentType+"\r\n\r\n",T,"\r\n--"+_e+"--");if(null===Yt)throw Fr();const Pt={name:Me.fullPath},on=Br($,v.host,v._protocol),Sr=v.maxUploadRetryTime,Rr=new Ii(on,"POST",Eo(v,m),Sr);return Rr.urlParams=Pt,Rr.headers=re,Rr.body=Yt.uploadData(),Rr.errorHandler=Nr(h),Rr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),F=this._ref.storage._makeRequest(T,Vr,h,m);this._request=F,F.getPromise().then($=>{this._request=void 0,this._metadata=$,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(h){const m=this._transferred;this._transferred=h,this._transferred!==m&&this._notifyObservers()}_transition(h){if(this._state!==h)switch(h){case"canceling":case"pausing":this._state=h,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const m="paused"===this._state;this._state=h,m&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=h,this._notifyObservers();break;case"canceled":this._error=mn(),this._state=h,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const h=Ns(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:h,metadata:this._metadata,task:this,ref:this._ref}}on(h,m,T,F){const $=new wn(m||void 0,T||void 0,F||void 0);return this._addObserver($),()=>{this._removeObserver($)}}then(h,m){return this._promise.then(h,m)}catch(h){return this.then(null,h)}_addObserver(h){this._observers.push(h),this._notifyObserver(h)}_removeObserver(h){const m=this._observers.indexOf(h);-1!==m&&this._observers.splice(m,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(m=>{this._notifyObserver(m)})}_finishPromise(){if(void 0!==this._resolve){let h=!0;switch(Ns(this._state)){case zr.SUCCESS:tr(this._resolve.bind(null,this.snapshot))();break;case zr.CANCELED:case zr.ERROR:tr(this._reject.bind(null,this._error))();break;default:h=!1}h&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(h){switch(Ns(this._state)){case zr.RUNNING:case zr.PAUSED:h.next&&tr(h.next.bind(h,this.snapshot))();break;case zr.SUCCESS:h.complete&&tr(h.complete.bind(h))();break;default:h.error&&tr(h.error.bind(h,this._error))()}}resume(){const h="paused"===this._state||"pausing"===this._state;return h&&this._transition("running"),h}pause(){const h="running"===this._state;return h&&this._transition("pausing"),h}cancel(){const h="running"===this._state||"pausing"===this._state;return h&&this._transition("canceling"),h}}class vt{constructor(h,m){this._service=h,this._location=m instanceof Vn?m:Vn.makeFromUrl(m,h.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(h,m){return new vt(h,m)}get root(){const h=new Vn(this._location.bucket,"");return this._newRef(this._service,h)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Wt(this._location.path)}get storage(){return this._service}get parent(){const h=function st(v){if(0===v.length)return null;const h=v.lastIndexOf("/");return-1===h?"":v.slice(0,h)}(this._location.path);if(null===h)return null;const m=new Vn(this._location.bucket,h);return new vt(this._service,m)}_throwIfRoot(h){if(""===this._location.path)throw _n(h)}}function dr(v,h,m){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,un.Z)(function*(v,h,m){const F=yield Bi(v,{pageToken:m});h.prefixes.push(...F.prefixes),h.items.push(...F.items),null!=F.nextPageToken&&(yield dr(v,h,F.nextPageToken))})).apply(this,arguments)}function Bi(v,h){null!=h&&"number"==typeof h.maxResults&&Qi("options.maxResults",1,1e3,h.maxResults);const m=h||{},T=Is(v.storage,v._location,"/",m.pageToken,m.maxResults);return v.storage.makeRequestWithTokens(T,Vr)}function ea(v){v._throwIfRoot("getDownloadURL");const h=function us(v,h,m){const F=Br(h.fullServerUrl(),v.host,v._protocol),re=v.maxOperationRetryTime,se=new Ii(F,"GET",function co(v,h){return function m(T,F){const $=vo(v,F,h);return Yi(null!==$),function Ws(v,h,m,T){const F=Oe(h);if(null===F||!ln(F.downloadTokens))return null;const $=F.downloadTokens;if(0===$.length)return null;const re=encodeURIComponent;return $.split(",").map(Me=>{const _t=v.fullPath;return Br("/b/"+re(v.bucket)+"/o/"+re(_t),m,T)+ai({alt:"media",token:Me})})[0]}($,F,v.host,v._protocol)}}(v,m),re);return se.errorHandler=Hr(h),se}(v.storage,v._location,ti());return v.storage.makeRequestWithTokens(h,Vr).then(m=>{if(null===m)throw function Li(){return new Ae(Ue.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return m})}function br(v,h){const m=function jt(v,h){const m=h.split("/").filter(T=>T.length>0).join("/");return 0===v.length?m:v+"/"+m}(v._location.path,h),T=new Vn(v._location.bucket,m);return new vt(v.storage,T)}function di(v,h){if(v instanceof Xi){const m=v;if(null==m._bucket)throw function yn(){return new Ae(Ue.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+me+"' property when initializing the app?")}();const T=new vt(m,m._bucket);return null!=h?di(T,h):T}return void 0!==h?br(v,h):v}function Fs(v,h){if(h&&function nr(v){return/^[A-Za-z]+:\/\//.test(v)}(h)){if(v instanceof Xi)return function ji(v,h){return new vt(v,h)}(v,h);throw Qn("To use ref(service, url), the first argument must be a Storage instance.")}return di(v,h)}function ko(v,h){const m=h?.[me];return null==m?null:Vn.makeFromBucketSpec(m,v)}class Xi{constructor(h,m,T,F,$){this.app=h,this._authProvider=m,this._appCheckProvider=T,this._url=F,this._firebaseVersion=$,this._bucket=null,this._host=Dt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=F?Vn.makeFromBucketSpec(F,this._host):ko(this._host,this.app.options)}get host(){return this._host}set host(h){this._host=h,this._bucket=null!=this._url?Vn.makeFromBucketSpec(this._url,h):ko(h,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(h){Qi("time",0,Number.POSITIVE_INFINITY,h),this._maxUploadRetryTime=h}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(h){Qi("time",0,Number.POSITIVE_INFINITY,h),this._maxOperationRetryTime=h}_getAuthToken(){var h=this;return(0,un.Z)(function*(){if(h._overrideAuthToken)return h._overrideAuthToken;const m=h._authProvider.getImmediate({optional:!0});if(m){const T=yield m.getToken();if(null!==T)return T.accessToken}return null})()}_getAppCheckToken(){var h=this;return(0,un.Z)(function*(){const m=h._appCheckProvider.getImmediate({optional:!0});return m?(yield m.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(h=>h.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(h){return new vt(this,h)}_makeRequest(h,m,T,F,$=!0){if(this._deleted)return new Yr(qt());{const re=function ee(v,h,m,T,F,$,re=!0){const se=ai(v.urlParams),_e=v.url+se,Me=Object.assign({},v.headers);return function os(v,h){h&&(v["X-Firebase-GMPID"]=h)}(Me,h),function ir(v,h){null!==h&&h.length>0&&(v.Authorization="Firebase "+h)}(Me,m),function Or(v,h){v["X-Firebase-Storage-Version"]="webjs/"+(h??"AppManager")}(Me,$),function ge(v,h){null!==h&&(v["X-Firebase-AppCheck"]=h)}(Me,T),new vi(_e,v.method,Me,v.body,v.successCodes,v.additionalRetryCodes,v.handler,v.errorHandler,v.timeout,v.progressCallback,F,re)}(h,this._appId,T,F,m,this._firebaseVersion,$);return this._requests.add(re),re.getPromise().then(()=>this._requests.delete(re),()=>this._requests.delete(re)),re}}makeRequestWithTokens(h,m){var T=this;return(0,un.Z)(function*(){const[F,$]=yield Promise.all([T._getAuthToken(),T._getAppCheckToken()]);return T._makeRequest(h,m,F,$).getPromise()})()}}const Ls="@firebase/storage";function hr(v,h){return Fs(v=(0,Tn.m9)(v),h)}function Va(v,{instanceIdentifier:h}){const m=v.getProvider("app").getImmediate(),T=v.getProvider("auth-internal"),F=v.getProvider("app-check-internal");return new Xi(m,T,F,h,Xn.SDK_VERSION)}!function Ti(){(0,Xn._registerComponent)(new bt.wA("storage",Va,"PUBLIC").setMultipleInstances(!0)),(0,Xn.registerVersion)(Ls,"0.11.2",""),(0,Xn.registerVersion)(Ls,"0.11.2","esm2017")}();class Ua{constructor(h,m,T){this._delegate=h,this.task=m,this.ref=T}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ba{constructor(h,m){this._delegate=h,this._ref=m,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ua(this._delegate.snapshot,this,this._ref)}then(h,m){return this._delegate.then(T=>{if(h)return h(new Ua(T,this,this._ref))},m)}on(h,m,T,F){let $;return m&&($="function"==typeof m?re=>m(new Ua(re,this,this._ref)):{next:m.next?re=>m.next(new Ua(re,this,this._ref)):void 0,complete:m.complete||void 0,error:m.error||void 0}),this._delegate.on(h,$,T||void 0,F||void 0)}}class ns{constructor(h,m){this._delegate=h,this._service=m}get prefixes(){return this._delegate.prefixes.map(h=>new yr(h,this._service))}get items(){return this._delegate.items.map(h=>new yr(h,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class yr{constructor(h,m){this._delegate=h,this.storage=m}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(h){const m=function Ds(v,h){return br(v,h)}(this._delegate,h);return new yr(m,this.storage)}get root(){return new yr(this._delegate.root,this.storage)}get parent(){const h=this._delegate.parent;return null==h?null:new yr(h,this.storage)}put(h,m){return this._throwIfRoot("put"),new Ba(function cs(v,h,m){return function Io(v,h,m){return v._throwIfRoot("uploadBytesResumable"),new cr(v,new We(h),m)}(v=(0,Tn.m9)(v),h,m)}(this._delegate,h,m),this)}putString(h,m=Ze.RAW,T){this._throwIfRoot("putString");const F=Jt(m,h),$=Object.assign({},T);return null==$.contentType&&null!=F.contentType&&($.contentType=F.contentType),new Ba(new cr(this._delegate,new We(F.data,!0),$),this)}listAll(){return function ni(v){return function Js(v){const h={prefixes:[],items:[]};return dr(v,h).then(()=>h)}(v=(0,Tn.m9)(v))}(this._delegate).then(h=>new ns(h,this.storage))}list(h){return function Xs(v,h){return Bi(v=(0,Tn.m9)(v),h)}(this._delegate,h||void 0).then(m=>new ns(m,this.storage))}getMetadata(){return function es(v){return function Ht(v){v._throwIfRoot("getMetadata");const h=ui(v.storage,v._location,ti());return v.storage.makeRequestWithTokens(h,Vr)}(v=(0,Tn.m9)(v))}(this._delegate)}updateMetadata(h){return function hi(v,h){return function wi(v,h){v._throwIfRoot("updateMetadata");const m=function Qs(v,h,m,T){const $=Br(h.fullServerUrl(),v.host,v._protocol),se=Ks(m,T),Me=v.maxOperationRetryTime,it=new Ii($,"PATCH",Eo(v,T),Me);return it.headers={"Content-Type":"application/json; charset=utf-8"},it.body=se,it.errorHandler=Hr(h),it}(v.storage,v._location,h,ti());return v.storage.makeRequestWithTokens(m,Vr)}(v=(0,Tn.m9)(v),h)}(this._delegate,h)}getDownloadURL(){return function xu(v){return ea(v=(0,Tn.m9)(v))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function ri(v){return function Ur(v){v._throwIfRoot("deleteObject");const h=function $r(v,h){const T=Br(h.fullServerUrl(),v.host,v._protocol),se=new Ii(T,"DELETE",function re(_e,Me){},v.maxOperationRetryTime);return se.successCodes=[200,204],se.errorHandler=Hr(h),se}(v.storage,v._location);return v.storage.makeRequestWithTokens(h,Vr)}(v=(0,Tn.m9)(v))}(this._delegate)}_throwIfRoot(h){if(""===this._delegate._location.path)throw _n(h)}}class ya{constructor(h,m){this.app=h,this._delegate=m}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(h){if(va(h))throw Qn("ref() expected a child path but got a URL, use refFromURL instead.");return new yr(hr(this._delegate,h),this)}refFromURL(h){if(!va(h))throw Qn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Vn.makeFromUrl(h,this._delegate.host)}catch{throw Qn("refFromUrl() expected a valid full URL but got an invalid one.")}return new yr(hr(this._delegate,h),this)}setMaxUploadRetryTime(h){this._delegate.maxUploadRetryTime=h}setMaxOperationRetryTime(h){this._delegate.maxOperationRetryTime=h}useEmulator(h,m,T={}){!function fo(v,h,m,T={}){!function Cs(v,h,m,T={}){v.host=`${h}:${m}`,v._protocol="http";const{mockUserToken:F}=T;F&&(v._overrideAuthToken="string"==typeof F?F:(0,Tn.Sg)(F,v.app.options.projectId))}(v,h,m,T)}(this._delegate,h,m,T)}}function va(v){return/^[A-Za-z]+:\/\//.test(v)}function ku(v,{instanceIdentifier:h}){const m=v.getProvider("app-compat").getImmediate(),T=v.getProvider("storage").getImmediate({identifier:h});return new ya(m,T)}function Fu(v){const h=function ja(v){return new Ve.y(h=>{const m=re=>h.next(re);m(v.snapshot);const $=v.on("state_changed",m);return v.then(re=>{m(re),h.complete()},re=>{m(v.snapshot),(re=>{h.error(re)})(re)}),function(){$()}}).pipe(function Qt(v,h=Ye.z){return(0,nt.e)((m,T)=>{let F=null,$=null,re=null;const se=()=>{if(F){F.unsubscribe(),F=null;const Me=$;$=null,T.next(Me)}};function _e(){const Me=re+v,it=h.now();if(it<Me)return F=this.schedule(void 0,Me-it),void T.add(F);se()}m.subscribe((0,fe.x)(T,Me=>{$=Me,re=h.now(),F||(F=h.schedule(_e,v),T.add(F))},()=>{se(),T.complete()},void 0,()=>{$=F=null}))})}(0))}(v);return{task:v,then:v.then.bind(v),catch:v.catch.bind(v),pause:v.pause.bind(v),cancel:v.cancel.bind(v),resume:v.resume.bind(v),snapshotChanges:()=>h,percentageChanges:()=>h.pipe((0,be.U)(m=>m.bytesTransferred/m.totalBytes*100))}}function ia(v){return{getDownloadURL:()=>(0,Te.of)(void 0).pipe(ce.fc,(0,ct.w)(()=>v.getDownloadURL()),ce.iC),getMetadata:()=>(0,Te.of)(void 0).pipe(ce.fc,(0,ct.w)(()=>v.getMetadata()),ce.iC),delete:()=>(0,je.D)(v.delete()),child:h=>ia(v.child(h)),updateMetadata:h=>(0,je.D)(v.updateMetadata(h)),put:(h,m)=>Fu(v.put(h,m)),putString:(h,m,T)=>Fu(v.putString(h,m,T)),list:h=>(0,je.D)(v.list(h)),listAll:()=>(0,je.D)(v.listAll())}}!function vr(v){const h={TaskState:zr,TaskEvent:Xo,StringFormat:Ze,Storage:ya,Reference:yr};v.INTERNAL.registerComponent(new bt.wA("storage-compat",ku,"PUBLIC").setServiceProps(h).setMultipleInstances(!0)),v.registerVersion("@firebase/storage-compat","0.3.2")}(Hn.Z);const sl=new q.OlP("angularfire2.storageBucket"),sa=new q.OlP("angularfire2.storage.maxUploadRetryTime"),Fo=new q.OlP("angularfire2.storage.maxOperationRetryTime"),Lo=new q.OlP("angularfire2.storage.use-emulator");let Us=(()=>{class v{storage;constructor(m,T,F,$,re,se,_e,Me,it,_t){const tn=(0,kt.on)(m,re,T);this.storage=(0,kt.cc)(`${tn.name}.storage.${F}`,"AngularFireStorage",tn.name,()=>{const Yt=re.runOutsideAngular(()=>tn.storage(F||void 0)),Pt=it;return Pt&&Yt.useEmulator(...Pt),_e&&Yt.setMaxUploadRetryTime(_e),Me&&Yt.setMaxOperationRetryTime(Me),Yt},[_e,Me])}ref(m){return ia(this.storage.ref(m))}refFromURL(m){return ia(this.storage.refFromURL(m))}upload(m,T,F){return ia(this.storage.ref(m)).put(T,F)}static \u0275fac=function(T){return new(T||v)(q.LFG(kt.Dh),q.LFG(kt.xv,8),q.LFG(sl,8),q.LFG(q.Lbi),q.LFG(q.R0b),q.LFG(ce.HU),q.LFG(sa,8),q.LFG(Fo,8),q.LFG(Lo,8),q.LFG(ce.Rf,8))};static \u0275prov=q.Yz7({token:v,factory:v.\u0275fac,providedIn:"any"})}return v})(),Ci=(()=>{class v{static \u0275fac=function(T){return new(T||v)};static \u0275mod=q.oAB({type:v});static \u0275inj=q.cJS({})}return v})(),ds=(()=>{class v{constructor(){le.Z.registerVersion("angularfire",ce.q4.full,"gcs-compat")}static \u0275fac=function(T){return new(T||v)};static \u0275mod=q.oAB({type:v});static \u0275inj=q.cJS({providers:[Us],imports:[Ci]})}return v})();var $a=z(1626),sr=z(6825);function bs(v){return new q.vHH(3e3,!1)}function k(v){switch(v.length){case 0:return new sr.ZN;case 1:return v[0];default:return new sr.ZE(v)}}function b(v,h,m=new Map,T=new Map){const F=[],$=[];let re=-1,se=null;if(h.forEach(_e=>{const Me=_e.get("offset"),it=Me==re,_t=it&&se||new Map;_e.forEach((tn,Yt)=>{let Pt=Yt,on=tn;if("offset"!==Yt)switch(Pt=v.normalizePropertyName(Pt,F),on){case sr.k1:on=m.get(Yt);break;case sr.l3:on=T.get(Yt);break;default:on=v.normalizeStyleValue(Yt,Pt,on,F)}_t.set(Pt,on)}),it||$.push(_t),se=_t,re=Me}),F.length)throw function ua(v){return new q.vHH(3502,!1)}();return $}function B(v,h,m,T){switch(h){case"start":v.onStart(()=>T(m&&X(m,"start",v)));break;case"done":v.onDone(()=>T(m&&X(m,"done",v)));break;case"destroy":v.onDestroy(()=>T(m&&X(m,"destroy",v)))}}function X(v,h,m){const $=$e(v.element,v.triggerName,v.fromState,v.toState,h||v.phaseName,m.totalTime??v.totalTime,!!m.disabled),re=v._data;return null!=re&&($._data=re),$}function $e(v,h,m,T,F="",$=0,re){return{element:v,triggerName:h,fromState:m,toState:T,phaseName:F,totalTime:$,disabled:!!re}}function ot(v,h,m){let T=v.get(h);return T||v.set(h,T=m),T}function nn(v){const h=v.indexOf(":");return[v.substring(1,h),v.slice(h+1)]}const Wn=(()=>typeof document>"u"?null:document.documentElement)();function Kr(v){const h=v.parentNode||v.host||null;return h===Wn?null:h}let Xr=null,zi=!1;function Vu(v,h){for(;h;){if(h===v)return!0;h=Kr(h)}return!1}function Tr(v,h,m){if(m)return Array.from(v.querySelectorAll(h));const T=v.querySelector(h);return T?[T]:[]}let Da=(()=>{class v{validateStyleProperty(m){return function Ca(v){Xr||(Xr=function Co(){return typeof document<"u"?document.body:null}()||{},zi=!!Xr.style&&"WebkitAppearance"in Xr.style);let h=!0;return Xr.style&&!function Di(v){return"ebkit"==v.substring(1,6)}(v)&&(h=v in Xr.style,!h&&zi&&(h="Webkit"+v.charAt(0).toUpperCase()+v.slice(1)in Xr.style)),h}(m)}matchesElement(m,T){return!1}containsElement(m,T){return Vu(m,T)}getParentElement(m){return Kr(m)}query(m,T,F){return Tr(m,T,F)}computeStyle(m,T,F){return F||""}animate(m,T,F,$,re,se=[],_e){return new sr.ZN(F,$)}static#e=this.\u0275fac=function(T){return new(T||v)};static#t=this.\u0275prov=q.Yz7({token:v,factory:v.\u0275fac})}return v})(),Rs=(()=>{class v{static#e=this.NOOP=new Da}return v})();const _d=1e3,bn="ng-enter",Do="ng-leave",qi="ng-trigger",js=".ng-trigger",la="ng-animating",at=".ng-animating";function gr(v){if("number"==typeof v)return v;const h=v.match(/^(-?[\.\d]+)(m?s)/);return!h||h.length<2?0:fs(parseFloat(h[1]),h[2])}function fs(v,h){return"s"===h?v*_d:v}function _u(v,h,m){return v.hasOwnProperty("duration")?v:function Lt(v,h,m){let F,$=0,re="";if("string"==typeof v){const se=v.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===se)return h.push(bs()),{duration:0,delay:0,easing:""};F=fs(parseFloat(se[1]),se[2]);const _e=se[3];null!=_e&&($=fs(parseFloat(_e),se[4]));const Me=se[5];Me&&(re=Me)}else F=v;if(!m){let se=!1,_e=h.length;F<0&&(h.push(function pi(){return new q.vHH(3100,!1)}()),se=!0),$<0&&(h.push(function Ea(){return new q.vHH(3101,!1)}()),se=!0),se&&h.splice(_e,0,bs())}return{duration:F,delay:$,easing:re}}(v,h,m)}function Bt(v,h={}){return Object.keys(v).forEach(m=>{h[m]=v[m]}),h}function an(v){const h=new Map;return Object.keys(v).forEach(m=>{h.set(m,v[m])}),h}function Qe(v,h=new Map,m){if(m)for(let[T,F]of m)h.set(T,F);for(let[T,F]of v)h.set(T,F);return h}function Cr(v,h,m){h.forEach((T,F)=>{const $=rt(F);m&&!m.has(F)&&m.set(F,v.style[$]),v.style[$]=T})}function Ka(v,h){h.forEach((m,T)=>{const F=rt(T);v.style[F]=""})}function Uu(v){return Array.isArray(v)?1==v.length?v[0]:(0,sr.vP)(v):v}const Za=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ql(v){let h=[];if("string"==typeof v){let m;for(;m=Za.exec(v);)h.push(m[1]);Za.lastIndex=0}return h}function Hs(v,h,m){const T=v.toString(),F=T.replace(Za,($,re)=>{let se=h[re];return null==se&&(m.push(function oa(v){return new q.vHH(3003,!1)}()),se=""),se.toString()});return F==T?v:F}function Bu(v){const h=[];let m=v.next();for(;!m.done;)h.push(m.value),m=v.next();return h}const Ac=/-+([a-z0-9])/g;function rt(v){return v.replace(Ac,(...h)=>h[1].toUpperCase())}function Kn(v,h,m){switch(h.type){case 7:return v.visitTrigger(h,m);case 0:return v.visitState(h,m);case 1:return v.visitTransition(h,m);case 2:return v.visitSequence(h,m);case 3:return v.visitGroup(h,m);case 4:return v.visitAnimate(h,m);case 5:return v.visitKeyframes(h,m);case 6:return v.visitStyle(h,m);case 8:return v.visitReference(h,m);case 9:return v.visitAnimateChild(h,m);case 10:return v.visitAnimateRef(h,m);case 11:return v.visitQuery(h,m);case 12:return v.visitStagger(h,m);default:throw function Bs(v){return new q.vHH(3004,!1)}()}}function Rl(v,h){return window.getComputedStyle(v)[h]}const Et="*";function Zr(v,h){const m=[];return"string"==typeof v?v.split(/\s*,\s*/).forEach(T=>function $s(v,h,m){if(":"==v[0]){const _e=function Aa(v,h){switch(v){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(m,T)=>parseFloat(T)>parseFloat(m);case":decrement":return(m,T)=>parseFloat(T)<parseFloat(m);default:return h.push(function Ta(v){return new q.vHH(3016,!1)}()),"* => *"}}(v,m);if("function"==typeof _e)return void h.push(_e);v=_e}const T=v.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==T||T.length<4)return m.push(function ol(v){return new q.vHH(3015,!1)}()),h;const F=T[1],$=T[2],re=T[3];h.push(ll(F,re));"<"==$[0]&&!(F==Et&&re==Et)&&h.push(ll(re,F))}(T,m,h)):m.push(v),m}const Ao=new Set(["true","1"]),Ai=new Set(["false","0"]);function ll(v,h){const m=Ao.has(v)||Ai.has(v),T=Ao.has(h)||Ai.has(h);return(F,$)=>{let re=v==Et||v==F,se=h==Et||h==$;return!re&&m&&"boolean"==typeof F&&(re=F?Ao.has(v):Ai.has(v)),!se&&T&&"boolean"==typeof $&&(se=$?Ao.has(h):Ai.has(h)),re&&se}}const Pl=new RegExp("s*:selfs*,?","g");function cl(v,h,m,T){return new dl(v).build(h,m,T)}class dl{constructor(h){this._driver=h}build(h,m,T){const F=new O(m);return this._resetContextStyleTimingState(F),Kn(this,Uu(h),F)}_resetContextStyleTimingState(h){h.currentQuerySelector="",h.collectedStyles=new Map,h.collectedStyles.set("",new Map),h.currentTime=0}visitTrigger(h,m){let T=m.queryCount=0,F=m.depCount=0;const $=[],re=[];return"@"==h.name.charAt(0)&&m.errors.push(function wo(){return new q.vHH(3006,!1)}()),h.definitions.forEach(se=>{if(this._resetContextStyleTimingState(m),0==se.type){const _e=se,Me=_e.name;Me.toString().split(/\s*,\s*/).forEach(it=>{_e.name=it,$.push(this.visitState(_e,m))}),_e.name=Me}else if(1==se.type){const _e=this.visitTransition(se,m);T+=_e.queryCount,F+=_e.depCount,re.push(_e)}else m.errors.push(function eo(){return new q.vHH(3007,!1)}())}),{type:7,name:h.name,states:$,transitions:re,queryCount:T,depCount:F,options:null}}visitState(h,m){const T=this.visitStyle(h.styles,m),F=h.options&&h.options.params||null;if(T.containsDynamicStyles){const $=new Set,re=F||{};T.styles.forEach(se=>{se instanceof Map&&se.forEach(_e=>{Ql(_e).forEach(Me=>{re.hasOwnProperty(Me)||$.add(Me)})})}),$.size&&(Bu($.values()),m.errors.push(function za(v,h){return new q.vHH(3008,!1)}()))}return{type:0,name:h.name,style:T,options:F?{params:F}:null}}visitTransition(h,m){m.queryCount=0,m.depCount=0;const T=Kn(this,Uu(h.animation),m);return{type:1,matchers:Zr(h.expr,m.errors),animation:T,queryCount:m.queryCount,depCount:m.depCount,options:V(h.options)}}visitSequence(h,m){return{type:2,steps:h.steps.map(T=>Kn(this,T,m)),options:V(h.options)}}visitGroup(h,m){const T=m.currentTime;let F=0;const $=h.steps.map(re=>{m.currentTime=T;const se=Kn(this,re,m);return F=Math.max(F,m.currentTime),se});return m.currentTime=F,{type:3,steps:$,options:V(h.options)}}visitAnimate(h,m){const T=function C(v,h){if(v.hasOwnProperty("duration"))return v;if("number"==typeof v)return Z(_u(v,h).duration,0,"");const m=v;if(m.split(/\s+/).some($=>"{"==$.charAt(0)&&"{"==$.charAt(1))){const $=Z(0,0,"");return $.dynamic=!0,$.strValue=m,$}const F=_u(m,h);return Z(F.duration,F.delay,F.easing)}(h.timings,m.errors);m.currentAnimateTimings=T;let F,$=h.styles?h.styles:(0,sr.oB)({});if(5==$.type)F=this.visitKeyframes($,m);else{let re=h.styles,se=!1;if(!re){se=!0;const Me={};T.easing&&(Me.easing=T.easing),re=(0,sr.oB)(Me)}m.currentTime+=T.duration+T.delay;const _e=this.visitStyle(re,m);_e.isEmptyStep=se,F=_e}return m.currentAnimateTimings=null,{type:4,timings:T,style:F,options:null}}visitStyle(h,m){const T=this._makeStyleAst(h,m);return this._validateStyleAst(T,m),T}_makeStyleAst(h,m){const T=[],F=Array.isArray(h.styles)?h.styles:[h.styles];for(let se of F)"string"==typeof se?se===sr.l3?T.push(se):m.errors.push(new q.vHH(3002,!1)):T.push(an(se));let $=!1,re=null;return T.forEach(se=>{if(se instanceof Map&&(se.has("easing")&&(re=se.get("easing"),se.delete("easing")),!$))for(let _e of se.values())if(_e.toString().indexOf("{{")>=0){$=!0;break}}),{type:6,styles:T,easing:re,offset:h.offset,containsDynamicStyles:$,options:null}}_validateStyleAst(h,m){const T=m.currentAnimateTimings;let F=m.currentTime,$=m.currentTime;T&&$>0&&($-=T.duration+T.delay),h.styles.forEach(re=>{"string"!=typeof re&&re.forEach((se,_e)=>{const Me=m.collectedStyles.get(m.currentQuerySelector),it=Me.get(_e);let _t=!0;it&&($!=F&&$>=it.startTime&&F<=it.endTime&&(m.errors.push(function To(v,h,m,T,F){return new q.vHH(3010,!1)}()),_t=!1),$=it.startTime),_t&&Me.set(_e,{startTime:$,endTime:F}),m.options&&function ul(v,h,m){const T=h.params||{},F=Ql(v);F.length&&F.forEach($=>{T.hasOwnProperty($)||m.push(function Vo(v){return new q.vHH(3001,!1)}())})}(se,m.options,m.errors)})})}visitKeyframes(h,m){const T={type:5,styles:[],options:null};if(!m.currentAnimateTimings)return m.errors.push(function aa(){return new q.vHH(3011,!1)}()),T;let $=0;const re=[];let se=!1,_e=!1,Me=0;const it=h.steps.map(Sr=>{const Rr=this._makeStyleAst(Sr,m);let Zn=null!=Rr.offset?Rr.offset:function I(v){if("string"==typeof v)return null;let h=null;if(Array.isArray(v))v.forEach(m=>{if(m instanceof Map&&m.has("offset")){const T=m;h=parseFloat(T.get("offset")),T.delete("offset")}});else if(v instanceof Map&&v.has("offset")){const m=v;h=parseFloat(m.get("offset")),m.delete("offset")}return h}(Rr.styles),Bn=0;return null!=Zn&&($++,Bn=Rr.offset=Zn),_e=_e||Bn<0||Bn>1,se=se||Bn<Me,Me=Bn,re.push(Bn),Rr});_e&&m.errors.push(function hs(){return new q.vHH(3012,!1)}()),se&&m.errors.push(function gi(){return new q.vHH(3200,!1)}());const _t=h.steps.length;let tn=0;$>0&&$<_t?m.errors.push(function Wr(){return new q.vHH(3202,!1)}()):0==$&&(tn=1/(_t-1));const Yt=_t-1,Pt=m.currentTime,on=m.currentAnimateTimings,In=on.duration;return it.forEach((Sr,Rr)=>{const Zn=tn>0?Rr==Yt?1:tn*Rr:re[Rr],Bn=Zn*In;m.currentTime=Pt+on.delay+Bn,on.duration=Bn,this._validateStyleAst(Sr,m),Sr.offset=Zn,T.styles.push(Sr)}),T}visitReference(h,m){return{type:8,animation:Kn(this,Uu(h.animation),m),options:V(h.options)}}visitAnimateChild(h,m){return m.depCount++,{type:9,options:V(h.options)}}visitAnimateRef(h,m){return{type:10,animation:this.visitReference(h.animation,m),options:V(h.options)}}visitQuery(h,m){const T=m.currentQuerySelector,F=h.options||{};m.queryCount++,m.currentQuery=h;const[$,re]=function bc(v){const h=!!v.split(/\s*,\s*/).find(m=>":self"==m);return h&&(v=v.replace(Pl,"")),v=v.replace(/@\*/g,js).replace(/@\w+/g,m=>js+"-"+m.slice(1)).replace(/:animating/g,at),[v,h]}(h.selector);m.currentQuerySelector=T.length?T+" "+$:$,ot(m.collectedStyles,m.currentQuerySelector,new Map);const se=Kn(this,Uu(h.animation),m);return m.currentQuery=null,m.currentQuerySelector=T,{type:11,selector:$,limit:F.limit||0,optional:!!F.optional,includeSelf:re,animation:se,originalSelector:h.selector,options:V(h.options)}}visitStagger(h,m){m.currentQuery||m.errors.push(function Uo(){return new q.vHH(3013,!1)}());const T="full"===h.timings?{duration:0,delay:0,easing:"full"}:_u(h.timings,m.errors,!0);return{type:12,animation:Kn(this,Uu(h.animation),m),timings:T,options:null}}}class O{constructor(h){this.errors=h,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function V(v){return v?(v=Bt(v)).params&&(v.params=function D(v){return v?Bt(v):null}(v.params)):v={},v}function Z(v,h,m){return{duration:v,delay:h,easing:m}}function ae(v,h,m,T,F,$,re=null,se=!1){return{type:1,element:v,keyframes:h,preStyleProps:m,postStyleProps:T,duration:F,delay:$,totalTime:F+$,easing:re,subTimeline:se}}class Be{constructor(){this._map=new Map}get(h){return this._map.get(h)||[]}append(h,m){let T=this._map.get(h);T||this._map.set(h,T=[]),T.push(...m)}has(h){return this._map.has(h)}clear(){this._map.clear()}}const dn=new RegExp(":enter","g"),Pn=new RegExp(":leave","g");function rr(v,h,m,T,F,$=new Map,re=new Map,se,_e,Me=[]){return(new ju).buildKeyframes(v,h,m,T,F,$,re,se,_e,Me)}class ju{buildKeyframes(h,m,T,F,$,re,se,_e,Me,it=[]){Me=Me||new Be;const _t=new Bo(h,m,Me,F,$,it,[]);_t.options=_e;const tn=_e.delay?gr(_e.delay):0;_t.currentTimeline.delayNextStep(tn),_t.currentTimeline.setStyles([re],null,_t.errors,_e),Kn(this,T,_t);const Yt=_t.timelines.filter(Pt=>Pt.containsAnimation());if(Yt.length&&se.size){let Pt;for(let on=Yt.length-1;on>=0;on--){const In=Yt[on];if(In.element===m){Pt=In;break}}Pt&&!Pt.allowOnlyTimelineStyles()&&Pt.setStyles([se],null,_t.errors,_e)}return Yt.length?Yt.map(Pt=>Pt.buildKeyframes()):[ae(m,[],[],[],0,tn,"",!1)]}visitTrigger(h,m){}visitState(h,m){}visitTransition(h,m){}visitAnimateChild(h,m){const T=m.subInstructions.get(m.element);if(T){const F=m.createSubContext(h.options),$=m.currentTimeline.currentTime,re=this._visitSubInstructions(T,F,F.options);$!=re&&m.transformIntoNewTimeline(re)}m.previousNode=h}visitAnimateRef(h,m){const T=m.createSubContext(h.options);T.transformIntoNewTimeline(),this._applyAnimationRefDelays([h.options,h.animation.options],m,T),this.visitReference(h.animation,T),m.transformIntoNewTimeline(T.currentTimeline.currentTime),m.previousNode=h}_applyAnimationRefDelays(h,m,T){for(const F of h){const $=F?.delay;if($){const re="number"==typeof $?$:gr(Hs($,F?.params??{},m.errors));T.delayNextStep(re)}}}_visitSubInstructions(h,m,T){let $=m.currentTimeline.currentTime;const re=null!=T.duration?gr(T.duration):null,se=null!=T.delay?gr(T.delay):null;return 0!==re&&h.forEach(_e=>{const Me=m.appendInstructionToTimeline(_e,re,se);$=Math.max($,Me.duration+Me.delay)}),$}visitReference(h,m){m.updateOptions(h.options,!0),Kn(this,h.animation,m),m.previousNode=h}visitSequence(h,m){const T=m.subContextCount;let F=m;const $=h.options;if($&&($.params||$.delay)&&(F=m.createSubContext($),F.transformIntoNewTimeline(),null!=$.delay)){6==F.previousNode.type&&(F.currentTimeline.snapshotCurrentStyles(),F.previousNode=bi);const re=gr($.delay);F.delayNextStep(re)}h.steps.length&&(h.steps.forEach(re=>Kn(this,re,F)),F.currentTimeline.applyStylesToKeyframe(),F.subContextCount>T&&F.transformIntoNewTimeline()),m.previousNode=h}visitGroup(h,m){const T=[];let F=m.currentTimeline.currentTime;const $=h.options&&h.options.delay?gr(h.options.delay):0;h.steps.forEach(re=>{const se=m.createSubContext(h.options);$&&se.delayNextStep($),Kn(this,re,se),F=Math.max(F,se.currentTimeline.currentTime),T.push(se.currentTimeline)}),T.forEach(re=>m.currentTimeline.mergeTimelineCollectedStyles(re)),m.transformIntoNewTimeline(F),m.previousNode=h}_visitTiming(h,m){if(h.dynamic){const T=h.strValue;return _u(m.params?Hs(T,m.params,m.errors):T,m.errors)}return{duration:h.duration,delay:h.delay,easing:h.easing}}visitAnimate(h,m){const T=m.currentAnimateTimings=this._visitTiming(h.timings,m),F=m.currentTimeline;T.delay&&(m.incrementTime(T.delay),F.snapshotCurrentStyles());const $=h.style;5==$.type?this.visitKeyframes($,m):(m.incrementTime(T.duration),this.visitStyle($,m),F.applyStylesToKeyframe()),m.currentAnimateTimings=null,m.previousNode=h}visitStyle(h,m){const T=m.currentTimeline,F=m.currentAnimateTimings;!F&&T.hasCurrentStyleProperties()&&T.forwardFrame();const $=F&&F.easing||h.easing;h.isEmptyStep?T.applyEmptyStep($):T.setStyles(h.styles,$,m.errors,m.options),m.previousNode=h}visitKeyframes(h,m){const T=m.currentAnimateTimings,F=m.currentTimeline.duration,$=T.duration,se=m.createSubContext().currentTimeline;se.easing=T.easing,h.styles.forEach(_e=>{se.forwardTime((_e.offset||0)*$),se.setStyles(_e.styles,_e.easing,m.errors,m.options),se.applyStylesToKeyframe()}),m.currentTimeline.mergeTimelineCollectedStyles(se),m.transformIntoNewTimeline(F+$),m.previousNode=h}visitQuery(h,m){const T=m.currentTimeline.currentTime,F=h.options||{},$=F.delay?gr(F.delay):0;$&&(6===m.previousNode.type||0==T&&m.currentTimeline.hasCurrentStyleProperties())&&(m.currentTimeline.snapshotCurrentStyles(),m.previousNode=bi);let re=T;const se=m.invokeQuery(h.selector,h.originalSelector,h.limit,h.includeSelf,!!F.optional,m.errors);m.currentQueryTotal=se.length;let _e=null;se.forEach((Me,it)=>{m.currentQueryIndex=it;const _t=m.createSubContext(h.options,Me);$&&_t.delayNextStep($),Me===m.element&&(_e=_t.currentTimeline),Kn(this,h.animation,_t),_t.currentTimeline.applyStylesToKeyframe(),re=Math.max(re,_t.currentTimeline.currentTime)}),m.currentQueryIndex=0,m.currentQueryTotal=0,m.transformIntoNewTimeline(re),_e&&(m.currentTimeline.mergeTimelineCollectedStyles(_e),m.currentTimeline.snapshotCurrentStyles()),m.previousNode=h}visitStagger(h,m){const T=m.parentContext,F=m.currentTimeline,$=h.timings,re=Math.abs($.duration),se=re*(m.currentQueryTotal-1);let _e=re*m.currentQueryIndex;switch($.duration<0?"reverse":$.easing){case"reverse":_e=se-_e;break;case"full":_e=T.currentStaggerTime}const it=m.currentTimeline;_e&&it.delayNextStep(_e);const _t=it.currentTime;Kn(this,h.animation,m),m.previousNode=h,T.currentStaggerTime=F.currentTime-_t+(F.startTime-T.currentTimeline.startTime)}}const bi={};class Bo{constructor(h,m,T,F,$,re,se,_e){this._driver=h,this.element=m,this.subInstructions=T,this._enterClassName=F,this._leaveClassName=$,this.errors=re,this.timelines=se,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=bi,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_e||new no(this._driver,m,0),se.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(h,m){if(!h)return;const T=h;let F=this.options;null!=T.duration&&(F.duration=gr(T.duration)),null!=T.delay&&(F.delay=gr(T.delay));const $=T.params;if($){let re=F.params;re||(re=this.options.params={}),Object.keys($).forEach(se=>{(!m||!re.hasOwnProperty(se))&&(re[se]=Hs($[se],re,this.errors))})}}_copyOptions(){const h={};if(this.options){const m=this.options.params;if(m){const T=h.params={};Object.keys(m).forEach(F=>{T[F]=m[F]})}}return h}createSubContext(h=null,m,T){const F=m||this.element,$=new Bo(this._driver,F,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(F,T||0));return $.previousNode=this.previousNode,$.currentAnimateTimings=this.currentAnimateTimings,$.options=this._copyOptions(),$.updateOptions(h),$.currentQueryIndex=this.currentQueryIndex,$.currentQueryTotal=this.currentQueryTotal,$.parentContext=this,this.subContextCount++,$}transformIntoNewTimeline(h){return this.previousNode=bi,this.currentTimeline=this.currentTimeline.fork(this.element,h),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(h,m,T){const F={duration:m??h.duration,delay:this.currentTimeline.currentTime+(T??0)+h.delay,easing:""},$=new Ml(this._driver,h.element,h.keyframes,h.preStyleProps,h.postStyleProps,F,h.stretchStartingKeyframe);return this.timelines.push($),F}incrementTime(h){this.currentTimeline.forwardTime(this.currentTimeline.duration+h)}delayNextStep(h){h>0&&this.currentTimeline.delayNextStep(h)}invokeQuery(h,m,T,F,$,re){let se=[];if(F&&se.push(this.element),h.length>0){h=(h=h.replace(dn,"."+this._enterClassName)).replace(Pn,"."+this._leaveClassName);let Me=this._driver.query(this.element,h,1!=T);0!==T&&(Me=T<0?Me.slice(Me.length+T,Me.length):Me.slice(0,T)),se.push(...Me)}return!$&&0==se.length&&re.push(function Ss(v){return new q.vHH(3014,!1)}()),se}}class no{constructor(h,m,T,F){this._driver=h,this.element=m,this.startTime=T,this._elementTimelineStylesLookup=F,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(m),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(m,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(h){const m=1===this._keyframes.size&&this._pendingStyles.size;this.duration||m?(this.forwardTime(this.currentTime+h),m&&this.snapshotCurrentStyles()):this.startTime+=h}fork(h,m){return this.applyStylesToKeyframe(),new no(this._driver,h,m||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(h){this.applyStylesToKeyframe(),this.duration=h,this._loadKeyframe()}_updateStyle(h,m){this._localTimelineStyles.set(h,m),this._globalTimelineStyles.set(h,m),this._styleSummary.set(h,{time:this.currentTime,value:m})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(h){h&&this._previousKeyframe.set("easing",h);for(let[m,T]of this._globalTimelineStyles)this._backFill.set(m,T||sr.l3),this._currentKeyframe.set(m,sr.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(h,m,T,F){m&&this._previousKeyframe.set("easing",m);const $=F&&F.params||{},re=function hl(v,h){const m=new Map;let T;return v.forEach(F=>{if("*"===F){T=T||h.keys();for(let $ of T)m.set($,sr.l3)}else Qe(F,m)}),m}(h,this._globalTimelineStyles);for(let[se,_e]of re){const Me=Hs(_e,$,T);this._pendingStyles.set(se,Me),this._localTimelineStyles.has(se)||this._backFill.set(se,this._globalTimelineStyles.get(se)??sr.l3),this._updateStyle(se,Me)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((h,m)=>{this._currentKeyframe.set(m,h)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((h,m)=>{this._currentKeyframe.has(m)||this._currentKeyframe.set(m,h)}))}snapshotCurrentStyles(){for(let[h,m]of this._localTimelineStyles)this._pendingStyles.set(h,m),this._updateStyle(h,m)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const h=[];for(let m in this._currentKeyframe)h.push(m);return h}mergeTimelineCollectedStyles(h){h._styleSummary.forEach((m,T)=>{const F=this._styleSummary.get(T);(!F||m.time>F.time)&&this._updateStyle(T,m.value)})}buildKeyframes(){this.applyStylesToKeyframe();const h=new Set,m=new Set,T=1===this._keyframes.size&&0===this.duration;let F=[];this._keyframes.forEach((se,_e)=>{const Me=Qe(se,new Map,this._backFill);Me.forEach((it,_t)=>{it===sr.k1?h.add(_t):it===sr.l3&&m.add(_t)}),T||Me.set("offset",_e/this.duration),F.push(Me)});const $=h.size?Bu(h.values()):[],re=m.size?Bu(m.values()):[];if(T){const se=F[0],_e=new Map(se);se.set("offset",0),_e.set("offset",1),F=[se,_e]}return ae(this.element,F,$,re,this.duration,this.startTime,this.easing,!1)}}class Ml extends no{constructor(h,m,T,F,$,re,se=!1){super(h,m,re.delay),this.keyframes=T,this.preStyleProps=F,this.postStyleProps=$,this._stretchStartingKeyframe=se,this.timings={duration:re.duration,delay:re.delay,easing:re.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let h=this.keyframes,{delay:m,duration:T,easing:F}=this.timings;if(this._stretchStartingKeyframe&&m){const $=[],re=T+m,se=m/re,_e=Qe(h[0]);_e.set("offset",0),$.push(_e);const Me=Qe(h[0]);Me.set("offset",ps(se)),$.push(Me);const it=h.length-1;for(let _t=1;_t<=it;_t++){let tn=Qe(h[_t]);const Yt=tn.get("offset");tn.set("offset",ps((m+Yt*T)/re)),$.push(tn)}T=re,m=0,F="",h=$}return ae(this.element,h,this.preStyleProps,this.postStyleProps,T,m,F,!0)}}function ps(v,h=3){const m=Math.pow(10,h-1);return Math.round(v*m)/m}class po{}const Ja=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Ol extends po{normalizePropertyName(h,m){return rt(h)}normalizeStyleValue(h,m,T,F){let $="";const re=T.toString().trim();if(Ja.has(m)&&0!==T&&"0"!==T)if("number"==typeof T)$="px";else{const se=T.match(/^[+-]?[\d\.]+([a-z]*)$/);se&&0==se[1].length&&F.push(function Ia(v,h){return new q.vHH(3005,!1)}())}return re+$}}function fl(v,h,m,T,F,$,re,se,_e,Me,it,_t,tn){return{type:0,element:v,triggerName:h,isRemovalTransition:F,fromState:m,fromStyles:$,toState:T,toStyles:re,timelines:se,queriedElements:_e,preStyleProps:Me,postStyleProps:it,totalTime:_t,errors:tn}}const Hu={};class Nl{constructor(h,m,T){this._triggerName=h,this.ast=m,this._stateStyles=T}match(h,m,T,F){return function vu(v,h,m,T,F){return v.some($=>$(h,m,T,F))}(this.ast.matchers,h,m,T,F)}buildStyles(h,m,T){let F=this._stateStyles.get("*");return void 0!==h&&(F=this._stateStyles.get(h?.toString())||F),F?F.buildStyles(m,T):new Map}build(h,m,T,F,$,re,se,_e,Me,it){const _t=[],tn=this.ast.options&&this.ast.options.params||Hu,Pt=this.buildStyles(T,se&&se.params||Hu,_t),on=_e&&_e.params||Hu,In=this.buildStyles(F,on,_t),Sr=new Set,Rr=new Map,Zn=new Map,Bn="void"===F,ei={params:Xa(on,tn),delay:this.ast.options?.delay},Si=it?[]:rr(h,m,this.ast.animation,$,re,Pt,In,ei,Me,_t);let Qr=0;if(Si.forEach(so=>{Qr=Math.max(so.duration+so.delay,Qr)}),_t.length)return fl(m,this._triggerName,T,F,Bn,Pt,In,[],[],Rr,Zn,Qr,_t);Si.forEach(so=>{const $o=so.element,So=ot(Rr,$o,new Set);so.preStyleProps.forEach(Ro=>So.add(Ro));const Wu=ot(Zn,$o,new Set);so.postStyleProps.forEach(Ro=>Wu.add(Ro)),$o!==m&&Sr.add($o)});const _s=Bu(Sr.values());return fl(m,this._triggerName,T,F,Bn,Pt,In,Si,_s,Rr,Zn,Qr)}}function Xa(v,h){const m=Bt(h);for(const T in v)v.hasOwnProperty(T)&&null!=v[T]&&(m[T]=v[T]);return m}class $u{constructor(h,m,T){this.styles=h,this.defaultParams=m,this.normalizer=T}buildStyles(h,m){const T=new Map,F=Bt(this.defaultParams);return Object.keys(h).forEach($=>{const re=h[$];null!==re&&(F[$]=re)}),this.styles.styles.forEach($=>{"string"!=typeof $&&$.forEach((re,se)=>{re&&(re=Hs(re,F,m));const _e=this.normalizer.normalizePropertyName(se,m);re=this.normalizer.normalizeStyleValue(se,_e,re,m),T.set(se,re)})}),T}}class Sc{constructor(h,m,T){this.name=h,this.ast=m,this._normalizer=T,this.transitionFactories=[],this.states=new Map,m.states.forEach(F=>{this.states.set(F.name,new $u(F.style,F.options&&F.options.params||{},T))}),Ed(this.states,"true","1"),Ed(this.states,"false","0"),m.transitions.forEach(F=>{this.transitionFactories.push(new Nl(h,F,this.states))}),this.fallbackTransition=function Vf(v,h,m){return new Nl(v,{type:1,animation:{type:2,steps:[],options:null},matchers:[(re,se)=>!0],options:null,queryCount:0,depCount:0},h)}(h,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(h,m,T,F){return this.transitionFactories.find(re=>re.match(h,m,T,F))||null}matchStyles(h,m,T){return this.fallbackTransition.buildStyles(h,m,T)}}function Ed(v,h,m){v.has(h)?v.has(m)||v.set(m,v.get(h)):v.has(m)&&v.set(h,v.get(m))}const Rc=new Be;class mh{constructor(h,m,T){this.bodyNode=h,this._driver=m,this._normalizer=T,this._animations=new Map,this._playersById=new Map,this.players=[]}register(h,m){const T=[],$=cl(this._driver,m,T,[]);if(T.length)throw function Lu(v){return new q.vHH(3503,!1)}();this._animations.set(h,$)}_buildPlayer(h,m,T){const F=h.element,$=b(this._normalizer,h.keyframes,m,T);return this._driver.animate(F,$,h.duration,h.delay,h.easing,[],!0)}create(h,m,T={}){const F=[],$=this._animations.get(h);let re;const se=new Map;if($?(re=rr(this._driver,m,$,bn,Do,new Map,new Map,T,Rc,F),re.forEach(it=>{const _t=ot(se,it.element,new Map);it.postStyleProps.forEach(tn=>_t.set(tn,null))})):(F.push(function to(){return new q.vHH(3300,!1)}()),re=[]),F.length)throw function al(v){return new q.vHH(3504,!1)}();se.forEach((it,_t)=>{it.forEach((tn,Yt)=>{it.set(Yt,this._driver.computeStyle(_t,Yt,sr.l3))})});const Me=k(re.map(it=>{const _t=se.get(it.element);return this._buildPlayer(it,new Map,_t)}));return this._playersById.set(h,Me),Me.onDestroy(()=>this.destroy(h)),this.players.push(Me),Me}destroy(h){const m=this._getPlayer(h);m.destroy(),this._playersById.delete(h);const T=this.players.indexOf(m);T>=0&&this.players.splice(T,1)}_getPlayer(h){const m=this._playersById.get(h);if(!m)throw function $i(v){return new q.vHH(3301,!1)}();return m}listen(h,m,T,F){const $=$e(m,"","","");return B(this._getPlayer(h),T,$,F),()=>{}}command(h,m,T,F){if("register"==T)return void this.register(h,F[0]);if("create"==T)return void this.create(h,m,F[0]||{});const $=this._getPlayer(h);switch(T){case"play":$.play();break;case"pause":$.pause();break;case"reset":$.reset();break;case"restart":$.restart();break;case"finish":$.finish();break;case"init":$.init();break;case"setPosition":$.setPosition(parseFloat(F[0]));break;case"destroy":this.destroy(h)}}}const _h="ng-animate-queued",ba="ng-animate-disabled",pl=[],xl={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},is={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ms="__ng_removed";class Sa{get params(){return this.options.params}constructor(h,m=""){this.namespaceId=m;const T=h&&h.hasOwnProperty("value");if(this.value=function tu(v){return v??null}(T?h.value:h),T){const $=Bt(h);delete $.value,this.options=$}else this.options={};this.options.params||(this.options.params={})}absorbOptions(h){const m=h.params;if(m){const T=this.options.params;Object.keys(m).forEach(F=>{null==T[F]&&(T[F]=m[F])})}}}const ro="void",Dr=new Sa(ro);class eu{constructor(h,m,T){this.id=h,this.hostElement=m,this._engine=T,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+h,ss(m,this._hostClassName)}listen(h,m,T,F){if(!this._triggers.has(m))throw function qa(v,h){return new q.vHH(3302,!1)}();if(null==T||0==T.length)throw function S(v){return new q.vHH(3303,!1)}();if(!function Mc(v){return"start"==v||"done"==v}(T))throw function W(v,h){return new q.vHH(3400,!1)}();const $=ot(this._elementListeners,h,[]),re={name:m,phase:T,callback:F};$.push(re);const se=ot(this._engine.statesByElement,h,new Map);return se.has(m)||(ss(h,qi),ss(h,qi+"-"+m),se.set(m,Dr)),()=>{this._engine.afterFlush(()=>{const _e=$.indexOf(re);_e>=0&&$.splice(_e,1),this._triggers.has(m)||se.delete(m)})}}register(h,m){return!this._triggers.has(h)&&(this._triggers.set(h,m),!0)}_getTrigger(h){const m=this._triggers.get(h);if(!m)throw function L(v){return new q.vHH(3401,!1)}();return m}trigger(h,m,T,F=!0){const $=this._getTrigger(m),re=new Ir(this.id,m,h);let se=this._engine.statesByElement.get(h);se||(ss(h,qi),ss(h,qi+"-"+m),this._engine.statesByElement.set(h,se=new Map));let _e=se.get(m);const Me=new Sa(T,this.id);if(!(T&&T.hasOwnProperty("value"))&&_e&&Me.absorbOptions(_e.options),se.set(m,Me),_e||(_e=Dr),Me.value!==ro&&_e.value===Me.value){if(!function gl(v,h){const m=Object.keys(v),T=Object.keys(h);if(m.length!=T.length)return!1;for(let F=0;F<m.length;F++){const $=m[F];if(!h.hasOwnProperty($)||v[$]!==h[$])return!1}return!0}(_e.params,Me.params)){const on=[],In=$.matchStyles(_e.value,_e.params,on),Sr=$.matchStyles(Me.value,Me.params,on);on.length?this._engine.reportError(on):this._engine.afterFlush(()=>{Ka(h,In),Cr(h,Sr)})}return}const tn=ot(this._engine.playersByElement,h,[]);tn.forEach(on=>{on.namespaceId==this.id&&on.triggerName==m&&on.queued&&on.destroy()});let Yt=$.matchTransition(_e.value,Me.value,h,Me.params),Pt=!1;if(!Yt){if(!F)return;Yt=$.fallbackTransition,Pt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:m,transition:Yt,fromState:_e,toState:Me,player:re,isFallbackTransition:Pt}),Pt||(ss(h,_h),re.onStart(()=>{mr(h,_h)})),re.onDone(()=>{let on=this.players.indexOf(re);on>=0&&this.players.splice(on,1);const In=this._engine.playersByElement.get(h);if(In){let Sr=In.indexOf(re);Sr>=0&&In.splice(Sr,1)}}),this.players.push(re),tn.push(re),re}deregister(h){this._triggers.delete(h),this._engine.statesByElement.forEach(m=>m.delete(h)),this._elementListeners.forEach((m,T)=>{this._elementListeners.set(T,m.filter(F=>F.name!=h))})}clearElementCache(h){this._engine.statesByElement.delete(h),this._elementListeners.delete(h);const m=this._engine.playersByElement.get(h);m&&(m.forEach(T=>T.destroy()),this._engine.playersByElement.delete(h))}_signalRemovalForInnerTriggers(h,m){const T=this._engine.driver.query(h,js,!0);T.forEach(F=>{if(F[Ms])return;const $=this._engine.fetchNamespacesByElement(F);$.size?$.forEach(re=>re.triggerLeaveAnimation(F,m,!1,!0)):this.clearElementCache(F)}),this._engine.afterFlushAnimationsDone(()=>T.forEach(F=>this.clearElementCache(F)))}triggerLeaveAnimation(h,m,T,F){const $=this._engine.statesByElement.get(h),re=new Map;if($){const se=[];if($.forEach((_e,Me)=>{if(re.set(Me,_e.value),this._triggers.has(Me)){const it=this.trigger(h,Me,ro,F);it&&se.push(it)}}),se.length)return this._engine.markElementAsRemoved(this.id,h,!0,m,re),T&&k(se).onDone(()=>this._engine.processLeaveNode(h)),!0}return!1}prepareLeaveAnimationListeners(h){const m=this._elementListeners.get(h),T=this._engine.statesByElement.get(h);if(m&&T){const F=new Set;m.forEach($=>{const re=$.name;if(F.has(re))return;F.add(re);const _e=this._triggers.get(re).fallbackTransition,Me=T.get(re)||Dr,it=new Sa(ro),_t=new Ir(this.id,re,h);this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:re,transition:_e,fromState:Me,toState:it,player:_t,isFallbackTransition:!0})})}}removeNode(h,m){const T=this._engine;if(h.childElementCount&&this._signalRemovalForInnerTriggers(h,m),this.triggerLeaveAnimation(h,m,!0))return;let F=!1;if(T.totalAnimations){const $=T.players.length?T.playersByQueriedElement.get(h):[];if($&&$.length)F=!0;else{let re=h;for(;re=re.parentNode;)if(T.statesByElement.get(re)){F=!0;break}}}if(this.prepareLeaveAnimationListeners(h),F)T.markElementAsRemoved(this.id,h,!1,m);else{const $=h[Ms];(!$||$===xl)&&(T.afterFlush(()=>this.clearElementCache(h)),T.destroyInnerAnimations(h),T._onRemovalComplete(h,m))}}insertNode(h,m){ss(h,this._hostClassName)}drainQueuedTransitions(h){const m=[];return this._queue.forEach(T=>{const F=T.player;if(F.destroyed)return;const $=T.element,re=this._elementListeners.get($);re&&re.forEach(se=>{if(se.name==T.triggerName){const _e=$e($,T.triggerName,T.fromState.value,T.toState.value);_e._data=h,B(T.player,se.phase,_e,se.callback)}}),F.markedForDestroy?this._engine.afterFlush(()=>{F.destroy()}):m.push(T)}),this._queue=[],m.sort((T,F)=>{const $=T.transition.ast.depCount,re=F.transition.ast.depCount;return 0==$||0==re?$-re:this._engine.driver.containsElement(T.element,F.element)?1:-1})}destroy(h){this.players.forEach(m=>m.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,h)}}class xi{_onRemovalComplete(h,m){this.onRemovalComplete(h,m)}constructor(h,m,T){this.bodyNode=h,this.driver=m,this._normalizer=T,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(F,$)=>{}}get queuedPlayers(){const h=[];return this._namespaceList.forEach(m=>{m.players.forEach(T=>{T.queued&&h.push(T)})}),h}createNamespace(h,m){const T=new eu(h,m,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,m)?this._balanceNamespaceList(T,m):(this.newHostElements.set(m,T),this.collectEnterElement(m)),this._namespaceLookup[h]=T}_balanceNamespaceList(h,m){const T=this._namespaceList,F=this.namespacesByHostElement;if(T.length-1>=0){let re=!1,se=this.driver.getParentElement(m);for(;se;){const _e=F.get(se);if(_e){const Me=T.indexOf(_e);T.splice(Me+1,0,h),re=!0;break}se=this.driver.getParentElement(se)}re||T.unshift(h)}else T.push(h);return F.set(m,h),h}register(h,m){let T=this._namespaceLookup[h];return T||(T=this.createNamespace(h,m)),T}registerTrigger(h,m,T){let F=this._namespaceLookup[h];F&&F.register(m,T)&&this.totalAnimations++}destroy(h,m){h&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const T=this._fetchNamespace(h);this.namespacesByHostElement.delete(T.hostElement);const F=this._namespaceList.indexOf(T);F>=0&&this._namespaceList.splice(F,1),T.destroy(m),delete this._namespaceLookup[h]}))}_fetchNamespace(h){return this._namespaceLookup[h]}fetchNamespacesByElement(h){const m=new Set,T=this.statesByElement.get(h);if(T)for(let F of T.values())if(F.namespaceId){const $=this._fetchNamespace(F.namespaceId);$&&m.add($)}return m}trigger(h,m,T,F){if(gs(m)){const $=this._fetchNamespace(h);if($)return $.trigger(m,T,F),!0}return!1}insertNode(h,m,T,F){if(!gs(m))return;const $=m[Ms];if($&&$.setForRemoval){$.setForRemoval=!1,$.setForMove=!0;const re=this.collectedLeaveElements.indexOf(m);re>=0&&this.collectedLeaveElements.splice(re,1)}if(h){const re=this._fetchNamespace(h);re&&re.insertNode(m,T)}F&&this.collectEnterElement(m)}collectEnterElement(h){this.collectedEnterElements.push(h)}markElementAsDisabled(h,m){m?this.disabledNodes.has(h)||(this.disabledNodes.add(h),ss(h,ba)):this.disabledNodes.has(h)&&(this.disabledNodes.delete(h),mr(h,ba))}removeNode(h,m,T){if(gs(m)){const F=h?this._fetchNamespace(h):null;F?F.removeNode(m,T):this.markElementAsRemoved(h,m,!1,T);const $=this.namespacesByHostElement.get(m);$&&$.id!==h&&$.removeNode(m,T)}else this._onRemovalComplete(m,T)}markElementAsRemoved(h,m,T,F,$){this.collectedLeaveElements.push(m),m[Ms]={namespaceId:h,setForRemoval:F,hasAnimation:T,removedBeforeQueried:!1,previousTriggersValues:$}}listen(h,m,T,F,$){return gs(m)?this._fetchNamespace(h).listen(m,T,F,$):()=>{}}_buildInstruction(h,m,T,F,$){return h.transition.build(this.driver,h.element,h.fromState.value,h.toState.value,T,F,h.fromState.options,h.toState.options,m,$)}destroyInnerAnimations(h){let m=this.driver.query(h,js,!0);m.forEach(T=>this.destroyActiveAnimationsForElement(T)),0!=this.playersByQueriedElement.size&&(m=this.driver.query(h,at,!0),m.forEach(T=>this.finishActiveQueriedAnimationOnElement(T)))}destroyActiveAnimationsForElement(h){const m=this.playersByElement.get(h);m&&m.forEach(T=>{T.queued?T.markedForDestroy=!0:T.destroy()})}finishActiveQueriedAnimationOnElement(h){const m=this.playersByQueriedElement.get(h);m&&m.forEach(T=>T.finish())}whenRenderingDone(){return new Promise(h=>{if(this.players.length)return k(this.players).onDone(()=>h());h()})}processLeaveNode(h){const m=h[Ms];if(m&&m.setForRemoval){if(h[Ms]=xl,m.namespaceId){this.destroyInnerAnimations(h);const T=this._fetchNamespace(m.namespaceId);T&&T.clearElementCache(h)}this._onRemovalComplete(h,m.setForRemoval)}h.classList?.contains(ba)&&this.markElementAsDisabled(h,!1),this.driver.query(h,".ng-animate-disabled",!0).forEach(T=>{this.markElementAsDisabled(T,!1)})}flush(h=-1){let m=[];if(this.newHostElements.size&&(this.newHostElements.forEach((T,F)=>this._balanceNamespaceList(T,F)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let T=0;T<this.collectedEnterElements.length;T++)ss(this.collectedEnterElements[T],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const T=[];try{m=this._flushAnimations(T,h)}finally{for(let F=0;F<T.length;F++)T[F]()}}else for(let T=0;T<this.collectedLeaveElements.length;T++)this.processLeaveNode(this.collectedLeaveElements[T]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(T=>T()),this._flushFns=[],this._whenQuietFns.length){const T=this._whenQuietFns;this._whenQuietFns=[],m.length?k(m).onDone(()=>{T.forEach(F=>F())}):T.forEach(F=>F())}}reportError(h){throw function G(v){return new q.vHH(3402,!1)}()}_flushAnimations(h,m){const T=new Be,F=[],$=new Map,re=[],se=new Map,_e=new Map,Me=new Map,it=new Set;this.disabledNodes.forEach(Mt=>{it.add(Mt);const Kt=this.driver.query(Mt,".ng-animate-queued",!0);for(let vn=0;vn<Kt.length;vn++)it.add(Kt[vn])});const _t=this.bodyNode,tn=Array.from(this.statesByElement.keys()),Yt=Nc(tn,this.collectedEnterElements),Pt=new Map;let on=0;Yt.forEach((Mt,Kt)=>{const vn=bn+on++;Pt.set(Kt,vn),Mt.forEach(jn=>ss(jn,vn))});const In=[],Sr=new Set,Rr=new Set;for(let Mt=0;Mt<this.collectedLeaveElements.length;Mt++){const Kt=this.collectedLeaveElements[Mt],vn=Kt[Ms];vn&&vn.setForRemoval&&(In.push(Kt),Sr.add(Kt),vn.hasAnimation?this.driver.query(Kt,".ng-star-inserted",!0).forEach(jn=>Sr.add(jn)):Rr.add(Kt))}const Zn=new Map,Bn=Nc(tn,Array.from(Sr));Bn.forEach((Mt,Kt)=>{const vn=Do+on++;Zn.set(Kt,vn),Mt.forEach(jn=>ss(jn,vn))}),h.push(()=>{Yt.forEach((Mt,Kt)=>{const vn=Pt.get(Kt);Mt.forEach(jn=>mr(jn,vn))}),Bn.forEach((Mt,Kt)=>{const vn=Zn.get(Kt);Mt.forEach(jn=>mr(jn,vn))}),In.forEach(Mt=>{this.processLeaveNode(Mt)})});const ei=[],Si=[];for(let Mt=this._namespaceList.length-1;Mt>=0;Mt--)this._namespaceList[Mt].drainQueuedTransitions(m).forEach(vn=>{const jn=vn.player,ki=vn.element;if(ei.push(jn),this.collectedEnterElements.length){const ys=ki[Ms];if(ys&&ys.setForMove){if(ys.previousTriggersValues&&ys.previousTriggersValues.has(vn.triggerName)){const Gs=ys.previousTriggersValues.get(vn.triggerName),ha=this.statesByElement.get(vn.element);if(ha&&ha.has(vn.triggerName)){const vs=ha.get(vn.triggerName);vs.value=Gs,ha.set(vn.triggerName,vs)}}return void jn.destroy()}}const oo=!_t||!this.driver.containsElement(_t,ki),mo=Zn.get(ki),Po=Pt.get(ki),Pr=this._buildInstruction(vn,T,Po,mo,oo);if(Pr.errors&&Pr.errors.length)return void Si.push(Pr);if(oo)return jn.onStart(()=>Ka(ki,Pr.fromStyles)),jn.onDestroy(()=>Cr(ki,Pr.toStyles)),void F.push(jn);if(vn.isFallbackTransition)return jn.onStart(()=>Ka(ki,Pr.fromStyles)),jn.onDestroy(()=>Cr(ki,Pr.toStyles)),void F.push(jn);const yl=[];Pr.timelines.forEach(ys=>{ys.stretchStartingKeyframe=!0,this.disabledNodes.has(ys.element)||yl.push(ys)}),Pr.timelines=yl,T.append(ki,Pr.timelines),re.push({instruction:Pr,player:jn,element:ki}),Pr.queriedElements.forEach(ys=>ot(se,ys,[]).push(jn)),Pr.preStyleProps.forEach((ys,Gs)=>{if(ys.size){let ha=_e.get(Gs);ha||_e.set(Gs,ha=new Set),ys.forEach((vs,Vc)=>ha.add(Vc))}}),Pr.postStyleProps.forEach((ys,Gs)=>{let ha=Me.get(Gs);ha||Me.set(Gs,ha=new Set),ys.forEach((vs,Vc)=>ha.add(Vc))})});if(Si.length){const Mt=[];Si.forEach(Kt=>{Mt.push(function Ge(v,h){return new q.vHH(3505,!1)}())}),ei.forEach(Kt=>Kt.destroy()),this.reportError(Mt)}const Qr=new Map,_s=new Map;re.forEach(Mt=>{const Kt=Mt.element;T.has(Kt)&&(_s.set(Kt,Kt),this._beforeAnimationBuild(Mt.player.namespaceId,Mt.instruction,Qr))}),F.forEach(Mt=>{const Kt=Mt.element;this._getPreviousPlayers(Kt,!1,Mt.namespaceId,Mt.triggerName,null).forEach(jn=>{ot(Qr,Kt,[]).push(jn),jn.destroy()})});const so=In.filter(Mt=>wu(Mt,_e,Me)),$o=new Map;mi($o,this.driver,Rr,Me,sr.l3).forEach(Mt=>{wu(Mt,_e,Me)&&so.push(Mt)});const Wu=new Map;Yt.forEach((Mt,Kt)=>{mi(Wu,this.driver,new Set(Mt),_e,sr.k1)}),so.forEach(Mt=>{const Kt=$o.get(Mt),vn=Wu.get(Mt);$o.set(Mt,new Map([...Kt?.entries()??[],...vn?.entries()??[]]))});const Ro=[],Fc=[],Tu={};re.forEach(Mt=>{const{element:Kt,player:vn,instruction:jn}=Mt;if(T.has(Kt)){if(it.has(Kt))return vn.onDestroy(()=>Cr(Kt,jn.toStyles)),vn.disabled=!0,vn.overrideTotalTime(jn.totalTime),void F.push(vn);let ki=Tu;if(_s.size>1){let mo=Kt;const Po=[];for(;mo=mo.parentNode;){const Pr=_s.get(mo);if(Pr){ki=Pr;break}Po.push(mo)}Po.forEach(Pr=>_s.set(Pr,ki))}const oo=this._buildAnimation(vn.namespaceId,jn,Qr,$,Wu,$o);if(vn.setRealPlayer(oo),ki===Tu)Ro.push(vn);else{const mo=this.playersByElement.get(ki);mo&&mo.length&&(vn.parentPlayer=k(mo)),F.push(vn)}}else Ka(Kt,jn.fromStyles),vn.onDestroy(()=>Cr(Kt,jn.toStyles)),Fc.push(vn),it.has(Kt)&&F.push(vn)}),Fc.forEach(Mt=>{const Kt=$.get(Mt.element);if(Kt&&Kt.length){const vn=k(Kt);Mt.setRealPlayer(vn)}}),F.forEach(Mt=>{Mt.parentPlayer?Mt.syncPlayerEvents(Mt.parentPlayer):Mt.destroy()});for(let Mt=0;Mt<In.length;Mt++){const Kt=In[Mt],vn=Kt[Ms];if(mr(Kt,Do),vn&&vn.hasAnimation)continue;let jn=[];if(se.size){let oo=se.get(Kt);oo&&oo.length&&jn.push(...oo);let mo=this.driver.query(Kt,at,!0);for(let Po=0;Po<mo.length;Po++){let Pr=se.get(mo[Po]);Pr&&Pr.length&&jn.push(...Pr)}}const ki=jn.filter(oo=>!oo.destroyed);ki.length?io(this,Kt,ki):this.processLeaveNode(Kt)}return In.length=0,Ro.forEach(Mt=>{this.players.push(Mt),Mt.onDone(()=>{Mt.destroy();const Kt=this.players.indexOf(Mt);this.players.splice(Kt,1)}),Mt.play()}),Ro}afterFlush(h){this._flushFns.push(h)}afterFlushAnimationsDone(h){this._whenQuietFns.push(h)}_getPreviousPlayers(h,m,T,F,$){let re=[];if(m){const se=this.playersByQueriedElement.get(h);se&&(re=se)}else{const se=this.playersByElement.get(h);if(se){const _e=!$||$==ro;se.forEach(Me=>{Me.queued||!_e&&Me.triggerName!=F||re.push(Me)})}}return(T||F)&&(re=re.filter(se=>!(T&&T!=se.namespaceId||F&&F!=se.triggerName))),re}_beforeAnimationBuild(h,m,T){const $=m.element,re=m.isRemovalTransition?void 0:h,se=m.isRemovalTransition?void 0:m.triggerName;for(const _e of m.timelines){const Me=_e.element,it=Me!==$,_t=ot(T,Me,[]);this._getPreviousPlayers(Me,it,re,se,m.toState).forEach(Yt=>{const Pt=Yt.getRealPlayer();Pt.beforeDestroy&&Pt.beforeDestroy(),Yt.destroy(),_t.push(Yt)})}Ka($,m.fromStyles)}_buildAnimation(h,m,T,F,$,re){const se=m.triggerName,_e=m.element,Me=[],it=new Set,_t=new Set,tn=m.timelines.map(Pt=>{const on=Pt.element;it.add(on);const In=on[Ms];if(In&&In.removedBeforeQueried)return new sr.ZN(Pt.duration,Pt.delay);const Sr=on!==_e,Rr=function Xl(v){const h=[];return Iu(v,h),h}((T.get(on)||pl).map(Qr=>Qr.getRealPlayer())).filter(Qr=>!!Qr.element&&Qr.element===on),Zn=$.get(on),Bn=re.get(on),ei=b(this._normalizer,Pt.keyframes,Zn,Bn),Si=this._buildPlayer(Pt,ei,Rr);if(Pt.subTimeline&&F&&_t.add(on),Sr){const Qr=new Ir(h,se,on);Qr.setRealPlayer(Si),Me.push(Qr)}return Si});Me.forEach(Pt=>{ot(this.playersByQueriedElement,Pt.element,[]).push(Pt),Pt.onDone(()=>function zu(v,h,m){let T=v.get(h);if(T){if(T.length){const F=T.indexOf(m);T.splice(F,1)}0==T.length&&v.delete(h)}return T}(this.playersByQueriedElement,Pt.element,Pt))}),it.forEach(Pt=>ss(Pt,la));const Yt=k(tn);return Yt.onDestroy(()=>{it.forEach(Pt=>mr(Pt,la)),Cr(_e,m.toStyles)}),_t.forEach(Pt=>{ot(F,Pt,[]).push(Yt)}),Yt}_buildPlayer(h,m,T){return m.length>0?this.driver.animate(h.element,m,h.duration,h.delay,h.easing,T):new sr.ZN(h.duration,h.delay)}}class Ir{constructor(h,m,T){this.namespaceId=h,this.triggerName=m,this.element=T,this._player=new sr.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(h){this._containsRealPlayer||(this._player=h,this._queuedCallbacks.forEach((m,T)=>{m.forEach(F=>B(h,T,void 0,F))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(h.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(h){this.totalTime=h}syncPlayerEvents(h){const m=this._player;m.triggerCallback&&h.onStart(()=>m.triggerCallback("start")),h.onDone(()=>this.finish()),h.onDestroy(()=>this.destroy())}_queueEvent(h,m){ot(this._queuedCallbacks,h,[]).push(m)}onDone(h){this.queued&&this._queueEvent("done",h),this._player.onDone(h)}onStart(h){this.queued&&this._queueEvent("start",h),this._player.onStart(h)}onDestroy(h){this.queued&&this._queueEvent("destroy",h),this._player.onDestroy(h)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(h){this.queued||this._player.setPosition(h)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(h){const m=this._player;m.triggerCallback&&m.triggerCallback(h)}}function gs(v){return v&&1===v.nodeType}function Oc(v,h){const m=v.style.display;return v.style.display=h??"none",m}function mi(v,h,m,T,F){const $=[];m.forEach(_e=>$.push(Oc(_e)));const re=[];T.forEach((_e,Me)=>{const it=new Map;_e.forEach(_t=>{const tn=h.computeStyle(Me,_t,F);it.set(_t,tn),(!tn||0==tn.length)&&(Me[Ms]=is,re.push(Me))}),v.set(Me,it)});let se=0;return m.forEach(_e=>Oc(_e,$[se++])),re}function Nc(v,h){const m=new Map;if(v.forEach(se=>m.set(se,[])),0==h.length)return m;const F=new Set(h),$=new Map;function re(se){if(!se)return 1;let _e=$.get(se);if(_e)return _e;const Me=se.parentNode;return _e=m.has(Me)?Me:F.has(Me)?1:re(Me),$.set(se,_e),_e}return h.forEach(se=>{const _e=re(se);1!==_e&&m.get(_e).push(se)}),m}function ss(v,h){v.classList?.add(h)}function mr(v,h){v.classList?.remove(h)}function io(v,h,m){k(m).onDone(()=>v.processLeaveNode(h))}function Iu(v,h){for(let m=0;m<v.length;m++){const T=v[m];T instanceof sr.ZE?Iu(T.players,h):h.push(T)}}function wu(v,h,m){const T=m.get(v);if(!T)return!1;let F=h.get(v);return F?T.forEach($=>F.add($)):h.set(v,T),m.delete(v),!0}class go{constructor(h,m,T){this.bodyNode=h,this._driver=m,this._normalizer=T,this._triggerCache={},this.onRemovalComplete=(F,$)=>{},this._transitionEngine=new xi(h,m,T),this._timelineEngine=new mh(h,m,T),this._transitionEngine.onRemovalComplete=(F,$)=>this.onRemovalComplete(F,$)}registerTrigger(h,m,T,F,$){const re=h+"-"+F;let se=this._triggerCache[re];if(!se){const _e=[],it=cl(this._driver,$,_e,[]);if(_e.length)throw function rs(v,h){return new q.vHH(3404,!1)}();se=function vd(v,h,m){return new Sc(v,h,m)}(F,it,this._normalizer),this._triggerCache[re]=se}this._transitionEngine.registerTrigger(m,F,se)}register(h,m){this._transitionEngine.register(h,m)}destroy(h,m){this._transitionEngine.destroy(h,m)}onInsert(h,m,T,F){this._transitionEngine.insertNode(h,m,T,F)}onRemove(h,m,T){this._transitionEngine.removeNode(h,m,T)}disableAnimations(h,m){this._transitionEngine.markElementAsDisabled(h,m)}process(h,m,T,F){if("@"==T.charAt(0)){const[$,re]=nn(T);this._timelineEngine.command($,m,re,F)}else this._transitionEngine.trigger(h,m,T,F)}listen(h,m,T,F,$){if("@"==T.charAt(0)){const[re,se]=nn(T);return this._timelineEngine.listen(re,m,se,$)}return this._transitionEngine.listen(h,m,T,F,$)}flush(h=-1){this._transitionEngine.flush(h)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(h){this._transitionEngine.afterFlushAnimationsDone(h)}}let kl=(()=>{class v{static#e=this.initialStylesByElement=new WeakMap;constructor(m,T,F){this._element=m,this._startStyles=T,this._endStyles=F,this._state=0;let $=v.initialStylesByElement.get(m);$||v.initialStylesByElement.set(m,$=new Map),this._initialStyles=$}start(){this._state<1&&(this._startStyles&&Cr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Cr(this._element,this._initialStyles),this._endStyles&&(Cr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(v.initialStylesByElement.delete(this._element),this._startStyles&&(Ka(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ka(this._element,this._endStyles),this._endStyles=null),Cr(this._element,this._initialStyles),this._state=3)}}return v})();function bo(v){let h=null;return v.forEach((m,T)=>{(function jo(v){return"display"===v||"position"===v})(T)&&(h=h||new Map,h.set(T,m))}),h}class Gu{constructor(h,m,T,F){this.element=h,this.keyframes=m,this.options=T,this._specialStyles=F,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=T.duration,this._delay=T.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(h=>h()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const h=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,h,this.options),this._finalKeyframe=h.length?h[h.length-1]:new Map;const m=()=>this._onFinish();this.domPlayer.addEventListener("finish",m),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",m)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(h){const m=[];return h.forEach(T=>{m.push(Object.fromEntries(T))}),m}_triggerWebAnimation(h,m,T){return h.animate(this._convertKeyframesToObject(m),T)}onStart(h){this._originalOnStartFns.push(h),this._onStartFns.push(h)}onDone(h){this._originalOnDoneFns.push(h),this._onDoneFns.push(h)}onDestroy(h){this._onDestroyFns.push(h)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(h=>h()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(h=>h()),this._onDestroyFns=[])}setPosition(h){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=h*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const h=new Map;this.hasStarted()&&this._finalKeyframe.forEach((T,F)=>{"offset"!==F&&h.set(F,this._finished?T:Rl(this.element,F))}),this.currentSnapshot=h}triggerCallback(h){const m="start"===h?this._onStartFns:this._onDoneFns;m.forEach(T=>T()),m.length=0}}class Ra{validateStyleProperty(h){return!0}validateAnimatableStyleProperty(h){return!0}matchesElement(h,m){return!1}containsElement(h,m){return Vu(h,m)}getParentElement(h){return Kr(h)}query(h,m,T){return Tr(h,m,T)}computeStyle(h,m,T){return window.getComputedStyle(h)[m]}animate(h,m,T,F,$,re=[]){const _e={duration:T,delay:F,fill:0==F?"both":"forwards"};$&&(_e.easing=$);const Me=new Map,it=re.filter(Yt=>Yt instanceof Gu);(function ii(v,h){return 0===v||0===h})(T,F)&&it.forEach(Yt=>{Yt.currentSnapshot.forEach((Pt,on)=>Me.set(on,Pt))});let _t=function At(v){return v.length?v[0]instanceof Map?v:v.map(h=>an(h)):[]}(m).map(Yt=>Qe(Yt));_t=function En(v,h,m){if(m.size&&h.length){let T=h[0],F=[];if(m.forEach(($,re)=>{T.has(re)||F.push(re),T.set(re,$)}),F.length)for(let $=1;$<h.length;$++){let re=h[$];F.forEach(se=>re.set(se,Rl(v,se)))}}return h}(h,_t,Me);const tn=function si(v,h){let m=null,T=null;return Array.isArray(h)&&h.length?(m=bo(h[0]),h.length>1&&(T=bo(h[h.length-1]))):h instanceof Map&&(m=bo(h)),m||T?new kl(v,m,T):null}(h,_t);return new Gu(h,_t,_e,tn)}}let Fl=(()=>{class v extends sr._j{constructor(m,T){super(),this._nextAnimationId=0,this._renderer=m.createRenderer(T.body,{id:"0",encapsulation:q.ifc.None,styles:[],data:{animation:[]}})}build(m){const T=this._nextAnimationId.toString();this._nextAnimationId++;const F=Array.isArray(m)?(0,sr.vP)(m):m;return Ho(this._renderer,null,T,"register",[F]),new ca(T,this._renderer)}static#e=this.\u0275fac=function(T){return new(T||v)(q.LFG(q.FYo),q.LFG(ve.K0))};static#t=this.\u0275prov=q.Yz7({token:v,factory:v.\u0275fac})}return v})();class ca extends sr.LC{constructor(h,m){super(),this._id=h,this._renderer=m}create(h,m){return new nu(this._id,h,m||{},this._renderer)}}class nu{constructor(h,m,T,F){this.id=h,this.element=m,this._renderer=F,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",T)}_listen(h,m){return this._renderer.listen(this.element,`@@${this.id}:${h}`,m)}_command(h,...m){return Ho(this._renderer,this.element,this.id,h,m)}onDone(h){this._listen("done",h)}onStart(h){this._listen("start",h)}onDestroy(h){this._listen("destroy",h)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(h){this._command("setPosition",h)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Ho(v,h,m,T,F){return v.setProperty(h,`@@${m}:${T}`,F)}const ml="@.disabled";let Pa=(()=>{class v{constructor(m,T,F){this.delegate=m,this.engine=T,this._zone=F,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,T.onRemovalComplete=($,re)=>{const se=re?.parentNode($);se&&re.removeChild(se,$)}}createRenderer(m,T){const $=this.delegate.createRenderer(m,T);if(!(m&&T&&T.data&&T.data.animation)){let it=this._rendererCache.get($);return it||(it=new ec("",$,this.engine,()=>this._rendererCache.delete($)),this._rendererCache.set($,it)),it}const re=T.id,se=T.id+"-"+this._currentId;this._currentId++,this.engine.register(se,m);const _e=it=>{Array.isArray(it)?it.forEach(_e):this.engine.registerTrigger(re,se,m,it.name,it)};return T.data.animation.forEach(_e),new Id(this,se,$,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(m,T,F){m>=0&&m<this._microtaskId?this._zone.run(()=>T(F)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach($=>{const[re,se]=$;re(se)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([T,F]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(T){return new(T||v)(q.LFG(q.FYo),q.LFG(go),q.LFG(q.R0b))};static#t=this.\u0275prov=q.Yz7({token:v,factory:v.\u0275fac})}return v})();class ec{constructor(h,m,T,F){this.namespaceId=h,this.delegate=m,this.engine=T,this._onDestroy=F}get data(){return this.delegate.data}destroyNode(h){this.delegate.destroyNode?.(h)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(h,m){return this.delegate.createElement(h,m)}createComment(h){return this.delegate.createComment(h)}createText(h){return this.delegate.createText(h)}appendChild(h,m){this.delegate.appendChild(h,m),this.engine.onInsert(this.namespaceId,m,h,!1)}insertBefore(h,m,T,F=!0){this.delegate.insertBefore(h,m,T),this.engine.onInsert(this.namespaceId,m,h,F)}removeChild(h,m,T){this.engine.onRemove(this.namespaceId,m,this.delegate)}selectRootElement(h,m){return this.delegate.selectRootElement(h,m)}parentNode(h){return this.delegate.parentNode(h)}nextSibling(h){return this.delegate.nextSibling(h)}setAttribute(h,m,T,F){this.delegate.setAttribute(h,m,T,F)}removeAttribute(h,m,T){this.delegate.removeAttribute(h,m,T)}addClass(h,m){this.delegate.addClass(h,m)}removeClass(h,m){this.delegate.removeClass(h,m)}setStyle(h,m,T,F){this.delegate.setStyle(h,m,T,F)}removeStyle(h,m,T){this.delegate.removeStyle(h,m,T)}setProperty(h,m,T){"@"==m.charAt(0)&&m==ml?this.disableAnimations(h,!!T):this.delegate.setProperty(h,m,T)}setValue(h,m){this.delegate.setValue(h,m)}listen(h,m,T){return this.delegate.listen(h,m,T)}disableAnimations(h,m){this.engine.disableAnimations(h,m)}}class Id extends ec{constructor(h,m,T,F,$){super(m,T,F,$),this.factory=h,this.namespaceId=m}setProperty(h,m,T){"@"==m.charAt(0)?"."==m.charAt(1)&&m==ml?this.disableAnimations(h,T=void 0===T||!!T):this.engine.process(this.namespaceId,h,m.slice(1),T):this.delegate.setProperty(h,m,T)}listen(h,m,T){if("@"==m.charAt(0)){const F=function xc(v){switch(v){case"body":return document.body;case"document":return document;case"window":return window;default:return v}}(h);let $=m.slice(1),re="";return"@"!=$.charAt(0)&&([$,re]=function Ll(v){const h=v.indexOf(".");return[v.substring(0,h),v.slice(h+1)]}($)),this.engine.listen(this.namespaceId,F,$,re,se=>{this.factory.scheduleListenerCallback(se._data||-1,T,se)})}return this.delegate.listen(h,m,T)}}const wd=[{provide:sr._j,useClass:Fl},{provide:po,useFactory:function kc(){return new Ol}},{provide:go,useClass:(()=>{class v extends go{constructor(m,T,F,$){super(m.body,T,F)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(T){return new(T||v)(q.LFG(ve.K0),q.LFG(Rs),q.LFG(po),q.LFG(q.z2F))};static#t=this.\u0275prov=q.Yz7({token:v,factory:v.\u0275fac})}return v})()},{provide:q.FYo,useFactory:function Uf(v,h,m){return new Pa(v,h,m)},deps:[w.se,go,q.R0b]}],ru=[{provide:Rs,useFactory:()=>new Ra},{provide:q.QbO,useValue:"BrowserAnimations"},...wd],ms=[{provide:Rs,useClass:Da},{provide:q.QbO,useValue:"NoopAnimations"},...wd];let Td=(()=>{class v{static withConfig(m){return{ngModule:v,providers:m.disableAnimations?ms:ru}}static#e=this.\u0275fac=function(T){return new(T||v)};static#t=this.\u0275mod=q.oAB({type:v});static#n=this.\u0275inj=q.cJS({providers:ru,imports:[w.b2]})}return v})(),tc=(()=>{class v extends ue.eV{constructor(m){super(),this.title=m}updateTitle(m){const T=this.buildTitle(m);this.title.setTitle(T?`PlanningPoker - ${T}`:"PlanningPoker")}static#e=this.\u0275fac=function(T){return new(T||v)(q.LFG(w.Dx))};static#t=this.\u0275prov=q.Yz7({token:v,factory:v.\u0275fac})}return v})();const zs={apiKey:"AIzaSyBxcb1o6HFEHy-RwZevt909OKSOqEpvW-g",authDomain:"planning-poker-cd302.firebaseapp.com",projectId:"planning-poker-cd302",storageBucket:"planning-poker-cd302.appspot.com",messagingSenderId:"903421093759",appId:"1:903421093759:web:79ee181c62d36ca5d09c4a"};let _l=(()=>{class v{static#e=this.\u0275fac=function(T){return new(T||v)};static#t=this.\u0275mod=q.oAB({type:v,bootstrap:[tt]});static#n=this.\u0275inj=q.cJS({providers:[{provide:ue.eV,useClass:tc}],imports:[w.b2,Td,ve.ez,ft,ut,$a.PagesModule,pt.m,kt.hO.initializeApp(zs),Ee.yb,De.ww,ds,pt.m]})}return v})();w.q6().bootstrapModule(_l).catch(v=>console.error(v))},5619:(Nt,He,z)=>{z.d(He,{X:()=>ue});var w=z(8645);class ue extends w.x{constructor(De){super(),this._value=De}get value(){return this.getValue()}_subscribe(De){const ve=super._subscribe(De);return!ve.closed&&De.next(this._value),ve}getValue(){const{hasError:De,thrownError:ve,_value:Ie}=this;if(De)throw ve;return this._throwIfClosed(),Ie}next(De){super.next(this._value=De)}}},5592:(Nt,He,z)=>{z.d(He,{y:()=>P});var w=z(305),ue=z(7394),q=z(4850),De=z(8407),ve=z(2653),Ie=z(4674),Pe=z(1441);let P=(()=>{class be{constructor(Ke){Ke&&(this._subscribe=Ke)}lift(Ke){const ft=new be;return ft.source=this,ft.operator=Ke,ft}subscribe(Ke,ft,tt){const pt=function he(be){return be&&be instanceof w.Lv||function le(be){return be&&(0,Ie.m)(be.next)&&(0,Ie.m)(be.error)&&(0,Ie.m)(be.complete)}(be)&&(0,ue.Nn)(be)}(Ke)?Ke:new w.Hp(Ke,ft,tt);return(0,Pe.x)(()=>{const{operator:ut,source:kt}=this;pt.add(ut?ut.call(pt,kt):kt?this._subscribe(pt):this._trySubscribe(pt))}),pt}_trySubscribe(Ke){try{return this._subscribe(Ke)}catch(ft){Ke.error(ft)}}forEach(Ke,ft){return new(ft=xe(ft))((tt,pt)=>{const ut=new w.Hp({next:kt=>{try{Ke(kt)}catch(Ee){pt(Ee),ut.unsubscribe()}},error:pt,complete:tt});this.subscribe(ut)})}_subscribe(Ke){var ft;return null===(ft=this.source)||void 0===ft?void 0:ft.subscribe(Ke)}[q.L](){return this}pipe(...Ke){return(0,De.U)(Ke)(this)}toPromise(Ke){return new(Ke=xe(Ke))((ft,tt)=>{let pt;this.subscribe(ut=>pt=ut,ut=>tt(ut),()=>ft(pt))})}}return be.create=Je=>new be(Je),be})();function xe(be){var Je;return null!==(Je=be??ve.config.Promise)&&void 0!==Je?Je:Promise}},8645:(Nt,He,z)=>{z.d(He,{x:()=>Pe});var w=z(5592),ue=z(7394);const De=(0,z(2306).d)(xe=>function(){xe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ve=z(9039),Ie=z(1441);let Pe=(()=>{class xe extends w.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(he){const be=new P(this,this);return be.operator=he,be}_throwIfClosed(){if(this.closed)throw new De}next(he){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const be of this.currentObservers)be.next(he)}})}error(he){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=he;const{observers:be}=this;for(;be.length;)be.shift().error(he)}})}complete(){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:he}=this;for(;he.length;)he.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var he;return(null===(he=this.observers)||void 0===he?void 0:he.length)>0}_trySubscribe(he){return this._throwIfClosed(),super._trySubscribe(he)}_subscribe(he){return this._throwIfClosed(),this._checkFinalizedStatuses(he),this._innerSubscribe(he)}_innerSubscribe(he){const{hasError:be,isStopped:Je,observers:Ke}=this;return be||Je?ue.Lc:(this.currentObservers=null,Ke.push(he),new ue.w0(()=>{this.currentObservers=null,(0,ve.P)(Ke,he)}))}_checkFinalizedStatuses(he){const{hasError:be,thrownError:Je,isStopped:Ke}=this;be?he.error(Je):Ke&&he.complete()}asObservable(){const he=new w.y;return he.source=this,he}}return xe.create=(le,he)=>new P(le,he),xe})();class P extends Pe{constructor(le,he){super(),this.destination=le,this.source=he}next(le){var he,be;null===(be=null===(he=this.destination)||void 0===he?void 0:he.next)||void 0===be||be.call(he,le)}error(le){var he,be;null===(be=null===(he=this.destination)||void 0===he?void 0:he.error)||void 0===be||be.call(he,le)}complete(){var le,he;null===(he=null===(le=this.destination)||void 0===le?void 0:le.complete)||void 0===he||he.call(le)}_subscribe(le){var he,be;return null!==(be=null===(he=this.source)||void 0===he?void 0:he.subscribe(le))&&void 0!==be?be:ue.Lc}}},305:(Nt,He,z)=>{z.d(He,{Hp:()=>tt,Lv:()=>be});var w=z(4674),ue=z(7394),q=z(2653),De=z(3894),ve=z(2420);const Ie=xe("C",void 0,void 0);function xe(ce,Ve,Te){return{kind:ce,value:Ve,error:Te}}var le=z(7599),he=z(1441);class be extends ue.w0{constructor(Ve){super(),this.isStopped=!1,Ve?(this.destination=Ve,(0,ue.Nn)(Ve)&&Ve.add(this)):this.destination=Ee}static create(Ve,Te,je){return new tt(Ve,Te,je)}next(Ve){this.isStopped?kt(function P(ce){return xe("N",ce,void 0)}(Ve),this):this._next(Ve)}error(Ve){this.isStopped?kt(function Pe(ce){return xe("E",void 0,ce)}(Ve),this):(this.isStopped=!0,this._error(Ve))}complete(){this.isStopped?kt(Ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ve){this.destination.next(Ve)}_error(Ve){try{this.destination.error(Ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Je=Function.prototype.bind;function Ke(ce,Ve){return Je.call(ce,Ve)}class ft{constructor(Ve){this.partialObserver=Ve}next(Ve){const{partialObserver:Te}=this;if(Te.next)try{Te.next(Ve)}catch(je){pt(je)}}error(Ve){const{partialObserver:Te}=this;if(Te.error)try{Te.error(Ve)}catch(je){pt(je)}else pt(Ve)}complete(){const{partialObserver:Ve}=this;if(Ve.complete)try{Ve.complete()}catch(Te){pt(Te)}}}class tt extends be{constructor(Ve,Te,je){let Ye;if(super(),(0,w.m)(Ve)||!Ve)Ye={next:Ve??void 0,error:Te??void 0,complete:je??void 0};else{let nt;this&&q.config.useDeprecatedNextContext?(nt=Object.create(Ve),nt.unsubscribe=()=>this.unsubscribe(),Ye={next:Ve.next&&Ke(Ve.next,nt),error:Ve.error&&Ke(Ve.error,nt),complete:Ve.complete&&Ke(Ve.complete,nt)}):Ye=Ve}this.destination=new ft(Ye)}}function pt(ce){q.config.useDeprecatedSynchronousErrorHandling?(0,he.O)(ce):(0,De.h)(ce)}function kt(ce,Ve){const{onStoppedNotification:Te}=q.config;Te&&le.z.setTimeout(()=>Te(ce,Ve))}const Ee={closed:!0,next:ve.Z,error:function ut(ce){throw ce},complete:ve.Z}},7394:(Nt,He,z)=>{z.d(He,{Lc:()=>Ie,w0:()=>ve,Nn:()=>Pe});var w=z(4674);const q=(0,z(2306).d)(xe=>function(he){xe(this),this.message=he?`${he.length} errors occurred during unsubscription:\n${he.map((be,Je)=>`${Je+1}) ${be.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=he});var De=z(9039);class ve{constructor(le){this.initialTeardown=le,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let le;if(!this.closed){this.closed=!0;const{_parentage:he}=this;if(he)if(this._parentage=null,Array.isArray(he))for(const Ke of he)Ke.remove(this);else he.remove(this);const{initialTeardown:be}=this;if((0,w.m)(be))try{be()}catch(Ke){le=Ke instanceof q?Ke.errors:[Ke]}const{_finalizers:Je}=this;if(Je){this._finalizers=null;for(const Ke of Je)try{P(Ke)}catch(ft){le=le??[],ft instanceof q?le=[...le,...ft.errors]:le.push(ft)}}if(le)throw new q(le)}}add(le){var he;if(le&&le!==this)if(this.closed)P(le);else{if(le instanceof ve){if(le.closed||le._hasParent(this))return;le._addParent(this)}(this._finalizers=null!==(he=this._finalizers)&&void 0!==he?he:[]).push(le)}}_hasParent(le){const{_parentage:he}=this;return he===le||Array.isArray(he)&&he.includes(le)}_addParent(le){const{_parentage:he}=this;this._parentage=Array.isArray(he)?(he.push(le),he):he?[he,le]:le}_removeParent(le){const{_parentage:he}=this;he===le?this._parentage=null:Array.isArray(he)&&(0,De.P)(he,le)}remove(le){const{_finalizers:he}=this;he&&(0,De.P)(he,le),le instanceof ve&&le._removeParent(this)}}ve.EMPTY=(()=>{const xe=new ve;return xe.closed=!0,xe})();const Ie=ve.EMPTY;function Pe(xe){return xe instanceof ve||xe&&"closed"in xe&&(0,w.m)(xe.remove)&&(0,w.m)(xe.add)&&(0,w.m)(xe.unsubscribe)}function P(xe){(0,w.m)(xe)?xe():xe.unsubscribe()}},2653:(Nt,He,z)=>{z.d(He,{config:()=>w});const w={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(Nt,He,z)=>{z.d(He,{z:()=>ve});var w=z(7537),q=z(4564),De=z(2459);function ve(...Ie){return function ue(){return(0,w.J)(1)}()((0,De.D)(Ie,(0,q.yG)(Ie)))}},6232:(Nt,He,z)=>{z.d(He,{E:()=>ue});const ue=new(z(5592).y)(ve=>ve.complete())},2459:(Nt,He,z)=>{z.d(He,{D:()=>Ve});var w=z(4829),ue=z(3093),q=z(5137),Ie=z(5592),P=z(4971),xe=z(4674),le=z(7103);function be(Te,je){if(!Te)throw new Error("Iterable cannot be null");return new Ie.y(Ye=>{(0,le.f)(Ye,je,()=>{const nt=Te[Symbol.asyncIterator]();(0,le.f)(Ye,je,()=>{nt.next().then(fe=>{fe.done?Ye.complete():Ye.next(fe.value)})},0,!0)})})}var Je=z(8382),Ke=z(4026),ft=z(4266),tt=z(3664),pt=z(5726),ut=z(9853),kt=z(541);function Ve(Te,je){return je?function ce(Te,je){if(null!=Te){if((0,Je.c)(Te))return function De(Te,je){return(0,w.Xf)(Te).pipe((0,q.R)(je),(0,ue.Q)(je))}(Te,je);if((0,ft.z)(Te))return function Pe(Te,je){return new Ie.y(Ye=>{let nt=0;return je.schedule(function(){nt===Te.length?Ye.complete():(Ye.next(Te[nt++]),Ye.closed||this.schedule())})})}(Te,je);if((0,Ke.t)(Te))return function ve(Te,je){return(0,w.Xf)(Te).pipe((0,q.R)(je),(0,ue.Q)(je))}(Te,je);if((0,pt.D)(Te))return be(Te,je);if((0,tt.T)(Te))return function he(Te,je){return new Ie.y(Ye=>{let nt;return(0,le.f)(Ye,je,()=>{nt=Te[P.h](),(0,le.f)(Ye,je,()=>{let fe,Qt;try{({value:fe,done:Qt}=nt.next())}catch(ct){return void Ye.error(ct)}Qt?Ye.complete():Ye.next(fe)},0,!0)}),()=>(0,xe.m)(nt?.return)&&nt.return()})}(Te,je);if((0,kt.L)(Te))return function Ee(Te,je){return be((0,kt.Q)(Te),je)}(Te,je)}throw(0,ut.z)(Te)}(Te,je):(0,w.Xf)(Te)}},4829:(Nt,He,z)=>{z.d(He,{Xf:()=>Je});var w=z(7582),ue=z(4266),q=z(4026),De=z(5592),ve=z(8382),Ie=z(5726),Pe=z(9853),P=z(3664),xe=z(541),le=z(4674),he=z(3894),be=z(4850);function Je(ce){if(ce instanceof De.y)return ce;if(null!=ce){if((0,ve.c)(ce))return function Ke(ce){return new De.y(Ve=>{const Te=ce[be.L]();if((0,le.m)(Te.subscribe))return Te.subscribe(Ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ce);if((0,ue.z)(ce))return function ft(ce){return new De.y(Ve=>{for(let Te=0;Te<ce.length&&!Ve.closed;Te++)Ve.next(ce[Te]);Ve.complete()})}(ce);if((0,q.t)(ce))return function tt(ce){return new De.y(Ve=>{ce.then(Te=>{Ve.closed||(Ve.next(Te),Ve.complete())},Te=>Ve.error(Te)).then(null,he.h)})}(ce);if((0,Ie.D)(ce))return ut(ce);if((0,P.T)(ce))return function pt(ce){return new De.y(Ve=>{for(const Te of ce)if(Ve.next(Te),Ve.closed)return;Ve.complete()})}(ce);if((0,xe.L)(ce))return function kt(ce){return ut((0,xe.Q)(ce))}(ce)}throw(0,Pe.z)(ce)}function ut(ce){return new De.y(Ve=>{(function Ee(ce,Ve){var Te,je,Ye,nt;return(0,w.mG)(this,void 0,void 0,function*(){try{for(Te=(0,w.KL)(ce);!(je=yield Te.next()).done;)if(Ve.next(je.value),Ve.closed)return}catch(fe){Ye={error:fe}}finally{try{je&&!je.done&&(nt=Te.return)&&(yield nt.call(Te))}finally{if(Ye)throw Ye.error}}Ve.complete()})})(ce,Ve).catch(Te=>Ve.error(Te))})}},3019:(Nt,He,z)=>{z.d(He,{T:()=>Ie});var w=z(7537),ue=z(4829),q=z(6232),De=z(4564),ve=z(2459);function Ie(...Pe){const P=(0,De.yG)(Pe),xe=(0,De._6)(Pe,1/0),le=Pe;return le.length?1===le.length?(0,ue.Xf)(le[0]):(0,w.J)(xe)((0,ve.D)(le,P)):q.E}},2096:(Nt,He,z)=>{z.d(He,{of:()=>q});var w=z(4564),ue=z(2459);function q(...De){const ve=(0,w.yG)(De);return(0,ue.D)(De,ve)}},8251:(Nt,He,z)=>{z.d(He,{x:()=>ue});var w=z(305);function ue(De,ve,Ie,Pe,P){return new q(De,ve,Ie,Pe,P)}class q extends w.Lv{constructor(ve,Ie,Pe,P,xe,le){super(ve),this.onFinalize=xe,this.shouldUnsubscribe=le,this._next=Ie?function(he){try{Ie(he)}catch(be){ve.error(be)}}:super._next,this._error=P?function(he){try{P(he)}catch(be){ve.error(be)}finally{this.unsubscribe()}}:super._error,this._complete=Pe?function(){try{Pe()}catch(he){ve.error(he)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ve;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ie}=this;super.unsubscribe(),!Ie&&(null===(ve=this.onFinalize)||void 0===ve||ve.call(this))}}}},3572:(Nt,He,z)=>{z.d(He,{d:()=>q});var w=z(9360),ue=z(8251);function q(De){return(0,w.e)((ve,Ie)=>{let Pe=!1;ve.subscribe((0,ue.x)(Ie,P=>{Pe=!0,Ie.next(P)},()=>{Pe||Ie.next(De),Ie.complete()}))})}},3997:(Nt,He,z)=>{z.d(He,{x:()=>De});var w=z(2737),ue=z(9360),q=z(8251);function De(Ie,Pe=w.y){return Ie=Ie??ve,(0,ue.e)((P,xe)=>{let le,he=!0;P.subscribe((0,q.x)(xe,be=>{const Je=Pe(be);(he||!Ie(le,Je))&&(he=!1,le=Je,xe.next(be))}))})}function ve(Ie,Pe){return Ie===Pe}},2181:(Nt,He,z)=>{z.d(He,{h:()=>q});var w=z(9360),ue=z(8251);function q(De,ve){return(0,w.e)((Ie,Pe)=>{let P=0;Ie.subscribe((0,ue.x)(Pe,xe=>De.call(ve,xe,P++)&&Pe.next(xe)))})}},1374:(Nt,He,z)=>{z.d(He,{P:()=>Pe});var w=z(6973),ue=z(2181),q=z(8180),De=z(3572),ve=z(3026),Ie=z(2737);function Pe(P,xe){const le=arguments.length>=2;return he=>he.pipe(P?(0,ue.h)((be,Je)=>P(be,Je,he)):Ie.y,(0,q.q)(1),le?(0,De.d)(xe):(0,ve.T)(()=>new w.K))}},7398:(Nt,He,z)=>{z.d(He,{U:()=>q});var w=z(9360),ue=z(8251);function q(De,ve){return(0,w.e)((Ie,Pe)=>{let P=0;Ie.subscribe((0,ue.x)(Pe,xe=>{Pe.next(De.call(ve,xe,P++))}))})}},7537:(Nt,He,z)=>{z.d(He,{J:()=>q});var w=z(1631),ue=z(2737);function q(De=1/0){return(0,w.z)(ue.y,De)}},1631:(Nt,He,z)=>{z.d(He,{z:()=>P});var w=z(7398),ue=z(4829),q=z(9360),De=z(7103),ve=z(8251),Pe=z(4674);function P(xe,le,he=1/0){return(0,Pe.m)(le)?P((be,Je)=>(0,w.U)((Ke,ft)=>le(be,Ke,Je,ft))((0,ue.Xf)(xe(be,Je))),he):("number"==typeof le&&(he=le),(0,q.e)((be,Je)=>function Ie(xe,le,he,be,Je,Ke,ft,tt){const pt=[];let ut=0,kt=0,Ee=!1;const ce=()=>{Ee&&!pt.length&&!ut&&le.complete()},Ve=je=>ut<be?Te(je):pt.push(je),Te=je=>{Ke&&le.next(je),ut++;let Ye=!1;(0,ue.Xf)(he(je,kt++)).subscribe((0,ve.x)(le,nt=>{Je?.(nt),Ke?Ve(nt):le.next(nt)},()=>{Ye=!0},void 0,()=>{if(Ye)try{for(ut--;pt.length&&ut<be;){const nt=pt.shift();ft?(0,De.f)(le,ft,()=>Te(nt)):Te(nt)}ce()}catch(nt){le.error(nt)}}))};return xe.subscribe((0,ve.x)(le,Ve,()=>{Ee=!0,ce()})),()=>{tt?.()}}(be,Je,xe,he)))}},3093:(Nt,He,z)=>{z.d(He,{Q:()=>De});var w=z(7103),ue=z(9360),q=z(8251);function De(ve,Ie=0){return(0,ue.e)((Pe,P)=>{Pe.subscribe((0,q.x)(P,xe=>(0,w.f)(P,ve,()=>P.next(xe),Ie),()=>(0,w.f)(P,ve,()=>P.complete(),Ie),xe=>(0,w.f)(P,ve,()=>P.error(xe),Ie)))})}},6699:(Nt,He,z)=>{z.d(He,{R:()=>De});var w=z(9360),ue=z(8251);function De(ve,Ie){return(0,w.e)(function q(ve,Ie,Pe,P,xe){return(le,he)=>{let be=Pe,Je=Ie,Ke=0;le.subscribe((0,ue.x)(he,ft=>{const tt=Ke++;Je=be?ve(Je,ft,tt):(be=!0,ft),P&&he.next(Je)},xe&&(()=>{be&&he.next(Je),he.complete()})))}}(ve,Ie,arguments.length>=2,!0))}},3020:(Nt,He,z)=>{z.d(He,{B:()=>ve});var w=z(4829),ue=z(8645),q=z(305),De=z(9360);function ve(Pe={}){const{connector:P=(()=>new ue.x),resetOnError:xe=!0,resetOnComplete:le=!0,resetOnRefCountZero:he=!0}=Pe;return be=>{let Je,Ke,ft,tt=0,pt=!1,ut=!1;const kt=()=>{Ke?.unsubscribe(),Ke=void 0},Ee=()=>{kt(),Je=ft=void 0,pt=ut=!1},ce=()=>{const Ve=Je;Ee(),Ve?.unsubscribe()};return(0,De.e)((Ve,Te)=>{tt++,!ut&&!pt&&kt();const je=ft=ft??P();Te.add(()=>{tt--,0===tt&&!ut&&!pt&&(Ke=Ie(ce,he))}),je.subscribe(Te),!Je&&tt>0&&(Je=new q.Hp({next:Ye=>je.next(Ye),error:Ye=>{ut=!0,kt(),Ke=Ie(Ee,xe,Ye),je.error(Ye)},complete:()=>{pt=!0,kt(),Ke=Ie(Ee,le),je.complete()}}),(0,w.Xf)(Ve).subscribe(Je))})(be)}}function Ie(Pe,P,...xe){if(!0===P)return void Pe();if(!1===P)return;const le=new q.Hp({next:()=>{le.unsubscribe(),Pe()}});return(0,w.Xf)(P(...xe)).subscribe(le)}},7921:(Nt,He,z)=>{z.d(He,{O:()=>De});var w=z(5211),ue=z(4564),q=z(9360);function De(...ve){const Ie=(0,ue.yG)(ve);return(0,q.e)((Pe,P)=>{(Ie?(0,w.z)(ve,Pe,Ie):(0,w.z)(ve,Pe)).subscribe(P)})}},5137:(Nt,He,z)=>{z.d(He,{R:()=>ue});var w=z(9360);function ue(q,De=0){return(0,w.e)((ve,Ie)=>{Ie.add(q.schedule(()=>ve.subscribe(Ie),De))})}},4664:(Nt,He,z)=>{z.d(He,{w:()=>De});var w=z(4829),ue=z(9360),q=z(8251);function De(ve,Ie){return(0,ue.e)((Pe,P)=>{let xe=null,le=0,he=!1;const be=()=>he&&!xe&&P.complete();Pe.subscribe((0,q.x)(P,Je=>{xe?.unsubscribe();let Ke=0;const ft=le++;(0,w.Xf)(ve(Je,ft)).subscribe(xe=(0,q.x)(P,tt=>P.next(Ie?Ie(Je,tt,ft,Ke++):tt),()=>{xe=null,be()}))},()=>{he=!0,be()}))})}},8180:(Nt,He,z)=>{z.d(He,{q:()=>De});var w=z(6232),ue=z(9360),q=z(8251);function De(ve){return ve<=0?()=>w.E:(0,ue.e)((Ie,Pe)=>{let P=0;Ie.subscribe((0,q.x)(Pe,xe=>{++P<=ve&&(Pe.next(xe),ve<=P&&Pe.complete())}))})}},9397:(Nt,He,z)=>{z.d(He,{b:()=>ve});var w=z(4674),ue=z(9360),q=z(8251),De=z(2737);function ve(Ie,Pe,P){const xe=(0,w.m)(Ie)||Pe||P?{next:Ie,error:Pe,complete:P}:Ie;return xe?(0,ue.e)((le,he)=>{var be;null===(be=xe.subscribe)||void 0===be||be.call(xe);let Je=!0;le.subscribe((0,q.x)(he,Ke=>{var ft;null===(ft=xe.next)||void 0===ft||ft.call(xe,Ke),he.next(Ke)},()=>{var Ke;Je=!1,null===(Ke=xe.complete)||void 0===Ke||Ke.call(xe),he.complete()},Ke=>{var ft;Je=!1,null===(ft=xe.error)||void 0===ft||ft.call(xe,Ke),he.error(Ke)},()=>{var Ke,ft;Je&&(null===(Ke=xe.unsubscribe)||void 0===Ke||Ke.call(xe)),null===(ft=xe.finalize)||void 0===ft||ft.call(xe)}))}):De.y}},3026:(Nt,He,z)=>{z.d(He,{T:()=>De});var w=z(6973),ue=z(9360),q=z(8251);function De(Ie=ve){return(0,ue.e)((Pe,P)=>{let xe=!1;Pe.subscribe((0,q.x)(P,le=>{xe=!0,P.next(le)},()=>xe?P.complete():P.error(Ie())))})}function ve(){return new w.K}},1954:(Nt,He,z)=>{z.d(He,{o:()=>ve});var w=z(7394);class ue extends w.w0{constructor(Pe,P){super()}schedule(Pe,P=0){return this}}const q={setInterval(Ie,Pe,...P){const{delegate:xe}=q;return xe?.setInterval?xe.setInterval(Ie,Pe,...P):setInterval(Ie,Pe,...P)},clearInterval(Ie){const{delegate:Pe}=q;return(Pe?.clearInterval||clearInterval)(Ie)},delegate:void 0};var De=z(9039);class ve extends ue{constructor(Pe,P){super(Pe,P),this.scheduler=Pe,this.work=P,this.pending=!1}schedule(Pe,P=0){var xe;if(this.closed)return this;this.state=Pe;const le=this.id,he=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId(he,le,P)),this.pending=!0,this.delay=P,this.id=null!==(xe=this.id)&&void 0!==xe?xe:this.requestAsyncId(he,this.id,P),this}requestAsyncId(Pe,P,xe=0){return q.setInterval(Pe.flush.bind(Pe,this),xe)}recycleAsyncId(Pe,P,xe=0){if(null!=xe&&this.delay===xe&&!1===this.pending)return P;null!=P&&q.clearInterval(P)}execute(Pe,P){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const xe=this._execute(Pe,P);if(xe)return xe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Pe,P){let le,xe=!1;try{this.work(Pe)}catch(he){xe=!0,le=he||new Error("Scheduled action threw falsy error")}if(xe)return this.unsubscribe(),le}unsubscribe(){if(!this.closed){const{id:Pe,scheduler:P}=this,{actions:xe}=P;this.work=this.state=this.scheduler=null,this.pending=!1,(0,De.P)(xe,this),null!=Pe&&(this.id=this.recycleAsyncId(P,Pe,null)),this.delay=null,super.unsubscribe()}}}},2631:(Nt,He,z)=>{z.d(He,{v:()=>q});var w=z(4552);class ue{constructor(ve,Ie=ue.now){this.schedulerActionCtor=ve,this.now=Ie}schedule(ve,Ie=0,Pe){return new this.schedulerActionCtor(this,ve).schedule(Pe,Ie)}}ue.now=w.l.now;class q extends ue{constructor(ve,Ie=ue.now){super(ve,Ie),this.actions=[],this._active=!1}flush(ve){const{actions:Ie}=this;if(this._active)return void Ie.push(ve);let Pe;this._active=!0;do{if(Pe=ve.execute(ve.state,ve.delay))break}while(ve=Ie.shift());if(this._active=!1,Pe){for(;ve=Ie.shift();)ve.unsubscribe();throw Pe}}}},6321:(Nt,He,z)=>{z.d(He,{z:()=>q});var w=z(1954);const q=new(z(2631).v)(w.o)},4552:(Nt,He,z)=>{z.d(He,{l:()=>w});const w={now:()=>(w.delegate||Date).now(),delegate:void 0}},7599:(Nt,He,z)=>{z.d(He,{z:()=>w});const w={setTimeout(ue,q,...De){const{delegate:ve}=w;return ve?.setTimeout?ve.setTimeout(ue,q,...De):setTimeout(ue,q,...De)},clearTimeout(ue){const{delegate:q}=w;return(q?.clearTimeout||clearTimeout)(ue)},delegate:void 0}},4971:(Nt,He,z)=>{z.d(He,{h:()=>ue});const ue=function w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Nt,He,z)=>{z.d(He,{L:()=>w});const w="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(Nt,He,z)=>{z.d(He,{K:()=>ue});const ue=(0,z(2306).d)(q=>function(){q(this),this.name="EmptyError",this.message="no elements in sequence"})},4564:(Nt,He,z)=>{z.d(He,{_6:()=>Ie,jO:()=>De,yG:()=>ve});var w=z(4674);function q(Pe){return Pe[Pe.length-1]}function De(Pe){return(0,w.m)(q(Pe))?Pe.pop():void 0}function ve(Pe){return function ue(Pe){return Pe&&(0,w.m)(Pe.schedule)}(q(Pe))?Pe.pop():void 0}function Ie(Pe,P){return"number"==typeof q(Pe)?Pe.pop():P}},7453:(Nt,He,z)=>{z.d(He,{D:()=>ve});const{isArray:w}=Array,{getPrototypeOf:ue,prototype:q,keys:De}=Object;function ve(Pe){if(1===Pe.length){const P=Pe[0];if(w(P))return{args:P,keys:null};if(function Ie(Pe){return Pe&&"object"==typeof Pe&&ue(Pe)===q}(P)){const xe=De(P);return{args:xe.map(le=>P[le]),keys:xe}}}return{args:Pe,keys:null}}},9039:(Nt,He,z)=>{function w(ue,q){if(ue){const De=ue.indexOf(q);0<=De&&ue.splice(De,1)}}z.d(He,{P:()=>w})},2306:(Nt,He,z)=>{function w(ue){const De=ue(ve=>{Error.call(ve),ve.stack=(new Error).stack});return De.prototype=Object.create(Error.prototype),De.prototype.constructor=De,De}z.d(He,{d:()=>w})},2714:(Nt,He,z)=>{function w(ue,q){return ue.reduce((De,ve,Ie)=>(De[ve]=q[Ie],De),{})}z.d(He,{n:()=>w})},1441:(Nt,He,z)=>{z.d(He,{O:()=>De,x:()=>q});var w=z(2653);let ue=null;function q(ve){if(w.config.useDeprecatedSynchronousErrorHandling){const Ie=!ue;if(Ie&&(ue={errorThrown:!1,error:null}),ve(),Ie){const{errorThrown:Pe,error:P}=ue;if(ue=null,Pe)throw P}}else ve()}function De(ve){w.config.useDeprecatedSynchronousErrorHandling&&ue&&(ue.errorThrown=!0,ue.error=ve)}},7103:(Nt,He,z)=>{function w(ue,q,De,ve=0,Ie=!1){const Pe=q.schedule(function(){De(),Ie?ue.add(this.schedule(null,ve)):this.unsubscribe()},ve);if(ue.add(Pe),!Ie)return Pe}z.d(He,{f:()=>w})},2737:(Nt,He,z)=>{function w(ue){return ue}z.d(He,{y:()=>w})},4266:(Nt,He,z)=>{z.d(He,{z:()=>w});const w=ue=>ue&&"number"==typeof ue.length&&"function"!=typeof ue},5726:(Nt,He,z)=>{z.d(He,{D:()=>ue});var w=z(4674);function ue(q){return Symbol.asyncIterator&&(0,w.m)(q?.[Symbol.asyncIterator])}},4674:(Nt,He,z)=>{function w(ue){return"function"==typeof ue}z.d(He,{m:()=>w})},8382:(Nt,He,z)=>{z.d(He,{c:()=>q});var w=z(4850),ue=z(4674);function q(De){return(0,ue.m)(De[w.L])}},3664:(Nt,He,z)=>{z.d(He,{T:()=>q});var w=z(4971),ue=z(4674);function q(De){return(0,ue.m)(De?.[w.h])}},4026:(Nt,He,z)=>{z.d(He,{t:()=>ue});var w=z(4674);function ue(q){return(0,w.m)(q?.then)}},541:(Nt,He,z)=>{z.d(He,{L:()=>De,Q:()=>q});var w=z(7582),ue=z(4674);function q(ve){return(0,w.FC)(this,arguments,function*(){const Pe=ve.getReader();try{for(;;){const{value:P,done:xe}=yield(0,w.qq)(Pe.read());if(xe)return yield(0,w.qq)(void 0);yield yield(0,w.qq)(P)}}finally{Pe.releaseLock()}})}function De(ve){return(0,ue.m)(ve?.getReader)}},9360:(Nt,He,z)=>{z.d(He,{A:()=>ue,e:()=>q});var w=z(4674);function ue(De){return(0,w.m)(De?.lift)}function q(De){return ve=>{if(ue(ve))return ve.lift(function(Ie){try{return De(Ie,this)}catch(Pe){this.error(Pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(Nt,He,z)=>{z.d(He,{Z:()=>De});var w=z(7398);const{isArray:ue}=Array;function De(ve){return(0,w.U)(Ie=>function q(ve,Ie){return ue(Ie)?ve(...Ie):ve(Ie)}(ve,Ie))}},2420:(Nt,He,z)=>{function w(){}z.d(He,{Z:()=>w})},8407:(Nt,He,z)=>{z.d(He,{U:()=>q,z:()=>ue});var w=z(2737);function ue(...De){return q(De)}function q(De){return 0===De.length?w.y:1===De.length?De[0]:function(Ie){return De.reduce((Pe,P)=>P(Pe),Ie)}}},3894:(Nt,He,z)=>{z.d(He,{h:()=>q});var w=z(2653),ue=z(7599);function q(De){ue.z.setTimeout(()=>{const{onUnhandledError:ve}=w.config;if(!ve)throw De;ve(De)})}},9853:(Nt,He,z)=>{function w(ue){return new TypeError(`You provided ${null!==ue&&"object"==typeof ue?"an invalid object":`'${ue}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}z.d(He,{z:()=>w})},6825:(Nt,He,z)=>{z.d(He,{LC:()=>ue,SB:()=>xe,X$:()=>De,ZE:()=>ut,ZN:()=>pt,_j:()=>w,eR:()=>he,jt:()=>ve,k1:()=>kt,l3:()=>q,oB:()=>P,vP:()=>Pe});class w{}class ue{}const q="*";function De(Ee,ce){return{type:7,name:Ee,definitions:ce,options:{}}}function ve(Ee,ce=null){return{type:4,styles:ce,timings:Ee}}function Pe(Ee,ce=null){return{type:2,steps:Ee,options:ce}}function P(Ee){return{type:6,styles:Ee,offset:null}}function xe(Ee,ce,Ve){return{type:0,name:Ee,styles:ce,options:Ve}}function he(Ee,ce,Ve=null){return{type:1,expr:Ee,animation:ce,options:Ve}}class pt{constructor(ce=0,Ve=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ce+Ve}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ce=>ce()),this._onDoneFns=[])}onStart(ce){this._originalOnStartFns.push(ce),this._onStartFns.push(ce)}onDone(ce){this._originalOnDoneFns.push(ce),this._onDoneFns.push(ce)}onDestroy(ce){this._onDestroyFns.push(ce)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ce=>ce()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ce=>ce()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(ce){this._position=this.totalTime?ce*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ce){const Ve="start"==ce?this._onStartFns:this._onDoneFns;Ve.forEach(Te=>Te()),Ve.length=0}}class ut{constructor(ce){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ce;let Ve=0,Te=0,je=0;const Ye=this.players.length;0==Ye?queueMicrotask(()=>this._onFinish()):this.players.forEach(nt=>{nt.onDone(()=>{++Ve==Ye&&this._onFinish()}),nt.onDestroy(()=>{++Te==Ye&&this._onDestroy()}),nt.onStart(()=>{++je==Ye&&this._onStart()})}),this.totalTime=this.players.reduce((nt,fe)=>Math.max(nt,fe.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ce=>ce()),this._onDoneFns=[])}init(){this.players.forEach(ce=>ce.init())}onStart(ce){this._onStartFns.push(ce)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ce=>ce()),this._onStartFns=[])}onDone(ce){this._onDoneFns.push(ce)}onDestroy(ce){this._onDestroyFns.push(ce)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ce=>ce.play())}pause(){this.players.forEach(ce=>ce.pause())}restart(){this.players.forEach(ce=>ce.restart())}finish(){this._onFinish(),this.players.forEach(ce=>ce.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ce=>ce.destroy()),this._onDestroyFns.forEach(ce=>ce()),this._onDestroyFns=[])}reset(){this.players.forEach(ce=>ce.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ce){const Ve=ce*this.totalTime;this.players.forEach(Te=>{const je=Te.totalTime?Math.min(1,Ve/Te.totalTime):1;Te.setPosition(je)})}getPosition(){const ce=this.players.reduce((Ve,Te)=>null===Ve||Te.totalTime>Ve.totalTime?Te:Ve,null);return null!=ce?ce.getPosition():0}beforeDestroy(){this.players.forEach(ce=>{ce.beforeDestroy&&ce.beforeDestroy()})}triggerCallback(ce){const Ve="start"==ce?this._onStartFns:this._onDoneFns;Ve.forEach(Te=>Te()),Ve.length=0}}const kt="!"},6814:(Nt,He,z)=>{z.d(He,{Do:()=>tt,EM:()=>ji,HT:()=>De,JF:()=>Cs,K0:()=>Ie,Mx:()=>Jr,O5:()=>Yi,Ov:()=>Fa,PM:()=>ea,S$:()=>Je,V_:()=>P,Ye:()=>pt,b0:()=>ft,bD:()=>dr,ez:()=>Js,mk:()=>Ws,q:()=>q,sg:()=>xn,w_:()=>ve});var w=z(5879);let ue=null;function q(){return ue}function De(S){ue||(ue=S)}class ve{}const Ie=new w.OlP("DocumentToken");let Pe=(()=>{class S{historyGo(L){throw new Error("Not implemented")}static#e=this.\u0275fac=function(G){return new(G||S)};static#t=this.\u0275prov=w.Yz7({token:S,factory:function(){return(0,w.f3M)(xe)},providedIn:"platform"})}return S})();const P=new w.OlP("Location Initialized");let xe=(()=>{class S extends Pe{constructor(){super(),this._doc=(0,w.f3M)(Ie),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return q().getBaseHref(this._doc)}onPopState(L){const G=q().getGlobalEventTarget(this._doc,"window");return G.addEventListener("popstate",L,!1),()=>G.removeEventListener("popstate",L)}onHashChange(L){const G=q().getGlobalEventTarget(this._doc,"window");return G.addEventListener("hashchange",L,!1),()=>G.removeEventListener("hashchange",L)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(L){this._location.pathname=L}pushState(L,G,de){this._history.pushState(L,G,de)}replaceState(L,G,de){this._history.replaceState(L,G,de)}forward(){this._history.forward()}back(){this._history.back()}historyGo(L=0){this._history.go(L)}getState(){return this._history.state}static#e=this.\u0275fac=function(G){return new(G||S)};static#t=this.\u0275prov=w.Yz7({token:S,factory:function(){return new S},providedIn:"platform"})}return S})();function le(S,W){if(0==S.length)return W;if(0==W.length)return S;let L=0;return S.endsWith("/")&&L++,W.startsWith("/")&&L++,2==L?S+W.substring(1):1==L?S+W:S+"/"+W}function he(S){const W=S.match(/#|\?|$/),L=W&&W.index||S.length;return S.slice(0,L-("/"===S[L-1]?1:0))+S.slice(L)}function be(S){return S&&"?"!==S[0]?"?"+S:S}let Je=(()=>{class S{historyGo(L){throw new Error("Not implemented")}static#e=this.\u0275fac=function(G){return new(G||S)};static#t=this.\u0275prov=w.Yz7({token:S,factory:function(){return(0,w.f3M)(ft)},providedIn:"root"})}return S})();const Ke=new w.OlP("appBaseHref");let ft=(()=>{class S extends Je{constructor(L,G){super(),this._platformLocation=L,this._removeListenerFns=[],this._baseHref=G??this._platformLocation.getBaseHrefFromDOM()??(0,w.f3M)(Ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}prepareExternalUrl(L){return le(this._baseHref,L)}path(L=!1){const G=this._platformLocation.pathname+be(this._platformLocation.search),de=this._platformLocation.hash;return de&&L?`${G}${de}`:G}pushState(L,G,de,Ge){const M=this.prepareExternalUrl(de+be(Ge));this._platformLocation.pushState(L,G,M)}replaceState(L,G,de,Ge){const M=this.prepareExternalUrl(de+be(Ge));this._platformLocation.replaceState(L,G,M)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}static#e=this.\u0275fac=function(G){return new(G||S)(w.LFG(Pe),w.LFG(Ke,8))};static#t=this.\u0275prov=w.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})(),tt=(()=>{class S extends Je{constructor(L,G){super(),this._platformLocation=L,this._baseHref="",this._removeListenerFns=[],null!=G&&(this._baseHref=G)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}path(L=!1){let G=this._platformLocation.hash;return null==G&&(G="#"),G.length>0?G.substring(1):G}prepareExternalUrl(L){const G=le(this._baseHref,L);return G.length>0?"#"+G:G}pushState(L,G,de,Ge){let M=this.prepareExternalUrl(de+be(Ge));0==M.length&&(M=this._platformLocation.pathname),this._platformLocation.pushState(L,G,M)}replaceState(L,G,de,Ge){let M=this.prepareExternalUrl(de+be(Ge));0==M.length&&(M=this._platformLocation.pathname),this._platformLocation.replaceState(L,G,M)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}static#e=this.\u0275fac=function(G){return new(G||S)(w.LFG(Pe),w.LFG(Ke,8))};static#t=this.\u0275prov=w.Yz7({token:S,factory:S.\u0275fac})}return S})(),pt=(()=>{class S{constructor(L){this._subject=new w.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=L;const G=this._locationStrategy.getBaseHref();this._basePath=function ce(S){if(new RegExp("^(https?:)?//").test(S)){const[,L]=S.split(/\/\/[^\/]+/);return L}return S}(he(Ee(G))),this._locationStrategy.onPopState(de=>{this._subject.emit({url:this.path(!0),pop:!0,state:de.state,type:de.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(L=!1){return this.normalize(this._locationStrategy.path(L))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(L,G=""){return this.path()==this.normalize(L+be(G))}normalize(L){return S.stripTrailingSlash(function kt(S,W){if(!S||!W.startsWith(S))return W;const L=W.substring(S.length);return""===L||["/",";","?","#"].includes(L[0])?L:W}(this._basePath,Ee(L)))}prepareExternalUrl(L){return L&&"/"!==L[0]&&(L="/"+L),this._locationStrategy.prepareExternalUrl(L)}go(L,G="",de=null){this._locationStrategy.pushState(de,"",L,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+be(G)),de)}replaceState(L,G="",de=null){this._locationStrategy.replaceState(de,"",L,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+be(G)),de)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(L=0){this._locationStrategy.historyGo?.(L)}onUrlChange(L){return this._urlChangeListeners.push(L),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(G=>{this._notifyUrlChangeListeners(G.url,G.state)})),()=>{const G=this._urlChangeListeners.indexOf(L);this._urlChangeListeners.splice(G,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(L="",G){this._urlChangeListeners.forEach(de=>de(L,G))}subscribe(L,G,de){return this._subject.subscribe({next:L,error:G,complete:de})}static#e=this.normalizeQueryParams=be;static#t=this.joinWithSlash=le;static#n=this.stripTrailingSlash=he;static#r=this.\u0275fac=function(G){return new(G||S)(w.LFG(Je))};static#i=this.\u0275prov=w.Yz7({token:S,factory:function(){return function ut(){return new pt((0,w.LFG)(Je))}()},providedIn:"root"})}return S})();function Ee(S){return S.replace(/\/index.html$/,"")}function Jr(S,W){W=encodeURIComponent(W);for(const L of S.split(";")){const G=L.indexOf("="),[de,Ge]=-1==G?[L,""]:[L.slice(0,G),L.slice(G+1)];if(de.trim()===W)return decodeURIComponent(Ge)}return null}const as=/\s+/,vo=[];let Ws=(()=>{class S{constructor(L,G,de,Ge){this._iterableDiffers=L,this._keyValueDiffers=G,this._ngEl=de,this._renderer=Ge,this.initialClasses=vo,this.stateMap=new Map}set klass(L){this.initialClasses=null!=L?L.trim().split(as):vo}set ngClass(L){this.rawClass="string"==typeof L?L.trim().split(as):L}ngDoCheck(){for(const G of this.initialClasses)this._updateState(G,!0);const L=this.rawClass;if(Array.isArray(L)||L instanceof Set)for(const G of L)this._updateState(G,!0);else if(null!=L)for(const G of Object.keys(L))this._updateState(G,!!L[G]);this._applyStateDiff()}_updateState(L,G){const de=this.stateMap.get(L);void 0!==de?(de.enabled!==G&&(de.changed=!0,de.enabled=G),de.touched=!0):this.stateMap.set(L,{enabled:G,changed:!0,touched:!0})}_applyStateDiff(){for(const L of this.stateMap){const G=L[0],de=L[1];de.changed?(this._toggleClass(G,de.enabled),de.changed=!1):de.touched||(de.enabled&&this._toggleClass(G,!1),this.stateMap.delete(G)),de.touched=!1}}_toggleClass(L,G){(L=L.trim()).length>0&&L.split(as).forEach(de=>{G?this._renderer.addClass(this._ngEl.nativeElement,de):this._renderer.removeClass(this._ngEl.nativeElement,de)})}static#e=this.\u0275fac=function(G){return new(G||S)(w.Y36(w.ZZ4),w.Y36(w.aQg),w.Y36(w.SBq),w.Y36(w.Qsj))};static#t=this.\u0275dir=w.lG2({type:S,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return S})();class Qo{constructor(W,L,G,de){this.$implicit=W,this.ngForOf=L,this.index=G,this.count=de}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let xn=(()=>{class S{set ngForOf(L){this._ngForOf=L,this._ngForOfDirty=!0}set ngForTrackBy(L){this._trackByFn=L}get ngForTrackBy(){return this._trackByFn}constructor(L,G,de){this._viewContainer=L,this._template=G,this._differs=de,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(L){L&&(this._template=L)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const L=this._ngForOf;!this._differ&&L&&(this._differ=this._differs.find(L).create(this.ngForTrackBy))}if(this._differ){const L=this._differ.diff(this._ngForOf);L&&this._applyChanges(L)}}_applyChanges(L){const G=this._viewContainer;L.forEachOperation((de,Ge,M)=>{if(null==de.previousIndex)G.createEmbeddedView(this._template,new Qo(de.item,this._ngForOf,-1,-1),null===M?void 0:M);else if(null==M)G.remove(null===Ge?void 0:Ge);else if(null!==Ge){const k=G.get(Ge);G.move(k,M),Yo(k,de)}});for(let de=0,Ge=G.length;de<Ge;de++){const k=G.get(de).context;k.index=de,k.count=Ge,k.ngForOf=this._ngForOf}L.forEachIdentityChange(de=>{Yo(G.get(de.currentIndex),de)})}static ngTemplateContextGuard(L,G){return!0}static#e=this.\u0275fac=function(G){return new(G||S)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(w.ZZ4))};static#t=this.\u0275dir=w.lG2({type:S,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return S})();function Yo(S,W){S.context.$implicit=W.item}let Yi=(()=>{class S{constructor(L,G){this._viewContainer=L,this._context=new Eo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=G}set ngIf(L){this._context.$implicit=this._context.ngIf=L,this._updateView()}set ngIfThen(L){Ji("ngIfThen",L),this._thenTemplateRef=L,this._thenViewRef=null,this._updateView()}set ngIfElse(L){Ji("ngIfElse",L),this._elseTemplateRef=L,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(L,G){return!0}static#e=this.\u0275fac=function(G){return new(G||S)(w.Y36(w.s_b),w.Y36(w.Rgc))};static#t=this.\u0275dir=w.lG2({type:S,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return S})();class Eo{constructor(){this.$implicit=null,this.ngIf=null}}function Ji(S,W){if(W&&!W.createEmbeddedView)throw new Error(`${S} must be a TemplateRef, but received '${(0,w.AaK)(W)}'.`)}class xo{createSubscription(W,L){return(0,w.rg0)(()=>W.subscribe({next:L,error:G=>{throw G}}))}dispose(W){(0,w.rg0)(()=>W.unsubscribe())}}class ho{createSubscription(W,L){return W.then(L,G=>{throw G})}dispose(W){}}const Jo=new ho,hu=new xo;let Fa=(()=>{class S{constructor(L){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=L}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(L){return this._obj?L!==this._obj?(this._dispose(),this.transform(L)):this._latestValue:(L&&this._subscribe(L),this._latestValue)}_subscribe(L){this._obj=L,this._strategy=this._selectStrategy(L),this._subscription=this._strategy.createSubscription(L,G=>this._updateLatestValue(L,G))}_selectStrategy(L){if((0,w.QGY)(L))return Jo;if((0,w.F4k)(L))return hu;throw function li(S,W){return new w.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(L,G){L===this._obj&&(this._latestValue=G,this._ref.markForCheck())}static#e=this.\u0275fac=function(G){return new(G||S)(w.Y36(w.sBO,16))};static#t=this.\u0275pipe=w.Yjl({name:"async",type:S,pure:!1,standalone:!0})}return S})(),Js=(()=>{class S{static#e=this.\u0275fac=function(G){return new(G||S)};static#t=this.\u0275mod=w.oAB({type:S});static#n=this.\u0275inj=w.cJS({})}return S})();const dr="browser",Ui="server";function ea(S){return S===Ui}let ji=(()=>{class S{static#e=this.\u0275prov=(0,w.Yz7)({token:S,providedIn:"root",factory:()=>new di((0,w.LFG)(Ie),window)})}return S})();class di{constructor(W,L){this.document=W,this.window=L,this.offset=()=>[0,0]}setOffset(W){this.offset=Array.isArray(W)?()=>W:W}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(W){this.supportsScrolling()&&this.window.scrollTo(W[0],W[1])}scrollToAnchor(W){if(!this.supportsScrolling())return;const L=function Fs(S,W){const L=S.getElementById(W)||S.getElementsByName(W)[0];if(L)return L;if("function"==typeof S.createTreeWalker&&S.body&&"function"==typeof S.body.attachShadow){const G=S.createTreeWalker(S.body,NodeFilter.SHOW_ELEMENT);let de=G.currentNode;for(;de;){const Ge=de.shadowRoot;if(Ge){const M=Ge.getElementById(W)||Ge.querySelector(`[name="${W}"]`);if(M)return M}de=G.nextNode()}}return null}(this.document,W);L&&(this.scrollToElement(L),L.focus())}setHistoryScrollRestoration(W){this.supportsScrolling()&&(this.window.history.scrollRestoration=W)}scrollToElement(W){const L=W.getBoundingClientRect(),G=L.left+this.window.pageXOffset,de=L.top+this.window.pageYOffset,Ge=this.offset();this.window.scrollTo(G-Ge[0],de-Ge[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Cs{}},5879:(Nt,He,z)=>{z.d(He,{$8M:()=>Fl,$WT:()=>Ys,$Z:()=>od,AFp:()=>Gg,ALo:()=>Zw,AaK:()=>be,CHM:()=>ii,CRH:()=>dT,EJc:()=>ND,EpF:()=>VE,F$t:()=>Yy,F4k:()=>Zy,FYo:()=>tf,FiY:()=>ei,Gf:()=>lT,GfV:()=>Ip,Gpc:()=>ft,HDt:()=>xT,Hsn:()=>Jy,JOm:()=>Ku,KtG:()=>En,LFG:()=>Jt,LSH:()=>op,Lbi:()=>qg,Lck:()=>yC,MAs:()=>zy,MMx:()=>Fw,NdJ:()=>t_,Ojb:()=>W_,OlP:()=>xt,Oqu:()=>hg,P3R:()=>kg,PXZ:()=>uA,Q6J:()=>ig,QGY:()=>e_,QbO:()=>Wv,Qsj:()=>nf,R0b:()=>qs,RDi:()=>Oh,Rgc:()=>C_,SBq:()=>Tl,Sil:()=>FD,Suo:()=>cT,TTD:()=>$e,TgZ:()=>sg,VuI:()=>zA,W1O:()=>gT,X6Q:()=>mA,XFs:()=>qt,Xpm:()=>ho,Xq5:()=>Hm,Xts:()=>Bh,Y36:()=>gc,YKP:()=>xw,YNc:()=>kE,Yjl:()=>Ns,Yz7:()=>en,Z0I:()=>$n,ZZ4:()=>kI,_Bn:()=>Nw,_UZ:()=>Zm,_c5:()=>OA,_uU:()=>fv,aQg:()=>FI,c2e:()=>NT,cJS:()=>sn,cg1:()=>nI,dDg:()=>iA,dqk:()=>zn,eFA:()=>zT,eJc:()=>vI,ekj:()=>cg,eoX:()=>BT,evT:()=>Ap,f3M:()=>Tt,g9A:()=>lp,h0i:()=>kf,hGG:()=>NA,iGM:()=>uT,ifc:()=>jt,ip1:()=>OT,jDz:()=>Lw,kL8:()=>sw,lG2:()=>zr,lcZ:()=>Qw,lqb:()=>wl,lri:()=>VT,n5z:()=>bo,oAB:()=>Oi,oxw:()=>$E,q4F:()=>wp,qFp:()=>qA,qLn:()=>Dl,qOj:()=>oi,qZA:()=>og,rWj:()=>UT,rg0:()=>Ge,sBO:()=>_A,s_b:()=>Dv,soG:()=>bv,tb:()=>RI,tp0:()=>Qr,uIk:()=>$m,vHH:()=>ce,vpe:()=>Su,wAp:()=>gg,xp6:()=>Np,z2F:()=>vg,zSh:()=>jg,zs3:()=>Xu});var w=z(8645),ue=z(7394),q=z(5592),De=z(3019),ve=z(5619),Ie=z(2096),Pe=z(3020),P=z(4664),xe=z(3997);function le(t){for(let r in t)if(t[r]===le)return r;throw Error("Could not find renamed property on target object.")}function he(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function be(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(be).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Je(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const Ke=le({__forward_ref__:le});function ft(t){return t.__forward_ref__=ft,t.toString=function(){return be(this())},t}function tt(t){return pt(t)?t():t}function pt(t){return"function"==typeof t&&t.hasOwnProperty(Ke)&&t.__forward_ref__===ft}function ut(t){return t&&!!t.\u0275providers}const Ee="https://g.co/ng/security#xss";class ce extends Error{constructor(r,s){super(function Ve(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,s)),this.code=r}}function Te(t){return"string"==typeof t?t:null==t?"":String(t)}function Qt(t,r){throw new ce(-201,!1)}function yt(t,r){null==t&&function dt(t,r,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function en(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function sn(t){return{providers:t.providers||[],imports:t.imports||[]}}function mn(t){return Gt(t,er)||Gt(t,Pi)}function $n(t){return null!==mn(t)}function Gt(t,r){return t.hasOwnProperty(r)?t[r]:null}function Fr(t){return t&&(t.hasOwnProperty(Li)||t.hasOwnProperty(Qn))?t[Li]:null}const er=le({\u0275prov:le}),Li=le({\u0275inj:le}),Pi=le({ngInjectableDef:le}),Qn=le({ngInjectorDef:le});var qt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(qt||{});let _n;function Ln(t){const r=_n;return _n=t,r}function Vn(t,r,s){const a=mn(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&qt.Optional?null:void 0!==r?r:void Qt(be(t))}const zn=globalThis;class xt{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=en({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ir={},Or="__NG_DI_FLAG__",os="ngTempTokenPath",ee=/\n/gm,J="__source";let ne;function Ze(t){const r=ne;return ne=t,r}function ht(t,r=qt.Default){if(void 0===ne)throw new ce(-203,!1);return null===ne?Vn(t,void 0,r):ne.get(t,r&qt.Optional?null:void 0,r)}function Jt(t,r=qt.Default){return(function Ut(){return _n}()||ht)(tt(t),r)}function Tt(t,r=qt.Default){return Jt(t,Ft(r))}function Ft(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function lr(t){const r=[];for(let s=0;s<t.length;s++){const a=tt(t[s]);if(Array.isArray(a)){if(0===a.length)throw new ce(900,!1);let l,f=qt.Default;for(let y=0;y<a.length;y++){const A=a[y],N=yo(A);"number"==typeof N?-1===N?l=A.token:f|=N:l=A}r.push(Jt(l,f))}else r.push(Jt(a))}return r}function Ei(t,r){return t[Or]=r,t.prototype[Or]=r,t}function yo(t){return t[Or]}function Oe(t){return{toString:t}.toString()}var st=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(st||{}),jt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(jt||{});const Wt={},It=[],Xt=le({\u0275cmp:le}),Gn=le({\u0275dir:le}),qn=le({\u0275pipe:le}),ti=le({\u0275mod:le}),Jr=le({\u0275fac:le}),as=le({__NG_ELEMENT_ID__:le}),vo=le({__NG_ENV_ID__:le});function Ws(t,r,s){let a=t.length;for(;;){const l=t.indexOf(r,s);if(-1===l)return l;if(0===l||t.charCodeAt(l-1)<=32){const f=r.length;if(l+f===a||t.charCodeAt(l+f)<=32)return l}s=l+1}}function Ks(t,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const f=s[a++],y=s[a++],A=s[a++];t.setAttribute(r,y,A,f)}else{const f=l,y=s[++a];Qo(f)?t.setProperty(r,f,y):t.setAttribute(r,f,y),a++}}return a}function Zs(t){return 3===t||4===t||6===t}function Qo(t){return 64===t.charCodeAt(0)}function xn(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||Yo(t,s,l,null,-1===s||2===s?r[++a]:null)}}return t}function Yo(t,r,s,a,l){let f=0,y=t.length;if(-1===r)y=-1;else for(;f<t.length;){const A=t[f++];if("number"==typeof A){if(A===r){y=-1;break}if(A>r){y=f-1;break}}}for(;f<t.length;){const A=t[f];if("number"==typeof A)break;if(A===s){if(null===a)return void(null!==l&&(t[f+1]=l));if(a===t[f+1])return void(t[f+2]=l)}f++,null!==a&&f++,null!==l&&f++}-1!==y&&(t.splice(y,0,r),f=y+1),t.splice(f++,0,s),null!==a&&t.splice(f++,0,a),null!==l&&t.splice(f++,0,l)}const Ii="ng-template";function Yi(t,r,s){let a=0,l=!0;for(;a<t.length;){let f=t[a++];if("string"==typeof f&&l){const y=t[a++];if(s&&"class"===f&&-1!==Ws(y.toLowerCase(),r,0))return!0}else{if(1===f){for(;a<t.length&&"string"==typeof(f=t[a++]);)if(f.toLowerCase()===r)return!0;return!1}"number"==typeof f&&(l=!1)}}return!1}function Eo(t){return 4===t.type&&t.value!==Ii}function Ji(t,r,s){return r===(4!==t.type||s?t.value:Ii)}function co(t,r,s){let a=4;const l=t.attrs||[],f=function Mi(t){for(let r=0;r<t.length;r++)if(Zs(t[r]))return r;return t.length}(l);let y=!1;for(let A=0;A<r.length;A++){const N=r[A];if("number"!=typeof N){if(!y)if(4&a){if(a=2|1&a,""!==N&&!Ji(t,N,s)||""===N&&1===r.length){if(Nr(a))return!1;y=!0}}else{const j=8&a?N:r[++A];if(8&a&&null!==t.attrs){if(!Yi(t.attrs,j,s)){if(Nr(a))return!1;y=!0}continue}const oe=Hr(8&a?"class":N,l,Eo(t),s);if(-1===oe){if(Nr(a))return!1;y=!0;continue}if(""!==j){let Se;Se=oe>f?"":l[oe+1].toLowerCase();const Ne=8&a?Se:null;if(Ne&&-1!==Ws(Ne,j,0)||2&a&&j!==Se){if(Nr(a))return!1;y=!0}}}}else{if(!y&&!Nr(a)&&!Nr(N))return!1;if(y&&Nr(N))continue;y=!1,a=N|1&a}}return Nr(a)||y}function Nr(t){return 0==(1&t)}function Hr(t,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let f=!1;for(;l<r.length;){const y=r[l];if(y===t)return l;if(3===y||6===y)f=!0;else{if(1===y||2===y){let A=r[++l];for(;"string"==typeof A;)A=r[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=f?1:2}return-1}return function us(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function ui(t,r,s=!1){for(let a=0;a<r.length;a++)if(co(t,r[a],s))return!0;return!1}function Qs(t,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(t.length===a.length){for(let l=0;l<t.length;l++)if(t[l]!==a[l])continue e;return!0}}return!1}function $r(t,r){return t?":not("+r.trim()+")":r}function du(t){let r=t[0],s=1,a=2,l="",f=!1;for(;s<t.length;){let y=t[s];if("string"==typeof y)if(2&a){const A=t[++s];l+="["+y+(A.length>0?'="'+A+'"':"")+"]"}else 8&a?l+="."+y:4&a&&(l+=" "+y);else""!==l&&!Nr(y)&&(r+=$r(f,l),l=""),a=y,f=f||!Nr(a);s++}return""!==l&&(r+=$r(f,l)),r}function ho(t){return Oe(()=>{const r=Vr(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===st.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||jt.Emulated,styles:t.styles||It,_:null,schemas:t.schemas||null,tView:null,id:""};xs(s);const a=t.dependencies;return s.directiveDefs=ks(a,!1),s.pipeDefs=ks(a,!0),s.id=function Ts(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const l of s)r=Math.imul(31,r)+l.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(s),s})}function hu(t){return wn(t)||tr(t)}function Fa(t){return null!==t}function Oi(t){return Oe(()=>({type:t.type,bootstrap:t.bootstrap||It,declarations:t.declarations||It,imports:t.imports||It,exports:t.exports||It,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Xo(t,r){if(null==t)return Wt;const s={};for(const a in t)if(t.hasOwnProperty(a)){let l=t[a],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),s[l]=a,r&&(r[l]=f)}return s}function zr(t){return Oe(()=>{const r=Vr(t);return xs(r),r})}function Ns(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function wn(t){return t[Xt]||null}function tr(t){return t[Gn]||null}function Ni(t){return t[qn]||null}function Ys(t){const r=wn(t)||tr(t)||Ni(t);return null!==r&&r.standalone}function Gr(t,r){const s=t[ti]||null;if(!s&&!0===r)throw new Error(`Type ${be(t)} does not have '\u0275mod' property.`);return s}function Vr(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||Wt,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||It,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Xo(t.inputs,r),outputs:Xo(t.outputs)}}function xs(t){t.features?.forEach(r=>r(t))}function ks(t,r){if(!t)return null;const s=r?Ni:hu;return()=>("function"==typeof t?t():t).map(a=>s(a)).filter(Fa)}const cr=0,vt=1,cn=2,Sn=3,qr=4,Io=5,ci=6,Js=7,dr=8,Ui=9,Bi=10,Ht=11,wi=12,ea=13,Ur=14,br=15,nr=16,ji=17,di=18,Fs=19,ko=20,Cs=21,Xi=22,Ls=23,Hi=24,An=25,ls=1,na=2,cs=7,hi=9,ni=11;function ri(t){return Array.isArray(t)&&"object"==typeof t[ls]}function hr(t){return Array.isArray(t)&&!0===t[ls]}function Ds(t){return 0!=(4&t.flags)}function As(t){return t.componentOffset>-1}function fo(t){return 1==(1&t.flags)}function ts(t){return!!t.template}function _a(t){return 0!=(512&t[cn])}function Ci(t,r){return t.hasOwnProperty(Jr)?t[Jr]:null}let fi=null,bs=!1;function pi(t){const r=fi;return fi=t,r}const Ea={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function oa(t){if(!hs(t)||t.dirty){if(!t.producerMustRecompute(t)&&!wa(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function wo(t){t.dirty=!0,function Bs(t){if(void 0===t.liveConsumerNode)return;const r=bs;bs=!0;try{for(const s of t.liveConsumerNode)s.dirty||wo(s)}finally{bs=r}}(t),t.consumerMarkedDirty?.(t)}function eo(t){return t&&(t.nextProducerIndex=0),pi(t)}function za(t,r){if(pi(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(hs(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)aa(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function wa(t){gi(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==s.version||(oa(s),a!==s.version))return!0}return!1}function fu(t){if(gi(t),hs(t))for(let r=0;r<t.producerNode.length;r++)aa(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function aa(t,r){if(function Wr(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),gi(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)aa(t.producerNode[a],t.producerIndexOfThis[a]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],l=t.liveConsumerNode[r];gi(l),l.producerIndexOfThis[a]=r}}function hs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function gi(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let rs=null;function Ge(t){const r=pi(null);try{return t()}finally{pi(r)}}const k=()=>{},b=(()=>({...Ea,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:k}))();class X{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function $e(){return ot}function ot(t){return t.type.prototype.ngOnChanges&&(t.setInput=Wn),nn}function nn(){const t=Di(this),r=t?.current;if(r){const s=t.previous;if(s===Wt)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function Wn(t,r,s,a){const l=this.declaredInputs[s],f=Di(t)||function Xr(t,r){return t[Kr]=r}(t,{previous:Wt,current:null}),y=f.current||(f.current={}),A=f.previous,N=A[l];y[l]=new X(N&&N.currentValue,r,A===Wt),t[a]=r}$e.ngInherit=!0;const Kr="__ngSimpleChanges__";function Di(t){return t[Kr]||null}const Gi=function(t,r,s){};function Tr(t){for(;Array.isArray(t);)t=t[cr];return t}function Da(t,r){return Tr(r[t])}function Rs(t,r){return Tr(r[t.index])}function Wa(t,r){return t.data[r]}function mu(t,r){return t[r]}function bn(t,r){const s=r[t];return ri(s)?s:s[cr]}function la(t,r){return null==r?null:t[r]}function at(t){t[ji]=0}function gr(t){1024&t[cn]||(t[cn]|=1024,_u(t,1))}function fs(t){1024&t[cn]&&(t[cn]&=-1025,_u(t,-1))}function _u(t,r){let s=t[Sn];if(null===s)return;s[Io]+=r;let a=s;for(s=s[Sn];null!==s&&(1===r&&1===a[Io]||-1===r&&0===a[Io]);)s[Io]+=r,a=s,s=s[Sn]}const an={lFrame:Z(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Uu(){return an.bindingsEnabled}function ul(){return null!==an.skipHydrationRootTNode}function rt(){return an.lFrame.lView}function Yn(){return an.lFrame.tView}function ii(t){return an.lFrame.contextLView=t,t[dr]}function En(t){return an.lFrame.contextLView=null,t}function Kn(){let t=Rl();for(;null!==t&&64===t.type;)t=t.parent;return t}function Rl(){return an.lFrame.currentTNode}function $t(t,r){const s=an.lFrame;s.currentTNode=t,s.isParent=r}function Qa(){return an.lFrame.isParent}function Un(){an.lFrame.isParent=!1}function Ao(){return an.lFrame.bindingIndex++}function Pl(t,r){const s=an.lFrame;s.bindingIndex=s.bindingRootIndex=t,Ps(r)}function Ps(t){an.lFrame.currentDirectiveIndex=t}function bc(){return an.lFrame.currentQueryIndex}function D(t){an.lFrame.currentQueryIndex=t}function O(t){const r=t[vt];return 2===r.type?r.declTNode:1===r.type?t[ci]:null}function I(t,r,s){if(s&qt.SkipSelf){let l=r,f=t;for(;!(l=l.parent,null!==l||s&qt.Host||(l=O(f),null===l||(f=f[Ur],10&l.type))););if(null===l)return!1;r=l,t=f}const a=an.lFrame=V();return a.currentTNode=r,a.lView=t,!0}function C(t){const r=V(),s=t[vt];an.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function V(){const t=an.lFrame,r=null===t?null:t.child;return null===r?Z(t):r}function Z(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function ae(){const t=an.lFrame;return an.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Be=ae;function Le(){const t=ae();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Rn(){return an.lFrame.selectedIndex}function Pn(t){an.lFrame.selectedIndex=t}function rr(){const t=an.lFrame;return Wa(t.tView,t.selectedIndex)}let ps=!0;function hl(){return ps}function yu(t){ps=t}function Yl(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const f=t.data[s].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:A,ngAfterViewInit:N,ngAfterViewChecked:j,ngOnDestroy:Y}=f;y&&(t.contentHooks??=[]).push(-s,y),A&&((t.contentHooks??=[]).push(s,A),(t.contentCheckHooks??=[]).push(s,A)),N&&(t.viewHooks??=[]).push(-s,N),j&&((t.viewHooks??=[]).push(s,j),(t.viewCheckHooks??=[]).push(s,j)),null!=Y&&(t.destroyHooks??=[]).push(s,Y)}}function Ja(t,r,s){Hu(t,r,3,s)}function Ol(t,r,s,a){(3&t[cn])===s&&Hu(t,r,s,a)}function fl(t,r){let s=t[cn];(3&s)===r&&(s&=8191,s+=1,t[cn]=s)}function Hu(t,r,s,a){const f=a??-1,y=r.length-1;let A=0;for(let N=void 0!==a?65535&t[ji]:0;N<y;N++)if("number"==typeof r[N+1]){if(A=r[N],null!=a&&A>=a)break}else r[N]<0&&(t[ji]+=65536),(A<f||-1==f)&&(Lf(t,s,r,N),t[ji]=(4294901760&t[ji])+N+2),N++}function Nl(t,r){Gi(4,t,r);const s=pi(null);try{r.call(t)}finally{pi(s),Gi(5,t,r)}}function Lf(t,r,s,a){const l=s[a]<0,f=s[a+1],A=t[l?-s[a]:s[a]];l?t[cn]>>13<t[ji]>>16&&(3&t[cn])===r&&(t[cn]+=8192,Nl(A,f)):Nl(A,f)}const vu=-1;class Xa{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Pc(t){return t!==vu}function ba(t){return 32767&t}function Eu(t,r){let s=function yh(t){return t>>16}(t),a=r;for(;s>0;)a=a[Ur],s--;return a}let Jl=!0;function pl(t){const r=Jl;return Jl=t,r}const is=255,Ms=5;let Sa=0;const ro={};function eu(t,r){const s=Ir(t,r);if(-1!==s)return s;const a=r[vt];a.firstCreatePass&&(t.injectorIndex=r.length,xi(a.data,t),xi(r,null),xi(a.blueprint,null));const l=zu(t,r),f=t.injectorIndex;if(Pc(l)){const y=ba(l),A=Eu(l,r),N=A[vt].data;for(let j=0;j<8;j++)r[f+j]=A[y+j]|N[y+j]}return r[f+8]=l,f}function xi(t,r){t.push(0,0,0,0,0,0,0,0,r)}function Ir(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function zu(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=Ra(l),null===a)return vu;if(s++,l=l[Ur],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return vu}function tu(t,r,s){!function Dr(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(as)&&(a=s[as]),null==a&&(a=s[as]=Sa++);const l=a&is;r.data[t+(l>>Ms)]|=1<<l}(t,r,s)}function Mc(t,r,s){if(s&qt.Optional||void 0!==t)return t;Qt()}function Oc(t,r,s,a){if(s&qt.Optional&&void 0===a&&(a=null),!(s&(qt.Self|qt.Host))){const l=t[Ui],f=Ln(void 0);try{return l?l.get(r,a,s&qt.Optional):Vn(r,a,s&qt.Optional)}finally{Ln(f)}}return Mc(a,0,s)}function mi(t,r,s,a=qt.Default,l){if(null!==t){if(2048&r[cn]&&!(a&qt.Self)){const y=function Gu(t,r,s,a,l){let f=t,y=r;for(;null!==f&&null!==y&&2048&y[cn]&&!(512&y[cn]);){const A=Nc(f,y,s,a|qt.Self,ro);if(A!==ro)return A;let N=f.parent;if(!N){const j=y[ko];if(j){const Y=j.get(s,ro,a);if(Y!==ro)return Y}N=Ra(y),y=y[Ur]}f=N}return l}(t,r,s,a,ro);if(y!==ro)return y}const f=Nc(t,r,s,a,ro);if(f!==ro)return f}return Oc(r,s,a,l)}function Nc(t,r,s,a,l){const f=function Xl(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(as)?t[as]:void 0;return"number"==typeof r?r>=0?r&is:kl:r}(s);if("function"==typeof f){if(!I(r,t,a))return a&qt.Host?Mc(l,0,a):Oc(r,s,a,l);try{let y;if(y=f(a),null!=y||a&qt.Optional)return y;Qt()}finally{Be()}}else if("number"==typeof f){let y=null,A=Ir(t,r),N=vu,j=a&qt.Host?r[br][ci]:null;for((-1===A||a&qt.SkipSelf)&&(N=-1===A?zu(t,r):r[A+8],N!==vu&&gl(a,!1)?(y=r[vt],A=ba(N),r=Eu(N,r)):A=-1);-1!==A;){const Y=r[vt];if(Iu(f,A,Y.data)){const oe=ss(A,r,s,y,a,j);if(oe!==ro)return oe}N=r[A+8],N!==vu&&gl(a,r[vt].data[A+8]===j)&&Iu(f,A,r)?(y=Y,A=ba(N),r=Eu(N,r)):A=-1}}return l}function ss(t,r,s,a,l,f){const y=r[vt],A=y.data[t+8],Y=mr(A,y,s,null==a?As(A)&&Jl:a!=y&&0!=(3&A.type),l&qt.Host&&f===A);return null!==Y?io(r,y,Y,A):ro}function mr(t,r,s,a,l){const f=t.providerIndexes,y=r.data,A=1048575&f,N=t.directiveStart,Y=f>>20,Se=l?A+Y:t.directiveEnd;for(let Ne=a?A:A+Y;Ne<Se;Ne++){const Xe=y[Ne];if(Ne<N&&s===Xe||Ne>=N&&Xe.type===s)return Ne}if(l){const Ne=y[N];if(Ne&&ts(Ne)&&Ne.type===s)return N}return null}function io(t,r,s,a){let l=t[s];const f=r.data;if(function $u(t){return t instanceof Xa}(l)){const y=l;y.resolving&&function Ye(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new ce(-200,`Circular dependency in DI detected for ${t}${s}`)}(function je(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Te(t)}(f[s]));const A=pl(y.canSeeViewProviders);y.resolving=!0;const j=y.injectImpl?Ln(y.injectImpl):null;I(t,a,qt.Default);try{l=t[s]=y.factory(void 0,f,t,a),r.firstCreatePass&&s>=a.directiveStart&&function po(t,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:f}=r.type.prototype;if(a){const y=ot(r);(s.preOrderHooks??=[]).push(t,y),(s.preOrderCheckHooks??=[]).push(t,y)}l&&(s.preOrderHooks??=[]).push(0-t,l),f&&((s.preOrderHooks??=[]).push(t,f),(s.preOrderCheckHooks??=[]).push(t,f))}(s,f[s],r)}finally{null!==j&&Ln(j),pl(A),y.resolving=!1,Be()}}return l}function Iu(t,r,s){return!!(s[r+(t>>Ms)]&1<<t)}function gl(t,r){return!(t&qt.Self||t&qt.Host&&r)}class si{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return mi(this._tNode,this._lView,r,Ft(a),s)}}function kl(){return new si(Kn(),rt())}function bo(t){return Oe(()=>{const r=t.prototype.constructor,s=r[Jr]||jo(r),a=Object.prototype;let l=Object.getPrototypeOf(t.prototype).constructor;for(;l&&l!==a;){const f=l[Jr]||jo(l);if(f&&f!==s)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function jo(t){return pt(t)?()=>{const r=jo(tt(t));return r&&r()}:Ci(t)}function Ra(t){const r=t[vt],s=r.type;return 2===s?r.declTNode:1===s?t[ci]:null}function Fl(t){return function gs(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const f=s[l];if(Zs(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(f===r)return s[l+1];l+=2}}}return null}(Kn(),t)}const nu="__parameters__";function Pa(t,r,s){return Oe(()=>{const a=function ml(t){return function(...s){if(t){const a=t(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...f){if(this instanceof l)return a.apply(this,f),this;const y=new l(...f);return A.annotation=y,A;function A(N,j,Y){const oe=N.hasOwnProperty(nu)?N[nu]:Object.defineProperty(N,nu,{value:[]})[nu];for(;oe.length<=Y;)oe.push(null);return(oe[Y]=oe[Y]||[]).push(y),N}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=t,l.annotationCls=l,l})}function _l(t,r){t.forEach(s=>Array.isArray(s)?_l(s,r):r(s))}function v(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function h(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function m(t,r){const s=[];for(let a=0;a<t;a++)s.push(r);return s}function se(t,r,s){let a=Me(t,r);return a>=0?t[1|a]=s:(a=~a,function $(t,r,s,a){let l=t.length;if(l==r)t.push(s,a);else if(1===l)t.push(a,t[0]),t[0]=s;else{for(l--,t.push(t[l-1],t[l]);l>r;)t[l]=t[l-2],l--;t[r]=s,t[r+1]=a}}(t,a,r,s)),a}function _e(t,r){const s=Me(t,r);if(s>=0)return t[1|s]}function Me(t,r){return function _t(t,r,s){let a=0,l=t.length>>s;for(;l!==a;){const f=a+(l-a>>1),y=t[f<<s];if(r===y)return f<<s;y>r?l=f:a=f+1}return~(l<<s)}(t,r,1)}const ei=Ei(Pa("Optional"),8),Qr=Ei(Pa("SkipSelf"),4);function su(t){return 128==(128&t.flags)}var Ku=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ku||{});const zc=new Map;let _i=0;const pa="__ngContext__";function ao(t,r){ri(r)?(t[pa]=r[Fs],function rc(t){zc.set(t[Fs],t)}(r)):t[pa]=r}let Md;function Oa(t,r){return Md(t,r)}function Bl(t){const r=t[Sn];return hr(r)?r[Sn]:r}function Gc(t){return ic(t[wi])}function Od(t){return ic(t[qr])}function ic(t){for(;null!==t&&!hr(t);)t=t[qr];return t}function Cu(t,r,s,a,l){if(null!=a){let f,y=!1;hr(a)?f=a:ri(a)&&(y=!0,a=a[cr]);const A=Tr(a);0===t&&null!==s?null==l?jl(r,s,A):Yu(r,s,A,l||null,!0):1===t&&null!==s?Yu(r,s,A,l||null,!0):2===t?function Ph(t,r,s){const a=Du(t,r);a&&function xd(t,r,s,a){t.removeChild(r,s,a)}(t,a,r,s)}(r,A,y):3===t&&r.destroyNode(A),null!=f&&function oc(t,r,s,a,l){const f=s[cs];f!==Tr(s)&&Cu(r,t,a,f,l);for(let A=ni;A<s.length;A++){const N=s[A];Mh(N[vt],N,t,r,a,f)}}(r,t,f,s,l)}}function p(t,r,s){return t.createElement(r,s)}function Ot(t,r){const s=t[hi],a=s.indexOf(r);fs(r),s.splice(a,1)}function Zt(t,r){if(t.length<=ni)return;const s=ni+r,a=t[s];if(a){const l=a[nr];null!==l&&l!==t&&Ot(l,a),r>0&&(t[s-1][qr]=a[qr]);const f=h(t,ni+r);!function E(t,r){Mh(t,r,r[Ht],2,null,null),r[cr]=null,r[ci]=null}(a[vt],a);const y=f[di];null!==y&&y.detachView(f[vt]),a[Sn]=null,a[qr]=null,a[cn]&=-129}return a}function zt(t,r){if(!(256&r[cn])){const s=r[Ht];r[Ls]&&fu(r[Ls]),r[Hi]&&fu(r[Hi]),s.destroyNode&&Mh(t,r,s,3,null,null),function pe(t){let r=t[wi];if(!r)return kr(t[vt],t);for(;r;){let s=null;if(ri(r))s=r[wi];else{const a=r[ni];a&&(s=a)}if(!s){for(;r&&!r[qr]&&r!==t;)ri(r)&&kr(r[vt],r),r=r[Sn];null===r&&(r=t),ri(r)&&kr(r[vt],r),s=r&&r[qr]}r=s}}(r)}}function kr(t,r){if(!(256&r[cn])){r[cn]&=-129,r[cn]|=256,function Nd(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof Xa)){const f=s[a+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const A=l[f[y]],N=f[y+1];Gi(4,A,N);try{N.call(A)}finally{Gi(5,A,N)}}else{Gi(4,l,f);try{f.call(l)}finally{Gi(5,l,f)}}}}}(t,r),function Na(t,r){const s=t.cleanup,a=r[Js];if(null!==s)for(let f=0;f<s.length-1;f+=2)if("string"==typeof s[f]){const y=s[f+3];y>=0?a[y]():a[-y].unsubscribe(),f+=2}else s[f].call(a[s[f+1]]);null!==a&&(r[Js]=null);const l=r[Cs];if(null!==l){r[Cs]=null;for(let f=0;f<l.length;f++)(0,l[f])()}}(t,r),1===r[vt].type&&r[Ht].destroy();const s=r[nr];if(null!==s&&hr(r[Sn])){s!==r[Sn]&&Ot(s,r);const a=r[di];null!==a&&a.detachView(t)}!function fa(t){zc.delete(t[Fs])}(r)}}function Ri(t,r,s){return function sc(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[cr];{const{componentOffset:l}=a;if(l>-1){const{encapsulation:f}=t.data[a.directiveStart+l];if(f===jt.None||f===jt.Emulated)return null}return Rs(a,s)}}(t,r.parent,s)}function Yu(t,r,s,a,l){t.insertBefore(r,s,a,l)}function jl(t,r,s){t.appendChild(r,s)}function ga(t,r,s,a,l){null!==a?Yu(t,r,s,a,l):jl(t,r,s)}function Du(t,r){return t.parentNode(r)}function bh(t,r,s){return Qf(t,r,s)}let Tg,Hl,Bd,Qf=function qc(t,r,s){return 40&t.type?Rs(t,s):null};function Fd(t,r,s,a){const l=Ri(t,a,r),f=r[Ht],A=bh(a.parent||r[ci],a,r);if(null!=l)if(Array.isArray(s))for(let N=0;N<s.length;N++)ga(f,l,s[N],A,!1);else ga(f,l,s,A,!1);void 0!==Tg&&Tg(f,a,r,s,l)}function Sh(t,r){if(null!==r){const s=r.type;if(3&s)return Rs(r,t);if(4&s)return Rh(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return Sh(t,a);{const l=t[r.index];return hr(l)?Rh(-1,l):Tr(l)}}if(32&s)return Oa(r,t)()||Tr(t[r.index]);{const a=Cg(t,r);return null!==a?Array.isArray(a)?a[0]:Sh(Bl(t[br]),a):Sh(t,r.next)}}return null}function Cg(t,r){return null!==r?t[br][ci].projection[r.projection]:null}function Rh(t,r){const s=ni+t+1;if(s<r.length){const a=r[s],l=a[vt].firstChild;if(null!==l)return Sh(a,l)}return r[cs]}function Yf(t,r,s,a,l,f,y){for(;null!=s;){const A=a[s.index],N=s.type;if(y&&0===r&&(A&&ao(Tr(A),a),s.flags|=2),32!=(32&s.flags))if(8&N)Yf(t,r,s.child,a,l,f,!1),Cu(r,t,l,A,f);else if(32&N){const j=Oa(s,a);let Y;for(;Y=j();)Cu(r,t,l,Y,f);Cu(r,t,l,A,f)}else 16&N?R_(t,r,a,s,l,f):Cu(r,t,l,A,f);s=y?s.projectionNext:s.next}}function Mh(t,r,s,a,l,f){Yf(s,a,t.firstChild,r,l,f,!1)}function R_(t,r,s,a,l,f){const y=s[br],N=y[ci].projection[a.projection];if(Array.isArray(N))for(let j=0;j<N.length;j++)Cu(r,t,l,N[j],f);else{let j=N;const Y=y[Sn];su(a)&&(j.flags|=128),Yf(t,r,j,Y,l,f,!0)}}function M_(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function Dg(t,r,s){const{mergedAttrs:a,classes:l,styles:f}=s;null!==a&&Ks(t,r,a),null!==l&&M_(t,r,l),null!==f&&function P_(t,r,s){t.setAttribute(r,"style",s)}(t,r,f)}function Oh(t){Hl=t}function N_(t){return function Nh(){if(void 0===Bd&&(Bd=null,zn.trustedTypes))try{Bd=zn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Bd}()?.createScriptURL(t)||t}class Sg{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ee})`}}function $l(t){return t instanceof Sg?t.changingThisBreaksApplicationSecurity:t}function kh(t,r){const s=function kv(t){return t instanceof Sg&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${Ee})`)}return s===r}const Mg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var bu=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(bu||{});function op(t){const r=$d();return r?r.sanitize(bu.URL,t)||"":kh(t,"URL")?$l(t):function np(t){return(t=String(t)).match(Mg)?t:"unsafe:"+t}(Te(t))}function zl(t){const r=$d();if(r)return N_(r.sanitize(bu.RESOURCE_URL,t)||"");if(kh(t,"ResourceURL"))return N_($l(t));throw new ce(904,!1)}function kg(t,r,s){return function Bv(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?zl:op}(r,s)(t)}function $d(){const t=rt();return t&&t[Bi].sanitizer}const Bh=new xt("ENVIRONMENT_INITIALIZER"),Lg=new xt("INJECTOR",-1),$_=new xt("INJECTOR_DEF_TYPES");class ap{get(r,s=ir){if(s===ir){const a=new Error(`NullInjectorError: No provider for ${be(r)}!`);throw a.name="NullInjectorError",a}return s}}function jh(...t){return{\u0275providers:Vg(0,t),\u0275fromNgModule:!0}}function Vg(t,...r){const s=[],a=new Set;let l;const f=y=>{s.push(y)};return _l(r,y=>{const A=y;up(A,f,[],a)&&(l||=[],l.push(A))}),void 0!==l&&Ug(l,f),s}function Ug(t,r){for(let s=0;s<t.length;s++){const{ngModule:a,providers:l}=t[s];Bg(l,f=>{r(f,a)})}}function up(t,r,s,a){if(!(t=tt(t)))return!1;let l=null,f=Fr(t);const y=!f&&wn(t);if(f||y){if(y&&!y.standalone)return!1;l=t}else{const N=t.ngModule;if(f=Fr(N),!f)return!1;l=N}const A=a.has(l);if(y){if(A)return!1;if(a.add(l),y.dependencies){const N="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const j of N)up(j,r,s,a)}}else{if(!f)return!1;{if(null!=f.imports&&!A){let j;a.add(l);try{_l(f.imports,Y=>{up(Y,r,s,a)&&(j||=[],j.push(Y))})}finally{}void 0!==j&&Ug(j,r)}if(!A){const j=Ci(l)||(()=>new l);r({provide:l,useFactory:j,deps:It},l),r({provide:$_,useValue:l,multi:!0},l),r({provide:Bh,useValue:()=>Jt(l),multi:!0},l)}const N=f.providers;if(null!=N&&!A){const j=t;Bg(N,Y=>{r(Y,j)})}}}return l!==t&&void 0!==t.providers}function Bg(t,r){for(let s of t)ut(s)&&(s=s.\u0275providers),Array.isArray(s)?Bg(s,r):r(s)}const Hv=le({provide:String,useValue:le});function Hh(t){return null!==t&&"object"==typeof t&&Hv in t}function Jc(t){return"function"==typeof t}const jg=new xt("Set Injector scope."),zd={},zv={};let Gd;function Xc(){return void 0===Gd&&(Gd=new ap),Gd}class wl{}class ed extends wl{get destroyed(){return this._destroyed}constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zg(r,y=>this.processProvider(y)),this.records.set(Lg,dc(void 0,this)),l.has("environment")&&this.records.set(wl,dc(void 0,this));const f=this.records.get(jg);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get($_.multi,It,qt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=Ze(this),a=Ln(void 0);try{return r()}finally{Ze(s),Ln(a)}}get(r,s=ir,a=qt.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(vo))return r[vo](this);a=Ft(a);const f=Ze(this),y=Ln(void 0);try{if(!(a&qt.SkipSelf)){let N=this.records.get(r);if(void 0===N){const j=function G_(t){return"function"==typeof t||"object"==typeof t&&t instanceof xt}(r)&&mn(r);N=j&&this.injectableDefInScope(j)?dc($h(r),zd):null,this.records.set(r,N)}if(null!=N)return this.hydrate(r,N)}return(a&qt.Self?Xc():this.parent).get(r,s=a&qt.Optional&&s===ir?null:s)}catch(A){if("NullInjectorError"===A.name){if((A[os]=A[os]||[]).unshift(be(r)),f)throw A;return function ka(t,r,s,a){const l=t[os];throw r[J]&&l.unshift(r[J]),t.message=function We(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let l=be(r);if(Array.isArray(r))l=r.map(be).join(" -> ");else if("object"==typeof r){let f=[];for(let y in r)if(r.hasOwnProperty(y)){let A=r[y];f.push(y+":"+("string"==typeof A?JSON.stringify(A):be(A)))}l=`{${f.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${t.replace(ee,"\n  ")}`}("\n"+t.message,l,s,a),t.ngTokenPath=l,t[os]=null,t}(A,r,"R3InjectorError",this.source)}throw A}finally{Ln(y),Ze(f)}}resolveInjectorInitializers(){const r=Ze(this),s=Ln(void 0);try{const l=this.get(Bh.multi,It,qt.Self);for(const f of l)f()}finally{Ze(r),Ln(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(be(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ce(205,!1)}processProvider(r){let s=Jc(r=tt(r))?r:tt(r&&r.provide);const a=function zh(t){return Hh(t)?dc(void 0,t.useValue):dc(Gh(t),zd)}(r);if(Jc(r)||!0!==r.multi)this.records.get(s);else{let l=this.records.get(s);l||(l=dc(void 0,zd,!0),l.factory=()=>lr(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===zd&&(s.value=zv,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Gv(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=tt(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function $h(t){const r=mn(t),s=null!==r?r.factory:Ci(t);if(null!==s)return s;if(t instanceof xt)throw new ce(204,!1);if(t instanceof Function)return function Hg(t){const r=t.length;if(r>0)throw m(r,"?"),new ce(204,!1);const s=function yn(t){return t&&(t[er]||t[Pi])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new ce(204,!1)}function Gh(t,r,s){let a;if(Jc(t)){const l=tt(t);return Ci(l)||$h(l)}if(Hh(t))a=()=>tt(t.useValue);else if(function z_(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...lr(t.deps||[]));else if(function uo(t){return!(!t||!t.useExisting)}(t))a=()=>Jt(tt(t.useExisting));else{const l=tt(t&&(t.useClass||t.provide));if(!function $g(t){return!!t.deps}(t))return Ci(l)||$h(l);a=()=>new l(...lr(t.deps))}return a}function dc(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function zg(t,r){for(const s of t)Array.isArray(s)?zg(s,r):s&&ut(s)?zg(s.\u0275providers,r):r(s)}const Gg=new xt("AppId",{providedIn:"root",factory:()=>q_}),q_="ng",lp=new xt("Platform Initializer"),qg=new xt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Wv=new xt("AnimationModuleType"),W_=new xt("CSP nonce",{providedIn:"root",factory:()=>function Kc(){if(void 0!==Hl)return Hl;if(typeof document<"u")return document;throw new ce(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let gp=(t,r,s)=>null;function mp(t,r,s=!1){return gp(t,r,s)}class Yv{}class Z_{}class Xv{resolveComponentFactory(r){throw function Jv(t){const r=Error(`No component factory found for ${be(t)}.`);return r.ngComponent=t,r}(r)}}let Ep=(()=>{class t{static#e=this.NULL=new Xv}return t})();function ef(){return hc(Kn(),rt())}function hc(t,r){return new Tl(Rs(t,r))}let Tl=(()=>{class t{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=ef}return t})();function Qg(t){return t instanceof Tl?t.nativeElement:t}class tf{}let nf=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Yg(){const t=rt(),s=bn(Kn().index,t);return(ri(s)?s:t)[Ht]}()}return t})(),J_=(()=>{class t{static#e=this.\u0275prov=en({token:t,providedIn:"root",factory:()=>null})}return t})();class Ip{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const wp=new Ip("16.2.12"),Cl={};function Cp(t,r=null,s=null,a){const l=ty(t,r,s,a);return l.resolveInjectorInitializers(),l}function ty(t,r=null,s=null,a,l=new Set){const f=[s||It,jh(t)];return a=a||("object"==typeof t?void 0:be(t)),new ed(f,r||Xc(),a||null,l)}let Xu=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=ir;static#t=this.NULL=new ap;static create(s,a){if(Array.isArray(s))return Cp({name:""},a,s,"");{const l=s.name??"";return Cp({name:l},s.parent,s.providers,l)}}static#n=this.\u0275prov=en({token:t,providedIn:"any",factory:()=>Jt(Lg)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function rm(t){return t.ngOriginalError}class Dl{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&rm(r);for(;s&&rm(s);)s=rm(s);return s||null}}function am(t){return r=>{setTimeout(t,void 0,r)}}const Su=class om extends w.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,f=s||(()=>null),y=a;if(r&&"object"==typeof r){const N=r;l=N.next?.bind(N),f=N.error?.bind(N),y=N.complete?.bind(N)}this.__isAsync&&(f=am(f),l&&(l=am(l)),y&&(y=am(y)));const A=super.subscribe({next:l,error:f,complete:y});return r instanceof ue.w0&&r.add(A),A}};function um(...t){}class qs{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Su(!1),this.onMicrotaskEmpty=new Su(!1),this.onStable=new Su(!1),this.onError=new Su(!1),typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function lm(){const t="function"==typeof zn.requestAnimationFrame;let r=zn[t?"requestAnimationFrame":"setTimeout"],s=zn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&s){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Yd(t){const r=()=>{!function cm(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(zn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,fc(t),t.isCheckStableRunning=!0,Al(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),fc(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,f,y,A)=>{if(function hm(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(A))return s.invokeTask(l,f,y,A);try{return dm(t),s.invokeTask(l,f,y,A)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&r(),sd(t)}},onInvoke:(s,a,l,f,y,A,N)=>{try{return dm(t),s.invoke(l,f,y,A,N)}finally{t.shouldCoalesceRunChangeDetection&&r(),sd(t)}},onHasTask:(s,a,l,f)=>{s.hasTask(l,f),a===l&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,fc(t),Al(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(s,a,l,f)=>(s.handleError(l,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qs.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(qs.isInAngularZone())throw new ce(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+l,r,Qd,um,um);try{return f.runTask(y,s,a)}finally{f.cancelTask(y)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const Qd={};function Al(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function fc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function dm(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function sd(t){t._nesting--,Al(t)}class rE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Su,this.onMicrotaskEmpty=new Su,this.onStable=new Su,this.onError=new Su}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}const ry=new xt("",{providedIn:"root",factory:Dp});function Dp(){const t=Tt(qs);let r=!0;const s=new q.y(l=>{r=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{l.next(r),l.complete()})}),a=new q.y(l=>{let f;t.runOutsideAngular(()=>{f=t.onStable.subscribe(()=>{qs.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(r=!0,l.next(!0))})})});const y=t.onUnstable.subscribe(()=>{qs.assertInAngularZone(),r&&(r=!1,t.runOutsideAngular(()=>{l.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,De.T)(s,a.pipe((0,Pe.B)()))}function Ap(t){return t.ownerDocument}function el(t){return t instanceof Function?t():t}let bp=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=en({token:t,providedIn:"root",factory:()=>new t})}return t})();function Xd(t){for(;t;){t[cn]|=64;const r=Bl(t);if(_a(t)&&!r)return t;t=r}return null}const uy=new xt("",{providedIn:"root",factory:()=>!1});let Pp=null;function Mp(t,r){return t[r]??Op()}function cy(t,r){const s=Op();s.producerNode?.length&&(t[r]=Pp,s.lView=t,Pp=dy())}const vm={...Ea,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Xd(t.lView)},lView:null};function dy(){return Object.create(vm)}function Op(){return Pp??=dy(),Pp}const Nn={};function Np(t){xp(Yn(),rt(),Rn()+t,!1)}function xp(t,r,s,a){if(!a)if(3==(3&r[cn])){const f=t.preOrderCheckHooks;null!==f&&Ja(r,f,s)}else{const f=t.preOrderHooks;null!==f&&Ol(r,f,0,s)}Pn(s)}function gc(t,r=qt.Default){const s=rt();return null===s?Jt(t,r):mi(Kn(),s,tt(t),r)}function od(){throw new Error("invalid")}function eh(t,r,s,a,l,f,y,A,N,j,Y){const oe=r.blueprint.slice();return oe[cr]=l,oe[cn]=140|a,(null!==j||t&&2048&t[cn])&&(oe[cn]|=2048),at(oe),oe[Sn]=oe[Ur]=t,oe[dr]=s,oe[Bi]=y||t&&t[Bi],oe[Ht]=A||t&&t[Ht],oe[Ui]=N||t&&t[Ui]||null,oe[ci]=f,oe[Fs]=function Ad(){return _i++}(),oe[Xi]=Y,oe[ko]=j,oe[br]=2==r.type?t[br]:oe,oe}function th(t,r,s,a,l){let f=t.data[r];if(null===f)f=function uf(t,r,s,a,l){const f=Rl(),y=Qa(),N=t.data[r]=function Cm(t,r,s,a,l,f){let y=r?r.injectorIndex:-1,A=0;return ul()&&(A|=128),{type:s,index:a,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:A,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,s,r,a,l);return null===t.firstChild&&(t.firstChild=N),null!==f&&(y?null==f.child&&null!==N.parent&&(f.child=N):null===f.next&&(f.next=N,N.prev=f)),N}(t,r,s,a,l),function ll(){return an.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=s,f.value=a,f.attrs=l;const y=function Er(){const t=an.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return $t(f,!0),f}function ou(t,r,s,a){if(0===s)return-1;const l=r.length;for(let f=0;f<s;f++)r.push(a),t.blueprint.push(a),t.data.push(null);return l}function kp(t,r,s,a,l){const f=Mp(r,Ls),y=Rn(),A=2&a;try{Pn(-1),A&&r.length>An&&xp(t,r,An,!1),Gi(A?2:0,l);const j=A?f:null,Y=eo(j);try{null!==j&&(j.dirty=!1),s(a,l)}finally{za(j,Y)}}finally{A&&null===r[Ls]&&cy(r,Ls),Pn(y),Gi(A?3:1,l)}}function Em(t,r,s){if(Ds(r)){const a=pi(null);try{const f=r.directiveEnd;for(let y=r.directiveStart;y<f;y++){const A=t.data[y];A.contentQueries&&A.contentQueries(1,s[y],y)}}finally{pi(a)}}}function lf(t,r,s){Uu()&&(function _y(t,r,s,a){const l=s.directiveStart,f=s.directiveEnd;As(s)&&function Om(t,r,s){const a=Rs(r,t),l=fy(s);let y=16;s.signals?y=4096:s.onPush&&(y=64);const A=ff(t,eh(t,l,null,y,a,r,null,t[Bi].rendererFactory.createRenderer(a,s),null,null,null));t[r.index]=A}(r,s,t.data[l+s.componentOffset]),t.firstCreatePass||eu(s,r),ao(a,r);const y=s.initialInputs;for(let A=l;A<f;A++){const N=t.data[A],j=io(r,t,A,s);ao(j,r),null!==y&&vy(0,A-l,j,N,0,y),ts(N)&&(bn(s.index,r)[dr]=io(r,t,A,s))}}(t,r,s,Rs(s,r)),64==(64&s.flags)&&ad(t,r,s))}function Im(t,r,s=Rs){const a=r.localNames;if(null!==a){let l=r.index+1;for(let f=0;f<a.length;f+=2){const y=a[f+1],A=-1===y?s(r,t):t[y];t[l++]=A}}}function fy(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=cf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function cf(t,r,s,a,l,f,y,A,N,j,Y){const oe=An+a,Se=oe+l,Ne=function uE(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:Nn);return s}(oe,Se),Xe="function"==typeof j?j():j;return Ne[vt]={type:t,blueprint:Ne,template:s,queries:null,viewQuery:A,declTNode:r,data:Ne.slice().fill(null,oe),bindingStartIndex:oe,expandoStartIndex:Se,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:N,consts:Xe,incompleteFirstPass:!1,ssrId:Y}}let Fp=t=>null;function Dm(t,r,s,a){for(let l in t)if(t.hasOwnProperty(l)){s=null===s?{}:s;const f=t[l];null===a?gy(s,r,l,f):a.hasOwnProperty(l)&&gy(s,r,a[l],f)}return s}function gy(t,r,s,a){t.hasOwnProperty(s)?t[s].push(r,a):t[s]=[r,a]}function Rm(t,r,s,a){if(Uu()){const l=null===a?null:{"":-1},f=function Lp(t,r){const s=t.directiveRegistry;let a=null,l=null;if(s)for(let f=0;f<s.length;f++){const y=s[f];if(ui(r,y.selectors,!1))if(a||(a=[]),ts(y))if(null!==y.findHostDirectiveDefs){const A=[];l=l||new Map,y.findHostDirectiveDefs(y,A,l),a.unshift(...A,y),Mm(t,r,A.length)}else a.unshift(y),Mm(t,r,0);else l=l||new Map,y.findHostDirectiveDefs?.(y,a,l),a.push(y)}return null===a?null:[a,l]}(t,s);let y,A;null===f?y=A=null:[y,A]=f,null!==y&&nh(t,r,s,y,l,A),l&&function fE(t,r,s){if(r){const a=t.localNames=[];for(let l=0;l<r.length;l+=2){const f=s[r[l+1]];if(null==f)throw new ce(-301,!1);a.push(r[l],f)}}}(s,a,l)}s.mergedAttrs=xn(s.mergedAttrs,s.attrs)}function nh(t,r,s,a,l,f){for(let j=0;j<a.length;j++)tu(eu(s,r),t,a[j].type);!function gE(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,a.length);for(let j=0;j<a.length;j++){const Y=a[j];Y.providersResolver&&Y.providersResolver(Y)}let y=!1,A=!1,N=ou(t,r,a.length,null);for(let j=0;j<a.length;j++){const Y=a[j];s.mergedAttrs=xn(s.mergedAttrs,Y.hostAttrs),Vp(t,s,r,N,Y),pE(N,Y,l),null!==Y.contentQueries&&(s.flags|=4),(null!==Y.hostBindings||null!==Y.hostAttrs||0!==Y.hostVars)&&(s.flags|=64);const oe=Y.type.prototype;!y&&(oe.ngOnChanges||oe.ngOnInit||oe.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),y=!0),!A&&(oe.ngOnChanges||oe.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),A=!0),N++}!function dE(t,r,s){const l=r.directiveEnd,f=t.data,y=r.attrs,A=[];let N=null,j=null;for(let Y=r.directiveStart;Y<l;Y++){const oe=f[Y],Se=s?s.get(oe):null,Xe=Se?Se.outputs:null;N=Dm(oe.inputs,Y,N,Se?Se.inputs:null),j=Dm(oe.outputs,Y,j,Xe);const gt=null===N||null===y||Eo(r)?null:Nm(N,Y,y);A.push(gt)}null!==N&&(N.hasOwnProperty("class")&&(r.flags|=8),N.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=A,r.inputs=N,r.outputs=j}(t,s,f)}function ad(t,r,s){const a=s.directiveStart,l=s.directiveEnd,f=s.index,y=function cl(){return an.lFrame.currentDirectiveIndex}();try{Pn(f);for(let A=a;A<l;A++){const N=t.data[A],j=r[A];Ps(A),(null!==N.hostBindings||0!==N.hostVars||null!==N.hostAttrs)&&yy(N,j)}}finally{Pn(-1),Ps(y)}}function yy(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function Mm(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function pE(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;ts(r)&&(s[""]=t)}}function Vp(t,r,s,a,l){t.data[a]=l;const f=l.factory||(l.factory=Ci(l.type)),y=new Xa(f,ts(l),gc);t.blueprint[a]=y,s[a]=y,function hE(t,r,s,a,l){const f=l.hostBindings;if(f){let y=t.hostBindingOpCodes;null===y&&(y=t.hostBindingOpCodes=[]);const A=~r.index;(function Pm(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(y)!=A&&y.push(A),y.push(s,a,f)}}(t,r,a,ou(t,s,l.hostVars,Nn),l)}function Ru(t,r,s,a,l,f){const y=Rs(t,r);!function df(t,r,s,a,l,f,y){if(null==f)t.removeAttribute(r,l,s);else{const A=null==y?Te(f):y(f,a||"",l);t.setAttribute(r,l,A,s)}}(r[Ht],y,f,t.value,s,a,l)}function vy(t,r,s,a,l,f){const y=f[r];if(null!==y)for(let A=0;A<y.length;)Up(a,s,y[A++],y[A++],y[A++])}function Up(t,r,s,a,l){const f=pi(null);try{const y=t.inputTransforms;null!==y&&y.hasOwnProperty(a)&&(l=y[a].call(r,l)),null!==t.setInput?t.setInput(r,l,s,a):r[a]=l}finally{pi(f)}}function Nm(t,r,s){let a=null,l=0;for(;l<s.length;){const f=s[l];if(0!==f)if(5!==f){if("number"==typeof f)break;if(t.hasOwnProperty(f)){null===a&&(a=[]);const y=t[f];for(let A=0;A<y.length;A+=2)if(y[A]===r){a.push(f,y[A+1],s[l+1]);break}}l+=2}else l+=2;else l+=4}return a}function hf(t,r,s,a){return[t,!0,!1,r,null,0,a,s,null,null,null]}function Bp(t,r){const s=t.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const f=s[a+1];if(-1!==f){const y=t.data[f];D(s[a]),y.contentQueries(2,r[f],f)}}}function ff(t,r){return t[wi]?t[ea][qr]=r:t[wi]=r,t[ea]=r,r}function mc(t,r,s){D(0);const a=pi(null);try{r(t,s)}finally{pi(a)}}function jp(t){return t[Js]||(t[Js]=[])}function xm(t){return t.cleanup||(t.cleanup=[])}function Hp(t,r){const s=t[Ui],a=s?s.get(Dl,null):null;a&&a.handleError(r)}function km(t,r,s,a,l){for(let f=0;f<s.length;){const y=s[f++],A=s[f++];Up(t.data[y],r[y],a,A,l)}}function _E(t,r){const s=bn(r,t),a=s[vt];!function Ey(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(a,s);const l=s[cr];null!==l&&null===s[Xi]&&(s[Xi]=mp(l,s[Ui])),Fm(a,s,s[dr])}function Fm(t,r,s){C(r);try{const a=t.viewQuery;null!==a&&mc(1,a,s);const l=t.template;null!==l&&kp(t,r,l,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Bp(t,r),t.staticViewQueries&&mc(2,t.viewQuery,s);const f=t.components;null!==f&&function Iy(t,r){for(let s=0;s<r.length;s++)_E(t,r[s])}(r,f)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[cn]&=-5,Le()}}let wy=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(s,a,l){const f=typeof Zone>"u"?null:Zone.current,y=function M(t,r,s){const a=Object.create(b);s&&(a.consumerAllowSignalWrites=!0),a.fn=t,a.schedule=r;const l=y=>{a.cleanupFn=y};return a.ref={notify:()=>wo(a),run:()=>{if(a.dirty=!1,a.hasRun&&!wa(a))return;a.hasRun=!0;const y=eo(a);try{a.cleanupFn(),a.cleanupFn=k,a.fn(l)}finally{za(a,y)}},cleanup:()=>a.cleanupFn()},a.ref}(s,j=>{this.all.has(j)&&this.queue.set(j,f)},l);let A;this.all.add(y),y.notify();const N=()=>{y.cleanup(),A?.(),this.all.delete(y),this.queue.delete(y)};return A=a?.onDestroy(N),{destroy:N}}flush(){if(0!==this.queue.size)for(const[s,a]of this.queue)this.queue.delete(s),a?a.run(()=>s.run()):s.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=en({token:t,providedIn:"root",factory:()=>new t})}return t})();function $p(t,r,s){let a=s?t.styles:null,l=s?t.classes:null,f=0;if(null!==r)for(let y=0;y<r.length;y++){const A=r[y];"number"==typeof A?f=A:1==f?l=Je(l,A):2==f&&(a=Je(a,A+": "+r[++y]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=l:t.classesWithoutHost=l}function pf(t,r,s,a,l=!1){for(;null!==s;){const f=r[s.index];null!==f&&a.push(Tr(f)),hr(f)&&Ty(f,a);const y=s.type;if(8&y)pf(t,r,s.child,a);else if(32&y){const A=Oa(s,r);let N;for(;N=A();)a.push(N)}else if(16&y){const A=Cg(r,s);if(Array.isArray(A))a.push(...A);else{const N=Bl(r[br]);pf(N[vt],N,A,a,!0)}}s=l?s.projectionNext:s.next}return a}function Ty(t,r){for(let s=ni;s<t.length;s++){const a=t[s],l=a[vt].firstChild;null!==l&&pf(a[vt],a,l,r)}t[cs]!==t[cr]&&r.push(t[cs])}function zp(t,r,s,a=!0){const l=r[Bi],f=l.rendererFactory,y=l.afterRenderEventManager;f.begin?.(),y?.begin();try{Gp(t,r,t.template,s)}catch(N){throw a&&Hp(r,N),N}finally{f.end?.(),l.effectManager?.flush(),y?.end()}}function Gp(t,r,s,a){const l=r[cn];if(256!=(256&l)){r[Bi].effectManager?.flush(),C(r);try{at(r),function Aa(t){return an.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&kp(t,r,s,2,a);const y=3==(3&l);if(y){const j=t.preOrderCheckHooks;null!==j&&Ja(r,j,null)}else{const j=t.preOrderHooks;null!==j&&Ol(r,j,0,null),fl(r,0)}if(function Dy(t){for(let r=Gc(t);null!==r;r=Od(r)){if(!r[na])continue;const s=r[hi];for(let a=0;a<s.length;a++){gr(s[a])}}}(r),Lm(r,2),null!==t.contentQueries&&Bp(t,r),y){const j=t.contentCheckHooks;null!==j&&Ja(r,j)}else{const j=t.contentHooks;null!==j&&Ol(r,j,1),fl(r,1)}!function hy(t,r){const s=t.hostBindingOpCodes;if(null===s)return;const a=Mp(r,Hi);try{for(let l=0;l<s.length;l++){const f=s[l];if(f<0)Pn(~f);else{const y=f,A=s[++l],N=s[++l];Pl(A,y),a.dirty=!1;const j=eo(a);try{N(2,r[y])}finally{za(a,j)}}}}finally{null===r[Hi]&&cy(r,Hi),Pn(-1)}}(t,r);const A=t.components;null!==A&&ar(r,A,0);const N=t.viewQuery;if(null!==N&&mc(2,N,a),y){const j=t.viewCheckHooks;null!==j&&Ja(r,j)}else{const j=t.viewHooks;null!==j&&Ol(r,j,2),fl(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[cn]&=-73,fs(r)}finally{Le()}}}function Lm(t,r){for(let s=Gc(t);null!==s;s=Od(s))for(let a=ni;a<s.length;a++)gf(s[a],r)}function Ay(t,r,s){gf(bn(r,t),s)}function gf(t,r){if(!function qi(t){return 128==(128&t[cn])}(t))return;const s=t[vt],a=t[cn];if(80&a&&0===r||1024&a||2===r)Gp(s,t,s.template,t[dr]);else if(t[Io]>0){Lm(t,1);const l=s.components;null!==l&&ar(t,l,1)}}function ar(t,r,s){for(let a=0;a<r.length;a++)Ay(t,r[a],s)}class rh{get rootNodes(){const r=this._lView,s=r[vt];return pf(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[dr]}set context(r){this._lView[dr]=r}get destroyed(){return 256==(256&this._lView[cn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Sn];if(hr(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Zt(r,a),h(s,a))}this._attachedToViewContainer=!1}zt(this._lView[vt],this._lView)}onDestroy(r){!function Lt(t,r){if(256==(256&t[cn]))throw new ce(911,!1);null===t[Cs]&&(t[Cs]=[]),t[Cs].push(r)}(this._lView,r)}markForCheck(){Xd(this._cdRefInjectingView||this._lView)}detach(){this._lView[cn]&=-129}reattach(){this._lView[cn]|=128}detectChanges(){zp(this._lView[vt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Q(t,r){Mh(t,r,r[Ht],2,null,null)}(this._lView[vt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=r}}class by extends rh{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;zp(r[vt],r,r[dr],!1)}checkNoChanges(){}get context(){return null}}class ih extends Ep{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=wn(r);return new xa(s,this.ngModule)}}function Vm(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class Fi{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){a=Ft(a);const l=this.injector.get(r,Cl,a);return l!==Cl||s===Cl?l:this.parentInjector.get(r,s,a)}}class xa extends Z_{get inputs(){const r=this.componentDef,s=r.inputTransforms,a=Vm(r.inputs);if(null!==s)for(const l of a)s.hasOwnProperty(l.propName)&&(l.transform=s[l.propName]);return a}get outputs(){return Vm(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function li(t){return t.map(du).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,a,l){let f=(l=l||this.ngModule)instanceof wl?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new Fi(r,f):r,A=y.get(tf,null);if(null===A)throw new ce(407,!1);const oe={rendererFactory:A,sanitizer:y.get(J_,null),effectManager:y.get(wy,null),afterRenderEventManager:y.get(bp,null)},Se=A.createRenderer(null,this.componentDef),Ne=this.componentDef.selectors[0][0]||"div",Xe=a?function wm(t,r,s,a){const f=a.get(uy,!1)||s===jt.ShadowDom,y=t.selectRootElement(r,f);return function lE(t){Fp(t)}(y),y}(Se,a,this.componentDef.encapsulation,y):p(Se,Ne,function No(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Ne)),hn=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let lt=null;null!==Xe&&(lt=mp(Xe,y,!0));const On=cf(0,null,null,1,0,null,null,null,null,null,null),ur=eh(null,On,null,hn,null,null,oe,Se,y,null,lt);let yi,Nu;C(ur);try{const md=this.componentDef;let Eg,VI=null;md.findHostDirectiveDefs?(Eg=[],VI=new Map,md.findHostDirectiveDefs(md,Eg,VI),Eg.push(md)):Eg=[md];const WA=function EE(t,r){const s=t[vt],a=An;return t[a]=r,th(s,a,2,"#host",null)}(ur,Xe),KA=function qp(t,r,s,a,l,f,y){const A=l[vt];!function Ry(t,r,s,a){for(const l of t)r.mergedAttrs=xn(r.mergedAttrs,l.hostAttrs);null!==r.mergedAttrs&&($p(r,r.mergedAttrs,!0),null!==s&&Dg(a,s,r))}(a,t,r,y);let N=null;null!==r&&(N=mp(r,l[Ui]));const j=f.rendererFactory.createRenderer(r,s);let Y=16;s.signals?Y=4096:s.onPush&&(Y=64);const oe=eh(l,fy(s),null,Y,l[t.index],t,f,j,null,null,N);return A.firstCreatePass&&Mm(A,t,a.length-1),ff(l,oe),l[t.index]=oe}(WA,Xe,md,Eg,ur,oe,Se);Nu=Wa(On,An),Xe&&function IE(t,r,s,a){if(a)Ks(t,s,["ng-version",wp.full]);else{const{attrs:l,classes:f}=function xo(t){const r=[],s=[];let a=1,l=2;for(;a<t.length;){let f=t[a];if("string"==typeof f)2===l?""!==f&&r.push(f,t[++a]):8===l&&s.push(f);else{if(!Nr(l))break;l=f}a++}return{attrs:r,classes:s}}(r.selectors[0]);l&&Ks(t,s,l),f&&f.length>0&&M_(t,s,f.join(" "))}}(Se,md,Xe,a),void 0!==s&&function Bm(t,r,s){const a=t.projection=[];for(let l=0;l<r.length;l++){const f=s[l];a.push(null!=f?Array.from(f):null)}}(Nu,this.ngContentSelectors,s),yi=function Um(t,r,s,a,l,f){const y=Kn(),A=l[vt],N=Rs(y,l);nh(A,l,y,s,null,a);for(let Y=0;Y<s.length;Y++)ao(io(l,A,y.directiveStart+Y,y),l);ad(A,l,y),N&&ao(N,l);const j=io(l,A,y.directiveStart+y.componentOffset,y);if(t[dr]=l[dr]=j,null!==f)for(const Y of f)Y(j,r);return Em(A,y,t),j}(KA,md,Eg,VI,ur,[wE]),Fm(On,ur,null)}finally{Le()}return new Sy(this.componentType,yi,hc(Nu,ur),ur,Nu)}}class Sy extends Yv{constructor(r,s,a,l,f){super(),this.location=a,this._rootLView=l,this._tNode=f,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new by(l),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const f=this._rootLView;km(f[vt],f,l,r,s),this.previousInputValues.set(r,s),Xd(bn(this._tNode.index,f))}}get injector(){return new si(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function wE(){const t=Kn();Yl(rt()[vt],t)}function oi(t){let r=function Py(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;r;){let l;if(ts(t))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new ce(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const y=t;y.inputs=jm(t.inputs),y.inputTransforms=jm(t.inputTransforms),y.declaredInputs=jm(t.declaredInputs),y.outputs=jm(t.outputs);const A=l.hostBindings;A&&TE(t,A);const N=l.viewQuery,j=l.contentQueries;if(N&&Es(t,N),j&&My(t,j),he(t.inputs,l.inputs),he(t.declaredInputs,l.declaredInputs),he(t.outputs,l.outputs),null!==l.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),he(y.inputTransforms,l.inputTransforms)),ts(l)&&l.data.animation){const Y=t.data;Y.animation=(Y.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let y=0;y<f.length;y++){const A=f[y];A&&A.ngInherit&&A(t),A===oi&&(s=!1)}}r=Object.getPrototypeOf(r)}!function qI(t){let r=0,s=null;for(let a=t.length-1;a>=0;a--){const l=t[a];l.hostVars=r+=l.hostVars,l.hostAttrs=xn(l.hostAttrs,s=xn(s,l.hostAttrs))}}(a)}function jm(t){return t===Wt?{}:t===It?[]:t}function Es(t,r){const s=t.viewQuery;t.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function My(t,r){const s=t.contentQueries;t.contentQueries=s?(a,l,f)=>{r(a,l,f),s(a,l,f)}:r}function TE(t,r){const s=t.hostBindings;t.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}function Hm(t){const r=t.inputConfig,s={};for(const a in r)if(r.hasOwnProperty(a)){const l=r[a];Array.isArray(l)&&l[2]&&(s[a]=l[2])}t.inputTransforms=s}function Kp(t){return!!Fy(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Fy(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ko(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function $m(t,r,s,a){const l=rt();return Ko(l,Ao(),r)&&(Yn(),Ru(rr(),l,t,r,s,a)),$m}function kE(t,r,s,a,l,f,y,A){const N=rt(),j=Yn(),Y=t+An,oe=j.firstCreatePass?function xE(t,r,s,a,l,f,y,A,N){const j=r.consts,Y=th(r,t,4,y||null,la(j,A));Rm(r,s,Y,la(j,N)),Yl(r,Y);const oe=Y.tView=cf(2,Y,a,l,f,r.directiveRegistry,r.pipeRegistry,null,r.schemas,j,null);return null!==r.queries&&(r.queries.template(r,Y),oe.queries=r.queries.embeddedTView(Y)),Y}(Y,j,N,r,s,a,l,f,y):j.data[Y];$t(oe,!1);const Se=FE(j,N,oe,t);hl()&&Fd(j,N,Se,oe),ao(Se,N),ff(N,N[Y]=hf(Se,N,Se,oe)),fo(oe)&&lf(j,N,oe),null!=y&&Im(N,oe,A)}let FE=function Ic(t,r,s,a){return yu(!0),r[Ht].createComment("")};function zy(t){return mu(function yd(){return an.lFrame.contextLView}(),An+t)}function ig(t,r,s){const a=rt();return Ko(a,Ao(),r)&&function au(t,r,s,a,l,f,y,A){const N=Rs(r,s);let Y,j=r.inputs;!A&&null!=j&&(Y=j[a])?(km(t,s,Y,a,l),As(r)&&function bm(t,r){const s=bn(r,t);16&s[cn]||(s[cn]|=64)}(s,r.index)):3&r.type&&(a=function Am(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),l=null!=y?y(l,r.value||"",a):l,f.setProperty(N,a,l))}(Yn(),rr(),a,t,r,a[Ht],s,!1),ig}function Km(t,r,s,a,l){const y=l?"class":"style";km(t,s,r.inputs[y],y,a)}function sg(t,r,s,a){const l=rt(),f=Yn(),y=An+t,A=l[Ht],N=f.firstCreatePass?function Tc(t,r,s,a,l,f){const y=r.consts,N=th(r,t,2,a,la(y,l));return Rm(r,s,N,la(y,f)),null!==N.attrs&&$p(N,N.attrs,!1),null!==N.mergedAttrs&&$p(N,N.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,N),N}(y,f,l,r,s,a):f.data[y],j=Gy(f,l,N,A,r,t);l[y]=j;const Y=fo(N);return $t(N,!0),Dg(A,j,N),32!=(32&N.flags)&&hl()&&Fd(f,l,j,N),0===function Qe(){return an.lFrame.elementDepthCount}()&&ao(j,l),function Cr(){an.lFrame.elementDepthCount++}(),Y&&(lf(f,l,N),Em(f,N,l)),null!==a&&Im(l,N),sg}function og(){let t=Kn();Qa()?Un():(t=t.parent,$t(t,!1));const r=t;(function Za(t){return an.skipHydrationRootTNode===t})(r)&&function Ac(){an.skipHydrationRootTNode=null}(),function Ka(){an.lFrame.elementDepthCount--}();const s=Yn();return s.firstCreatePass&&(Yl(s,t),Ds(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function Ed(t){return 0!=(8&t.flags)}(r)&&Km(s,r,rt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Rc(t){return 0!=(16&t.flags)}(r)&&Km(s,r,rt(),r.stylesWithoutHost,!1),og}function Zm(t,r,s,a){return sg(t,r,s,a),og(),Zm}let Gy=(t,r,s,a,l,f)=>(yu(!0),p(a,l,function Ml(){return an.lFrame.currentNamespace}()));function VE(){return rt()}function e_(t){return!!t&&"function"==typeof t.then}function Zy(t){return!!t&&"function"==typeof t.subscribe}function t_(t,r,s,a){const l=rt(),f=Yn(),y=Kn();return function BE(t,r,s,a,l,f,y){const A=fo(a),j=t.firstCreatePass&&xm(t),Y=r[dr],oe=jp(r);let Se=!0;if(3&a.type||y){const gt=Rs(a,r),Vt=y?y(gt):gt,hn=oe.length,lt=y?ur=>y(Tr(ur[a.index])):a.index;let On=null;if(!y&&A&&(On=function UE(t,r,s,a){const l=t.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const y=l[f];if(y===s&&l[f+1]===a){const A=r[Js],N=l[f+2];return A.length>N?A[N]:null}"string"==typeof y&&(f+=2)}return null}(t,r,l,a.index)),null!==On)(On.__ngLastListenerFn__||On).__ngNextListenerFn__=f,On.__ngLastListenerFn__=f,Se=!1;else{f=HE(a,r,Y,f,!1);const ur=s.listen(Vt,l,f);oe.push(f,ur),j&&j.push(l,lt,hn,hn+1)}}else f=HE(a,r,Y,f,!1);const Ne=a.outputs;let Xe;if(Se&&null!==Ne&&(Xe=Ne[l])){const gt=Xe.length;if(gt)for(let Vt=0;Vt<gt;Vt+=2){const yi=r[Xe[Vt]][Xe[Vt+1]].subscribe(f),Nu=oe.length;oe.push(f,yi),j&&j.push(l,a.index,Nu,-(Nu+1))}}}(f,l,l[Ht],y,t,r,a),t_}function jE(t,r,s,a){try{return Gi(6,r,s),!1!==s(a)}catch(l){return Hp(t,l),!1}finally{Gi(7,r,s)}}function HE(t,r,s,a,l){return function f(y){if(y===Function)return a;Xd(t.componentOffset>-1?bn(t.index,r):r);let N=jE(r,s,a,y),j=f.__ngNextListenerFn__;for(;j;)N=jE(r,s,j,y)&&N,j=j.__ngNextListenerFn__;return l&&!1===N&&y.preventDefault(),N}}function $E(t=1){return function Rt(t){return(an.lFrame.contextLView=function dn(t,r){for(;t>0;)r=r[Ur],t--;return r}(t,an.lFrame.contextLView))[dr]}(t)}function zE(t,r){let s=null;const a=function Is(t){const r=t.attrs;if(null!=r){const s=r.indexOf(5);if(!(1&s))return r[s+1]}return null}(t);for(let l=0;l<r.length;l++){const f=r[l];if("*"!==f){if(null===a?ui(t,f,!0):Qs(a,f))return l}else s=l}return s}function Yy(t){const r=rt()[br][ci];if(!r.projection){const a=r.projection=m(t?t.length:1,null),l=a.slice();let f=r.child;for(;null!==f;){const y=t?zE(f,t):0;null!==y&&(l[y]?l[y].projectionNext=f:a[y]=f,l[y]=f),f=f.next}}}function Jy(t,r=0,s){const a=rt(),l=Yn(),f=th(l,An+t,16,null,s||null);null===f.projection&&(f.projection=r),Un(),(!a[Xi]||ul())&&32!=(32&f.flags)&&function Nv(t,r,s){R_(r[Ht],0,r,s,Ri(t,s,r),bh(s.parent||r[ci],s,r))}(l,a,f)}function ag(t,r){return t<<17|r<<2}function hd(t){return t>>17&32767}function i_(t){return 2|t}function fh(t){return(131068&t)>>2}function ov(t,r){return-131069&t|r<<2}function av(t){return 1|t}function Sf(t,r,s,a,l){const f=t[s+1],y=null===r;let A=a?hd(f):fh(f),N=!1;for(;0!==A&&(!1===N||y);){const Y=t[A+1];KE(t[A],r)&&(N=!0,t[A+1]=a?av(Y):i_(Y)),A=a?hd(Y):fh(Y)}N&&(t[s+1]=a?i_(f):av(f))}function KE(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&Me(t,r)>=0}function cg(t,r){return function rl(t,r,s,a){const l=rt(),f=Yn(),y=function Ai(t){const r=an.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}(2);f.firstUpdatePass&&function Dc(t,r,s,a){const l=t.data;if(null===l[s+1]){const f=l[Rn()],y=function pd(t,r){return r>=t.expandoStartIndex}(t,s);(function dg(t,r){return 0!=(t.flags&(r?8:16))})(f,a)&&null===r&&!y&&(r=!1),r=function u_(t,r,s,a){const l=function dl(t){const r=an.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let f=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Mf(s=l_(null,t,r,s,a),r.attrs,a),f=null);else{const y=r.directiveStylingLast;if(-1===y||t[y]!==l)if(s=l_(l,t,r,s,a),null===f){let N=function gd(t,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==fh(a))return t[hd(a)]}(t,r,a);void 0!==N&&Array.isArray(N)&&(N=l_(null,t,r,N[1],a),N=Mf(N,r.attrs,a),function QE(t,r,s,a){t[hd(s?r.classBindings:r.styleBindings)]=a}(t,r,a,N))}else f=function YE(t,r,s){let a;const l=r.directiveEnd;for(let f=1+r.directiveStylingLast;f<l;f++)a=Mf(a,t[f].hostAttrs,s);return Mf(a,r.attrs,s)}(t,r,a)}return void 0!==f&&(a?r.residualClasses=f:r.residualStyles=f),s}(l,f,r,a),function XI(t,r,s,a,l,f){let y=f?r.classBindings:r.styleBindings,A=hd(y),N=fh(y);t[a]=s;let Y,j=!1;if(Array.isArray(s)?(Y=s[1],(null===Y||Me(s,Y)>0)&&(j=!0)):Y=s,l)if(0!==N){const Se=hd(t[A+1]);t[a+1]=ag(Se,A),0!==Se&&(t[Se+1]=ov(t[Se+1],a)),t[A+1]=function sv(t,r){return 131071&t|r<<17}(t[A+1],a)}else t[a+1]=ag(A,0),0!==A&&(t[A+1]=ov(t[A+1],a)),A=a;else t[a+1]=ag(N,0),0===A?A=a:t[N+1]=ov(t[N+1],a),N=a;j&&(t[a+1]=i_(t[a+1])),Sf(t,Y,a,!0),Sf(t,Y,a,!1),function s_(t,r,s,a,l){const f=l?t.residualClasses:t.residualStyles;null!=f&&"string"==typeof r&&Me(f,r)>=0&&(s[a+1]=av(s[a+1]))}(r,Y,t,a,f),y=ag(A,N),f?r.classBindings=y:r.styleBindings=y}(l,f,r,s,y,a)}}(f,t,y,a),r!==Nn&&Ko(l,y,r)&&function h_(t,r,s,a,l,f,y,A){if(!(3&r.type))return;const N=t.data,j=N[A+1],Y=function JI(t){return 1==(1&t)}(j)?Of(N,r,s,l,fh(j),y):void 0;Nf(Y)||(Nf(f)||function YI(t){return 2==(2&t)}(j)&&(f=Of(N,null,s,l,A,y)),function Ld(t,r,s,a,l){if(r)l?t.addClass(s,a):t.removeClass(s,a);else{let f=-1===a.indexOf("-")?void 0:Ku.DashCase;null==l?t.removeStyle(s,a,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=Ku.Important),t.setStyle(s,a,l,f))}}(a,y,Da(Rn(),s),l,f))}(f,f.data[Rn()],l,l[Ht],t,l[y+1]=function eI(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=be($l(t)))),t}(r,s),a,y)}(t,r,null,!0),cg}function l_(t,r,s,a,l){let f=null;const y=s.directiveEnd;let A=s.directiveStylingLast;for(-1===A?A=s.directiveStart:A++;A<y&&(f=r[A],a=Mf(a,f.hostAttrs,l),f!==t);)A++;return null!==t&&(s.directiveStylingLast=A),a}function Mf(t,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let f=0;f<r.length;f++){const y=r[f];"number"==typeof y?l=y:l===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),se(t,y,!!s||r[++f]))}return void 0===t?null:t}function Of(t,r,s,a,l,f){const y=null===r;let A;for(;l>0;){const N=t[l],j=Array.isArray(N),Y=j?N[1]:N,oe=null===Y;let Se=s[l+1];Se===Nn&&(Se=oe?It:void 0);let Ne=oe?_e(Se,a):Y===a?Se:void 0;if(j&&!Nf(Ne)&&(Ne=_e(N,a)),Nf(Ne)&&(A=Ne,y))return A;const Xe=t[l+1];l=y?hd(Xe):fh(Xe)}if(null!==r){let N=f?r.residualClasses:r.residualStyles;null!=N&&(A=_e(N,a))}return A}function Nf(t){return void 0!==t}function fv(t,r=""){const s=rt(),a=Yn(),l=t+An,f=a.firstCreatePass?th(a,l,1,r,null):a.data[l],y=f_(a,s,f,r,t);s[l]=y,hl()&&Fd(a,s,y,f),$t(f,!1)}let f_=(t,r,s,a,l)=>(yu(!0),function Il(t,r){return t.createText(r)}(r[Ht],a));function hg(t){return fg("",t,""),hg}function fg(t,r,s){const a=rt(),l=function Wl(t,r,s,a){return Ko(t,Ao(),s)?r+Te(s)+a:Nn}(a,t,r,s);return l!==Nn&&function Gl(t,r,s){const a=Da(r,t);!function _(t,r,s){t.setValue(r,s)}(t[Ht],a,s)}(a,Rn(),l),fg}const xf=void 0;var y0=["en",[["a","p"],["AM","PM"],xf],[["AM","PM"],xf,xf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xf,"{1} 'at' {0}",xf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function _0(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let pg={};function nI(t){const r=function v0(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=ow(r);if(s)return s;const a=r.split("-")[0];if(s=ow(a),s)return s;if("en"===a)return y0;throw new ce(701,!1)}function sw(t){return nI(t)[gg.PluralCase]}function ow(t){return t in pg||(pg[t]=zn.ng&&zn.ng.common&&zn.ng.common.locales&&zn.ng.common.locales[t]),pg[t]}var gg=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(gg||{});const mg="en-US";let aw=mg;function sI(t,r,s,a,l){if(t=tt(t),Array.isArray(t))for(let f=0;f<t.length;f++)sI(t[f],r,s,a,l);else{const f=Yn(),y=rt(),A=Kn();let N=Jc(t)?t:tt(t.provide);const j=Gh(t),Y=1048575&A.providerIndexes,oe=A.directiveStart,Se=A.providerIndexes>>20;if(Jc(t)||!t.multi){const Ne=new Xa(j,l,gc),Xe=aI(N,r,l?Y:Y+Se,oe);-1===Xe?(tu(eu(A,y),f,N),oI(f,t,r.length),r.push(N),A.directiveStart++,A.directiveEnd++,l&&(A.providerIndexes+=1048576),s.push(Ne),y.push(Ne)):(s[Xe]=Ne,y[Xe]=Ne)}else{const Ne=aI(N,r,Y+Se,oe),Xe=aI(N,r,Y,Y+Se),Vt=Xe>=0&&s[Xe];if(l&&!Vt||!l&&!(Ne>=0&&s[Ne])){tu(eu(A,y),f,N);const hn=function _C(t,r,s,a,l){const f=new Xa(t,s,gc);return f.multi=[],f.index=r,f.componentProviders=0,Ow(f,l,a&&!s),f}(l?mC:gC,s.length,l,a,j);!l&&Vt&&(s[Xe].providerFactory=hn),oI(f,t,r.length,0),r.push(N),A.directiveStart++,A.directiveEnd++,l&&(A.providerIndexes+=1048576),s.push(hn),y.push(hn)}else oI(f,t,Ne>-1?Ne:Xe,Ow(s[l?Xe:Ne],j,!l&&a));!l&&a&&Vt&&s[Xe].componentProviders++}}}function oI(t,r,s,a){const l=Jc(r),f=function $v(t){return!!t.useClass}(r);if(l||f){const N=(f?tt(r.useClass):r).prototype.ngOnDestroy;if(N){const j=t.destroyHooks||(t.destroyHooks=[]);if(!l&&r.multi){const Y=j.indexOf(s);-1===Y?j.push(s,[a,N]):j[Y+1].push(a,N)}else j.push(s,N)}}}function Ow(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function aI(t,r,s,a){for(let l=s;l<a;l++)if(r[l]===t)return l;return-1}function gC(t,r,s,a){return uI(this.multi,[])}function mC(t,r,s,a){const l=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,A=io(s,s[vt],this.providerFactory.index,a);f=A.slice(0,y),uI(l,f);for(let N=y;N<A.length;N++)f.push(A[N])}else f=[],uI(l,f);return f}function uI(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function Nw(t,r=[]){return s=>{s.providersResolver=(a,l)=>function pC(t,r,s){const a=Yn();if(a.firstCreatePass){const l=ts(t);sI(s,a.data,a.blueprint,l,!0),sI(r,a.data,a.blueprint,l,!1)}}(a,l?l(t):t,r)}}class kf{}class xw{}function yC(t,r){return new lI(t,r??null,[])}class lI extends kf{constructor(r,s,a){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ih(this);const l=Gr(r);this._bootstrapComponents=el(l.bootstrap),this._r3Injector=ty(r,s,[{provide:kf,useValue:this},{provide:Ep,useValue:this.componentFactoryResolver},...a],be(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class cI extends xw{constructor(r){super(),this.moduleType=r}create(r){return new lI(this.moduleType,r,[])}}class kw extends kf{constructor(r){super(),this.componentFactoryResolver=new ih(this),this.instance=null;const s=new ed([...r.providers,{provide:kf,useValue:this},{provide:Ep,useValue:this.componentFactoryResolver}],r.parent||Xc(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function Fw(t,r,s=null){return new kw({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let EC=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const a=Vg(0,s.type),l=a.length>0?Fw([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,l)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=en({token:t,providedIn:"environment",factory:()=>new t(Jt(wl))})}return t})();function Lw(t){t.getStandaloneInjector=r=>r.get(EC).getOrCreateStandaloneInjector(t)}function zw(t,r,s,a,l,f){const y=r+s;return Ko(t,y,l)?function uu(t,r,s){return t[r]=s}(t,y+1,f?a.call(f,l):a(l)):function w_(t,r){const s=t[r];return s===Nn?void 0:s}(t,y+1)}function Zw(t,r){const s=Yn();let a;const l=t+An;s.firstCreatePass?(a=function UC(t,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(t===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks??=[]).push(l,a.onDestroy)):a=s.data[l];const f=a.factory||(a.factory=Ci(a.type)),A=Ln(gc);try{const N=pl(!1),j=f();return pl(N),function wc(t,r,s,a){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=a}(s,rt(),l,j),j}finally{Ln(A)}}function Qw(t,r,s){const a=t+An,l=rt(),f=mu(l,a);return function T_(t,r){return t[vt].data[r].pure}(l,a)?zw(l,function Zr(){const t=an.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}(),r,f.transform,s,f):f.transform(s)}function zC(){return this._results[Symbol.iterator]()}class hI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Su)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=hI.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=zC)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=function zs(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function tc(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let l=t[a],f=r[a];if(s&&(l=s(l),f=s(f)),f!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function qC(t,r,s,a=!0){const l=r[vt];if(function ke(t,r,s,a){const l=ni+a,f=s.length;a>0&&(s[l-1][qr]=r),a<f-ni?(r[qr]=s[l],v(s,ni+a,r)):(s.push(r),r[qr]=null),r[Sn]=s;const y=r[nr];null!==y&&s!==y&&function et(t,r){const s=t[hi];r[br]!==r[Sn][Sn][br]&&(t[na]=!0),null===s?t[hi]=[r]:s.push(r)}(y,r);const A=r[di];null!==A&&A.insertView(t),r[cn]|=128}(l,r,t,s),a){const f=Rh(s,t),y=r[Ht],A=Du(y,t[cs]);null!==A&&function U(t,r,s,a,l,f){a[cr]=l,a[ci]=r,Mh(t,a,s,1,l,f)}(l,t[ci],y,r,A,f)}}let C_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=ZC}return t})();const WC=C_,KC=class extends WC{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,a){const l=function GC(t,r,s,a){const l=r.tView,A=eh(t,l,s,4096&t[cn]?4096:16,null,r,null,null,null,a?.injector??null,a?.hydrationInfo??null);A[nr]=t[r.index];const j=t[di];return null!==j&&(A[di]=j.createEmbeddedView(l)),Fm(l,A,s),A}(this._declarationLView,this._declarationTContainer,r,{injector:s,hydrationInfo:a});return new rh(l)}};function ZC(){return Tv(Kn(),rt())}function Tv(t,r){return 4&t.type?new KC(r,t,hc(t,r)):null}let Dv=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=tD}return t})();function tD(){return rT(Kn(),rt())}const nD=Dv,tT=class extends nD{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return hc(this._hostTNode,this._hostLView)}get injector(){return new si(this._hostTNode,this._hostLView)}get parentInjector(){const r=zu(this._hostTNode,this._hostLView);if(Pc(r)){const s=Eu(r,this._hostLView),a=ba(r);return new si(s[vt].data[a+8],s)}return new si(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=nT(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-ni}createEmbeddedView(r,s,a){let l,f;"number"==typeof a?l=a:null!=a&&(l=a.index,f=a.injector);const A=r.createEmbeddedViewImpl(s||{},f,null);return this.insertImpl(A,l,false),A}createComponent(r,s,a,l,f){const y=r&&!function Vl(t){return"function"==typeof t}(r);let A;if(y)A=s;else{const gt=s||{};A=gt.index,a=gt.injector,l=gt.projectableNodes,f=gt.environmentInjector||gt.ngModuleRef}const N=y?r:new xa(wn(r)),j=a||this.parentInjector;if(!f&&null==N.ngModule){const Vt=(y?j:this.parentInjector).get(wl,null);Vt&&(f=Vt)}wn(N.componentType??{});const Ne=N.create(j,l,null,f);return this.insertImpl(Ne.hostView,A,false),Ne}insert(r,s){return this.insertImpl(r,s,!1)}insertImpl(r,s,a){const l=r._lView;if(function js(t){return hr(t[Sn])}(l)){const N=this.indexOf(r);if(-1!==N)this.detach(N);else{const j=l[Sn],Y=new tT(j,j[ci],j[Sn]);Y.detach(Y.indexOf(r))}}const y=this._adjustIndex(s),A=this._lContainer;return qC(A,l,y,!a),r.attachToViewContainerRef(),v(fI(A),y,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=nT(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Zt(this._lContainer,s);a&&(h(fI(this._lContainer),s),zt(a[vt],a))}detach(r){const s=this._adjustIndex(r,-1),a=Zt(this._lContainer,s);return a&&null!=h(fI(this._lContainer),s)?new rh(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function nT(t){return t[8]}function fI(t){return t[8]||(t[8]=[])}function rT(t,r){let s;const a=r[t.index];return hr(a)?s=a:(s=hf(a,r,null,t),r[t.index]=s,ff(r,s)),iT(s,r,t,a),new tT(s,t,r)}let iT=function sT(t,r,s,a){if(t[cs])return;let l;l=8&s.type?Tr(a):function rD(t,r){const s=t[Ht],a=s.createComment(""),l=Rs(r,t);return Yu(s,Du(s,l),a,function Ah(t,r){return t.nextSibling(r)}(s,l),!1),a}(r,s),t[cs]=l};class pI{constructor(r){this.queryList=r,this.matches=null}clone(){return new pI(this.queryList)}setDirty(){this.queryList.setDirty()}}class gI{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let f=0;f<a;f++){const y=s.getByIndex(f);l.push(this.queries[y.indexInDeclarationView].clone())}return new gI(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==pT(r,s).matches&&this.queries[s].setDirty()}}class oT{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class mI{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,f=this.getByIndex(a).embeddedTView(r,l);f&&(f.indexInDeclarationView=a,null!==s?s.push(f):s=[f])}return null!==s?new mI(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class _I{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new _I(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const f=a[l];this.matchTNodeWithReadOption(r,s,oD(s,f)),this.matchTNodeWithReadOption(r,s,mr(s,r,f,!1,!1))}else a===C_?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,mr(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===Tl||l===Dv||l===C_&&4&s.type)this.addMatch(s.index,-2);else{const f=mr(s,r,l,!1,!1);null!==f&&this.addMatch(s.index,f)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function oD(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function uD(t,r,s,a){return-1===s?function aD(t,r){return 11&t.type?hc(t,r):4&t.type?Tv(t,r):null}(r,t):-2===s?function lD(t,r,s){return s===Tl?hc(r,t):s===C_?Tv(r,t):s===Dv?rT(r,t):void 0}(t,r,a):io(t,t[vt],s,r)}function aT(t,r,s,a){const l=r[di].queries[a];if(null===l.matches){const f=t.data,y=s.matches,A=[];for(let N=0;N<y.length;N+=2){const j=y[N];A.push(j<0?null:uD(r,f[j],y[N+1],s.metadata.read))}l.matches=A}return l.matches}function yI(t,r,s,a){const l=t.queries.getByIndex(s),f=l.matches;if(null!==f){const y=aT(t,r,l,s);for(let A=0;A<f.length;A+=2){const N=f[A];if(N>0)a.push(y[A/2]);else{const j=f[A+1],Y=r[-N];for(let oe=ni;oe<Y.length;oe++){const Se=Y[oe];Se[nr]===Se[Sn]&&yI(Se[vt],Se,j,a)}if(null!==Y[hi]){const oe=Y[hi];for(let Se=0;Se<oe.length;Se++){const Ne=oe[Se];yI(Ne[vt],Ne,j,a)}}}}}return a}function uT(t){const r=rt(),s=Yn(),a=bc();D(a+1);const l=pT(s,a);if(t.dirty&&function Do(t){return 4==(4&t[cn])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)t.reset([]);else{const f=l.crossesNgTemplate?yI(s,r,a,[]):aT(s,r,l,a);t.reset(f,Qg),t.notifyOnChanges()}return!0}return!1}function lT(t,r,s){const a=Yn();a.firstCreatePass&&(fT(a,new oT(t,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),hT(a,rt(),r)}function cT(t,r,s,a){const l=Yn();if(l.firstCreatePass){const f=Kn();fT(l,new oT(r,s,a),f.index),function dD(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(l,t),2==(2&s)&&(l.staticContentQueries=!0)}hT(l,rt(),s)}function dT(){return function cD(t,r){return t[di].queries[r].queryList}(rt(),bc())}function hT(t,r,s){const a=new hI(4==(4&s));(function py(t,r,s,a){const l=jp(r);l.push(s),t.firstCreatePass&&xm(t).push(a,l.length-1)})(t,r,a,a.destroy),null===r[di]&&(r[di]=new gI),r[di].queries.push(new pI(a))}function fT(t,r,s){null===t.queries&&(t.queries=new mI),t.queries.track(new _I(r,s))}function pT(t,r){return t.queries.getByIndex(r)}function gT(t,r){return Tv(t,r)}function vI(t){return!!Gr(t)}const OT=new xt("Application Initializer");let CI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,a)=>{this.resolve=s,this.reject=a}),this.appInits=Tt(OT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const l of this.appInits){const f=l();if(e_(f))s.push(f);else if(Zy(f)){const y=new Promise((A,N)=>{f.subscribe({complete:A,error:N})});s.push(y)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),NT=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const bv=new xt("LocaleId",{providedIn:"root",factory:()=>Tt(bv,qt.Optional|qt.SkipSelf)||function OD(){return typeof $localize<"u"&&$localize.locale||mg}()}),ND=new xt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let xT=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ve.X(!1)}add(){this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class kD{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let FD=(()=>{class t{compileModuleSync(s){return new cI(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),f=el(Gr(s).declarations).reduce((y,A)=>{const N=wn(A);return N&&y.push(new xa(N)),y},[]);return new kD(a,f)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const VT=new xt(""),UT=new xt("");let bI,iA=(()=>{class t{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,bI||(function sA(t){bI=t}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qs.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let f=-1;a&&a>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:f,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(Jt(qs),Jt(BT),Jt(UT))};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac})}return t})(),BT=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return bI?.findTestabilityInTree(this,s,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),gh=null;const jT=new xt("AllowMultipleToken"),SI=new xt("PlatformDestroyListeners"),RI=new xt("appBootstrapListener");class uA{constructor(r,s){this.name=r,this.token=s}}function zT(t,r,s=[]){const a=`Platform: ${r}`,l=new xt(a);return(f=[])=>{let y=PI();if(!y||y.injector.get(jT,!1)){const A=[...s,...f,{provide:l,useValue:!0}];t?t(A):function lA(t){if(gh&&!gh.get(jT,!1))throw new ce(400,!1);(function HT(){!function Lu(t){rs=t}(()=>{throw new ce(600,!1)})})(),gh=t;const r=t.get(qT);(function $T(t){t.get(lp,null)?.forEach(s=>s())})(t)}(function GT(t=[],r){return Xu.create({name:r,providers:[{provide:jg,useValue:"platform"},{provide:SI,useValue:new Set([()=>gh=null])},...t]})}(A,a))}return function dA(t){const r=PI();if(!r)throw new ce(401,!1);return r}()}}function PI(){return gh?.get(qT)??null}let qT=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function hA(t="zone.js",r){return"noop"===t?new rE:"zone.js"===t?new qs(r):t}(a?.ngZone,function WT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return l.run(()=>{const f=function vC(t,r,s){return new lI(t,r,s)}(s.moduleType,this.injector,function JT(t){return[{provide:qs,useFactory:t},{provide:Bh,multi:!0,useFactory:()=>{const r=Tt(pA,{optional:!0});return()=>r.initialize()}},{provide:YT,useFactory:fA},{provide:ry,useFactory:Dp}]}(()=>l)),y=f.injector.get(Dl,null);return l.runOutsideAngular(()=>{const A=l.onError.subscribe({next:N=>{y.handleError(N)}});f.onDestroy(()=>{Rv(this._modules,f),A.unsubscribe()})}),function KT(t,r,s){try{const a=s();return e_(a)?a.catch(l=>{throw r.runOutsideAngular(()=>t.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(y,l,()=>{const A=f.injector.get(CI);return A.runInitializers(),A.donePromise.then(()=>(function uw(t){yt(t,"Expected localeId to be defined"),"string"==typeof t&&(aw=t.toLowerCase().replace(/_/g,"-"))}(f.injector.get(bv,mg)||mg),this._moduleDoBootstrap(f),f))})})}bootstrapModule(s,a=[]){const l=ZT({},a);return function oA(t,r,s){const a=new cI(s);return Promise.resolve(a)}(0,0,s).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(s){const a=s.injector.get(vg);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new ce(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ce(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(SI,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||t)(Jt(Xu))};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function ZT(t,r){return Array.isArray(r)?r.reduce(ZT,t):{...t,...r}}let vg=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Tt(YT),this.zoneIsStable=Tt(ry),this.componentTypes=[],this.components=[],this.isStable=Tt(xT).hasPendingTasks.pipe((0,P.w)(s=>s?(0,Ie.of)(!1):this.zoneIsStable),(0,xe.x)(),(0,Pe.B)()),this._injector=Tt(wl)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const l=s instanceof Z_;if(!this._injector.get(CI).done)throw!l&&Ys(s),new ce(405,!1);let y;y=l?s:this._injector.get(Ep).resolveComponentFactory(s),this.componentTypes.push(y.componentType);const A=function aA(t){return t.isBoundToModule}(y)?void 0:this._injector.get(kf),j=y.create(Xu.NULL,[],a||y.selector,A),Y=j.location.nativeElement,oe=j.injector.get(VT,null);return oe?.registerApplication(Y),j.onDestroy(()=>{this.detachView(j.hostView),Rv(this.components,j),oe?.unregisterApplication(Y)}),this._loadComponent(j),j}tick(){if(this._runningTick)throw new ce(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Rv(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(RI,[]);a.push(...this._bootstrapListeners),a.forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Rv(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new ce(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Rv(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}const YT=new xt("",{providedIn:"root",factory:()=>Tt(Dl).handleError.bind(void 0)});function fA(){const t=Tt(qs),r=Tt(Dl);return s=>t.runOutsideAngular(()=>r.handleError(s))}let pA=(()=>{class t{constructor(){this.zone=Tt(qs),this.applicationRef=Tt(vg)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mA(){return!1}let _A=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=yA}return t})();function yA(t){return function vA(t,r,s){if(As(t)&&!s){const a=bn(t.index,r);return new rh(a,a)}return 47&t.type?new rh(r[br],r):null}(Kn(),rt(),16==(16&t))}class n0{constructor(){}supports(r){return Kp(r)}create(r){return new DA(r)}}const CA=(t,r)=>r;class DA{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||CA}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,f=null;for(;s||a;){const y=!a||s&&s.currentIndex<s0(a,l,f)?s:a,A=s0(y,l,f),N=y.currentIndex;if(y===a)l--,a=a._nextRemoved;else if(s=s._next,null==y.previousIndex)l++;else{f||(f=[]);const j=A-l,Y=N-l;if(j!=Y){for(let Se=0;Se<j;Se++){const Ne=Se<f.length?f[Se]:f[Se]=0,Xe=Ne+Se;Y<=Xe&&Xe<j&&(f[Se]=Ne+1)}f[y.previousIndex]=Y-j}}A!==N&&r(y,A,N)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Kp(r))throw new ce(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,f,y,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let A=0;A<this.length;A++)f=r[A],y=this._trackByFn(A,f),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,f,y,A)),Object.is(s.item,f)||this._addIdentityChange(s,f)):(s=this._mismatch(s,f,y,A),a=!0),s=s._next}else l=0,function ql(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,A=>{y=this._trackByFn(l,A),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,A,y,l)),Object.is(s.item,A)||this._addIdentityChange(s,A)):(s=this._mismatch(s,A,y,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let f;return null===r?f=this._itTail:(f=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,f,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,f,l)):r=this._addAfter(new AA(s,a),f,l),r}_verifyReinsertion(r,s,a,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==f?r=this._reinsertAfter(f,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,f=r._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new r0),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new r0),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class AA{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bA{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class r0{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new bA,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function s0(t,r,s){const a=t.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class o0{constructor(){}supports(r){return r instanceof Map||Fy(r)}create(){return new SA}}class SA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Fy(r)))throw new ce(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const f=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,f)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const f=l._prev,y=l._next;return f&&(f._next=y),y&&(y._prev=f),l._next=null,l._prev=null,l}const a=new RA(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class RA{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function a0(){return new kI([new n0])}let kI=(()=>{class t{static#e=this.\u0275prov=en({token:t,providedIn:"root",factory:a0});constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||a0()),deps:[[t,new Qr,new ei]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new ce(901,!1)}}return t})();function u0(){return new FI([new o0])}let FI=(()=>{class t{static#e=this.\u0275prov=en({token:t,providedIn:"root",factory:u0});constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||u0()),deps:[[t,new Qr,new ei]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new ce(901,!1)}}return t})();const OA=zT(null,"core",[]);let NA=(()=>{class t{constructor(s){}static#e=this.\u0275fac=function(a){return new(a||t)(Jt(vg))};static#t=this.\u0275mod=Oi({type:t});static#n=this.\u0275inj=sn({})}return t})();function zA(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function qA(t){const r=wn(t);if(!r)return null;const s=new xa(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},7213:(Nt,He,z)=>{z.d(He,{zQ:()=>Xn,ww:()=>Tn,rT:()=>Qt,f7:()=>Hn,L6:()=>nt,_Q:()=>fe,lh:()=>ct,Qv:()=>Ye,nw:()=>un}),z(3956);var ue=z(6814),q=z(5879),De=z(8326),ve=z(7217),Ie=z(8645),Pe=z(2096),P=z(5592),xe=z(2459),le=z(3019),he=z(3093),be=z(4664),Je=z(7398),Ke=z(4552);class ft extends Ie.x{constructor(Dt=1/0,me=1/0,ye=Ke.l){super(),this._bufferSize=Dt,this._windowTime=me,this._timestampProvider=ye,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=me===1/0,this._bufferSize=Math.max(1,Dt),this._windowTime=Math.max(1,me)}next(Dt){const{isStopped:me,_buffer:ye,_infiniteTimeWindow:Fe,_timestampProvider:Ce,_windowTime:Ae}=this;me||(ye.push(Dt),!Fe&&ye.push(Ce.now()+Ae)),this._trimBuffer(),super.next(Dt)}_subscribe(Dt){this._throwIfClosed(),this._trimBuffer();const me=this._innerSubscribe(Dt),{_infiniteTimeWindow:ye,_buffer:Fe}=this,Ce=Fe.slice();for(let Ae=0;Ae<Ce.length&&!Dt.closed;Ae+=ye?1:2)Dt.next(Ce[Ae]);return this._checkFinalizedStatuses(Dt),me}_trimBuffer(){const{_bufferSize:Dt,_timestampProvider:me,_buffer:ye,_infiniteTimeWindow:Fe}=this,Ce=(Fe?1:2)*Dt;if(Dt<1/0&&Ce<ye.length&&ye.splice(0,ye.length-Ce),!Fe){const Ae=me.now();let Ue=0;for(let yt=1;yt<ye.length&&ye[yt]<=Ae;yt+=2)Ue=yt;Ue&&ye.splice(0,Ue+1)}}}var tt=z(3020);function pt(bt,Dt,me){let ye,Fe=!1;return bt&&"object"==typeof bt?({bufferSize:ye=1/0,windowTime:Dt=1/0,refCount:Fe=!1,scheduler:me}=bt):ye=bt??1/0,(0,tt.B)({connector:()=>new ft(ye,Dt,me),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Fe})}var ut=z(1374),kt=z(4674);function Ee(bt,Dt){return(0,kt.m)(Dt)?(0,be.w)(()=>bt,Dt):(0,be.w)(()=>bt)}var ce=z(5137),Ve=z(2181),Te=z(7142);const Ye=new q.OlP("angularfire2.auth.use-emulator"),nt=new q.OlP("angularfire2.auth.settings"),fe=new q.OlP("angularfire2.auth.tenant-id"),Qt=new q.OlP("angularfire2.auth.langugage-code"),ct=new q.OlP("angularfire2.auth.use-device-language"),Hn=new q.OlP("angularfire.auth.persistence"),un=(bt,Dt,me,ye,Fe,Ce,Ae,Ue)=>(0,ve.cc)(`${bt.name}.auth`,"AngularFireAuth",bt.name,()=>{const yt=Dt.runOutsideAngular(()=>bt.auth());if(me&&yt.useEmulator(...me),ye&&(yt.tenantId=ye),yt.languageCode=Fe,Ce&&yt.useDeviceLanguage(),Ae)for(const[dt,fr]of Object.entries(Ae))yt.settings[dt]=fr;return Ue&&yt.setPersistence(Ue),yt},[me,ye,Fe,Ce,Ae,Ue]);let Xn=(()=>{class bt{authState;idToken;user;idTokenResult;credential;constructor(me,ye,Fe,Ce,Ae,Ue,yt,dt,fr,St,Dn,en){const Fn=new Ie.x,sn=(0,Pe.of)(void 0).pipe((0,he.Q)(Ae.outsideAngular),(0,be.w)(()=>Ce.runOutsideAngular(()=>Promise.resolve().then(z.bind(z,3956)))),(0,Je.U)(()=>(0,ve.on)(me,Ce,ye)),(0,Je.U)(mn=>un(mn,Ce,Ue,dt,fr,St,yt,Dn)),pt({bufferSize:1,refCount:!1}));if((0,ue.PM)(Fe))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Pe.of)(null);else{sn.pipe((0,ut.P)()).subscribe();const mn=sn.pipe((0,be.w)(yn=>yn.getRedirectResult().then(Fr=>Fr,()=>null)),De.iC,pt({bufferSize:1,refCount:!1})),$n=sn.pipe((0,be.w)(yn=>new P.y(Fr=>({unsubscribe:Ce.runOutsideAngular(()=>yn.onAuthStateChanged(er=>Fr.next(er),er=>Fr.error(er),()=>Fr.complete()))})))),Gt=sn.pipe((0,be.w)(yn=>new P.y(Fr=>({unsubscribe:Ce.runOutsideAngular(()=>yn.onIdTokenChanged(er=>Fr.next(er),er=>Fr.error(er),()=>Fr.complete()))}))));this.authState=mn.pipe(Ee($n),(0,ce.R)(Ae.outsideAngular),(0,he.Q)(Ae.insideAngular)),this.user=mn.pipe(Ee(Gt),(0,ce.R)(Ae.outsideAngular),(0,he.Q)(Ae.insideAngular)),this.idToken=this.user.pipe((0,be.w)(yn=>yn?(0,xe.D)(yn.getIdToken()):(0,Pe.of)(null))),this.idTokenResult=this.user.pipe((0,be.w)(yn=>yn?(0,xe.D)(yn.getIdTokenResult()):(0,Pe.of)(null))),this.credential=(0,le.T)(mn,Fn,this.authState.pipe((0,Ve.h)(yn=>!yn))).pipe((0,Je.U)(yn=>yn?.user?yn:null),(0,ce.R)(Ae.outsideAngular),(0,he.Q)(Ae.insideAngular))}return(0,ve.pX)(this,sn,Ce,{spy:{apply:(mn,$n,Gt)=>{(mn.startsWith("signIn")||mn.startsWith("createUser"))&&Gt.then(yn=>Fn.next(yn))}}})}static \u0275fac=function(ye){return new(ye||bt)(q.LFG(ve.Dh),q.LFG(ve.xv,8),q.LFG(q.Lbi),q.LFG(q.R0b),q.LFG(De.HU),q.LFG(Ye,8),q.LFG(nt,8),q.LFG(fe,8),q.LFG(Qt,8),q.LFG(ct,8),q.LFG(Hn,8),q.LFG(De.Rf,8))};static \u0275prov=q.Yz7({token:bt,factory:bt.\u0275fac,providedIn:"any"})}return bt})(),Tn=(()=>{class bt{constructor(){Te.Z.registerVersion("angularfire",De.q4.full,"auth-compat")}static \u0275fac=function(ye){return new(ye||bt)};static \u0275mod=q.oAB({type:bt});static \u0275inj=q.cJS({providers:[Xn]})}return bt})()},9027:(Nt,He,z)=>{z.d(He,{ST:()=>g_,yb:()=>_v});var w=z(6814),ue=z(5879),q=z(8326),De=z(7217),ve=z(7213),Ie=z(6321),Pe=z(5592),P=z(2459),xe=z(2096),le=z(7921),he=z(9360),be=z(8251);function Je(){return(0,he.e)((i,e)=>{let n,o=!1;i.subscribe((0,be.x)(e,u=>{const c=n;n=u,o&&e.next([c,u]),o=!0}))})}var fe,Ke=z(7398),ft=z(6699),tt=z(3997),pt=z(2181),kt=(z(3956),z(3106)),Ee=z(5861),ce=z(534),Ve=z(4537),Te=z(7879),je=z(9058),Ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nt={},Qt=Qt||{},ct=Ye||self;function Hn(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function un(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Tn="closure_uid_"+(1e9*Math.random()>>>0),bt=0;function Dt(i,e,n){return i.call.apply(i.bind,arguments)}function me(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function ye(i,e,n){return(ye=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Dt:me).apply(null,arguments)}function Fe(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Ce(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(o,u,c){for(var g=Array(arguments.length-2),R=2;R<arguments.length;R++)g[R-2]=arguments[R];return e.prototype[u].apply(o,g)}}function Ae(){this.s=this.s,this.o=this.o}Ae.prototype.s=!1,Ae.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Xn(i){Object.prototype.hasOwnProperty.call(i,Tn)&&i[Tn]||(i[Tn]=++bt)}(this)},Ae.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const yt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function dt(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function fr(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(Hn(o)){const u=i.length||0,c=o.length||0;i.length=u+c;for(let g=0;g<c;g++)i[u+g]=o[g]}else i.push(o)}}function St(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}St.prototype.h=function(){this.defaultPrevented=!0};var Dn=function(){if(!ct.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ct.addEventListener("test",()=>{},e),ct.removeEventListener("test",()=>{},e)}catch{}return i}();function en(i){return/^[\s\xa0]*$/.test(i)}function Fn(){var i=ct.navigator;return i&&(i=i.userAgent)?i:""}function sn(i){return-1!=Fn().indexOf(i)}function mn(i){return mn[" "](i),i}mn[" "]=function(){};var qt,i,Gt=sn("Opera"),yn=sn("Trident")||sn("MSIE"),Fr=sn("Edge"),er=Fr||yn,Li=sn("Gecko")&&!(-1!=Fn().toLowerCase().indexOf("webkit")&&!sn("Edge"))&&!(sn("Trident")||sn("MSIE"))&&!sn("Edge"),Pi=-1!=Fn().toLowerCase().indexOf("webkit")&&!sn("Edge");function Qn(){var i=ct.document;return i?i.documentMode:void 0}e:{var _n="",Ut=(i=Fn(),Li?/rv:([^\);]+)(\)|;)/.exec(i):Fr?/Edge\/([\d\.]+)/.exec(i):yn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Pi?/WebKit\/(\S+)/.exec(i):Gt?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Ut&&(_n=Ut?Ut[1]:""),yn){var Ln=Qn();if(null!=Ln&&Ln>parseFloat(_n)){qt=String(Ln);break e}}qt=_n}var zn=ct.document&&yn&&(Qn()||parseInt(qt,10))||void 0;function wr(i,e){if(St.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Li){e:{try{mn(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:_o[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&wr.$.h.call(this)}}Ce(wr,St);var _o={2:"touch",3:"pen",4:"mouse"};wr.prototype.h=function(){wr.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var xt="closure_listenable_"+(1e6*Math.random()|0),Zi=0;function ln(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=u,this.key=++Zi,this.fa=this.ia=!1}function _r(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function pn(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function Br(i){const e={};for(const n in i)e[n]=i[n];return e}const ai="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Lr(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let c=0;c<ai.length;c++)n=ai[c],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function jr(i){this.src=i,this.g={},this.h=0}function vi(i,e){var n=e.type;if(n in i.g){var c,o=i.g[n],u=yt(o,e);(c=0<=u)&&Array.prototype.splice.call(o,u,1),c&&(_r(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function Vi(i,e,n,o){for(var u=0;u<i.length;++u){var c=i[u];if(!c.fa&&c.listener==e&&c.capture==!!n&&c.la==o)return u}return-1}jr.prototype.add=function(i,e,n,o,u){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var g=Vi(i,e,o,u);return-1<g?(e=i[g],n||(e.ia=!1)):((e=new ln(e,this.src,c,!!o,u)).ia=n,i.push(e)),e};var ir="closure_lm_"+(1e6*Math.random()|0),Or={};function os(i,e,n,o,u){if(o&&o.once)return te(i,e,n,o,u);if(Array.isArray(e)){for(var c=0;c<e.length;c++)os(i,e[c],n,o,u);return null}return n=rn(n),i&&i[xt]?i.O(e,n,un(o)?!!o.capture:!!o,u):ge(i,e,n,!1,o,u)}function ge(i,e,n,o,u,c){if(!e)throw Error("Invalid event type");var g=un(u)?!!u.capture:!!u,R=ht(i);if(R||(i[ir]=R=new jr(i)),(n=R.add(e,n,o,g,c)).proxy)return n;if(o=function ee(){const e=Ze;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)Dn||(u=g),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Re(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function te(i,e,n,o,u){if(Array.isArray(e)){for(var c=0;c<e.length;c++)te(i,e[c],n,o,u);return null}return n=rn(n),i&&i[xt]?i.P(e,n,un(o)?!!o.capture:!!o,u):ge(i,e,n,!0,o,u)}function J(i,e,n,o,u){if(Array.isArray(e))for(var c=0;c<e.length;c++)J(i,e[c],n,o,u);else o=un(o)?!!o.capture:!!o,n=rn(n),i&&i[xt]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=Vi(c=i.g[e],n,o,u))&&(_r(c[n]),Array.prototype.splice.call(c,n,1),0==c.length&&(delete i.g[e],i.h--))):i&&(i=ht(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Vi(e,n,o,u)),(n=-1<i?e[i]:null)&&ne(n))}function ne(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[xt])vi(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(Re(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=ht(e))?(vi(n,i),0==n.h&&(n.src=null,e[ir]=null)):_r(i)}}}function Re(i){return i in Or?Or[i]:Or[i]="on"+i}function Ze(i,e){if(i.fa)i=!0;else{e=new wr(e,this);var n=i.listener,o=i.la||i.src;i.ia&&ne(i),i=n.call(o,e)}return i}function ht(i){return(i=i[ir])instanceof jr?i:null}var Jt="__closure_events_fn_"+(1e9*Math.random()>>>0);function rn(i){return"function"==typeof i?i:(i[Jt]||(i[Jt]=function(e){return i.handleEvent(e)}),i[Jt])}function Tt(){Ae.call(this),this.i=new jr(this),this.S=this,this.J=null}function Ft(i,e){var n,o=i.J;if(o)for(n=[];o;o=o.J)n.push(o);if(i=i.S,o=e.type||e,"string"==typeof e)e=new St(e,i);else if(e instanceof St)e.target=e.target||i;else{var u=e;Lr(e=new St(o,i),u)}if(u=!0,n)for(var c=n.length-1;0<=c;c--){var g=e.g=n[c];u=lr(g,o,!0,e)&&u}if(u=lr(g=e.g=i,o,!0,e)&&u,u=lr(g,o,!1,e)&&u,n)for(c=0;c<n.length;c++)u=lr(g=e.g=n[c],o,!1,e)&&u}function lr(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,c=0;c<e.length;++c){var g=e[c];if(g&&!g.fa&&g.capture==n){var R=g.listener,x=g.la||g.src;g.ia&&vi(i.i,g),u=!1!==R.call(x,o)&&u}}return u&&!o.defaultPrevented}Ce(Tt,Ae),Tt.prototype[xt]=!0,Tt.prototype.removeEventListener=function(i,e,n,o){J(this,i,e,n,o)},Tt.prototype.N=function(){if(Tt.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)_r(n[o]);delete i.g[e],i.h--}}this.J=null},Tt.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},Tt.prototype.P=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var Ei=ct.JSON.stringify;function ka(){var i=Gn;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Oe=new class yo{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new st,i=>i.reset());class st{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function jt(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function Wt(i){ct.setTimeout(()=>{throw i},0)}let It,Xt=!1,Gn=new class We{constructor(){this.h=this.g=null}add(e,n){const o=Oe.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},qn=()=>{const i=ct.Promise.resolve(void 0);It=()=>{i.then(ti)}};var ti=()=>{for(var i;i=ka();){try{i.h.call(i.g)}catch(n){Wt(n)}var e=Oe;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Xt=!1};function Jr(i,e){Tt.call(this),this.h=i||1,this.g=e||ct,this.j=ye(this.qb,this),this.l=Date.now()}function as(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function vo(i,e,n){if("function"==typeof i)n&&(i=ye(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=ye(i.handleEvent,i)}return 2147483647<Number(e)?-1:ct.setTimeout(i,e||0)}function Ws(i){i.g=vo(()=>{i.g=null,i.i&&(i.i=!1,Ws(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Ce(Jr,Tt),(fe=Jr.prototype).ga=!1,fe.T=null,fe.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ft(this,"tick"),this.ga&&(as(this),this.start()))}},fe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fe.N=function(){Jr.$.N.call(this),as(this),delete this.g};class Ks extends Ae{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ws(this)}N(){super.N(),this.g&&(ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zs(i){Ae.call(this),this.h=i,this.g={}}Ce(Zs,Ae);var Qo=[];function xn(i,e,n,o){Array.isArray(n)||(n&&(Qo[0]=n.toString()),n=Qo);for(var u=0;u<n.length;u++){var c=os(e,n[u],o||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function Yo(i){pn(i.g,function(e,n){this.g.hasOwnProperty(n)&&ne(e)},i),i.g={}}function Ii(){this.g=!0}function Ji(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Nr(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var c=u[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var g=1;g<u.length;g++)u[g]=""}}}return Ei(n)}catch{return e}}(i,n)+(o?" "+o:"")})}Zs.prototype.N=function(){Zs.$.N.call(this),Yo(this)},Zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ii.prototype.Ea=function(){this.g=!1},Ii.prototype.info=function(){};var Hr={},ui=null;function Is(){return ui=ui||new Tt}function Mi(i){St.call(this,Hr.Ta,i)}function us(i){const e=Is();Ft(e,new Mi(e))}function Qs(i,e){St.call(this,Hr.STAT_EVENT,i),this.stat=e}function $r(i){const e=Is();Ft(e,new Qs(e,i))}function du(i,e){St.call(this,Hr.Ua,i),this.size=e}function li(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ct.setTimeout(function(){i()},e)}Hr.Ta="serverreachability",Ce(Mi,St),Hr.STAT_EVENT="statevent",Ce(Qs,St),Hr.Ua="timingevent",Ce(du,St);var xo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ho={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Jo(){}function Fa(){}Jo.prototype.h=null;var zr,Oi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function La(){St.call(this,"d")}function Xo(){St.call(this,"c")}function Ns(){}function wn(i,e,n,o){this.l=i,this.j=e,this.m=n,this.W=o||1,this.U=new Zs(this),this.P=Ni,this.V=new Jr(i=er?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new tr}function tr(){this.i=null,this.g="",this.h=!1}Ce(La,St),Ce(Xo,St),Ce(Ns,Jo),Ns.prototype.g=function(){return new XMLHttpRequest},Ns.prototype.i=function(){return{}},zr=new Ns;var Ni=45e3,Ys={},Gr={};function Vr(i,e,n){i.L=1,i.v=ji(wi(e)),i.s=n,i.S=!0,xs(i,null)}function xs(i,e){i.G=Date.now(),cr(i),i.A=wi(i.v);var n=i.A,o=i.W;Array.isArray(o)||(o=[String(o)]),es(n.i,"t",o),i.C=0,n=i.l.J,i.h=new tr,i.g=Ta(i.l,n?e:null,!i.s),0<i.O&&(i.M=new Ks(ye(i.Pa,i,i.g),i.O)),xn(i.U,i.g,"readystatechange",i.nb),e=i.I?Br(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),us(),function Yi(i,e,n,o,u,c){i.info(function(){if(i.g)if(c)for(var g="",R=c.split("&"),x=0;x<R.length;x++){var H=R[x].split("=");if(1<H.length){var K=H[0];H=H[1];var ie=K.split("_");g=2<=ie.length&&"type"==ie[1]?g+(K+"=")+H+"&":g+(K+"=redacted&")}}else g=null;else g=c;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+g})}(i.j,i.u,i.A,i.m,i.W,i.s)}function ks(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function ws(i,e,n){let u,o=!0;for(;!i.J&&i.C<n.length;){if(u=Ts(i,n),u==Gr){4==e&&(i.o=4,$r(14),o=!1),Ji(i.j,i.m,null,"[Incomplete Response]");break}if(u==Ys){i.o=4,$r(15),Ji(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}Ji(i.j,i.m,u,null),Io(i,u)}ks(i)&&u!=Gr&&u!=Ys&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,$r(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),To(e),e.M=!0,$r(11))):(Ji(i.j,i.m,n,"[Invalid Chunked Response]"),qr(i),Sn(i))}function Ts(i,e){var n=i.C,o=e.indexOf("\n",n);return-1==o?Gr:(n=Number(e.substring(n,o)),isNaN(n)?Ys:(o+=1)+n>e.length?Gr:(e=e.slice(o,o+n),i.C=o+n,e))}function cr(i){i.Y=Date.now()+i.P,vt(i,i.P)}function vt(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=li(ye(i.lb,i),e)}function cn(i){i.B&&(ct.clearTimeout(i.B),i.B=null)}function Sn(i){0==i.l.H||i.J||gi(i.l,i)}function qr(i){cn(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,as(i.V),Yo(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Io(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||As(n.i,i)))if(!i.K&&As(n.i,i)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;hs(n),Vo(n)}fu(n),$r(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=li(ye(n.ib,n),6e3));if(1>=Ds(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Uo(n,11)}else if((i.K||n.g==i)&&hs(n),!en(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let H=u[e];if(n.V=H[0],H=H[1],2==n.H)if("c"==H[0]){n.K=H[1],n.pa=H[2];const K=H[3];null!=K&&(n.ra=K,n.l.info("VER="+n.ra));const ie=H[4];null!=ie&&(n.Ga=ie,n.l.info("SVER="+n.Ga));const we=H[5];null!=we&&"number"==typeof we&&0<we&&(n.L=o=1.5*we,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const ze=i.g;if(ze){const mt=ze.g?ze.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mt){var c=o.i;c.g||-1==mt.indexOf("spdy")&&-1==mt.indexOf("quic")&&-1==mt.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(fo(c,c.h),c.h=null))}if(o.F){const wt=ze.g?ze.g.getResponseHeader("X-HTTP-Session-Id"):null;wt&&(o.Da=wt,nr(o.I,o.F,wt))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var g=i;if((o=n).wa=ol(o,o.J?o.pa:null,o.Y),g.K){ts(o.i,g);var R=g,x=o.L;x&&R.setTimeout(x),R.B&&(cn(R),cr(R)),o.g=g}else wa(o);0<n.j.length&&Bs(n)}else"stop"!=H[0]&&"close"!=H[0]||Uo(n,7);else 3==n.H&&("stop"==H[0]||"close"==H[0]?"stop"==H[0]?Uo(n,7):Ea(n):"noop"!=H[0]&&n.h&&n.h.Aa(H),n.A=0)}us()}catch{}}function dr(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Hn(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function Js(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Hn(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function ci(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Hn(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length,c=0;c<u;c++)e.call(void 0,o[c],n&&n[c],i)}(fe=wn.prototype).setTimeout=function(i){this.P=i},fe.nb=function(i){i=i.target;const e=this.M;e&&3==Ci(i)?e.l():this.Pa(i)},fe.Pa=function(i){try{if(i==this.g)e:{const K=Ci(this.g);var e=this.g.Ia();if(this.g.da(),!(3>K)&&(3!=K||er||this.g&&(this.h.h||this.g.ja()||ds(this.g)))){this.J||4!=K||7==e||us(),cn(this);var n=this.g.da();this.ca=n;t:if(ks(this)){var o=ds(this.g);i="";var u=o.length,c=4==Ci(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){qr(this),Sn(this);var g="";break t}this.h.i=new ct.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:c&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,g=this.h.g}else g=this.g.ja();if(this.i=200==n,function Eo(i,e,n,o,u,c,g){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+c+" "+g})}(this.j,this.u,this.A,this.m,this.W,K,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var R,x=this.g;if((R=x.g?x.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!en(R)){var H=R;break t}}H=null}if(!(n=H)){this.i=!1,this.o=3,$r(12),qr(this),Sn(this);break e}Ji(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Io(this,n)}this.S?(ws(this,K,g),er&&this.i&&3==K&&(xn(this.U,this.V,"tick",this.mb),this.V.start())):(Ji(this.j,this.m,g,null),Io(this,g)),4==K&&qr(this),this.i&&!this.J&&(4==K?gi(this.l,this):(this.i=!1,cr(this)))}else(function $a(i){const e={};i=(i.g&&2<=Ci(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<i.length;o++){if(en(i[o]))continue;var n=jt(i[o]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const c=e[u]||[];e[u]=c,c.push(n)}!function Qi(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<g.indexOf("Unknown SID")?(this.o=3,$r(12)):(this.o=0,$r(13)),qr(this),Sn(this)}}}catch{}},fe.mb=function(){if(this.g){var i=Ci(this.g),e=this.g.ja();this.C<e.length&&(cn(this),ws(this,i,e),this.i&&4!=i&&cr(this))}},fe.cancel=function(){this.J=!0,qr(this)},fe.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function co(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(us(),$r(17)),qr(this),this.o=2,Sn(this)):vt(this,this.Y-i)};var Ui=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ht(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Ht){this.h=i.h,ea(this,i.j),this.s=i.s,this.g=i.g,Ur(this,i.m),this.l=i.l;var e=i.i,n=new ta;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),br(this,n),this.o=i.o}else i&&(e=String(i).match(Ui))?(this.h=!1,ea(this,e[1]||"",!0),this.s=di(e[2]||""),this.g=di(e[3]||"",!0),Ur(this,e[4]),this.l=di(e[5]||"",!0),br(this,e[6]||"",!0),this.o=di(e[7]||"")):(this.h=!1,this.i=new ta(null,this.h))}function wi(i){return new Ht(i)}function ea(i,e,n){i.j=n?di(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Ur(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function br(i,e,n){e instanceof ta?(i.i=e,function Xs(i,e){e&&!i.j&&(ls(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(na(this,o),es(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=Fs(e,Hi)),i.i=new ta(e,i.h))}function nr(i,e,n){i.i.set(e,n)}function ji(i){return nr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function di(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Fs(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,ko),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function ko(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Ht.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Fs(e,Cs,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Fs(e,Cs,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(Fs(n,"/"==n.charAt(0)?Ls:Xi,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Fs(n,An)),i.join("")};var Cs=/[#\/\?@]/g,Xi=/[#\?:]/g,Ls=/[#\?]/g,Hi=/[#\?@]/g,An=/#/g;function ta(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function ls(i){i.g||(i.g=new Map,i.h=0,i.i&&function Bi(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var c=i[n].substring(0,o);u=i[n].substring(o+1)}else c=i[n];e(c,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function na(i,e){ls(i),e=hi(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function cs(i,e){return ls(i),e=hi(i,e),i.g.has(e)}function es(i,e,n){na(i,e),0<n.length&&(i.i=null,i.g.set(hi(i,e),dt(n)),i.h+=n.length)}function hi(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function xu(i){this.l=i||ri,i=ct.PerformanceNavigationTiming?0<(i=ct.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ct.g&&ct.g.Ka&&ct.g.Ka()&&ct.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(fe=ta.prototype).add=function(i,e){ls(this),this.i=null,i=hi(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},fe.forEach=function(i,e){ls(this),this.g.forEach(function(n,o){n.forEach(function(u){i.call(e,u,o,this)},this)},this)},fe.ta=function(){ls(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=i[o];for(let c=0;c<u.length;c++)n.push(e[o])}return n},fe.Z=function(i){ls(this);let e=[];if("string"==typeof i)cs(this,i)&&(e=e.concat(this.g.get(hi(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},fe.set=function(i,e){return ls(this),this.i=null,cs(this,i=hi(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},fe.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const c=encodeURIComponent(String(o)),g=this.Z(o);for(o=0;o<g.length;o++){var u=c;""!==g[o]&&(u+="="+encodeURIComponent(String(g[o]))),i.push(u)}}return this.i=i.join("&")};var ri=10;function hr(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Ds(i){return i.h?1:i.g?i.g.size:0}function As(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function fo(i,e){i.g?i.g.add(e):i.h=e}function ts(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function _a(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return dt(i.i)}xu.prototype.cancel=function(){if(this.i=_a(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var Va=class{stringify(i){return ct.JSON.stringify(i,void 0)}parse(i){return ct.JSON.parse(i,void 0)}};function Ti(){this.g=new Va}function Ua(i,e,n){const o=n||"";try{dr(i,function(u,c){let g=u;un(u)&&(g=Ei(u)),e.push(o+c+"="+encodeURIComponent(g))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function ns(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function yr(i){this.l=i.ec||null,this.j=i.ob||!1}function ya(i,e){Tt.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=va,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ce(yr,Jo),yr.prototype.g=function(){return new ya(this.l,this.j)},yr.prototype.i=function(i){return function(){return i}}({}),Ce(ya,Tt);var va=0;function pr(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function Vs(i){i.readyState=4,i.l=null,i.j=null,i.A=null,ra(i)}function ra(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(fe=ya.prototype).open=function(i,e){if(this.readyState!=va)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,ra(this)},fe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||ct).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vs(this)),this.readyState=va},fe.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,ra(this)),this.g&&(this.readyState=3,ra(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ct.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pr(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},fe.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Vs(this):ra(this),3==this.readyState&&pr(this)}},fe.Za=function(i){this.g&&(this.response=this.responseText=i,Vs(this))},fe.Ya=function(i){this.g&&(this.response=i,Vs(this))},fe.ka=function(){this.g&&Vs(this)},fe.setRequestHeader=function(i,e){this.v.append(i,e)},fe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},fe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(ya.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var ku=ct.JSON.parse;function vr(i){Tt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ja,this.L=this.M=!1}Ce(vr,Tt);var ja="",Fu=/^https?$/i,ia=["POST","PUT"];function sa(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Fo(i),Us(i)}function Fo(i){i.F||(i.F=!0,Ft(i,"complete"),Ft(i,"error"))}function Lo(i){if(i.h&&typeof Qt<"u"&&(!i.C[1]||4!=Ci(i)||2!=i.da()))if(i.v&&4==Ci(i))vo(i.La,0,i);else if(Ft(i,"readystatechange"),4==Ci(i)){i.h=!1;try{const g=i.da();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===g){var u=String(i.I).match(Ui)[1]||null;!u&&ct.self&&ct.self.location&&(u=ct.self.location.protocol.slice(0,-1)),o=!Fu.test(u?u.toLowerCase():"")}n=o}if(n)Ft(i,"complete"),Ft(i,"success");else{i.m=6;try{var c=2<Ci(i)?i.g.statusText:""}catch{c=""}i.j=c+" ["+i.da()+"]",Fo(i)}}finally{Us(i)}}}function Us(i,e){if(i.g){Ha(i);const n=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||Ft(i,"ready");try{n.onreadystatechange=o}catch{}}}function Ha(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(ct.clearTimeout(i.A),i.A=null)}function Ci(i){return i.g?i.g.readyState:0}function ds(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case ja:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function sr(i){let e="";return pn(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function fi(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=sr(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):nr(i,e,n))}function bs(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function pi(i){this.Ga=0,this.j=[],this.l=new Ii,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=bs("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=bs("baseRetryDelayMs",5e3,i),this.hb=bs("retryDelaySeedMs",1e4,i),this.eb=bs("forwardChannelMaxRetries",2,i),this.xa=bs("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new xu(i&&i.concurrentRequestLimit),this.Ja=new Ti,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ea(i){if(oa(i),3==i.H){var e=i.W++,n=wi(i.I);if(nr(n,"SID",i.K),nr(n,"RID",e),nr(n,"TYPE","terminate"),eo(i,n),(e=new wn(i,i.l,e)).L=2,e.v=ji(wi(n)),n=!1,ct.navigator&&ct.navigator.sendBeacon)try{n=ct.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&ct.Image&&((new Image).src=e.v,n=!0),n||(e.g=Ta(e.l,null),e.g.ha(e.v)),e.G=Date.now(),cr(e)}Ss(i)}function Vo(i){i.g&&(To(i),i.g.cancel(),i.g=null)}function oa(i){Vo(i),i.u&&(ct.clearTimeout(i.u),i.u=null),hs(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ct.clearTimeout(i.m),i.m=null)}function Bs(i){if(!hr(i.i)&&!i.m){i.m=!0;var e=i.Na;It||qn(),Xt||(It(),Xt=!0),Gn.add(e,i),i.C=0}}function wo(i,e){var n;n=e?e.m:i.W++;const o=wi(i.I);nr(o,"SID",i.K),nr(o,"RID",n),nr(o,"AID",i.V),eo(i,o),i.o&&i.s&&fi(o,i.o,i.s),n=new wn(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=za(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),fo(i.i,n),Vr(n,o,e)}function eo(i,e){i.na&&pn(i.na,function(n,o){nr(e,o,n)}),i.h&&dr({},function(n,o){nr(e,o,n)})}function za(i,e,n){n=Math.min(i.j.length,n);var o=i.h?ye(i.h.Va,i.h,i):null;e:{var u=i.j;let c=-1;for(;;){const g=["count="+n];-1==c?0<n?(c=u[0].g,g.push("ofs="+c)):c=0:g.push("ofs="+c);let R=!0;for(let x=0;x<n;x++){let H=u[x].g;const K=u[x].map;if(H-=c,0>H)c=Math.max(0,u[x].g-100),R=!1;else try{Ua(K,g,"req"+H+"_")}catch{o&&o(K)}}if(R){o=g.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,o}function wa(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;It||qn(),Xt||(It(),Xt=!0),Gn.add(e,i),i.A=0}}function fu(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=li(ye(i.Ma,i),Wr(i,i.A)),i.A++,0))}function To(i){null!=i.B&&(ct.clearTimeout(i.B),i.B=null)}function aa(i){i.g=new wn(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=wi(i.wa);nr(e,"RID","rpc"),nr(e,"SID",i.K),nr(e,"AID",i.V),nr(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&nr(e,"TO",i.qa),nr(e,"TYPE","xmlhttp"),eo(i,e),i.o&&i.s&&fi(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.v=ji(wi(e)),n.s=null,n.S=!0,xs(n,i)}function hs(i){null!=i.v&&(ct.clearTimeout(i.v),i.v=null)}function gi(i,e){var n=null;if(i.g==e){hs(i),To(i),i.g=null;var o=2}else{if(!As(i.i,e))return;n=e.F,ts(i.i,e),o=1}if(0!=i.H)if(e.i)if(1==o){n=e.s?e.s.length:0,e=Date.now()-e.G;var u=i.C;Ft(o=Is(),new du(o,n)),Bs(i)}else wa(i);else if(3==(u=e.o)||0==u&&0<e.ca||!(1==o&&function Ia(i,e){return!(Ds(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=li(ye(i.Na,i,e),Wr(i,i.C)),i.C++,0)))}(i,e)||2==o&&fu(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:Uo(i,5);break;case 4:Uo(i,10);break;case 3:Uo(i,6);break;default:Uo(i,2)}}function Wr(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function Uo(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var o=ye(i.pb,i);n||(n=new Ht("//www.google.com/images/cleardot.gif"),ct.location&&"http"==ct.location.protocol||ea(n,"https"),ji(n)),function Ba(i,e){const n=new Ii;if(ct.Image){const o=new Image;o.onload=Fe(ns,n,o,"TestLoadImage: loaded",!0,e),o.onerror=Fe(ns,n,o,"TestLoadImage: error",!1,e),o.onabort=Fe(ns,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=Fe(ns,n,o,"TestLoadImage: timeout",!1,e),ct.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else $r(2);i.H=0,i.h&&i.h.za(e),Ss(i),oa(i)}function Ss(i){if(i.H=0,i.ma=[],i.h){const e=_a(i.i);(0!=e.length||0!=i.j.length)&&(fr(i.ma,e),fr(i.ma,i.j),i.i.i.length=0,dt(i.j),i.j.length=0),i.h.ya()}}function ol(i,e,n){var o=n instanceof Ht?wi(n):new Ht(n);if(""!=o.g)e&&(o.g=e+"."+o.g),Ur(o,o.m);else{var u=ct.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var c=new Ht(null);o&&ea(c,o),e&&(c.g=e),u&&Ur(c,u),n&&(c.l=n),o=c}return e=i.Da,(n=i.F)&&e&&nr(o,n,e),nr(o,"VER",i.ra),eo(i,o),o}function Ta(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vr(n&&i.Ha&&!i.va?new yr({ob:!0}):i.va)).Oa(i.J),e}function Ga(){}function pu(){if(yn&&!(10<=Number(zn)))throw Error("Environmental error: no available transport.")}function rs(i,e){Tt.call(this),this.g=new pi(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!en(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!en(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new to(this)}function ua(i){La.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Lu(){Xo.call(this),this.status=1}function to(i){this.g=i}function $i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function qa(i,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)o[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)o[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var c=i.g[3],g=(e=i.g[0])+(c^(n=i.g[1])&((u=i.g[2])^c))+o[0]+3614090360&4294967295;g=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=n+(g<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[1]+3905402710&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[3]+3250441966&4294967295)<<22&4294967295|g>>>10))+((g=e+(c^n&(u^c))+o[4]+4118548399&4294967295)<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[5]+1200080426&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[7]+4249261313&4294967295)<<22&4294967295|g>>>10))+((g=e+(c^n&(u^c))+o[8]+1770035416&4294967295)<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[9]+2336552879&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[11]+2304563134&4294967295)<<22&4294967295|g>>>10))+((g=e+(c^n&(u^c))+o[12]+1804603682&4294967295)<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[13]+4254626195&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[15]+1236535329&4294967295)<<22&4294967295|g>>>10))+((g=e+(u^c&(n^u))+o[1]+4129170786&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[11]+643717713&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[0]+3921069994&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^c&(n^u))+o[5]+3593408605&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[15]+3634488961&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[4]+3889429448&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^c&(n^u))+o[9]+568446438&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[3]+4107603335&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[8]+1163531501&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^c&(n^u))+o[13]+2850285829&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[7]+1735328473&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[12]+2368359562&4294967295)<<20&4294967295|g>>>12))+((g=e+(n^u^c)+o[5]+4294588738&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[8]+2272392833&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[14]+4259657740&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^c)+o[1]+2763975236&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[4]+1272893353&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[10]+3200236656&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^c)+o[13]+681279174&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[0]+3936430074&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[6]+76029189&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^c)+o[9]+3654602809&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[12]+3873151461&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[15]+530742520&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[2]+3299628645&4294967295)<<23&4294967295|g>>>9))+((g=e+(u^(n|~c))+o[0]+4096336452&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[7]+1126891415&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(c|~n))+o[14]+2878612391&4294967295)<<15&4294967295|g>>>17))+((g=n+(c^(u|~e))+o[5]+4237533241&4294967295)<<21&4294967295|g>>>11))+((g=e+(u^(n|~c))+o[12]+1700485571&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[3]+2399980690&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(c|~n))+o[10]+4293915773&4294967295)<<15&4294967295|g>>>17))+((g=n+(c^(u|~e))+o[1]+2240044497&4294967295)<<21&4294967295|g>>>11))+((g=e+(u^(n|~c))+o[8]+1873313359&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[15]+4264355552&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(c|~n))+o[6]+2734768916&4294967295)<<15&4294967295|g>>>17))+((g=n+(c^(u|~e))+o[13]+1309151649&4294967295)<<21&4294967295|g>>>11))+((c=(e=n+((g=e+(u^(n|~c))+o[4]+4149444226&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[11]+3174756917&4294967295)<<10&4294967295|g>>>22))^((u=c+((g=u+(e^(c|~n))+o[2]+718787259&4294967295)<<15&4294967295|g>>>17))|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(g<<21&4294967295|g>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+c&4294967295}function S(i,e){this.h=e;for(var n=[],o=!0,u=i.length-1;0<=u;u--){var c=0|i[u];o&&c==e||(n[u]=c,o=!1)}this.g=n}(fe=vr.prototype).Oa=function(i){this.M=i},fe.ha=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():zr.g(),this.C=function hu(i){return i.h||(i.h=i.i())}(this.u?this.u:zr),this.g.onreadystatechange=ye(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(c){return void sa(this,c)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const c of o.keys())n.set(c,o.get(c))}o=Array.from(n.keys()).find(c=>"content-type"==c.toLowerCase()),u=ct.FormData&&i instanceof ct.FormData,!(0<=yt(ia,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,g]of n)this.g.setRequestHeader(c,g);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ha(this),0<this.B&&((this.L=function sl(i){return yn&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ye(this.ua,this)):this.A=vo(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){sa(this,c)}},fe.ua=function(){typeof Qt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ft(this,"timeout"),this.abort(8))},fe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Ft(this,"complete"),Ft(this,"abort"),Us(this))},fe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Us(this,!0)),vr.$.N.call(this)},fe.La=function(){this.s||(this.G||this.v||this.l?Lo(this):this.kb())},fe.kb=function(){Lo(this)},fe.isActive=function(){return!!this.g},fe.da=function(){try{return 2<Ci(this)?this.g.status:-1}catch{return-1}},fe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},fe.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),ku(e)}},fe.Ia=function(){return this.m},fe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(fe=pi.prototype).ra=8,fe.H=1,fe.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new wn(this,this.l,i);let c=this.s;if(this.U&&(c?(c=Br(c),Lr(c,this.U)):c=this.U),null!==this.o||this.O||(u.I=c,c=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=za(this,u,e),nr(n=wi(this.I),"RID",i),nr(n,"CVER",22),this.F&&nr(n,"X-HTTP-Session-Id",this.F),eo(this,n),c&&(this.O?e="headers="+encodeURIComponent(String(sr(c)))+"&"+e:this.o&&fi(n,this.o,c)),fo(this.i,u),this.bb&&nr(n,"TYPE","init"),this.P?(nr(n,"$req",e),nr(n,"SID","null"),u.aa=!0,Vr(u,n,null)):Vr(u,n,e),this.H=2}}else 3==this.H&&(i?wo(this,i):0==this.j.length||hr(this.i)||wo(this))},fe.Ma=function(){if(this.u=null,aa(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=li(ye(this.jb,this),i)}},fe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,$r(10),Vo(this),aa(this))},fe.ib=function(){null!=this.v&&(this.v=null,Vo(this),fu(this),$r(19))},fe.pb=function(i){i?(this.l.info("Successfully pinged google.com"),$r(2)):(this.l.info("Failed to ping google.com"),$r(1))},fe.isActive=function(){return!!this.h&&this.h.isActive(this)},(fe=Ga.prototype).Ba=function(){},fe.Aa=function(){},fe.za=function(){},fe.ya=function(){},fe.isActive=function(){return!0},fe.Va=function(){},pu.prototype.g=function(i,e){return new rs(i,e)},Ce(rs,Tt),rs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;$r(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=ol(i,null,i.Y),Bs(i)},rs.prototype.close=function(){Ea(this.g)},rs.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=Ei(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&Bs(e)},rs.prototype.N=function(){this.g.h=null,delete this.j,Ea(this.g),delete this.g,rs.$.N.call(this)},Ce(ua,La),Ce(Lu,Xo),Ce(to,Ga),to.prototype.Ba=function(){Ft(this.g,"a")},to.prototype.Aa=function(i){Ft(this.g,new ua(i))},to.prototype.za=function(i){Ft(this.g,new Lu)},to.prototype.ya=function(){Ft(this.g,"b")},Ce($i,function al(){this.blockSize=-1}),$i.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},$i.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,o=this.m,u=this.h,c=0;c<e;){if(0==u)for(;c<=n;)qa(this,i,c),c+=this.blockSize;if("string"==typeof i){for(;c<e;)if(o[u++]=i.charCodeAt(c++),u==this.blockSize){qa(this,o),u=0;break}}else for(;c<e;)if(o[u++]=i[c++],u==this.blockSize){qa(this,o),u=0;break}}this.h=u,this.i+=e},$i.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)i[n++]=this.g[e]>>>o&255;return i};var W={};function L(i){return-128<=i&&128>i?function $n(i,e){var n=W;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new S([0|e],0>e?-1:0)}):new S([0|i],0>i?-1:0)}function G(i){if(isNaN(i)||!isFinite(i))return M;if(0>i)return $e(G(-i));for(var e=[],n=1,o=0;i>=n;o++)e[o]=i/n|0,n*=Ge;return new S(e,0)}var Ge=4294967296,M=L(0),k=L(1),b=L(16777216);function B(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function X(i){return-1==i.h}function $e(i){for(var e=i.g.length,n=[],o=0;o<e;o++)n[o]=~i.g[o];return new S(n,~i.h).add(k)}function ot(i,e){return i.add($e(e))}function nn(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Wn(i,e){this.g=i,this.h=e}function Kr(i,e){if(B(e))throw Error("division by zero");if(B(i))return new Wn(M,M);if(X(i))return e=Kr($e(i),e),new Wn($e(e.g),$e(e.h));if(X(e))return e=Kr(i,$e(e)),new Wn($e(e.g),e.h);if(30<i.g.length){if(X(i)||X(e))throw Error("slowDivide_ only works with positive integers.");for(var n=k,o=e;0>=o.X(i);)n=Di(n),o=Di(o);var u=Xr(n,1),c=Xr(o,1);for(o=Xr(o,2),n=Xr(n,2);!B(o);){var g=c.add(o);0>=g.X(i)&&(u=u.add(n),c=g),o=Xr(o,1),n=Xr(n,1)}return e=ot(i,u.R(e)),new Wn(u,e)}for(u=M;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),g=(c=G(n)).R(e);X(g)||0<g.X(i);)g=(c=G(n-=o)).R(e);B(c)&&(c=k),u=u.add(c),i=ot(i,g)}return new Wn(u,i)}function Di(i){for(var e=i.g.length+1,n=[],o=0;o<e;o++)n[o]=i.D(o)<<1|i.D(o-1)>>>31;return new S(n,i.h)}function Xr(i,e){var n=e>>5;e%=32;for(var o=i.g.length-n,u=[],c=0;c<o;c++)u[c]=0<e?i.D(c+n)>>>e|i.D(c+n+1)<<32-e:i.D(c+n);return new S(u,i.h)}(fe=S.prototype).ea=function(){if(X(this))return-$e(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);i+=(0<=o?o:Ge+o)*e,e*=Ge}return i},fe.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(B(this))return"0";if(X(this))return"-"+$e(this).toString(i);for(var e=G(Math.pow(i,6)),n=this,o="";;){var u=Kr(n,e).g,c=((0<(n=ot(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(B(n=u))return c+o;for(;6>c.length;)c="0"+c;o=c+o}},fe.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},fe.X=function(i){return X(i=ot(this,i))?-1:B(i)?0:1},fe.abs=function(){return X(this)?$e(this):this},fe.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0,u=0;u<=e;u++){var c=o+(65535&this.D(u))+(65535&i.D(u)),g=(c>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);o=g>>>16,n[u]=(g&=65535)<<16|(c&=65535)}return new S(n,-2147483648&n[n.length-1]?-1:0)},fe.R=function(i){if(B(this)||B(i))return M;if(X(this))return X(i)?$e(this).R($e(i)):$e($e(this).R(i));if(X(i))return $e(this.R($e(i)));if(0>this.X(b)&&0>i.X(b))return G(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var u=0;u<i.g.length;u++){var c=this.D(o)>>>16,g=65535&this.D(o),R=i.D(u)>>>16,x=65535&i.D(u);n[2*o+2*u]+=g*x,nn(n,2*o+2*u),n[2*o+2*u+1]+=c*x,nn(n,2*o+2*u+1),n[2*o+2*u+1]+=g*R,nn(n,2*o+2*u+1),n[2*o+2*u+2]+=c*R,nn(n,2*o+2*u+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new S(n,0)},fe.gb=function(i){return Kr(this,i).h},fe.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&i.D(o);return new S(n,this.h&i.h)},fe.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|i.D(o);return new S(n,this.h|i.h)},fe.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^i.D(o);return new S(n,this.h^i.h)},pu.prototype.createWebChannel=pu.prototype.g,rs.prototype.send=rs.prototype.u,rs.prototype.open=rs.prototype.m,rs.prototype.close=rs.prototype.close,xo.NO_ERROR=0,xo.TIMEOUT=8,xo.HTTP_ERROR=6,ho.COMPLETE="complete",Fa.EventType=Oi,Oi.OPEN="a",Oi.CLOSE="b",Oi.ERROR="c",Oi.MESSAGE="d",Tt.prototype.listen=Tt.prototype.O,vr.prototype.listenOnce=vr.prototype.P,vr.prototype.getLastError=vr.prototype.Sa,vr.prototype.getLastErrorCode=vr.prototype.Ia,vr.prototype.getStatus=vr.prototype.da,vr.prototype.getResponseJson=vr.prototype.Wa,vr.prototype.getResponseText=vr.prototype.ja,vr.prototype.send=vr.prototype.ha,vr.prototype.setWithCredentials=vr.prototype.Oa,$i.prototype.digest=$i.prototype.l,$i.prototype.reset=$i.prototype.reset,$i.prototype.update=$i.prototype.j,S.prototype.add=S.prototype.add,S.prototype.multiply=S.prototype.R,S.prototype.modulo=S.prototype.gb,S.prototype.compare=S.prototype.X,S.prototype.toNumber=S.prototype.ea,S.prototype.toString=S.prototype.toString,S.prototype.getBits=S.prototype.D,S.fromNumber=G,S.fromString=function de(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return $e(de(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=G(Math.pow(e,8)),o=M,u=0;u<i.length;u+=8){var c=Math.min(8,i.length-u),g=parseInt(i.substring(u,u+c),e);8>c?(c=G(Math.pow(e,c)),o=o.R(c).add(G(g))):o=(o=o.R(n)).add(G(g))}return o};var zi=nt.createWebChannelTransport=function(){return new pu},Ca=nt.getStatEventTarget=function(){return Is()},Gi=nt.ErrorCode=xo,Co=nt.EventType=ho,Vu=nt.Event=Hr,Tr=nt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},gu=nt.FetchXmlHttpFactory=yr,Da=nt.WebChannel=Fa,Rs=nt.XhrIo=vr,_d=nt.Md5=$i,Wa=nt.Integer=S;const mu="@firebase/firestore";class bn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");let Do="10.5.2";const qi=new Te.Yd("@firebase/firestore");function js(){return qi.logLevel}function at(i,...e){if(qi.logLevel<=Te.in.DEBUG){const n=e.map(_u);qi.debug(`Firestore (${Do}): ${i}`,...n)}}function gr(i,...e){if(qi.logLevel<=Te.in.ERROR){const n=e.map(_u);qi.error(`Firestore (${Do}): ${i}`,...n)}}function fs(i,...e){if(qi.logLevel<=Te.in.WARN){const n=e.map(_u);qi.warn(`Firestore (${Do}): ${i}`,...n)}}function _u(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Lt(i="Unexpected state"){const e=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: `+i;throw gr(e),new Error(e)}function Bt(i,e){i||Lt()}function At(i,e){return i}const qe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qe extends je.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Cr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Ka{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Uu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bn.UNAUTHENTICATED))}shutdown(){}}class ul{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Za{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const c=H=>this.i!==u?(u=this.i,n(H)):Promise.resolve();let g=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Cr,e.enqueueRetryable(()=>c(this.currentUser))};const R=()=>{const H=g;e.enqueueRetryable((0,Ee.Z)(function*(){yield H.promise,yield c(o.currentUser)}))},x=H=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=H,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(H=>x(H)),setTimeout(()=>{if(!this.auth){const H=this.t.getImmediate({optional:!0});H?x(H):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Cr)}},0),R()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Bt("string"==typeof o.accessToken),new Ka(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Bt(null===e||"string"==typeof e),new bn(e)}}class Ql{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Hs{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new Ql(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ac{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const o=c=>{null!=c.error&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const g=c.token!==this.R;return this.R=c.token,at("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>o(c))};const u=c=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>u(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?u(c):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Bt("string"==typeof n.token),this.R=n.token,new Bu(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Yn(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class ii{static newId(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=Yn(40);for(let c=0;c<u.length;++c)o.length<20&&u[c]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[c]%62))}return o}}function En(i,e){return i<e?-1:i>e?1:0}function Kn(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function Rl(i){return i+"\0"}class Er{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Qe(qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Qe(qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Qe(qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qe(qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Er.fromMillis(Date.now())}static fromDate(e){return Er.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new Er(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?En(this.nanoseconds,e.nanoseconds):En(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class $t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new $t(e)}static min(){return new $t(new Er(0,0))}static max(){return new $t(new Er(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Qa{constructor(e,n,o){void 0===n?n=0:n>e.length&&Lt(),void 0===o?o=e.length-n:o>e.length-n&&Lt(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===Qa.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qa?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const c=e.get(u),g=n.get(u);if(c<g)return-1;if(c>g)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Un extends Qa{construct(e,n,o){return new Un(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new Qe(qe.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new Un(n)}static emptyPath(){return new Un([])}}const yd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xr extends Qa{construct(e,n,o){return new xr(e,n,o)}static isValidIdentifier(e){return yd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xr(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const c=()=>{if(0===o.length)throw new Qe(qe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let g=!1;for(;u<e.length;){const R=e[u];if("\\"===R){if(u+1===e.length)throw new Qe(qe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[u+1];if("\\"!==x&&"."!==x&&"`"!==x)throw new Qe(qe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=x,u+=2}else"`"===R?(g=!g,u++):"."!==R||g?(o+=R,u++):(c(),u++)}if(c(),g)throw new Qe(qe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xr(n)}static emptyPath(){return new xr([])}}class Et{constructor(e){this.path=e}static fromPath(e){return new Et(Un.fromString(e))}static fromName(e){return new Et(Un.fromString(e).popFirst(5))}static empty(){return new Et(Un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Un.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Un.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Et(new Un(e.slice()))}}class Zr{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function $s(i){return i.fields.find(e=>2===e.kind)}function Aa(i){return i.fields.filter(e=>2!==e.kind)}Zr.UNKNOWN_ID=-1;class Ai{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ya{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ya(0,Ps.min())}}function Pl(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=$t.fromTimestamp(1e9===o?new Er(n+1,0):new Er(n,o));return new Ps(u,Et.empty(),e)}function cl(i){return new Ps(i.readTime,i.key,-1)}class Ps{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new Ps($t.min(),Et.empty(),-1)}static max(){return new Ps($t.max(),Et.empty(),-1)}}function dl(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=Et.comparator(i.documentKey,e.documentKey),0!==n?n:En(i.largestBatchId,e.largestBatchId))}const bc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class D{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function O(i){return I.apply(this,arguments)}function I(){return I=(0,Ee.Z)(function*(i){if(i.code!==qe.FAILED_PRECONDITION||i.message!==bc)throw i;at("LocalStore","Unexpectedly lost primary lease")}),I.apply(this,arguments)}class C{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new C((o,u)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(o,u)},this.catchCallback=c=>{this.wrapFailure(n,c).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof C?n:C.resolve(n)}catch(n){return C.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):C.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):C.reject(n)}static resolve(e){return new C((n,o)=>{n(e)})}static reject(e){return new C((n,o)=>{o(e)})}static waitFor(e){return new C((n,o)=>{let u=0,c=0,g=!1;e.forEach(R=>{++u,R.next(()=>{++c,g&&c===u&&n()},x=>o(x))}),g=!0,c===u&&n()})}static or(e){let n=C.resolve(!1);for(const o of e)n=n.next(u=>u?C.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,c)=>{o.push(n.call(this,u,c))}),this.waitFor(o)}static mapArray(e,n){return new C((o,u)=>{const c=e.length,g=new Array(c);let R=0;for(let x=0;x<c;x++){const H=x;n(e[H]).next(K=>{g[H]=K,++R,R===c&&o(g)},K=>u(K))}})}static doWhile(e,n){return new C((o,u)=>{const c=()=>{!0===e()?n().next(()=>{c()},u):o()};c()})}}class V{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Cr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Be(e,n.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=Pn(o.target.error);this.V.reject(new Be(e,u))}}static open(e,n,o,u){try{return new V(n,e.transaction(u,o))}catch(c){throw new Be(n,c)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(at("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Rt(n)}}class Z{constructor(e,n,o){this.name=e,this.version=n,this.p=o,12.2===Z.S((0,je.z$)())&&gr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return at("SimpleDb","Removing database:",e),dn(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,je.hl)())return!1;if(Z.C())return!0;const e=(0,je.z$)(),n=Z.S(e),o=0<n&&n<10,u=Z.v(e),c=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var n=this;return(0,Ee.Z)(function*(){return n.db||(at("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const c=indexedDB.open(n.name,n.version);c.onsuccess=g=>{o(g.target.result)},c.onblocked=()=>{u(new Be(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=g=>{const R=g.target.error;u("VersionError"===R.name?new Qe(qe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new Qe(qe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new Be(e,R))},c.onupgradeneeded=g=>{at("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',g.oldVersion),n.p.N(g.target.result,c.transaction,g.oldVersion,n.version).next(()=>{at("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=o=>n.B(o)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var c=this;return(0,Ee.Z)(function*(){const g="readonly"===n;let R=0;for(;;){++R;try{c.db=yield c.O(e);const x=V.open(c.db,e,g?"readonly":"readwrite",o),H=u(x).next(K=>(x.g(),K)).catch(K=>(x.abort(K),C.reject(K))).toPromise();return H.catch(()=>{}),yield x.m,H}catch(x){const H=x,K="FirebaseError"!==H.name&&R<3;if(at("SimpleDb","Transaction failed with error:",H.message,"Retrying:",K),c.close(),!K)return Promise.reject(H)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ae{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return dn(this.k.delete())}}class Be extends Qe{constructor(e,n){super(qe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Le(i){return"IndexedDbTransactionError"===i.name}class Rt{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(at("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(at("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),dn(o)}add(e){return at("SimpleDb","ADD",this.store.name,e,e),dn(this.store.add(e))}get(e){return dn(this.store.get(e)).next(n=>(void 0===n&&(n=null),at("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return at("SimpleDb","DELETE",this.store.name,e),dn(this.store.delete(e))}count(){return at("SimpleDb","COUNT",this.store.name),dn(this.store.count())}W(e,n){const o=this.options(e,n);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),c=[];return this.G(u,(g,R)=>{c.push(R)}).next(()=>c)}{const u=this.store.getAll(o.range);return new C((c,g)=>{u.onerror=R=>{g(R.target.error)},u.onsuccess=R=>{c(R.target.result)}})}}j(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new C((u,c)=>{o.onerror=g=>{c(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}H(e,n){at("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.J=!1;const u=this.cursor(o);return this.G(u,(c,g,R)=>R.delete())}Y(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.G(u,n)}Z(e){const n=this.cursor({});return new C((o,u)=>{n.onerror=c=>{const g=Pn(c.target.error);u(g)},n.onsuccess=c=>{const g=c.target.result;g?e(g.primaryKey,g.value).next(R=>{R?g.continue():o()}):o()}})}G(e,n){const o=[];return new C((u,c)=>{e.onerror=g=>{c(g.target.error)},e.onsuccess=g=>{const R=g.target.result;if(!R)return void u();const x=new ae(R),H=n(R.primaryKey,R.value,x);if(H instanceof C){const K=H.catch(ie=>(x.done(),C.reject(ie)));o.push(K)}x.isDone?u():null===x.$?R.continue():R.continue(x.$)}}).next(()=>C.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function dn(i){return new C((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=Pn(o.target.error);n(u)}})}let Rn=!1;function Pn(i){const e=Z.S((0,je.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new Qe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Rn||(Rn=!0,setTimeout(()=>{throw o},0)),o}}return i}class rr{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;at("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){n.task=null;try{at("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(o){Le(o)?at("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield O(o)}yield n.ee(6e4)}))}}class ju{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,Ee.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.ne(o,e))})()}ne(e,n){const o=new Set;let u=n,c=!0;return C.doWhile(()=>!0===c&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!o.has(g))return at("IndexBackiller",`Processing collection: ${g}`),this.re(e,g,u).next(R=>{u-=R,o.add(g)});c=!1})).next(()=>n-u)}re(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(c=>{const g=c.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.ie(u,c)).next(R=>(at("IndexBackiller",`Updating offset: ${R}`),this.localStore.indexManager.updateCollectionGroup(e,n,R))).next(()=>g.size)}))}ie(e,n){let o=e;return n.changes.forEach((u,c)=>{const g=cl(c);dl(g,o)>0&&(o=g)}),new Ps(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let bi=(()=>{class i{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=u=>this.se(u),this.oe=u=>o.writeSequenceNumber(u))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function Bo(i){return null==i}function no(i){return 0===i&&1/i==-1/0}function Ml(i){return"number"==typeof i&&Number.isInteger(i)&&!no(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function ps(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=yu(e)),e=hl(i.get(n),e);return yu(e)}function hl(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const c=i.charAt(u);switch(c){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=c}}return n}function yu(i){return i+"\x01\x01"}function po(i){const e=i.length;if(Bt(e>=2),2===e)return Bt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Un.emptyPath();const n=e-2,o=[];let u="";for(let c=0;c<e;){const g=i.indexOf("\x01",c);switch((g<0||g>n)&&Lt(),i.charAt(g+1)){case"\x01":const R=i.substring(c,g);let x;0===u.length?x=R:(u+=R,x=u,u=""),o.push(x);break;case"\x10":u+=i.substring(c,g),u+="\0";break;case"\x11":u+=i.substring(c,g+1);break;default:Lt()}c=g+2}return new Un(o)}const Yl=["userId","batchId"];function Ja(i,e){return[i,ps(e)]}function Ol(i,e,n){return[i,ps(e),n]}const fl={},Hu=["prefixPath","collectionGroup","readTime","documentId"],Nl=["prefixPath","collectionGroup","documentId"],Lf=["collectionGroup","readTime","prefixPath","documentId"],vu=["canonicalId","targetId"],Xa=["targetId","path"],$u=["path","targetId"],vd=["collectionId","parent"],Sc=["indexId","uid"],Vf=["uid","sequenceNumber"],Ed=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Rc=["indexId","uid","orderedDocumentKey"],mh=["userId","collectionPath","documentId"],_h=["userId","collectionPath","largestBatchId"],Pc=["userId","collectionGroup","largestBatchId"],ba=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yh=[...ba,"documentOverlays"],Eu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Jl=Eu,pl=[...Jl,"indexConfiguration","indexState","indexEntries"];class xl extends D{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function is(i,e){const n=At(i);return Z.M(n.ae,e)}function Ms(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Sa(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function ro(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Dr{constructor(e,n){this.comparator=e,this.root=n||xi.EMPTY}insert(e,n){return new Dr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xi.BLACK,null,null))}remove(e){return new Dr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eu(this.root,e,this.comparator,!0)}}class eu{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?o(e.key,n):1,n&&u&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xi{constructor(e,n,o,u,c){this.key=e,this.value=n,this.color=o??xi.RED,this.left=u??xi.EMPTY,this.right=c??xi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,c){return new xi(e??this.key,n??this.value,o??this.color,u??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const c=o(e,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===c?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return xi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return xi.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Lt();const e=this.left.check();if(e!==this.right.check())throw Lt();return e+(this.isRed()?0:1)}}xi.EMPTY=null,xi.RED=!0,xi.BLACK=!1,xi.EMPTY=new class{constructor(){this.size=0}get key(){throw Lt()}get value(){throw Lt()}get color(){throw Lt()}get left(){throw Lt()}get right(){throw Lt()}copy(e,n,o,u,c){return this}insert(e,n,o){return new xi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ir{constructor(e){this.comparator=e,this.data=new Dr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zu(this.data.getIterator())}getIteratorFrom(e){return new zu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof Ir)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=o.getNext().key;if(0!==this.comparator(u,c))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ir(this.comparator);return n.data=e,n}}class zu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function tu(i){return i.hasNext()?i.getNext():void 0}class gs{constructor(e){this.fields=e,e.sort(xr.comparator)}static empty(){return new gs([])}unionWith(e){let n=new Ir(xr.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new gs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Kn(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class Mc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class mi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Mc("Invalid base64 string: "+c):c}}(e);return new mi(n)}static fromUint8Array(e){const n=function(u){let c="";for(let g=0;g<u.length;++g)c+=String.fromCharCode(u[g]);return c}(e);return new mi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return En(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mi.EMPTY_BYTE_STRING=new mi("");const Nc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(i){if(Bt(!!i),"string"==typeof i){let e=0;const n=Nc.exec(i);if(Bt(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:mr(i.seconds),nanos:mr(i.nanos)}}function mr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function io(i){return"string"==typeof i?mi.fromBase64String(i):mi.fromUint8Array(i)}function Xl(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Iu(i){const e=i.mapValue.fields.__previous_value__;return Xl(e)?Iu(e):e}function gl(i){const e=ss(i.mapValue.fields.__local_write_time__.timestampValue);return new Er(e.seconds,e.nanos)}class wu{constructor(e,n,o,u,c,g,R,x,H){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=c,this.forceLongPolling=g,this.autoDetectLongPolling=R,this.longPollingOptions=x,this.useFetchStreams=H}}class go{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new go("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof go&&e.projectId===this.projectId&&e.database===this.database}}const si={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},kl={nullValue:"NULL_VALUE"};function bo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Xl(i)?4:vh(i)?9007199254740991:10:Lt()}function jo(i,e){if(i===e)return!0;const n=bo(i);if(n!==bo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return gl(i).isEqual(gl(e));case 3:return function(u,c){if("string"==typeof u.timestampValue&&"string"==typeof c.timestampValue&&u.timestampValue.length===c.timestampValue.length)return u.timestampValue===c.timestampValue;const g=ss(u.timestampValue),R=ss(c.timestampValue);return g.seconds===R.seconds&&g.nanos===R.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return c=e,io(i.bytesValue).isEqual(io(c.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,c){return mr(u.geoPointValue.latitude)===mr(c.geoPointValue.latitude)&&mr(u.geoPointValue.longitude)===mr(c.geoPointValue.longitude)}(i,e);case 2:return function(u,c){if("integerValue"in u&&"integerValue"in c)return mr(u.integerValue)===mr(c.integerValue);if("doubleValue"in u&&"doubleValue"in c){const g=mr(u.doubleValue),R=mr(c.doubleValue);return g===R?no(g)===no(R):isNaN(g)&&isNaN(R)}return!1}(i,e);case 9:return Kn(i.arrayValue.values||[],e.arrayValue.values||[],jo);case 10:return function(u,c){const g=u.mapValue.fields||{},R=c.mapValue.fields||{};if(Ms(g)!==Ms(R))return!1;for(const x in g)if(g.hasOwnProperty(x)&&(void 0===R[x]||!jo(g[x],R[x])))return!1;return!0}(i,e);default:return Lt()}var c}function Gu(i,e){return void 0!==(i.values||[]).find(n=>jo(n,e))}function Ra(i,e){if(i===e)return 0;const n=bo(i),o=bo(e);if(n!==o)return En(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return En(i.booleanValue,e.booleanValue);case 2:return function(c,g){const R=mr(c.integerValue||c.doubleValue),x=mr(g.integerValue||g.doubleValue);return R<x?-1:R>x?1:R===x?0:isNaN(R)?isNaN(x)?0:-1:1}(i,e);case 3:return Fl(i.timestampValue,e.timestampValue);case 4:return Fl(gl(i),gl(e));case 5:return En(i.stringValue,e.stringValue);case 6:return function(c,g){const R=io(c),x=io(g);return R.compareTo(x)}(i.bytesValue,e.bytesValue);case 7:return function(c,g){const R=c.split("/"),x=g.split("/");for(let H=0;H<R.length&&H<x.length;H++){const K=En(R[H],x[H]);if(0!==K)return K}return En(R.length,x.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,g){const R=En(mr(c.latitude),mr(g.latitude));return 0!==R?R:En(mr(c.longitude),mr(g.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(c,g){const R=c.values||[],x=g.values||[];for(let H=0;H<R.length&&H<x.length;++H){const K=Ra(R[H],x[H]);if(K)return K}return En(R.length,x.length)}(i.arrayValue,e.arrayValue);case 10:return function(c,g){if(c===si.mapValue&&g===si.mapValue)return 0;if(c===si.mapValue)return 1;if(g===si.mapValue)return-1;const R=c.fields||{},x=Object.keys(R),H=g.fields||{},K=Object.keys(H);x.sort(),K.sort();for(let ie=0;ie<x.length&&ie<K.length;++ie){const we=En(x[ie],K[ie]);if(0!==we)return we;const ze=Ra(R[x[ie]],H[K[ie]]);if(0!==ze)return ze}return En(x.length,K.length)}(i.mapValue,e.mapValue);default:throw Lt()}}function Fl(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return En(i,e);const n=ss(i),o=ss(e),u=En(n.seconds,o.seconds);return 0!==u?u:En(n.nanos,o.nanos)}function ca(i){return nu(i)}function nu(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=ss(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?io(i.bytesValue).toBase64():"referenceValue"in i?Et.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",u=!0;for(const c of n.values||[])u?u=!1:o+=",",o+=nu(c);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let u="{",c=!0;for(const g of o)c?c=!1:u+=",",u+=`${g}:${nu(n.fields[g])}`;return u+"}"}(i.mapValue):Lt()}function da(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ml(i){return!!i&&"integerValue"in i}function Pa(i){return!!i&&"arrayValue"in i}function ec(i){return!!i&&"nullValue"in i}function Id(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function xc(i){return!!i&&"mapValue"in i}function Ll(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Sa(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=Ll(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ll(i.arrayValue.values[n]);return e}return Object.assign({},i)}function vh(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function kc(i){return"nullValue"in i?kl:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?da(go.empty(),Et.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Lt()}function Uf(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?da(go.empty(),Et.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?si:Lt()}function wd(i,e){const n=Ra(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function ru(i,e){const n=Ra(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class ms{constructor(e){this.value=e}static empty(){return new ms({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!xc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(n)}setAll(e){let n=xr.emptyPath(),o={},u=[];e.forEach((g,R)=>{if(!n.isImmediateParentOf(R)){const x=this.getFieldsMap(n);this.applyChanges(x,o,u),o={},u=[],n=R.popLast()}g?o[R.lastSegment()]=Ll(g):u.push(R.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,o,u)}delete(e){const n=this.field(e.popLast());xc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];xc(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){Sa(n,(u,c)=>e[u]=c);for(const u of o)delete e[u]}clone(){return new ms(Ll(this.value))}}function Td(i){const e=[];return Sa(i.fields,(n,o)=>{const u=new xr([n]);if(xc(o)){const c=Td(o.mapValue).fields;if(0===c.length)e.push(u);else for(const g of c)e.push(u.child(g))}else e.push(u)}),new gs(e)}class Mn{constructor(e,n,o,u,c,g,R){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=c,this.data=g,this.documentState=R}static newInvalidDocument(e){return new Mn(e,0,$t.min(),$t.min(),$t.min(),ms.empty(),0)}static newFoundDocument(e,n,o,u){return new Mn(e,1,n,$t.min(),o,u,0)}static newNoDocument(e,n){return new Mn(e,2,n,$t.min(),$t.min(),ms.empty(),0)}static newUnknownDocument(e,n){return new Mn(e,3,n,$t.min(),$t.min(),ms.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual($t.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ms.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ms.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qu{constructor(e,n){this.position=e,this.inclusive=n}}function Vl(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const c=e[u],g=i.position[u];if(o=c.field.isKeyField()?Et.comparator(Et.fromName(g.referenceValue),n.key):Ra(g,n.data.field(c.field)),"desc"===c.dir&&(o*=-1),0!==o)break}return o}function tc(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!jo(i.position[n],e.position[n]))return!1;return!0}class zs{constructor(e,n="asc"){this.field=e,this.dir=n}}function _l(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class v{}class h extends v{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new _t(e,n,o):"array-contains"===n?new on(e,o):"in"===n?new In(e,o):"not-in"===n?new Sr(e,o):"array-contains-any"===n?new Rr(e,o):new h(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new tn(e,o):new Yt(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Ra(n,this.value)):null!==n&&bo(this.value)===bo(n)&&this.matchesComparison(Ra(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class m extends v{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new m(e,n)}matches(e){return T(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function T(i){return"and"===i.op}function F(i){return"or"===i.op}function $(i){return re(i)&&T(i)}function re(i){for(const e of i.filters)if(e instanceof m)return!1;return!0}function se(i){if(i instanceof h)return i.field.canonicalString()+i.op.toString()+ca(i.value);if($(i))return i.filters.map(e=>se(e)).join(",");{const e=i.filters.map(n=>se(n)).join(",");return`${i.op}(${e})`}}function _e(i,e){return i instanceof h?(o=i,(u=e)instanceof h&&o.op===u.op&&o.field.isEqual(u.field)&&jo(o.value,u.value)):i instanceof m?function(o,u){return u instanceof m&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((c,g,R)=>c&&_e(g,u.filters[R]),!0)}(i,e):void Lt();var o,u}function Me(i,e){const n=i.filters.concat(e);return m.create(n,i.op)}function it(i){return i instanceof h?`${(n=i).field.canonicalString()} ${n.op} ${ca(n.value)}`:i instanceof m?function(n){return n.op.toString()+" {"+n.getFilters().map(it).join(" ,")+"}"}(i):"Filter";var n}class _t extends h{constructor(e,n,o){super(e,n,o),this.key=Et.fromName(o.referenceValue)}matches(e){const n=Et.comparator(e.key,this.key);return this.matchesComparison(n)}}class tn extends h{constructor(e,n){super(e,"in",n),this.keys=Pt(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Yt extends h{constructor(e,n){super(e,"not-in",n),this.keys=Pt(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Pt(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>Et.fromName(o.referenceValue))}class on extends h{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pa(n)&&Gu(n.arrayValue,this.value)}}class In extends h{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Gu(this.value.arrayValue,n)}}class Sr extends h{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Gu(this.value.arrayValue,n)}}class Rr extends h{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pa(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>Gu(this.value.arrayValue,o))}}class Zn{constructor(e,n=null,o=[],u=[],c=null,g=null,R=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=c,this.startAt=g,this.endAt=R,this.ce=null}}function Bn(i,e=null,n=[],o=[],u=null,c=null,g=null){return new Zn(i,e,n,o,u,c,g)}function ei(i){const e=At(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>se(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(c=o).field.canonicalString()+c.dir;var c}).join(","),Bo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>ca(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>ca(o)).join(",")),e.ce=n}return e.ce}function Si(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!_l(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!_e(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!tc(i.startAt,e.startAt)&&tc(i.endAt,e.endAt)}function Qr(i){return Et.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function _s(i,e){return i.filters.filter(n=>n instanceof h&&n.field.isEqual(e))}function so(i,e,n){let o=kl,u=!0;for(const c of _s(i,e)){let g=kl,R=!0;switch(c.op){case"<":case"<=":g=kc(c.value);break;case"==":case"in":case">=":g=c.value;break;case">":g=c.value,R=!1;break;case"!=":case"not-in":g=kl}wd({value:o,inclusive:u},{value:g,inclusive:R})<0&&(o=g,u=R)}if(null!==n)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const g=n.position[c];wd({value:o,inclusive:u},{value:g,inclusive:n.inclusive})<0&&(o=g,u=n.inclusive);break}return{value:o,inclusive:u}}function $o(i,e,n){let o=si,u=!0;for(const c of _s(i,e)){let g=si,R=!0;switch(c.op){case">=":case">":g=Uf(c.value),R=!1;break;case"==":case"in":case"<=":g=c.value;break;case"<":g=c.value,R=!1;break;case"!=":case"not-in":g=si}ru({value:o,inclusive:u},{value:g,inclusive:R})>0&&(o=g,u=R)}if(null!==n)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const g=n.position[c];ru({value:o,inclusive:u},{value:g,inclusive:n.inclusive})>0&&(o=g,u=n.inclusive);break}return{value:o,inclusive:u}}class So{constructor(e,n=null,o=[],u=[],c=null,g="F",R=null,x=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=c,this.limitType=g,this.startAt=R,this.endAt=x,this.le=null,this.he=null,this.Pe=null}}function Wu(i,e,n,o,u,c,g,R){return new So(i,e,n,o,u,c,g,R)}function Ro(i){return new So(i)}function Fc(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Tu(i){return null!==i.collectionGroup}function Mt(i){const e=At(i);if(null===e.le){e.le=[];const n=new Set;for(const c of e.explicitOrderBy)e.le.push(c),n.add(c.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(g){let R=new Ir(xr.comparator);return g.filters.forEach(x=>{x.getFlattenedFilters().forEach(H=>{H.isInequality()&&(R=R.add(H.field))})}),R})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.le.push(new zs(c,o))}),n.has(xr.keyField().canonicalString())||e.le.push(new zs(xr.keyField(),o))}return e.le}function Kt(i){const e=At(i);return e.he||(e.he=function vn(i,e){if("F"===i.limitType)return Bn(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(u=>new zs(u.field,"desc"===u.dir?"asc":"desc"));const n=i.endAt?new qu(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new qu(i.startAt.position,i.startAt.inclusive):null;return Bn(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}(e,Mt(i))),e.he}function jn(i,e){const n=i.filters.concat([e]);return new So(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function ki(i,e,n){return new So(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function oo(i,e){return Si(Kt(i),Kt(e))&&i.limitType===e.limitType}function mo(i){return`${ei(Kt(i))}|lt:${i.limitType}`}function Po(i){return`Query(target=${function(n){let o=n.path.canonicalString();return null!==n.collectionGroup&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(u=>it(u)).join(", ")}]`),Bo(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(u=>{return`${(g=u).field.canonicalString()} (${g.dir})`;var g}).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(u=>ca(u)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(u=>ca(u)).join(",")),`Target(${o})`}(Kt(i))}; limitType=${i.limitType})`}function Pr(i,e){return e.isFoundDocument()&&function(o,u){const c=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(c):Et.isDocumentKey(o.path)?o.path.isEqual(c):o.path.isImmediateParentOf(c)}(i,e)&&function(o,u){for(const c of Mt(o))if(!c.field.isKeyField()&&null===u.data.field(c.field))return!1;return!0}(i,e)&&function(o,u){for(const c of o.filters)if(!c.matches(u))return!1;return!0}(i,e)&&(u=e,!((o=i).startAt&&!function(g,R,x){const H=Vl(g,R,x);return g.inclusive?H<=0:H<0}(o.startAt,Mt(o),u)||o.endAt&&!function(g,R,x){const H=Vl(g,R,x);return g.inclusive?H>=0:H>0}(o.endAt,Mt(o),u)));var o,u}function yl(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Lc(i){return(e,n)=>{let o=!1;for(const u of Mt(i)){const c=ys(u,e,n);if(0!==c)return c;o=o||u.field.isKeyField()}return 0}}function ys(i,e,n){const o=i.field.isKeyField()?Et.comparator(e.key,n.key):function(c,g,R){const x=g.data.field(c),H=R.data.field(c);return null!==x&&null!==H?Ra(x,H):Lt()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Lt()}}class Gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,c]of o)if(this.equalsFn(u,e))return c}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let c=0;c<u.length;c++)if(this.equalsFn(u[c][0],e))return void(u[c]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Sa(this.inner,(n,o)=>{for(const[u,c]of o)e(u,c)})}isEmpty(){return ro(this.inner)}size(){return this.innerSize}}const ha=new Dr(Et.comparator);function vs(){return ha}const Vc=new Dr(Et.comparator);function Uc(...i){let e=Vc;for(const n of i)e=e.insert(n.key,n);return e}function Eh(i){let e=Vc;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function zo(){return Cd()}function Ig(){return Cd()}function Cd(){return new Gs(i=>i.toString(),(i,e)=>i.isEqual(e))}const Bc=new Dr(Et.comparator),Bf=new Ir(Et.comparator);function kn(...i){let e=Bf;for(const n of i)e=e.add(n);return e}const b_=new Ir(En);function jc(){return b_}function wg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:no(e)?"-0":e}}function jf(i){return{integerValue:""+i}}function Hc(i,e){return Ml(e)?jf(e):wg(i,e)}class vl{constructor(){this._=void 0}}function Hf(i,e,n){return i instanceof iu?function(u,c){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return c&&Xl(c)&&(c=Iu(c)),c&&(g.fields.__previous_value__=c),{mapValue:g}}(n,e):i instanceof Ma?wh(i,e):i instanceof su?$c(i,e):function(u,c){const g=Ih(u,c),R=zf(g)+zf(u.Ie);return ml(g)&&ml(u.Ie)?jf(R):wg(u.serializer,R)}(i,e)}function $f(i,e,n){return i instanceof Ma?wh(i,e):i instanceof su?$c(i,e):n}function Ih(i,e){return i instanceof Ku?ml(o=e)||(c=o)&&"doubleValue"in c?e:{integerValue:0}:null;var o,c}class iu extends vl{}class Ma extends vl{constructor(e){super(),this.elements=e}}function wh(i,e){const n=Gf(e);for(const o of i.elements)n.some(u=>jo(u,o))||n.push(o);return{arrayValue:{values:n}}}class su extends vl{constructor(e){super(),this.elements=e}}function $c(i,e){let n=Gf(e);for(const o of i.elements)n=n.filter(u=>!jo(u,o));return{arrayValue:{values:n}}}class Ku extends vl{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function zf(i){return mr(i.integerValue||i.doubleValue)}function Gf(i){return Pa(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class nc{constructor(e,n){this.field=e,this.transform=n}}class zc{constructor(e,n){this.version=e,this.transformResults=n}}class _i{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _i}static exists(e){return new _i(void 0,e)}static updateTime(e){return new _i(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ad(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class rc{}function Th(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Go(i.key,_i.none()):new Qu(i.key,i.data,_i.none());{const n=i.data,o=ms.empty();let u=new Ir(xr.comparator);for(let c of e.fields)if(!u.has(c)){let g=n.field(c);null===g&&c.length>1&&(c=c.popLast(),g=n.field(c)),null===g?o.delete(c):o.set(c,g),u=u.add(c)}return new pa(i.key,o,new gs(u.toArray()),_i.none())}}function fa(i,e,n){i instanceof Qu?function(u,c,g){const R=u.value.clone(),x=Ul(u.fieldTransforms,c,g.transformResults);R.setAll(x),c.convertToFoundDocument(g.version,R).setHasCommittedMutations()}(i,e,n):i instanceof pa?function(u,c,g){if(!Ad(u.precondition,c))return void c.convertToUnknownDocument(g.version);const R=Ul(u.fieldTransforms,c,g.transformResults),x=c.data;x.setAll(ao(u)),x.setAll(R),c.convertToFoundDocument(g.version,x).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Zu(i,e,n,o){return i instanceof Qu?function(c,g,R,x){if(!Ad(c.precondition,g))return R;const H=c.value.clone(),K=Ch(c.fieldTransforms,x,g);return H.setAll(K),g.convertToFoundDocument(g.version,H).setHasLocalMutations(),null}(i,e,n,o):i instanceof pa?function(c,g,R,x){if(!Ad(c.precondition,g))return R;const H=Ch(c.fieldTransforms,x,g),K=g.data;return K.setAll(ao(c)),K.setAll(H),g.convertToFoundDocument(g.version,K).setHasLocalMutations(),null===R?null:R.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(ie=>ie.field))}(i,e,n,o):(R=n,Ad(i.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):R);var g,R}function Mo(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),c=Ih(o.transform,u||null);null!=c&&(null===n&&(n=ms.empty()),n.set(o.field,c))}return n||null}function bd(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(o=i.fieldTransforms)&&void 0===u||o&&u&&Kn(o,u,(c,g)=>function Dd(i,e){return i.field.isEqual(e.field)&&(u=e.transform,(o=i.transform)instanceof Ma&&u instanceof Ma||o instanceof su&&u instanceof su?Kn(o.elements,u.elements,jo):o instanceof Ku&&u instanceof Ku?jo(o.Ie,u.Ie):o instanceof iu&&u instanceof iu);var o,u}(c,g))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var o,u}class Qu extends rc{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class pa extends rc{constructor(e,n,o,u,c=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ao(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function Ul(i,e,n){const o=new Map;Bt(i.length===n.length);for(let u=0;u<n.length;u++){const c=i[u],g=c.transform,R=e.data.field(c.field);o.set(c.field,$f(g,R,n[u]))}return o}function Ch(i,e,n){const o=new Map;for(const u of i){const c=u.transform,g=n.data.field(u.field);o.set(u.field,Hf(c,g,e))}return o}class Go extends rc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sd extends rc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rd{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const c=this.mutations[u];c.key.isEqual(e.key)&&fa(c,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=Zu(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=Zu(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=Ig();return this.mutations.forEach(u=>{const c=e.get(u.key),g=c.overlayedDocument;let R=this.applyToLocalView(g,c.mutatedFields);R=n.has(u.key)?null:R;const x=Th(g,R);null!==x&&o.set(u.key,x),g.isValidDocument()||g.convertToNoDocument($t.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),kn())}isEqual(e){return this.batchId===e.batchId&&Kn(this.mutations,e.mutations,(n,o)=>bd(n,o))&&Kn(this.baseMutations,e.baseMutations,(n,o)=>bd(n,o))}}class Dh{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){Bt(e.mutations.length===o.length);let u=Bc;const c=e.mutations;for(let g=0;g<c.length;g++)u=u.insert(c[g].key,o[g].version);return new Dh(e,n,o,u)}}class Pd{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Oo{constructor(e,n){this.count=e,this.unchangedNames=n}}var Wi,or;function Md(i){switch(i){default:return Lt();case qe.CANCELLED:case qe.UNKNOWN:case qe.DEADLINE_EXCEEDED:case qe.RESOURCE_EXHAUSTED:case qe.INTERNAL:case qe.UNAVAILABLE:case qe.UNAUTHENTICATED:return!1;case qe.INVALID_ARGUMENT:case qe.NOT_FOUND:case qe.ALREADY_EXISTS:case qe.PERMISSION_DENIED:case qe.FAILED_PRECONDITION:case qe.ABORTED:case qe.OUT_OF_RANGE:case qe.UNIMPLEMENTED:case qe.DATA_LOSS:return!0}}function Oa(i){if(void 0===i)return gr("GRPC error has no .code"),qe.UNKNOWN;switch(i){case Wi.OK:return qe.OK;case Wi.CANCELLED:return qe.CANCELLED;case Wi.UNKNOWN:return qe.UNKNOWN;case Wi.DEADLINE_EXCEEDED:return qe.DEADLINE_EXCEEDED;case Wi.RESOURCE_EXHAUSTED:return qe.RESOURCE_EXHAUSTED;case Wi.INTERNAL:return qe.INTERNAL;case Wi.UNAVAILABLE:return qe.UNAVAILABLE;case Wi.UNAUTHENTICATED:return qe.UNAUTHENTICATED;case Wi.INVALID_ARGUMENT:return qe.INVALID_ARGUMENT;case Wi.NOT_FOUND:return qe.NOT_FOUND;case Wi.ALREADY_EXISTS:return qe.ALREADY_EXISTS;case Wi.PERMISSION_DENIED:return qe.PERMISSION_DENIED;case Wi.FAILED_PRECONDITION:return qe.FAILED_PRECONDITION;case Wi.ABORTED:return qe.ABORTED;case Wi.OUT_OF_RANGE:return qe.OUT_OF_RANGE;case Wi.UNIMPLEMENTED:return qe.UNIMPLEMENTED;case Wi.DATA_LOSS:return qe.DATA_LOSS;default:return Lt()}}(or=Wi||(Wi={}))[or.OK=0]="OK",or[or.CANCELLED=1]="CANCELLED",or[or.UNKNOWN=2]="UNKNOWN",or[or.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",or[or.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",or[or.NOT_FOUND=5]="NOT_FOUND",or[or.ALREADY_EXISTS=6]="ALREADY_EXISTS",or[or.PERMISSION_DENIED=7]="PERMISSION_DENIED",or[or.UNAUTHENTICATED=16]="UNAUTHENTICATED",or[or.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",or[or.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",or[or.ABORTED=10]="ABORTED",or[or.OUT_OF_RANGE=11]="OUT_OF_RANGE",or[or.UNIMPLEMENTED=12]="UNIMPLEMENTED",or[or.INTERNAL=13]="INTERNAL",or[or.UNAVAILABLE=14]="UNAVAILABLE",or[or.DATA_LOSS=15]="DATA_LOSS";function Bl(){return new TextEncoder}const Wf=new Wa([4294967295,4294967295],0);function Kf(i){const e=Bl().encode(i),n=new _d;return n.update(e),new Uint8Array(n.digest())}function Gc(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Wa([n,o],0),new Wa([u,c],0)]}class Od{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new ic(`Invalid padding: ${n}`);if(o<0)throw new ic(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new ic(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new ic(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Wa.fromNumber(this.Te)}de(e,n,o){let u=e.add(n.multiply(Wa.fromNumber(o)));return 1===u.compare(Wf)&&(u=new Wa([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=Kf(e),[o,u]=Gc(n);for(let c=0;c<this.hashCount;c++){const g=this.de(o,u,c);if(!this.Ae(g))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),g=new Od(c,u,n);return o.forEach(R=>g.insert(R)),g}insert(e){if(0===this.Te)return;const n=Kf(e),[o,u]=Gc(n);for(let c=0;c<this.hashCount;c++){const g=this.de(o,u,c);this.Re(g)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Cu{constructor(e,n,o,u,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Cu($t.min(),u,new Dr(En),vs(),kn())}}class Il{constructor(e,n,o,u,c){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Il(o,n,kn(),kn(),kn())}}class _{constructor(e,n,o,u){this.Ve=e,this.removedTargetIds=n,this.key=o,this.me=u}}class d{constructor(e,n){this.targetId=e,this.fe=n}}class p{constructor(e,n,o=mi.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class E{constructor(){this.ge=0,this.pe=pe(),this.ye=mi.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=kn(),n=kn(),o=kn();return this.pe.forEach((u,c)=>{switch(c){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:Lt()}}),new Il(this.ye,this.we,e,n,o)}Fe(){this.Se=!1,this.pe=pe()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class U{constructor(e){this.Le=e,this.ke=new Map,this.qe=vs(),this.Qe=Q(),this.Ke=new Dr(En)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(n);break;case 3:this.je(n)&&(o.Be(),o.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.Ce(e.resumeToken));break;default:Lt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((o,u)=>{this.je(u)&&n(u)})}Je(e){const n=e.targetId,o=e.fe.count,u=this.Ye(n);if(u){const c=u.target;if(Qr(c))if(0===o){const g=new Et(c.path);this.We(n,g,Mn.newNoDocument(g,$t.min()))}else Bt(1===o);else{const g=this.Ze(n);if(g!==o){const R=this.Xe(e),x=R?this.et(R,e,g):1;0!==x&&(this.He(n),this.Ke=this.Ke.insert(n,2===x?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:c=0}=n;let g,R;try{g=io(o).toUint8Array()}catch(x){if(x instanceof Mc)return fs("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{R=new Od(g,u,c)}catch(x){return fs(x instanceof ic?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return 0===R.Te?null:R}et(e,n,o){return n.fe.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Le.getRemoteKeysForTarget(n);let u=0;return o.forEach(c=>{const g=this.Le.nt(),R=`projects/${g.projectId}/databases/${g.database}/documents/${c.path.canonicalString()}`;e.mightContain(R)||(this.We(n,c,null),u++)}),u}it(e){const n=new Map;this.ke.forEach((c,g)=>{const R=this.Ye(g);if(R){if(c.current&&Qr(R.target)){const x=new Et(R.target.path);null!==this.qe.get(x)||this.st(g,x)||this.We(g,x,Mn.newNoDocument(x,e))}c.De&&(n.set(g,c.ve()),c.Fe())}});let o=kn();this.Qe.forEach((c,g)=>{let R=!0;g.forEachWhile(x=>{const H=this.Ye(x);return!H||"TargetPurposeLimboResolution"===H.purpose||(R=!1,!1)}),R&&(o=o.add(c))}),this.qe.forEach((c,g)=>g.setReadTime(e));const u=new Cu(e,n,this.Ke,this.qe,o);return this.qe=vs(),this.Qe=Q(),this.Ke=new Dr(En),u}Ue(e,n){if(!this.je(e))return;const o=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,o),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const u=this.ze(e);this.st(e,n)?u.Me(n,1):u.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),o&&(this.qe=this.qe.insert(n,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new E,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ir(En),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||at("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new E),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Q(){return new Dr(Et.comparator)}function pe(){return new Dr(Et.comparator)}const ke={asc:"ASCENDING",desc:"DESCENDING"},et={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ot={and:"AND",or:"OR"};class Zt{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zt(i,e){return i.useProto3Json||Bo(e)?e:{value:e}}function kr(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Na(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Nd(i,e){return kr(i,e.toTimestamp())}function Ri(i){return Bt(!!i),$t.fromTimestamp(function(n){const o=ss(n);return new Er(o.seconds,o.nanos)}(i))}function sc(i,e){return(o=i,new Un(["projects",o.projectId,"databases",o.database])).child("documents").child(e).canonicalString();var o}function Yu(i){const e=Un.fromString(i);return Bt(Dg(e)),e}function jl(i,e){return sc(i.databaseId,e.path)}function ga(i,e){const n=Yu(e);if(n.get(1)!==i.databaseId.projectId)throw new Qe(qe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Qe(qe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Et(Ah(n))}function xd(i,e){return sc(i.databaseId,e)}function Zf(i){const e=Yu(i);return 4===e.length?Un.emptyPath():Ah(e)}function Du(i){return new Un(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ah(i){return Bt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function bh(i,e,n){return{name:jl(i,e),fields:n.value.mapValue.fields}}function qc(i,e,n){const o=ga(i,e.name),u=Ri(e.updateTime),c=e.createTime?Ri(e.createTime):$t.min(),g=new ms({mapValue:{fields:e.fields}}),R=Mn.newFoundDocument(o,u,c,g);return n&&R.setHasCommittedMutations(),n?R.setHasCommittedMutations():R}function kd(i,e){let n;if(e instanceof Qu)n={update:bh(i,e.key,e.value)};else if(e instanceof Go)n={delete:jl(i,e.key)};else if(e instanceof pa)n={update:bh(i,e.key,e.data),updateMask:M_(e.fieldMask)};else{if(!(e instanceof Sd))return Lt();n={verify:jl(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(c,g){const R=g.transform;if(R instanceof iu)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(R instanceof Ma)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:R.elements}};if(R instanceof su)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:R.elements}};if(R instanceof Ku)return{fieldPath:g.field.canonicalString(),increment:R.Ie};throw Lt()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:Nd(i,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:Lt()),n;var c}function Fd(i,e){const n=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?_i.updateTime(Ri(c.updateTime)):void 0!==c.exists?_i.exists(c.exists):_i.none():_i.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(g,R){let x=null;"setToServerValue"in R?(Bt("REQUEST_TIME"===R.setToServerValue),x=new iu):"appendMissingElements"in R?x=new Ma(R.appendMissingElements.values||[]):"removeAllFromArray"in R?x=new su(R.removeAllFromArray.values||[]):"increment"in R?x=new Ku(g,R.increment):Lt();const H=xr.fromServerFormat(R.fieldPath);return new nc(H,x)}(i,u)):[];var c;if(e.update){const u=ga(i,e.update.name),c=new ms({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new gs((e.updateMask.fieldPaths||[]).map(K=>xr.fromServerFormat(K)));return new pa(u,c,g,n,o)}return new Qu(u,c,n,o)}if(e.delete){const u=ga(i,e.delete);return new Go(u,n)}if(e.verify){const u=ga(i,e.verify);return new Sd(u,n)}return Lt()}function Cg(i,e){return{documents:[xd(i,e.path)]}}function Rh(i,e){const n={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(n.parent=xd(i,o),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=xd(i,o.popLast()),n.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(x){if(0!==x.length)return P_(m.create(x,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const c=function(x){if(0!==x.length)return x.map(H=>{return{field:oc((ie=H).field),direction:Mh(ie.dir)};var ie})}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const g=zt(i,e.limit);return null!==g&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt={before:(x=e.startAt).inclusive,values:x.position}),e.endAt&&(n.structuredQuery.endAt=function(x){return{before:!x.inclusive,values:x.position}}(e.endAt)),n;var x}function Ph(i){let e=Zf(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){Bt(1===o);const K=n.from[0];K.allDescendants?u=K.collectionId:e=e.child(K.collectionId)}let c=[];n.where&&(c=function(ie){const we=Yf(ie);return we instanceof m&&$(we)?we.getFilters():[we]}(n.where));let g=[];n.orderBy&&(g=n.orderBy.map(we=>{return new zs(Ld((mt=we).field),function(Ct){switch(Ct){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(mt.direction));var mt}));let R=null;n.limit&&(R=function(ie){let we;return we="object"==typeof ie?ie.value:ie,Bo(we)?null:we}(n.limit));let x=null;var ie;n.startAt&&(x=new qu((ie=n.startAt).values||[],!!ie.before));let H=null;return n.endAt&&(H=function(ie){return new qu(ie.values||[],!ie.before)}(n.endAt)),Wu(e,u,g,c,R,"F",x,H)}function Yf(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Ld(n.unaryFilter.field);return h.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=Ld(n.unaryFilter.field);return h.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ld(n.unaryFilter.field);return h.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=Ld(n.unaryFilter.field);return h.create(g,"!=",{nullValue:"NULL_VALUE"});default:return Lt()}}(i):void 0!==i.fieldFilter?h.create(Ld((n=i).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Lt()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return m.create(n.compositeFilter.filters.map(o=>Yf(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return Lt()}}(n.compositeFilter.op))}(i):Lt();var n}function Mh(i){return ke[i]}function Nv(i){return et[i]}function R_(i){return Ot[i]}function oc(i){return{fieldPath:i.canonicalString()}}function Ld(i){return xr.fromServerFormat(i.fieldPath)}function P_(i){return i instanceof h?function(n){if("=="===n.op){if(Id(n.value))return{unaryFilter:{field:oc(n.field),op:"IS_NAN"}};if(ec(n.value))return{unaryFilter:{field:oc(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(Id(n.value))return{unaryFilter:{field:oc(n.field),op:"IS_NOT_NAN"}};if(ec(n.value))return{unaryFilter:{field:oc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oc(n.field),op:Nv(n.op),value:n.value}}}(i):i instanceof m?function(n){const o=n.getFilters().map(u=>P_(u));return 1===o.length?o[0]:{compositeFilter:{op:R_(n.op),filters:o}}}(i):Lt()}function M_(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Dg(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Au{constructor(e,n,o,u,c=$t.min(),g=$t.min(),R=mi.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=R,this.expectedCount=x}withSequenceNumber(e){return new Au(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Jf{constructor(e){this.ut=e}}function O_(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Xf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:jl(c=i.ut,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:kr(c,g.version.toTimestamp()),createTime:kr(c,g.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:Ud(e.version)};else{if(!e.isUnknownDocument())return Lt();o.unknownDocument={path:n.path.toArray(),version:Ud(e.version)}}var c,g;return o}function Xf(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Ud(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wc(i){const e=new Er(i.seconds,i.nanoseconds);return $t.fromTimestamp(e)}function Hl(i,e){const n=(e.baseMutations||[]).map(c=>Fd(i.ut,c));for(let c=0;c<e.mutations.length-1;++c)c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(e.mutations[c].updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c);const o=e.mutations.map(c=>Fd(i.ut,c)),u=Er.fromMillis(e.localWriteTimeMs);return new Rd(e.batchId,u,n,o)}function Oh(i){const e=Wc(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?Wc(i.lastLimboFreeSnapshotVersion):$t.min();let o;return o=void 0!==i.query.documents?(Bt(1===(c=i.query).documents.length),Kt(Ro(Zf(c.documents[0])))):function(c){return Kt(Ph(c))}(i.query),new Au(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,mi.fromBase64String(i.resumeToken));var c}function Kc(i,e){const n=Ud(e.snapshotVersion),o=Ud(e.lastLimboFreeSnapshotVersion);let u;u=Qr(e.target)?Cg(i.ut,e.target):Rh(i.ut,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ei(e.target),readTime:n,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Bd(i){const e=Ph({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?ki(e,e.limit,"L"):e}function Nh(i,e){return new Pd(e.largestBatchId,Fd(i.ut,e.overlayMutation))}function Ag(i,e){const n=e.path.lastSegment();return[i,ps(e.path.popLast()),n]}function bg(i,e,n,o){return{indexId:i,uid:e.uid||"",sequenceNumber:n,readTime:Ud(o.readTime),documentKey:ps(o.documentKey.path),largestBatchId:o.largestBatchId}}class N_{getBundleMetadata(e,n){return Sg(e).get(n).next(o=>{if(o)return{id:(c=o).bundleId,createTime:Wc(c.createTime),version:c.version};var c})}saveBundleMetadata(e,n){return Sg(e).put({bundleId:(u=n).id,createTime:Ud(Ri(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return x_(e).get(n).next(o=>{if(o)return{name:(c=o).name,query:Bd(c.bundledQuery),readTime:Wc(c.readTime)};var c})}saveNamedQuery(e,n){return x_(e).put({name:(u=n).name,readTime:Ud(Ri(u.readTime)),bundledQuery:u.bundledQuery});var u}}function Sg(i){return is(i,"bundles")}function x_(i){return is(i,"namedQueries")}class ep{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new ep(e,n.uid||"")}getOverlay(e,n){return xh(e).get(Ag(this.userId,n)).next(o=>o?Nh(this.serializer,o):null)}getOverlays(e,n){const o=zo();return C.forEach(n,u=>this.getOverlay(e,u).next(c=>{null!==c&&o.set(u,c)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((c,g)=>{const R=new Pd(n,g);u.push(this.lt(e,R))}),C.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(g=>u.add(ps(g.getCollectionPath())));const c=[];return u.forEach(g=>{const R=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,o+1],!1,!0);c.push(xh(e).H("collectionPathOverlayIndex",R))}),C.waitFor(c)}getOverlaysForCollection(e,n,o){const u=zo(),c=ps(n),g=IDBKeyRange.bound([this.userId,c,o],[this.userId,c,Number.POSITIVE_INFINITY],!0);return xh(e).W("collectionPathOverlayIndex",g).next(R=>{for(const x of R){const H=Nh(this.serializer,x);u.set(H.getKey(),H)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const c=zo();let g;const R=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return xh(e).Y({index:"collectionGroupOverlayIndex",range:R},(x,H,K)=>{const ie=Nh(this.serializer,H);c.size()<u||ie.largestBatchId===g?(c.set(ie.getKey(),ie),g=ie.largestBatchId):K.done()}).next(()=>c)}lt(e,n){return xh(e).put(function(u,c,g){const[R,x,H]=Ag(c,g.mutation.key);return{userId:c,collectionPath:x,documentId:H,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:kd(u.ut,g.mutation)}}(this.serializer,this.userId,n))}}function xh(i){return is(i,"documentOverlays")}class Zc{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(mr(e.integerValue));else if("doubleValue"in e){const o=mr(e.doubleValue);isNaN(o)?this.Tt(n,13):(this.Tt(n,15),no(o)?n.Et(0):n.Et(o))}else if("timestampValue"in e){const o=e.timestampValue;this.Tt(n,20),"string"==typeof o?n.dt(o):(n.dt(`${o.seconds||""}`),n.Et(o.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(io(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.Tt(n,45),n.Et(o.latitude||0),n.Et(o.longitude||0)}else"mapValue"in e?vh(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):Lt()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const o=e.fields||{};this.Tt(n,55);for(const u of Object.keys(o))this.At(u,n),this.Pt(o[u],n)}yt(e,n){const o=e.values||[];this.Tt(n,50);for(const u of o)this.Pt(u,n)}ft(e,n){this.Tt(n,37),Et.fromName(e).path.forEach(o=>{this.Tt(n,60),this.wt(o,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function xv(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function $l(i){const e=64-function(o){let u=0;for(let c=0;c<8;++c){const g=xv(255&o[c]);if(u+=g,8!==g)break}return u}(i);return Math.ceil(e/8)}Zc.St=new Zc;class kh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Dt(o.value),o=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ft(o.value),o=n.next();this.Mt()}xt(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Dt(o);else if(o<2048)this.Dt(960|o>>>6),this.Dt(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|o>>>12),this.Dt(128|63&o>>>6),this.Dt(128|63&o);else{const u=n.codePointAt(0);this.Dt(240|u>>>18),this.Dt(128|63&u>>>12),this.Dt(128|63&u>>>6),this.Dt(128|63&u)}}this.Ct()}Ot(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const u=n.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Nt(e){const n=this.Bt(e),o=$l(n);this.Lt(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}kt(e){const n=this.Bt(e),o=$l(n);this.Lt(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(c){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,c,!1),new Uint8Array(g.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class kv{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class UI{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class tp{constructor(){this.Wt=new kh,this.Gt=new kv(this.Wt),this.zt=new UI(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class jd{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new jd(this.indexId,this.documentKey,this.arrayValue,o)}}function Qc(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=Fv(i.arrayValue,e.arrayValue),0!==n?n:(n=Fv(i.directionalValue,e.directionalValue),0!==n?n:Et.comparator(i.documentKey,e.documentKey)))}function Fv(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class Rg{constructor(e){this.Jt=new Ir((n,o)=>xr.comparator(n.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const o=n;o.isInequality()?this.Jt=this.Jt.add(o):this.Zt.push(o)}}get Xt(){return this.Jt.size>1}en(e){if(Bt(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=$s(e);if(void 0!==n&&!this.tn(n))return!1;const o=Aa(e);let u=new Set,c=0,g=0;for(;c<o.length&&this.tn(o[c]);++c)u=u.add(o[c].fieldPath.canonicalString());if(c===o.length)return!0;if(this.Jt.size>0){const R=this.Jt.getIterator().getNext();if(!u.has(R.field.canonicalString())){const x=o[c];if(!this.nn(R,x)||!this.rn(this.Yt[g++],x))return!1}++c}for(;c<o.length;++c)if(g>=this.Yt.length||!this.rn(this.Yt[g++],o[c]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Ir(xr.comparator);const n=[];for(const o of this.Zt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)n.push(new Ai(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),n.push(new Ai(o.field,0))}for(const o of this.Yt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),n.push(new Ai(o.field,"asc"===o.dir?0:1)));return new Zr(Zr.UNKNOWN_ID,this.collectionId,n,Ya.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function k_(i){var e,n;if(Bt(i instanceof h||i instanceof m),i instanceof h){if(i instanceof In){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(c=>h.create(i.field,"==",c)))||[];return m.create(u,"or")}return i}const o=i.filters.map(u=>k_(u));return m.create(o,i.op)}function Lv(i){if(0===i.getFilters().length)return[];const e=Ju(k_(i));return Bt(np(e)),Pg(e)||Mg(e)?[e]:e.getFilters()}function Pg(i){return i instanceof h}function Mg(i){return i instanceof m&&$(i)}function np(i){return Pg(i)||Mg(i)||function(n){if(n instanceof m&&F(n)){for(const o of n.getFilters())if(!Pg(o)&&!Mg(o))return!1;return!0}return!1}(i)}function Ju(i){if(Bt(i instanceof h||i instanceof m),i instanceof h)return i;if(1===i.filters.length)return Ju(i.filters[0]);const e=i.filters.map(o=>Ju(o));let n=m.create(e,i.op);return n=Fh(n),np(n)?n:(Bt(n instanceof m),Bt(T(n)),Bt(n.filters.length>1),n.filters.reduce((o,u)=>Yc(o,u)))}function Yc(i,e){let n;return Bt(i instanceof h||i instanceof m),Bt(e instanceof h||e instanceof m),n=i instanceof h?e instanceof h?m.create([i,e],"and"):Og(i,e):e instanceof h?Og(e,i):function(u,c){if(Bt(u.filters.length>0&&c.filters.length>0),T(u)&&T(c))return Me(u,c.getFilters());const g=F(u)?u:c,R=F(u)?c:u,x=g.filters.map(H=>Yc(H,R));return m.create(x,"or")}(i,e),Fh(n)}function Og(i,e){if(T(e))return Me(e,i.getFilters());{const n=e.filters.map(o=>Yc(i,o));return m.create(n,"or")}}function Fh(i){if(Bt(i instanceof h||i instanceof m),i instanceof h)return i;const e=i.getFilters();if(1===e.length)return Fh(e[0]);if(re(i))return i;const n=e.map(u=>Fh(u)),o=[];return n.forEach(u=>{u instanceof h?o.push(u):u instanceof m&&(u.op===i.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:m.create(o,i.op)}class F_{constructor(){this.on=new L_}addToCollectionParentIndex(e,n){return this.on.add(n),C.resolve()}getCollectionParents(e,n){return C.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return C.resolve()}deleteFieldIndex(e,n){return C.resolve()}deleteAllFieldIndexes(e){return C.resolve()}createTargetIndexes(e,n){return C.resolve()}getDocumentsMatchingTarget(e,n){return C.resolve(null)}getIndexType(e,n){return C.resolve(0)}getFieldIndexes(e,n){return C.resolve([])}getNextCollectionGroupToUpdate(e){return C.resolve(null)}getMinOffset(e,n){return C.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,n){return C.resolve(Ps.min())}updateCollectionGroup(e,n,o){return C.resolve()}updateIndexEntries(e,n){return C.resolve()}}class L_{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new Ir(Un.comparator),c=!u.has(o);return this.index[n]=u.add(o),c}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Ir(Un.comparator)).toArray()}}const Ng=new Uint8Array(0);class BI{constructor(e,n){this.user=e,this.databaseId=n,this._n=new L_,this.an=new Gs(o=>ei(o),(o,u)=>Si(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const c={collectionId:o,parent:ps(u)};return rp(e).put(c)}return C.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[Rl(n),""],!1,!0);return rp(e).W(u).next(c=>{for(const g of c){if(g.collectionId!==n)break;o.push(po(g.parent))}return o})}addFieldIndex(e,n){const o=ip(e),u={indexId:(R=n).indexId,collectionGroup:R.collectionGroup,fields:R.fields.map(x=>[x.fieldPath.canonicalString(),x.kind])};var R;delete u.indexId;const c=o.add(u);if(n.indexState){const g=Lh(e);return c.next(R=>{g.put(bg(R,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return c.next()}deleteFieldIndex(e,n){const o=ip(e),u=Lh(e),c=ac(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=ip(e),o=ac(e),u=Lh(e);return n.H().next(()=>o.H()).next(()=>u.H())}createTargetIndexes(e,n){return C.forEach(this.un(n),o=>this.getIndexType(e,o).next(u=>{if(0===u||1===u){const c=new Rg(o).sn();if(null!=c)return this.addFieldIndex(e,c)}}))}getDocumentsMatchingTarget(e,n){const o=ac(e);let u=!0;const c=new Map;return C.forEach(this.un(n),g=>this.cn(e,g).next(R=>{u&&(u=!!R),c.set(g,R)})).next(()=>{if(u){let g=kn();const R=[];return C.forEach(c,(x,H)=>{var fn;at("IndexedDbIndexManager",`Using index ${fn=x,`id=${fn.indexId}|cg=${fn.collectionGroup}|f=${fn.fields.map(Jn=>`${Jn.fieldPath}:${Jn.kind}`).join(",")}`} to execute ${ei(n)}`);const K=function(fn,Jn){const Ar=$s(Jn);if(void 0===Ar)return null;for(const Mr of _s(fn,Ar.fieldPath))switch(Mr.op){case"array-contains-any":return Mr.value.arrayValue.values||[];case"array-contains":return[Mr.value]}return null}(H,x),ie=function(fn,Jn){const Ar=new Map;for(const Mr of Aa(Jn))for(const Os of _s(fn,Mr.fieldPath))switch(Os.op){case"==":case"in":Ar.set(Mr.fieldPath.canonicalString(),Os.value);break;case"not-in":case"!=":return Ar.set(Mr.fieldPath.canonicalString(),Os.value),Array.from(Ar.values())}return null}(H,x),we=function(fn,Jn){const Ar=[];let Mr=!0;for(const Os of Aa(Jn)){const il=0===Os.kind?so(fn,Os.fieldPath,fn.startAt):$o(fn,Os.fieldPath,fn.startAt);Ar.push(il.value),Mr&&(Mr=il.inclusive)}return new qu(Ar,Mr)}(H,x),ze=function(fn,Jn){const Ar=[];let Mr=!0;for(const Os of Aa(Jn)){const il=0===Os.kind?$o(fn,Os.fieldPath,fn.endAt):so(fn,Os.fieldPath,fn.endAt);Ar.push(il.value),Mr&&(Mr=il.inclusive)}return new qu(Ar,Mr)}(H,x),mt=this.ln(x,H,we),wt=this.ln(x,H,ze),Ct=this.hn(x,H,ie),gn=this.Pn(x.indexId,K,mt,we.inclusive,wt,ze.inclusive,Ct);return C.forEach(gn,Cn=>o.j(Cn,n.limit).next(fn=>{fn.forEach(Jn=>{const Ar=Et.fromSegments(Jn.documentKey);g.has(Ar)||(g=g.add(Ar),R.push(Ar))})}))}).next(()=>R)}return C.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:Lv(m.create(e.filters,"and")).map(o=>Bn(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,o,u,c,g,R){const x=(null!=n?n.length:1)*Math.max(o.length,c.length),H=x/(null!=n?n.length:1),K=[];for(let ie=0;ie<x;++ie){const we=n?this.In(n[ie/H]):Ng,ze=this.Tn(e,we,o[ie%H],u),mt=this.En(e,we,c[ie%H],g),wt=R.map(Ct=>this.Tn(e,we,Ct,!0));K.push(...this.createRange(ze,mt,wt))}return K}Tn(e,n,o,u){const c=new jd(e,Et.empty(),n,o);return u?c:c.Ht()}En(e,n,o,u){const c=new jd(e,Et.empty(),n,o);return u?c.Ht():c}cn(e,n){const o=new Rg(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(c=>{let g=null;for(const R of c)o.en(R)&&(!g||R.fields.length>g.fields.length)&&(g=R);return g})}getIndexType(e,n){let o=2;const u=this.un(n);return C.forEach(u,c=>this.cn(e,c).next(g=>{g?0!==o&&g.fields.length<function(x){let H=new Ir(xr.comparator),K=!1;for(const ie of x.filters)for(const we of ie.getFlattenedFilters())we.field.isKeyField()||("array-contains"===we.op||"array-contains-any"===we.op?K=!0:H=H.add(we.field));for(const ie of x.orderBy)ie.field.isKeyField()||(H=H.add(ie.field));return H.size+(K?1:0)}(c)&&(o=1):o=0})).next(()=>null!==n.limit&&u.length>1&&2===o?1:o)}dn(e,n){const o=new tp;for(const u of Aa(e)){const c=n.data.field(u.fieldPath);if(null==c)return null;const g=o.jt(u.kind);Zc.St.ht(c,g)}return o.Ut()}In(e){const n=new tp;return Zc.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const o=new tp;return Zc.St.ht(da(this.databaseId,n),o.jt(function(c){const g=Aa(c);return 0===g.length?0:g[g.length-1].kind}(e))),o.Ut()}hn(e,n,o){if(null===o)return[];let u=[];u.push(new tp);let c=0;for(const g of Aa(e)){const R=o[c++];for(const x of u)if(this.Rn(n,g.fieldPath)&&Pa(R))u=this.Vn(u,g,R);else{const H=x.jt(g.kind);Zc.St.ht(R,H)}}return this.mn(u)}ln(e,n,o){return this.hn(e,n,o.position)}mn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Ut();return n}Vn(e,n,o){const u=[...e],c=[];for(const g of o.arrayValue.values||[])for(const R of u){const x=new tp;x.seed(R.Ut()),Zc.St.ht(g,x.jt(n.kind)),c.push(x)}return c}Rn(e,n){return!!e.filters.find(o=>o instanceof h&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=ip(e),u=Lh(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(c=>{const g=[];return C.forEach(c,R=>u.get([R.indexId,this.uid]).next(x=>{g.push(function(K,ie){const we=ie?new Ya(ie.sequenceNumber,new Ps(Wc(ie.readTime),new Et(po(ie.documentKey)),ie.largestBatchId)):Ya.empty(),ze=K.fields.map(([mt,wt])=>new Ai(xr.fromServerFormat(mt),wt));return new Zr(K.indexId,K.collectionGroup,ze,we)}(R,x))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const c=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==c?c:En(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=ip(e),c=Lh(e);return this.fn(e).next(g=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(R=>C.forEach(R,x=>c.put(bg(x.indexId,this.user,g,o)))))}updateIndexEntries(e,n){const o=new Map;return C.forEach(n,(u,c)=>{const g=o.get(u.collectionGroup);return(g?C.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(R=>(o.set(u.collectionGroup,R),C.forEach(R,x=>this.gn(e,u,x).next(H=>{const K=this.pn(c,x);return H.isEqual(K)?C.resolve():this.yn(e,c,x,H,K)}))))})}wn(e,n,o,u){return ac(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.An(o,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,o,u){return ac(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.An(o,n.key),n.key.path.toArray()])}gn(e,n,o){const u=ac(e);let c=new Ir(Qc);return u.Y({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.An(o,n)])},(g,R)=>{c=c.add(new jd(o.indexId,n,R.arrayValue,R.directionalValue))}).next(()=>c)}pn(e,n){let o=new Ir(Qc);const u=this.dn(n,e);if(null==u)return o;const c=$s(n);if(null!=c){const g=e.data.field(c.fieldPath);if(Pa(g))for(const R of g.arrayValue.values||[])o=o.add(new jd(n.indexId,e.key,this.In(R),u))}else o=o.add(new jd(n.indexId,e.key,Ng,u));return o}yn(e,n,o,u,c){at("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const g=[];return function(x,H,K,ie,we){const ze=x.getIterator(),mt=H.getIterator();let wt=tu(ze),Ct=tu(mt);for(;wt||Ct;){let gn=!1,Cn=!1;if(wt&&Ct){const fn=K(wt,Ct);fn<0?Cn=!0:fn>0&&(gn=!0)}else null!=wt?Cn=!0:gn=!0;gn?(ie(Ct),Ct=tu(mt)):Cn?(we(wt),wt=tu(ze)):(wt=tu(ze),Ct=tu(mt))}}(u,c,Qc,R=>{g.push(this.wn(e,n,o,R))},R=>{g.push(this.Sn(e,n,o,R))}),C.waitFor(g)}fn(e){let n=1;return Lh(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,c)=>{c.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((g,R)=>Qc(g,R)).filter((g,R,x)=>!R||0!==Qc(g,x[R-1]));const u=[];u.push(e);for(const g of o){const R=Qc(g,e),x=Qc(g,n);if(0===R)u[0]=e.Ht();else if(R>0&&x<0)u.push(g),u.push(g.Ht());else if(x>0)break}u.push(n);const c=[];for(let g=0;g<u.length;g+=2){if(this.bn(u[g],u[g+1]))return[];c.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,Ng,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,Ng,[]]))}return c}bn(e,n){return Qc(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(xg)}getMinOffset(e,n){return C.mapArray(this.un(n),o=>this.cn(e,o).next(u=>u||Lt())).next(xg)}}function rp(i){return is(i,"collectionParents")}function ac(i){return is(i,"indexEntries")}function ip(i){return is(i,"indexConfiguration")}function Lh(i){return is(i,"indexState")}function xg(i){Bt(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;dl(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new Ps(e.readTime,e.documentKey,n)}const V_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qo{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new qo(e,qo.DEFAULT_COLLECTION_PERCENTILE,qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function U_(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),c=[],g=IDBKeyRange.only(n.batchId);let R=0;const x=o.Y({range:g},(K,ie,we)=>(R++,we.delete()));c.push(x.next(()=>{Bt(1===R)}));const H=[];for(const K of n.mutations){const ie=Ol(e,K.key.path,n.batchId);c.push(u.delete(ie)),H.push(K.key)}return C.waitFor(c).next(()=>H)}function sp(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Lt();e=i.noDocument}return JSON.stringify(e).length}qo.DEFAULT_COLLECTION_PERCENTILE=10,qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qo.DEFAULT=new qo(41943040,qo.DEFAULT_COLLECTION_PERCENTILE,qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qo.DISABLED=new qo(-1,0,0);class Vh{constructor(e,n,o,u){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=u,this.Dn={}}static ct(e,n,o,u){Bt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Vh(c,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return uc(e).Y({index:"userMutationsIndex",range:o},(u,c,g)=>{n=!1,g.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const c=lc(e),g=uc(e);return g.add({}).next(R=>{Bt("number"==typeof R);const x=new Rd(R,n,o,u),H=function(ze,mt,wt){const Ct=wt.baseMutations.map(Cn=>kd(ze.ut,Cn)),gn=wt.mutations.map(Cn=>kd(ze.ut,Cn));return{userId:mt,batchId:wt.batchId,localWriteTimeMs:wt.localWriteTime.toMillis(),baseMutations:Ct,mutations:gn}}(this.serializer,this.userId,x),K=[];let ie=new Ir((we,ze)=>En(we.canonicalString(),ze.canonicalString()));for(const we of u){const ze=Ol(this.userId,we.key.path,R);ie=ie.add(we.key.path.popLast()),K.push(g.put(H)),K.push(c.put(ze,fl))}return ie.forEach(we=>{K.push(this.indexManager.addToCollectionParentIndex(e,we))}),e.addOnCommittedListener(()=>{this.Dn[R]=x.keys()}),C.waitFor(K).next(()=>x)})}lookupMutationBatch(e,n){return uc(e).get(n).next(o=>o?(Bt(o.userId===this.userId),Hl(this.serializer,o)):null)}Cn(e,n){return this.Dn[n]?C.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.Dn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let c=null;return uc(e).Y({index:"userMutationsIndex",range:u},(g,R,x)=>{R.userId===this.userId&&(Bt(R.batchId>=o),c=Hl(this.serializer,R)),x.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return uc(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(u,c,g)=>{o=c.batchId,g.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return uc(e).W("userMutationsIndex",n).next(o=>o.map(u=>Hl(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=Ja(this.userId,n.path),u=IDBKeyRange.lowerBound(o),c=[];return lc(e).Y({range:u},(g,R,x)=>{const[H,K,ie]=g,we=po(K);if(H===this.userId&&n.path.isEqual(we))return uc(e).get(ie).next(ze=>{if(!ze)throw Lt();Bt(ze.userId===this.userId),c.push(Hl(this.serializer,ze))});x.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Ir(En);const u=[];return n.forEach(c=>{const g=Ja(this.userId,c.path),R=IDBKeyRange.lowerBound(g),x=lc(e).Y({range:R},(H,K,ie)=>{const[we,ze,mt]=H,wt=po(ze);we===this.userId&&c.path.isEqual(wt)?o=o.add(mt):ie.done()});u.push(x)}),C.waitFor(u).next(()=>this.vn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,c=Ja(this.userId,o),g=IDBKeyRange.lowerBound(c);let R=new Ir(En);return lc(e).Y({range:g},(x,H,K)=>{const[ie,we,ze]=x,mt=po(we);ie===this.userId&&o.isPrefixOf(mt)?mt.length===u&&(R=R.add(ze)):K.done()}).next(()=>this.vn(e,R))}vn(e,n){const o=[],u=[];return n.forEach(c=>{u.push(uc(e).get(c).next(g=>{if(null===g)throw Lt();Bt(g.userId===this.userId),o.push(Hl(this.serializer,g))}))}),C.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return U_(e.ae,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),C.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return C.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return lc(e).Y({range:o},(c,g,R)=>{if(c[0]===this.userId){const x=po(c[1]);u.push(x)}else R.done()}).next(()=>{Bt(0===u.length)})})}containsKey(e,n){return Uh(e,this.userId,n)}Mn(e){return B_(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Uh(i,e,n){const o=Ja(e,n.path),u=o[1],c=IDBKeyRange.lowerBound(o);let g=!1;return lc(i).Y({range:c,J:!0},(R,x,H)=>{const[K,ie,we]=R;K===e&&ie===u&&(g=!0),H.done()}).next(()=>g)}function uc(i){return is(i,"mutations")}function lc(i){return is(i,"documentMutations")}function B_(i){return is(i,"mutationQueues")}class bu{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new bu(0)}static Nn(){return new bu(-1)}}class Vv{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const o=new bu(n.highestTargetId);return n.highestTargetId=o.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>$t.fromTimestamp(new Er(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Bn(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.Ln(e,u)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(o=>(o.targetCount+=1,this.qn(n,o),this.Ln(e,o))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Hd(e).delete(n.targetId)).next(()=>this.Bn(e)).next(o=>(Bt(o.targetCount>0),o.targetCount-=1,this.Ln(e,o)))}removeTargets(e,n,o){let u=0;const c=[];return Hd(e).Y((g,R)=>{const x=Oh(R);x.sequenceNumber<=n&&null===o.get(x.targetId)&&(u++,c.push(this.removeTargetData(e,x)))}).next(()=>C.waitFor(c)).next(()=>u)}forEachTarget(e,n){return Hd(e).Y((o,u)=>{const c=Oh(u);n(c)})}Bn(e){return op(e).get("targetGlobalKey").next(n=>(Bt(null!==n),n))}Ln(e,n){return op(e).put("targetGlobalKey",n)}kn(e,n){return Hd(e).put(Kc(this.serializer,n))}qn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=ei(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let c=null;return Hd(e).Y({range:u,index:"queryTargetsIndex"},(g,R,x)=>{const H=Oh(R);Si(n,H.target)&&(c=H,x.done())}).next(()=>c)}addMatchingKeys(e,n,o){const u=[],c=zl(e);return n.forEach(g=>{const R=ps(g.path);u.push(c.put({targetId:o,path:R})),u.push(this.referenceDelegate.addReference(e,o,g))}),C.waitFor(u)}removeMatchingKeys(e,n,o){const u=zl(e);return C.forEach(n,c=>{const g=ps(c.path);return C.waitFor([u.delete([o,g]),this.referenceDelegate.removeReference(e,o,c)])})}removeMatchingKeysForTargetId(e,n){const o=zl(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=zl(e);let c=kn();return u.Y({range:o,J:!0},(g,R,x)=>{const H=po(g[1]),K=new Et(H);c=c.add(K)}).next(()=>c)}containsKey(e,n){const o=ps(n.path),u=IDBKeyRange.bound([o],[Rl(o)],!1,!0);let c=0;return zl(e).Y({index:"documentTargetsIndex",J:!0,range:u},([g,R],x,H)=>{0!==g&&(c++,H.done())}).next(()=>c>0)}_t(e,n){return Hd(e).get(n).next(o=>o?Oh(o):null)}}function Hd(i){return is(i,"targets")}function op(i){return is(i,"targetGlobal")}function zl(i){return is(i,"targetDocuments")}function j_([i,e],[n,o]){const u=En(i,n);return 0===u?En(e,o):u}class Uv{constructor(e){this.Qn=e,this.buffer=new Ir(j_),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();j_(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class H_{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;at("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){Le(o)?at("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield O(o)}yield n.Gn(3e5)}))}}class Bv{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return C.resolve(bi._e);const o=new Uv(n);return this.zn.forEachTarget(e,u=>o.Un(u.sequenceNumber)).next(()=>this.zn.Hn(e,u=>o.Un(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.zn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector","Garbage collection skipped; disabled"),C.resolve(V_)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),V_):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let o,u,c,g,R,x,H;const K=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ie=>(ie>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ie}`),u=this.params.maximumSequenceNumbersToCollect):u=ie,g=Date.now(),this.nthSequenceNumber(e,u))).next(ie=>(o=ie,R=Date.now(),this.removeTargets(e,o,n))).next(ie=>(c=ie,x=Date.now(),this.removeOrphanedDocuments(e,o))).next(ie=>(H=Date.now(),js()<=Te.in.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-K}ms\n\tDetermined least recently used ${u} in `+(R-g)+`ms\n\tRemoved ${c} targets in `+(x-R)+`ms\n\tRemoved ${ie} documents in `+(H-x)+`ms\nTotal Duration: ${H-K}ms`),C.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:c,documentsRemoved:ie})))}}class jI{constructor(e,n){this.db=e,this.garbageCollector=function kg(i,e){return new Bv(i,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}Yn(e){let n=0;return this.Hn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(o,u)=>n(u))}addReference(e,n,o){return Fg(e,o)}removeReference(e,n,o){return Fg(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return Fg(e,n)}Xn(e,n){return function(u,c){let g=!1;return B_(u).Z(R=>Uh(u,R,c).next(x=>(x&&(g=!0),C.resolve(!x)))).next(()=>g)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let c=0;return this.Zn(e,(g,R)=>{if(R<=n){const x=this.Xn(e,g).next(H=>{if(!H)return c++,o.getEntry(e,g).next(()=>(o.removeEntry(g,$t.min()),zl(e).delete([0,ps(g.path)])))});u.push(x)}}).next(()=>C.waitFor(u)).next(()=>o.apply(e)).next(()=>c)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return Fg(e,n)}Zn(e,n){const o=zl(e);let u,c=bi._e;return o.Y({index:"documentTargetsIndex"},([g,R],{path:x,sequenceNumber:H})=>{0===g?(c!==bi._e&&n(new Et(po(u)),c),c=H,u=x):c=bi._e}).next(()=>{c!==bi._e&&n(new Et(po(u)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Fg(i,e){return zl(i).put((u=i.currentSequenceNumber,{targetId:0,path:ps(e.path),sequenceNumber:u}));var u}class $d{constructor(){this.changes=new Gs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?C.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Bh{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return cc(e).put(o)}removeEntry(e,n,o){return cc(e).delete(function(c,g){const R=c.path.toArray();return[R.slice(0,R.length-2),R[R.length-2],Xf(g),R[R.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.er(e,o)))}getEntry(e,n){let o=Mn.newInvalidDocument(n);return cc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(jh(n))},(u,c)=>{o=this.tr(n,c)}).next(()=>o)}nr(e,n){let o={size:0,document:Mn.newInvalidDocument(n)};return cc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(jh(n))},(u,c)=>{o={document:this.tr(n,c),size:sp(c)}}).next(()=>o)}getEntries(e,n){let o=vs();return this.rr(e,n,(u,c)=>{const g=this.tr(u,c);o=o.insert(u,g)}).next(()=>o)}ir(e,n){let o=vs(),u=new Dr(Et.comparator);return this.rr(e,n,(c,g)=>{const R=this.tr(c,g);o=o.insert(c,R),u=u.insert(c,sp(g))}).next(()=>({documents:o,sr:u}))}rr(e,n,o){if(n.isEmpty())return C.resolve();let u=new Ir(Ug);n.forEach(x=>u=u.add(x));const c=IDBKeyRange.bound(jh(u.first()),jh(u.last())),g=u.getIterator();let R=g.getNext();return cc(e).Y({index:"documentKeyIndex",range:c},(x,H,K)=>{const ie=Et.fromSegments([...H.prefixPath,H.collectionGroup,H.documentId]);for(;R&&Ug(R,ie)<0;)o(R,null),R=g.getNext();R&&R.isEqual(ie)&&(o(R,H),R=g.hasNext()?g.getNext():null),R?K.U(jh(R)):K.done()}).next(()=>{for(;R;)o(R,null),R=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,n,o,u,c){const g=n.path,R=[g.popLast().toArray(),g.lastSegment(),Xf(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],x=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cc(e).W(IDBKeyRange.bound(R,x,!0)).next(H=>{c?.incrementDocumentReadCount(H.length);let K=vs();for(const ie of H){const we=this.tr(Et.fromSegments(ie.prefixPath.concat(ie.collectionGroup,ie.documentId)),ie);we.isFoundDocument()&&(Pr(n,we)||u.has(we.key))&&(K=K.insert(we.key,we))}return K})}getAllFromCollectionGroup(e,n,o,u){let c=vs();const g=Vg(n,o),R=Vg(n,Ps.max());return cc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,R,!0)},(x,H,K)=>{const ie=this.tr(Et.fromSegments(H.prefixPath.concat(H.collectionGroup,H.documentId)),H);c=c.insert(ie.key,ie),c.size===u&&K.done()}).next(()=>c)}newChangeBuffer(e){return new $_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return ap(e).get("remoteDocumentGlobalKey").next(n=>(Bt(!!n),n))}er(e,n){return ap(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const o=function Vd(i,e){let n;if(e.document)n=qc(i.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Et.fromSegments(e.noDocument.path),u=Wc(e.noDocument.readTime);n=Mn.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Lt();{const o=Et.fromSegments(e.unknownDocument.path),u=Wc(e.unknownDocument.version);n=Mn.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(u){const c=new Er(u[0],u[1]);return $t.fromTimestamp(c)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual($t.min()))return o}return Mn.newInvalidDocument(e)}}function Lg(i){return new Bh(i)}class $_ extends $d{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Gs(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new Ir((c,g)=>En(c.canonicalString(),g.canonicalString()));return this.changes.forEach((c,g)=>{const R=this.ar.get(c);if(n.push(this._r.removeEntry(e,c,R.readTime)),g.isValidDocument()){const x=O_(this._r.serializer,g);u=u.add(c.path.popLast());const H=sp(x);o+=H-R.size,n.push(this._r.addEntry(e,c,x))}else if(o-=R.size,this.trackRemovals){const x=O_(this._r.serializer,g.convertToNoDocument($t.min()));n.push(this._r.addEntry(e,c,x))}}),u.forEach(c=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,c))}),n.push(this._r.updateMetadata(e,o)),C.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(o=>(this.ar.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:o,sr:u})=>(u.forEach((c,g)=>{this.ar.set(c,{size:g,readTime:o.get(c).readTime})}),o))}}function ap(i){return is(i,"remoteDocumentGlobal")}function cc(i){return is(i,"remoteDocumentsV14")}function jh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Vg(i,e){const n=e.documentKey.path.toArray();return[i,Xf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ug(i,e){const n=i.path.toArray(),o=e.path.toArray();let u=0;for(let c=0;c<n.length-2&&c<o.length-2;++c)if(u=En(n[c],o[c]),u)return u;return u=En(n.length,o.length),u||(u=En(n[n.length-2],o[o.length-2]),u||En(n[n.length-1],o[o.length-1]))}class up{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class jv{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==o&&Zu(o.mutation,u,gs.empty(),Er.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,kn()).next(()=>o))}getLocalViewOfDocuments(e,n,o=kn()){const u=zo();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(c=>{let g=Uc();return c.forEach((R,x)=>{g=g.insert(R,x.overlayedDocument)}),g}))}getOverlayedDocuments(e,n){const o=zo();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,kn()))}populateOverlays(e,n,o){const u=[];return o.forEach(c=>{n.has(c)||u.push(c)}),this.documentOverlayCache.getOverlays(e,u).next(c=>{c.forEach((g,R)=>{n.set(g,R)})})}computeViews(e,n,o,u){let c=vs();const g=Cd(),R=Cd();return n.forEach((x,H)=>{const K=o.get(H.key);u.has(H.key)&&(void 0===K||K.mutation instanceof pa)?c=c.insert(H.key,H):void 0!==K?(g.set(H.key,K.mutation.getFieldMask()),Zu(K.mutation,H,K.mutation.getFieldMask(),Er.now())):g.set(H.key,gs.empty())}),this.recalculateAndSaveOverlays(e,c).next(x=>(x.forEach((H,K)=>g.set(H,K)),n.forEach((H,K)=>{var ie;return R.set(H,new up(K,null!==(ie=g.get(H))&&void 0!==ie?ie:null))}),R))}recalculateAndSaveOverlays(e,n){const o=Cd();let u=new Dr((g,R)=>g-R),c=kn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(g=>{for(const R of g)R.keys().forEach(x=>{const H=n.get(x);if(null===H)return;let K=o.get(x)||gs.empty();K=R.applyToLocalView(H,K),o.set(x,K);const ie=(u.get(R.batchId)||kn()).add(x);u=u.insert(R.batchId,ie)})}).next(()=>{const g=[],R=u.getReverseIterator();for(;R.hasNext();){const x=R.getNext(),H=x.key,K=x.value,ie=Ig();K.forEach(we=>{if(!c.has(we)){const ze=Th(n.get(we),o.get(we));null!==ze&&ie.set(we,ze),c=c.add(we)}}),g.push(this.documentOverlayCache.saveOverlays(e,H,ie))}return C.waitFor(g)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,u){return Et.isDocumentKey((g=n).path)&&null===g.collectionGroup&&0===g.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):Tu(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u);var g}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(c=>{const g=u-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-c.size):C.resolve(zo());let R=-1,x=c;return g.next(H=>C.forEach(H,(K,ie)=>(R<ie.largestBatchId&&(R=ie.largestBatchId),c.get(K)?C.resolve():this.remoteDocumentCache.getEntry(e,K).next(we=>{x=x.insert(K,we)}))).next(()=>this.populateOverlays(e,H,c)).next(()=>this.computeViews(e,x,H,kn())).next(K=>({batchId:R,changes:Eh(K)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Et(n)).next(o=>{let u=Uc();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const c=n.collectionGroup;let g=Uc();return this.indexManager.getCollectionParents(e,c).next(R=>C.forEach(R,x=>{const H=(ie=n,we=x.child(c),new So(we,null,ie.explicitOrderBy.slice(),ie.filters.slice(),ie.limit,ie.limitType,ie.startAt,ie.endAt));var ie,we;return this.getDocumentsMatchingCollectionQuery(e,H,o,u).next(K=>{K.forEach((ie,we)=>{g=g.insert(ie,we)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,n,o,u){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(g=>(c=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,c,u))).next(g=>{c.forEach((x,H)=>{const K=H.getKey();null===g.get(K)&&(g=g.insert(K,Mn.newInvalidDocument(K)))});let R=Uc();return g.forEach((x,H)=>{const K=c.get(x);void 0!==K&&Zu(K.mutation,H,gs.empty(),Er.now()),Pr(n,H)&&(R=R.insert(x,H))}),R})}}class Bg{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return C.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(u=n).id,version:u.version,createTime:Ri(u.createTime)}),C.resolve();var u}getNamedQuery(e,n){return C.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(u=n).name,query:Bd(u.bundledQuery),readTime:Ri(u.readTime)}),C.resolve();var u}}class Hv{constructor(){this.overlays=new Dr(Et.comparator),this.lr=new Map}getOverlay(e,n){return C.resolve(this.overlays.get(n))}getOverlays(e,n){const o=zo();return C.forEach(n,u=>this.getOverlay(e,u).next(c=>{null!==c&&o.set(u,c)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,c)=>{this.lt(e,n,c)}),C.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.lr.get(o);return void 0!==u&&(u.forEach(c=>this.overlays=this.overlays.remove(c)),this.lr.delete(o)),C.resolve()}getOverlaysForCollection(e,n,o){const u=zo(),c=n.length+1,g=new Et(n.child("")),R=this.overlays.getIteratorFrom(g);for(;R.hasNext();){const x=R.getNext().value,H=x.getKey();if(!n.isPrefixOf(H.path))break;H.path.length===c&&x.largestBatchId>o&&u.set(x.getKey(),x)}return C.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let c=new Dr((H,K)=>H-K);const g=this.overlays.getIterator();for(;g.hasNext();){const H=g.getNext().value;if(H.getKey().getCollectionGroup()===n&&H.largestBatchId>o){let K=c.get(H.largestBatchId);null===K&&(K=zo(),c=c.insert(H.largestBatchId,K)),K.set(H.getKey(),H)}}const R=zo(),x=c.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach((H,K)=>R.set(H,K)),!(R.size()>=u)););return C.resolve(R)}lt(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const g=this.lr.get(u.largestBatchId).delete(o.key);this.lr.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(o.key,new Pd(n,o));let c=this.lr.get(n);void 0===c&&(c=kn(),this.lr.set(n,c)),this.lr.set(n,c.add(o.key))}}class Hh{constructor(){this.hr=new Ir(uo.Pr),this.Ir=new Ir(uo.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const o=new uo(e,n);this.hr=this.hr.add(o),this.Ir=this.Ir.add(o)}Er(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.dr(new uo(e,n))}Ar(e,n){e.forEach(o=>this.removeReference(o,n))}Rr(e){const n=new Et(new Un([])),o=new uo(n,e),u=new uo(n,e+1),c=[];return this.Ir.forEachInRange([o,u],g=>{this.dr(g),c.push(g.key)}),c}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new Et(new Un([])),o=new uo(n,e),u=new uo(n,e+1);let c=kn();return this.Ir.forEachInRange([o,u],g=>{c=c.add(g.key)}),c}containsKey(e){const n=new uo(e,0),o=this.hr.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class uo{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return Et.comparator(e.key,n.key)||En(e.gr,n.gr)}static Tr(e,n){return En(e.gr,n.gr)||Et.comparator(e.key,n.key)}}class z_{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Ir(uo.Pr)}checkEmpty(e){return C.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const c=this.pr;this.pr++;const g=new Rd(c,n,o,u);this.mutationQueue.push(g);for(const R of u)this.yr=this.yr.add(new uo(R.key,c)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return C.resolve(g)}lookupMutationBatch(e,n){return C.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.Sr(n+1),c=u<0?0:u;return C.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return C.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return C.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new uo(n,0),u=new uo(n,Number.POSITIVE_INFINITY),c=[];return this.yr.forEachInRange([o,u],g=>{const R=this.wr(g.gr);c.push(R)}),C.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Ir(En);return n.forEach(u=>{const c=new uo(u,0),g=new uo(u,Number.POSITIVE_INFINITY);this.yr.forEachInRange([c,g],R=>{o=o.add(R.gr)})}),C.resolve(this.br(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let c=o;Et.isDocumentKey(c)||(c=c.child(""));const g=new uo(new Et(c),0);let R=new Ir(En);return this.yr.forEachWhile(x=>{const H=x.key.path;return!!o.isPrefixOf(H)&&(H.length===u&&(R=R.add(x.gr)),!0)},g),C.resolve(this.br(R))}br(e){const n=[];return e.forEach(o=>{const u=this.wr(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){Bt(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let o=this.yr;return C.forEach(n.mutations,u=>{const c=new uo(u.key,n.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.yr=o})}Fn(e){}containsKey(e,n){const o=new uo(n,0),u=this.yr.firstAfterOrEqual(o);return C.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return C.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Jc{constructor(e){this.Cr=e,this.docs=new Dr(Et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),c=u?u.size:0,g=this.Cr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:g}),this.size+=g-c,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return C.resolve(o?o.document.mutableCopy():Mn.newInvalidDocument(n))}getEntries(e,n){let o=vs();return n.forEach(u=>{const c=this.docs.get(u);o=o.insert(u,c?c.document.mutableCopy():Mn.newInvalidDocument(u))}),C.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let c=vs();const g=n.path,R=new Et(g.child("")),x=this.docs.getIteratorFrom(R);for(;x.hasNext();){const{key:H,value:{document:K}}=x.getNext();if(!g.isPrefixOf(H.path))break;H.path.length>g.length+1||dl(cl(K),o)<=0||(u.has(K.key)||Pr(n,K))&&(c=c.insert(K.key,K.mutableCopy()))}return C.resolve(c)}getAllFromCollectionGroup(e,n,o,u){Lt()}vr(e,n){return C.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new $v(this)}getSize(e){return C.resolve(this.size)}}class $v extends $d{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this._r.addEntry(e,u)):this._r.removeEntry(o)}),C.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class jg{constructor(e){this.persistence=e,this.Fr=new Gs(n=>ei(n),Si),this.lastRemoteSnapshotVersion=$t.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Hh,this.targetCount=0,this.Nr=bu.On()}forEachTarget(e,n){return this.Fr.forEach((o,u)=>n(u)),C.resolve()}getLastRemoteSnapshotVersion(e){return C.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return C.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),C.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Mr&&(this.Mr=n),C.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new bu(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,C.resolve()}updateTargetData(e,n){return this.kn(n),C.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,C.resolve()}removeTargets(e,n,o){let u=0;const c=[];return this.Fr.forEach((g,R)=>{R.sequenceNumber<=n&&null===o.get(R.targetId)&&(this.Fr.delete(g),c.push(this.removeMatchingKeysForTargetId(e,R.targetId)),u++)}),C.waitFor(c).next(()=>u)}getTargetCount(e){return C.resolve(this.targetCount)}getTargetData(e,n){const o=this.Fr.get(n)||null;return C.resolve(o)}addMatchingKeys(e,n,o){return this.Or.Er(n,o),C.resolve()}removeMatchingKeys(e,n,o){this.Or.Ar(n,o);const u=this.persistence.referenceDelegate,c=[];return u&&n.forEach(g=>{c.push(u.markPotentiallyOrphaned(e,g))}),C.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),C.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Or.mr(n);return C.resolve(o)}containsKey(e,n){return C.resolve(this.Or.containsKey(n))}}class zd{constructor(e,n){this.Br={},this.overlays={},this.Lr=new bi(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new jg(this),this.indexManager=new F_,this.remoteDocumentCache=new Jc(o=>this.referenceDelegate.Qr(o)),this.serializer=new Jf(n),this.Kr=new Bg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Hv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Br[e.toKey()];return o||(o=new z_(n,this.referenceDelegate),this.Br[e.toKey()]=o),o}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,o){at("MemoryPersistence","Starting transaction:",e);const u=new zv(this.Lr.next());return this.referenceDelegate.$r(),o(u).next(c=>this.referenceDelegate.Ur(u).next(()=>c)).toPromise().then(c=>(u.raiseOnCommittedEvent(),c))}Wr(e,n){return C.or(Object.values(this.Br).map(o=>()=>o.containsKey(e,n)))}}class zv extends D{constructor(e){super(),this.currentSequenceNumber=e}}class Gd{constructor(e){this.persistence=e,this.Gr=new Hh,this.zr=null}static jr(e){return new Gd(e)}get Hr(){if(this.zr)return this.zr;throw Lt()}addReference(e,n,o){return this.Gr.addReference(o,n),this.Hr.delete(o.toString()),C.resolve()}removeReference(e,n,o){return this.Gr.removeReference(o,n),this.Hr.add(o.toString()),C.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),C.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(u=>this.Hr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(c=>this.Hr.add(c.toString()))}).next(()=>o.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return C.forEach(this.Hr,o=>{const u=Et.fromPath(o);return this.Jr(e,u).next(c=>{c||n.removeEntry(u,$t.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(o=>{o?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return C.or([()=>C.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class wl{constructor(e){this.serializer=e}N(e,n,o,u){const c=new V("createOrUpgrade",n);var x;o<1&&u>=1&&(e.createObjectStore("owner"),(x=e).createObjectStore("mutationQueues",{keyPath:"userId"}),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Yl,{unique:!0}),x.createObjectStore("documentMutations"),ed(e),function(x){x.createObjectStore("remoteDocuments")}(e));let g=C.resolve();return o<3&&u>=3&&(0!==o&&(function(x){x.deleteObjectStore("targetDocuments"),x.deleteObjectStore("targets"),x.deleteObjectStore("targetGlobal")}(e),ed(e)),g=g.next(()=>function(x){const H=x.store("targetGlobal"),K={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$t.min().toTimestamp(),targetCount:0};return H.put("targetGlobalKey",K)}(c))),o<4&&u>=4&&(0!==o&&(g=g.next(()=>function(x,H){return H.store("mutations").W().next(K=>{x.deleteObjectStore("mutations"),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Yl,{unique:!0});const ie=H.store("mutations"),we=K.map(ze=>ie.put(ze));return C.waitFor(we)})}(e,c))),g=g.next(()=>{!function(x){x.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(g=g.next(()=>this.Zr(c))),o<6&&u>=6&&(g=g.next(()=>(function(x){x.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(c)))),o<7&&u>=7&&(g=g.next(()=>this.ei(c))),o<8&&u>=8&&(g=g.next(()=>this.ti(e,c))),o<9&&u>=9&&(g=g.next(()=>{!function(x){x.objectStoreNames.contains("remoteDocumentChanges")&&x.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(g=g.next(()=>this.ni(c))),o<11&&u>=11&&(g=g.next(()=>{(function(x){x.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(x){x.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(g=g.next(()=>{!function(x){const H=x.createObjectStore("documentOverlays",{keyPath:mh});H.createIndex("collectionPathOverlayIndex",_h,{unique:!1}),H.createIndex("collectionGroupOverlayIndex",Pc,{unique:!1})}(e)})),o<13&&u>=13&&(g=g.next(()=>function(x){const H=x.createObjectStore("remoteDocumentsV14",{keyPath:Hu});H.createIndex("documentKeyIndex",Nl),H.createIndex("collectionGroupIndex",Lf)}(e)).next(()=>this.ri(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(g=g.next(()=>this.ii(e,c))),o<15&&u>=15&&(g=g.next(()=>function(x){x.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),x.createObjectStore("indexState",{keyPath:Sc}).createIndex("sequenceNumberIndex",Vf,{unique:!1}),x.createObjectStore("indexEntries",{keyPath:Ed}).createIndex("documentKeyIndex",Rc,{unique:!1})}(e))),g}Xr(e){let n=0;return e.store("remoteDocuments").Y((o,u)=>{n+=sp(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Zr(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(u=>C.forEach(u,c=>{const g=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",g).next(R=>C.forEach(R,x=>{Bt(x.userId===c.userId);const H=Hl(this.serializer,x);return U_(e,c.userId,H).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const c=[];return o.Y((g,R)=>{const x=new Un(g),H=[0,ps(x)];c.push(n.get(H).next(K=>K?C.resolve():n.put({targetId:0,path:ps(x),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>C.waitFor(c))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:vd});const o=n.store("collectionParents"),u=new L_,c=g=>{if(u.add(g)){const R=g.lastSegment(),x=g.popLast();return o.put({collectionId:R,parent:ps(x)})}};return n.store("remoteDocuments").Y({J:!0},(g,R)=>{const x=new Un(g);return c(x.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([g,R,x],H)=>{const K=po(R);return c(K.popLast())}))}ni(e){const n=e.store("targets");return n.Y((o,u)=>{const c=Oh(u),g=Kc(this.serializer,c);return n.put(g)})}ri(e,n){const o=n.store("remoteDocuments"),u=[];return o.Y((c,g)=>{const R=n.store("remoteDocumentsV14"),x=(ie=g,ie.document?new Et(Un.fromString(ie.document.name).popFirst(5)):ie.noDocument?Et.fromSegments(ie.noDocument.path):ie.unknownDocument?Et.fromSegments(ie.unknownDocument.path):Lt()).path.toArray(),H={prefixPath:x.slice(0,x.length-2),collectionGroup:x[x.length-2],documentId:x[x.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};var ie;u.push(R.put(H))}).next(()=>C.waitFor(u))}ii(e,n){const o=n.store("mutations"),u=Lg(this.serializer),c=new zd(Gd.jr,this.serializer.ut);return o.W().next(g=>{const R=new Map;return g.forEach(x=>{var H;let K=null!==(H=R.get(x.userId))&&void 0!==H?H:kn();Hl(this.serializer,x).keys().forEach(ie=>K=K.add(ie)),R.set(x.userId,K)}),C.forEach(R,(x,H)=>{const K=new bn(H),ie=ep.ct(this.serializer,K),we=c.getIndexManager(K),ze=Vh.ct(K,this.serializer,we,c.referenceDelegate);return new jv(u,ze,ie,we).recalculateAndSaveOverlaysForDocumentKeys(new xl(n,bi._e),x).next()})})}}function ed(i){i.createObjectStore("targetDocuments",{keyPath:Xa}).createIndex("documentTargetsIndex",$u,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vu,{unique:!0}),i.createObjectStore("targetGlobal")}const $h="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Hg{constructor(e,n,o,u,c,g,R,x,H,K,ie=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.si=c,this.window=g,this.document=R,this.oi=H,this._i=K,this.ai=ie,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=we=>Promise.resolve(),!Hg.D())throw new Qe(qe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jI(this,u),this.Ii=n+"main",this.serializer=new Jf(x),this.Ti=new Z(this.Ii,this.ai,new wl(this.serializer)),this.qr=new Vv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Lg(this.serializer),this.Kr=new N_,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===K&&gr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Qe(qe.FAILED_PRECONDITION,$h);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new bi(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var o=(0,Ee.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,Ee.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,Ee.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Gh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Le(e))return at("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return at("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return zh(e).get("owner").next(n=>C.resolve(this.wi(n)))}Si(e){return Gh(e).delete(this.clientId)}bi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=is(o,"clientMetadata");return u.W().next(c=>{const g=e.Ci(c,18e5),R=c.filter(x=>-1===g.indexOf(x));return C.forEach(R,x=>u.delete(x.clientId)).next(()=>R)})}).catch(()=>[]);if(e.Ei)for(const o of n)e.Ei.removeItem(e.vi(o.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?C.resolve(!0):zh(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new Qe(qe.FAILED_PRECONDITION,$h);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gh(e).W().next(o=>void 0===this.Ci(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&at("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new xl(n,bi._e);return e.pi(o).next(()=>e.Si(o))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(o=>this.Di(o.updateTimeMs,n)&&!this.Fi(o.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Gh(e).W().next(n=>this.Ci(n,18e5).map(o=>o.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Vh.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new BI(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return ep.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,o){at("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",c=15===(x=this.ai)?pl:14===x?Jl:13===x?Eu:12===x?yh:11===x?ba:void Lt();var x;let g;return this.Ti.runTransaction(e,u,c,R=>(g=new xl(R,this.Lr?this.Lr.next():bi._e),"readwrite-primary"===n?this.fi(g).next(x=>!!x||this.gi(g)).next(x=>{if(!x)throw gr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new Qe(qe.FAILED_PRECONDITION,bc);return o(g)}).next(x=>this.yi(g).next(()=>x)):this.Li(g).next(()=>o(g)))).then(R=>(g.raiseOnCommittedEvent(),R))}Li(e){return zh(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Qe(qe.FAILED_PRECONDITION,$h)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zh(e).put("owner",n)}static D(){return Z.D()}pi(e){const n=zh(e);return n.get("owner").next(o=>this.wi(o)?(at("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):C.resolve())}Di(e,n){const o=Date.now();return!(e<o-n||e>o&&(gr(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,je.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const o=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return at("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return gr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){gr("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zh(i){return is(i,"owner")}function Gh(i){return is(i,"clientMetadata")}function dc(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class $g{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.ki=o,this.qi=u}static Qi(e,n){let o=kn(),u=kn();for(const c of n.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:u=u.add(c.doc.key)}return new $g(e,n.fromCache,o,u)}}class Gv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class G_{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,o,u){const c={result:null};return this.zi(e,n).next(g=>{c.result=g}).next(()=>{if(!c.result)return this.ji(e,n,u,o).next(g=>{c.result=g})}).next(()=>{if(c.result)return;const g=new Gv;return this.Hi(e,n,g).next(R=>{if(c.result=R,this.$i)return this.Ji(e,n,g,R.size)})}).next(()=>c.result)}Ji(e,n,o,u){return o.documentReadCount<this.Ui?(js()<=Te.in.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",Po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),C.resolve()):(js()<=Te.in.DEBUG&&at("QueryEngine","Query:",Po(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Wi*u?(js()<=Te.in.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",Po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kt(n))):C.resolve())}zi(e,n){if(Fc(n))return C.resolve(null);let o=Kt(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=ki(n,null,"F"),o=Kt(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(c=>{const g=kn(...c);return this.Gi.getDocuments(e,g).next(R=>this.indexManager.getMinOffset(e,o).next(x=>{const H=this.Yi(n,R);return this.Zi(n,H,g,x.readTime)?this.zi(e,ki(n,null,"F")):this.Xi(e,H,n,x)}))})))}ji(e,n,o,u){return Fc(n)||u.isEqual($t.min())?C.resolve(null):this.Gi.getDocuments(e,o).next(c=>{const g=this.Yi(n,c);return this.Zi(n,g,o,u)?C.resolve(null):(js()<=Te.in.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Po(n)),this.Xi(e,g,n,Pl(u,-1)).next(R=>R))})}Yi(e,n){let o=new Ir(Lc(e));return n.forEach((u,c)=>{Pr(e,c)&&(o=o.add(c))}),o}Zi(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const c="F"===e.limitType?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(u)>0)}Hi(e,n,o){return js()<=Te.in.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",Po(n)),this.Gi.getDocumentsMatchingQuery(e,n,Ps.min(),o)}Xi(e,n,o,u){return this.Gi.getDocumentsMatchingQuery(e,o,u).next(c=>(n.forEach(g=>{c=c.insert(g.key,g)}),c))}}class zg{constructor(e,n,o,u){this.persistence=e,this.es=n,this.serializer=u,this.ts=new Dr(En),this.ns=new Gs(c=>ei(c),Si),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(o)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jv(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function Gg(i,e,n,o){return new zg(i,e,n,o)}function q_(i,e){return lp.apply(this,arguments)}function lp(){return lp=(0,Ee.Z)(function*(i,e){const n=At(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(c=>(u=c,n.os(e),n.mutationQueue.getAllMutationBatches(o))).next(c=>{const g=[],R=[];let x=kn();for(const H of u){g.push(H.batchId);for(const K of H.mutations)x=x.add(K.key)}for(const H of c){R.push(H.batchId);for(const K of H.mutations)x=x.add(K.key)}return n.localDocuments.getDocuments(o,x).next(H=>({_s:H,removedBatchIds:g,addedBatchIds:R}))})})}),lp.apply(this,arguments)}function qv(i){const e=At(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function W_(i,e,n){let o=kn(),u=kn();return n.forEach(c=>o=o.add(c)),e.getEntries(i,o).next(c=>{let g=vs();return n.forEach((R,x)=>{const H=c.get(R);x.isFoundDocument()!==H.isFoundDocument()&&(u=u.add(R)),x.isNoDocument()&&x.version.isEqual($t.min())?(e.removeEntry(R,x.readTime),g=g.insert(R,x)):!H.isValidDocument()||x.version.compareTo(H.version)>0||0===x.version.compareTo(H.version)&&H.hasPendingWrites?(e.addEntry(x),g=g.insert(R,x)):at("LocalStore","Ignoring outdated watch update for ",R,". Current version:",H.version," Watch version:",x.version)}),{us:g,cs:u}})}function Kv(i,e){const n=At(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function qh(i,e){const n=At(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.qr.getTargetData(o,e).next(c=>c?(u=c,C.resolve(u)):n.qr.allocateTargetId(o).next(g=>(u=new Au(e,g,"TargetPurposeListen",o.currentSequenceNumber),n.qr.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.ts.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.ts=n.ts.insert(o.targetId,o),n.ns.set(e,o.targetId)),o})}function Wh(i,e,n){return qd.apply(this,arguments)}function qd(){return qd=(0,Ee.Z)(function*(i,e,n){const o=At(i),u=o.ts.get(e),c=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",c,g=>o.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!Le(g))throw g;at("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}o.ts=o.ts.remove(e),o.ns.delete(u.target)}),qd.apply(this,arguments)}function cp(i,e,n){const o=At(i);let u=$t.min(),c=kn();return o.persistence.runTransaction("Execute query","readwrite",g=>function(x,H,K){const ie=At(x),we=ie.ns.get(K);return void 0!==we?C.resolve(ie.ts.get(we)):ie.qr.getTargetData(H,K)}(o,g,Kt(e)).next(R=>{if(R)return u=R.lastLimboFreeSnapshotVersion,o.qr.getMatchingKeysForTargetId(g,R.targetId).next(x=>{c=x})}).next(()=>o.es.getDocumentsMatchingQuery(g,e,n?u:$t.min(),n?c:kn())).next(R=>(td(o,yl(e),R),{documents:R,ls:c})))}function dp(i,e){const n=At(i),o=At(n.qr),u=n.ts.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",c=>o._t(c,e).next(g=>g?g.target:null))}function hp(i,e){const n=At(i),o=n.rs.get(e)||$t.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.ss.getAllFromCollectionGroup(u,e,Pl(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(td(n,e,u),u))}function td(i,e,n){let o=i.rs.get(e)||$t.min();n.forEach((u,c)=>{c.readTime.compareTo(o)>0&&(o=c.readTime)}),i.rs.set(e,o)}function Kh(){return Kh=(0,Ee.Z)(function*(i,e,n,o){const u=At(i);let c=kn(),g=vs();for(const H of n){const K=e.hs(H.metadata.name);H.document&&(c=c.add(K));const ie=e.Ps(H);ie.setReadTime(e.Is(H.metadata.readTime)),g=g.insert(K,ie)}const R=u.ss.newChangeBuffer({trackRemovals:!0}),x=yield qh(u,(K=o,Kt(Ro(Un.fromString(`__bundle__/docs/${K}`)))));var K;return u.persistence.runTransaction("Apply bundle documents","readwrite",H=>W_(H,R,g).next(K=>(R.apply(H),K)).next(K=>u.qr.removeMatchingKeysForTargetId(H,x.targetId).next(()=>u.qr.addMatchingKeys(H,c,x.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(H,K.us,K.cs)).next(()=>K.us)))}),Kh.apply(this,arguments)}function Zh(i,e){return Wd.apply(this,arguments)}function Wd(){return Wd=(0,Ee.Z)(function*(i,e,n=kn()){const o=yield qh(i,Kt(Bd(e.bundledQuery))),u=At(i);return u.persistence.runTransaction("Save named query","readwrite",c=>{const g=Ri(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return u.Kr.saveNamedQuery(c,e);const R=o.withResumeToken(mi.EMPTY_BYTE_STRING,g);return u.ts=u.ts.insert(R.targetId,R),u.qr.updateTargetData(c,R).next(()=>u.qr.removeMatchingKeysForTargetId(c,o.targetId)).next(()=>u.qr.addMatchingKeys(c,n,o.targetId)).next(()=>u.Kr.saveNamedQuery(c,e))})}),Wd.apply(this,arguments)}function nd(i,e){return`firestore_clients_${i}_${e}`}function fp(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Qh(i,e){return`firestore_targets_${i}_${e}`}class rd{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Ts(e,n,o){const u=JSON.parse(o);let c,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(c=new Qe(u.error.code,u.error.message))),g?new rd(e,n,u.state,c):(gr("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pp{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Ts(e,n){const o=JSON.parse(n);let u,c="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(u=new Qe(o.error.code,o.error.message))),c?new pp(e,o.state,u):(gr("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kd{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,c=jc();for(let g=0;u&&g<o.activeTargetIds.length;++g)u=Ml(o.activeTargetIds[g]),c=c.add(o.activeTargetIds[g]);return u?new Kd(e,c):(gr("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class id{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new id(n.clientId,n.onlineState):(gr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Kg{constructor(){this.activeTargetIds=jc()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gp{constructor(e,n,o,u,c){this.window=e,this.si=n,this.persistenceKey=o,this.Rs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Dr(En),this.started=!1,this.ps=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ys=nd(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new Kg),this.Ss=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(x){return`firestore_bundle_loaded_v2_${x}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const n=yield e.syncEngine.Bi();for(const u of n){if(u===e.Rs)continue;const c=e.getItem(nd(e.persistenceKey,u));if(c){const g=Kd.Ts(u,c);g&&(e.gs=e.gs.insert(g.clientId,g))}}e.Fs();const o=e.storage.getItem(e.Cs);if(o){const u=e.Ms(o);u&&e.xs(u)}for(const u of e.ps)e.fs(u);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,o){this.Ns(e,n,o),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Qh(this.persistenceKey,e));if(o){const u=pp.Ts(e,o);u&&(n=u.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qh(this.persistenceKey,e))}updateQueryState(e,n,o){this.ks(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Bs(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return at("SharedClientState","READ",e,n),n}setItem(e,n){at("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){at("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const o=e;if(o.storageArea===this.storage){if(at("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ys)return void gr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,Ee.Z)(function*(){if(n.started){if(null!==o.key)if(n.Ss.test(o.key)){if(null==o.newValue){const u=n.Ks(o.key);return n.$s(u,null)}{const u=n.Us(o.key,o.newValue);if(u)return n.$s(u.clientId,u)}}else if(n.bs.test(o.key)){if(null!==o.newValue){const u=n.Ws(o.key,o.newValue);if(u)return n.Gs(u)}}else if(n.Ds.test(o.key)){if(null!==o.newValue){const u=n.zs(o.key,o.newValue);if(u)return n.js(u)}}else if(o.key===n.Cs){if(null!==o.newValue){const u=n.Ms(o.newValue);if(u)return n.xs(u)}}else if(o.key===n.ws){const u=function(g){let R=bi._e;if(null!=g)try{const x=JSON.parse(g);Bt("number"==typeof x),R=x}catch(x){gr("SharedClientState","Failed to read sequence number from WebStorage",x)}return R}(o.newValue);u!==bi._e&&n.sequenceNumberHandler(u)}else if(o.key===n.vs){const u=n.Hs(o.newValue);yield Promise.all(u.map(c=>n.syncEngine.Js(c)))}}else n.ps.push(o)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,o){const u=new rd(this.currentUser,e,n,o),c=fp(this.persistenceKey,this.currentUser,e);this.setItem(c,u.Es())}Bs(e){const n=fp(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,o){const u=Qh(this.persistenceKey,e),c=new pp(e,n,o);this.setItem(u,c.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const o=this.Ks(e);return Kd.Ts(o,n)}Ws(e,n){const o=this.bs.exec(e),u=Number(o[1]);return rd.Ts(new bn(void 0!==o[2]?o[2]:null),u,n)}zs(e,n){const o=this.Ds.exec(e),u=Number(o[1]);return pp.Ts(u,n)}Ms(e){return id.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,Ee.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);at("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const o=n?this.gs.insert(e,n):this.gs.remove(e),u=this.Os(this.gs),c=this.Os(o),g=[],R=[];return c.forEach(x=>{u.has(x)||g.push(x)}),u.forEach(x=>{c.has(x)||R.push(x)}),this.syncEngine.Xs(g,R).then(()=>{this.gs=o})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=jc();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class K_{constructor(){this.eo=new Kg,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,o){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Kg,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Zv{ro(e){}shutdown(){}}class mp{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){at("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){at("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Yh=null;function Zg(){return null===Yh?Yh=268435456+Math.round(2147483648*Math.random()):Yh++,"0x"+Yh.toString(16)}const Qv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HI{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Wo="WebChannelConnection";class _p extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.mo=o+"://"+n.host,this.fo=`projects/${u}/databases/${c}`,this.po="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${c}`}get yo(){return!1}wo(n,o,u,c,g){const R=Zg(),x=this.So(n,o);at("RestConnection",`Sending RPC '${n}' ${R}:`,x,u);const H={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(H,c,g),this.Do(n,x,H,u).then(K=>(at("RestConnection",`Received RPC '${n}' ${R}: `,K),K),K=>{throw fs("RestConnection",`RPC '${n}' ${R} failed with error: `,K,"url: ",x,"request:",u),K})}Co(n,o,u,c,g,R){return this.wo(n,o,u,c,g)}bo(n,o,u){n["X-Goog-Api-Client"]="gl-js/ fire/"+Do,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((c,g)=>n[g]=c),u&&u.headers.forEach((c,g)=>n[g]=c)}So(n,o){return`${this.mo}/v1/${o}:${Qv[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,o,u){const c=Zg();return new Promise((g,R)=>{const x=new Rs;x.setWithCredentials(!0),x.listenOnce(Co.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case Gi.NO_ERROR:const K=x.getResponseJson();at(Wo,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(K)),g(K);break;case Gi.TIMEOUT:at(Wo,`RPC '${e}' ${c} timed out`),R(new Qe(qe.DEADLINE_EXCEEDED,"Request time out"));break;case Gi.HTTP_ERROR:const ie=x.getStatus();if(at(Wo,`RPC '${e}' ${c} failed with status:`,ie,"response text:",x.getResponseText()),ie>0){let we=x.getResponseJson();Array.isArray(we)&&(we=we[0]);const ze=we?.error;if(ze&&ze.status&&ze.message){const mt=function(Ct){const gn=Ct.toLowerCase().replace(/_/g,"-");return Object.values(qe).indexOf(gn)>=0?gn:qe.UNKNOWN}(ze.status);R(new Qe(mt,ze.message))}else R(new Qe(qe.UNKNOWN,"Server responded with status "+x.getStatus()))}else R(new Qe(qe.UNAVAILABLE,"Connection failed."));break;default:Lt()}}finally{at(Wo,`RPC '${e}' ${c} completed.`)}});const H=JSON.stringify(u);at(Wo,`RPC '${e}' ${c} sending request:`,u),x.send(n,"POST",H,o,15)})}vo(e,n,o){const u=Zg(),c=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=zi(),R=Ca(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},H=this.longPollingOptions.timeoutSeconds;void 0!==H&&(x.longPollingTimeout=Math.round(1e3*H)),this.useFetchStreams&&(x.xmlHttpFactory=new gu({})),this.bo(x.initMessageHeaders,n,o),x.encodeInitMessageHeaders=!0;const K=c.join("");at(Wo,`Creating RPC '${e}' stream ${u}: ${K}`,x);const ie=g.createWebChannel(K,x);let we=!1,ze=!1;const mt=new HI({co:Ct=>{ze?at(Wo,`Not sending because RPC '${e}' stream ${u} is closed:`,Ct):(we||(at(Wo,`Opening RPC '${e}' stream ${u} transport.`),ie.open(),we=!0),at(Wo,`RPC '${e}' stream ${u} sending:`,Ct),ie.send(Ct))},lo:()=>ie.close()}),wt=(Ct,gn,Cn)=>{Ct.listen(gn,fn=>{try{Cn(fn)}catch(Jn){setTimeout(()=>{throw Jn},0)}})};return wt(ie,Da.EventType.OPEN,()=>{ze||at(Wo,`RPC '${e}' stream ${u} transport opened.`)}),wt(ie,Da.EventType.CLOSE,()=>{ze||(ze=!0,at(Wo,`RPC '${e}' stream ${u} transport closed`),mt.Ro())}),wt(ie,Da.EventType.ERROR,Ct=>{ze||(ze=!0,fs(Wo,`RPC '${e}' stream ${u} transport errored:`,Ct),mt.Ro(new Qe(qe.UNAVAILABLE,"The operation could not be completed")))}),wt(ie,Da.EventType.MESSAGE,Ct=>{var gn;if(!ze){const Cn=Ct.data[0];Bt(!!Cn);const Jn=Cn.error||(null===(gn=Cn[0])||void 0===gn?void 0:gn.error);if(Jn){at(Wo,`RPC '${e}' stream ${u} received error:`,Jn);const Ar=Jn.status;let Mr=function(yv){const m_=Wi[yv];if(void 0!==m_)return Oa(m_)}(Ar),Os=Jn.message;void 0===Mr&&(Mr=qe.INTERNAL,Os="Unknown error status: "+Ar+" with message "+Jn.message),ze=!0,mt.Ro(new Qe(Mr,Os)),ie.close()}else at(Wo,`RPC '${e}' stream ${u} received:`,Cn),mt.Vo(Cn)}}),wt(R,Vu.STAT_EVENT,Ct=>{Ct.stat===Tr.PROXY?at(Wo,`RPC '${e}' stream ${u} detected buffering proxy`):Ct.stat===Tr.NOPROXY&&at(Wo,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{mt.Ao()},0),mt}}function yp(){return typeof window<"u"?window:null}function vp(){return typeof document<"u"?document:null}function Zd(i){return new Zt(i,!0)}class Jh{constructor(e,n,o=1e3,u=1.5,c=6e4){this.si=e,this.timerId=n,this.Fo=o,this.Mo=u,this.xo=c,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),o=Math.max(0,Date.now()-this.Bo),u=Math.max(0,n-o);u>0&&at("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,u,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class Xh{constructor(e,n,o,u,c,g,R,x){this.si=e,this.Ko=o,this.$o=u,this.connection=c,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=R,this.listener=x,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Jh(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,Ee.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var o=this;return(0,Ee.Z)(function*(){o.t_(),o.n_(),o.zo.cancel(),o.Uo++,4!==e?o.zo.reset():n&&n.code===qe.RESOURCE_EXHAUSTED?(gr(n.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),o.zo.Lo()):n&&n.code===qe.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.r_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Uo===n&&this.s_(o,u)},o=>{e(()=>{const u=new Qe(qe.UNKNOWN,"Fetching auth token failed: "+o.message);return this.o_(u)})})}s_(e,n){const o=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{o(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(u=>{o(()=>this.o_(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Jo(){var e=this;this.state=5,this.zo.ko((0,Ee.Z)(function*(){e.state=0,e.start()}))}o_(e){return at("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(at("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Yv extends Xh{constructor(e,n,o,u,c,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,g),this.serializer=c}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function Tg(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(H=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:Lt(),u=e.targetChange.targetIds||[],c=function(H,K){return H.useProto3Json?(Bt(void 0===K||"string"==typeof K),mi.fromBase64String(K||"")):(Bt(void 0===K||K instanceof Uint8Array),mi.fromUint8Array(K||new Uint8Array))}(i,e.targetChange.resumeToken),g=e.targetChange.cause,R=g&&function(H){const K=void 0===H.code?qe.UNKNOWN:Oa(H.code);return new Qe(K,H.message||"")}(g);n=new p(o,u,c,R||null)}else if("documentChange"in e){const o=e.documentChange,u=ga(i,o.document.name),c=Ri(o.document.updateTime),g=o.document.createTime?Ri(o.document.createTime):$t.min(),R=new ms({mapValue:{fields:o.document.fields}}),x=Mn.newFoundDocument(u,c,g,R);n=new _(o.targetIds||[],o.removedTargetIds||[],x.key,x)}else if("documentDelete"in e){const o=e.documentDelete,u=ga(i,o.document),c=o.readTime?Ri(o.readTime):$t.min(),g=Mn.newNoDocument(u,c);n=new _([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const o=e.documentRemove,u=ga(i,o.document);n=new _([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Lt();{const o=e.filter,{count:u=0,unchangedNames:c}=o,g=new Oo(u,c);n=new d(o.targetId,g)}}var H;return n}(this.serializer,e),o=function(c){if(!("targetChange"in c))return $t.min();const g=c.targetChange;return g.targetIds&&g.targetIds.length?$t.min():g.readTime?Ri(g.readTime):$t.min()}(e);return this.listener.a_(n,o)}u_(e){const n={};n.database=Du(this.serializer),n.addTarget=function(c,g){let R;const x=g.target;if(R=Qr(x)?{documents:Cg(c,x)}:{query:Rh(c,x)},R.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){R.resumeToken=Na(c,g.resumeToken);const H=zt(c,g.expectedCount);null!==H&&(R.expectedCount=H)}else if(g.snapshotVersion.compareTo($t.min())>0){R.readTime=kr(c,g.snapshotVersion.toTimestamp());const H=zt(c,g.expectedCount);null!==H&&(R.expectedCount=H)}return R}(this.serializer,e);const o=function S_(i,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Lt()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.e_(n)}c_(e){const n={};n.database=Du(this.serializer),n.removeTarget=e,this.e_(n)}}class Z_ extends Xh{constructor(e,n,o,u,c,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,g),this.serializer=c,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function Sh(i,e){return i&&i.length>0?(Bt(void 0!==e),i.map(n=>function(u,c){let g=Ri(u.updateTime?u.updateTime:c);return g.isEqual($t.min())&&(g=Ri(c)),new zc(g,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=Ri(e.commitTime);return this.listener.I_(o,n)}return Bt(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Du(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>kd(this.serializer,o))};this.e_(n)}}class Jv extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.d_=!1}A_(){if(this.d_)throw new Qe(qe.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,o){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.wo(e,n,o,u,c)).catch(u=>{throw"FirebaseError"===u.name?(u.code===qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Qe(qe.UNKNOWN,u.toString())})}Co(e,n,o,u){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,g])=>this.connection.Co(e,n,o,c,g,u)).catch(c=>{throw"FirebaseError"===c.name?(c.code===qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Qe(qe.UNKNOWN,c.toString())})}terminate(){this.d_=!0}}class Xv{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(gr(n),this.f_=!1):at("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Ep{constructor(e,n,o,u,c){var g=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=c,this.F_.ro(R=>{o.enqueueAndForget((0,Ee.Z)(function*(){var x;Cl(g)&&(at("RemoteStore","Restarting streams for network reachability change."),yield(x=(0,Ee.Z)(function*(K){const ie=At(K);ie.C_.add(4),yield Tl(ie),ie.M_.set("Unknown"),ie.C_.delete(4),yield ef(ie)}),function H(K){return x.apply(this,arguments)})(g))}))}),this.M_=new Xv(o,u)}}function ef(i){return hc.apply(this,arguments)}function hc(){return hc=(0,Ee.Z)(function*(i){if(Cl(i))for(const e of i.v_)yield e(!0)}),hc.apply(this,arguments)}function Tl(i){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,Ee.Z)(function*(i){for(const e of i.v_)yield e(!1)}),Qg.apply(this,arguments)}function tf(i,e){const n=At(i);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),wp(n)?Ip(n):Qd(n).Ho()&&Yg(n,e))}function nf(i,e){const n=At(i),o=Qd(n);n.D_.delete(e),o.Ho()&&J_(n,e),0===n.D_.size&&(o.Ho()?o.Zo():Cl(n)&&n.M_.set("Unknown"))}function Yg(i,e){if(i.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($t.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qd(i).u_(e)}function J_(i,e){i.x_.Oe(e),Qd(i).c_(e)}function Ip(i){i.x_=new U({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.D_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),Qd(i).start(),i.M_.g_()}function wp(i){return Cl(i)&&!Qd(i).jo()&&i.D_.size>0}function Cl(i){return 0===At(i).C_.size}function eE(i){i.x_=void 0}function Jg(i){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,Ee.Z)(function*(i){i.D_.forEach((e,n)=>{Yg(i,e)})}),Tp.apply(this,arguments)}function tE(i,e){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,Ee.Z)(function*(i,e){eE(i),wp(i)?(i.M_.w_(e),Ip(i)):i.M_.set("Unknown")}),Xg.apply(this,arguments)}function X_(i,e,n){return em.apply(this,arguments)}function em(){return em=(0,Ee.Z)(function*(i,e,n){if(i.M_.set("Online"),e instanceof p&&2===e.state&&e.cause)try{yield(o=(0,Ee.Z)(function*(c,g){const R=g.cause;for(const x of g.targetIds)c.D_.has(x)&&(yield c.remoteSyncer.rejectListen(x,R),c.D_.delete(x),c.x_.removeTarget(x))}),function u(c,g){return o.apply(this,arguments)})(i,e)}catch(o){at("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield rf(i,o)}else if(e instanceof _?i.x_.$e(e):e instanceof d?i.x_.Je(e):i.x_.Ge(e),!n.isEqual($t.min()))try{const o=yield qv(i.localStore);n.compareTo(o)>=0&&(yield function(c,g){const R=c.x_.it(g);return R.targetChanges.forEach((x,H)=>{if(x.resumeToken.approximateByteSize()>0){const K=c.D_.get(H);K&&c.D_.set(H,K.withResumeToken(x.resumeToken,g))}}),R.targetMismatches.forEach((x,H)=>{const K=c.D_.get(x);if(!K)return;c.D_.set(x,K.withResumeToken(mi.EMPTY_BYTE_STRING,K.snapshotVersion)),J_(c,x);const ie=new Au(K.target,x,H,K.sequenceNumber);Yg(c,ie)}),c.remoteSyncer.applyRemoteEvent(R)}(i,n))}catch(o){at("RemoteStore","Failed to raise snapshot:",o),yield rf(i,o)}var o}),em.apply(this,arguments)}function rf(i,e,n){return tm.apply(this,arguments)}function tm(){return tm=(0,Ee.Z)(function*(i,e,n){if(!Le(e))throw e;i.C_.add(1),yield Tl(i),i.M_.set("Offline"),n||(n=()=>qv(i.localStore)),i.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){at("RemoteStore","Retrying IndexedDB access"),yield n(),i.C_.delete(1),yield ef(i)}))}),tm.apply(this,arguments)}function ey(i,e){return e().catch(n=>rf(i,n,e))}function sf(i){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,Ee.Z)(function*(i){const e=At(i),n=Al(e);let o=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;ty(e);)try{const u=yield Kv(e.localStore,o);if(null===u){0===e.b_.length&&n.Zo();break}o=u.batchId,Xu(e,u)}catch(u){yield rf(e,u)}nm(e)&&nE(e)}),Cp.apply(this,arguments)}function ty(i){return Cl(i)&&i.b_.length<10}function Xu(i,e){i.b_.push(e);const n=Al(i);n.Ho()&&n.h_&&n.P_(e.mutations)}function nm(i){return Cl(i)&&!Al(i).jo()&&i.b_.length>0}function nE(i){Al(i).start()}function rm(i){return Dl.apply(this,arguments)}function Dl(){return Dl=(0,Ee.Z)(function*(i){Al(i).E_()}),Dl.apply(this,arguments)}function im(i){return sm.apply(this,arguments)}function sm(){return sm=(0,Ee.Z)(function*(i){const e=Al(i);for(const n of i.b_)e.P_(n.mutations)}),sm.apply(this,arguments)}function $I(i,e,n){return om.apply(this,arguments)}function om(){return om=(0,Ee.Z)(function*(i,e,n){const o=i.b_.shift(),u=Dh.from(o,e,n);yield ey(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield sf(i)}),om.apply(this,arguments)}function am(i,e){return Su.apply(this,arguments)}function Su(){return Su=(0,Ee.Z)(function*(i,e){var n;e&&Al(i).h_&&(yield(n=(0,Ee.Z)(function*(u,c){if(Md(R=c.code)&&R!==qe.ABORTED){const g=u.b_.shift();Al(u).Yo(),yield ey(u,()=>u.remoteSyncer.rejectFailedWrite(g.batchId,c)),yield sf(u)}var R}),function o(u,c){return n.apply(this,arguments)})(i,e)),nm(i)&&nE(i)}),Su.apply(this,arguments)}function um(i,e){return lm.apply(this,arguments)}function lm(){return lm=(0,Ee.Z)(function*(i,e){const n=At(i);n.asyncQueue.verifyOperationInProgress(),at("RemoteStore","RemoteStore received new credentials");const o=Cl(n);n.C_.add(3),yield Tl(n),o&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield ef(n)}),lm.apply(this,arguments)}function ny(i,e){return qs.apply(this,arguments)}function qs(){return qs=(0,Ee.Z)(function*(i,e){const n=At(i);e?(n.C_.delete(2),yield ef(n)):e||(n.C_.add(2),yield Tl(n),n.M_.set("Unknown"))}),qs.apply(this,arguments)}function Qd(i){return i.O_||(i.O_=function(n,o,u){const c=At(n);return c.A_(),new Yv(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(i.datastore,i.asyncQueue,{ho:Jg.bind(null,i),Io:tE.bind(null,i),a_:X_.bind(null,i)}),i.v_.push(function(){var e=(0,Ee.Z)(function*(n){n?(i.O_.Yo(),wp(i)?Ip(i):i.M_.set("Unknown")):(yield i.O_.stop(),eE(i))});return function(n){return e.apply(this,arguments)}}())),i.O_}function Al(i){return i.N_||(i.N_=function(n,o,u){const c=At(n);return c.A_(),new Z_(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(i.datastore,i.asyncQueue,{ho:rm.bind(null,i),Io:am.bind(null,i),T_:im.bind(null,i),I_:$I.bind(null,i)}),i.v_.push(function(){var e=(0,Ee.Z)(function*(n){n?(i.N_.Yo(),yield sf(i)):(yield i.N_.stop(),i.b_.length>0&&(at("RemoteStore",`Stopping write stream with ${i.b_.length} pending writes`),i.b_=[]))});return function(n){return e.apply(this,arguments)}}())),i.N_}class cm{constructor(e,n,o,u,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=c,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,c){const g=Date.now()+o,R=new cm(e,n,g,u,c);return R.start(o),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qe(qe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yd(i,e){if(gr("AsyncQueue",`${e}: ${i}`),Le(i))return new Qe(qe.UNAVAILABLE,`${e}: ${i}`);throw i}class fc{constructor(e){this.comparator=e?(n,o)=>e(n,o)||Et.comparator(n.key,o.key):(n,o)=>Et.comparator(n.key,o.key),this.keyedMap=Uc(),this.sortedSet=new Dr(this.comparator)}static emptySet(e){return new fc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=o.getNext().key;if(!u.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new fc;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class dm{constructor(){this.B_=new Dr(Et.comparator)}track(e){const n=e.doc.key,o=this.B_.get(n);o?0!==e.type&&3===o.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==o.type?this.B_=this.B_.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.B_=this.B_.remove(n):1===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Lt():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,o)=>{e.push(o)}),e}}class sd{constructor(e,n,o,u,c,g,R,x,H){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=c,this.fromCache=g,this.syncStateChanged=R,this.excludesMetadataChanges=x,this.hasCachedResults=H}static fromInitialDocuments(e,n,o,u,c){const g=[];return n.forEach(R=>{g.push({type:0,doc:R})}),new sd(e,n,fc.emptySet(n),g,o,u,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class rE{constructor(){this.k_=void 0,this.listeners=[]}}class ry{constructor(){this.queries=new Gs(e=>mo(e),oo),this.onlineState="Unknown",this.q_=new Set}}function Dp(i,e){return hm.apply(this,arguments)}function hm(){return hm=(0,Ee.Z)(function*(i,e){const n=At(i),o=e.query;let u=!1,c=n.queries.get(o);if(c||(u=!0,c=new rE),u)try{c.k_=yield n.onListen(o)}catch(g){const R=Yd(g,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(R)}n.queries.set(o,c),c.listeners.push(e),e.Q_(n.onlineState),c.k_&&e.K_(c.k_)&&el(n)}),hm.apply(this,arguments)}function fm(i,e){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,Ee.Z)(function*(i,e){const n=At(i),o=e.query;let u=!1;const c=n.queries.get(o);if(c){const g=c.listeners.indexOf(e);g>=0&&(c.listeners.splice(g,1),u=0===c.listeners.length)}if(u)return n.queries.delete(o),n.onUnlisten(o)}),Ap.apply(this,arguments)}function iy(i,e){const n=At(i);let o=!1;for(const u of e){const g=n.queries.get(u.query);if(g){for(const R of g.listeners)R.K_(u)&&(o=!0);g.k_=u}}o&&el(n)}function Jd(i,e,n){const o=At(i),u=o.queries.get(e);if(u)for(const c of u.listeners)c.onError(n);o.queries.delete(e)}function el(i){i.q_.forEach(e=>{e.next()})}class pc{constructor(e,n,o){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=o||{}}K_(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new sd(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=sd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class iE{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class sy{constructor(e){this.serializer=e}hs(e){return ga(this.serializer,e)}Ps(e){return e.metadata.exists?qc(this.serializer,e.document,!1):Mn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Ri(e)}}class oy{constructor(e,n,o){this.X_=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pm(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const o=Un.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,o=new sy(this.serializer);for(const u of e)if(u.metadata.queries){const c=o.hs(u.metadata.name);for(const g of u.metadata.queries){const R=(n.get(g)||kn()).add(c);n.set(g,R)}}return n}complete(){var e=this;return(0,Ee.Z)(function*(){const n=yield function Wg(i,e,n,o){return Kh.apply(this,arguments)}(e.localStore,new sy(e.serializer),e.documents,e.X_.id),o=e.ta(e.documents);for(const u of e.queries)yield Zh(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function pm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class bp{constructor(e){this.key=e}}class Xd{constructor(e){this.key=e}}class af{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=kn(),this.mutatedKeys=kn(),this._a=Lc(e),this.aa=new fc(this._a)}get ua(){return this.ia}ca(e,n){const o=n?n.la:new dm,u=n?n.aa:this.aa;let c=n?n.mutatedKeys:this.mutatedKeys,g=u,R=!1;const x="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,H="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((K,ie)=>{const we=u.get(K),ze=Pr(this.query,ie)?ie:null,mt=!!we&&this.mutatedKeys.has(we.key),wt=!!ze&&(ze.hasLocalMutations||this.mutatedKeys.has(ze.key)&&ze.hasCommittedMutations);let Ct=!1;we&&ze?we.data.isEqual(ze.data)?mt!==wt&&(o.track({type:3,doc:ze}),Ct=!0):this.ha(we,ze)||(o.track({type:2,doc:ze}),Ct=!0,(x&&this._a(ze,x)>0||H&&this._a(ze,H)<0)&&(R=!0)):!we&&ze?(o.track({type:0,doc:ze}),Ct=!0):we&&!ze&&(o.track({type:1,doc:we}),Ct=!0,(x||H)&&(R=!0)),Ct&&(ze?(g=g.add(ze),c=wt?c.add(K):c.delete(K)):(g=g.delete(K),c=c.delete(K)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const K="F"===this.query.limitType?g.last():g.first();g=g.delete(K.key),c=c.delete(K.key),o.track({type:1,doc:K})}return{aa:g,la:o,Zi:R,mutatedKeys:c}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o){const u=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const c=e.la.L_();c.sort((H,K)=>function(we,ze){const mt=wt=>{switch(wt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lt()}};return mt(we)-mt(ze)}(H.type,K.type)||this._a(H.doc,K.doc)),this.Pa(o);const g=n?this.Ia():[],R=0===this.oa.size&&this.current?1:0,x=R!==this.sa;return this.sa=R,0!==c.length||x?{snapshot:new sd(this.query,e.aa,u,c,e.mutatedKeys,0===R,x,!1,!!o&&o.resumeToken.approximateByteSize()>0),Ta:g}:{Ta:g}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new dm,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=kn(),this.aa.forEach(o=>{this.Ea(o.key)&&(this.oa=this.oa.add(o.key))});const n=[];return e.forEach(o=>{this.oa.has(o)||n.push(new Xd(o))}),this.oa.forEach(o=>{e.has(o)||n.push(new bp(o))}),n}da(e){this.ia=e.ls,this.oa=kn();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return sd.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class ay{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class uy{constructor(e){this.key=e,this.Ra=!1}}class sE{constructor(e,n,o,u,c,g){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=c,this.maxConcurrentLimboResolutions=g,this.Va={},this.ma=new Gs(R=>mo(R),oo),this.fa=new Map,this.ga=new Set,this.pa=new Dr(Et.comparator),this.ya=new Map,this.wa=new Hh,this.Sa={},this.ba=new Map,this.Da=bu.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function oE(i,e){return gm.apply(this,arguments)}function gm(){return gm=(0,Ee.Z)(function*(i,e){const n=Sm(i);let o,u;const c=n.ma.get(e);if(c)o=c.targetId,n.sharedClientState.addLocalQueryTarget(o),u=c.view.Aa();else{const g=yield qh(n.localStore,Kt(e)),R=n.sharedClientState.addLocalQueryTarget(g.targetId);o=g.targetId,u=yield mm(n,e,o,"current"===R,g.resumeToken),n.isPrimaryClient&&tf(n.remoteStore,g)}return u}),gm.apply(this,arguments)}function mm(i,e,n,o,u){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,Ee.Z)(function*(i,e,n,o,u){i.va=(ie,we,ze)=>{return(mt=(0,Ee.Z)(function*(Ct,gn,Cn,fn){let Jn=gn.view.ca(Cn);Jn.Zi&&(Jn=yield cp(Ct.localStore,gn.query,!1).then(({documents:Os})=>gn.view.ca(Os,Jn)));const Ar=fn&&fn.targetChanges.get(gn.targetId),Mr=gn.view.applyChanges(Jn,Ct.isPrimaryClient,Ar);return eh(Ct,gn.targetId,Mr.Ta),Mr.snapshot}),function wt(Ct,gn,Cn,fn){return mt.apply(this,arguments)})(i,ie,we,ze);var mt};const c=yield cp(i.localStore,e,!0),g=new af(e,c.ls),R=g.ca(c.documents),x=Il.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,u),H=g.applyChanges(R,i.isPrimaryClient,x);eh(i,n,H.Ta);const K=new ay(e,n,g);return i.ma.set(e,K),i.fa.has(n)?i.fa.get(n).push(e):i.fa.set(n,[e]),H.snapshot}),Sp.apply(this,arguments)}function zI(i,e){return _m.apply(this,arguments)}function _m(){return _m=(0,Ee.Z)(function*(i,e){const n=At(i),o=n.ma.get(e),u=n.fa.get(o.targetId);if(u.length>1)return n.fa.set(o.targetId,u.filter(c=>!oo(c,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Wh(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),nf(n.remoteStore,o.targetId),od(n,o.targetId)}).catch(O))):(od(n,o.targetId),yield Wh(n.localStore,o.targetId,!0))}),_m.apply(this,arguments)}function ly(){return ly=(0,Ee.Z)(function*(i,e,n){const o=my(i);try{const u=yield function(g,R){const x=At(g),H=Er.now(),K=R.reduce((ze,mt)=>ze.add(mt.key),kn());let ie,we;return x.persistence.runTransaction("Locally write mutations","readwrite",ze=>{let mt=vs(),wt=kn();return x.ss.getEntries(ze,K).next(Ct=>{mt=Ct,mt.forEach((gn,Cn)=>{Cn.isValidDocument()||(wt=wt.add(gn))})}).next(()=>x.localDocuments.getOverlayedDocuments(ze,mt)).next(Ct=>{ie=Ct;const gn=[];for(const Cn of R){const fn=Mo(Cn,ie.get(Cn.key).overlayedDocument);null!=fn&&gn.push(new pa(Cn.key,fn,Td(fn.value.mapValue),_i.exists(!0)))}return x.mutationQueue.addMutationBatch(ze,H,gn,R)}).next(Ct=>{we=Ct;const gn=Ct.applyToLocalDocumentSet(ie,wt);return x.documentOverlayCache.saveOverlays(ze,Ct.batchId,gn)})}).then(()=>({batchId:we.batchId,changes:Eh(ie)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(g,R,x){let H=g.Sa[g.currentUser.toKey()];H||(H=new Dr(En)),H=H.insert(R,x),g.Sa[g.currentUser.toKey()]=H}(o,u.batchId,n),yield ou(o,u.changes),yield sf(o.remoteStore)}catch(u){const c=Yd(u,"Failed to persist write");n.reject(c)}}),ly.apply(this,arguments)}function ym(i,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,Ee.Z)(function*(i,e){const n=At(i);try{const o=yield function Wv(i,e){const n=At(i),o=e.snapshotVersion;let u=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const g=n.ss.newChangeBuffer({trackRemovals:!0});u=n.ts;const R=[];e.targetChanges.forEach((K,ie)=>{const we=u.get(ie);if(!we)return;R.push(n.qr.removeMatchingKeys(c,K.removedDocuments,ie).next(()=>n.qr.addMatchingKeys(c,K.addedDocuments,ie)));let ze=we.withSequenceNumber(c.currentSequenceNumber);var wt,Ct,gn;null!==e.targetMismatches.get(ie)?ze=ze.withResumeToken(mi.EMPTY_BYTE_STRING,$t.min()).withLastLimboFreeSnapshotVersion($t.min()):K.resumeToken.approximateByteSize()>0&&(ze=ze.withResumeToken(K.resumeToken,o)),u=u.insert(ie,ze),Ct=ze,gn=K,(0===(wt=we).resumeToken.approximateByteSize()||Ct.snapshotVersion.toMicroseconds()-wt.snapshotVersion.toMicroseconds()>=3e8||gn.addedDocuments.size+gn.modifiedDocuments.size+gn.removedDocuments.size>0)&&R.push(n.qr.updateTargetData(c,ze))});let x=vs(),H=kn();if(e.documentUpdates.forEach(K=>{e.resolvedLimboDocuments.has(K)&&R.push(n.persistence.referenceDelegate.updateLimboDocument(c,K))}),R.push(W_(c,g,e.documentUpdates).next(K=>{x=K.us,H=K.cs})),!o.isEqual($t.min())){const K=n.qr.getLastRemoteSnapshotVersion(c).next(ie=>n.qr.setTargetsMetadata(c,c.currentSequenceNumber,o));R.push(K)}return C.waitFor(R).next(()=>g.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,x,H)).next(()=>x)}).then(c=>(n.ts=u,c))}(n.localStore,e);e.targetChanges.forEach((u,c)=>{const g=n.ya.get(c);g&&(Bt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.Ra=!0:u.modifiedDocuments.size>0?Bt(g.Ra):u.removedDocuments.size>0&&(Bt(g.Ra),g.Ra=!1))}),yield ou(n,o,e)}catch(o){yield O(o)}}),Rp.apply(this,arguments)}function aE(i,e,n){const o=At(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.ma.forEach((c,g)=>{const R=g.view.Q_(e);R.snapshot&&u.push(R.snapshot)}),function(g,R){const x=At(g);x.onlineState=R;let H=!1;x.queries.forEach((K,ie)=>{for(const we of ie.listeners)we.Q_(R)&&(H=!0)}),H&&el(x)}(o.eventManager,e),u.length&&o.Va.a_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Pp(i,e,n){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,Ee.Z)(function*(i,e,n){const o=At(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.ya.get(e),c=u&&u.key;if(c){let g=new Dr(Et.comparator);g=g.insert(c,Mn.newNoDocument(c,$t.min()));const R=kn().add(c),x=new Cu($t.min(),new Map,new Dr(En),g,R);yield ym(o,x),o.pa=o.pa.remove(c),o.ya.delete(e),uf(o)}else yield Wh(o.localStore,e,!1).then(()=>od(o,e,n)).catch(O)}),Mp.apply(this,arguments)}function cy(i,e){return vm.apply(this,arguments)}function vm(){return vm=(0,Ee.Z)(function*(i,e){const n=At(i),o=e.batch.batchId;try{const u=yield function qg(i,e){const n=At(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),c=n.ss.newChangeBuffer({trackRemovals:!0});return function(R,x,H,K){const ie=H.batch,we=ie.keys();let ze=C.resolve();return we.forEach(mt=>{ze=ze.next(()=>K.getEntry(x,mt)).next(wt=>{const Ct=H.docVersions.get(mt);Bt(null!==Ct),wt.version.compareTo(Ct)<0&&(ie.applyToRemoteDocument(wt,H),wt.isValidDocument()&&(wt.setReadTime(H.commitVersion),K.addEntry(wt)))})}),ze.next(()=>R.mutationQueue.removeMutationBatch(x,ie))}(n,o,e,c).next(()=>c.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(R){let x=kn();for(let H=0;H<R.mutationResults.length;++H)R.mutationResults[H].transformResults.length>0&&(x=x.add(R.batch.mutations[H].key));return x}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}(n.localStore,e);gc(n,o,null),xp(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield ou(n,u)}catch(u){yield O(u)}}),vm.apply(this,arguments)}function dy(i,e,n){return Op.apply(this,arguments)}function Op(){return Op=(0,Ee.Z)(function*(i,e,n){const o=At(i);try{const u=yield function(g,R){const x=At(g);return x.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let K;return x.mutationQueue.lookupMutationBatch(H,R).next(ie=>(Bt(null!==ie),K=ie.keys(),x.mutationQueue.removeMutationBatch(H,ie))).next(()=>x.mutationQueue.performConsistencyCheck(H)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(H,K,R)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(H,K)).next(()=>x.localDocuments.getDocuments(H,K))})}(o.localStore,e);gc(o,e,n),xp(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield ou(o,u)}catch(u){yield O(u)}}),Op.apply(this,arguments)}function Np(){return Np=(0,Ee.Z)(function*(i,e){const n=At(i);Cl(n.remoteStore)||at("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(g){const R=At(g);return R.persistence.runTransaction("Get highest unacknowledged batch id","readonly",x=>R.mutationQueue.getHighestUnacknowledgedBatchId(x))}(n.localStore);if(-1===o)return void e.resolve();const u=n.ba.get(o)||[];u.push(e),n.ba.set(o,u)}catch(o){const u=Yd(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Np.apply(this,arguments)}function xp(i,e){(i.ba.get(e)||[]).forEach(n=>{n.resolve()}),i.ba.delete(e)}function gc(i,e,n){const o=At(i);let u=o.Sa[o.currentUser.toKey()];if(u){const c=u.get(e);c&&(n?c.reject(n):c.resolve(),u=u.remove(e)),o.Sa[o.currentUser.toKey()]=u}}function od(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.fa.get(e))i.ma.delete(o),n&&i.Va.Fa(o,n);i.fa.delete(e),i.isPrimaryClient&&i.wa.Rr(e).forEach(o=>{i.wa.containsKey(o)||hy(i,o)})}function hy(i,e){i.ga.delete(e.path.canonicalString());const n=i.pa.get(e);null!==n&&(nf(i.remoteStore,n),i.pa=i.pa.remove(e),i.ya.delete(n),uf(i))}function eh(i,e,n){for(const o of n)o instanceof bp?(i.wa.addReference(o.key,e),th(i,o)):o instanceof Xd?(at("SyncEngine","Document no longer in limbo: "+o.key),i.wa.removeReference(o.key,e),i.wa.containsKey(o.key)||hy(i,o.key)):Lt()}function th(i,e){const n=e.key,o=n.path.canonicalString();i.pa.get(n)||i.ga.has(o)||(at("SyncEngine","New document in limbo: "+n),i.ga.add(o),uf(i))}function uf(i){for(;i.ga.size>0&&i.pa.size<i.maxConcurrentLimboResolutions;){const e=i.ga.values().next().value;i.ga.delete(e);const n=new Et(Un.fromString(e)),o=i.Da.next();i.ya.set(o,new uy(n)),i.pa=i.pa.insert(n,o),tf(i.remoteStore,new Au(Kt(Ro(n.path)),o,"TargetPurposeLimboResolution",bi._e))}}function ou(i,e,n){return kp.apply(this,arguments)}function kp(){return kp=(0,Ee.Z)(function*(i,e,n){const o=At(i),u=[],c=[],g=[];var R;o.ma.isEmpty()||(o.ma.forEach((R,x)=>{g.push(o.va(x,e,n).then(H=>{if((H||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(x.targetId,H?.fromCache?"not-current":"current"),H){u.push(H);const K=$g.Qi(x.targetId,H);c.push(K)}}))}),yield Promise.all(g),o.Va.a_(u),yield(R=(0,Ee.Z)(function*(H,K){const ie=At(H);try{yield ie.persistence.runTransaction("notifyLocalViewChanges","readwrite",we=>C.forEach(K,ze=>C.forEach(ze.ki,mt=>ie.persistence.referenceDelegate.addReference(we,ze.targetId,mt)).next(()=>C.forEach(ze.qi,mt=>ie.persistence.referenceDelegate.removeReference(we,ze.targetId,mt)))))}catch(we){if(!Le(we))throw we;at("LocalStore","Failed to update sequence numbers: "+we)}for(const we of K){const ze=we.targetId;if(!we.fromCache){const mt=ie.ts.get(ze),Ct=mt.withLastLimboFreeSnapshotVersion(mt.snapshotVersion);ie.ts=ie.ts.insert(ze,Ct)}}}),function x(H,K){return R.apply(this,arguments)})(o.localStore,c))}),kp.apply(this,arguments)}function Em(i,e){return lf.apply(this,arguments)}function lf(){return lf=(0,Ee.Z)(function*(i,e){const n=At(i);if(!n.currentUser.isEqual(e)){at("SyncEngine","User change. New user:",e.toKey());const o=yield q_(n.localStore,e);n.currentUser=e,(c=n).ba.forEach(R=>{R.forEach(x=>{x.reject(new Qe(qe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.ba.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield ou(n,o._s)}var c}),lf.apply(this,arguments)}function Im(i,e){const n=At(i),o=n.ya.get(e);if(o&&o.Ra)return kn().add(o.key);{let u=kn();const c=n.fa.get(e);if(!c)return u;for(const g of c){const R=n.ma.get(g);u=u.unionWith(R.view.ua)}return u}}function fy(i,e){return cf.apply(this,arguments)}function cf(){return cf=(0,Ee.Z)(function*(i,e){const n=At(i),o=yield cp(n.localStore,e.query,!0),u=e.view.da(o);return n.isPrimaryClient&&eh(n,e.targetId,u.Ta),u}),cf.apply(this,arguments)}function uE(i,e){return wm.apply(this,arguments)}function wm(){return wm=(0,Ee.Z)(function*(i,e){const n=At(i);return hp(n.localStore,e).then(o=>ou(n,o))}),wm.apply(this,arguments)}function lE(i,e,n,o){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,Ee.Z)(function*(i,e,n,o){const u=At(i),c=yield function(R,x){const H=At(R),K=At(H.mutationQueue);return H.persistence.runTransaction("Lookup mutation documents","readonly",ie=>K.Cn(ie,x).next(we=>we?H.localDocuments.getDocuments(ie,we):C.resolve(null)))}(u.localStore,e);var x;null!==c?("pending"===n?yield sf(u.remoteStore):"acknowledged"===n||"rejected"===n?(gc(u,e,o||null),xp(u,e),x=e,At(At(u.localStore).mutationQueue).Fn(x)):Lt(),yield ou(u,c)):at("SyncEngine","Cannot apply mutation batch with id: "+e)}),Fp.apply(this,arguments)}function Tm(){return Tm=(0,Ee.Z)(function*(i,e){const n=At(i);if(Sm(n),my(n),!0===e&&!0!==n.Ca){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield py(n,o.toArray());n.Ca=!0,yield ny(n.remoteStore,!0);for(const c of u)tf(n.remoteStore,c)}else if(!1===e&&!1!==n.Ca){const o=[];let u=Promise.resolve();n.fa.forEach((c,g)=>{n.sharedClientState.isLocalQueryTarget(g)?o.push(g):u=u.then(()=>(od(n,g),Wh(n.localStore,g,!0))),nf(n.remoteStore,g)}),yield u,yield py(n,o),function(g){const R=At(g);R.ya.forEach((x,H)=>{nf(R.remoteStore,H)}),R.wa.Vr(),R.ya=new Map,R.pa=new Dr(Et.comparator)}(n),n.Ca=!1,yield ny(n.remoteStore,!1)}}),Tm.apply(this,arguments)}function py(i,e,n){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,Ee.Z)(function*(i,e,n){const o=At(i),u=[],c=[];for(const g of e){let R;const x=o.fa.get(g);if(x&&0!==x.length){R=yield qh(o.localStore,Kt(x[0]));for(const H of x){const K=o.ma.get(H),ie=yield fy(o,K);ie.snapshot&&c.push(ie.snapshot)}}else{const H=yield dp(o.localStore,g);R=yield qh(o.localStore,H),yield mm(o,Dm(H),g,!1,R.resumeToken)}u.push(R)}return o.Va.a_(c),u}),Cm.apply(this,arguments)}function Dm(i){return Wu(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function gy(i){return n=At(i).localStore,At(At(n).persistence).Bi();var n}function dE(i,e,n,o){return Am.apply(this,arguments)}function Am(){return Am=(0,Ee.Z)(function*(i,e,n,o){const u=At(i);if(u.Ca)return void at("SyncEngine","Ignoring unexpected query state notification.");const c=u.fa.get(e);if(c&&c.length>0)switch(n){case"current":case"not-current":{const g=yield hp(u.localStore,yl(c[0])),R=Cu.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,mi.EMPTY_BYTE_STRING);yield ou(u,g,R);break}case"rejected":yield Wh(u.localStore,e,!0),od(u,e,o);break;default:Lt()}}),Am.apply(this,arguments)}function au(i,e,n){return bm.apply(this,arguments)}function bm(){return bm=(0,Ee.Z)(function*(i,e,n){const o=Sm(i);if(o.Ca){for(const u of e){if(o.fa.has(u)){at("SyncEngine","Adding an already active target "+u);continue}const c=yield dp(o.localStore,u),g=yield qh(o.localStore,c);yield mm(o,Dm(c),g.targetId,!1,g.resumeToken),tf(o.remoteStore,g)}for(const u of n)o.fa.has(u)&&(yield Wh(o.localStore,u,!1).then(()=>{nf(o.remoteStore,u),od(o,u)}).catch(O))}}),bm.apply(this,arguments)}function Sm(i){const e=At(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ym.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Im.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Pp.bind(null,e),e.Va.a_=iy.bind(null,e.eventManager),e.Va.Fa=Jd.bind(null,e.eventManager),e}function my(i){const e=At(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cy.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dy.bind(null,e),e}class nh{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Ee.Z)(function*(){n.serializer=Zd(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Gg(this.persistence,new G_,e.initialUser,this.serializer)}createPersistence(e){return new zd(Gd.jr,this.serializer)}createSharedClientState(e){return new K_}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Pm extends nh{constructor(e,n,o){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,Ee.Z)(function*(){yield n().call(o,e),yield o.xa.initialize(o,e),yield my(o.xa.syncEngine),yield sf(o.xa.remoteStore),yield o.persistence.mi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Gg(this.persistence,new G_,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new H_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new ju(n,this.persistence);return new rr(e.asyncQueue,o)}createPersistence(e){const n=dc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?qo.withCacheSize(this.cacheSizeBytes):qo.DEFAULT;return new Hg(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,yp(),vp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new K_}}class _y extends Pm{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,Ee.Z)(function*(){yield n().call(o,e);const u=o.xa.syncEngine;o.sharedClientState instanceof gp&&(o.sharedClientState.syncEngine={Ys:lE.bind(null,u),Zs:dE.bind(null,u),Xs:au.bind(null,u),Bi:gy.bind(null,u),Js:uE.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.mi(function(){var c=(0,Ee.Z)(function*(g){yield function cE(i,e){return Tm.apply(this,arguments)}(o.xa.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start():g||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(g&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():g||o.indexBackfillerScheduler.stop())});return function(g){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const n=yp();if(!gp.D(n))throw new Qe(qe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=dc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gp(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class ad{initialize(e,n){var o=this;return(0,Ee.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>aE(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Em.bind(null,o.syncEngine),yield ny(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ry}createDatastore(e){const n=Zd(e.databaseInfo.databaseId),o=new _p(e.databaseInfo);return new Jv(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return o=this.localStore,u=this.datastore,c=e.asyncQueue,g=n=>aE(this.syncEngine,n,0),R=mp.D()?new mp:new Zv,new Ep(o,u,c,g,R);var o,u,c,g,R}createSyncEngine(e,n){return function(u,c,g,R,x,H,K){const ie=new sE(u,c,g,R,x,H);return K&&(ie.Ca=!0),ie}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,Ee.Z)(function*(o){const u=At(o);at("RemoteStore","RemoteStore shutting down."),u.C_.add(5),yield Tl(u),u.F_.shutdown(),u.M_.set("Unknown")}),function n(o){return e.apply(this,arguments)})(this.remoteStore);var e}}function yy(i,e=10240){let n=0;return{read:()=>(0,Ee.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Lp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class Mm{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Cr,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(o=>{o&&o.Z_()?this.metadata.resolve(o.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.Y_)}`))},o=>this.metadata.reject(o))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,Ee.Z)(function*(){const n=yield e.qa();if(null===n)return null;const o=e.La.decode(n),u=Number(o);isNaN(u)&&e.Qa(`length string (${o}) is not valid number`);const c=yield e.Ka(u);return new iE(JSON.parse(c),n.length+u)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,Ee.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}Ka(e){var n=this;return(0,Ee.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const o=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,Ee.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class fE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Ee.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new Qe(qe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,Ee.Z)(function*(g,R){const x=At(g),H=Du(x.serializer)+"/documents",K={documents:R.map(mt=>jl(x.serializer,mt))},ie=yield x.Co("BatchGetDocuments",H,K,R.length),we=new Map;ie.forEach(mt=>{const wt=function Qf(i,e){return"found"in e?function(o,u){Bt(!!u.found);const c=ga(o,u.found.name),g=Ri(u.found.updateTime),R=u.found.createTime?Ri(u.found.createTime):$t.min(),x=new ms({mapValue:{fields:u.found.fields}});return Mn.newFoundDocument(c,g,R,x)}(i,e):"missing"in e?function(o,u){Bt(!!u.missing),Bt(!!u.readTime);const c=ga(o,u.missing),g=Ri(u.readTime);return Mn.newNoDocument(c,g)}(i,e):Lt()}(x.serializer,mt);we.set(wt.key.toString(),wt)});const ze=[];return R.forEach(mt=>{const wt=we.get(mt.toString());Bt(!!wt),ze.push(wt)}),ze}),function c(g,R){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Go(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const c=Et.fromPath(u);e.mutations.push(new Sd(c,e.precondition(c)))}),yield(o=(0,Ee.Z)(function*(c,g){const R=At(c),x=Du(R.serializer)+"/documents",H={writes:g.map(K=>kd(R.serializer,K))};yield R.wo("Commit",x,H)}),function u(c,g){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Lt();n=$t.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new Qe(qe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual($t.min())?_i.exists(!1):_i.updateTime(n):_i.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual($t.min()))throw new Qe(qe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _i.updateTime(n)}return _i.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pE{constructor(e,n,o,u,c){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=c,this.Wa=o.maxAttempts,this.zo=new Jh(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,Ee.Z)(function*(){const n=new fE(e.datastore),o=e.za(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(c=>{e.ja(c)}))}).catch(u=>{e.ja(u)})}))}za(e){try{const n=this.updateFunction(e);return!Bo(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!Md(n)}return!1}}class gE{constructor(e,n,o,u){var c=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=bn.UNAUTHENTICATED,this.clientId=ii.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var g=(0,Ee.Z)(function*(R){at("FirestoreClient","Received user=",R.uid),yield c.authCredentialListener(R),c.user=R});return function(R){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(o,g=>(at("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Qe(qe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=Yd(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function Vp(i,e){return Om.apply(this,arguments)}function Om(){return Om=(0,Ee.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),at("FirestoreClient","Initializing OfflineComponentProvider");const n=yield i.getConfiguration();yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,Ee.Z)(function*(c){o.isEqual(c)||(yield q_(e.localStore,c),o=c)});return function(c){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),Om.apply(this,arguments)}function Ru(i,e){return df.apply(this,arguments)}function df(){return df=(0,Ee.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield Up(i);at("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(n,o),i.setCredentialChangeListener(u=>um(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,c)=>um(e.remoteStore,c)),i._onlineComponents=e}),df.apply(this,arguments)}function vy(i){return"FirebaseError"===i.name?i.code===qe.FAILED_PRECONDITION||i.code===qe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function Up(i){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,Ee.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){at("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Vp(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!vy(n))throw n;fs("Error using user provided cache. Falling back to memory cache: "+n),yield Vp(i,new nh)}}else at("FirestoreClient","Using default OfflineComponentProvider"),yield Vp(i,new nh);return i._offlineComponents}),Nm.apply(this,arguments)}function hf(i){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,Ee.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(at("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ru(i,i._uninitializedComponentsProvider._online)):(at("FirestoreClient","Using default OnlineComponentProvider"),yield Ru(i,new ad))),i._onlineComponents}),Bp.apply(this,arguments)}function ff(i){return Up(i).then(e=>e.persistence)}function mc(i){return Up(i).then(e=>e.localStore)}function mE(i){return hf(i).then(e=>e.remoteStore)}function jp(i){return hf(i).then(e=>e.syncEngine)}function ud(i){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,Ee.Z)(function*(i){const e=yield hf(i),n=e.eventManager;return n.onListen=oE.bind(null,e.syncEngine),n.onUnlisten=zI.bind(null,e.syncEngine),n}),Hp.apply(this,arguments)}function Ey(i,e,n={}){const o=new Cr;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(c,g,R,x,H){const K=new Lp({next:we=>{g.enqueueAndForget(()=>fm(c,ie));const ze=we.docs.has(R);!ze&&we.fromCache?H.reject(new Qe(qe.UNAVAILABLE,"Failed to get document because the client is offline.")):ze&&we.fromCache&&x&&"server"===x.source?H.reject(new Qe(qe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(we)},error:we=>H.reject(we)}),ie=new pc(Ro(R.path),K,{includeMetadataChanges:!0,J_:!0});return Dp(c,ie)}(yield ud(i),i.asyncQueue,e,n,o)})),o.promise}function Iy(i,e,n={}){const o=new Cr;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(c,g,R,x,H){const K=new Lp({next:we=>{g.enqueueAndForget(()=>fm(c,ie)),we.fromCache&&"server"===x.source?H.reject(new Qe(qe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(we)},error:we=>H.reject(we)}),ie=new pc(R,K,{includeMetadataChanges:!0,J_:!0});return Dp(c,ie)}(yield ud(i),i.asyncQueue,e,n,o)})),o.promise}function vE(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const Cy=new Map;function Gp(i,e,n){if(!n)throw new Qe(qe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Lm(i,e,n,o){if(!0===e&&!0===o)throw new Qe(qe.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Dy(i){if(!Et.isDocumentKey(i))throw new Qe(qe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Ay(i){if(Et.isDocumentKey(i))throw new Qe(qe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function gf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(o=i).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof i?"a function":Lt()}function ar(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Qe(qe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gf(i);throw new Qe(qe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function rh(i,e){if(e<=0)throw new Qe(qe.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class by{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new Qe(qe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Qe(qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Lm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=vE(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(c){if(void 0!==c.timeoutSeconds){if(isNaN(c.timeoutSeconds))throw new Qe(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new Qe(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new Qe(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ih{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new by({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Qe(qe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Qe(qe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new by(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new Uu;switch(o.type){case"firstParty":return new Hs(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Qe(qe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=Cy.get(n);o&&(at("ComponentProvider","Removing Datastore"),Cy.delete(n),o.terminate())}(this),Promise.resolve()}}class No{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new No(this.firestore,e,this._query)}}class Fi{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fi(this.firestore,e,this._key)}}class xa extends No{constructor(e,n,o){super(e,n,Ro(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fi(this.firestore,null,new Et(e))}withConverter(e){return new xa(this.firestore,e,this._path)}}function Sy(i,e,...n){if(i=(0,je.m9)(i),Gp("collection","path",e),i instanceof ih){const o=Un.fromString(e,...n);return Ay(o),new xa(i,null,o)}{if(!(i instanceof Fi||i instanceof xa))throw new Qe(qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Un.fromString(e,...n));return Ay(o),new xa(i.firestore,null,o)}}function qp(i,e,...n){if(i=(0,je.m9)(i),1===arguments.length&&(e=ii.newId()),Gp("doc","path",e),i instanceof ih){const o=Un.fromString(e,...n);return Dy(o),new Fi(i,null,new Et(o))}{if(!(i instanceof Fi||i instanceof xa))throw new Qe(qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Un.fromString(e,...n));return Dy(o),new Fi(i.firestore,i instanceof xa?i.converter:null,new Et(o))}}function Ry(i,e){return i=(0,je.m9)(i),e=(0,je.m9)(e),(i instanceof Fi||i instanceof xa)&&(e instanceof Fi||e instanceof xa)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Um(i,e){return i=(0,je.m9)(i),e=(0,je.m9)(e),i instanceof No&&e instanceof No&&i.firestore===e.firestore&&oo(i._query,e._query)&&i.converter===e.converter}class IE{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Jh(this,"async_queue_retry"),this.iu=()=>{const n=vp();n&&at("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=vp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=vp();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Cr;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!Le(n))throw n;at("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(o=>{throw this.eu=o,this.tu=!1,gr("INTERNAL UNHANDLED ERROR: ",function(g){let R=g.message||"";return g.stack&&(R=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),R}(o)),o}).then(o=>(this.tu=!1,o))));return this.Ja=n,n}enqueueAfterDelay(e,n,o){this.su(),this.ru.indexOf(e)>-1&&(n=0);const u=cm.createAndSchedule(this,e,n,o,c=>this.au(c));return this.Xa.push(u),u}su(){this.eu&&Lt()}verifyOperationInProgress(){}uu(){var e=this;return(0,Ee.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function Bm(i){return function(n,o){if("object"!=typeof n||null===n)return!1;const u=n;for(const c of["next","error","complete"])if(c in u&&"function"==typeof u[c])return!0;return!1}(i)}class wE{constructor(){this._progressObserver={},this._taskCompletionResolver=new Cr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class oi extends ih{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new IE,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||My(this),this._firestoreClient.terminate()}}function Es(i){return i._firestoreClient||My(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function My(i){var e,n,o;const u=i._freezeSettings(),c=(x=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new wu(i._databaseId,x,i._persistenceKey,(K=u).host,K.ssl,K.experimentalForceLongPolling,K.experimentalAutoDetectLongPolling,vE(K.experimentalLongPollingOptions),K.useFetchStreams));var x,K;i._firestoreClient=new gE(i._authCredentials,i._appCheckCredentials,i._queue,c),null!==(n=u.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Oy(i,e,n){const o=new Cr;return i.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield Vp(i,n),yield Ru(i,e),o.resolve()}catch(u){const c=u;if(!vy(c))throw c;fs("Error enabling indexeddb cache. Falling back to memory cache: "+c),o.reject(c)}})).then(()=>o.promise)}function Hm(i){if(i._initialized||i._terminated)throw new Qe(qe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class bl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bl(mi.fromBase64String(e))}catch(n){throw new Qe(qe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bl(mi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ql{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Qe(qe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ld{constructor(e){this._methodName=e}}class uu{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Qe(qe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Qe(qe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return En(this._lat,e._lat)||En(this._long,e._long)}}const mf=/^__.*__$/;class Ko{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new pa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qu(e,this.data,n,this.fieldTransforms)}}class _c{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new pa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _f(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lt()}}class ma{constructor(e,n,o,u,c,g){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===c&&this.Pu(),this.fieldTransforms=c||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new ma(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Au(e),u}Ru(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Pu(),u}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return lh(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(_f(this.Iu)&&mf.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class $m{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Zd(e)}pu(e,n,o,u=!1){return new ma({Iu:e,methodName:n,gu:o,path:xr.emptyPath(),du:!1,fu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pu(i){const e=i._freezeSettings(),n=Zd(i._databaseId);return new $m(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Wl(i,e,n,o,u,c={}){const g=i.pu(c.merge||c.mergeFields?2:0,e,n,u);Qp("Data must be an object, but it was:",g,o);const R=Gm(o,g);let x,H;if(c.merge)x=new gs(g.fieldMask),H=g.fieldTransforms;else if(c.mergeFields){const K=[];for(const ie of c.mergeFields){const we=uh(e,ie,n);if(!g.contains(we))throw new Qe(qe.INVALID_ARGUMENT,`Field '${we}' is specified in your field mask but missing from your input data.`);Vy(K,we)||K.push(we)}x=new gs(K),H=g.fieldTransforms.filter(ie=>x.covers(ie.field))}else x=null,H=g.fieldTransforms;return new Ko(new ms(R),x,H)}class Sl extends ld{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sl}}function cd(i,e,n){return new ma({Iu:3,gu:e.settings.gu,methodName:i._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class yc extends ld{_toFieldTransform(e){return new nc(e.path,new iu)}isEqual(e){return e instanceof yc}}class sh extends ld{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=cd(this,e,!0),o=this.yu.map(c=>Ec(c,n)),u=new Ma(o);return new nc(e.path,u)}isEqual(e){return this===e}}class oh extends ld{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=cd(this,e,!0),o=this.yu.map(c=>Ec(c,n)),u=new su(o);return new nc(e.path,u)}isEqual(e){return this===e}}class ah extends ld{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new Ku(e.serializer,Hc(e.serializer,this.wu));return new nc(e.path,n)}isEqual(e){return this===e}}function vc(i,e,n,o){const u=i.pu(1,e,n);Qp("Data must be an object, but it was:",u,o);const c=[],g=ms.empty();Sa(o,(x,H)=>{const K=yf(e,x,n);H=(0,je.m9)(H);const ie=u.Ru(K);if(H instanceof Sl)c.push(K);else{const we=Ec(H,ie);null!=we&&(c.push(K),g.set(K,we))}});const R=new gs(c);return new _c(g,R,u.fieldTransforms)}function Zp(i,e,n,o,u,c){const g=i.pu(1,e,n),R=[uh(e,o,n)],x=[u];if(c.length%2!=0)throw new Qe(qe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let we=0;we<c.length;we+=2)R.push(uh(e,c[we])),x.push(c[we+1]);const H=[],K=ms.empty();for(let we=R.length-1;we>=0;--we)if(!Vy(H,R[we])){const ze=R[we];let mt=x[we];mt=(0,je.m9)(mt);const wt=g.Ru(ze);if(mt instanceof Sl)H.push(ze);else{const Ct=Ec(mt,wt);null!=Ct&&(H.push(ze),K.set(ze,Ct))}}const ie=new gs(H);return new _c(K,ie,g.fieldTransforms)}function zm(i,e,n,o=!1){return Ec(n,i.pu(o?4:3,e))}function Ec(i,e){if(qm(i=(0,je.m9)(i)))return Qp("Unsupported field value:",e,i),Gm(i,e);if(i instanceof ld)return function(o,u){if(!_f(u.Iu))throw u.mu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.mu(`${o._methodName}() is not currently supported inside arrays`);const c=o._toFieldTransform(u);c&&u.fieldTransforms.push(c)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(o,u){const c=[];let g=0;for(const R of o){let x=Ec(R,u.Vu(g));null==x&&(x={nullValue:"NULL_VALUE"}),c.push(x),g++}return{arrayValue:{values:c}}}(i,e)}return function(o,u){if(null===(o=(0,je.m9)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return Hc(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const c=Er.fromDate(o);return{timestampValue:kr(u.serializer,c)}}if(o instanceof Er){const c=new Er(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:kr(u.serializer,c)}}if(o instanceof uu)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof bl)return{bytesValue:Na(u.serializer,o._byteString)};if(o instanceof Fi){const c=u.databaseId,g=o.firestore._databaseId;if(!g.isEqual(c))throw u.mu(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:sc(o.firestore._databaseId||u.databaseId,o._key.path)}}throw u.mu(`Unsupported field value: ${gf(o)}`)}(i,e)}function Gm(i,e){const n={};return ro(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sa(i,(o,u)=>{const c=Ec(u,e.Eu(o));null!=c&&(n[o]=c)}),{mapValue:{fields:n}}}function qm(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Er||i instanceof uu||i instanceof bl||i instanceof Fi||i instanceof ld)}function Qp(i,e,n){if(!qm(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=gf(n);throw e.mu("an object"===o?i+" a custom object":i+" "+o)}var u}function uh(i,e,n){if((e=(0,je.m9)(e))instanceof ql)return e._internalPath;if("string"==typeof e)return yf(i,e);throw lh("Field path arguments must be of type string or ",i,!1,void 0,n)}const Ly=new RegExp("[~\\*/\\[\\]]");function yf(i,e,n){if(e.search(Ly)>=0)throw lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new ql(...e.split("."))._internalPath}catch{throw lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function lh(i,e,n,o,u){const c=o&&!o.isEmpty(),g=void 0!==u;let R=`Function ${e}() called with invalid data`;n&&(R+=" (via `toFirestore()`)"),R+=". ";let x="";return(c||g)&&(x+=" (found",c&&(x+=` in field ${o}`),g&&(x+=` in document ${u}`),x+=")"),new Qe(qe.INVALID_ARGUMENT,R+i+x)}function Vy(i,e){return i.some(n=>n.isEqual(e))}class Yp{constructor(e,n,o,u,c){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Fi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ZI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class ZI extends Yp{data(){return super.data()}}function Jp(i,e){return"string"==typeof e?yf(i,e):e instanceof ql?e._internalPath:e._delegate._internalPath}function Uy(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Qe(qe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class By{}class vf extends By{}function dd(i,e,...n){let o=[];e instanceof By&&o.push(e),o=o.concat(n),function(c){const g=c.filter(x=>x instanceof ch).length,R=c.filter(x=>x instanceof Ef).length;if(g>1||g>0&&R>0)throw new Qe(qe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class Ef extends vf{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Ef(e,n,o)}_apply(e){const n=this._parse(e);return ME(e._query,n),new No(e.firestore,e.converter,jn(e._query,n))}_parse(e){const n=Pu(e.firestore);return function(c,g,R,x,H,K,ie){let we;if(H.isKeyField()){if("array-contains"===K||"array-contains-any"===K)throw new Qe(qe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${K}' queries on documentId().`);if("in"===K||"not-in"===K){Af(ie,K);const ze=[];for(const mt of ie)ze.push(Df(x,c,mt));we={arrayValue:{values:ze}}}else we=Df(x,c,ie)}else"in"!==K&&"not-in"!==K&&"array-contains-any"!==K||Af(ie,K),we=zm(R,"where",ie,"in"===K||"not-in"===K);return h.create(H,K,we)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class ch extends By{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ch(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:m.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,c){let g=u;const R=c.getFlattenedFilters();for(const x of R)ME(g,x),g=jn(g,x)}(e._query,n),new No(e.firestore,e.converter,jn(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class If extends vf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new If(e,n)}_apply(e){const n=function(u,c,g){if(null!==u.startAt)throw new Qe(qe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new Qe(qe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zs(c,g)}(e._query,this._field,this._direction);return new No(e.firestore,e.converter,function(u,c){const g=u.explicitOrderBy.concat([c]);return new So(u.path,u.collectionGroup,g,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}class wf extends vf{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new wf(e,n,o)}_apply(e){return new No(e.firestore,e.converter,ki(e._query,this._limit,this._limitType))}}class tg extends vf{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new tg(e,n,o)}_apply(e){const n=rg(e,this.type,this._docOrFields,this._inclusive);return new No(e.firestore,e.converter,(c=n,new So((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,c,u.endAt)));var u,c}}class ng extends vf{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new ng(e,n,o)}_apply(e){const n=rg(e,this.type,this._docOrFields,this._inclusive);return new No(e.firestore,e.converter,(c=n,new So((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,c)));var u,c}}function rg(i,e,n,o){if(n[0]=(0,je.m9)(n[0]),n[0]instanceof Yp)return function(c,g,R,x,H){if(!x)throw new Qe(qe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${R}().`);const K=[];for(const ie of Mt(c))if(ie.field.isKeyField())K.push(da(g,x.key));else{const we=x.data.field(ie.field);if(Xl(we))throw new Qe(qe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ie.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===we){const ze=ie.field.canonicalString();throw new Qe(qe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ze}' (used as the orderBy) does not exist.`)}K.push(we)}return new qu(K,H)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=Pu(i.firestore);return function(g,R,x,H,K,ie){const we=g.explicitOrderBy;if(K.length>we.length)throw new Qe(qe.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ze=[];for(let mt=0;mt<K.length;mt++){const wt=K[mt];if(we[mt].field.isKeyField()){if("string"!=typeof wt)throw new Qe(qe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof wt}`);if(!Tu(g)&&-1!==wt.indexOf("/"))throw new Qe(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${H}() must be a plain document ID, but '${wt}' contains a slash.`);const Ct=g.path.child(Un.fromString(wt));if(!Et.isDocumentKey(Ct))throw new Qe(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${H}() must result in a valid document path, but '${Ct}' is not because it contains an odd number of segments.`);const gn=new Et(Ct);ze.push(da(R,gn))}else{const Ct=zm(x,H,wt);ze.push(Ct)}}return new qu(ze,ie)}(i._query,i.firestore._databaseId,u,e,n,o)}}function Df(i,e,n){if("string"==typeof(n=(0,je.m9)(n))){if(""===n)throw new Qe(qe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tu(e)&&-1!==n.indexOf("/"))throw new Qe(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(Un.fromString(n));if(!Et.isDocumentKey(o))throw new Qe(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return da(i,new Et(o))}if(n instanceof Fi)return da(i,n._key);throw new Qe(qe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gf(n)}.`)}function Af(i,e){if(!Array.isArray(i)||0===i.length)throw new Qe(qe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ME(i,e){const n=function(u,c){for(const g of u)for(const R of g.getFlattenedFilters())if(c.indexOf(R.op)>=0)return R.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Qe(qe.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Wm{convertValue(e,n="none"){switch(bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Lt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return Sa(e,(u,c)=>{o[u]=this.convertValue(c,n)}),o}convertGeoPoint(e){return new uu(mr(e.latitude),mr(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Iu(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(gl(e));default:return null}}convertTimestamp(e){const n=ss(e);return new Er(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Un.fromString(e);Bt(Dg(o));const u=new go(o.get(1),o.get(3)),c=new Et(o.popFirst(5));return u.isEqual(n)||gr(`Document ${c} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function dh(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class OE extends Wm{constructor(e){super(),this.firestore=e}convertBytes(e){return new bl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Fi(this.firestore,null,n)}}class Ic{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kl extends Yp{constructor(e,n,o,u,c,g){super(e,n,o,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(Jp("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class bf extends Kl{data(e={}){return super.data(e)}}class wc{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new Ic(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new bf(this._firestore,this._userDataWriter,o.key,o,new Ic(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Qe(qe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,c){if(u._snapshot.oldDocs.isEmpty()){let g=0;return u._snapshot.docChanges.map(R=>({type:"added",doc:new bf(u._firestore,u._userDataWriter,R.doc.key,R.doc,new Ic(u._snapshot.mutatedKeys.has(R.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:g++}))}{let g=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(R=>c||3!==R.type).map(R=>{const x=new bf(u._firestore,u._userDataWriter,R.doc.key,R.doc,new Ic(u._snapshot.mutatedKeys.has(R.doc.key),u._snapshot.fromCache),u.query.converter);let H=-1,K=-1;return 0!==R.type&&(H=g.indexOf(R.doc.key),g=g.delete(R.doc.key)),1!==R.type&&(g=g.add(R.doc),K=g.indexOf(R.doc.key)),{type:zy(R.type),doc:x,oldIndex:H,newIndex:K}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function zy(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Lt()}}function ig(i,e){return i instanceof Kl&&e instanceof Kl?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof wc&&e instanceof wc&&i._firestore===e._firestore&&Um(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Tc extends Wm{constructor(e){super(),this.firestore=e}convertBytes(e){return new bl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Fi(this.firestore,null,n)}}function qy(i,e,n){i=ar(i,Fi);const o=ar(i.firestore,oi),u=dh(i.converter,e,n);return hh(o,[Wl(Pu(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,_i.none())])}function Wy(i,e,n,...o){i=ar(i,Fi);const u=ar(i.firestore,oi),c=Pu(u);let g;return g="string"==typeof(e=(0,je.m9)(e))||e instanceof ql?Zp(c,"updateDoc",i._key,e,n,o):vc(c,"updateDoc",i._key,e),hh(u,[g.toMutation(i._key,_i.exists(!0))])}function Jm(i,...e){var n,o,u;i=(0,je.m9)(i);let c={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||Bm(e[g])||(c=e[g],g++);const R={includeMetadataChanges:c.includeMetadataChanges};if(Bm(e[g])){const ie=e[g];e[g]=null===(n=ie.next)||void 0===n?void 0:n.bind(ie),e[g+1]=null===(o=ie.error)||void 0===o?void 0:o.bind(ie),e[g+2]=null===(u=ie.complete)||void 0===u?void 0:u.bind(ie)}let x,H,K;if(i instanceof Fi)H=ar(i.firestore,oi),K=Ro(i._key.path),x={next:ie=>{e[g]&&e[g](Xm(H,i,ie))},error:e[g+1],complete:e[g+2]};else{const ie=ar(i,No);H=ar(ie.firestore,oi),K=ie._query;const we=new Tc(H);x={next:ze=>{e[g]&&e[g](new wc(H,we,ie,ze))},error:e[g+1],complete:e[g+2]},Uy(i._query)}return function(we,ze,mt,wt){const Ct=new Lp(wt),gn=new pc(ze,Ct,mt);return we.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return Dp(yield ud(we),gn)})),()=>{Ct.Na(),we.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return fm(yield ud(we),gn)}))}}(Es(H),K,R,x)}function hh(i,e){return function(o,u){const c=new Cr;return o.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function GI(i,e,n){return ly.apply(this,arguments)}(yield jp(o),u,c)})),c.promise}(Es(i),e)}function Xm(i,e,n){const o=n.docs.get(e._key),u=new Tc(i);return new Kl(i,u,e._key,o,new Ic(n.hasPendingWrites,n.fromCache),e.converter)}const n_={maxAttempts:5};class r_{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Pu(e)}set(e,n,o){this._verifyNotCommitted();const u=Zl(e,this._firestore),c=dh(u.converter,n,o),g=Wl(this._dataReader,"WriteBatch.set",u._key,c,null!==u.converter,o);return this._mutations.push(g.toMutation(u._key,_i.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const c=Zl(e,this._firestore);let g;return g="string"==typeof(n=(0,je.m9)(n))||n instanceof ql?Zp(this._dataReader,"WriteBatch.update",c._key,n,o,u):vc(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(g.toMutation(c._key,_i.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Zl(e,this._firestore);return this._mutations=this._mutations.concat(new Go(n._key,_i.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Qe(qe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zl(i,e){if((i=(0,je.m9)(i)).firestore!==e)throw new Qe(qe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Xy extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=Pu(n)}get(n){const o=Zl(n,this._firestore),u=new OE(this._firestore);return this._transaction.lookup([o._key]).then(c=>{if(!c||1!==c.length)return Lt();const g=c[0];if(g.isFoundDocument())return new Yp(this._firestore,u,g.key,g,o.converter);if(g.isNoDocument())return new Yp(this._firestore,u,o._key,null,o.converter);throw Lt()})}set(n,o,u){const c=Zl(n,this._firestore),g=dh(c.converter,o,u),R=Wl(this._dataReader,"Transaction.set",c._key,g,null!==c.converter,u);return this._transaction.set(c._key,R),this}update(n,o,u,...c){const g=Zl(n,this._firestore);let R;return R="string"==typeof(o=(0,je.m9)(o))||o instanceof ql?Zp(this._dataReader,"Transaction.update",g._key,o,u,c):vc(this._dataReader,"Transaction.update",g._key,o),this._transaction.update(g._key,R),this}delete(n){const o=Zl(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Zl(e,this._firestore),o=new Tc(this._firestore);return super.get(e).then(u=>new Kl(this._firestore,o,n._key,u._document,new Ic(!1,!1),n.converter))}}function ug(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Qe("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function uv(){if(typeof Uint8Array>"u")throw new Qe("unimplemented","Uint8Arrays are not available in this environment.")}function lv(){if(!function Oc(){return typeof atob<"u"}())throw new Qe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Do=ce.SDK_VERSION,(0,ce._registerComponent)(new Ve.wA("firestore",(o,{instanceIdentifier:u,options:c})=>{const g=o.getProvider("app").getImmediate(),R=new oi(new Za(o.getProvider("auth-internal")),new Ac(o.getProvider("app-check-internal")),function(H,K){if(!Object.prototype.hasOwnProperty.apply(H.options,["projectId"]))throw new Qe(qe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new go(H.options.projectId,K)}(g,u),g);return c=Object.assign({useFetchStreams:n},c),R._setSettings(c),R},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(mu,"4.3.2",e),(0,ce.registerVersion)(mu,"4.3.2","esm2017")}();class ph{constructor(e){this._delegate=e}static fromBase64String(e){return lv(),new ph(bl.fromBase64String(e))}static fromUint8Array(e){return uv(),new ph(bl.fromUint8Array(e))}toBase64(){return lv(),this._delegate.toBase64()}toUint8Array(){return uv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function o_(i){return function cv(i,e){if("object"!=typeof i||null===i)return!1;const n=i;for(const o of e)if(o in n&&"function"==typeof n[o])return!0;return!1}(i,["next","error","complete"])}class dv{enableIndexedDbPersistence(e,n){return function TE(i,e){Hm(i=ar(i,oi));const n=Es(i);if(n._uninitializedComponentsProvider)throw new Qe(qe.FAILED_PRECONDITION,"SDK cache is already specified.");fs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),u=new ad;return Oy(n,u,new Pm(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function CE(i){Hm(i=ar(i,oi));const e=Es(i);if(e._uninitializedComponentsProvider)throw new Qe(qe.FAILED_PRECONDITION,"SDK cache is already specified.");fs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),o=new ad;return Oy(e,o,new _y(o,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function DE(i){if(i._initialized&&!i._terminated)throw new Qe(qe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Cr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(n=(0,Ee.Z)(function*(u){if(!Z.D())return Promise.resolve();const c=u+"main";yield Z.delete(c)}),function o(u){return n.apply(this,arguments)})(dc(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class fd{constructor(e,n,o){this._delegate=n,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof go||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&fs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,o={}){!function Vm(i,e,n,o={}){var u;const c=(i=ar(i,ih))._getSettings(),g=`${e}:${n}`;if("firestore.googleapis.com"!==c.host&&c.host!==g&&fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:g,ssl:!1})),o.mockUserToken){let R,x;if("string"==typeof o.mockUserToken)R=o.mockUserToken,x=bn.MOCK_USER;else{R=(0,je.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const H=o.mockUserToken.sub||o.mockUserToken.user_id;if(!H)throw new Qe(qe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new bn(H)}i._authCredentials=new ul(new Ka(R,x))}}(this._delegate,e,n,o)}enableNetwork(){return function Ny(i){return function km(i){return i.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield ff(i),n=yield mE(i);return e.setNetworkEnabled(!0),function(u){const c=At(u);return c.C_.delete(0),ef(c)}(n)}))}(Es(i=ar(i,oi)))}(this._delegate)}disableNetwork(){return function xy(i){return function Gl(i){return i.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield ff(i),n=yield mE(i);return e.setNetworkEnabled(!1),(o=(0,Ee.Z)(function*(c){const g=At(c);g.C_.add(0),yield Tl(g),g.M_.set("Offline")}),function u(c){return o.apply(this,arguments)})(n);var o}))}(Es(i=ar(i,oi)))}(this._delegate)}enablePersistence(e){let n=!1,o=!1;return e&&(n=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Lm("synchronizeTabs",n,"experimentalForceOwningTab",o)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function AE(i){return function(n){const o=new Cr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function Nn(i,e){return Np.apply(this,arguments)}(yield jp(n),o)})),o.promise}(Es(i=ar(i,oi)))}(this._delegate)}onSnapshotsInSync(e){return function Ky(i,e){return function wy(i,e){const n=new Lp(e);return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return u=yield ud(i),c=n,At(u).q_.add(c),void c.next();var u,c})),()=>{n.Na(),i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return u=yield ud(i),c=n,void At(u).q_.delete(c);var u,c}))}}(Es(i=ar(i,oi)),Bm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Qe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new pd(this,Sy(this._delegate,e))}catch(n){throw Zo(n,"collection()","Firestore.collection()")}}doc(e){try{return new tl(this,qp(this._delegate,e))}catch(n){throw Zo(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ki(this,function EE(i,e){if(i=ar(i,ih),Gp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Qe(qe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new No(i,null,(o=e,new So(Un.emptyPath(),o)));var o}(this._delegate,e))}catch(n){throw Zo(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ev(i,e,n){i=ar(i,oi);const o=Object.assign(Object.assign({},n_),n);return function(c){if(c.maxAttempts<1)throw new Qe(qe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(c,g,R){const x=new Cr;return c.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const H=yield function xm(i){return hf(i).then(e=>e.datastore)}(c);new pE(c.asyncQueue,H,R,g,x).run()})),x.promise}(Es(i),u=>e(new Xy(i,u)),o)}(this._delegate,n=>e(new a_(this,n)))}batch(){return Es(this._delegate),new hv(new r_(this._delegate,e=>hh(this._delegate,e)))}loadBundle(e){return function KI(i,e){const n=Es(i=ar(i,oi)),o=new wE;return function yE(i,e,n,o){const u=function(g,R){let x;return x="string"==typeof g?Bl().encode(g):g,K=function(K,ie){if(K instanceof Uint8Array)return yy(K,void 0);if(K instanceof ArrayBuffer)return yy(new Uint8Array(K),void 0);if(K instanceof ReadableStream)return K.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(x),new Mm(K,R);var K}(n,Zd(e));i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function Rm(i,e,n){const o=At(i);var u;(u=(0,Ee.Z)(function*(g,R,x){try{const H=yield R.getMetadata();if(yield function(mt,wt){const Ct=At(mt),gn=Ri(wt.createTime);return Ct.persistence.runTransaction("hasNewerBundle","readonly",Cn=>Ct.Kr.getBundleMetadata(Cn,wt.id)).then(Cn=>!!Cn&&Cn.createTime.compareTo(gn)>=0)}(g.localStore,H))return yield R.close(),x._completeWith({taskState:"Success",documentsLoaded:(mt=H).totalDocuments,bytesLoaded:mt.totalBytes,totalDocuments:mt.totalDocuments,totalBytes:mt.totalBytes}),Promise.resolve(new Set);x._updateProgress(pm(H));const K=new oy(H,g.localStore,R.serializer);let ie=yield R.Ma();for(;ie;){const ze=yield K.ea(ie);ze&&x._updateProgress(ze),ie=yield R.Ma()}const we=yield K.complete();return yield ou(g,we.ra,void 0),yield function(mt,wt){const Ct=At(mt);return Ct.persistence.runTransaction("Save bundle","readwrite",gn=>Ct.Kr.saveBundleMetadata(gn,wt))}(g.localStore,H),x._completeWith(we.progress),Promise.resolve(we.na)}catch(H){return fs("SyncEngine",`Loading bundle failed with ${H}`),x._failWith(H),Promise.resolve(new Set)}var mt}),function c(g,R,x){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield jp(i),u,o)}))}(n,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function ky(i,e){return function $p(i,e){return i.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(o,u){const c=At(o);return c.persistence.runTransaction("Get named query","readonly",g=>c.Kr.getNamedQuery(g,u))}(yield mc(i),e)}))}(Es(i=ar(i,oi)),e).then(n=>n?new No(i,null,n.query):null)}(this._delegate,e).then(n=>n?new Ki(this,n):null)}}class lg extends Wm{constructor(e){super(),this.firestore=e}convertBytes(e){return new ph(new bl(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return tl.forKey(n,this.firestore,null)}}class a_{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new lg(e)}get(e){const n=Dc(e);return this._delegate.get(n).then(o=>new Rf(this._firestore,new Kl(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,n.converter)))}set(e,n,o){const u=Dc(e);return o?(ug("Transaction.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const c=Dc(e);return 2===arguments.length?this._delegate.update(c,n):this._delegate.update(c,n,o,...u),this}delete(e){const n=Dc(e);return this._delegate.delete(n),this}}class hv{constructor(e){this._delegate=e}set(e,n,o){const u=Dc(e);return o?(ug("WriteBatch.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const c=Dc(e);return 2===arguments.length?this._delegate.update(c,n):this._delegate.update(c,n,o,...u),this}delete(e){const n=Dc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Cc{constructor(e,n,o){this._firestore=e,this._userDataWriter=n,this._delegate=o}fromFirestore(e,n){const o=new bf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Pf(this._firestore,o),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const o=Cc.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let c=u.get(n);return c||(c=new Cc(e,new lg(e),n),u.set(n,c)),c}}Cc.INSTANCES=new WeakMap;class tl{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new lg(e)}static forPath(e,n,o){if(e.length%2!=0)throw new Qe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new tl(n,new Fi(n._delegate,o,new Et(e)))}static forKey(e,n,o){return new tl(n,new Fi(n._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new pd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new pd(this.firestore,Sy(this._delegate,e))}catch(n){throw Zo(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,je.m9)(e))instanceof Fi&&Ry(this._delegate,e)}set(e,n){n=ug("DocumentReference.set",n);try{return n?qy(this._delegate,e,n):qy(this._delegate,e)}catch(o){throw Zo(o,"setDoc()","DocumentReference.set()")}}update(e,n,...o){try{return 1===arguments.length?Wy(this._delegate,e):Wy(this._delegate,e,n,...o)}catch(u){throw Zo(u,"updateDoc()","DocumentReference.update()")}}delete(){return function Qm(i){return hh(ar(i.firestore,oi),[new Go(i._key,_i.none())])}(this._delegate)}onSnapshot(...e){const n=cg(e),o=nl(e,u=>new Rf(this.firestore,new Kl(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Jm(this._delegate,n,o)}get(e){let n;return n="cache"===e?.source?function sg(i){i=ar(i,Fi);const e=ar(i.firestore,oi),n=Es(e),o=new Tc(e);return function _E(i,e){const n=new Cr;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(o=(0,Ee.Z)(function*(c,g,R){try{const x=yield function(K,ie){const we=At(K);return we.persistence.runTransaction("read document","readonly",ze=>we.localDocuments.getDocument(ze,ie))}(c,g);x.isFoundDocument()?R.resolve(x):x.isNoDocument()?R.resolve(null):R.reject(new Qe(qe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(x){const H=Yd(x,`Failed to get document '${g} from cache`);R.reject(H)}}),function u(c,g,R){return o.apply(this,arguments)})(yield mc(i),e,n);var o})),n.promise}(n,i._key).then(u=>new Kl(e,o,i._key,u,new Ic(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function og(i){i=ar(i,Fi);const e=ar(i.firestore,oi);return Ey(Es(e),i._key,{source:"server"}).then(n=>Xm(e,i,n))}(this._delegate):function Km(i){i=ar(i,Fi);const e=ar(i.firestore,oi);return Ey(Es(e),i._key).then(n=>Xm(e,i,n))}(this._delegate),n.then(o=>new Rf(this.firestore,new Kl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new tl(this.firestore,this._delegate.withConverter(e?Cc.getInstance(this.firestore,e):null))}}function Zo(i,e,n){return i.message=i.message.replace(e,n),i}function cg(i){for(const e of i)if("object"==typeof e&&!o_(e))return e;return{}}function nl(i,e){var n,o;let u;return u=o_(i[0])?i[0]:o_(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:c=>{u.next&&u.next(e(c))},error:null===(n=u.error)||void 0===n?void 0:n.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Rf{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new tl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return ig(this._delegate,e._delegate)}}class Pf extends Rf{data(e){const n=this._delegate.data(e);return this._delegate._converter||function an(i,e){i||Lt()}(void 0!==n),n}}class Ki{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new lg(e)}where(e,n,o){try{return new Ki(this.firestore,dd(this._delegate,function bE(i,e,n){const o=e,u=Jp("where",i);return Ef._create(u,o,n)}(e,n,o)))}catch(u){throw Zo(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ki(this.firestore,dd(this._delegate,function eg(i,e="asc"){const n=e,o=Jp("orderBy",i);return If._create(o,n)}(e,n)))}catch(o){throw Zo(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ki(this.firestore,dd(this._delegate,function Tf(i){return rh("limit",i),wf._create("limit",i,"F")}(e)))}catch(n){throw Zo(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ki(this.firestore,dd(this._delegate,function Hy(i){return rh("limitToLast",i),wf._create("limitToLast",i,"L")}(e)))}catch(n){throw Zo(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ki(this.firestore,dd(this._delegate,function Cf(...i){return tg._create("startAt",i,!0)}(...e)))}catch(n){throw Zo(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ki(this.firestore,dd(this._delegate,function SE(...i){return tg._create("startAfter",i,!1)}(...e)))}catch(n){throw Zo(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ki(this.firestore,dd(this._delegate,function RE(...i){return ng._create("endBefore",i,!1)}(...e)))}catch(n){throw Zo(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ki(this.firestore,dd(this._delegate,function PE(...i){return ng._create("endAt",i,!0)}(...e)))}catch(n){throw Zo(n,"endAt()","Query.endAt()")}}isEqual(e){return Um(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function Gy(i){i=ar(i,No);const e=ar(i.firestore,oi),n=Es(e),o=new Tc(e);return function Fm(i,e){const n=new Cr;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(o=(0,Ee.Z)(function*(c,g,R){try{const x=yield cp(c,g,!0),H=new af(g,x.ls),K=H.ca(x.documents),ie=H.applyChanges(K,!1);R.resolve(ie.snapshot)}catch(x){const H=Yd(x,`Failed to execute query '${g} against cache`);R.reject(H)}}),function u(c,g,R){return o.apply(this,arguments)})(yield mc(i),e,n);var o})),n.promise}(n,i._query).then(u=>new wc(e,o,i,u))}(this._delegate):"server"===e?.source?function LE(i){i=ar(i,No);const e=ar(i.firestore,oi),n=Es(e),o=new Tc(e);return Iy(n,i._query,{source:"server"}).then(u=>new wc(e,o,i,u))}(this._delegate):function Zm(i){i=ar(i,No);const e=ar(i.firestore,oi),n=Es(e),o=new Tc(e);return Uy(i._query),Iy(n,i._query).then(u=>new wc(e,o,i,u))}(this._delegate),n.then(o=>new lu(this.firestore,new wc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const n=cg(e),o=nl(e,u=>new lu(this.firestore,new wc(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Jm(this._delegate,n,o)}withConverter(e){return new Ki(this.firestore,this._delegate.withConverter(e?Cc.getInstance(this.firestore,e):null))}}class rl{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Pf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class lu{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ki(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Pf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new rl(this._firestore,n))}forEach(e,n){this._delegate.forEach(o=>{e.call(n,new Pf(this._firestore,o))})}isEqual(e){return ig(this._delegate,e._delegate)}}class pd extends Ki{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new tl(this.firestore,e):null}doc(e){try{return new tl(this.firestore,void 0===e?qp(this._delegate):qp(this._delegate,e))}catch(n){throw Zo(n,"doc()","CollectionReference.doc()")}}add(e){return function Ym(i,e){const n=ar(i.firestore,oi),o=qp(i),u=dh(i.converter,e);return hh(n,[Wl(Pu(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,_i.exists(!1))]).then(()=>o)}(this._delegate,e).then(n=>new tl(this.firestore,n))}isEqual(e){return Ry(this._delegate,e._delegate)}withConverter(e){return new pd(this.firestore,this._delegate.withConverter(e?Cc.getInstance(this.firestore,e):null))}}function Dc(i){return ar(i,Fi)}class u_{constructor(...e){this._delegate=new ql(...e)}static documentId(){return new u_(xr.keyField().canonicalString())}isEqual(e){return(e=(0,je.m9)(e))instanceof ql&&this._delegate._internalPath.isEqual(e._internalPath)}}class gd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function nv(){return new yc("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new gd(e)}static delete(){const e=function tv(){return new Sl("deleteField")}();return e._methodName="FieldValue.delete",new gd(e)}static arrayUnion(...e){const n=function rv(...i){return new sh("arrayUnion",i)}(...e);return n._methodName="FieldValue.arrayUnion",new gd(n)}static arrayRemove(...e){const n=function iv(...i){return new oh("arrayRemove",i)}(...e);return n._methodName="FieldValue.arrayRemove",new gd(n)}static increment(e){const n=function ag(i){return new ah("increment",i)}(e);return n._methodName="FieldValue.increment",new gd(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const QE={Firestore:fd,GeoPoint:uu,Timestamp:Er,Blob:ph,Transaction:a_,WriteBatch:hv,DocumentReference:tl,DocumentSnapshot:Rf,Query:Ki,QueryDocumentSnapshot:Pf,QuerySnapshot:lu,CollectionReference:pd,FieldPath:u_,FieldValue:gd,setLogLevel:function ZE(i){!function la(i){qi.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function l_(i){(function YE(i,e){i.INTERNAL.registerComponent(new Ve.wA("firestore-compat",n=>{const o=n.getProvider("app-compat").getImmediate(),u=n.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},QE)))})(i,(e,n)=>new fd(e,n,new dv)),i.registerVersion("@firebase/firestore-compat","0.3.22")}(kt.Z);var Mf=z(7142);function c_(i,e){return function JE(i,e=Ie.z){return new Pe.y(n=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},n)}):o=i.onSnapshot({includeMetadataChanges:!0},n),()=>{o?.()}})}(i,e)}function d_(i,e){return c_(i,e).pipe((0,Ke.U)(n=>({payload:n,type:"query"})))}class h_{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const o=this.ref.collection(e),{ref:u,query:c}=p_(o,n);return new pv(u,c,this.afs)}snapshotChanges(){return function XE(i,e){return c_(i,e).pipe((0,le.O)(void 0),Je(),(0,Ke.U)(n=>{const[o,u]=n;return u.exists?o?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(q.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ke.U)(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return(0,P.D)(this.ref.get(e)).pipe(q.iC)}}function Of(i,e){return d_(i,e).pipe((0,le.O)(void 0),Je(),(0,Ke.U)(n=>{const[o,u]=n,c=u.payload.docChanges(),g=c.map(R=>({type:R.type,payload:R}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((R,x)=>{const H=c.find(ie=>ie.doc.ref.isEqual(R.ref)),K=o?.payload.docs.find(ie=>ie.ref.isEqual(R.ref));H&&JSON.stringify(H.doc.metadata)===JSON.stringify(R.metadata)||!H&&K&&JSON.stringify(K.metadata)===JSON.stringify(R.metadata)||g.push({type:"modified",payload:{oldIndex:x,newIndex:x,type:"modified",doc:R}})}),g}))}function Nf(i,e,n){return Of(i,n).pipe((0,ft.R)((o,u)=>function eI(i,e,n){return e.forEach(o=>{n.indexOf(o.type)>-1&&(i=function fv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return dg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=i.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return dg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(c=>c.payload),e),[]),(0,tt.x)(),(0,Ke.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function dg(i,e,n,...o){const u=i.slice();return u.splice(e,n,...o),u}function f_(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class pv{ref;query;afs;constructor(e,n,o){this.ref=e,this.query=n,this.afs=o}stateChanges(e){let n=Of(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,Ke.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),n.pipe((0,le.O)(void 0),Je(),(0,pt.h)(([o,u])=>u.length>0||!o),(0,Ke.U)(([,o])=>o),q.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ft.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=f_(e);return Nf(this.query,n,this.afs.schedulers.outsideAngular).pipe(q.iC)}valueChanges(e={}){return d_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(n=>n.payload.docs.map(o=>e.idField?{...o.data(),[e.idField]:o.id}:o.data())),q.iC)}get(e){return(0,P.D)(this.query.get(e)).pipe(q.iC)}add(e){return this.ref.add(e)}doc(e){return new h_(this.ref.doc(e),this.afs)}}class tI{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Of(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(n=>n.filter(o=>e.indexOf(o.type)>-1)),(0,pt.h)(n=>n.length>0),q.iC):Of(this.query,this.afs.schedulers.outsideAngular).pipe(q.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ft.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=f_(e);return Nf(this.query,n,this.afs.schedulers.outsideAngular).pipe(q.iC)}valueChanges(e={}){return d_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(o=>o.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),q.iC)}get(e){return(0,P.D)(this.query.get(e)).pipe(q.iC)}}const hg=new ue.OlP("angularfire2.enableFirestorePersistence"),fg=new ue.OlP("angularfire2.firestore.persistenceSettings"),gv=new ue.OlP("angularfire2.firestore.settings"),mv=new ue.OlP("angularfire2.firestore.use-emulator");function p_(i,e=(n=>n)){return{query:e(i),ref:i}}let g_=(()=>{class i{schedulers;firestore;persistenceEnabled$;constructor(n,o,u,c,g,R,x,H,K,ie,we,ze,mt,wt,Ct,gn,Cn){this.schedulers=x;const fn=(0,De.on)(n,R,o),Jn=K;ie&&(0,ve.nw)(fn,R,we,mt,wt,Ct,ze,gn),[this.firestore,this.persistenceEnabled$]=(0,De.cc)(`${fn.name}.firestore`,"AngularFirestore",fn.name,()=>{const Ar=R.runOutsideAngular(()=>fn.firestore());if(c&&Ar.settings(c),Jn&&Ar.useEmulator(...Jn),u&&!(0,w.PM)(g)){const Mr=()=>{try{return(0,P.D)(Ar.enablePersistence(H||void 0).then(()=>!0,()=>!1))}catch(Os){return typeof console<"u"&&console.warn(Os),(0,xe.of)(!1)}};return[Ar,R.runOutsideAngular(Mr)]}return[Ar,(0,xe.of)(!1)]},[c,Jn,u])}collection(n,o){let u;u="string"==typeof n?this.firestore.collection(n):n;const{ref:c,query:g}=p_(u,o),R=this.schedulers.ngZone.run(()=>c);return new pv(R,g,this)}collectionGroup(n,o){const u=o||(g=>g),c=this.firestore.collectionGroup(n);return new tI(u(c),this)}doc(n){let o;o="string"==typeof n?this.firestore.doc(n):n;const u=this.schedulers.ngZone.run(()=>o);return new h_(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||i)(ue.LFG(De.Dh),ue.LFG(De.xv,8),ue.LFG(hg,8),ue.LFG(gv,8),ue.LFG(ue.Lbi),ue.LFG(ue.R0b),ue.LFG(q.HU),ue.LFG(fg,8),ue.LFG(mv,8),ue.LFG(ve.zQ,8),ue.LFG(ve.Qv,8),ue.LFG(ve.L6,8),ue.LFG(ve._Q,8),ue.LFG(ve.rT,8),ue.LFG(ve.lh,8),ue.LFG(ve.f7,8),ue.LFG(q.Rf,8))};static \u0275prov=ue.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})(),_v=(()=>{class i{constructor(){Mf.Z.registerVersion("angularfire",q.q4.full,"fst-compat")}static enablePersistence(n){return{ngModule:i,providers:[{provide:hg,useValue:!0},{provide:fg,useValue:n}]}}static \u0275fac=function(o){return new(o||i)};static \u0275mod=ue.oAB({type:i});static \u0275inj=ue.cJS({providers:[g_]})}return i})()},7217:(Nt,He,z)=>{z.d(He,{Dh:()=>P,GT:()=>Ie,cc:()=>Ke,hO:()=>Je,on:()=>le,pX:()=>ve,xv:()=>xe});var w=z(5879),ue=z(8326),q=z(7142);const De=["ngOnDestroy"],ve=(ut,kt,Ee,ce={})=>new Proxy(ut,{get:(Ve,Te)=>Ee.runOutsideAngular(()=>{if(ut[Te])return ce?.spy?.get&&ce.spy.get(Te,ut[Te]),ut[Te];if(De.indexOf(Te)>-1)return()=>{};const je=kt.toPromise().then(Ye=>{const nt=Ye?.[Te];return"function"==typeof nt?nt.bind(Ye):nt?.then?nt.then(fe=>Ee.run(()=>fe)):Ee.run(()=>nt)});return new Proxy(()=>{},{get:(Ye,nt)=>je[nt],apply:(Ye,nt,fe)=>je.then(Qt=>{const ct=Qt?.(...fe);return ce?.spy?.apply&&ce.spy.apply(Te,fe,ct),ct})})})}),Ie=(ut,kt)=>{kt.forEach(Ee=>{Object.getOwnPropertyNames(Ee.prototype||Ee).forEach(ce=>{Object.defineProperty(ut.prototype,ce,Object.getOwnPropertyDescriptor(Ee.prototype||Ee,ce))})})};class Pe{constructor(kt){return kt}}const P=new w.OlP("angularfire2.app.options"),xe=new w.OlP("angularfire2.app.name");function le(ut,kt,Ee){const Ve="object"==typeof Ee&&Ee||{};Ve.name=Ve.name||"string"==typeof Ee&&Ee||"[DEFAULT]";const je=q.Z.apps.filter(Ye=>Ye&&Ye.name===Ve.name)[0]||kt.runOutsideAngular(()=>q.Z.initializeApp(ut,Ve));try{if(JSON.stringify(ut)!==JSON.stringify(je.options)){const Ye=!!module.hot;he("error",`${je.name} Firebase App already initialized with different options${Ye?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Pe(je)}const he=(ut,...kt)=>{(0,w.X6Q)()&&typeof console<"u"&&console[ut](...kt)},be={provide:Pe,useFactory:le,deps:[P,w.R0b,[new w.FiY,xe]]};let Je=(()=>{class ut{static initializeApp(Ee,ce){return{ngModule:ut,providers:[{provide:P,useValue:Ee},{provide:xe,useValue:ce}]}}constructor(Ee){q.Z.registerVersion("angularfire",ue.q4.full,"core"),q.Z.registerVersion("angularfire",ue.q4.full,"app-compat"),q.Z.registerVersion("angular",w.q4F.full,Ee.toString())}static \u0275fac=function(ce){return new(ce||ut)(w.LFG(w.Lbi))};static \u0275mod=w.oAB({type:ut});static \u0275inj=w.cJS({providers:[be]})}return ut})();function Ke(ut,kt,Ee,ce,Ve){const[,Te,je]=globalThis.\u0275AngularfireInstanceCache.find(Ye=>Ye[0]===ut)||[];if(Te)return function ft(ut,kt){try{return ut.toString()===kt.toString()}catch{return ut===kt}}(Ve,je)||(pt("error",`${kt} was already initialized on the ${Ee} Firebase App with different settings.${tt?" You may need to reload as Firebase is not HMR aware.":""}`),pt("warn",{is:Ve,was:je})),Te;{const Ye=ce();return globalThis.\u0275AngularfireInstanceCache.push([ut,Ye,Ve]),Ye}}const tt=typeof module<"u"&&!!module.hot,pt=(ut,...kt)=>{(0,w.X6Q)()&&typeof console<"u"&&console[ut](...kt)};globalThis.\u0275AngularfireInstanceCache||=[]},8326:(Nt,He,z)=>{z.d(He,{q4:()=>ft,iC:()=>Hn,fc:()=>Qt,HU:()=>je,Rf:()=>kt});var w=z(5879),ue=z(534);(0,ue.registerVersion)("firebase","10.6.0","app");var ve=z(1954),Pe=z(2631);const xe=new class P extends Pe.v{}(class Ie extends ve.o{constructor(Dt,me){super(Dt,me),this.scheduler=Dt,this.work=me}schedule(Dt,me=0){return me>0?super.schedule(Dt,me):(this.delay=me,this.state=Dt,this.scheduler.flush(this),this)}execute(Dt,me){return me>0||this.closed?super.execute(Dt,me):this._execute(Dt,me)}requestAsyncId(Dt,me,ye=0){return null!=ye&&ye>0||null==ye&&this.delay>0?super.requestAsyncId(Dt,me,ye):(Dt.flush(this),0)}});var he=z(6321),be=z(9397),Je=z(3093),Ke=z(5137);const ft=new w.GfV("ANGULARFIRE2_VERSION");class kt{constructor(){return((bt,Dt)=>{const me=(0,ue.getApps)(),ye=[];return me.forEach(Fe=>{Fe.container.getProvider(bt).instances.forEach(Ae=>{ye.includes(Ae)||ye.push(Ae)})}),ye})(Ee)}}const Ee="app-check";function ce(){}class Ve{zone;delegate;constructor(Dt,me=xe){this.zone=Dt,this.delegate=me}now(){return this.delegate.now()}schedule(Dt,me,ye){const Fe=this.zone;return this.delegate.schedule(function(Ae){Fe.runGuarded(()=>{Dt.apply(this,[Ae])})},me,ye)}}class Te{zone;task=null;constructor(Dt){this.zone=Dt}call(Dt,me){const ye=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ce,{},ce,ce)),me.pipe((0,be.b)({next:ye,complete:ye,error:ye})).subscribe(Dt).add(ye)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let je=(()=>{class bt{ngZone;outsideAngular;insideAngular;constructor(me){this.ngZone=me,this.outsideAngular=me.runOutsideAngular(()=>new Ve(Zone.current)),this.insideAngular=me.run(()=>new Ve(Zone.current,he.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(ye){return new(ye||bt)(w.LFG(w.R0b))};static \u0275prov=w.Yz7({token:bt,factory:bt.\u0275fac,providedIn:"root"})}return bt})();function Ye(){const bt=globalThis.\u0275AngularFireScheduler;if(!bt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return bt}function Qt(bt){return bt.pipe((0,Je.Q)(Ye().outsideAngular))}function Hn(bt){return function un(bt){return function(me){return(me=me.lift(new Te(bt.ngZone))).pipe((0,Ke.R)(bt.outsideAngular),(0,Je.Q)(bt.insideAngular))}}(Ye())(bt)}},6593:(Nt,He,z)=>{z.d(He,{Dx:()=>Li,b2:()=>$n,q6:()=>en,se:()=>nt});var w=z(5879),ue=z(6814);class q extends ue.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class De extends q{static makeCurrent(){(0,ue.HT)(new De)}onAndCancel(te,J,ne){return te.addEventListener(J,ne),()=>{te.removeEventListener(J,ne)}}dispatchEvent(te,J){te.dispatchEvent(J)}remove(te){te.parentNode&&te.parentNode.removeChild(te)}createElement(te,J){return(J=J||this.getDefaultDocument()).createElement(te)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(te){return te.nodeType===Node.ELEMENT_NODE}isShadowRoot(te){return te instanceof DocumentFragment}getGlobalEventTarget(te,J){return"window"===J?window:"document"===J?te:"body"===J?te.body:null}getBaseHref(te){const J=function Ie(){return ve=ve||document.querySelector("base"),ve?ve.getAttribute("href"):null}();return null==J?null:function P(ee){Pe=Pe||document.createElement("a"),Pe.setAttribute("href",ee);const te=Pe.pathname;return"/"===te.charAt(0)?te:`/${te}`}(J)}resetBaseElement(){ve=null}getUserAgent(){return window.navigator.userAgent}getCookie(te){return(0,ue.Mx)(document.cookie,te)}}let Pe,ve=null,le=(()=>{class ee{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(ne){return new(ne||ee)};static#t=this.\u0275prov=w.Yz7({token:ee,factory:ee.\u0275fac})}return ee})();const he=new w.OlP("EventManagerPlugins");let be=(()=>{class ee{constructor(J,ne){this._zone=ne,this._eventNameToPlugin=new Map,J.forEach(Re=>{Re.manager=this}),this._plugins=J.slice().reverse()}addEventListener(J,ne,Re){return this._findPluginFor(ne).addEventListener(J,ne,Re)}getZone(){return this._zone}_findPluginFor(J){let ne=this._eventNameToPlugin.get(J);if(ne)return ne;if(ne=this._plugins.find(Ze=>Ze.supports(J)),!ne)throw new w.vHH(5101,!1);return this._eventNameToPlugin.set(J,ne),ne}static#e=this.\u0275fac=function(ne){return new(ne||ee)(w.LFG(he),w.LFG(w.R0b))};static#t=this.\u0275prov=w.Yz7({token:ee,factory:ee.\u0275fac})}return ee})();class Je{constructor(te){this._doc=te}}const Ke="ng-app-id";let ft=(()=>{class ee{constructor(J,ne,Re,Ze={}){this.doc=J,this.appId=ne,this.nonce=Re,this.platformId=Ze,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,ue.PM)(Ze),this.resetHostNodes()}addStyles(J){for(const ne of J)1===this.changeUsageCount(ne,1)&&this.onStyleAdded(ne)}removeStyles(J){for(const ne of J)this.changeUsageCount(ne,-1)<=0&&this.onStyleRemoved(ne)}ngOnDestroy(){const J=this.styleNodesInDOM;J&&(J.forEach(ne=>ne.remove()),J.clear());for(const ne of this.getAllStyles())this.onStyleRemoved(ne);this.resetHostNodes()}addHost(J){this.hostNodes.add(J);for(const ne of this.getAllStyles())this.addStyleToHost(J,ne)}removeHost(J){this.hostNodes.delete(J)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(J){for(const ne of this.hostNodes)this.addStyleToHost(ne,J)}onStyleRemoved(J){const ne=this.styleRef;ne.get(J)?.elements?.forEach(Re=>Re.remove()),ne.delete(J)}collectServerRenderedStyles(){const J=this.doc.head?.querySelectorAll(`style[${Ke}="${this.appId}"]`);if(J?.length){const ne=new Map;return J.forEach(Re=>{null!=Re.textContent&&ne.set(Re.textContent,Re)}),ne}return null}changeUsageCount(J,ne){const Re=this.styleRef;if(Re.has(J)){const Ze=Re.get(J);return Ze.usage+=ne,Ze.usage}return Re.set(J,{usage:ne,elements:[]}),ne}getStyleElement(J,ne){const Re=this.styleNodesInDOM,Ze=Re?.get(ne);if(Ze?.parentNode===J)return Re.delete(ne),Ze.removeAttribute(Ke),Ze;{const ht=this.doc.createElement("style");return this.nonce&&ht.setAttribute("nonce",this.nonce),ht.textContent=ne,this.platformIsServer&&ht.setAttribute(Ke,this.appId),ht}}addStyleToHost(J,ne){const Re=this.getStyleElement(J,ne);J.appendChild(Re);const Ze=this.styleRef,ht=Ze.get(ne)?.elements;ht?ht.push(Re):Ze.set(ne,{elements:[Re],usage:1})}resetHostNodes(){const J=this.hostNodes;J.clear(),J.add(this.doc.head)}static#e=this.\u0275fac=function(ne){return new(ne||ee)(w.LFG(ue.K0),w.LFG(w.AFp),w.LFG(w.Ojb,8),w.LFG(w.Lbi))};static#t=this.\u0275prov=w.Yz7({token:ee,factory:ee.\u0275fac})}return ee})();const tt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pt=/%COMP%/g,Ve=new w.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Ye(ee,te){return te.map(J=>J.replace(pt,ee))}let nt=(()=>{class ee{constructor(J,ne,Re,Ze,ht,Jt,rn,Tt=null){this.eventManager=J,this.sharedStylesHost=ne,this.appId=Re,this.removeStylesOnCompDestroy=Ze,this.doc=ht,this.platformId=Jt,this.ngZone=rn,this.nonce=Tt,this.rendererByCompId=new Map,this.platformIsServer=(0,ue.PM)(Jt),this.defaultRenderer=new fe(J,ht,rn,this.platformIsServer)}createRenderer(J,ne){if(!J||!ne)return this.defaultRenderer;this.platformIsServer&&ne.encapsulation===w.ifc.ShadowDom&&(ne={...ne,encapsulation:w.ifc.Emulated});const Re=this.getOrCreateRenderer(J,ne);return Re instanceof Tn?Re.applyToHost(J):Re instanceof Xn&&Re.applyStyles(),Re}getOrCreateRenderer(J,ne){const Re=this.rendererByCompId;let Ze=Re.get(ne.id);if(!Ze){const ht=this.doc,Jt=this.ngZone,rn=this.eventManager,Tt=this.sharedStylesHost,Ft=this.removeStylesOnCompDestroy,lr=this.platformIsServer;switch(ne.encapsulation){case w.ifc.Emulated:Ze=new Tn(rn,Tt,ne,this.appId,Ft,ht,Jt,lr);break;case w.ifc.ShadowDom:return new un(rn,Tt,J,ne,ht,Jt,this.nonce,lr);default:Ze=new Xn(rn,Tt,ne,Ft,ht,Jt,lr)}Re.set(ne.id,Ze)}return Ze}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(ne){return new(ne||ee)(w.LFG(be),w.LFG(ft),w.LFG(w.AFp),w.LFG(Ve),w.LFG(ue.K0),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(w.Ojb))};static#t=this.\u0275prov=w.Yz7({token:ee,factory:ee.\u0275fac})}return ee})();class fe{constructor(te,J,ne,Re){this.eventManager=te,this.doc=J,this.ngZone=ne,this.platformIsServer=Re,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(te,J){return J?this.doc.createElementNS(tt[J]||J,te):this.doc.createElement(te)}createComment(te){return this.doc.createComment(te)}createText(te){return this.doc.createTextNode(te)}appendChild(te,J){(Hn(te)?te.content:te).appendChild(J)}insertBefore(te,J,ne){te&&(Hn(te)?te.content:te).insertBefore(J,ne)}removeChild(te,J){te&&te.removeChild(J)}selectRootElement(te,J){let ne="string"==typeof te?this.doc.querySelector(te):te;if(!ne)throw new w.vHH(-5104,!1);return J||(ne.textContent=""),ne}parentNode(te){return te.parentNode}nextSibling(te){return te.nextSibling}setAttribute(te,J,ne,Re){if(Re){J=Re+":"+J;const Ze=tt[Re];Ze?te.setAttributeNS(Ze,J,ne):te.setAttribute(J,ne)}else te.setAttribute(J,ne)}removeAttribute(te,J,ne){if(ne){const Re=tt[ne];Re?te.removeAttributeNS(Re,J):te.removeAttribute(`${ne}:${J}`)}else te.removeAttribute(J)}addClass(te,J){te.classList.add(J)}removeClass(te,J){te.classList.remove(J)}setStyle(te,J,ne,Re){Re&(w.JOm.DashCase|w.JOm.Important)?te.style.setProperty(J,ne,Re&w.JOm.Important?"important":""):te.style[J]=ne}removeStyle(te,J,ne){ne&w.JOm.DashCase?te.style.removeProperty(J):te.style[J]=""}setProperty(te,J,ne){te[J]=ne}setValue(te,J){te.nodeValue=J}listen(te,J,ne){if("string"==typeof te&&!(te=(0,ue.q)().getGlobalEventTarget(this.doc,te)))throw new Error(`Unsupported event target ${te} for event ${J}`);return this.eventManager.addEventListener(te,J,this.decoratePreventDefault(ne))}decoratePreventDefault(te){return J=>{if("__ngUnwrap__"===J)return te;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>te(J)):te(J))&&J.preventDefault()}}}function Hn(ee){return"TEMPLATE"===ee.tagName&&void 0!==ee.content}class un extends fe{constructor(te,J,ne,Re,Ze,ht,Jt,rn){super(te,Ze,ht,rn),this.sharedStylesHost=J,this.hostEl=ne,this.shadowRoot=ne.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Tt=Ye(Re.id,Re.styles);for(const Ft of Tt){const lr=document.createElement("style");Jt&&lr.setAttribute("nonce",Jt),lr.textContent=Ft,this.shadowRoot.appendChild(lr)}}nodeOrShadowRoot(te){return te===this.hostEl?this.shadowRoot:te}appendChild(te,J){return super.appendChild(this.nodeOrShadowRoot(te),J)}insertBefore(te,J,ne){return super.insertBefore(this.nodeOrShadowRoot(te),J,ne)}removeChild(te,J){return super.removeChild(this.nodeOrShadowRoot(te),J)}parentNode(te){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(te)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Xn extends fe{constructor(te,J,ne,Re,Ze,ht,Jt,rn){super(te,Ze,ht,Jt),this.sharedStylesHost=J,this.removeStylesOnCompDestroy=Re,this.styles=rn?Ye(rn,ne.styles):ne.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Tn extends Xn{constructor(te,J,ne,Re,Ze,ht,Jt,rn){const Tt=Re+"-"+ne.id;super(te,J,ne,Ze,ht,Jt,rn,Tt),this.contentAttr=function Te(ee){return"_ngcontent-%COMP%".replace(pt,ee)}(Tt),this.hostAttr=function je(ee){return"_nghost-%COMP%".replace(pt,ee)}(Tt)}applyToHost(te){this.applyStyles(),this.setAttribute(te,this.hostAttr,"")}createElement(te,J){const ne=super.createElement(te,J);return super.setAttribute(ne,this.contentAttr,""),ne}}let bt=(()=>{class ee extends Je{constructor(J){super(J)}supports(J){return!0}addEventListener(J,ne,Re){return J.addEventListener(ne,Re,!1),()=>this.removeEventListener(J,ne,Re)}removeEventListener(J,ne,Re){return J.removeEventListener(ne,Re)}static#e=this.\u0275fac=function(ne){return new(ne||ee)(w.LFG(ue.K0))};static#t=this.\u0275prov=w.Yz7({token:ee,factory:ee.\u0275fac})}return ee})();const Dt=["alt","control","meta","shift"],me={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ye={alt:ee=>ee.altKey,control:ee=>ee.ctrlKey,meta:ee=>ee.metaKey,shift:ee=>ee.shiftKey};let Fe=(()=>{class ee extends Je{constructor(J){super(J)}supports(J){return null!=ee.parseEventName(J)}addEventListener(J,ne,Re){const Ze=ee.parseEventName(ne),ht=ee.eventCallback(Ze.fullKey,Re,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,ue.q)().onAndCancel(J,Ze.domEventName,ht))}static parseEventName(J){const ne=J.toLowerCase().split("."),Re=ne.shift();if(0===ne.length||"keydown"!==Re&&"keyup"!==Re)return null;const Ze=ee._normalizeKey(ne.pop());let ht="",Jt=ne.indexOf("code");if(Jt>-1&&(ne.splice(Jt,1),ht="code."),Dt.forEach(Tt=>{const Ft=ne.indexOf(Tt);Ft>-1&&(ne.splice(Ft,1),ht+=Tt+".")}),ht+=Ze,0!=ne.length||0===Ze.length)return null;const rn={};return rn.domEventName=Re,rn.fullKey=ht,rn}static matchEventFullKeyCode(J,ne){let Re=me[J.key]||J.key,Ze="";return ne.indexOf("code.")>-1&&(Re=J.code,Ze="code."),!(null==Re||!Re)&&(Re=Re.toLowerCase()," "===Re?Re="space":"."===Re&&(Re="dot"),Dt.forEach(ht=>{ht!==Re&&(0,ye[ht])(J)&&(Ze+=ht+".")}),Ze+=Re,Ze===ne)}static eventCallback(J,ne,Re){return Ze=>{ee.matchEventFullKeyCode(Ze,J)&&Re.runGuarded(()=>ne(Ze))}}static _normalizeKey(J){return"esc"===J?"escape":J}static#e=this.\u0275fac=function(ne){return new(ne||ee)(w.LFG(ue.K0))};static#t=this.\u0275prov=w.Yz7({token:ee,factory:ee.\u0275fac})}return ee})();const en=(0,w.eFA)(w._c5,"browser",[{provide:w.Lbi,useValue:ue.bD},{provide:w.g9A,useValue:function dt(){De.makeCurrent()},multi:!0},{provide:ue.K0,useFactory:function St(){return(0,w.RDi)(document),document},deps:[]}]),Fn=new w.OlP(""),sn=[{provide:w.rWj,useClass:class xe{addToWindow(te){w.dqk.getAngularTestability=(ne,Re=!0)=>{const Ze=te.findTestabilityInTree(ne,Re);if(null==Ze)throw new w.vHH(5103,!1);return Ze},w.dqk.getAllAngularTestabilities=()=>te.getAllTestabilities(),w.dqk.getAllAngularRootElements=()=>te.getAllRootElements(),w.dqk.frameworkStabilizers||(w.dqk.frameworkStabilizers=[]),w.dqk.frameworkStabilizers.push(ne=>{const Re=w.dqk.getAllAngularTestabilities();let Ze=Re.length,ht=!1;const Jt=function(rn){ht=ht||rn,Ze--,0==Ze&&ne(ht)};Re.forEach(rn=>{rn.whenStable(Jt)})})}findTestabilityInTree(te,J,ne){return null==J?null:te.getTestability(J)??(ne?(0,ue.q)().isShadowRoot(J)?this.findTestabilityInTree(te,J.host,!0):this.findTestabilityInTree(te,J.parentElement,!0):null)}},deps:[]},{provide:w.lri,useClass:w.dDg,deps:[w.R0b,w.eoX,w.rWj]},{provide:w.dDg,useClass:w.dDg,deps:[w.R0b,w.eoX,w.rWj]}],mn=[{provide:w.zSh,useValue:"root"},{provide:w.qLn,useFactory:function fr(){return new w.qLn},deps:[]},{provide:he,useClass:bt,multi:!0,deps:[ue.K0,w.R0b,w.Lbi]},{provide:he,useClass:Fe,multi:!0,deps:[ue.K0]},nt,ft,be,{provide:w.FYo,useExisting:nt},{provide:ue.JF,useClass:le,deps:[]},[]];let $n=(()=>{class ee{constructor(J){}static withServerTransition(J){return{ngModule:ee,providers:[{provide:w.AFp,useValue:J.appId}]}}static#e=this.\u0275fac=function(ne){return new(ne||ee)(w.LFG(Fn,12))};static#t=this.\u0275mod=w.oAB({type:ee});static#n=this.\u0275inj=w.cJS({providers:[...mn,...sn],imports:[ue.ez,w.hGG]})}return ee})(),Li=(()=>{class ee{constructor(J){this._doc=J}getTitle(){return this._doc.title}setTitle(J){this._doc.title=J||""}static#e=this.\u0275fac=function(ne){return new(ne||ee)(w.LFG(ue.K0))};static#t=this.\u0275prov=w.Yz7({token:ee,factory:function(ne){let Re=null;return Re=ne?new ne:function er(){return new Li((0,w.LFG)(ue.K0))}(),Re},providedIn:"root"})}return ee})();typeof window<"u"&&window},9692:(Nt,He,z)=>{z.d(He,{gz:()=>Sn,wm:()=>fs,F0:()=>bn,rH:()=>js,Bz:()=>xr,lC:()=>wi,eV:()=>Di});var w=z(5879),ue=z(5592),q=z(4674),ve=z(2459),Ie=z(2096),Pe=z(5619),P=z(7453),xe=z(2737),le=z(7400),he=z(4564),be=z(2714),Je=z(8251),Ke=z(7103);function ft(...D){const O=(0,he.yG)(D),I=(0,he.jO)(D),{args:C,keys:V}=(0,P.D)(D);if(0===C.length)return(0,ve.D)([],O);const Z=new ue.y(function tt(D,O,I=xe.y){return C=>{pt(O,()=>{const{length:V}=D,Z=new Array(V);let ae=V,Be=V;for(let Le=0;Le<V;Le++)pt(O,()=>{const Rt=(0,ve.D)(D[Le],O);let dn=!1;Rt.subscribe((0,Je.x)(C,Rn=>{Z[Le]=Rn,dn||(dn=!0,Be--),Be||C.next(I(Z.slice()))},()=>{--ae||C.complete()}))},C)},C)}}(C,O,V?ae=>(0,be.n)(V,ae):xe.y));return I?Z.pipe((0,le.Z)(I)):Z}function pt(D,O,I){D?(0,Ke.f)(I,D,O):O()}var ut=z(6973),kt=z(5211),Ee=z(4829);function ce(D){return new ue.y(O=>{(0,Ee.Xf)(D()).subscribe(O)})}var Ve=z(8407);function Te(D,O){const I=(0,q.m)(D)?D:()=>D,C=V=>V.error(I());return new ue.y(O?V=>O.schedule(C,0,V):C)}var je=z(6232),Ye=z(7394),nt=z(9360);function fe(){return(0,nt.e)((D,O)=>{let I=null;D._refCount++;const C=(0,Je.x)(O,void 0,void 0,void 0,()=>{if(!D||D._refCount<=0||0<--D._refCount)return void(I=null);const V=D._connection,Z=I;I=null,V&&(!Z||V===Z)&&V.unsubscribe(),O.unsubscribe()});D.subscribe(C),C.closed||(I=D.connect())})}class Qt extends ue.y{constructor(O,I){super(),this.source=O,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,nt.A)(O)&&(this.lift=O.lift)}_subscribe(O){return this.getSubject().subscribe(O)}getSubject(){const O=this._subject;return(!O||O.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:O}=this;this._subject=this._connection=null,O?.unsubscribe()}connect(){let O=this._connection;if(!O){O=this._connection=new Ye.w0;const I=this.getSubject();O.add(this.source.subscribe((0,Je.x)(I,void 0,()=>{this._teardown(),I.complete()},C=>{this._teardown(),I.error(C)},()=>this._teardown()))),O.closed&&(this._connection=null,O=Ye.w0.EMPTY)}return O}refCount(){return fe()(this)}}var ct=z(8645),Hn=z(6814),un=z(7398),Xn=z(4664),Tn=z(8180),bt=z(7921),Dt=z(2181),me=z(1631),ye=z(1374);function Fe(D,O){return(0,q.m)(O)?(0,me.z)(D,O,1):(0,me.z)(D,1)}var Ce=z(9397);function Ae(D){return(0,nt.e)((O,I)=>{let Z,C=null,V=!1;C=O.subscribe((0,Je.x)(I,void 0,void 0,ae=>{Z=(0,Ee.Xf)(D(ae,Ae(D)(O))),C?(C.unsubscribe(),C=null,Z.subscribe(I)):V=!0})),V&&(C.unsubscribe(),C=null,Z.subscribe(I))})}var Ue=z(6699),yt=z(3572);function dt(D){return D<=0?()=>je.E:(0,nt.e)((O,I)=>{let C=[];O.subscribe((0,Je.x)(I,V=>{C.push(V),D<C.length&&C.shift()},()=>{for(const V of C)I.next(V);I.complete()},void 0,()=>{C=null}))})}var fr=z(3026);function en(D){return(0,nt.e)((O,I)=>{try{O.subscribe(I)}finally{I.add(D)}})}var Fn=z(2420),mn=z(7537),$n=z(6593);const Gt="primary",yn=Symbol("RouteTitle");class Fr{constructor(O){this.params=O||{}}has(O){return Object.prototype.hasOwnProperty.call(this.params,O)}get(O){if(this.has(O)){const I=this.params[O];return Array.isArray(I)?I[0]:I}return null}getAll(O){if(this.has(O)){const I=this.params[O];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function er(D){return new Fr(D)}function Li(D,O,I){const C=I.path.split("/");if(C.length>D.length||"full"===I.pathMatch&&(O.hasChildren()||C.length<D.length))return null;const V={};for(let Z=0;Z<C.length;Z++){const ae=C[Z],Be=D[Z];if(ae.startsWith(":"))V[ae.substring(1)]=Be;else if(ae!==Be.path)return null}return{consumed:D.slice(0,C.length),posParams:V}}function Qn(D,O){const I=D?Object.keys(D):void 0,C=O?Object.keys(O):void 0;if(!I||!C||I.length!=C.length)return!1;let V;for(let Z=0;Z<I.length;Z++)if(V=I[Z],!qt(D[V],O[V]))return!1;return!0}function qt(D,O){if(Array.isArray(D)&&Array.isArray(O)){if(D.length!==O.length)return!1;const I=[...D].sort(),C=[...O].sort();return I.every((V,Z)=>C[Z]===V)}return D===O}function _n(D){return D.length>0?D[D.length-1]:null}function Ut(D){return function De(D){return!!D&&(D instanceof ue.y||(0,q.m)(D.lift)&&(0,q.m)(D.subscribe))}(D)?D:(0,w.QGY)(D)?(0,ve.D)(Promise.resolve(D)):(0,Ie.of)(D)}const Ln={exact:function wr(D,O,I){if(!ai(D.segments,O.segments)||!ln(D.segments,O.segments,I)||D.numberOfChildren!==O.numberOfChildren)return!1;for(const C in O.children)if(!D.children[C]||!wr(D.children[C],O.children[C],I))return!1;return!0},subset:xt},Vn={exact:function zn(D,O){return Qn(D,O)},subset:function _o(D,O){return Object.keys(O).length<=Object.keys(D).length&&Object.keys(O).every(I=>qt(D[I],O[I]))},ignored:()=>!0};function Yr(D,O,I){return Ln[I.paths](D.root,O.root,I.matrixParams)&&Vn[I.queryParams](D.queryParams,O.queryParams)&&!("exact"===I.fragment&&D.fragment!==O.fragment)}function xt(D,O,I){return Zi(D,O,O.segments,I)}function Zi(D,O,I,C){if(D.segments.length>I.length){const V=D.segments.slice(0,I.length);return!(!ai(V,I)||O.hasChildren()||!ln(V,I,C))}if(D.segments.length===I.length){if(!ai(D.segments,I)||!ln(D.segments,I,C))return!1;for(const V in O.children)if(!D.children[V]||!xt(D.children[V],O.children[V],C))return!1;return!0}{const V=I.slice(0,D.segments.length),Z=I.slice(D.segments.length);return!!(ai(D.segments,V)&&ln(D.segments,V,C)&&D.children[Gt])&&Zi(D.children[Gt],O,Z,C)}}function ln(D,O,I){return O.every((C,V)=>Vn[I](D[V].parameters,C.parameters))}class _r{constructor(O=new pn([],{}),I={},C=null){this.root=O,this.queryParams=I,this.fragment=C}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=er(this.queryParams)),this._queryParamMap}toString(){return Vi.serialize(this)}}class pn{constructor(O,I){this.segments=O,this.children=I,this.parent=null,Object.values(I).forEach(C=>C.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ir(this)}}class Qi{constructor(O,I){this.path=O,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=er(this.parameters)),this._parameterMap}toString(){return Re(this)}}function ai(D,O){return D.length===O.length&&D.every((I,C)=>I.path===O[C].path)}let jr=(()=>{class D{static#e=this.\u0275fac=function(C){return new(C||D)};static#t=this.\u0275prov=w.Yz7({token:D,factory:function(){return new vi},providedIn:"root"})}return D})();class vi{parse(O){const I=new We(O);return new _r(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(O){const I=`/${Or(O.root,!0)}`,C=function ht(D){const O=Object.keys(D).map(I=>{const C=D[I];return Array.isArray(C)?C.map(V=>`${ge(I)}=${ge(V)}`).join("&"):`${ge(I)}=${ge(C)}`}).filter(I=>!!I);return O.length?`?${O.join("&")}`:""}(O.queryParams);return`${I}${C}${"string"==typeof O.fragment?`#${function ee(D){return encodeURI(D)}(O.fragment)}`:""}`}}const Vi=new vi;function ir(D){return D.segments.map(O=>Re(O)).join("/")}function Or(D,O){if(!D.hasChildren())return ir(D);if(O){const I=D.children[Gt]?Or(D.children[Gt],!1):"",C=[];return Object.entries(D.children).forEach(([V,Z])=>{V!==Gt&&C.push(`${V}:${Or(Z,!1)}`)}),C.length>0?`${I}(${C.join("//")})`:I}{const I=function Lr(D,O){let I=[];return Object.entries(D.children).forEach(([C,V])=>{C===Gt&&(I=I.concat(O(V,C)))}),Object.entries(D.children).forEach(([C,V])=>{C!==Gt&&(I=I.concat(O(V,C)))}),I}(D,(C,V)=>V===Gt?[Or(D.children[Gt],!1)]:[`${V}:${Or(C,!1)}`]);return 1===Object.keys(D.children).length&&null!=D.children[Gt]?`${ir(D)}/${I[0]}`:`${ir(D)}/(${I.join("//")})`}}function os(D){return encodeURIComponent(D).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ge(D){return os(D).replace(/%3B/gi,";")}function te(D){return os(D).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function J(D){return decodeURIComponent(D)}function ne(D){return J(D.replace(/\+/g,"%20"))}function Re(D){return`${te(D.path)}${function Ze(D){return Object.keys(D).map(O=>`;${te(O)}=${te(D[O])}`).join("")}(D.parameters)}`}const Jt=/^[^\/()?;#]+/;function rn(D){const O=D.match(Jt);return O?O[0]:""}const Tt=/^[^\/()?;=#]+/,lr=/^[^=?&#]+/,yo=/^[^&#]+/;class We{constructor(O){this.url=O,this.remaining=O}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pn([],{}):new pn([],this.parseChildren())}parseQueryParams(){const O={};if(this.consumeOptional("?"))do{this.parseQueryParam(O)}while(this.consumeOptional("&"));return O}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const O=[];for(this.peekStartsWith("(")||O.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),O.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let C={};return this.peekStartsWith("(")&&(C=this.parseParens(!1)),(O.length>0||Object.keys(I).length>0)&&(C[Gt]=new pn(O,I)),C}parseSegment(){const O=rn(this.remaining);if(""===O&&this.peekStartsWith(";"))throw new w.vHH(4009,!1);return this.capture(O),new Qi(J(O),this.parseMatrixParams())}parseMatrixParams(){const O={};for(;this.consumeOptional(";");)this.parseParam(O);return O}parseParam(O){const I=function Ft(D){const O=D.match(Tt);return O?O[0]:""}(this.remaining);if(!I)return;this.capture(I);let C="";if(this.consumeOptional("=")){const V=rn(this.remaining);V&&(C=V,this.capture(C))}O[J(I)]=J(C)}parseQueryParam(O){const I=function Ei(D){const O=D.match(lr);return O?O[0]:""}(this.remaining);if(!I)return;this.capture(I);let C="";if(this.consumeOptional("=")){const ae=function ka(D){const O=D.match(yo);return O?O[0]:""}(this.remaining);ae&&(C=ae,this.capture(C))}const V=ne(I),Z=ne(C);if(O.hasOwnProperty(V)){let ae=O[V];Array.isArray(ae)||(ae=[ae],O[V]=ae),ae.push(Z)}else O[V]=Z}parseParens(O){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const C=rn(this.remaining),V=this.remaining[C.length];if("/"!==V&&")"!==V&&";"!==V)throw new w.vHH(4010,!1);let Z;C.indexOf(":")>-1?(Z=C.slice(0,C.indexOf(":")),this.capture(Z),this.capture(":")):O&&(Z=Gt);const ae=this.parseChildren();I[Z]=1===Object.keys(ae).length?ae[Gt]:new pn([],ae),this.consumeOptional("//")}return I}peekStartsWith(O){return this.remaining.startsWith(O)}consumeOptional(O){return!!this.peekStartsWith(O)&&(this.remaining=this.remaining.substring(O.length),!0)}capture(O){if(!this.consumeOptional(O))throw new w.vHH(4011,!1)}}function Oe(D){return D.segments.length>0?new pn([],{[Gt]:D}):D}function st(D){const O={};for(const C of Object.keys(D.children)){const Z=st(D.children[C]);if(C===Gt&&0===Z.segments.length&&Z.hasChildren())for(const[ae,Be]of Object.entries(Z.children))O[ae]=Be;else(Z.segments.length>0||Z.hasChildren())&&(O[C]=Z)}return function jt(D){if(1===D.numberOfChildren&&D.children[Gt]){const O=D.children[Gt];return new pn(D.segments.concat(O.segments),O.children)}return D}(new pn(D.segments,O))}function Wt(D){return D instanceof _r}function Xt(D){let O;const V=Oe(function I(Z){const ae={};for(const Le of Z.children){const Rt=I(Le);ae[Le.outlet]=Rt}const Be=new pn(Z.url,ae);return Z===D&&(O=Be),Be}(D.root));return O??V}function Gn(D,O,I,C){let V=D;for(;V.parent;)V=V.parent;if(0===O.length)return Jr(V,V,V,I,C);const Z=function Ws(D){if("string"==typeof D[0]&&1===D.length&&"/"===D[0])return new vo(!0,0,D);let O=0,I=!1;const C=D.reduce((V,Z,ae)=>{if("object"==typeof Z&&null!=Z){if(Z.outlets){const Be={};return Object.entries(Z.outlets).forEach(([Le,Rt])=>{Be[Le]="string"==typeof Rt?Rt.split("/"):Rt}),[...V,{outlets:Be}]}if(Z.segmentPath)return[...V,Z.segmentPath]}return"string"!=typeof Z?[...V,Z]:0===ae?(Z.split("/").forEach((Be,Le)=>{0==Le&&"."===Be||(0==Le&&""===Be?I=!0:".."===Be?O++:""!=Be&&V.push(Be))}),V):[...V,Z]},[]);return new vo(I,O,C)}(O);if(Z.toRoot())return Jr(V,V,new pn([],{}),I,C);const ae=function Zs(D,O,I){if(D.isAbsolute)return new Ks(O,!0,0);if(!I)return new Ks(O,!1,NaN);if(null===I.parent)return new Ks(I,!0,0);const C=qn(D.commands[0])?0:1;return function Qo(D,O,I){let C=D,V=O,Z=I;for(;Z>V;){if(Z-=V,C=C.parent,!C)throw new w.vHH(4005,!1);V=C.segments.length}return new Ks(C,!1,V-Z)}(I,I.segments.length-1+C,D.numberOfDoubleDots)}(Z,V,D),Be=ae.processChildren?Ii(ae.segmentGroup,ae.index,Z.commands):Yo(ae.segmentGroup,ae.index,Z.commands);return Jr(V,ae.segmentGroup,Be,I,C)}function qn(D){return"object"==typeof D&&null!=D&&!D.outlets&&!D.segmentPath}function ti(D){return"object"==typeof D&&null!=D&&D.outlets}function Jr(D,O,I,C,V){let ae,Z={};C&&Object.entries(C).forEach(([Le,Rt])=>{Z[Le]=Array.isArray(Rt)?Rt.map(dn=>`${dn}`):`${Rt}`}),ae=D===O?I:as(D,O,I);const Be=Oe(st(ae));return new _r(Be,Z,V)}function as(D,O,I){const C={};return Object.entries(D.children).forEach(([V,Z])=>{C[V]=Z===O?I:as(Z,O,I)}),new pn(D.segments,C)}class vo{constructor(O,I,C){if(this.isAbsolute=O,this.numberOfDoubleDots=I,this.commands=C,O&&C.length>0&&qn(C[0]))throw new w.vHH(4003,!1);const V=C.find(ti);if(V&&V!==_n(C))throw new w.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ks{constructor(O,I,C){this.segmentGroup=O,this.processChildren=I,this.index=C}}function Yo(D,O,I){if(D||(D=new pn([],{})),0===D.segments.length&&D.hasChildren())return Ii(D,O,I);const C=function Yi(D,O,I){let C=0,V=O;const Z={match:!1,pathIndex:0,commandIndex:0};for(;V<D.segments.length;){if(C>=I.length)return Z;const ae=D.segments[V],Be=I[C];if(ti(Be))break;const Le=`${Be}`,Rt=C<I.length-1?I[C+1]:null;if(V>0&&void 0===Le)break;if(Le&&Rt&&"object"==typeof Rt&&void 0===Rt.outlets){if(!Nr(Le,Rt,ae))return Z;C+=2}else{if(!Nr(Le,{},ae))return Z;C++}V++}return{match:!0,pathIndex:V,commandIndex:C}}(D,O,I),V=I.slice(C.commandIndex);if(C.match&&C.pathIndex<D.segments.length){const Z=new pn(D.segments.slice(0,C.pathIndex),{});return Z.children[Gt]=new pn(D.segments.slice(C.pathIndex),D.children),Ii(Z,0,V)}return C.match&&0===V.length?new pn(D.segments,{}):C.match&&!D.hasChildren()?Eo(D,O,I):C.match?Ii(D,0,V):Eo(D,O,I)}function Ii(D,O,I){if(0===I.length)return new pn(D.segments,{});{const C=function xn(D){return ti(D[0])?D[0].outlets:{[Gt]:D}}(I),V={};if(Object.keys(C).some(Z=>Z!==Gt)&&D.children[Gt]&&1===D.numberOfChildren&&0===D.children[Gt].segments.length){const Z=Ii(D.children[Gt],O,I);return new pn(D.segments,Z.children)}return Object.entries(C).forEach(([Z,ae])=>{"string"==typeof ae&&(ae=[ae]),null!==ae&&(V[Z]=Yo(D.children[Z],O,ae))}),Object.entries(D.children).forEach(([Z,ae])=>{void 0===C[Z]&&(V[Z]=ae)}),new pn(D.segments,V)}}function Eo(D,O,I){const C=D.segments.slice(0,O);let V=0;for(;V<I.length;){const Z=I[V];if(ti(Z)){const Le=Ji(Z.outlets);return new pn(C,Le)}if(0===V&&qn(I[0])){C.push(new Qi(D.segments[O].path,co(I[0]))),V++;continue}const ae=ti(Z)?Z.outlets[Gt]:`${Z}`,Be=V<I.length-1?I[V+1]:null;ae&&Be&&qn(Be)?(C.push(new Qi(ae,co(Be))),V+=2):(C.push(new Qi(ae,{})),V++)}return new pn(C,{})}function Ji(D){const O={};return Object.entries(D).forEach(([I,C])=>{"string"==typeof C&&(C=[C]),null!==C&&(O[I]=Eo(new pn([],{}),0,C))}),O}function co(D){const O={};return Object.entries(D).forEach(([I,C])=>O[I]=`${C}`),O}function Nr(D,O,I){return D==I.path&&Qn(O,I.parameters)}const Hr="imperative";class ui{constructor(O,I){this.id=O,this.url=I}}class Is extends ui{constructor(O,I,C="imperative",V=null){super(O,I),this.type=0,this.navigationTrigger=C,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mi extends ui{constructor(O,I,C){super(O,I),this.urlAfterRedirects=C,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class us extends ui{constructor(O,I,C,V){super(O,I),this.reason=C,this.code=V,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Qs extends ui{constructor(O,I,C,V){super(O,I),this.reason=C,this.code=V,this.type=16}}class $r extends ui{constructor(O,I,C,V){super(O,I),this.error=C,this.target=V,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class du extends ui{constructor(O,I,C,V){super(O,I),this.urlAfterRedirects=C,this.state=V,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class li extends ui{constructor(O,I,C,V){super(O,I),this.urlAfterRedirects=C,this.state=V,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xo extends ui{constructor(O,I,C,V,Z){super(O,I),this.urlAfterRedirects=C,this.state=V,this.shouldActivate=Z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ho extends ui{constructor(O,I,C,V){super(O,I),this.urlAfterRedirects=C,this.state=V,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jo extends ui{constructor(O,I,C,V){super(O,I),this.urlAfterRedirects=C,this.state=V,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hu{constructor(O){this.route=O,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Fa{constructor(O){this.route=O,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Oi{constructor(O){this.snapshot=O,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class La{constructor(O){this.snapshot=O,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xo{constructor(O){this.snapshot=O,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zr{constructor(O){this.snapshot=O,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ns{constructor(O,I,C){this.routerEvent=O,this.position=I,this.anchor=C,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class wn{}class tr{constructor(O){this.url=O}}class Ys{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Gr,this.attachRef=null}}let Gr=(()=>{class D{constructor(){this.contexts=new Map}onChildOutletCreated(I,C){const V=this.getOrCreateContext(I);V.outlet=C,this.contexts.set(I,V)}onChildOutletDestroyed(I){const C=this.getContext(I);C&&(C.outlet=null,C.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let C=this.getContext(I);return C||(C=new Ys,this.contexts.set(I,C)),C}getContext(I){return this.contexts.get(I)||null}static#e=this.\u0275fac=function(C){return new(C||D)};static#t=this.\u0275prov=w.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})();class Vr{constructor(O){this._root=O}get root(){return this._root.value}parent(O){const I=this.pathFromRoot(O);return I.length>1?I[I.length-2]:null}children(O){const I=xs(O,this._root);return I?I.children.map(C=>C.value):[]}firstChild(O){const I=xs(O,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(O){const I=ks(O,this._root);return I.length<2?[]:I[I.length-2].children.map(V=>V.value).filter(V=>V!==O)}pathFromRoot(O){return ks(O,this._root).map(I=>I.value)}}function xs(D,O){if(D===O.value)return O;for(const I of O.children){const C=xs(D,I);if(C)return C}return null}function ks(D,O){if(D===O.value)return[O];for(const I of O.children){const C=ks(D,I);if(C.length)return C.unshift(O),C}return[]}class ws{constructor(O,I){this.value=O,this.children=I}toString(){return`TreeNode(${this.value})`}}function Ts(D){const O={};return D&&D.children.forEach(I=>O[I.value.outlet]=I),O}class cr extends Vr{constructor(O,I){super(O),this.snapshot=I,dr(this,O)}toString(){return this.snapshot.toString()}}function vt(D,O){const I=function cn(D,O){const ae=new ci([],{},{},"",{},Gt,O,null,{});return new Js("",new ws(ae,[]))}(0,O),C=new Pe.X([new Qi("",{})]),V=new Pe.X({}),Z=new Pe.X({}),ae=new Pe.X({}),Be=new Pe.X(""),Le=new Sn(C,V,ae,Be,Z,Gt,O,I.root);return Le.snapshot=I.root,new cr(new ws(Le,[]),I)}class Sn{constructor(O,I,C,V,Z,ae,Be,Le){this.urlSubject=O,this.paramsSubject=I,this.queryParamsSubject=C,this.fragmentSubject=V,this.dataSubject=Z,this.outlet=ae,this.component=Be,this._futureSnapshot=Le,this.title=this.dataSubject?.pipe((0,un.U)(Rt=>Rt[yn]))??(0,Ie.of)(void 0),this.url=O,this.params=I,this.queryParams=C,this.fragment=V,this.data=Z}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,un.U)(O=>er(O)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,un.U)(O=>er(O)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qr(D,O="emptyOnly"){const I=D.pathFromRoot;let C=0;if("always"!==O)for(C=I.length-1;C>=1;){const V=I[C],Z=I[C-1];if(V.routeConfig&&""===V.routeConfig.path)C--;else{if(Z.component)break;C--}}return function Io(D){return D.reduce((O,I)=>({params:{...O.params,...I.params},data:{...O.data,...I.data},resolve:{...I.data,...O.resolve,...I.routeConfig?.data,...I._resolvedData}}),{params:{},data:{},resolve:{}})}(I.slice(C))}class ci{get title(){return this.data?.[yn]}constructor(O,I,C,V,Z,ae,Be,Le,Rt){this.url=O,this.params=I,this.queryParams=C,this.fragment=V,this.data=Z,this.outlet=ae,this.component=Be,this.routeConfig=Le,this._resolve=Rt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=er(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=er(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(C=>C.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Js extends Vr{constructor(O,I){super(I),this.url=O,dr(this,I)}toString(){return Ui(this._root)}}function dr(D,O){O.value._routerState=D,O.children.forEach(I=>dr(D,I))}function Ui(D){const O=D.children.length>0?` { ${D.children.map(Ui).join(", ")} } `:"";return`${D.value}${O}`}function Bi(D){if(D.snapshot){const O=D.snapshot,I=D._futureSnapshot;D.snapshot=I,Qn(O.queryParams,I.queryParams)||D.queryParamsSubject.next(I.queryParams),O.fragment!==I.fragment&&D.fragmentSubject.next(I.fragment),Qn(O.params,I.params)||D.paramsSubject.next(I.params),function Pi(D,O){if(D.length!==O.length)return!1;for(let I=0;I<D.length;++I)if(!Qn(D[I],O[I]))return!1;return!0}(O.url,I.url)||D.urlSubject.next(I.url),Qn(O.data,I.data)||D.dataSubject.next(I.data)}else D.snapshot=D._futureSnapshot,D.dataSubject.next(D._futureSnapshot.data)}function Ht(D,O){const I=Qn(D.params,O.params)&&function Br(D,O){return ai(D,O)&&D.every((I,C)=>Qn(I.parameters,O[C].parameters))}(D.url,O.url);return I&&!(!D.parent!=!O.parent)&&(!D.parent||Ht(D.parent,O.parent))}let wi=(()=>{class D{constructor(){this.activated=null,this._activatedRoute=null,this.name=Gt,this.activateEvents=new w.vpe,this.deactivateEvents=new w.vpe,this.attachEvents=new w.vpe,this.detachEvents=new w.vpe,this.parentContexts=(0,w.f3M)(Gr),this.location=(0,w.f3M)(w.s_b),this.changeDetector=(0,w.f3M)(w.sBO),this.environmentInjector=(0,w.f3M)(w.lqb),this.inputBinder=(0,w.f3M)(Ur,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(I){if(I.name){const{firstChange:C,previousValue:V}=I.name;if(C)return;this.isTrackedInParentContexts(V)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(V)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(I){return this.parentContexts.getContext(I)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const I=this.parentContexts.getContext(this.name);I?.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new w.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new w.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new w.vHH(4012,!1);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,C){this.activated=I,this._activatedRoute=C,this.location.insert(I.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,C){if(this.isActivated)throw new w.vHH(4013,!1);this._activatedRoute=I;const V=this.location,ae=I.snapshot.component,Be=this.parentContexts.getOrCreateContext(this.name).children,Le=new ea(I,Be,V.injector);this.activated=V.createComponent(ae,{index:V.length,injector:Le,environmentInjector:C??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(C){return new(C||D)};static#t=this.\u0275dir=w.lG2({type:D,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[w.TTD]})}return D})();class ea{constructor(O,I,C){this.route=O,this.childContexts=I,this.parent=C}get(O,I){return O===Sn?this.route:O===Gr?this.childContexts:this.parent.get(O,I)}}const Ur=new w.OlP("");let br=(()=>{class D{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(I){this.unsubscribeFromRouteData(I),this.subscribeToRouteData(I)}unsubscribeFromRouteData(I){this.outletDataSubscriptions.get(I)?.unsubscribe(),this.outletDataSubscriptions.delete(I)}subscribeToRouteData(I){const{activatedRoute:C}=I,V=ft([C.queryParams,C.params,C.data]).pipe((0,Xn.w)(([Z,ae,Be],Le)=>(Be={...Z,...ae,...Be},0===Le?(0,Ie.of)(Be):Promise.resolve(Be)))).subscribe(Z=>{if(!I.isActivated||!I.activatedComponentRef||I.activatedRoute!==C||null===C.component)return void this.unsubscribeFromRouteData(I);const ae=(0,w.qFp)(C.component);if(ae)for(const{templateName:Be}of ae.inputs)I.activatedComponentRef.setInput(Be,Z[Be]);else this.unsubscribeFromRouteData(I)});this.outletDataSubscriptions.set(I,V)}static#e=this.\u0275fac=function(C){return new(C||D)};static#t=this.\u0275prov=w.Yz7({token:D,factory:D.\u0275fac})}return D})();function ji(D,O,I){if(I&&D.shouldReuseRoute(O.value,I.value.snapshot)){const C=I.value;C._futureSnapshot=O.value;const V=function di(D,O,I){return O.children.map(C=>{for(const V of I.children)if(D.shouldReuseRoute(C.value,V.value.snapshot))return ji(D,C,V);return ji(D,C)})}(D,O,I);return new ws(C,V)}{if(D.shouldAttach(O.value)){const Z=D.retrieve(O.value);if(null!==Z){const ae=Z.route;return ae.value._futureSnapshot=O.value,ae.children=O.children.map(Be=>ji(D,Be)),ae}}const C=function Fs(D){return new Sn(new Pe.X(D.url),new Pe.X(D.params),new Pe.X(D.queryParams),new Pe.X(D.fragment),new Pe.X(D.data),D.outlet,D.component,D)}(O.value),V=O.children.map(Z=>ji(D,Z));return new ws(C,V)}}const ko="ngNavigationCancelingError";function Cs(D,O){const{redirectTo:I,navigationBehaviorOptions:C}=Wt(O)?{redirectTo:O,navigationBehaviorOptions:void 0}:O,V=Xi(!1,0,O);return V.url=I,V.navigationBehaviorOptions=C,V}function Xi(D,O,I){const C=new Error("NavigationCancelingError: "+(D||""));return C[ko]=!0,C.cancellationCode=O,I&&(C.url=I),C}function Hi(D){return D&&D[ko]}let An=(()=>{class D{static#e=this.\u0275fac=function(C){return new(C||D)};static#t=this.\u0275cmp=w.Xpm({type:D,selectors:[["ng-component"]],standalone:!0,features:[w.jDz],decls:1,vars:0,template:function(C,V){1&C&&w._UZ(0,"router-outlet")},dependencies:[wi],encapsulation:2})}return D})();function ri(D){const O=D.children&&D.children.map(ri),I=O?{...D,children:O}:{...D};return!I.component&&!I.loadComponent&&(O||I.loadChildren)&&I.outlet&&I.outlet!==Gt&&(I.component=An),I}function hr(D){return D.outlet||Gt}function As(D){if(!D)return null;if(D.routeConfig?._injector)return D.routeConfig._injector;for(let O=D.parent;O;O=O.parent){const I=O.routeConfig;if(I?._loadedInjector)return I._loadedInjector;if(I?._injector)return I._injector}return null}class _a{constructor(O,I,C,V,Z){this.routeReuseStrategy=O,this.futureState=I,this.currState=C,this.forwardEvent=V,this.inputBindingEnabled=Z}activate(O){const I=this.futureState._root,C=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,C,O),Bi(this.futureState.root),this.activateChildRoutes(I,C,O)}deactivateChildRoutes(O,I,C){const V=Ts(I);O.children.forEach(Z=>{const ae=Z.value.outlet;this.deactivateRoutes(Z,V[ae],C),delete V[ae]}),Object.values(V).forEach(Z=>{this.deactivateRouteAndItsChildren(Z,C)})}deactivateRoutes(O,I,C){const V=O.value,Z=I?I.value:null;if(V===Z)if(V.component){const ae=C.getContext(V.outlet);ae&&this.deactivateChildRoutes(O,I,ae.children)}else this.deactivateChildRoutes(O,I,C);else Z&&this.deactivateRouteAndItsChildren(I,C)}deactivateRouteAndItsChildren(O,I){O.value.component&&this.routeReuseStrategy.shouldDetach(O.value.snapshot)?this.detachAndStoreRouteSubtree(O,I):this.deactivateRouteAndOutlet(O,I)}detachAndStoreRouteSubtree(O,I){const C=I.getContext(O.value.outlet),V=C&&O.value.component?C.children:I,Z=Ts(O);for(const ae of Object.keys(Z))this.deactivateRouteAndItsChildren(Z[ae],V);if(C&&C.outlet){const ae=C.outlet.detach(),Be=C.children.onOutletDeactivated();this.routeReuseStrategy.store(O.value.snapshot,{componentRef:ae,route:O,contexts:Be})}}deactivateRouteAndOutlet(O,I){const C=I.getContext(O.value.outlet),V=C&&O.value.component?C.children:I,Z=Ts(O);for(const ae of Object.keys(Z))this.deactivateRouteAndItsChildren(Z[ae],V);C&&(C.outlet&&(C.outlet.deactivate(),C.children.onOutletDeactivated()),C.attachRef=null,C.route=null)}activateChildRoutes(O,I,C){const V=Ts(I);O.children.forEach(Z=>{this.activateRoutes(Z,V[Z.value.outlet],C),this.forwardEvent(new zr(Z.value.snapshot))}),O.children.length&&this.forwardEvent(new La(O.value.snapshot))}activateRoutes(O,I,C){const V=O.value,Z=I?I.value:null;if(Bi(V),V===Z)if(V.component){const ae=C.getOrCreateContext(V.outlet);this.activateChildRoutes(O,I,ae.children)}else this.activateChildRoutes(O,I,C);else if(V.component){const ae=C.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const Be=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),ae.children.onOutletReAttached(Be.contexts),ae.attachRef=Be.componentRef,ae.route=Be.route.value,ae.outlet&&ae.outlet.attach(Be.componentRef,Be.route.value),Bi(Be.route.value),this.activateChildRoutes(O,null,ae.children)}else{const Be=As(V.snapshot);ae.attachRef=null,ae.route=V,ae.injector=Be,ae.outlet&&ae.outlet.activateWith(V,ae.injector),this.activateChildRoutes(O,null,ae.children)}}else this.activateChildRoutes(O,null,C)}}class Va{constructor(O){this.path=O,this.route=this.path[this.path.length-1]}}class Ti{constructor(O,I){this.component=O,this.route=I}}function Ua(D,O,I){const C=D._root;return yr(C,O?O._root:null,I,[C.value])}function ns(D,O){const I=Symbol(),C=O.get(D,I);return C===I?"function"!=typeof D||(0,w.Z0I)(D)?O.get(D):D:C}function yr(D,O,I,C,V={canDeactivateChecks:[],canActivateChecks:[]}){const Z=Ts(O);return D.children.forEach(ae=>{(function ya(D,O,I,C,V={canDeactivateChecks:[],canActivateChecks:[]}){const Z=D.value,ae=O?O.value:null,Be=I?I.getContext(D.value.outlet):null;if(ae&&Z.routeConfig===ae.routeConfig){const Le=function va(D,O,I){if("function"==typeof I)return I(D,O);switch(I){case"pathParamsChange":return!ai(D.url,O.url);case"pathParamsOrQueryParamsChange":return!ai(D.url,O.url)||!Qn(D.queryParams,O.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ht(D,O)||!Qn(D.queryParams,O.queryParams);default:return!Ht(D,O)}}(ae,Z,Z.routeConfig.runGuardsAndResolvers);Le?V.canActivateChecks.push(new Va(C)):(Z.data=ae.data,Z._resolvedData=ae._resolvedData),yr(D,O,Z.component?Be?Be.children:null:I,C,V),Le&&Be&&Be.outlet&&Be.outlet.isActivated&&V.canDeactivateChecks.push(new Ti(Be.outlet.component,ae))}else ae&&pr(O,Be,V),V.canActivateChecks.push(new Va(C)),yr(D,null,Z.component?Be?Be.children:null:I,C,V)})(ae,Z[ae.value.outlet],I,C.concat([ae.value]),V),delete Z[ae.value.outlet]}),Object.entries(Z).forEach(([ae,Be])=>pr(Be,I.getContext(ae),V)),V}function pr(D,O,I){const C=Ts(D),V=D.value;Object.entries(C).forEach(([Z,ae])=>{pr(ae,V.component?O?O.children.getContext(Z):null:O,I)}),I.canDeactivateChecks.push(new Ti(V.component&&O&&O.outlet&&O.outlet.isActivated?O.outlet.component:null,V))}function Vs(D){return"function"==typeof D}function Fo(D){return D instanceof ut.K||"EmptyError"===D?.name}const Lo=Symbol("INITIAL_VALUE");function Us(){return(0,Xn.w)(D=>ft(D.map(O=>O.pipe((0,Tn.q)(1),(0,bt.O)(Lo)))).pipe((0,un.U)(O=>{for(const I of O)if(!0!==I){if(I===Lo)return Lo;if(!1===I||I instanceof _r)return I}return!0}),(0,Dt.h)(O=>O!==Lo),(0,Tn.q)(1)))}function Vo(D){return(0,Ve.z)((0,Ce.b)(O=>{if(Wt(O))throw Cs(0,O)}),(0,un.U)(O=>!0===O))}class Bs{constructor(O){this.segmentGroup=O||null}}class Ia{constructor(O){this.urlTree=O}}function wo(D){return Te(new Bs(D))}function eo(D){return Te(new Ia(D))}class fu{constructor(O,I){this.urlSerializer=O,this.urlTree=I}noMatchError(O){return new w.vHH(4002,!1)}lineralizeSegments(O,I){let C=[],V=I.root;for(;;){if(C=C.concat(V.segments),0===V.numberOfChildren)return(0,Ie.of)(C);if(V.numberOfChildren>1||!V.children[Gt])return Te(new w.vHH(4e3,!1));V=V.children[Gt]}}applyRedirectCommands(O,I,C){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),O,C)}applyRedirectCreateUrlTree(O,I,C,V){const Z=this.createSegmentGroup(O,I.root,C,V);return new _r(Z,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(O,I){const C={};return Object.entries(O).forEach(([V,Z])=>{if("string"==typeof Z&&Z.startsWith(":")){const Be=Z.substring(1);C[V]=I[Be]}else C[V]=Z}),C}createSegmentGroup(O,I,C,V){const Z=this.createSegments(O,I.segments,C,V);let ae={};return Object.entries(I.children).forEach(([Be,Le])=>{ae[Be]=this.createSegmentGroup(O,Le,C,V)}),new pn(Z,ae)}createSegments(O,I,C,V){return I.map(Z=>Z.path.startsWith(":")?this.findPosParam(O,Z,V):this.findOrReturn(Z,C))}findPosParam(O,I,C){const V=C[I.path.substring(1)];if(!V)throw new w.vHH(4001,!1);return V}findOrReturn(O,I){let C=0;for(const V of I){if(V.path===O.path)return I.splice(C),V;C++}return O}}const To={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function aa(D,O,I,C,V){const Z=hs(D,O,I);return Z.matched?(C=function ta(D,O){return D.providers&&!D._injector&&(D._injector=(0,w.MMx)(D.providers,O,`Route: ${D.path}`)),D._injector??O}(O,C),function oa(D,O,I,C){const V=O.canMatch;if(!V||0===V.length)return(0,Ie.of)(!0);const Z=V.map(ae=>{const Be=ns(ae,D);return Ut(function ia(D){return D&&Vs(D.canMatch)}(Be)?Be.canMatch(O,I):D.runInContext(()=>Be(O,I)))});return(0,Ie.of)(Z).pipe(Us(),Vo())}(C,O,I).pipe((0,un.U)(ae=>!0===ae?Z:{...To}))):(0,Ie.of)(Z)}function hs(D,O,I){if(""===O.path)return"full"===O.pathMatch&&(D.hasChildren()||I.length>0)?{...To}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const V=(O.matcher||Li)(I,D,O);if(!V)return{...To};const Z={};Object.entries(V.posParams??{}).forEach(([Be,Le])=>{Z[Be]=Le.path});const ae=V.consumed.length>0?{...Z,...V.consumed[V.consumed.length-1].parameters}:Z;return{matched:!0,consumedSegments:V.consumed,remainingSegments:I.slice(V.consumed.length),parameters:ae,positionalParamSegments:V.posParams??{}}}function gi(D,O,I,C){return I.length>0&&function Ss(D,O,I){return I.some(C=>Ta(D,O,C)&&hr(C)!==Gt)}(D,I,C)?{segmentGroup:new pn(O,Uo(C,new pn(I,D.children))),slicedSegments:[]}:0===I.length&&function ol(D,O,I){return I.some(C=>Ta(D,O,C))}(D,I,C)?{segmentGroup:new pn(D.segments,Wr(D,0,I,C,D.children)),slicedSegments:I}:{segmentGroup:new pn(D.segments,D.children),slicedSegments:I}}function Wr(D,O,I,C,V){const Z={};for(const ae of C)if(Ta(D,I,ae)&&!V[hr(ae)]){const Be=new pn([],{});Z[hr(ae)]=Be}return{...V,...Z}}function Uo(D,O){const I={};I[Gt]=O;for(const C of D)if(""===C.path&&hr(C)!==Gt){const V=new pn([],{});I[hr(C)]=V}return I}function Ta(D,O,I){return(!(D.hasChildren()||O.length>0)||"full"!==I.pathMatch)&&""===I.path}class ua{constructor(O,I,C,V,Z,ae,Be){this.injector=O,this.configLoader=I,this.rootComponentType=C,this.config=V,this.urlTree=Z,this.paramsInheritanceStrategy=ae,this.urlSerializer=Be,this.allowRedirects=!0,this.applyRedirects=new fu(this.urlSerializer,this.urlTree)}noMatchError(O){return new w.vHH(4002,!1)}recognize(){const O=gi(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,O,Gt).pipe(Ae(I=>{if(I instanceof Ia)return this.allowRedirects=!1,this.urlTree=I.urlTree,this.match(I.urlTree);throw I instanceof Bs?this.noMatchError(I):I}),(0,un.U)(I=>{const C=new ci([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Gt,this.rootComponentType,null,{}),V=new ws(C,I),Z=new Js("",V),ae=function It(D,O,I=null,C=null){return Gn(Xt(D),O,I,C)}(C,[],this.urlTree.queryParams,this.urlTree.fragment);return ae.queryParams=this.urlTree.queryParams,Z.url=this.urlSerializer.serialize(ae),this.inheritParamsAndData(Z._root),{state:Z,tree:ae}}))}match(O){return this.processSegmentGroup(this.injector,this.config,O.root,Gt).pipe(Ae(C=>{throw C instanceof Bs?this.noMatchError(C):C}))}inheritParamsAndData(O){const I=O.value,C=qr(I,this.paramsInheritanceStrategy);I.params=Object.freeze(C.params),I.data=Object.freeze(C.data),O.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(O,I,C,V){return 0===C.segments.length&&C.hasChildren()?this.processChildren(O,I,C):this.processSegment(O,I,C,C.segments,V,!0)}processChildren(O,I,C){const V=[];for(const Z of Object.keys(C.children))"primary"===Z?V.unshift(Z):V.push(Z);return(0,ve.D)(V).pipe(Fe(Z=>{const ae=C.children[Z],Be=function Ds(D,O){const I=D.filter(C=>hr(C)===O);return I.push(...D.filter(C=>hr(C)!==O)),I}(I,Z);return this.processSegmentGroup(O,Be,ae,Z)}),(0,Ue.R)((Z,ae)=>(Z.push(...ae),Z)),(0,yt.d)(null),function St(D,O){const I=arguments.length>=2;return C=>C.pipe(D?(0,Dt.h)((V,Z)=>D(V,Z,C)):xe.y,dt(1),I?(0,yt.d)(O):(0,fr.T)(()=>new ut.K))}(),(0,me.z)(Z=>{if(null===Z)return wo(C);const ae=al(Z);return function Lu(D){D.sort((O,I)=>O.value.outlet===Gt?-1:I.value.outlet===Gt?1:O.value.outlet.localeCompare(I.value.outlet))}(ae),(0,Ie.of)(ae)}))}processSegment(O,I,C,V,Z,ae){return(0,ve.D)(I).pipe(Fe(Be=>this.processSegmentAgainstRoute(Be._injector??O,I,Be,C,V,Z,ae).pipe(Ae(Le=>{if(Le instanceof Bs)return(0,Ie.of)(null);throw Le}))),(0,ye.P)(Be=>!!Be),Ae(Be=>{if(Fo(Be))return function pu(D,O,I){return 0===O.length&&!D.children[I]}(C,V,Z)?(0,Ie.of)([]):wo(C);throw Be}))}processSegmentAgainstRoute(O,I,C,V,Z,ae,Be){return function Ga(D,O,I,C){return!!(hr(D)===C||C!==Gt&&Ta(O,I,D))&&("**"===D.path||hs(O,D,I).matched)}(C,V,Z,ae)?void 0===C.redirectTo?this.matchSegmentAgainstRoute(O,V,C,Z,ae,Be):Be&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(O,V,I,C,Z,ae):wo(V):wo(V)}expandSegmentAgainstRouteUsingRedirect(O,I,C,V,Z,ae){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(O,C,V,ae):this.expandRegularSegmentAgainstRouteUsingRedirect(O,I,C,V,Z,ae)}expandWildCardWithParamsAgainstRouteUsingRedirect(O,I,C,V){const Z=this.applyRedirects.applyRedirectCommands([],C.redirectTo,{});return C.redirectTo.startsWith("/")?eo(Z):this.applyRedirects.lineralizeSegments(C,Z).pipe((0,me.z)(ae=>{const Be=new pn(ae,{});return this.processSegment(O,I,Be,ae,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(O,I,C,V,Z,ae){const{matched:Be,consumedSegments:Le,remainingSegments:Rt,positionalParamSegments:dn}=hs(I,V,Z);if(!Be)return wo(I);const Rn=this.applyRedirects.applyRedirectCommands(Le,V.redirectTo,dn);return V.redirectTo.startsWith("/")?eo(Rn):this.applyRedirects.lineralizeSegments(V,Rn).pipe((0,me.z)(Pn=>this.processSegment(O,C,I,Pn.concat(Rt),ae,!1)))}matchSegmentAgainstRoute(O,I,C,V,Z,ae){let Be;if("**"===C.path){const Le=V.length>0?_n(V).parameters:{},Rt=new ci(V,Le,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qa(C),hr(C),C.component??C._loadedComponent??null,C,S(C));Be=(0,Ie.of)({snapshot:Rt,consumedSegments:[],remainingSegments:[]}),I.children={}}else Be=aa(I,C,V,O).pipe((0,un.U)(({matched:Le,consumedSegments:Rt,remainingSegments:dn,parameters:Rn})=>Le?{snapshot:new ci(Rt,Rn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qa(C),hr(C),C.component??C._loadedComponent??null,C,S(C)),consumedSegments:Rt,remainingSegments:dn}:null));return Be.pipe((0,Xn.w)(Le=>null===Le?wo(I):this.getChildConfig(O=C._injector??O,C,V).pipe((0,Xn.w)(({routes:Rt})=>{const dn=C._loadedInjector??O,{snapshot:Rn,consumedSegments:Pn,remainingSegments:rr}=Le,{segmentGroup:ju,slicedSegments:bi}=gi(I,Pn,rr,Rt);if(0===bi.length&&ju.hasChildren())return this.processChildren(dn,Rt,ju).pipe((0,un.U)(no=>null===no?null:[new ws(Rn,no)]));if(0===Rt.length&&0===bi.length)return(0,Ie.of)([new ws(Rn,[])]);const Bo=hr(C)===Z;return this.processSegment(dn,Rt,ju,bi,Bo?Gt:Z,!0).pipe((0,un.U)(no=>[new ws(Rn,no)]))}))))}getChildConfig(O,I,C){return I.children?(0,Ie.of)({routes:I.children,injector:O}):I.loadChildren?void 0!==I._loadedRoutes?(0,Ie.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function Ea(D,O,I,C){const V=O.canLoad;if(void 0===V||0===V.length)return(0,Ie.of)(!0);const Z=V.map(ae=>{const Be=ns(ae,D);return Ut(function ku(D){return D&&Vs(D.canLoad)}(Be)?Be.canLoad(O,I):D.runInContext(()=>Be(O,I)))});return(0,Ie.of)(Z).pipe(Us(),Vo())}(O,I,C).pipe((0,me.z)(V=>V?this.configLoader.loadChildren(O,I).pipe((0,Ce.b)(Z=>{I._loadedRoutes=Z.routes,I._loadedInjector=Z.injector})):function wa(D){return Te(Xi(!1,3))}())):(0,Ie.of)({routes:[],injector:O})}}function to(D){const O=D.value.routeConfig;return O&&""===O.path}function al(D){const O=[],I=new Set;for(const C of D){if(!to(C)){O.push(C);continue}const V=O.find(Z=>C.value.routeConfig===Z.value.routeConfig);void 0!==V?(V.children.push(...C.children),I.add(V)):O.push(C)}for(const C of I){const V=al(C.children);O.push(new ws(C.value,V))}return O.filter(C=>!I.has(C))}function qa(D){return D.data||{}}function S(D){return D.resolve||{}}function k(D){return"string"==typeof D.title||null===D.title}function b(D){return(0,Xn.w)(O=>{const I=D(O);return I?(0,ve.D)(I).pipe((0,un.U)(()=>O)):(0,Ie.of)(O)})}const B=new w.OlP("ROUTES");let X=(()=>{class D{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,w.f3M)(w.Sil)}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,Ie.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const C=Ut(I.loadComponent()).pipe((0,un.U)(nn),(0,Ce.b)(Z=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=Z}),en(()=>{this.componentLoaders.delete(I)})),V=new Qt(C,()=>new ct.x).pipe(fe());return this.componentLoaders.set(I,V),V}loadChildren(I,C){if(this.childrenLoaders.get(C))return this.childrenLoaders.get(C);if(C._loadedRoutes)return(0,Ie.of)({routes:C._loadedRoutes,injector:C._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(C);const Z=function $e(D,O,I,C){return Ut(D.loadChildren()).pipe((0,un.U)(nn),(0,me.z)(V=>V instanceof w.YKP||Array.isArray(V)?(0,Ie.of)(V):(0,ve.D)(O.compileModuleAsync(V))),(0,un.U)(V=>{C&&C(D);let Z,ae,Be=!1;return Array.isArray(V)?(ae=V,!0):(Z=V.create(I).injector,ae=Z.get(B,[],{optional:!0,self:!0}).flat()),{routes:ae.map(ri),injector:Z}}))}(C,this.compiler,I,this.onLoadEndListener).pipe(en(()=>{this.childrenLoaders.delete(C)})),ae=new Qt(Z,()=>new ct.x).pipe(fe());return this.childrenLoaders.set(C,ae),ae}static#e=this.\u0275fac=function(C){return new(C||D)};static#t=this.\u0275prov=w.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})();function nn(D){return function ot(D){return D&&"object"==typeof D&&"default"in D}(D)?D.default:D}let Wn=(()=>{class D{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ct.x,this.transitionAbortSubject=new ct.x,this.configLoader=(0,w.f3M)(X),this.environmentInjector=(0,w.f3M)(w.lqb),this.urlSerializer=(0,w.f3M)(jr),this.rootContexts=(0,w.f3M)(Gr),this.inputBindingEnabled=null!==(0,w.f3M)(Ur,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Ie.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=V=>this.events.next(new Fa(V)),this.configLoader.onLoadStartListener=V=>this.events.next(new hu(V))}complete(){this.transitions?.complete()}handleNavigationRequest(I){const C=++this.navigationId;this.transitions?.next({...this.transitions.value,...I,id:C})}setupNavigations(I,C,V){return this.transitions=new Pe.X({id:0,currentUrlTree:C,currentRawUrl:C,currentBrowserUrl:C,extractedUrl:I.urlHandlingStrategy.extract(C),urlAfterRedirects:I.urlHandlingStrategy.extract(C),rawUrl:C,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Hr,restoredState:null,currentSnapshot:V.snapshot,targetSnapshot:null,currentRouterState:V,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Dt.h)(Z=>0!==Z.id),(0,un.U)(Z=>({...Z,extractedUrl:I.urlHandlingStrategy.extract(Z.rawUrl)})),(0,Xn.w)(Z=>{this.currentTransition=Z;let ae=!1,Be=!1;return(0,Ie.of)(Z).pipe((0,Ce.b)(Le=>{this.currentNavigation={id:Le.id,initialUrl:Le.rawUrl,extractedUrl:Le.extractedUrl,trigger:Le.source,extras:Le.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Xn.w)(Le=>{const Rt=Le.currentBrowserUrl.toString(),dn=!I.navigated||Le.extractedUrl.toString()!==Rt||Rt!==Le.currentUrlTree.toString();if(!dn&&"reload"!==(Le.extras.onSameUrlNavigation??I.onSameUrlNavigation)){const Pn="";return this.events.next(new Qs(Le.id,this.urlSerializer.serialize(Le.rawUrl),Pn,0)),Le.resolve(null),je.E}if(I.urlHandlingStrategy.shouldProcessUrl(Le.rawUrl))return(0,Ie.of)(Le).pipe((0,Xn.w)(Pn=>{const rr=this.transitions?.getValue();return this.events.next(new Is(Pn.id,this.urlSerializer.serialize(Pn.extractedUrl),Pn.source,Pn.restoredState)),rr!==this.transitions?.getValue()?je.E:Promise.resolve(Pn)}),function W(D,O,I,C,V,Z){return(0,me.z)(ae=>function rs(D,O,I,C,V,Z,ae="emptyOnly"){return new ua(D,O,I,C,V,ae,Z).recognize()}(D,O,I,C,ae.extractedUrl,V,Z).pipe((0,un.U)(({state:Be,tree:Le})=>({...ae,targetSnapshot:Be,urlAfterRedirects:Le}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,I.config,this.urlSerializer,I.paramsInheritanceStrategy),(0,Ce.b)(Pn=>{Z.targetSnapshot=Pn.targetSnapshot,Z.urlAfterRedirects=Pn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Pn.urlAfterRedirects};const rr=new du(Pn.id,this.urlSerializer.serialize(Pn.extractedUrl),this.urlSerializer.serialize(Pn.urlAfterRedirects),Pn.targetSnapshot);this.events.next(rr)}));if(dn&&I.urlHandlingStrategy.shouldProcessUrl(Le.currentRawUrl)){const{id:Pn,extractedUrl:rr,source:ju,restoredState:bi,extras:Bo}=Le,no=new Is(Pn,this.urlSerializer.serialize(rr),ju,bi);this.events.next(no);const Ml=vt(0,this.rootComponentType).snapshot;return this.currentTransition=Z={...Le,targetSnapshot:Ml,urlAfterRedirects:rr,extras:{...Bo,skipLocationChange:!1,replaceUrl:!1}},(0,Ie.of)(Z)}{const Pn="";return this.events.next(new Qs(Le.id,this.urlSerializer.serialize(Le.extractedUrl),Pn,1)),Le.resolve(null),je.E}}),(0,Ce.b)(Le=>{const Rt=new li(Le.id,this.urlSerializer.serialize(Le.extractedUrl),this.urlSerializer.serialize(Le.urlAfterRedirects),Le.targetSnapshot);this.events.next(Rt)}),(0,un.U)(Le=>(this.currentTransition=Z={...Le,guards:Ua(Le.targetSnapshot,Le.currentSnapshot,this.rootContexts)},Z)),function Ha(D,O){return(0,me.z)(I=>{const{targetSnapshot:C,currentSnapshot:V,guards:{canActivateChecks:Z,canDeactivateChecks:ae}}=I;return 0===ae.length&&0===Z.length?(0,Ie.of)({...I,guardsResult:!0}):function Ci(D,O,I,C){return(0,ve.D)(D).pipe((0,me.z)(V=>function pi(D,O,I,C,V){const Z=O&&O.routeConfig?O.routeConfig.canDeactivate:null;if(!Z||0===Z.length)return(0,Ie.of)(!0);const ae=Z.map(Be=>{const Le=As(O)??V,Rt=ns(Be,Le);return Ut(function Fu(D){return D&&Vs(D.canDeactivate)}(Rt)?Rt.canDeactivate(D,O,I,C):Le.runInContext(()=>Rt(D,O,I,C))).pipe((0,ye.P)())});return(0,Ie.of)(ae).pipe(Us())}(V.component,V.route,I,O,C)),(0,ye.P)(V=>!0!==V,!0))}(ae,C,V,D).pipe((0,me.z)(Be=>Be&&function ra(D){return"boolean"==typeof D}(Be)?function ds(D,O,I,C){return(0,ve.D)(O).pipe(Fe(V=>(0,kt.z)(function sr(D,O){return null!==D&&O&&O(new Oi(D)),(0,Ie.of)(!0)}(V.route.parent,C),function $a(D,O){return null!==D&&O&&O(new Xo(D)),(0,Ie.of)(!0)}(V.route,C),function bs(D,O,I){const C=O[O.length-1],Z=O.slice(0,O.length-1).reverse().map(ae=>function Ba(D){const O=D.routeConfig?D.routeConfig.canActivateChild:null;return O&&0!==O.length?{node:D,guards:O}:null}(ae)).filter(ae=>null!==ae).map(ae=>ce(()=>{const Be=ae.guards.map(Le=>{const Rt=As(ae.node)??I,dn=ns(Le,Rt);return Ut(function ja(D){return D&&Vs(D.canActivateChild)}(dn)?dn.canActivateChild(C,D):Rt.runInContext(()=>dn(C,D))).pipe((0,ye.P)())});return(0,Ie.of)(Be).pipe(Us())}));return(0,Ie.of)(Z).pipe(Us())}(D,V.path,I),function fi(D,O,I){const C=O.routeConfig?O.routeConfig.canActivate:null;if(!C||0===C.length)return(0,Ie.of)(!0);const V=C.map(Z=>ce(()=>{const ae=As(O)??I,Be=ns(Z,ae);return Ut(function vr(D){return D&&Vs(D.canActivate)}(Be)?Be.canActivate(O,D):ae.runInContext(()=>Be(O,D))).pipe((0,ye.P)())}));return(0,Ie.of)(V).pipe(Us())}(D,V.route,I))),(0,ye.P)(V=>!0!==V,!0))}(C,Z,D,O):(0,Ie.of)(Be)),(0,un.U)(Be=>({...I,guardsResult:Be})))})}(this.environmentInjector,Le=>this.events.next(Le)),(0,Ce.b)(Le=>{if(Z.guardsResult=Le.guardsResult,Wt(Le.guardsResult))throw Cs(0,Le.guardsResult);const Rt=new xo(Le.id,this.urlSerializer.serialize(Le.extractedUrl),this.urlSerializer.serialize(Le.urlAfterRedirects),Le.targetSnapshot,!!Le.guardsResult);this.events.next(Rt)}),(0,Dt.h)(Le=>!!Le.guardsResult||(this.cancelNavigationTransition(Le,"",3),!1)),b(Le=>{if(Le.guards.canActivateChecks.length)return(0,Ie.of)(Le).pipe((0,Ce.b)(Rt=>{const dn=new ho(Rt.id,this.urlSerializer.serialize(Rt.extractedUrl),this.urlSerializer.serialize(Rt.urlAfterRedirects),Rt.targetSnapshot);this.events.next(dn)}),(0,Xn.w)(Rt=>{let dn=!1;return(0,Ie.of)(Rt).pipe(function L(D,O){return(0,me.z)(I=>{const{targetSnapshot:C,guards:{canActivateChecks:V}}=I;if(!V.length)return(0,Ie.of)(I);let Z=0;return(0,ve.D)(V).pipe(Fe(ae=>function G(D,O,I,C){const V=D.routeConfig,Z=D._resolve;return void 0!==V?.title&&!k(V)&&(Z[yn]=V.title),function de(D,O,I,C){const V=function Ge(D){return[...Object.keys(D),...Object.getOwnPropertySymbols(D)]}(D);if(0===V.length)return(0,Ie.of)({});const Z={};return(0,ve.D)(V).pipe((0,me.z)(ae=>function M(D,O,I,C){const V=As(O)??C,Z=ns(D,V);return Ut(Z.resolve?Z.resolve(O,I):V.runInContext(()=>Z(O,I)))}(D[ae],O,I,C).pipe((0,ye.P)(),(0,Ce.b)(Be=>{Z[ae]=Be}))),dt(1),function Dn(D){return(0,un.U)(()=>D)}(Z),Ae(ae=>Fo(ae)?je.E:Te(ae)))}(Z,D,O,C).pipe((0,un.U)(ae=>(D._resolvedData=ae,D.data=qr(D,I).resolve,V&&k(V)&&(D.data[yn]=V.title),null)))}(ae.route,C,D,O)),(0,Ce.b)(()=>Z++),dt(1),(0,me.z)(ae=>Z===V.length?(0,Ie.of)(I):je.E))})}(I.paramsInheritanceStrategy,this.environmentInjector),(0,Ce.b)({next:()=>dn=!0,complete:()=>{dn||this.cancelNavigationTransition(Rt,"",2)}}))}),(0,Ce.b)(Rt=>{const dn=new Jo(Rt.id,this.urlSerializer.serialize(Rt.extractedUrl),this.urlSerializer.serialize(Rt.urlAfterRedirects),Rt.targetSnapshot);this.events.next(dn)}))}),b(Le=>{const Rt=dn=>{const Rn=[];dn.routeConfig?.loadComponent&&!dn.routeConfig._loadedComponent&&Rn.push(this.configLoader.loadComponent(dn.routeConfig).pipe((0,Ce.b)(Pn=>{dn.component=Pn}),(0,un.U)(()=>{})));for(const Pn of dn.children)Rn.push(...Rt(Pn));return Rn};return ft(Rt(Le.targetSnapshot.root)).pipe((0,yt.d)(),(0,Tn.q)(1))}),b(()=>this.afterPreactivation()),(0,un.U)(Le=>{const Rt=function nr(D,O,I){const C=ji(D,O._root,I?I._root:void 0);return new cr(C,O)}(I.routeReuseStrategy,Le.targetSnapshot,Le.currentRouterState);return this.currentTransition=Z={...Le,targetRouterState:Rt},Z}),(0,Ce.b)(()=>{this.events.next(new wn)}),((D,O,I,C)=>(0,un.U)(V=>(new _a(O,V.targetRouterState,V.currentRouterState,I,C).activate(D),V)))(this.rootContexts,I.routeReuseStrategy,Le=>this.events.next(Le),this.inputBindingEnabled),(0,Tn.q)(1),(0,Ce.b)({next:Le=>{ae=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Mi(Le.id,this.urlSerializer.serialize(Le.extractedUrl),this.urlSerializer.serialize(Le.urlAfterRedirects))),I.titleStrategy?.updateTitle(Le.targetRouterState.snapshot),Le.resolve(!0)},complete:()=>{ae=!0}}),function sn(D){return(0,nt.e)((O,I)=>{(0,Ee.Xf)(D).subscribe((0,Je.x)(I,()=>I.complete(),Fn.Z)),!I.closed&&O.subscribe(I)})}(this.transitionAbortSubject.pipe((0,Ce.b)(Le=>{throw Le}))),en(()=>{ae||Be||this.cancelNavigationTransition(Z,"",1),this.currentNavigation?.id===Z.id&&(this.currentNavigation=null)}),Ae(Le=>{if(Be=!0,Hi(Le))this.events.next(new us(Z.id,this.urlSerializer.serialize(Z.extractedUrl),Le.message,Le.cancellationCode)),function Ls(D){return Hi(D)&&Wt(D.url)}(Le)?this.events.next(new tr(Le.url)):Z.resolve(!1);else{this.events.next(new $r(Z.id,this.urlSerializer.serialize(Z.extractedUrl),Le,Z.targetSnapshot??void 0));try{Z.resolve(I.errorHandler(Le))}catch(Rt){Z.reject(Rt)}}return je.E}))}))}cancelNavigationTransition(I,C,V){const Z=new us(I.id,this.urlSerializer.serialize(I.extractedUrl),C,V);this.events.next(Z),I.resolve(!1)}static#e=this.\u0275fac=function(C){return new(C||D)};static#t=this.\u0275prov=w.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})();function Kr(D){return D!==Hr}let Di=(()=>{class D{buildTitle(I){let C,V=I.root;for(;void 0!==V;)C=this.getResolvedTitleForRoute(V)??C,V=V.children.find(Z=>Z.outlet===Gt);return C}getResolvedTitleForRoute(I){return I.data[yn]}static#e=this.\u0275fac=function(C){return new(C||D)};static#t=this.\u0275prov=w.Yz7({token:D,factory:function(){return(0,w.f3M)(Xr)},providedIn:"root"})}return D})(),Xr=(()=>{class D extends Di{constructor(I){super(),this.title=I}updateTitle(I){const C=this.buildTitle(I);void 0!==C&&this.title.setTitle(C)}static#e=this.\u0275fac=function(C){return new(C||D)(w.LFG($n.Dx))};static#t=this.\u0275prov=w.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})(),zi=(()=>{class D{static#e=this.\u0275fac=function(C){return new(C||D)};static#t=this.\u0275prov=w.Yz7({token:D,factory:function(){return(0,w.f3M)(Gi)},providedIn:"root"})}return D})();class Ca{shouldDetach(O){return!1}store(O,I){}shouldAttach(O){return!1}retrieve(O){return null}shouldReuseRoute(O,I){return O.routeConfig===I.routeConfig}}let Gi=(()=>{class D extends Ca{static#e=this.\u0275fac=function(){let I;return function(V){return(I||(I=w.n5z(D)))(V||D)}}();static#t=this.\u0275prov=w.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})();const Co=new w.OlP("",{providedIn:"root",factory:()=>({})});let Vu=(()=>{class D{static#e=this.\u0275fac=function(C){return new(C||D)};static#t=this.\u0275prov=w.Yz7({token:D,factory:function(){return(0,w.f3M)(Tr)},providedIn:"root"})}return D})(),Tr=(()=>{class D{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,C){return I}static#e=this.\u0275fac=function(C){return new(C||D)};static#t=this.\u0275prov=w.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})();var gu=function(D){return D[D.COMPLETE=0]="COMPLETE",D[D.FAILED=1]="FAILED",D[D.REDIRECTING=2]="REDIRECTING",D}(gu||{});function Da(D,O){D.events.pipe((0,Dt.h)(I=>I instanceof Mi||I instanceof us||I instanceof $r||I instanceof Qs),(0,un.U)(I=>I instanceof Mi||I instanceof Qs?gu.COMPLETE:I instanceof us&&(0===I.code||1===I.code)?gu.REDIRECTING:gu.FAILED),(0,Dt.h)(I=>I!==gu.REDIRECTING),(0,Tn.q)(1)).subscribe(()=>{O()})}function Rs(D){throw D}function _d(D,O,I){return O.parse("/")}const Wa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bn=(()=>{class D{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,w.f3M)(w.c2e),this.isNgZoneEnabled=!1,this._events=new ct.x,this.options=(0,w.f3M)(Co,{optional:!0})||{},this.pendingTasks=(0,w.f3M)(w.HDt),this.errorHandler=this.options.errorHandler||Rs,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||_d,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,w.f3M)(Vu),this.routeReuseStrategy=(0,w.f3M)(zi),this.titleStrategy=(0,w.f3M)(Di),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,w.f3M)(B,{optional:!0})?.flat()??[],this.navigationTransitions=(0,w.f3M)(Wn),this.urlSerializer=(0,w.f3M)(jr),this.location=(0,w.f3M)(Hn.Ye),this.componentInputBindingEnabled=!!(0,w.f3M)(Ur,{optional:!0}),this.eventsSubscription=new Ye.w0,this.isNgZoneEnabled=(0,w.f3M)(w.R0b)instanceof w.R0b&&w.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new _r,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=vt(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(I=>{this.lastSuccessfulId=I.id,this.currentPageId=this.browserPageId},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const I=this.navigationTransitions.events.subscribe(C=>{try{const{currentTransition:V}=this.navigationTransitions;if(null===V)return void(qi(C)&&this._events.next(C));if(C instanceof Is)Kr(V.source)&&(this.browserUrlTree=V.extractedUrl);else if(C instanceof Qs)this.rawUrlTree=V.rawUrl;else if(C instanceof du){if("eager"===this.urlUpdateStrategy){if(!V.extras.skipLocationChange){const Z=this.urlHandlingStrategy.merge(V.urlAfterRedirects,V.rawUrl);this.setBrowserUrl(Z,V)}this.browserUrlTree=V.urlAfterRedirects}}else if(C instanceof wn)this.currentUrlTree=V.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(V.urlAfterRedirects,V.rawUrl),this.routerState=V.targetRouterState,"deferred"===this.urlUpdateStrategy&&(V.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,V),this.browserUrlTree=V.urlAfterRedirects);else if(C instanceof us)0!==C.code&&1!==C.code&&(this.navigated=!0),(3===C.code||2===C.code)&&this.restoreHistory(V);else if(C instanceof tr){const Z=this.urlHandlingStrategy.merge(C.url,V.currentRawUrl),ae={skipLocationChange:V.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Kr(V.source)};this.scheduleNavigation(Z,Hr,null,ae,{resolve:V.resolve,reject:V.reject,promise:V.promise})}C instanceof $r&&this.restoreHistory(V,!0),C instanceof Mi&&(this.navigated=!0),qi(C)&&this._events.next(C)}catch(V){this.navigationTransitions.transitionAbortSubject.next(V)}});this.eventsSubscription.add(I)}resetRootComponentType(I){this.routerState.root.component=I,this.navigationTransitions.rootComponentType=I}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const I=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Hr,I)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const C="popstate"===I.type?"popstate":"hashchange";"popstate"===C&&setTimeout(()=>{this.navigateToSyncWithBrowser(I.url,C,I.state)},0)}))}navigateToSyncWithBrowser(I,C,V){const Z={replaceUrl:!0},ae=V?.navigationId?V:null;if(V){const Le={...V};delete Le.navigationId,delete Le.\u0275routerPageId,0!==Object.keys(Le).length&&(Z.state=Le)}const Be=this.parseUrl(I);this.scheduleNavigation(Be,C,ae,Z)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(I){this.config=I.map(ri),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(I,C={}){const{relativeTo:V,queryParams:Z,fragment:ae,queryParamsHandling:Be,preserveFragment:Le}=C,Rt=Le?this.currentUrlTree.fragment:ae;let Rn,dn=null;switch(Be){case"merge":dn={...this.currentUrlTree.queryParams,...Z};break;case"preserve":dn=this.currentUrlTree.queryParams;break;default:dn=Z||null}null!==dn&&(dn=this.removeEmptyProps(dn));try{Rn=Xt(V?V.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof I[0]||!I[0].startsWith("/"))&&(I=[]),Rn=this.currentUrlTree.root}return Gn(Rn,I,dn,Rt??null)}navigateByUrl(I,C={skipLocationChange:!1}){const V=Wt(I)?I:this.parseUrl(I),Z=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(Z,Hr,null,C)}navigate(I,C={skipLocationChange:!1}){return function Do(D){for(let O=0;O<D.length;O++)if(null==D[O])throw new w.vHH(4008,!1)}(I),this.navigateByUrl(this.createUrlTree(I,C),C)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let C;try{C=this.urlSerializer.parse(I)}catch(V){C=this.malformedUriErrorHandler(V,this.urlSerializer,I)}return C}isActive(I,C){let V;if(V=!0===C?{...Wa}:!1===C?{...mu}:C,Wt(I))return Yr(this.currentUrlTree,I,V);const Z=this.parseUrl(I);return Yr(this.currentUrlTree,Z,V)}removeEmptyProps(I){return Object.keys(I).reduce((C,V)=>{const Z=I[V];return null!=Z&&(C[V]=Z),C},{})}scheduleNavigation(I,C,V,Z,ae){if(this.disposed)return Promise.resolve(!1);let Be,Le,Rt;ae?(Be=ae.resolve,Le=ae.reject,Rt=ae.promise):Rt=new Promise((Rn,Pn)=>{Be=Rn,Le=Pn});const dn=this.pendingTasks.add();return Da(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(dn))}),this.navigationTransitions.handleNavigationRequest({source:C,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:I,extras:Z,resolve:Be,reject:Le,promise:Rt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Rt.catch(Rn=>Promise.reject(Rn))}setBrowserUrl(I,C){const V=this.urlSerializer.serialize(I);if(this.location.isCurrentPathEqualTo(V)||C.extras.replaceUrl){const ae={...C.extras.state,...this.generateNgRouterState(C.id,this.browserPageId)};this.location.replaceState(V,"",ae)}else{const Z={...C.extras.state,...this.generateNgRouterState(C.id,this.browserPageId+1)};this.location.go(V,"",Z)}}restoreHistory(I,C=!1){if("computed"===this.canceledNavigationResolution){const Z=this.currentPageId-this.browserPageId;0!==Z?this.location.historyGo(Z):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===Z&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(C&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(I,C){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:C}:{navigationId:I}}static#e=this.\u0275fac=function(C){return new(C||D)};static#t=this.\u0275prov=w.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})();function qi(D){return!(D instanceof wn||D instanceof tr)}let js=(()=>{class D{constructor(I,C,V,Z,ae,Be){this.router=I,this.route=C,this.tabIndexAttribute=V,this.renderer=Z,this.el=ae,this.locationStrategy=Be,this.href=null,this.commands=null,this.onChanges=new ct.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Le=ae.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Le||"area"===Le,this.isAnchorElement?this.subscription=I.events.subscribe(Rt=>{Rt instanceof Mi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(I){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",I)}ngOnChanges(I){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(I,C,V,Z,ae){return!!(null===this.urlTree||this.isAnchorElement&&(0!==I||C||V||Z||ae||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const I=null===this.href?null:(0,w.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",I)}applyAttributeValue(I,C){const V=this.renderer,Z=this.el.nativeElement;null!==C?V.setAttribute(Z,I,C):V.removeAttribute(Z,I)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(C){return new(C||D)(w.Y36(bn),w.Y36(Sn),w.$8M("tabindex"),w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(Hn.S$))};static#t=this.\u0275dir=w.lG2({type:D,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(C,V){1&C&&w.NdJ("click",function(ae){return V.onClick(ae.button,ae.ctrlKey,ae.shiftKey,ae.altKey,ae.metaKey)}),2&C&&w.uIk("target",V.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",w.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",w.VuI],replaceUrl:["replaceUrl","replaceUrl",w.VuI],routerLink:"routerLink"},standalone:!0,features:[w.Xq5,w.TTD]})}return D})();class gr{}let fs=(()=>{class D{preload(I,C){return C().pipe(Ae(()=>(0,Ie.of)(null)))}static#e=this.\u0275fac=function(C){return new(C||D)};static#t=this.\u0275prov=w.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})(),Lt=(()=>{class D{constructor(I,C,V,Z,ae){this.router=I,this.injector=V,this.preloadingStrategy=Z,this.loader=ae}setUpPreloading(){this.subscription=this.router.events.pipe((0,Dt.h)(I=>I instanceof Mi),Fe(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,C){const V=[];for(const Z of C){Z.providers&&!Z._injector&&(Z._injector=(0,w.MMx)(Z.providers,I,`Route: ${Z.path}`));const ae=Z._injector??I,Be=Z._loadedInjector??ae;(Z.loadChildren&&!Z._loadedRoutes&&void 0===Z.canLoad||Z.loadComponent&&!Z._loadedComponent)&&V.push(this.preloadConfig(ae,Z)),(Z.children||Z._loadedRoutes)&&V.push(this.processRoutes(Be,Z.children??Z._loadedRoutes))}return(0,ve.D)(V).pipe((0,mn.J)())}preloadConfig(I,C){return this.preloadingStrategy.preload(C,()=>{let V;V=C.loadChildren&&void 0===C.canLoad?this.loader.loadChildren(I,C):(0,Ie.of)(null);const Z=V.pipe((0,me.z)(ae=>null===ae?(0,Ie.of)(void 0):(C._loadedRoutes=ae.routes,C._loadedInjector=ae.injector,this.processRoutes(ae.injector??I,ae.routes))));if(C.loadComponent&&!C._loadedComponent){const ae=this.loader.loadComponent(C);return(0,ve.D)([Z,ae]).pipe((0,mn.J)())}return Z})}static#e=this.\u0275fac=function(C){return new(C||D)(w.LFG(bn),w.LFG(w.Sil),w.LFG(w.lqb),w.LFG(gr),w.LFG(X))};static#t=this.\u0275prov=w.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})();const Bt=new w.OlP("");let an=(()=>{class D{constructor(I,C,V,Z,ae={}){this.urlSerializer=I,this.transitions=C,this.viewportScroller=V,this.zone=Z,this.options=ae,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ae.scrollPositionRestoration=ae.scrollPositionRestoration||"disabled",ae.anchorScrolling=ae.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof Is?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof Mi?(this.lastId=I.id,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.urlAfterRedirects).fragment)):I instanceof Qs&&0===I.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof Ns&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,C){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ns(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,C))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(C){w.$Z()};static#t=this.\u0275prov=w.Yz7({token:D,factory:D.\u0275fac})}return D})();function Qe(D,O){return{\u0275kind:D,\u0275providers:O}}function Za(){const D=(0,w.f3M)(w.zs3);return O=>{const I=D.get(w.z2F);if(O!==I.components[0])return;const C=D.get(bn),V=D.get(Ql);1===D.get(Hs)&&C.initialNavigation(),D.get(Yn,null,w.XFs.Optional)?.setUpPreloading(),D.get(Bt,null,w.XFs.Optional)?.init(),C.resetRootComponentType(I.componentTypes[0]),V.closed||(V.next(),V.complete(),V.unsubscribe())}}const Ql=new w.OlP("",{factory:()=>new ct.x}),Hs=new w.OlP("",{providedIn:"root",factory:()=>1}),Yn=new w.OlP("");function ii(D){return Qe(0,[{provide:Yn,useExisting:Lt},{provide:gr,useExisting:D}])}const Qa=new w.OlP("ROUTER_FORROOT_GUARD"),Un=[Hn.Ye,{provide:jr,useClass:vi},bn,Gr,{provide:Sn,useFactory:function qe(D){return D.routerState.root},deps:[bn]},X,[]];function yd(){return new w.PXZ("Router",bn)}let xr=(()=>{class D{constructor(I){}static forRoot(I,C){return{ngModule:D,providers:[Un,[],{provide:B,multi:!0,useValue:I},{provide:Qa,useFactory:Aa,deps:[[bn,new w.FiY,new w.tp0]]},{provide:Co,useValue:C||{}},C?.useHash?{provide:Hn.S$,useClass:Hn.Do}:{provide:Hn.S$,useClass:Hn.b0},{provide:Bt,useFactory:()=>{const D=(0,w.f3M)(Hn.EM),O=(0,w.f3M)(w.R0b),I=(0,w.f3M)(Co),C=(0,w.f3M)(Wn),V=(0,w.f3M)(jr);return I.scrollOffset&&D.setOffset(I.scrollOffset),new an(V,C,D,O,I)}},C?.preloadingStrategy?ii(C.preloadingStrategy).\u0275providers:[],{provide:w.PXZ,multi:!0,useFactory:yd},C?.initialNavigation?Ao(C):[],C?.bindToComponentInputs?Qe(8,[br,{provide:Ur,useExisting:br}]).\u0275providers:[],[{provide:Ai,useFactory:Za},{provide:w.tb,multi:!0,useExisting:Ai}]]}}static forChild(I){return{ngModule:D,providers:[{provide:B,multi:!0,useValue:I}]}}static#e=this.\u0275fac=function(C){return new(C||D)(w.LFG(Qa,8))};static#t=this.\u0275mod=w.oAB({type:D});static#n=this.\u0275inj=w.cJS({})}return D})();function Aa(D){return"guarded"}function Ao(D){return["disabled"===D.initialNavigation?Qe(3,[{provide:w.ip1,multi:!0,useFactory:()=>{const O=(0,w.f3M)(bn);return()=>{O.setUpLocationChangeListener()}}},{provide:Hs,useValue:2}]).\u0275providers:[],"enabledBlocking"===D.initialNavigation?Qe(2,[{provide:Hs,useValue:0},{provide:w.ip1,multi:!0,deps:[w.zs3],useFactory:O=>{const I=O.get(Hn.V_,Promise.resolve());return()=>I.then(()=>new Promise(C=>{const V=O.get(bn),Z=O.get(Ql);Da(V,()=>{C(!0)}),O.get(Wn).afterPreactivation=()=>(C(!0),Z.closed?(0,Ie.of)(void 0):Z),V.initialNavigation()}))}}]).\u0275providers:[]]}const Ai=new w.OlP("")},3106:(Nt,He,z)=>{z.d(He,{Z:()=>ft});var w=z(9058),ue=z(4537),q=z(534),De=z(7879);class ve{constructor(pt,ut){this._delegate=pt,this.firebase=ut,(0,q._addComponent)(pt,new ue.wA("app-compat",()=>this,"PUBLIC")),this.container=pt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pt){this._delegate.automaticDataCollectionEnabled=pt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pt=>{this._delegate.checkDestroyed(),pt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,q.deleteApp)(this._delegate)))}_getService(pt,ut=q._DEFAULT_ENTRY_NAME){var kt;this._delegate.checkDestroyed();const Ee=this._delegate.container.getProvider(pt);return!Ee.isInitialized()&&"EXPLICIT"===(null===(kt=Ee.getComponent())||void 0===kt?void 0:kt.instantiationMode)&&Ee.initialize(),Ee.getImmediate({identifier:ut})}_removeServiceInstance(pt,ut=q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pt).clearInstance(ut)}_addComponent(pt){(0,q._addComponent)(this._delegate,pt)}_addOrOverwriteComponent(pt){(0,q._addOrOverwriteComponent)(this._delegate,pt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Pe=new w.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),le=function xe(){const tt=function P(tt){const pt={},ut={__esModule:!0,initializeApp:function ce(Ye,nt={}){const fe=q.initializeApp(Ye,nt);if((0,w.r3)(pt,fe.name))return pt[fe.name];const Qt=new tt(fe,ut);return pt[fe.name]=Qt,Qt},app:Ee,registerVersion:q.registerVersion,setLogLevel:q.setLogLevel,onLog:q.onLog,apps:null,SDK_VERSION:q.SDK_VERSION,INTERNAL:{registerComponent:function Te(Ye){const nt=Ye.name,fe=nt.replace("-compat","");if(q._registerComponent(Ye)&&"PUBLIC"===Ye.type){const Qt=(ct=Ee())=>{if("function"!=typeof ct[fe])throw Pe.create("invalid-app-argument",{appName:nt});return ct[fe]()};void 0!==Ye.serviceProps&&(0,w.ZB)(Qt,Ye.serviceProps),ut[fe]=Qt,tt.prototype[fe]=function(...ct){return this._getService.bind(this,nt).apply(this,Ye.multipleInstances?ct:[])}}return"PUBLIC"===Ye.type?ut[fe]:null},removeApp:function kt(Ye){delete pt[Ye]},useAsService:function je(Ye,nt){return"serverAuth"===nt?null:nt},modularAPIs:q}};function Ee(Ye){if(!(0,w.r3)(pt,Ye=Ye||q._DEFAULT_ENTRY_NAME))throw Pe.create("no-app",{appName:Ye});return pt[Ye]}return ut.default=ut,Object.defineProperty(ut,"apps",{get:function Ve(){return Object.keys(pt).map(Ye=>pt[Ye])}}),Ee.App=tt,ut}(ve);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:xe,extendNamespace:function pt(ut){(0,w.ZB)(tt,ut)},createSubscribe:w.ne,ErrorFactory:w.LL,deepExtend:w.ZB}),tt}(),he=new De.Yd("@firebase/app-compat");if((0,w.jU)()&&void 0!==self.firebase){he.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&he.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ft=le;!function Ke(tt){(0,q.registerVersion)("@firebase/app-compat","0.2.23",tt)}()},534:(Nt,He,z)=>{z.r(He),z.d(He,{FirebaseError:()=>De.ZR,SDK_VERSION:()=>pn,_DEFAULT_ENTRY_NAME:()=>qt,_addComponent:()=>Vn,_addOrOverwriteComponent:()=>Yr,_apps:()=>Ut,_clearComponents:()=>xt,_components:()=>Ln,_getProvider:()=>wr,_registerComponent:()=>zn,_removeServiceInstance:()=>_o,deleteApp:()=>Lr,getApp:()=>Br,getApps:()=>ai,initializeApp:()=>Qi,onLog:()=>Vi,registerVersion:()=>vi,setLogLevel:()=>ir});var w=z(5861),ue=z(4537),q=z(7879),De=z(9058);const ve=(We,Oe)=>Oe.some(st=>We instanceof st);let Ie,Pe;const le=new WeakMap,he=new WeakMap,be=new WeakMap,Je=new WeakMap,Ke=new WeakMap;let pt={get(We,Oe,st){if(We instanceof IDBTransaction){if("done"===Oe)return he.get(We);if("objectStoreNames"===Oe)return We.objectStoreNames||be.get(We);if("store"===Oe)return st.objectStoreNames[1]?void 0:st.objectStore(st.objectStoreNames[0])}return ce(We[Oe])},set:(We,Oe,st)=>(We[Oe]=st,!0),has:(We,Oe)=>We instanceof IDBTransaction&&("done"===Oe||"store"===Oe)||Oe in We};function Ee(We){return"function"==typeof We?function kt(We){return We!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xe(){return Pe||(Pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(We)?function(...Oe){return We.apply(Ve(this),Oe),ce(le.get(this))}:function(...Oe){return ce(We.apply(Ve(this),Oe))}:function(Oe,...st){const jt=We.call(Ve(this),Oe,...st);return be.set(jt,Oe.sort?Oe.sort():[Oe]),ce(jt)}}(We):(We instanceof IDBTransaction&&function tt(We){if(he.has(We))return;const Oe=new Promise((st,jt)=>{const Wt=()=>{We.removeEventListener("complete",It),We.removeEventListener("error",Xt),We.removeEventListener("abort",Xt)},It=()=>{st(),Wt()},Xt=()=>{jt(We.error||new DOMException("AbortError","AbortError")),Wt()};We.addEventListener("complete",It),We.addEventListener("error",Xt),We.addEventListener("abort",Xt)});he.set(We,Oe)}(We),ve(We,function P(){return Ie||(Ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(We,pt):We)}function ce(We){if(We instanceof IDBRequest)return function ft(We){const Oe=new Promise((st,jt)=>{const Wt=()=>{We.removeEventListener("success",It),We.removeEventListener("error",Xt)},It=()=>{st(ce(We.result)),Wt()},Xt=()=>{jt(We.error),Wt()};We.addEventListener("success",It),We.addEventListener("error",Xt)});return Oe.then(st=>{st instanceof IDBCursor&&le.set(st,We)}).catch(()=>{}),Ke.set(Oe,We),Oe}(We);if(Je.has(We))return Je.get(We);const Oe=Ee(We);return Oe!==We&&(Je.set(We,Oe),Ke.set(Oe,We)),Oe}const Ve=We=>Ke.get(We),Ye=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],fe=new Map;function Qt(We,Oe){if(!(We instanceof IDBDatabase)||Oe in We||"string"!=typeof Oe)return;if(fe.get(Oe))return fe.get(Oe);const st=Oe.replace(/FromIndex$/,""),jt=Oe!==st,Wt=nt.includes(st);if(!(st in(jt?IDBIndex:IDBObjectStore).prototype)||!Wt&&!Ye.includes(st))return;const It=function(){var Xt=(0,w.Z)(function*(Gn,...qn){const ti=this.transaction(Gn,Wt?"readwrite":"readonly");let Jr=ti.store;return jt&&(Jr=Jr.index(qn.shift())),(yield Promise.all([Jr[st](...qn),Wt&&ti.done]))[0]});return function(qn){return Xt.apply(this,arguments)}}();return fe.set(Oe,It),It}!function ut(We){pt=We(pt)}(We=>({...We,get:(Oe,st,jt)=>Qt(Oe,st)||We.get(Oe,st,jt),has:(Oe,st)=>!!Qt(Oe,st)||We.has(Oe,st)}));class ct{constructor(Oe){this.container=Oe}getPlatformInfoString(){return this.container.getProviders().map(st=>{if(function Hn(We){const Oe=We.getComponent();return"VERSION"===Oe?.type}(st)){const jt=st.getImmediate();return`${jt.library}/${jt.version}`}return null}).filter(st=>st).join(" ")}}const un="@firebase/app",Tn=new q.Yd("@firebase/app"),qt="[DEFAULT]",_n={[un]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ut=new Map,Ln=new Map;function Vn(We,Oe){try{We.container.addComponent(Oe)}catch(st){Tn.debug(`Component ${Oe.name} failed to register with FirebaseApp ${We.name}`,st)}}function Yr(We,Oe){We.container.addOrOverwriteComponent(Oe)}function zn(We){const Oe=We.name;if(Ln.has(Oe))return Tn.debug(`There were multiple attempts to register component ${Oe}.`),!1;Ln.set(Oe,We);for(const st of Ut.values())Vn(st,We);return!0}function wr(We,Oe){const st=We.container.getProvider("heartbeat").getImmediate({optional:!0});return st&&st.triggerHeartbeat(),We.container.getProvider(Oe)}function _o(We,Oe,st=qt){wr(We,Oe).clearInstance(st)}function xt(){Ln.clear()}const ln=new De.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class _r{constructor(Oe,st,jt){this._isDeleted=!1,this._options=Object.assign({},Oe),this._config=Object.assign({},st),this._name=st.name,this._automaticDataCollectionEnabled=st.automaticDataCollectionEnabled,this._container=jt,this.container.addComponent(new ue.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Oe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Oe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Oe){this._isDeleted=Oe}checkDestroyed(){if(this.isDeleted)throw ln.create("app-deleted",{appName:this._name})}}const pn="10.6.0";function Qi(We,Oe={}){let st=We;"object"!=typeof Oe&&(Oe={name:Oe});const jt=Object.assign({name:qt,automaticDataCollectionEnabled:!1},Oe),Wt=jt.name;if("string"!=typeof Wt||!Wt)throw ln.create("bad-app-name",{appName:String(Wt)});if(st||(st=(0,De.aH)()),!st)throw ln.create("no-options");const It=Ut.get(Wt);if(It){if((0,De.vZ)(st,It.options)&&(0,De.vZ)(jt,It.config))return It;throw ln.create("duplicate-app",{appName:Wt})}const Xt=new ue.H0(Wt);for(const qn of Ln.values())Xt.addComponent(qn);const Gn=new _r(st,jt,Xt);return Ut.set(Wt,Gn),Gn}function Br(We=qt){const Oe=Ut.get(We);if(!Oe&&We===qt&&(0,De.aH)())return Qi();if(!Oe)throw ln.create("no-app",{appName:We});return Oe}function ai(){return Array.from(Ut.values())}function Lr(We){return jr.apply(this,arguments)}function jr(){return(jr=(0,w.Z)(function*(We){const Oe=We.name;Ut.has(Oe)&&(Ut.delete(Oe),yield Promise.all(We.container.getProviders().map(st=>st.delete())),We.isDeleted=!0)})).apply(this,arguments)}function vi(We,Oe,st){var jt;let Wt=null!==(jt=_n[We])&&void 0!==jt?jt:We;st&&(Wt+=`-${st}`);const It=Wt.match(/\s|\//),Xt=Oe.match(/\s|\//);if(It||Xt){const Gn=[`Unable to register library "${Wt}" with version "${Oe}":`];return It&&Gn.push(`library name "${Wt}" contains illegal characters (whitespace or "/")`),It&&Xt&&Gn.push("and"),Xt&&Gn.push(`version name "${Oe}" contains illegal characters (whitespace or "/")`),void Tn.warn(Gn.join(" "))}zn(new ue.wA(`${Wt}-version`,()=>({library:Wt,version:Oe}),"VERSION"))}function Vi(We,Oe){if(null!==We&&"function"!=typeof We)throw ln.create("invalid-log-argument");(0,q.Am)(We,Oe)}function ir(We){(0,q.Ub)(We)}const Or="firebase-heartbeat-database",os=1,ge="firebase-heartbeat-store";let ee=null;function te(){return ee||(ee=function Te(We,Oe,{blocked:st,upgrade:jt,blocking:Wt,terminated:It}={}){const Xt=indexedDB.open(We,Oe),Gn=ce(Xt);return jt&&Xt.addEventListener("upgradeneeded",qn=>{jt(ce(Xt.result),qn.oldVersion,qn.newVersion,ce(Xt.transaction),qn)}),st&&Xt.addEventListener("blocked",qn=>st(qn.oldVersion,qn.newVersion,qn)),Gn.then(qn=>{It&&qn.addEventListener("close",()=>It()),Wt&&qn.addEventListener("versionchange",ti=>Wt(ti.oldVersion,ti.newVersion,ti))}).catch(()=>{}),Gn}(Or,os,{upgrade:(We,Oe)=>{0===Oe&&We.createObjectStore(ge)}}).catch(We=>{throw ln.create("idb-open",{originalErrorMessage:We.message})})),ee}function ne(){return(ne=(0,w.Z)(function*(We){try{return yield(yield te()).transaction(ge).objectStore(ge).get(ht(We))}catch(Oe){if(Oe instanceof De.ZR)Tn.warn(Oe.message);else{const st=ln.create("idb-get",{originalErrorMessage:Oe?.message});Tn.warn(st.message)}}})).apply(this,arguments)}function Re(We,Oe){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,w.Z)(function*(We,Oe){try{const jt=(yield te()).transaction(ge,"readwrite");yield jt.objectStore(ge).put(Oe,ht(We)),yield jt.done}catch(st){if(st instanceof De.ZR)Tn.warn(st.message);else{const jt=ln.create("idb-set",{originalErrorMessage:st?.message});Tn.warn(jt.message)}}})).apply(this,arguments)}function ht(We){return`${We.name}!${We.options.appId}`}class Tt{constructor(Oe){this.container=Oe,this._heartbeatsCache=null;const st=this.container.getProvider("app").getImmediate();this._storage=new Ei(st),this._heartbeatsCachePromise=this._storage.read().then(jt=>(this._heartbeatsCache=jt,jt))}triggerHeartbeat(){var Oe=this;return(0,w.Z)(function*(){var st;const Wt=Oe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=Ft();if(null==(null===(st=Oe._heartbeatsCache)||void 0===st?void 0:st.heartbeats)&&(Oe._heartbeatsCache=yield Oe._heartbeatsCachePromise),Oe._heartbeatsCache.lastSentHeartbeatDate!==It&&!Oe._heartbeatsCache.heartbeats.some(Xt=>Xt.date===It))return Oe._heartbeatsCache.heartbeats.push({date:It,agent:Wt}),Oe._heartbeatsCache.heartbeats=Oe._heartbeatsCache.heartbeats.filter(Xt=>{const Gn=new Date(Xt.date).valueOf();return Date.now()-Gn<=2592e6}),Oe._storage.overwrite(Oe._heartbeatsCache)})()}getHeartbeatsHeader(){var Oe=this;return(0,w.Z)(function*(){var st;if(null===Oe._heartbeatsCache&&(yield Oe._heartbeatsCachePromise),null==(null===(st=Oe._heartbeatsCache)||void 0===st?void 0:st.heartbeats)||0===Oe._heartbeatsCache.heartbeats.length)return"";const jt=Ft(),{heartbeatsToSend:Wt,unsentEntries:It}=function lr(We,Oe=1024){const st=[];let jt=We.slice();for(const Wt of We){const It=st.find(Xt=>Xt.agent===Wt.agent);if(It){if(It.dates.push(Wt.date),yo(st)>Oe){It.dates.pop();break}}else if(st.push({agent:Wt.agent,dates:[Wt.date]}),yo(st)>Oe){st.pop();break}jt=jt.slice(1)}return{heartbeatsToSend:st,unsentEntries:jt}}(Oe._heartbeatsCache.heartbeats),Xt=(0,De.L)(JSON.stringify({version:2,heartbeats:Wt}));return Oe._heartbeatsCache.lastSentHeartbeatDate=jt,It.length>0?(Oe._heartbeatsCache.heartbeats=It,yield Oe._storage.overwrite(Oe._heartbeatsCache)):(Oe._heartbeatsCache.heartbeats=[],Oe._storage.overwrite(Oe._heartbeatsCache)),Xt})()}}function Ft(){return(new Date).toISOString().substring(0,10)}class Ei{constructor(Oe){this.app=Oe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,w.Z)(function*(){return!!(0,De.hl)()&&(0,De.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Oe=this;return(0,w.Z)(function*(){return(yield Oe._canUseIndexedDBPromise)&&(yield function J(We){return ne.apply(this,arguments)}(Oe.app))||{heartbeats:[]}})()}overwrite(Oe){var st=this;return(0,w.Z)(function*(){var jt;if(yield st._canUseIndexedDBPromise){const It=yield st.read();return Re(st.app,{lastSentHeartbeatDate:null!==(jt=Oe.lastSentHeartbeatDate)&&void 0!==jt?jt:It.lastSentHeartbeatDate,heartbeats:Oe.heartbeats})}})()}add(Oe){var st=this;return(0,w.Z)(function*(){var jt;if(yield st._canUseIndexedDBPromise){const It=yield st.read();return Re(st.app,{lastSentHeartbeatDate:null!==(jt=Oe.lastSentHeartbeatDate)&&void 0!==jt?jt:It.lastSentHeartbeatDate,heartbeats:[...It.heartbeats,...Oe.heartbeats]})}})()}}function yo(We){return(0,De.L)(JSON.stringify({version:2,heartbeats:We})).length}!function ka(We){zn(new ue.wA("platform-logger",Oe=>new ct(Oe),"PRIVATE")),zn(new ue.wA("heartbeat",Oe=>new Tt(Oe),"PRIVATE")),vi(un,"0.9.23",We),vi(un,"0.9.23","esm2017"),vi("fire-js","")}("")},4537:(Nt,He,z)=>{z.d(He,{H0:()=>P,wA:()=>q});var w=z(5861),ue=z(9058);class q{constructor(le,he,be){this.name=le,this.instanceFactory=he,this.type=be,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(le){return this.instantiationMode=le,this}setMultipleInstances(le){return this.multipleInstances=le,this}setServiceProps(le){return this.serviceProps=le,this}setInstanceCreatedCallback(le){return this.onInstanceCreated=le,this}}const De="[DEFAULT]";class ve{constructor(le,he){this.name=le,this.container=he,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(le){const he=this.normalizeInstanceIdentifier(le);if(!this.instancesDeferred.has(he)){const be=new ue.BH;if(this.instancesDeferred.set(he,be),this.isInitialized(he)||this.shouldAutoInitialize())try{const Je=this.getOrInitializeService({instanceIdentifier:he});Je&&be.resolve(Je)}catch{}}return this.instancesDeferred.get(he).promise}getImmediate(le){var he;const be=this.normalizeInstanceIdentifier(le?.identifier),Je=null!==(he=le?.optional)&&void 0!==he&&he;if(!this.isInitialized(be)&&!this.shouldAutoInitialize()){if(Je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:be})}catch(Ke){if(Je)return null;throw Ke}}getComponent(){return this.component}setComponent(le){if(le.name!==this.name)throw Error(`Mismatching Component ${le.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=le,this.shouldAutoInitialize()){if(function Pe(xe){return"EAGER"===xe.instantiationMode}(le))try{this.getOrInitializeService({instanceIdentifier:De})}catch{}for(const[he,be]of this.instancesDeferred.entries()){const Je=this.normalizeInstanceIdentifier(he);try{const Ke=this.getOrInitializeService({instanceIdentifier:Je});be.resolve(Ke)}catch{}}}}clearInstance(le=De){this.instancesDeferred.delete(le),this.instancesOptions.delete(le),this.instances.delete(le)}delete(){var le=this;return(0,w.Z)(function*(){const he=Array.from(le.instances.values());yield Promise.all([...he.filter(be=>"INTERNAL"in be).map(be=>be.INTERNAL.delete()),...he.filter(be=>"_delete"in be).map(be=>be._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(le=De){return this.instances.has(le)}getOptions(le=De){return this.instancesOptions.get(le)||{}}initialize(le={}){const{options:he={}}=le,be=this.normalizeInstanceIdentifier(le.instanceIdentifier);if(this.isInitialized(be))throw Error(`${this.name}(${be}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Je=this.getOrInitializeService({instanceIdentifier:be,options:he});for(const[Ke,ft]of this.instancesDeferred.entries())be===this.normalizeInstanceIdentifier(Ke)&&ft.resolve(Je);return Je}onInit(le,he){var be;const Je=this.normalizeInstanceIdentifier(he),Ke=null!==(be=this.onInitCallbacks.get(Je))&&void 0!==be?be:new Set;Ke.add(le),this.onInitCallbacks.set(Je,Ke);const ft=this.instances.get(Je);return ft&&le(ft,Je),()=>{Ke.delete(le)}}invokeOnInitCallbacks(le,he){const be=this.onInitCallbacks.get(he);if(be)for(const Je of be)try{Je(le,he)}catch{}}getOrInitializeService({instanceIdentifier:le,options:he={}}){let be=this.instances.get(le);if(!be&&this.component&&(be=this.component.instanceFactory(this.container,{instanceIdentifier:(xe=le,xe===De?void 0:xe),options:he}),this.instances.set(le,be),this.instancesOptions.set(le,he),this.invokeOnInitCallbacks(be,le),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,le,be)}catch{}var xe;return be||null}normalizeInstanceIdentifier(le=De){return this.component?this.component.multipleInstances?le:De:le}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class P{constructor(le){this.name=le,this.providers=new Map}addComponent(le){const he=this.getProvider(le.name);if(he.isComponentSet())throw new Error(`Component ${le.name} has already been registered with ${this.name}`);he.setComponent(le)}addOrOverwriteComponent(le){this.getProvider(le.name).isComponentSet()&&this.providers.delete(le.name),this.addComponent(le)}getProvider(le){if(this.providers.has(le))return this.providers.get(le);const he=new ve(le,this);return this.providers.set(le,he),he}getProviders(){return Array.from(this.providers.values())}}},7879:(Nt,He,z)=>{z.d(He,{Am:()=>xe,Ub:()=>P,Yd:()=>Pe,in:()=>ue});const w=[];var ue=function(le){return le[le.DEBUG=0]="DEBUG",le[le.VERBOSE=1]="VERBOSE",le[le.INFO=2]="INFO",le[le.WARN=3]="WARN",le[le.ERROR=4]="ERROR",le[le.SILENT=5]="SILENT",le}(ue||{});const q={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},De=ue.INFO,ve={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},Ie=(le,he,...be)=>{if(he<le.logLevel)return;const Je=(new Date).toISOString(),Ke=ve[he];if(!Ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${he})`);console[Ke](`[${Je}]  ${le.name}:`,...be)};class Pe{constructor(he){this.name=he,this._logLevel=De,this._logHandler=Ie,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(he){if(!(he in ue))throw new TypeError(`Invalid value "${he}" assigned to \`logLevel\``);this._logLevel=he}setLogLevel(he){this._logLevel="string"==typeof he?q[he]:he}get logHandler(){return this._logHandler}set logHandler(he){if("function"!=typeof he)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=he}get userLogHandler(){return this._userLogHandler}set userLogHandler(he){this._userLogHandler=he}debug(...he){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...he),this._logHandler(this,ue.DEBUG,...he)}log(...he){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...he),this._logHandler(this,ue.VERBOSE,...he)}info(...he){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...he),this._logHandler(this,ue.INFO,...he)}warn(...he){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...he),this._logHandler(this,ue.WARN,...he)}error(...he){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...he),this._logHandler(this,ue.ERROR,...he)}}function P(le){w.forEach(he=>{he.setLogLevel(le)})}function xe(le,he){for(const be of w){let Je=null;he&&he.level&&(Je=q[he.level]),be.userLogHandler=null===le?null:(Ke,ft,...tt)=>{const pt=tt.map(ut=>{if(null==ut)return null;if("string"==typeof ut)return ut;if("number"==typeof ut||"boolean"==typeof ut)return ut.toString();if(ut instanceof Error)return ut.message;try{return JSON.stringify(ut)}catch{return null}}).filter(ut=>ut).join(" ");ft>=(Je??Ke.logLevel)&&le({level:ue[ft].toLowerCase(),message:pt,args:tt,type:Ke.name})}}}},7142:(Nt,He,z)=>{z.d(He,{Z:()=>w.Z});var w=z(3106);w.Z.registerVersion("firebase","10.6.0","app-compat")},3956:(Nt,He,z)=>{z.r(He);var w=z(5861),ue=z(3106),q=z(9058),De=z(534),ve=z(7879),Ie=z(7582),Pe=z(4537);const xe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const ft=function Je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},tt=function Ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pt=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),kt=new ve.Yd("@firebase/auth");function ce(_,...d){kt.logLevel<=ve.in.ERROR&&kt.error(`Auth (${De.SDK_VERSION}): ${_}`,...d)}function Ve(_,...d){throw nt(_,...d)}function Te(_,...d){return nt(_,...d)}function je(_,d,p){const E=Object.assign(Object.assign({},tt()),{[d]:p});return new q.LL("auth","Firebase",E).create(d,{appName:_.name})}function Ye(_,d,p){if(!(d instanceof p))throw p.name!==d.constructor.name&&Ve(_,"argument-error"),je(_,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nt(_,...d){if("string"!=typeof _){const p=d[0],E=[...d.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(p,...E)}return pt.create(_,...d)}function fe(_,d,...p){if(!_)throw nt(d,...p)}function Qt(_){const d="INTERNAL ASSERTION FAILED: "+_;throw ce(d),new Error(d)}function ct(_,d){_||Qt(d)}function Hn(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function un(){return"http:"===Xn()||"https:"===Xn()}function Xn(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Dt{constructor(d,p){this.shortDelay=d,this.longDelay=p,ct(p>d,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function Tn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(un()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function me(_,d){ct(_.emulator,"Emulator should always be set here");const{url:p}=_.emulator;return d?`${p}${d.startsWith("/")?d.slice(1):d}`:p}class ye{static initialize(d,p,E){this.fetchImpl=d,p&&(this.headersImpl=p),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Qt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Qt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Qt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Fe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ce=new Dt(3e4,6e4);function Ae(_,d){return _.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:_.tenantId}):d}function Ue(_,d,p,E){return yt.apply(this,arguments)}function yt(){return(yt=(0,w.Z)(function*(_,d,p,E,U={}){return dt(_,U,(0,w.Z)(function*(){let Q={},pe={};E&&("GET"===d?pe=E:Q={body:JSON.stringify(E)});const ke=(0,q.xO)(Object.assign({key:_.config.apiKey},pe)).slice(1),et=yield _._getAdditionalHeaders();return et["Content-Type"]="application/json",_.languageCode&&(et["X-Firebase-Locale"]=_.languageCode),ye.fetch()(en(_,_.config.apiHost,p,ke),Object.assign({method:d,headers:et,referrerPolicy:"no-referrer"},Q))}))})).apply(this,arguments)}function dt(_,d,p){return fr.apply(this,arguments)}function fr(){return(fr=(0,w.Z)(function*(_,d,p){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},Fe),d);try{const U=new sn(_),Q=yield Promise.race([p(),U.promise]);U.clearNetworkTimeout();const pe=yield Q.json();if("needConfirmation"in pe)throw mn(_,"account-exists-with-different-credential",pe);if(Q.ok&&!("errorMessage"in pe))return pe;{const ke=Q.ok?pe.errorMessage:pe.error.message,[et,Ot]=ke.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===et)throw mn(_,"credential-already-in-use",pe);if("EMAIL_EXISTS"===et)throw mn(_,"email-already-in-use",pe);if("USER_DISABLED"===et)throw mn(_,"user-disabled",pe);const Zt=E[et]||et.toLowerCase().replace(/[_\s]+/g,"-");if(Ot)throw je(_,Zt,Ot);Ve(_,Zt)}}catch(U){if(U instanceof q.ZR)throw U;Ve(_,"network-request-failed",{message:String(U)})}})).apply(this,arguments)}function St(_,d,p,E){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,w.Z)(function*(_,d,p,E,U={}){const Q=yield Ue(_,d,p,E,U);return"mfaPendingCredential"in Q&&Ve(_,"multi-factor-auth-required",{_serverResponse:Q}),Q})).apply(this,arguments)}function en(_,d,p,E){const U=`${d}${p}?${E}`;return _.config.emulator?me(_.config,U):`${_.config.apiScheme}://${U}`}function Fn(_){switch(_){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sn{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((p,E)=>{this.timer=setTimeout(()=>E(Te(this.auth,"network-request-failed")),Ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mn(_,d,p){const E={appName:_.name};p.email&&(E.email=p.email),p.phoneNumber&&(E.phoneNumber=p.phoneNumber);const U=Te(_,d,E);return U.customData._tokenResponse=p,U}function $n(_){return void 0!==_&&void 0!==_.getResponse}function Gt(_){return void 0!==_&&void 0!==_.enterprise}class yn{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const p of this.recaptchaEnforcementState)if(p.provider&&p.provider===d)return Fn(p.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function er(){return(er=(0,w.Z)(function*(_){return(yield Ue(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Li(_,d){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,w.Z)(function*(_,d){return Ue(_,"GET","/v2/recaptchaConfig",Ae(_,d))})).apply(this,arguments)}function qt(){return(qt=(0,w.Z)(function*(_,d){return Ue(_,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Ut(){return(Ut=(0,w.Z)(function*(_,d){return Ue(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Vn(){return(Vn=(0,w.Z)(function*(_,d){return Ue(_,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Yr(_){if(_)try{const d=new Date(Number(_));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function _o(){return(_o=(0,w.Z)(function*(_,d=!1){const p=(0,q.m9)(_),E=yield p.getIdToken(d),U=Zi(E);fe(U&&U.exp&&U.auth_time&&U.iat,p.auth,"internal-error");const Q="object"==typeof U.firebase?U.firebase:void 0,pe=Q?.sign_in_provider;return{claims:U,token:E,authTime:Yr(xt(U.auth_time)),issuedAtTime:Yr(xt(U.iat)),expirationTime:Yr(xt(U.exp)),signInProvider:pe||null,signInSecondFactor:Q?.sign_in_second_factor||null}})).apply(this,arguments)}function xt(_){return 1e3*Number(_)}function Zi(_){const[d,p,E]=_.split(".");if(void 0===d||void 0===p||void 0===E)return ce("JWT malformed, contained fewer than 3 sections"),null;try{const U=(0,q.tV)(p);return U?JSON.parse(U):(ce("Failed to decode base64 JWT payload"),null)}catch(U){return ce("Caught error parsing JWT payload as JSON",U?.toString()),null}}function _r(_,d){return pn.apply(this,arguments)}function pn(){return(pn=(0,w.Z)(function*(_,d,p=!1){if(p)return d;try{return yield d}catch(E){throw E instanceof q.ZR&&function Qi({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}class Br{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var p;if(d){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const U=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,U)}}schedule(d=!1){var p=this;if(!this.isRunning)return;const E=this.getInterval(d);this.timerId=setTimeout((0,w.Z)(function*(){yield p.iteration()}),E)}iteration(){var d=this;return(0,w.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&d.schedule(!0))}d.schedule()})()}}class ai{constructor(d,p){this.createdAt=d,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yr(this.lastLoginAt),this.creationTime=Yr(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Lr(_){return jr.apply(this,arguments)}function jr(){return jr=(0,w.Z)(function*(_){var d;const p=_.auth,E=yield _.getIdToken(),U=yield _r(_,function Ln(_,d){return Vn.apply(this,arguments)}(p,{idToken:E}));fe(U?.users.length,p,"internal-error");const Q=U.users[0];_._notifyReloadListener(Q);const pe=null!==(d=Q.providerUserInfo)&&void 0!==d&&d.length?function Or(_){return _.map(d=>{var{providerId:p}=d,E=(0,Ie._T)(d,["providerId"]);return{providerId:p,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(Q.providerUserInfo):[],ke=function ir(_,d){return[..._.filter(E=>!d.some(U=>U.providerId===E.providerId)),...d]}(_.providerData,pe),Zt=!!_.isAnonymous&&!(_.email&&Q.passwordHash||ke?.length),zt={uid:Q.localId,displayName:Q.displayName||null,photoURL:Q.photoUrl||null,email:Q.email||null,emailVerified:Q.emailVerified||!1,phoneNumber:Q.phoneNumber||null,tenantId:Q.tenantId||null,providerData:ke,metadata:new ai(Q.createdAt,Q.lastLoginAt),isAnonymous:Zt};Object.assign(_,zt)}),jr.apply(this,arguments)}function Vi(){return(Vi=(0,w.Z)(function*(_){const d=(0,q.m9)(_);yield Lr(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function ge(){return(ge=(0,w.Z)(function*(_,d){const p=yield dt(_,{},(0,w.Z)(function*(){const E=(0,q.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:U,apiKey:Q}=_.config,pe=en(_,U,"/v1/token",`key=${Q}`),ke=yield _._getAdditionalHeaders();return ke["Content-Type"]="application/x-www-form-urlencoded",ye.fetch()(pe,{method:"POST",headers:ke,body:E})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}function te(){return(te=(0,w.Z)(function*(_,d){return Ue(_,"POST","/v2/accounts:revokeToken",Ae(_,d))})).apply(this,arguments)}class J{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){fe(d.idToken,"internal-error"),fe(typeof d.idToken<"u","internal-error"),fe(typeof d.refreshToken<"u","internal-error");const p="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function ln(_){const d=Zi(_);return fe(d,"internal-error"),fe(typeof d.exp<"u","internal-error"),fe(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,p)}getToken(d,p=!1){var E=this;return(0,w.Z)(function*(){return fe(!E.accessToken||E.refreshToken,d,"user-token-expired"),p||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(d,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,p){var E=this;return(0,w.Z)(function*(){const{accessToken:U,refreshToken:Q,expiresIn:pe}=yield function os(_,d){return ge.apply(this,arguments)}(d,p);E.updateTokensAndExpiration(U,Q,Number(pe))})()}updateTokensAndExpiration(d,p,E){this.refreshToken=p||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(d,p){const{refreshToken:E,accessToken:U,expirationTime:Q}=p,pe=new J;return E&&(fe("string"==typeof E,"internal-error",{appName:d}),pe.refreshToken=E),U&&(fe("string"==typeof U,"internal-error",{appName:d}),pe.accessToken=U),Q&&(fe("number"==typeof Q,"internal-error",{appName:d}),pe.expirationTime=Q),pe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new J,this.toJSON())}_performRefresh(){return Qt("not implemented")}}function ne(_,d){fe("string"==typeof _||typeof _>"u","internal-error",{appName:d})}class Re{constructor(d){var{uid:p,auth:E,stsTokenManager:U}=d,Q=(0,Ie._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Br(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=E,this.stsTokenManager=U,this.accessToken=U.accessToken,this.displayName=Q.displayName||null,this.email=Q.email||null,this.emailVerified=Q.emailVerified||!1,this.phoneNumber=Q.phoneNumber||null,this.photoURL=Q.photoURL||null,this.isAnonymous=Q.isAnonymous||!1,this.tenantId=Q.tenantId||null,this.providerData=Q.providerData?[...Q.providerData]:[],this.metadata=new ai(Q.createdAt||void 0,Q.lastLoginAt||void 0)}getIdToken(d){var p=this;return(0,w.Z)(function*(){const E=yield _r(p,p.stsTokenManager.getToken(p.auth,d));return fe(E,p.auth,"internal-error"),p.accessToken!==E&&(p.accessToken=E,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),E})()}getIdTokenResult(d){return function wr(_){return _o.apply(this,arguments)}(this,d)}reload(){return function vi(_){return Vi.apply(this,arguments)}(this)}_assign(d){this!==d&&(fe(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(p=>Object.assign({},p)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const p=new Re(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(d){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,p=!1){var E=this;return(0,w.Z)(function*(){let U=!1;d.idToken&&d.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(d),U=!0),p&&(yield Lr(E)),yield E.auth._persistUserIfCurrent(E),U&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var d=this;return(0,w.Z)(function*(){const p=yield d.getIdToken();return yield _r(d,function Qn(_,d){return qt.apply(this,arguments)}(d.auth,{idToken:p})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,p){var E,U,Q,pe,ke,et,Ot,Zt;const zt=null!==(E=p.displayName)&&void 0!==E?E:void 0,kr=null!==(U=p.email)&&void 0!==U?U:void 0,Na=null!==(Q=p.phoneNumber)&&void 0!==Q?Q:void 0,Nd=null!==(pe=p.photoURL)&&void 0!==pe?pe:void 0,Ri=null!==(ke=p.tenantId)&&void 0!==ke?ke:void 0,sc=null!==(et=p._redirectEventId)&&void 0!==et?et:void 0,Yu=null!==(Ot=p.createdAt)&&void 0!==Ot?Ot:void 0,jl=null!==(Zt=p.lastLoginAt)&&void 0!==Zt?Zt:void 0,{uid:ga,emailVerified:xd,isAnonymous:Zf,providerData:Du,stsTokenManager:Ah}=p;fe(ga&&Ah,d,"internal-error");const bh=J.fromJSON(this.name,Ah);fe("string"==typeof ga,d,"internal-error"),ne(zt,d.name),ne(kr,d.name),fe("boolean"==typeof xd,d,"internal-error"),fe("boolean"==typeof Zf,d,"internal-error"),ne(Na,d.name),ne(Nd,d.name),ne(Ri,d.name),ne(sc,d.name),ne(Yu,d.name),ne(jl,d.name);const qc=new Re({uid:ga,auth:d,email:kr,emailVerified:xd,displayName:zt,isAnonymous:Zf,photoURL:Nd,phoneNumber:Na,tenantId:Ri,stsTokenManager:bh,createdAt:Yu,lastLoginAt:jl});return Du&&Array.isArray(Du)&&(qc.providerData=Du.map(Qf=>Object.assign({},Qf))),sc&&(qc._redirectEventId=sc),qc}static _fromIdTokenResponse(d,p,E=!1){return(0,w.Z)(function*(){const U=new J;U.updateFromServerResponse(p);const Q=new Re({uid:p.localId,auth:d,stsTokenManager:U,isAnonymous:E});return yield Lr(Q),Q})()}}const Ze=new Map;function ht(_){ct(_ instanceof Function,"Expected a class definition");let d=Ze.get(_);return d?(ct(d instanceof _,"Instance stored in cache mismatched with class"),d):(d=new _,Ze.set(_,d),d)}const rn=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.Z)(function*(){return!0})()}_set(p,E){var U=this;return(0,w.Z)(function*(){U.storage[p]=E})()}_get(p){var E=this;return(0,w.Z)(function*(){const U=E.storage[p];return void 0===U?null:U})()}_remove(p){var E=this;return(0,w.Z)(function*(){delete E.storage[p]})()}_addListener(p,E){}_removeListener(p,E){}}return _.type="NONE",_})();function Tt(_,d,p){return`firebase:${_}:${d}:${p}`}class Ft{constructor(d,p,E){this.persistence=d,this.auth=p,this.userKey=E;const{config:U,name:Q}=this.auth;this.fullUserKey=Tt(this.userKey,U.apiKey,Q),this.fullPersistenceKey=Tt("persistence",U.apiKey,Q),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,w.Z)(function*(){const p=yield d.persistence._get(d.fullUserKey);return p?Re._fromJSON(d.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var p=this;return(0,w.Z)(function*(){if(p.persistence===d)return;const E=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=d,E?p.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,p,E="authUser"){return(0,w.Z)(function*(){if(!p.length)return new Ft(ht(rn),d,E);const U=(yield Promise.all(p.map(function(){var Ot=(0,w.Z)(function*(Zt){if(yield Zt._isAvailable())return Zt});return function(Zt){return Ot.apply(this,arguments)}}()))).filter(Ot=>Ot);let Q=U[0]||ht(rn);const pe=Tt(E,d.config.apiKey,d.name);let ke=null;for(const Ot of p)try{const Zt=yield Ot._get(pe);if(Zt){const zt=Re._fromJSON(d,Zt);Ot!==Q&&(ke=zt),Q=Ot;break}}catch{}const et=U.filter(Ot=>Ot._shouldAllowMigration);return Q._shouldAllowMigration&&et.length?(Q=et[0],ke&&(yield Q._set(pe,ke.toJSON())),yield Promise.all(p.map(function(){var Ot=(0,w.Z)(function*(Zt){if(Zt!==Q)try{yield Zt._remove(pe)}catch{}});return function(Zt){return Ot.apply(this,arguments)}}())),new Ft(Q,d,E)):new Ft(Q,d,E)})()}}function lr(_){const d=_.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(We(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Ei(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(st(d))return"Blackberry";if(jt(d))return"Webos";if(yo(d))return"Safari";if((d.includes("chrome/")||ka(d))&&!d.includes("edge/"))return"Chrome";if(Oe(d))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function Ei(_=(0,q.z$)()){return/firefox\//i.test(_)}function yo(_=(0,q.z$)()){const d=_.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function ka(_=(0,q.z$)()){return/crios\//i.test(_)}function We(_=(0,q.z$)()){return/iemobile/i.test(_)}function Oe(_=(0,q.z$)()){return/android/i.test(_)}function st(_=(0,q.z$)()){return/blackberry/i.test(_)}function jt(_=(0,q.z$)()){return/webos/i.test(_)}function Wt(_=(0,q.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function qn(_=(0,q.z$)()){return Wt(_)||Oe(_)||jt(_)||st(_)||/windows phone/i.test(_)||We(_)}function Jr(_,d=[]){let p;switch(_){case"Browser":p=lr((0,q.z$)());break;case"Worker":p=`${lr((0,q.z$)())}-${_}`;break;default:p=_}const E=d.length?d.join(","):"FirebaseCore-web";return`${p}/JsCore/${De.SDK_VERSION}/${E}`}class as{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,p){const E=Q=>new Promise((pe,ke)=>{try{pe(d(Q))}catch(et){ke(et)}});E.onAbort=p,this.queue.push(E);const U=this.queue.length-1;return()=>{this.queue[U]=()=>Promise.resolve()}}runMiddleware(d){var p=this;return(0,w.Z)(function*(){if(p.auth.currentUser===d)return;const E=[];try{for(const U of p.queue)yield U(d),U.onAbort&&E.push(U.onAbort)}catch(U){E.reverse();for(const Q of E)try{Q()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:U?.message})}})()}}function Ws(){return(Ws=(0,w.Z)(function*(_,d={}){return Ue(_,"GET","/v2/passwordPolicy",Ae(_,d))})).apply(this,arguments)}class Zs{constructor(d){var p,E,U,Q;const pe=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(p=pe.minPasswordLength)&&void 0!==p?p:6,pe.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=pe.maxPasswordLength),void 0!==pe.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=pe.containsLowercaseCharacter),void 0!==pe.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=pe.containsUppercaseCharacter),void 0!==pe.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=pe.containsNumericCharacter),void 0!==pe.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=pe.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(U=null===(E=d.allowedNonAlphanumericCharacters)||void 0===E?void 0:E.join(""))&&void 0!==U?U:"",this.forceUpgradeOnSignin=null!==(Q=d.forceUpgradeOnSignin)&&void 0!==Q&&Q,this.schemaVersion=d.schemaVersion}validatePassword(d){var p,E,U,Q,pe,ke;const et={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,et),this.validatePasswordCharacterOptions(d,et),et.isValid&&(et.isValid=null===(p=et.meetsMinPasswordLength)||void 0===p||p),et.isValid&&(et.isValid=null===(E=et.meetsMaxPasswordLength)||void 0===E||E),et.isValid&&(et.isValid=null===(U=et.containsLowercaseLetter)||void 0===U||U),et.isValid&&(et.isValid=null===(Q=et.containsUppercaseLetter)||void 0===Q||Q),et.isValid&&(et.isValid=null===(pe=et.containsNumericCharacter)||void 0===pe||pe),et.isValid&&(et.isValid=null===(ke=et.containsNonAlphanumericCharacter)||void 0===ke||ke),et}validatePasswordLengthOptions(d,p){const E=this.customStrengthOptions.minPasswordLength,U=this.customStrengthOptions.maxPasswordLength;E&&(p.meetsMinPasswordLength=d.length>=E),U&&(p.meetsMaxPasswordLength=d.length<=U)}validatePasswordCharacterOptions(d,p){let E;this.updatePasswordCharacterOptionsStatuses(p,!1,!1,!1,!1);for(let U=0;U<d.length;U++)E=d.charAt(U),this.updatePasswordCharacterOptionsStatuses(p,E>="a"&&E<="z",E>="A"&&E<="Z",E>="0"&&E<="9",this.allowedNonAlphanumericCharacters.includes(E))}updatePasswordCharacterOptionsStatuses(d,p,E,U,Q){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=p)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=E)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=U)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=Q))}}class Qo{constructor(d,p,E,U){this.app=d,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=E,this.config=U,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yo(this),this.idTokenSubscription=new Yo(this),this.beforeStateQueue=new as(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=U.sdkClientVersion}_initializeWithPersistence(d,p){var E=this;return p&&(this._popupRedirectResolver=ht(p)),this._initializationPromise=this.queue((0,w.Z)(function*(){var U,Q;if(!E._deleted&&(E.persistenceManager=yield Ft.create(E,d),!E._deleted)){if(null!==(U=E._popupRedirectResolver)&&void 0!==U&&U._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(p),E.lastNotifiedUid=(null===(Q=E.currentUser)||void 0===Q?void 0:Q.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,w.Z)(function*(){if(d._deleted)return;const p=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||p){if(d.currentUser&&p&&d.currentUser.uid===p.uid)return d._currentUser._assign(p),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(p,!0)}})()}initializeCurrentUser(d){var p=this;return(0,w.Z)(function*(){var E;const U=yield p.assertedPersistence.getCurrentUser();let Q=U,pe=!1;if(d&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ke=null===(E=p.redirectUser)||void 0===E?void 0:E._redirectEventId,et=Q?._redirectEventId,Ot=yield p.tryRedirectSignIn(d);(!ke||ke===et)&&Ot?.user&&(Q=Ot.user,pe=!0)}if(!Q)return p.directlySetCurrentUser(null);if(!Q._redirectEventId){if(pe)try{yield p.beforeStateQueue.runMiddleware(Q)}catch(ke){Q=U,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ke))}return Q?p.reloadAndSetCurrentUserOrClear(Q):p.directlySetCurrentUser(null)}return fe(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===Q._redirectEventId?p.directlySetCurrentUser(Q):p.reloadAndSetCurrentUserOrClear(Q)})()}tryRedirectSignIn(d){var p=this;return(0,w.Z)(function*(){let E=null;try{E=yield p._popupRedirectResolver._completeRedirectFn(p,d,!0)}catch{yield p._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(d){var p=this;return(0,w.Z)(function*(){try{yield Lr(d)}catch(E){if("auth/network-request-failed"!==E?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function bt(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var d=this;return(0,w.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var p=this;return(0,w.Z)(function*(){const E=d?(0,q.m9)(d):null;return E&&fe(E.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(E&&E._clone(p))})()}_updateCurrentUser(d,p=!1){var E=this;return(0,w.Z)(function*(){if(!E._deleted)return d&&fe(E.tenantId===d.tenantId,E,"tenant-id-mismatch"),p||(yield E.beforeStateQueue.runMiddleware(d)),E.queue((0,w.Z)(function*(){yield E.directlySetCurrentUser(d),E.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,w.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var p=this;return this.queue((0,w.Z)(function*(){yield p.assertedPersistence.setPersistence(ht(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var p=this;return(0,w.Z)(function*(){p._getPasswordPolicyInternal()||(yield p._updatePasswordPolicy());const E=p._getPasswordPolicyInternal();return E.schemaVersion!==p.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(p._errorFactory.create("unsupported-password-policy-schema-version",{})):E.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,w.Z)(function*(){const p=yield function vo(_){return Ws.apply(this,arguments)}(d),E=new Zs(p);null===d.tenantId?d._projectPasswordPolicy=E:d._tenantPasswordPolicies[d.tenantId]=E})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new q.LL("auth","Firebase",d())}onAuthStateChanged(d,p,E){return this.registerStateListener(this.authStateSubscription,d,p,E)}beforeAuthStateChanged(d,p){return this.beforeStateQueue.pushCallback(d,p)}onIdTokenChanged(d,p,E){return this.registerStateListener(this.idTokenSubscription,d,p,E)}authStateReady(){return new Promise((d,p)=>{if(this.currentUser)d();else{const E=this.onAuthStateChanged(()=>{E(),d()},p)}})}revokeAccessToken(d){var p=this;return(0,w.Z)(function*(){if(p.currentUser){const E=yield p.currentUser.getIdToken(),U={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:E};null!=p.tenantId&&(U.tenantId=p.tenantId),yield function ee(_,d){return te.apply(this,arguments)}(p,U)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,p){var E=this;return(0,w.Z)(function*(){const U=yield E.getOrInitRedirectPersistenceManager(p);return null===d?U.removeCurrentUser():U.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var p=this;return(0,w.Z)(function*(){if(!p.redirectPersistenceManager){const E=d&&ht(d)||p._popupRedirectResolver;fe(E,p,"argument-error"),p.redirectPersistenceManager=yield Ft.create(p,[ht(E._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(d){var p=this;return(0,w.Z)(function*(){var E,U;return p._isInitialized&&(yield p.queue((0,w.Z)(function*(){}))),(null===(E=p._currentUser)||void 0===E?void 0:E._redirectEventId)===d?p._currentUser:(null===(U=p.redirectUser)||void 0===U?void 0:U._redirectEventId)===d?p.redirectUser:null})()}_persistUserIfCurrent(d){var p=this;return(0,w.Z)(function*(){if(d===p.currentUser)return p.queue((0,w.Z)(function*(){return p.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(p=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,p,E,U){if(this._deleted)return()=>{};const Q="function"==typeof p?p:p.next.bind(p);let pe=!1;const ke=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(ke,this,"internal-error"),ke.then(()=>{pe||Q(this.currentUser)}),"function"==typeof p){const et=d.addObserver(p,E,U);return()=>{pe=!0,et()}}{const et=d.addObserver(p);return()=>{pe=!0,et()}}}directlySetCurrentUser(d){var p=this;return(0,w.Z)(function*(){p.currentUser&&p.currentUser!==d&&p._currentUser._stopProactiveRefresh(),d&&p.isProactiveRefreshEnabled&&d._startProactiveRefresh(),p.currentUser=d,d?yield p.assertedPersistence.setCurrentUser(d):yield p.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Jr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,w.Z)(function*(){var p;const E={"X-Client-Version":d.clientVersion};d.app.options.appId&&(E["X-Firebase-gmpid"]=d.app.options.appId);const U=yield null===(p=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();U&&(E["X-Firebase-Client"]=U);const Q=yield d._getAppCheckToken();return Q&&(E["X-Firebase-AppCheck"]=Q),E})()}_getAppCheckToken(){var d=this;return(0,w.Z)(function*(){var p;const E=yield null===(p=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return E?.error&&function Ee(_,...d){kt.logLevel<=ve.in.WARN&&kt.warn(`Auth (${De.SDK_VERSION}): ${_}`,...d)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function xn(_){return(0,q.m9)(_)}class Yo{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,q.ne)(p=>this.observer=p)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Yi(_){return new Promise((d,p)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=d,E.onerror=U=>{const Q=Te("internal-error");Q.customData=U,p(Q)},E.type="text/javascript",E.charset="UTF-8",function Ii(){var _,d;return null!==(d=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==d?d:document}().appendChild(E)})}function Eo(_){return`__${_}${Math.floor(1e6*Math.random())}`}class Hr{constructor(d){this.type="recaptcha-enterprise",this.auth=xn(d)}verify(d="verify",p=!1){var E=this;return(0,w.Z)(function*(){function Q(){return Q=(0,w.Z)(function*(ke){if(!p){if(null==ke.tenantId&&null!=ke._agentRecaptchaConfig)return ke._agentRecaptchaConfig.siteKey;if(null!=ke.tenantId&&void 0!==ke._tenantRecaptchaConfigs[ke.tenantId])return ke._tenantRecaptchaConfigs[ke.tenantId].siteKey}return new Promise(function(){var et=(0,w.Z)(function*(Ot,Zt){Li(ke,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(zt=>{if(void 0!==zt.recaptchaKey){const kr=new yn(zt);return null==ke.tenantId?ke._agentRecaptchaConfig=kr:ke._tenantRecaptchaConfigs[ke.tenantId]=kr,Ot(kr.siteKey)}Zt(new Error("recaptcha Enterprise site key undefined"))}).catch(zt=>{Zt(zt)})});return function(Ot,Zt){return et.apply(this,arguments)}}())}),Q.apply(this,arguments)}function pe(ke,et,Ot){const Zt=window.grecaptcha;Gt(Zt)?Zt.enterprise.ready(()=>{Zt.enterprise.execute(ke,{action:d}).then(zt=>{et(zt)}).catch(()=>{et("NO_RECAPTCHA")})}):Ot(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ke,et)=>{(function U(ke){return Q.apply(this,arguments)})(E.auth).then(Ot=>{if(!p&&Gt(window.grecaptcha))pe(Ot,ke,et);else{if(typeof window>"u")return void et(new Error("RecaptchaVerifier is only supported in browser"));Yi("https://www.google.com/recaptcha/enterprise.js?render="+Ot).then(()=>{pe(Ot,ke,et)}).catch(Zt=>{et(Zt)})}}).catch(Ot=>{et(Ot)})})})()}}function ui(_,d,p){return Is.apply(this,arguments)}function Is(){return(Is=(0,w.Z)(function*(_,d,p,E=!1){const U=new Hr(_);let Q;try{Q=yield U.verify(p)}catch{Q=yield U.verify(p,!0)}const pe=Object.assign({},d);return Object.assign(pe,E?{captchaResp:Q}:{captchaResponse:Q}),Object.assign(pe,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(pe,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),pe})).apply(this,arguments)}function Mi(_,d,p,E){return us.apply(this,arguments)}function us(){return us=(0,w.Z)(function*(_,d,p,E){var U;if(null!==(U=_._getRecaptchaConfig())&&void 0!==U&&U.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const Q=yield ui(_,d,p,"getOobCode"===p);return E(_,Q)}return E(_,d).catch(function(){var Q=(0,w.Z)(function*(pe){if("auth/missing-recaptcha-token"===pe.code){console.log(`${p} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const ke=yield ui(_,d,p,"getOobCode"===p);return E(_,ke)}return Promise.reject(pe)});return function(pe){return Q.apply(this,arguments)}}())}),us.apply(this,arguments)}function ho(_){const d=_.indexOf(":");return d<0?"":_.substr(0,d+1)}function hu(_){if(!_)return null;const d=Number(_);return isNaN(d)?null:d}class Oi{constructor(d,p){this.providerId=d,this.signInMethod=p}toJSON(){return Qt("not implemented")}_getIdTokenResponse(d){return Qt("not implemented")}_linkToIdToken(d,p){return Qt("not implemented")}_getReauthenticationResolver(d){return Qt("not implemented")}}function La(_,d){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,w.Z)(function*(_,d){return Ue(_,"POST","/v1/accounts:resetPassword",Ae(_,d))})).apply(this,arguments)}function Ns(){return(Ns=(0,w.Z)(function*(_,d){return Ue(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function wn(_,d){return tr.apply(this,arguments)}function tr(){return(tr=(0,w.Z)(function*(_,d){return Ue(_,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function Ys(){return(Ys=(0,w.Z)(function*(_,d){return Ue(_,"POST","/v1/accounts:update",Ae(_,d))})).apply(this,arguments)}function Gr(_,d){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,w.Z)(function*(_,d){return St(_,"POST","/v1/accounts:signInWithPassword",Ae(_,d))})).apply(this,arguments)}function xs(_,d){return ks.apply(this,arguments)}function ks(){return(ks=(0,w.Z)(function*(_,d){return Ue(_,"POST","/v1/accounts:sendOobCode",Ae(_,d))})).apply(this,arguments)}function Ts(){return(Ts=(0,w.Z)(function*(_,d){return xs(_,d)})).apply(this,arguments)}function cr(_,d){return vt.apply(this,arguments)}function vt(){return(vt=(0,w.Z)(function*(_,d){return xs(_,d)})).apply(this,arguments)}function cn(_,d){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,w.Z)(function*(_,d){return xs(_,d)})).apply(this,arguments)}function Io(){return(Io=(0,w.Z)(function*(_,d){return xs(_,d)})).apply(this,arguments)}function Js(){return(Js=(0,w.Z)(function*(_,d){return St(_,"POST","/v1/accounts:signInWithEmailLink",Ae(_,d))})).apply(this,arguments)}function Ui(){return(Ui=(0,w.Z)(function*(_,d){return St(_,"POST","/v1/accounts:signInWithEmailLink",Ae(_,d))})).apply(this,arguments)}class Bi extends Oi{constructor(d,p,E,U=null){super("password",E),this._email=d,this._password=p,this._tenantId=U}static _fromEmailAndPassword(d,p){return new Bi(d,p,"password")}static _fromEmailAndCode(d,p,E=null){return new Bi(d,p,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(d){var p=this;return(0,w.Z)(function*(){switch(p.signInMethod){case"password":return Mi(d,{returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Gr);case"emailLink":return function ci(_,d){return Js.apply(this,arguments)}(d,{email:p._email,oobCode:p._password});default:Ve(d,"internal-error")}})()}_linkToIdToken(d,p){var E=this;return(0,w.Z)(function*(){switch(E.signInMethod){case"password":return Mi(d,{idToken:p,returnSecureToken:!0,email:E._email,password:E._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wn);case"emailLink":return function dr(_,d){return Ui.apply(this,arguments)}(d,{idToken:p,email:E._email,oobCode:E._password});default:Ve(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Ht(_,d){return wi.apply(this,arguments)}function wi(){return(wi=(0,w.Z)(function*(_,d){return St(_,"POST","/v1/accounts:signInWithIdp",Ae(_,d))})).apply(this,arguments)}class Ur extends Oi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const p=new Ur(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(p.idToken=d.idToken),d.accessToken&&(p.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(p.nonce=d.nonce),d.pendingToken&&(p.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(p.accessToken=d.oauthToken,p.secret=d.oauthTokenSecret):Ve("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:E,signInMethod:U}=p,Q=(0,Ie._T)(p,["providerId","signInMethod"]);if(!E||!U)return null;const pe=new Ur(E,U);return pe.idToken=Q.idToken||void 0,pe.accessToken=Q.accessToken||void 0,pe.secret=Q.secret,pe.nonce=Q.nonce,pe.pendingToken=Q.pendingToken||null,pe}_getIdTokenResponse(d){return Ht(d,this.buildRequest())}_linkToIdToken(d,p){const E=this.buildRequest();return E.idToken=p,Ht(d,E)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,Ht(d,p)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),d.postBody=(0,q.xO)(p)}return d}}function nr(){return(nr=(0,w.Z)(function*(_,d){return Ue(_,"POST","/v1/accounts:sendVerificationCode",Ae(_,d))})).apply(this,arguments)}function di(){return(di=(0,w.Z)(function*(_,d){return St(_,"POST","/v1/accounts:signInWithPhoneNumber",Ae(_,d))})).apply(this,arguments)}function ko(){return(ko=(0,w.Z)(function*(_,d){const p=yield St(_,"POST","/v1/accounts:signInWithPhoneNumber",Ae(_,d));if(p.temporaryProof)throw mn(_,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Cs={USER_NOT_FOUND:"user-not-found"};function Ls(){return(Ls=(0,w.Z)(function*(_,d){return St(_,"POST","/v1/accounts:signInWithPhoneNumber",Ae(_,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Cs)})).apply(this,arguments)}class Hi extends Oi{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,p){return new Hi({verificationId:d,verificationCode:p})}static _fromTokenResponse(d,p){return new Hi({phoneNumber:d,temporaryProof:p})}_getIdTokenResponse(d){return function ji(_,d){return di.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,p){return function Fs(_,d){return ko.apply(this,arguments)}(d,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function Xi(_,d){return Ls.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:p,verificationId:E,verificationCode:U}=this.params;return d&&p?{temporaryProof:d,phoneNumber:p}:{sessionInfo:E,code:U}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:p,verificationCode:E,phoneNumber:U,temporaryProof:Q}=d;return E||p||U||Q?new Hi({verificationId:p,verificationCode:E,phoneNumber:U,temporaryProof:Q}):null}}class ls{constructor(d){var p,E,U,Q,pe,ke;const et=(0,q.zd)((0,q.pd)(d)),Ot=null!==(p=et.apiKey)&&void 0!==p?p:null,Zt=null!==(E=et.oobCode)&&void 0!==E?E:null,zt=function An(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(U=et.mode)&&void 0!==U?U:null);fe(Ot&&Zt&&zt,"argument-error"),this.apiKey=Ot,this.operation=zt,this.code=Zt,this.continueUrl=null!==(Q=et.continueUrl)&&void 0!==Q?Q:null,this.languageCode=null!==(pe=et.languageCode)&&void 0!==pe?pe:null,this.tenantId=null!==(ke=et.tenantId)&&void 0!==ke?ke:null}static parseLink(d){const p=function ta(_){const d=(0,q.zd)((0,q.pd)(_)).link,p=d?(0,q.zd)((0,q.pd)(d)).deep_link_id:null,E=(0,q.zd)((0,q.pd)(_)).deep_link_id;return(E?(0,q.zd)((0,q.pd)(E)).link:null)||E||p||d||_}(d);try{return new ls(p)}catch{return null}}}let cs=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(p,E){return Bi._fromEmailAndPassword(p,E)}static credentialWithLink(p,E){const U=ls.parseLink(E);return fe(U,"argument-error"),Bi._fromEmailAndCode(p,U.code,U.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class es{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class hi extends es{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Xs extends hi{static credentialFromJSON(d){const p="string"==typeof d?JSON.parse(d):d;return fe("providerId"in p&&"signInMethod"in p,"argument-error"),Ur._fromParams(p)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return fe(d.idToken||d.accessToken,"argument-error"),Ur._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Xs.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Xs.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:E,oauthTokenSecret:U,pendingToken:Q,nonce:pe,providerId:ke}=d;if(!E&&!U&&!p&&!Q||!ke)return null;try{return new Xs(ke)._credential({idToken:p,accessToken:E,nonce:pe,pendingToken:Q})}catch{return null}}}let ni=(()=>{class _ extends hi{constructor(){super("facebook.com")}static credential(p){return Ur._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),xu=(()=>{class _ extends hi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,E){return Ur._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:E})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:E,oauthAccessToken:U}=p;if(!E&&!U)return null;try{return _.credential(E,U)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),ri=(()=>{class _ extends hi{constructor(){super("github.com")}static credential(p){return Ur._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Ds extends Oi{constructor(d,p){super(d,d),this.pendingToken=p}_getIdTokenResponse(d){return Ht(d,this.buildRequest())}_linkToIdToken(d,p){const E=this.buildRequest();return E.idToken=p,Ht(d,E)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,Ht(d,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:E,signInMethod:U,pendingToken:Q}=p;return E&&U&&Q&&E===U?new Ds(E,Q):null}static _create(d,p){return new Ds(d,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fo extends es{constructor(d){fe(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return fo.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return fo.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const p=Ds.fromJSON(d);return fe(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:p,providerId:E}=d;if(!p||!E)return null;try{return Ds._create(E,p)}catch{return null}}}let ts=(()=>{class _ extends hi{constructor(){super("twitter.com")}static credential(p,E){return Ur._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:E})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:E,oauthTokenSecret:U}=p;if(!E||!U)return null;try{return _.credential(E,U)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function _a(_,d){return Va.apply(this,arguments)}function Va(){return(Va=(0,w.Z)(function*(_,d){return St(_,"POST","/v1/accounts:signUp",Ae(_,d))})).apply(this,arguments)}class Ti{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,p,E,U=!1){return(0,w.Z)(function*(){const Q=yield Re._fromIdTokenResponse(d,E,U),pe=Ua(E);return new Ti({user:Q,providerId:pe,_tokenResponse:E,operationType:p})})()}static _forOperation(d,p,E){return(0,w.Z)(function*(){yield d._updateTokensIfNecessary(E,!0);const U=Ua(E);return new Ti({user:d,providerId:U,_tokenResponse:E,operationType:p})})()}}function Ua(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function ns(){return(ns=(0,w.Z)(function*(_){var d;const p=xn(_);if(yield p._initializationPromise,null!==(d=p.currentUser)&&void 0!==d&&d.isAnonymous)return new Ti({user:p.currentUser,providerId:null,operationType:"signIn"});const E=yield _a(p,{returnSecureToken:!0}),U=yield Ti._fromIdTokenResponse(p,"signIn",E,!0);return yield p._updateCurrentUser(U.user),U})).apply(this,arguments)}class yr extends q.ZR{constructor(d,p,E,U){var Q;super(p.code,p.message),this.operationType=E,this.user=U,Object.setPrototypeOf(this,yr.prototype),this.customData={appName:d.name,tenantId:null!==(Q=d.tenantId)&&void 0!==Q?Q:void 0,_serverResponse:p.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(d,p,E,U){return new yr(d,p,E,U)}}function ya(_,d,p,E){return("reauthenticate"===d?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(Q=>{throw"auth/multi-factor-auth-required"===Q.code?yr._fromErrorAndOperation(_,Q,d,E):Q})}function va(_){return new Set(_.map(({providerId:d})=>d).filter(d=>!!d))}function Vs(){return Vs=(0,w.Z)(function*(_,d){const p=(0,q.m9)(_);yield vr(!0,p,d);const{providerUserInfo:E}=yield function _n(_,d){return Ut.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[d]}),U=va(E||[]);return p.providerData=p.providerData.filter(Q=>U.has(Q.providerId)),U.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),Vs.apply(this,arguments)}function ra(_,d){return ku.apply(this,arguments)}function ku(){return(ku=(0,w.Z)(function*(_,d,p=!1){const E=yield _r(_,d._linkToIdToken(_.auth,yield _.getIdToken()),p);return Ti._forOperation(_,"link",E)})).apply(this,arguments)}function vr(_,d,p){return ja.apply(this,arguments)}function ja(){return(ja=(0,w.Z)(function*(_,d,p){yield Lr(d);const U=!1===_?"provider-already-linked":"no-such-provider";fe(va(d.providerData).has(p)===_,d.auth,U)})).apply(this,arguments)}function Fu(_,d){return ia.apply(this,arguments)}function ia(){return(ia=(0,w.Z)(function*(_,d,p=!1){const{auth:E}=_,U="reauthenticate";try{const Q=yield _r(_,ya(E,U,d,_),p);fe(Q.idToken,E,"internal-error");const pe=Zi(Q.idToken);fe(pe,E,"internal-error");const{sub:ke}=pe;return fe(_.uid===ke,E,"user-mismatch"),Ti._forOperation(_,U,Q)}catch(Q){throw"auth/user-not-found"===Q?.code&&Ve(E,"user-mismatch"),Q}})).apply(this,arguments)}function sl(_,d){return sa.apply(this,arguments)}function sa(){return(sa=(0,w.Z)(function*(_,d,p=!1){const E="signIn",U=yield ya(_,E,d),Q=yield Ti._fromIdTokenResponse(_,E,U);return p||(yield _._updateCurrentUser(Q.user)),Q})).apply(this,arguments)}function Fo(_,d){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,w.Z)(function*(_,d){return sl(xn(_),d)})).apply(this,arguments)}function Us(_,d){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,w.Z)(function*(_,d){const p=(0,q.m9)(_);return yield vr(!1,p,d.providerId),ra(p,d)})).apply(this,arguments)}function Ci(_,d){return ds.apply(this,arguments)}function ds(){return(ds=(0,w.Z)(function*(_,d){return Fu((0,q.m9)(_),d)})).apply(this,arguments)}function sr(){return(sr=(0,w.Z)(function*(_,d){return St(_,"POST","/v1/accounts:signInWithCustomToken",Ae(_,d))})).apply(this,arguments)}function bs(){return bs=(0,w.Z)(function*(_,d){const p=xn(_),E=yield function $a(_,d){return sr.apply(this,arguments)}(p,{token:d,returnSecureToken:!0}),U=yield Ti._fromIdTokenResponse(p,"signIn",E);return yield p._updateCurrentUser(U.user),U}),bs.apply(this,arguments)}class pi{constructor(d,p){this.factorId=d,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(d,p){return"phoneInfo"in p?Ea._fromServerResponse(d,p):"totpInfo"in p?Vo._fromServerResponse(d,p):Ve(d,"internal-error")}}class Ea extends pi{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,p){return new Ea(p)}}class Vo extends pi{constructor(d){super("totp",d)}static _fromServerResponse(d,p){return new Vo(p)}}function oa(_,d,p){var E;fe((null===(E=p.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),fe(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),d.continueUrl=p.url,d.dynamicLinkDomain=p.dynamicLinkDomain,d.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(fe(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),d.iOSBundleId=p.iOS.bundleId),p.android&&(fe(p.android.packageName.length>0,_,"missing-android-pkg-name"),d.androidInstallApp=p.android.installApp,d.androidMinimumVersionCode=p.android.minimumVersion,d.androidPackageName=p.android.packageName)}function Bs(_){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,w.Z)(function*(_){const d=xn(_);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function eo(){return(eo=(0,w.Z)(function*(_,d,p){const E=xn(_),U={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};p&&oa(E,U,p),yield Mi(E,U,"getOobCode",cr)})).apply(this,arguments)}function wa(){return wa=(0,w.Z)(function*(_,d,p){yield La((0,q.m9)(_),{oobCode:d,newPassword:p}).catch(function(){var E=(0,w.Z)(function*(U){throw"auth/password-does-not-meet-requirements"===U.code&&Bs(_),U});return function(U){return E.apply(this,arguments)}}())}),wa.apply(this,arguments)}function To(){return To=(0,w.Z)(function*(_,d){yield function Ni(_,d){return Ys.apply(this,arguments)}((0,q.m9)(_),{oobCode:d})}),To.apply(this,arguments)}function aa(_,d){return hs.apply(this,arguments)}function hs(){return(hs=(0,w.Z)(function*(_,d){const p=(0,q.m9)(_),E=yield La(p,{oobCode:d}),U=E.requestType;switch(fe(U,p,"internal-error"),U){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":fe(E.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":fe(E.mfaInfo,p,"internal-error");default:fe(E.email,p,"internal-error")}let Q=null;return E.mfaInfo&&(Q=pi._fromServerResponse(xn(p),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:Q},operation:U}})).apply(this,arguments)}function Wr(){return(Wr=(0,w.Z)(function*(_,d){const{data:p}=yield aa((0,q.m9)(_),d);return p.email})).apply(this,arguments)}function Ss(){return(Ss=(0,w.Z)(function*(_,d,p){const E=xn(_),pe=yield Mi(E,{returnSecureToken:!0,email:d,password:p,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_a).catch(et=>{throw"auth/password-does-not-meet-requirements"===et.code&&Bs(_),et}),ke=yield Ti._fromIdTokenResponse(E,"signIn",pe);return yield E._updateCurrentUser(ke.user),ke})).apply(this,arguments)}function Ga(){return(Ga=(0,w.Z)(function*(_,d,p){const E=xn(_),U={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function Q(pe,ke){fe(ke.handleCodeInApp,E,"argument-error"),ke&&oa(E,pe,ke)})(U,p),yield Mi(E,U,"getOobCode",cn)})).apply(this,arguments)}function ua(){return(ua=(0,w.Z)(function*(_,d,p){const E=(0,q.m9)(_),U=cs.credentialWithLink(d,p||Hn());return fe(U._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Fo(E,U)})).apply(this,arguments)}function to(){return(to=(0,w.Z)(function*(_,d){return Ue(_,"POST","/v1/accounts:createAuthUri",Ae(_,d))})).apply(this,arguments)}function $i(){return $i=(0,w.Z)(function*(_,d){const E={identifier:d,continueUri:un()?Hn():"http://localhost"},{signinMethods:U}=yield function Lu(_,d){return to.apply(this,arguments)}((0,q.m9)(_),E);return U||[]}),$i.apply(this,arguments)}function S(){return S=(0,w.Z)(function*(_,d){const p=(0,q.m9)(_),U={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};d&&oa(p.auth,U,d);const{email:Q}=yield function ws(_,d){return Ts.apply(this,arguments)}(p.auth,U);Q!==_.email&&(yield _.reload())}),S.apply(this,arguments)}function L(){return L=(0,w.Z)(function*(_,d,p){const E=(0,q.m9)(_),Q={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:d};p&&oa(E.auth,Q,p);const{email:pe}=yield function qr(_,d){return Io.apply(this,arguments)}(E.auth,Q);pe!==_.email&&(yield _.reload())}),L.apply(this,arguments)}function de(){return(de=(0,w.Z)(function*(_,d){return Ue(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function M(){return M=(0,w.Z)(function*(_,{displayName:d,photoURL:p}){if(void 0===d&&void 0===p)return;const E=(0,q.m9)(_),Q={idToken:yield E.getIdToken(),displayName:d,photoUrl:p,returnSecureToken:!0},pe=yield _r(E,function G(_,d){return de.apply(this,arguments)}(E.auth,Q));E.displayName=pe.displayName||null,E.photoURL=pe.photoUrl||null;const ke=E.providerData.find(({providerId:et})=>"password"===et);ke&&(ke.displayName=E.displayName,ke.photoURL=E.photoURL),yield E._updateTokensIfNecessary(pe)}),M.apply(this,arguments)}function B(_,d,p){return X.apply(this,arguments)}function X(){return X=(0,w.Z)(function*(_,d,p){const{auth:E}=_,Q={idToken:yield _.getIdToken(),returnSecureToken:!0};d&&(Q.email=d),p&&(Q.password=p);const pe=yield _r(_,function zr(_,d){return Ns.apply(this,arguments)}(E,Q));yield _._updateTokensIfNecessary(pe,!0)}),X.apply(this,arguments)}class ot{constructor(d,p,E={}){this.isNewUser=d,this.providerId=p,this.profile=E}}class nn extends ot{constructor(d,p,E,U){super(d,p,E),this.username=U}}class Wn extends ot{constructor(d,p){super(d,"facebook.com",p)}}class Kr extends nn{constructor(d,p){super(d,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Di extends ot{constructor(d,p){super(d,"google.com",p)}}class Xr extends nn{constructor(d,p,E){super(d,"twitter.com",p,E)}}function zi(_){const{user:d,_tokenResponse:p}=_;return d.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function $e(_){var d,p;if(!_)return null;const{providerId:E}=_,U=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},Q=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&_?.idToken){const pe=null===(p=null===(d=Zi(_.idToken))||void 0===d?void 0:d.firebase)||void 0===p?void 0:p.sign_in_provider;if(pe)return new ot(Q,"anonymous"!==pe&&"custom"!==pe?pe:null)}if(!E)return null;switch(E){case"facebook.com":return new Wn(Q,U);case"github.com":return new Kr(Q,U);case"google.com":return new Di(Q,U);case"twitter.com":return new Xr(Q,U,_.screenName||null);case"custom":case"anonymous":return new ot(Q,null);default:return new ot(Q,E,U)}}(p)}class qi{constructor(d,p,E){this.type=d,this.credential=p,this.user=E}static _fromIdtoken(d,p){return new qi("enroll",d,p)}static _fromMfaPendingCredential(d){return new qi("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var p,E;if(d?.multiFactorSession){if(null!==(p=d.multiFactorSession)&&void 0!==p&&p.pendingCredential)return qi._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(E=d.multiFactorSession)&&void 0!==E&&E.idToken)return qi._fromIdtoken(d.multiFactorSession.idToken)}return null}}class js{constructor(d,p,E){this.session=d,this.hints=p,this.signInResolver=E}static _fromError(d,p){const E=xn(d),U=p.customData._serverResponse,Q=(U.mfaInfo||[]).map(ke=>pi._fromServerResponse(E,ke));fe(U.mfaPendingCredential,E,"internal-error");const pe=qi._fromMfaPendingCredential(U.mfaPendingCredential);return new js(pe,Q,function(){var ke=(0,w.Z)(function*(et){const Ot=yield et._process(E,pe);delete U.mfaInfo,delete U.mfaPendingCredential;const Zt=Object.assign(Object.assign({},U),{idToken:Ot.idToken,refreshToken:Ot.refreshToken});switch(p.operationType){case"signIn":const zt=yield Ti._fromIdTokenResponse(E,p.operationType,Zt);return yield E._updateCurrentUser(zt.user),zt;case"reauthenticate":return fe(p.user,E,"internal-error"),Ti._forOperation(p.user,p.operationType,Zt);default:Ve(E,"internal-error")}});return function(et){return ke.apply(this,arguments)}}())}resolveSignIn(d){var p=this;return(0,w.Z)(function*(){return p.signInResolver(d)})()}}class Bt{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(E=>pi._fromServerResponse(d.auth,E)))})}static _fromUser(d){return new Bt(d)}getSession(){var d=this;return(0,w.Z)(function*(){return qi._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,p){var E=this;return(0,w.Z)(function*(){const U=d,Q=yield E.getSession(),pe=yield _r(E.user,U._process(E.user.auth,Q,p));return yield E.user._updateTokensIfNecessary(pe),E.user.reload()})()}unenroll(d){var p=this;return(0,w.Z)(function*(){const E="string"==typeof d?d:d.uid,U=yield p.user.getIdToken();try{const Q=yield _r(p.user,function Lt(_,d){return Ue(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Ae(_,d))}(p.user.auth,{idToken:U,mfaEnrollmentId:E}));p.enrolledFactors=p.enrolledFactors.filter(({uid:pe})=>pe!==E),yield p.user._updateTokensIfNecessary(Q),yield p.user.reload()}catch(Q){throw Q}})()}}const an=new WeakMap,qe="__sak";class Qe{constructor(d,p){this.storageRetriever=d,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(qe,"1"),this.storage.removeItem(qe),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,p){return this.storage.setItem(d,JSON.stringify(p)),Promise.resolve()}_get(d){const p=this.storage.getItem(d);return Promise.resolve(p?JSON.parse(p):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const Za=(()=>{class _ extends Qe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,E)=>this.onStorageEvent(p,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Cr(){const _=(0,q.z$)();return yo(_)||Wt(_)}()&&function ti(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=qn(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const E of Object.keys(this.listeners)){const U=this.storage.getItem(E),Q=this.localCache[E];U!==Q&&p(E,Q,U)}}onStorageEvent(p,E=!1){if(!p.key)return void this.forAllChangedKeys((ke,et,Ot)=>{this.notifyListeners(ke,Ot)});const U=p.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ke=this.storage.getItem(U);if(p.newValue!==ke)null!==p.newValue?this.storage.setItem(U,p.newValue):this.storage.removeItem(U);else if(this.localCache[U]===p.newValue&&!E)return}const Q=()=>{const ke=this.storage.getItem(U);!E&&this.localCache[U]===ke||this.notifyListeners(U,ke)},pe=this.storage.getItem(U);!function Gn(){return(0,q.w1)()&&10===document.documentMode}()||pe===p.newValue||p.newValue===p.oldValue?Q():setTimeout(Q,10)}notifyListeners(p,E){this.localCache[p]=E;const U=this.listeners[p];if(U)for(const Q of Array.from(U))Q(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,E,U)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:E,newValue:U}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,E){var U=()=>super._set,Q=this;return(0,w.Z)(function*(){yield U().call(Q,p,E),Q.localCache[p]=JSON.stringify(E)})()}_get(p){var E=()=>super._get,U=this;return(0,w.Z)(function*(){const Q=yield E().call(U,p);return U.localCache[p]=JSON.stringify(Q),Q})()}_remove(p){var E=()=>super._remove,U=this;return(0,w.Z)(function*(){yield E().call(U,p),delete U.localCache[p]})()}}return _.type="LOCAL",_})(),Hs=(()=>{class _ extends Qe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,E){}_removeListener(p,E){}}return _.type="SESSION",_})();let Ac=(()=>{class _{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const E=this.receivers.find(Q=>Q.isListeningto(p));if(E)return E;const U=new _(p);return this.receivers.push(U),U}isListeningto(p){return this.eventTarget===p}handleEvent(p){var E=this;return(0,w.Z)(function*(){const U=p,{eventId:Q,eventType:pe,data:ke}=U.data,et=E.handlersMap[pe];if(!et?.size)return;U.ports[0].postMessage({status:"ack",eventId:Q,eventType:pe});const Ot=Array.from(et).map(function(){var zt=(0,w.Z)(function*(kr){return kr(U.origin,ke)});return function(kr){return zt.apply(this,arguments)}}()),Zt=yield function Bu(_){return Promise.all(_.map(function(){var d=(0,w.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(E){return{fulfilled:!1,reason:E}}});return function(p){return d.apply(this,arguments)}}()))}(Ot);U.ports[0].postMessage({status:"done",eventId:Q,eventType:pe,response:Zt})})()}_subscribe(p,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(E)}_unsubscribe(p,E){this.handlersMap[p]&&E&&this.handlersMap[p].delete(E),(!E||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function rt(_="",d=10){let p="";for(let E=0;E<d;E++)p+=Math.floor(10*Math.random());return _+p}class Yn{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,p,E=50){var U=this;return(0,w.Z)(function*(){const Q=typeof MessageChannel<"u"?new MessageChannel:null;if(!Q)throw new Error("connection_unavailable");let pe,ke;return new Promise((et,Ot)=>{const Zt=rt("",20);Q.port1.start();const zt=setTimeout(()=>{Ot(new Error("unsupported_event"))},E);ke={messageChannel:Q,onMessage(kr){const Na=kr;if(Na.data.eventId===Zt)switch(Na.data.status){case"ack":clearTimeout(zt),pe=setTimeout(()=>{Ot(new Error("timeout"))},3e3);break;case"done":clearTimeout(pe),et(Na.data.response);break;default:clearTimeout(zt),clearTimeout(pe),Ot(new Error("invalid_response"))}}},U.handlers.add(ke),Q.port1.addEventListener("message",ke.onMessage),U.target.postMessage({eventType:d,eventId:Zt,data:p},[Q.port2])}).finally(()=>{ke&&U.removeMessageHandler(ke)})})()}}function ii(){return window}function Kn(){return typeof ii().WorkerGlobalScope<"u"&&"function"==typeof ii().importScripts}function Er(){return(Er=(0,w.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Un="firebaseLocalStorageDb",xr="firebaseLocalStorage",Et="fbase_key";class Zr{constructor(d){this.request=d}toPromise(){return new Promise((d,p)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function $s(_,d){return _.transaction([xr],d?"readwrite":"readonly").objectStore(xr)}function Ao(){const _=indexedDB.open(Un,1);return new Promise((d,p)=>{_.addEventListener("error",()=>{p(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(xr,{keyPath:Et})}catch(U){p(U)}}),_.addEventListener("success",(0,w.Z)(function*(){const E=_.result;E.objectStoreNames.contains(xr)?d(E):(E.close(),yield function Aa(){const _=indexedDB.deleteDatabase(Un);return new Zr(_).toPromise()}(),d(yield Ao()))}))})}function Ai(_,d,p){return ll.apply(this,arguments)}function ll(){return(ll=(0,w.Z)(function*(_,d,p){const E=$s(_,!0).put({[Et]:d,value:p});return new Zr(E).toPromise()})).apply(this,arguments)}function Pl(){return(Pl=(0,w.Z)(function*(_,d){const p=$s(_,!1).get(d),E=yield new Zr(p).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function cl(_,d){const p=$s(_,!0).delete(d);return new Zr(p).toPromise()}const D=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,w.Z)(function*(){return p.db||(p.db=yield Ao()),p.db})()}_withRetries(p){var E=this;return(0,w.Z)(function*(){let U=0;for(;;)try{const Q=yield E._openDb();return yield p(Q)}catch(Q){if(U++>3)throw Q;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,w.Z)(function*(){return Kn()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,w.Z)(function*(){p.receiver=Ac._getInstance(function Qa(){return Kn()?self:null}()),p.receiver._subscribe("keyChanged",function(){var E=(0,w.Z)(function*(U,Q){return{keyProcessed:(yield p._poll()).includes(Q.key)}});return function(U,Q){return E.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var E=(0,w.Z)(function*(U,Q){return["keyChanged"]});return function(U,Q){return E.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,w.Z)(function*(){var E,U;if(p.activeServiceWorker=yield function Rl(){return Er.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Yn(p.activeServiceWorker);const Q=yield p.sender._send("ping",{},800);Q&&null!==(E=Q[0])&&void 0!==E&&E.fulfilled&&null!==(U=Q[0])&&void 0!==U&&U.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var E=this;return(0,w.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function $t(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:p},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,w.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Ao();return yield Ai(p,qe,"1"),yield cl(p,qe),!0}catch{}return!1})()}_withPendingWrite(p){var E=this;return(0,w.Z)(function*(){E.pendingWrites++;try{yield p()}finally{E.pendingWrites--}})()}_set(p,E){var U=this;return(0,w.Z)(function*(){return U._withPendingWrite((0,w.Z)(function*(){return yield U._withRetries(Q=>Ai(Q,p,E)),U.localCache[p]=E,U.notifyServiceWorker(p)}))})()}_get(p){var E=this;return(0,w.Z)(function*(){const U=yield E._withRetries(Q=>function Ya(_,d){return Pl.apply(this,arguments)}(Q,p));return E.localCache[p]=U,U})()}_remove(p){var E=this;return(0,w.Z)(function*(){return E._withPendingWrite((0,w.Z)(function*(){return yield E._withRetries(U=>cl(U,p)),delete E.localCache[p],E.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,w.Z)(function*(){const E=yield p._withRetries(pe=>{const ke=$s(pe,!1).getAll();return new Zr(ke).toPromise()});if(!E)return[];if(0!==p.pendingWrites)return[];const U=[],Q=new Set;for(const{fbase_key:pe,value:ke}of E)Q.add(pe),JSON.stringify(p.localCache[pe])!==JSON.stringify(ke)&&(p.notifyListeners(pe,ke),U.push(pe));for(const pe of Object.keys(p.localCache))p.localCache[pe]&&!Q.has(pe)&&(p.notifyListeners(pe,null),U.push(pe));return U})()}notifyListeners(p,E){this.localCache[p]=E;const U=this.listeners[p];if(U)for(const Q of Array.from(U))Q(E)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,w.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})(),ae=1e12;class Be{constructor(d){this.auth=d,this.counter=ae,this._widgets=new Map}render(d,p){const E=this.counter;return this._widgets.set(E,new Le(d,this.auth.name,p||{})),this.counter++,E}reset(d){var p;const E=d||ae;null===(p=this._widgets.get(E))||void 0===p||p.delete(),this._widgets.delete(E)}getResponse(d){var p;return(null===(p=this._widgets.get(d||ae))||void 0===p?void 0:p.getResponse())||""}execute(d){var p=this;return(0,w.Z)(function*(){var E;return null===(E=p._widgets.get(d||ae))||void 0===E||E.execute(),""})()}}class Le{constructor(d,p,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const U="string"==typeof d?document.getElementById(d):d;fe(U,"argument-error",{appName:p}),this.container=U,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Rt(_){const d=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)d.push(p.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":p}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const dn=Eo("rcb"),Rn=new Dt(3e4,6e4);class rr{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=ii().grecaptcha)||void 0===d||!d.render)}load(d,p=""){return fe(function ju(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(p),d,"argument-error"),this.shouldResolveImmediately(p)&&$n(ii().grecaptcha)?Promise.resolve(ii().grecaptcha):new Promise((E,U)=>{const Q=ii().setTimeout(()=>{U(Te(d,"network-request-failed"))},Rn.get());ii()[dn]=()=>{ii().clearTimeout(Q),delete ii()[dn];const ke=ii().grecaptcha;if(!ke||!$n(ke))return void U(Te(d,"internal-error"));const et=ke.render;ke.render=(Ot,Zt)=>{const zt=et(Ot,Zt);return this.counter++,zt},this.hostLanguage=p,E(ke)},Yi(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:dn,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(Q),U(Te(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var p;return!(null===(p=ii().grecaptcha)||void 0===p||!p.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class bi{load(d){return(0,w.Z)(function*(){return new Be(d)})()}clearedOneInstance(){}}const Bo="recaptcha",no={theme:"light",type:"image"};class Ml{constructor(d,p,E=Object.assign({},no)){this.parameters=E,this.type=Bo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xn(d),this.isInvisible="invisible"===this.parameters.size,fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const U="string"==typeof p?document.getElementById(p):p;fe(U,this.auth,"argument-error"),this.container=U,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bi:new rr,this.validateStartingState()}verify(){var d=this;return(0,w.Z)(function*(){d.assertNotDestroyed();const p=yield d.render(),E=d.getAssertedRecaptcha();return E.getResponse(p)||new Promise(Q=>{const pe=ke=>{ke&&(d.tokenChangeListeners.delete(pe),Q(ke))};d.tokenChangeListeners.add(pe),d.isInvisible&&E.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return p=>{if(this.tokenChangeListeners.forEach(E=>E(p)),"function"==typeof d)d(p);else if("string"==typeof d){const E=ii()[d];"function"==typeof E&&E(p)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,w.Z)(function*(){if(yield d.init(),!d.widgetId){let p=d.container;if(!d.isInvisible){const E=document.createElement("div");p.appendChild(E),p=E}d.widgetId=d.getAssertedRecaptcha().render(p,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,w.Z)(function*(){fe(un()&&!Kn(),d.auth,"internal-error"),yield function ps(){let _=null;return new Promise(d=>{"complete"!==document.readyState?(_=()=>d(),window.addEventListener("load",_)):d()}).catch(d=>{throw _&&window.removeEventListener("load",_),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const p=yield function Fr(_){return er.apply(this,arguments)}(d.auth);fe(p,d.auth,"internal-error"),d.parameters.sitekey=p})()}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class hl{constructor(d,p){this.verificationId=d,this.onConfirmation=p}confirm(d){const p=Hi._fromVerification(this.verificationId,d);return this.onConfirmation(p)}}function po(){return(po=(0,w.Z)(function*(_,d,p){const E=xn(_),U=yield Hu(E,d,(0,q.m9)(p));return new hl(U,Q=>Fo(E,Q))})).apply(this,arguments)}function Ja(){return(Ja=(0,w.Z)(function*(_,d,p){const E=(0,q.m9)(_);yield vr(!1,E,"phone");const U=yield Hu(E.auth,d,(0,q.m9)(p));return new hl(U,Q=>Us(E,Q))})).apply(this,arguments)}function fl(){return(fl=(0,w.Z)(function*(_,d,p){const E=(0,q.m9)(_),U=yield Hu(E.auth,d,(0,q.m9)(p));return new hl(U,Q=>Ci(E,Q))})).apply(this,arguments)}function Hu(_,d,p){return Nl.apply(this,arguments)}function Nl(){return Nl=(0,w.Z)(function*(_,d,p){var E;const U=yield p.verify();try{let Q;if(fe("string"==typeof U,_,"argument-error"),fe(p.type===Bo,_,"argument-error"),Q="string"==typeof d?{phoneNumber:d}:d,"session"in Q){const pe=Q.session;if("phoneNumber"in Q)return fe("enroll"===pe.type,_,"internal-error"),(yield function at(_,d){return Ue(_,"POST","/v2/accounts/mfaEnrollment:start",Ae(_,d))}(_,{idToken:pe.credential,phoneEnrollmentInfo:{phoneNumber:Q.phoneNumber,recaptchaToken:U}})).phoneSessionInfo.sessionInfo;{fe("signin"===pe.type,_,"internal-error");const ke=(null===(E=Q.multiFactorHint)||void 0===E?void 0:E.uid)||Q.multiFactorUid;return fe(ke,_,"missing-multi-factor-info"),(yield function O(_,d){return Ue(_,"POST","/v2/accounts/mfaSignIn:start",Ae(_,d))}(_,{mfaPendingCredential:pe.credential,mfaEnrollmentId:ke,phoneSignInInfo:{recaptchaToken:U}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:pe}=yield function br(_,d){return nr.apply(this,arguments)}(_,{phoneNumber:Q.phoneNumber,recaptchaToken:U});return pe}}finally{p._reset()}}),Nl.apply(this,arguments)}function vu(){return(vu=(0,w.Z)(function*(_,d){yield ra((0,q.m9)(_),d)})).apply(this,arguments)}let Xa=(()=>{class _{constructor(p){this.providerId=_.PROVIDER_ID,this.auth=xn(p)}verifyPhoneNumber(p,E){return Hu(this.auth,p,(0,q.m9)(E))}static credential(p,E){return Hi._fromVerification(p,E)}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:E,temporaryProof:U}=p;return E&&U?Hi._fromTokenResponse(E,U):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function $u(_,d){return d?ht(d):(fe(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class vd extends Oi{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Ht(d,this._buildIdpRequest())}_linkToIdToken(d,p){return Ht(d,this._buildIdpRequest(p))}_getReauthenticationResolver(d){return Ht(d,this._buildIdpRequest())}_buildIdpRequest(d){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(p.idToken=d),p}}function Sc(_){return sl(_.auth,new vd(_),_.bypassAuthState)}function Vf(_){const{auth:d,user:p}=_;return fe(p,d,"internal-error"),Fu(p,new vd(_),_.bypassAuthState)}function Ed(_){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,w.Z)(function*(_){const{auth:d,user:p}=_;return fe(p,d,"internal-error"),ra(p,new vd(_),_.bypassAuthState)})).apply(this,arguments)}class mh{constructor(d,p,E,U,Q=!1){this.auth=d,this.resolver=E,this.user=U,this.bypassAuthState=Q,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var d=this;return new Promise(function(){var p=(0,w.Z)(function*(E,U){d.pendingPromise={resolve:E,reject:U};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(Q){d.reject(Q)}});return function(E,U){return p.apply(this,arguments)}}())}onAuthEvent(d){var p=this;return(0,w.Z)(function*(){const{urlResponse:E,sessionId:U,postBody:Q,tenantId:pe,error:ke,type:et}=d;if(ke)return void p.reject(ke);const Ot={auth:p.auth,requestUri:E,sessionId:U,tenantId:pe||void 0,postBody:Q||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(et)(Ot))}catch(Zt){p.reject(Zt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Sc;case"linkViaPopup":case"linkViaRedirect":return Ed;case"reauthViaPopup":case"reauthViaRedirect":return Vf;default:Ve(this.auth,"internal-error")}}resolve(d){ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _h=new Dt(2e3,1e4);function ba(){return(ba=(0,w.Z)(function*(_,d,p){const E=xn(_);Ye(_,d,es);const U=$u(E,p);return new xl(E,"signInViaPopup",d,U).executeNotNull()})).apply(this,arguments)}function Eu(){return(Eu=(0,w.Z)(function*(_,d,p){const E=(0,q.m9)(_);Ye(E.auth,d,es);const U=$u(E.auth,p);return new xl(E.auth,"reauthViaPopup",d,U,E).executeNotNull()})).apply(this,arguments)}function pl(){return(pl=(0,w.Z)(function*(_,d,p){const E=(0,q.m9)(_);Ye(E.auth,d,es);const U=$u(E.auth,p);return new xl(E.auth,"linkViaPopup",d,U,E).executeNotNull()})).apply(this,arguments)}let xl=(()=>{class _ extends mh{constructor(p,E,U,Q,pe){super(p,E,Q,pe),this.provider=U,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var p=this;return(0,w.Z)(function*(){const E=yield p.execute();return fe(E,p.auth,"internal-error"),E})()}onExecution(){var p=this;return(0,w.Z)(function*(){ct(1===p.filter.length,"Popup operations only handle one event");const E=rt();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],E),p.authWindow.associatedEvent=E,p.resolver._originValidation(p.auth).catch(U=>{p.reject(U)}),p.resolver._isIframeWebStorageSupported(p.auth,U=>{U||p.reject(Te(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const p=()=>{var E,U;this.pollId=null!==(U=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==U&&U.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Te(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,_h.get())};p()}}return _.currentPopupAction=null,_})();const is="pendingRedirect",Ms=new Map;class Sa extends mh{constructor(d,p,E=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,E),this.eventId=null}execute(){var d=()=>super.execute,p=this;return(0,w.Z)(function*(){let E=Ms.get(p.auth._key());if(!E){try{const Q=(yield function ro(_,d){return Dr.apply(this,arguments)}(p.resolver,p.auth))?yield d().call(p):null;E=()=>Promise.resolve(Q)}catch(U){E=()=>Promise.reject(U)}Ms.set(p.auth._key(),E)}return p.bypassAuthState||Ms.set(p.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(d){var p=()=>super.onAuthEvent,E=this;return(0,w.Z)(function*(){if("signInViaRedirect"===d.type)return p().call(E,d);if("unknown"!==d.type){if(d.eventId){const U=yield E.auth._redirectUserForId(d.eventId);if(U)return E.user=U,p().call(E,d);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,w.Z)(function*(){})()}cleanUp(){}}function Dr(){return(Dr=(0,w.Z)(function*(_,d){const p=gs(d),E=tu(_);if(!(yield E._isAvailable()))return!1;const U="true"===(yield E._get(p));return yield E._remove(p),U})).apply(this,arguments)}function eu(_,d){return xi.apply(this,arguments)}function xi(){return(xi=(0,w.Z)(function*(_,d){return tu(_)._set(gs(d),"true")})).apply(this,arguments)}function zu(_,d){Ms.set(_._key(),d)}function tu(_){return ht(_._redirectPersistence)}function gs(_){return Tt(is,_.config.apiKey,_.name)}function Mc(_,d,p){return function Oc(_,d,p){return mi.apply(this,arguments)}(_,d,p)}function mi(){return(mi=(0,w.Z)(function*(_,d,p){const E=xn(_);Ye(_,d,es),yield E._initializationPromise;const U=$u(E,p);return yield eu(U,E),U._openRedirect(E,d,"signInViaRedirect")})).apply(this,arguments)}function Nc(_,d,p){return function ss(_,d,p){return mr.apply(this,arguments)}(_,d,p)}function mr(){return(mr=(0,w.Z)(function*(_,d,p){const E=(0,q.m9)(_);Ye(E.auth,d,es),yield E.auth._initializationPromise;const U=$u(E.auth,p);yield eu(U,E.auth);const Q=yield kl(E);return U._openRedirect(E.auth,d,"reauthViaRedirect",Q)})).apply(this,arguments)}function io(_,d,p){return function Xl(_,d,p){return Iu.apply(this,arguments)}(_,d,p)}function Iu(){return(Iu=(0,w.Z)(function*(_,d,p){const E=(0,q.m9)(_);Ye(E.auth,d,es),yield E.auth._initializationPromise;const U=$u(E.auth,p);yield vr(!1,E,d.providerId),yield eu(U,E.auth);const Q=yield kl(E);return U._openRedirect(E.auth,d,"linkViaRedirect",Q)})).apply(this,arguments)}function wu(){return(wu=(0,w.Z)(function*(_,d){return yield xn(_)._initializationPromise,go(_,d,!1)})).apply(this,arguments)}function go(_,d){return si.apply(this,arguments)}function si(){return(si=(0,w.Z)(function*(_,d,p=!1){const E=xn(_),U=$u(E,d),pe=yield new Sa(E,U,p).execute();return pe&&!p&&(delete pe.user._redirectEventId,yield E._persistUserIfCurrent(pe.user),yield E._setRedirectUser(null,d)),pe})).apply(this,arguments)}function kl(_){return bo.apply(this,arguments)}function bo(){return(bo=(0,w.Z)(function*(_){const d=rt(`${_.uid}:::`);return _._redirectEventId=d,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),d})).apply(this,arguments)}class Gu{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let p=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(d,E)&&(p=!0,this.sendToConsumer(d,E),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function ca(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fl(_);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=d,p=!0)),p}sendToConsumer(d,p){var E;if(d.error&&!Fl(d)){const U=(null===(E=d.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";p.onError(Te(this.auth,U))}else p.onAuthEvent(d)}isEventForConsumer(d,p){const E=null===p.eventId||!!d.eventId&&d.eventId===p.eventId;return p.filter.includes(d.type)&&E}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ra(d))}saveEventToCache(d){this.cachedEventUids.add(Ra(d)),this.lastProcessedEventTime=Date.now()}}function Ra(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(d=>d).join("-")}function Fl({type:_,error:d}){return"unknown"===_&&"auth/no-auth-event"===d?.code}function nu(_){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,w.Z)(function*(_,d={}){return Ue(_,"GET","/v1/projects",d)})).apply(this,arguments)}const da=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ml=/^https?/;function ec(){return(ec=(0,w.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:d}=yield nu(_);for(const p of d)try{if(Id(p))return}catch{}Ve(_,"unauthorized-domain")})).apply(this,arguments)}function Id(_){const d=Hn(),{protocol:p,hostname:E}=new URL(d);if(_.startsWith("chrome-extension://")){const pe=new URL(_);return""===pe.hostname&&""===E?"chrome-extension:"===p&&_.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===p&&pe.hostname===E}if(!ml.test(p))return!1;if(da.test(_))return E===_;const U=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+U+"|"+U+")$","i").test(E)}const xc=new Dt(3e4,6e4);function Ll(){const _=ii().___jsl;if(_?.H)for(const d of Object.keys(_.H))if(_.H[d].r=_.H[d].r||[],_.H[d].L=_.H[d].L||[],_.H[d].r=[..._.H[d].L],_.CP)for(let p=0;p<_.CP.length;p++)_.CP[p]=null}let kc=null;const wd=new Dt(5e3,15e3),ru="__/auth/iframe",ms="emulator/auth/iframe",Td={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qu(_){const d=_.config;fe(d.authDomain,_,"auth-domain-config-required");const p=d.emulator?me(d,ms):`https://${_.config.authDomain}/${ru}`,E={apiKey:d.apiKey,appName:_.name,v:De.SDK_VERSION},U=Mn.get(_.config.apiHost);U&&(E.eid=U);const Q=_._getFrameworks();return Q.length&&(E.fw=Q.join(",")),`${p}?${(0,q.xO)(E).slice(1)}`}function tc(){return tc=(0,w.Z)(function*(_){const d=yield function Uf(_){return kc=kc||function vh(_){return new Promise((d,p)=>{var E,U,Q;function pe(){Ll(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Ll(),p(Te(_,"network-request-failed"))},timeout:xc.get()})}if(null!==(U=null===(E=ii().gapi)||void 0===E?void 0:E.iframes)&&void 0!==U&&U.Iframe)d(gapi.iframes.getContext());else{if(null===(Q=ii().gapi)||void 0===Q||!Q.load){const ke=Eo("iframefcb");return ii()[ke]=()=>{gapi.load?pe():p(Te(_,"network-request-failed"))},Yi(`https://apis.google.com/js/api.js?onload=${ke}`).catch(et=>p(et))}pe()}}).catch(d=>{throw kc=null,d})}(_),kc}(_),p=ii().gapi;return fe(p,_,"internal-error"),d.open({where:document.body,url:qu(_),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Td,dontclear:!0},E=>new Promise(function(){var U=(0,w.Z)(function*(Q,pe){yield E.restyle({setHideOnLeave:!1});const ke=Te(_,"network-request-failed"),et=ii().setTimeout(()=>{pe(ke)},wd.get());function Ot(){ii().clearTimeout(et),Q(E)}E.ping(Ot).then(Ot,()=>{pe(ke)})});return function(Q,pe){return U.apply(this,arguments)}}()))}),tc.apply(this,arguments)}const zs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class T{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const re="__/auth/handler",se="emulator/auth/handler",_e=encodeURIComponent("fac");function Me(_,d,p,E,U,Q){return it.apply(this,arguments)}function it(){return(it=(0,w.Z)(function*(_,d,p,E,U,Q){fe(_.config.authDomain,_,"auth-domain-config-required"),fe(_.config.apiKey,_,"invalid-api-key");const pe={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:E,v:De.SDK_VERSION,eventId:U};if(d instanceof es){d.setDefaultLanguage(_.languageCode),pe.providerId=d.providerId||"",(0,q.xb)(d.getCustomParameters())||(pe.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Zt,zt]of Object.entries(Q||{}))pe[Zt]=zt}if(d instanceof hi){const Zt=d.getScopes().filter(zt=>""!==zt);Zt.length>0&&(pe.scopes=Zt.join(","))}_.tenantId&&(pe.tid=_.tenantId);const ke=pe;for(const Zt of Object.keys(ke))void 0===ke[Zt]&&delete ke[Zt];const et=yield _._getAppCheckToken(),Ot=et?`#${_e}=${encodeURIComponent(et)}`:"";return`${function _t({config:_}){return _.emulator?me(_,se):`https://${_.authDomain}/${re}`}(_)}?${(0,q.xO)(ke).slice(1)}${Ot}`})).apply(this,arguments)}const tn="webStorageSupport",Pt=class Yt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hs,this._completeRedirectFn=go,this._overrideRedirectResult=zu}_openPopup(d,p,E,U){var Q=this;return(0,w.Z)(function*(){var pe;ct(null===(pe=Q.eventManagers[d._key()])||void 0===pe?void 0:pe.manager,"_initialize() not called before _openPopup()");const ke=yield Me(d,p,E,Hn(),U);return function F(_,d,p,E=500,U=600){const Q=Math.max((window.screen.availHeight-U)/2,0).toString(),pe=Math.max((window.screen.availWidth-E)/2,0).toString();let ke="";const et=Object.assign(Object.assign({},zs),{width:E.toString(),height:U.toString(),top:Q,left:pe}),Ot=(0,q.z$)().toLowerCase();p&&(ke=ka(Ot)?"_blank":p),Ei(Ot)&&(d=d||"http://localhost",et.scrollbars="yes");const Zt=Object.entries(et).reduce((kr,[Na,Nd])=>`${kr}${Na}=${Nd},`,"");if(function Xt(_=(0,q.z$)()){var d;return Wt(_)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Ot)&&"_self"!==ke)return function $(_,d){const p=document.createElement("a");p.href=_,p.target=d;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(E)}(d||"",ke),new T(null);const zt=window.open(d||"",ke,Zt);fe(zt,_,"popup-blocked");try{zt.focus()}catch{}return new T(zt)}(d,ke,rt())})()}_openRedirect(d,p,E,U){var Q=this;return(0,w.Z)(function*(){return yield Q._originValidation(d),function En(_){ii().location.href=_}(yield Me(d,p,E,Hn(),U)),new Promise(()=>{})})()}_initialize(d){const p=d._key();if(this.eventManagers[p]){const{manager:U,promise:Q}=this.eventManagers[p];return U?Promise.resolve(U):(ct(Q,"If manager is not set, promise should be"),Q)}const E=this.initAndGetManager(d);return this.eventManagers[p]={promise:E},E.catch(()=>{delete this.eventManagers[p]}),E}initAndGetManager(d){var p=this;return(0,w.Z)(function*(){const E=yield function Vl(_){return tc.apply(this,arguments)}(d),U=new Gu(d);return E.register("authEvent",Q=>(fe(Q?.authEvent,d,"invalid-auth-event"),{status:U.onEvent(Q.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[d._key()]={manager:U},p.iframes[d._key()]=E,U})()}_isIframeWebStorageSupported(d,p){this.iframes[d._key()].send(tn,{type:tn},U=>{var Q;const pe=null===(Q=U?.[0])||void 0===Q?void 0:Q[tn];void 0!==pe&&p(!!pe),Ve(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Pa(_){return ec.apply(this,arguments)}(d)),this.originValidationPromises[p]}get _shouldInitProactively(){return qn()||yo()||Wt()}};class on{constructor(d){this.factorId=d}_process(d,p,E){switch(p.type){case"enroll":return this._finalizeEnroll(d,p.credential,E);case"signin":return this._finalizeSignIn(d,p.credential);default:return Qt("unexpected MultiFactorSessionType")}}}class In extends on{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new In(d)}_finalizeEnroll(d,p,E){return function gr(_,d){return Ue(_,"POST","/v2/accounts/mfaEnrollment:finalize",Ae(_,d))}(d,{idToken:p,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,p){return function I(_,d){return Ue(_,"POST","/v2/accounts/mfaSignIn:finalize",Ae(_,d))}(d,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Sr=(()=>{class _{constructor(){}static assertion(p){return In._fromCredential(p)}}return _.FACTOR_ID="phone",_})();var Si="@firebase/auth";class _s{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var p=this;return(0,w.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const p=this.auth.onIdTokenChanged(E=>{d(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,p),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const p=this.internalListeners.get(d);p&&(this.internalListeners.delete(d),p(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Mt(){return window}(0,q.Pz)("authIdTokenMaxAge"),function $o(_){(0,De._registerComponent)(new Pe.wA("auth",(d,{options:p})=>{const E=d.getProvider("app").getImmediate(),U=d.getProvider("heartbeat"),Q=d.getProvider("app-check-internal"),{apiKey:pe,authDomain:ke}=E.options;fe(pe&&!pe.includes(":"),"invalid-api-key",{appName:E.name});const et={apiKey:pe,authDomain:ke,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jr(_)},Ot=new Qo(E,U,Q,et);return function li(_,d){const p=d?.persistence||[],E=(Array.isArray(p)?p:[p]).map(ht);d?.errorMap&&_._updateErrorMap(d.errorMap),_._initializeWithPersistence(E,d?.popupRedirectResolver)}(Ot,p),Ot},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,p,E)=>{d.getProvider("auth-internal").initialize()})),(0,De._registerComponent)(new Pe.wA("auth-internal",d=>{const p=xn(d.getProvider("auth").getImmediate());return new _s(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,De.registerVersion)(Si,"1.4.0",function so(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,De.registerVersion)(Si,"1.4.0","esm2017")}("Browser");function jn(){return jn=(0,w.Z)(function*(_,d,p){var E;const{BuildInfo:U}=Mt();ct(d.sessionId,"AuthEvent did not contain a session ID");const Q=yield function Lc(_){return ys.apply(this,arguments)}(d.sessionId),pe={};return Wt()?pe.ibi=U.packageName:Oe()?pe.apn=U.packageName:Ve(_,"operation-not-supported-in-this-environment"),U.displayName&&(pe.appDisplayName=U.displayName),pe.sessionId=Q,Me(_,p,d.type,void 0,null!==(E=d.eventId)&&void 0!==E?E:void 0,pe)}),jn.apply(this,arguments)}function oo(){return(oo=(0,w.Z)(function*(_){const{BuildInfo:d}=Mt(),p={};Wt()?p.iosBundleId=d.packageName:Oe()?p.androidPackageName=d.packageName:Ve(_,"operation-not-supported-in-this-environment"),yield nu(_,p)})).apply(this,arguments)}function Pr(){return(Pr=(0,w.Z)(function*(_,d,p){const{cordova:E}=Mt();let U=()=>{};try{yield new Promise((Q,pe)=>{let ke=null;function et(){var zt;Q();const kr=null===(zt=E.plugins.browsertab)||void 0===zt?void 0:zt.close;"function"==typeof kr&&kr(),"function"==typeof p?.close&&p.close()}function Ot(){ke||(ke=window.setTimeout(()=>{pe(Te(_,"redirect-cancelled-by-user"))},2e3))}function Zt(){"visible"===document?.visibilityState&&Ot()}d.addPassiveListener(et),document.addEventListener("resume",Ot,!1),Oe()&&document.addEventListener("visibilitychange",Zt,!1),U=()=>{d.removePassiveListener(et),document.removeEventListener("resume",Ot,!1),document.removeEventListener("visibilitychange",Zt,!1),ke&&window.clearTimeout(ke)}})}finally{U()}})).apply(this,arguments)}function ys(){return(ys=(0,w.Z)(function*(_){const d=function Gs(_){if(ct(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const d=new ArrayBuffer(_.length),p=new Uint8Array(d);for(let E=0;E<_.length;E++)p[E]=_.charCodeAt(E);return p}(_),p=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(p)).map(U=>U.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class vs extends Gu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(d)),super.onEvent(d)}initialized(){var d=this;return(0,w.Z)(function*(){yield d.initPromise})()}}function Eh(_){return zo.apply(this,arguments)}function zo(){return(zo=(0,w.Z)(function*(_){const d=yield Bc()._get(Bf(_));return d&&(yield Bc()._remove(Bf(_))),d})).apply(this,arguments)}function Cd(){const _=[];for(let p=0;p<20;p++){const E=Math.floor(62*Math.random());_.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(E))}return _.join("")}function Bc(){return ht(Za)}function Bf(_){return Tt("authEvent",_.config.apiKey,_.name)}function jc(_){if(!_?.includes("?"))return{};const[d,...p]=_.split("?");return(0,q.zd)(p.join("?"))}const Hc=class jf{constructor(){this._redirectPersistence=Hs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=go,this._overrideRedirectResult=zu}_initialize(d){var p=this;return(0,w.Z)(function*(){const E=d._key();let U=p.eventManagers.get(E);return U||(U=new vs(d),p.eventManagers.set(E,U),p.attachCallbackListeners(d,U)),U})()}_openPopup(d){Ve(d,"operation-not-supported-in-this-environment")}_openRedirect(d,p,E,U){var Q=this;return(0,w.Z)(function*(){!function yl(_){var d,p,E,U,Q,pe,ke,et,Ot,Zt;const zt=Mt();fe("function"==typeof(null===(d=zt?.universalLinks)||void 0===d?void 0:d.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),fe(typeof(null===(p=zt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),fe("function"==typeof(null===(Q=null===(U=null===(E=zt?.cordova)||void 0===E?void 0:E.plugins)||void 0===U?void 0:U.browsertab)||void 0===Q?void 0:Q.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fe("function"==typeof(null===(et=null===(ke=null===(pe=zt?.cordova)||void 0===pe?void 0:pe.plugins)||void 0===ke?void 0:ke.browsertab)||void 0===et?void 0:et.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fe("function"==typeof(null===(Zt=null===(Ot=zt?.cordova)||void 0===Ot?void 0:Ot.InAppBrowser)||void 0===Zt?void 0:Zt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const pe=yield Q._initialize(d);yield pe.initialized(),pe.resetRedirect(),function Ir(){Ms.clear()}(),yield Q._originValidation(d);const ke=function Vc(_,d,p=null){return{type:d,eventId:p,urlResponse:null,sessionId:Cd(),postBody:null,tenantId:_.tenantId,error:Te(_,"no-auth-event")}}(d,E,U);yield function Uc(_,d){return Bc()._set(Bf(_),d)}(d,ke);const et=yield function vn(_,d,p){return jn.apply(this,arguments)}(d,ke,p),Ot=yield function mo(_){const{cordova:d}=Mt();return new Promise(p=>{d.plugins.browsertab.isAvailable(E=>{let U=null;E?d.plugins.browsertab.openUrl(_):U=d.InAppBrowser.open(_,function It(_=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),p(U)})})}(et);return function Po(_,d,p){return Pr.apply(this,arguments)}(d,pe,Ot)})()}_isIframeWebStorageSupported(d,p){throw new Error("Method not implemented.")}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function ki(_){return oo.apply(this,arguments)}(d)),this.originValidationPromises[p]}attachCallbackListeners(d,p){const{universalLinks:E,handleOpenURL:U,BuildInfo:Q}=Mt(),pe=setTimeout((0,w.Z)(function*(){yield Eh(d),p.onEvent(vl())}),500),ke=function(){var Zt=(0,w.Z)(function*(zt){clearTimeout(pe);const kr=yield Eh(d);let Na=null;kr&&zt?.url&&(Na=function Ig(_,d){var p,E;const U=function b_(_){const d=jc(_),p=d.link?decodeURIComponent(d.link):void 0,E=jc(p).link,U=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return jc(U).link||U||E||p||_}(d);if(U.includes("/__/auth/callback")){const Q=jc(U),pe=Q.firebaseError?function kn(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(Q.firebaseError)):null,ke=null===(E=null===(p=pe?.code)||void 0===p?void 0:p.split("auth/"))||void 0===E?void 0:E[1],et=ke?Te(ke):null;return et?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:et,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:U,postBody:null}}return null}(kr,zt.url)),p.onEvent(Na||vl())});return function(kr){return Zt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,ke);const et=U,Ot=`${Q.packageName.toLowerCase()}://`;Mt().handleOpenURL=function(){var Zt=(0,w.Z)(function*(zt){if(zt.toLowerCase().startsWith(Ot)&&ke({url:zt}),"function"==typeof et)try{et(zt)}catch(kr){console.error(kr)}});return function(zt){return Zt.apply(this,arguments)}}()}};function vl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Te("no-auth-event")}}function Ma(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function su(_=(0,q.z$)()){return!("file:"!==Ma()&&"ionic:"!==Ma()&&"capacitor:"!==Ma()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function nc(){try{const _=self.localStorage,d=rt();if(_)return _.setItem(d,"1"),_.removeItem(d),!function Gf(_=(0,q.z$)()){return function Ku(){return(0,q.w1)()&&11===document?.documentMode}()||function zf(_=(0,q.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,q.hl)()}catch{return Dd()&&(0,q.hl)()}return!1}function Dd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function zc(){return(function wh(){return"http:"===Ma()||"https:"===Ma()}()||(0,q.ru)()||su())&&!function $c(){return(0,q.b$)()||(0,q.UG)()}()&&nc()&&!Dd()}function _i(){return su()&&typeof document<"u"}function rc(){return(rc=(0,w.Z)(function*(){return!!_i()&&new Promise(_=>{const d=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),_(!0)})})})).apply(this,arguments)}const fa={LOCAL:"local",NONE:"none",SESSION:"session"},Zu=fe,Mo="persistence";function Qu(_){return pa.apply(this,arguments)}function pa(){return(pa=(0,w.Z)(function*(_){yield _._initializationPromise;const d=Ul(),p=Tt(Mo,_.config.apiKey,_.name);d&&d.setItem(p,_._getPersistence())})).apply(this,arguments)}function Ul(){var _;try{return(null===(_=function Th(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const Ch=fe;class Go{constructor(){this.browserResolver=ht(Pt),this.cordovaResolver=ht(Hc),this.underlyingResolver=null,this._redirectPersistence=Hs,this._completeRedirectFn=go,this._overrideRedirectResult=zu}_initialize(d){var p=this;return(0,w.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,p,E,U){var Q=this;return(0,w.Z)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._openPopup(d,p,E,U)})()}_openRedirect(d,p,E,U){var Q=this;return(0,w.Z)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._openRedirect(d,p,E,U)})()}_isIframeWebStorageSupported(d,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,p)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return _i()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ch(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,w.Z)(function*(){if(d.underlyingResolver)return;const p=yield function Ad(){return rc.apply(this,arguments)}();d.underlyingResolver=p?d.cordovaResolver:d.browserResolver})()}}function Sd(_){return _.unwrap()}function Dh(_){return qf(_)}function qf(_){const{_tokenResponse:d}=_ instanceof q.ZR?_.customData:_;if(!d)return null;if(!(_ instanceof q.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Xa.credentialFromResult(_);const p=d.providerId;if(!p||p===xe.PASSWORD)return null;let E;switch(p){case xe.GOOGLE:E=xu;break;case xe.FACEBOOK:E=ni;break;case xe.GITHUB:E=ri;break;case xe.TWITTER:E=ts;break;default:const{oauthIdToken:U,oauthAccessToken:Q,oauthTokenSecret:pe,pendingToken:ke,nonce:et}=d;return Q||pe||U||ke?ke?p.startsWith("saml.")?Ds._create(p,ke):Ur._fromParams({providerId:p,signInMethod:p,pendingToken:ke,idToken:U,accessToken:Q}):new Xs(p).credential({idToken:U,accessToken:Q,rawNonce:et}):null}return _ instanceof q.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function Oo(_,d){return d.catch(p=>{throw p instanceof q.ZR&&function Pd(_,d){var p;const E=null===(p=d.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new Md(_,function la(_,d){var p;const E=(0,q.m9)(_),U=d;return fe(d.customData.operationType,E,"argument-error"),fe(null===(p=U.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,E,"argument-error"),js._fromError(E,U)}(_,d));else if(E){const U=qf(d),Q=d;U&&(Q.credential=U,Q.tenantId=E.tenantId||void 0,Q.email=E.email||void 0,Q.phoneNumber=E.phoneNumber||void 0)}}(_,p),p}).then(p=>{const U=p.user;return{operationType:p.operationType,credential:Dh(p),additionalUserInfo:zi(p),user:Oa.getOrCreate(U)}})}function Wi(_,d){return or.apply(this,arguments)}function or(){return(or=(0,w.Z)(function*(_,d){const p=yield d;return{verificationId:p.verificationId,confirm:E=>Oo(_,p.confirm(E))}})).apply(this,arguments)}class Md{constructor(d,p){this.resolver=p,this.auth=function Rd(_){return _.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Oo(Sd(this.auth),this.resolver.resolveSignIn(d))}}class Oa{constructor(d){this._delegate=d,this.multiFactor=function At(_){const d=(0,q.m9)(_);return an.has(d)||an.set(d,Bt._fromUser(d)),an.get(d)}(d)}static getOrCreate(d){return Oa.USER_MAP.has(d)||Oa.USER_MAP.set(d,new Oa(d)),Oa.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var p=this;return(0,w.Z)(function*(){return Oo(p.auth,Us(p._delegate,d))})()}linkWithPhoneNumber(d,p){var E=this;return(0,w.Z)(function*(){return Wi(E.auth,function Yl(_,d,p){return Ja.apply(this,arguments)}(E._delegate,d,p))})()}linkWithPopup(d){var p=this;return(0,w.Z)(function*(){return Oo(p.auth,function Jl(_,d,p){return pl.apply(this,arguments)}(p._delegate,d,Go))})()}linkWithRedirect(d){var p=this;return(0,w.Z)(function*(){return yield Qu(xn(p.auth)),io(p._delegate,d,Go)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var p=this;return(0,w.Z)(function*(){return Oo(p.auth,Ci(p._delegate,d))})()}reauthenticateWithPhoneNumber(d,p){return Wi(this.auth,function Ol(_,d,p){return fl.apply(this,arguments)}(this._delegate,d,p))}reauthenticateWithPopup(d){return Oo(this.auth,function yh(_,d,p){return Eu.apply(this,arguments)}(this._delegate,d,Go))}reauthenticateWithRedirect(d){var p=this;return(0,w.Z)(function*(){return yield Qu(xn(p.auth)),Nc(p._delegate,d,Go)})()}sendEmailVerification(d){return function qa(_,d){return S.apply(this,arguments)}(this._delegate,d)}unlink(d){var p=this;return(0,w.Z)(function*(){return yield function pr(_,d){return Vs.apply(this,arguments)}(p._delegate,d),p})()}updateEmail(d){return function k(_,d){return B((0,q.m9)(_),d,null)}(this._delegate,d)}updatePassword(d){return function b(_,d){return B((0,q.m9)(_),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function Lf(_,d){return vu.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Ge(_,d){return M.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,p){return function W(_,d,p){return L.apply(this,arguments)}(this._delegate,d,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Oa.USER_MAP=new WeakMap;const El=fe;let Bl=(()=>{class _{constructor(p,E){if(this.app=p,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:U}=p.options;El(U,"invalid-api-key",{appName:p.name}),El(U,"invalid-api-key",{appName:p.name});const Q=typeof window<"u"?Go:void 0;this._delegate=E.initialize({options:{persistence:Kf(U,p.name),popupRedirectResolver:Q}}),this._delegate._updateErrorMap(ft),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Oa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,E){!function xo(_,d,p){const E=xn(_);fe(E._canInitEmulator,E,"emulator-config-failed"),fe(/^https?:\/\//.test(d),E,"invalid-emulator-scheme");const U=!!p?.disableWarnings,Q=ho(d),{host:pe,port:ke}=function Jo(_){const d=ho(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(d.length));if(!p)return{host:"",port:null};const E=p[2].split("@").pop()||"",U=/^(\[[^\]]+\])(:|$)/.exec(E);if(U){const Q=U[1];return{host:Q,port:hu(E.substr(Q.length+1))}}{const[Q,pe]=E.split(":");return{host:Q,port:hu(pe)}}}(d);E.config.emulator={url:`${Q}//${pe}${null===ke?"":`:${ke}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:pe,port:ke,protocol:Q.replace(":",""),options:Object.freeze({disableWarnings:U})}),U||function Fa(){function _(){const d=document.createElement("p"),p=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,p,E)}applyActionCode(p){return function fu(_,d){return To.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return aa(this._delegate,p)}confirmPasswordReset(p,E){return function za(_,d,p){return wa.apply(this,arguments)}(this._delegate,p,E)}createUserWithEmailAndPassword(p,E){var U=this;return(0,w.Z)(function*(){return Oo(U._delegate,function Uo(_,d,p){return Ss.apply(this,arguments)}(U._delegate,p,E))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function al(_,d){return $i.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function pu(_,d){const p=ls.parseLink(d);return"EMAIL_SIGNIN"===p?.operation}(0,p)}getRedirectResult(){var p=this;return(0,w.Z)(function*(){El(zc(),p._delegate,"operation-not-supported-in-this-environment");const E=yield function gl(_,d){return wu.apply(this,arguments)}(p._delegate,Go);return E?Oo(p._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Hf(_,d){xn(_)._logFramework(d)}(this._delegate,p)}onAuthStateChanged(p,E,U){const{next:Q,error:pe,complete:ke}=Wf(p,E,U);return this._delegate.onAuthStateChanged(Q,pe,ke)}onIdTokenChanged(p,E,U){const{next:Q,error:pe,complete:ke}=Wf(p,E,U);return this._delegate.onIdTokenChanged(Q,pe,ke)}sendSignInLinkToEmail(p,E){return function Ta(_,d,p){return Ga.apply(this,arguments)}(this._delegate,p,E)}sendPasswordResetEmail(p,E){return function wo(_,d,p){return eo.apply(this,arguments)}(this._delegate,p,E||void 0)}setPersistence(p){var E=this;return(0,w.Z)(function*(){let U;switch(function bd(_,d){Zu(Object.values(fa).includes(d),_,"invalid-persistence-type"),(0,q.b$)()?Zu(d!==fa.SESSION,_,"unsupported-persistence-type"):(0,q.UG)()?Zu(d===fa.NONE,_,"unsupported-persistence-type"):Dd()?Zu(d===fa.NONE||d===fa.LOCAL&&(0,q.hl)(),_,"unsupported-persistence-type"):Zu(d===fa.NONE||nc(),_,"unsupported-persistence-type")}(E._delegate,p),p){case fa.SESSION:U=Hs;break;case fa.LOCAL:U=(yield ht(D)._isAvailable())?D:Za;break;case fa.NONE:U=rn;break;default:return Ve("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(U)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Oo(this._delegate,function Ba(_){return ns.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Oo(this._delegate,Fo(this._delegate,p))}signInWithCustomToken(p){return Oo(this._delegate,function fi(_,d){return bs.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,E){return Oo(this._delegate,function ol(_,d,p){return Fo((0,q.m9)(_),cs.credential(d,p)).catch(function(){var E=(0,w.Z)(function*(U){throw"auth/password-does-not-meet-requirements"===U.code&&Bs(_),U});return function(U){return E.apply(this,arguments)}}())}(this._delegate,p,E))}signInWithEmailLink(p,E){return Oo(this._delegate,function rs(_,d,p){return ua.apply(this,arguments)}(this._delegate,p,E))}signInWithPhoneNumber(p,E){return Wi(this._delegate,function yu(_,d,p){return po.apply(this,arguments)}(this._delegate,p,E))}signInWithPopup(p){var E=this;return(0,w.Z)(function*(){return El(zc(),E._delegate,"operation-not-supported-in-this-environment"),Oo(E._delegate,function Pc(_,d,p){return ba.apply(this,arguments)}(E._delegate,p,Go))})()}signInWithRedirect(p){var E=this;return(0,w.Z)(function*(){return El(zc(),E._delegate,"operation-not-supported-in-this-environment"),yield Qu(E._delegate),Mc(E._delegate,p,Go)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function gi(_,d){return Wr.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=fa,_})();function Wf(_,d,p){let E=_;"function"!=typeof _&&({next:E,error:d,complete:p}=_);const U=E;return{next:pe=>U(pe&&Oa.getOrCreate(pe)),error:d,complete:p}}function Kf(_,d){const p=function ao(_,d){const p=Ul();if(!p)return[];const E=Tt(Mo,_,d);switch(p.getItem(E)){case fa.NONE:return[rn];case fa.LOCAL:return[D,Hs];case fa.SESSION:return[Hs];default:return[]}}(_,d);if(typeof self<"u"&&!p.includes(D)&&p.push(D),typeof window<"u")for(const E of[Za,Hs])p.includes(E)||p.push(E);return p.includes(rn)||p.push(rn),p}class Gc{constructor(){this.providerId="phone",this._delegate=new Xa(Sd(ue.Z.auth()))}static credential(d,p){return Xa.credential(d,p)}verifyPhoneNumber(d,p){return this._delegate.verifyPhoneNumber(d,p)}unwrap(){return this._delegate}}Gc.PHONE_SIGN_IN_METHOD=Xa.PHONE_SIGN_IN_METHOD,Gc.PROVIDER_ID=Xa.PROVIDER_ID;const Od=fe;class ic{constructor(d,p,E=ue.Z.app()){var U;Od(null===(U=E.options)||void 0===U?void 0:U.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Ml(E.auth(),d,p),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Il(_){_.INTERNAL.registerComponent(new Pe.wA("auth-compat",d=>{const p=d.getProvider("app-compat").getImmediate(),E=d.getProvider("auth");return new Bl(p,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:cs,FacebookAuthProvider:ni,GithubAuthProvider:ri,GoogleAuthProvider:xu,OAuthProvider:Xs,SAMLAuthProvider:fo,PhoneAuthProvider:Gc,PhoneMultiFactorGenerator:Sr,RecaptchaVerifier:ic,TwitterAuthProvider:ts,Auth:Bl,AuthCredential:Oi,Error:q.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.4.9")}(ue.Z)},5861:(Nt,He,z)=>{function w(q,De,ve,Ie,Pe,P,xe){try{var le=q[P](xe),he=le.value}catch(be){return void ve(be)}le.done?De(he):Promise.resolve(he).then(Ie,Pe)}function ue(q){return function(){var De=this,ve=arguments;return new Promise(function(Ie,Pe){var P=q.apply(De,ve);function xe(he){w(P,Ie,Pe,xe,le,"next",he)}function le(he){w(P,Ie,Pe,xe,le,"throw",he)}xe(void 0)})}}z.d(He,{Z:()=>ue})},7582:(Nt,He,z)=>{function De(me,ye){var Fe={};for(var Ce in me)Object.prototype.hasOwnProperty.call(me,Ce)&&ye.indexOf(Ce)<0&&(Fe[Ce]=me[Ce]);if(null!=me&&"function"==typeof Object.getOwnPropertySymbols){var Ae=0;for(Ce=Object.getOwnPropertySymbols(me);Ae<Ce.length;Ae++)ye.indexOf(Ce[Ae])<0&&Object.prototype.propertyIsEnumerable.call(me,Ce[Ae])&&(Fe[Ce[Ae]]=me[Ce[Ae]])}return Fe}function be(me,ye,Fe,Ce){return new(Fe||(Fe=Promise))(function(Ue,yt){function dt(Dn){try{St(Ce.next(Dn))}catch(en){yt(en)}}function fr(Dn){try{St(Ce.throw(Dn))}catch(en){yt(en)}}function St(Dn){Dn.done?Ue(Dn.value):function Ae(Ue){return Ue instanceof Fe?Ue:new Fe(function(yt){yt(Ue)})}(Dn.value).then(dt,fr)}St((Ce=Ce.apply(me,ye||[])).next())})}function ce(me){return this instanceof ce?(this.v=me,this):new ce(me)}function Ve(me,ye,Fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,Ce=Fe.apply(me,ye||[]),Ue=[];return Ae={},yt("next"),yt("throw"),yt("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae;function yt(Fn){Ce[Fn]&&(Ae[Fn]=function(sn){return new Promise(function(mn,$n){Ue.push([Fn,sn,mn,$n])>1||dt(Fn,sn)})})}function dt(Fn,sn){try{!function fr(Fn){Fn.value instanceof ce?Promise.resolve(Fn.value.v).then(St,Dn):en(Ue[0][2],Fn)}(Ce[Fn](sn))}catch(mn){en(Ue[0][3],mn)}}function St(Fn){dt("next",Fn)}function Dn(Fn){dt("throw",Fn)}function en(Fn,sn){Fn(sn),Ue.shift(),Ue.length&&dt(Ue[0][0],Ue[0][1])}}function je(me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,ye=me[Symbol.asyncIterator];return ye?ye.call(me):(me=function tt(me){var ye="function"==typeof Symbol&&Symbol.iterator,Fe=ye&&me[ye],Ce=0;if(Fe)return Fe.call(me);if(me&&"number"==typeof me.length)return{next:function(){return me&&Ce>=me.length&&(me=void 0),{value:me&&me[Ce++],done:!me}}};throw new TypeError(ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(me),Fe={},Ce("next"),Ce("throw"),Ce("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe);function Ce(Ue){Fe[Ue]=me[Ue]&&function(yt){return new Promise(function(dt,fr){!function Ae(Ue,yt,dt,fr){Promise.resolve(fr).then(function(St){Ue({value:St,done:dt})},yt)}(dt,fr,(yt=me[Ue](yt)).done,yt.value)})}}}z.d(He,{FC:()=>Ve,KL:()=>je,_T:()=>De,mG:()=>be,qq:()=>ce}),"function"==typeof SuppressedError&&SuppressedError}},Nt=>{Nt(Nt.s=6662)}]);