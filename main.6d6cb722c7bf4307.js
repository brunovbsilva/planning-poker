"use strict";(self.webpackChunkplanning_poker=self.webpackChunkplanning_poker||[]).push([[179],{9058:(Rt,Ve,B)=>{B.d(Ve,{BH:()=>Ge,G6:()=>en,L:()=>Oe,LL:()=>Te,Pz:()=>ne,Sg:()=>pt,UG:()=>ie,ZB:()=>Re,ZR:()=>Fe,aH:()=>rt,b$:()=>an,eu:()=>Me,hl:()=>ge,jU:()=>ye,m9:()=>De,ne:()=>qt,pd:()=>Fi,r3:()=>Jn,ru:()=>Ce,tV:()=>ue,uI:()=>ot,vZ:()=>Wn,w1:()=>Xn,xO:()=>gr,xb:()=>Gn,z$:()=>Ze,zd:()=>Wr});const pe=function(Z){const Y=[];let se=0;for(let Be=0;Be<Z.length;Be++){let Se=Z.charCodeAt(Be);Se<128?Y[se++]=Se:Se<2048?(Y[se++]=Se>>6|192,Y[se++]=63&Se|128):55296==(64512&Se)&&Be+1<Z.length&&56320==(64512&Z.charCodeAt(Be+1))?(Se=65536+((1023&Se)<<10)+(1023&Z.charCodeAt(++Be)),Y[se++]=Se>>18|240,Y[se++]=Se>>12&63|128,Y[se++]=Se>>6&63|128,Y[se++]=63&Se|128):(Y[se++]=Se>>12|224,Y[se++]=Se>>6&63|128,Y[se++]=63&Se|128)}return Y},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Z,Y){if(!Array.isArray(Z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const se=Y?this.byteToCharMapWebSafe_:this.byteToCharMap_,Be=[];for(let Se=0;Se<Z.length;Se+=3){const mt=Z[Se],on=Se+1<Z.length,un=on?Z[Se+1]:0,Vi=Se+2<Z.length,Vr=Vi?Z[Se+2]:0;let Et=(15&un)<<2|Vr>>6,Rr=63&Vr;Vi||(Rr=64,on||(Et=64)),Be.push(se[mt>>2],se[(3&mt)<<4|un>>4],se[Et],se[Rr])}return Be.join("")},encodeString(Z,Y){return this.HAS_NATIVE_SUPPORT&&!Y?btoa(Z):this.encodeByteArray(pe(Z),Y)},decodeString(Z,Y){return this.HAS_NATIVE_SUPPORT&&!Y?atob(Z):function(Z){const Y=[];let se=0,Be=0;for(;se<Z.length;){const Se=Z[se++];if(Se<128)Y[Be++]=String.fromCharCode(Se);else if(Se>191&&Se<224){const mt=Z[se++];Y[Be++]=String.fromCharCode((31&Se)<<6|63&mt)}else if(Se>239&&Se<365){const Vi=((7&Se)<<18|(63&Z[se++])<<12|(63&Z[se++])<<6|63&Z[se++])-65536;Y[Be++]=String.fromCharCode(55296+(Vi>>10)),Y[Be++]=String.fromCharCode(56320+(1023&Vi))}else{const mt=Z[se++],on=Z[se++];Y[Be++]=String.fromCharCode((15&Se)<<12|(63&mt)<<6|63&on)}}return Y.join("")}(this.decodeStringToByteArray(Z,Y))},decodeStringToByteArray(Z,Y){this.init_();const se=Y?this.charToByteMapWebSafe_:this.charToByteMap_,Be=[];for(let Se=0;Se<Z.length;){const mt=se[Z.charAt(Se++)],un=Se<Z.length?se[Z.charAt(Se)]:0;++Se;const Vr=Se<Z.length?se[Z.charAt(Se)]:64;++Se;const Yt=Se<Z.length?se[Z.charAt(Se)]:64;if(++Se,null==mt||null==un||null==Vr||null==Yt)throw new he;Be.push(mt<<2|un>>4),64!==Vr&&(Be.push(un<<4&240|Vr>>2),64!==Yt&&Be.push(Vr<<6&192|Yt))}return Be},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Z=0;Z<this.ENCODED_VALS.length;Z++)this.byteToCharMap_[Z]=this.ENCODED_VALS.charAt(Z),this.charToByteMap_[this.byteToCharMap_[Z]]=Z,this.byteToCharMapWebSafe_[Z]=this.ENCODED_VALS_WEBSAFE.charAt(Z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Z]]=Z,Z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Z)]=Z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Z)]=Z)}}};class he extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Oe=function(Z){return function(Z){const Y=pe(Z);return fe.encodeByteArray(Y,!0)}(Z).replace(/\./g,"")},ue=function(Z){try{return fe.decodeString(Z,!0)}catch(Y){console.error("base64Decode failed: ",Y)}return null};function Re(Z,Y){if(!(Y instanceof Object))return Y;switch(Y.constructor){case Date:return new Date(Y.getTime());case Object:void 0===Z&&(Z={});break;case Array:Z=[];break;default:return Y}for(const se in Y)!Y.hasOwnProperty(se)||!at(se)||(Z[se]=Re(Z[se],Y[se]));return Z}function at(Z){return"__proto__"!==Z}const ct=()=>{try{return function Qe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Z=process.env.__FIREBASE_DEFAULTS__;return Z?JSON.parse(Z):void 0})()||(()=>{if(typeof document>"u")return;let Z;try{Z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Y=Z&&ue(Z[1]);return Y&&JSON.parse(Y)})()}catch(Z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Z}`)}},rt=()=>{var Z;return null===(Z=ct())||void 0===Z?void 0:Z.config},ne=Z=>{var Y;return null===(Y=ct())||void 0===Y?void 0:Y[`_${Z}`]};class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Y,se)=>{this.resolve=Y,this.reject=se})}wrapCallback(Y){return(se,Be)=>{se?this.reject(se):this.resolve(Be),"function"==typeof Y&&(this.promise.catch(()=>{}),1===Y.length?Y(se):Y(se,Be))}}}function pt(Z,Y){if(Z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Be=Y||"demo-project",Se=Z.iat||0,mt=Z.sub||Z.user_id;if(!mt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const on=Object.assign({iss:`https://securetoken.google.com/${Be}`,aud:Be,iat:Se,exp:Se+3600,auth_time:Se,sub:mt,user_id:mt,firebase:{sign_in_provider:"custom",identities:{}}},Z);return[Oe(JSON.stringify({alg:"none",type:"JWT"})),Oe(JSON.stringify(on)),""].join(".")}function Ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ot(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function ie(){var Z;const Y=null===(Z=ct())||void 0===Z?void 0:Z.forceEnvironment;if("node"===Y)return!0;if("browser"===Y)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ye(){return"object"==typeof self&&self.self===self}function Ce(){const Z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Z&&void 0!==Z.id}function an(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xn(){const Z=Ze();return Z.indexOf("MSIE ")>=0||Z.indexOf("Trident/")>=0}function en(){return!ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ge(){try{return"object"==typeof indexedDB}catch{return!1}}function Me(){return new Promise((Z,Y)=>{try{let se=!0;const Be="validate-browser-context-for-indexeddb-analytics-module",Se=self.indexedDB.open(Be);Se.onsuccess=()=>{Se.result.close(),se||self.indexedDB.deleteDatabase(Be),Z(!0)},Se.onupgradeneeded=()=>{se=!1},Se.onerror=()=>{var mt;Y((null===(mt=Se.error)||void 0===mt?void 0:mt.message)||"")}}catch(se){Y(se)}})}class Fe extends Error{constructor(Y,se,Be){super(se),this.code=Y,this.customData=Be,this.name="FirebaseError",Object.setPrototypeOf(this,Fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Te.prototype.create)}}class Te{constructor(Y,se,Be){this.service=Y,this.serviceName=se,this.errors=Be}create(Y,...se){const Be=se[0]||{},Se=`${this.service}/${Y}`,mt=this.errors[Y],on=mt?function _t(Z,Y){return Z.replace(rn,(se,Be)=>{const Se=Y[Be];return null!=Se?String(Se):`<${Be}?>`})}(mt,Be):"Error";return new Fe(Se,`${this.serviceName}: ${on} (${Se}).`,Be)}}const rn=/\{\$([^}]+)}/g;function Jn(Z,Y){return Object.prototype.hasOwnProperty.call(Z,Y)}function Gn(Z){for(const Y in Z)if(Object.prototype.hasOwnProperty.call(Z,Y))return!1;return!0}function Wn(Z,Y){if(Z===Y)return!0;const se=Object.keys(Z),Be=Object.keys(Y);for(const Se of se){if(!Be.includes(Se))return!1;const mt=Z[Se],on=Y[Se];if(Gr(mt)&&Gr(on)){if(!Wn(mt,on))return!1}else if(mt!==on)return!1}for(const Se of Be)if(!se.includes(Se))return!1;return!0}function Gr(Z){return null!==Z&&"object"==typeof Z}function gr(Z){const Y=[];for(const[se,Be]of Object.entries(Z))Array.isArray(Be)?Be.forEach(Se=>{Y.push(encodeURIComponent(se)+"="+encodeURIComponent(Se))}):Y.push(encodeURIComponent(se)+"="+encodeURIComponent(Be));return Y.length?"&"+Y.join("&"):""}function Wr(Z){const Y={};return Z.replace(/^\?/,"").split("&").forEach(Be=>{if(Be){const[Se,mt]=Be.split("=");Y[decodeURIComponent(Se)]=decodeURIComponent(mt)}}),Y}function Fi(Z){const Y=Z.indexOf("?");if(!Y)return"";const se=Z.indexOf("#",Y);return Z.substring(Y,se>0?se:void 0)}function qt(Z,Y){const se=new gi(Z,Y);return se.subscribe.bind(se)}class gi{constructor(Y,se){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=se,this.task.then(()=>{Y(this)}).catch(Be=>{this.error(Be)})}next(Y){this.forEachObserver(se=>{se.next(Y)})}error(Y){this.forEachObserver(se=>{se.error(Y)}),this.close(Y)}complete(){this.forEachObserver(Y=>{Y.complete()}),this.close()}subscribe(Y,se,Be){let Se;if(void 0===Y&&void 0===se&&void 0===Be)throw new Error("Missing Observer.");Se=function Fr(Z,Y){if("object"!=typeof Z||null===Z)return!1;for(const se of Y)if(se in Z&&"function"==typeof Z[se])return!0;return!1}(Y,["next","error","complete"])?Y:{next:Y,error:se,complete:Be},void 0===Se.next&&(Se.next=Xi),void 0===Se.error&&(Se.error=Xi),void 0===Se.complete&&(Se.complete=Xi);const mt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Se.error(this.finalError):Se.complete()}catch{}}),this.observers.push(Se),mt}unsubscribeOne(Y){void 0===this.observers||void 0===this.observers[Y]||(delete this.observers[Y],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Y){if(!this.finalized)for(let se=0;se<this.observers.length;se++)this.sendOne(se,Y)}sendOne(Y,se){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Y])try{se(this.observers[Y])}catch(Be){typeof console<"u"&&console.error&&console.error(Be)}})}close(Y){this.finalized||(this.finalized=!0,void 0!==Y&&(this.finalError=Y),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xi(){}function De(Z){return Z&&Z._delegate?Z._delegate:Z}},4176:(Rt,Ve,B)=>{B.d(Ve,{j:()=>H});var D=B(9212);let H=(()=>{class K{constructor(de){this.element=de,this.theme="primary"}ngOnInit(){this.setStyle()}setStyle(){this.element.nativeElement.classList.add("main-button"),this.element.nativeElement.classList.add(`main-button--${this.theme}`)}static#e=this.\u0275fac=function(fe){return new(fe||K)(D.Y36(D.SBq))};static#t=this.\u0275dir=D.lG2({type:K,selectors:[["button","main-button",""]],inputs:{theme:"theme"},standalone:!0})}return K})()},3717:(Rt,Ve,B)=>{var D=B(8878),H=B(9212);let K=(()=>{class E{static#e=this.\u0275fac=function(T){return new(T||E)};static#t=this.\u0275cmp=H.Xpm({type:E,selectors:[["app-root"]],standalone:!0,features:[H.jDz],decls:1,vars:0,template:function(T,P){1&T&&H._UZ(0,"router-outlet")},dependencies:[D.lC]})}return E})();var pe=B(6814),de=B(4911),fe=B(8504),he=B(4829),Ne=B(5592),Oe=B(1631),ue=B(4266),re=B(4674),Re=B(7400);const at=["addListener","removeListener"],Qe=["addEventListener","removeEventListener"],vt=["on","off"];function Bt(E,f,m,T){if((0,re.m)(m)&&(T=m,m=void 0),T)return Bt(E,f,m).pipe((0,Re.Z)(T));const[P,U]=function Wt(E){return(0,re.m)(E.addEventListener)&&(0,re.m)(E.removeEventListener)}(E)?Qe.map(W=>J=>E[W](f,J,m)):function ct(E){return(0,re.m)(E.addListener)&&(0,re.m)(E.removeListener)}(E)?at.map(Dt(E,f)):function Gt(E){return(0,re.m)(E.on)&&(0,re.m)(E.off)}(E)?vt.map(Dt(E,f)):[];if(!P&&(0,ue.z)(E))return(0,Oe.z)(W=>Bt(W,f,m))((0,he.Xf)(E));if(!P)throw new TypeError("Invalid event target");return new Ne.y(W=>{const J=(...ae)=>W.next(1<ae.length?ae:ae[0]);return P(J),()=>U(J)})}function Dt(E,f){return m=>T=>E[m](f,T)}var rt=B(2096),ne=B(5211),Ge=B(8645),pt=B(2420);const Ze=new Ne.y(pt.Z);var ie=B(3019),ye=B(7398),Ce=B(2181),an=B(4664),Pt=B(3168),Xn=B(9360);const Ht={connector:()=>new Ge.x};function en(E,f=Ht){const{connector:m}=f;return(0,Xn.e)((T,P)=>{const U=m();(0,he.Xf)(E(function Rn(E){return new Ne.y(f=>E.subscribe(f))}(U))).subscribe(P),P.add(T.subscribe(U))})}var Ae=B(8180),Ee=B(9397),Fe=B(6321),Te=B(8251),rn=B(975);function cn(E,f){return f?m=>(0,ne.z)(f.pipe((0,Ae.q)(1),function _t(){return(0,Xn.e)((E,f)=>{E.subscribe((0,Te.x)(f,pt.Z))})}()),m.pipe(cn(E))):(0,Oe.z)((m,T)=>(0,he.Xf)(E(m,T)).pipe((0,Ae.q)(1),(0,rn.h)(m)))}var Ct=B(671);const zn="Service workers are disabled or not supported by this browser";class Jn{constructor(f){if(this.serviceWorker=f,f){const T=Bt(f,"controllerchange").pipe((0,ye.U)(()=>f.controller)),P=(0,de.P)(()=>(0,rt.of)(f.controller)),U=(0,ne.z)(P,T);this.worker=U.pipe((0,Ce.h)(et=>!!et)),this.registration=this.worker.pipe((0,an.w)(()=>f.getRegistration()));const _e=Bt(f,"message").pipe((0,ye.U)(et=>et.data)).pipe((0,Ce.h)(et=>et&&et.type)).pipe(function Me(E){return E?f=>en(E)(f):f=>function ge(E,f){const m=(0,re.m)(E)?E:()=>E;return(0,re.m)(f)?en(f,{connector:m}):T=>new Pt.c(T,m)}(new Ge.x)(f)}());_e.connect(),this.events=_e}else this.worker=this.events=this.registration=function or(E){return(0,de.P)(()=>(0,fe._)(new Error(E)))}(zn)}postMessage(f,m){return this.worker.pipe((0,Ae.q)(1),(0,Ee.b)(T=>{T.postMessage({action:f,...m})})).toPromise().then(()=>{})}postMessageWithOperation(f,m,T){const P=this.waitForOperationCompleted(T),U=this.postMessage(f,m);return Promise.all([U,P]).then(([,W])=>W)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(f){let m;return m="string"==typeof f?T=>T.type===f:T=>f.includes(T.type),this.events.pipe((0,Ce.h)(m))}nextEventOfType(f){return this.eventsOfType(f).pipe((0,Ae.q)(1))}waitForOperationCompleted(f){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,Ce.h)(m=>m.nonce===f),(0,Ae.q)(1),(0,ye.U)(m=>{if(void 0!==m.result)return m.result;throw new Error(m.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let kt=(()=>{class E{get isEnabled(){return this.sw.isEnabled}constructor(m){if(this.sw=m,this.pushManager=null,this.subscriptionChanges=new Ge.x,!m.isEnabled)return this.messages=Ze,this.notificationClicks=Ze,void(this.subscription=Ze);this.messages=this.sw.eventsOfType("PUSH").pipe((0,ye.U)(P=>P.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,ye.U)(P=>P.data)),this.pushManager=this.sw.registration.pipe((0,ye.U)(P=>P.pushManager));const T=this.pushManager.pipe((0,an.w)(P=>P.getSubscription()));this.subscription=(0,ie.T)(T,this.subscriptionChanges)}requestSubscription(m){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(zn));const T={userVisibleOnly:!0};let P=this.decodeBase64(m.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),U=new Uint8Array(new ArrayBuffer(P.length));for(let W=0;W<P.length;W++)U[W]=P.charCodeAt(W);return T.applicationServerKey=U,this.pushManager.pipe((0,an.w)(W=>W.subscribe(T)),(0,Ae.q)(1)).toPromise().then(W=>(this.subscriptionChanges.next(W),W))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Ae.q)(1),(0,an.w)(T=>{if(null===T)throw new Error("Not subscribed to push notifications.");return T.unsubscribe().then(P=>{if(!P)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(zn))}decodeBase64(m){return atob(m)}static#e=this.\u0275fac=function(T){return new(T||E)(H.LFG(Jn))};static#t=this.\u0275prov=H.Yz7({token:E,factory:E.\u0275fac})}return E})(),Gn=(()=>{class E{get isEnabled(){return this.sw.isEnabled}constructor(m){if(this.sw=m,!m.isEnabled)return this.versionUpdates=Ze,void(this.unrecoverable=Ze);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(zn));const m=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:m},m)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(zn));const m=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:m},m)}static#e=this.\u0275fac=function(T){return new(T||E)(H.LFG(Jn))};static#t=this.\u0275prov=H.Yz7({token:E,factory:E.\u0275fac})}return E})();const lt=new H.OlP("");function Wn(E,f,m,T){return()=>{if(!(0,pe.NF)(T)||!("serviceWorker"in navigator)||!1===m.enabled)return;let P;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof m.registrationStrategy)P=m.registrationStrategy();else{const[W,...J]=(m.registrationStrategy||"registerWhenStable:30000").split(":");switch(W){case"registerImmediately":P=(0,rt.of)(null);break;case"registerWithDelay":P=Gr(+J[0]||0);break;case"registerWhenStable":P=J[0]?(0,ie.T)(er(E),Gr(+J[0])):er(E);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${m.registrationStrategy}`)}}E.get(H.R0b).runOutsideAngular(()=>P.pipe((0,Ae.q)(1)).subscribe(()=>navigator.serviceWorker.register(f,{scope:m.scope}).catch(W=>console.error("Service worker registration failed with:",W))))}}function Gr(E){return(0,rt.of)(null).pipe(function On(E,f=Fe.z){const m=function hn(E=0,f,m=Fe.P){let T=-1;return null!=f&&((0,Ct.K)(f)?m=f:T=f),new Ne.y(P=>{let U=function tn(E){return E instanceof Date&&!isNaN(E)}(E)?+E-m.now():E;U<0&&(U=0);let W=0;return m.schedule(function(){P.closed||(P.next(W++),0<=T?this.schedule(void 0,T):P.complete())},U)})}(E,f);return cn(()=>m)}(E))}function er(E){return E.get(H.z2F).isStable.pipe((0,Ce.h)(m=>m))}function gr(E,f){return new Jn((0,pe.NF)(f)&&!1!==E.enabled?navigator.serviceWorker:void 0)}class Wr{}function Fi(E,f={}){return(0,H.MR2)([kt,Gn,{provide:lt,useValue:E},{provide:Wr,useValue:f},{provide:Jn,useFactory:gr,deps:[Wr,H.Lbi]},{provide:H.ip1,useFactory:Wn,deps:[H.zs3,lt,Wr,H.Lbi],multi:!0}])}let sn=(()=>{class E{static register(m,T={}){return{ngModule:E,providers:[Fi(m,T)]}}static#e=this.\u0275fac=function(T){return new(T||E)};static#t=this.\u0275mod=H.oAB({type:E});static#n=this.\u0275inj=H.cJS({providers:[kt,Gn]})}return E})();var qt=B(8326),gi=B(2459),Fr=B(7217),Xi=B(3106),Cr=B(5861),Wi=B(534),zt=B(9058),qr=B(4537);const wn="firebasestorage.googleapis.com",Pn="storageBucket";class Fn extends zt.ZR{constructor(f,m,T=0){super(Jr(f),`Firebase Storage: ${m} (${Jr(f)})`),this.status_=T,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fn.prototype)}get status(){return this.status_}set status(f){this.status_=f}_codeEquals(f){return Jr(f)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(f){this.customData.serverResponse=f,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Hn=function(E){return E.UNKNOWN="unknown",E.OBJECT_NOT_FOUND="object-not-found",E.BUCKET_NOT_FOUND="bucket-not-found",E.PROJECT_NOT_FOUND="project-not-found",E.QUOTA_EXCEEDED="quota-exceeded",E.UNAUTHENTICATED="unauthenticated",E.UNAUTHORIZED="unauthorized",E.UNAUTHORIZED_APP="unauthorized-app",E.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",E.INVALID_CHECKSUM="invalid-checksum",E.CANCELED="canceled",E.INVALID_EVENT_NAME="invalid-event-name",E.INVALID_URL="invalid-url",E.INVALID_DEFAULT_BUCKET="invalid-default-bucket",E.NO_DEFAULT_BUCKET="no-default-bucket",E.CANNOT_SLICE_BLOB="cannot-slice-blob",E.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",E.NO_DOWNLOAD_URL="no-download-url",E.INVALID_ARGUMENT="invalid-argument",E.INVALID_ARGUMENT_COUNT="invalid-argument-count",E.APP_DELETED="app-deleted",E.INVALID_ROOT_OPERATION="invalid-root-operation",E.INVALID_FORMAT="invalid-format",E.INTERNAL_ERROR="internal-error",E.UNSUPPORTED_ENVIRONMENT="unsupported-environment",E}(Hn||{});function Jr(E){return"storage/"+E}function Ie(){return new Fn(Hn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function se(){return new Fn(Hn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Be(){return new Fn(Hn.CANCELED,"User canceled the upload/download.")}function un(){return new Fn(Hn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Yt(E){return new Fn(Hn.INVALID_ARGUMENT,E)}function Et(){return new Fn(Hn.APP_DELETED,"The Firebase app was deleted.")}function Rr(E){return new Fn(Hn.INVALID_ROOT_OPERATION,"The operation '"+E+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qi(E,f){return new Fn(Hn.INVALID_FORMAT,"String does not match format '"+E+"': "+f)}function Xs(E){throw new Fn(Hn.INTERNAL_ERROR,"Internal error: "+E)}class $e{constructor(f,m){this.bucket=f,this.path_=m}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const f=encodeURIComponent;return"/b/"+f(this.bucket)+"/o/"+f(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(f,m){let T;try{T=$e.makeFromUrl(f,m)}catch{return new $e(f,"")}if(""===T.path)return T;throw function mt(E){return new Fn(Hn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+E+"'.")}(f)}static makeFromUrl(f,m){let T=null;const P="([A-Za-z0-9.\\-_]+)",J=new RegExp("^gs://"+P+"(/(.*))?$","i");function _e(tr){tr.path_=decodeURIComponent(tr.path)}const gt=m.replace(/[.]/g,"\\."),ir=[{regex:J,indices:{bucket:1,path:3},postModify:function U(tr){"/"===tr.path.charAt(tr.path.length-1)&&(tr.path_=tr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${gt}/v[A-Za-z0-9_]+/b/${P}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_e},{regex:new RegExp(`^https?://${m===wn?"(?:storage.googleapis.com|storage.cloud.google.com)":m}/${P}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_e}];for(let tr=0;tr<ir.length;tr++){const Ss=ir[tr],ki=Ss.regex.exec(f);if(ki){let Lr=ki[Ss.indices.path];Lr||(Lr=""),T=new $e(ki[Ss.indices.bucket],Lr),Ss.postModify(T);break}}if(null==T)throw function Se(E){return new Fn(Hn.INVALID_URL,"Invalid URL '"+E+"'.")}(f);return T}}class Le{constructor(f){this.promise_=Promise.reject(f)}getPromise(){return this.promise_}cancel(f=!1){}}function mr(E){return"string"==typeof E||E instanceof String}function _r(E){return Ti()&&E instanceof Blob}function Ti(){return typeof Blob<"u"&&!(0,zt.UG)()}function Ji(E,f,m,T){if(T<f)throw Yt(`Invalid value for '${E}'. Expected ${f} or greater.`);if(T>m)throw Yt(`Invalid value for '${E}'. Expected ${m} or less.`)}function cs(E,f,m){let T=f;return null==m&&(T=`https://${f}`),`${m}://${T}/v0${E}`}function Js(E){const f=encodeURIComponent;let m="?";for(const T in E)E.hasOwnProperty(T)&&(m=m+(f(T)+"=")+f(E[T])+"&");return m=m.slice(0,-1),m}var _s=function(E){return E[E.NO_ERROR=0]="NO_ERROR",E[E.NETWORK_ERROR=1]="NETWORK_ERROR",E[E.ABORT=2]="ABORT",E}(_s||{});function kn(E,f){const m=E>=500&&E<600,P=-1!==[408,429].indexOf(E),U=-1!==f.indexOf(E);return m||P||U}class Uo{constructor(f,m,T,P,U,W,J,ae,_e,et,gt,nn=!0){this.url_=f,this.method_=m,this.headers_=T,this.body_=P,this.successCodes_=U,this.additionalRetryCodes_=W,this.callback_=J,this.errorCallback_=ae,this.timeout_=_e,this.progressCallback_=et,this.connectionFactory_=gt,this.retry=nn,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((it,bt)=>{this.resolve_=it,this.reject_=bt,this.start_()})}start_(){const m=(T,P)=>{const U=this.resolve_,W=this.reject_,J=P.connection;if(P.wasSuccessCode)try{const ae=this.callback_(J,J.getResponse());!function ln(E){return void 0!==E}(ae)?U():U(ae)}catch(ae){W(ae)}else if(null!==J){const ae=Ie();ae.serverResponse=J.getErrorText(),W(this.errorCallback_?this.errorCallback_(J,ae):ae)}else W(P.canceled?this.appDelete_?Et():Be():se())};this.canceled_?m(0,new Bo(!1,null,!0)):this.backoffId_=function qe(E,f,m){let T=1,P=null,U=null,W=!1,J=0;function ae(){return 2===J}let _e=!1;function et(...An){_e||(_e=!0,f.apply(null,An))}function gt(An){P=setTimeout(()=>{P=null,E(it,ae())},An)}function nn(){U&&clearTimeout(U)}function it(An,...vr){if(_e)return void nn();if(An)return nn(),void et.call(null,An,...vr);if(ae()||W)return nn(),void et.call(null,An,...vr);let ir;T<64&&(T*=2),1===J?(J=2,ir=0):ir=1e3*(T+Math.random()),gt(ir)}let bt=!1;function Mt(An){bt||(bt=!0,nn(),!_e&&(null!==P?(An||(J=2),clearTimeout(P),gt(0)):An||(J=1)))}return gt(0),U=setTimeout(()=>{W=!0,Mt(!0)},m),Mt}((T,P)=>{if(P)return void T(!1,new Bo(!1,null,!0));const U=this.connectionFactory_();this.pendingConnection_=U;const W=J=>{null!==this.progressCallback_&&this.progressCallback_(J.loaded,J.lengthComputable?J.total:-1)};null!==this.progressCallback_&&U.addUploadProgressListener(W),U.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&U.removeUploadProgressListener(W),this.pendingConnection_=null;const J=U.getErrorCode()===_s.NO_ERROR,ae=U.getStatus();if(!J||kn(ae,this.additionalRetryCodes_)&&this.retry){const et=U.getErrorCode()===_s.ABORT;return void T(!1,new Bo(!1,null,et))}const _e=-1!==this.successCodes_.indexOf(ae);T(!0,new Bo(_e,U))})},m,this.timeout_)}getPromise(){return this.promise_}cancel(f){this.canceled_=!0,this.appDelete_=f||!1,null!==this.backoffId_&&function Jt(E){E(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Bo{constructor(f,m,T){this.wasSuccessCode=f,this.connection=m,this.canceled=!!T}}function Yc(...E){const f=function Ic(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==f){const m=new f;for(let T=0;T<E.length;T++)m.append(E[T]);return m.getBlob()}if(Ti())return new Blob(E);throw new Fn(Hn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ur={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pn{constructor(f,m){this.data=f,this.contentType=m||null}}function mi(E,f){switch(E){case Ur.RAW:return new pn(to(f));case Ur.BASE64:case Ur.BASE64URL:return new pn(Pr(E,f));case Ur.DATA_URL:return new pn(function $t(E){const f=new Pa(E);return f.base64?Pr(Ur.BASE64,f.rest):function es(E){let f;try{f=decodeURIComponent(E)}catch{throw qi(Ur.DATA_URL,"Malformed data URL.")}return to(f)}(f.rest)}(f),function jn(E){return new Pa(E).contentType}(f))}throw Ie()}function to(E){const f=[];for(let m=0;m<E.length;m++){let T=E.charCodeAt(m);T<=127?f.push(T):T<=2047?f.push(192|T>>6,128|63&T):55296==(64512&T)?m<E.length-1&&56320==(64512&E.charCodeAt(m+1))?(T=65536|(1023&T)<<10|1023&E.charCodeAt(++m),f.push(240|T>>18,128|T>>12&63,128|T>>6&63,128|63&T)):f.push(239,191,189):56320==(64512&T)?f.push(239,191,189):f.push(224|T>>12,128|T>>6&63,128|63&T)}return new Uint8Array(f)}function Pr(E,f){switch(E){case Ur.BASE64:{const P=-1!==f.indexOf("-"),U=-1!==f.indexOf("_");if(P||U)throw qi(E,"Invalid character '"+(P?"-":"_")+"' found: is it base64url encoded?");break}case Ur.BASE64URL:{const P=-1!==f.indexOf("+"),U=-1!==f.indexOf("/");if(P||U)throw qi(E,"Invalid character '"+(P?"+":"/")+"' found: is it base64 encoded?");f=f.replace(/-/g,"+").replace(/_/g,"/");break}}let m;try{m=function jo(E){if(typeof atob>"u")throw function ai(E){return new Fn(Hn.UNSUPPORTED_ENVIRONMENT,`${E} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(E)}(f)}catch(P){throw P.message.includes("polyfill")?P:qi(E,"Invalid character found")}const T=new Uint8Array(m.length);for(let P=0;P<m.length;P++)T[P]=m.charCodeAt(P);return T}class Pa{constructor(f){this.base64=!1,this.contentType=null;const m=f.match(/^data:([^,]+)?,/);if(null===m)throw qi(Ur.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const T=m[1]||null;null!=T&&(this.base64=function $o(E,f){return E.length>=f.length&&E.substring(E.length-f.length)===f}(T,";base64"),this.contentType=this.base64?T.substring(0,T.length-7):T),this.rest=f.substring(f.indexOf(",")+1)}}class Br{constructor(f,m){let T=0,P="";_r(f)?(this.data_=f,T=f.size,P=f.type):f instanceof ArrayBuffer?(m?this.data_=new Uint8Array(f):(this.data_=new Uint8Array(f.byteLength),this.data_.set(new Uint8Array(f))),T=this.data_.length):f instanceof Uint8Array&&(m?this.data_=f:(this.data_=new Uint8Array(f.length),this.data_.set(f)),T=f.length),this.size_=T,this.type_=P}size(){return this.size_}type(){return this.type_}slice(f,m){if(_r(this.data_)){const P=function oa(E,f,m){return E.webkitSlice?E.webkitSlice(f,m):E.mozSlice?E.mozSlice(f,m):E.slice?E.slice(f,m):null}(this.data_,f,m);return null===P?null:new Br(P)}{const T=new Uint8Array(this.data_.buffer,f,m-f);return new Br(T,!0)}}static getBlob(...f){if(Ti()){const m=f.map(T=>T instanceof Br?T.data_:T);return new Br(Yc.apply(null,m))}{const m=f.map(W=>mr(W)?mi(Ur.RAW,W).data:W.data_);let T=0;m.forEach(W=>{T+=W.byteLength});const P=new Uint8Array(T);let U=0;return m.forEach(W=>{for(let J=0;J<W.length;J++)P[U++]=W[J]}),new Br(P,!0)}}uploadData(){return this.data_}}function Ma(E){let f;try{f=JSON.parse(E)}catch{return null}return function qn(E){return"object"==typeof E&&!Array.isArray(E)}(f)?f:null}function aa(E){const f=E.lastIndexOf("/",E.length-2);return-1===f?E:E.slice(f+1)}function Dn(E,f){return f}class _i{constructor(f,m,T,P){this.server=f,this.local=m||f,this.writable=!!T,this.xform=P||Dn}}let no=null;function Ps(){if(no)return no;const E=[];E.push(new _i("bucket")),E.push(new _i("generation")),E.push(new _i("metageneration")),E.push(new _i("name","fullPath",!0));const m=new _i("name");m.xform=function f(U,W){return function Ki(E){return!mr(E)||E.length<2?E:aa(E)}(W)},E.push(m);const P=new _i("size");return P.xform=function T(U,W){return void 0!==W?Number(W):W},E.push(P),E.push(new _i("timeCreated")),E.push(new _i("updated")),E.push(new _i("md5Hash",null,!0)),E.push(new _i("cacheControl",null,!0)),E.push(new _i("contentDisposition",null,!0)),E.push(new _i("contentEncoding",null,!0)),E.push(new _i("contentLanguage",null,!0)),E.push(new _i("contentType",null,!0)),E.push(new _i("metadata","customMetadata",!0)),no=E,no}function Do(E,f,m){const T=Ma(f);return null===T?null:function Tc(E,f,m){const T={type:"file"},P=m.length;for(let U=0;U<P;U++){const W=m[U];T[W.local]=W.xform(T,f[W.server])}return function uu(E,f){Object.defineProperty(E,"ref",{get:function m(){const U=new $e(E.bucket,E.fullPath);return f._makeStorageReference(U)}})}(T,E),T}(E,T,m)}function Ms(E,f){const m={},T=f.length;for(let P=0;P<T;P++){const U=f[P];U.writable&&(m[U.server]=E[U.local])}return JSON.stringify(m)}const ua="prefixes",zo="items";class yi{constructor(f,m,T,P){this.url=f,this.method=m,this.handler=T,this.timeout=P,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Mr(E){if(!E)throw Ie()}function vi(E,f){return function m(T,P){const U=Do(E,P,f);return Mr(null!==U),U}}function ts(E){return function f(m,T){let P;return P=401===m.getStatus()?m.getErrorText().includes("Firebase App Check token is invalid")?function Z(){return new Fn(Hn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function De(){return new Fn(Hn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===m.getStatus()?function te(E){return new Fn(Hn.QUOTA_EXCEEDED,"Quota for bucket '"+E+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(E.bucket):403===m.getStatus()?function Y(E){return new Fn(Hn.UNAUTHORIZED,"User does not have permission to access '"+E+"'.")}(E.path):T,P.status=m.getStatus(),P.serverResponse=T.serverResponse,P}}function Kt(E){const f=ts(E);return function m(T,P){let U=f(T,P);return 404===T.getStatus()&&(U=function xe(E){return new Fn(Hn.OBJECT_NOT_FOUND,"Object '"+E+"' does not exist.")}(E.path)),U.serverResponse=P.serverResponse,U}}function ca(E,f,m){const P=cs(f.fullServerUrl(),E.host,E._protocol),W=E.maxOperationRetryTime,J=new yi(P,"GET",vi(E,m),W);return J.errorHandler=Kt(f),J}function la(E,f,m,T,P){const U={};U.prefix=f.isRoot?"":f.path+"/",m&&m.length>0&&(U.delimiter=m),T&&(U.pageToken=T),P&&(U.maxResults=P);const J=cs(f.bucketOnlyServerUrl(),E.host,E._protocol),_e=E.maxOperationRetryTime,et=new yi(J,"GET",function xa(E,f){return function m(T,P){const U=function Oa(E,f,m){const T=Ma(m);return null===T?null:function Na(E,f,m){const T={prefixes:[],items:[],nextPageToken:m.nextPageToken};if(m[ua])for(const P of m[ua]){const U=P.replace(/\/$/,""),W=E._makeStorageReference(new $e(f,U));T.prefixes.push(W)}if(m[zo])for(const P of m[zo]){const U=E._makeStorageReference(new $e(f,P.name));T.items.push(U)}return T}(E,f,T)}(E,f,P);return Mr(null!==U),U}}(E,f.bucket),_e);return et.urlParams=U,et.errorHandler=ts(f),et}function so(E,f,m){const T=Object.assign({},m);return T.fullPath=E.path,T.size=f.size(),T.contentType||(T.contentType=function hi(E,f){return E&&E.contentType||f&&f.type()||"application/octet-stream"}(null,f)),T}class So{constructor(f,m,T,P){this.current=f,this.total=m,this.finalized=!!T,this.metadata=P||null}}function nr(E,f){let m=null;try{m=E.getResponseHeader("X-Goog-Upload-Status")}catch{Mr(!1)}return Mr(!!m&&-1!==(f||["active"]).indexOf(m)),m}const lu={STATE_CHANGED:"state_changed"},Nr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function zs(E){switch(E){case"running":case"pausing":case"canceling":return Nr.RUNNING;case"paused":return Nr.PAUSED;case"success":return Nr.SUCCESS;case"canceled":return Nr.CANCELED;default:return Nr.ERROR}}class zu{constructor(f,m,T){if(function mn(E){return"function"==typeof E}(f)||null!=m||null!=T)this.next=f,this.error=m??void 0,this.complete=T??void 0;else{const U=f;this.next=U.next,this.error=U.error,this.complete=U.complete}}}function vs(E){return(...f)=>{Promise.resolve().then(()=>E(...f))}}let fa=null;class Ns{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_s.NO_ERROR,this.sendPromise_=new Promise(f=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_s.ABORT,f()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_s.NETWORK_ERROR,f()}),this.xhr_.addEventListener("load",()=>{f()})})}send(f,m,T,P){if(this.sent_)throw Xs("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(m,f,!0),void 0!==P)for(const U in P)P.hasOwnProperty(U)&&this.xhr_.setRequestHeader(U,P[U].toString());return void 0!==T?this.xhr_.send(T):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xs("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xs("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xs("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xs("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(f){return this.xhr_.getResponseHeader(f)}addUploadProgressListener(f){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",f)}removeUploadProgressListener(f){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",f)}}class ti extends Ns{initXhr(){this.xhr_.responseType="text"}}function Di(){return fa?fa():new ti}class Kn{constructor(f,m,T=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=f,this._blob=m,this._metadata=T,this._mappings=Ps(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=P=>{if(this._request=void 0,this._chunkMultiplier=1,P._codeEquals(Hn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const U=this.isExponentialBackoffExpired();if(kn(P.status,[])){if(!U)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();P=se()}this._error=P,this._transition("error")}},this._metadataErrorHandler=P=>{this._request=void 0,P._codeEquals(Hn.CANCELED)?this.completeTransitions_():(this._error=P,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((P,U)=>{this._resolve=P,this._reject=U,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const f=this._transferred;return m=>this._updateProgress(f+m)}_shouldDoResumable(f){return f.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(f){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([m,T])=>{switch(this._state){case"running":f(m,T);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((f,m)=>{const T=function Hs(E,f,m,T,P){const U=f.bucketOnlyServerUrl(),W=so(f,T,P),J={name:W.fullPath},ae=cs(U,E.host,E._protocol),et={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${T.size()}`,"X-Goog-Upload-Header-Content-Type":W.contentType,"Content-Type":"application/json; charset=utf-8"},gt=Ms(W,m),bt=new yi(ae,"POST",function it(Mt){let An;nr(Mt);try{An=Mt.getResponseHeader("X-Goog-Upload-URL")}catch{Mr(!1)}return Mr(mr(An)),An},E.maxUploadRetryTime);return bt.urlParams=J,bt.headers=et,bt.body=gt,bt.errorHandler=ts(f),bt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),P=this._ref.storage._makeRequest(T,Di,f,m);this._request=P,P.getPromise().then(U=>{this._request=void 0,this._uploadUrl=U,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const f=this._uploadUrl;this._resolveToken((m,T)=>{const P=function da(E,f,m,T){const ae=new yi(m,"POST",function U(_e){const et=nr(_e,["active","final"]);let gt=null;try{gt=_e.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Mr(!1)}gt||Mr(!1);const nn=Number(gt);return Mr(!isNaN(nn)),new So(nn,T.size(),"final"===et)},E.maxUploadRetryTime);return ae.headers={"X-Goog-Upload-Command":"query"},ae.errorHandler=ts(f),ae}(this._ref.storage,this._ref._location,f,this._blob),U=this._ref.storage._makeRequest(P,Di,m,T);this._request=U,U.getPromise().then(W=>{this._request=void 0,this._updateProgress(W.current),this._needToFetchStatus=!1,W.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const f=262144*this._chunkMultiplier,m=new So(this._transferred,this._blob.size()),T=this._uploadUrl;this._resolveToken((P,U)=>{let W;try{W=function ha(E,f,m,T,P,U,W,J){const ae=new So(0,0);if(W?(ae.current=W.current,ae.total=W.total):(ae.current=0,ae.total=T.size()),T.size()!==ae.total)throw function Vi(){return new Fn(Hn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const _e=ae.total-ae.current;let et=_e;P>0&&(et=Math.min(et,P));const gt=ae.current;let it="";it=0===et?"finalize":_e===et?"upload, finalize":"upload";const bt={"X-Goog-Upload-Command":it,"X-Goog-Upload-Offset":`${ae.current}`},Mt=T.slice(gt,gt+et);if(null===Mt)throw un();const ir=new yi(m,"POST",function An(tr,Ss){const ki=nr(tr,["active","final"]),ci=ae.current+et,Lr=T.size();let Fs;return Fs="final"===ki?vi(f,U)(tr,Ss):null,new So(ci,Lr,"final"===ki,Fs)},f.maxUploadRetryTime);return ir.headers=bt,ir.body=Mt.uploadData(),ir.progressCallback=J||null,ir.errorHandler=ts(E),ir}(this._ref._location,this._ref.storage,T,this._blob,f,this._mappings,m,this._makeProgressCallback())}catch(ae){return this._error=ae,void this._transition("error")}const J=this._ref.storage._makeRequest(W,Di,P,U,!1);this._request=J,J.getPromise().then(ae=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(ae.current),ae.finalized?(this._metadata=ae.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((f,m)=>{const T=ca(this._ref.storage,this._ref._location,this._mappings),P=this._ref.storage._makeRequest(T,Di,f,m);this._request=P,P.getPromise().then(U=>{this._request=void 0,this._metadata=U,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((f,m)=>{const T=function oo(E,f,m,T,P){const U=f.bucketOnlyServerUrl(),W={"X-Goog-Upload-Protocol":"multipart"},ae=function J(){let ir="";for(let tr=0;tr<2;tr++)ir+=Math.random().toString().slice(2);return ir}();W["Content-Type"]="multipart/related; boundary="+ae;const _e=so(f,T,P),et=Ms(_e,m),it=Br.getBlob("--"+ae+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+et+"\r\n--"+ae+"\r\nContent-Type: "+_e.contentType+"\r\n\r\n",T,"\r\n--"+ae+"--");if(null===it)throw un();const bt={name:_e.fullPath},Mt=cs(U,E.host,E._protocol),vr=E.maxUploadRetryTime,Dr=new yi(Mt,"POST",vi(E,m),vr);return Dr.urlParams=bt,Dr.headers=W,Dr.body=it.uploadData(),Dr.errorHandler=ts(f),Dr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),P=this._ref.storage._makeRequest(T,Di,f,m);this._request=P,P.getPromise().then(U=>{this._request=void 0,this._metadata=U,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(f){const m=this._transferred;this._transferred=f,this._transferred!==m&&this._notifyObservers()}_transition(f){if(this._state!==f)switch(f){case"canceling":case"pausing":this._state=f,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const m="paused"===this._state;this._state=f,m&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=f,this._notifyObservers();break;case"canceled":this._error=Be(),this._state=f,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const f=zs(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:f,metadata:this._metadata,task:this,ref:this._ref}}on(f,m,T,P){const U=new zu(m||void 0,T||void 0,P||void 0);return this._addObserver(U),()=>{this._removeObserver(U)}}then(f,m){return this._promise.then(f,m)}catch(f){return this.then(null,f)}_addObserver(f){this._observers.push(f),this._notifyObserver(f)}_removeObserver(f){const m=this._observers.indexOf(f);-1!==m&&this._observers.splice(m,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(m=>{this._notifyObserver(m)})}_finishPromise(){if(void 0!==this._resolve){let f=!0;switch(zs(this._state)){case Nr.SUCCESS:vs(this._resolve.bind(null,this.snapshot))();break;case Nr.CANCELED:case Nr.ERROR:vs(this._reject.bind(null,this._error))();break;default:f=!1}f&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(f){switch(zs(this._state)){case Nr.RUNNING:case Nr.PAUSED:f.next&&vs(f.next.bind(f,this.snapshot))();break;case Nr.SUCCESS:f.complete&&vs(f.complete.bind(f))();break;default:f.error&&vs(f.error.bind(f,this._error))()}}resume(){const f="paused"===this._state||"pausing"===this._state;return f&&this._transition("running"),f}pause(){const f="running"===this._state;return f&&this._transition("pausing"),f}cancel(){const f="running"===this._state||"pausing"===this._state;return f&&this._transition("canceling"),f}}class Ui{constructor(f,m){this._service=f,this._location=m instanceof $e?m:$e.makeFromUrl(m,f.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(f,m){return new Ui(f,m)}get root(){const f=new $e(this._location.bucket,"");return this._newRef(this._service,f)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aa(this._location.path)}get storage(){return this._service}get parent(){const f=function wc(E){if(0===E.length)return null;const f=E.lastIndexOf("/");return-1===f?"":E.slice(0,f)}(this._location.path);if(null===f)return null;const m=new $e(this._location.bucket,f);return new Ui(this._service,m)}_throwIfRoot(f){if(""===this._location.path)throw Rr(f)}}function Gu(E,f,m){return ka.apply(this,arguments)}function ka(){return(ka=(0,Cr.Z)(function*(E,f,m){const P=yield ga(E,{pageToken:m});f.prefixes.push(...P.prefixes),f.items.push(...P.items),null!=P.nextPageToken&&(yield Gu(E,f,P.nextPageToken))})).apply(this,arguments)}function ga(E,f){null!=f&&"number"==typeof f.maxResults&&Ji("options.maxResults",1,1e3,f.maxResults);const m=f||{},T=la(E.storage,E._location,"/",m.pageToken,m.maxResults);return E.storage.makeRequestWithTokens(T,Di)}function qo(E){E._throwIfRoot("getDownloadURL");const f=function ls(E,f,m){const P=cs(f.fullServerUrl(),E.host,E._protocol),W=E.maxOperationRetryTime,J=new yi(P,"GET",function Kr(E,f){return function m(T,P){const U=Do(E,P,f);return Mr(null!==U),function ro(E,f,m,T){const P=Ma(f);if(null===P||!mr(P.downloadTokens))return null;const U=P.downloadTokens;if(0===U.length)return null;const W=encodeURIComponent;return U.split(",").map(_e=>{const gt=E.fullPath;return cs("/b/"+W(E.bucket)+"/o/"+W(gt),m,T)+Js({alt:"media",token:_e})})[0]}(U,P,E.host,E._protocol)}}(E,m),W);return J.errorHandler=Kt(f),J}(E.storage,E._location,Ps());return E.storage.makeRequestWithTokens(f,Di).then(m=>{if(null===m)throw function Vr(){return new Fn(Hn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return m})}function Ws(E,f){const m=function Ho(E,f){const m=f.split("/").filter(T=>T.length>0).join("/");return 0===E.length?m:E+"/"+m}(E._location.path,f),T=new $e(E._location.bucket,m);return new Ui(E.storage,T)}function ds(E,f){if(E instanceof Fa){const m=E;if(null==m._bucket)throw function on(){return new Fn(Hn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Pn+"' property when initializing the app?")}();const T=new Ui(m,m._bucket);return null!=f?ds(T,f):T}return void 0!==f?Ws(E,f):E}function ji(E,f){if(f&&function La(E){return/^[A-Za-z]+:\/\//.test(E)}(f)){if(E instanceof Fa)return function ma(E,f){return new Ui(E,f)}(E,f);throw Yt("To use ref(service, url), the first argument must be a Storage instance.")}return ds(E,f)}function jr(E,f){const m=f?.[Pn];return null==m?null:$e.makeFromBucketSpec(m,E)}class Fa{constructor(f,m,T,P,U){this.app=f,this._authProvider=m,this._appCheckProvider=T,this._url=P,this._firebaseVersion=U,this._bucket=null,this._host=wn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=P?$e.makeFromBucketSpec(P,this._host):jr(this._host,this.app.options)}get host(){return this._host}set host(f){this._host=f,this._bucket=null!=this._url?$e.makeFromBucketSpec(this._url,f):jr(f,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(f){Ji("time",0,Number.POSITIVE_INFINITY,f),this._maxUploadRetryTime=f}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(f){Ji("time",0,Number.POSITIVE_INFINITY,f),this._maxOperationRetryTime=f}_getAuthToken(){var f=this;return(0,Cr.Z)(function*(){if(f._overrideAuthToken)return f._overrideAuthToken;const m=f._authProvider.getImmediate({optional:!0});if(m){const T=yield m.getToken();if(null!==T)return T.accessToken}return null})()}_getAppCheckToken(){var f=this;return(0,Cr.Z)(function*(){const m=f._appCheckProvider.getImmediate({optional:!0});return m?(yield m.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(f=>f.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(f){return new Ui(this,f)}_makeRequest(f,m,T,P,U=!0){if(this._deleted)return new Le(Et());{const W=function au(E,f,m,T,P,U,W=!0){const J=Js(E.urlParams),ae=E.url+J,_e=Object.assign({},E.headers);return function ou(E,f){f&&(E["X-Firebase-GMPID"]=f)}(_e,f),function ar(E,f){null!==f&&f.length>0&&(E.Authorization="Firebase "+f)}(_e,m),function Ra(E,f){E["X-Firebase-Storage-Version"]="webjs/"+(f??"AppManager")}(_e,U),function eo(E,f){null!==f&&(E["X-Firebase-AppCheck"]=f)}(_e,T),new Uo(ae,E.method,_e,E.body,E.successCodes,E.additionalRetryCodes,E.handler,E.errorHandler,E.timeout,E.progressCallback,P,W)}(f,this._appId,T,P,m,this._firebaseVersion,U);return this._requests.add(W),W.getPromise().then(()=>this._requests.delete(W),()=>this._requests.delete(W)),W}}makeRequestWithTokens(f,m){var T=this;return(0,Cr.Z)(function*(){const[P,U]=yield Promise.all([T._getAuthToken(),T._getAppCheckToken()]);return T._makeRequest(f,m,P,U).getPromise()})()}}const hu="@firebase/storage";function Qo(E,f){return ji(E=(0,zt.m9)(E),f)}function Yo(E,{instanceIdentifier:f}){const m=E.getProvider("app").getImmediate(),T=E.getProvider("auth-internal"),P=E.getProvider("app-check-internal");return new Fa(m,T,P,f,Wi.SDK_VERSION)}!function bo(){(0,Wi._registerComponent)(new qr.wA("storage",Yo,"PUBLIC").setMultipleInstances(!0)),(0,Wi.registerVersion)(hu,"0.11.2",""),(0,Wi.registerVersion)(hu,"0.11.2","esm2017")}();class uo{constructor(f,m,T){this._delegate=f,this.task=m,this.ref=T}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class pu{constructor(f,m){this._delegate=f,this._ref=m,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new uo(this._delegate.snapshot,this,this._ref)}then(f,m){return this._delegate.then(T=>{if(f)return f(new uo(T,this,this._ref))},m)}on(f,m,T,P){let U;return m&&(U="function"==typeof m?W=>m(new uo(W,this,this._ref)):{next:m.next?W=>m.next(new uo(W,this,this._ref)):void 0,complete:m.complete||void 0,error:m.error||void 0}),this._delegate.on(f,U,T||void 0,P||void 0)}}class gu{constructor(f,m){this._delegate=f,this._service=m}get prefixes(){return this._delegate.prefixes.map(f=>new Ai(f,this._service))}get items(){return this._delegate.items.map(f=>new Ai(f,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ai{constructor(f,m){this._delegate=f,this.storage=m}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(f){const m=function En(E,f){return Ws(E,f)}(this._delegate,f);return new Ai(m,this.storage)}get root(){return new Ai(this._delegate.root,this.storage)}get parent(){const f=this._delegate.parent;return null==f?null:new Ai(f,this.storage)}put(f,m){return this._throwIfRoot("put"),new pu(function qu(E,f,m){return function Go(E,f,m){return E._throwIfRoot("uploadBytesResumable"),new Kn(E,new Br(f),m)}(E=(0,zt.m9)(E),f,m)}(this._delegate,f,m),this)}putString(f,m=Ur.RAW,T){this._throwIfRoot("putString");const P=mi(m,f),U=Object.assign({},T);return null==U.contentType&&null!=P.contentType&&(U.contentType=P.contentType),new pu(new Kn(this._delegate,new Br(P.data,!0),U),this)}listAll(){return function Ua(E){return function Si(E){const f={prefixes:[],items:[]};return Gu(E,f).then(()=>f)}(E=(0,zt.m9)(E))}(this._delegate).then(f=>new gu(f,this.storage))}list(f){return function Jc(E,f){return ga(E=(0,zt.m9)(E),f)}(this._delegate,f||void 0).then(m=>new gu(m,this.storage))}getMetadata(){return function qs(E){return function Wo(E){E._throwIfRoot("getMetadata");const f=ca(E.storage,E._location,Ps());return E.storage.makeRequestWithTokens(f,Di)}(E=(0,zt.m9)(E))}(this._delegate)}updateMetadata(f){return function Ku(E,f){return function Co(E,f){E._throwIfRoot("updateMetadata");const m=function cu(E,f,m,T){const U=cs(f.fullServerUrl(),E.host,E._protocol),J=Ms(m,T),_e=E.maxOperationRetryTime,et=new yi(U,"PATCH",vi(E,T),_e);return et.headers={"Content-Type":"application/json; charset=utf-8"},et.body=J,et.errorHandler=Kt(f),et}(E.storage,E._location,f,Ps());return E.storage.makeRequestWithTokens(m,Di)}(E=(0,zt.m9)(E),f)}(this._delegate,f)}getDownloadURL(){return function Ko(E){return qo(E=(0,zt.m9)(E))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Zo(E){return function Gs(E){E._throwIfRoot("deleteObject");const f=function io(E,f){const T=cs(f.fullServerUrl(),E.host,E._protocol),J=new yi(T,"DELETE",function W(ae,_e){},E.maxOperationRetryTime);return J.successCodes=[200,204],J.errorHandler=Kt(f),J}(E.storage,E._location);return E.storage.makeRequestWithTokens(f,Di)}(E=(0,zt.m9)(E))}(this._delegate)}_throwIfRoot(f){if(""===this._delegate._location.path)throw Rr(f)}}class Ba{constructor(f,m){this.app=f,this._delegate=m}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(f){if(Es(f))throw Yt("ref() expected a child path but got a URL, use refFromURL instead.");return new Ai(Qo(this._delegate,f),this)}refFromURL(f){if(!Es(f))throw Yt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{$e.makeFromUrl(f,this._delegate.host)}catch{throw Yt("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ai(Qo(this._delegate,f),this)}setMaxUploadRetryTime(f){this._delegate.maxUploadRetryTime=f}setMaxOperationRetryTime(f){this._delegate.maxOperationRetryTime=f}useEmulator(f,m,T={}){!function Zr(E,f,m,T={}){!function du(E,f,m,T={}){E.host=`${f}:${m}`,E._protocol="http";const{mockUserToken:P}=T;P&&(E._overrideAuthToken="string"==typeof P?P:(0,zt.Sg)(P,E.app.options.projectId))}(E,f,m,T)}(this._delegate,f,m,T)}}function Es(E){return/^[A-Za-z]+:\/\//.test(E)}function Qu(E,{instanceIdentifier:f}){const m=E.getProvider("app-compat").getImmediate(),T=E.getProvider("storage").getImmediate({identifier:f});return new Ba(m,T)}!function Yu(E){const f={TaskState:Nr,TaskEvent:lu,StringFormat:Ur,Storage:Ba,Reference:Ai};E.INTERNAL.registerComponent(new qr.wA("storage-compat",Qu,"PUBLIC").setServiceProps(f).setMultipleInstances(!0)),E.registerVersion("@firebase/storage-compat","0.3.2")}(Xi.Z);var mu=B(7142);function Jo(E){const f=function $a(E){return new Ne.y(f=>{const m=W=>f.next(W);m(E.snapshot);const U=E.on("state_changed",m);return E.then(W=>{m(W),f.complete()},W=>{m(E.snapshot),(W=>{f.error(W)})(W)}),function(){U()}}).pipe(function di(E,f=Fe.z){return(0,Xn.e)((m,T)=>{let P=null,U=null,W=null;const J=()=>{if(P){P.unsubscribe(),P=null;const _e=U;U=null,T.next(_e)}};function ae(){const _e=W+E,et=f.now();if(et<_e)return P=this.schedule(void 0,_e-et),void T.add(P);J()}m.subscribe((0,Te.x)(T,_e=>{U=_e,W=f.now(),P||(P=f.schedule(ae,E),T.add(P))},()=>{J(),T.complete()},void 0,()=>{U=P=null}))})}(0))}(E);return{task:E,then:E.then.bind(E),catch:E.catch.bind(E),pause:E.pause.bind(E),cancel:E.cancel.bind(E),resume:E.resume.bind(E),snapshotChanges:()=>f,percentageChanges:()=>f.pipe((0,ye.U)(m=>m.bytesTransferred/m.totalBytes*100))}}function ni(E){return{getDownloadURL:()=>(0,rt.of)(void 0).pipe(qt.fc,(0,an.w)(()=>E.getDownloadURL()),qt.iC),getMetadata:()=>(0,rt.of)(void 0).pipe(qt.fc,(0,an.w)(()=>E.getMetadata()),qt.iC),delete:()=>(0,gi.D)(E.delete()),child:f=>ni(E.child(f)),updateMetadata:f=>(0,gi.D)(E.updateMetadata(f)),put:(f,m)=>Jo(E.put(f,m)),putString:(f,m,T)=>Jo(E.putString(f,m,T)),list:f=>(0,gi.D)(E.list(f)),listAll:()=>(0,gi.D)(E.listAll())}}const _u=new H.OlP("angularfire2.storageBucket"),yu=new H.OlP("angularfire2.storage.maxUploadRetryTime"),Ks=new H.OlP("angularfire2.storage.maxOperationRetryTime"),el=new H.OlP("angularfire2.storage.use-emulator");let os=(()=>{class E{storage;constructor(m,T,P,U,W,J,ae,_e,et,gt){const nn=(0,Fr.on)(m,W,T);this.storage=(0,Fr.cc)(`${nn.name}.storage.${P}`,"AngularFireStorage",nn.name,()=>{const it=W.runOutsideAngular(()=>nn.storage(P||void 0)),bt=et;return bt&&it.useEmulator(...bt),ae&&it.setMaxUploadRetryTime(ae),_e&&it.setMaxOperationRetryTime(_e),it},[ae,_e])}ref(m){return ni(this.storage.ref(m))}refFromURL(m){return ni(this.storage.refFromURL(m))}upload(m,T,P){return ni(this.storage.ref(m)).put(T,P)}static \u0275fac=function(T){return new(T||E)(H.LFG(Fr.Dh),H.LFG(Fr.xv,8),H.LFG(_u,8),H.LFG(H.Lbi),H.LFG(H.R0b),H.LFG(qt.HU),H.LFG(yu,8),H.LFG(Ks,8),H.LFG(el,8),H.LFG(qt.Rf,8))};static \u0275prov=H.Yz7({token:E,factory:E.\u0275fac,providedIn:"any"})}return E})(),Sn=(()=>{class E{static \u0275fac=function(T){return new(T||E)};static \u0275mod=H.oAB({type:E});static \u0275inj=H.cJS({})}return E})(),vu=(()=>{class E{constructor(){mu.Z.registerVersion("angularfire",qt.q4.full,"gcs-compat")}static \u0275fac=function(T){return new(T||E)};static \u0275mod=H.oAB({type:E});static \u0275inj=H.cJS({providers:[os],imports:[Sn]})}return E})();var co=B(4694),lo=B(6533),_a=B(6593),jt=B(6825);function Eu(E){return new H.vHH(3e3,!1)}function Ir(E){switch(E.length){case 0:return new jt.ZN;case 1:return E[0];default:return new jt.ZE(E)}}function za(E,f,m=new Map,T=new Map){const P=[],U=[];let W=-1,J=null;if(f.forEach(ae=>{const _e=ae.get("offset"),et=_e==W,gt=et&&J||new Map;ae.forEach((nn,it)=>{let bt=it,Mt=nn;if("offset"!==it)switch(bt=E.normalizePropertyName(bt,P),Mt){case jt.k1:Mt=m.get(it);break;case jt.l3:Mt=T.get(it);break;default:Mt=E.normalizeStyleValue(it,bt,Mt,P)}gt.set(bt,Mt)}),et||U.push(gt),J=gt,W=_e}),P.length)throw function Ln(E){return new H.vHH(3502,!1)}();return U}function as(E,f,m,T){switch(f){case"start":E.onStart(()=>T(m&&Ga(m,"start",E)));break;case"done":E.onDone(()=>T(m&&Ga(m,"done",E)));break;case"destroy":E.onDestroy(()=>T(m&&Ga(m,"destroy",E)))}}function Ga(E,f,m){const U=ho(E.element,E.triggerName,E.fromState,E.toState,f||E.phaseName,m.totalTime??E.totalTime,!!m.disabled),W=E._data;return null!=W&&(U._data=W),U}function ho(E,f,m,T,P="",U=0,W){return{element:E,triggerName:f,fromState:m,toState:T,phaseName:P,totalTime:U,disabled:!!W}}function Ei(E,f,m){let T=E.get(f);return T||E.set(f,T=m),T}function Is(E){const f=E.indexOf(":");return[E.substring(1,f),E.slice(f+1)]}const Zs=typeof document>"u"?null:document.documentElement;function In(E){const f=E.parentNode||E.host||null;return f===Zs?null:f}let Po=null,hs=!1;function kr(E,f){for(;f;){if(f===E)return!0;f=In(f)}return!1}function Nt(E,f,m){if(m)return Array.from(E.querySelectorAll(f));const T=E.querySelector(f);return T?[T]:[]}let Vn=(()=>{class E{validateStyleProperty(m){return function fn(E){Po||(Po=function pi(){return typeof document<"u"?document.body:null}()||{},hs=!!Po.style&&"WebkitAppearance"in Po.style);let f=!0;return Po.style&&!function bi(E){return"ebkit"==E.substring(1,6)}(E)&&(f=E in Po.style,!f&&hs&&(f="Webkit"+E.charAt(0).toUpperCase()+E.slice(1)in Po.style)),f}(m)}matchesElement(m,T){return!1}containsElement(m,T){return kr(m,T)}getParentElement(m){return In(m)}query(m,T,P){return Nt(m,T,P)}computeStyle(m,T,P){return P||""}animate(m,T,P,U,W,J=[],ae){return new jt.ZN(P,U)}static#e=this.\u0275fac=function(T){return new(T||E)};static#t=this.\u0275prov=H.Yz7({token:E,factory:E.\u0275fac})}return E})();class ea{static#e=this.NOOP=new Vn}class rr{}const Wa=1e3,wu="ng-enter",Mo="ng-leave",ec="ng-trigger",fo=".ng-trigger",cd="ng-animating",Al=".ng-animating";function Qi(E){if("number"==typeof E)return E;const f=E.match(/^(-?[\.\d]+)(m?s)/);return!f||f.length<2?0:va(parseFloat(f[1]),f[2])}function va(E,f){return"s"===f?E*Wa:E}function tc(E,f,m){return E.hasOwnProperty("duration")?E:function zd(E,f,m){let P,U=0,W="";if("string"==typeof E){const J=E.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===J)return f.push(Eu()),{duration:0,delay:0,easing:""};P=va(parseFloat(J[1]),J[2]);const ae=J[3];null!=ae&&(U=va(parseFloat(ae),J[4]));const _e=J[5];_e&&(W=_e)}else P=E;if(!m){let J=!1,ae=f.length;P<0&&(f.push(function Ro(){return new H.vHH(3100,!1)}()),J=!0),U<0&&(f.push(function fi(){return new H.vHH(3101,!1)}()),J=!0),J&&f.splice(ae,0,Eu())}return{duration:P,delay:U,easing:W}}(E,f,m)}function be(E,f,m){f.forEach((T,P)=>{const U=F(P);m&&!m.has(P)&&m.set(P,E.style[U]),E.style[U]=T})}function po(E,f){f.forEach((m,T)=>{const P=F(T);E.style[P]=""})}function ks(E){return Array.isArray(E)?1==E.length?E[0]:(0,jt.vP)(E):E}const w=new RegExp("{{\\s*(.+?)\\s*}}","g");function R(E){let f=[];if("string"==typeof E){let m;for(;m=w.exec(E);)f.push(m[1]);w.lastIndex=0}return f}function S(E,f,m){const T=`${E}`,P=T.replace(w,(U,W)=>{let J=f[W];return null==J&&(m.push(function Iu(E){return new H.vHH(3003,!1)}()),J=""),J.toString()});return P==T?E:P}const M=/-+([a-z0-9])/g;function F(E){return E.replace(M,(...f)=>f[1].toUpperCase())}function we(E,f,m){switch(f.type){case jt.mo.Trigger:return E.visitTrigger(f,m);case jt.mo.State:return E.visitState(f,m);case jt.mo.Transition:return E.visitTransition(f,m);case jt.mo.Sequence:return E.visitSequence(f,m);case jt.mo.Group:return E.visitGroup(f,m);case jt.mo.Animate:return E.visitAnimate(f,m);case jt.mo.Keyframes:return E.visitKeyframes(f,m);case jt.mo.Style:return E.visitStyle(f,m);case jt.mo.Reference:return E.visitReference(f,m);case jt.mo.AnimateChild:return E.visitAnimateChild(f,m);case jt.mo.AnimateRef:return E.visitAnimateRef(f,m);case jt.mo.Query:return E.visitQuery(f,m);case jt.mo.Stagger:return E.visitStagger(f,m);default:throw function xs(E){return new H.vHH(3004,!1)}()}}function It(E,f){return window.getComputedStyle(E)[f]}const vn=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Cn extends rr{normalizePropertyName(f,m){return F(f)}normalizeStyleValue(f,m,T,P){let U="";const W=T.toString().trim();if(vn.has(m)&&0!==T&&"0"!==T)if("number"==typeof T)U="px";else{const J=T.match(/^[+-]?[\d\.]+([a-z]*)$/);J&&0==J[1].length&&P.push(function A(E,f){return new H.vHH(3005,!1)}())}return W+U}}const Za="*";const rc=new Set(["true","1"]),Yn=new Set(["false","0"]);function Cc(E,f){const m=rc.has(E)||Yn.has(E),T=rc.has(f)||Yn.has(f);return(P,U)=>{let W=E==Za||E==P,J=f==Za||f==U;return!W&&m&&"boolean"==typeof P&&(W=P?rc.has(E):Yn.has(E)),!J&&T&&"boolean"==typeof U&&(J=U?rc.has(f):Yn.has(f)),W&&J}}const Ls=new RegExp("s*:selfs*,?","g");function dd(E,f,m,T){return new ic(E).build(f,m,T)}class ic{constructor(f){this._driver=f}build(f,m,T){const P=new nl(m);return this._resetContextStyleTimingState(P),we(this,ks(f),P)}_resetContextStyleTimingState(f){f.currentQuerySelector="",f.collectedStyles=new Map,f.collectedStyles.set("",new Map),f.currentTime=0}visitTrigger(f,m){let T=m.queryCount=0,P=m.depCount=0;const U=[],W=[];return"@"==f.name.charAt(0)&&m.errors.push(function $(){return new H.vHH(3006,!1)}()),f.definitions.forEach(J=>{if(this._resetContextStyleTimingState(m),J.type==jt.mo.State){const ae=J,_e=ae.name;_e.toString().split(/\s*,\s*/).forEach(et=>{ae.name=et,U.push(this.visitState(ae,m))}),ae.name=_e}else if(J.type==jt.mo.Transition){const ae=this.visitTransition(J,m);T+=ae.queryCount,P+=ae.depCount,W.push(ae)}else m.errors.push(function O(){return new H.vHH(3007,!1)}())}),{type:jt.mo.Trigger,name:f.name,states:U,transitions:W,queryCount:T,depCount:P,options:null}}visitState(f,m){const T=this.visitStyle(f.styles,m),P=f.options&&f.options.params||null;if(T.containsDynamicStyles){const U=new Set,W=P||{};T.styles.forEach(J=>{J instanceof Map&&J.forEach(ae=>{R(ae).forEach(_e=>{W.hasOwnProperty(_e)||U.add(_e)})})}),U.size&&m.errors.push(function V(E,f){return new H.vHH(3008,!1)}(0,U.values()))}return{type:jt.mo.State,name:f.name,style:T,options:P?{params:P}:null}}visitTransition(f,m){m.queryCount=0,m.depCount=0;const T=we(this,ks(f.animation),m),P=function Rl(E,f){const m=[];return"string"==typeof E?E.split(/\s*,\s*/).forEach(T=>function Gd(E,f,m){if(":"==E[0]){const ae=function ld(E,f){switch(E){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(m,T)=>parseFloat(T)>parseFloat(m);case":decrement":return(m,T)=>parseFloat(T)<parseFloat(m);default:return f.push(function xr(E){return new H.vHH(3016,!1)}()),"* => *"}}(E,m);if("function"==typeof ae)return void f.push(ae);E=ae}const T=E.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==T||T.length<4)return m.push(function dr(E){return new H.vHH(3015,!1)}()),f;const P=T[1],U=T[2],W=T[3];f.push(Cc(P,W)),"<"==U[0]&&(P!=Za||W!=Za)&&f.push(Cc(W,P))}(T,m,f)):m.push(E),m}(f.expr,m.errors);return{type:jt.mo.Transition,matchers:P,animation:T,queryCount:m.queryCount,depCount:m.depCount,options:Su(f.options)}}visitSequence(f,m){return{type:jt.mo.Sequence,steps:f.steps.map(T=>we(this,T,m)),options:Su(f.options)}}visitGroup(f,m){const T=m.currentTime;let P=0;const U=f.steps.map(W=>{m.currentTime=T;const J=we(this,W,m);return P=Math.max(P,m.currentTime),J});return m.currentTime=P,{type:jt.mo.Group,steps:U,options:Su(f.options)}}visitAnimate(f,m){const T=function mo(E,f){if(E.hasOwnProperty("duration"))return E;if("number"==typeof E)return bc(tc(E,f).duration,0,"");const m=E;if(m.split(/\s+/).some(U=>"{"==U.charAt(0)&&"{"==U.charAt(1))){const U=bc(0,0,"");return U.dynamic=!0,U.strValue=m,U}const P=tc(m,f);return bc(P.duration,P.delay,P.easing)}(f.timings,m.errors);m.currentAnimateTimings=T;let P,U=f.styles?f.styles:(0,jt.oB)({});if(U.type==jt.mo.Keyframes)P=this.visitKeyframes(U,m);else{let W=f.styles,J=!1;if(!W){J=!0;const _e={};T.easing&&(_e.easing=T.easing),W=(0,jt.oB)(_e)}m.currentTime+=T.duration+T.delay;const ae=this.visitStyle(W,m);ae.isEmptyStep=J,P=ae}return m.currentAnimateTimings=null,{type:jt.mo.Animate,timings:T,style:P,options:null}}visitStyle(f,m){const T=this._makeStyleAst(f,m);return this._validateStyleAst(T,m),T}_makeStyleAst(f,m){const T=[],P=Array.isArray(f.styles)?f.styles:[f.styles];for(let J of P)"string"==typeof J?J===jt.l3?T.push(J):m.errors.push(new H.vHH(3002,!1)):T.push(new Map(Object.entries(J)));let U=!1,W=null;return T.forEach(J=>{if(J instanceof Map&&(J.has("easing")&&(W=J.get("easing"),J.delete("easing")),!U))for(let ae of J.values())if(ae.toString().indexOf("{{")>=0){U=!0;break}}),{type:jt.mo.Style,styles:T,easing:W,offset:f.offset,containsDynamicStyles:U,options:null}}_validateStyleAst(f,m){const T=m.currentAnimateTimings;let P=m.currentTime,U=m.currentTime;T&&U>0&&(U-=T.duration+T.delay),f.styles.forEach(W=>{"string"!=typeof W&&W.forEach((J,ae)=>{const _e=m.collectedStyles.get(m.currentQuerySelector),et=_e.get(ae);let gt=!0;et&&(U!=P&&U>=et.startTime&&P<=et.endTime&&(m.errors.push(function nt(E,f,m,T,P){return new H.vHH(3010,!1)}()),gt=!1),U=et.startTime),gt&&_e.set(ae,{startTime:U,endTime:P}),m.options&&function Oh(E,f,m){const T=f.params||{},P=R(E);P.length&&P.forEach(U=>{T.hasOwnProperty(U)||m.push(function Or(E){return new H.vHH(3001,!1)}())})}(J,m.options,m.errors)})})}visitKeyframes(f,m){const T={type:jt.mo.Keyframes,styles:[],options:null};if(!m.currentAnimateTimings)return m.errors.push(function Vt(){return new H.vHH(3011,!1)}()),T;let U=0;const W=[];let J=!1,ae=!1,_e=0;const et=f.steps.map(vr=>{const Dr=this._makeStyleAst(vr,m);let ir=null!=Dr.offset?Dr.offset:function kh(E){if("string"==typeof E)return null;let f=null;if(Array.isArray(E))E.forEach(m=>{if(m instanceof Map&&m.has("offset")){const T=m;f=parseFloat(T.get("offset")),T.delete("offset")}});else if(E instanceof Map&&E.has("offset")){const m=E;f=parseFloat(m.get("offset")),m.delete("offset")}return f}(Dr.styles),tr=0;return null!=ir&&(U++,tr=Dr.offset=ir),ae=ae||tr<0||tr>1,J=J||tr<_e,_e=tr,W.push(tr),Dr});ae&&m.errors.push(function Ar(){return new H.vHH(3012,!1)}()),J&&m.errors.push(function Er(){return new H.vHH(3200,!1)}());const gt=f.steps.length;let nn=0;U>0&&U<gt?m.errors.push(function br(){return new H.vHH(3202,!1)}()):0==U&&(nn=1/(gt-1));const it=gt-1,bt=m.currentTime,Mt=m.currentAnimateTimings,An=Mt.duration;return et.forEach((vr,Dr)=>{const ir=nn>0?Dr==it?1:nn*Dr:W[Dr],tr=ir*An;m.currentTime=bt+Mt.delay+tr,Mt.duration=tr,this._validateStyleAst(vr,m),vr.offset=ir,T.styles.push(vr)}),T}visitReference(f,m){return{type:jt.mo.Reference,animation:we(this,ks(f.animation),m),options:Su(f.options)}}visitAnimateChild(f,m){return m.depCount++,{type:jt.mo.AnimateChild,options:Su(f.options)}}visitAnimateRef(f,m){return{type:jt.mo.AnimateRef,animation:this.visitReference(f.animation,m),options:Su(f.options)}}visitQuery(f,m){const T=m.currentQuerySelector,P=f.options||{};m.queryCount++,m.currentQuery=f;const[U,W]=function go(E){const f=!!E.split(/\s*,\s*/).find(m=>":self"==m);return f&&(E=E.replace(Ls,"")),E=E.replace(/@\*/g,fo).replace(/@\w+/g,m=>fo+"-"+m.slice(1)).replace(/:animating/g,Al),[E,f]}(f.selector);m.currentQuerySelector=T.length?T+" "+U:U,Ei(m.collectedStyles,m.currentQuerySelector,new Map);const J=we(this,ks(f.animation),m);return m.currentQuery=null,m.currentQuerySelector=T,{type:jt.mo.Query,selector:U,limit:P.limit||0,optional:!!P.optional,includeSelf:W,animation:J,originalSelector:f.selector,options:Su(f.options)}}visitStagger(f,m){m.currentQuery||m.errors.push(function Tn(){return new H.vHH(3013,!1)}());const T="full"===f.timings?{duration:0,delay:0,easing:"full"}:tc(f.timings,m.errors,!0);return{type:jt.mo.Stagger,animation:we(this,ks(f.animation),m),timings:T,options:null}}}class nl{constructor(f){this.errors=f,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Su(E){return E?(E={...E}).params&&(E.params=function xh(E){return E?{...E}:null}(E.params)):E={},E}function bc(E,f,m){return{duration:E,delay:f,easing:m}}function sc(E,f,m,T,P,U,W=null,J=!1){return{type:1,element:E,keyframes:f,preStyleProps:m,postStyleProps:T,duration:P,delay:U,totalTime:P+U,easing:W,subTimeline:J}}class Rc{constructor(){this._map=new Map}get(f){return this._map.get(f)||[]}append(f,m){let T=this._map.get(f);T||this._map.set(f,T=[]),T.push(...m)}has(f){return this._map.has(f)}clear(){this._map.clear()}}const rl=new RegExp(":enter","g"),Ea=new RegExp(":leave","g");function Ot(E,f,m,T,P,U=new Map,W=new Map,J,ae,_e=[]){return(new il).buildKeyframes(E,f,m,T,P,U,W,J,ae,_e)}class il{buildKeyframes(f,m,T,P,U,W,J,ae,_e,et=[]){_e=_e||new Rc;const gt=new wr(f,m,_e,P,U,et,[]);gt.options=ae;const nn=ae.delay?Qi(ae.delay):0;gt.currentTimeline.delayNextStep(nn),gt.currentTimeline.setStyles([W],null,gt.errors,ae),we(this,T,gt);const it=gt.timelines.filter(bt=>bt.containsAnimation());if(it.length&&J.size){let bt;for(let Mt=it.length-1;Mt>=0;Mt--){const An=it[Mt];if(An.element===m){bt=An;break}}bt&&!bt.allowOnlyTimelineStyles()&&bt.setStyles([J],null,gt.errors,ae)}return it.length?it.map(bt=>bt.buildKeyframes()):[sc(m,[],[],[],0,nn,"",!1)]}visitTrigger(f,m){}visitState(f,m){}visitTransition(f,m){}visitAnimateChild(f,m){const T=m.subInstructions.get(m.element);if(T){const P=m.createSubContext(f.options),U=m.currentTimeline.currentTime,W=this._visitSubInstructions(T,P,P.options);U!=W&&m.transformIntoNewTimeline(W)}m.previousNode=f}visitAnimateRef(f,m){const T=m.createSubContext(f.options);T.transformIntoNewTimeline(),this._applyAnimationRefDelays([f.options,f.animation.options],m,T),this.visitReference(f.animation,T),m.transformIntoNewTimeline(T.currentTimeline.currentTime),m.previousNode=f}_applyAnimationRefDelays(f,m,T){for(const P of f){const U=P?.delay;if(U){const W="number"==typeof U?U:Qi(S(U,P?.params??{},m.errors));T.delayNextStep(W)}}}_visitSubInstructions(f,m,T){let U=m.currentTimeline.currentTime;const W=null!=T.duration?Qi(T.duration):null,J=null!=T.delay?Qi(T.delay):null;return 0!==W&&f.forEach(ae=>{const _e=m.appendInstructionToTimeline(ae,W,J);U=Math.max(U,_e.duration+_e.delay)}),U}visitReference(f,m){m.updateOptions(f.options,!0),we(this,f.animation,m),m.previousNode=f}visitSequence(f,m){const T=m.subContextCount;let P=m;const U=f.options;if(U&&(U.params||U.delay)&&(P=m.createSubContext(U),P.transformIntoNewTimeline(),null!=U.delay)){P.previousNode.type==jt.mo.Style&&(P.currentTimeline.snapshotCurrentStyles(),P.previousNode=$i);const W=Qi(U.delay);P.delayNextStep(W)}f.steps.length&&(f.steps.forEach(W=>we(this,W,P)),P.currentTimeline.applyStylesToKeyframe(),P.subContextCount>T&&P.transformIntoNewTimeline()),m.previousNode=f}visitGroup(f,m){const T=[];let P=m.currentTimeline.currentTime;const U=f.options&&f.options.delay?Qi(f.options.delay):0;f.steps.forEach(W=>{const J=m.createSubContext(f.options);U&&J.delayNextStep(U),we(this,W,J),P=Math.max(P,J.currentTimeline.currentTime),T.push(J.currentTimeline)}),T.forEach(W=>m.currentTimeline.mergeTimelineCollectedStyles(W)),m.transformIntoNewTimeline(P),m.previousNode=f}_visitTiming(f,m){if(f.dynamic){const T=f.strValue;return tc(m.params?S(T,m.params,m.errors):T,m.errors)}return{duration:f.duration,delay:f.delay,easing:f.easing}}visitAnimate(f,m){const T=m.currentAnimateTimings=this._visitTiming(f.timings,m),P=m.currentTimeline;T.delay&&(m.incrementTime(T.delay),P.snapshotCurrentStyles());const U=f.style;U.type==jt.mo.Keyframes?this.visitKeyframes(U,m):(m.incrementTime(T.duration),this.visitStyle(U,m),P.applyStylesToKeyframe()),m.currentAnimateTimings=null,m.previousNode=f}visitStyle(f,m){const T=m.currentTimeline,P=m.currentAnimateTimings;!P&&T.hasCurrentStyleProperties()&&T.forwardFrame();const U=P&&P.easing||f.easing;f.isEmptyStep?T.applyEmptyStep(U):T.setStyles(f.styles,U,m.errors,m.options),m.previousNode=f}visitKeyframes(f,m){const T=m.currentAnimateTimings,P=m.currentTimeline.duration,U=T.duration,J=m.createSubContext().currentTimeline;J.easing=T.easing,f.styles.forEach(ae=>{J.forwardTime((ae.offset||0)*U),J.setStyles(ae.styles,ae.easing,m.errors,m.options),J.applyStylesToKeyframe()}),m.currentTimeline.mergeTimelineCollectedStyles(J),m.transformIntoNewTimeline(P+U),m.previousNode=f}visitQuery(f,m){const T=m.currentTimeline.currentTime,P=f.options||{},U=P.delay?Qi(P.delay):0;U&&(m.previousNode.type===jt.mo.Style||0==T&&m.currentTimeline.hasCurrentStyleProperties())&&(m.currentTimeline.snapshotCurrentStyles(),m.previousNode=$i);let W=T;const J=m.invokeQuery(f.selector,f.originalSelector,f.limit,f.includeSelf,!!P.optional,m.errors);m.currentQueryTotal=J.length;let ae=null;J.forEach((_e,et)=>{m.currentQueryIndex=et;const gt=m.createSubContext(f.options,_e);U&&gt.delayNextStep(U),_e===m.element&&(ae=gt.currentTimeline),we(this,f.animation,gt),gt.currentTimeline.applyStylesToKeyframe(),W=Math.max(W,gt.currentTimeline.currentTime)}),m.currentQueryIndex=0,m.currentQueryTotal=0,m.transformIntoNewTimeline(W),ae&&(m.currentTimeline.mergeTimelineCollectedStyles(ae),m.currentTimeline.snapshotCurrentStyles()),m.previousNode=f}visitStagger(f,m){const T=m.parentContext,P=m.currentTimeline,U=f.timings,W=Math.abs(U.duration),J=W*(m.currentQueryTotal-1);let ae=W*m.currentQueryIndex;switch(U.duration<0?"reverse":U.easing){case"reverse":ae=J-ae;break;case"full":ae=T.currentStaggerTime}const et=m.currentTimeline;ae&&et.delayNextStep(ae);const gt=et.currentTime;we(this,f.animation,m),m.previousNode=f,T.currentStaggerTime=P.currentTime-gt+(P.startTime-T.currentTimeline.startTime)}}const $i={};class wr{constructor(f,m,T,P,U,W,J,ae){this._driver=f,this.element=m,this.subInstructions=T,this._enterClassName=P,this._leaveClassName=U,this.errors=W,this.timelines=J,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=$i,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ae||new Pc(this._driver,m,0),J.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(f,m){if(!f)return;const T=f;let P=this.options;null!=T.duration&&(P.duration=Qi(T.duration)),null!=T.delay&&(P.delay=Qi(T.delay));const U=T.params;if(U){let W=P.params;W||(W=this.options.params={}),Object.keys(U).forEach(J=>{(!m||!W.hasOwnProperty(J))&&(W[J]=S(U[J],W,this.errors))})}}_copyOptions(){const f={};if(this.options){const m=this.options.params;if(m){const T=f.params={};Object.keys(m).forEach(P=>{T[P]=m[P]})}}return f}createSubContext(f=null,m,T){const P=m||this.element,U=new wr(this._driver,P,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(P,T||0));return U.previousNode=this.previousNode,U.currentAnimateTimings=this.currentAnimateTimings,U.options=this._copyOptions(),U.updateOptions(f),U.currentQueryIndex=this.currentQueryIndex,U.currentQueryTotal=this.currentQueryTotal,U.parentContext=this,this.subContextCount++,U}transformIntoNewTimeline(f){return this.previousNode=$i,this.currentTimeline=this.currentTimeline.fork(this.element,f),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(f,m,T){const P={duration:m??f.duration,delay:this.currentTimeline.currentTime+(T??0)+f.delay,easing:""},U=new Mc(this._driver,f.element,f.keyframes,f.preStyleProps,f.postStyleProps,P,f.stretchStartingKeyframe);return this.timelines.push(U),P}incrementTime(f){this.currentTimeline.forwardTime(this.currentTimeline.duration+f)}delayNextStep(f){f>0&&this.currentTimeline.delayNextStep(f)}invokeQuery(f,m,T,P,U,W){let J=[];if(P&&J.push(this.element),f.length>0){f=(f=f.replace(rl,"."+this._enterClassName)).replace(Ea,"."+this._leaveClassName);let _e=this._driver.query(this.element,f,1!=T);0!==T&&(_e=T<0?_e.slice(_e.length+T,_e.length):_e.slice(0,T)),J.push(..._e)}return!U&&0==J.length&&W.push(function ui(E){return new H.vHH(3014,!1)}()),J}}class Pc{constructor(f,m,T,P){this._driver=f,this.element=m,this.startTime=T,this._elementTimelineStylesLookup=P,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(m),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(m,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(f){const m=1===this._keyframes.size&&this._pendingStyles.size;this.duration||m?(this.forwardTime(this.currentTime+f),m&&this.snapshotCurrentStyles()):this.startTime+=f}fork(f,m){return this.applyStylesToKeyframe(),new Pc(this._driver,f,m||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(f){this.applyStylesToKeyframe(),this.duration=f,this._loadKeyframe()}_updateStyle(f,m){this._localTimelineStyles.set(f,m),this._globalTimelineStyles.set(f,m),this._styleSummary.set(f,{time:this.currentTime,value:m})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(f){f&&this._previousKeyframe.set("easing",f);for(let[m,T]of this._globalTimelineStyles)this._backFill.set(m,T||jt.l3),this._currentKeyframe.set(m,jt.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(f,m,T,P){m&&this._previousKeyframe.set("easing",m);const U=P&&P.params||{},W=function Ya(E,f){const m=new Map;let T;return E.forEach(P=>{if("*"===P){T??=f.keys();for(let U of T)m.set(U,jt.l3)}else for(let[U,W]of P)m.set(U,W)}),m}(f,this._globalTimelineStyles);for(let[J,ae]of W){const _e=S(ae,U,T);this._pendingStyles.set(J,_e),this._localTimelineStyles.has(J)||this._backFill.set(J,this._globalTimelineStyles.get(J)??jt.l3),this._updateStyle(J,_e)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((f,m)=>{this._currentKeyframe.set(m,f)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((f,m)=>{this._currentKeyframe.has(m)||this._currentKeyframe.set(m,f)}))}snapshotCurrentStyles(){for(let[f,m]of this._localTimelineStyles)this._pendingStyles.set(f,m),this._updateStyle(f,m)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const f=[];for(let m in this._currentKeyframe)f.push(m);return f}mergeTimelineCollectedStyles(f){f._styleSummary.forEach((m,T)=>{const P=this._styleSummary.get(T);(!P||m.time>P.time)&&this._updateStyle(T,m.value)})}buildKeyframes(){this.applyStylesToKeyframe();const f=new Set,m=new Set,T=1===this._keyframes.size&&0===this.duration;let P=[];this._keyframes.forEach((J,ae)=>{const _e=new Map([...this._backFill,...J]);_e.forEach((et,gt)=>{et===jt.k1?f.add(gt):et===jt.l3&&m.add(gt)}),T||_e.set("offset",ae/this.duration),P.push(_e)});const U=[...f.values()],W=[...m.values()];if(T){const J=P[0],ae=new Map(J);J.set("offset",0),ae.set("offset",1),P=[J,ae]}return sc(this.element,P,U,W,this.duration,this.startTime,this.easing,!1)}}class Mc extends Pc{constructor(f,m,T,P,U,W,J=!1){super(f,m,W.delay),this.keyframes=T,this.preStyleProps=P,this.postStyleProps=U,this._stretchStartingKeyframe=J,this.timings={duration:W.duration,delay:W.delay,easing:W.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let f=this.keyframes,{delay:m,duration:T,easing:P}=this.timings;if(this._stretchStartingKeyframe&&m){const U=[],W=T+m,J=m/W,ae=new Map(f[0]);ae.set("offset",0),U.push(ae);const _e=new Map(f[0]);_e.set("offset",Ts(J)),U.push(_e);const et=f.length-1;for(let gt=1;gt<=et;gt++){let nn=new Map(f[gt]);const it=nn.get("offset");nn.set("offset",Ts((m+it*T)/W)),U.push(nn)}T=W,m=0,P="",f=U}return sc(this.element,f,this.preStyleProps,this.postStyleProps,T,m,P,!0)}}function Ts(E,f=3){const m=Math.pow(10,f-1);return Math.round(E*m)/m}function Wd(E,f,m,T,P,U,W,J,ae,_e,et,gt,nn){return{type:0,element:E,triggerName:f,isRemovalTransition:P,fromState:m,fromStyles:U,toState:T,toStyles:W,timelines:J,queriedElements:ae,preStyleProps:_e,postStyleProps:et,totalTime:gt,errors:nn}}const Hi={};class Pl{constructor(f,m,T){this._triggerName=f,this.ast=m,this._stateStyles=T}match(f,m,T,P){return function Ni(E,f,m,T,P){return E.some(U=>U(f,m,T,P))}(this.ast.matchers,f,m,T,P)}buildStyles(f,m,T){let P=this._stateStyles.get("*");return void 0!==f&&(P=this._stateStyles.get(f?.toString())||P),P?P.buildStyles(m,T):new Map}build(f,m,T,P,U,W,J,ae,_e,et){const gt=[],nn=this.ast.options&&this.ast.options.params||Hi,bt=this.buildStyles(T,J&&J.params||Hi,gt),Mt=ae&&ae.params||Hi,An=this.buildStyles(P,Mt,gt),vr=new Set,Dr=new Map,ir=new Map,tr="void"===P,Ss={params:We(Mt,nn),delay:this.ast.options?.delay},ki=et?[]:Ot(f,m,this.ast.animation,U,W,bt,An,Ss,_e,gt);let ci=0;return ki.forEach(Lr=>{ci=Math.max(Lr.duration+Lr.delay,ci)}),gt.length?Wd(m,this._triggerName,T,P,tr,bt,An,[],[],Dr,ir,ci,gt):(ki.forEach(Lr=>{const Fs=Lr.element,vo=Ei(Dr,Fs,new Set);Lr.preStyleProps.forEach(ko=>vo.add(ko));const vd=Ei(ir,Fs,new Set);Lr.postStyleProps.forEach(ko=>vd.add(ko)),Fs!==m&&vr.add(Fs)}),Wd(m,this._triggerName,T,P,tr,bt,An,ki,[...vr.values()],Dr,ir,ci))}}function We(E,f){const m={...f};return Object.entries(E).forEach(([T,P])=>{null!=P&&(m[T]=P)}),m}class $n{constructor(f,m,T){this.styles=f,this.defaultParams=m,this.normalizer=T}buildStyles(f,m){const T=new Map,P=We(f,this.defaultParams);return this.styles.styles.forEach(U=>{"string"!=typeof U&&U.forEach((W,J)=>{W&&(W=S(W,P,m));const ae=this.normalizer.normalizePropertyName(J,m);W=this.normalizer.normalizeStyleValue(J,ae,W,m),T.set(J,W)})}),T}}class Xa{constructor(f,m,T){this.name=f,this.ast=m,this._normalizer=T,this.transitionFactories=[],this.states=new Map,m.states.forEach(P=>{this.states.set(P.name,new $n(P.style,P.options&&P.options.params||{},T))}),ta(this.states,"true","1"),ta(this.states,"false","0"),m.transitions.forEach(P=>{this.transitionFactories.push(new Pl(f,P,this.states))}),this.fallbackTransition=function Tr(E,f,m){return new Pl(E,{type:jt.mo.Transition,animation:{type:jt.mo.Sequence,steps:[],options:null},matchers:[(W,J)=>!0],options:null,queryCount:0,depCount:0},f)}(f,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(f,m,T,P){return this.transitionFactories.find(W=>W.match(f,m,T,P))||null}matchStyles(f,m,T){return this.fallbackTransition.buildStyles(f,m,T)}}function ta(E,f,m){E.has(f)?E.has(m)||E.set(m,E.get(f)):E.has(m)&&E.set(f,E.get(m))}const Qs=new Rc;class _o{constructor(f,m,T){this.bodyNode=f,this._driver=m,this._normalizer=T,this._animations=new Map,this._playersById=new Map,this.players=[]}register(f,m){const T=[],U=dd(this._driver,m,T,[]);if(T.length)throw function Qr(E){return new H.vHH(3503,!1)}();this._animations.set(f,U)}_buildPlayer(f,m,T){const P=f.element,U=za(this._normalizer,f.keyframes,m,T);return this._driver.animate(P,U,f.duration,f.delay,f.easing,[],!0)}create(f,m,T={}){const P=[],U=this._animations.get(f);let W;const J=new Map;if(U?(W=Ot(this._driver,m,U,wu,Mo,new Map,new Map,T,Qs,P),W.forEach(et=>{const gt=Ei(J,et.element,new Map);et.postStyleProps.forEach(nn=>gt.set(nn,null))})):(P.push(function Yr(){return new H.vHH(3300,!1)}()),W=[]),P.length)throw function Xe(E){return new H.vHH(3504,!1)}();J.forEach((et,gt)=>{et.forEach((nn,it)=>{et.set(it,this._driver.computeStyle(gt,it,jt.l3))})});const _e=Ir(W.map(et=>{const gt=J.get(et.element);return this._buildPlayer(et,new Map,gt)}));return this._playersById.set(f,_e),_e.onDestroy(()=>this.destroy(f)),this.players.push(_e),_e}destroy(f){const m=this._getPlayer(f);m.destroy(),this._playersById.delete(f);const T=this.players.indexOf(m);T>=0&&this.players.splice(T,1)}_getPlayer(f){const m=this._playersById.get(f);if(!m)throw function yr(E){return new H.vHH(3301,!1)}();return m}listen(f,m,T,P){const U=ho(m,"","","");return as(this._getPlayer(f),T,U,P),()=>{}}command(f,m,T,P){if("register"==T)return void this.register(f,P[0]);if("create"==T)return void this.create(f,m,P[0]||{});const U=this._getPlayer(f);switch(T){case"play":U.play();break;case"pause":U.pause();break;case"reset":U.reset();break;case"restart":U.restart();break;case"finish":U.finish();break;case"init":U.init();break;case"setPosition":U.setPosition(parseFloat(P[0]));break;case"destroy":this.destroy(f)}}}const Oo="ng-animate-queued",Cu="ng-animate-disabled",na=[],Nc={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},fs={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ii="__ng_removed";class cc{get params(){return this.options.params}constructor(f,m=""){this.namespaceId=m;const T=f&&f.hasOwnProperty("value");if(this.value=function Ol(E){return E??null}(T?f.value:f),T){const{value:U,...W}=f;this.options=W}else this.options={};this.options.params||(this.options.params={})}absorbOptions(f){const m=f.params;if(m){const T=this.options.params;Object.keys(m).forEach(P=>{null==T[P]&&(T[P]=m[P])})}}}const lc="void",sl=new cc(lc);class Nl{constructor(f,m,T){this.id=f,this.hostElement=m,this._engine=T,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+f,xi(m,this._hostClassName)}listen(f,m,T,P){if(!this._triggers.has(m))throw function _n(E,f){return new H.vHH(3302,!1)}();if(null==T||0==T.length)throw function ri(E){return new H.vHH(3303,!1)}();if(!function fd(E){return"start"==E||"done"==E}(T))throw function wt(E,f){return new H.vHH(3400,!1)}();const U=Ei(this._elementListeners,f,[]),W={name:m,phase:T,callback:P};U.push(W);const J=Ei(this._engine.statesByElement,f,new Map);return J.has(m)||(xi(f,ec),xi(f,ec+"-"+m),J.set(m,sl)),()=>{this._engine.afterFlush(()=>{const ae=U.indexOf(W);ae>=0&&U.splice(ae,1),this._triggers.has(m)||J.delete(m)})}}register(f,m){return!this._triggers.has(f)&&(this._triggers.set(f,m),!0)}_getTrigger(f){const m=this._triggers.get(f);if(!m)throw function st(E){return new H.vHH(3401,!1)}();return m}trigger(f,m,T,P=!0){const U=this._getTrigger(m),W=new Oc(this.id,m,f);let J=this._engine.statesByElement.get(f);J||(xi(f,ec),xi(f,ec+"-"+m),this._engine.statesByElement.set(f,J=new Map));let ae=J.get(m);const _e=new cc(T,this.id);if(!(T&&T.hasOwnProperty("value"))&&ae&&_e.absorbOptions(ae.options),J.set(m,_e),ae||(ae=sl),_e.value!==lc&&ae.value===_e.value){if(!function bu(E,f){const m=Object.keys(E),T=Object.keys(f);if(m.length!=T.length)return!1;for(let P=0;P<m.length;P++){const U=m[P];if(!f.hasOwnProperty(U)||E[U]!==f[U])return!1}return!0}(ae.params,_e.params)){const Mt=[],An=U.matchStyles(ae.value,ae.params,Mt),vr=U.matchStyles(_e.value,_e.params,Mt);Mt.length?this._engine.reportError(Mt):this._engine.afterFlush(()=>{po(f,An),be(f,vr)})}return}const nn=Ei(this._engine.playersByElement,f,[]);nn.forEach(Mt=>{Mt.namespaceId==this.id&&Mt.triggerName==m&&Mt.queued&&Mt.destroy()});let it=U.matchTransition(ae.value,_e.value,f,_e.params),bt=!1;if(!it){if(!P)return;it=U.fallbackTransition,bt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:f,triggerName:m,transition:it,fromState:ae,toState:_e,player:W,isFallbackTransition:bt}),bt||(xi(f,Oo),W.onStart(()=>{Au(f,Oo)})),W.onDone(()=>{let Mt=this.players.indexOf(W);Mt>=0&&this.players.splice(Mt,1);const An=this._engine.playersByElement.get(f);if(An){let vr=An.indexOf(W);vr>=0&&An.splice(vr,1)}}),this.players.push(W),nn.push(W),W}deregister(f){this._triggers.delete(f),this._engine.statesByElement.forEach(m=>m.delete(f)),this._elementListeners.forEach((m,T)=>{this._elementListeners.set(T,m.filter(P=>P.name!=f))})}clearElementCache(f){this._engine.statesByElement.delete(f),this._elementListeners.delete(f);const m=this._engine.playersByElement.get(f);m&&(m.forEach(T=>T.destroy()),this._engine.playersByElement.delete(f))}_signalRemovalForInnerTriggers(f,m){const T=this._engine.driver.query(f,fo,!0);T.forEach(P=>{if(P[Ii])return;const U=this._engine.fetchNamespacesByElement(P);U.size?U.forEach(W=>W.triggerLeaveAnimation(P,m,!1,!0)):this.clearElementCache(P)}),this._engine.afterFlushAnimationsDone(()=>T.forEach(P=>this.clearElementCache(P)))}triggerLeaveAnimation(f,m,T,P){const U=this._engine.statesByElement.get(f),W=new Map;if(U){const J=[];if(U.forEach((ae,_e)=>{if(W.set(_e,ae.value),this._triggers.has(_e)){const et=this.trigger(f,_e,lc,P);et&&J.push(et)}}),J.length)return this._engine.markElementAsRemoved(this.id,f,!0,m,W),T&&Ir(J).onDone(()=>this._engine.processLeaveNode(f)),!0}return!1}prepareLeaveAnimationListeners(f){const m=this._elementListeners.get(f),T=this._engine.statesByElement.get(f);if(m&&T){const P=new Set;m.forEach(U=>{const W=U.name;if(P.has(W))return;P.add(W);const ae=this._triggers.get(W).fallbackTransition,_e=T.get(W)||sl,et=new cc(lc),gt=new Oc(this.id,W,f);this._engine.totalQueuedPlayers++,this._queue.push({element:f,triggerName:W,transition:ae,fromState:_e,toState:et,player:gt,isFallbackTransition:!0})})}}removeNode(f,m){const T=this._engine;if(f.childElementCount&&this._signalRemovalForInnerTriggers(f,m),this.triggerLeaveAnimation(f,m,!0))return;let P=!1;if(T.totalAnimations){const U=T.players.length?T.playersByQueriedElement.get(f):[];if(U&&U.length)P=!0;else{let W=f;for(;W=W.parentNode;)if(T.statesByElement.get(W)){P=!0;break}}}if(this.prepareLeaveAnimationListeners(f),P)T.markElementAsRemoved(this.id,f,!1,m);else{const U=f[Ii];(!U||U===Nc)&&(T.afterFlush(()=>this.clearElementCache(f)),T.destroyInnerAnimations(f),T._onRemovalComplete(f,m))}}insertNode(f,m){xi(f,this._hostClassName)}drainQueuedTransitions(f){const m=[];return this._queue.forEach(T=>{const P=T.player;if(P.destroyed)return;const U=T.element,W=this._elementListeners.get(U);W&&W.forEach(J=>{if(J.name==T.triggerName){const ae=ho(U,T.triggerName,T.fromState.value,T.toState.value);ae._data=f,as(T.player,J.phase,ae,J.callback)}}),P.markedForDestroy?this._engine.afterFlush(()=>{P.destroy()}):m.push(T)}),this._queue=[],m.sort((T,P)=>{const U=T.transition.ast.depCount,W=P.transition.ast.depCount;return 0==U||0==W?U-W:this._engine.driver.containsElement(T.element,P.element)?1:-1})}destroy(f){this.players.forEach(m=>m.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,f)}}class Ia{_onRemovalComplete(f,m){this.onRemovalComplete(f,m)}constructor(f,m,T,P){this.bodyNode=f,this.driver=m,this._normalizer=T,this.scheduler=P,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(U,W)=>{}}get queuedPlayers(){const f=[];return this._namespaceList.forEach(m=>{m.players.forEach(T=>{T.queued&&f.push(T)})}),f}createNamespace(f,m){const T=new Nl(f,m,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,m)?this._balanceNamespaceList(T,m):(this.newHostElements.set(m,T),this.collectEnterElement(m)),this._namespaceLookup[f]=T}_balanceNamespaceList(f,m){const T=this._namespaceList,P=this.namespacesByHostElement;if(T.length-1>=0){let W=!1,J=this.driver.getParentElement(m);for(;J;){const ae=P.get(J);if(ae){const _e=T.indexOf(ae);T.splice(_e+1,0,f),W=!0;break}J=this.driver.getParentElement(J)}W||T.unshift(f)}else T.push(f);return P.set(m,f),f}register(f,m){let T=this._namespaceLookup[f];return T||(T=this.createNamespace(f,m)),T}registerTrigger(f,m,T){let P=this._namespaceLookup[f];P&&P.register(m,T)&&this.totalAnimations++}destroy(f,m){f&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const T=this._fetchNamespace(f);this.namespacesByHostElement.delete(T.hostElement);const P=this._namespaceList.indexOf(T);P>=0&&this._namespaceList.splice(P,1),T.destroy(m),delete this._namespaceLookup[f]}))}_fetchNamespace(f){return this._namespaceLookup[f]}fetchNamespacesByElement(f){const m=new Set,T=this.statesByElement.get(f);if(T)for(let P of T.values())if(P.namespaceId){const U=this._fetchNamespace(P.namespaceId);U&&m.add(U)}return m}trigger(f,m,T,P){if(ol(m)){const U=this._fetchNamespace(f);if(U)return U.trigger(m,T,P),!0}return!1}insertNode(f,m,T,P){if(!ol(m))return;const U=m[Ii];if(U&&U.setForRemoval){U.setForRemoval=!1,U.setForMove=!0;const W=this.collectedLeaveElements.indexOf(m);W>=0&&this.collectedLeaveElements.splice(W,1)}if(f){const W=this._fetchNamespace(f);W&&W.insertNode(m,T)}P&&this.collectEnterElement(m)}collectEnterElement(f){this.collectedEnterElements.push(f)}markElementAsDisabled(f,m){m?this.disabledNodes.has(f)||(this.disabledNodes.add(f),xi(f,Cu)):this.disabledNodes.has(f)&&(this.disabledNodes.delete(f),Au(f,Cu))}removeNode(f,m,T){if(ol(m)){this.scheduler?.notify();const P=f?this._fetchNamespace(f):null;P?P.removeNode(m,T):this.markElementAsRemoved(f,m,!1,T);const U=this.namespacesByHostElement.get(m);U&&U.id!==f&&U.removeNode(m,T)}else this._onRemovalComplete(m,T)}markElementAsRemoved(f,m,T,P,U){this.collectedLeaveElements.push(m),m[Ii]={namespaceId:f,setForRemoval:P,hasAnimation:T,removedBeforeQueried:!1,previousTriggersValues:U}}listen(f,m,T,P,U){return ol(m)?this._fetchNamespace(f).listen(m,T,P,U):()=>{}}_buildInstruction(f,m,T,P,U){return f.transition.build(this.driver,f.element,f.fromState.value,f.toState.value,T,P,f.fromState.options,f.toState.options,m,U)}destroyInnerAnimations(f){let m=this.driver.query(f,fo,!0);m.forEach(T=>this.destroyActiveAnimationsForElement(T)),0!=this.playersByQueriedElement.size&&(m=this.driver.query(f,Al,!0),m.forEach(T=>this.finishActiveQueriedAnimationOnElement(T)))}destroyActiveAnimationsForElement(f){const m=this.playersByElement.get(f);m&&m.forEach(T=>{T.queued?T.markedForDestroy=!0:T.destroy()})}finishActiveQueriedAnimationOnElement(f){const m=this.playersByQueriedElement.get(f);m&&m.forEach(T=>T.finish())}whenRenderingDone(){return new Promise(f=>{if(this.players.length)return Ir(this.players).onDone(()=>f());f()})}processLeaveNode(f){const m=f[Ii];if(m&&m.setForRemoval){if(f[Ii]=Nc,m.namespaceId){this.destroyInnerAnimations(f);const T=this._fetchNamespace(m.namespaceId);T&&T.clearElementCache(f)}this._onRemovalComplete(f,m.setForRemoval)}f.classList?.contains(Cu)&&this.markElementAsDisabled(f,!1),this.driver.query(f,".ng-animate-disabled",!0).forEach(T=>{this.markElementAsDisabled(T,!1)})}flush(f=-1){let m=[];if(this.newHostElements.size&&(this.newHostElements.forEach((T,P)=>this._balanceNamespaceList(T,P)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let T=0;T<this.collectedEnterElements.length;T++)xi(this.collectedEnterElements[T],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const T=[];try{m=this._flushAnimations(T,f)}finally{for(let P=0;P<T.length;P++)T[P]()}}else for(let T=0;T<this.collectedLeaveElements.length;T++)this.processLeaveNode(this.collectedLeaveElements[T]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(T=>T()),this._flushFns=[],this._whenQuietFns.length){const T=this._whenQuietFns;this._whenQuietFns=[],m.length?Ir(m).onDone(()=>{T.forEach(P=>P())}):T.forEach(P=>P())}}reportError(f){throw function ya(E){return new H.vHH(3402,!1)}()}_flushAnimations(f,m){const T=new Rc,P=[],U=new Map,W=[],J=new Map,ae=new Map,_e=new Map,et=new Set;this.disabledNodes.forEach(Zt=>{et.add(Zt);const dn=this.driver.query(Zt,".ng-animate-queued",!0);for(let Ft=0;Ft<dn.length;Ft++)et.add(dn[Ft])});const gt=this.bodyNode,nn=Array.from(this.statesByElement.keys()),it=Xr(nn,this.collectedEnterElements),bt=new Map;let Mt=0;it.forEach((Zt,dn)=>{const Ft=wu+Mt++;bt.set(dn,Ft),Zt.forEach(sr=>xi(sr,Ft))});const An=[],vr=new Set,Dr=new Set;for(let Zt=0;Zt<this.collectedLeaveElements.length;Zt++){const dn=this.collectedLeaveElements[Zt],Ft=dn[Ii];Ft&&Ft.setForRemoval&&(An.push(dn),vr.add(dn),Ft.hasAnimation?this.driver.query(dn,".ng-star-inserted",!0).forEach(sr=>vr.add(sr)):Dr.add(dn))}const ir=new Map,tr=Xr(nn,Array.from(vr));tr.forEach((Zt,dn)=>{const Ft=Mo+Mt++;ir.set(dn,Ft),Zt.forEach(sr=>xi(sr,Ft))}),f.push(()=>{it.forEach((Zt,dn)=>{const Ft=bt.get(dn);Zt.forEach(sr=>Au(sr,Ft))}),tr.forEach((Zt,dn)=>{const Ft=ir.get(dn);Zt.forEach(sr=>Au(sr,Ft))}),An.forEach(Zt=>{this.processLeaveNode(Zt)})});const Ss=[],ki=[];for(let Zt=this._namespaceList.length-1;Zt>=0;Zt--)this._namespaceList[Zt].drainQueuedTransitions(m).forEach(Ft=>{const sr=Ft.player,cr=Ft.element;if(Ss.push(sr),this.collectedEnterElements.length){const fr=cr[Ii];if(fr&&fr.setForMove){if(fr.previousTriggersValues&&fr.previousTriggersValues.has(Ft.triggerName)){const eu=fr.previousTriggersValues.get(Ft.triggerName),oi=this.statesByElement.get(Ft.element);if(oi&&oi.has(Ft.triggerName)){const jc=oi.get(Ft.triggerName);jc.value=eu,oi.set(Ft.triggerName,jc)}}return void sr.destroy()}}const Cs=!gt||!this.driver.containsElement(gt,cr),ii=ir.get(cr),sa=bt.get(cr),si=this._buildInstruction(Ft,T,sa,ii,Cs);if(si.errors&&si.errors.length)return void ki.push(si);if(Cs)return sr.onStart(()=>po(cr,si.fromStyles)),sr.onDestroy(()=>be(cr,si.toStyles)),void P.push(sr);if(Ft.isFallbackTransition)return sr.onStart(()=>po(cr,si.fromStyles)),sr.onDestroy(()=>be(cr,si.toStyles)),void P.push(sr);const jl=[];si.timelines.forEach(fr=>{fr.stretchStartingKeyframe=!0,this.disabledNodes.has(fr.element)||jl.push(fr)}),si.timelines=jl,T.append(cr,si.timelines),W.push({instruction:si,player:sr,element:cr}),si.queriedElements.forEach(fr=>Ei(J,fr,[]).push(sr)),si.preStyleProps.forEach((fr,eu)=>{if(fr.size){let oi=ae.get(eu);oi||ae.set(eu,oi=new Set),fr.forEach((jc,xu)=>oi.add(xu))}}),si.postStyleProps.forEach((fr,eu)=>{let oi=_e.get(eu);oi||_e.set(eu,oi=new Set),fr.forEach((jc,xu)=>oi.add(xu))})});if(ki.length){const Zt=[];ki.forEach(dn=>{Zt.push(function je(E,f){return new H.vHH(3505,!1)}())}),Ss.forEach(dn=>dn.destroy()),this.reportError(Zt)}const ci=new Map,Lr=new Map;W.forEach(Zt=>{const dn=Zt.element;T.has(dn)&&(Lr.set(dn,dn),this._beforeAnimationBuild(Zt.player.namespaceId,Zt.instruction,ci))}),P.forEach(Zt=>{const dn=Zt.element;this._getPreviousPlayers(dn,!1,Zt.namespaceId,Zt.triggerName,null).forEach(sr=>{Ei(ci,dn,[]).push(sr),sr.destroy()})});const Fs=An.filter(Zt=>Xt(Zt,ae,_e)),vo=new Map;xl(vo,this.driver,Dr,_e,jt.l3).forEach(Zt=>{Xt(Zt,ae,_e)&&Fs.push(Zt)});const ko=new Map;it.forEach((Zt,dn)=>{xl(ko,this.driver,new Set(Zt),ae,jt.k1)}),Fs.forEach(Zt=>{const dn=vo.get(Zt),Ft=ko.get(Zt);vo.set(Zt,new Map([...dn?.entries()??[],...Ft?.entries()??[]]))});const hl=[],Bc=[],Nu={};W.forEach(Zt=>{const{element:dn,player:Ft,instruction:sr}=Zt;if(T.has(dn)){if(et.has(dn))return Ft.onDestroy(()=>be(dn,sr.toStyles)),Ft.disabled=!0,Ft.overrideTotalTime(sr.totalTime),void P.push(Ft);let cr=Nu;if(Lr.size>1){let ii=dn;const sa=[];for(;ii=ii.parentNode;){const si=Lr.get(ii);if(si){cr=si;break}sa.push(ii)}sa.forEach(si=>Lr.set(si,cr))}const Cs=this._buildAnimation(Ft.namespaceId,sr,ci,U,ko,vo);if(Ft.setRealPlayer(Cs),cr===Nu)hl.push(Ft);else{const ii=this.playersByElement.get(cr);ii&&ii.length&&(Ft.parentPlayer=Ir(ii)),P.push(Ft)}}else po(dn,sr.fromStyles),Ft.onDestroy(()=>be(dn,sr.toStyles)),Bc.push(Ft),et.has(dn)&&P.push(Ft)}),Bc.forEach(Zt=>{const dn=U.get(Zt.element);if(dn&&dn.length){const Ft=Ir(dn);Zt.setRealPlayer(Ft)}}),P.forEach(Zt=>{Zt.parentPlayer?Zt.syncPlayerEvents(Zt.parentPlayer):Zt.destroy()});for(let Zt=0;Zt<An.length;Zt++){const dn=An[Zt],Ft=dn[Ii];if(Au(dn,Mo),Ft&&Ft.hasAnimation)continue;let sr=[];if(J.size){let Cs=J.get(dn);Cs&&Cs.length&&sr.push(...Cs);let ii=this.driver.query(dn,Al,!0);for(let sa=0;sa<ii.length;sa++){let si=J.get(ii[sa]);si&&si.length&&sr.push(...si)}}const cr=sr.filter(Cs=>!Cs.destroyed);cr.length?kl(this,dn,cr):this.processLeaveNode(dn)}return An.length=0,hl.forEach(Zt=>{this.players.push(Zt),Zt.onDone(()=>{Zt.destroy();const dn=this.players.indexOf(Zt);this.players.splice(dn,1)}),Zt.play()}),hl}afterFlush(f){this._flushFns.push(f)}afterFlushAnimationsDone(f){this._whenQuietFns.push(f)}_getPreviousPlayers(f,m,T,P,U){let W=[];if(m){const J=this.playersByQueriedElement.get(f);J&&(W=J)}else{const J=this.playersByElement.get(f);if(J){const ae=!U||U==lc;J.forEach(_e=>{_e.queued||!ae&&_e.triggerName!=P||W.push(_e)})}}return(T||P)&&(W=W.filter(J=>!(T&&T!=J.namespaceId||P&&P!=J.triggerName))),W}_beforeAnimationBuild(f,m,T){const U=m.element,W=m.isRemovalTransition?void 0:f,J=m.isRemovalTransition?void 0:m.triggerName;for(const ae of m.timelines){const _e=ae.element,et=_e!==U,gt=Ei(T,_e,[]);this._getPreviousPlayers(_e,et,W,J,m.toState).forEach(it=>{const bt=it.getRealPlayer();bt.beforeDestroy&&bt.beforeDestroy(),it.destroy(),gt.push(it)})}po(U,m.fromStyles)}_buildAnimation(f,m,T,P,U,W){const J=m.triggerName,ae=m.element,_e=[],et=new Set,gt=new Set,nn=m.timelines.map(bt=>{const Mt=bt.element;et.add(Mt);const An=Mt[Ii];if(An&&An.removedBeforeQueried)return new jt.ZN(bt.duration,bt.delay);const vr=Mt!==ae,Dr=function al(E){const f=[];return ps(E,f),f}((T.get(Mt)||na).map(ci=>ci.getRealPlayer())).filter(ci=>!!ci.element&&ci.element===Mt),ir=U.get(Mt),tr=W.get(Mt),Ss=za(this._normalizer,bt.keyframes,ir,tr),ki=this._buildPlayer(bt,Ss,Dr);if(bt.subTimeline&&P&&gt.add(Mt),vr){const ci=new Oc(f,J,Mt);ci.setRealPlayer(ki),_e.push(ci)}return ki});_e.forEach(bt=>{Ei(this.playersByQueriedElement,bt.element,[]).push(bt),bt.onDone(()=>function hd(E,f,m){let T=E.get(f);if(T){if(T.length){const P=T.indexOf(m);T.splice(P,1)}0==T.length&&E.delete(f)}return T}(this.playersByQueriedElement,bt.element,bt))}),et.forEach(bt=>xi(bt,cd));const it=Ir(nn);return it.onDestroy(()=>{et.forEach(bt=>Au(bt,cd)),be(ae,m.toStyles)}),gt.forEach(bt=>{Ei(P,bt,[]).push(it)}),it}_buildPlayer(f,m,T){return m.length>0?this.driver.animate(f.element,m,f.duration,f.delay,f.easing,T):new jt.ZN(f.duration,f.delay)}}class Oc{constructor(f,m,T){this.namespaceId=f,this.triggerName=m,this.element=T,this._player=new jt.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(f){this._containsRealPlayer||(this._player=f,this._queuedCallbacks.forEach((m,T)=>{m.forEach(P=>as(f,T,void 0,P))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(f.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(f){this.totalTime=f}syncPlayerEvents(f){const m=this._player;m.triggerCallback&&f.onStart(()=>m.triggerCallback("start")),f.onDone(()=>this.finish()),f.onDestroy(()=>this.destroy())}_queueEvent(f,m){Ei(this._queuedCallbacks,f,[]).push(m)}onDone(f){this.queued&&this._queueEvent("done",f),this._player.onDone(f)}onStart(f){this.queued&&this._queueEvent("start",f),this._player.onStart(f)}onDestroy(f){this.queued&&this._queueEvent("destroy",f),this._player.onDestroy(f)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(f){this.queued||this._player.setPosition(f)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(f){const m=this._player;m.triggerCallback&&m.triggerCallback(f)}}function ol(E){return E&&1===E.nodeType}function Yi(E,f){const m=E.style.display;return E.style.display=f??"none",m}function xl(E,f,m,T,P){const U=[];m.forEach(ae=>U.push(Yi(ae)));const W=[];T.forEach((ae,_e)=>{const et=new Map;ae.forEach(gt=>{const nn=f.computeStyle(_e,gt,P);et.set(gt,nn),(!nn||0==nn.length)&&(_e[Ii]=fs,W.push(_e))}),E.set(_e,et)});let J=0;return m.forEach(ae=>Yi(ae,U[J++])),W}function Xr(E,f){const m=new Map;if(E.forEach(J=>m.set(J,[])),0==f.length)return m;const P=new Set(f),U=new Map;function W(J){if(!J)return 1;let ae=U.get(J);if(ae)return ae;const _e=J.parentNode;return ae=m.has(_e)?_e:P.has(_e)?1:W(_e),U.set(J,ae),ae}return f.forEach(J=>{const ae=W(J);1!==ae&&m.get(ae).push(J)}),m}function xi(E,f){E.classList?.add(f)}function Au(E,f){E.classList?.remove(f)}function kl(E,f,m){Ir(m).onDone(()=>E.processLeaveNode(f))}function ps(E,f){for(let m=0;m<E.length;m++){const T=E[m];T instanceof jt.ZE?ps(T.players,f):f.push(T)}}function Xt(E,f,m){const T=m.get(E);if(!T)return!1;let P=f.get(E);return P?T.forEach(U=>P.add(U)):f.set(E,T),m.delete(E),!0}class hr{constructor(f,m,T,P){this._driver=m,this._normalizer=T,this._triggerCache={},this.onRemovalComplete=(U,W)=>{},this._transitionEngine=new Ia(f.body,m,T,P),this._timelineEngine=new _o(f.body,m,T),this._transitionEngine.onRemovalComplete=(U,W)=>this.onRemovalComplete(U,W)}registerTrigger(f,m,T,P,U){const W=f+"-"+P;let J=this._triggerCache[W];if(!J){const ae=[],et=dd(this._driver,U,ae,[]);if(ae.length)throw function Ut(E,f){return new H.vHH(3404,!1)}();J=function ac(E,f,m){return new Xa(E,f,m)}(P,et,this._normalizer),this._triggerCache[W]=J}this._transitionEngine.registerTrigger(m,P,J)}register(f,m){this._transitionEngine.register(f,m)}destroy(f,m){this._transitionEngine.destroy(f,m)}onInsert(f,m,T,P){this._transitionEngine.insertNode(f,m,T,P)}onRemove(f,m,T){this._transitionEngine.removeNode(f,m,T)}disableAnimations(f,m){this._transitionEngine.markElementAsDisabled(f,m)}process(f,m,T,P){if("@"==T.charAt(0)){const[U,W]=Is(T);this._timelineEngine.command(U,m,W,P)}else this._transitionEngine.trigger(f,m,T,P)}listen(f,m,T,P,U){if("@"==T.charAt(0)){const[W,J]=Is(T);return this._timelineEngine.listen(W,m,J,U)}return this._transitionEngine.listen(f,m,T,P,U)}flush(f=-1){this._transitionEngine.flush(f)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(f){this._transitionEngine.afterFlushAnimationsDone(f)}}class dc{static#e=this.initialStylesByElement=new WeakMap;constructor(f,m,T){this._element=f,this._startStyles=m,this._endStyles=T,this._state=0;let P=dc.initialStylesByElement.get(f);P||dc.initialStylesByElement.set(f,P=new Map),this._initialStyles=P}start(){this._state<1&&(this._startStyles&&be(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(be(this._element,this._initialStyles),this._endStyles&&(be(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(dc.initialStylesByElement.delete(this._element),this._startStyles&&(po(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(po(this._element,this._endStyles),this._endStyles=null),be(this._element,this._initialStyles),this._state=3)}}function ul(E){let f=null;return E.forEach((m,T)=>{(function pd(E){return"display"===E||"position"===E})(T)&&(f=f||new Map,f.set(T,m))}),f}class hc{constructor(f,m,T,P){this.element=f,this.keyframes=m,this.options=T,this._specialStyles=P,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=T.duration,this._delay=T.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(f=>f()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const f=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,f,this.options),this._finalKeyframe=f.length?f[f.length-1]:new Map;const m=()=>this._onFinish();this.domPlayer.addEventListener("finish",m),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",m)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(f){const m=[];return f.forEach(T=>{m.push(Object.fromEntries(T))}),m}_triggerWebAnimation(f,m,T){return f.animate(this._convertKeyframesToObject(m),T)}onStart(f){this._originalOnStartFns.push(f),this._onStartFns.push(f)}onDone(f){this._originalOnDoneFns.push(f),this._onDoneFns.push(f)}onDestroy(f){this._onDestroyFns.push(f)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(f=>f()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(f=>f()),this._onDestroyFns=[])}setPosition(f){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=f*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const f=new Map;this.hasStarted()&&this._finalKeyframe.forEach((T,P)=>{"offset"!==P&&f.set(P,this._finished?T:It(this.element,P))}),this.currentSnapshot=f}triggerCallback(f){const m="start"===f?this._onStartFns:this._onDoneFns;m.forEach(T=>T()),m.length=0}}class Ja{validateStyleProperty(f){return!0}validateAnimatableStyleProperty(f){return!0}matchesElement(f,m){return!1}containsElement(f,m){return kr(f,m)}getParentElement(f){return In(f)}query(f,m,T){return Nt(f,m,T)}computeStyle(f,m,T){return It(f,m)}animate(f,m,T,P,U,W=[]){const ae={duration:T,delay:P,fill:0==P?"both":"forwards"};U&&(ae.easing=U);const _e=new Map,et=W.filter(it=>it instanceof hc);(function oe(E,f){return 0===E||0===f})(T,P)&&et.forEach(it=>{it.currentSnapshot.forEach((bt,Mt)=>_e.set(Mt,bt))});let gt=function Tu(E){return E.length?E[0]instanceof Map?E:E.map(f=>new Map(Object.entries(f))):[]}(m).map(it=>new Map(it));gt=function ze(E,f,m){if(m.size&&f.length){let T=f[0],P=[];if(m.forEach((U,W)=>{T.has(W)||P.push(W),T.set(W,U)}),P.length)for(let U=1;U<f.length;U++){let W=f[U];P.forEach(J=>W.set(J,It(E,J)))}}return f}(f,gt,_e);const nn=function xc(E,f){let m=null,T=null;return Array.isArray(f)&&f.length?(m=ul(f[0]),f.length>1&&(T=ul(f[f.length-1]))):f instanceof Map&&(m=ul(f)),m||T?new dc(E,m,T):null}(f,gt);return new hc(f,gt,ae,nn)}}const kc="@.disabled";class cl{constructor(f,m,T,P){this.namespaceId=f,this.delegate=m,this.engine=T,this._onDestroy=P,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(f){this.delegate.destroyNode?.(f)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(f,m){return this.delegate.createElement(f,m)}createComment(f){return this.delegate.createComment(f)}createText(f){return this.delegate.createText(f)}appendChild(f,m){this.delegate.appendChild(f,m),this.engine.onInsert(this.namespaceId,m,f,!1)}insertBefore(f,m,T,P=!0){this.delegate.insertBefore(f,m,T),this.engine.onInsert(this.namespaceId,m,f,P)}removeChild(f,m,T){this.engine.onRemove(this.namespaceId,m,this.delegate)}selectRootElement(f,m){return this.delegate.selectRootElement(f,m)}parentNode(f){return this.delegate.parentNode(f)}nextSibling(f){return this.delegate.nextSibling(f)}setAttribute(f,m,T,P){this.delegate.setAttribute(f,m,T,P)}removeAttribute(f,m,T){this.delegate.removeAttribute(f,m,T)}addClass(f,m){this.delegate.addClass(f,m)}removeClass(f,m){this.delegate.removeClass(f,m)}setStyle(f,m,T,P){this.delegate.setStyle(f,m,T,P)}removeStyle(f,m,T){this.delegate.removeStyle(f,m,T)}setProperty(f,m,T){"@"==m.charAt(0)&&m==kc?this.disableAnimations(f,!!T):this.delegate.setProperty(f,m,T)}setValue(f,m){this.delegate.setValue(f,m)}listen(f,m,T){return this.delegate.listen(f,m,T)}disableAnimations(f,m){this.engine.disableAnimations(f,m)}}class Lc extends cl{constructor(f,m,T,P,U){super(m,T,P,U),this.factory=f,this.namespaceId=m}setProperty(f,m,T){"@"==m.charAt(0)?"."==m.charAt(1)&&m==kc?this.disableAnimations(f,T=void 0===T||!!T):this.engine.process(this.namespaceId,f,m.slice(1),T):this.delegate.setProperty(f,m,T)}listen(f,m,T){if("@"==m.charAt(0)){const P=function qd(E){switch(E){case"body":return document.body;case"document":return document;case"window":return window;default:return E}}(f);let U=m.slice(1),W="";return"@"!=U.charAt(0)&&([U,W]=function Kd(E){const f=E.indexOf(".");return[E.substring(0,f),E.slice(f+1)]}(U)),this.engine.listen(this.namespaceId,P,U,W,J=>{this.factory.scheduleListenerCallback(J._data||-1,T,J)})}return this.delegate.listen(f,m,T)}}class md{constructor(f,m,T){this.delegate=f,this.engine=m,this._zone=T,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,m.onRemovalComplete=(P,U)=>{const W=U?.parentNode(P);W&&U.removeChild(W,P)}}createRenderer(f,m){const P=this.delegate.createRenderer(f,m);if(!f||!m?.data?.animation){const _e=this._rendererCache;let et=_e.get(P);return et||(et=new cl("",P,this.engine,()=>_e.delete(P)),_e.set(P,et)),et}const U=m.id,W=m.id+"-"+this._currentId;this._currentId++,this.engine.register(W,f);const J=_e=>{Array.isArray(_e)?_e.forEach(J):this.engine.registerTrigger(U,W,f,_e.name,_e)};return m.data.animation.forEach(J),new Lc(this,W,P,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(f,m,T){if(f>=0&&f<this._microtaskId)return void this._zone.run(()=>m(T));const P=this._animationCallbacksBuffer;0==P.length&&queueMicrotask(()=>{this._zone.run(()=>{P.forEach(U=>{const[W,J]=U;W(J)}),this._animationCallbacksBuffer=[]})}),P.push([m,T])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const ra=[{provide:rr,useFactory:function Ru(){return new Cn}},{provide:hr,useClass:(()=>{class E extends hr{constructor(m,T,P){super(m,T,P,(0,H.f3M)(H.Q0Y,{optional:!0}))}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(T){return new(T||E)(H.LFG(pe.K0),H.LFG(ea),H.LFG(rr))};static#t=this.\u0275prov=H.Yz7({token:E,factory:E.\u0275fac})}return E})()},{provide:H.FYo,useFactory:function Ll(E,f,m){return new md(E,f,m)},deps:[_a.se,hr,H.R0b]}],ll=[{provide:ea,useFactory:()=>new Ja},{provide:H.QbO,useValue:"BrowserAnimations"},...ra];let Fc=(()=>{class E extends D.eV{constructor(m){super(),this.title=m}updateTitle(m){const T=this.buildTitle(m);this.title.setTitle(T?`PlanningPoker - ${T}`:"PlanningPoker")}static#e=this.\u0275fac=function(T){return new(T||E)(H.LFG(_a.Dx))};static#t=this.\u0275prov=H.Yz7({token:E,factory:E.\u0275fac})}return E})();function Ul(E,f){const m=!f?.manualCleanup;m&&!f?.injector&&(0,H.gHi)(Ul);const T=m?f?.injector?.get(H.ktI)??(0,H.f3M)(H.ktI):null;let P;P=(0,H.tdS)(f?.requireSync?{kind:0}:{kind:1,value:f?.initialValue});const U=E.subscribe({next:W=>P.set({kind:1,value:W}),error:W=>{if(f?.rejectErrors)throw W;P.set({kind:2,error:W})}});return T?.onDestroy(U.unsubscribe.bind(U)),(0,H.Flj)(()=>{const W=P();switch(W.kind){case 1:return W.value;case 2:throw W.error;case 0:throw new H.vHH(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var gc=B(4176);function Bl(E,f){if(1&E){const m=H.EpF();H.TgZ(0,"div",2)(1,"div",3),H._UZ(2,"img",4),H.TgZ(3,"span",5),H._uU(4),H.qZA()(),H.TgZ(5,"div",6)(6,"button",7),H.NdJ("click",function(){H.CHM(m);const P=H.oxw();return H.KtG(P.logout())}),H._uU(7,"Sair"),H.qZA()()()}if(2&E){const m=H.oxw();H.xp6(2),H.Q6J("src",m.user().photoURL,H.LSH),H.xp6(2),H.Oqu(m.user().displayName)}}let Ys=(()=>{class E{constructor(m,T,P){this.auth=m,this.router=T,this.ngZone=P,this.user=Ul(m.user)}ngOnInit(){}logout(){this.auth.signOut().then(()=>this.ngZone.run(()=>this.router.navigate([""])))}static#e=this.\u0275fac=function(T){return new(T||E)(H.Y36(co.zQ),H.Y36(D.F0),H.Y36(H.R0b))};static#t=this.\u0275cmp=H.Xpm({type:E,selectors:[["app-header"]],standalone:!0,features:[H.jDz],decls:4,vars:2,consts:[[1,"header"],[1,"header-title",3,"routerLink"],[1,"user-content"],[1,"user"],["alt","user image",1,"user-image",3,"src"],[1,"user-name"],[1,"logout"],["main-button","","theme","error",1,"logout-btn",3,"click"]],template:function(T,P){1&T&&(H.TgZ(0,"div",0)(1,"h4",1),H._uU(2,"Planning Poker"),H.qZA(),H.YNc(3,Bl,8,2,"div",2),H.qZA()),2&T&&(H.xp6(),H.Q6J("routerLink",""),H.xp6(2),H.um2(3,P.user()?3:-1))},dependencies:[D.rH,gc.j],styles:[".header[_ngcontent-%COMP%]{background:#ff1a40;width:100vw;height:120px;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;padding:0 2rem}.header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{color:#fff;flex-basis:100%;text-align:center;cursor:pointer}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;flex-basis:100%}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{flex-basis:100%;width:100%;display:flex;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{margin:0 .5rem;color:#fff}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]{width:3rem;height:3rem;border-radius:50%}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{flex-basis:100%;display:flex;justify-content:center}@media (min-width: 641px){.header[_ngcontent-%COMP%]{height:100px}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{flex-basis:content}}@media (min-width: 961px){.header[_ngcontent-%COMP%]{height:80px}.header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]{flex-basis:content}}"]})}return E})();const dl=[{path:"",component:(()=>{class E{static#e=this.\u0275fac=function(T){return new(T||E)};static#t=this.\u0275cmp=H.Xpm({type:E,selectors:[["app-layout"]],standalone:!0,features:[H.jDz],decls:3,vars:0,consts:[[1,"page"]],template:function(T,P){1&T&&(H._UZ(0,"app-header"),H.TgZ(1,"div",0),H._UZ(2,"router-outlet"),H.qZA())},dependencies:[Ys,D.lC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .page[_ngcontent-%COMP%]{overflow:hidden;flex:1 1 auto;padding:16px;height:calc(100vh - 120px);position:relative}@media (min-width: 641px){[_nghost-%COMP%]   .page[_ngcontent-%COMP%]{height:calc(100vh - 100px)}}@media (min-width: 961px){[_nghost-%COMP%]   .page[_ngcontent-%COMP%]{height:calc(100vh - 80px)}}"]})}return E})(),canMatch:[(E,f)=>(0,H.f3M)(co.zQ).user.pipe((0,ye.U)(m=>!!m))],children:[{path:"",loadChildren:()=>B.e(185).then(B.bind(B,4185)).then(E=>E.routes)}]},{path:"",component:(()=>{class E{constructor(m,T,P){this.auth=m,this.router=T,this.ngZone=P}login(){this.auth.signInWithPopup(this.googleAuthProvider()).then(()=>this.ngZone.run(()=>this.router.navigate(["rooms"])))}googleAuthProvider(){return new mu.Z.auth.GoogleAuthProvider}static#e=this.\u0275fac=function(T){return new(T||E)(H.Y36(co.zQ),H.Y36(D.F0),H.Y36(H.R0b))};static#t=this.\u0275cmp=H.Xpm({type:E,selectors:[["app-login"]],standalone:!0,features:[H.jDz],decls:2,vars:0,consts:[["main-button","","theme","error",1,"login-btn","login-btn--google",3,"click"]],template:function(T,P){1&T&&(H.TgZ(0,"button",0),H.NdJ("click",function(){return P.login()}),H._uU(1,"Entrar pelo google"),H.qZA())},dependencies:[gc.j],styles:[".login-btn[_ngcontent-%COMP%]{position:fixed;height:60px;width:320px;font-size:1.5rem;line-height:1.75rem;top:50%;left:50%;transform:translate(-50%,-50%)}"]})}return E})()},{path:"**",redirectTo:""}];(0,_a.Cg)(K,{providers:[(0,H.RIp)(_a.b2,Fr.hO.initializeApp({apiKey:"AIzaSyAeN6DAueQxYzVMBF2cGv2olFE_Kf9Qc58",authDomain:"planning-poker-343c7.firebaseapp.com",projectId:"planning-poker-343c7",storageBucket:"planning-poker-343c7.appspot.com",messagingSenderId:"26931702551",appId:"1:26931702551:web:08fb091c75b07a4be2e552",measurementId:"G-E3V6Y1ESZ1"}),lo.yb,co.ww,vu,sn.register("ngsw-worker.js",{enabled:!(0,H.X6Q)(),registrationStrategy:"registerWhenStable:30000"})),function Lh(){return(0,H.kO0)("NgEagerAnimations"),[...ll]}(),(0,D.bU)(dl),{provide:D.eV,useClass:Fc}]}).catch(E=>console.error(E))},5619:(Rt,Ve,B)=>{B.d(Ve,{X:()=>H});var D=B(8645);class H extends D.x{constructor(pe){super(),this._value=pe}get value(){return this.getValue()}_subscribe(pe){const de=super._subscribe(pe);return!de.closed&&pe.next(this._value),de}getValue(){const{hasError:pe,thrownError:de,_value:fe}=this;if(pe)throw de;return this._throwIfClosed(),fe}next(pe){super.next(this._value=pe)}}},5592:(Rt,Ve,B)=>{B.d(Ve,{y:()=>Ne});var D=B(305),H=B(7394),K=B(4850),pe=B(8407),de=B(2653),fe=B(4674),he=B(1441);let Ne=(()=>{class Re{constructor(Qe){Qe&&(this._subscribe=Qe)}lift(Qe){const vt=new Re;return vt.source=this,vt.operator=Qe,vt}subscribe(Qe,vt,Bt){const Dt=function re(Re){return Re&&Re instanceof D.Lv||function ue(Re){return Re&&(0,fe.m)(Re.next)&&(0,fe.m)(Re.error)&&(0,fe.m)(Re.complete)}(Re)&&(0,H.Nn)(Re)}(Qe)?Qe:new D.Hp(Qe,vt,Bt);return(0,he.x)(()=>{const{operator:ct,source:Gt}=this;Dt.add(ct?ct.call(Dt,Gt):Gt?this._subscribe(Dt):this._trySubscribe(Dt))}),Dt}_trySubscribe(Qe){try{return this._subscribe(Qe)}catch(vt){Qe.error(vt)}}forEach(Qe,vt){return new(vt=Oe(vt))((Bt,Dt)=>{const ct=new D.Hp({next:Gt=>{try{Qe(Gt)}catch(Wt){Dt(Wt),ct.unsubscribe()}},error:Dt,complete:Bt});this.subscribe(ct)})}_subscribe(Qe){var vt;return null===(vt=this.source)||void 0===vt?void 0:vt.subscribe(Qe)}[K.L](){return this}pipe(...Qe){return(0,pe.U)(Qe)(this)}toPromise(Qe){return new(Qe=Oe(Qe))((vt,Bt)=>{let Dt;this.subscribe(ct=>Dt=ct,ct=>Bt(ct),()=>vt(Dt))})}}return Re.create=at=>new Re(at),Re})();function Oe(Re){var at;return null!==(at=Re??de.config.Promise)&&void 0!==at?at:Promise}},8645:(Rt,Ve,B)=>{B.d(Ve,{x:()=>he});var D=B(5592),H=B(7394);const pe=(0,B(2306).d)(Oe=>function(){Oe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=B(9039),fe=B(1441);let he=(()=>{class Oe extends D.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(re){const Re=new Ne(this,this);return Re.operator=re,Re}_throwIfClosed(){if(this.closed)throw new pe}next(re){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Re of this.currentObservers)Re.next(re)}})}error(re){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=re;const{observers:Re}=this;for(;Re.length;)Re.shift().error(re)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:re}=this;for(;re.length;)re.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var re;return(null===(re=this.observers)||void 0===re?void 0:re.length)>0}_trySubscribe(re){return this._throwIfClosed(),super._trySubscribe(re)}_subscribe(re){return this._throwIfClosed(),this._checkFinalizedStatuses(re),this._innerSubscribe(re)}_innerSubscribe(re){const{hasError:Re,isStopped:at,observers:Qe}=this;return Re||at?H.Lc:(this.currentObservers=null,Qe.push(re),new H.w0(()=>{this.currentObservers=null,(0,de.P)(Qe,re)}))}_checkFinalizedStatuses(re){const{hasError:Re,thrownError:at,isStopped:Qe}=this;Re?re.error(at):Qe&&re.complete()}asObservable(){const re=new D.y;return re.source=this,re}}return Oe.create=(ue,re)=>new Ne(ue,re),Oe})();class Ne extends he{constructor(ue,re){super(),this.destination=ue,this.source=re}next(ue){var re,Re;null===(Re=null===(re=this.destination)||void 0===re?void 0:re.next)||void 0===Re||Re.call(re,ue)}error(ue){var re,Re;null===(Re=null===(re=this.destination)||void 0===re?void 0:re.error)||void 0===Re||Re.call(re,ue)}complete(){var ue,re;null===(re=null===(ue=this.destination)||void 0===ue?void 0:ue.complete)||void 0===re||re.call(ue)}_subscribe(ue){var re,Re;return null!==(Re=null===(re=this.source)||void 0===re?void 0:re.subscribe(ue))&&void 0!==Re?Re:H.Lc}}},305:(Rt,Ve,B)=>{B.d(Ve,{Hp:()=>Bt,Lv:()=>Re});var D=B(4674),H=B(7394),K=B(2653),pe=B(3894),de=B(2420);const fe=Oe("C",void 0,void 0);function Oe(rt,ne,Ge){return{kind:rt,value:ne,error:Ge}}var ue=B(7599),re=B(1441);class Re extends H.w0{constructor(ne){super(),this.isStopped=!1,ne?(this.destination=ne,(0,H.Nn)(ne)&&ne.add(this)):this.destination=Wt}static create(ne,Ge,pt){return new Bt(ne,Ge,pt)}next(ne){this.isStopped?Gt(function Ne(rt){return Oe("N",rt,void 0)}(ne),this):this._next(ne)}error(ne){this.isStopped?Gt(function he(rt){return Oe("E",void 0,rt)}(ne),this):(this.isStopped=!0,this._error(ne))}complete(){this.isStopped?Gt(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ne){this.destination.next(ne)}_error(ne){try{this.destination.error(ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const at=Function.prototype.bind;function Qe(rt,ne){return at.call(rt,ne)}class vt{constructor(ne){this.partialObserver=ne}next(ne){const{partialObserver:Ge}=this;if(Ge.next)try{Ge.next(ne)}catch(pt){Dt(pt)}}error(ne){const{partialObserver:Ge}=this;if(Ge.error)try{Ge.error(ne)}catch(pt){Dt(pt)}else Dt(ne)}complete(){const{partialObserver:ne}=this;if(ne.complete)try{ne.complete()}catch(Ge){Dt(Ge)}}}class Bt extends Re{constructor(ne,Ge,pt){let Ze;if(super(),(0,D.m)(ne)||!ne)Ze={next:ne??void 0,error:Ge??void 0,complete:pt??void 0};else{let ot;this&&K.config.useDeprecatedNextContext?(ot=Object.create(ne),ot.unsubscribe=()=>this.unsubscribe(),Ze={next:ne.next&&Qe(ne.next,ot),error:ne.error&&Qe(ne.error,ot),complete:ne.complete&&Qe(ne.complete,ot)}):Ze=ne}this.destination=new vt(Ze)}}function Dt(rt){K.config.useDeprecatedSynchronousErrorHandling?(0,re.O)(rt):(0,pe.h)(rt)}function Gt(rt,ne){const{onStoppedNotification:Ge}=K.config;Ge&&ue.z.setTimeout(()=>Ge(rt,ne))}const Wt={closed:!0,next:de.Z,error:function ct(rt){throw rt},complete:de.Z}},7394:(Rt,Ve,B)=>{B.d(Ve,{Lc:()=>fe,w0:()=>de,Nn:()=>he});var D=B(4674);const K=(0,B(2306).d)(Oe=>function(re){Oe(this),this.message=re?`${re.length} errors occurred during unsubscription:\n${re.map((Re,at)=>`${at+1}) ${Re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=re});var pe=B(9039);class de{constructor(ue){this.initialTeardown=ue,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ue;if(!this.closed){this.closed=!0;const{_parentage:re}=this;if(re)if(this._parentage=null,Array.isArray(re))for(const Qe of re)Qe.remove(this);else re.remove(this);const{initialTeardown:Re}=this;if((0,D.m)(Re))try{Re()}catch(Qe){ue=Qe instanceof K?Qe.errors:[Qe]}const{_finalizers:at}=this;if(at){this._finalizers=null;for(const Qe of at)try{Ne(Qe)}catch(vt){ue=ue??[],vt instanceof K?ue=[...ue,...vt.errors]:ue.push(vt)}}if(ue)throw new K(ue)}}add(ue){var re;if(ue&&ue!==this)if(this.closed)Ne(ue);else{if(ue instanceof de){if(ue.closed||ue._hasParent(this))return;ue._addParent(this)}(this._finalizers=null!==(re=this._finalizers)&&void 0!==re?re:[]).push(ue)}}_hasParent(ue){const{_parentage:re}=this;return re===ue||Array.isArray(re)&&re.includes(ue)}_addParent(ue){const{_parentage:re}=this;this._parentage=Array.isArray(re)?(re.push(ue),re):re?[re,ue]:ue}_removeParent(ue){const{_parentage:re}=this;re===ue?this._parentage=null:Array.isArray(re)&&(0,pe.P)(re,ue)}remove(ue){const{_finalizers:re}=this;re&&(0,pe.P)(re,ue),ue instanceof de&&ue._removeParent(this)}}de.EMPTY=(()=>{const Oe=new de;return Oe.closed=!0,Oe})();const fe=de.EMPTY;function he(Oe){return Oe instanceof de||Oe&&"closed"in Oe&&(0,D.m)(Oe.remove)&&(0,D.m)(Oe.add)&&(0,D.m)(Oe.unsubscribe)}function Ne(Oe){(0,D.m)(Oe)?Oe():Oe.unsubscribe()}},2653:(Rt,Ve,B)=>{B.d(Ve,{config:()=>D});const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},3168:(Rt,Ve,B)=>{B.d(Ve,{c:()=>fe});var D=B(5592),H=B(7394),K=B(6196),pe=B(8251),de=B(9360);class fe extends D.y{constructor(Ne,Oe){super(),this.source=Ne,this.subjectFactory=Oe,this._subject=null,this._refCount=0,this._connection=null,(0,de.A)(Ne)&&(this.lift=Ne.lift)}_subscribe(Ne){return this.getSubject().subscribe(Ne)}getSubject(){const Ne=this._subject;return(!Ne||Ne.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:Ne}=this;this._subject=this._connection=null,Ne?.unsubscribe()}connect(){let Ne=this._connection;if(!Ne){Ne=this._connection=new H.w0;const Oe=this.getSubject();Ne.add(this.source.subscribe((0,pe.x)(Oe,void 0,()=>{this._teardown(),Oe.complete()},ue=>{this._teardown(),Oe.error(ue)},()=>this._teardown()))),Ne.closed&&(this._connection=null,Ne=H.w0.EMPTY)}return Ne}refCount(){return(0,K.x)()(this)}}},5211:(Rt,Ve,B)=>{B.d(Ve,{z:()=>de});var D=B(7537),K=B(9940),pe=B(2459);function de(...fe){return function H(){return(0,D.J)(1)}()((0,pe.D)(fe,(0,K.yG)(fe)))}},4911:(Rt,Ve,B)=>{B.d(Ve,{P:()=>K});var D=B(5592),H=B(4829);function K(pe){return new D.y(de=>{(0,H.Xf)(pe()).subscribe(de)})}},6232:(Rt,Ve,B)=>{B.d(Ve,{E:()=>H});const H=new(B(5592).y)(de=>de.complete())},2459:(Rt,Ve,B)=>{B.d(Ve,{D:()=>ne});var D=B(4829),H=B(3093),K=B(5137),fe=B(5592),Ne=B(4971),Oe=B(4674),ue=B(7103);function Re(Ge,pt){if(!Ge)throw new Error("Iterable cannot be null");return new fe.y(Ze=>{(0,ue.f)(Ze,pt,()=>{const ot=Ge[Symbol.asyncIterator]();(0,ue.f)(Ze,pt,()=>{ot.next().then(ie=>{ie.done?Ze.complete():Ze.next(ie.value)})},0,!0)})})}var at=B(8382),Qe=B(4026),vt=B(4266),Bt=B(3664),Dt=B(5726),ct=B(9853),Gt=B(541);function ne(Ge,pt){return pt?function rt(Ge,pt){if(null!=Ge){if((0,at.c)(Ge))return function pe(Ge,pt){return(0,D.Xf)(Ge).pipe((0,K.R)(pt),(0,H.Q)(pt))}(Ge,pt);if((0,vt.z)(Ge))return function he(Ge,pt){return new fe.y(Ze=>{let ot=0;return pt.schedule(function(){ot===Ge.length?Ze.complete():(Ze.next(Ge[ot++]),Ze.closed||this.schedule())})})}(Ge,pt);if((0,Qe.t)(Ge))return function de(Ge,pt){return(0,D.Xf)(Ge).pipe((0,K.R)(pt),(0,H.Q)(pt))}(Ge,pt);if((0,Dt.D)(Ge))return Re(Ge,pt);if((0,Bt.T)(Ge))return function re(Ge,pt){return new fe.y(Ze=>{let ot;return(0,ue.f)(Ze,pt,()=>{ot=Ge[Ne.h](),(0,ue.f)(Ze,pt,()=>{let ie,ye;try{({value:ie,done:ye}=ot.next())}catch(Ce){return void Ze.error(Ce)}ye?Ze.complete():Ze.next(ie)},0,!0)}),()=>(0,Oe.m)(ot?.return)&&ot.return()})}(Ge,pt);if((0,Gt.L)(Ge))return function Wt(Ge,pt){return Re((0,Gt.Q)(Ge),pt)}(Ge,pt)}throw(0,ct.z)(Ge)}(Ge,pt):(0,D.Xf)(Ge)}},4829:(Rt,Ve,B)=>{B.d(Ve,{Xf:()=>at});var D=B(7582),H=B(4266),K=B(4026),pe=B(5592),de=B(8382),fe=B(5726),he=B(9853),Ne=B(3664),Oe=B(541),ue=B(4674),re=B(3894),Re=B(4850);function at(rt){if(rt instanceof pe.y)return rt;if(null!=rt){if((0,de.c)(rt))return function Qe(rt){return new pe.y(ne=>{const Ge=rt[Re.L]();if((0,ue.m)(Ge.subscribe))return Ge.subscribe(ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(rt);if((0,H.z)(rt))return function vt(rt){return new pe.y(ne=>{for(let Ge=0;Ge<rt.length&&!ne.closed;Ge++)ne.next(rt[Ge]);ne.complete()})}(rt);if((0,K.t)(rt))return function Bt(rt){return new pe.y(ne=>{rt.then(Ge=>{ne.closed||(ne.next(Ge),ne.complete())},Ge=>ne.error(Ge)).then(null,re.h)})}(rt);if((0,fe.D)(rt))return ct(rt);if((0,Ne.T)(rt))return function Dt(rt){return new pe.y(ne=>{for(const Ge of rt)if(ne.next(Ge),ne.closed)return;ne.complete()})}(rt);if((0,Oe.L)(rt))return function Gt(rt){return ct((0,Oe.Q)(rt))}(rt)}throw(0,he.z)(rt)}function ct(rt){return new pe.y(ne=>{(function Wt(rt,ne){var Ge,pt,Ze,ot;return(0,D.mG)(this,void 0,void 0,function*(){try{for(Ge=(0,D.KL)(rt);!(pt=yield Ge.next()).done;)if(ne.next(pt.value),ne.closed)return}catch(ie){Ze={error:ie}}finally{try{pt&&!pt.done&&(ot=Ge.return)&&(yield ot.call(Ge))}finally{if(Ze)throw Ze.error}}ne.complete()})})(rt,ne).catch(Ge=>ne.error(Ge))})}},3019:(Rt,Ve,B)=>{B.d(Ve,{T:()=>fe});var D=B(7537),H=B(4829),K=B(6232),pe=B(9940),de=B(2459);function fe(...he){const Ne=(0,pe.yG)(he),Oe=(0,pe._6)(he,1/0),ue=he;return ue.length?1===ue.length?(0,H.Xf)(ue[0]):(0,D.J)(Oe)((0,de.D)(ue,Ne)):K.E}},2096:(Rt,Ve,B)=>{B.d(Ve,{of:()=>K});var D=B(9940),H=B(2459);function K(...pe){const de=(0,D.yG)(pe);return(0,H.D)(pe,de)}},8504:(Rt,Ve,B)=>{B.d(Ve,{_:()=>K});var D=B(5592),H=B(4674);function K(pe,de){const fe=(0,H.m)(pe)?pe:()=>pe,he=Ne=>Ne.error(fe());return new D.y(de?Ne=>de.schedule(he,0,Ne):he)}},8251:(Rt,Ve,B)=>{B.d(Ve,{x:()=>H});var D=B(305);function H(pe,de,fe,he,Ne){return new K(pe,de,fe,he,Ne)}class K extends D.Lv{constructor(de,fe,he,Ne,Oe,ue){super(de),this.onFinalize=Oe,this.shouldUnsubscribe=ue,this._next=fe?function(re){try{fe(re)}catch(Re){de.error(Re)}}:super._next,this._error=Ne?function(re){try{Ne(re)}catch(Re){de.error(Re)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(re){de.error(re)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},3572:(Rt,Ve,B)=>{B.d(Ve,{d:()=>K});var D=B(9360),H=B(8251);function K(pe){return(0,D.e)((de,fe)=>{let he=!1;de.subscribe((0,H.x)(fe,Ne=>{he=!0,fe.next(Ne)},()=>{he||fe.next(pe),fe.complete()}))})}},2181:(Rt,Ve,B)=>{B.d(Ve,{h:()=>K});var D=B(9360),H=B(8251);function K(pe,de){return(0,D.e)((fe,he)=>{let Ne=0;fe.subscribe((0,H.x)(he,Oe=>pe.call(de,Oe,Ne++)&&he.next(Oe)))})}},1374:(Rt,Ve,B)=>{B.d(Ve,{P:()=>he});var D=B(6973),H=B(2181),K=B(8180),pe=B(3572),de=B(3026),fe=B(2737);function he(Ne,Oe){const ue=arguments.length>=2;return re=>re.pipe(Ne?(0,H.h)((Re,at)=>Ne(Re,at,re)):fe.y,(0,K.q)(1),ue?(0,pe.d)(Oe):(0,de.T)(()=>new D.K))}},7398:(Rt,Ve,B)=>{B.d(Ve,{U:()=>K});var D=B(9360),H=B(8251);function K(pe,de){return(0,D.e)((fe,he)=>{let Ne=0;fe.subscribe((0,H.x)(he,Oe=>{he.next(pe.call(de,Oe,Ne++))}))})}},975:(Rt,Ve,B)=>{B.d(Ve,{h:()=>H});var D=B(7398);function H(K){return(0,D.U)(()=>K)}},7537:(Rt,Ve,B)=>{B.d(Ve,{J:()=>K});var D=B(1631),H=B(2737);function K(pe=1/0){return(0,D.z)(H.y,pe)}},1631:(Rt,Ve,B)=>{B.d(Ve,{z:()=>Ne});var D=B(7398),H=B(4829),K=B(9360),pe=B(7103),de=B(8251),he=B(4674);function Ne(Oe,ue,re=1/0){return(0,he.m)(ue)?Ne((Re,at)=>(0,D.U)((Qe,vt)=>ue(Re,Qe,at,vt))((0,H.Xf)(Oe(Re,at))),re):("number"==typeof ue&&(re=ue),(0,K.e)((Re,at)=>function fe(Oe,ue,re,Re,at,Qe,vt,Bt){const Dt=[];let ct=0,Gt=0,Wt=!1;const rt=()=>{Wt&&!Dt.length&&!ct&&ue.complete()},ne=pt=>ct<Re?Ge(pt):Dt.push(pt),Ge=pt=>{Qe&&ue.next(pt),ct++;let Ze=!1;(0,H.Xf)(re(pt,Gt++)).subscribe((0,de.x)(ue,ot=>{at?.(ot),Qe?ne(ot):ue.next(ot)},()=>{Ze=!0},void 0,()=>{if(Ze)try{for(ct--;Dt.length&&ct<Re;){const ot=Dt.shift();vt?(0,pe.f)(ue,vt,()=>Ge(ot)):Ge(ot)}rt()}catch(ot){ue.error(ot)}}))};return Oe.subscribe((0,de.x)(ue,ne,()=>{Wt=!0,rt()})),()=>{Bt?.()}}(Re,at,Oe,re)))}},3093:(Rt,Ve,B)=>{B.d(Ve,{Q:()=>pe});var D=B(7103),H=B(9360),K=B(8251);function pe(de,fe=0){return(0,H.e)((he,Ne)=>{he.subscribe((0,K.x)(Ne,Oe=>(0,D.f)(Ne,de,()=>Ne.next(Oe),fe),()=>(0,D.f)(Ne,de,()=>Ne.complete(),fe),Oe=>(0,D.f)(Ne,de,()=>Ne.error(Oe),fe)))})}},6196:(Rt,Ve,B)=>{B.d(Ve,{x:()=>K});var D=B(9360),H=B(8251);function K(){return(0,D.e)((pe,de)=>{let fe=null;pe._refCount++;const he=(0,H.x)(de,void 0,void 0,void 0,()=>{if(!pe||pe._refCount<=0||0<--pe._refCount)return void(fe=null);const Ne=pe._connection,Oe=fe;fe=null,Ne&&(!Oe||Ne===Oe)&&Ne.unsubscribe(),de.unsubscribe()});pe.subscribe(he),he.closed||(fe=pe.connect())})}},6699:(Rt,Ve,B)=>{B.d(Ve,{R:()=>pe});var D=B(9360),H=B(8251);function pe(de,fe){return(0,D.e)(function K(de,fe,he,Ne,Oe){return(ue,re)=>{let Re=he,at=fe,Qe=0;ue.subscribe((0,H.x)(re,vt=>{const Bt=Qe++;at=Re?de(at,vt,Bt):(Re=!0,vt),Ne&&re.next(at)},Oe&&(()=>{Re&&re.next(at),re.complete()})))}}(de,fe,arguments.length>=2,!0))}},7921:(Rt,Ve,B)=>{B.d(Ve,{O:()=>pe});var D=B(5211),H=B(9940),K=B(9360);function pe(...de){const fe=(0,H.yG)(de);return(0,K.e)((he,Ne)=>{(fe?(0,D.z)(de,he,fe):(0,D.z)(de,he)).subscribe(Ne)})}},5137:(Rt,Ve,B)=>{B.d(Ve,{R:()=>H});var D=B(9360);function H(K,pe=0){return(0,D.e)((de,fe)=>{fe.add(K.schedule(()=>de.subscribe(fe),pe))})}},4664:(Rt,Ve,B)=>{B.d(Ve,{w:()=>pe});var D=B(4829),H=B(9360),K=B(8251);function pe(de,fe){return(0,H.e)((he,Ne)=>{let Oe=null,ue=0,re=!1;const Re=()=>re&&!Oe&&Ne.complete();he.subscribe((0,K.x)(Ne,at=>{Oe?.unsubscribe();let Qe=0;const vt=ue++;(0,D.Xf)(de(at,vt)).subscribe(Oe=(0,K.x)(Ne,Bt=>Ne.next(fe?fe(at,Bt,vt,Qe++):Bt),()=>{Oe=null,Re()}))},()=>{re=!0,Re()}))})}},8180:(Rt,Ve,B)=>{B.d(Ve,{q:()=>pe});var D=B(6232),H=B(9360),K=B(8251);function pe(de){return de<=0?()=>D.E:(0,H.e)((fe,he)=>{let Ne=0;fe.subscribe((0,K.x)(he,Oe=>{++Ne<=de&&(he.next(Oe),de<=Ne&&he.complete())}))})}},9397:(Rt,Ve,B)=>{B.d(Ve,{b:()=>de});var D=B(4674),H=B(9360),K=B(8251),pe=B(2737);function de(fe,he,Ne){const Oe=(0,D.m)(fe)||he||Ne?{next:fe,error:he,complete:Ne}:fe;return Oe?(0,H.e)((ue,re)=>{var Re;null===(Re=Oe.subscribe)||void 0===Re||Re.call(Oe);let at=!0;ue.subscribe((0,K.x)(re,Qe=>{var vt;null===(vt=Oe.next)||void 0===vt||vt.call(Oe,Qe),re.next(Qe)},()=>{var Qe;at=!1,null===(Qe=Oe.complete)||void 0===Qe||Qe.call(Oe),re.complete()},Qe=>{var vt;at=!1,null===(vt=Oe.error)||void 0===vt||vt.call(Oe,Qe),re.error(Qe)},()=>{var Qe,vt;at&&(null===(Qe=Oe.unsubscribe)||void 0===Qe||Qe.call(Oe)),null===(vt=Oe.finalize)||void 0===vt||vt.call(Oe)}))}):pe.y}},3026:(Rt,Ve,B)=>{B.d(Ve,{T:()=>pe});var D=B(6973),H=B(9360),K=B(8251);function pe(fe=de){return(0,H.e)((he,Ne)=>{let Oe=!1;he.subscribe((0,K.x)(Ne,ue=>{Oe=!0,Ne.next(ue)},()=>Oe?Ne.complete():Ne.error(fe())))})}function de(){return new D.K}},1954:(Rt,Ve,B)=>{B.d(Ve,{o:()=>de});var D=B(7394);class H extends D.w0{constructor(he,Ne){super()}schedule(he,Ne=0){return this}}const K={setInterval(fe,he,...Ne){const{delegate:Oe}=K;return Oe?.setInterval?Oe.setInterval(fe,he,...Ne):setInterval(fe,he,...Ne)},clearInterval(fe){const{delegate:he}=K;return(he?.clearInterval||clearInterval)(fe)},delegate:void 0};var pe=B(9039);class de extends H{constructor(he,Ne){super(he,Ne),this.scheduler=he,this.work=Ne,this.pending=!1}schedule(he,Ne=0){var Oe;if(this.closed)return this;this.state=he;const ue=this.id,re=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(re,ue,Ne)),this.pending=!0,this.delay=Ne,this.id=null!==(Oe=this.id)&&void 0!==Oe?Oe:this.requestAsyncId(re,this.id,Ne),this}requestAsyncId(he,Ne,Oe=0){return K.setInterval(he.flush.bind(he,this),Oe)}recycleAsyncId(he,Ne,Oe=0){if(null!=Oe&&this.delay===Oe&&!1===this.pending)return Ne;null!=Ne&&K.clearInterval(Ne)}execute(he,Ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Oe=this._execute(he,Ne);if(Oe)return Oe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,Ne){let ue,Oe=!1;try{this.work(he)}catch(re){Oe=!0,ue=re||new Error("Scheduled action threw falsy error")}if(Oe)return this.unsubscribe(),ue}unsubscribe(){if(!this.closed){const{id:he,scheduler:Ne}=this,{actions:Oe}=Ne;this.work=this.state=this.scheduler=null,this.pending=!1,(0,pe.P)(Oe,this),null!=he&&(this.id=this.recycleAsyncId(Ne,he,null)),this.delay=null,super.unsubscribe()}}}},2631:(Rt,Ve,B)=>{B.d(Ve,{v:()=>K});var D=B(4552);class H{constructor(de,fe=H.now){this.schedulerActionCtor=de,this.now=fe}schedule(de,fe=0,he){return new this.schedulerActionCtor(this,de).schedule(he,fe)}}H.now=D.l.now;class K extends H{constructor(de,fe=H.now){super(de,fe),this.actions=[],this._active=!1}flush(de){const{actions:fe}=this;if(this._active)return void fe.push(de);let he;this._active=!0;do{if(he=de.execute(de.state,de.delay))break}while(de=fe.shift());if(this._active=!1,he){for(;de=fe.shift();)de.unsubscribe();throw he}}}},6321:(Rt,Ve,B)=>{B.d(Ve,{P:()=>pe,z:()=>K});var D=B(1954);const K=new(B(2631).v)(D.o),pe=K},4552:(Rt,Ve,B)=>{B.d(Ve,{l:()=>D});const D={now:()=>(D.delegate||Date).now(),delegate:void 0}},7599:(Rt,Ve,B)=>{B.d(Ve,{z:()=>D});const D={setTimeout(H,K,...pe){const{delegate:de}=D;return de?.setTimeout?de.setTimeout(H,K,...pe):setTimeout(H,K,...pe)},clearTimeout(H){const{delegate:K}=D;return(K?.clearTimeout||clearTimeout)(H)},delegate:void 0}},4971:(Rt,Ve,B)=>{B.d(Ve,{h:()=>H});const H=function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Rt,Ve,B)=>{B.d(Ve,{L:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(Rt,Ve,B)=>{B.d(Ve,{K:()=>H});const H=(0,B(2306).d)(K=>function(){K(this),this.name="EmptyError",this.message="no elements in sequence"})},9940:(Rt,Ve,B)=>{B.d(Ve,{_6:()=>fe,jO:()=>pe,yG:()=>de});var D=B(4674),H=B(671);function K(he){return he[he.length-1]}function pe(he){return(0,D.m)(K(he))?he.pop():void 0}function de(he){return(0,H.K)(K(he))?he.pop():void 0}function fe(he,Ne){return"number"==typeof K(he)?he.pop():Ne}},7453:(Rt,Ve,B)=>{B.d(Ve,{D:()=>de});const{isArray:D}=Array,{getPrototypeOf:H,prototype:K,keys:pe}=Object;function de(he){if(1===he.length){const Ne=he[0];if(D(Ne))return{args:Ne,keys:null};if(function fe(he){return he&&"object"==typeof he&&H(he)===K}(Ne)){const Oe=pe(Ne);return{args:Oe.map(ue=>Ne[ue]),keys:Oe}}}return{args:he,keys:null}}},9039:(Rt,Ve,B)=>{function D(H,K){if(H){const pe=H.indexOf(K);0<=pe&&H.splice(pe,1)}}B.d(Ve,{P:()=>D})},2306:(Rt,Ve,B)=>{function D(H){const pe=H(de=>{Error.call(de),de.stack=(new Error).stack});return pe.prototype=Object.create(Error.prototype),pe.prototype.constructor=pe,pe}B.d(Ve,{d:()=>D})},2714:(Rt,Ve,B)=>{function D(H,K){return H.reduce((pe,de,fe)=>(pe[de]=K[fe],pe),{})}B.d(Ve,{n:()=>D})},1441:(Rt,Ve,B)=>{B.d(Ve,{O:()=>pe,x:()=>K});var D=B(2653);let H=null;function K(de){if(D.config.useDeprecatedSynchronousErrorHandling){const fe=!H;if(fe&&(H={errorThrown:!1,error:null}),de(),fe){const{errorThrown:he,error:Ne}=H;if(H=null,he)throw Ne}}else de()}function pe(de){D.config.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=de)}},7103:(Rt,Ve,B)=>{function D(H,K,pe,de=0,fe=!1){const he=K.schedule(function(){pe(),fe?H.add(this.schedule(null,de)):this.unsubscribe()},de);if(H.add(he),!fe)return he}B.d(Ve,{f:()=>D})},2737:(Rt,Ve,B)=>{function D(H){return H}B.d(Ve,{y:()=>D})},4266:(Rt,Ve,B)=>{B.d(Ve,{z:()=>D});const D=H=>H&&"number"==typeof H.length&&"function"!=typeof H},5726:(Rt,Ve,B)=>{B.d(Ve,{D:()=>H});var D=B(4674);function H(K){return Symbol.asyncIterator&&(0,D.m)(K?.[Symbol.asyncIterator])}},4674:(Rt,Ve,B)=>{function D(H){return"function"==typeof H}B.d(Ve,{m:()=>D})},8382:(Rt,Ve,B)=>{B.d(Ve,{c:()=>K});var D=B(4850),H=B(4674);function K(pe){return(0,H.m)(pe[D.L])}},3664:(Rt,Ve,B)=>{B.d(Ve,{T:()=>K});var D=B(4971),H=B(4674);function K(pe){return(0,H.m)(pe?.[D.h])}},4026:(Rt,Ve,B)=>{B.d(Ve,{t:()=>H});var D=B(4674);function H(K){return(0,D.m)(K?.then)}},541:(Rt,Ve,B)=>{B.d(Ve,{L:()=>pe,Q:()=>K});var D=B(7582),H=B(4674);function K(de){return(0,D.FC)(this,arguments,function*(){const he=de.getReader();try{for(;;){const{value:Ne,done:Oe}=yield(0,D.qq)(he.read());if(Oe)return yield(0,D.qq)(void 0);yield yield(0,D.qq)(Ne)}}finally{he.releaseLock()}})}function pe(de){return(0,H.m)(de?.getReader)}},671:(Rt,Ve,B)=>{B.d(Ve,{K:()=>H});var D=B(4674);function H(K){return K&&(0,D.m)(K.schedule)}},9360:(Rt,Ve,B)=>{B.d(Ve,{A:()=>H,e:()=>K});var D=B(4674);function H(pe){return(0,D.m)(pe?.lift)}function K(pe){return de=>{if(H(de))return de.lift(function(fe){try{return pe(fe,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(Rt,Ve,B)=>{B.d(Ve,{Z:()=>pe});var D=B(7398);const{isArray:H}=Array;function pe(de){return(0,D.U)(fe=>function K(de,fe){return H(fe)?de(...fe):de(fe)}(de,fe))}},2420:(Rt,Ve,B)=>{function D(){}B.d(Ve,{Z:()=>D})},8407:(Rt,Ve,B)=>{B.d(Ve,{U:()=>K,z:()=>H});var D=B(2737);function H(...pe){return K(pe)}function K(pe){return 0===pe.length?D.y:1===pe.length?pe[0]:function(fe){return pe.reduce((he,Ne)=>Ne(he),fe)}}},3894:(Rt,Ve,B)=>{B.d(Ve,{h:()=>K});var D=B(2653),H=B(7599);function K(pe){H.z.setTimeout(()=>{const{onUnhandledError:de}=D.config;if(!de)throw pe;de(pe)})}},9853:(Rt,Ve,B)=>{function D(H){return new TypeError(`You provided ${null!==H&&"object"==typeof H?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(Ve,{z:()=>D})},6825:(Rt,Ve,B)=>{B.d(Ve,{SB:()=>Ne,X$:()=>K,ZE:()=>Ze,ZN:()=>pt,eR:()=>ue,jt:()=>pe,k1:()=>ot,l3:()=>H,mo:()=>D,oB:()=>he,vP:()=>fe});var D=function(ie){return ie[ie.State=0]="State",ie[ie.Transition=1]="Transition",ie[ie.Sequence=2]="Sequence",ie[ie.Group=3]="Group",ie[ie.Animate=4]="Animate",ie[ie.Keyframes=5]="Keyframes",ie[ie.Style=6]="Style",ie[ie.Trigger=7]="Trigger",ie[ie.Reference=8]="Reference",ie[ie.AnimateChild=9]="AnimateChild",ie[ie.AnimateRef=10]="AnimateRef",ie[ie.Query=11]="Query",ie[ie.Stagger=12]="Stagger",ie}(D||{});const H="*";function K(ie,ye){return{type:D.Trigger,name:ie,definitions:ye,options:{}}}function pe(ie,ye=null){return{type:D.Animate,styles:ye,timings:ie}}function fe(ie,ye=null){return{type:D.Sequence,steps:ie,options:ye}}function he(ie){return{type:D.Style,styles:ie,offset:null}}function Ne(ie,ye,Ce){return{type:D.State,name:ie,styles:ye,options:Ce}}function ue(ie,ye,Ce=null){return{type:D.Transition,expr:ie,animation:ye,options:Ce}}class pt{constructor(ye=0,Ce=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ye+Ce}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ye=>ye()),this._onDoneFns=[])}onStart(ye){this._originalOnStartFns.push(ye),this._onStartFns.push(ye)}onDone(ye){this._originalOnDoneFns.push(ye),this._onDoneFns.push(ye)}onDestroy(ye){this._onDestroyFns.push(ye)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ye=>ye()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ye=>ye()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(ye){this._position=this.totalTime?ye*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ye){const Ce="start"==ye?this._onStartFns:this._onDoneFns;Ce.forEach(an=>an()),Ce.length=0}}class Ze{constructor(ye){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ye;let Ce=0,an=0,Pt=0;const Xn=this.players.length;0==Xn?queueMicrotask(()=>this._onFinish()):this.players.forEach(Rn=>{Rn.onDone(()=>{++Ce==Xn&&this._onFinish()}),Rn.onDestroy(()=>{++an==Xn&&this._onDestroy()}),Rn.onStart(()=>{++Pt==Xn&&this._onStart()})}),this.totalTime=this.players.reduce((Rn,Ht)=>Math.max(Rn,Ht.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ye=>ye()),this._onDoneFns=[])}init(){this.players.forEach(ye=>ye.init())}onStart(ye){this._onStartFns.push(ye)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ye=>ye()),this._onStartFns=[])}onDone(ye){this._onDoneFns.push(ye)}onDestroy(ye){this._onDestroyFns.push(ye)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ye=>ye.play())}pause(){this.players.forEach(ye=>ye.pause())}restart(){this.players.forEach(ye=>ye.restart())}finish(){this._onFinish(),this.players.forEach(ye=>ye.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ye=>ye.destroy()),this._onDestroyFns.forEach(ye=>ye()),this._onDestroyFns=[])}reset(){this.players.forEach(ye=>ye.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ye){const Ce=ye*this.totalTime;this.players.forEach(an=>{const Pt=an.totalTime?Math.min(1,Ce/an.totalTime):1;an.setPosition(Pt)})}getPosition(){const ye=this.players.reduce((Ce,an)=>null===Ce||an.totalTime>Ce.totalTime?an:Ce,null);return null!=ye?ye.getPosition():0}beforeDestroy(){this.players.forEach(ye=>{ye.beforeDestroy&&ye.beforeDestroy()})}triggerCallback(ye){const Ce="start"==ye?this._onStartFns:this._onDoneFns;Ce.forEach(an=>an()),Ce.length=0}}const ot="!"},6814:(Rt,Ve,B)=>{B.d(Ve,{HT:()=>pe,JF:()=>Nr,K0:()=>he,Mx:()=>cs,NF:()=>so,PM:()=>oo,S$:()=>Qe,Ye:()=>ct,bD:()=>ls,ez:()=>ys,q:()=>K,w_:()=>de});var D=B(9212);let H=null;function K(){return H}function pe(A){H??=A}class de{}const he=new D.OlP("");let Ne=(()=>{class A{historyGo(O){throw new Error("")}static#e=this.\u0275fac=function(V){return new(V||A)};static#t=this.\u0275prov=D.Yz7({token:A,factory:()=>(0,D.f3M)(ue),providedIn:"platform"})}return A})(),ue=(()=>{class A extends Ne{constructor(){super(),this._doc=(0,D.f3M)(he),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return K().getBaseHref(this._doc)}onPopState(O){const V=K().getGlobalEventTarget(this._doc,"window");return V.addEventListener("popstate",O,!1),()=>V.removeEventListener("popstate",O)}onHashChange(O){const V=K().getGlobalEventTarget(this._doc,"window");return V.addEventListener("hashchange",O,!1),()=>V.removeEventListener("hashchange",O)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(O){this._location.pathname=O}pushState(O,V,ee){this._history.pushState(O,V,ee)}replaceState(O,V,ee){this._history.replaceState(O,V,ee)}forward(){this._history.forward()}back(){this._history.back()}historyGo(O=0){this._history.go(O)}getState(){return this._history.state}static#e=this.\u0275fac=function(V){return new(V||A)};static#t=this.\u0275prov=D.Yz7({token:A,factory:()=>new A,providedIn:"platform"})}return A})();function re(A,$){if(0==A.length)return $;if(0==$.length)return A;let O=0;return A.endsWith("/")&&O++,$.startsWith("/")&&O++,2==O?A+$.substring(1):1==O?A+$:A+"/"+$}function Re(A){const $=A.match(/#|\?|$/),O=$&&$.index||A.length;return A.slice(0,O-("/"===A[O-1]?1:0))+A.slice(O)}function at(A){return A&&"?"!==A[0]?"?"+A:A}let Qe=(()=>{class A{historyGo(O){throw new Error("")}static#e=this.\u0275fac=function(V){return new(V||A)};static#t=this.\u0275prov=D.Yz7({token:A,factory:()=>(0,D.f3M)(Bt),providedIn:"root"})}return A})();const vt=new D.OlP("");let Bt=(()=>{class A extends Qe{constructor(O,V){super(),this._platformLocation=O,this._removeListenerFns=[],this._baseHref=V??this._platformLocation.getBaseHrefFromDOM()??(0,D.f3M)(he).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(O){this._removeListenerFns.push(this._platformLocation.onPopState(O),this._platformLocation.onHashChange(O))}getBaseHref(){return this._baseHref}prepareExternalUrl(O){return re(this._baseHref,O)}path(O=!1){const V=this._platformLocation.pathname+at(this._platformLocation.search),ee=this._platformLocation.hash;return ee&&O?`${V}${ee}`:V}pushState(O,V,ee,He){const nt=this.prepareExternalUrl(ee+at(He));this._platformLocation.pushState(O,V,nt)}replaceState(O,V,ee,He){const nt=this.prepareExternalUrl(ee+at(He));this._platformLocation.replaceState(O,V,nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(O=0){this._platformLocation.historyGo?.(O)}static#e=this.\u0275fac=function(V){return new(V||A)(D.LFG(Ne),D.LFG(vt,8))};static#t=this.\u0275prov=D.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})(),ct=(()=>{class A{constructor(O){this._subject=new D.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=O;const V=this._locationStrategy.getBaseHref();this._basePath=function ne(A){if(new RegExp("^(https?:)?//").test(A)){const[,O]=A.split(/\/\/[^\/]+/);return O}return A}(Re(rt(V))),this._locationStrategy.onPopState(ee=>{this._subject.emit({url:this.path(!0),pop:!0,state:ee.state,type:ee.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(O=!1){return this.normalize(this._locationStrategy.path(O))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(O,V=""){return this.path()==this.normalize(O+at(V))}normalize(O){return A.stripTrailingSlash(function Wt(A,$){if(!A||!$.startsWith(A))return $;const O=$.substring(A.length);return""===O||["/",";","?","#"].includes(O[0])?O:$}(this._basePath,rt(O)))}prepareExternalUrl(O){return O&&"/"!==O[0]&&(O="/"+O),this._locationStrategy.prepareExternalUrl(O)}go(O,V="",ee=null){this._locationStrategy.pushState(ee,"",O,V),this._notifyUrlChangeListeners(this.prepareExternalUrl(O+at(V)),ee)}replaceState(O,V="",ee=null){this._locationStrategy.replaceState(ee,"",O,V),this._notifyUrlChangeListeners(this.prepareExternalUrl(O+at(V)),ee)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(O=0){this._locationStrategy.historyGo?.(O)}onUrlChange(O){return this._urlChangeListeners.push(O),this._urlChangeSubscription??=this.subscribe(V=>{this._notifyUrlChangeListeners(V.url,V.state)}),()=>{const V=this._urlChangeListeners.indexOf(O);this._urlChangeListeners.splice(V,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(O="",V){this._urlChangeListeners.forEach(ee=>ee(O,V))}subscribe(O,V,ee){return this._subject.subscribe({next:O,error:V,complete:ee})}static#e=this.normalizeQueryParams=at;static#t=this.joinWithSlash=re;static#n=this.stripTrailingSlash=Re;static#r=this.\u0275fac=function(V){return new(V||A)(D.LFG(Qe))};static#i=this.\u0275prov=D.Yz7({token:A,factory:()=>function Gt(){return new ct((0,D.LFG)(Qe))}(),providedIn:"root"})}return A})();function rt(A){return A.replace(/\/index.html$/,"")}function cs(A,$){$=encodeURIComponent($);for(const O of A.split(";")){const V=O.indexOf("="),[ee,He]=-1==V?[O,""]:[O.slice(0,V),O.slice(V+1)];if(ee.trim()===$)return decodeURIComponent(He)}return null}let ys=(()=>{class A{static#e=this.\u0275fac=function(V){return new(V||A)};static#t=this.\u0275mod=D.oAB({type:A});static#n=this.\u0275inj=D.cJS({})}return A})();const ls="browser",cu="server";function so(A){return A===ls}function oo(A){return A===cu}class Nr{}},9212:(Rt,Ve,B)=>{function H(t,r){return Object.is(t,r)}B.d(Ve,{QbO:()=>Fg,tb:()=>Ww,AFp:()=>Gl,ip1:()=>wS,hGG:()=>JP,z2F:()=>Mh,Ojb:()=>K_,sBO:()=>xS,Sil:()=>SP,EJc:()=>OP,ktI:()=>oi,Xts:()=>Ui,SBq:()=>ku,lqb:()=>Sn,qLn:()=>fr,vpe:()=>Ta,XFs:()=>Dn,OlP:()=>kn,zs3:()=>ii,ZZ4:()=>eT,aQg:()=>tT,soG:()=>Jv,YKP:()=>g,h0i:()=>l,R0b:()=>gs,FiY:()=>so,Lbi:()=>Jf,g9A:()=>nh,Qsj:()=>Qy,FYo:()=>Jm,JOm:()=>lh,Rgc:()=>Eh,dDg:()=>yP,eoX:()=>ES,q4F:()=>WR,GfV:()=>hS,s_b:()=>ng,ifc:()=>ss,gHi:()=>xs,dUe:()=>Jp,VuI:()=>RM,Flj:()=>MM,MMx:()=>Ue,Lck:()=>b,Gpc:()=>Jr,RIp:()=>Ba,f3M:()=>Kt,qHZ:()=>Uh,X6Q:()=>VP,$WT:()=>Zi,MR2:()=>Ai,r_H:()=>Or,tdS:()=>FI,rg0:()=>NM,Q0Y:()=>wh,c2e:()=>fS,zSh:()=>yu,wAp:()=>bg,I6F:()=>Bn,vHH:()=>lt,lri:()=>yS,rWj:()=>vS,cg1:()=>Sw,kuF:()=>Wn,kL8:()=>b0,dqk:()=>zt,iPO:()=>pM,Z0I:()=>qn,eJc:()=>Tl,QGY:()=>zw,F4k:()=>IS,kO0:()=>Bu,RDi:()=>Xf,AaK:()=>lr,qOj:()=>Ff,lbL:()=>Si,Xq5:()=>u,TTD:()=>we,_Bn:()=>HD,jDz:()=>zD,xp6:()=>Op,uIk:()=>lw,ekj:()=>mw,um2:()=>y0,Suo:()=>_D,Xpm:()=>qs,lG2:()=>Zo,Yz7:()=>qe,cJS:()=>ln,oAB:()=>Ua,Yjl:()=>Qo,Y36:()=>ph,_UZ:()=>ww,qZA:()=>$v,TgZ:()=>jv,EpF:()=>S0,n5z:()=>vr,LFG:()=>Kr,$8M:()=>Ss,NdJ:()=>bw,CRH:()=>ED,oxw:()=>sD,Hsn:()=>aD,F$t:()=>oD,Q6J:()=>pw,iGM:()=>vD,MAs:()=>ID,wJu:()=>I0,SjG:()=>E0,x6l:()=>v0,KtG:()=>Xa,evT:()=>Jh,CHM:()=>ac,LSH:()=>nm,P3R:()=>uh,YNc:()=>lg,_uU:()=>MD,Oqu:()=>Mw,hij:()=>qv,nJJ:()=>jD,Uc_:()=>Ow,E3D:()=>Nw,Gf:()=>yD}),B(5861);let K=null,pe=!1,de=1;const fe=Symbol("SIGNAL");function he(t){const r=K;return K=t,r}const re={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Re(t){if(pe)throw new Error("");if(null===K)return;K.consumerOnSignalRead(t);const r=K.nextProducerIndex++;Ze(K),r<K.producerNode.length&&K.producerNode[r]!==t&&pt(K)&&Ge(K.producerNode[r],K.producerIndexOfThis[r]),K.producerNode[r]!==t&&(K.producerNode[r]=t,K.producerIndexOfThis[r]=pt(K)?ne(t,K,r):0),K.producerLastReadVersion[r]=t.version}function Qe(t){if((!pt(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==de)){if(!t.producerMustRecompute(t)&&!Wt(t))return t.dirty=!1,void(t.lastCleanEpoch=de);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=de}}function vt(t){if(void 0===t.liveConsumerNode)return;const r=pe;pe=!0;try{for(const i of t.liveConsumerNode)i.dirty||Dt(i)}finally{pe=r}}function Bt(){return!1!==K?.consumerAllowSignalWrites}function Dt(t){t.dirty=!0,vt(t),t.consumerMarkedDirty?.(t)}function ct(t){return t&&(t.nextProducerIndex=0),he(t)}function Gt(t,r){if(he(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(pt(t))for(let i=t.nextProducerIndex;i<t.producerNode.length;i++)Ge(t.producerNode[i],t.producerIndexOfThis[i]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Wt(t){Ze(t);for(let r=0;r<t.producerNode.length;r++){const i=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==i.version||(Qe(i),a!==i.version))return!0}return!1}function ne(t,r,i){if(ot(t),Ze(t),0===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)t.producerIndexOfThis[a]=ne(t.producerNode[a],t,a);return t.liveConsumerIndexOfThis.push(i),t.liveConsumerNode.push(r)-1}function Ge(t,r){if(ot(t),Ze(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)Ge(t.producerNode[a],t.producerIndexOfThis[a]);const i=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[i],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[i],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],c=t.liveConsumerNode[r];Ze(c),c.producerIndexOfThis[a]=r}}function pt(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ze(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function ot(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}const ye=Symbol("UNSET"),Ce=Symbol("COMPUTING"),an=Symbol("ERRORED"),Pt={...re,value:ye,dirty:!0,error:null,equal:H,producerMustRecompute:t=>t.value===ye||t.value===Ce,producerRecomputeValue(t){if(t.value===Ce)throw new Error("Detected cycle in computations.");const r=t.value;t.value=Ce;const i=ct(t);let a;try{a=t.computation()}catch(c){a=an,t.error=c}finally{Gt(t,i)}r!==ye&&r!==an&&a!==an&&t.equal(r,a)?t.value=r:(t.value=a,t.version++)}};let Rn=function Xn(){throw new Error};function Ht(){Rn()}let ge=null;function Fe(t,r){Bt()||Ht(),t.equal(t.value,r)||(t.value=r,function rn(t){t.version++,function at(){de++}(),vt(t),ge?.()}(t))}const _t={...re,equal:H,value:void 0};var On=B(8645),zn=B(7394),or=B(5619),Jn=B(7398);const Gn="https://g.co/ng/security#xss";class lt extends Error{constructor(r,i){super(Wn(r,i)),this.code=r}}function Wn(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}const Gr=Symbol("InputSignalNode#UNSET"),er={..._t,transformFn:void 0,applyValueToInputSignal(t,r){Fe(t,r)}};function Fi(t,r){const i=Object.create(er);function a(){if(Re(i),i.value===Gr)throw new lt(-950,!1);return i.value}return i.value=t,i.transformFn=r?.transform,a[fe]=i,a}function sn(t){return{toString:t}.toString()}const gi="__parameters__";function Cr(t,r,i){return sn(()=>{const a=function Xi(t){return function(...i){if(t){const a=t(...i);for(const c in a)this[c]=a[c]}}}(r);function c(...d){if(this instanceof c)return a.apply(this,d),this;const _=new c(...d);return v.annotation=_,v;function v(C,x,j){const Q=C.hasOwnProperty(gi)?C[gi]:Object.defineProperty(C,gi,{value:[]})[gi];for(;Q.length<=j;)Q.push(null);return(Q[j]=Q[j]||[]).push(_),C}}return i&&(c.prototype=Object.create(i.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}const zt=globalThis;function Pn(t){for(let r in t)if(t[r]===Pn)return r;throw Error("Could not find renamed property on target object.")}function xn(t,r){for(const i in r)r.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=r[i])}function lr(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(lr).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const i=r.indexOf("\n");return-1===i?r:r.substring(0,i)}function ms(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const Hn=Pn({__forward_ref__:Pn});function Jr(t){return t.__forward_ref__=Jr,t.toString=function(){return lr(this())},t}function Ie(t){return xe(t)?t():t}function xe(t){return"function"==typeof t&&t.hasOwnProperty(Hn)&&t.__forward_ref__===Jr}function qe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ln(t){return{providers:t.providers||[],imports:t.imports||[]}}function mn(t){return mr(t,Ji)||mr(t,Js)}function qn(t){return null!==mn(t)}function mr(t,r){return t.hasOwnProperty(r)?t[r]:null}function Ti(t){return t&&(t.hasOwnProperty(cs)||t.hasOwnProperty(_s))?t[cs]:null}const Ji=Pn({\u0275prov:Pn}),cs=Pn({\u0275inj:Pn}),Js=Pn({ngInjectableDef:Pn}),_s=Pn({ngInjectorDef:Pn});class kn{constructor(r,i){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=qe({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function jo(t){return t&&!!t.\u0275providers}const Ur=Pn({\u0275cmp:Pn}),pn=Pn({\u0275dir:Pn}),mi=Pn({\u0275pipe:Pn}),to=Pn({\u0275mod:Pn}),es=Pn({\u0275fac:Pn}),Pr=Pn({__NG_ELEMENT_ID__:Pn}),Pa=Pn({__NG_ENV_ID__:Pn});function $t(t){return"string"==typeof t?t:null==t?"":String(t)}function aa(t,r){throw new lt(-201,!1)}var Dn=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Dn||{});let _i;function no(){return _i}function Ki(t){const r=_i;return _i=t,r}function Ps(t,r,i){const a=mn(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:i&Dn.Optional?null:void 0!==r?r:void aa()}const Do={},ro="__NG_DI_FLAG__",Ms="ngTempTokenPath",zo=/\n/gm,Oa="__source";let yi;function vi(t){const r=yi;return yi=t,r}function xa(t,r=Dn.Default){if(void 0===yi)throw new lt(-203,!1);return null===yi?Ps(t,void 0,r):yi.get(t,r&Dn.Optional?null:void 0,r)}function Kr(t,r=Dn.Default){return(no()||xa)(Ie(t),r)}function Kt(t,r=Dn.Default){return Kr(t,ca(r))}function ca(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function la(t){const r=[];for(let i=0;i<t.length;i++){const a=Ie(t[i]);if(Array.isArray(a)){if(0===a.length)throw new lt(900,!1);let c,d=Dn.Default;for(let _=0;_<a.length;_++){const v=a[_],C=ls(v);"number"==typeof C?-1===C?c=v.token:d|=C:c=v}r.push(Kr(c,d))}else r.push(Kr(a))}return r}function ys(t,r){return t[ro]=r,t.prototype[ro]=r,t}function ls(t){return t[ro]}const so=ys(Cr("Optional"),8),So=ys(Cr("SkipSelf"),4);function Hs(t,r){return t.hasOwnProperty(es)?t[es]:null}function ha(t,r){t.forEach(i=>Array.isArray(i)?ha(i,r):r(i))}function lu(t,r,i){r>=t.length?t.push(i):t.splice(r,0,i)}function Nr(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function ti(t,r,i){let a=ns(t,r);return a>=0?t[1|a]=i:(a=~a,function fa(t,r,i,a){let c=t.length;if(c==r)t.push(i,a);else if(1===c)t.push(a,t[0]),t[0]=i;else{for(c--,t.push(t[c-1],t[c]);c>r;)t[c]=t[c-2],c--;t[r]=i,t[r+1]=a}}(t,a,r,i)),a}function Di(t,r){const i=ns(t,r);if(i>=0)return t[1|i]}function ns(t,r){return function Xc(t,r,i){let a=0,c=t.length>>i;for(;c!==a;){const d=a+(c-a>>1),_=t[d<<i];if(r===_)return d<<i;_>r?c=d:a=d+1}return~(c<<i)}(t,r,1)}const Os={},Kn=[],Ui=new kn(""),Dc=new kn("",-1),ao=new kn("");class Bi{get(r,i=Do){if(i===Do){const a=new Error(`NullInjectorError: No provider for ${lr(r)}!`);throw a.name="NullInjectorError",a}return i}}var Go=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Go||{}),ss=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ss||{}),Si=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Si||{});function Gu(t,r,i){let a=t.length;for(;;){const c=t.indexOf(r,i);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const d=r.length;if(c+d===a||t.charCodeAt(c+d)<=32)return c}i=c+1}}function ka(t,r,i){let a=0;for(;a<i.length;){const c=i[a];if("number"==typeof c){if(0!==c)break;a++;const d=i[a++],_=i[a++],v=i[a++];t.setAttribute(r,_,v,d)}else{const d=c,_=i[++a];Wo(d)?t.setProperty(r,d,_):t.setAttribute(r,d,_),a++}}return a}function ga(t){return 3===t||4===t||6===t}function Wo(t){return 64===t.charCodeAt(0)}function Co(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let i=-1;for(let a=0;a<r.length;a++){const c=r[a];"number"==typeof c?i=c:0===i||qo(t,i,c,null,-1===i||2===i?r[++a]:null)}}return t}function qo(t,r,i,a,c){let d=0,_=t.length;if(-1===r)_=-1;else for(;d<t.length;){const v=t[d++];if("number"==typeof v){if(v===r){_=-1;break}if(v>r){_=d-1;break}}}for(;d<t.length;){const v=t[d];if("number"==typeof v)break;if(v===i){if(null===a)return void(null!==c&&(t[d+1]=c));if(a===t[d+1])return void(t[d+2]=c)}d++,null!==a&&d++,null!==c&&d++}-1!==_&&(t.splice(_,0,r),d=_+1),t.splice(d++,0,i),null!==a&&t.splice(d++,0,a),null!==c&&t.splice(d++,0,c)}const Gs="ng-template";function Ws(t,r,i,a){let c=0;if(a){for(;c<r.length&&"string"==typeof r[c];c+=2)if("class"===r[c]&&-1!==Gu(r[c+1].toLowerCase(),i,0))return!0}else if(La(t))return!1;if(c=r.indexOf(1,c),c>-1){let d;for(;++c<r.length&&"string"==typeof(d=r[c]);)if(d.toLowerCase()===i)return!0}return!1}function La(t){return 4===t.type&&t.value!==Gs}function ma(t,r,i){return r===(4!==t.type||i?t.value:Gs)}function ds(t,r,i){let a=4;const c=t.attrs,d=null!==c?function hu(t){for(let r=0;r<t.length;r++)if(ga(t[r]))return r;return t.length}(c):0;let _=!1;for(let v=0;v<r.length;v++){const C=r[v];if("number"!=typeof C){if(!_)if(4&a){if(a=2|1&a,""!==C&&!ma(t,C,i)||""===C&&1===r.length){if(ji(a))return!1;_=!0}}else if(8&a){if(null===c||!Ws(t,c,C,i)){if(ji(a))return!1;_=!0}}else{const x=r[++v],j=jr(C,c,La(t),i);if(-1===j){if(ji(a))return!1;_=!0;continue}if(""!==x){let Q;if(Q=j>d?"":c[j+1].toLowerCase(),2&a&&x!==Q){if(ji(a))return!1;_=!0}}}}else{if(!_&&!ji(a)&&!ji(C))return!1;if(_&&ji(C))continue;_=!1,a=C|1&a}}return ji(a)||_}function ji(t){return 0==(1&t)}function jr(t,r,i,a){if(null===r)return-1;let c=0;if(a||!i){let d=!1;for(;c<r.length;){const _=r[c];if(_===t)return c;if(3===_||6===_)d=!0;else{if(1===_||2===_){let v=r[++c];for(;"string"==typeof v;)v=r[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=d?1:2}return-1}return function ur(t,r){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const a=t[i];if("number"==typeof a)return-1;if(a===r)return i;i++}return-1}(r,t)}function du(t,r,i=!1){for(let a=0;a<r.length;a++)if(ds(t,r[a],i))return!0;return!1}function fu(t,r){e:for(let i=0;i<r.length;i++){const a=r[i];if(t.length===a.length){for(let c=0;c<t.length;c++)if(t[c]!==a[c])continue e;return!0}}return!1}function Wu(t,r){return t?":not("+r.trim()+")":r}function Va(t){let r=t[0],i=1,a=2,c="",d=!1;for(;i<t.length;){let _=t[i];if("string"==typeof _)if(2&a){const v=t[++i];c+="["+_+(v.length>0?'="'+v+'"':"")+"]"}else 8&a?c+="."+_:4&a&&(c+=" "+_);else""!==c&&!ji(_)&&(r+=Wu(d,c),c=""),a=_,d=d||!ji(a);i++}return""!==c&&(r+=Wu(d,c)),r}function qs(t){return sn(()=>{const r=Yo(t),i={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Go.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ss.Emulated,styles:t.styles||Kn,_:null,schemas:t.schemas||null,tView:null,id:""};bo(i);const a=t.dependencies;return i.directiveDefs=uo(a,!1),i.pipeDefs=uo(a,!0),i.id=function gu(t){let r=0;const i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const c of i)r=Math.imul(31,r)+c.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(i),i})}function Ku(t){return En(t)||$r(t)}function Jc(t){return null!==t}function Ua(t){return sn(()=>({type:t.type,bootstrap:t.bootstrap||Kn,declarations:t.declarations||Kn,imports:t.imports||Kn,exports:t.exports||Kn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Ko(t,r){if(null==t)return Os;const i={};for(const a in t)if(t.hasOwnProperty(a)){const c=t[a];let d,_,v=Si.None;Array.isArray(c)?(v=c[0],d=c[1],_=c[2]??d):(d=c,_=c),r?(i[d]=v!==Si.None?[a,v]:a,r[d]=_):i[d]=a}return i}function Zo(t){return sn(()=>{const r=Yo(t);return bo(r),r})}function Qo(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function En(t){return t[Ur]||null}function $r(t){return t[pn]||null}function Zr(t){return t[mi]||null}function Zi(t){const r=En(t)||$r(t)||Zr(t);return null!==r&&r.standalone}function Ci(t,r){const i=t[to]||null;if(!i&&!0===r)throw new Error(`Type ${lr(t)} does not have '\u0275mod' property.`);return i}function Yo(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||Os,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Kn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ko(t.inputs,r),outputs:Ko(t.outputs),debugInfo:null}}function bo(t){t.features?.forEach(r=>r(t))}function uo(t,r){if(!t)return null;const i=r?Zr:Ku;return()=>("function"==typeof t?t():t).map(a=>i(a)).filter(Jc)}function Ai(t){return{\u0275providers:t}}function Ba(...t){return{\u0275providers:Es(0,t),\u0275fromNgModule:!0}}function Es(t,...r){const i=[],a=new Set;let c;const d=_=>{i.push(_)};return ha(r,_=>{const v=_;Xo(v,d,[],a)&&(c||=[],c.push(v))}),void 0!==c&&Zu(c,d),i}function Zu(t,r){for(let i=0;i<t.length;i++){const{ngModule:a,providers:c}=t[i];Qu(c,d=>{r(d,a)})}}function Xo(t,r,i,a){if(!(t=Ie(t)))return!1;let c=null,d=Ti(t);const _=!d&&En(t);if(d||_){if(_&&!_.standalone)return!1;c=t}else{const C=t.ngModule;if(d=Ti(C),!d)return!1;c=C}const v=a.has(c);if(_){if(v)return!1;if(a.add(c),_.dependencies){const C="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const x of C)Xo(x,r,i,a)}}else{if(!d)return!1;{if(null!=d.imports&&!v){let x;a.add(c);try{ha(d.imports,j=>{Xo(j,r,i,a)&&(x||=[],x.push(j))})}finally{}void 0!==x&&Zu(x,r)}if(!v){const x=Hs(c)||(()=>new c);r({provide:c,useFactory:x,deps:Kn},c),r({provide:ao,useValue:c,multi:!0},c),r({provide:Ui,useValue:()=>Kr(c),multi:!0},c)}const C=d.providers;if(null!=C&&!v){const x=t;Qu(C,j=>{r(j,x)})}}}return c!==t&&void 0!==t.providers}function Qu(t,r){for(let i of t)jo(i)&&(i=i.\u0275providers),Array.isArray(i)?Qu(i,r):r(i)}const Yu=Pn({provide:String,useValue:Pn});function mu(t){return null!==t&&"object"==typeof t&&Yu in t}function ni(t){return"function"==typeof t}const yu=new kn(""),Ks={},el={};let os;function Ha(){return void 0===os&&(os=new Bi),os}class Sn{}class vu extends Sn{get destroyed(){return this._destroyed}constructor(r,i,a,c){super(),this.parent=i,this.source=a,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fi(r,_=>this.processProvider(_)),this.records.set(Dc,jt(void 0,this)),c.has("environment")&&this.records.set(Sn,jt(void 0,this));const d=this.records.get(yu);null!=d&&"string"==typeof d.value&&this.scopes.add(d.value),this.injectorDefTypes=new Set(this.get(ao,Kn,Dn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const r=he(null);try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const i=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of i)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),he(r)}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const i=vi(this),a=Ki(void 0);try{return r()}finally{vi(i),Ki(a)}}get(r,i=Do,a=Dn.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(Pa))return r[Pa](this);a=ca(a);const d=vi(this),_=Ki(void 0);try{if(!(a&Dn.SkipSelf)){let C=this.records.get(r);if(void 0===C){const x=function Ro(t){return"function"==typeof t||"object"==typeof t&&t instanceof kn}(r)&&mn(r);C=x&&this.injectableDefInScope(x)?jt(co(r),Ks):null,this.records.set(r,C)}if(null!=C)return this.hydrate(r,C)}return(a&Dn.Self?Ha():this.parent).get(r,i=a&Dn.Optional&&i===Do?null:i)}catch(v){if("NullInjectorError"===v.name){if((v[Ms]=v[Ms]||[]).unshift(lr(r)),d)throw v;return function cu(t,r,i,a){const c=t[Ms];throw r[Oa]&&c.unshift(r[Oa]),t.message=function io(t,r,i,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let c=lr(r);if(Array.isArray(r))c=r.map(lr).join(" -> ");else if("object"==typeof r){let d=[];for(let _ in r)if(r.hasOwnProperty(_)){let v=r[_];d.push(_+":"+("string"==typeof v?JSON.stringify(v):lr(v)))}c=`{${d.join(", ")}}`}return`${i}${a?"("+a+")":""}[${c}]: ${t.replace(zo,"\n  ")}`}("\n"+t.message,c,i,a),t.ngTokenPath=c,t[Ms]=null,t}(v,r,"R3InjectorError",this.source)}throw v}finally{Ki(_),vi(d)}}resolveInjectorInitializers(){const r=he(null),i=vi(this),a=Ki(void 0);try{const d=this.get(Ui,Kn,Dn.Self);for(const _ of d)_()}finally{vi(i),Ki(a),he(r)}}toString(){const r=[],i=this.records;for(const a of i.keys())r.push(lr(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new lt(205,!1)}processProvider(r){let i=ni(r=Ie(r))?r:Ie(r&&r.provide);const a=function Xu(t){return mu(t)?jt(void 0,t.useValue):jt(_a(t),Ks)}(r);if(!ni(r)&&!0===r.multi){let c=this.records.get(i);c||(c=jt(void 0,Ks,!0),c.factory=()=>la(c.multi),this.records.set(i,c)),i=r,c.multi.push(r)}this.records.set(i,a)}hydrate(r,i){const a=he(null);try{return i.value===Ks&&(i.value=el,i.value=i.factory()),"object"==typeof i.value&&i.value&&function Eu(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}finally{he(a)}}injectableDefInScope(r){if(!r.providedIn)return!1;const i=Ie(r.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(r){const i=this._onDestroyHooks.indexOf(r);-1!==i&&this._onDestroyHooks.splice(i,1)}}function co(t){const r=mn(t),i=null!==r?r.factory:Hs(t);if(null!==i)return i;if(t instanceof kn)throw new lt(204,!1);if(t instanceof Function)return function lo(t){if(t.length>0)throw new lt(204,!1);const i=function _r(t){return t&&(t[Ji]||t[Js])||null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new lt(204,!1)}function _a(t,r,i){let a;if(ni(t)){const c=Ie(t);return Hs(c)||co(c)}if(mu(t))a=()=>Ie(t.useValue);else if(function Jo(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...la(t.deps||[]));else if(function $a(t){return!(!t||!t.useExisting)}(t))a=()=>Kr(Ie(t.useExisting));else{const c=Ie(t&&(t.useClass||t.provide));if(!function Sc(t){return!!t.deps}(t))return Hs(c)||co(c);a=()=>new c(...la(t.deps))}return a}function jt(t,r,i=!1){return{factory:t,value:r,multi:i?[]:void 0}}function fi(t,r){for(const i of t)Array.isArray(i)?fi(i,r):i&&jo(i)?fi(i.\u0275providers,r):r(i)}function Or(t,r){t instanceof vu&&t.assertNotDestroyed();const a=vi(t),c=Ki(void 0);try{return r()}finally{vi(a),Ki(c)}}function Iu(){return void 0!==no()||null!=function Mr(){return yi}()}function xs(t){if(!Iu())throw new lt(-203,!1)}const Zn=0,Ye=1,Ut=2,Ln=3,Qr=4,Yr=5,Xe=6,yr=7,_n=8,ri=9,wt=10,st=11,ya=12,Tt=13,je=14,Ke=15,Ir=16,za=17,as=18,Ga=19,ho=20,Ei=21,Is=22,Zs=23,In=25,bi=1,hs=7,ws=9,pi=10;var kr=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(kr||{});function Nt(t){return Array.isArray(t)&&"object"==typeof t[bi]}function Ri(t){return Array.isArray(t)&&!0===t[bi]}function Vn(t){return 0!=(4&t.flags)}function ea(t){return t.componentOffset>-1}function rr(t){return 1==(1&t.flags)}function dt(t){return!!t.template}function Wa(t){return 0!=(512&t[Ut])}class oe{constructor(r,i,a){this.previousValue=r,this.currentValue=i,this.firstChange=a}isFirstChange(){return this.firstChange}}function ze(t,r,i,a){null!==r?r.applyValueToInputSignal(r,a):t[i]=a}function we(){return It}function It(t){return t.type.prototype.ngOnChanges&&(t.setInput=Cn),vn}function vn(){const t=Ka(this),r=t?.current;if(r){const i=t.previous;if(i===Os)t.previous=r;else for(let a in r)i[a]=r[a];t.current=null,this.ngOnChanges(r)}}function Cn(t,r,i,a,c){const d=this.declaredInputs[a],_=Ka(t)||function nc(t,r){return t[Qn]=r}(t,{previous:Os,current:null}),v=_.current||(_.current={}),C=_.previous,x=C[d];v[d]=new oe(x&&x.currentValue,i,C===Os),ze(t,r,c,i)}we.ngInherit=!0;const Qn="__ngSimpleChanges__";function Ka(t){return t[Qn]||null}const Pi=function(t,r,i){};let Gd=!1;function Yn(t){for(;Array.isArray(t);)t=t[Zn];return t}function Ac(t,r){return Yn(r[t])}function Ls(t,r){return Yn(r[t.index])}function Du(t,r){return t.data[r]}function go(t,r){const i=r[t];return Nt(i)?i:i[Zn]}function nl(t){return 128==(128&t[Ut])}function mo(t,r){return null==r?null:t[r]}function Su(t){t[za]=0}function bc(t){1024&t[Ut]||(t[Ut]|=1024,nl(t)&&Mi(t))}function Rc(t){return!!(9216&t[Ut]||t[Zs]?.dirty)}function Qa(t){t[wt].changeDetectionScheduler?.notify(1),Rc(t)?Mi(t):64&t[Ut]&&(function ld(){return Gd}()?(t[Ut]|=1024,Mi(t)):t[wt].changeDetectionScheduler?.notify())}function Mi(t){t[wt].changeDetectionScheduler?.notify();let r=Ea(t);for(;null!==r&&!(8192&r[Ut])&&(r[Ut]|=8192,nl(r));)r=Ea(r)}function rl(t,r){if(256==(256&t[Ut]))throw new lt(911,!1);null===t[Ei]&&(t[Ei]=[]),t[Ei].push(r)}function Ea(t){const r=t[Ln];return Ri(r)?r[Ln]:r}const Ot={lFrame:Xr(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ts(){return Ot.bindingsEnabled}function Ya(){return null!==Ot.skipHydrationRootTNode}function We(){return Ot.lFrame.lView}function $n(){return Ot.lFrame.tView}function ac(t){return Ot.lFrame.contextLView=t,t[_n]}function Xa(t){return Ot.lFrame.contextLView=null,t}function Tr(){let t=ta();for(;null!==t&&64===t.type;)t=t.parent;return t}function ta(){return Ot.lFrame.currentTNode}function _o(t,r){const i=Ot.lFrame;i.currentTNode=t,i.isParent=r}function Oo(){return Ot.lFrame.isParent}function yo(){Ot.lFrame.isParent=!1}function fs(){return Ot.lFrame.bindingIndex++}function sl(t,r){const i=Ot.lFrame;i.bindingIndex=i.bindingRootIndex=t,Ia(r)}function Ia(t){Ot.lFrame.currentDirectiveIndex=t}function hd(){return Ot.lFrame.currentQueryIndex}function Ol(t){Ot.lFrame.currentQueryIndex=t}function ol(t){const r=t[Ye];return 2===r.type?r.declTNode:1===r.type?t[Yr]:null}function fd(t,r,i){if(i&Dn.SkipSelf){let c=r,d=t;for(;!(c=c.parent,null!==c||i&Dn.Host||(c=ol(d),null===c||(d=d[je],10&c.type))););if(null===c)return!1;r=c,t=d}const a=Ot.lFrame=xl();return a.currentTNode=r,a.lView=t,!0}function Yi(t){const r=xl(),i=t[Ye];Ot.lFrame=r,r.currentTNode=i.firstChild,r.lView=t,r.tView=i,r.contextLView=t,r.bindingIndex=i.bindingStartIndex,r.inI18n=!1}function xl(){const t=Ot.lFrame,r=null===t?null:t.child;return null===r?Xr(t):r}function Xr(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function xi(){const t=Ot.lFrame;return Ot.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Au=xi;function kl(){const t=xi();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ps(){return Ot.lFrame.selectedIndex}function bu(t){Ot.lFrame.selectedIndex=t}function Xt(){const t=Ot.lFrame;return Du(t.tView,t.selectedIndex)}let hc=!0;function Ja(){return hc}function wa(t){hc=t}function fc(t,r){for(let i=r.directiveStart,a=r.directiveEnd;i<a;i++){const d=t.data[i].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:x,ngOnDestroy:j}=d;_&&(t.contentHooks??=[]).push(-i,_),v&&((t.contentHooks??=[]).push(i,v),(t.contentCheckHooks??=[]).push(i,v)),C&&(t.viewHooks??=[]).push(-i,C),x&&((t.viewHooks??=[]).push(i,x),(t.viewCheckHooks??=[]).push(i,x)),null!=j&&(t.destroyHooks??=[]).push(i,j)}}function kc(t,r,i){qd(t,r,3,i)}function cl(t,r,i,a){(3&t[Ut])===i&&qd(t,r,i,a)}function Lc(t,r){let i=t[Ut];(3&i)===r&&(i&=16383,i+=1,t[Ut]=i)}function qd(t,r,i,a){const d=a??-1,_=r.length-1;let v=0;for(let C=void 0!==a?65535&t[za]:0;C<_;C++)if("number"==typeof r[C+1]){if(v=r[C],null!=a&&v>=a)break}else r[C]<0&&(t[za]+=65536),(v<d||-1==d)&&(md(t,i,r,C),t[za]=(4294901760&t[za])+C+2),C++}function Kd(t,r){Pi(4,t,r);const i=he(null);try{r.call(t)}finally{he(i),Pi(5,t,r)}}function md(t,r,i,a){const c=i[a]<0,d=i[a+1],v=t[c?-i[a]:i[a]];c?t[Ut]>>14<t[za]>>16&&(3&t[Ut])===r&&(t[Ut]+=16384,Kd(v,d)):Kd(v,d)}const pc=-1;class Ru{constructor(r,i,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=a}}function ia(t){return t!==pc}function Fc(t){return 32767&t}function xo(t,r){let i=function Vc(t){return t>>16}(t),a=r;for(;i>0;)a=a[je],i--;return a}let Vl=!0;function Pu(t){const r=Vl;return Vl=t,r}const Ul=255,gc=5;let Bl=0;const Ys={};function Mu(t,r){const i=dl(t,r);if(-1!==i)return i;const a=r[Ye];a.firstCreatePass&&(t.injectorIndex=r.length,Uc(a.data,t),Uc(r,null),Uc(a.blueprint,null));const c=E(t,r),d=t.injectorIndex;if(ia(c)){const _=Fc(c),v=xo(c,r),C=v[Ye].data;for(let x=0;x<8;x++)r[d+x]=v[_+x]|C[_+x]}return r[d+8]=c,d}function Uc(t,r){t.push(0,0,0,0,0,0,0,0,r)}function dl(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function E(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,a=null,c=r;for(;null!==c;){if(a=tr(c),null===a)return pc;if(i++,c=c[je],-1!==a.injectorIndex)return a.injectorIndex|i<<16}return pc}function f(t,r,i){!function yd(t,r,i){let a;"string"==typeof i?a=i.charCodeAt(0)||0:i.hasOwnProperty(Pr)&&(a=i[Pr]),null==a&&(a=i[Pr]=Bl++);const c=a&Ul;r.data[t+(c>>gc)]|=1<<c}(t,r,i)}function T(t,r,i){if(i&Dn.Optional||void 0!==t)return t;aa()}function P(t,r,i,a){if(i&Dn.Optional&&void 0===a&&(a=null),!(i&(Dn.Self|Dn.Host))){const c=t[ri],d=Ki(void 0);try{return c?c.get(r,a,i&Dn.Optional):Ps(r,a,i&Dn.Optional)}finally{Ki(d)}}return T(a,0,i)}function U(t,r,i,a=Dn.Default,c){if(null!==t){if(2048&r[Ut]&&!(a&Dn.Self)){const _=function ir(t,r,i,a,c){let d=t,_=r;for(;null!==d&&null!==_&&2048&_[Ut]&&!(512&_[Ut]);){const v=W(d,_,i,a|Dn.Self,Ys);if(v!==Ys)return v;let C=d.parent;if(!C){const x=_[ho];if(x){const j=x.get(i,Ys,a);if(j!==Ys)return j}C=tr(_),_=_[je]}d=C}return c}(t,r,i,a,Ys);if(_!==Ys)return _}const d=W(t,r,i,a,Ys);if(d!==Ys)return d}return P(r,i,a,c)}function W(t,r,i,a,c){const d=function et(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(Pr)?t[Pr]:void 0;return"number"==typeof r?r>=0?r&Ul:An:r}(i);if("function"==typeof d){if(!fd(r,t,a))return a&Dn.Host?T(c,0,a):P(r,i,a,c);try{let _;if(_=d(a),null!=_||a&Dn.Optional)return _;aa()}finally{Au()}}else if("number"==typeof d){let _=null,v=dl(t,r),C=pc,x=a&Dn.Host?r[Ke][Yr]:null;for((-1===v||a&Dn.SkipSelf)&&(C=-1===v?E(t,r):r[v+8],C!==pc&&nn(a,!1)?(_=r[Ye],v=Fc(C),r=xo(C,r)):v=-1);-1!==v;){const j=r[Ye];if(gt(d,v,j.data)){const Q=J(v,r,i,_,a,x);if(Q!==Ys)return Q}C=r[v+8],C!==pc&&nn(a,r[Ye].data[v+8]===x)&&gt(d,v,r)?(_=j,v=Fc(C),r=xo(C,r)):v=-1}}return c}function J(t,r,i,a,c,d){const _=r[Ye],v=_.data[t+8],j=ae(v,_,i,null==a?ea(v)&&Vl:a!=_&&0!=(3&v.type),c&Dn.Host&&d===v);return null!==j?_e(r,_,j,v):Ys}function ae(t,r,i,a,c){const d=t.providerIndexes,_=r.data,v=1048575&d,C=t.directiveStart,j=d>>20,le=c?v+j:t.directiveEnd;for(let ve=a?v:v+j;ve<le;ve++){const ke=_[ve];if(ve<C&&i===ke||ve>=C&&ke.type===i)return ve}if(c){const ve=_[C];if(ve&&dt(ve)&&ve.type===i)return C}return null}function _e(t,r,i,a){let c=t[i];const d=r.data;if(function Ll(t){return t instanceof Ru}(c)){const _=c;_.resolving&&function Ma(t,r){throw r&&r.join(" > "),new lt(-200,t)}(function jn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():$t(t)}(d[i]));const v=Pu(_.canSeeViewProviders);_.resolving=!0;const x=_.injectImpl?Ki(_.injectImpl):null;fd(t,a,Dn.Default);try{c=t[i]=_.factory(void 0,d,t,a),r.firstCreatePass&&i>=a.directiveStart&&function gd(t,r,i){const{ngOnChanges:a,ngOnInit:c,ngDoCheck:d}=r.type.prototype;if(a){const _=It(r);(i.preOrderHooks??=[]).push(t,_),(i.preOrderCheckHooks??=[]).push(t,_)}c&&(i.preOrderHooks??=[]).push(0-t,c),d&&((i.preOrderHooks??=[]).push(t,d),(i.preOrderCheckHooks??=[]).push(t,d))}(i,d[i],r)}finally{null!==x&&Ki(x),Pu(v),_.resolving=!1,Au()}}return c}function gt(t,r,i){return!!(i[r+(t>>gc)]&1<<t)}function nn(t,r){return!(t&Dn.Self||t&Dn.Host&&r)}class Mt{constructor(r,i){this._tNode=r,this._lView=i}get(r,i,a){return U(this._tNode,this._lView,r,ca(a),i)}}function An(){return new Mt(Tr(),We())}function vr(t){return sn(()=>{const r=t.prototype.constructor,i=r[es]||Dr(r),a=Object.prototype;let c=Object.getPrototypeOf(t.prototype).constructor;for(;c&&c!==a;){const d=c[es]||Dr(c);if(d&&d!==i)return d;c=Object.getPrototypeOf(c)}return d=>new d})}function Dr(t){return xe(t)?()=>{const r=Dr(Ie(t));return r&&r()}:Hs(t)}function tr(t){const r=t[Ye],i=r.type;return 2===i?r.declTNode:1===i?t[Yr]:null}function Ss(t){return function m(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const i=t.attrs;if(i){const a=i.length;let c=0;for(;c<a;){const d=i[c];if(ga(d))break;if(0===d)c+=2;else if("number"==typeof d)for(c++;c<a&&"string"==typeof i[c];)c++;else{if(d===r)return i[c+1];c+=2}}}return null}(Tr(),t)}function cr(t,r=null,i=null,a){const c=Cs(t,r,i,a);return c.resolveInjectorInitializers(),c}function Cs(t,r=null,i=null,a,c=new Set){const d=[i||Kn,Ba(t)];return a=a||("object"==typeof t?void 0:lr(t)),new vu(d,r||Ha(),a||null,c)}let ii=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Do;static#t=this.NULL=new Bi;static create(i,a){if(Array.isArray(i))return cr({name:""},a,i,"");{const c=i.name??"";return cr({name:c},i.parent,i.providers,c)}}static#n=this.\u0275prov=qe({token:t,providedIn:"any",factory:()=>Kr(Dc)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function Ou(t){return t.ngOriginalError}class fr{constructor(){this._console=console}handleError(r){const i=this._findOriginalError(r);this._console.error("ERROR",r),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(r){let i=r&&Ou(r);for(;i&&Ou(i);)i=Ou(i);return i||null}}const eu=new kn("",{providedIn:"root",factory:()=>Kt(fr).handleError.bind(void 0)});let oi=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=xu;static#t=this.__NG_ENV_ID__=i=>i}return t})();class jc extends oi{constructor(r){super(),this._lView=r}onDestroy(r){return rl(this._lView,r),()=>function No(t,r){if(null===t[Ei])return;const i=t[Ei].indexOf(r);-1!==i&&t[Ei].splice(i,1)}(this._lView,r)}}function xu(){return new jc(We())}function Vs(t,r){return Fi(t,r)}const Uh=(Vs.required=function Vh(t){return Fi(Gr,t)},Vs);function us(){return Mn(Tr(),We())}function Mn(t,r){return new ku(Ls(t,r))}let ku=(()=>{class t{constructor(i){this.nativeElement=i}static#e=this.__NG_ELEMENT_ID__=us}return t})();function Qd(t){return t instanceof ku?t.nativeElement:t}function Yd(t){return r=>{setTimeout(t,void 0,r)}}const Ta=class Ed extends On.x{constructor(r=!1){super(),this.destroyRef=void 0,this.__isAsync=r,Iu()&&(this.destroyRef=Kt(oi,{optional:!0})??void 0)}emit(r){const i=he(null);try{super.next(r)}finally{he(i)}}subscribe(r,i,a){let c=r,d=i||(()=>null),_=a;if(r&&"object"==typeof r){const C=r;c=C.next?.bind(C),d=C.error?.bind(C),_=C.complete?.bind(C)}this.__isAsync&&(d=Yd(d),c&&(c=Yd(c)),_&&(_=Yd(_)));const v=super.subscribe({next:c,error:d,complete:_});return r instanceof zn.w0&&r.add(v),v}};function Wf(){return this._results[Symbol.iterator]()}class Xd{static#e=Symbol.iterator;get changes(){return this._changes??=new Ta}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const i=Xd.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=Wf)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,i){return this._results.reduce(r,i)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,i){this.dirty=!1;const a=function ei(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function da(t,r,i){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let c=t[a],d=r[a];if(i&&(c=i(c),d=i(d)),d!==c)return!1}return!0}(this._results,a,i))&&(this._results=a,this.length=a.length,this.last=a[this.length-1],this.first=a[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(r){this._onDirty=r}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function p(t){return 128==(128&t.flags)}const k=new Map;let G=0;const tu="__ngContext__";function As(t,r){Nt(r)?(t[tu]=r[Ga],function Pe(t){k.set(t[Ga],t)}(r)):t[tu]=r}function j_(t){return Kf(t[ya])}function th(t){return Kf(t[Qr])}function Kf(t){for(;null!==t&&!Ri(t);)t=t[Qr];return t}let Yf;function Xf(t){Yf=t}const Gl=new kn("",{providedIn:"root",factory:()=>Td}),Td="ng",nh=new kn(""),Jf=new kn("",{providedIn:"platform",factory:()=>"unknown"}),Fg=new kn(""),K_=new kn("",{providedIn:"root",factory:()=>function Da(){if(void 0!==Yf)return Yf;if(typeof document<"u")return document;throw new lt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Hg=()=>null;function tp(t,r,i=!1){return Hg(t,r,i)}const Kl=new kn("",{providedIn:"root",factory:()=>!1});let up;function Kg(t){return function cp(){if(void 0===up&&(up=null,zt.trustedTypes))try{up=zt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return up}()?.createScriptURL(t)||t}class ty{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Gn})`}}function El(t){return t instanceof ty?t.changingThisBreaksApplicationSecurity:t}function sh(t,r){const i=function EE(t){return t instanceof ty&&t.getTypeName()||null}(t);if(null!=i&&i!==r){if("ResourceURL"===i&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${i} (see ${Gn})`)}return i===r}const Zg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Rd=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Rd||{});function nm(t){const r=Pd();return r?r.sanitize(Rd.URL,t)||"":sh(t,"URL")?El(t):function Qg(t){return(t=String(t)).match(Zg)?t:"unsafe:"+t}($t(t))}function pp(t){const r=Pd();if(r)return Kg(r.sanitize(Rd.RESOURCE_URL,t)||"");if(sh(t,"ResourceURL"))return Kg(El(t));throw new lt(904,!1)}function uh(t,r,i){return function gp(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?pp:nm}(r,i)(t)}function Pd(){const t=We();return t&&t[wt].sanitizer}function Jh(t){return t.ownerDocument}function Sa(t){return t instanceof Function?t():t}var lh=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(lh||{});let dh;function ef(t,r){return dh(t,r)}function _c(t,r,i,a,c){if(null!=a){let d,_=!1;Ri(a)?d=a:Nt(a)&&(_=!0,a=a[Zn]);const v=Yn(a);0===t&&null!==i?null==c?Ap(r,i,v):Ca(r,i,v,c||null,!0):1===t&&null!==i?Ca(r,i,v,c||null,!0):2===t?function lf(t,r,i){const a=Il(t,r);a&&function fh(t,r,i,a){t.removeChild(r,i,a)}(t,a,r,i)}(r,v,_):3===t&&r.destroyNode(v),null!=d&&function Cy(t,r,i,a,c){const d=i[hs];d!==Yn(i)&&_c(r,t,a,d,c);for(let v=pi;v<i.length;v++){const C=i[v];df(C[Ye],C,t,r,a,d)}}(r,t,d,i,c)}}function nf(t,r,i){return t.createElement(r,i)}function Dp(t,r){r[wt].changeDetectionScheduler?.notify(1),df(t,r,r[st],2,null,null)}function Sp(t,r){const i=t[ws],a=i.indexOf(r);i.splice(a,1)}function rf(t,r){if(t.length<=pi)return;const i=pi+r,a=t[i];if(a){const c=a[Ir];null!==c&&c!==t&&Sp(c,a),r>0&&(t[i-1][Qr]=a[Qr]);const d=Nr(t,pi+r);!function Ty(t,r){Dp(t,r),r[Zn]=null,r[Yr]=null}(a[Ye],a);const _=d[as];null!==_&&_.detachView(d[Ye]),a[Ln]=null,a[Qr]=null,a[Ut]&=-129}return a}function hh(t,r){if(!(256&r[Ut])){const i=r[st];i.destroyNode&&df(t,r,i,3,null,null),function kE(t){let r=t[ya];if(!r)return Cp(t[Ye],t);for(;r;){let i=null;if(Nt(r))i=r[ya];else{const a=r[pi];a&&(i=a)}if(!i){for(;r&&!r[Qr]&&r!==t;)Nt(r)&&Cp(r[Ye],r),r=r[Ln];null===r&&(r=t),Nt(r)&&Cp(r[Ye],r),i=r&&r[Qr]}r=i}}(r)}}function Cp(t,r){if(256&r[Ut])return;const i=he(null);try{r[Ut]&=-129,r[Ut]|=256,r[Zs]&&function rt(t){if(Ze(t),pt(t))for(let r=0;r<t.producerNode.length;r++)Ge(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(r[Zs]),function pm(t,r){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let a=0;a<i.length;a+=2){const c=r[i[a]];if(!(c instanceof Ru)){const d=i[a+1];if(Array.isArray(d))for(let _=0;_<d.length;_+=2){const v=c[d[_]],C=d[_+1];Pi(4,v,C);try{C.call(v)}finally{Pi(5,v,C)}}else{Pi(4,c,d);try{d.call(c)}finally{Pi(5,c,d)}}}}}(t,r),function fm(t,r){const i=t.cleanup,a=r[yr];if(null!==i)for(let d=0;d<i.length-1;d+=2)if("string"==typeof i[d]){const _=i[d+3];_>=0?a[_]():a[-_].unsubscribe(),d+=2}else i[d].call(a[i[d+1]]);null!==a&&(r[yr]=null);const c=r[Ei];if(null!==c){r[Ei]=null;for(let d=0;d<c.length;d++)(0,c[d])()}}(t,r),1===r[Ye].type&&r[st].destroy();const a=r[Ir];if(null!==a&&Ri(r[Ln])){a!==r[Ln]&&Sp(a,r);const c=r[as];null!==c&&c.detachView(t)}!function Lt(t){k.delete(t[Ga])}(r)}finally{he(i)}}function sf(t,r,i){return function xd(t,r,i){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return i[Zn];{const{componentOffset:c}=a;if(c>-1){const{encapsulation:d}=t.data[a.directiveStart+c];if(d===ss.None||d===ss.Emulated)return null}return Ls(a,i)}}(t,r.parent,i)}function Ca(t,r,i,a,c){t.insertBefore(r,i,a,c)}function Ap(t,r,i){t.appendChild(r,i)}function kd(t,r,i,a,c){null!==a?Ca(t,r,i,a,c):Ap(t,r,i)}function Il(t,r){return t.parentNode(r)}function Dy(t,r,i){return Rp(t,r,i)}let af,Rp=function bp(t,r,i){return 40&t.type?Ls(t,i):null};function Mp(t,r,i,a){const c=sf(t,a,r),d=r[st],v=Dy(a.parent||r[Yr],a,r);if(null!=c)if(Array.isArray(i))for(let C=0;C<i.length;C++)kd(d,c,i[C],v,!1);else kd(d,c,i,v,!1);void 0!==af&&af(d,a,r,i,c)}function uf(t,r){if(null!==r){const i=r.type;if(3&i)return Ls(r,t);if(4&i)return cf(-1,t[r.index]);if(8&i){const a=r.child;if(null!==a)return uf(t,a);{const c=t[r.index];return Ri(c)?cf(-1,c):Yn(c)}}if(32&i)return ef(r,t)()||Yn(t[r.index]);{const a=Np(t,r);return null!==a?Array.isArray(a)?a[0]:uf(Ea(t[Ke]),a):uf(t,r.next)}}return null}function Np(t,r){return null!==r?t[Ke][Yr].projection[r.projection]:null}function cf(t,r){const i=pi+t+1;if(i<r.length){const a=r[i],c=a[Ye].firstChild;if(null!==c)return uf(a,c)}return r[hs]}function mm(t,r,i,a,c,d,_){for(;null!=i;){const v=a[i.index],C=i.type;if(_&&0===r&&(v&&As(Yn(v),a),i.flags|=2),32!=(32&i.flags))if(8&C)mm(t,r,i.child,a,c,d,!1),_c(r,t,c,v,d);else if(32&C){const x=ef(i,a);let j;for(;j=x();)_c(r,t,c,j,d);_c(r,t,c,v,d)}else 16&C?_m(t,r,a,i,c,d):_c(r,t,c,v,d);i=_?i.projectionNext:i.next}}function df(t,r,i,a,c,d){mm(i,a,t.firstChild,r,c,d,!1)}function _m(t,r,i,a,c,d){const _=i[Ke],C=_[Yr].projection[a.projection];if(Array.isArray(C))for(let x=0;x<C.length;x++)_c(r,t,c,C[x],d);else{let x=C;const j=_[Ln];p(a)&&(x.flags|=128),mm(t,r,x,j,c,d,!0)}}function Ay(t,r,i){""===i?t.removeAttribute(r,"class"):t.setAttribute(r,"class",i)}function by(t,r,i){const{mergedAttrs:a,classes:c,styles:d}=i;null!==a&&ka(t,r,a),null!==c&&Ay(t,r,c),null!==d&&function BE(t,r,i){t.setAttribute(r,"style",i)}(t,r,d)}const Un={};function Op(t=1){xp($n(),We(),ps()+t,!1)}function xp(t,r,i,a){if(!a)if(3==(3&r[Ut])){const d=t.preOrderCheckHooks;null!==d&&kc(r,d,i)}else{const d=t.preOrderHooks;null!==d&&cl(r,d,0,i)}bu(i)}function ph(t,r=Dn.Default){const i=We();return null===i?Kr(t,r):U(Tr(),i,Ie(t),r)}function Ry(t,r,i,a,c,d){const _=he(null);try{let v=null;c&Si.SignalBased&&(v=r[a][fe]),null!==v&&void 0!==v.transformFn&&(d=v.transformFn(d)),c&Si.HasDecoratorInputTransform&&(d=t.inputTransforms[a].call(r,d)),null!==t.setInput?t.setInput(r,v,d,i,a):ze(r,v,a,d)}finally{he(_)}}function hf(t,r,i,a,c,d,_,v,C,x,j){const Q=r.blueprint.slice();return Q[Zn]=c,Q[Ut]=204|a,(null!==x||t&&2048&t[Ut])&&(Q[Ut]|=2048),Su(Q),Q[Ln]=Q[je]=t,Q[_n]=i,Q[wt]=_||t&&t[wt],Q[st]=v||t&&t[st],Q[ri]=C||t&&t[ri]||null,Q[Yr]=d,Q[Ga]=function ce(){return G++}(),Q[Xe]=j,Q[ho]=x,Q[Ke]=2==r.type?t[Ke]:Q,Q}function Yl(t,r,i,a,c){let d=t.data[r];if(null===d)d=function kp(t,r,i,a,c){const d=ta(),_=Oo(),C=t.data[r]=function Am(t,r,i,a,c,d){let _=r?r.injectorIndex:-1,v=0;return Ya()&&(v|=128),{type:i,index:a,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:v,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?d:d&&d.parent,i,r,a,c);return null===t.firstChild&&(t.firstChild=C),null!==d&&(_?null==d.child&&null!==C.parent&&(d.child=C):null===d.next&&(d.next=C,C.prev=d)),C}(t,r,i,a,c),function cc(){return Ot.lFrame.inI18n}()&&(d.flags|=32);else if(64&d.type){d.type=i,d.value=a,d.attrs=c;const _=function Qs(){const t=Ot.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();d.injectorIndex=null===_?-1:_.injectorIndex}return _o(d,!0),d}function ff(t,r,i,a){if(0===i)return-1;const c=r.length;for(let d=0;d<i;d++)r.push(a),t.blueprint.push(a),t.data.push(null);return c}function Lp(t,r,i,a,c){const d=ps(),_=2&a;try{bu(-1),_&&r.length>In&&xp(t,r,In,!1),Pi(_?2:0,c),i(a,c)}finally{bu(d),Pi(_?3:1,c)}}function Em(t,r,i){if(Vn(r)){const a=he(null);try{const d=r.directiveEnd;for(let _=r.directiveStart;_<d;_++){const v=t.data[_];v.contentQueries&&v.contentQueries(1,i[_],_)}}finally{he(a)}}}function pf(t,r,i){Ts()&&(function Mm(t,r,i,a){const c=i.directiveStart,d=i.directiveEnd;ea(i)&&function Fm(t,r,i){const a=Ls(r,t),c=Fp(i);let _=16;i.signals?_=4096:i.onPush&&(_=64);const v=wl(t,hf(t,c,null,_,a,r,null,t[wt].rendererFactory.createRenderer(a,i),null,null,null));t[r.index]=v}(r,i,t.data[c+i.componentOffset]),t.firstCreatePass||Mu(i,r),As(a,r);const _=i.initialInputs;for(let v=c;v<d;v++){const C=t.data[v],x=_e(r,t,v,i);As(x,r),null!==_&&mf(0,v-c,x,C,0,_),dt(C)&&(go(i.index,r)[_n]=_e(r,t,v,i))}}(t,r,i,Ls(i,r)),64==(64&i.flags)&&Nm(t,r,i))}function Im(t,r,i=Ls){const a=r.localNames;if(null!==a){let c=r.index+1;for(let d=0;d<a.length;d+=2){const _=a[d+1],v=-1===_?i(r,t):t[_];t[c++]=v}}}function Fp(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=wm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function wm(t,r,i,a,c,d,_,v,C,x,j){const Q=In+a,le=Q+c,ve=function Tm(t,r){const i=[];for(let a=0;a<r;a++)i.push(a<t?null:Un);return i}(Q,le),ke="function"==typeof x?x():x;return ve[Ye]={type:t,blueprint:ve,template:i,queries:null,viewQuery:v,declTNode:r,data:ve.slice().fill(null,Q),bindingStartIndex:Q,expandoStartIndex:le,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:ke,incompleteFirstPass:!1,ssrId:j}}let Ld=()=>null;function Hc(t,r,i,a,c){for(let d in r){if(!r.hasOwnProperty(d))continue;const _=r[d];if(void 0===_)continue;a??={};let v,C=Si.None;Array.isArray(_)?(v=_[0],C=_[1]):v=_;let x=d;if(null!==c){if(!c.hasOwnProperty(d))continue;x=c[d]}0===t?Vp(a,i,x,v,C):Vp(a,i,x,v)}return a}function Vp(t,r,i,a,c){let d;t.hasOwnProperty(i)?(d=t[i]).push(r,a):d=t[i]=[r,a],void 0!==c&&d.push(c)}function Aa(t,r,i,a,c,d,_,v){const C=Ls(r,i);let j,x=r.inputs;!v&&null!=x&&(j=x[a])?(gh(t,i,j,a,c),ea(r)&&function HE(t,r){const i=go(r,t);16&i[Ut]||(i[Ut]|=64)}(i,r.index)):3&r.type&&(a=function bm(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),c=null!=_?_(c,r.value||"",a):c,d.setProperty(C,a,c))}function gf(t,r,i,a){if(Ts()){const c=null===a?null:{"":-1},d=function Ny(t,r){const i=t.directiveRegistry;let a=null,c=null;if(i)for(let d=0;d<i.length;d++){const _=i[d];if(du(r,_.selectors,!1))if(a||(a=[]),dt(_))if(null!==_.findHostDirectiveDefs){const v=[];c=c||new Map,_.findHostDirectiveDefs(_,v,c),a.unshift(...v,_),xm(t,r,v.length)}else a.unshift(_),xm(t,r,0);else c=c||new Map,_.findHostDirectiveDefs?.(_,a,c),a.push(_)}return null===a?null:[a,c]}(t,i);let _,v;null===d?_=v=null:[_,v]=d,null!==_&&My(t,r,i,_,c,v),c&&function GE(t,r,i){if(r){const a=t.localNames=[];for(let c=0;c<r.length;c+=2){const d=i[r[c+1]];if(null==d)throw new lt(-301,!1);a.push(r[c],d)}}}(i,a,c)}i.mergedAttrs=Co(i.mergedAttrs,i.attrs)}function My(t,r,i,a,c,d){for(let x=0;x<a.length;x++)f(Mu(i,r),t,a[x].type);!function WE(t,r,i){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+i,t.providerIndexes=r}(i,t.data.length,a.length);for(let x=0;x<a.length;x++){const j=a[x];j.providersResolver&&j.providersResolver(j)}let _=!1,v=!1,C=ff(t,r,a.length,null);for(let x=0;x<a.length;x++){const j=a[x];i.mergedAttrs=Co(i.mergedAttrs,j.hostAttrs),Lm(t,i,r,C,j),km(C,j,c),null!==j.contentQueries&&(i.flags|=4),(null!==j.hostBindings||null!==j.hostAttrs||0!==j.hostVars)&&(i.flags|=64);const Q=j.type.prototype;!_&&(Q.ngOnChanges||Q.ngOnInit||Q.ngDoCheck)&&((t.preOrderHooks??=[]).push(i.index),_=!0),!v&&(Q.ngOnChanges||Q.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(i.index),v=!0),C++}!function $E(t,r,i){const c=r.directiveEnd,d=t.data,_=r.attrs,v=[];let C=null,x=null;for(let j=r.directiveStart;j<c;j++){const Q=d[j],le=i?i.get(Q):null,ke=le?le.outputs:null;C=Hc(0,Q.inputs,j,C,le?le.inputs:null),x=Hc(1,Q.outputs,j,x,ke);const Je=null===C||null===_||La(r)?null:qE(C,j,_);v.push(Je)}null!==C&&(C.hasOwnProperty("class")&&(r.flags|=8),C.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=v,r.inputs=C,r.outputs=x}(t,i,d)}function Nm(t,r,i){const a=i.directiveStart,c=i.directiveEnd,d=i.index,_=function Nl(){return Ot.lFrame.currentDirectiveIndex}();try{bu(d);for(let v=a;v<c;v++){const C=t.data[v],x=r[v];Ia(v),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Om(C,x)}}finally{bu(-1),Ia(_)}}function Om(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function xm(t,r,i){r.componentOffset=i,(t.components??=[]).push(r.index)}function km(t,r,i){if(i){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)i[r.exportAs[a]]=t;dt(r)&&(i[""]=t)}}function Lm(t,r,i,a,c){t.data[a]=c;const d=c.factory||(c.factory=Hs(c.type)),_=new Ru(d,dt(c),ph);t.blueprint[a]=_,i[a]=_,function Pm(t,r,i,a,c){const d=c.hostBindings;if(d){let _=t.hostBindingOpCodes;null===_&&(_=t.hostBindingOpCodes=[]);const v=~r.index;(function zE(t){let r=t.length;for(;r>0;){const i=t[--r];if("number"==typeof i&&i<0)return i}return 0})(_)!=v&&_.push(v),_.push(i,a,d)}}(t,r,a,ff(t,i,c.hostVars,Un),c)}function Vu(t,r,i,a,c,d){const _=Ls(t,r);!function Vm(t,r,i,a,c,d,_){if(null==d)t.removeAttribute(r,c,i);else{const v=null==_?$t(d):_(d,a||"",c);t.setAttribute(r,c,v,i)}}(r[st],_,d,t.value,i,a,c)}function mf(t,r,i,a,c,d){const _=d[r];if(null!==_)for(let v=0;v<_.length;)Ry(a,i,_[v++],_[v++],_[v++],_[v++])}function qE(t,r,i){let a=null,c=0;for(;c<i.length;){const d=i[c];if(0!==d)if(5!==d){if("number"==typeof d)break;if(t.hasOwnProperty(d)){null===a&&(a=[]);const _=t[d];for(let v=0;v<_.length;v+=3)if(_[v]===r){a.push(d,_[v+1],_[v+2],i[c+1]);break}}c+=2}else c+=2;else c+=4}return a}function Up(t,r,i,a){return[t,!0,0,r,null,a,null,i,null,null]}function Um(t,r){const i=t.contentQueries;if(null!==i){const a=he(null);try{for(let c=0;c<i.length;c+=2){const _=i[c+1];if(-1!==_){const v=t.data[_];Ol(i[c]),v.contentQueries(2,r[_],_)}}}finally{he(a)}}}function wl(t,r){return t[ya]?t[Tt][Qr]=r:t[ya]=r,t[Tt]=r,r}function Bp(t,r,i){Ol(0);const a=he(null);try{r(t,i)}finally{he(a)}}function Oy(t){return t[yr]||(t[yr]=[])}function xy(t){return t.cleanup||(t.cleanup=[])}function jp(t,r){const i=t[ri],a=i?i.get(fr,null):null;a&&a.handleError(r)}function gh(t,r,i,a,c){for(let d=0;d<i.length;){const _=i[d++],v=i[d++],C=i[d++];Ry(t.data[_],r[_],a,v,C,c)}}function jm(t,r){const i=go(r,t),a=i[Ye];!function $m(t,r){for(let i=r.length;i<t.blueprint.length;i++)r.push(t.blueprint[i])}(a,i);const c=i[Zn];null!==c&&null===i[Xe]&&(i[Xe]=tp(c,i[ri])),$p(a,i,i[_n])}function $p(t,r,i){Yi(r);try{const a=t.viewQuery;null!==a&&Bp(1,a,i);const c=t.template;null!==c&&Lp(t,r,c,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),r[as]?.finishViewCreation(t),t.staticContentQueries&&Um(t,r),t.staticViewQueries&&Bp(2,t.viewQuery,i);const d=t.components;null!==d&&function Hm(t,r){for(let i=0;i<r.length;i++)jm(t,r[i])}(r,d)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[Ut]&=-5,kl()}}function Fd(t,r,i,a){const c=he(null);try{const d=r.tView,C=hf(t,d,i,4096&t[Ut]?4096:16,null,r,null,null,a?.injector??null,a?.embeddedViewInjector??null,a?.dehydratedView??null);C[Ir]=t[r.index];const j=t[as];return null!==j&&(C[as]=j.createEmbeddedView(d)),$p(d,C,i),C}finally{he(c)}}function _f(t,r){const i=pi+r;if(i<t.length)return t[i]}function Xl(t,r){return!r||null===r.firstChild||p(t)}function mh(t,r,i,a=!0){const c=r[Ye];if(function hm(t,r,i,a){const c=pi+a,d=i.length;a>0&&(i[c-1][Qr]=r),a<d-pi?(r[Qr]=i[c],lu(i,pi+a,r)):(i.push(r),r[Qr]=null),r[Ln]=i;const _=r[Ir];null!==_&&i!==_&&function LE(t,r){const i=t[ws];r[Ke]!==r[Ln][Ln][Ke]&&(t[Ut]|=kr.HasTransplantedViews),null===i?t[ws]=[r]:i.push(r)}(_,r);const v=r[as];null!==v&&v.insertView(t),Qa(r),r[Ut]|=128}(c,r,t,i),a){const _=cf(i,t),v=r[st],C=Il(v,t[hs]);null!==C&&function xE(t,r,i,a,c,d){a[Zn]=c,a[Yr]=r,df(t,a,i,1,c,d)}(c,t[Yr],v,r,C,_)}const d=r[Xe];null!==d&&null!==d.firstChild&&(d.firstChild=null)}function Jl(t,r){const i=rf(t,r);return void 0!==i&&hh(i[Ye],i),i}function _h(t,r,i,a,c=!1){for(;null!==i;){const d=r[i.index];null!==d&&a.push(Yn(d)),Ri(d)&&Hp(d,a);const _=i.type;if(8&_)_h(t,r,i.child,a);else if(32&_){const v=ef(i,r);let C;for(;C=v();)a.push(C)}else if(16&_){const v=Np(r,i);if(Array.isArray(v))a.push(...v);else{const C=Ea(r[Ke]);_h(C[Ye],C,v,a,!0)}}i=c?i.projectionNext:i.next}return a}function Hp(t,r){for(let i=pi;i<t.length;i++){const a=t[i],c=a[Ye].firstChild;null!==c&&_h(a[Ye],a,c,r)}t[hs]!==t[Zn]&&r.push(t[hs])}let zm=[];const ZE={...re,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Mi(t.lView)},consumerOnSignalRead(){this.lView[Zs]=this}},Ly=100;function yf(t,r=!0,i=0){const a=t[wt],c=a.rendererFactory;c.begin?.();try{!function QE(t,r){zp(t,r);let i=0;for(;Rc(t);){if(i===Ly)throw new lt(103,!1);i++,zp(t,1)}}(t,i)}catch(_){throw r&&jp(t,_),_}finally{c.end?.(),a.inlineEffectRunner?.flush()}}function XE(t,r,i,a){const c=r[Ut];if(256==(256&c))return;r[wt].inlineEffectRunner?.flush(),Yi(r);let _=null,v=null;(function JE(t){return 2!==t.type})(t)&&(v=function yh(t){return t[Zs]??function Gm(t){const r=zm.pop()??Object.create(ZE);return r.lView=t,r}(t)}(r),_=ct(v));try{Su(r),function Nc(t){return Ot.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&Lp(t,r,i,2,a);const C=3==(3&c);if(C){const Q=t.preOrderCheckHooks;null!==Q&&kc(r,Q,null)}else{const Q=t.preOrderHooks;null!==Q&&cl(r,Q,0,null),Lc(r,0)}if(function eI(t){for(let r=j_(t);null!==r;r=th(r)){if(!(r[Ut]&kr.HasTransplantedViews))continue;const i=r[ws];for(let a=0;a<i.length;a++){bc(i[a])}}}(r),Fy(r,0),null!==t.contentQueries&&Um(t,r),C){const Q=t.contentCheckHooks;null!==Q&&kc(r,Q)}else{const Q=t.contentHooks;null!==Q&&cl(r,Q,1),Lc(r,1)}!function vm(t,r){const i=t.hostBindingOpCodes;if(null!==i)try{for(let a=0;a<i.length;a++){const c=i[a];if(c<0)bu(~c);else{const d=c,_=i[++a],v=i[++a];sl(_,d),v(2,r[d])}}}finally{bu(-1)}}(t,r);const x=t.components;null!==x&&Wm(r,x,0);const j=t.viewQuery;if(null!==j&&Bp(2,j,a),C){const Q=t.viewCheckHooks;null!==Q&&kc(r,Q)}else{const Q=t.viewHooks;null!==Q&&cl(r,Q,2),Lc(r,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[Is]){for(const Q of r[Is])Q();r[Is]=null}r[Ut]&=-73}catch(C){throw Mi(r),C}finally{null!==v&&(Gt(v,_),function KE(t){t.lView[Zs]!==t&&(t.lView=null,zm.push(t))}(v)),kl()}}function Fy(t,r){for(let i=j_(t);null!==i;i=th(i))for(let a=pi;a<i.length;a++)Vy(i[a],r)}function tI(t,r,i){Vy(go(r,t),i)}function Vy(t,r){nl(t)&&zp(t,r)}function zp(t,r){const a=t[Ye],c=t[Ut],d=t[Zs];let _=!!(0===r&&16&c);if(_||=!!(64&c&&0===r),_||=!!(1024&c),_||=!(!d?.dirty||!Wt(d)),d&&(d.dirty=!1),t[Ut]&=-9217,_)XE(a,t,a.template,t[_n]);else if(8192&c){Fy(t,1);const v=a.components;null!==v&&Wm(t,v,1)}}function Wm(t,r,i){for(let a=0;a<r.length;a++)tI(t,r[a],i)}function Vd(t){for(t[wt].changeDetectionScheduler?.notify();t;){t[Ut]|=64;const r=Ea(t);if(Wa(t)&&!r)return t;t=r}return null}class vh{get rootNodes(){const r=this._lView,i=r[Ye];return _h(i,r,i.firstChild,[])}constructor(r,i,a=!0){this._lView=r,this._cdRefInjectingView=i,this.notifyErrorHandler=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[_n]}set context(r){this._lView[_n]=r}get destroyed(){return 256==(256&this._lView[Ut])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Ln];if(Ri(r)){const i=r[8],a=i?i.indexOf(this):-1;a>-1&&(rf(r,a),Nr(i,a))}this._attachedToViewContainer=!1}hh(this._lView[Ye],this._lView)}onDestroy(r){rl(this._lView,r)}markForCheck(){Vd(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ut]&=-129}reattach(){Qa(this._lView),this._lView[Ut]|=128}detectChanges(){this._lView[Ut]|=1024,yf(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new lt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Dp(this._lView[Ye],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new lt(902,!1);this._appRef=r,Qa(this._lView)}}let Eh=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=pr}return t})();const Uy=Eh,Gp=class extends Uy{constructor(r,i,a){super(),this._declarationLView=r,this._declarationTContainer=i,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,i){return this.createEmbeddedViewImpl(r,i)}createEmbeddedViewImpl(r,i,a){const c=Fd(this._declarationLView,this._declarationTContainer,r,{embeddedViewInjector:i,dehydratedView:a});return new vh(c)}};function pr(){return vf(Tr(),We())}function vf(t,r){return 4&t.type?new Gp(r,t,Mn(t,r)):null}let ed=()=>null;function Bd(t,r){return ed(t,r)}class wh{}class fI{}class qy{}class Zy{resolveComponentFactory(r){throw function pI(t){const r=Error(`No component factory found for ${lr(t)}.`);return r.ngComponent=t,r}(r)}}let Wc=(()=>{class t{static#e=this.NULL=new Zy}return t})();class Jm{}let Qy=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function e_(){const t=We(),i=go(Tr().index,t);return(Nt(i)?i:t)[st]}()}return t})(),Cf=(()=>{class t{static#e=this.\u0275prov=qe({token:t,providedIn:"root",factory:()=>null})}return t})();const t_={};function Jp(t,r){if(null!==function Ne(){return K}())throw new lt(-602,!1)}const Af=new Set;function Bu(t){Af.has(t)||(Af.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Th(...t){}class gs{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ta(!1),this.onMicrotaskEmpty=new Ta(!1),this.onStable=new Ta(!1),this.onError=new Ta(!1),typeof Zone>"u")throw new lt(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!a&&i,c.shouldCoalesceRunChangeDetection=a,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function gI(){const t="function"==typeof zt.requestAnimationFrame;let r=zt[t?"requestAnimationFrame":"setTimeout"],i=zt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&i){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const c=i[Zone.__symbol__("OriginalDelegate")];c&&(i=c)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function bf(t){const r=()=>{!function td(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(zt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,i_(t),t.isCheckStableRunning=!0,jd(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),i_(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,a,c,d,_,v)=>{if(function s_(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(v))return i.invokeTask(c,d,_,v);try{return $d(t),i.invokeTask(c,d,_,v)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||t.shouldCoalesceRunChangeDetection)&&r(),mI(t)}},onInvoke:(i,a,c,d,_,v,C)=>{try{return $d(t),i.invoke(c,d,_,v,C)}finally{t.shouldCoalesceRunChangeDetection&&r(),mI(t)}},onHasTask:(i,a,c,d)=>{i.hasTask(c,d),a===c&&("microTask"==d.change?(t._hasPendingMicrotasks=d.microTask,i_(t),jd(t)):"macroTask"==d.change&&(t.hasPendingMacrotasks=d.macroTask))},onHandleError:(i,a,c,d)=>(i.handleError(c,d),t.runOutsideAngular(()=>t.onError.emit(d)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gs.isInAngularZone())throw new lt(909,!1)}static assertNotInAngularZone(){if(gs.isInAngularZone())throw new lt(909,!1)}run(r,i,a){return this._inner.run(r,i,a)}runTask(r,i,a,c){const d=this._inner,_=d.scheduleEventTask("NgZoneEvent: "+c,r,r_,Th,Th);try{return d.runTask(_,i,a)}finally{d.cancelTask(_)}}runGuarded(r,i,a){return this._inner.runGuarded(r,i,a)}runOutsideAngular(r){return this._outer.run(r)}}const r_={};function jd(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function i_(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function $d(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function mI(t){t._nesting--,jd(t)}let Pf=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const a of i)a()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=qe({token:t,providedIn:"root",factory:()=>new t})}return t})();function Tl(t){return!!Ci(t)}function l_(t,r,i){let a=i?t.styles:null,c=i?t.classes:null,d=0;if(null!==r)for(let _=0;_<r.length;_++){const v=r[_];"number"==typeof v?d=v:1==d?c=ms(c,v):2==d&&(a=ms(a,v+": "+r[++_]+";"))}i?t.styles=a:t.stylesWithoutHost=a,i?t.classes=c:t.classesWithoutHost=c}class EI extends Wc{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const i=En(r);return new ju(i,this.ngModule)}}function nd(t){const r=[];for(const i in t){if(!t.hasOwnProperty(i))continue;const a=t[i];void 0!==a&&r.push({propName:Array.isArray(a)?a[0]:a,templateName:i})}return r}class rd{constructor(r,i){this.injector=r,this.parentInjector=i}get(r,i,a){a=ca(a);const c=this.injector.get(r,t_,a);return c!==t_||i===t_?c:this.parentInjector.get(r,i,a)}}class ju extends qy{get inputs(){const r=this.componentDef,i=r.inputTransforms,a=nd(r.inputs);if(null!==i)for(const c of a)i.hasOwnProperty(c.propName)&&(c.transform=i[c.propName]);return a}get outputs(){return nd(this.componentDef.outputs)}constructor(r,i){super(),this.componentDef=r,this.ngModule=i,this.componentType=r.type,this.selector=function Ao(t){return t.map(Va).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!i}create(r,i,a,c){const d=he(null);try{let _=(c=c||this.ngModule)instanceof Sn?c:c?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const v=_?new rd(r,_):r,C=v.get(Jm,null);if(null===C)throw new lt(407,!1);const x=v.get(Cf,null),le={rendererFactory:C,sanitizer:x,inlineEffectRunner:null,afterRenderEventManager:v.get(Pf,null),changeDetectionScheduler:v.get(wh,null)},ve=C.createRenderer(null,this.componentDef),ke=this.componentDef.selectors[0][0]||"div",Je=a?function Dm(t,r,i,a){const d=a.get(Kl,!1)||i===ss.ShadowDom,_=t.selectRootElement(r,d);return function Sm(t){Ld(t)}(_),_}(ve,a,this.componentDef.encapsulation,v):nf(ve,ke,function Dl(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(ke));let ft=512;this.componentDef.signals?ft|=4096:this.componentDef.onPush||(ft|=16);let At=null;null!==Je&&(At=tp(Je,v,!0));const ut=wm(0,null,null,1,0,null,null,null,null,null,null),Nn=hf(null,ut,null,ft,null,null,le,ve,v,null,At);let zr,Li;Yi(Nn);try{const To=this.componentDef;let Hu,Og=null;To.findHostDirectiveDefs?(Hu=[],Og=new Map,To.findHostDirectiveDefs(To,Hu,Og),Hu.push(To)):Hu=[To];const lC=function tv(t,r){const i=t[Ye],a=In;return t[a]=r,Yl(i,a,2,"#host",null)}(Nn,Je),VM=function wI(t,r,i,a,c,d,_){const v=c[Ye];!function id(t,r,i,a){for(const c of t)r.mergedAttrs=Co(r.mergedAttrs,c.hostAttrs);null!==r.mergedAttrs&&(l_(r,r.mergedAttrs,!0),null!==i&&by(a,i,r))}(a,t,r,_);let C=null;null!==r&&(C=tp(r,c[ri]));const x=d.rendererFactory.createRenderer(r,i);let j=16;i.signals?j=4096:i.onPush&&(j=64);const Q=hf(c,Fp(i),null,j,c[t.index],t,d,x,null,null,C);return v.firstCreatePass&&xm(v,t,a.length-1),wl(c,Q),c[t.index]=Q}(lC,Je,To,Hu,Nn,le,ve);Li=Du(ut,In),Je&&function DI(t,r,i,a){if(a)ka(t,i,["ng-version","17.3.11"]);else{const{attrs:c,classes:d}=function qu(t){const r=[],i=[];let a=1,c=2;for(;a<t.length;){let d=t[a];if("string"==typeof d)2===c?""!==d&&r.push(d,t[++a]):8===c&&i.push(d);else{if(!ji(c))break;c=d}a++}return{attrs:r,classes:i}}(r.selectors[0]);c&&ka(t,i,c),d&&d.length>0&&Ay(t,i,d.join(" "))}}(ve,To,Je,a),void 0!==i&&function SI(t,r,i){const a=t.projection=[];for(let c=0;c<r.length;c++){const d=i[c];a.push(null!=d?Array.from(d):null)}}(Li,this.ngContentSelectors,i),zr=function TI(t,r,i,a,c,d){const _=Tr(),v=c[Ye],C=Ls(_,c);My(v,c,_,i,null,a);for(let j=0;j<i.length;j++)As(_e(c,v,_.directiveStart+j,_),c);Nm(v,c,_),C&&As(C,c);const x=_e(c,v,_.directiveStart+_.componentOffset,_);if(t[_n]=c[_n]=x,null!==d)for(const j of d)j(x,r);return Em(v,_,c),x}(VM,To,Hu,Og,Nn,[CI]),$p(ut,Nn,null)}finally{kl()}return new II(this.componentType,zr,Mn(Li,Nn),Nn,Li)}finally{he(d)}}}class II extends fI{constructor(r,i,a,c,d){super(),this.location=a,this._rootLView=c,this._tNode=d,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new vh(c,void 0,!1),this.componentType=r}setInput(r,i){const a=this._tNode.inputs;let c;if(null!==a&&(c=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),i))return;const d=this._rootLView;gh(d[Ye],d,c,r,i),this.previousInputValues.set(r,i),Vd(go(this._tNode.index,d))}}get injector(){return new Mt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function CI(){const t=Tr();fc(We()[Ye],t)}let ng=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=nv}return t})();function nv(){return ov(Tr(),We())}const rv=ng,iv=class extends rv{constructor(r,i,a){super(),this._lContainer=r,this._hostTNode=i,this._hostLView=a}get element(){return Mn(this._hostTNode,this._hostLView)}get injector(){return new Mt(this._hostTNode,this._hostLView)}get parentInjector(){const r=E(this._hostTNode,this._hostLView);if(ia(r)){const i=xo(r,this._hostLView),a=Fc(r);return new Mt(i[Ye].data[a+8],i)}return new Mt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const i=sv(this._lContainer);return null!==i&&i[r]||null}get length(){return this._lContainer.length-pi}createEmbeddedView(r,i,a){let c,d;"number"==typeof a?c=a:null!=a&&(c=a.index,d=a.injector);const _=Bd(this._lContainer,r.ssrId),v=r.createEmbeddedViewImpl(i||{},d,_);return this.insertImpl(v,c,Xl(this._hostTNode,_)),v}createComponent(r,i,a,c,d){const _=r&&!function nt(t){return"function"==typeof t}(r);let v;if(_)v=i;else{const ke=i||{};v=ke.index,a=ke.injector,c=ke.projectableNodes,d=ke.environmentInjector||ke.ngModuleRef}const C=_?r:new ju(En(r)),x=a||this.parentInjector;if(!d&&null==C.ngModule){const Je=(_?x:this.parentInjector).get(Sn,null);Je&&(d=Je)}const j=En(C.componentType??{}),Q=Bd(this._lContainer,j?.id??null),ve=C.create(x,c,Q?.firstChild??null,d);return this.insertImpl(ve.hostView,v,Xl(this._hostTNode,Q)),ve}insert(r,i){return this.insertImpl(r,i,!0)}insertImpl(r,i,a){const c=r._lView;if(function kh(t){return Ri(t[Ln])}(c)){const v=this.indexOf(r);if(-1!==v)this.detach(v);else{const C=c[Ln],x=new iv(C,C[Yr],C[Ln]);x.detach(x.indexOf(r))}}const d=this._adjustIndex(i),_=this._lContainer;return mh(_,c,d,a),r.attachToViewContainerRef(),lu(rg(_),d,r),r}move(r,i){return this.insert(r,i)}indexOf(r){const i=sv(this._lContainer);return null!==i?i.indexOf(r):-1}remove(r){const i=this._adjustIndex(r,-1),a=rf(this._lContainer,i);a&&(Nr(rg(this._lContainer),i),hh(a[Ye],a))}detach(r){const i=this._adjustIndex(r,-1),a=rf(this._lContainer,i);return a&&null!=Nr(rg(this._lContainer),i)?new vh(a):null}_adjustIndex(r,i=0){return r??this.length+i}};function sv(t){return t[8]}function rg(t){return t[8]||(t[8]=[])}function ov(t,r){let i;const a=r[t.index];return Ri(a)?i=a:(i=Up(a,r,null,t),r[t.index]=i,wl(r,i)),ig(i,r,t,a),new iv(i,t,r)}let ig=function cv(t,r,i,a){if(t[hs])return;let c;c=8&i.type?Yn(a):function Ch(t,r){const i=t[st],a=i.createComment(""),c=Ls(r,t);return Ca(i,Il(i,c),a,function VE(t,r){return t.nextSibling(r)}(i,c),!1),a}(r,i),t[hs]=c},av=()=>!1;class lv{constructor(r){this.queryList=r,this.matches=null}clone(){return new lv(this.queryList)}setDirty(){this.queryList.setDirty()}}class dv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const i=r.queries;if(null!==i){const a=null!==r.contentQueries?r.contentQueries[0]:i.length,c=[];for(let d=0;d<a;d++){const _=i.getByIndex(d);c.push(this.queries[_.indexInDeclarationView].clone())}return new dv(c)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}finishViewCreation(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let i=0;i<this.queries.length;i++)null!==_v(r,i).matches&&this.queries[i].setDirty()}}class PI{constructor(r,i,a=null){this.flags=i,this.read=a,this.predicate="string"==typeof r?function xI(t){return t.split(",").map(r=>r.trim())}(r):r}}class hv{constructor(r=[]){this.queries=r}elementStart(r,i){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,i)}elementEnd(r){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(r)}embeddedTView(r){let i=null;for(let a=0;a<this.length;a++){const c=null!==i?i.length:0,d=this.getByIndex(a).embeddedTView(r,c);d&&(d.indexInDeclarationView=a,null!==i?i.push(d):i=[d])}return null!==i?new hv(i):null}template(r,i){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,i)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class d_{constructor(r,i=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(r,i){this.isApplyingToNode(i)&&this.matchTNode(r,i)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,i){this.elementStart(r,i)}embeddedTView(r,i){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,i),new d_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==i;)a=a.parent;return i===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,i){const a=this.metadata.predicate;if(Array.isArray(a))for(let c=0;c<a.length;c++){const d=a[c];this.matchTNodeWithReadOption(r,i,MI(i,d)),this.matchTNodeWithReadOption(r,i,ae(i,r,d,!1,!1))}else a===Eh?4&i.type&&this.matchTNodeWithReadOption(r,i,-1):this.matchTNodeWithReadOption(r,i,ae(i,r,a,!1,!1))}matchTNodeWithReadOption(r,i,a){if(null!==a){const c=this.metadata.read;if(null!==c)if(c===ku||c===ng||c===Eh&&4&i.type)this.addMatch(i.index,-2);else{const d=ae(i,r,c,!1,!1);null!==d&&this.addMatch(i.index,d)}else this.addMatch(i.index,a)}}addMatch(r,i){null===this.matches?this.matches=[r,i]:this.matches.push(r,i)}}function MI(t,r){const i=t.localNames;if(null!==i)for(let a=0;a<i.length;a+=2)if(i[a]===r)return i[a+1];return null}function mT(t,r,i,a){return-1===i?function NI(t,r){return 11&t.type?Mn(t,r):4&t.type?vf(t,r):null}(r,t):-2===i?function OI(t,r,i){return i===ku?Mn(r,t):i===Eh?vf(r,t):i===ng?ov(r,t):void 0}(t,r,a):_e(t,t[Ye],i,r)}function h_(t,r,i,a){const c=r[as].queries[a];if(null===c.matches){const d=t.data,_=i.matches,v=[];for(let C=0;null!==_&&C<_.length;C+=2){const x=_[C];v.push(x<0?null:mT(r,d[x],_[C+1],i.metadata.read))}c.matches=v}return c.matches}function Kc(t,r,i,a){const c=t.queries.getByIndex(i),d=c.matches;if(null!==d){const _=h_(t,r,c,i);for(let v=0;v<d.length;v+=2){const C=d[v];if(C>0)a.push(_[v/2]);else{const x=d[v+1],j=r[-C];for(let Q=pi;Q<j.length;Q++){const le=j[Q];le[Ir]===le[Ln]&&Kc(le[Ye],le,x,a)}if(null!==j[ws]){const Q=j[ws];for(let le=0;le<Q.length;le++){const ve=Q[le];Kc(ve[Ye],ve,x,a)}}}}}return a}function fv(t,r,i){const a=new Xd(4==(4&i));return function jE(t,r,i,a){const c=Oy(r);c.push(i),t.firstCreatePass&&xy(t).push(a,c.length-1)}(t,r,a,a.destroy),(r[as]??=new dv).queries.push(new lv(a))-1}function mv(t,r,i){null===t.queries&&(t.queries=new hv),t.queries.track(new d_(r,i))}function _v(t,r){return t.queries.getByIndex(r)}function LI(t,r){const i=t[Ye],a=_v(i,r);return a.crossesNgTemplate?Kc(i,t,r,[]):h_(i,t,a,r)}function FI(t,r){Bu("NgSignals");const i=function Me(t){const r=Object.create(_t);r.value=t;const i=()=>(Re(r),r.value);return i[fe]=r,i}(t),a=i[fe];return r?.equal&&(a.equal=r.equal),i.set=c=>Fe(a,c),i.update=c=>function Te(t,r){Bt()||Ht(),Fe(t,r(t.value))}(a,c),i.asReadonly=VI.bind(i),i}function VI(){const t=this[fe];if(void 0===t.readonlyFn){const r=()=>this();r[fe]=t,t.readonlyFn=r}return t.readonlyFn}function UI(t){return function p_(t){return"function"==typeof t&&void 0!==t[fe]}(t)&&"function"==typeof t.set}function Ff(t){let r=function Sv(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const a=[t];for(;r;){let c;if(dt(t))c=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new lt(903,!1);c=r.\u0275dir}if(c){if(i){a.push(c);const _=t;_.inputs=Vf(t.inputs),_.inputTransforms=Vf(t.inputTransforms),_.declaredInputs=Vf(t.declaredInputs),_.outputs=Vf(t.outputs);const v=c.hostBindings;v&&bv(t,v);const C=c.viewQuery,x=c.contentQueries;if(C&&XI(t,C),x&&Av(t,x),YI(t,c),xn(t.outputs,c.outputs),dt(c)&&c.data.animation){const j=t.data;j.animation=(j.animation||[]).concat(c.data.animation)}}const d=c.features;if(d)for(let _=0;_<d.length;_++){const v=d[_];v&&v.ngInherit&&v(t),v===Ff&&(i=!1)}}r=Object.getPrototypeOf(r)}!function Cv(t){let r=0,i=null;for(let a=t.length-1;a>=0;a--){const c=t[a];c.hostVars=r+=c.hostVars,c.hostAttrs=Co(c.hostAttrs,i=Co(i,c.hostAttrs))}}(a)}function YI(t,r){for(const i in r.inputs){if(!r.inputs.hasOwnProperty(i)||t.inputs.hasOwnProperty(i))continue;const a=r.inputs[i];if(void 0!==a&&(t.inputs[i]=a,t.declaredInputs[i]=r.declaredInputs[i],null!==r.inputTransforms)){const c=Array.isArray(a)?a[0]:a;if(!r.inputTransforms.hasOwnProperty(c))continue;t.inputTransforms??={},t.inputTransforms[c]=r.inputTransforms[c]}}}function Vf(t){return t===Os?{}:t===Kn?[]:t}function XI(t,r){const i=t.viewQuery;t.viewQuery=i?(a,c)=>{r(a,c),i(a,c)}:r}function Av(t,r){const i=t.contentQueries;t.contentQueries=i?(a,c,d)=>{r(a,c,d),i(a,c,d)}:r}function bv(t,r){const i=t.hostBindings;t.hostBindings=i?(a,c)=>{r(a,c),i(a,c)}:r}function u(t){const r=t.inputConfig,i={};for(const a in r)if(r.hasOwnProperty(a)){const c=r[a];Array.isArray(c)&&c[3]&&(i[a]=c[3])}t.inputTransforms=i}class l{}class g{}function b(t,r){return new L(t,r??null,[])}class L extends l{constructor(r,i,a){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new EI(this);const c=Ci(r);this._bootstrapComponents=Sa(c.bootstrap),this._r3Injector=Cs(r,i,[{provide:l,useValue:this},{provide:Wc,useValue:this.componentFactoryResolver},...a],lr(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class z extends g{constructor(r){super(),this.moduleType=r}create(r){return new L(this.moduleType,r,[])}}class me extends l{constructor(r){super(),this.componentFactoryResolver=new EI(this),this.instance=null;const i=new vu([...r.providers,{provide:l,useValue:this},{provide:Wc,useValue:this.componentFactoryResolver}],r.parent||Ha(),r.debugName,new Set(["environment"]));this.injector=i,r.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function Ue(t,r,i=null){return new me({providers:t,parent:r,debugName:i,runEnvironmentInitializers:!0}).injector}let Bn=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new or.X(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=qe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Sr(t){return!!I_(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function I_(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Bs(t,r,i){return!Object.is(t[r],i)&&(t[r]=i,!0)}function lg(t,r,i,a,c,d,_,v){const C=We(),x=$n(),j=t+In,Q=x.firstCreatePass?function hC(t,r,i,a,c,d,_,v,C){const x=r.consts,j=Yl(r,t,4,_||null,mo(x,v));gf(r,i,j,mo(x,C)),fc(r,j);const Q=j.tView=wm(2,j,a,c,d,r.directiveRegistry,r.pipeRegistry,null,r.schemas,x,null);return null!==r.queries&&(r.queries.template(r,j),Q.queries=r.queries.embeddedTView(j)),j}(j,x,C,r,i,a,c,d,_):x.data[j];_o(Q,!1);const le=wT(x,C,Q,t);Ja()&&Mp(x,C,le,Q),As(le,C);const ve=Up(le,C,le,Q);return C[j]=ve,wl(C,ve),function uv(t,r,i){return av(t,r,i)}(ve,Q,C),rr(Q)&&pf(x,C,Q),null!=_&&Im(C,Q,v),lg}let wT=function TT(t,r,i,a){return wa(!0),r[st].createComment("")};function lw(t,r,i,a){const c=We();return Bs(c,fs(),r)&&($n(),Vu(Xt(),c,t,r,i,a)),lw}function Uv(t,r){return t<<17|r<<2}function Ph(t){return t>>17&32767}function dw(t){return 2|t}function jf(t){return(131068&t)>>2}function hw(t,r){return-131069&t|r<<2}function fw(t){return 1|t}function e0(t,r,i,a){const c=t[i+1],d=null===r;let _=a?Ph(c):jf(c),v=!1;for(;0!==_&&(!1===v||d);){const x=t[_+1];XC(t[_],r)&&(v=!0,t[_+1]=a?fw(x):dw(x)),_=a?Ph(x):jf(x)}v&&(t[i+1]=a?dw(c):fw(c))}function XC(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&ns(t,r)>=0}function pw(t,r,i){const a=We();return Bs(a,fs(),r)&&Aa($n(),Xt(),a,t,r,a[st],i,!1),pw}function gw(t,r,i,a,c){const _=c?"class":"style";gh(t,i,r.inputs[_],_,a)}function mw(t,r){return function Sl(t,r,i,a){const c=We(),d=$n(),_=function Ii(t){const r=Ot.lFrame,i=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,i}(2);d.firstUpdatePass&&function l0(t,r,i,a){const c=t.data;if(null===c[i+1]){const d=c[ps()],_=function c0(t,r){return r>=t.expandoStartIndex}(t,i);(function p0(t,r){return 0!=(t.flags&(r?8:16))})(d,a)&&null===r&&!_&&(r=!1),r=function aA(t,r,i,a){const c=function Oc(t){const r=Ot.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let d=a?r.residualClasses:r.residualStyles;if(null===c)0===(a?r.classBindings:r.styleBindings)&&(i=A_(i=_w(null,t,r,i,a),r.attrs,a),d=null);else{const _=r.directiveStylingLast;if(-1===_||t[_]!==c)if(i=_w(c,t,r,i,a),null===d){let C=function uA(t,r,i){const a=i?r.classBindings:r.styleBindings;if(0!==jf(a))return t[Ph(a)]}(t,r,a);void 0!==C&&Array.isArray(C)&&(C=_w(null,t,r,C[1],a),C=A_(C,r.attrs,a),function cA(t,r,i,a){t[Ph(i?r.classBindings:r.styleBindings)]=a}(t,r,a,C))}else d=function lA(t,r,i){let a;const c=r.directiveEnd;for(let d=1+r.directiveStylingLast;d<c;d++)a=A_(a,t[d].hostAttrs,i);return A_(a,r.attrs,i)}(t,r,a)}return void 0!==d&&(a?r.residualClasses=d:r.residualStyles=d),i}(c,d,r,a),function QC(t,r,i,a,c,d){let _=d?r.classBindings:r.styleBindings,v=Ph(_),C=jf(_);t[a]=i;let j,x=!1;if(Array.isArray(i)?(j=i[1],(null===j||ns(i,j)>0)&&(x=!0)):j=i,c)if(0!==C){const le=Ph(t[v+1]);t[a+1]=Uv(le,v),0!==le&&(t[le+1]=hw(t[le+1],a)),t[v+1]=function KC(t,r){return 131071&t|r<<17}(t[v+1],a)}else t[a+1]=Uv(v,0),0!==v&&(t[v+1]=hw(t[v+1],a)),v=a;else t[a+1]=Uv(C,0),0===v?v=a:t[C+1]=hw(t[C+1],a),C=a;x&&(t[a+1]=dw(t[a+1])),e0(t,j,a,!0),e0(t,j,a,!1),function YC(t,r,i,a,c){const d=c?t.residualClasses:t.residualStyles;null!=d&&"string"==typeof r&&ns(d,r)>=0&&(i[a+1]=fw(i[a+1]))}(r,j,t,a,d),_=Uv(v,C),d?r.classBindings=_:r.styleBindings=_}(c,d,r,i,_,a)}}(d,t,_,a),r!==Un&&Bs(c,_,r)&&function h0(t,r,i,a,c,d,_,v){if(!(3&r.type))return;const C=t.data,x=C[v+1],j=function ZC(t){return 1==(1&t)}(x)?f0(C,r,i,c,jf(x),_):void 0;Bv(j)||(Bv(d)||function qC(t){return 2==(2&t)}(x)&&(d=f0(C,null,i,c,v,_)),function UE(t,r,i,a,c){if(r)c?t.addClass(i,a):t.removeClass(i,a);else{let d=-1===a.indexOf("-")?void 0:lh.DashCase;null==c?t.removeStyle(i,a,d):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),d|=lh.Important),t.setStyle(i,a,c,d))}}(a,_,Ac(ps(),i),c,d))}(d,d.data[ps()],c,c[st],t,c[_+1]=function pA(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=lr(El(t)))),t}(r,i),a,_)}(t,r,null,!0),mw}function _w(t,r,i,a,c){let d=null;const _=i.directiveEnd;let v=i.directiveStylingLast;for(-1===v?v=i.directiveStart:v++;v<_&&(d=r[v],a=A_(a,d.hostAttrs,c),d!==t);)v++;return null!==t&&(i.directiveStylingLast=v),a}function A_(t,r,i){const a=i?1:2;let c=-1;if(null!==r)for(let d=0;d<r.length;d++){const _=r[d];"number"==typeof _?c=_:c===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ti(t,_,!!i||r[++d]))}return void 0===t?null:t}function f0(t,r,i,a,c,d){const _=null===r;let v;for(;c>0;){const C=t[c],x=Array.isArray(C),j=x?C[1]:C,Q=null===j;let le=i[c+1];le===Un&&(le=Q?Kn:void 0);let ve=Q?Di(le,a):j===a?le:void 0;if(x&&!Bv(ve)&&(ve=Di(C,a)),Bv(ve)&&(v=ve,_))return v;const ke=t[c+1];c=_?Ph(ke):jf(ke)}if(null!==r){let C=d?r.residualClasses:r.residualStyles;null!=C&&(v=Di(C,a))}return v}function Bv(t){return void 0!==t}class SA{destroy(r){}updateValue(r,i){}swap(r,i){const a=Math.min(r,i),c=Math.max(r,i),d=this.detach(c);if(c-a>1){const _=this.detach(a);this.attach(a,d),this.attach(c,_)}else this.attach(a,d)}move(r,i){this.attach(i,this.detach(r))}}function yw(t,r,i,a,c){return t===i&&Object.is(r,a)?1:Object.is(c(t,r),c(i,a))?-1:0}function vw(t,r,i,a){return!(void 0===r||!r.has(a)||(t.attach(i,r.get(a)),r.delete(a),0))}function g0(t,r,i,a,c){if(vw(t,r,a,i(a,c)))t.updateValue(a,c);else{const d=t.create(a,c);t.attach(a,d)}}function m0(t,r,i,a){const c=new Set;for(let d=r;d<=i;d++)c.add(a(d,t.at(d)));return c}class _0{constructor(){this.kvMap=new Map,this._vMap=void 0}has(r){return this.kvMap.has(r)}delete(r){if(!this.has(r))return!1;const i=this.kvMap.get(r);return void 0!==this._vMap&&this._vMap.has(i)?(this.kvMap.set(r,this._vMap.get(i)),this._vMap.delete(i)):this.kvMap.delete(r),!0}get(r){return this.kvMap.get(r)}set(r,i){if(this.kvMap.has(r)){let a=this.kvMap.get(r);void 0===this._vMap&&(this._vMap=new Map);const c=this._vMap;for(;c.has(a);)a=c.get(a);c.set(a,i)}else this.kvMap.set(r,i)}forEach(r){for(let[i,a]of this.kvMap)if(r(a,i),void 0!==this._vMap){const c=this._vMap;for(;c.has(a);)a=c.get(a),r(a,i)}}}function y0(t,r,i){Bu("NgControlFlow");const a=We(),c=fs(),d=Ew(a,In+t);if(Bs(a,c,r)){const v=he(null);try{if(Jl(d,0),-1!==r){const C=Iw(a[Ye],In+r),x=Bd(d,C.tView.ssrId);mh(d,Fd(a,C,i,{dehydratedView:x}),0,Xl(C,x))}}finally{he(v)}}else{const v=_f(d,0);void 0!==v&&(v[_n]=i)}}class AA{constructor(r,i,a){this.lContainer=r,this.$implicit=i,this.$index=a}get $count(){return this.lContainer.length-pi}}function v0(t,r){return r}class RA{constructor(r,i,a){this.hasEmptyBlock=r,this.trackByFn=i,this.liveCollection=a}}function E0(t,r,i,a,c,d,_,v,C,x,j,Q,le){Bu("NgControlFlow");const ve=void 0!==C,ke=We(),Je=v?_.bind(ke[Ke][_n]):_,ft=new RA(ve,Je);ke[In+t]=ft,lg(t+1,r,i,a,c,d),ve&&lg(t+2,C,x,j,Q,le)}class PA extends SA{constructor(r,i,a){super(),this.lContainer=r,this.hostLView=i,this.templateTNode=a,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-pi}at(r){return this.getLView(r)[_n].$implicit}attach(r,i){const a=i[Xe];this.needsIndexUpdate||=r!==this.length,mh(this.lContainer,i,r,Xl(this.templateTNode,a))}detach(r){return this.needsIndexUpdate||=r!==this.length-1,function MA(t,r){return rf(t,r)}(this.lContainer,r)}create(r,i){const a=Bd(this.lContainer,this.templateTNode.tView.ssrId);return Fd(this.hostLView,this.templateTNode,new AA(this.lContainer,i,r),{dehydratedView:a})}destroy(r){hh(r[Ye],r)}updateValue(r,i){this.getLView(r)[_n].$implicit=i}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let r=0;r<this.length;r++)this.getLView(r)[_n].$index=r}getLView(r){return function NA(t,r){return _f(t,r)}(this.lContainer,r)}}function I0(t){const r=he(null),i=ps();try{const a=We(),c=a[Ye],d=a[i];if(void 0===d.liveCollection){const v=i+1,C=Ew(a,v),x=Iw(c,v);d.liveCollection=new PA(C,a,x)}else d.liveCollection.reset();const _=d.liveCollection;if(function CA(t,r,i){let a,c,d=0,_=t.length-1;if(Array.isArray(r)){let v=r.length-1;for(;d<=_&&d<=v;){const C=t.at(d),x=r[d],j=yw(d,C,d,x,i);if(0!==j){j<0&&t.updateValue(d,x),d++;continue}const Q=t.at(_),le=r[v],ve=yw(_,Q,v,le,i);if(0!==ve){ve<0&&t.updateValue(_,le),_--,v--;continue}const ke=i(d,C),Je=i(_,Q),ft=i(d,x);if(Object.is(ft,Je)){const At=i(v,le);Object.is(At,ke)?(t.swap(d,_),t.updateValue(_,le),v--,_--):t.move(_,d),t.updateValue(d,x),d++}else if(a??=new _0,c??=m0(t,d,_,i),vw(t,a,d,ft))t.updateValue(d,x),d++,_++;else if(c.has(ft))a.set(ke,t.detach(d)),_--;else{const At=t.create(d,r[d]);t.attach(d,At),d++,_++}}for(;d<=v;)g0(t,a,i,d,r[d]),d++}else if(null!=r){const v=r[Symbol.iterator]();let C=v.next();for(;!C.done&&d<=_;){const x=t.at(d),j=C.value,Q=yw(d,x,d,j,i);if(0!==Q)Q<0&&t.updateValue(d,j),d++,C=v.next();else{a??=new _0,c??=m0(t,d,_,i);const le=i(d,j);if(vw(t,a,d,le))t.updateValue(d,j),d++,_++,C=v.next();else if(c.has(le)){const ve=i(d,x);a.set(ve,t.detach(d)),_--}else t.attach(d,t.create(d,j)),d++,_++,C=v.next()}}for(;!C.done;)g0(t,a,i,t.length,C.value),C=v.next()}for(;d<=_;)t.destroy(t.detach(_--));a?.forEach(v=>{t.destroy(v)})}(_,t,d.trackByFn),_.updateIndexes(),d.hasEmptyBlock){const v=fs(),C=0===_.length;if(Bs(a,v,C)){const x=i+2,j=Ew(a,x);if(C){const Q=Iw(c,x),le=Bd(j,Q.tView.ssrId);mh(j,Fd(a,Q,void 0,{dehydratedView:le}),0,Xl(Q,le))}else Jl(j,0)}}}finally{he(r)}}function Ew(t,r){return t[r]}function Iw(t,r){return Du(t,r)}function jv(t,r,i,a){const c=We(),d=$n(),_=In+t,v=c[st],C=d.firstCreatePass?function OA(t,r,i,a,c,d){const _=r.consts,C=Yl(r,t,2,a,mo(_,c));return gf(r,i,C,mo(_,d)),null!==C.attrs&&l_(C,C.attrs,!1),null!==C.mergedAttrs&&l_(C,C.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,C),C}(_,d,c,r,i,a):d.data[_],x=w0(d,c,C,v,r,t);c[_]=x;const j=rr(C);return _o(C,!0),by(v,x,C),!function T_(t){return 32==(32&t.flags)}(C)&&Ja()&&Mp(d,c,x,C),0===function wr(){return Ot.lFrame.elementDepthCount}()&&As(x,c),function Pc(){Ot.lFrame.elementDepthCount++}(),j&&(pf(d,c,C),Em(d,C,c)),null!==a&&Im(c,C),jv}function $v(){let t=Tr();Oo()?yo():(t=t.parent,_o(t,!1));const r=t;(function Wd(t){return Ot.skipHydrationRootTNode===t})(r)&&function Ni(){Ot.skipHydrationRootTNode=null}(),function Mc(){Ot.lFrame.elementDepthCount--}();const i=$n();return i.firstCreatePass&&(fc(i,t),Vn(t)&&i.queries.elementEnd(t)),null!=r.classesWithoutHost&&function Fl(t){return 0!=(8&t.flags)}(r)&&gw(i,r,We(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function _d(t){return 0!=(16&t.flags)}(r)&&gw(i,r,We(),r.stylesWithoutHost,!1),$v}function ww(t,r,i,a){return jv(t,r,i,a),$v(),ww}let w0=(t,r,i,a,c,d)=>(wa(!0),nf(a,c,function pd(){return Ot.lFrame.currentNamespace}()));function S0(){return We()}const $f=void 0;var BA=["en",[["a","p"],["AM","PM"],$f],[["AM","PM"],$f,$f],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$f,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$f,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$f,"{1} 'at' {0}",$f],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function UA(t){const i=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===a?1:5}];let Ag={};function Sw(t){const r=function jA(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=R0(r);if(i)return i;const a=r.split("-")[0];if(i=R0(a),i)return i;if("en"===a)return BA;throw new lt(701,!1)}function b0(t){return Sw(t)[bg.PluralCase]}function R0(t){return t in Ag||(Ag[t]=zt.ng&&zt.ng.common&&zt.ng.common.locales&&zt.ng.common.locales[t]),Ag[t]}var bg=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(bg||{});const Rg="en-US";let P0=Rg;function bw(t,r,i,a){const c=We(),d=$n(),_=Tr();return Rw(d,c,c[st],_,t,r,a),bw}function Rw(t,r,i,a,c,d,_){const v=rr(a),x=t.firstCreatePass&&xy(t),j=r[_n],Q=Oy(r);let le=!0;if(3&a.type||_){const Je=Ls(a,r),ft=_?_(Je):Je,At=Q.length,ut=_?zr=>_(Yn(zr[a.index])):a.index;let Nn=null;if(!_&&v&&(Nn=function Fb(t,r,i,a){const c=t.cleanup;if(null!=c)for(let d=0;d<c.length-1;d+=2){const _=c[d];if(_===i&&c[d+1]===a){const v=r[yr],C=c[d+2];return v.length>C?v[C]:null}"string"==typeof _&&(d+=2)}return null}(t,r,c,a.index)),null!==Nn)(Nn.__ngLastListenerFn__||Nn).__ngNextListenerFn__=d,Nn.__ngLastListenerFn__=d,le=!1;else{d=iD(a,r,j,d,!1);const zr=i.listen(ft,c,d);Q.push(d,zr),x&&x.push(c,ut,At,At+1)}}else d=iD(a,r,j,d,!1);const ve=a.outputs;let ke;if(le&&null!==ve&&(ke=ve[c])){const Je=ke.length;if(Je)for(let ft=0;ft<Je;ft+=2){const Li=r[ke[ft]][ke[ft+1]].subscribe(d),To=Q.length;Q.push(d,Li),x&&x.push(c,a.index,To,-(To+1))}}}function rD(t,r,i,a){const c=he(null);try{return Pi(6,r,i),!1!==i(a)}catch(d){return jp(t,d),!1}finally{Pi(7,r,i),he(c)}}function iD(t,r,i,a,c){return function d(_){if(_===Function)return a;Vd(t.componentOffset>-1?go(t.index,r):r);let C=rD(r,i,a,_),x=d.__ngNextListenerFn__;for(;x;)C=rD(r,i,x,_)&&C,x=x.__ngNextListenerFn__;return c&&!1===C&&_.preventDefault(),C}}function sD(t=1){return function al(t){return(Ot.lFrame.contextLView=function sc(t,r){for(;t>0;)r=r[je],t--;return r}(t,Ot.lFrame.contextLView))[_n]}(t)}function Vb(t,r){let i=null;const a=function Fa(t){const r=t.attrs;if(null!=r){const i=r.indexOf(5);if(!(1&i))return r[i+1]}return null}(t);for(let c=0;c<r.length;c++){const d=r[c];if("*"!==d){if(null===a?du(t,d,!0):fu(a,d))return c}else i=c}return i}function oD(t){const r=We()[Ke][Yr];if(!r.projection){const a=r.projection=function zs(t,r){const i=[];for(let a=0;a<t;a++)i.push(r);return i}(t?t.length:1,null),c=a.slice();let d=r.child;for(;null!==d;){const _=t?Vb(d,t):0;null!==_&&(c[_]?c[_].projectionNext=d:a[_]=d,c[_]=d),d=d.next}}}function aD(t,r=0,i){const a=We(),c=$n(),d=Yl(c,In+t,16,null,i||null);null===d.projection&&(d.projection=r),yo(),(!a[Xe]||Ya())&&32!=(32&d.flags)&&function Sy(t,r,i){_m(r[st],0,r,i,sf(t,i,r),Dy(i.parent||r[Yr],i,r))}(c,a,d)}function _D(t,r,i,a){!function gv(t,r,i,a){const c=$n();if(c.firstCreatePass){const d=Tr();mv(c,new PI(r,i,a),d.index),function kI(t,r){const i=t.contentQueries||(t.contentQueries=[]);r!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,r)}(c,t),2==(2&i)&&(c.staticContentQueries=!0)}return fv(c,We(),i)}(t,r,i,a)}function yD(t,r,i){!function pv(t,r,i){const a=$n();return a.firstCreatePass&&(mv(a,new PI(t,r,i),-1),2==(2&r)&&(a.staticViewQueries=!0)),fv(a,We(),r)}(t,r,i)}function vD(t){const r=We(),i=$n(),a=hd();Ol(a+1);const c=_v(i,a);if(t.dirty&&function xh(t){return 4==(4&t[Ut])}(r)===(2==(2&c.metadata.flags))){if(null===c.matches)t.reset([]);else{const d=LI(r,a);t.reset(d,Qd),t.notifyOnChanges()}return!0}return!1}function ED(){return function f_(t,r){return t[as].queries[r].queryList}(We(),hd())}function ID(t){return function ic(t,r){return t[r]}(function Cu(){return Ot.lFrame.contextLView}(),In+t)}function MD(t,r=""){const i=We(),a=$n(),c=t+In,d=a.firstCreatePass?Yl(a,c,1,r,null):a.data[c],_=ND(a,i,d,r,t);i[c]=_,Ja()&&Mp(a,i,_,d),_o(d,!1)}let ND=(t,r,i,a,c)=>(wa(!0),function tf(t,r){return t.createText(r)}(r[st],a));function Mw(t){return qv("",t,""),Mw}function qv(t,r,i){const a=We(),c=function yg(t,r,i,a){return Bs(t,fs(),i)?r+$t(i)+a:Un}(a,t,r,i);return c!==Un&&function yc(t,r,i){const a=Ac(r,t);!function wy(t,r,i){t.setValue(r,i)}(t[st],a,i)}(a,ps(),c),qv}function Nw(t,r,i){UI(r)&&(r=r());const a=We();return Bs(a,fs(),r)&&Aa($n(),Xt(),a,t,r,a[st],i,!1),Nw}function jD(t,r){const i=UI(t);return i&&t.set(r),i}function Ow(t,r){const i=We(),a=$n(),c=Tr();return Rw(a,i,i[st],c,t,r),Ow}function xw(t,r,i,a,c){if(t=Ie(t),Array.isArray(t))for(let d=0;d<t.length;d++)xw(t[d],r,i,a,c);else{const d=$n(),_=We(),v=Tr();let C=ni(t)?t:Ie(t.provide);const x=_a(t),j=1048575&v.providerIndexes,Q=v.directiveStart,le=v.providerIndexes>>20;if(ni(t)||!t.multi){const ve=new Ru(x,c,ph),ke=Lw(C,r,c?j:j+le,Q);-1===ke?(f(Mu(v,_),d,C),kw(d,t,r.length),r.push(C),v.directiveStart++,v.directiveEnd++,c&&(v.providerIndexes+=1048576),i.push(ve),_.push(ve)):(i[ke]=ve,_[ke]=ve)}else{const ve=Lw(C,r,j+le,Q),ke=Lw(C,r,j,j+le),ft=ke>=0&&i[ke];if(c&&!ft||!c&&!(ve>=0&&i[ve])){f(Mu(v,_),d,C);const At=function rR(t,r,i,a,c){const d=new Ru(t,i,ph);return d.multi=[],d.index=r,d.componentProviders=0,$D(d,c,a&&!i),d}(c?nR:tR,i.length,c,a,x);!c&&ft&&(i[ke].providerFactory=At),kw(d,t,r.length,0),r.push(C),v.directiveStart++,v.directiveEnd++,c&&(v.providerIndexes+=1048576),i.push(At),_.push(At)}else kw(d,t,ve>-1?ve:ke,$D(i[c?ke:ve],x,!c&&a));!c&&a&&ft&&i[ke].componentProviders++}}}function kw(t,r,i,a){const c=ni(r),d=function _u(t){return!!t.useClass}(r);if(c||d){const C=(d?Ie(r.useClass):r).prototype.ngOnDestroy;if(C){const x=t.destroyHooks||(t.destroyHooks=[]);if(!c&&r.multi){const j=x.indexOf(i);-1===j?x.push(i,[a,C]):x[j+1].push(a,C)}else x.push(i,C)}}}function $D(t,r,i){return i&&t.componentProviders++,t.multi.push(r)-1}function Lw(t,r,i,a){for(let c=i;c<a;c++)if(r[c]===t)return c;return-1}function tR(t,r,i,a){return Fw(this.multi,[])}function nR(t,r,i,a){const c=this.multi;let d;if(this.providerFactory){const _=this.providerFactory.componentProviders,v=_e(i,i[Ye],this.providerFactory.index,a);d=v.slice(0,_),Fw(c,d);for(let C=_;C<v.length;C++)d.push(v[C])}else d=[],Fw(c,d);return d}function Fw(t,r){for(let i=0;i<t.length;i++)r.push((0,t[i])());return r}function HD(t,r=[]){return i=>{i.providersResolver=(a,c)=>function eR(t,r,i){const a=$n();if(a.firstCreatePass){const c=dt(t);xw(i,a.data,a.blueprint,c,!0),xw(r,a.data,a.blueprint,c,!1)}}(a,c?c(t):t,r)}}let iR=(()=>{class t{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const a=Es(0,i.type),c=a.length>0?Ue([a],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,c)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=qe({token:t,providedIn:"environment",factory:()=>new t(Kr(Sn))})}return t})();function zD(t){Bu("NgStandalone"),t.getStandaloneInjector=r=>r.get(iR).getOrCreateStandaloneInjector(t)}class hS{constructor(r){this.full=r;const i=r.split(".");this.major=i[0],this.minor=i[1],this.patch=i.slice(2).join(".")}}const WR=new hS("17.3.11");let fS=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=qe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const yS=new kn(""),vS=new kn("");let Hw,yP=(()=>{class t{constructor(i,a,c){this._ngZone=i,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Hw||(function vP(t){Hw=t}(c),c.addToWindow(a)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gs.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb()}});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(i)||(clearTimeout(a.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,a,c){let d=-1;a&&a>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==d),i()},a)),this._callbacks.push({doneCb:i,timeoutId:d,updateCb:c})}whenStable(i,a,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,a,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,a,c){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(Kr(gs),Kr(ES),Kr(vS))};static#t=this.\u0275prov=qe({token:t,factory:t.\u0275fac})}return t})(),ES=(()=>{class t{constructor(){this._applications=new Map}registerApplication(i,a){this._applications.set(i,a)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,a=!0){return Hw?.findTestabilityInTree(this,i,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=qe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function zw(t){return!!t&&"function"==typeof t.then}function IS(t){return!!t&&"function"==typeof t.subscribe}const wS=new kn("");let Gw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,a)=>{this.resolve=i,this.reject=a}),this.appInits=Kt(wS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const c of this.appInits){const d=c();if(zw(d))i.push(d);else if(IS(d)){const _=new Promise((v,C)=>{d.subscribe({complete:v,error:C})});i.push(_)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{a()}).catch(c=>{this.reject(c)}),0===i.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=qe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Ww=new kn("");let Mh=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Kt(eu),this.afterRenderEffectManager=Kt(Pf),this.externalTestViews=new Set,this.beforeRender=new On.x,this.afterTick=new On.x,this.componentTypes=[],this.components=[],this.isStable=Kt(Bn).hasPendingTasks.pipe((0,Jn.U)(i=>!i)),this._injector=Kt(Sn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,a){const c=i instanceof qy;if(!this._injector.get(Gw).done)throw!c&&Zi(i),new lt(405,!1);let _;_=c?i:this._injector.get(Wc).resolveComponentFactory(i),this.componentTypes.push(_.componentType);const v=function EP(t){return t.isBoundToModule}(_)?void 0:this._injector.get(l),x=_.create(ii.NULL,[],a||_.selector,v),j=x.location.nativeElement,Q=x.injector.get(yS,null);return Q?.registerApplication(j),x.onDestroy(()=>{this.detachView(x.hostView),Yv(this.components,x),Q?.unregisterApplication(j)}),this._loadComponent(x),x}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new lt(101,!1);const a=he(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(c){this.internalErrorHandler(c)}finally{this.afterTick.next(),this._runningTick=!1,he(a)}}detectChangesInAttachedViews(i){let a=0;const c=this.afterRenderEffectManager;for(;;){if(a===Ly)throw new lt(103,!1);if(i){const d=0===a;this.beforeRender.next(d);for(let{_lView:_,notifyErrorHandler:v}of this._views)wP(_,d,v)}if(a++,c.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:d})=>qw(d))&&(c.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:d})=>qw(d))))break}}attachView(i){const a=i;this._views.push(a),a.attachToAppRef(this)}detachView(i){const a=i;Yv(this._views,a),a.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const a=this._injector.get(Ww,[]);[...this._bootstrapListeners,...a].forEach(c=>c(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Yv(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new lt(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=qe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Yv(t,r){const i=t.indexOf(r);i>-1&&t.splice(i,1)}function wP(t,r,i){!r&&!qw(t)||function TP(t,r,i){let a;i?(a=0,t[Ut]|=1024):a=64&t[Ut]?0:1,yf(t,r,a)}(t,i,r)}function qw(t){return Rc(t)}class DP{constructor(r,i){this.ngModuleFactory=r,this.componentFactories=i}}let SP=(()=>{class t{compileModuleSync(i){return new z(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const a=this.compileModuleSync(i),d=Sa(Ci(i).declarations).reduce((_,v)=>{const C=En(v);return C&&_.push(new ju(C)),_},[]);return new DP(a,d)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=qe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bP=(()=>{class t{constructor(){this.zone=Kt(gs),this.applicationRef=Kt(Mh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=qe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function AS(t){return[{provide:gs,useFactory:t},{provide:Ui,multi:!0,useFactory:()=>{const r=Kt(bP,{optional:!0});return()=>r.initialize()}},{provide:Ui,multi:!0,useFactory:()=>{const r=Kt(MP);return()=>{r.initialize()}}},{provide:eu,useFactory:RP}]}function RP(){const t=Kt(gs),r=Kt(fr);return i=>t.runOutsideAngular(()=>r.handleError(i))}function PP(t){return Ai([[],AS(()=>new gs(function bS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}(t)))])}let MP=(()=>{class t{constructor(){this.subscription=new zn.w0,this.initialized=!1,this.zone=Kt(gs),this.pendingTasks=Kt(Bn)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{gs.assertNotInAngularZone(),queueMicrotask(()=>{null!==i&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{gs.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=qe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Jv=new kn("",{providedIn:"root",factory:()=>Kt(Jv,Dn.Optional|Dn.SkipSelf)||function NP(){return typeof $localize<"u"&&$localize.locale||Rg}()}),OP=new kn("",{providedIn:"root",factory:()=>"USD"}),Kw=new kn("");let Nh=null;function VP(){return!1}let xS=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=UP}return t})();function UP(t){return function BP(t,r,i){if(ea(t)&&!i){const a=go(t.index,r);return new vh(a,a)}return 47&t.type?new vh(r[Ke],r):null}(Tr(),We(),16==(16&t))}class FS{constructor(){}supports(r){return Sr(r)}create(r){return new WP(r)}}const GP=(t,r)=>r;class WP{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||GP}forEachItem(r){let i;for(i=this._itHead;null!==i;i=i._next)r(i)}forEachOperation(r){let i=this._itHead,a=this._removalsHead,c=0,d=null;for(;i||a;){const _=!a||i&&i.currentIndex<US(a,c,d)?i:a,v=US(_,c,d),C=_.currentIndex;if(_===a)c--,a=a._nextRemoved;else if(i=i._next,null==_.previousIndex)c++;else{d||(d=[]);const x=v-c,j=C-c;if(x!=j){for(let le=0;le<x;le++){const ve=le<d.length?d[le]:d[le]=0,ke=ve+le;j<=ke&&ke<x&&(d[le]=ve+1)}d[_.previousIndex]=j-x}}v!==C&&r(_,v,C)}}forEachPreviousItem(r){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)r(i)}forEachAddedItem(r){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)r(i)}forEachMovedItem(r){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)r(i)}forEachRemovedItem(r){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)r(i)}forEachIdentityChange(r){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)r(i)}diff(r){if(null==r&&(r=[]),!Sr(r))throw new lt(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let c,d,_,i=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let v=0;v<this.length;v++)d=r[v],_=this._trackByFn(v,d),null!==i&&Object.is(i.trackById,_)?(a&&(i=this._verifyReinsertion(i,d,_,v)),Object.is(i.item,d)||this._addIdentityChange(i,d)):(i=this._mismatch(i,d,_,v),a=!0),i=i._next}else c=0,function Zc(t,r){if(Array.isArray(t))for(let i=0;i<t.length;i++)r(t[i]);else{const i=t[Symbol.iterator]();let a;for(;!(a=i.next()).done;)r(a.value)}}(r,v=>{_=this._trackByFn(c,v),null!==i&&Object.is(i.trackById,_)?(a&&(i=this._verifyReinsertion(i,v,_,c)),Object.is(i.item,v)||this._addIdentityChange(i,v)):(i=this._mismatch(i,v,_,c),a=!0),i=i._next,c++}),this.length=c;return this._truncate(i),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,i,a,c){let d;return null===r?d=this._itTail:(d=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,i)||this._addIdentityChange(r,i),this._reinsertAfter(r,d,c)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,c))?(Object.is(r.item,i)||this._addIdentityChange(r,i),this._moveAfter(r,d,c)):r=this._addAfter(new qP(i,a),d,c),r}_verifyReinsertion(r,i,a,c){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==d?r=this._reinsertAfter(d,r._prev,c):r.currentIndex!=c&&(r.currentIndex=c,this._addToMoves(r,c)),r}_truncate(r){for(;null!==r;){const i=r._next;this._addToRemovals(this._unlink(r)),r=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,i,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const c=r._prevRemoved,d=r._nextRemoved;return null===c?this._removalsHead=d:c._nextRemoved=d,null===d?this._removalsTail=c:d._prevRemoved=c,this._insertAfter(r,i,a),this._addToMoves(r,a),r}_moveAfter(r,i,a){return this._unlink(r),this._insertAfter(r,i,a),this._addToMoves(r,a),r}_addAfter(r,i,a){return this._insertAfter(r,i,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,i,a){const c=null===i?this._itHead:i._next;return r._next=c,r._prev=i,null===c?this._itTail=r:c._prev=r,null===i?this._itHead=r:i._next=r,null===this._linkedRecords&&(this._linkedRecords=new VS),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const i=r._prev,a=r._next;return null===i?this._itHead=a:i._next=a,null===a?this._itTail=i:a._prev=i,r}_addToMoves(r,i){return r.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new VS),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,i){return r.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class qP{constructor(r,i){this.item=r,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class KP{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,i){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===i||i<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const i=r._prevDup,a=r._nextDup;return null===i?this._head=a:i._nextDup=a,null===a?this._tail=i:a._prevDup=i,null===this._head}}class VS{constructor(){this.map=new Map}put(r){const i=r.trackById;let a=this.map.get(i);a||(a=new KP,this.map.set(i,a)),a.add(r)}get(r,i){const c=this.map.get(r);return c?c.get(r,i):null}remove(r){const i=r.trackById;return this.map.get(i).remove(r)&&this.map.delete(i),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function US(t,r,i){const a=t.previousIndex;if(null===a)return a;let c=0;return i&&a<i.length&&(c=i[a]),a+r+c}class BS{constructor(){}supports(r){return r instanceof Map||I_(r)}create(){return new ZP}}class ZP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let i;for(i=this._mapHead;null!==i;i=i._next)r(i)}forEachPreviousItem(r){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)r(i)}forEachChangedItem(r){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)r(i)}forEachAddedItem(r){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)r(i)}forEachRemovedItem(r){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)r(i)}diff(r){if(r){if(!(r instanceof Map||I_(r)))throw new lt(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,c)=>{if(i&&i.key===c)this._maybeAddToChanges(i,a),this._appendAfter=i,i=i._next;else{const d=this._getOrCreateRecordForKey(c,a);i=this._insertBeforeOrAppend(i,d)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let a=i;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,i){if(r){const a=r._prev;return i._next=r,i._prev=a,r._prev=i,a&&(a._next=i),r===this._mapHead&&(this._mapHead=i),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(r,i){if(this._records.has(r)){const c=this._records.get(r);this._maybeAddToChanges(c,i);const d=c._prev,_=c._next;return d&&(d._next=_),_&&(_._prev=d),c._next=null,c._prev=null,c}const a=new QP(r);return this._records.set(r,a),a.currentValue=i,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,i){Object.is(i,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=i,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,i){r instanceof Map?r.forEach(i):Object.keys(r).forEach(a=>i(r[a],a))}}class QP{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function jS(){return new eT([new FS])}let eT=(()=>{class t{static#e=this.\u0275prov=qe({token:t,providedIn:"root",factory:jS});constructor(i){this.factories=i}static create(i,a){if(null!=a){const c=a.factories.slice();i=i.concat(c)}return new t(i)}static extend(i){return{provide:t,useFactory:a=>t.create(i,a||jS()),deps:[[t,new So,new so]]}}find(i){const a=this.factories.find(c=>c.supports(i));if(null!=a)return a;throw new lt(901,!1)}}return t})();function $S(){return new tT([new BS])}let tT=(()=>{class t{static#e=this.\u0275prov=qe({token:t,providedIn:"root",factory:$S});constructor(i){this.factories=i}static create(i,a){if(a){const c=a.factories.slice();i=i.concat(c)}return new t(i)}static extend(i){return{provide:t,useFactory:a=>t.create(i,a||$S()),deps:[[t,new So,new so]]}}find(i){const a=this.factories.find(c=>c.supports(i));if(a)return a;throw new lt(901,!1)}}return t})(),JP=(()=>{class t{constructor(i){}static#e=this.\u0275fac=function(a){return new(a||t)(Kr(Mh))};static#t=this.\u0275mod=Ua({type:t});static#n=this.\u0275inj=ln({})}return t})();function pM(t){try{const{rootComponent:r,appProviders:i,platformProviders:a}=t,c=function FP(t=[]){if(Nh)return Nh;const r=function MS(t=[],r){return ii.create({name:r,providers:[{provide:yu,useValue:"platform"},{provide:Kw,useValue:new Set([()=>Nh=null])},...t]})}(t);return Nh=r,function TS(){!function en(t){Rn=t}(()=>{throw new lt(600,!1)})}(),function NS(t){t.get(nh,null)?.forEach(i=>i())}(r),r}(a),d=[PP(),...i||[]],v=new me({providers:d,parent:c,debugName:"",runEnvironmentInitializers:!1}).injector,C=v.get(gs);return C.run(()=>{v.resolveInjectorInitializers();const x=v.get(fr,null);let j;C.runOutsideAngular(()=>{j=C.onError.subscribe({next:ve=>{x.handleError(ve)}})});const Q=()=>v.destroy(),le=c.get(Kw);return le.add(Q),v.onDestroy(()=>{j.unsubscribe(),le.delete(Q)}),function DS(t,r,i){try{const a=i();return zw(a)?a.catch(c=>{throw r.runOutsideAngular(()=>t.handleError(c)),c}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(x,C,()=>{const ve=v.get(Gw);return ve.runInitializers(),ve.donePromise.then(()=>{!function M0(t){"string"==typeof t&&(P0=t.toLowerCase().replace(/_/g,"-"))}(v.get(Jv,Rg)||Rg);const Je=v.get(Mh);return void 0!==r&&Je.bootstrap(r),Je})})})}catch(r){return Promise.reject(r)}}function RM(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function MM(t,r){Bu("NgSignals");const i=function ie(t){const r=Object.create(Pt);r.computation=t;const i=()=>{if(Qe(r),Re(r),r.value===an)throw r.error;return r.value};return i[fe]=r,i}(t);return r?.equal&&(i[fe].equal=r.equal),i}function NM(t){const r=he(null);try{return t()}finally{he(r)}}},4694:(Rt,Ve,B)=>{B.d(Ve,{zQ:()=>ge,ww:()=>Me,rT:()=>Xn,f7:()=>Ht,L6:()=>an,_Q:()=>Pt,lh:()=>Rn,Qv:()=>Ce,nw:()=>en}),B(3956);var H=B(6814),K=B(9212),pe=B(8326),de=B(7217),fe=B(8645),he=B(2096),Ne=B(5592),Oe=B(2459),ue=B(3019),re=B(3093),Re=B(4664),at=B(7398),Qe=B(4552);class vt extends fe.x{constructor(Ee=1/0,Fe=1/0,Te=Qe.l){super(),this._bufferSize=Ee,this._windowTime=Fe,this._timestampProvider=Te,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Fe===1/0,this._bufferSize=Math.max(1,Ee),this._windowTime=Math.max(1,Fe)}next(Ee){const{isStopped:Fe,_buffer:Te,_infiniteTimeWindow:_t,_timestampProvider:rn,_windowTime:cn}=this;Fe||(Te.push(Ee),!_t&&Te.push(rn.now()+cn)),this._trimBuffer(),super.next(Ee)}_subscribe(Ee){this._throwIfClosed(),this._trimBuffer();const Fe=this._innerSubscribe(Ee),{_infiniteTimeWindow:Te,_buffer:_t}=this,rn=_t.slice();for(let cn=0;cn<rn.length&&!Ee.closed;cn+=Te?1:2)Ee.next(rn[cn]);return this._checkFinalizedStatuses(Ee),Fe}_trimBuffer(){const{_bufferSize:Ee,_timestampProvider:Fe,_buffer:Te,_infiniteTimeWindow:_t}=this,rn=(_t?1:2)*Ee;if(Ee<1/0&&rn<Te.length&&Te.splice(0,Te.length-rn),!_t){const cn=Fe.now();let Ct=0;for(let tn=1;tn<Te.length&&Te[tn]<=cn;tn+=2)Ct=tn;Ct&&Te.splice(0,Ct+1)}}}var Bt=B(4829),Dt=B(305),ct=B(9360);function Wt(Ae,Ee,...Fe){if(!0===Ee)return void Ae();if(!1===Ee)return;const Te=new Dt.Hp({next:()=>{Te.unsubscribe(),Ae()}});return(0,Bt.Xf)(Ee(...Fe)).subscribe(Te)}function rt(Ae,Ee,Fe){let Te,_t=!1;return Ae&&"object"==typeof Ae?({bufferSize:Te=1/0,windowTime:Ee=1/0,refCount:_t=!1,scheduler:Fe}=Ae):Te=Ae??1/0,function Gt(Ae={}){const{connector:Ee=(()=>new fe.x),resetOnError:Fe=!0,resetOnComplete:Te=!0,resetOnRefCountZero:_t=!0}=Ae;return rn=>{let cn,Ct,tn,hn=0,On=!1,zn=!1;const or=()=>{Ct?.unsubscribe(),Ct=void 0},Jn=()=>{or(),cn=tn=void 0,On=zn=!1},kt=()=>{const Gn=cn;Jn(),Gn?.unsubscribe()};return(0,ct.e)((Gn,lt)=>{hn++,!zn&&!On&&or();const Wn=tn=tn??Ee();lt.add(()=>{hn--,0===hn&&!zn&&!On&&(Ct=Wt(kt,_t))}),Wn.subscribe(lt),!cn&&hn>0&&(cn=new Dt.Hp({next:Gr=>Wn.next(Gr),error:Gr=>{zn=!0,or(),Ct=Wt(Jn,Fe,Gr),Wn.error(Gr)},complete:()=>{On=!0,or(),Ct=Wt(Jn,Te),Wn.complete()}}),(0,Bt.Xf)(Gn).subscribe(cn))})(rn)}}({connector:()=>new vt(Te,Ee,Fe),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:_t})}var ne=B(1374),Ge=B(4674);function pt(Ae,Ee){return(0,Ge.m)(Ee)?(0,Re.w)(()=>Ae,Ee):(0,Re.w)(()=>Ae)}var Ze=B(5137),ot=B(2181),ie=B(7142);const Ce=new K.OlP("angularfire2.auth.use-emulator"),an=new K.OlP("angularfire2.auth.settings"),Pt=new K.OlP("angularfire2.auth.tenant-id"),Xn=new K.OlP("angularfire2.auth.langugage-code"),Rn=new K.OlP("angularfire2.auth.use-device-language"),Ht=new K.OlP("angularfire.auth.persistence"),en=(Ae,Ee,Fe,Te,_t,rn,cn,Ct)=>(0,de.cc)(`${Ae.name}.auth`,"AngularFireAuth",Ae.name,()=>{const tn=Ee.runOutsideAngular(()=>Ae.auth());if(Fe&&tn.useEmulator(...Fe),Te&&(tn.tenantId=Te),tn.languageCode=_t,rn&&tn.useDeviceLanguage(),cn)for(const[hn,On]of Object.entries(cn))tn.settings[hn]=On;return Ct&&tn.setPersistence(Ct),tn},[Fe,Te,_t,rn,cn,Ct]);let ge=(()=>{class Ae{authState;idToken;user;idTokenResult;credential;constructor(Fe,Te,_t,rn,cn,Ct,tn,hn,On,zn,or,Jn){const kt=new fe.x,Gn=(0,he.of)(void 0).pipe((0,re.Q)(cn.outsideAngular),(0,Re.w)(()=>rn.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,3956)))),(0,at.U)(()=>(0,de.on)(Fe,rn,Te)),(0,at.U)(lt=>en(lt,rn,Ct,hn,On,zn,tn,or)),rt({bufferSize:1,refCount:!1}));if((0,H.PM)(_t))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,he.of)(null);else{Gn.pipe((0,ne.P)()).subscribe();const lt=Gn.pipe((0,Re.w)(er=>er.getRedirectResult().then(gr=>gr,()=>null)),pe.iC,rt({bufferSize:1,refCount:!1})),Wn=Gn.pipe((0,Re.w)(er=>new Ne.y(gr=>({unsubscribe:rn.runOutsideAngular(()=>er.onAuthStateChanged(Wr=>gr.next(Wr),Wr=>gr.error(Wr),()=>gr.complete()))})))),Gr=Gn.pipe((0,Re.w)(er=>new Ne.y(gr=>({unsubscribe:rn.runOutsideAngular(()=>er.onIdTokenChanged(Wr=>gr.next(Wr),Wr=>gr.error(Wr),()=>gr.complete()))}))));this.authState=lt.pipe(pt(Wn),(0,Ze.R)(cn.outsideAngular),(0,re.Q)(cn.insideAngular)),this.user=lt.pipe(pt(Gr),(0,Ze.R)(cn.outsideAngular),(0,re.Q)(cn.insideAngular)),this.idToken=this.user.pipe((0,Re.w)(er=>er?(0,Oe.D)(er.getIdToken()):(0,he.of)(null))),this.idTokenResult=this.user.pipe((0,Re.w)(er=>er?(0,Oe.D)(er.getIdTokenResult()):(0,he.of)(null))),this.credential=(0,ue.T)(lt,kt,this.authState.pipe((0,ot.h)(er=>!er))).pipe((0,at.U)(er=>er?.user?er:null),(0,Ze.R)(cn.outsideAngular),(0,re.Q)(cn.insideAngular))}return(0,de.pX)(this,Gn,rn,{spy:{apply:(lt,Wn,Gr)=>{(lt.startsWith("signIn")||lt.startsWith("createUser"))&&Gr.then(er=>kt.next(er))}}})}static \u0275fac=function(Te){return new(Te||Ae)(K.LFG(de.Dh),K.LFG(de.xv,8),K.LFG(K.Lbi),K.LFG(K.R0b),K.LFG(pe.HU),K.LFG(Ce,8),K.LFG(an,8),K.LFG(Pt,8),K.LFG(Xn,8),K.LFG(Rn,8),K.LFG(Ht,8),K.LFG(pe.Rf,8))};static \u0275prov=K.Yz7({token:Ae,factory:Ae.\u0275fac,providedIn:"any"})}return Ae})(),Me=(()=>{class Ae{constructor(){ie.Z.registerVersion("angularfire",pe.q4.full,"auth-compat")}static \u0275fac=function(Te){return new(Te||Ae)};static \u0275mod=K.oAB({type:Ae});static \u0275inj=K.cJS({providers:[ge]})}return Ae})()},6533:(Rt,Ve,B)=>{B.d(Ve,{ST:()=>Pv,yb:()=>Mv});var D=B(6814),H=B(9212),K=B(8326),pe=B(7217),de=B(4694),fe=B(6321),he=B(5592),Ne=B(2459),Oe=B(2096),ue=B(7921),re=B(9360),Re=B(8251);function at(){return(0,re.e)((s,e)=>{let n,o=!1;s.subscribe((0,Re.x)(e,u=>{const l=n;n=u,o&&e.next([l,u]),o=!0}))})}var Qe=B(7398),vt=B(6699),Bt=B(2737);function ct(s,e){return s===e}var Ce,Gt=B(2181),rt=(B(3956),B(3106)),ne=B(5861),Ge=B(534),pt=B(4537),Ze=B(7879),ot=B(9058),ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ye={},an=an||{},Pt=ie||self;function Xn(s){var e=typeof s;return"array"==(e="object"!=e?e:s?Array.isArray(s)?"array":e:"null")||"object"==e&&"number"==typeof s.length}function Rn(s){var e=typeof s;return"object"==e&&null!=s||"function"==e}var en="closure_uid_"+(1e9*Math.random()>>>0),ge=0;function Me(s,e,n){return s.call.apply(s.bind,arguments)}function Ae(s,e,n){if(!s)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),s.apply(e,u)}}return function(){return s.apply(e,arguments)}}function Ee(s,e,n){return(Ee=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Me:Ae).apply(null,arguments)}function Fe(s,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),s.apply(this,o)}}function Te(s,e){function n(){}n.prototype=e.prototype,s.$=e.prototype,s.prototype=new n,s.prototype.constructor=s,s.ac=function(o,u,l){for(var g=Array(arguments.length-2),b=2;b<arguments.length;b++)g[b-2]=arguments[b];return e.prototype[u].apply(o,g)}}function _t(){this.s=this.s,this.o=this.o}_t.prototype.s=!1,_t.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Ht(s){Object.prototype.hasOwnProperty.call(s,en)&&s[en]||(s[en]=++ge)}(this)},_t.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const cn=Array.prototype.indexOf?function(s,e){return Array.prototype.indexOf.call(s,e,void 0)}:function(s,e){if("string"==typeof s)return"string"!=typeof e||1!=e.length?-1:s.indexOf(e,0);for(let n=0;n<s.length;n++)if(n in s&&s[n]===e)return n;return-1};function Ct(s){const e=s.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=s[o];return n}return[]}function tn(s,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(Xn(o)){const u=s.length||0,l=o.length||0;s.length=u+l;for(let g=0;g<l;g++)s[u+g]=o[g]}else s.push(o)}}function hn(s,e){this.type=s,this.g=this.target=e,this.defaultPrevented=!1}hn.prototype.h=function(){this.defaultPrevented=!0};var On=function(){if(!Pt.addEventListener||!Object.defineProperty)return!1;var s=!1,e=Object.defineProperty({},"passive",{get:function(){s=!0}});try{Pt.addEventListener("test",()=>{},e),Pt.removeEventListener("test",()=>{},e)}catch{}return s}();function zn(s){return/^[\s\xa0]*$/.test(s)}function or(){var s=Pt.navigator;return s&&(s=s.userAgent)?s:""}function Jn(s){return-1!=or().indexOf(s)}function kt(s){return kt[" "](s),s}kt[" "]=function(){};var sn,s,lt=Jn("Opera"),Wn=Jn("Trident")||Jn("MSIE"),Gr=Jn("Edge"),er=Gr||Wn,gr=Jn("Gecko")&&!(-1!=or().toLowerCase().indexOf("webkit")&&!Jn("Edge"))&&!(Jn("Trident")||Jn("MSIE"))&&!Jn("Edge"),Wr=-1!=or().toLowerCase().indexOf("webkit")&&!Jn("Edge");function Fi(){var s=Pt.document;return s?s.documentMode:void 0}e:{var qt="",gi=(s=or(),gr?/rv:([^\);]+)(\)|;)/.exec(s):Gr?/Edge\/([\d\.]+)/.exec(s):Wn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):Wr?/WebKit\/(\S+)/.exec(s):lt?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(gi&&(qt=gi?gi[1]:""),Wn){var di=Fi();if(null!=di&&di>parseFloat(qt)){sn=String(di);break e}}sn=qt}var Cr=Pt.document&&Wn&&(Fi()||parseInt(sn,10))||void 0;function Wi(s,e){if(hn.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var n=this.type=s.type,o=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=e,e=s.relatedTarget){if(gr){e:{try{kt(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=s.fromElement:"mouseout"==n&&(e=s.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:zt[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&Wi.$.h.call(this)}}Te(Wi,hn);var zt={2:"touch",3:"pen",4:"mouse"};Wi.prototype.h=function(){Wi.$.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var qr="closure_listenable_"+(1e6*Math.random()|0),wn=0;function Pn(s,e,n,o,u){this.listener=s,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=u,this.key=++wn,this.fa=this.ia=!1}function xn(s){s.fa=!0,s.listener=null,s.proxy=null,s.src=null,s.la=null}function lr(s,e,n){for(const o in s)e.call(n,s[o],o,s)}function Fn(s){const e={};for(const n in s)e[n]=s[n];return e}const Hn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jr(s,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)s[n]=o[n];for(let l=0;l<Hn.length;l++)n=Hn[l],Object.prototype.hasOwnProperty.call(o,n)&&(s[n]=o[n])}}function Ie(s){this.src=s,this.g={},this.h=0}function xe(s,e){var n=e.type;if(n in s.g){var l,o=s.g[n],u=cn(o,e);(l=0<=u)&&Array.prototype.splice.call(o,u,1),l&&(xn(e),0==s.g[n].length&&(delete s.g[n],s.h--))}}function te(s,e,n,o){for(var u=0;u<s.length;++u){var l=s[u];if(!l.fa&&l.listener==e&&l.capture==!!n&&l.la==o)return u}return-1}Ie.prototype.add=function(s,e,n,o,u){var l=s.toString();(s=this.g[l])||(s=this.g[l]=[],this.h++);var g=te(s,e,o,u);return-1<g?(e=s[g],n||(e.ia=!1)):((e=new Pn(e,this.src,l,!!o,u)).ia=n,s.push(e)),e};var De="closure_lm_"+(1e6*Math.random()|0),Z={};function Y(s,e,n,o,u){if(o&&o.once)return Se(s,e,n,o,u);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Y(s,e[l],n,o,u);return null}return n=Yt(n),s&&s[qr]?s.O(e,n,Rn(o)?!!o.capture:!!o,u):se(s,e,n,!1,o,u)}function se(s,e,n,o,u,l){if(!e)throw Error("Invalid event type");var g=Rn(u)?!!u.capture:!!u,b=Vr(s);if(b||(s[De]=b=new Ie(s)),(n=b.add(e,n,o,g,l)).proxy)return n;if(o=function Be(){const e=Vi;return function s(n){return e.call(s.src,s.listener,n)}}(),n.proxy=o,o.src=s,o.listener=n,s.addEventListener)On||(u=g),void 0===u&&(u=!1),s.addEventListener(e.toString(),o,u);else if(s.attachEvent)s.attachEvent(un(e.toString()),o);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(o)}return n}function Se(s,e,n,o,u){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Se(s,e[l],n,o,u);return null}return n=Yt(n),s&&s[qr]?s.P(e,n,Rn(o)?!!o.capture:!!o,u):se(s,e,n,!0,o,u)}function mt(s,e,n,o,u){if(Array.isArray(e))for(var l=0;l<e.length;l++)mt(s,e[l],n,o,u);else o=Rn(o)?!!o.capture:!!o,n=Yt(n),s&&s[qr]?(s=s.i,(e=String(e).toString())in s.g&&-1<(n=te(l=s.g[e],n,o,u))&&(xn(l[n]),Array.prototype.splice.call(l,n,1),0==l.length&&(delete s.g[e],s.h--))):s&&(s=Vr(s))&&(e=s.g[e.toString()],s=-1,e&&(s=te(e,n,o,u)),(n=-1<s?e[s]:null)&&on(n))}function on(s){if("number"!=typeof s&&s&&!s.fa){var e=s.src;if(e&&e[qr])xe(e.i,s);else{var n=s.type,o=s.proxy;e.removeEventListener?e.removeEventListener(n,o,s.capture):e.detachEvent?e.detachEvent(un(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=Vr(e))?(xe(n,s),0==n.h&&(n.src=null,e[De]=null)):xn(s)}}}function un(s){return s in Z?Z[s]:Z[s]="on"+s}function Vi(s,e){if(s.fa)s=!0;else{e=new Wi(e,this);var n=s.listener,o=s.la||s.src;s.ia&&on(s),s=n.call(o,e)}return s}function Vr(s){return(s=s[De])instanceof Ie?s:null}var ai="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yt(s){return"function"==typeof s?s:(s[ai]||(s[ai]=function(e){return s.handleEvent(e)}),s[ai])}function Et(){_t.call(this),this.i=new Ie(this),this.S=this,this.J=null}function Rr(s,e){var n,o=s.J;if(o)for(n=[];o;o=o.J)n.push(o);if(s=s.S,o=e.type||e,"string"==typeof e)e=new hn(e,s);else if(e instanceof hn)e.target=e.target||s;else{var u=e;Jr(e=new hn(o,s),u)}if(u=!0,n)for(var l=n.length-1;0<=l;l--){var g=e.g=n[l];u=qi(g,o,!0,e)&&u}if(u=qi(g=e.g=s,o,!0,e)&&u,u=qi(g,o,!1,e)&&u,n)for(l=0;l<n.length;l++)u=qi(g=e.g=n[l],o,!1,e)&&u}function qi(s,e,n,o){if(!(e=s.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,l=0;l<e.length;++l){var g=e[l];if(g&&!g.fa&&g.capture==n){var b=g.listener,N=g.la||g.src;g.ia&&xe(s.i,g),u=!1!==b.call(N,o)&&u}}return u&&!o.defaultPrevented}Te(Et,_t),Et.prototype[qr]=!0,Et.prototype.removeEventListener=function(s,e,n,o){mt(this,s,e,n,o)},Et.prototype.N=function(){if(Et.$.N.call(this),this.i){var e,s=this.i;for(e in s.g){for(var n=s.g[e],o=0;o<n.length;o++)xn(n[o]);delete s.g[e],s.h--}}this.J=null},Et.prototype.O=function(s,e,n,o){return this.i.add(String(s),e,!1,n,o)},Et.prototype.P=function(s,e,n,o){return this.i.add(String(s),e,!0,n,o)};var Xs=Pt.JSON.stringify;function Le(){var s=Ti;let e=null;return s.g&&(e=s.g,s.g=s.g.next,s.g||(s.h=null),e.next=null),e}var Jt=new class $e{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ln,s=>s.reset());class ln{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function mn(s){var e=1;s=s.split(":");const n=[];for(;0<e&&s.length;)n.push(s.shift()),e--;return s.length&&n.push(s.join(":")),n}function qn(s){Pt.setTimeout(()=>{throw s},0)}let mr,_r=!1,Ti=new class qe{constructor(){this.h=this.g=null}add(e,n){const o=Jt.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},Ji=()=>{const s=Pt.Promise.resolve(void 0);mr=()=>{s.then(cs)}};var cs=()=>{for(var s;s=Le();){try{s.h.call(s.g)}catch(n){qn(n)}var e=Jt;e.j(s),100>e.h&&(e.h++,s.next=e.g,e.g=s)}_r=!1};function Js(s,e){Et.call(this),this.h=s||1,this.g=e||Pt,this.j=Ee(this.qb,this),this.l=Date.now()}function _s(s){s.ga=!1,s.T&&(s.g.clearTimeout(s.T),s.T=null)}function kn(s,e,n){if("function"==typeof s)n&&(s=Ee(s,n));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=Ee(s.handleEvent,s)}return 2147483647<Number(e)?-1:Pt.setTimeout(s,e||0)}function Uo(s){s.g=kn(()=>{s.g=null,s.i&&(s.i=!1,Uo(s))},s.j);const e=s.h;s.h=null,s.m.apply(null,e)}Te(Js,Et),(Ce=Js.prototype).ga=!1,Ce.T=null,Ce.qb=function(){if(this.ga){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-s):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Rr(this,"tick"),this.ga&&(_s(this),this.start()))}},Ce.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ce.N=function(){Js.$.N.call(this),_s(this),delete this.g};class Bo extends _t{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Uo(this)}N(){super.N(),this.g&&(Pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ar(s){_t.call(this),this.h=s,this.g={}}Te(ar,_t);var Ra=[];function ou(s,e,n,o){Array.isArray(n)||(n&&(Ra[0]=n.toString()),n=Ra);for(var u=0;u<n.length;u++){var l=Y(e,n[u],o||s.handleEvent,!1,s.h||s);if(!l)break;s.g[l.key]=l}}function eo(s){lr(s.g,function(e,n){this.g.hasOwnProperty(n)&&on(e)},s),s.g={}}function au(){this.g=!0}function oa(s,e,n,o){s.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ur(s,e){if(!s.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(s=0;s<n.length;s++)if(Array.isArray(n[s])){var o=n[s];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var l=u[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var g=1;g<u.length;g++)u[g]=""}}}return Xs(n)}catch{return e}}(s,n)+(o?" "+o:"")})}ar.prototype.N=function(){ar.$.N.call(this),eo(this)},ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},au.prototype.Ea=function(){this.g=!1},au.prototype.info=function(){};var pn={},mi=null;function to(){return mi=mi||new Et}function es(s){hn.call(this,pn.Ta,s)}function Pr(s){const e=to();Rr(e,new es(e))}function Pa(s,e){hn.call(this,pn.STAT_EVENT,s),this.stat=e}function $t(s){const e=to();Rr(e,new Pa(e,s))}function jn(s,e){hn.call(this,pn.Ua,s),this.size=e}function $o(s,e){if("function"!=typeof s)throw Error("Fn must not be null and must be a function");return Pt.setTimeout(function(){s()},e)}pn.Ta="serverreachability",Te(es,hn),pn.STAT_EVENT="statevent",Te(Pa,hn),pn.Ua="timingevent",Te(jn,hn);var Br={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ma={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function wc(){}function aa(){}wc.prototype.h=null;var Ki,Dn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _i(){hn.call(this,"d")}function no(){hn.call(this,"c")}function Ps(){}function uu(s,e,n,o){this.l=s,this.j=e,this.m=n,this.W=o||1,this.U=new ar(this),this.P=Do,this.V=new Js(s=er?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Tc}function Tc(){this.i=null,this.g="",this.h=!1}Te(_i,hn),Te(no,hn),Te(Ps,wc),Ps.prototype.g=function(){return new XMLHttpRequest},Ps.prototype.i=function(){return{}},Ki=new Ps;var Do=45e3,ro={},Ms={};function ua(s,e,n){s.L=1,s.v=Hs(hi(e)),s.s=n,s.S=!0,zo(s,null)}function zo(s,e){s.G=Date.now(),Mr(s),s.A=hi(s.v);var n=s.A,o=s.W;Array.isArray(o)||(o=[String(o)]),ns(n.i,"t",o),s.C=0,n=s.l.J,s.h=new Tc,s.g=mu(s.l,n?e:null,!s.s),0<s.O&&(s.M=new Bo(Ee(s.Pa,s,s.g),s.O)),ou(s.U,s.g,"readystatechange",s.nb),e=s.I?Fn(s.I):{},s.s?(s.u||(s.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",s.g.ha(s.A,s.u,s.s,e)):(s.u="GET",s.g.ha(s.A,s.u,null,e)),Pr(),function Ic(s,e,n,o,u,l){s.info(function(){if(s.g)if(l)for(var g="",b=l.split("&"),N=0;N<b.length;N++){var L=b[N].split("=");if(1<L.length){var z=L[0];L=L[1];var X=z.split("_");g=2<=X.length&&"type"==X[1]?g+(z+"=")+L+"&":g+(z+"=redacted&")}}else g=null;else g=l;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+g})}(s.j,s.u,s.A,s.m,s.W,s.s)}function Na(s){return!!s.g&&"GET"==s.u&&2!=s.L&&s.l.Ha}function Oa(s,e,n){let u,o=!0;for(;!s.J&&s.C<n.length;){if(u=yi(s,n),u==Ms){4==e&&(s.o=4,$t(14),o=!1),oa(s.j,s.m,null,"[Incomplete Response]");break}if(u==ro){s.o=4,$t(15),oa(s.j,s.m,n,"[Invalid Chunk]"),o=!1;break}oa(s.j,s.m,u,null),Kt(s,u)}Na(s)&&u!=Ms&&u!=ro&&(s.h.g="",s.C=0),4!=e||0!=n.length||s.h.h||(s.o=1,$t(16),o=!1),s.i=s.i&&o,o?0<n.length&&!s.ba&&(s.ba=!0,(e=s.l).g==s&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ai(e),e.M=!0,$t(11))):(oa(s.j,s.m,n,"[Invalid Chunked Response]"),ts(s),Kr(s))}function yi(s,e){var n=s.C,o=e.indexOf("\n",n);return-1==o?Ms:(n=Number(e.substring(n,o)),isNaN(n)?ro:(o+=1)+n>e.length?Ms:(e=e.slice(o,o+n),s.C=o+n,e))}function Mr(s){s.Y=Date.now()+s.P,vi(s,s.P)}function vi(s,e){if(null!=s.B)throw Error("WatchDog timer not null");s.B=$o(Ee(s.lb,s),e)}function xa(s){s.B&&(Pt.clearTimeout(s.B),s.B=null)}function Kr(s){0==s.l.H||s.J||Zu(s.l,s)}function ts(s){xa(s);var e=s.M;e&&"function"==typeof e.sa&&e.sa(),s.M=null,_s(s.V),eo(s.U),s.g&&(e=s.g,s.g=null,e.abort(),e.sa())}function Kt(s,e){try{var n=s.l;if(0!=n.H&&(n.g==s||Bi(n.i,s)))if(!s.K&&Bi(n.i,s)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<s.G))break e;Es(n),$r(n)}gu(n),$t(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=$o(Ee(n.ib,n),6e3));if(1>=ao(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ja(n,11)}else if((s.K||n.g==s)&&Es(n),!zn(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let L=u[e];if(n.V=L[0],L=L[1],2==n.H)if("c"==L[0]){n.K=L[1],n.pa=L[2];const z=L[3];null!=z&&(n.ra=z,n.l.info("VER="+n.ra));const X=L[4];null!=X&&(n.Ga=X,n.l.info("SVER="+n.Ga));const me=L[5];null!=me&&"number"==typeof me&&0<me&&(n.L=o=1.5*me,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const Ue=s.g;if(Ue){const ht=Ue.g?Ue.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ht){var l=o.i;l.g||-1==ht.indexOf("spdy")&&-1==ht.indexOf("quic")&&-1==ht.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(Go(l,l.h),l.h=null))}if(o.F){const yt=Ue.g?Ue.g.getResponseHeader("X-HTTP-Session-Id"):null;yt&&(o.Da=yt,nr(o.I,o.F,yt))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-s.G,n.l.info("Handshake RTT: "+n.S+"ms"));var g=s;if((o=n).wa=Yu(o,o.J?o.pa:null,o.Y),g.K){ss(o.i,g);var b=g,N=o.L;N&&b.setTimeout(N),b.B&&(xa(b),Mr(b)),o.g=g}else pu(o);0<n.j.length&&Zi(n)}else"stop"!=L[0]&&"close"!=L[0]||ja(n,7);else 3==n.H&&("stop"==L[0]||"close"==L[0]?"stop"==L[0]?ja(n,7):En(n):"noop"!=L[0]&&n.h&&n.h.Aa(L),n.A=0)}Pr()}catch{}}function ys(s,e){if(s.forEach&&"function"==typeof s.forEach)s.forEach(e,void 0);else if(Xn(s)||"string"==typeof s)Array.prototype.forEach.call(s,e,void 0);else for(var n=function la(s){if(s.ta&&"function"==typeof s.ta)return s.ta();if(!s.Z||"function"!=typeof s.Z){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(Xn(s)||"string"==typeof s){var e=[];s=s.length;for(var n=0;n<s;n++)e.push(n);return e}e=[],n=0;for(const o in s)e[n++]=o;return e}}}(s),o=function ca(s){if(s.Z&&"function"==typeof s.Z)return s.Z();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if("string"==typeof s)return s.split("");if(Xn(s)){for(var e=[],n=s.length,o=0;o<n;o++)e.push(s[o]);return e}for(o in e=[],n=0,s)e[n++]=s[o];return e}(s),u=o.length,l=0;l<u;l++)e.call(void 0,o[l],n&&n[l],s)}(Ce=uu.prototype).setTimeout=function(s){this.P=s},Ce.nb=function(s){s=s.target;const e=this.M;e&&3==qs(s)?e.l():this.Pa(s)},Ce.Pa=function(s){try{if(s==this.g)e:{const z=qs(this.g);var e=this.g.Ia();if(this.g.da(),!(3>z)&&(3!=z||er||this.g&&(this.h.h||this.g.ja()||Ku(this.g)))){this.J||4!=z||7==e||Pr(),xa(this);var n=this.g.da();this.ca=n;t:if(Na(this)){var o=Ku(this.g);s="";var u=o.length,l=4==qs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ts(this),Kr(this);var g="";break t}this.h.i=new Pt.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,s+=this.h.i.decode(o[e],{stream:l&&e==u-1});o.splice(0,u),this.h.g+=s,this.C=0,g=this.h.g}else g=this.g.ja();if(this.i=200==n,function Yc(s,e,n,o,u,l,g){s.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+l+" "+g})}(this.j,this.u,this.A,this.m,this.W,z,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var b,N=this.g;if((b=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zn(b)){var L=b;break t}}L=null}if(!(n=L)){this.i=!1,this.o=3,$t(12),ts(this),Kr(this);break e}oa(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kt(this,n)}this.S?(Oa(this,z,g),er&&this.i&&3==z&&(ou(this.U,this.V,"tick",this.mb),this.V.start())):(oa(this.j,this.m,g,null),Kt(this,g)),4==z&&ts(this),this.i&&!this.J&&(4==z?Zu(this.l,this):(this.i=!1,Mr(this)))}else(function Jc(s){const e={};s=(s.g&&2<=qs(s)&&s.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<s.length;o++){if(zn(s[o]))continue;var n=mn(s[o]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const l=e[u]||[];e[u]=l,l.push(n)}!function ms(s,e){for(const n in s)e.call(void 0,s[n],n,s)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<g.indexOf("Unknown SID")?(this.o=3,$t(12)):(this.o=0,$t(13)),ts(this),Kr(this)}}}catch{}},Ce.mb=function(){if(this.g){var s=qs(this.g),e=this.g.ja();this.C<e.length&&(xa(this),Oa(this,s,e),this.i&&4!=s&&Mr(this))}},Ce.cancel=function(){this.J=!0,ts(this)},Ce.lb=function(){this.B=null;const s=Date.now();0<=s-this.Y?(function jo(s,e){s.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Pr(),$t(17)),ts(this),this.o=2,Kr(this)):vi(this,this.Y-s)};var ls=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function io(s){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,s instanceof io){this.h=s.h,so(this,s.j),this.s=s.s,this.g=s.g,oo(this,s.m),this.l=s.l;var e=s.i,n=new fa;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),So(this,n),this.o=s.o}else s&&(e=String(s).match(ls))?(this.h=!1,so(this,e[1]||"",!0),this.s=da(e[2]||""),this.g=da(e[3]||"",!0),oo(this,e[4]),this.l=da(e[5]||"",!0),So(this,e[6]||"",!0),this.o=da(e[7]||"")):(this.h=!1,this.i=new fa(null,this.h))}function hi(s){return new io(s)}function so(s,e,n){s.j=n?da(e,!0):e,s.j&&(s.j=s.j.replace(/:$/,""))}function oo(s,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);s.m=e}else s.m=null}function So(s,e,n){e instanceof fa?(s.i=e,function Xc(s,e){e&&!s.j&&(Ns(s),s.i=null,s.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(ti(this,o),ns(this,u,n))},s)),s.j=e}(s.i,s.h)):(n||(e=ei(e,zu)),s.i=new fa(e,s.h))}function nr(s,e,n){s.i.set(e,n)}function Hs(s){return nr(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function da(s,e){return s?e?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function ei(s,e,n){return"string"==typeof s?(s=encodeURI(s).replace(e,ha),n&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function ha(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}io.prototype.toString=function(){var s=[],e=this.j;e&&s.push(ei(e,lu,!0),":");var n=this.g;return(n||"file"==e)&&(s.push("//"),(e=this.s)&&s.push(ei(e,lu,!0),"@"),s.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&s.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&s.push("/"),s.push(ei(n,"/"==n.charAt(0)?zs:Nr,!0))),(n=this.i.toString())&&s.push("?",n),(n=this.o)&&s.push("#",ei(n,vs)),s.join("")};var lu=/[#\/\?@]/g,Nr=/[#\?:]/g,zs=/[#\?]/g,zu=/[#\?@]/g,vs=/#/g;function fa(s,e){this.h=this.g=null,this.i=s||null,this.j=!!e}function Ns(s){s.g||(s.g=new Map,s.h=0,s.i&&function cu(s,e){if(s){s=s.split("&");for(var n=0;n<s.length;n++){var o=s[n].indexOf("="),u=null;if(0<=o){var l=s[n].substring(0,o);u=s[n].substring(o+1)}else l=s[n];e(l,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(s.i,function(e,n){s.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function ti(s,e){Ns(s),e=pa(s,e),s.g.has(e)&&(s.i=null,s.h-=s.g.get(e).length,s.g.delete(e))}function Di(s,e){return Ns(s),e=pa(s,e),s.g.has(e)}function ns(s,e,n){ti(s,e),0<n.length&&(s.i=null,s.g.set(pa(s,e),Ct(n)),s.h+=n.length)}function pa(s,e){return e=String(e),s.j&&(e=e.toLowerCase()),e}(Ce=fa.prototype).add=function(s,e){Ns(this),this.i=null,s=pa(this,s);var n=this.g.get(s);return n||this.g.set(s,n=[]),n.push(e),this.h+=1,this},Ce.forEach=function(s,e){Ns(this),this.g.forEach(function(n,o){n.forEach(function(u){s.call(e,u,o,this)},this)},this)},Ce.ta=function(){Ns(this);const s=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=s[o];for(let l=0;l<u.length;l++)n.push(e[o])}return n},Ce.Z=function(s){Ns(this);let e=[];if("string"==typeof s)Di(this,s)&&(e=e.concat(this.g.get(pa(this,s))));else{s=Array.from(this.g.values());for(let n=0;n<s.length;n++)e=e.concat(s[n])}return e},Ce.set=function(s,e){return Ns(this),this.i=null,Di(this,s=pa(this,s))&&(this.h-=this.g.get(s).length),this.g.set(s,[e]),this.h+=1,this},Ce.get=function(s,e){return s&&0<(s=this.Z(s)).length?String(s[0]):e},Ce.toString=function(){if(this.i)return this.i;if(!this.g)return"";const s=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const l=encodeURIComponent(String(o)),g=this.Z(o);for(o=0;o<g.length;o++){var u=l;""!==g[o]&&(u+="="+encodeURIComponent(String(g[o]))),s.push(u)}}return this.i=s.join("&")};var Os=class{constructor(s,e){this.g=s,this.map=e}};function Kn(s){this.l=s||Ui,s=Pt.PerformanceNavigationTiming?0<(s=Pt.performance.getEntriesByType("navigation")).length&&("hq"==s[0].nextHopProtocol||"h2"==s[0].nextHopProtocol):!!(Pt.g&&Pt.g.Ka&&Pt.g.Ka()&&Pt.g.Ka().dc),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ui=10;function Dc(s){return!!s.h||!!s.g&&s.g.size>=s.j}function ao(s){return s.h?1:s.g?s.g.size:0}function Bi(s,e){return s.h?s.h==e:!!s.g&&s.g.has(e)}function Go(s,e){s.g?s.g.add(e):s.h=e}function ss(s,e){s.h&&s.h==e?s.h=null:s.g&&s.g.has(e)&&s.g.delete(e)}function Si(s){if(null!=s.h)return s.i.concat(s.h.F);if(null!=s.g&&0!==s.g.size){let e=s.i;for(const n of s.g.values())e=e.concat(n.F);return e}return Ct(s.i)}Kn.prototype.cancel=function(){if(this.i=Si(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const s of this.g.values())s.cancel();this.g.clear()}};var Gu=class{stringify(s){return Pt.JSON.stringify(s,void 0)}parse(s){return Pt.JSON.parse(s,void 0)}};function ka(){this.g=new Gu}function ga(s,e,n){const o=n||"";try{ys(s,function(u,l){let g=u;Rn(u)&&(g=Xs(u)),e.push(o+l+"="+encodeURIComponent(g))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Co(s,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function qo(s){this.l=s.ec||null,this.j=s.ob||!1}function Gs(s,e){Et.call(this),this.F=s,this.u=e,this.m=void 0,this.readyState=Ws,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Te(qo,wc),qo.prototype.g=function(){return new Gs(this.l,this.j)},qo.prototype.i=function(s){return function(){return s}}({}),Te(Gs,Et);var Ws=0;function La(s){s.j.read().then(s.Xa.bind(s)).catch(s.ka.bind(s))}function ma(s){s.readyState=4,s.l=null,s.j=null,s.A=null,ds(s)}function ds(s){s.onreadystatechange&&s.onreadystatechange.call(s)}(Ce=Gs.prototype).open=function(s,e){if(this.readyState!=Ws)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=e,this.readyState=1,ds(this)},Ce.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(e.body=s),(this.F||Pt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ce.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ma(this)),this.readyState=Ws},Ce.$a=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,ds(this)),this.g&&(this.readyState=3,ds(this),this.g)))if("arraybuffer"===this.responseType)s.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Pt.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;La(this)}else s.text().then(this.Za.bind(this),this.ka.bind(this))},Ce.Xa=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var e=s.value?s.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!s.done}))&&(this.response=this.responseText+=e)}s.done?ma(this):ds(this),3==this.readyState&&La(this)}},Ce.Za=function(s){this.g&&(this.response=this.responseText=s,ma(this))},Ce.Ya=function(s){this.g&&(this.response=s,ma(this))},Ce.ka=function(){this.g&&ma(this)},Ce.setRequestHeader=function(s,e){this.v.append(s,e)},Ce.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},Ce.getAllResponseHeaders=function(){if(!this.h)return"";const s=[],e=this.h.entries();for(var n=e.next();!n.done;)s.push((n=n.value)[0]+": "+n[1]),n=e.next();return s.join("\r\n")},Object.defineProperty(Gs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var ji=Pt.JSON.parse;function jr(s){Et.call(this),this.headers=new Map,this.u=s||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=du,this.L=this.M=!1}Te(jr,Et);var du="",Fa=/^https?$/i,hu=["POST","PUT"];function fu(s,e){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=e,s.m=5,Wu(s),Ao(s)}function Wu(s){s.F||(s.F=!0,Rr(s,"complete"),Rr(s,"error"))}function Va(s){if(s.h&&typeof an<"u"&&(!s.C[1]||4!=qs(s)||2!=s.da()))if(s.v&&4==qs(s))kn(s.La,0,s);else if(Rr(s,"readystatechange"),4==qs(s)){s.h=!1;try{const g=s.da();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===g){var u=String(s.I).match(ls)[1]||null;!u&&Pt.self&&Pt.self.location&&(u=Pt.self.location.protocol.slice(0,-1)),o=!Fa.test(u?u.toLowerCase():"")}n=o}if(n)Rr(s,"complete"),Rr(s,"success");else{s.m=6;try{var l=2<qs(s)?s.g.statusText:""}catch{l=""}s.j=l+" ["+s.da()+"]",Wu(s)}}finally{Ao(s)}}}function Ao(s,e){if(s.g){qu(s);const n=s.g,o=s.C[0]?()=>{}:null;s.g=null,s.C=null,e||Rr(s,"ready");try{n.onreadystatechange=o}catch{}}}function qu(s){s.g&&s.L&&(s.g.ontimeout=null),s.A&&(Pt.clearTimeout(s.A),s.A=null)}function qs(s){return s.g?s.g.readyState:0}function Ku(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.K){case du:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function Ua(s){let e="";return lr(s,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function Ko(s,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=Ua(n),"string"==typeof s?null!=n&&encodeURIComponent(String(n)):nr(s,e,n))}function Zo(s,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[s]||e}function Qo(s){this.Ga=0,this.j=[],this.l=new au,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Zo("failFast",!1,s),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Zo("baseRetryDelayMs",5e3,s),this.hb=Zo("retryDelaySeedMs",1e4,s),this.eb=Zo("forwardChannelMaxRetries",2,s),this.xa=Zo("forwardChannelRequestTimeoutMs",2e4,s),this.va=s&&s.xmlHttpFactory||void 0,this.Ha=s&&s.useFetchStreams||!1,this.L=void 0,this.J=s&&s.supportsCrossDomainXhr||!1,this.K="",this.i=new Kn(s&&s.concurrentRequestLimit),this.Ja=new ka,this.P=s&&s.fastHandshake||!1,this.O=s&&s.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=s&&s.bc||!1,s&&s.Ea&&this.l.Ea(),s&&s.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&s&&s.detectBufferingProxy||!1,this.qa=void 0,s&&s.longPollingTimeout&&0<s.longPollingTimeout&&(this.qa=s.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function En(s){if(Zr(s),3==s.H){var e=s.W++,n=hi(s.I);if(nr(n,"SID",s.K),nr(n,"RID",e),nr(n,"TYPE","terminate"),bo(s,n),(e=new uu(s,s.l,e)).L=2,e.v=Hs(hi(n)),n=!1,Pt.navigator&&Pt.navigator.sendBeacon)try{n=Pt.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Pt.Image&&((new Image).src=e.v,n=!0),n||(e.g=mu(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Mr(e)}Qu(s)}function $r(s){s.g&&(Ai(s),s.g.cancel(),s.g=null)}function Zr(s){$r(s),s.u&&(Pt.clearTimeout(s.u),s.u=null),Es(s),s.i.cancel(),s.m&&("number"==typeof s.m&&Pt.clearTimeout(s.m),s.m=null)}function Zi(s){if(!Dc(s.i)&&!s.m){s.m=!0;var e=s.Na;mr||Ji(),_r||(mr(),_r=!0),Ti.add(e,s),s.C=0}}function Yo(s,e){var n;n=e?e.m:s.W++;const o=hi(s.I);nr(o,"SID",s.K),nr(o,"RID",n),nr(o,"AID",s.V),bo(s,o),s.o&&s.s&&Ko(o,s.o,s.s),n=new uu(s,s.l,n,s.C+1),null===s.o&&(n.I=s.s),e&&(s.j=e.F.concat(s.j)),e=uo(s,n,1e3),n.setTimeout(Math.round(.5*s.xa)+Math.round(.5*s.xa*Math.random())),Go(s.i,n),ua(n,o,e)}function bo(s,e){s.na&&lr(s.na,function(n,o){nr(e,o,n)}),s.h&&ys({},function(n,o){nr(e,o,n)})}function uo(s,e,n){n=Math.min(s.j.length,n);var o=s.h?Ee(s.h.Va,s.h,s):null;e:{var u=s.j;let l=-1;for(;;){const g=["count="+n];-1==l?0<n?(l=u[0].g,g.push("ofs="+l)):l=0:g.push("ofs="+l);let b=!0;for(let N=0;N<n;N++){let L=u[N].g;const z=u[N].map;if(L-=l,0>L)l=Math.max(0,u[N].g-100),b=!1;else try{ga(z,g,"req"+L+"_")}catch{o&&o(z)}}if(b){o=g.join("&");break e}}}return s=s.j.splice(0,n),e.F=s,o}function pu(s){if(!s.g&&!s.u){s.ba=1;var e=s.Ma;mr||Ji(),_r||(mr(),_r=!0),Ti.add(e,s),s.A=0}}function gu(s){return!(s.g||s.u||3<=s.A||(s.ba++,s.u=$o(Ee(s.Ma,s),Xo(s,s.A)),s.A++,0))}function Ai(s){null!=s.B&&(Pt.clearTimeout(s.B),s.B=null)}function Ba(s){s.g=new uu(s,s.l,"rpc",s.ba),null===s.o&&(s.g.I=s.s),s.g.O=0;var e=hi(s.wa);nr(e,"RID","rpc"),nr(e,"SID",s.K),nr(e,"AID",s.V),nr(e,"CI",s.G?"0":"1"),!s.G&&s.qa&&nr(e,"TO",s.qa),nr(e,"TYPE","xmlhttp"),bo(s,e),s.o&&s.s&&Ko(e,s.o,s.s),s.L&&s.g.setTimeout(s.L);var n=s.g;s=s.pa,n.L=1,n.v=Hs(hi(e)),n.s=null,n.S=!0,zo(n,s)}function Es(s){null!=s.v&&(Pt.clearTimeout(s.v),s.v=null)}function Zu(s,e){var n=null;if(s.g==e){Es(s),Ai(s),s.g=null;var o=2}else{if(!Bi(s.i,e))return;n=e.F,ss(s.i,e),o=1}if(0!=s.H)if(e.i)if(1==o){n=e.s?e.s.length:0,e=Date.now()-e.G;var u=s.C;Rr(o=to(),new jn(o,n)),Zi(s)}else pu(s);else if(3==(u=e.o)||0==u&&0<e.ca||!(1==o&&function Ci(s,e){return!(ao(s.i)>=s.i.j-(s.m?1:0)||(s.m?(s.j=e.F.concat(s.j),0):1==s.H||2==s.H||s.C>=(s.cb?0:s.eb)||(s.m=$o(Ee(s.Na,s,e),Xo(s,s.C)),s.C++,0)))}(s,e)||2==o&&gu(s)))switch(n&&0<n.length&&(e=s.i,e.i=e.i.concat(n)),u){case 1:ja(s,5);break;case 4:ja(s,10);break;case 3:ja(s,6);break;default:ja(s,2)}}function Xo(s,e){let n=s.ab+Math.floor(Math.random()*s.hb);return s.isActive()||(n*=2),n*e}function ja(s,e){if(s.l.info("Error code "+e),2==e){var n=null;s.h&&(n=null);var o=Ee(s.pb,s);n||(n=new io("//www.google.com/images/cleardot.gif"),Pt.location&&"http"==Pt.location.protocol||so(n,"https"),Hs(n)),function Wo(s,e){const n=new au;if(Pt.Image){const o=new Image;o.onload=Fe(Co,n,o,"TestLoadImage: loaded",!0,e),o.onerror=Fe(Co,n,o,"TestLoadImage: error",!1,e),o.onabort=Fe(Co,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=Fe(Co,n,o,"TestLoadImage: timeout",!1,e),Pt.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=s}else e(!1)}(n.toString(),o)}else $t(2);s.H=0,s.h&&s.h.za(e),Qu(s),Zr(s)}function Qu(s){if(s.H=0,s.ma=[],s.h){const e=Si(s.i);(0!=e.length||0!=s.j.length)&&(tn(s.ma,e),tn(s.ma,s.j),s.i.i.length=0,Ct(s.j),s.j.length=0),s.h.ya()}}function Yu(s,e,n){var o=n instanceof io?hi(n):new io(n);if(""!=o.g)e&&(o.g=e+"."+o.g),oo(o,o.m);else{var u=Pt.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var l=new io(null);o&&so(l,o),e&&(l.g=e),u&&oo(l,u),n&&(l.l=n),o=l}return e=s.Da,(n=s.F)&&e&&nr(o,n,e),nr(o,"VER",s.ra),bo(s,o),o}function mu(s,e,n){if(e&&!s.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new jr(n&&s.Ha&&!s.va?new qo({ob:!0}):s.va)).Oa(s.J),e}function $a(){}function Jo(){if(Wn&&!(10<=Number(Cr)))throw Error("Environmental error: no available transport.")}function ni(s,e){Et.call(this),this.g=new Qo(e),this.l=s,this.h=e&&e.messageUrlParams||null,s=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(s?s["X-WebChannel-Content-Type"]=e.messageContentType:s={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(s?s["X-WebChannel-Client-Profile"]=e.Ca:s={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=s,(s=e&&e.cc)&&!zn(s)&&(this.g.o=s),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zn(e)&&(this.g.F=e,null!==(s=this.h)&&e in s&&e in(s=this.h)&&delete s[e]),this.j=new Ks(this)}function _u(s){_i.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var e=s.__sm__;if(e){e:{for(const n in e){s=n;break e}s=void 0}(this.i=s)&&(s=this.i,e=null!==e&&s in e?e[s]:void 0),this.data=e}else this.data=s}function yu(){no.call(this),this.status=1}function Ks(s){this.g=s}function os(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ha(s,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)o[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)o[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var l=s.g[3],g=(e=s.g[0])+(l^(n=s.g[1])&((u=s.g[2])^l))+o[0]+3614090360&4294967295;g=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=n+(g<<7&4294967295|g>>>25))+((g=l+(u^e&(n^u))+o[1]+3905402710&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^l&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(l^e))+o[3]+3250441966&4294967295)<<22&4294967295|g>>>10))+((g=e+(l^n&(u^l))+o[4]+4118548399&4294967295)<<7&4294967295|g>>>25))+((g=l+(u^e&(n^u))+o[5]+1200080426&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^l&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(l^e))+o[7]+4249261313&4294967295)<<22&4294967295|g>>>10))+((g=e+(l^n&(u^l))+o[8]+1770035416&4294967295)<<7&4294967295|g>>>25))+((g=l+(u^e&(n^u))+o[9]+2336552879&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^l&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(l^e))+o[11]+2304563134&4294967295)<<22&4294967295|g>>>10))+((g=e+(l^n&(u^l))+o[12]+1804603682&4294967295)<<7&4294967295|g>>>25))+((g=l+(u^e&(n^u))+o[13]+4254626195&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^l&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(l^e))+o[15]+1236535329&4294967295)<<22&4294967295|g>>>10))+((g=e+(u^l&(n^u))+o[1]+4129170786&4294967295)<<5&4294967295|g>>>27))+((g=l+(n^u&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(l^e))+o[11]+643717713&4294967295)<<14&4294967295|g>>>18))+((g=n+(l^e&(u^l))+o[0]+3921069994&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^l&(n^u))+o[5]+3593408605&4294967295)<<5&4294967295|g>>>27))+((g=l+(n^u&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(l^e))+o[15]+3634488961&4294967295)<<14&4294967295|g>>>18))+((g=n+(l^e&(u^l))+o[4]+3889429448&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^l&(n^u))+o[9]+568446438&4294967295)<<5&4294967295|g>>>27))+((g=l+(n^u&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(l^e))+o[3]+4107603335&4294967295)<<14&4294967295|g>>>18))+((g=n+(l^e&(u^l))+o[8]+1163531501&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^l&(n^u))+o[13]+2850285829&4294967295)<<5&4294967295|g>>>27))+((g=l+(n^u&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(l^e))+o[7]+1735328473&4294967295)<<14&4294967295|g>>>18))+((g=n+(l^e&(u^l))+o[12]+2368359562&4294967295)<<20&4294967295|g>>>12))+((g=e+(n^u^l)+o[5]+4294588738&4294967295)<<4&4294967295|g>>>28))+((g=l+(e^n^u)+o[8]+2272392833&4294967295)<<11&4294967295|g>>>21))+((g=u+(l^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^l^e)+o[14]+4259657740&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^l)+o[1]+2763975236&4294967295)<<4&4294967295|g>>>28))+((g=l+(e^n^u)+o[4]+1272893353&4294967295)<<11&4294967295|g>>>21))+((g=u+(l^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^l^e)+o[10]+3200236656&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^l)+o[13]+681279174&4294967295)<<4&4294967295|g>>>28))+((g=l+(e^n^u)+o[0]+3936430074&4294967295)<<11&4294967295|g>>>21))+((g=u+(l^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^l^e)+o[6]+76029189&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^l)+o[9]+3654602809&4294967295)<<4&4294967295|g>>>28))+((g=l+(e^n^u)+o[12]+3873151461&4294967295)<<11&4294967295|g>>>21))+((g=u+(l^e^n)+o[15]+530742520&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^l^e)+o[2]+3299628645&4294967295)<<23&4294967295|g>>>9))+((g=e+(u^(n|~l))+o[0]+4096336452&4294967295)<<6&4294967295|g>>>26))+((g=l+(n^(e|~u))+o[7]+1126891415&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(l|~n))+o[14]+2878612391&4294967295)<<15&4294967295|g>>>17))+((g=n+(l^(u|~e))+o[5]+4237533241&4294967295)<<21&4294967295|g>>>11))+((g=e+(u^(n|~l))+o[12]+1700485571&4294967295)<<6&4294967295|g>>>26))+((g=l+(n^(e|~u))+o[3]+2399980690&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(l|~n))+o[10]+4293915773&4294967295)<<15&4294967295|g>>>17))+((g=n+(l^(u|~e))+o[1]+2240044497&4294967295)<<21&4294967295|g>>>11))+((g=e+(u^(n|~l))+o[8]+1873313359&4294967295)<<6&4294967295|g>>>26))+((g=l+(n^(e|~u))+o[15]+4264355552&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(l|~n))+o[6]+2734768916&4294967295)<<15&4294967295|g>>>17))+((g=n+(l^(u|~e))+o[13]+1309151649&4294967295)<<21&4294967295|g>>>11))+((l=(e=n+((g=e+(u^(n|~l))+o[4]+4149444226&4294967295)<<6&4294967295|g>>>26))+((g=l+(n^(e|~u))+o[11]+3174756917&4294967295)<<10&4294967295|g>>>22))^((u=l+((g=u+(e^(l|~n))+o[2]+718787259&4294967295)<<15&4294967295|g>>>17))|~e))+o[9]+3951481745&4294967295,s.g[0]=s.g[0]+e&4294967295,s.g[1]=s.g[1]+(u+(g<<21&4294967295|g>>>11))&4294967295,s.g[2]=s.g[2]+u&4294967295,s.g[3]=s.g[3]+l&4294967295}function Sn(s,e){this.h=e;for(var n=[],o=!0,u=s.length-1;0<=u;u--){var l=0|s[u];o&&l==e||(n[u]=l,o=!1)}this.g=n}(Ce=jr.prototype).Oa=function(s){this.M=s},Ce.ha=function(s,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+s);e=e?e.toUpperCase():"GET",this.I=s,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ki.g(),this.C=function Ho(s){return s.h||(s.h=s.i())}(this.u?this.u:Ki),this.g.onreadystatechange=Ee(this.La,this);try{this.G=!0,this.g.open(e,String(s),!0),this.G=!1}catch(l){return void fu(this,l)}if(s=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const l of o.keys())n.set(l,o.get(l))}o=Array.from(n.keys()).find(l=>"content-type"==l.toLowerCase()),u=Pt.FormData&&s instanceof Pt.FormData,!(0<=cn(hu,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,g]of n)this.g.setRequestHeader(l,g);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{qu(this),0<this.B&&((this.L=function ur(s){return Wn&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ee(this.ua,this)):this.A=kn(this.ua,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(l){fu(this,l)}},Ce.ua=function(){typeof an<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Rr(this,"timeout"),this.abort(8))},Ce.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,Rr(this,"complete"),Rr(this,"abort"),Ao(this))},Ce.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ao(this,!0)),jr.$.N.call(this)},Ce.La=function(){this.s||(this.G||this.v||this.l?Va(this):this.kb())},Ce.kb=function(){Va(this)},Ce.isActive=function(){return!!this.g},Ce.da=function(){try{return 2<qs(this)?this.g.status:-1}catch{return-1}},Ce.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ce.Wa=function(s){if(this.g){var e=this.g.responseText;return s&&0==e.indexOf(s)&&(e=e.substring(s.length)),ji(e)}},Ce.Ia=function(){return this.m},Ce.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ce=Qo.prototype).ra=8,Ce.H=1,Ce.Na=function(s){if(this.m)if(this.m=null,1==this.H){if(!s){this.W=Math.floor(1e5*Math.random()),s=this.W++;const u=new uu(this,this.l,s);let l=this.s;if(this.U&&(l?(l=Fn(l),Jr(l,this.U)):l=this.U),null!==this.o||this.O||(u.I=l,l=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=uo(this,u,e),nr(n=hi(this.I),"RID",s),nr(n,"CVER",22),this.F&&nr(n,"X-HTTP-Session-Id",this.F),bo(this,n),l&&(this.O?e="headers="+encodeURIComponent(String(Ua(l)))+"&"+e:this.o&&Ko(n,this.o,l)),Go(this.i,u),this.bb&&nr(n,"TYPE","init"),this.P?(nr(n,"$req",e),nr(n,"SID","null"),u.aa=!0,ua(u,n,null)):ua(u,n,e),this.H=2}}else 3==this.H&&(s?Yo(this,s):0==this.j.length||Dc(this.i)||Yo(this))},Ce.Ma=function(){if(this.u=null,Ba(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var s=2*this.S;this.l.info("BP detection timer enabled: "+s),this.B=$o(Ee(this.jb,this),s)}},Ce.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,$t(10),$r(this),Ba(this))},Ce.ib=function(){null!=this.v&&(this.v=null,$r(this),gu(this),$t(19))},Ce.pb=function(s){s?(this.l.info("Successfully pinged google.com"),$t(2)):(this.l.info("Failed to ping google.com"),$t(1))},Ce.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ce=$a.prototype).Ba=function(){},Ce.Aa=function(){},Ce.za=function(){},Ce.ya=function(){},Ce.isActive=function(){return!0},Ce.Va=function(){},Jo.prototype.g=function(s,e){return new ni(s,e)},Te(ni,Et),ni.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var s=this.g,e=this.l,n=this.h||void 0;$t(0),s.Y=e,s.na=n||{},s.G=s.aa,s.I=Yu(s,null,s.Y),Zi(s)},ni.prototype.close=function(){En(this.g)},ni.prototype.u=function(s){var e=this.g;if("string"==typeof s){var n={};n.__data__=s,s=n}else this.v&&((n={}).__data__=Xs(s),s=n);e.j.push(new Os(e.fb++,s)),3==e.H&&Zi(e)},ni.prototype.N=function(){this.g.h=null,delete this.j,En(this.g),delete this.g,ni.$.N.call(this)},Te(_u,_i),Te(yu,no),Te(Ks,$a),Ks.prototype.Ba=function(){Rr(this.g,"a")},Ks.prototype.Aa=function(s){Rr(this.g,new _u(s))},Ks.prototype.za=function(s){Rr(this.g,new yu)},Ks.prototype.ya=function(){Rr(this.g,"b")},Te(os,function el(){this.blockSize=-1}),os.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},os.prototype.j=function(s,e){void 0===e&&(e=s.length);for(var n=e-this.blockSize,o=this.m,u=this.h,l=0;l<e;){if(0==u)for(;l<=n;)Ha(this,s,l),l+=this.blockSize;if("string"==typeof s){for(;l<e;)if(o[u++]=s.charCodeAt(l++),u==this.blockSize){Ha(this,o),u=0;break}}else for(;l<e;)if(o[u++]=s[l++],u==this.blockSize){Ha(this,o),u=0;break}}this.h=u,this.i+=e},os.prototype.l=function(){var s=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);s[0]=128;for(var e=1;e<s.length-8;++e)s[e]=0;var n=8*this.i;for(e=s.length-8;e<s.length;++e)s[e]=255&n,n/=256;for(this.j(s),s=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)s[n++]=this.g[e]>>>o&255;return s};var vu={};function co(s){return-128<=s&&128>s?function Gn(s,e){var n=vu;return Object.prototype.hasOwnProperty.call(n,s)?n[s]:n[s]=e(s)}(s,function(e){return new Sn([0|e],0>e?-1:0)}):new Sn([0|s],0>s?-1:0)}function lo(s){if(isNaN(s)||!isFinite(s))return jt;if(0>s)return Or(lo(-s));for(var e=[],n=1,o=0;s>=n;o++)e[o]=s/n|0,n*=_a;return new Sn(e,0)}var _a=4294967296,jt=co(0),Sc=co(1),Eu=co(16777216);function Ro(s){if(0!=s.h)return!1;for(var e=0;e<s.g.length;e++)if(0!=s.g[e])return!1;return!0}function fi(s){return-1==s.h}function Or(s){for(var e=s.g.length,n=[],o=0;o<e;o++)n[o]=~s.g[o];return new Sn(n,~s.h).add(Sc)}function Iu(s,e){return s.add(Or(e))}function xs(s,e){for(;(65535&s[e])!=s[e];)s[e+1]+=s[e]>>>16,s[e]&=65535,e++}function A(s,e){this.g=s,this.h=e}function $(s,e){if(Ro(e))throw Error("division by zero");if(Ro(s))return new A(jt,jt);if(fi(s))return e=$(Or(s),e),new A(Or(e.g),Or(e.h));if(fi(e))return e=$(s,Or(e)),new A(Or(e.g),e.h);if(30<s.g.length){if(fi(s)||fi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Sc,o=e;0>=o.X(s);)n=O(n),o=O(o);var u=V(n,1),l=V(o,1);for(o=V(o,2),n=V(n,2);!Ro(o);){var g=l.add(o);0>=g.X(s)&&(u=u.add(n),l=g),o=V(o,1),n=V(n,1)}return e=Iu(s,u.R(e)),new A(u,e)}for(u=jt;0<=s.X(e);){for(n=Math.max(1,Math.floor(s.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),g=(l=lo(n)).R(e);fi(g)||0<g.X(s);)g=(l=lo(n-=o)).R(e);Ro(l)&&(l=Sc),u=u.add(l),s=Iu(s,g)}return new A(u,s)}function O(s){for(var e=s.g.length+1,n=[],o=0;o<e;o++)n[o]=s.D(o)<<1|s.D(o-1)>>>31;return new Sn(n,s.h)}function V(s,e){var n=e>>5;e%=32;for(var o=s.g.length-n,u=[],l=0;l<o;l++)u[l]=0<e?s.D(l+n)>>>e|s.D(l+n+1)<<32-e:s.D(l+n);return new Sn(u,s.h)}(Ce=Sn.prototype).ea=function(){if(fi(this))return-Or(this).ea();for(var s=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);s+=(0<=o?o:_a+o)*e,e*=_a}return s},Ce.toString=function(s){if(2>(s=s||10)||36<s)throw Error("radix out of range: "+s);if(Ro(this))return"0";if(fi(this))return"-"+Or(this).toString(s);for(var e=lo(Math.pow(s,6)),n=this,o="";;){var u=$(n,e).g,l=((0<(n=Iu(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(s);if(Ro(n=u))return l+o;for(;6>l.length;)l="0"+l;o=l+o}},Ce.D=function(s){return 0>s?0:s<this.g.length?this.g[s]:this.h},Ce.X=function(s){return fi(s=Iu(this,s))?-1:Ro(s)?0:1},Ce.abs=function(){return fi(this)?Or(this):this},Ce.add=function(s){for(var e=Math.max(this.g.length,s.g.length),n=[],o=0,u=0;u<=e;u++){var l=o+(65535&this.D(u))+(65535&s.D(u)),g=(l>>>16)+(this.D(u)>>>16)+(s.D(u)>>>16);o=g>>>16,n[u]=(g&=65535)<<16|(l&=65535)}return new Sn(n,-2147483648&n[n.length-1]?-1:0)},Ce.R=function(s){if(Ro(this)||Ro(s))return jt;if(fi(this))return fi(s)?Or(this).R(Or(s)):Or(Or(this).R(s));if(fi(s))return Or(this.R(Or(s)));if(0>this.X(Eu)&&0>s.X(Eu))return lo(this.ea()*s.ea());for(var e=this.g.length+s.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var u=0;u<s.g.length;u++){var l=this.D(o)>>>16,g=65535&this.D(o),b=s.D(u)>>>16,N=65535&s.D(u);n[2*o+2*u]+=g*N,xs(n,2*o+2*u),n[2*o+2*u+1]+=l*N,xs(n,2*o+2*u+1),n[2*o+2*u+1]+=g*b,xs(n,2*o+2*u+1),n[2*o+2*u+2]+=l*b,xs(n,2*o+2*u+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new Sn(n,0)},Ce.gb=function(s){return $(this,s).h},Ce.and=function(s){for(var e=Math.max(this.g.length,s.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&s.D(o);return new Sn(n,this.h&s.h)},Ce.or=function(s){for(var e=Math.max(this.g.length,s.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|s.D(o);return new Sn(n,this.h|s.h)},Ce.xor=function(s){for(var e=Math.max(this.g.length,s.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^s.D(o);return new Sn(n,this.h^s.h)},Jo.prototype.createWebChannel=Jo.prototype.g,ni.prototype.send=ni.prototype.u,ni.prototype.open=ni.prototype.m,ni.prototype.close=ni.prototype.close,Br.NO_ERROR=0,Br.TIMEOUT=8,Br.HTTP_ERROR=6,Ma.COMPLETE="complete",aa.EventType=Dn,Dn.OPEN="a",Dn.CLOSE="b",Dn.ERROR="c",Dn.MESSAGE="d",Et.prototype.listen=Et.prototype.O,jr.prototype.listenOnce=jr.prototype.P,jr.prototype.getLastError=jr.prototype.Sa,jr.prototype.getLastErrorCode=jr.prototype.Ia,jr.prototype.getStatus=jr.prototype.da,jr.prototype.getResponseJson=jr.prototype.Wa,jr.prototype.getResponseText=jr.prototype.ja,jr.prototype.send=jr.prototype.ha,jr.prototype.setWithCredentials=jr.prototype.Oa,os.prototype.digest=os.prototype.l,os.prototype.reset=os.prototype.reset,os.prototype.update=os.prototype.j,Sn.prototype.add=Sn.prototype.add,Sn.prototype.multiply=Sn.prototype.R,Sn.prototype.modulo=Sn.prototype.gb,Sn.prototype.compare=Sn.prototype.X,Sn.prototype.toNumber=Sn.prototype.ea,Sn.prototype.toString=Sn.prototype.toString,Sn.prototype.getBits=Sn.prototype.D,Sn.fromNumber=lo,Sn.fromString=function Xu(s,e){if(0==s.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==s.charAt(0))return Or(Xu(s.substring(1),e));if(0<=s.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=lo(Math.pow(e,8)),o=jt,u=0;u<s.length;u+=8){var l=Math.min(8,s.length-u),g=parseInt(s.substring(u,u+l),e);8>l?(l=lo(Math.pow(e,l)),o=o.R(l).add(lo(g))):o=(o=o.R(n)).add(lo(g))}return o};var ee=ye.createWebChannelTransport=function(){return new Jo},He=ye.getStatEventTarget=function(){return to()},nt=ye.ErrorCode=Br,Vt=ye.EventType=Ma,Ar=ye.Event=pn,Er=ye.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},br=ye.FetchXmlHttpFactory=qo,Tn=ye.WebChannel=aa,ui=ye.XhrIo=jr,dr=ye.Md5=os,xr=ye.Integer=Sn;const Zn="@firebase/firestore";class Ye{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ye.UNAUTHENTICATED=new Ye(null),Ye.GOOGLE_CREDENTIALS=new Ye("google-credentials-uid"),Ye.FIRST_PARTY=new Ye("first-party-uid"),Ye.MOCK_USER=new Ye("mock-user");let Ut="10.5.2";const Ln=new Ze.Yd("@firebase/firestore");function Qr(){return Ln.logLevel}function Xe(s,...e){if(Ln.logLevel<=Ze.in.DEBUG){const n=e.map(ri);Ln.debug(`Firestore (${Ut}): ${s}`,...n)}}function yr(s,...e){if(Ln.logLevel<=Ze.in.ERROR){const n=e.map(ri);Ln.error(`Firestore (${Ut}): ${s}`,...n)}}function _n(s,...e){if(Ln.logLevel<=Ze.in.WARN){const n=e.map(ri);Ln.warn(`Firestore (${Ut}): ${s}`,...n)}}function ri(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch{return s}}function wt(s="Unexpected state"){const e=`FIRESTORE (${Ut}) INTERNAL ASSERTION FAILED: `+s;throw yr(e),new Error(e)}function st(s,e){s||wt()}function Tt(s,e){return s}const je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ke extends ot.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ir{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class za{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class as{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ye.UNAUTHENTICATED))}shutdown(){}}class Ga{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ho{constructor(e){this.t=e,this.currentUser=Ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const l=L=>this.i!==u?(u=this.i,n(L)):Promise.resolve();let g=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Ir,e.enqueueRetryable(()=>l(this.currentUser))};const b=()=>{const L=g;e.enqueueRetryable((0,ne.Z)(function*(){yield L.promise,yield l(o.currentUser)}))},N=L=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=L,this.auth.addAuthTokenListener(this.o),b()};this.t.onInit(L=>N(L)),setTimeout(()=>{if(!this.auth){const L=this.t.getImmediate({optional:!0});L?N(L):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Ir)}},0),b()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(st("string"==typeof o.accessToken),new za(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return st(null===e||"string"==typeof e),new Ye(e)}}class Ei{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=Ye.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Is{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new Ei(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zs{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class In{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const o=l=>{null!=l.error&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const g=l.token!==this.R;return this.R=l.token,Xe("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>o(l))};const u=l=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>u(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?u(l):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(st("string"==typeof n.token),this.R=n.token,new Zs(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Po(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<s;o++)n[o]=Math.floor(256*Math.random());return n}class hs{static newId(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=Po(40);for(let l=0;l<u.length;++l)o.length<20&&u[l]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[l]%62))}return o}}function fn(s,e){return s<e?-1:s>e?1:0}function ws(s,e,n){return s.length===e.length&&s.every((o,u)=>n(o,e[u]))}function pi(s){return s+"\0"}class kr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ke(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ke(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ke(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ke(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kr.fromMillis(Date.now())}static fromDate(e){return kr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new kr(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fn(this.nanoseconds,e.nanoseconds):fn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new kr(0,0))}static max(){return new Nt(new kr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ri{constructor(e,n,o){void 0===n?n=0:n>e.length&&wt(),void 0===o?o=e.length-n:o>e.length-n&&wt(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===Ri.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ri?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const l=e.get(u),g=n.get(u);if(l<g)return-1;if(l>g)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Vn extends Ri{construct(e,n,o){return new Vn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new Ke(je.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new Vn(n)}static emptyPath(){return new Vn([])}}const ea=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends Ri{construct(e,n,o){return new rr(e,n,o)}static isValidIdentifier(e){return ea.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rr(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const l=()=>{if(0===o.length)throw new Ke(je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let g=!1;for(;u<e.length;){const b=e[u];if("\\"===b){if(u+1===e.length)throw new Ke(je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const N=e[u+1];if("\\"!==N&&"."!==N&&"`"!==N)throw new Ke(je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=N,u+=2}else"`"===b?(g=!g,u++):"."!==b||g?(o+=b,u++):(l(),u++)}if(l(),g)throw new Ke(je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(n)}static emptyPath(){return new rr([])}}class dt{constructor(e){this.path=e}static fromPath(e){return new dt(Vn.fromString(e))}static fromName(e){return new dt(Vn.fromString(e).popFirst(5))}static empty(){return new dt(Vn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Vn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Vn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dt(new Vn(e.slice()))}}class Wa{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function Ju(s){return s.fields.find(e=>2===e.kind)}function qa(s){return s.fields.filter(e=>2!==e.kind)}Wa.UNKNOWN_ID=-1;class Mo{constructor(e,n){this.fieldPath=e,this.kind=n}}class fo{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new fo(0,Qi.min())}}function cd(s,e){const n=s.toTimestamp().seconds,o=s.toTimestamp().nanoseconds+1,u=Nt.fromTimestamp(1e9===o?new kr(n+1,0):new kr(n,o));return new Qi(u,dt.empty(),e)}function Al(s){return new Qi(s.readTime,s.key,-1)}class Qi{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new Qi(Nt.min(),dt.empty(),-1)}static max(){return new Qi(Nt.max(),dt.empty(),-1)}}function va(s,e){let n=s.readTime.compareTo(e.readTime);return 0!==n?n:(n=dt.comparator(s.documentKey,e.documentKey),0!==n?n:fn(s.largestBatchId,e.largestBatchId))}const tc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Tu(s){return bl.apply(this,arguments)}function bl(){return bl=(0,ne.Z)(function*(s){if(s.code!==je.FAILED_PRECONDITION||s.message!==tc)throw s;Xe("LocalStore","Unexpectedly lost primary lease")}),bl.apply(this,arguments)}class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new be((o,u)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,u)},this.catchCallback=l=>{this.wrapFailure(n,l).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof be?n:be.resolve(n)}catch(n){return be.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):be.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):be.reject(n)}static resolve(e){return new be((n,o)=>{n(e)})}static reject(e){return new be((n,o)=>{o(e)})}static waitFor(e){return new be((n,o)=>{let u=0,l=0,g=!1;e.forEach(b=>{++u,b.next(()=>{++l,g&&l===u&&n()},N=>o(N))}),g=!0,l===u&&n()})}static or(e){let n=be.resolve(!1);for(const o of e)n=n.next(u=>u?be.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,l)=>{o.push(n.call(this,u,l))}),this.waitFor(o)}static mapArray(e,n){return new be((o,u)=>{const l=e.length,g=new Array(l);let b=0;for(let N=0;N<l;N++){const L=N;n(e[L]).next(z=>{g[L]=z,++b,b===l&&o(g)},z=>u(z))}})}static doWhile(e,n){return new be((o,u)=>{const l=()=>{!0===e()?n().next(()=>{l()},u):o()};l()})}}class po{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ir,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new w(e,n.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=q(o.target.error);this.V.reject(new w(e,u))}}static open(e,n,o,u){try{return new po(n,e.transaction(u,o))}catch(l){throw new w(n,l)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Xe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new S(n)}}class ks{constructor(e,n,o){this.name=e,this.version=n,this.p=o,12.2===ks.S((0,ot.z$)())&&yr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Xe("SimpleDb","Removing database:",e),M(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ot.hl)())return!1;if(ks.C())return!0;const e=(0,ot.z$)(),n=ks.S(e),o=0<n&&n<10,u=ks.v(e),l=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||l)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var n=this;return(0,ne.Z)(function*(){return n.db||(Xe("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const l=indexedDB.open(n.name,n.version);l.onsuccess=g=>{o(g.target.result)},l.onblocked=()=>{u(new w(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=g=>{const b=g.target.error;u("VersionError"===b.name?new Ke(je.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===b.name?new Ke(je.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+b):new w(e,b))},l.onupgradeneeded=g=>{Xe("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',g.oldVersion),n.p.N(g.target.result,l.transaction,g.oldVersion,n.version).next(()=>{Xe("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=o=>n.B(o)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var l=this;return(0,ne.Z)(function*(){const g="readonly"===n;let b=0;for(;;){++b;try{l.db=yield l.O(e);const N=po.open(l.db,e,g?"readonly":"readwrite",o),L=u(N).next(z=>(N.g(),z)).catch(z=>(N.abort(z),be.reject(z))).toPromise();return L.catch(()=>{}),yield N.m,L}catch(N){const L=N,z="FirebaseError"!==L.name&&b<3;if(Xe("SimpleDb","Transaction failed with error:",L.message,"Retrying:",z),l.close(),!z)return Promise.reject(L)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Oh{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return M(this.k.delete())}}class w extends Ke{constructor(e,n){super(je.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function R(s){return"IndexedDbTransactionError"===s.name}class S{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(Xe("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(Xe("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),M(o)}add(e){return Xe("SimpleDb","ADD",this.store.name,e,e),M(this.store.add(e))}get(e){return M(this.store.get(e)).next(n=>(void 0===n&&(n=null),Xe("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Xe("SimpleDb","DELETE",this.store.name,e),M(this.store.delete(e))}count(){return Xe("SimpleDb","COUNT",this.store.name),M(this.store.count())}W(e,n){const o=this.options(e,n);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),l=[];return this.G(u,(g,b)=>{l.push(b)}).next(()=>l)}{const u=this.store.getAll(o.range);return new be((l,g)=>{u.onerror=b=>{g(b.target.error)},u.onsuccess=b=>{l(b.target.result)}})}}j(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new be((u,l)=>{o.onerror=g=>{l(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}H(e,n){Xe("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.J=!1;const u=this.cursor(o);return this.G(u,(l,g,b)=>b.delete())}Y(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.G(u,n)}Z(e){const n=this.cursor({});return new be((o,u)=>{n.onerror=l=>{const g=q(l.target.error);u(g)},n.onsuccess=l=>{const g=l.target.result;g?e(g.primaryKey,g.value).next(b=>{b?g.continue():o()}):o()}})}G(e,n){const o=[];return new be((u,l)=>{e.onerror=g=>{l(g.target.error)},e.onsuccess=g=>{const b=g.target.result;if(!b)return void u();const N=new Oh(b),L=n(b.primaryKey,b.value,N);if(L instanceof be){const z=L.catch(X=>(N.done(),be.reject(X)));o.push(z)}N.isDone?u():null===N.$?b.continue():b.continue(N.$)}}).next(()=>be.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function M(s){return new be((e,n)=>{s.onsuccess=o=>{e(o.target.result)},s.onerror=o=>{const u=q(o.target.error);n(u)}})}let F=!1;function q(s){const e=ks.S((0,ot.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(n)>=0){const o=new Ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return F||(F=!0,setTimeout(()=>{throw o},0)),o}}return s}class oe{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;Xe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ne.Z)(function*(){n.task=null;try{Xe("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(o){R(o)?Xe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield Tu(o)}yield n.ee(6e4)}))}}class ze{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,ne.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.ne(o,e))})()}ne(e,n){const o=new Set;let u=n,l=!0;return be.doWhile(()=>!0===l&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!o.has(g))return Xe("IndexBackiller",`Processing collection: ${g}`),this.re(e,g,u).next(b=>{u-=b,o.add(g)});l=!1})).next(()=>n-u)}re(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(l=>{const g=l.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.ie(u,l)).next(b=>(Xe("IndexBackiller",`Updating offset: ${b}`),this.localStore.indexManager.updateCollectionGroup(e,n,b))).next(()=>g.size)}))}ie(e,n){let o=e;return n.changes.forEach((u,l)=>{const g=Al(l);va(g,o)>0&&(o=g)}),new Qi(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let we=(()=>{class s{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=u=>this.se(u),this.oe=u=>o.writeSequenceNumber(u))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return s._e=-1,s})();function It(s){return null==s}function vn(s){return 0===s&&1/s==-1/0}function Cn(s){return"number"==typeof s&&Number.isInteger(s)&&!vn(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}function Qn(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=nc(e)),e=Ka(s.get(n),e);return nc(e)}function Ka(s,e){let n=e;const o=s.length;for(let u=0;u<o;u++){const l=s.charAt(u);switch(l){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=l}}return n}function nc(s){return s+"\x01\x01"}function rs(s){const e=s.length;if(st(e>=2),2===e)return st("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),Vn.emptyPath();const n=e-2,o=[];let u="";for(let l=0;l<e;){const g=s.indexOf("\x01",l);switch((g<0||g>n)&&wt(),s.charAt(g+1)){case"\x01":const b=s.substring(l,g);let N;0===u.length?N=b:(u+=b,N=u,u=""),o.push(N);break;case"\x10":u+=s.substring(l,g),u+="\0";break;case"\x11":u+=s.substring(l,g+1);break;default:wt()}l=g+2}return new Vn(o)}const tl=["userId","batchId"];function Pi(s,e){return[s,Qn(e)]}function Za(s,e,n){return[s,Qn(e),n]}const Rl={},Gd=["prefixPath","collectionGroup","readTime","documentId"],ld=["prefixPath","collectionGroup","documentId"],rc=["collectionGroup","readTime","prefixPath","documentId"],Yn=["canonicalId","targetId"],Cc=["targetId","path"],Ac=["path","targetId"],Ls=["collectionId","parent"],dd=["indexId","uid"],Du=["uid","sequenceNumber"],ic=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],go=["indexId","uid","orderedDocumentKey"],xh=["userId","collectionPath","documentId"],nl=["userId","collectionPath","largestBatchId"],kh=["userId","collectionGroup","largestBatchId"],mo=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Su=[...mo,"documentOverlays"],bc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sc=bc,Rc=[...sc,"indexConfiguration","indexState","indexEntries"];class Qa extends zd{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Mi(s,e){const n=Tt(s);return ks.M(n.ae,e)}function rl(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function No(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Ea(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Ot{constructor(e,n){this.comparator=e,this.root=n||$i.EMPTY}insert(e,n){return new Ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$i.BLACK,null,null))}remove(e){return new Ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$i.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new il(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new il(this.root,e,this.comparator,!1)}getReverseIterator(){return new il(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new il(this.root,e,this.comparator,!0)}}class il{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?o(e.key,n):1,n&&u&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $i{constructor(e,n,o,u,l){this.key=e,this.value=n,this.color=o??$i.RED,this.left=u??$i.EMPTY,this.right=l??$i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,l){return new $i(e??this.key,n??this.value,o??this.color,u??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const l=o(e,u.key);return u=l<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===l?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return $i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return $i.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wt();const e=this.left.check();if(e!==this.right.check())throw wt();return e+(this.isRed()?0:1)}}$i.EMPTY=null,$i.RED=!0,$i.BLACK=!1,$i.EMPTY=new class{constructor(){this.size=0}get key(){throw wt()}get value(){throw wt()}get color(){throw wt()}get left(){throw wt()}get right(){throw wt()}copy(e,n,o,u,l){return this}insert(e,n,o){return new $i(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wr{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Pc(this.data.getIterator())}getIteratorFrom(e){return new Pc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof wr)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,l=o.getNext().key;if(0!==this.comparator(u,l))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new wr(this.comparator);return n.data=e,n}}class Pc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mc(s){return s.hasNext()?s.getNext():void 0}class Ts{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new Ts([])}unionWith(e){let n=new wr(rr.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Ts(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ws(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class Ya extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Ya("Invalid base64 string: "+l):l}}(e);return new Hi(n)}static fromUint8Array(e){const n=function(u){let l="";for(let g=0;g<u.length;++g)l+=String.fromCharCode(u[g]);return l}(e);return new Hi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hi.EMPTY_BYTE_STRING=new Hi("");const Pl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oc(s){if(st(!!s),"string"==typeof s){let e=0;const n=Pl.exec(s);if(st(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(s);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Ni(s.seconds),nanos:Ni(s.nanos)}}function Ni(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function We(s){return"string"==typeof s?Hi.fromBase64String(s):Hi.fromUint8Array(s)}function $n(s){var e,n;return"server_timestamp"===(null===(n=((null===(e=s?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ac(s){const e=s.mapValue.fields.__previous_value__;return $n(e)?ac(e):e}function Xa(s){const e=oc(s.mapValue.fields.__local_write_time__.timestampValue);return new kr(e.seconds,e.nanos)}class Tr{constructor(e,n,o,u,l,g,b,N,L){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=l,this.forceLongPolling=g,this.autoDetectLongPolling=b,this.longPollingOptions=N,this.useFetchStreams=L}}class ta{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ta("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ta&&e.projectId===this.projectId&&e.database===this.database}}const Qs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_o={nullValue:"NULL_VALUE"};function Oo(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?$n(s)?4:Oc(s)?9007199254740991:10:wt()}function yo(s,e){if(s===e)return!0;const n=Oo(s);if(n!==Oo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Xa(s).isEqual(Xa(e));case 3:return function(u,l){if("string"==typeof u.timestampValue&&"string"==typeof l.timestampValue&&u.timestampValue.length===l.timestampValue.length)return u.timestampValue===l.timestampValue;const g=oc(u.timestampValue),b=oc(l.timestampValue);return g.seconds===b.seconds&&g.nanos===b.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return l=e,We(s.bytesValue).isEqual(We(l.bytesValue));case 7:return s.referenceValue===e.referenceValue;case 8:return function(u,l){return Ni(u.geoPointValue.latitude)===Ni(l.geoPointValue.latitude)&&Ni(u.geoPointValue.longitude)===Ni(l.geoPointValue.longitude)}(s,e);case 2:return function(u,l){if("integerValue"in u&&"integerValue"in l)return Ni(u.integerValue)===Ni(l.integerValue);if("doubleValue"in u&&"doubleValue"in l){const g=Ni(u.doubleValue),b=Ni(l.doubleValue);return g===b?vn(g)===vn(b):isNaN(g)&&isNaN(b)}return!1}(s,e);case 9:return ws(s.arrayValue.values||[],e.arrayValue.values||[],yo);case 10:return function(u,l){const g=u.mapValue.fields||{},b=l.mapValue.fields||{};if(rl(g)!==rl(b))return!1;for(const N in g)if(g.hasOwnProperty(N)&&(void 0===b[N]||!yo(g[N],b[N])))return!1;return!0}(s,e);default:return wt()}var l}function Cu(s,e){return void 0!==(s.values||[]).find(n=>yo(n,e))}function uc(s,e){if(s===e)return 0;const n=Oo(s),o=Oo(e);if(n!==o)return fn(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return fn(s.booleanValue,e.booleanValue);case 2:return function(l,g){const b=Ni(l.integerValue||l.doubleValue),N=Ni(g.integerValue||g.doubleValue);return b<N?-1:b>N?1:b===N?0:isNaN(b)?isNaN(N)?0:-1:1}(s,e);case 3:return Ml(s.timestampValue,e.timestampValue);case 4:return Ml(Xa(s),Xa(e));case 5:return fn(s.stringValue,e.stringValue);case 6:return function(l,g){const b=We(l),N=We(g);return b.compareTo(N)}(s.bytesValue,e.bytesValue);case 7:return function(l,g){const b=l.split("/"),N=g.split("/");for(let L=0;L<b.length&&L<N.length;L++){const z=fn(b[L],N[L]);if(0!==z)return z}return fn(b.length,N.length)}(s.referenceValue,e.referenceValue);case 8:return function(l,g){const b=fn(Ni(l.latitude),Ni(g.latitude));return 0!==b?b:fn(Ni(l.longitude),Ni(g.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return function(l,g){const b=l.values||[],N=g.values||[];for(let L=0;L<b.length&&L<N.length;++L){const z=uc(b[L],N[L]);if(z)return z}return fn(b.length,N.length)}(s.arrayValue,e.arrayValue);case 10:return function(l,g){if(l===Qs.mapValue&&g===Qs.mapValue)return 0;if(l===Qs.mapValue)return 1;if(g===Qs.mapValue)return-1;const b=l.fields||{},N=Object.keys(b),L=g.fields||{},z=Object.keys(L);N.sort(),z.sort();for(let X=0;X<N.length&&X<z.length;++X){const me=fn(N[X],z[X]);if(0!==me)return me;const Ue=uc(b[N[X]],L[z[X]]);if(0!==Ue)return Ue}return fn(N.length,z.length)}(s.mapValue,e.mapValue);default:throw wt()}}function Ml(s,e){if("string"==typeof s&&"string"==typeof e&&s.length===e.length)return fn(s,e);const n=oc(s),o=oc(e),u=fn(n.seconds,o.seconds);return 0!==u?u:fn(n.nanos,o.nanos)}function Oi(s){return na(s)}function na(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(n){const o=oc(n);return`time(${o.seconds},${o.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?We(s.bytesValue).toBase64():"referenceValue"in s?dt.fromName(s.referenceValue).toString():"geoPointValue"in s?function(n){return`geo(${n.latitude},${n.longitude})`}(s.geoPointValue):"arrayValue"in s?function(n){let o="[",u=!0;for(const l of n.values||[])u?u=!1:o+=",",o+=na(l);return o+"]"}(s.arrayValue):"mapValue"in s?function(n){const o=Object.keys(n.fields||{}).sort();let u="{",l=!0;for(const g of o)l?l=!1:u+=",",u+=`${g}:${na(n.fields[g])}`;return u+"}"}(s.mapValue):wt()}function fs(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Ii(s){return!!s&&"integerValue"in s}function cc(s){return!!s&&"arrayValue"in s}function lc(s){return!!s&&"nullValue"in s}function sl(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Nl(s){return!!s&&"mapValue"in s}function Ia(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return No(s.mapValue.fields,(n,o)=>e.mapValue.fields[n]=Ia(o)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ia(s.arrayValue.values[n]);return e}return Object.assign({},s)}function Oc(s){return"__max__"===(((s.mapValue||{}).fields||{}).__type__||{}).stringValue}function hd(s){return"nullValue"in s?_o:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?fs(ta.empty(),dt.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?{mapValue:{}}:wt()}function Ol(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?fs(ta.empty(),dt.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?{mapValue:{}}:"mapValue"in s?Qs:wt()}function ol(s,e){const n=uc(s.value,e.value);return 0!==n?n:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function fd(s,e){const n=uc(s.value,e.value);return 0!==n?n:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class Yi{constructor(e){this.value=e}static empty(){return new Yi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Nl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ia(n)}setAll(e){let n=rr.emptyPath(),o={},u=[];e.forEach((g,b)=>{if(!n.isImmediateParentOf(b)){const N=this.getFieldsMap(n);this.applyChanges(N,o,u),o={},u=[],n=b.popLast()}g?o[b.lastSegment()]=Ia(g):u.push(b.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,o,u)}delete(e){const n=this.field(e.popLast());Nl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];Nl(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){No(n,(u,l)=>e[u]=l);for(const u of o)delete e[u]}clone(){return new Yi(Ia(this.value))}}function xl(s){const e=[];return No(s.fields,(n,o)=>{const u=new rr([n]);if(Nl(o)){const l=xl(o.mapValue).fields;if(0===l.length)e.push(u);else for(const g of l)e.push(u.child(g))}else e.push(u)}),new Ts(e)}class Xr{constructor(e,n,o,u,l,g,b){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=l,this.data=g,this.documentState=b}static newInvalidDocument(e){return new Xr(e,0,Nt.min(),Nt.min(),Nt.min(),Yi.empty(),0)}static newFoundDocument(e,n,o,u){return new Xr(e,1,n,Nt.min(),o,u,0)}static newNoDocument(e,n){return new Xr(e,2,n,Nt.min(),Nt.min(),Yi.empty(),0)}static newUnknownDocument(e,n){return new Xr(e,3,n,Nt.min(),Nt.min(),Yi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Nt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xi{constructor(e,n){this.position=e,this.inclusive=n}}function Au(s,e,n){let o=0;for(let u=0;u<s.position.length;u++){const l=e[u],g=s.position[u];if(o=l.field.isKeyField()?dt.comparator(dt.fromName(g.referenceValue),n.key):uc(g,n.data.field(l.field)),"desc"===l.dir&&(o*=-1),0!==o)break}return o}function kl(s,e){if(null===s)return null===e;if(null===e||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!yo(s.position[n],e.position[n]))return!1;return!0}class al{constructor(e,n="asc"){this.field=e,this.dir=n}}function ps(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class bu{}class Xt extends bu{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new fc(e,n,o):"array-contains"===n?new qd(e,o):"in"===n?new Kd(e,o):"not-in"===n?new md(e,o):"array-contains-any"===n?new pc(e,o):new Xt(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new kc(e,o):new cl(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(uc(n,this.value)):null!==n&&Oo(this.value)===Oo(n)&&this.matchesComparison(uc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return wt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hr extends bu{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new hr(e,n)}matches(e){return xc(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function xc(s){return"and"===s.op}function dc(s){return"or"===s.op}function ul(s){return pd(s)&&xc(s)}function pd(s){for(const e of s.filters)if(e instanceof hr)return!1;return!0}function hc(s){if(s instanceof Xt)return s.field.canonicalString()+s.op.toString()+Oi(s.value);if(ul(s))return s.filters.map(e=>hc(e)).join(",");{const e=s.filters.map(n=>hc(n)).join(",");return`${s.op}(${e})`}}function Ja(s,e){return s instanceof Xt?(o=s,(u=e)instanceof Xt&&o.op===u.op&&o.field.isEqual(u.field)&&yo(o.value,u.value)):s instanceof hr?function(o,u){return u instanceof hr&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((l,g,b)=>l&&Ja(g,u.filters[b]),!0)}(s,e):void wt();var o,u}function wa(s,e){const n=s.filters.concat(e);return hr.create(n,s.op)}function gd(s){return s instanceof Xt?`${(n=s).field.canonicalString()} ${n.op} ${Oi(n.value)}`:s instanceof hr?function(n){return n.op.toString()+" {"+n.getFilters().map(gd).join(" ,")+"}"}(s):"Filter";var n}class fc extends Xt{constructor(e,n,o){super(e,n,o),this.key=dt.fromName(o.referenceValue)}matches(e){const n=dt.comparator(e.key,this.key);return this.matchesComparison(n)}}class kc extends Xt{constructor(e,n){super(e,"in",n),this.keys=Lc(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cl extends Xt{constructor(e,n){super(e,"not-in",n),this.keys=Lc(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Lc(s,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>dt.fromName(o.referenceValue))}class qd extends Xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cc(n)&&Cu(n.arrayValue,this.value)}}class Kd extends Xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Cu(this.value.arrayValue,n)}}class md extends Xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Cu(this.value.arrayValue,n)}}class pc extends Xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>Cu(this.value.arrayValue,o))}}class Ru{constructor(e,n=null,o=[],u=[],l=null,g=null,b=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=l,this.startAt=g,this.endAt=b,this.ce=null}}function Ll(s,e=null,n=[],o=[],u=null,l=null,g=null){return new Ru(s,e,n,o,u,l,g)}function ra(s){const e=Tt(s);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>hc(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(l=o).field.canonicalString()+l.dir;var l}).join(","),It(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>Oi(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>Oi(o)).join(",")),e.ce=n}return e.ce}function ll(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!ps(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Ja(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!kl(s.startAt,e.startAt)&&kl(s.endAt,e.endAt)}function Fl(s){return dt.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}function _d(s,e){return s.filters.filter(n=>n instanceof Xt&&n.field.isEqual(e))}function Lh(s,e,n){let o=_o,u=!0;for(const l of _d(s,e)){let g=_o,b=!0;switch(l.op){case"<":case"<=":g=hd(l.value);break;case"==":case"in":case">=":g=l.value;break;case">":g=l.value,b=!1;break;case"!=":case"not-in":g=_o}ol({value:o,inclusive:u},{value:g,inclusive:b})<0&&(o=g,u=b)}if(null!==n)for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const g=n.position[l];ol({value:o,inclusive:u},{value:g,inclusive:n.inclusive})<0&&(o=g,u=n.inclusive);break}return{value:o,inclusive:u}}function zf(s,e,n){let o=Qs,u=!0;for(const l of _d(s,e)){let g=Qs,b=!0;switch(l.op){case">=":case">":g=Ol(l.value),b=!1;break;case"==":case"in":case"<=":g=l.value;break;case"<":g=l.value,b=!1;break;case"!=":case"not-in":g=Qs}fd({value:o,inclusive:u},{value:g,inclusive:b})>0&&(o=g,u=b)}if(null!==n)for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const g=n.position[l];fd({value:o,inclusive:u},{value:g,inclusive:n.inclusive})>0&&(o=g,u=n.inclusive);break}return{value:o,inclusive:u}}class ia{constructor(e,n=null,o=[],u=[],l=null,g="F",b=null,N=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=l,this.limitType=g,this.startAt=b,this.endAt=N,this.le=null,this.he=null,this.Pe=null}}function Fc(s,e,n,o,u,l,g,b){return new ia(s,e,n,o,u,l,g,b)}function Vc(s){return new ia(s)}function xo(s){return 0===s.filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())}function Vl(s){return null!==s.collectionGroup}function Pu(s){const e=Tt(s);if(null===e.le){e.le=[];const n=new Set;for(const l of e.explicitOrderBy)e.le.push(l),n.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(g){let b=new wr(rr.comparator);return g.filters.forEach(N=>{N.getFlattenedFilters().forEach(L=>{L.isInequality()&&(b=b.add(L.field))})}),b})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.le.push(new al(l,o))}),n.has(rr.keyField().canonicalString())||e.le.push(new al(rr.keyField(),o))}return e.le}function Ds(s){const e=Tt(s);return e.he||(e.he=function Ul(s,e){if("F"===s.limitType)return Ll(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(u=>new al(u.field,"desc"===u.dir?"asc":"desc"));const n=s.endAt?new xi(s.endAt.position,s.endAt.inclusive):null,o=s.startAt?new xi(s.startAt.position,s.startAt.inclusive):null;return Ll(s.path,s.collectionGroup,e,s.filters,s.limit,n,o)}}(e,Pu(s))),e.he}function gc(s,e){const n=s.filters.concat([e]);return new ia(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Bl(s,e,n){return new ia(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Ys(s,e){return ll(Ds(s),Ds(e))&&s.limitType===e.limitType}function yd(s){return`${ra(Ds(s))}|lt:${s.limitType}`}function Mu(s){return`Query(target=${function(n){let o=n.path.canonicalString();return null!==n.collectionGroup&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(u=>gd(u)).join(", ")}]`),It(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(u=>{return`${(g=u).field.canonicalString()} (${g.dir})`;var g}).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(u=>Oi(u)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(u=>Oi(u)).join(",")),`Target(${o})`}(Ds(s))}; limitType=${s.limitType})`}function Uc(s,e){return e.isFoundDocument()&&function(o,u){const l=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):dt.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)}(s,e)&&function(o,u){for(const l of Pu(o))if(!l.field.isKeyField()&&null===u.data.field(l.field))return!1;return!0}(s,e)&&function(o,u){for(const l of o.filters)if(!l.matches(u))return!1;return!0}(s,e)&&(u=e,!((o=s).startAt&&!function(g,b,N){const L=Au(g,b,N);return g.inclusive?L<=0:L<0}(o.startAt,Pu(o),u)||o.endAt&&!function(g,b,N){const L=Au(g,b,N);return g.inclusive?L>=0:L>0}(o.endAt,Pu(o),u)));var o,u}function dl(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function E(s){return(e,n)=>{let o=!1;for(const u of Pu(s)){const l=f(u,e,n);if(0!==l)return l;o=o||u.field.isKeyField()}return 0}}function f(s,e,n){const o=s.field.isKeyField()?dt.comparator(e.key,n.key):function(l,g,b){const N=g.data.field(l),L=b.data.field(l);return null!==N&&null!==L?uc(N,L):wt()}(s.field,e,n);switch(s.dir){case"asc":return o;case"desc":return-1*o;default:return wt()}}class m{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,l]of o)if(this.equalsFn(u,e))return l}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let l=0;l<u.length;l++)if(this.equalsFn(u[l][0],e))return void(u[l]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){No(this.inner,(n,o)=>{for(const[u,l]of o)e(u,l)})}isEmpty(){return Ea(this.inner)}size(){return this.innerSize}}const T=new Ot(dt.comparator);function P(){return T}const U=new Ot(dt.comparator);function W(...s){let e=U;for(const n of s)e=e.insert(n.key,n);return e}function J(s){let e=U;return s.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function ae(){return et()}function _e(){return et()}function et(){return new m(s=>s.toString(),(s,e)=>s.isEqual(e))}const gt=new Ot(dt.comparator),nn=new wr(dt.comparator);function it(...s){let e=nn;for(const n of s)e=e.add(n);return e}const bt=new wr(fn);function Mt(){return bt}function An(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vn(e)?"-0":e}}function vr(s){return{integerValue:""+s}}function Dr(s,e){return Cn(e)?vr(e):An(s,e)}class ir{constructor(){this._=void 0}}function tr(s,e,n){return s instanceof ci?function(u,l){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return l&&$n(l)&&(l=ac(l)),l&&(g.fields.__previous_value__=l),{mapValue:g}}(n,e):s instanceof Lr?Fs(s,e):s instanceof vo?vd(s,e):function(u,l){const g=ki(u,l),b=hl(g)+hl(u.Ie);return Ii(g)&&Ii(u.Ie)?vr(b):An(u.serializer,b)}(s,e)}function Ss(s,e,n){return s instanceof Lr?Fs(s,e):s instanceof vo?vd(s,e):n}function ki(s,e){return s instanceof ko?Ii(o=e)||(l=o)&&"doubleValue"in l?e:{integerValue:0}:null;var o,l}class ci extends ir{}class Lr extends ir{constructor(e){super(),this.elements=e}}function Fs(s,e){const n=Bc(e);for(const o of s.elements)n.some(u=>yo(u,o))||n.push(o);return{arrayValue:{values:n}}}class vo extends ir{constructor(e){super(),this.elements=e}}function vd(s,e){let n=Bc(e);for(const o of s.elements)n=n.filter(u=>!yo(u,o));return{arrayValue:{values:n}}}class ko extends ir{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function hl(s){return Ni(s.integerValue||s.doubleValue)}function Bc(s){return cc(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class Nu{constructor(e,n){this.field=e,this.transform=n}}class dn{constructor(e,n){this.version=e,this.transformResults=n}}class Ft{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ft}static exists(e){return new Ft(void 0,e)}static updateTime(e){return new Ft(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sr(s,e){return void 0!==s.updateTime?e.isFoundDocument()&&e.version.isEqual(s.updateTime):void 0===s.exists||s.exists===e.isFoundDocument()}class cr{}function Cs(s,e){if(!s.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return s.isNoDocument()?new xu(s.key,Ft.none()):new Ou(s.key,s.data,Ft.none());{const n=s.data,o=Yi.empty();let u=new wr(rr.comparator);for(let l of e.fields)if(!u.has(l)){let g=n.field(l);null===g&&l.length>1&&(l=l.popLast(),g=n.field(l)),null===g?o.delete(l):o.set(l,g),u=u.add(l)}return new fr(s.key,o,new Ts(u.toArray()),Ft.none())}}function ii(s,e,n){s instanceof Ou?function(u,l,g){const b=u.value.clone(),N=oi(u.fieldTransforms,l,g.transformResults);b.setAll(N),l.convertToFoundDocument(g.version,b).setHasCommittedMutations()}(s,e,n):s instanceof fr?function(u,l,g){if(!sr(u.precondition,l))return void l.convertToUnknownDocument(g.version);const b=oi(u.fieldTransforms,l,g.transformResults),N=l.data;N.setAll(eu(u)),N.setAll(b),l.convertToFoundDocument(g.version,N).setHasCommittedMutations()}(s,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function sa(s,e,n,o){return s instanceof Ou?function(l,g,b,N){if(!sr(l.precondition,g))return b;const L=l.value.clone(),z=jc(l.fieldTransforms,N,g);return L.setAll(z),g.convertToFoundDocument(g.version,L).setHasLocalMutations(),null}(s,e,n,o):s instanceof fr?function(l,g,b,N){if(!sr(l.precondition,g))return b;const L=jc(l.fieldTransforms,N,g),z=g.data;return z.setAll(eu(l)),z.setAll(L),g.convertToFoundDocument(g.version,z).setHasLocalMutations(),null===b?null:b.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(X=>X.field))}(s,e,n,o):(b=n,sr(s.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):b);var g,b}function si(s,e){let n=null;for(const o of s.fieldTransforms){const u=e.data.field(o.field),l=ki(o.transform,u||null);null!=l&&(null===n&&(n=Yi.empty()),n.set(o.field,l))}return n||null}function jl(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(o=s.fieldTransforms)&&void 0===u||o&&u&&ws(o,u,(l,g)=>function Zt(s,e){return s.field.isEqual(e.field)&&(u=e.transform,(o=s.transform)instanceof Lr&&u instanceof Lr||o instanceof vo&&u instanceof vo?ws(o.elements,u.elements,yo):o instanceof ko&&u instanceof ko?yo(o.Ie,u.Ie):o instanceof ci&&u instanceof ci);var o,u}(l,g))))&&(0===s.type?s.value.isEqual(e.value):1!==s.type||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask));var o,u}class Ou extends cr{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class fr extends cr{constructor(e,n,o,u,l=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function eu(s){const e=new Map;return s.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=s.data.field(n);e.set(n,o)}}),e}function oi(s,e,n){const o=new Map;st(s.length===n.length);for(let u=0;u<n.length;u++){const l=s[u],g=l.transform,b=e.data.field(l.field);o.set(l.field,Ss(g,b,n[u]))}return o}function jc(s,e,n){const o=new Map;for(const u of s){const l=u.transform,g=n.data.field(u.field);o.set(u.field,tr(l,g,e))}return o}class xu extends cr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zd extends cr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gf{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const l=this.mutations[u];l.key.isEqual(e.key)&&ii(l,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=sa(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=sa(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=_e();return this.mutations.forEach(u=>{const l=e.get(u.key),g=l.overlayedDocument;let b=this.applyToLocalView(g,l.mutatedFields);b=n.has(u.key)?null:b;const N=Cs(g,b);null!==N&&o.set(u.key,N),g.isValidDocument()||g.convertToNoDocument(Nt.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),it())}isEqual(e){return this.batchId===e.batchId&&ws(this.mutations,e.mutations,(n,o)=>jl(n,o))&&ws(this.baseMutations,e.baseMutations,(n,o)=>jl(n,o))}}class Fh{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){st(e.mutations.length===o.length);let u=function(){return gt}();const l=e.mutations;for(let g=0;g<l.length;g++)u=u.insert(l[g].key,o[g].version);return new Fh(e,n,o,u)}}class Vs{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Uh{constructor(e,n){this.count=e,this.unchangedNames=n}}var us,Mn;function ku(s){switch(s){default:return wt();case je.CANCELLED:case je.UNKNOWN:case je.DEADLINE_EXCEEDED:case je.RESOURCE_EXHAUSTED:case je.INTERNAL:case je.UNAVAILABLE:case je.UNAUTHENTICATED:return!1;case je.INVALID_ARGUMENT:case je.NOT_FOUND:case je.ALREADY_EXISTS:case je.PERMISSION_DENIED:case je.FAILED_PRECONDITION:case je.ABORTED:case je.OUT_OF_RANGE:case je.UNIMPLEMENTED:case je.DATA_LOSS:return!0}}function Qd(s){if(void 0===s)return yr("GRPC error has no .code"),je.UNKNOWN;switch(s){case us.OK:return je.OK;case us.CANCELLED:return je.CANCELLED;case us.UNKNOWN:return je.UNKNOWN;case us.DEADLINE_EXCEEDED:return je.DEADLINE_EXCEEDED;case us.RESOURCE_EXHAUSTED:return je.RESOURCE_EXHAUSTED;case us.INTERNAL:return je.INTERNAL;case us.UNAVAILABLE:return je.UNAVAILABLE;case us.UNAUTHENTICATED:return je.UNAUTHENTICATED;case us.INVALID_ARGUMENT:return je.INVALID_ARGUMENT;case us.NOT_FOUND:return je.NOT_FOUND;case us.ALREADY_EXISTS:return je.ALREADY_EXISTS;case us.PERMISSION_DENIED:return je.PERMISSION_DENIED;case us.FAILED_PRECONDITION:return je.FAILED_PRECONDITION;case us.ABORTED:return je.ABORTED;case us.OUT_OF_RANGE:return je.OUT_OF_RANGE;case us.UNIMPLEMENTED:return je.UNIMPLEMENTED;case us.DATA_LOSS:return je.DATA_LOSS;default:return wt()}}(Mn=us||(us={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";function Yd(){return new TextEncoder}const Ta=new xr([4294967295,4294967295],0);function Wf(s){const e=Yd().encode(s),n=new dr;return n.update(e),new Uint8Array(n.digest())}function Xd(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new xr([n,o],0),new xr([u,l],0)]}class fl{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new Id(`Invalid padding: ${n}`);if(o<0)throw new Id(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new Id(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new Id(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=xr.fromNumber(this.Te)}de(e,n,o){let u=e.add(n.multiply(xr.fromNumber(o)));return 1===u.compare(Ta)&&(u=new xr([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=Wf(e),[o,u]=Xd(n);for(let l=0;l<this.hashCount;l++){const g=this.de(o,u,l);if(!this.Ae(g))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),g=new fl(l,u,n);return o.forEach(b=>g.insert(b)),g}insert(e){if(0===this.Te)return;const n=Wf(e),[o,u]=Xd(n);for(let l=0;l<this.hashCount;l++){const g=this.de(o,u,l);this.Re(g)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Id extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class y{constructor(e,n,o,u,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,h.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new y(Nt.min(),u,new Ot(fn),P(),it())}}class h{constructor(e,n,o,u,l){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new h(o,n,it(),it(),it())}}class p{constructor(e,n,o,u){this.Ve=e,this.removedTargetIds=n,this.key=o,this.me=u}}class I{constructor(e,n){this.targetId=e,this.fe=n}}class k{constructor(e,n,o=Hi.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class G{constructor(){this.ge=0,this.pe=tt(),this.ye=Hi.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=it(),n=it(),o=it();return this.pe.forEach((u,l)=>{switch(l){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:wt()}}),new h(this.ye,this.we,e,n,o)}Fe(){this.Se=!1,this.pe=tt()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class ce{constructor(e){this.Le=e,this.ke=new Map,this.qe=P(),this.Qe=Pe(),this.Ke=new Ot(fn)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(n);break;case 3:this.je(n)&&(o.Be(),o.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.Ce(e.resumeToken));break;default:wt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((o,u)=>{this.je(u)&&n(u)})}Je(e){const n=e.targetId,o=e.fe.count,u=this.Ye(n);if(u){const l=u.target;if(Fl(l))if(0===o){const g=new dt(l.path);this.We(n,g,Xr.newNoDocument(g,Nt.min()))}else st(1===o);else{const g=this.Ze(n);if(g!==o){const b=this.Xe(e),N=b?this.et(b,e,g):1;0!==N&&(this.He(n),this.Ke=this.Ke.insert(n,2===N?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:l=0}=n;let g,b;try{g=We(o).toUint8Array()}catch(N){if(N instanceof Ya)return _n("Decoding the base64 bloom filter in existence filter failed ("+N.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw N}try{b=new fl(g,u,l)}catch(N){return _n(N instanceof Id?"BloomFilter error: ":"Applying bloom filter failed: ",N),null}return 0===b.Te?null:b}et(e,n,o){return n.fe.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Le.getRemoteKeysForTarget(n);let u=0;return o.forEach(l=>{const g=this.Le.nt(),b=`projects/${g.projectId}/databases/${g.database}/documents/${l.path.canonicalString()}`;e.mightContain(b)||(this.We(n,l,null),u++)}),u}it(e){const n=new Map;this.ke.forEach((l,g)=>{const b=this.Ye(g);if(b){if(l.current&&Fl(b.target)){const N=new dt(b.target.path);null!==this.qe.get(N)||this.st(g,N)||this.We(g,N,Xr.newNoDocument(N,e))}l.De&&(n.set(g,l.ve()),l.Fe())}});let o=it();this.Qe.forEach((l,g)=>{let b=!0;g.forEachWhile(N=>{const L=this.Ye(N);return!L||"TargetPurposeLimboResolution"===L.purpose||(b=!1,!1)}),b&&(o=o.add(l))}),this.qe.forEach((l,g)=>g.setReadTime(e));const u=new y(e,n,this.Ke,this.qe,o);return this.qe=P(),this.Qe=Pe(),this.Ke=new Ot(fn),u}Ue(e,n){if(!this.je(e))return;const o=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,o),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const u=this.ze(e);this.st(e,n)?u.Me(n,1):u.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),o&&(this.qe=this.qe.insert(n,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new G,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new wr(fn),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||Xe("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new G),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Pe(){return new Ot(dt.comparator)}function tt(){return new Ot(dt.comparator)}const Lt={asc:"ASCENDING",desc:"DESCENDING"},Qt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xt={and:"AND",or:"OR"};class wi{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lo(s,e){return s.useProto3Json||It(e)?e:{value:e}}function tu(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function As(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function pl(s,e){return tu(s,e.toTimestamp())}function zi(s){return st(!!s),Nt.fromTimestamp(function(n){const o=oc(n);return new kr(o.seconds,o.nanos)}(s))}function wd(s,e){return(o=s,new Vn(["projects",o.projectId,"databases",o.database])).child("documents").child(e).canonicalString();var o}function Jd(s){const e=Vn.fromString(s);return st(z_(e)),e}function gl(s,e){return wd(s.databaseId,e.path)}function nu(s,e){const n=Jd(e);if(n.get(1)!==s.databaseId.projectId)throw new Ke(je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new Ke(je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new dt(eh(n))}function $l(s,e){return wd(s.databaseId,e)}function Bh(s){const e=Jd(s);return 4===e.length?Vn.emptyPath():eh(e)}function Hl(s){return new Vn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function eh(s){return st(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function qf(s,e,n){return{name:gl(s,e),fields:n.value.mapValue.fields}}function B_(s,e,n){const o=nu(s,e.name),u=zi(e.updateTime),l=e.createTime?zi(e.createTime):Nt.min(),g=new Yi({mapValue:{fields:e.fields}}),b=Xr.newFoundDocument(o,u,l,g);return n&&b.setHasCommittedMutations(),n?b.setHasCommittedMutations():b}function th(s,e){let n;if(e instanceof Ou)n={update:qf(s,e.key,e.value)};else if(e instanceof xu)n={delete:gl(s,e.key)};else if(e instanceof fr)n={update:qf(s,e.key,e.data),updateMask:dE(e.fieldMask)};else{if(!(e instanceof Zd))return wt();n={verify:gl(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(l,g){const b=g.transform;if(b instanceof ci)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(b instanceof Lr)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:b.elements}};if(b instanceof vo)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:b.elements}};if(b instanceof ko)return{fieldPath:g.field.canonicalString(),increment:b.Ie};throw wt()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(l=e.precondition).updateTime?{updateTime:pl(s,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:wt()),n;var l}function Kf(s,e){const n=e.currentDocument?void 0!==(l=e.currentDocument).updateTime?Ft.updateTime(zi(l.updateTime)):void 0!==l.exists?Ft.exists(l.exists):Ft.none():Ft.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(g,b){let N=null;"setToServerValue"in b?(st("REQUEST_TIME"===b.setToServerValue),N=new ci):"appendMissingElements"in b?N=new Lr(b.appendMissingElements.values||[]):"removeAllFromArray"in b?N=new vo(b.removeAllFromArray.values||[]):"increment"in b?N=new ko(g,b.increment):wt();const L=rr.fromServerFormat(b.fieldPath);return new Nu(L,N)}(s,u)):[];var l;if(e.update){const u=nu(s,e.update.name),l=new Yi({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new Ts((e.updateMask.fieldPaths||[]).map(z=>rr.fromServerFormat(z)));return new fr(u,l,g,n,o)}return new Ou(u,l,n,o)}if(e.delete){const u=nu(s,e.delete);return new xu(u,n)}if(e.verify){const u=nu(s,e.verify);return new Zd(u,n)}return wt()}function xg(s,e){return{documents:[$l(s,e.path)]}}function Qf(s,e){const n={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(n.parent=$l(s,o),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=$l(s,o.popLast()),n.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(N){if(0!==N.length)return Lg(hr.create(N,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const l=function(N){if(0!==N.length)return N.map(L=>{return{field:ml((X=L).field),direction:uE(X.dir)};var X})}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const g=Lo(s,e.limit);return null!==g&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt={before:(N=e.startAt).inclusive,values:N.position}),e.endAt&&(n.structuredQuery.endAt=function(N){return{before:!N.inclusive,values:N.position}}(e.endAt)),n;var N}function kg(s){let e=Bh(s.parent);const n=s.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){st(1===o);const z=n.from[0];z.allDescendants?u=z.collectionId:e=e.child(z.collectionId)}let l=[];n.where&&(l=function(X){const me=H_(X);return me instanceof hr&&ul(me)?me.getFilters():[me]}(n.where));let g=[];n.orderBy&&(g=n.orderBy.map(me=>{return new al(jh((ht=me).field),function(St){switch(St){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ht.direction));var ht}));let b=null;n.limit&&(b=function(X){let me;return me="object"==typeof X?X.value:X,It(me)?null:me}(n.limit));let N=null;var X;n.startAt&&(N=new xi((X=n.startAt).values||[],!!X.before));let L=null;return n.endAt&&(L=function(X){return new xi(X.values||[],!X.before)}(n.endAt)),Fc(e,u,g,l,b,"F",N,L)}function H_(s){return void 0!==s.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=jh(n.unaryFilter.field);return Xt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=jh(n.unaryFilter.field);return Xt.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=jh(n.unaryFilter.field);return Xt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=jh(n.unaryFilter.field);return Xt.create(g,"!=",{nullValue:"NULL_VALUE"});default:return wt()}}(s):void 0!==s.fieldFilter?Xt.create(jh((n=s).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wt()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==s.compositeFilter?function(n){return hr.create(n.compositeFilter.filters.map(o=>H_(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return wt()}}(n.compositeFilter.op))}(s):wt();var n}function uE(s){return Lt[s]}function cE(s){return Qt[s]}function lE(s){return xt[s]}function ml(s){return{fieldPath:s.canonicalString()}}function jh(s){return rr.fromServerFormat(s.fieldPath)}function Lg(s){return s instanceof Xt?function(n){if("=="===n.op){if(sl(n.value))return{unaryFilter:{field:ml(n.field),op:"IS_NAN"}};if(lc(n.value))return{unaryFilter:{field:ml(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(sl(n.value))return{unaryFilter:{field:ml(n.field),op:"IS_NOT_NAN"}};if(lc(n.value))return{unaryFilter:{field:ml(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ml(n.field),op:cE(n.op),value:n.value}}}(s):s instanceof hr?function(n){const o=n.getFilters().map(u=>Lg(u));return 1===o.length?o[0]:{compositeFilter:{op:lE(n.op),filters:o}}}(s):wt()}function dE(s){const e=[];return s.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function z_(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}class zl{constructor(e,n,o,u,l=Nt.min(),g=Nt.min(),b=Hi.EMPTY_BYTE_STRING,N=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=b,this.expectedCount=N}withSequenceNumber(e){return new zl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class G_{constructor(e){this.ut=e}}function Yf(s,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Xf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:gl(l=s.ut,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:tu(l,g.version.toTimestamp()),createTime:tu(l,g.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:Da(e.version)};else{if(!e.isUnknownDocument())return wt();o.unknownDocument={path:n.path.toArray(),version:Da(e.version)}}var l,g;return o}function Xf(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Da(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Gl(s){const e=new kr(s.seconds,s.nanoseconds);return Nt.fromTimestamp(e)}function Td(s,e){const n=(e.baseMutations||[]).map(l=>Kf(s.ut,l));for(let l=0;l<e.mutations.length-1;++l)l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(e.mutations[l].updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l);const o=e.mutations.map(l=>Kf(s.ut,l)),u=kr.fromMillis(e.localWriteTimeMs);return new Gf(e.batchId,u,n,o)}function nh(s){const e=Gl(s.readTime),n=void 0!==s.lastLimboFreeSnapshotVersion?Gl(s.lastLimboFreeSnapshotVersion):Nt.min();let o;return o=void 0!==s.query.documents?(st(1===(l=s.query).documents.length),Ds(Vc(Bh(l.documents[0])))):function(l){return Ds(kg(l))}(s.query),new zl(o,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,n,Hi.fromBase64String(s.resumeToken));var l}function Jf(s,e){const n=Da(e.snapshotVersion),o=Da(e.lastLimboFreeSnapshotVersion);let u;u=Fl(e.target)?xg(s.ut,e.target):Qf(s.ut,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ra(e.target),readTime:n,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function q_(s){const e=kg({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?Bl(e,e.limit,"L"):e}function Fg(s,e){return new Vs(e.largestBatchId,Kf(s.ut,e.overlayMutation))}function K_(s,e){const n=e.path.lastSegment();return[s,Qn(e.path.popLast()),n]}function Z_(s,e,n,o){return{indexId:s,uid:e.uid||"",sequenceNumber:n,readTime:Da(o.readTime),documentKey:Qn(o.documentKey.path),largestBatchId:o.largestBatchId}}class hE{getBundleMetadata(e,n){return fE(e).get(n).next(o=>{if(o)return{id:(l=o).bundleId,createTime:Gl(l.createTime),version:l.version};var l})}saveBundleMetadata(e,n){return fE(e).put({bundleId:(u=n).id,createTime:Da(zi(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return pE(e).get(n).next(o=>{if(o)return{name:(l=o).name,query:q_(l.bundledQuery),readTime:Gl(l.readTime)};var l})}saveNamedQuery(e,n){return pE(e).put({name:(u=n).name,readTime:Da(zi(u.readTime)),bundledQuery:u.bundledQuery});var u}}function fE(s){return Mi(s,"bundles")}function pE(s){return Mi(s,"namedQueries")}class Dd{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new Dd(e,n.uid||"")}getOverlay(e,n){return $h(e).get(K_(this.userId,n)).next(o=>o?Fg(this.serializer,o):null)}getOverlays(e,n){const o=ae();return be.forEach(n,u=>this.getOverlay(e,u).next(l=>{null!==l&&o.set(u,l)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((l,g)=>{const b=new Vs(n,g);u.push(this.lt(e,b))}),be.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(g=>u.add(Qn(g.getCollectionPath())));const l=[];return u.forEach(g=>{const b=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,o+1],!1,!0);l.push($h(e).H("collectionPathOverlayIndex",b))}),be.waitFor(l)}getOverlaysForCollection(e,n,o){const u=ae(),l=Qn(n),g=IDBKeyRange.bound([this.userId,l,o],[this.userId,l,Number.POSITIVE_INFINITY],!0);return $h(e).W("collectionPathOverlayIndex",g).next(b=>{for(const N of b){const L=Fg(this.serializer,N);u.set(L.getKey(),L)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const l=ae();let g;const b=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return $h(e).Y({index:"collectionGroupOverlayIndex",range:b},(N,L,z)=>{const X=Fg(this.serializer,L);l.size()<u||X.largestBatchId===g?(l.set(X.getKey(),X),g=X.largestBatchId):z.done()}).next(()=>l)}lt(e,n){return $h(e).put(function(u,l,g){const[b,N,L]=K_(l,g.mutation.key);return{userId:l,collectionPath:N,documentId:L,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:th(u.ut,g.mutation)}}(this.serializer,this.userId,n))}}function $h(s){return Mi(s,"documentOverlays")}class _l{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Ni(e.integerValue));else if("doubleValue"in e){const o=Ni(e.doubleValue);isNaN(o)?this.Tt(n,13):(this.Tt(n,15),vn(o)?n.Et(0):n.Et(o))}else if("timestampValue"in e){const o=e.timestampValue;this.Tt(n,20),"string"==typeof o?n.dt(o):(n.dt(`${o.seconds||""}`),n.Et(o.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(We(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.Tt(n,45),n.Et(o.latitude||0),n.Et(o.longitude||0)}else"mapValue"in e?Oc(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):wt()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const o=e.fields||{};this.Tt(n,55);for(const u of Object.keys(o))this.At(u,n),this.Pt(o[u],n)}yt(e,n){const o=e.values||[];this.Tt(n,50);for(const u of o)this.Pt(u,n)}ft(e,n){this.Tt(n,37),dt.fromName(e).path.forEach(o=>{this.Tt(n,60),this.wt(o,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function Vg(s){if(0===s)return 8;let e=0;return!(s>>4)&&(e+=4,s<<=4),!(s>>6)&&(e+=2,s<<=2),!(s>>7)&&(e+=1),e}function Sd(s){const e=64-function(o){let u=0;for(let l=0;l<8;++l){const g=Vg(255&o[l]);if(u+=g,8!==g)break}return u}(s);return Math.ceil(e/8)}_l.St=new _l;class Ug{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Dt(o.value),o=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ft(o.value),o=n.next();this.Mt()}xt(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Dt(o);else if(o<2048)this.Dt(960|o>>>6),this.Dt(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|o>>>12),this.Dt(128|63&o>>>6),this.Dt(128|63&o);else{const u=n.codePointAt(0);this.Dt(240|u>>>18),this.Dt(128|63&u>>>12),this.Dt(128|63&u>>>6),this.Dt(128|63&u)}}this.Ct()}Ot(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const u=n.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Nt(e){const n=this.Bt(e),o=Sd(n);this.Lt(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}kt(e){const n=this.Bt(e),o=Sd(n);this.Lt(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(l){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,l,!1),new Uint8Array(g.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Bg{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class Hh{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Wl{constructor(){this.Wt=new Ug,this.Gt=new Bg(this.Wt),this.zt=new Hh(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Lu{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Lu(this.indexId,this.documentKey,this.arrayValue,o)}}function $c(s,e){let n=s.indexId-e.indexId;return 0!==n?n:(n=ep(s.arrayValue,e.arrayValue),0!==n?n:(n=ep(s.directionalValue,e.directionalValue),0!==n?n:dt.comparator(s.documentKey,e.documentKey)))}function ep(s,e){for(let n=0;n<s.length&&n<e.length;++n){const o=s[n]-e[n];if(0!==o)return o}return s.length-e.length}class zh{constructor(e){this.Jt=new wr((n,o)=>rr.comparator(n.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const o=n;o.isInequality()?this.Jt=this.Jt.add(o):this.Zt.push(o)}}get Xt(){return this.Jt.size>1}en(e){if(st(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=Ju(e);if(void 0!==n&&!this.tn(n))return!1;const o=qa(e);let u=new Set,l=0,g=0;for(;l<o.length&&this.tn(o[l]);++l)u=u.add(o[l].fieldPath.canonicalString());if(l===o.length)return!0;if(this.Jt.size>0){const b=this.Jt.getIterator().getNext();if(!u.has(b.field.canonicalString())){const N=o[l];if(!this.nn(b,N)||!this.rn(this.Yt[g++],N))return!1}++l}for(;l<o.length;++l)if(g>=this.Yt.length||!this.rn(this.Yt[g++],o[l]))return!1;return!0}sn(){if(this.Xt)return null;let e=new wr(rr.comparator);const n=[];for(const o of this.Zt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)n.push(new Mo(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),n.push(new Mo(o.field,0))}for(const o of this.Yt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),n.push(new Mo(o.field,"asc"===o.dir?0:1)));return new Wa(Wa.UNKNOWN_ID,this.collectionId,n,fo.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function gE(s){var e,n;if(st(s instanceof Xt||s instanceof hr),s instanceof Xt){if(s instanceof Kd){const u=(null===(n=null===(e=s.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(l=>Xt.create(s.field,"==",l)))||[];return hr.create(u,"or")}return s}const o=s.filters.map(u=>gE(u));return hr.create(o,s.op)}function jg(s){if(0===s.getFilters().length)return[];const e=zg(gE(s));return st(Hg(e)),Cd(e)||$g(e)?[e]:e.getFilters()}function Cd(s){return s instanceof Xt}function $g(s){return s instanceof hr&&ul(s)}function Hg(s){return Cd(s)||$g(s)||function(n){if(n instanceof hr&&dc(n)){for(const o of n.getFilters())if(!Cd(o)&&!$g(o))return!1;return!0}return!1}(s)}function zg(s){if(st(s instanceof Xt||s instanceof hr),s instanceof Xt)return s;if(1===s.filters.length)return zg(s.filters[0]);const e=s.filters.map(o=>zg(o));let n=hr.create(e,s.op);return n=Gh(n),Hg(n)?n:(st(n instanceof hr),st(xc(n)),st(n.filters.length>1),n.filters.reduce((o,u)=>Gg(o,u)))}function Gg(s,e){let n;return st(s instanceof Xt||s instanceof hr),st(e instanceof Xt||e instanceof hr),n=s instanceof Xt?e instanceof Xt?hr.create([s,e],"and"):tp(s,e):e instanceof Xt?tp(e,s):function(u,l){if(st(u.filters.length>0&&l.filters.length>0),xc(u)&&xc(l))return wa(u,l.getFilters());const g=dc(u)?u:l,b=dc(u)?l:u,N=g.filters.map(L=>Gg(L,b));return hr.create(N,"or")}(s,e),Gh(n)}function tp(s,e){if(xc(e))return wa(e,s.getFilters());{const n=e.filters.map(o=>Gg(s,o));return hr.create(n,"or")}}function Gh(s){if(st(s instanceof Xt||s instanceof hr),s instanceof Xt)return s;const e=s.getFilters();if(1===e.length)return Gh(e[0]);if(pd(s))return s;const n=e.map(u=>Gh(u)),o=[];return n.forEach(u=>{u instanceof Xt?o.push(u):u instanceof hr&&(u.op===s.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:hr.create(o,s.op)}class mE{constructor(){this.on=new Wg}addToCollectionParentIndex(e,n){return this.on.add(n),be.resolve()}getCollectionParents(e,n){return be.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return be.resolve()}deleteFieldIndex(e,n){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,n){return be.resolve()}getDocumentsMatchingTarget(e,n){return be.resolve(null)}getIndexType(e,n){return be.resolve(0)}getFieldIndexes(e,n){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,n){return be.resolve(Qi.min())}getMinOffsetFromCollectionGroup(e,n){return be.resolve(Qi.min())}updateCollectionGroup(e,n,o){return be.resolve()}updateIndexEntries(e,n){return be.resolve()}}class Wg{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new wr(Vn.comparator),l=!u.has(o);return this.index[n]=u.add(o),l}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new wr(Vn.comparator)).toArray()}}const ql=new Uint8Array(0);class Q_{constructor(e,n){this.user=e,this.databaseId=n,this._n=new Wg,this.an=new m(o=>ra(o),(o,u)=>ll(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const l={collectionId:o,parent:Qn(u)};return np(e).put(l)}return be.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[pi(n),""],!1,!0);return np(e).W(u).next(l=>{for(const g of l){if(g.collectionId!==n)break;o.push(rs(g.parent))}return o})}addFieldIndex(e,n){const o=rp(e),u={indexId:(b=n).indexId,collectionGroup:b.collectionGroup,fields:b.fields.map(N=>[N.fieldPath.canonicalString(),N.kind])};var b;delete u.indexId;const l=o.add(u);if(n.indexState){const g=Wh(e);return l.next(b=>{g.put(Z_(b,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return l.next()}deleteFieldIndex(e,n){const o=rp(e),u=Wh(e),l=rh(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=rp(e),o=rh(e),u=Wh(e);return n.H().next(()=>o.H()).next(()=>u.H())}createTargetIndexes(e,n){return be.forEach(this.un(n),o=>this.getIndexType(e,o).next(u=>{if(0===u||1===u){const l=new zh(o).sn();if(null!=l)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,n){const o=rh(e);let u=!0;const l=new Map;return be.forEach(this.un(n),g=>this.cn(e,g).next(b=>{u&&(u=!!b),l.set(g,b)})).next(()=>{if(u){let g=it();const b=[];return be.forEach(l,(N,L)=>{var gn;Xe("IndexedDbIndexManager",`Using index ${gn=N,`id=${gn.indexId}|cg=${gn.collectionGroup}|f=${gn.fields.map(Bn=>`${Bn.fieldPath}:${Bn.kind}`).join(",")}`} to execute ${ra(n)}`);const z=function(gn,Bn){const Hr=Ju(Bn);if(void 0===Hr)return null;for(const Sr of _d(gn,Hr.fieldPath))switch(Sr.op){case"array-contains-any":return Sr.value.arrayValue.values||[];case"array-contains":return[Sr.value]}return null}(L,N),X=function(gn,Bn){const Hr=new Map;for(const Sr of qa(Bn))for(const Rs of _d(gn,Sr.fieldPath))switch(Rs.op){case"==":case"in":Hr.set(Sr.fieldPath.canonicalString(),Rs.value);break;case"not-in":case"!=":return Hr.set(Sr.fieldPath.canonicalString(),Rs.value),Array.from(Hr.values())}return null}(L,N),me=function(gn,Bn){const Hr=[];let Sr=!0;for(const Rs of qa(Bn)){const Zc=0===Rs.kind?Lh(gn,Rs.fieldPath,gn.startAt):zf(gn,Rs.fieldPath,gn.startAt);Hr.push(Zc.value),Sr&&(Sr=Zc.inclusive)}return new xi(Hr,Sr)}(L,N),Ue=function(gn,Bn){const Hr=[];let Sr=!0;for(const Rs of qa(Bn)){const Zc=0===Rs.kind?zf(gn,Rs.fieldPath,gn.endAt):Lh(gn,Rs.fieldPath,gn.endAt);Hr.push(Zc.value),Sr&&(Sr=Zc.inclusive)}return new xi(Hr,Sr)}(L,N),ht=this.ln(N,L,me),yt=this.ln(N,L,Ue),St=this.hn(N,L,X),yn=this.Pn(N.indexId,z,ht,me.inclusive,yt,Ue.inclusive,St);return be.forEach(yn,bn=>o.j(bn,n.limit).next(gn=>{gn.forEach(Bn=>{const Hr=dt.fromSegments(Bn.documentKey);g.has(Hr)||(g=g.add(Hr),b.push(Hr))})}))}).next(()=>b)}return be.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:jg(hr.create(e.filters,"and")).map(o=>Ll(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,o,u,l,g,b){const N=(null!=n?n.length:1)*Math.max(o.length,l.length),L=N/(null!=n?n.length:1),z=[];for(let X=0;X<N;++X){const me=n?this.In(n[X/L]):ql,Ue=this.Tn(e,me,o[X%L],u),ht=this.En(e,me,l[X%L],g),yt=b.map(St=>this.Tn(e,me,St,!0));z.push(...this.createRange(Ue,ht,yt))}return z}Tn(e,n,o,u){const l=new Lu(e,dt.empty(),n,o);return u?l:l.Ht()}En(e,n,o,u){const l=new Lu(e,dt.empty(),n,o);return u?l.Ht():l}cn(e,n){const o=new zh(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(l=>{let g=null;for(const b of l)o.en(b)&&(!g||b.fields.length>g.fields.length)&&(g=b);return g})}getIndexType(e,n){let o=2;const u=this.un(n);return be.forEach(u,l=>this.cn(e,l).next(g=>{g?0!==o&&g.fields.length<function(N){let L=new wr(rr.comparator),z=!1;for(const X of N.filters)for(const me of X.getFlattenedFilters())me.field.isKeyField()||("array-contains"===me.op||"array-contains-any"===me.op?z=!0:L=L.add(me.field));for(const X of N.orderBy)X.field.isKeyField()||(L=L.add(X.field));return L.size+(z?1:0)}(l)&&(o=1):o=0})).next(()=>null!==n.limit&&u.length>1&&2===o?1:o)}dn(e,n){const o=new Wl;for(const u of qa(e)){const l=n.data.field(u.fieldPath);if(null==l)return null;const g=o.jt(u.kind);_l.St.ht(l,g)}return o.Ut()}In(e){const n=new Wl;return _l.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const o=new Wl;return _l.St.ht(fs(this.databaseId,n),o.jt(function(l){const g=qa(l);return 0===g.length?0:g[g.length-1].kind}(e))),o.Ut()}hn(e,n,o){if(null===o)return[];let u=[];u.push(new Wl);let l=0;for(const g of qa(e)){const b=o[l++];for(const N of u)if(this.Rn(n,g.fieldPath)&&cc(b))u=this.Vn(u,g,b);else{const L=N.jt(g.kind);_l.St.ht(b,L)}}return this.mn(u)}ln(e,n,o){return this.hn(e,n,o.position)}mn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Ut();return n}Vn(e,n,o){const u=[...e],l=[];for(const g of o.arrayValue.values||[])for(const b of u){const N=new Wl;N.seed(b.Ut()),_l.St.ht(g,N.jt(n.kind)),l.push(N)}return l}Rn(e,n){return!!e.filters.find(o=>o instanceof Xt&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=rp(e),u=Wh(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(l=>{const g=[];return be.forEach(l,b=>u.get([b.indexId,this.uid]).next(N=>{g.push(function(z,X){const me=X?new fo(X.sequenceNumber,new Qi(Gl(X.readTime),new dt(rs(X.documentKey)),X.largestBatchId)):fo.empty(),Ue=z.fields.map(([ht,yt])=>new Mo(rr.fromServerFormat(ht),yt));return new Wa(z.indexId,z.collectionGroup,Ue,me)}(b,N))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const l=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==l?l:fn(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=rp(e),l=Wh(e);return this.fn(e).next(g=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(b=>be.forEach(b,N=>l.put(Z_(N.indexId,this.user,g,o)))))}updateIndexEntries(e,n){const o=new Map;return be.forEach(n,(u,l)=>{const g=o.get(u.collectionGroup);return(g?be.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(b=>(o.set(u.collectionGroup,b),be.forEach(b,N=>this.gn(e,u,N).next(L=>{const z=this.pn(l,N);return L.isEqual(z)?be.resolve():this.yn(e,l,N,L,z)}))))})}wn(e,n,o,u){return rh(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.An(o,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,o,u){return rh(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.An(o,n.key),n.key.path.toArray()])}gn(e,n,o){const u=rh(e);let l=new wr($c);return u.Y({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.An(o,n)])},(g,b)=>{l=l.add(new Lu(o.indexId,n,b.arrayValue,b.directionalValue))}).next(()=>l)}pn(e,n){let o=new wr($c);const u=this.dn(n,e);if(null==u)return o;const l=Ju(n);if(null!=l){const g=e.data.field(l.fieldPath);if(cc(g))for(const b of g.arrayValue.values||[])o=o.add(new Lu(n.indexId,e.key,this.In(b),u))}else o=o.add(new Lu(n.indexId,e.key,ql,u));return o}yn(e,n,o,u,l){Xe("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const g=[];return function(N,L,z,X,me){const Ue=N.getIterator(),ht=L.getIterator();let yt=Mc(Ue),St=Mc(ht);for(;yt||St;){let yn=!1,bn=!1;if(yt&&St){const gn=z(yt,St);gn<0?bn=!0:gn>0&&(yn=!0)}else null!=yt?bn=!0:yn=!0;yn?(X(St),St=Mc(ht)):bn?(me(yt),yt=Mc(Ue)):(yt=Mc(Ue),St=Mc(ht))}}(u,l,$c,b=>{g.push(this.wn(e,n,o,b))},b=>{g.push(this.Sn(e,n,o,b))}),be.waitFor(g)}fn(e){let n=1;return Wh(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,l)=>{l.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((g,b)=>$c(g,b)).filter((g,b,N)=>!b||0!==$c(g,N[b-1]));const u=[];u.push(e);for(const g of o){const b=$c(g,e),N=$c(g,n);if(0===b)u[0]=e.Ht();else if(b>0&&N<0)u.push(g),u.push(g.Ht());else if(N>0)break}u.push(n);const l=[];for(let g=0;g<u.length;g+=2){if(this.bn(u[g],u[g+1]))return[];l.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,ql,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,ql,[]]))}return l}bn(e,n){return $c(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(ih)}getMinOffset(e,n){return be.mapArray(this.un(n),o=>this.cn(e,o).next(u=>u||wt())).next(ih)}}function np(s){return Mi(s,"collectionParents")}function rh(s){return Mi(s,"indexEntries")}function rp(s){return Mi(s,"indexConfiguration")}function Wh(s){return Mi(s,"indexState")}function ih(s){st(0!==s.length);let e=s[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<s.length;o++){const u=s[o].indexState.offset;va(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new Qi(e.readTime,e.documentKey,n)}const Y_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Us{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Us(e,Us.DEFAULT_COLLECTION_PERCENTILE,Us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ip(s,e,n){const o=s.store("mutations"),u=s.store("documentMutations"),l=[],g=IDBKeyRange.only(n.batchId);let b=0;const N=o.Y({range:g},(z,X,me)=>(b++,me.delete()));l.push(N.next(()=>{st(1===b)}));const L=[];for(const z of n.mutations){const X=Za(e,z.key.path,n.batchId);l.push(u.delete(X)),L.push(z.key)}return be.waitFor(l).next(()=>L)}function sp(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw wt();e=s.noDocument}return JSON.stringify(e).length}Us.DEFAULT_COLLECTION_PERCENTILE=10,Us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Us.DEFAULT=new Us(41943040,Us.DEFAULT_COLLECTION_PERCENTILE,Us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Us.DISABLED=new Us(-1,0,0);class qh{constructor(e,n,o,u){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=u,this.Dn={}}static ct(e,n,o,u){st(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new qh(l,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mc(e).Y({index:"userMutationsIndex",range:o},(u,l,g)=>{n=!1,g.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const l=yl(e),g=mc(e);return g.add({}).next(b=>{st("number"==typeof b);const N=new Gf(b,n,o,u),L=function(Ue,ht,yt){const St=yt.baseMutations.map(bn=>th(Ue.ut,bn)),yn=yt.mutations.map(bn=>th(Ue.ut,bn));return{userId:ht,batchId:yt.batchId,localWriteTimeMs:yt.localWriteTime.toMillis(),baseMutations:St,mutations:yn}}(this.serializer,this.userId,N),z=[];let X=new wr((me,Ue)=>fn(me.canonicalString(),Ue.canonicalString()));for(const me of u){const Ue=Za(this.userId,me.key.path,b);X=X.add(me.key.path.popLast()),z.push(g.put(L)),z.push(l.put(Ue,Rl))}return X.forEach(me=>{z.push(this.indexManager.addToCollectionParentIndex(e,me))}),e.addOnCommittedListener(()=>{this.Dn[b]=N.keys()}),be.waitFor(z).next(()=>N)})}lookupMutationBatch(e,n){return mc(e).get(n).next(o=>o?(st(o.userId===this.userId),Td(this.serializer,o)):null)}Cn(e,n){return this.Dn[n]?be.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.Dn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let l=null;return mc(e).Y({index:"userMutationsIndex",range:u},(g,b,N)=>{b.userId===this.userId&&(st(b.batchId>=o),l=Td(this.serializer,b)),N.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return mc(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(u,l,g)=>{o=l.batchId,g.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mc(e).W("userMutationsIndex",n).next(o=>o.map(u=>Td(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=Pi(this.userId,n.path),u=IDBKeyRange.lowerBound(o),l=[];return yl(e).Y({range:u},(g,b,N)=>{const[L,z,X]=g,me=rs(z);if(L===this.userId&&n.path.isEqual(me))return mc(e).get(X).next(Ue=>{if(!Ue)throw wt();st(Ue.userId===this.userId),l.push(Td(this.serializer,Ue))});N.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new wr(fn);const u=[];return n.forEach(l=>{const g=Pi(this.userId,l.path),b=IDBKeyRange.lowerBound(g),N=yl(e).Y({range:b},(L,z,X)=>{const[me,Ue,ht]=L,yt=rs(Ue);me===this.userId&&l.path.isEqual(yt)?o=o.add(ht):X.done()});u.push(N)}),be.waitFor(u).next(()=>this.vn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,l=Pi(this.userId,o),g=IDBKeyRange.lowerBound(l);let b=new wr(fn);return yl(e).Y({range:g},(N,L,z)=>{const[X,me,Ue]=N,ht=rs(me);X===this.userId&&o.isPrefixOf(ht)?ht.length===u&&(b=b.add(Ue)):z.done()}).next(()=>this.vn(e,b))}vn(e,n){const o=[],u=[];return n.forEach(l=>{u.push(mc(e).get(l).next(g=>{if(null===g)throw wt();st(g.userId===this.userId),o.push(Td(this.serializer,g))}))}),be.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return ip(e.ae,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),be.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return be.resolve();const o=IDBKeyRange.lowerBound(function(g){return[g]}(this.userId)),u=[];return yl(e).Y({range:o},(l,g,b)=>{if(l[0]===this.userId){const N=rs(l[1]);u.push(N)}else b.done()}).next(()=>{st(0===u.length)})})}containsKey(e,n){return op(e,this.userId,n)}Mn(e){return qg(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function op(s,e,n){const o=Pi(e,n.path),u=o[1],l=IDBKeyRange.lowerBound(o);let g=!1;return yl(s).Y({range:l,J:!0},(b,N,L)=>{const[z,X,me]=b;z===e&&X===u&&(g=!0),L.done()}).next(()=>g)}function mc(s){return Mi(s,"mutations")}function yl(s){return Mi(s,"documentMutations")}function qg(s){return Mi(s,"mutationQueues")}class Kl{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Kl(0)}static Nn(){return new Kl(-1)}}class X_{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const o=new Kl(n.highestTargetId);return n.highestTargetId=o.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Nt.fromTimestamp(new kr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Bn(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.Ln(e,u)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(o=>(o.targetCount+=1,this.qn(n,o),this.Ln(e,o))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>vl(e).delete(n.targetId)).next(()=>this.Bn(e)).next(o=>(st(o.targetCount>0),o.targetCount-=1,this.Ln(e,o)))}removeTargets(e,n,o){let u=0;const l=[];return vl(e).Y((g,b)=>{const N=nh(b);N.sequenceNumber<=n&&null===o.get(N.targetId)&&(u++,l.push(this.removeTargetData(e,N)))}).next(()=>be.waitFor(l)).next(()=>u)}forEachTarget(e,n){return vl(e).Y((o,u)=>{const l=nh(u);n(l)})}Bn(e){return ap(e).get("targetGlobalKey").next(n=>(st(null!==n),n))}Ln(e,n){return ap(e).put("targetGlobalKey",n)}kn(e,n){return vl(e).put(Jf(this.serializer,n))}qn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=ra(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let l=null;return vl(e).Y({range:u,index:"queryTargetsIndex"},(g,b,N)=>{const L=nh(b);ll(n,L.target)&&(l=L,N.done())}).next(()=>l)}addMatchingKeys(e,n,o){const u=[],l=ru(e);return n.forEach(g=>{const b=Qn(g.path);u.push(l.put({targetId:o,path:b})),u.push(this.referenceDelegate.addReference(e,o,g))}),be.waitFor(u)}removeMatchingKeys(e,n,o){const u=ru(e);return be.forEach(n,l=>{const g=Qn(l.path);return be.waitFor([u.delete([o,g]),this.referenceDelegate.removeReference(e,o,l)])})}removeMatchingKeysForTargetId(e,n){const o=ru(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=ru(e);let l=it();return u.Y({range:o,J:!0},(g,b,N)=>{const L=rs(g[1]),z=new dt(L);l=l.add(z)}).next(()=>l)}containsKey(e,n){const o=Qn(n.path),u=IDBKeyRange.bound([o],[pi(o)],!1,!0);let l=0;return ru(e).Y({index:"documentTargetsIndex",J:!0,range:u},([g,b],N,L)=>{0!==g&&(l++,L.done())}).next(()=>l>0)}_t(e,n){return vl(e).get(n).next(o=>o?nh(o):null)}}function vl(s){return Mi(s,"targets")}function ap(s){return Mi(s,"targetGlobal")}function ru(s){return Mi(s,"targetDocuments")}function J_([s,e],[n,o]){const u=fn(s,n);return 0===u?fn(e,o):u}class _E{constructor(e){this.Qn=e,this.buffer=new wr(J_),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();J_(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class yE{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;Xe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ne.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){R(o)?Xe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Tu(o)}yield n.Gn(3e5)}))}}class up{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return be.resolve(we._e);const o=new _E(n);return this.zn.forEachTarget(e,u=>o.Un(u.sequenceNumber)).next(()=>this.zn.Hn(e,u=>o.Un(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.zn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(Y_)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y_):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let o,u,l,g,b,N,L;const z=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(X=>(X>this.params.maximumSequenceNumbersToCollect?(Xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${X}`),u=this.params.maximumSequenceNumbersToCollect):u=X,g=Date.now(),this.nthSequenceNumber(e,u))).next(X=>(o=X,b=Date.now(),this.removeTargets(e,o,n))).next(X=>(l=X,N=Date.now(),this.removeOrphanedDocuments(e,o))).next(X=>(L=Date.now(),Qr()<=Ze.in.DEBUG&&Xe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-z}ms\n\tDetermined least recently used ${u} in `+(b-g)+`ms\n\tRemoved ${l} targets in `+(N-b)+`ms\n\tRemoved ${X} documents in `+(L-N)+`ms\nTotal Duration: ${L-z}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:l,documentsRemoved:X})))}}class ey{constructor(e,n){this.db=e,this.garbageCollector=function cp(s,e){return new up(s,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}Yn(e){let n=0;return this.Hn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(o,u)=>n(u))}addReference(e,n,o){return Kh(e,o)}removeReference(e,n,o){return Kh(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return Kh(e,n)}Xn(e,n){return function(u,l){let g=!1;return qg(u).Z(b=>op(u,b,l).next(N=>(N&&(g=!0),be.resolve(!N)))).next(()=>g)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let l=0;return this.Zn(e,(g,b)=>{if(b<=n){const N=this.Xn(e,g).next(L=>{if(!L)return l++,o.getEntry(e,g).next(()=>(o.removeEntry(g,Nt.min()),ru(e).delete([0,Qn(g.path)])))});u.push(N)}}).next(()=>be.waitFor(u)).next(()=>o.apply(e)).next(()=>l)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return Kh(e,n)}Zn(e,n){const o=ru(e);let u,l=we._e;return o.Y({index:"documentTargetsIndex"},([g,b],{path:N,sequenceNumber:L})=>{0===g?(l!==we._e&&n(new dt(rs(u)),l),l=L,u=N):l=we._e}).next(()=>{l!==we._e&&n(new dt(rs(u)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Kh(s,e){return ru(s).put((u=s.currentSequenceNumber,{targetId:0,path:Qn(e.path),sequenceNumber:u}));var u}class Kg{constructor(){this.changes=new m(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?be.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ty{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return Ad(e).put(o)}removeEntry(e,n,o){return Ad(e).delete(function(l,g){const b=l.path.toArray();return[b.slice(0,b.length-2),b[b.length-2],Xf(g),b[b.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.er(e,o)))}getEntry(e,n){let o=Xr.newInvalidDocument(n);return Ad(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Zh(n))},(u,l)=>{o=this.tr(n,l)}).next(()=>o)}nr(e,n){let o={size:0,document:Xr.newInvalidDocument(n)};return Ad(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Zh(n))},(u,l)=>{o={document:this.tr(n,l),size:sp(l)}}).next(()=>o)}getEntries(e,n){let o=P();return this.rr(e,n,(u,l)=>{const g=this.tr(u,l);o=o.insert(u,g)}).next(()=>o)}ir(e,n){let o=P(),u=new Ot(dt.comparator);return this.rr(e,n,(l,g)=>{const b=this.tr(l,g);o=o.insert(l,b),u=u.insert(l,sp(g))}).next(()=>({documents:o,sr:u}))}rr(e,n,o){if(n.isEmpty())return be.resolve();let u=new wr(sh);n.forEach(N=>u=u.add(N));const l=IDBKeyRange.bound(Zh(u.first()),Zh(u.last())),g=u.getIterator();let b=g.getNext();return Ad(e).Y({index:"documentKeyIndex",range:l},(N,L,z)=>{const X=dt.fromSegments([...L.prefixPath,L.collectionGroup,L.documentId]);for(;b&&sh(b,X)<0;)o(b,null),b=g.getNext();b&&b.isEqual(X)&&(o(b,L),b=g.hasNext()?g.getNext():null),b?z.U(Zh(b)):z.done()}).next(()=>{for(;b;)o(b,null),b=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,n,o,u,l){const g=n.path,b=[g.popLast().toArray(),g.lastSegment(),Xf(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],N=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ad(e).W(IDBKeyRange.bound(b,N,!0)).next(L=>{l?.incrementDocumentReadCount(L.length);let z=P();for(const X of L){const me=this.tr(dt.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);me.isFoundDocument()&&(Uc(n,me)||u.has(me.key))&&(z=z.insert(me.key,me))}return z})}getAllFromCollectionGroup(e,n,o,u){let l=P();const g=El(n,o),b=El(n,Qi.max());return Ad(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,b,!0)},(N,L,z)=>{const X=this.tr(dt.fromSegments(L.prefixPath.concat(L.collectionGroup,L.documentId)),L);l=l.insert(X.key,X),l.size===u&&z.done()}).next(()=>l)}newChangeBuffer(e){return new vE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return ry(e).get("remoteDocumentGlobalKey").next(n=>(st(!!n),n))}er(e,n){return ry(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const o=function W_(s,e){let n;if(e.document)n=B_(s.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=dt.fromSegments(e.noDocument.path),u=Gl(e.noDocument.readTime);n=Xr.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return wt();{const o=dt.fromSegments(e.unknownDocument.path),u=Gl(e.unknownDocument.version);n=Xr.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(u){const l=new kr(u[0],u[1]);return Nt.fromTimestamp(l)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual(Nt.min()))return o}return Xr.newInvalidDocument(e)}}function ny(s){return new ty(s)}class vE extends Kg{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new m(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new wr((l,g)=>fn(l.canonicalString(),g.canonicalString()));return this.changes.forEach((l,g)=>{const b=this.ar.get(l);if(n.push(this._r.removeEntry(e,l,b.readTime)),g.isValidDocument()){const N=Yf(this._r.serializer,g);u=u.add(l.path.popLast());const L=sp(N);o+=L-b.size,n.push(this._r.addEntry(e,l,N))}else if(o-=b.size,this.trackRemovals){const N=Yf(this._r.serializer,g.convertToNoDocument(Nt.min()));n.push(this._r.addEntry(e,l,N))}}),u.forEach(l=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,l))}),n.push(this._r.updateMetadata(e,o)),be.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(o=>(this.ar.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:o,sr:u})=>(u.forEach((l,g)=>{this.ar.set(l,{size:g,readTime:o.get(l).readTime})}),o))}}function ry(s){return Mi(s,"remoteDocumentGlobal")}function Ad(s){return Mi(s,"remoteDocumentsV14")}function Zh(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function El(s,e){const n=e.documentKey.path.toArray();return[s,Xf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function sh(s,e){const n=s.path.toArray(),o=e.path.toArray();let u=0;for(let l=0;l<n.length-2&&l<o.length-2;++l)if(u=fn(n[l],o[l]),u)return u;return u=fn(n.length,o.length),u||(u=fn(n[n.length-2],o[o.length-2]),u||fn(n[n.length-1],o[o.length-1]))}class EE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class IE{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==o&&sa(o.mutation,u,Ts.empty(),kr.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,it()).next(()=>o))}getLocalViewOfDocuments(e,n,o=it()){const u=ae();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(l=>{let g=W();return l.forEach((b,N)=>{g=g.insert(b,N.overlayedDocument)}),g}))}getOverlayedDocuments(e,n){const o=ae();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,it()))}populateOverlays(e,n,o){const u=[];return o.forEach(l=>{n.has(l)||u.push(l)}),this.documentOverlayCache.getOverlays(e,u).next(l=>{l.forEach((g,b)=>{n.set(g,b)})})}computeViews(e,n,o,u){let l=P();const g=et(),b=et();return n.forEach((N,L)=>{const z=o.get(L.key);u.has(L.key)&&(void 0===z||z.mutation instanceof fr)?l=l.insert(L.key,L):void 0!==z?(g.set(L.key,z.mutation.getFieldMask()),sa(z.mutation,L,z.mutation.getFieldMask(),kr.now())):g.set(L.key,Ts.empty())}),this.recalculateAndSaveOverlays(e,l).next(N=>(N.forEach((L,z)=>g.set(L,z)),n.forEach((L,z)=>{var X;return b.set(L,new EE(z,null!==(X=g.get(L))&&void 0!==X?X:null))}),b))}recalculateAndSaveOverlays(e,n){const o=et();let u=new Ot((g,b)=>g-b),l=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(g=>{for(const b of g)b.keys().forEach(N=>{const L=n.get(N);if(null===L)return;let z=o.get(N)||Ts.empty();z=b.applyToLocalView(L,z),o.set(N,z);const X=(u.get(b.batchId)||it()).add(N);u=u.insert(b.batchId,X)})}).next(()=>{const g=[],b=u.getReverseIterator();for(;b.hasNext();){const N=b.getNext(),L=N.key,z=N.value,X=_e();z.forEach(me=>{if(!l.has(me)){const Ue=Cs(n.get(me),o.get(me));null!==Ue&&X.set(me,Ue),l=l.add(me)}}),g.push(this.documentOverlayCache.saveOverlays(e,L,X))}return be.waitFor(g)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,u){return dt.isDocumentKey((g=n).path)&&null===g.collectionGroup&&0===g.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):Vl(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u);var g}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(l=>{const g=u-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-l.size):be.resolve(ae());let b=-1,N=l;return g.next(L=>be.forEach(L,(z,X)=>(b<X.largestBatchId&&(b=X.largestBatchId),l.get(z)?be.resolve():this.remoteDocumentCache.getEntry(e,z).next(me=>{N=N.insert(z,me)}))).next(()=>this.populateOverlays(e,L,l)).next(()=>this.computeViews(e,N,L,it())).next(z=>({batchId:b,changes:J(z)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new dt(n)).next(o=>{let u=W();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const l=n.collectionGroup;let g=W();return this.indexManager.getCollectionParents(e,l).next(b=>be.forEach(b,N=>{const L=(X=n,me=N.child(l),new ia(me,null,X.explicitOrderBy.slice(),X.filters.slice(),X.limit,X.limitType,X.startAt,X.endAt));var X,me;return this.getDocumentsMatchingCollectionQuery(e,L,o,u).next(z=>{z.forEach((X,me)=>{g=g.insert(X,me)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,n,o,u){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(g=>(l=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,l,u))).next(g=>{l.forEach((N,L)=>{const z=L.getKey();null===g.get(z)&&(g=g.insert(z,Xr.newInvalidDocument(z)))});let b=W();return g.forEach((N,L)=>{const z=l.get(N);void 0!==z&&sa(z.mutation,L,Ts.empty(),kr.now()),Uc(n,L)&&(b=b.insert(N,L))}),b})}}class iT{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return be.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(u=n).id,version:u.version,createTime:zi(u.createTime)}),be.resolve();var u}getNamedQuery(e,n){return be.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(u=n).name,query:q_(u.bundledQuery),readTime:zi(u.readTime)}),be.resolve();var u}}class sT{constructor(){this.overlays=new Ot(dt.comparator),this.lr=new Map}getOverlay(e,n){return be.resolve(this.overlays.get(n))}getOverlays(e,n){const o=ae();return be.forEach(n,u=>this.getOverlay(e,u).next(l=>{null!==l&&o.set(u,l)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,l)=>{this.lt(e,n,l)}),be.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.lr.get(o);return void 0!==u&&(u.forEach(l=>this.overlays=this.overlays.remove(l)),this.lr.delete(o)),be.resolve()}getOverlaysForCollection(e,n,o){const u=ae(),l=n.length+1,g=new dt(n.child("")),b=this.overlays.getIteratorFrom(g);for(;b.hasNext();){const N=b.getNext().value,L=N.getKey();if(!n.isPrefixOf(L.path))break;L.path.length===l&&N.largestBatchId>o&&u.set(N.getKey(),N)}return be.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let l=new Ot((L,z)=>L-z);const g=this.overlays.getIterator();for(;g.hasNext();){const L=g.getNext().value;if(L.getKey().getCollectionGroup()===n&&L.largestBatchId>o){let z=l.get(L.largestBatchId);null===z&&(z=ae(),l=l.insert(L.largestBatchId,z)),z.set(L.getKey(),L)}}const b=ae(),N=l.getIterator();for(;N.hasNext()&&(N.getNext().value.forEach((L,z)=>b.set(L,z)),!(b.size()>=u)););return be.resolve(b)}lt(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const g=this.lr.get(u.largestBatchId).delete(o.key);this.lr.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(o.key,new Vs(n,o));let l=this.lr.get(n);void 0===l&&(l=it(),this.lr.set(n,l)),this.lr.set(n,l.add(o.key))}}class iy{constructor(){this.hr=new wr(Eo.Pr),this.Ir=new wr(Eo.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const o=new Eo(e,n);this.hr=this.hr.add(o),this.Ir=this.Ir.add(o)}Er(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.dr(new Eo(e,n))}Ar(e,n){e.forEach(o=>this.removeReference(o,n))}Rr(e){const n=new dt(new Vn([])),o=new Eo(n,e),u=new Eo(n,e+1),l=[];return this.Ir.forEachInRange([o,u],g=>{this.dr(g),l.push(g.key)}),l}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new dt(new Vn([])),o=new Eo(n,e),u=new Eo(n,e+1);let l=it();return this.Ir.forEachInRange([o,u],g=>{l=l.add(g.key)}),l}containsKey(e){const n=new Eo(e,0),o=this.hr.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class Eo{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return dt.comparator(e.key,n.key)||fn(e.gr,n.gr)}static Tr(e,n){return fn(e.gr,n.gr)||dt.comparator(e.key,n.key)}}class sy{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new wr(Eo.Pr)}checkEmpty(e){return be.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const l=this.pr;this.pr++;const g=new Gf(l,n,o,u);this.mutationQueue.push(g);for(const b of u)this.yr=this.yr.add(new Eo(b.key,l)),this.indexManager.addToCollectionParentIndex(e,b.key.path.popLast());return be.resolve(g)}lookupMutationBatch(e,n){return be.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.Sr(n+1),l=u<0?0:u;return be.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Eo(n,0),u=new Eo(n,Number.POSITIVE_INFINITY),l=[];return this.yr.forEachInRange([o,u],g=>{const b=this.wr(g.gr);l.push(b)}),be.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new wr(fn);return n.forEach(u=>{const l=new Eo(u,0),g=new Eo(u,Number.POSITIVE_INFINITY);this.yr.forEachInRange([l,g],b=>{o=o.add(b.gr)})}),be.resolve(this.br(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let l=o;dt.isDocumentKey(l)||(l=l.child(""));const g=new Eo(new dt(l),0);let b=new wr(fn);return this.yr.forEachWhile(N=>{const L=N.key.path;return!!o.isPrefixOf(L)&&(L.length===u&&(b=b.add(N.gr)),!0)},g),be.resolve(this.br(b))}br(e){const n=[];return e.forEach(o=>{const u=this.wr(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){st(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let o=this.yr;return be.forEach(n.mutations,u=>{const l=new Eo(u.key,n.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.yr=o})}Fn(e){}containsKey(e,n){const o=new Eo(n,0),u=this.yr.firstAfterOrEqual(o);return be.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return be.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class wE{constructor(e){this.Cr=e,this.docs=new Ot(dt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),l=u?u.size:0,g=this.Cr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:g}),this.size+=g-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return be.resolve(o?o.document.mutableCopy():Xr.newInvalidDocument(n))}getEntries(e,n){let o=P();return n.forEach(u=>{const l=this.docs.get(u);o=o.insert(u,l?l.document.mutableCopy():Xr.newInvalidDocument(u))}),be.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let l=P();const g=n.path,b=new dt(g.child("")),N=this.docs.getIteratorFrom(b);for(;N.hasNext();){const{key:L,value:{document:z}}=N.getNext();if(!g.isPrefixOf(L.path))break;L.path.length>g.length+1||va(Al(z),o)<=0||(u.has(z.key)||Uc(n,z))&&(l=l.insert(z.key,z.mutableCopy()))}return be.resolve(l)}getAllFromCollectionGroup(e,n,o,u){wt()}vr(e,n){return be.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new TE(this)}getSize(e){return be.resolve(this.size)}}class TE extends Kg{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this._r.addEntry(e,u)):this._r.removeEntry(o)}),be.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class DE{constructor(e){this.persistence=e,this.Fr=new m(n=>ra(n),ll),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.Mr=0,this.Or=new iy,this.targetCount=0,this.Nr=Kl.On()}forEachTarget(e,n){return this.Fr.forEach((o,u)=>n(u)),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Mr&&(this.Mr=n),be.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Kl(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,be.resolve()}updateTargetData(e,n){return this.kn(n),be.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,n,o){let u=0;const l=[];return this.Fr.forEach((g,b)=>{b.sequenceNumber<=n&&null===o.get(b.targetId)&&(this.Fr.delete(g),l.push(this.removeMatchingKeysForTargetId(e,b.targetId)),u++)}),be.waitFor(l).next(()=>u)}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,n){const o=this.Fr.get(n)||null;return be.resolve(o)}addMatchingKeys(e,n,o){return this.Or.Er(n,o),be.resolve()}removeMatchingKeys(e,n,o){this.Or.Ar(n,o);const u=this.persistence.referenceDelegate,l=[];return u&&n.forEach(g=>{l.push(u.markPotentiallyOrphaned(e,g))}),be.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),be.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Or.mr(n);return be.resolve(o)}containsKey(e,n){return be.resolve(this.Or.containsKey(n))}}class Zg{constructor(e,n){this.Br={},this.overlays={},this.Lr=new we(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new DE(this),this.indexManager=new mE,this.remoteDocumentCache=new wE(o=>this.referenceDelegate.Qr(o)),this.serializer=new G_(n),this.Kr=new iT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sT,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Br[e.toKey()];return o||(o=new sy(n,this.referenceDelegate),this.Br[e.toKey()]=o),o}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,o){Xe("MemoryPersistence","Starting transaction:",e);const u=new Qg(this.Lr.next());return this.referenceDelegate.$r(),o(u).next(l=>this.referenceDelegate.Ur(u).next(()=>l)).toPromise().then(l=>(u.raiseOnCommittedEvent(),l))}Wr(e,n){return be.or(Object.values(this.Br).map(o=>()=>o.containsKey(e,n)))}}class Qg extends zd{constructor(e){super(),this.currentSequenceNumber=e}}class Fu{constructor(e){this.persistence=e,this.Gr=new iy,this.zr=null}static jr(e){return new Fu(e)}get Hr(){if(this.zr)return this.zr;throw wt()}addReference(e,n,o){return this.Gr.addReference(o,n),this.Hr.delete(o.toString()),be.resolve()}removeReference(e,n,o){return this.Gr.removeReference(o,n),this.Hr.add(o.toString()),be.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),be.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(u=>this.Hr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(l=>this.Hr.add(l.toString()))}).next(()=>o.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.Hr,o=>{const u=dt.fromPath(o);return this.Jr(e,u).next(l=>{l||n.removeEntry(u,Nt.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(o=>{o?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return be.or([()=>be.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class oy{constructor(e){this.serializer=e}N(e,n,o,u){const l=new po("createOrUpgrade",n);var N;o<1&&u>=1&&(e.createObjectStore("owner"),(N=e).createObjectStore("mutationQueues",{keyPath:"userId"}),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tl,{unique:!0}),N.createObjectStore("documentMutations"),Yg(e),function(N){N.createObjectStore("remoteDocuments")}(e));let g=be.resolve();return o<3&&u>=3&&(0!==o&&(function(N){N.deleteObjectStore("targetDocuments"),N.deleteObjectStore("targets"),N.deleteObjectStore("targetGlobal")}(e),Yg(e)),g=g.next(()=>function(N){const L=N.store("targetGlobal"),z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Nt.min().toTimestamp(),targetCount:0};return L.put("targetGlobalKey",z)}(l))),o<4&&u>=4&&(0!==o&&(g=g.next(()=>function(N,L){return L.store("mutations").W().next(z=>{N.deleteObjectStore("mutations"),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tl,{unique:!0});const X=L.store("mutations"),me=z.map(Ue=>X.put(Ue));return be.waitFor(me)})}(e,l))),g=g.next(()=>{!function(N){N.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(g=g.next(()=>this.Zr(l))),o<6&&u>=6&&(g=g.next(()=>(function(N){N.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(l)))),o<7&&u>=7&&(g=g.next(()=>this.ei(l))),o<8&&u>=8&&(g=g.next(()=>this.ti(e,l))),o<9&&u>=9&&(g=g.next(()=>{!function(N){N.objectStoreNames.contains("remoteDocumentChanges")&&N.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(g=g.next(()=>this.ni(l))),o<11&&u>=11&&(g=g.next(()=>{(function(N){N.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(N){N.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(g=g.next(()=>{!function(N){const L=N.createObjectStore("documentOverlays",{keyPath:xh});L.createIndex("collectionPathOverlayIndex",nl,{unique:!1}),L.createIndex("collectionGroupOverlayIndex",kh,{unique:!1})}(e)})),o<13&&u>=13&&(g=g.next(()=>function(N){const L=N.createObjectStore("remoteDocumentsV14",{keyPath:Gd});L.createIndex("documentKeyIndex",ld),L.createIndex("collectionGroupIndex",rc)}(e)).next(()=>this.ri(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(g=g.next(()=>this.ii(e,l))),o<15&&u>=15&&(g=g.next(()=>function(N){N.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),N.createObjectStore("indexState",{keyPath:dd}).createIndex("sequenceNumberIndex",Du,{unique:!1}),N.createObjectStore("indexEntries",{keyPath:ic}).createIndex("documentKeyIndex",go,{unique:!1})}(e))),g}Xr(e){let n=0;return e.store("remoteDocuments").Y((o,u)=>{n+=sp(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Zr(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(u=>be.forEach(u,l=>{const g=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",g).next(b=>be.forEach(b,N=>{st(N.userId===l.userId);const L=Td(this.serializer,N);return ip(e,l.userId,L).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const l=[];return o.Y((g,b)=>{const N=new Vn(g),L=[0,Qn(N)];l.push(n.get(L).next(z=>z?be.resolve():n.put({targetId:0,path:Qn(N),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>be.waitFor(l))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:Ls});const o=n.store("collectionParents"),u=new Wg,l=g=>{if(u.add(g)){const b=g.lastSegment(),N=g.popLast();return o.put({collectionId:b,parent:Qn(N)})}};return n.store("remoteDocuments").Y({J:!0},(g,b)=>{const N=new Vn(g);return l(N.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([g,b,N],L)=>{const z=rs(b);return l(z.popLast())}))}ni(e){const n=e.store("targets");return n.Y((o,u)=>{const l=nh(u),g=Jf(this.serializer,l);return n.put(g)})}ri(e,n){const o=n.store("remoteDocuments"),u=[];return o.Y((l,g)=>{const b=n.store("remoteDocumentsV14"),N=(X=g,X.document?new dt(Vn.fromString(X.document.name).popFirst(5)):X.noDocument?dt.fromSegments(X.noDocument.path):X.unknownDocument?dt.fromSegments(X.unknownDocument.path):wt()).path.toArray(),L={prefixPath:N.slice(0,N.length-2),collectionGroup:N[N.length-2],documentId:N[N.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};var X;u.push(b.put(L))}).next(()=>be.waitFor(u))}ii(e,n){const o=n.store("mutations"),u=ny(this.serializer),l=new Zg(Fu.jr,this.serializer.ut);return o.W().next(g=>{const b=new Map;return g.forEach(N=>{var L;let z=null!==(L=b.get(N.userId))&&void 0!==L?L:it();Td(this.serializer,N).keys().forEach(X=>z=z.add(X)),b.set(N.userId,z)}),be.forEach(b,(N,L)=>{const z=new Ye(L),X=Dd.ct(this.serializer,z),me=l.getIndexManager(z),Ue=qh.ct(z,this.serializer,me,l.referenceDelegate);return new IE(u,Ue,X,me).recalculateAndSaveOverlaysForDocumentKeys(new Qa(n,we._e),N).next()})})}}function Yg(s){s.createObjectStore("targetDocuments",{keyPath:Cc}).createIndex("documentTargetsIndex",Ac,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Yn,{unique:!0}),s.createObjectStore("targetGlobal")}const lp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ay{constructor(e,n,o,u,l,g,b,N,L,z,X=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.si=l,this.window=g,this.document=b,this.oi=L,this._i=z,this.ai=X,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=me=>Promise.resolve(),!ay.D())throw new Ke(je.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ey(this,u),this.Ii=n+"main",this.serializer=new G_(N),this.Ti=new ks(this.Ii,this.ai,new oy(this.serializer)),this.qr=new X_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ny(this.serializer),this.Kr=new hE,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===z&&yr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ke(je.FAILED_PRECONDITION,lp);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new we(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var o=(0,ne.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,ne.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,ne.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Xg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(R(e))return Xe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Xe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return dp(e).get("owner").next(n=>be.resolve(this.wi(n)))}Si(e){return Xg(e).delete(this.clientId)}bi(){var e=this;return(0,ne.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Mi(o,"clientMetadata");return u.W().next(l=>{const g=e.Ci(l,18e5),b=l.filter(N=>-1===g.indexOf(N));return be.forEach(b,N=>u.delete(N.clientId)).next(()=>b)})}).catch(()=>[]);if(e.Ei)for(const o of n)e.Ei.removeItem(e.vi(o.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?be.resolve(!0):dp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new Ke(je.FAILED_PRECONDITION,lp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xg(e).W().next(o=>void 0===this.Ci(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Xe("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,ne.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new Qa(n,we._e);return e.pi(o).next(()=>e.Si(o))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(o=>this.Di(o.updateTimeMs,n)&&!this.Fi(o.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Xg(e).W().next(n=>this.Ci(n,18e5).map(o=>o.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return qh.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Q_(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Dd.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,o){Xe("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",l=15===(N=this.ai)?Rc:14===N?sc:13===N?bc:12===N?Su:11===N?mo:void wt();var N;let g;return this.Ti.runTransaction(e,u,l,b=>(g=new Qa(b,this.Lr?this.Lr.next():we._e),"readwrite-primary"===n?this.fi(g).next(N=>!!N||this.gi(g)).next(N=>{if(!N)throw yr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new Ke(je.FAILED_PRECONDITION,tc);return o(g)}).next(N=>this.yi(g).next(()=>N)):this.Li(g).next(()=>o(g)))).then(b=>(g.raiseOnCommittedEvent(),b))}Li(e){return dp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Ke(je.FAILED_PRECONDITION,lp)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dp(e).put("owner",n)}static D(){return ks.D()}pi(e){const n=dp(e);return n.get("owner").next(o=>this.wi(o)?(Xe("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):be.resolve())}Di(e,n){const o=Date.now();return!(e<o-n||e>o&&(yr(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,ot.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const o=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return Xe("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return yr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){yr("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function dp(s){return Mi(s,"owner")}function Xg(s){return Mi(s,"clientMetadata")}function Qh(s,e){let n=s.projectId;return s.isDefaultDatabase||(n+="."+s.database),"firestore/"+e+"/"+n+"/"}class Yh{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.ki=o,this.qi=u}static Qi(e,n){let o=it(),u=it();for(const l of n.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:u=u.add(l.doc.key)}return new Yh(e,n.fromCache,o,u)}}class oT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class SE{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,o,u){const l={result:null};return this.zi(e,n).next(g=>{l.result=g}).next(()=>{if(!l.result)return this.ji(e,n,u,o).next(g=>{l.result=g})}).next(()=>{if(l.result)return;const g=new oT;return this.Hi(e,n,g).next(b=>{if(l.result=b,this.$i)return this.Ji(e,n,g,b.size)})}).next(()=>l.result)}Ji(e,n,o,u){return o.documentReadCount<this.Ui?(Qr()<=Ze.in.DEBUG&&Xe("QueryEngine","SDK will not create cache indexes for query:",Mu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),be.resolve()):(Qr()<=Ze.in.DEBUG&&Xe("QueryEngine","Query:",Mu(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Wi*u?(Qr()<=Ze.in.DEBUG&&Xe("QueryEngine","The SDK decides to create cache indexes for query:",Mu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ds(n))):be.resolve())}zi(e,n){if(xo(n))return be.resolve(null);let o=Ds(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=Bl(n,null,"F"),o=Ds(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(l=>{const g=it(...l);return this.Gi.getDocuments(e,g).next(b=>this.indexManager.getMinOffset(e,o).next(N=>{const L=this.Yi(n,b);return this.Zi(n,L,g,N.readTime)?this.zi(e,Bl(n,null,"F")):this.Xi(e,L,n,N)}))})))}ji(e,n,o,u){return xo(n)||u.isEqual(Nt.min())?be.resolve(null):this.Gi.getDocuments(e,o).next(l=>{const g=this.Yi(n,l);return this.Zi(n,g,o,u)?be.resolve(null):(Qr()<=Ze.in.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Mu(n)),this.Xi(e,g,n,cd(u,-1)).next(b=>b))})}Yi(e,n){let o=new wr(E(e));return n.forEach((u,l)=>{Uc(e,l)&&(o=o.add(l))}),o}Zi(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const l="F"===e.limitType?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(u)>0)}Hi(e,n,o){return Qr()<=Ze.in.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",Mu(n)),this.Gi.getDocumentsMatchingQuery(e,n,Qi.min(),o)}Xi(e,n,o,u){return this.Gi.getDocumentsMatchingQuery(e,o,u).next(l=>(n.forEach(g=>{l=l.insert(g.key,g)}),l))}}class uy{constructor(e,n,o,u){this.persistence=e,this.es=n,this.serializer=u,this.ts=new Ot(fn),this.ns=new m(l=>ra(l),ll),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(o)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IE(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function cy(s,e,n,o){return new uy(s,e,n,o)}function ly(s,e){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,ne.Z)(function*(s,e){const n=Tt(s);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(l=>(u=l,n.os(e),n.mutationQueue.getAllMutationBatches(o))).next(l=>{const g=[],b=[];let N=it();for(const L of u){g.push(L.batchId);for(const z of L.mutations)N=N.add(z.key)}for(const L of l){b.push(L.batchId);for(const z of L.mutations)N=N.add(z.key)}return n.localDocuments.getDocuments(o,N).next(L=>({_s:L,removedBatchIds:g,addedBatchIds:b}))})})}),Jg.apply(this,arguments)}function dy(s){const e=Tt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function em(s,e,n){let o=it(),u=it();return n.forEach(l=>o=o.add(l)),e.getEntries(s,o).next(l=>{let g=P();return n.forEach((b,N)=>{const L=l.get(b);N.isFoundDocument()!==L.isFoundDocument()&&(u=u.add(b)),N.isNoDocument()&&N.version.isEqual(Nt.min())?(e.removeEntry(b,N.readTime),g=g.insert(b,N)):!L.isValidDocument()||N.version.compareTo(L.version)>0||0===N.version.compareTo(L.version)&&L.hasPendingWrites?(e.addEntry(N),g=g.insert(b,N)):Xe("LocalStore","Ignoring outdated watch update for ",b,". Current version:",L.version," Watch version:",N.version)}),{us:g,cs:u}})}function AE(s,e){const n=Tt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function oh(s,e){const n=Tt(s);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.qr.getTargetData(o,e).next(l=>l?(u=l,be.resolve(u)):n.qr.allocateTargetId(o).next(g=>(u=new zl(e,g,"TargetPurposeListen",o.currentSequenceNumber),n.qr.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.ts.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.ts=n.ts.insert(o.targetId,o),n.ns.set(e,o.targetId)),o})}function bd(s,e,n){return ah.apply(this,arguments)}function ah(){return ah=(0,ne.Z)(function*(s,e,n){const o=Tt(s),u=o.ts.get(e),l=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",l,g=>o.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!R(g))throw g;Xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}o.ts=o.ts.remove(e),o.ns.delete(u.target)}),ah.apply(this,arguments)}function hp(s,e,n){const o=Tt(s);let u=Nt.min(),l=it();return o.persistence.runTransaction("Execute query","readwrite",g=>function(N,L,z){const X=Tt(N),me=X.ns.get(z);return void 0!==me?be.resolve(X.ts.get(me)):X.qr.getTargetData(L,z)}(o,g,Ds(e)).next(b=>{if(b)return u=b.lastLimboFreeSnapshotVersion,o.qr.getMatchingKeysForTargetId(g,b.targetId).next(N=>{l=N})}).next(()=>o.es.getDocumentsMatchingQuery(g,e,n?u:Nt.min(),n?l:it())).next(b=>(Rd(o,dl(e),b),{documents:b,ls:l})))}function fp(s,e){const n=Tt(s),o=Tt(n.qr),u=n.ts.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",l=>o._t(l,e).next(g=>g?g.target:null))}function fy(s,e){const n=Tt(s),o=n.rs.get(e)||Nt.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.ss.getAllFromCollectionGroup(u,e,cd(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Rd(n,e,u),u))}function Rd(s,e,n){let o=s.rs.get(e)||Nt.min();n.forEach((u,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)}),s.rs.set(e,o)}function tm(){return tm=(0,ne.Z)(function*(s,e,n,o){const u=Tt(s);let l=it(),g=P();for(const L of n){const z=e.hs(L.metadata.name);L.document&&(l=l.add(z));const X=e.Ps(L);X.setReadTime(e.Is(L.metadata.readTime)),g=g.insert(z,X)}const b=u.ss.newChangeBuffer({trackRemovals:!0}),N=yield oh(u,(z=o,Ds(Vc(Vn.fromString(`__bundle__/docs/${z}`)))));var z;return u.persistence.runTransaction("Apply bundle documents","readwrite",L=>em(L,b,g).next(z=>(b.apply(L),z)).next(z=>u.qr.removeMatchingKeysForTargetId(L,N.targetId).next(()=>u.qr.addMatchingKeys(L,l,N.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(L,z.us,z.cs)).next(()=>z.us)))}),tm.apply(this,arguments)}function nm(s,e){return pp.apply(this,arguments)}function pp(){return pp=(0,ne.Z)(function*(s,e,n=it()){const o=yield oh(s,Ds(q_(e.bundledQuery))),u=Tt(s);return u.persistence.runTransaction("Save named query","readwrite",l=>{const g=zi(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return u.Kr.saveNamedQuery(l,e);const b=o.withResumeToken(Hi.EMPTY_BYTE_STRING,g);return u.ts=u.ts.insert(b.targetId,b),u.qr.updateTargetData(l,b).next(()=>u.qr.removeMatchingKeysForTargetId(l,o.targetId)).next(()=>u.qr.addMatchingKeys(l,n,o.targetId)).next(()=>u.Kr.saveNamedQuery(l,e))})}),pp.apply(this,arguments)}function py(s,e){return`firestore_clients_${s}_${e}`}function gy(s,e,n){let o=`firestore_mutations_${s}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function rm(s,e){return`firestore_targets_${s}_${e}`}class gp{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Ts(e,n,o){const u=JSON.parse(o);let l,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(l=new Ke(u.error.code,u.error.message))),g?new gp(e,n,u.state,l):(yr("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uh{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Ts(e,n){const o=JSON.parse(n);let u,l="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new Ke(o.error.code,o.error.message))),l?new uh(e,o.state,u):(yr("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class im{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,l=Mt();for(let g=0;u&&g<o.activeTargetIds.length;++g)u=Cn(o.activeTargetIds[g]),l=l.add(o.activeTargetIds[g]);return u?new im(e,l):(yr("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class my{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new my(n.clientId,n.onlineState):(yr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Pd{constructor(){this.activeTargetIds=Mt()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sm{constructor(e,n,o,u,l){this.window=e,this.si=n,this.persistenceKey=o,this.Rs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Ot(fn),this.started=!1,this.ps=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ys=py(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new Pd),this.Ss=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(N){return`firestore_bundle_loaded_v2_${N}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ne.Z)(function*(){const n=yield e.syncEngine.Bi();for(const u of n){if(u===e.Rs)continue;const l=e.getItem(py(e.persistenceKey,u));if(l){const g=im.Ts(u,l);g&&(e.gs=e.gs.insert(g.clientId,g))}}e.Fs();const o=e.storage.getItem(e.Cs);if(o){const u=e.Ms(o);u&&e.xs(u)}for(const u of e.ps)e.fs(u);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,o){this.Ns(e,n,o),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(rm(this.persistenceKey,e));if(o){const u=uh.Ts(e,o);u&&(n=u.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(rm(this.persistenceKey,e))}updateQueryState(e,n,o){this.ks(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Bs(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Xe("SharedClientState","READ",e,n),n}setItem(e,n){Xe("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Xe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const o=e;if(o.storageArea===this.storage){if(Xe("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ys)return void yr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,ne.Z)(function*(){if(n.started){if(null!==o.key)if(n.Ss.test(o.key)){if(null==o.newValue){const u=n.Ks(o.key);return n.$s(u,null)}{const u=n.Us(o.key,o.newValue);if(u)return n.$s(u.clientId,u)}}else if(n.bs.test(o.key)){if(null!==o.newValue){const u=n.Ws(o.key,o.newValue);if(u)return n.Gs(u)}}else if(n.Ds.test(o.key)){if(null!==o.newValue){const u=n.zs(o.key,o.newValue);if(u)return n.js(u)}}else if(o.key===n.Cs){if(null!==o.newValue){const u=n.Ms(o.newValue);if(u)return n.xs(u)}}else if(o.key===n.ws){const u=function(g){let b=we._e;if(null!=g)try{const N=JSON.parse(g);st("number"==typeof N),b=N}catch(N){yr("SharedClientState","Failed to read sequence number from WebStorage",N)}return b}(o.newValue);u!==we._e&&n.sequenceNumberHandler(u)}else if(o.key===n.vs){const u=n.Hs(o.newValue);yield Promise.all(u.map(l=>n.syncEngine.Js(l)))}}else n.ps.push(o)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,o){const u=new gp(this.currentUser,e,n,o),l=gy(this.persistenceKey,this.currentUser,e);this.setItem(l,u.Es())}Bs(e){const n=gy(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,o){const u=rm(this.persistenceKey,e),l=new uh(e,n,o);this.setItem(u,l.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const o=this.Ks(e);return im.Ts(o,n)}Ws(e,n){const o=this.bs.exec(e),u=Number(o[1]);return gp.Ts(new Ye(void 0!==o[2]?o[2]:null),u,n)}zs(e,n){const o=this.Ds.exec(e),u=Number(o[1]);return uh.Ts(u,n)}Ms(e){return my.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,ne.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);Xe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const o=n?this.gs.insert(e,n):this.gs.remove(e),u=this.Os(this.gs),l=this.Os(o),g=[],b=[];return l.forEach(N=>{u.has(N)||g.push(N)}),u.forEach(N=>{l.has(N)||b.push(N)}),this.syncEngine.Xs(g,b).then(()=>{this.gs=o})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=Mt();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class _y{constructor(){this.eo=new Pd,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,o){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Pd,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class RE{ro(e){}shutdown(){}}class om{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let mp=null;function am(){return null===mp?mp=268435456+Math.round(2147483648*Math.random()):mp++,"0x"+mp.toString(16)}const PE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ME{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Fo="WebChannelConnection";class NE extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.mo=o+"://"+n.host,this.fo=`projects/${u}/databases/${l}`,this.po="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${l}`}get yo(){return!1}wo(n,o,u,l,g){const b=am(),N=this.So(n,o);Xe("RestConnection",`Sending RPC '${n}' ${b}:`,N,u);const L={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(L,l,g),this.Do(n,N,L,u).then(z=>(Xe("RestConnection",`Received RPC '${n}' ${b}: `,z),z),z=>{throw _n("RestConnection",`RPC '${n}' ${b} failed with error: `,z,"url: ",N,"request:",u),z})}Co(n,o,u,l,g,b){return this.wo(n,o,u,l,g)}bo(n,o,u){n["X-Goog-Api-Client"]="gl-js/ fire/"+Ut,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((l,g)=>n[g]=l),u&&u.headers.forEach((l,g)=>n[g]=l)}So(n,o){return`${this.mo}/v1/${o}:${PE[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,o,u){const l=am();return new Promise((g,b)=>{const N=new ui;N.setWithCredentials(!0),N.listenOnce(Vt.COMPLETE,()=>{try{switch(N.getLastErrorCode()){case nt.NO_ERROR:const z=N.getResponseJson();Xe(Fo,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(z)),g(z);break;case nt.TIMEOUT:Xe(Fo,`RPC '${e}' ${l} timed out`),b(new Ke(je.DEADLINE_EXCEEDED,"Request time out"));break;case nt.HTTP_ERROR:const X=N.getStatus();if(Xe(Fo,`RPC '${e}' ${l} failed with status:`,X,"response text:",N.getResponseText()),X>0){let me=N.getResponseJson();Array.isArray(me)&&(me=me[0]);const Ue=me?.error;if(Ue&&Ue.status&&Ue.message){const ht=function(St){const yn=St.toLowerCase().replace(/_/g,"-");return Object.values(je).indexOf(yn)>=0?yn:je.UNKNOWN}(Ue.status);b(new Ke(ht,Ue.message))}else b(new Ke(je.UNKNOWN,"Server responded with status "+N.getStatus()))}else b(new Ke(je.UNAVAILABLE,"Connection failed."));break;default:wt()}}finally{Xe(Fo,`RPC '${e}' ${l} completed.`)}});const L=JSON.stringify(u);Xe(Fo,`RPC '${e}' ${l} sending request:`,u),N.send(n,"POST",L,o,15)})}vo(e,n,o){const u=am(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=ee(),b=He(),N={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},L=this.longPollingOptions.timeoutSeconds;void 0!==L&&(N.longPollingTimeout=Math.round(1e3*L)),this.useFetchStreams&&(N.xmlHttpFactory=new br({})),this.bo(N.initMessageHeaders,n,o),N.encodeInitMessageHeaders=!0;const z=l.join("");Xe(Fo,`Creating RPC '${e}' stream ${u}: ${z}`,N);const X=g.createWebChannel(z,N);let me=!1,Ue=!1;const ht=new ME({co:St=>{Ue?Xe(Fo,`Not sending because RPC '${e}' stream ${u} is closed:`,St):(me||(Xe(Fo,`Opening RPC '${e}' stream ${u} transport.`),X.open(),me=!0),Xe(Fo,`RPC '${e}' stream ${u} sending:`,St),X.send(St))},lo:()=>X.close()}),yt=(St,yn,bn)=>{St.listen(yn,gn=>{try{bn(gn)}catch(Bn){setTimeout(()=>{throw Bn},0)}})};return yt(X,Tn.EventType.OPEN,()=>{Ue||Xe(Fo,`RPC '${e}' stream ${u} transport opened.`)}),yt(X,Tn.EventType.CLOSE,()=>{Ue||(Ue=!0,Xe(Fo,`RPC '${e}' stream ${u} transport closed`),ht.Ro())}),yt(X,Tn.EventType.ERROR,St=>{Ue||(Ue=!0,_n(Fo,`RPC '${e}' stream ${u} transport errored:`,St),ht.Ro(new Ke(je.UNAVAILABLE,"The operation could not be completed")))}),yt(X,Tn.EventType.MESSAGE,St=>{var yn;if(!Ue){const bn=St.data[0];st(!!bn);const Bn=bn.error||(null===(yn=bn[0])||void 0===yn?void 0:yn.error);if(Bn){Xe(Fo,`RPC '${e}' stream ${u} received error:`,Bn);const Hr=Bn.status;let Sr=function(I_){const Nv=us[I_];if(void 0!==Nv)return Qd(Nv)}(Hr),Rs=Bn.message;void 0===Sr&&(Sr=je.INTERNAL,Rs="Unknown error status: "+Hr+" with message "+Bn.message),Ue=!0,ht.Ro(new Ke(Sr,Rs)),X.close()}else Xe(Fo,`RPC '${e}' stream ${u} received:`,bn),ht.Vo(bn)}}),yt(b,Ar.STAT_EVENT,St=>{St.stat===Er.PROXY?Xe(Fo,`RPC '${e}' stream ${u} detected buffering proxy`):St.stat===Er.NOPROXY&&Xe(Fo,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{ht.Ao()},0),ht}}function _p(){return typeof window<"u"?window:null}function um(){return typeof document<"u"?document:null}function yp(s){return new wi(s,!0)}class Xh{constructor(e,n,o=1e3,u=1.5,l=6e4){this.si=e,this.timerId=n,this.Fo=o,this.Mo=u,this.xo=l,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),o=Math.max(0,Date.now()-this.Bo),u=Math.max(0,n-o);u>0&&Xe("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,u,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class OE{constructor(e,n,o,u,l,g,b,N){this.si=e,this.Ko=o,this.$o=u,this.connection=l,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=b,this.listener=N,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Xh(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,ne.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,ne.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var o=this;return(0,ne.Z)(function*(){o.t_(),o.n_(),o.zo.cancel(),o.Uo++,4!==e?o.zo.reset():n&&n.code===je.RESOURCE_EXHAUSTED?(yr(n.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),o.zo.Lo()):n&&n.code===je.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.r_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Uo===n&&this.s_(o,u)},o=>{e(()=>{const u=new Ke(je.UNKNOWN,"Fetching auth token failed: "+o.message);return this.o_(u)})})}s_(e,n){const o=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{o(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(u=>{o(()=>this.o_(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Jo(){var e=this;this.state=5,this.zo.ko((0,ne.Z)(function*(){e.state=0,e.start()}))}o_(e){return Xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(Xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aT extends OE{constructor(e,n,o,u,l,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,g),this.serializer=l}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function j_(s,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(L=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===L?1:"REMOVE"===L?2:"CURRENT"===L?3:"RESET"===L?4:wt(),u=e.targetChange.targetIds||[],l=function(L,z){return L.useProto3Json?(st(void 0===z||"string"==typeof z),Hi.fromBase64String(z||"")):(st(void 0===z||z instanceof Uint8Array),Hi.fromUint8Array(z||new Uint8Array))}(s,e.targetChange.resumeToken),g=e.targetChange.cause,b=g&&function(L){const z=void 0===L.code?je.UNKNOWN:Qd(L.code);return new Ke(z,L.message||"")}(g);n=new k(o,u,l,b||null)}else if("documentChange"in e){const o=e.documentChange,u=nu(s,o.document.name),l=zi(o.document.updateTime),g=o.document.createTime?zi(o.document.createTime):Nt.min(),b=new Yi({mapValue:{fields:o.document.fields}}),N=Xr.newFoundDocument(u,l,g,b);n=new p(o.targetIds||[],o.removedTargetIds||[],N.key,N)}else if("documentDelete"in e){const o=e.documentDelete,u=nu(s,o.document),l=o.readTime?zi(o.readTime):Nt.min(),g=Xr.newNoDocument(u,l);n=new p([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const o=e.documentRemove,u=nu(s,o.document);n=new p([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return wt();{const o=e.filter,{count:u=0,unchangedNames:l}=o,g=new Uh(u,l);n=new I(o.targetId,g)}}var L;return n}(this.serializer,e),o=function(l){if(!("targetChange"in l))return Nt.min();const g=l.targetChange;return g.targetIds&&g.targetIds.length?Nt.min():g.readTime?zi(g.readTime):Nt.min()}(e);return this.listener.a_(n,o)}u_(e){const n={};n.database=Hl(this.serializer),n.addTarget=function(l,g){let b;const N=g.target;if(b=Fl(N)?{documents:xg(l,N)}:{query:Qf(l,N)},b.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){b.resumeToken=As(l,g.resumeToken);const L=Lo(l,g.expectedCount);null!==L&&(b.expectedCount=L)}else if(g.snapshotVersion.compareTo(Nt.min())>0){b.readTime=tu(l,g.snapshotVersion.toTimestamp());const L=Lo(l,g.expectedCount);null!==L&&(b.expectedCount=L)}return b}(this.serializer,e);const o=function $_(s,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.e_(n)}c_(e){const n={};n.database=Hl(this.serializer),n.removeTarget=e,this.e_(n)}}class uT extends OE{constructor(e,n,o,u,l,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,g),this.serializer=l,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(st(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function Zf(s,e){return s&&s.length>0?(st(void 0!==e),s.map(n=>function(u,l){let g=zi(u.updateTime?u.updateTime:l);return g.isEqual(Nt.min())&&(g=zi(l)),new dn(g,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=zi(e.commitTime);return this.listener.I_(o,n)}return st(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Hl(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>th(this.serializer,o))};this.e_(n)}}class cT extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.d_=!1}A_(){if(this.d_)throw new Ke(je.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,o){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.wo(e,n,o,u,l)).catch(u=>{throw"FirebaseError"===u.name?(u.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ke(je.UNKNOWN,u.toString())})}Co(e,n,o,u){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,g])=>this.connection.Co(e,n,o,l,g,u)).catch(l=>{throw"FirebaseError"===l.name?(l.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ke(je.UNKNOWN,l.toString())})}terminate(){this.d_=!0}}class vp{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(yr(n),this.f_=!1):Xe("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Ep{constructor(e,n,o,u,l){var g=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=l,this.F_.ro(b=>{o.enqueueAndForget((0,ne.Z)(function*(){var N;Od(g)&&(Xe("RemoteStore","Restarting streams for network reachability change."),yield(N=(0,ne.Z)(function*(z){const X=Tt(z);X.C_.add(4),yield Nd(X),X.M_.set("Unknown"),X.C_.delete(4),yield Md(X)}),function L(z){return N.apply(this,arguments)})(g))}))}),this.M_=new vp(o,u)}}function Md(s){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,ne.Z)(function*(s){if(Od(s))for(const e of s.v_)yield e(!0)}),Ip.apply(this,arguments)}function Nd(s){return lm.apply(this,arguments)}function lm(){return lm=(0,ne.Z)(function*(s){for(const e of s.v_)yield e(!1)}),lm.apply(this,arguments)}function Jh(s,e){const n=Tt(s);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),wp(n)?iu(n):xd(n).Ho()&&Ql(n,e))}function ch(s,e){const n=Tt(s),o=xd(n);n.D_.delete(e),o.Ho()&&Sa(n,e),0===n.D_.size&&(o.Ho()?o.Zo():Od(n)&&n.M_.set("Unknown"))}function Ql(s,e){if(s.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Nt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xd(s).u_(e)}function Sa(s,e){s.x_.Oe(e),xd(s).c_(e)}function iu(s){s.x_=new ce({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>s.D_.get(e)||null,nt:()=>s.datastore.serializer.databaseId}),xd(s).start(),s.M_.g_()}function wp(s){return Od(s)&&!xd(s).jo()&&s.D_.size>0}function Od(s){return 0===Tt(s).C_.size}function yy(s){s.x_=void 0}function dT(s){return vy.apply(this,arguments)}function vy(){return vy=(0,ne.Z)(function*(s){s.D_.forEach((e,n)=>{Ql(s,e)})}),vy.apply(this,arguments)}function Ey(s,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,ne.Z)(function*(s,e){yy(s),wp(s)?(s.M_.w_(e),iu(s)):s.M_.set("Unknown")}),Tp.apply(this,arguments)}function hT(s,e,n){return lh.apply(this,arguments)}function lh(){return lh=(0,ne.Z)(function*(s,e,n){if(s.M_.set("Online"),e instanceof k&&2===e.state&&e.cause)try{yield(o=(0,ne.Z)(function*(l,g){const b=g.cause;for(const N of g.targetIds)l.D_.has(N)&&(yield l.remoteSyncer.rejectListen(N,b),l.D_.delete(N),l.x_.removeTarget(N))}),function u(l,g){return o.apply(this,arguments)})(s,e)}catch(o){Xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield dh(s,o)}else if(e instanceof p?s.x_.$e(e):e instanceof I?s.x_.Je(e):s.x_.Ge(e),!n.isEqual(Nt.min()))try{const o=yield dy(s.localStore);n.compareTo(o)>=0&&(yield function(l,g){const b=l.x_.it(g);return b.targetChanges.forEach((N,L)=>{if(N.resumeToken.approximateByteSize()>0){const z=l.D_.get(L);z&&l.D_.set(L,z.withResumeToken(N.resumeToken,g))}}),b.targetMismatches.forEach((N,L)=>{const z=l.D_.get(N);if(!z)return;l.D_.set(N,z.withResumeToken(Hi.EMPTY_BYTE_STRING,z.snapshotVersion)),Sa(l,N);const X=new zl(z.target,N,L,z.sequenceNumber);Ql(l,X)}),l.remoteSyncer.applyRemoteEvent(b)}(s,n))}catch(o){Xe("RemoteStore","Failed to raise snapshot:",o),yield dh(s,o)}var o}),lh.apply(this,arguments)}function dh(s,e,n){return ef.apply(this,arguments)}function ef(){return ef=(0,ne.Z)(function*(s,e,n){if(!R(e))throw e;s.C_.add(1),yield Nd(s),s.M_.set("Offline"),n||(n=()=>dy(s.localStore)),s.asyncQueue.enqueueRetryable((0,ne.Z)(function*(){Xe("RemoteStore","Retrying IndexedDB access"),yield n(),s.C_.delete(1),yield Md(s)}))}),ef.apply(this,arguments)}function Iy(s,e){return e().catch(n=>dh(s,n,e))}function _c(s){return tf.apply(this,arguments)}function tf(){return tf=(0,ne.Z)(function*(s){const e=Tt(s),n=Ca(e);let o=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;wy(e);)try{const u=yield AE(e.localStore,o);if(null===u){0===e.b_.length&&n.Zo();break}o=u.batchId,dm(e,u)}catch(u){yield dh(e,u)}nf(e)&&Ty(e)}),tf.apply(this,arguments)}function wy(s){return Od(s)&&s.b_.length<10}function dm(s,e){s.b_.push(e);const n=Ca(s);n.Ho()&&n.h_&&n.P_(e.mutations)}function nf(s){return Od(s)&&!Ca(s).jo()&&s.b_.length>0}function Ty(s){Ca(s).start()}function xE(s){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,ne.Z)(function*(s){Ca(s).E_()}),Dp.apply(this,arguments)}function kE(s){return hm.apply(this,arguments)}function hm(){return hm=(0,ne.Z)(function*(s){const e=Ca(s);for(const n of s.b_)e.P_(n.mutations)}),hm.apply(this,arguments)}function LE(s,e,n){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,ne.Z)(function*(s,e,n){const o=s.b_.shift(),u=Fh.from(o,e,n);yield Iy(s,()=>s.remoteSyncer.applySuccessfulWrite(u)),yield _c(s)}),Sp.apply(this,arguments)}function rf(s,e){return hh.apply(this,arguments)}function hh(){return hh=(0,ne.Z)(function*(s,e){var n;e&&Ca(s).h_&&(yield(n=(0,ne.Z)(function*(u,l){if(ku(b=l.code)&&b!==je.ABORTED){const g=u.b_.shift();Ca(u).Yo(),yield Iy(u,()=>u.remoteSyncer.rejectFailedWrite(g.batchId,l)),yield _c(u)}var b}),function o(u,l){return n.apply(this,arguments)})(s,e)),nf(s)&&Ty(s)}),hh.apply(this,arguments)}function Cp(s,e){return fm.apply(this,arguments)}function fm(){return fm=(0,ne.Z)(function*(s,e){const n=Tt(s);n.asyncQueue.verifyOperationInProgress(),Xe("RemoteStore","RemoteStore received new credentials");const o=Od(n);n.C_.add(3),yield Nd(n),o&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Md(n)}),fm.apply(this,arguments)}function pm(s,e){return sf.apply(this,arguments)}function sf(){return sf=(0,ne.Z)(function*(s,e){const n=Tt(s);e?(n.C_.delete(2),yield Md(n)):e||(n.C_.add(2),yield Nd(n),n.M_.set("Unknown"))}),sf.apply(this,arguments)}function xd(s){return s.O_||(s.O_=function(n,o,u){const l=Tt(n);return l.A_(),new aT(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,u)}(s.datastore,s.asyncQueue,{ho:dT.bind(null,s),Io:Ey.bind(null,s),a_:hT.bind(null,s)}),s.v_.push(function(){var e=(0,ne.Z)(function*(n){n?(s.O_.Yo(),wp(s)?iu(s):s.M_.set("Unknown")):(yield s.O_.stop(),yy(s))});return function(n){return e.apply(this,arguments)}}())),s.O_}function Ca(s){return s.N_||(s.N_=function(n,o,u){const l=Tt(n);return l.A_(),new uT(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,u)}(s.datastore,s.asyncQueue,{ho:xE.bind(null,s),Io:rf.bind(null,s),T_:kE.bind(null,s),I_:LE.bind(null,s)}),s.v_.push(function(){var e=(0,ne.Z)(function*(n){n?(s.N_.Yo(),yield _c(s)):(yield s.N_.stop(),s.b_.length>0&&(Xe("RemoteStore",`Stopping write stream with ${s.b_.length} pending writes`),s.b_=[]))});return function(n){return e.apply(this,arguments)}}())),s.N_}class Ap{constructor(e,n,o,u,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=l,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,l){const g=Date.now()+o,b=new Ap(e,n,g,u,l);return b.start(o),b}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ke(je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kd(s,e){if(yr("AsyncQueue",`${e}: ${s}`),R(s))return new Ke(je.UNAVAILABLE,`${e}: ${s}`);throw s}class fh{constructor(e){this.comparator=e?(n,o)=>e(n,o)||dt.comparator(n.key,o.key):(n,o)=>dt.comparator(n.key,o.key),this.keyedMap=W(),this.sortedSet=new Ot(this.comparator)}static emptySet(e){return new fh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,l=o.getNext().key;if(!u.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new fh;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class FE{constructor(){this.B_=new Ot(dt.comparator)}track(e){const n=e.doc.key,o=this.B_.get(n);o?0!==e.type&&3===o.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==o.type?this.B_=this.B_.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.B_=this.B_.remove(n):1===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):wt():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,o)=>{e.push(o)}),e}}class Il{constructor(e,n,o,u,l,g,b,N,L){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=l,this.fromCache=g,this.syncStateChanged=b,this.excludesMetadataChanges=N,this.hasCachedResults=L}static fromInitialDocuments(e,n,o,u,l){const g=[];return n.forEach(b=>{g.push({type:0,doc:b})}),new Il(e,n,fh.emptySet(n),g,o,u,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ys(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class VE{constructor(){this.k_=void 0,this.listeners=[]}}class Dy{constructor(){this.queries=new m(e=>yd(e),Ys),this.onlineState="Unknown",this.q_=new Set}}function bp(s,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,ne.Z)(function*(s,e){const n=Tt(s),o=e.query;let u=!1,l=n.queries.get(o);if(l||(u=!0,l=new VE),u)try{l.k_=yield n.onListen(o)}catch(g){const b=kd(g,`Initialization of query '${Mu(e.query)}' failed`);return void e.onError(b)}n.queries.set(o,l),l.listeners.push(e),e.Q_(n.onlineState),l.k_&&e.K_(l.k_)&&Np(n)}),Rp.apply(this,arguments)}function af(s,e){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,ne.Z)(function*(s,e){const n=Tt(s),o=e.query;let u=!1;const l=n.queries.get(o);if(l){const g=l.listeners.indexOf(e);g>=0&&(l.listeners.splice(g,1),u=0===l.listeners.length)}if(u)return n.queries.delete(o),n.onUnlisten(o)}),Pp.apply(this,arguments)}function Mp(s,e){const n=Tt(s);let o=!1;for(const u of e){const g=n.queries.get(u.query);if(g){for(const b of g.listeners)b.K_(u)&&(o=!0);g.k_=u}}o&&Np(n)}function uf(s,e,n){const o=Tt(s),u=o.queries.get(e);if(u)for(const l of u.listeners)l.onError(n);o.queries.delete(e)}function Np(s){s.q_.forEach(e=>{e.next()})}class cf{constructor(e,n,o){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=o||{}}K_(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Il(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=Il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class lf{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class gm{constructor(e){this.serializer=e}hs(e){return nu(this.serializer,e)}Ps(e){return e.metadata.exists?B_(this.serializer,e.document,!1):Xr.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return zi(e)}}class mm{constructor(e,n,o){this.X_=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=df(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const o=Vn.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,o=new gm(this.serializer);for(const u of e)if(u.metadata.queries){const l=o.hs(u.metadata.name);for(const g of u.metadata.queries){const b=(n.get(g)||it()).add(l);n.set(g,b)}}return n}complete(){var e=this;return(0,ne.Z)(function*(){const n=yield function bE(s,e,n,o){return tm.apply(this,arguments)}(e.localStore,new gm(e.serializer),e.documents,e.X_.id),o=e.ta(e.documents);for(const u of e.queries)yield nm(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function df(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class Sy{constructor(e){this.key=e}}class _m{constructor(e){this.key=e}}class Cy{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=it(),this.mutatedKeys=it(),this._a=E(e),this.aa=new fh(this._a)}get ua(){return this.ia}ca(e,n){const o=n?n.la:new FE,u=n?n.aa:this.aa;let l=n?n.mutatedKeys:this.mutatedKeys,g=u,b=!1;const N="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,L="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((z,X)=>{const me=u.get(z),Ue=Uc(this.query,X)?X:null,ht=!!me&&this.mutatedKeys.has(me.key),yt=!!Ue&&(Ue.hasLocalMutations||this.mutatedKeys.has(Ue.key)&&Ue.hasCommittedMutations);let St=!1;me&&Ue?me.data.isEqual(Ue.data)?ht!==yt&&(o.track({type:3,doc:Ue}),St=!0):this.ha(me,Ue)||(o.track({type:2,doc:Ue}),St=!0,(N&&this._a(Ue,N)>0||L&&this._a(Ue,L)<0)&&(b=!0)):!me&&Ue?(o.track({type:0,doc:Ue}),St=!0):me&&!Ue&&(o.track({type:1,doc:me}),St=!0,(N||L)&&(b=!0)),St&&(Ue?(g=g.add(Ue),l=yt?l.add(z):l.delete(z)):(g=g.delete(z),l=l.delete(z)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const z="F"===this.query.limitType?g.last():g.first();g=g.delete(z.key),l=l.delete(z.key),o.track({type:1,doc:z})}return{aa:g,la:o,Zi:b,mutatedKeys:l}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o){const u=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const l=e.la.L_();l.sort((L,z)=>function(me,Ue){const ht=yt=>{switch(yt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt()}};return ht(me)-ht(Ue)}(L.type,z.type)||this._a(L.doc,z.doc)),this.Pa(o);const g=n?this.Ia():[],b=0===this.oa.size&&this.current?1:0,N=b!==this.sa;return this.sa=b,0!==l.length||N?{snapshot:new Il(this.query,e.aa,u,l,e.mutatedKeys,0===b,N,!1,!!o&&o.resumeToken.approximateByteSize()>0),Ta:g}:{Ta:g}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new FE,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=it(),this.aa.forEach(o=>{this.Ea(o.key)&&(this.oa=this.oa.add(o.key))});const n=[];return e.forEach(o=>{this.oa.has(o)||n.push(new _m(o))}),this.oa.forEach(o=>{e.has(o)||n.push(new Sy(o))}),n}da(e){this.ia=e.ls,this.oa=it();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return Il.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class UE{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class BE{constructor(e){this.key=e,this.Ra=!1}}class Ay{constructor(e,n,o,u,l,g){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=l,this.maxConcurrentLimboResolutions=g,this.Va={},this.ma=new m(b=>yd(b),Ys),this.fa=new Map,this.ga=new Set,this.pa=new Ot(dt.comparator),this.ya=new Map,this.wa=new iy,this.Sa={},this.ba=new Map,this.Da=Kl.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function by(s,e){return Un.apply(this,arguments)}function Un(){return Un=(0,ne.Z)(function*(s,e){const n=Fm(s);let o,u;const l=n.ma.get(e);if(l)o=l.targetId,n.sharedClientState.addLocalQueryTarget(o),u=l.view.Aa();else{const g=yield oh(n.localStore,Ds(e)),b=n.sharedClientState.addLocalQueryTarget(g.targetId);o=g.targetId,u=yield Op(n,e,o,"current"===b,g.resumeToken),n.isPrimaryClient&&Jh(n.remoteStore,g)}return u}),Un.apply(this,arguments)}function Op(s,e,n,o,u){return xp.apply(this,arguments)}function xp(){return xp=(0,ne.Z)(function*(s,e,n,o,u){s.va=(X,me,Ue)=>{return(ht=(0,ne.Z)(function*(St,yn,bn,gn){let Bn=yn.view.ca(bn);Bn.Zi&&(Bn=yield hp(St.localStore,yn.query,!1).then(({documents:Rs})=>yn.view.ca(Rs,Bn)));const Hr=gn&&gn.targetChanges.get(yn.targetId),Sr=yn.view.applyChanges(Bn,St.isPrimaryClient,Hr);return Cm(St,yn.targetId,Sr.Ta),Sr.snapshot}),function yt(St,yn,bn,gn){return ht.apply(this,arguments)})(s,X,me,Ue);var ht};const l=yield hp(s.localStore,e,!0),g=new Cy(e,l.ls),b=g.ca(l.documents),N=h.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==s.onlineState,u),L=g.applyChanges(b,s.isPrimaryClient,N);Cm(s,n,L.Ta);const z=new UE(e,n,g);return s.ma.set(e,z),s.fa.has(n)?s.fa.get(n).push(e):s.fa.set(n,[e]),L.snapshot}),xp.apply(this,arguments)}function ph(s,e){return ym.apply(this,arguments)}function ym(){return ym=(0,ne.Z)(function*(s,e){const n=Tt(s),o=n.ma.get(e),u=n.fa.get(o.targetId);if(u.length>1)return n.fa.set(o.targetId,u.filter(l=>!Ys(l,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield bd(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),ch(n.remoteStore,o.targetId),Ld(n,o.targetId)}).catch(Tu))):(Ld(n,o.targetId),yield bd(n.localStore,o.targetId,!0))}),ym.apply(this,arguments)}function vm(){return vm=(0,ne.Z)(function*(s,e,n){const o=Vu(s);try{const u=yield function(g,b){const N=Tt(g),L=kr.now(),z=b.reduce((Ue,ht)=>Ue.add(ht.key),it());let X,me;return N.persistence.runTransaction("Locally write mutations","readwrite",Ue=>{let ht=P(),yt=it();return N.ss.getEntries(Ue,z).next(St=>{ht=St,ht.forEach((yn,bn)=>{bn.isValidDocument()||(yt=yt.add(yn))})}).next(()=>N.localDocuments.getOverlayedDocuments(Ue,ht)).next(St=>{X=St;const yn=[];for(const bn of b){const gn=si(bn,X.get(bn.key).overlayedDocument);null!=gn&&yn.push(new fr(bn.key,gn,xl(gn.value.mapValue),Ft.exists(!0)))}return N.mutationQueue.addMutationBatch(Ue,L,yn,b)}).next(St=>{me=St;const yn=St.applyToLocalDocumentSet(X,yt);return N.documentOverlayCache.saveOverlays(Ue,St.batchId,yn)})}).then(()=>({batchId:me.batchId,changes:J(X)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(g,b,N){let L=g.Sa[g.currentUser.toKey()];L||(L=new Ot(fn)),L=L.insert(b,N),g.Sa[g.currentUser.toKey()]=L}(o,u.batchId,n),yield Hc(o,u.changes),yield _c(o.remoteStore)}catch(u){const l=kd(u,"Failed to persist write");n.reject(l)}}),vm.apply(this,arguments)}function hf(s,e){return Yl.apply(this,arguments)}function Yl(){return Yl=(0,ne.Z)(function*(s,e){const n=Tt(s);try{const o=yield function hy(s,e){const n=Tt(s),o=e.snapshotVersion;let u=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const g=n.ss.newChangeBuffer({trackRemovals:!0});u=n.ts;const b=[];e.targetChanges.forEach((z,X)=>{const me=u.get(X);if(!me)return;b.push(n.qr.removeMatchingKeys(l,z.removedDocuments,X).next(()=>n.qr.addMatchingKeys(l,z.addedDocuments,X)));let Ue=me.withSequenceNumber(l.currentSequenceNumber);var yt,St,yn;null!==e.targetMismatches.get(X)?Ue=Ue.withResumeToken(Hi.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):z.resumeToken.approximateByteSize()>0&&(Ue=Ue.withResumeToken(z.resumeToken,o)),u=u.insert(X,Ue),St=Ue,yn=z,(0===(yt=me).resumeToken.approximateByteSize()||St.snapshotVersion.toMicroseconds()-yt.snapshotVersion.toMicroseconds()>=3e8||yn.addedDocuments.size+yn.modifiedDocuments.size+yn.removedDocuments.size>0)&&b.push(n.qr.updateTargetData(l,Ue))});let N=P(),L=it();if(e.documentUpdates.forEach(z=>{e.resolvedLimboDocuments.has(z)&&b.push(n.persistence.referenceDelegate.updateLimboDocument(l,z))}),b.push(em(l,g,e.documentUpdates).next(z=>{N=z.us,L=z.cs})),!o.isEqual(Nt.min())){const z=n.qr.getLastRemoteSnapshotVersion(l).next(X=>n.qr.setTargetsMetadata(l,l.currentSequenceNumber,o));b.push(z)}return be.waitFor(b).next(()=>g.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,N,L)).next(()=>N)}).then(l=>(n.ts=u,l))}(n.localStore,e);e.targetChanges.forEach((u,l)=>{const g=n.ya.get(l);g&&(st(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.Ra=!0:u.modifiedDocuments.size>0?st(g.Ra):u.removedDocuments.size>0&&(st(g.Ra),g.Ra=!1))}),yield Hc(n,o,e)}catch(o){yield Tu(o)}}),Yl.apply(this,arguments)}function kp(s,e,n){const o=Tt(s);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.ma.forEach((l,g)=>{const b=g.view.Q_(e);b.snapshot&&u.push(b.snapshot)}),function(g,b){const N=Tt(g);N.onlineState=b;let L=!1;N.queries.forEach((z,X)=>{for(const me of X.listeners)me.Q_(b)&&(L=!0)}),L&&Np(N)}(o.eventManager,e),u.length&&o.Va.a_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function ff(s,e,n){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,ne.Z)(function*(s,e,n){const o=Tt(s);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.ya.get(e),l=u&&u.key;if(l){let g=new Ot(dt.comparator);g=g.insert(l,Xr.newNoDocument(l,Nt.min()));const b=it().add(l),N=new y(Nt.min(),new Map,new Ot(fn),g,b);yield hf(o,N),o.pa=o.pa.remove(l),o.ya.delete(e),Am(o)}else yield bd(o.localStore,e,!1).then(()=>Ld(o,e,n)).catch(Tu)}),Lp.apply(this,arguments)}function Em(s,e){return pf.apply(this,arguments)}function pf(){return pf=(0,ne.Z)(function*(s,e){const n=Tt(s),o=e.batch.batchId;try{const u=yield function CE(s,e){const n=Tt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),l=n.ss.newChangeBuffer({trackRemovals:!0});return function(b,N,L,z){const X=L.batch,me=X.keys();let Ue=be.resolve();return me.forEach(ht=>{Ue=Ue.next(()=>z.getEntry(N,ht)).next(yt=>{const St=L.docVersions.get(ht);st(null!==St),yt.version.compareTo(St)<0&&(X.applyToRemoteDocument(yt,L),yt.isValidDocument()&&(yt.setReadTime(L.commitVersion),z.addEntry(yt)))})}),Ue.next(()=>b.mutationQueue.removeMutationBatch(N,X))}(n,o,e,l).next(()=>l.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(b){let N=it();for(let L=0;L<b.mutationResults.length;++L)b.mutationResults[L].transformResults.length>0&&(N=N.add(b.batch.mutations[L].key));return N}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}(n.localStore,e);Sm(n,o,null),Dm(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield Hc(n,u)}catch(u){yield Tu(u)}}),pf.apply(this,arguments)}function Im(s,e,n){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,ne.Z)(function*(s,e,n){const o=Tt(s);try{const u=yield function(g,b){const N=Tt(g);return N.persistence.runTransaction("Reject batch","readwrite-primary",L=>{let z;return N.mutationQueue.lookupMutationBatch(L,b).next(X=>(st(null!==X),z=X.keys(),N.mutationQueue.removeMutationBatch(L,X))).next(()=>N.mutationQueue.performConsistencyCheck(L)).next(()=>N.documentOverlayCache.removeOverlaysForBatchId(L,z,b)).next(()=>N.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(L,z)).next(()=>N.localDocuments.getDocuments(L,z))})}(o.localStore,e);Sm(o,e,n),Dm(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield Hc(o,u)}catch(u){yield Tu(u)}}),Fp.apply(this,arguments)}function Tm(){return Tm=(0,ne.Z)(function*(s,e){const n=Tt(s);Od(n.remoteStore)||Xe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(g){const b=Tt(g);return b.persistence.runTransaction("Get highest unacknowledged batch id","readonly",N=>b.mutationQueue.getHighestUnacknowledgedBatchId(N))}(n.localStore);if(-1===o)return void e.resolve();const u=n.ba.get(o)||[];u.push(e),n.ba.set(o,u)}catch(o){const u=kd(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Tm.apply(this,arguments)}function Dm(s,e){(s.ba.get(e)||[]).forEach(n=>{n.resolve()}),s.ba.delete(e)}function Sm(s,e,n){const o=Tt(s);let u=o.Sa[o.currentUser.toKey()];if(u){const l=u.get(e);l&&(n?l.reject(n):l.resolve(),u=u.remove(e)),o.Sa[o.currentUser.toKey()]=u}}function Ld(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const o of s.fa.get(e))s.ma.delete(o),n&&s.Va.Fa(o,n);s.fa.delete(e),s.isPrimaryClient&&s.wa.Rr(e).forEach(o=>{s.wa.containsKey(o)||Py(s,o)})}function Py(s,e){s.ga.delete(e.path.canonicalString());const n=s.pa.get(e);null!==n&&(ch(s.remoteStore,n),s.pa=s.pa.remove(e),s.ya.delete(n),Am(s))}function Cm(s,e,n){for(const o of n)o instanceof Sy?(s.wa.addReference(o.key,e),jE(s,o)):o instanceof _m?(Xe("SyncEngine","Document no longer in limbo: "+o.key),s.wa.removeReference(o.key,e),s.wa.containsKey(o.key)||Py(s,o.key)):wt()}function jE(s,e){const n=e.key,o=n.path.canonicalString();s.pa.get(n)||s.ga.has(o)||(Xe("SyncEngine","New document in limbo: "+n),s.ga.add(o),Am(s))}function Am(s){for(;s.ga.size>0&&s.pa.size<s.maxConcurrentLimboResolutions;){const e=s.ga.values().next().value;s.ga.delete(e);const n=new dt(Vn.fromString(e)),o=s.Da.next();s.ya.set(o,new BE(n)),s.pa=s.pa.insert(n,o),Jh(s.remoteStore,new zl(Ds(Vc(n.path)),o,"TargetPurposeLimboResolution",we._e))}}function Hc(s,e,n){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,ne.Z)(function*(s,e,n){const o=Tt(s),u=[],l=[],g=[];var b;o.ma.isEmpty()||(o.ma.forEach((b,N)=>{g.push(o.va(N,e,n).then(L=>{if((L||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(N.targetId,L?.fromCache?"not-current":"current"),L){u.push(L);const z=Yh.Qi(N.targetId,L);l.push(z)}}))}),yield Promise.all(g),o.Va.a_(u),yield(b=(0,ne.Z)(function*(L,z){const X=Tt(L);try{yield X.persistence.runTransaction("notifyLocalViewChanges","readwrite",me=>be.forEach(z,Ue=>be.forEach(Ue.ki,ht=>X.persistence.referenceDelegate.addReference(me,Ue.targetId,ht)).next(()=>be.forEach(Ue.qi,ht=>X.persistence.referenceDelegate.removeReference(me,Ue.targetId,ht)))))}catch(me){if(!R(me))throw me;Xe("LocalStore","Failed to update sequence numbers: "+me)}for(const me of z){const Ue=me.targetId;if(!me.fromCache){const ht=X.ts.get(Ue),St=ht.withLastLimboFreeSnapshotVersion(ht.snapshotVersion);X.ts=X.ts.insert(Ue,St)}}}),function N(L,z){return b.apply(this,arguments)})(o.localStore,l))}),Vp.apply(this,arguments)}function $E(s,e){return bm.apply(this,arguments)}function bm(){return bm=(0,ne.Z)(function*(s,e){const n=Tt(s);if(!n.currentUser.isEqual(e)){Xe("SyncEngine","User change. New user:",e.toKey());const o=yield ly(n.localStore,e);n.currentUser=e,(l=n).ba.forEach(b=>{b.forEach(N=>{N.reject(new Ke(je.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.ba.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Hc(n,o._s)}var l}),bm.apply(this,arguments)}function Aa(s,e){const n=Tt(s),o=n.ya.get(e);if(o&&o.Ra)return it().add(o.key);{let u=it();const l=n.fa.get(e);if(!l)return u;for(const g of l){const b=n.ma.get(g);u=u.unionWith(b.view.ua)}return u}}function HE(s,e){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,ne.Z)(function*(s,e){const n=Tt(s),o=yield hp(n.localStore,e.query,!0),u=e.view.da(o);return n.isPrimaryClient&&Cm(n,e.targetId,u.Ta),u}),Rm.apply(this,arguments)}function fT(s,e){return gf.apply(this,arguments)}function gf(){return gf=(0,ne.Z)(function*(s,e){const n=Tt(s);return fy(n.localStore,e).then(o=>Hc(n,o))}),gf.apply(this,arguments)}function My(s,e,n,o){return Pm.apply(this,arguments)}function Pm(){return Pm=(0,ne.Z)(function*(s,e,n,o){const u=Tt(s),l=yield function(b,N){const L=Tt(b),z=Tt(L.mutationQueue);return L.persistence.runTransaction("Lookup mutation documents","readonly",X=>z.Cn(X,N).next(me=>me?L.localDocuments.getDocuments(X,me):be.resolve(null)))}(u.localStore,e);var N;null!==l?("pending"===n?yield _c(u.remoteStore):"acknowledged"===n||"rejected"===n?(Sm(u,e,o||null),Dm(u,e),N=e,Tt(Tt(u.localStore).mutationQueue).Fn(N)):wt(),yield Hc(u,l)):Xe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Pm.apply(this,arguments)}function Mm(){return Mm=(0,ne.Z)(function*(s,e){const n=Tt(s);if(Fm(n),Vu(n),!0===e&&!0!==n.Ca){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield Nm(n,o.toArray());n.Ca=!0,yield pm(n.remoteStore,!0);for(const l of u)Jh(n.remoteStore,l)}else if(!1===e&&!1!==n.Ca){const o=[];let u=Promise.resolve();n.fa.forEach((l,g)=>{n.sharedClientState.isLocalQueryTarget(g)?o.push(g):u=u.then(()=>(Ld(n,g),bd(n.localStore,g,!0))),ch(n.remoteStore,g)}),yield u,yield Nm(n,o),function(g){const b=Tt(g);b.ya.forEach((N,L)=>{ch(b.remoteStore,L)}),b.wa.Vr(),b.ya=new Map,b.pa=new Ot(dt.comparator)}(n),n.Ca=!1,yield pm(n.remoteStore,!1)}}),Mm.apply(this,arguments)}function Nm(s,e,n){return Om.apply(this,arguments)}function Om(){return Om=(0,ne.Z)(function*(s,e,n){const o=Tt(s),u=[],l=[];for(const g of e){let b;const N=o.fa.get(g);if(N&&0!==N.length){b=yield oh(o.localStore,Ds(N[0]));for(const L of N){const z=o.ma.get(L),X=yield HE(o,z);X.snapshot&&l.push(X.snapshot)}}else{const L=yield fp(o.localStore,g);b=yield oh(o.localStore,L),yield Op(o,Ny(L),g,!1,b.resumeToken)}u.push(b)}return o.Va.a_(l),u}),Om.apply(this,arguments)}function Ny(s){return Fc(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function xm(s){return n=Tt(s).localStore,Tt(Tt(n).persistence).Bi();var n}function GE(s,e,n,o){return km.apply(this,arguments)}function km(){return km=(0,ne.Z)(function*(s,e,n,o){const u=Tt(s);if(u.Ca)return void Xe("SyncEngine","Ignoring unexpected query state notification.");const l=u.fa.get(e);if(l&&l.length>0)switch(n){case"current":case"not-current":{const g=yield fy(u.localStore,dl(l[0])),b=y.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Hi.EMPTY_BYTE_STRING);yield Hc(u,g,b);break}case"rejected":yield bd(u.localStore,e,!0),Ld(u,e,o);break;default:wt()}}),km.apply(this,arguments)}function WE(s,e,n){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,ne.Z)(function*(s,e,n){const o=Fm(s);if(o.Ca){for(const u of e){if(o.fa.has(u)){Xe("SyncEngine","Adding an already active target "+u);continue}const l=yield fp(o.localStore,u),g=yield oh(o.localStore,l);yield Op(o,Ny(l),g.targetId,!1,g.resumeToken),Jh(o.remoteStore,g)}for(const u of n)o.fa.has(u)&&(yield bd(o.localStore,u,!1).then(()=>{ch(o.remoteStore,u),Ld(o,u)}).catch(Tu))}}),Lm.apply(this,arguments)}function Fm(s){const e=Tt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=hf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Aa.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ff.bind(null,e),e.Va.a_=Mp.bind(null,e.eventManager),e.Va.Fa=uf.bind(null,e.eventManager),e}function Vu(s){const e=Tt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Em.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Im.bind(null,e),e}class mf{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,ne.Z)(function*(){n.serializer=yp(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return cy(this.persistence,new SE,e.initialUser,this.serializer)}createPersistence(e){return new Zg(Fu.jr,this.serializer)}createSharedClientState(e){return new _y}terminate(){var e=this;return(0,ne.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Up extends mf{constructor(e,n,o){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,ne.Z)(function*(){yield n().call(o,e),yield o.xa.initialize(o,e),yield Vu(o.xa.syncEngine),yield _c(o.xa.remoteStore),yield o.persistence.mi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return cy(this.persistence,new SE,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new yE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new ze(n,this.persistence);return new oe(e.asyncQueue,o)}createPersistence(e){const n=Qh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Us.withCacheSize(this.cacheSizeBytes):Us.DEFAULT;return new ay(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,_p(),um(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new _y}}class Um extends Up{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,ne.Z)(function*(){yield n().call(o,e);const u=o.xa.syncEngine;o.sharedClientState instanceof sm&&(o.sharedClientState.syncEngine={Ys:My.bind(null,u),Zs:GE.bind(null,u),Xs:WE.bind(null,u),Bi:xm.bind(null,u),Js:fT.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.mi(function(){var l=(0,ne.Z)(function*(g){yield function zE(s,e){return Mm.apply(this,arguments)}(o.xa.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start():g||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(g&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():g||o.indexBackfillerScheduler.stop())});return function(g){return l.apply(this,arguments)}}())})()}createSharedClientState(e){const n=_p();if(!sm.D(n))throw new Ke(je.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Qh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sm(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class wl{initialize(e,n){var o=this;return(0,ne.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>kp(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=$E.bind(null,o.syncEngine),yield pm(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Dy}createDatastore(e){const n=yp(e.databaseInfo.databaseId),o=new NE(e.databaseInfo);return new cT(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return o=this.localStore,u=this.datastore,l=e.asyncQueue,g=n=>kp(this.syncEngine,n,0),b=om.D()?new om:new RE,new Ep(o,u,l,g,b);var o,u,l,g,b}createSyncEngine(e,n){return function(u,l,g,b,N,L,z){const X=new Ay(u,l,g,b,N,L);return z&&(X.Ca=!0),X}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,ne.Z)(function*(o){const u=Tt(o);Xe("RemoteStore","RemoteStore shutting down."),u.C_.add(5),yield Nd(u),u.F_.shutdown(),u.M_.set("Unknown")}),function n(o){return e.apply(this,arguments)})(this.remoteStore);var e}}function Bp(s,e=10240){let n=0;return{read:()=>(0,ne.Z)(function*(){if(n<s.byteLength){const o={value:s.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,ne.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Bm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class Oy{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Ir,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(o=>{o&&o.Z_()?this.metadata.resolve(o.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.Y_)}`))},o=>this.metadata.reject(o))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,ne.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,ne.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,ne.Z)(function*(){const n=yield e.qa();if(null===n)return null;const o=e.La.decode(n),u=Number(o);isNaN(u)&&e.Qa(`length string (${o}) is not valid number`);const l=yield e.Ka(u);return new lf(JSON.parse(l),n.length+u)})()}$a(){return this.buffer.findIndex(e=>123===e)}qa(){var e=this;return(0,ne.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}Ka(e){var n=this;return(0,ne.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const o=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,ne.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class xy{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,ne.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new Ke(je.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,ne.Z)(function*(g,b){const N=Tt(g),L=Hl(N.serializer)+"/documents",z={documents:b.map(ht=>gl(N.serializer,ht))},X=yield N.Co("BatchGetDocuments",L,z,b.length),me=new Map;X.forEach(ht=>{const yt=function aE(s,e){return"found"in e?function(o,u){st(!!u.found);const l=nu(o,u.found.name),g=zi(u.found.updateTime),b=u.found.createTime?zi(u.found.createTime):Nt.min(),N=new Yi({mapValue:{fields:u.found.fields}});return Xr.newFoundDocument(l,g,b,N)}(s,e):"missing"in e?function(o,u){st(!!u.missing),st(!!u.readTime);const l=nu(o,u.missing),g=zi(u.readTime);return Xr.newNoDocument(l,g)}(s,e):wt()}(N.serializer,ht);me.set(yt.key.toString(),yt)});const Ue=[];return b.forEach(ht=>{const yt=me.get(ht.toString());st(!!yt),Ue.push(yt)}),Ue}),function l(g,b){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new xu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ne.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const l=dt.fromPath(u);e.mutations.push(new Zd(l,e.precondition(l)))}),yield(o=(0,ne.Z)(function*(l,g){const b=Tt(l),N=Hl(b.serializer)+"/documents",L={writes:g.map(z=>th(b.serializer,z))};yield b.wo("Commit",N,L)}),function u(l,g){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw wt();n=Nt.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new Ke(je.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Nt.min())?Ft.exists(!1):Ft.updateTime(n):Ft.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Nt.min()))throw new Ke(je.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ft.updateTime(n)}return Ft.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ky{constructor(e,n,o,u,l){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=l,this.Wa=o.maxAttempts,this.zo=new Xh(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,ne.Z)(function*(){const n=new xy(e.datastore),o=e.za(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(l=>{e.ja(l)}))}).catch(u=>{e.ja(u)})}))}za(e){try{const n=this.updateFunction(e);return!It(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!ku(n)}return!1}}class jp{constructor(e,n,o,u){var l=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=Ye.UNAUTHENTICATED,this.clientId=hs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var g=(0,ne.Z)(function*(b){Xe("FirestoreClient","Received user=",b.uid),yield l.authCredentialListener(b),l.user=b});return function(b){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(o,g=>(Xe("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}getConfiguration(){var e=this;return(0,ne.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ke(je.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ne.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=kd(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function gh(s,e){return yc.apply(this,arguments)}function yc(){return yc=(0,ne.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress(),Xe("FirestoreClient","Initializing OfflineComponentProvider");const n=yield s.getConfiguration();yield e.initialize(n);let o=n.initialUser;s.setCredentialChangeListener(function(){var u=(0,ne.Z)(function*(l){o.isEqual(l)||(yield ly(e.localStore,l),o=l)});return function(l){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}),yc.apply(this,arguments)}function jm(s,e){return $m.apply(this,arguments)}function $m(){return $m=(0,ne.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress();const n=yield Hm(s);Xe("FirestoreClient","Initializing OnlineComponentProvider");const o=yield s.getConfiguration();yield e.initialize(n,o),s.setCredentialChangeListener(u=>Cp(e.remoteStore,u)),s.setAppCheckTokenChangeListener((u,l)=>Cp(e.remoteStore,l)),s._onlineComponents=e}),$m.apply(this,arguments)}function $p(s){return"FirebaseError"===s.name?s.code===je.FAILED_PRECONDITION||s.code===je.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code}function Hm(s){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,ne.Z)(function*(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Xe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield gh(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!$p(n))throw n;_n("Error using user provided cache. Falling back to memory cache: "+n),yield gh(s,new mf)}}else Xe("FirestoreClient","Using default OfflineComponentProvider"),yield gh(s,new mf);return s._offlineComponents}),Fd.apply(this,arguments)}function _f(s){return Xl.apply(this,arguments)}function Xl(){return Xl=(0,ne.Z)(function*(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Xe("FirestoreClient","Using user provided OnlineComponentProvider"),yield jm(s,s._uninitializedComponentsProvider._online)):(Xe("FirestoreClient","Using default OnlineComponentProvider"),yield jm(s,new wl))),s._onlineComponents}),Xl.apply(this,arguments)}function mh(s){return Hm(s).then(e=>e.persistence)}function Jl(s){return Hm(s).then(e=>e.localStore)}function _h(s){return _f(s).then(e=>e.remoteStore)}function Hp(s){return _f(s).then(e=>e.syncEngine)}function yh(s){return Gm.apply(this,arguments)}function Gm(){return Gm=(0,ne.Z)(function*(s){const e=yield _f(s),n=e.eventManager;return n.onListen=by.bind(null,e.syncEngine),n.onUnlisten=ph.bind(null,e.syncEngine),n}),Gm.apply(this,arguments)}function yf(s,e,n={}){const o=new Ir;return s.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function(l,g,b,N,L){const z=new Bm({next:me=>{g.enqueueAndForget(()=>af(l,X));const Ue=me.docs.has(b);!Ue&&me.fromCache?L.reject(new Ke(je.UNAVAILABLE,"Failed to get document because the client is offline.")):Ue&&me.fromCache&&N&&"server"===N.source?L.reject(new Ke(je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):L.resolve(me)},error:me=>L.reject(me)}),X=new cf(Vc(b.path),z,{includeMetadataChanges:!0,J_:!0});return bp(l,X)}(yield yh(s),s.asyncQueue,e,n,o)})),o.promise}function YE(s,e,n={}){const o=new Ir;return s.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function(l,g,b,N,L){const z=new Bm({next:me=>{g.enqueueAndForget(()=>af(l,X)),me.fromCache&&"server"===N.source?L.reject(new Ke(je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):L.resolve(me)},error:me=>L.reject(me)}),X=new cf(b,z,{includeMetadataChanges:!0,J_:!0});return bp(l,X)}(yield yh(s),s.asyncQueue,e,n,o)})),o.promise}function zp(s){const e={};return void 0!==s.timeoutSeconds&&(e.timeoutSeconds=s.timeoutSeconds),e}const Wm=new Map;function Vd(s,e,n){if(!n)throw new Ke(je.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function vh(s,e,n,o){if(!0===e&&!0===o)throw new Ke(je.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Eh(s){if(!dt.isDocumentKey(s))throw new Ke(je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Uy(s){if(dt.isDocumentKey(s))throw new Ke(je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Gp(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const e=(o=s).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof s?"a function":wt()}function pr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ke(je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gp(s);throw new Ke(je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function vf(s,e){if(e<=0)throw new Ke(je.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}class Wp{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new Ke(je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ke(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vh("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=zp(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(l){if(void 0!==l.timeoutSeconds){if(isNaN(l.timeoutSeconds))throw new Ke(je.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ke(je.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ke(je.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ef{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ke(je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ke(je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wp(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new as;switch(o.type){case"firstParty":return new Is(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Ke(je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=Wm.get(n);o&&(Xe("ComponentProvider","Removing Datastore"),Wm.delete(n),o.terminate())}(this),Promise.resolve()}}class Vo{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Vo(this.firestore,e,this._query)}}class Gi{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gi(this.firestore,e,this._key)}}class zc extends Vo{constructor(e,n,o){super(e,n,Vc(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gi(this.firestore,null,new dt(e))}withConverter(e){return new zc(this.firestore,e,this._path)}}function rI(s,e,...n){if(s=(0,ot.m9)(s),Vd("collection","path",e),s instanceof Ef){const o=Vn.fromString(e,...n);return Uy(o),new zc(s,null,o)}{if(!(s instanceof Gi||s instanceof zc))throw new Ke(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=s._path.child(Vn.fromString(e,...n));return Uy(o),new zc(s.firestore,null,o)}}function qm(s,e,...n){if(s=(0,ot.m9)(s),1===arguments.length&&(e=hs.newId()),Vd("doc","path",e),s instanceof Ef){const o=Vn.fromString(e,...n);return Eh(o),new Gi(s,null,new dt(o))}{if(!(s instanceof Gi||s instanceof zc))throw new Ke(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=s._path.child(Vn.fromString(e,...n));return Eh(o),new Gi(s.firestore,s instanceof zc?s.converter:null,new dt(o))}}function By(s,e){return s=(0,ot.m9)(s),e=(0,ot.m9)(e),(s instanceof Gi||s instanceof zc)&&(e instanceof Gi||e instanceof zc)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function Km(s,e){return s=(0,ot.m9)(s),e=(0,ot.m9)(e),s instanceof Vo&&e instanceof Vo&&s.firestore===e.firestore&&Ys(s._query,e._query)&&s.converter===e.converter}class sI{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Xh(this,"async_queue_retry"),this.iu=()=>{const n=um();n&&Xe("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=um();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=um();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Ir;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,ne.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!R(n))throw n;Xe("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(o=>{throw this.eu=o,this.tu=!1,yr("INTERNAL UNHANDLED ERROR: ",function(g){let b=g.message||"";return g.stack&&(b=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),b}(o)),o}).then(o=>(this.tu=!1,o))));return this.Ja=n,n}enqueueAfterDelay(e,n,o){this.su(),this.ru.indexOf(e)>-1&&(n=0);const u=Ap.createAndSchedule(this,e,n,o,l=>this.au(l));return this.Xa.push(u),u}su(){this.eu&&wt()}verifyOperationInProgress(){}uu(){var e=this;return(0,ne.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function If(s){return function(n,o){if("object"!=typeof n||null===n)return!1;const u=n;for(const l of["next","error","complete"])if(l in u&&"function"==typeof u[l])return!0;return!1}(s)}class wf{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ir,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class li extends Ef{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new sI,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||jy(this),this._firestoreClient.terminate()}}function is(s){return s._firestoreClient||jy(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function jy(s){var e,n,o;const u=s._freezeSettings(),l=(N=(null===(e=s._app)||void 0===e?void 0:e.options.appId)||"",new Tr(s._databaseId,N,s._persistenceKey,(z=u).host,z.ssl,z.experimentalForceLongPolling,z.experimentalAutoDetectLongPolling,zp(z.experimentalLongPollingOptions),z.useFetchStreams));var N,z;s._firestoreClient=new jp(s._authCredentials,s._appCheckCredentials,s._queue,l),null!==(n=u.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(s._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Hy(s,e,n){const o=new Ir;return s.asyncQueue.enqueue((0,ne.Z)(function*(){try{yield gh(s,n),yield jm(s,e),o.resolve()}catch(u){const l=u;if(!$p(l))throw l;_n("Error enabling indexeddb cache. Falling back to memory cache: "+l),o.reject(l)}})).then(()=>o.promise)}function Gy(s){if(s._initialized||s._terminated)throw new Ke(je.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Gc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gc(Hi.fromBase64String(e))}catch(n){throw new Ke(je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gc(Hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Uu{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Ke(je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ih{constructor(e){this._methodName=e}}class Zp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ke(je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ke(je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fn(this._lat,e._lat)||fn(this._long,e._long)}}const dI=/^__.*__$/;class Ym{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ou(e,this.data,n,this.fieldTransforms)}}class Wy{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Xm(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt()}}class Qp{constructor(e,n,o,u,l,g){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===l&&this.Pu(),this.fieldTransforms=l||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Qp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Au(e),u}Ru(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Pu(),u}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Af(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(Xm(this.Iu)&&dI.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class hI{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||yp(e)}pu(e,n,o,u=!1){return new Qp({Iu:e,methodName:n,gu:o,path:rr.emptyPath(),du:!1,fu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ed(s){const e=s._freezeSettings(),n=yp(s._databaseId);return new hI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Yp(s,e,n,o,u,l={}){const g=s.pu(l.merge||l.mergeFields?2:0,e,n,u);e_("Data must be an object, but it was:",g,o);const b=Jm(o,g);let N,L;if(l.merge)N=new Ts(g.fieldMask),L=g.fieldTransforms;else if(l.mergeFields){const z=[];for(const X of l.mergeFields){const me=Cf(e,X,n);if(!g.contains(me))throw new Ke(je.INVALID_ARGUMENT,`Field '${me}' is specified in your field mask but missing from your input data.`);Bu(z,me)||z.push(me)}N=new Ts(z),L=g.fieldTransforms.filter(X=>N.covers(X.field))}else N=null,L=g.fieldTransforms;return new Ym(new Yi(b),N,L)}class Sf extends Ih{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sf}}function Bd(s,e,n){return new Qp({Iu:3,gu:e.settings.gu,methodName:s._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class wh extends Ih{_toFieldTransform(e){return new Nu(e.path,new ci)}isEqual(e){return e instanceof wh}}class fI extends Ih{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=Bd(this,e,!0),o=this.yu.map(l=>Wc(l,n)),u=new Lr(o);return new Nu(e.path,u)}isEqual(e){return this===e}}class qy extends Ih{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=Bd(this,e,!0),o=this.yu.map(l=>Wc(l,n)),u=new vo(o);return new Nu(e.path,u)}isEqual(e){return this===e}}class pI extends Ih{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new ko(e.serializer,Dr(e.serializer,this.wu));return new Nu(e.path,n)}isEqual(e){return this===e}}function Xp(s,e,n,o){const u=s.pu(1,e,n);e_("Data must be an object, but it was:",u,o);const l=[],g=Yi.empty();No(o,(N,L)=>{const z=Jp(e,N,n);L=(0,ot.m9)(L);const X=u.Ru(z);if(L instanceof Sf)l.push(z);else{const me=Wc(L,X);null!=me&&(l.push(z),g.set(z,me))}});const b=new Ts(l);return new Wy(g,b,u.fieldTransforms)}function Ky(s,e,n,o,u,l){const g=s.pu(1,e,n),b=[Cf(e,o,n)],N=[u];if(l.length%2!=0)throw new Ke(je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let me=0;me<l.length;me+=2)b.push(Cf(e,l[me])),N.push(l[me+1]);const L=[],z=Yi.empty();for(let me=b.length-1;me>=0;--me)if(!Bu(L,b[me])){const Ue=b[me];let ht=N[me];ht=(0,ot.m9)(ht);const yt=g.Ru(Ue);if(ht instanceof Sf)L.push(Ue);else{const St=Wc(ht,yt);null!=St&&(L.push(Ue),z.set(Ue,St))}}const X=new Ts(L);return new Wy(z,X,g.fieldTransforms)}function Zy(s,e,n,o=!1){return Wc(n,s.pu(o?4:3,e))}function Wc(s,e){if(Qy(s=(0,ot.m9)(s)))return e_("Unsupported field value:",e,s),Jm(s,e);if(s instanceof Ih)return function(o,u){if(!Xm(u.Iu))throw u.mu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.mu(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(u);l&&u.fieldTransforms.push(l)}(s,e),null;if(void 0===s&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(o,u){const l=[];let g=0;for(const b of o){let N=Wc(b,u.Vu(g));null==N&&(N={nullValue:"NULL_VALUE"}),l.push(N),g++}return{arrayValue:{values:l}}}(s,e)}return function(o,u){if(null===(o=(0,ot.m9)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return Dr(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const l=kr.fromDate(o);return{timestampValue:tu(u.serializer,l)}}if(o instanceof kr){const l=new kr(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:tu(u.serializer,l)}}if(o instanceof Zp)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Gc)return{bytesValue:As(u.serializer,o._byteString)};if(o instanceof Gi){const l=u.databaseId,g=o.firestore._databaseId;if(!g.isEqual(l))throw u.mu(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:wd(o.firestore._databaseId||u.databaseId,o._key.path)}}throw u.mu(`Unsupported field value: ${Gp(o)}`)}(s,e)}function Jm(s,e){const n={};return Ea(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):No(s,(o,u)=>{const l=Wc(u,e.Eu(o));null!=l&&(n[o]=l)}),{mapValue:{fields:n}}}function Qy(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof kr||s instanceof Zp||s instanceof Gc||s instanceof Gi||s instanceof Ih)}function e_(s,e,n){if(!Qy(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=Gp(n);throw e.mu("an object"===o?s+" a custom object":s+" "+o)}var u}function Cf(s,e,n){if((e=(0,ot.m9)(e))instanceof Uu)return e._internalPath;if("string"==typeof e)return Jp(s,e);throw Af("Field path arguments must be of type string or ",s,!1,void 0,n)}const t_=new RegExp("[~\\*/\\[\\]]");function Jp(s,e,n){if(e.search(t_)>=0)throw Af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Uu(...e.split("."))._internalPath}catch{throw Af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Af(s,e,n,o,u){const l=o&&!o.isEmpty(),g=void 0!==u;let b=`Function ${e}() called with invalid data`;n&&(b+=" (via `toFirestore()`)"),b+=". ";let N="";return(l||g)&&(N+=" (found",l&&(N+=` in field ${o}`),g&&(N+=` in document ${u}`),N+=")"),new Ke(je.INVALID_ARGUMENT,b+s+N)}function Bu(s,e){return s.some(n=>n.isEqual(e))}class Th{constructor(e,n,o,u,l){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new gI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(n_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class gI extends Th{data(){return super.data()}}function n_(s,e){return"string"==typeof e?Jp(s,e):e instanceof Uu?e._internalPath:e._delegate._internalPath}function gs(s){if("L"===s.limitType&&0===s.explicitOrderBy.length)throw new Ke(je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r_{}class jd extends r_{}function td(s,e,...n){let o=[];e instanceof r_&&o.push(e),o=o.concat(n),function(l){const g=l.filter(N=>N instanceof $d).length,b=l.filter(N=>N instanceof bf).length;if(g>1||g>0&&b>0)throw new Ke(je.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)s=u._apply(s);return s}class bf extends jd{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new bf(e,n,o)}_apply(e){const n=this._parse(e);return Dh(e._query,n),new Vo(e.firestore,e.converter,gc(e._query,n))}_parse(e){const n=ed(e.firestore);return function(l,g,b,N,L,z,X){let me;if(L.isKeyField()){if("array-contains"===z||"array-contains-any"===z)throw new Ke(je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${z}' queries on documentId().`);if("in"===z||"not-in"===z){u_(X,z);const Ue=[];for(const ht of X)Ue.push(Mf(N,l,ht));me={arrayValue:{values:Ue}}}else me=Mf(N,l,X)}else"in"!==z&&"not-in"!==z&&"array-contains-any"!==z||u_(X,z),me=Zy(b,"where",X,"in"===z||"not-in"===z);return Xt.create(L,z,me)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class $d extends r_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $d(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:hr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,l){let g=u;const b=l.getFlattenedFilters();for(const N of b)Dh(g,N),g=gc(g,N)}(e._query,n),new Vo(e.firestore,e.converter,gc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class s_ extends jd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new s_(e,n)}_apply(e){const n=function(u,l,g){if(null!==u.startAt)throw new Ke(je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new Ke(je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new al(l,g)}(e._query,this._field,this._direction);return new Vo(e.firestore,e.converter,function(u,l){const g=u.explicitOrderBy.concat([l]);return new ia(u.path,u.collectionGroup,g,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}class qc extends jd{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new qc(e,n,o)}_apply(e){return new Vo(e.firestore,e.converter,Bl(e._query,this._limit,this._limitType))}}class eg extends jd{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new eg(e,n,o)}_apply(e){const n=Tl(e,this.type,this._docOrFields,this._inclusive);return new Vo(e.firestore,e.converter,(l=n,new ia((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,l,u.endAt)));var u,l}}class Rf extends jd{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new Rf(e,n,o)}_apply(e){const n=Tl(e,this.type,this._docOrFields,this._inclusive);return new Vo(e.firestore,e.converter,(l=n,new ia((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,l)));var u,l}}function Tl(s,e,n,o){if(n[0]=(0,ot.m9)(n[0]),n[0]instanceof Th)return function(l,g,b,N,L){if(!N)throw new Ke(je.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${b}().`);const z=[];for(const X of Pu(l))if(X.field.isKeyField())z.push(fs(g,N.key));else{const me=N.data.field(X.field);if($n(me))throw new Ke(je.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+X.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===me){const Ue=X.field.canonicalString();throw new Ke(je.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ue}' (used as the orderBy) does not exist.`)}z.push(me)}return new xi(z,L)}(s._query,s.firestore._databaseId,e,n[0]._document,o);{const u=ed(s.firestore);return function(g,b,N,L,z,X){const me=g.explicitOrderBy;if(z.length>me.length)throw new Ke(je.INVALID_ARGUMENT,`Too many arguments provided to ${L}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ue=[];for(let ht=0;ht<z.length;ht++){const yt=z[ht];if(me[ht].field.isKeyField()){if("string"!=typeof yt)throw new Ke(je.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${L}(), but got a ${typeof yt}`);if(!Vl(g)&&-1!==yt.indexOf("/"))throw new Ke(je.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${L}() must be a plain document ID, but '${yt}' contains a slash.`);const St=g.path.child(Vn.fromString(yt));if(!dt.isDocumentKey(St))throw new Ke(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${L}() must result in a valid document path, but '${St}' is not because it contains an odd number of segments.`);const yn=new dt(St);Ue.push(fs(b,yn))}else{const St=Zy(N,L,yt);Ue.push(St)}}return new xi(Ue,X)}(s._query,s.firestore._databaseId,u,e,n,o)}}function Mf(s,e,n){if("string"==typeof(n=(0,ot.m9)(n))){if(""===n)throw new Ke(je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vl(e)&&-1!==n.indexOf("/"))throw new Ke(je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(Vn.fromString(n));if(!dt.isDocumentKey(o))throw new Ke(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return fs(s,new dt(o))}if(n instanceof Gi)return fs(s,n._key);throw new Ke(je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gp(n)}.`)}function u_(s,e){if(!Array.isArray(s)||0===s.length)throw new Ke(je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Dh(s,e){const n=function(u,l){for(const g of u)for(const b of g.getFlattenedFilters())if(l.indexOf(b.op)>=0)return b.op;return null}(s.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Ke(je.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class c_{convertValue(e,n="none"){switch(Oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ni(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(We(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw wt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return No(e,(u,l)=>{o[u]=this.convertValue(l,n)}),o}convertGeoPoint(e){return new Zp(Ni(e.latitude),Ni(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=ac(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Xa(e));default:return null}}convertTimestamp(e){const n=oc(e);return new kr(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Vn.fromString(e);st(z_(o));const u=new ta(o.get(1),o.get(3)),l=new dt(o.popFirst(5));return u.isEqual(n)||yr(`Document ${l} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}function Sh(s,e,n){let o;return o=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,o}class ev extends c_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gi(this.firestore,null,n)}}class nd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dl extends Th{constructor(e,n,o,u,l,g){super(e,n,o,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(n_("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class rd extends Dl{data(e={}){return super.data(e)}}class ju{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new nd(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new rd(this._firestore,this._userDataWriter,o.key,o,new nd(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ke(je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,l){if(u._snapshot.oldDocs.isEmpty()){let g=0;return u._snapshot.docChanges.map(b=>({type:"added",doc:new rd(u._firestore,u._userDataWriter,b.doc.key,b.doc,new nd(u._snapshot.mutatedKeys.has(b.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:g++}))}{let g=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(b=>l||3!==b.type).map(b=>{const N=new rd(u._firestore,u._userDataWriter,b.doc.key,b.doc,new nd(u._snapshot.mutatedKeys.has(b.doc.key),u._snapshot.fromCache),u.query.converter);let L=-1,z=-1;return 0!==b.type&&(L=g.indexOf(b.doc.key),g=g.delete(b.doc.key)),1!==b.type&&(g=g.add(b.doc),z=g.indexOf(b.doc.key)),{type:II(b.type),doc:N,oldIndex:L,newIndex:z}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function II(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt()}}function tv(s,e){return s instanceof Dl&&e instanceof Dl?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(null===s._document?null===e._document:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof ju&&e instanceof ju&&s._firestore===e._firestore&&Km(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}class id extends c_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gi(this.firestore,null,n)}}function nv(s,e,n){s=pr(s,Gi);const o=pr(s.firestore,li),u=Sh(s.converter,e,n);return Ch(o,[Yp(ed(o),"setDoc",s._key,u,null!==s.converter,n).toMutation(s._key,Ft.none())])}function rv(s,e,n,...o){s=pr(s,Gi);const u=pr(s.firestore,li),l=ed(u);let g;return g="string"==typeof(e=(0,ot.m9)(e))||e instanceof Uu?Ky(l,"updateDoc",s._key,e,n,o):Xp(l,"updateDoc",s._key,e),Ch(u,[g.toMutation(s._key,Ft.exists(!0))])}function rg(s,...e){var n,o,u;s=(0,ot.m9)(s);let l={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||If(e[g])||(l=e[g],g++);const b={includeMetadataChanges:l.includeMetadataChanges};if(If(e[g])){const X=e[g];e[g]=null===(n=X.next)||void 0===n?void 0:n.bind(X),e[g+1]=null===(o=X.error)||void 0===o?void 0:o.bind(X),e[g+2]=null===(u=X.complete)||void 0===u?void 0:u.bind(X)}let N,L,z;if(s instanceof Gi)L=pr(s.firestore,li),z=Vc(s._key.path),N={next:X=>{e[g]&&e[g](ig(L,s,X))},error:e[g+1],complete:e[g+2]};else{const X=pr(s,Vo);L=pr(X.firestore,li),z=X._query;const me=new id(L);N={next:Ue=>{e[g]&&e[g](new ju(L,me,X,Ue))},error:e[g+1],complete:e[g+2]},gs(s._query)}return function(me,Ue,ht,yt){const St=new Bm(yt),yn=new cf(Ue,St,ht);return me.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return bp(yield yh(me),yn)})),()=>{St.Na(),me.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return af(yield yh(me),yn)}))}}(is(L),z,b,N)}function Ch(s,e){return function(o,u){const l=new Ir;return o.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function Ry(s,e,n){return vm.apply(this,arguments)}(yield Hp(o),u,l)})),l.promise}(is(s),e)}function ig(s,e,n){const o=n.docs.get(e._key),u=new id(s);return new Dl(s,u,e._key,o,new nd(n.hasPendingWrites,n.fromCache),e.converter)}const OI={maxAttempts:5};class h_{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ed(e)}set(e,n,o){this._verifyNotCommitted();const u=Kc(e,this._firestore),l=Sh(u.converter,n,o),g=Yp(this._dataReader,"WriteBatch.set",u._key,l,null!==u.converter,o);return this._mutations.push(g.toMutation(u._key,Ft.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const l=Kc(e,this._firestore);let g;return g="string"==typeof(n=(0,ot.m9)(n))||n instanceof Uu?Ky(this._dataReader,"WriteBatch.update",l._key,n,o,u):Xp(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(g.toMutation(l._key,Ft.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Kc(e,this._firestore);return this._mutations=this._mutations.concat(new xu(n._key,Ft.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ke(je.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Kc(s,e){if((s=(0,ot.m9)(s)).firestore!==e)throw new Ke(je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class f_ extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=ed(n)}get(n){const o=Kc(n,this._firestore),u=new ev(this._firestore);return this._transaction.lookup([o._key]).then(l=>{if(!l||1!==l.length)return wt();const g=l[0];if(g.isFoundDocument())return new Th(this._firestore,u,g.key,g,o.converter);if(g.isNoDocument())return new Th(this._firestore,u,o._key,null,o.converter);throw wt()})}set(n,o,u){const l=Kc(n,this._firestore),g=Sh(l.converter,o,u),b=Yp(this._dataReader,"Transaction.set",l._key,g,null!==l.converter,u);return this._transaction.set(l._key,b),this}update(n,o,u,...l){const g=Kc(n,this._firestore);let b;return b="string"==typeof(o=(0,ot.m9)(o))||o instanceof Uu?Ky(this._dataReader,"Transaction.update",g._key,o,u,l):Xp(this._dataReader,"Transaction.update",g._key,o),this._transaction.update(g._key,b),this}delete(n){const o=Kc(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Kc(e,this._firestore),o=new id(this._firestore);return super.get(e).then(u=>new Dl(this._firestore,o,n._key,u._document,new nd(!1,!1),n.converter))}}function yv(s,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ke("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}function $I(){if(typeof Uint8Array>"u")throw new Ke("unimplemented","Uint8Arrays are not available in this environment.")}function HI(){if(!function Wd(){return typeof atob<"u"}())throw new Ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Ut=Ge.SDK_VERSION,(0,Ge._registerComponent)(new pt.wA("firestore",(o,{instanceIdentifier:u,options:l})=>{const g=o.getProvider("app").getImmediate(),b=new li(new ho(o.getProvider("auth-internal")),new In(o.getProvider("app-check-internal")),function(L,z){if(!Object.prototype.hasOwnProperty.apply(L.options,["projectId"]))throw new Ke(je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ta(L.options.projectId,z)}(g,u),g);return l=Object.assign({useFetchStreams:n},l),b._setSettings(l),b},"PUBLIC").setMultipleInstances(!0)),(0,Ge.registerVersion)(Zn,"4.3.2",e),(0,Ge.registerVersion)(Zn,"4.3.2","esm2017")}();class ag{constructor(e){this._delegate=e}static fromBase64String(e){return HI(),new ag(Gc.fromBase64String(e))}static fromUint8Array(e){return $I(),new ag(Gc.fromUint8Array(e))}toBase64(){return HI(),this._delegate.toBase64()}toUint8Array(){return $I(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vv(s){return function vT(s,e){if("object"!=typeof s||null===s)return!1;const n=s;for(const o of e)if(o in n&&"function"==typeof n[o])return!0;return!1}(s,["next","error","complete"])}class ET{enableIndexedDbPersistence(e,n){return function Tf(s,e){Gy(s=pr(s,li));const n=is(s);if(n._uninitializedComponentsProvider)throw new Ke(je.FAILED_PRECONDITION,"SDK cache is already specified.");_n("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=s._freezeSettings(),u=new wl;return Hy(n,u,new Up(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function $y(s){Gy(s=pr(s,li));const e=is(s);if(e._uninitializedComponentsProvider)throw new Ke(je.FAILED_PRECONDITION,"SDK cache is already specified.");_n("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=s._freezeSettings(),o=new wl;return Hy(e,o,new Um(o,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function zy(s){if(s._initialized&&!s._terminated)throw new Ke(je.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ir;return s._queue.enqueueAndForgetEvenWhileRestricted((0,ne.Z)(function*(){try{yield(n=(0,ne.Z)(function*(u){if(!ks.D())return Promise.resolve();const l=u+"main";yield ks.delete(l)}),function o(u){return n.apply(this,arguments)})(Qh(s._databaseId,s._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class m_{constructor(e,n,o){this._delegate=n,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof ta||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&_n("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,o={}){!function nI(s,e,n,o={}){var u;const l=(s=pr(s,Ef))._getSettings(),g=`${e}:${n}`;if("firestore.googleapis.com"!==l.host&&l.host!==g&&_n("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},l),{host:g,ssl:!1})),o.mockUserToken){let b,N;if("string"==typeof o.mockUserToken)b=o.mockUserToken,N=Ye.MOCK_USER;else{b=(0,ot.Sg)(o.mockUserToken,null===(u=s._app)||void 0===u?void 0:u.options.projectId);const L=o.mockUserToken.sub||o.mockUserToken.user_id;if(!L)throw new Ke(je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new Ye(L)}s._authCredentials=new Ga(new za(b,N))}}(this._delegate,e,n,o)}enableNetwork(){return function Kp(s){return function KE(s){return s.asyncQueue.enqueue((0,ne.Z)(function*(){const e=yield mh(s),n=yield _h(s);return e.setNetworkEnabled(!0),function(u){const l=Tt(u);return l.C_.delete(0),Md(l)}(n)}))}(is(s=pr(s,li)))}(this._delegate)}disableNetwork(){return function uI(s){return function ZE(s){return s.asyncQueue.enqueue((0,ne.Z)(function*(){const e=yield mh(s),n=yield _h(s);return e.setNetworkEnabled(!1),(o=(0,ne.Z)(function*(l){const g=Tt(l);g.C_.add(0),yield Nd(g),g.M_.set("Offline")}),function u(l){return o.apply(this,arguments)})(n);var o}))}(is(s=pr(s,li)))}(this._delegate)}enablePersistence(e){let n=!1,o=!1;return e&&(n=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,vh("synchronizeTabs",n,"experimentalForceOwningTab",o)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function aI(s){return function(n){const o=new Ir;return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function wm(s,e){return Tm.apply(this,arguments)}(yield Hp(n),o)})),o.promise}(is(s=pr(s,li)))}(this._delegate)}onSnapshotsInSync(e){return function ov(s,e){return function XE(s,e){const n=new Bm(e);return s.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return u=yield yh(s),l=n,Tt(u).q_.add(l),void l.next();var u,l})),()=>{n.Na(),s.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return u=yield yh(s),l=n,void Tt(u).q_.delete(l);var u,l}))}}(is(s=pr(s,li)),If(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Lf(this,rI(this._delegate,e))}catch(n){throw ba(n,"collection()","Firestore.collection()")}}doc(e){try{return new vc(this,qm(this._delegate,e))}catch(n){throw ba(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new bs(this,function iI(s,e){if(s=pr(s,Ef),Vd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ke(je.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vo(s,null,(o=e,new ia(Vn.emptyPath(),o)));var o}(this._delegate,e))}catch(n){throw ba(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function fv(s,e,n){s=pr(s,li);const o=Object.assign(Object.assign({},OI),n);return function(l){if(l.maxAttempts<1)throw new Ke(je.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(l,g,b){const N=new Ir;return l.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){const L=yield function zm(s){return _f(s).then(e=>e.datastore)}(l);new ky(l.asyncQueue,L,b,g,N).run()})),N.promise}(is(s),u=>e(new f_(s,u)),o)}(this._delegate,n=>e(new zI(this,n)))}batch(){return is(this._delegate),new GI(new h_(this._delegate,e=>Ch(this._delegate,e)))}loadBundle(e){return function cI(s,e){const n=is(s=pr(s,li)),o=new wf;return function JE(s,e,n,o){const u=function(g,b){let N;return N="string"==typeof g?Yd().encode(g):g,z=function(z,X){if(z instanceof Uint8Array)return Bp(z,X);if(z instanceof ArrayBuffer)return Bp(new Uint8Array(z),X);if(z instanceof ReadableStream)return z.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(N),new Oy(z,b);var z}(n,yp(e));s.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){!function Vm(s,e,n){const o=Tt(s);var u;(u=(0,ne.Z)(function*(g,b,N){try{const L=yield b.getMetadata();if(yield function(ht,yt){const St=Tt(ht),yn=zi(yt.createTime);return St.persistence.runTransaction("hasNewerBundle","readonly",bn=>St.Kr.getBundleMetadata(bn,yt.id)).then(bn=>!!bn&&bn.createTime.compareTo(yn)>=0)}(g.localStore,L))return yield b.close(),N._completeWith({taskState:"Success",documentsLoaded:(ht=L).totalDocuments,bytesLoaded:ht.totalBytes,totalDocuments:ht.totalDocuments,totalBytes:ht.totalBytes}),Promise.resolve(new Set);N._updateProgress(df(L));const z=new mm(L,g.localStore,b.serializer);let X=yield b.Ma();for(;X;){const Ue=yield z.ea(X);Ue&&N._updateProgress(Ue),X=yield b.Ma()}const me=yield z.complete();return yield Hc(g,me.ra,void 0),yield function(ht,yt){const St=Tt(ht);return St.persistence.runTransaction("Save bundle","readwrite",yn=>St.Kr.saveBundleMetadata(yn,yt))}(g.localStore,L),N._completeWith(me.progress),Promise.resolve(me.na)}catch(L){return _n("SyncEngine",`Loading bundle failed with ${L}`),N._failWith(L),Promise.resolve(new Set)}var ht}),function l(g,b,N){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Hp(s),u,o)}))}(n,s._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function lI(s,e){return function Fy(s,e){return s.asyncQueue.enqueue((0,ne.Z)(function*(){return function(o,u){const l=Tt(o);return l.persistence.runTransaction("Get named query","readonly",g=>l.Kr.getNamedQuery(g,u))}(yield Jl(s),e)}))}(is(s=pr(s,li)),e).then(n=>n?new Vo(s,null,n.query):null)}(this._delegate,e).then(n=>n?new bs(this,n):null)}}class Of extends c_{constructor(e){super(),this.firestore=e}convertBytes(e){return new ag(new Gc(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return vc.forKey(n,this.firestore,null)}}class zI{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Of(e)}get(e){const n=sd(e);return this._delegate.get(n).then(o=>new ug(this._firestore,new Dl(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,n.converter)))}set(e,n,o){const u=sd(e);return o?(yv("Transaction.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const l=sd(e);return 2===arguments.length?this._delegate.update(l,n):this._delegate.update(l,n,o,...u),this}delete(e){const n=sd(e);return this._delegate.delete(n),this}}class GI{constructor(e){this._delegate=e}set(e,n,o){const u=sd(e);return o?(yv("WriteBatch.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const l=sd(e);return 2===arguments.length?this._delegate.update(l,n):this._delegate.update(l,n,o,...u),this}delete(e){const n=sd(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ah{constructor(e,n,o){this._firestore=e,this._userDataWriter=n,this._delegate=o}fromFirestore(e,n){const o=new rd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xf(this._firestore,o),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const o=Ah.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let l=u.get(n);return l||(l=new Ah(e,new Of(e),n),u.set(n,l)),l}}Ah.INSTANCES=new WeakMap;class vc{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Of(e)}static forPath(e,n,o){if(e.length%2!=0)throw new Ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new vc(n,new Gi(n._delegate,o,new dt(e)))}static forKey(e,n,o){return new vc(n,new Gi(n._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Lf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Lf(this.firestore,rI(this._delegate,e))}catch(n){throw ba(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ot.m9)(e))instanceof Gi&&By(this._delegate,e)}set(e,n){n=yv("DocumentReference.set",n);try{return n?nv(this._delegate,e,n):nv(this._delegate,e)}catch(o){throw ba(o,"setDoc()","DocumentReference.set()")}}update(e,n,...o){try{return 1===arguments.length?rv(this._delegate,e):rv(this._delegate,e,n,...o)}catch(u){throw ba(u,"updateDoc()","DocumentReference.update()")}}delete(){return function iv(s){return Ch(pr(s.firestore,li),[new xu(s._key,Ft.none())])}(this._delegate)}onSnapshot(...e){const n=WI(e),o=qI(e,u=>new ug(this.firestore,new Dl(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return rg(this._delegate,n,o)}get(e){let n;return n="cache"===e?.source?function TI(s){s=pr(s,Gi);const e=pr(s.firestore,li),n=is(e),o=new id(e);return function Ly(s,e){const n=new Ir;return s.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return(o=(0,ne.Z)(function*(l,g,b){try{const N=yield function(z,X){const me=Tt(z);return me.persistence.runTransaction("read document","readonly",Ue=>me.localDocuments.getDocument(Ue,X))}(l,g);N.isFoundDocument()?b.resolve(N):N.isNoDocument()?b.resolve(null):b.reject(new Ke(je.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(N){const L=kd(N,`Failed to get document '${g} from cache`);b.reject(L)}}),function u(l,g,b){return o.apply(this,arguments)})(yield Jl(s),e,n);var o})),n.promise}(n,s._key).then(u=>new Dl(e,o,s._key,u,new nd(null!==u&&u.hasLocalMutations,!0),s.converter))}(this._delegate):"server"===e?.source?function DI(s){s=pr(s,Gi);const e=pr(s.firestore,li);return yf(is(e),s._key,{source:"server"}).then(n=>ig(e,s,n))}(this._delegate):function wI(s){s=pr(s,Gi);const e=pr(s.firestore,li);return yf(is(e),s._key).then(n=>ig(e,s,n))}(this._delegate),n.then(o=>new ug(this.firestore,new Dl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new vc(this.firestore,this._delegate.withConverter(e?Ah.getInstance(this.firestore,e):null))}}function ba(s,e,n){return s.message=s.message.replace(e,n),s}function WI(s){for(const e of s)if("object"==typeof e&&!vv(e))return e;return{}}function qI(s,e){var n,o;let u;return u=vv(s[0])?s[0]:vv(s[1])?s[1]:"function"==typeof s[0]?{next:s[0],error:s[1],complete:s[2]}:{next:s[1],error:s[2],complete:s[3]},{next:l=>{u.next&&u.next(e(l))},error:null===(n=u.error)||void 0===n?void 0:n.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class ug{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new vc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return tv(this._delegate,e._delegate)}}class xf extends ug{data(e){const n=this._delegate.data(e);return this._delegate._converter||function ya(s,e){s||wt()}(void 0!==n),n}}class bs{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Of(e)}where(e,n,o){try{return new bs(this.firestore,td(this._delegate,function i_(s,e,n){const o=e,u=n_("where",s);return bf._create(u,o,n)}(e,n,o)))}catch(u){throw ba(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new bs(this.firestore,td(this._delegate,function yI(s,e="asc"){const n=e,o=n_("orderBy",s);return s_._create(o,n)}(e,n)))}catch(o){throw ba(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new bs(this.firestore,td(this._delegate,function Yy(s){return vf("limit",s),qc._create("limit",s,"F")}(e)))}catch(n){throw ba(n,"limit()","Query.limit()")}}limitToLast(e){try{return new bs(this.firestore,td(this._delegate,function o_(s){return vf("limitToLast",s),qc._create("limitToLast",s,"L")}(e)))}catch(n){throw ba(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new bs(this.firestore,td(this._delegate,function vI(...s){return eg._create("startAt",s,!0)}(...e)))}catch(n){throw ba(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new bs(this.firestore,td(this._delegate,function Xy(...s){return eg._create("startAfter",s,!1)}(...e)))}catch(n){throw ba(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new bs(this.firestore,td(this._delegate,function Pf(...s){return Rf._create("endBefore",s,!1)}(...e)))}catch(n){throw ba(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new bs(this.firestore,td(this._delegate,function a_(...s){return Rf._create("endAt",s,!0)}(...e)))}catch(n){throw ba(n,"endAt()","Query.endAt()")}}isEqual(e){return Km(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function CI(s){s=pr(s,Vo);const e=pr(s.firestore,li),n=is(e),o=new id(e);return function QE(s,e){const n=new Ir;return s.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return(o=(0,ne.Z)(function*(l,g,b){try{const N=yield hp(l,g,!0),L=new Cy(g,N.ls),z=L.ca(N.documents),X=L.applyChanges(z,!1);b.resolve(X.snapshot)}catch(N){const L=kd(N,`Failed to execute query '${g} against cache`);b.reject(L)}}),function u(l,g,b){return o.apply(this,arguments)})(yield Jl(s),e,n);var o})),n.promise}(n,s._query).then(u=>new ju(e,o,s,u))}(this._delegate):"server"===e?.source?function ng(s){s=pr(s,Vo);const e=pr(s.firestore,li),n=is(e),o=new id(e);return YE(n,s._query,{source:"server"}).then(u=>new ju(e,o,s,u))}(this._delegate):function SI(s){s=pr(s,Vo);const e=pr(s.firestore,li),n=is(e),o=new id(e);return gs(s._query),YE(n,s._query).then(u=>new ju(e,o,s,u))}(this._delegate),n.then(o=>new __(this.firestore,new ju(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const n=WI(e),o=qI(e,u=>new __(this.firestore,new ju(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return rg(this._delegate,n,o)}withConverter(e){return new bs(this.firestore,this._delegate.withConverter(e?Ah.getInstance(this.firestore,e):null))}}class kf{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new xf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class __{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new bs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new xf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new kf(this._firestore,n))}forEach(e,n){this._delegate.forEach(o=>{e.call(n,new xf(this._firestore,o))})}isEqual(e){return tv(this._delegate,e._delegate)}}class Lf extends bs{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new vc(this.firestore,e):null}doc(e){try{return new vc(this.firestore,void 0===e?qm(this._delegate):qm(this._delegate,e))}catch(n){throw ba(n,"doc()","CollectionReference.doc()")}}add(e){return function sv(s,e){const n=pr(s.firestore,li),o=qm(s),u=Sh(s.converter,e);return Ch(n,[Yp(ed(s.firestore),"addDoc",o._key,u,null!==s.converter,{}).toMutation(o._key,Ft.exists(!1))]).then(()=>o)}(this._delegate,e).then(n=>new vc(this.firestore,n))}isEqual(e){return By(this._delegate,e._delegate)}withConverter(e){return new Lf(this.firestore,this._delegate.withConverter(e?Ah.getInstance(this.firestore,e):null))}}function sd(s){return pr(s,Gi)}class y_{constructor(...e){this._delegate=new Uu(...e)}static documentId(){return new y_(rr.keyField().canonicalString())}isEqual(e){return(e=(0,ot.m9)(e))instanceof Uu&&this._delegate._internalPath.isEqual(e._internalPath)}}class bh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function gv(){return new wh("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new bh(e)}static delete(){const e=function pv(){return new Sf("deleteField")}();return e._methodName="FieldValue.delete",new bh(e)}static arrayUnion(...e){const n=function xI(...s){return new fI("arrayUnion",s)}(...e);return n._methodName="FieldValue.arrayUnion",new bh(n)}static arrayRemove(...e){const n=function mv(...s){return new qy("arrayRemove",s)}(...e);return n._methodName="FieldValue.arrayRemove",new bh(n)}static increment(e){const n=function kI(s){return new pI("increment",s)}(e);return n._methodName="FieldValue.increment",new bh(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const KI={Firestore:m_,GeoPoint:Zp,Timestamp:kr,Blob:ag,Transaction:zI,WriteBatch:GI,DocumentReference:vc,DocumentSnapshot:ug,Query:bs,QueryDocumentSnapshot:xf,QuerySnapshot:__,CollectionReference:Lf,FieldPath:y_,FieldValue:bh,setLogLevel:function IT(s){!function Yr(s){Ln.setLogLevel(s)}(s)},CACHE_SIZE_UNLIMITED:-1};!function QI(s){(function ZI(s,e){s.INTERNAL.registerComponent(new pt.wA("firestore-compat",n=>{const o=n.getProvider("app-compat").getImmediate(),u=n.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},KI)))})(s,(e,n)=>new m_(e,n,new ET)),s.registerVersion("@firebase/firestore-compat","0.3.22")}(rt.Z);var cg=B(7142);function Iv(s,e){return function Ev(s,e=fe.z){return new he.y(n=>{let o;return null!=e?e.schedule(()=>{o=s.onSnapshot({includeMetadataChanges:!0},n)}):o=s.onSnapshot({includeMetadataChanges:!0},n),()=>{o?.()}})}(s,e)}function Tv(s,e){return Iv(s,e).pipe((0,Qe.U)(n=>({payload:n,type:"query"})))}class v_{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const o=this.ref.collection(e),{ref:u,query:l}=Rv(o,n);return new Vf(u,l,this.afs)}snapshotChanges(){return function wv(s,e){return Iv(s,e).pipe((0,ue.O)(void 0),at(),(0,Qe.U)(n=>{const[o,u]=n;return u.exists?o?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(K.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Qe.U)(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return(0,Ne.D)(this.ref.get(e)).pipe(K.iC)}}function E_(s,e){return Tv(s,e).pipe((0,ue.O)(void 0),at(),(0,Qe.U)(n=>{const[o,u]=n,l=u.payload.docChanges(),g=l.map(b=>({type:b.type,payload:b}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((b,N)=>{const L=l.find(X=>X.doc.ref.isEqual(b.ref)),z=o?.payload.docs.find(X=>X.ref.isEqual(b.ref));L&&JSON.stringify(L.doc.metadata)===JSON.stringify(b.metadata)||!L&&z&&JSON.stringify(z.metadata)===JSON.stringify(b.metadata)||g.push({type:"modified",payload:{oldIndex:N,newIndex:N,type:"modified",doc:b}})}),g}))}function Dv(s,e,n){return E_(s,n).pipe((0,vt.R)((o,u)=>function Sv(s,e,n){return e.forEach(o=>{n.indexOf(o.type)>-1&&(s=function YI(s,e){switch(e.type){case"added":if(!s[e.newIndex]||!s[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ff(s,e.newIndex,0,e);break;case"modified":if(null==s[e.oldIndex]||s[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=s.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Ff(s,e.newIndex,1,e)}break;case"removed":if(s[e.oldIndex]&&s[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ff(s,e.oldIndex,1)}return s}(s,o))}),s}(o,u.map(l=>l.payload),e),[]),function Dt(s,e=Bt.y){return s=s??ct,(0,re.e)((n,o)=>{let u,l=!0;n.subscribe((0,Re.x)(o,g=>{const b=e(g);(l||!s(u,b))&&(l=!1,u=b,o.next(g))}))})}(),(0,Qe.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function Ff(s,e,n,...o){const u=s.slice();return u.splice(e,n,...o),u}function Cv(s){return(!s||0===s.length)&&(s=["added","removed","modified"]),s}class Vf{ref;query;afs;constructor(e,n,o){this.ref=e,this.query=n,this.afs=o}stateChanges(e){let n=E_(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,Qe.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),n.pipe((0,ue.O)(void 0),at(),(0,Gt.h)(([o,u])=>u.length>0||!o),(0,Qe.U)(([,o])=>o),K.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,vt.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=Cv(e);return Dv(this.query,n,this.afs.schedulers.outsideAngular).pipe(K.iC)}valueChanges(e={}){return Tv(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qe.U)(n=>n.payload.docs.map(o=>e.idField?{...o.data(),[e.idField]:o.id}:o.data())),K.iC)}get(e){return(0,Ne.D)(this.query.get(e)).pipe(K.iC)}add(e){return this.ref.add(e)}doc(e){return new v_(this.ref.doc(e),this.afs)}}class XI{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?E_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qe.U)(n=>n.filter(o=>e.indexOf(o.type)>-1)),(0,Gt.h)(n=>n.length>0),K.iC):E_(this.query,this.afs.schedulers.outsideAngular).pipe(K.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,vt.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=Cv(e);return Dv(this.query,n,this.afs.schedulers.outsideAngular).pipe(K.iC)}valueChanges(e={}){return Tv(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qe.U)(o=>o.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),K.iC)}get(e){return(0,Ne.D)(this.query.get(e)).pipe(K.iC)}}const Av=new H.OlP("angularfire2.enableFirestorePersistence"),bv=new H.OlP("angularfire2.firestore.persistenceSettings"),JI=new H.OlP("angularfire2.firestore.settings"),ew=new H.OlP("angularfire2.firestore.use-emulator");function Rv(s,e=(n=>n)){return{query:e(s),ref:s}}let Pv=(()=>{class s{schedulers;firestore;persistenceEnabled$;constructor(n,o,u,l,g,b,N,L,z,X,me,Ue,ht,yt,St,yn,bn){this.schedulers=N;const gn=(0,pe.on)(n,b,o),Bn=z;X&&(0,de.nw)(gn,b,me,ht,yt,St,Ue,yn),[this.firestore,this.persistenceEnabled$]=(0,pe.cc)(`${gn.name}.firestore`,"AngularFirestore",gn.name,()=>{const Hr=b.runOutsideAngular(()=>gn.firestore());if(l&&Hr.settings(l),Bn&&Hr.useEmulator(...Bn),u&&!(0,D.PM)(g)){const Sr=()=>{try{return(0,Ne.D)(Hr.enablePersistence(L||void 0).then(()=>!0,()=>!1))}catch(Rs){return typeof console<"u"&&console.warn(Rs),(0,Oe.of)(!1)}};return[Hr,b.runOutsideAngular(Sr)]}return[Hr,(0,Oe.of)(!1)]},[l,Bn,u])}collection(n,o){let u;u="string"==typeof n?this.firestore.collection(n):n;const{ref:l,query:g}=Rv(u,o),b=this.schedulers.ngZone.run(()=>l);return new Vf(b,g,this)}collectionGroup(n,o){const u=o||(g=>g),l=this.firestore.collectionGroup(n);return new XI(u(l),this)}doc(n){let o;o="string"==typeof n?this.firestore.doc(n):n;const u=this.schedulers.ngZone.run(()=>o);return new v_(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||s)(H.LFG(pe.Dh),H.LFG(pe.xv,8),H.LFG(Av,8),H.LFG(JI,8),H.LFG(H.Lbi),H.LFG(H.R0b),H.LFG(K.HU),H.LFG(bv,8),H.LFG(ew,8),H.LFG(de.zQ,8),H.LFG(de.Qv,8),H.LFG(de.L6,8),H.LFG(de._Q,8),H.LFG(de.rT,8),H.LFG(de.lh,8),H.LFG(de.f7,8),H.LFG(K.Rf,8))};static \u0275prov=H.Yz7({token:s,factory:s.\u0275fac,providedIn:"any"})}return s})(),Mv=(()=>{class s{constructor(){cg.Z.registerVersion("angularfire",K.q4.full,"fst-compat")}static enablePersistence(n){return{ngModule:s,providers:[{provide:Av,useValue:!0},{provide:bv,useValue:n}]}}static \u0275fac=function(o){return new(o||s)};static \u0275mod=H.oAB({type:s});static \u0275inj=H.cJS({providers:[Pv]})}return s})()},7217:(Rt,Ve,B)=>{B.d(Ve,{Dh:()=>Ne,GT:()=>fe,cc:()=>Qe,hO:()=>at,on:()=>ue,pX:()=>de,xv:()=>Oe});var D=B(9212),H=B(8326),K=B(7142);const pe=["ngOnDestroy"],de=(ct,Gt,Wt,rt={})=>new Proxy(ct,{get:(ne,Ge)=>Wt.runOutsideAngular(()=>{if(ct[Ge])return rt?.spy?.get&&rt.spy.get(Ge,ct[Ge]),ct[Ge];if(pe.indexOf(Ge)>-1)return()=>{};const pt=Gt.toPromise().then(Ze=>{const ot=Ze?.[Ge];return"function"==typeof ot?ot.bind(Ze):ot?.then?ot.then(ie=>Wt.run(()=>ie)):Wt.run(()=>ot)});return new Proxy(()=>{},{get:(Ze,ot)=>pt[ot],apply:(Ze,ot,ie)=>pt.then(ye=>{const Ce=ye?.(...ie);return rt?.spy?.apply&&rt.spy.apply(Ge,ie,Ce),Ce})})})}),fe=(ct,Gt)=>{Gt.forEach(Wt=>{Object.getOwnPropertyNames(Wt.prototype||Wt).forEach(rt=>{Object.defineProperty(ct.prototype,rt,Object.getOwnPropertyDescriptor(Wt.prototype||Wt,rt))})})};class he{constructor(Gt){return Gt}}const Ne=new D.OlP("angularfire2.app.options"),Oe=new D.OlP("angularfire2.app.name");function ue(ct,Gt,Wt){const ne="object"==typeof Wt&&Wt||{};ne.name=ne.name||"string"==typeof Wt&&Wt||"[DEFAULT]";const pt=K.Z.apps.filter(Ze=>Ze&&Ze.name===ne.name)[0]||Gt.runOutsideAngular(()=>K.Z.initializeApp(ct,ne));try{if(JSON.stringify(ct)!==JSON.stringify(pt.options)){const Ze=!!module.hot;re("error",`${pt.name} Firebase App already initialized with different options${Ze?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new he(pt)}const re=(ct,...Gt)=>{(0,D.X6Q)()&&typeof console<"u"&&console[ct](...Gt)},Re={provide:he,useFactory:ue,deps:[Ne,D.R0b,[new D.FiY,Oe]]};let at=(()=>{class ct{static initializeApp(Wt,rt){return{ngModule:ct,providers:[{provide:Ne,useValue:Wt},{provide:Oe,useValue:rt}]}}constructor(Wt){K.Z.registerVersion("angularfire",H.q4.full,"core"),K.Z.registerVersion("angularfire",H.q4.full,"app-compat"),K.Z.registerVersion("angular",D.q4F.full,Wt.toString())}static \u0275fac=function(rt){return new(rt||ct)(D.LFG(D.Lbi))};static \u0275mod=D.oAB({type:ct});static \u0275inj=D.cJS({providers:[Re]})}return ct})();function Qe(ct,Gt,Wt,rt,ne){const[,Ge,pt]=globalThis.\u0275AngularfireInstanceCache.find(Ze=>Ze[0]===ct)||[];if(Ge)return function vt(ct,Gt){try{return ct.toString()===Gt.toString()}catch{return ct===Gt}}(ne,pt)||(Dt("error",`${Gt} was already initialized on the ${Wt} Firebase App with different settings.${Bt?" You may need to reload as Firebase is not HMR aware.":""}`),Dt("warn",{is:ne,was:pt})),Ge;{const Ze=rt();return globalThis.\u0275AngularfireInstanceCache.push([ct,Ze,ne]),Ze}}const Bt=typeof module<"u"&&!!module.hot,Dt=(ct,...Gt)=>{(0,D.X6Q)()&&typeof console<"u"&&console[ct](...Gt)};globalThis.\u0275AngularfireInstanceCache||=[]},8326:(Rt,Ve,B)=>{B.d(Ve,{q4:()=>vt,iC:()=>an,fc:()=>ye,HU:()=>pt,Rf:()=>Gt});var D=B(9212),H=B(534);(0,H.registerVersion)("firebase","10.6.0","app");var de=B(1954),he=B(2631);const Oe=new class Ne extends he.v{}(class fe extends de.o{constructor(en,ge){super(en,ge),this.scheduler=en,this.work=ge}schedule(en,ge=0){return ge>0?super.schedule(en,ge):(this.delay=ge,this.state=en,this.scheduler.flush(this),this)}execute(en,ge){return ge>0||this.closed?super.execute(en,ge):this._execute(en,ge)}requestAsyncId(en,ge,Me=0){return null!=Me&&Me>0||null==Me&&this.delay>0?super.requestAsyncId(en,ge,Me):(en.flush(this),0)}});var re=B(6321),Re=B(9397),at=B(3093),Qe=B(5137);const vt=new D.GfV("ANGULARFIRE2_VERSION");class Gt{constructor(){return((Ht,en)=>{const ge=(0,H.getApps)(),Me=[];return ge.forEach(Ae=>{Ae.container.getProvider(Ht).instances.forEach(Fe=>{Me.includes(Fe)||Me.push(Fe)})}),Me})(Wt)}}const Wt="app-check";function rt(){}class ne{zone;delegate;constructor(en,ge=Oe){this.zone=en,this.delegate=ge}now(){return this.delegate.now()}schedule(en,ge,Me){const Ae=this.zone;return this.delegate.schedule(function(Fe){Ae.runGuarded(()=>{en.apply(this,[Fe])})},ge,Me)}}class Ge{zone;task=null;constructor(en){this.zone=en}call(en,ge){const Me=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rt,{},rt,rt)),ge.pipe((0,Re.b)({next:Me,complete:Me,error:Me})).subscribe(en).add(Me)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let pt=(()=>{class Ht{ngZone;outsideAngular;insideAngular;constructor(ge){this.ngZone=ge,this.outsideAngular=ge.runOutsideAngular(()=>new ne(Zone.current)),this.insideAngular=ge.run(()=>new ne(Zone.current,re.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Me){return new(Me||Ht)(D.LFG(D.R0b))};static \u0275prov=D.Yz7({token:Ht,factory:Ht.\u0275fac,providedIn:"root"})}return Ht})();function Ze(){const Ht=globalThis.\u0275AngularFireScheduler;if(!Ht)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Ht}function ye(Ht){return Ht.pipe((0,at.Q)(Ze().outsideAngular))}function an(Ht){return function Pt(Ht){return function(ge){return(ge=ge.lift(new Ge(Ht.ngZone))).pipe((0,Qe.R)(Ht.outsideAngular),(0,at.Q)(Ht.insideAngular))}}(Ze())(Ht)}},6593:(Rt,Ve,B)=>{B.d(Ve,{Cg:()=>Ae,Dx:()=>Gn,b2:()=>or,se:()=>Ze});var D=B(9212),H=B(6814);class K extends H.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class pe extends K{static makeCurrent(){(0,H.HT)(new pe)}onAndCancel(xe,te,De){return xe.addEventListener(te,De),()=>{xe.removeEventListener(te,De)}}dispatchEvent(xe,te){xe.dispatchEvent(te)}remove(xe){xe.parentNode&&xe.parentNode.removeChild(xe)}createElement(xe,te){return(te=te||this.getDefaultDocument()).createElement(xe)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(xe){return xe.nodeType===Node.ELEMENT_NODE}isShadowRoot(xe){return xe instanceof DocumentFragment}getGlobalEventTarget(xe,te){return"window"===te?window:"document"===te?xe:"body"===te?xe.body:null}getBaseHref(xe){const te=function fe(){return de=de||document.querySelector("base"),de?de.getAttribute("href"):null}();return null==te?null:function he(Ie){return new URL(Ie,document.baseURI).pathname}(te)}resetBaseElement(){de=null}getUserAgent(){return window.navigator.userAgent}getCookie(xe){return(0,H.Mx)(document.cookie,xe)}}let de=null,Oe=(()=>{class Ie{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(De){return new(De||Ie)};static#t=this.\u0275prov=D.Yz7({token:Ie,factory:Ie.\u0275fac})}return Ie})();const ue=new D.OlP("");let re=(()=>{class Ie{constructor(te,De){this._zone=De,this._eventNameToPlugin=new Map,te.forEach(Z=>{Z.manager=this}),this._plugins=te.slice().reverse()}addEventListener(te,De,Z){return this._findPluginFor(De).addEventListener(te,De,Z)}getZone(){return this._zone}_findPluginFor(te){let De=this._eventNameToPlugin.get(te);if(De)return De;if(De=this._plugins.find(Y=>Y.supports(te)),!De)throw new D.vHH(5101,!1);return this._eventNameToPlugin.set(te,De),De}static#e=this.\u0275fac=function(De){return new(De||Ie)(D.LFG(ue),D.LFG(D.R0b))};static#t=this.\u0275prov=D.Yz7({token:Ie,factory:Ie.\u0275fac})}return Ie})();class Re{constructor(xe){this._doc=xe}}const at="ng-app-id";let Qe=(()=>{class Ie{constructor(te,De,Z,Y={}){this.doc=te,this.appId=De,this.nonce=Z,this.platformId=Y,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,H.PM)(Y),this.resetHostNodes()}addStyles(te){for(const De of te)1===this.changeUsageCount(De,1)&&this.onStyleAdded(De)}removeStyles(te){for(const De of te)this.changeUsageCount(De,-1)<=0&&this.onStyleRemoved(De)}ngOnDestroy(){const te=this.styleNodesInDOM;te&&(te.forEach(De=>De.remove()),te.clear());for(const De of this.getAllStyles())this.onStyleRemoved(De);this.resetHostNodes()}addHost(te){this.hostNodes.add(te);for(const De of this.getAllStyles())this.addStyleToHost(te,De)}removeHost(te){this.hostNodes.delete(te)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(te){for(const De of this.hostNodes)this.addStyleToHost(De,te)}onStyleRemoved(te){const De=this.styleRef;De.get(te)?.elements?.forEach(Z=>Z.remove()),De.delete(te)}collectServerRenderedStyles(){const te=this.doc.head?.querySelectorAll(`style[${at}="${this.appId}"]`);if(te?.length){const De=new Map;return te.forEach(Z=>{null!=Z.textContent&&De.set(Z.textContent,Z)}),De}return null}changeUsageCount(te,De){const Z=this.styleRef;if(Z.has(te)){const Y=Z.get(te);return Y.usage+=De,Y.usage}return Z.set(te,{usage:De,elements:[]}),De}getStyleElement(te,De){const Z=this.styleNodesInDOM,Y=Z?.get(De);if(Y?.parentNode===te)return Z.delete(De),Y.removeAttribute(at),Y;{const se=this.doc.createElement("style");return this.nonce&&se.setAttribute("nonce",this.nonce),se.textContent=De,this.platformIsServer&&se.setAttribute(at,this.appId),te.appendChild(se),se}}addStyleToHost(te,De){const Z=this.getStyleElement(te,De),Y=this.styleRef,se=Y.get(De)?.elements;se?se.push(Z):Y.set(De,{elements:[Z],usage:1})}resetHostNodes(){const te=this.hostNodes;te.clear(),te.add(this.doc.head)}static#e=this.\u0275fac=function(De){return new(De||Ie)(D.LFG(H.K0),D.LFG(D.AFp),D.LFG(D.Ojb,8),D.LFG(D.Lbi))};static#t=this.\u0275prov=D.Yz7({token:Ie,factory:Ie.\u0275fac})}return Ie})();const vt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bt=/%COMP%/g,rt=new D.OlP("",{providedIn:"root",factory:()=>!0});function pt(Ie,xe){return xe.map(te=>te.replace(Bt,Ie))}let Ze=(()=>{class Ie{constructor(te,De,Z,Y,se,Be,Se,mt=null){this.eventManager=te,this.sharedStylesHost=De,this.appId=Z,this.removeStylesOnCompDestroy=Y,this.doc=se,this.platformId=Be,this.ngZone=Se,this.nonce=mt,this.rendererByCompId=new Map,this.platformIsServer=(0,H.PM)(Be),this.defaultRenderer=new ot(te,se,Se,this.platformIsServer)}createRenderer(te,De){if(!te||!De)return this.defaultRenderer;this.platformIsServer&&De.encapsulation===D.ifc.ShadowDom&&(De={...De,encapsulation:D.ifc.Emulated});const Z=this.getOrCreateRenderer(te,De);return Z instanceof Xn?Z.applyToHost(te):Z instanceof Pt&&Z.applyStyles(),Z}getOrCreateRenderer(te,De){const Z=this.rendererByCompId;let Y=Z.get(De.id);if(!Y){const se=this.doc,Be=this.ngZone,Se=this.eventManager,mt=this.sharedStylesHost,on=this.removeStylesOnCompDestroy,un=this.platformIsServer;switch(De.encapsulation){case D.ifc.Emulated:Y=new Xn(Se,mt,De,this.appId,on,se,Be,un);break;case D.ifc.ShadowDom:return new an(Se,mt,te,De,se,Be,this.nonce,un);default:Y=new Pt(Se,mt,De,on,se,Be,un)}Z.set(De.id,Y)}return Y}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(De){return new(De||Ie)(D.LFG(re),D.LFG(Qe),D.LFG(D.AFp),D.LFG(rt),D.LFG(H.K0),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(D.Ojb))};static#t=this.\u0275prov=D.Yz7({token:Ie,factory:Ie.\u0275fac})}return Ie})();class ot{constructor(xe,te,De,Z){this.eventManager=xe,this.doc=te,this.ngZone=De,this.platformIsServer=Z,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(xe,te){return te?this.doc.createElementNS(vt[te]||te,xe):this.doc.createElement(xe)}createComment(xe){return this.doc.createComment(xe)}createText(xe){return this.doc.createTextNode(xe)}appendChild(xe,te){(Ce(xe)?xe.content:xe).appendChild(te)}insertBefore(xe,te,De){xe&&(Ce(xe)?xe.content:xe).insertBefore(te,De)}removeChild(xe,te){xe&&xe.removeChild(te)}selectRootElement(xe,te){let De="string"==typeof xe?this.doc.querySelector(xe):xe;if(!De)throw new D.vHH(-5104,!1);return te||(De.textContent=""),De}parentNode(xe){return xe.parentNode}nextSibling(xe){return xe.nextSibling}setAttribute(xe,te,De,Z){if(Z){te=Z+":"+te;const Y=vt[Z];Y?xe.setAttributeNS(Y,te,De):xe.setAttribute(te,De)}else xe.setAttribute(te,De)}removeAttribute(xe,te,De){if(De){const Z=vt[De];Z?xe.removeAttributeNS(Z,te):xe.removeAttribute(`${De}:${te}`)}else xe.removeAttribute(te)}addClass(xe,te){xe.classList.add(te)}removeClass(xe,te){xe.classList.remove(te)}setStyle(xe,te,De,Z){Z&(D.JOm.DashCase|D.JOm.Important)?xe.style.setProperty(te,De,Z&D.JOm.Important?"important":""):xe.style[te]=De}removeStyle(xe,te,De){De&D.JOm.DashCase?xe.style.removeProperty(te):xe.style[te]=""}setProperty(xe,te,De){null!=xe&&(xe[te]=De)}setValue(xe,te){xe.nodeValue=te}listen(xe,te,De){if("string"==typeof xe&&!(xe=(0,H.q)().getGlobalEventTarget(this.doc,xe)))throw new Error(`Unsupported event target ${xe} for event ${te}`);return this.eventManager.addEventListener(xe,te,this.decoratePreventDefault(De))}decoratePreventDefault(xe){return te=>{if("__ngUnwrap__"===te)return xe;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>xe(te)):xe(te))&&te.preventDefault()}}}function Ce(Ie){return"TEMPLATE"===Ie.tagName&&void 0!==Ie.content}class an extends ot{constructor(xe,te,De,Z,Y,se,Be,Se){super(xe,Y,se,Se),this.sharedStylesHost=te,this.hostEl=De,this.shadowRoot=De.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const mt=pt(Z.id,Z.styles);for(const on of mt){const un=document.createElement("style");Be&&un.setAttribute("nonce",Be),un.textContent=on,this.shadowRoot.appendChild(un)}}nodeOrShadowRoot(xe){return xe===this.hostEl?this.shadowRoot:xe}appendChild(xe,te){return super.appendChild(this.nodeOrShadowRoot(xe),te)}insertBefore(xe,te,De){return super.insertBefore(this.nodeOrShadowRoot(xe),te,De)}removeChild(xe,te){return super.removeChild(this.nodeOrShadowRoot(xe),te)}parentNode(xe){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(xe)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Pt extends ot{constructor(xe,te,De,Z,Y,se,Be,Se){super(xe,Y,se,Be),this.sharedStylesHost=te,this.removeStylesOnCompDestroy=Z,this.styles=Se?pt(Se,De.styles):De.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Xn extends Pt{constructor(xe,te,De,Z,Y,se,Be,Se){const mt=Z+"-"+De.id;super(xe,te,De,Y,se,Be,Se,mt),this.contentAttr=function ne(Ie){return"_ngcontent-%COMP%".replace(Bt,Ie)}(mt),this.hostAttr=function Ge(Ie){return"_nghost-%COMP%".replace(Bt,Ie)}(mt)}applyToHost(xe){this.applyStyles(),this.setAttribute(xe,this.hostAttr,"")}createElement(xe,te){const De=super.createElement(xe,te);return super.setAttribute(De,this.contentAttr,""),De}}let Rn=(()=>{class Ie extends Re{constructor(te){super(te)}supports(te){return!0}addEventListener(te,De,Z){return te.addEventListener(De,Z,!1),()=>this.removeEventListener(te,De,Z)}removeEventListener(te,De,Z){return te.removeEventListener(De,Z)}static#e=this.\u0275fac=function(De){return new(De||Ie)(D.LFG(H.K0))};static#t=this.\u0275prov=D.Yz7({token:Ie,factory:Ie.\u0275fac})}return Ie})();const Ht=["alt","control","meta","shift"],en={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ge={alt:Ie=>Ie.altKey,control:Ie=>Ie.ctrlKey,meta:Ie=>Ie.metaKey,shift:Ie=>Ie.shiftKey};let Me=(()=>{class Ie extends Re{constructor(te){super(te)}supports(te){return null!=Ie.parseEventName(te)}addEventListener(te,De,Z){const Y=Ie.parseEventName(De),se=Ie.eventCallback(Y.fullKey,Z,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,H.q)().onAndCancel(te,Y.domEventName,se))}static parseEventName(te){const De=te.toLowerCase().split("."),Z=De.shift();if(0===De.length||"keydown"!==Z&&"keyup"!==Z)return null;const Y=Ie._normalizeKey(De.pop());let se="",Be=De.indexOf("code");if(Be>-1&&(De.splice(Be,1),se="code."),Ht.forEach(mt=>{const on=De.indexOf(mt);on>-1&&(De.splice(on,1),se+=mt+".")}),se+=Y,0!=De.length||0===Y.length)return null;const Se={};return Se.domEventName=Z,Se.fullKey=se,Se}static matchEventFullKeyCode(te,De){let Z=en[te.key]||te.key,Y="";return De.indexOf("code.")>-1&&(Z=te.code,Y="code."),!(null==Z||!Z)&&(Z=Z.toLowerCase()," "===Z?Z="space":"."===Z&&(Z="dot"),Ht.forEach(se=>{se!==Z&&(0,ge[se])(te)&&(Y+=se+".")}),Y+=Z,Y===De)}static eventCallback(te,De,Z){return Y=>{Ie.matchEventFullKeyCode(Y,te)&&Z.runGuarded(()=>De(Y))}}static _normalizeKey(te){return"esc"===te?"escape":te}static#e=this.\u0275fac=function(De){return new(De||Ie)(D.LFG(H.K0))};static#t=this.\u0275prov=D.Yz7({token:Ie,factory:Ie.\u0275fac})}return Ie})();function Ae(Ie,xe){return(0,D.iPO)({rootComponent:Ie,...Fe(xe)})}function Fe(Ie){return{appProviders:[...zn,...Ie?.providers??[]],platformProviders:Ct}}const Ct=[{provide:D.Lbi,useValue:H.bD},{provide:D.g9A,useValue:function _t(){pe.makeCurrent()},multi:!0},{provide:H.K0,useFactory:function cn(){return(0,D.RDi)(document),document},deps:[]}],hn=new D.OlP(""),On=[{provide:D.rWj,useClass:class Ne{addToWindow(xe){D.dqk.getAngularTestability=(De,Z=!0)=>{const Y=xe.findTestabilityInTree(De,Z);if(null==Y)throw new D.vHH(5103,!1);return Y},D.dqk.getAllAngularTestabilities=()=>xe.getAllTestabilities(),D.dqk.getAllAngularRootElements=()=>xe.getAllRootElements(),D.dqk.frameworkStabilizers||(D.dqk.frameworkStabilizers=[]),D.dqk.frameworkStabilizers.push(De=>{const Z=D.dqk.getAllAngularTestabilities();let Y=Z.length;const se=function(){Y--,0==Y&&De()};Z.forEach(Be=>{Be.whenStable(se)})})}findTestabilityInTree(xe,te,De){return null==te?null:xe.getTestability(te)??(De?(0,H.q)().isShadowRoot(te)?this.findTestabilityInTree(xe,te.host,!0):this.findTestabilityInTree(xe,te.parentElement,!0):null)}},deps:[]},{provide:D.lri,useClass:D.dDg,deps:[D.R0b,D.eoX,D.rWj]},{provide:D.dDg,useClass:D.dDg,deps:[D.R0b,D.eoX,D.rWj]}],zn=[{provide:D.zSh,useValue:"root"},{provide:D.qLn,useFactory:function rn(){return new D.qLn},deps:[]},{provide:ue,useClass:Rn,multi:!0,deps:[H.K0,D.R0b,D.Lbi]},{provide:ue,useClass:Me,multi:!0,deps:[H.K0]},Ze,Qe,re,{provide:D.FYo,useExisting:Ze},{provide:H.JF,useClass:Oe,deps:[]},[]];let or=(()=>{class Ie{constructor(te){}static withServerTransition(te){return{ngModule:Ie,providers:[{provide:D.AFp,useValue:te.appId}]}}static#e=this.\u0275fac=function(De){return new(De||Ie)(D.LFG(hn,12))};static#t=this.\u0275mod=D.oAB({type:Ie});static#n=this.\u0275inj=D.cJS({providers:[...zn,...On],imports:[H.ez,D.hGG]})}return Ie})(),Gn=(()=>{class Ie{constructor(te){this._doc=te}getTitle(){return this._doc.title}setTitle(te){this._doc.title=te||""}static#e=this.\u0275fac=function(De){return new(De||Ie)(D.LFG(H.K0))};static#t=this.\u0275prov=D.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"})}return Ie})()},8878:(Rt,Ve,B)=>{B.d(Ve,{gz:()=>Kt,F0:()=>_n,rH:()=>st,lC:()=>oo,eV:()=>Or,bU:()=>ho});var D=B(9212),H=B(5592),K=B(4674),de=B(2459),fe=B(2096),he=B(5619),Ne=B(6973),Oe=B(7453),ue=B(2737),re=B(7400),Re=B(9940),at=B(2714),Qe=B(8251),vt=B(7103);function Bt(...w){const R=(0,Re.yG)(w),S=(0,Re.jO)(w),{args:M,keys:F}=(0,Oe.D)(w);if(0===M.length)return(0,de.D)([],R);const q=new H.y(function Dt(w,R,S=ue.y){return M=>{ct(R,()=>{const{length:F}=w,q=new Array(F);let oe=F,ze=F;for(let we=0;we<F;we++)ct(R,()=>{const It=(0,de.D)(w[we],R);let vn=!1;It.subscribe((0,Qe.x)(M,Cn=>{q[we]=Cn,vn||(vn=!0,ze--),ze||M.next(S(q.slice()))},()=>{--oe||M.complete()}))},M)},M)}}(M,R,F?oe=>(0,at.n)(F,oe):ue.y));return S?q.pipe((0,re.Z)(S)):q}function ct(w,R,S){w?(0,vt.f)(S,w,R):R()}var Gt=B(5211),Wt=B(4911),rt=B(8407),ne=B(8504),Ge=B(6232),pt=B(3168),Ze=B(8645),ot=B(7394),ie=B(6814),ye=B(7398),Ce=B(4664),an=B(8180),Pt=B(7921),Xn=B(2181),Rn=B(1631),Ht=B(1374);function en(w,R){return(0,K.m)(R)?(0,Rn.z)(w,R,1):(0,Rn.z)(w,1)}var ge=B(9397),Me=B(4829),Ae=B(9360);function Ee(w){return(0,Ae.e)((R,S)=>{let q,M=null,F=!1;M=R.subscribe((0,Qe.x)(S,void 0,void 0,oe=>{q=(0,Me.Xf)(w(oe,Ee(w)(R))),M?(M.unsubscribe(),M=null,q.subscribe(S)):F=!0})),F&&(M.unsubscribe(),M=null,q.subscribe(S))})}var Fe=B(6699),Te=B(3572);function _t(w){return w<=0?()=>Ge.E:(0,Ae.e)((R,S)=>{let M=[];R.subscribe((0,Qe.x)(S,F=>{M.push(F),w<M.length&&M.shift()},()=>{for(const F of M)S.next(F);S.complete()},void 0,()=>{M=null}))})}var rn=B(3026),Ct=B(975);function tn(w){return(0,Ae.e)((R,S)=>{try{R.subscribe(S)}finally{S.add(w)}})}var hn=B(6196),On=B(2420);B(7537);var Jn=B(6593);const kt="primary",Gn=Symbol("RouteTitle");class lt{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const S=this.params[R];return Array.isArray(S)?S[0]:S}return null}getAll(R){if(this.has(R)){const S=this.params[R];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function Wn(w){return new lt(w)}function Gr(w,R,S){const M=S.path.split("/");if(M.length>w.length||"full"===S.pathMatch&&(R.hasChildren()||M.length<w.length))return null;const F={};for(let q=0;q<M.length;q++){const oe=M[q],ze=w[q];if(oe.startsWith(":"))F[oe.substring(1)]=ze;else if(oe!==ze.path)return null}return{consumed:w.slice(0,M.length),posParams:F}}function gr(w,R){const S=w?Wr(w):void 0,M=R?Wr(R):void 0;if(!S||!M||S.length!=M.length)return!1;let F;for(let q=0;q<S.length;q++)if(F=S[q],!Fi(w[F],R[F]))return!1;return!0}function Wr(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}function Fi(w,R){if(Array.isArray(w)&&Array.isArray(R)){if(w.length!==R.length)return!1;const S=[...w].sort(),M=[...R].sort();return S.every((F,q)=>M[q]===F)}return w===R}function sn(w){return w.length>0?w[w.length-1]:null}function qt(w){return function pe(w){return!!w&&(w instanceof H.y||(0,K.m)(w.lift)&&(0,K.m)(w.subscribe))}(w)?w:(0,D.QGY)(w)?(0,de.D)(Promise.resolve(w)):(0,fe.of)(w)}const gi={exact:function Cr(w,R,S){if(!Fn(w.segments,R.segments)||!wn(w.segments,R.segments,S)||w.numberOfChildren!==R.numberOfChildren)return!1;for(const M in R.children)if(!w.children[M]||!Cr(w.children[M],R.children[M],S))return!1;return!0},subset:zt},di={exact:function Xi(w,R){return gr(w,R)},subset:function Wi(w,R){return Object.keys(R).length<=Object.keys(w).length&&Object.keys(R).every(S=>Fi(w[S],R[S]))},ignored:()=>!0};function Fr(w,R,S){return gi[S.paths](w.root,R.root,S.matrixParams)&&di[S.queryParams](w.queryParams,R.queryParams)&&!("exact"===S.fragment&&w.fragment!==R.fragment)}function zt(w,R,S){return qr(w,R,R.segments,S)}function qr(w,R,S,M){if(w.segments.length>S.length){const F=w.segments.slice(0,S.length);return!(!Fn(F,S)||R.hasChildren()||!wn(F,S,M))}if(w.segments.length===S.length){if(!Fn(w.segments,S)||!wn(w.segments,S,M))return!1;for(const F in R.children)if(!w.children[F]||!zt(w.children[F],R.children[F],M))return!1;return!0}{const F=S.slice(0,w.segments.length),q=S.slice(w.segments.length);return!!(Fn(w.segments,F)&&wn(w.segments,F,M)&&w.children[kt])&&qr(w.children[kt],R,q,M)}}function wn(w,R,S){return R.every((M,F)=>di[S](w[F].parameters,M.parameters))}class Pn{constructor(R=new xn([],{}),S={},M=null){this.root=R,this.queryParams=S,this.fragment=M}get queryParamMap(){return this._queryParamMap??=Wn(this.queryParams),this._queryParamMap}toString(){return xe.serialize(this)}}class xn{constructor(R,S){this.segments=R,this.children=S,this.parent=null,Object.values(S).forEach(M=>M.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return te(this)}}class lr{constructor(R,S){this.path=R,this.parameters=S}get parameterMap(){return this._parameterMap??=Wn(this.parameters),this._parameterMap}toString(){return on(this)}}function Fn(w,R){return w.length===R.length&&w.every((S,M)=>S.path===R[M].path)}let Jr=(()=>{class w{static#e=this.\u0275fac=function(M){return new(M||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:()=>new Ie,providedIn:"root"})}return w})();class Ie{parse(R){const S=new Le(R);return new Pn(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(R){const S=`/${De(R.root,!0)}`,M=function Vi(w){const R=Object.entries(w).map(([S,M])=>Array.isArray(M)?M.map(F=>`${Y(S)}=${Y(F)}`).join("&"):`${Y(S)}=${Y(M)}`).filter(S=>S);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${S}${M}${"string"==typeof R.fragment?`#${function se(w){return encodeURI(w)}(R.fragment)}`:""}`}}const xe=new Ie;function te(w){return w.segments.map(R=>on(R)).join("/")}function De(w,R){if(!w.hasChildren())return te(w);if(R){const S=w.children[kt]?De(w.children[kt],!1):"",M=[];return Object.entries(w.children).forEach(([F,q])=>{F!==kt&&M.push(`${F}:${De(q,!1)}`)}),M.length>0?`${S}(${M.join("//")})`:S}{const S=function Hn(w,R){let S=[];return Object.entries(w.children).forEach(([M,F])=>{M===kt&&(S=S.concat(R(F,M)))}),Object.entries(w.children).forEach(([M,F])=>{M!==kt&&(S=S.concat(R(F,M)))}),S}(w,(M,F)=>F===kt?[De(w.children[kt],!1)]:[`${F}:${De(M,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[kt]?`${te(w)}/${S[0]}`:`${te(w)}/(${S.join("//")})`}}function Z(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Y(w){return Z(w).replace(/%3B/gi,";")}function Be(w){return Z(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Se(w){return decodeURIComponent(w)}function mt(w){return Se(w.replace(/\+/g,"%20"))}function on(w){return`${Be(w.path)}${function un(w){return Object.entries(w).map(([R,S])=>`;${Be(R)}=${Be(S)}`).join("")}(w.parameters)}`}const Vr=/^[^\/()?;#]+/;function ai(w){const R=w.match(Vr);return R?R[0]:""}const Yt=/^[^\/()?;=#]+/,Rr=/^[^=?&#]+/,Xs=/^[^&#]+/;class Le{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xn([],{}):new xn([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let M={};return this.peekStartsWith("(")&&(M=this.parseParens(!1)),(R.length>0||Object.keys(S).length>0)&&(M[kt]=new xn(R,S)),M}parseSegment(){const R=ai(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new D.vHH(4009,!1);return this.capture(R),new lr(Se(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const S=function Et(w){const R=w.match(Yt);return R?R[0]:""}(this.remaining);if(!S)return;this.capture(S);let M="";if(this.consumeOptional("=")){const F=ai(this.remaining);F&&(M=F,this.capture(M))}R[Se(S)]=Se(M)}parseQueryParam(R){const S=function qi(w){const R=w.match(Rr);return R?R[0]:""}(this.remaining);if(!S)return;this.capture(S);let M="";if(this.consumeOptional("=")){const oe=function $e(w){const R=w.match(Xs);return R?R[0]:""}(this.remaining);oe&&(M=oe,this.capture(M))}const F=mt(S),q=mt(M);if(R.hasOwnProperty(F)){let oe=R[F];Array.isArray(oe)||(oe=[oe],R[F]=oe),oe.push(q)}else R[F]=q}parseParens(R){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const M=ai(this.remaining),F=this.remaining[M.length];if("/"!==F&&")"!==F&&";"!==F)throw new D.vHH(4010,!1);let q;M.indexOf(":")>-1?(q=M.slice(0,M.indexOf(":")),this.capture(q),this.capture(":")):R&&(q=kt);const oe=this.parseChildren();S[q]=1===Object.keys(oe).length?oe[kt]:new xn([],oe),this.consumeOptional("//")}return S}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new D.vHH(4011,!1)}}function qe(w){return w.segments.length>0?new xn([],{[kt]:w}):w}function Jt(w){const R={};for(const[M,F]of Object.entries(w.children)){const q=Jt(F);if(M===kt&&0===q.segments.length&&q.hasChildren())for(const[oe,ze]of Object.entries(q.children))R[oe]=ze;else(q.segments.length>0||q.hasChildren())&&(R[M]=q)}return function ln(w){if(1===w.numberOfChildren&&w.children[kt]){const R=w.children[kt];return new xn(w.segments.concat(R.segments),R.children)}return w}(new xn(w.segments,R))}function mn(w){return w instanceof Pn}function mr(w){let R;const F=qe(function S(q){const oe={};for(const we of q.children){const It=S(we);oe[we.outlet]=It}const ze=new xn(q.url,oe);return q===w&&(R=ze),ze}(w.root));return R??F}function _r(w,R,S,M){let F=w;for(;F.parent;)F=F.parent;if(0===R.length)return cs(F,F,F,S,M);const q=function kn(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new _s(!0,0,w);let R=0,S=!1;const M=w.reduce((F,q,oe)=>{if("object"==typeof q&&null!=q){if(q.outlets){const ze={};return Object.entries(q.outlets).forEach(([we,It])=>{ze[we]="string"==typeof It?It.split("/"):It}),[...F,{outlets:ze}]}if(q.segmentPath)return[...F,q.segmentPath]}return"string"!=typeof q?[...F,q]:0===oe?(q.split("/").forEach((ze,we)=>{0==we&&"."===ze||(0==we&&""===ze?S=!0:".."===ze?R++:""!=ze&&F.push(ze))}),F):[...F,q]},[]);return new _s(S,R,M)}(R);if(q.toRoot())return cs(F,F,new xn([],{}),S,M);const oe=function Bo(w,R,S){if(w.isAbsolute)return new Uo(R,!0,0);if(!S)return new Uo(R,!1,NaN);if(null===S.parent)return new Uo(S,!0,0);const M=Ti(w.commands[0])?0:1;return function ar(w,R,S){let M=w,F=R,q=S;for(;q>F;){if(q-=F,M=M.parent,!M)throw new D.vHH(4005,!1);F=M.segments.length}return new Uo(M,!1,F-q)}(S,S.segments.length-1+M,w.numberOfDoubleDots)}(q,F,w),ze=oe.processChildren?eo(oe.segmentGroup,oe.index,q.commands):ou(oe.segmentGroup,oe.index,q.commands);return cs(F,oe.segmentGroup,ze,S,M)}function Ti(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function Ji(w){return"object"==typeof w&&null!=w&&w.outlets}function cs(w,R,S,M,F){let oe,q={};M&&Object.entries(M).forEach(([we,It])=>{q[we]=Array.isArray(It)?It.map(vn=>`${vn}`):`${It}`}),oe=w===R?S:Js(w,R,S);const ze=qe(Jt(oe));return new Pn(ze,q,F)}function Js(w,R,S){const M={};return Object.entries(w.children).forEach(([F,q])=>{M[F]=q===R?S:Js(q,R,S)}),new xn(w.segments,M)}class _s{constructor(R,S,M){if(this.isAbsolute=R,this.numberOfDoubleDots=S,this.commands=M,R&&M.length>0&&Ti(M[0]))throw new D.vHH(4003,!1);const F=M.find(Ji);if(F&&F!==sn(M))throw new D.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Uo{constructor(R,S,M){this.segmentGroup=R,this.processChildren=S,this.index=M}}function ou(w,R,S){if(w??=new xn([],{}),0===w.segments.length&&w.hasChildren())return eo(w,R,S);const M=function au(w,R,S){let M=0,F=R;const q={match:!1,pathIndex:0,commandIndex:0};for(;F<w.segments.length;){if(M>=S.length)return q;const oe=w.segments[F],ze=S[M];if(Ji(ze))break;const we=`${ze}`,It=M<S.length-1?S[M+1]:null;if(F>0&&void 0===we)break;if(we&&It&&"object"==typeof It&&void 0===It.outlets){if(!jo(we,It,oe))return q;M+=2}else{if(!jo(we,{},oe))return q;M++}F++}return{match:!0,pathIndex:F,commandIndex:M}}(w,R,S),F=S.slice(M.commandIndex);if(M.match&&M.pathIndex<w.segments.length){const q=new xn(w.segments.slice(0,M.pathIndex),{});return q.children[kt]=new xn(w.segments.slice(M.pathIndex),w.children),eo(q,0,F)}return M.match&&0===F.length?new xn(w.segments,{}):M.match&&!w.hasChildren()?Ic(w,R,S):M.match?eo(w,0,F):Ic(w,R,S)}function eo(w,R,S){if(0===S.length)return new xn(w.segments,{});{const M=function Ra(w){return Ji(w[0])?w[0].outlets:{[kt]:w}}(S),F={};if(Object.keys(M).some(q=>q!==kt)&&w.children[kt]&&1===w.numberOfChildren&&0===w.children[kt].segments.length){const q=eo(w.children[kt],R,S);return new xn(w.segments,q.children)}return Object.entries(M).forEach(([q,oe])=>{"string"==typeof oe&&(oe=[oe]),null!==oe&&(F[q]=ou(w.children[q],R,oe))}),Object.entries(w.children).forEach(([q,oe])=>{void 0===M[q]&&(F[q]=oe)}),new xn(w.segments,F)}}function Ic(w,R,S){const M=w.segments.slice(0,R);let F=0;for(;F<S.length;){const q=S[F];if(Ji(q)){const we=Yc(q.outlets);return new xn(M,we)}if(0===F&&Ti(S[0])){M.push(new lr(w.segments[R].path,oa(S[0]))),F++;continue}const oe=Ji(q)?q.outlets[kt]:`${q}`,ze=F<S.length-1?S[F+1]:null;oe&&ze&&Ti(ze)?(M.push(new lr(oe,oa(ze))),F+=2):(M.push(new lr(oe,{})),F++)}return new xn(M,{})}function Yc(w){const R={};return Object.entries(w).forEach(([S,M])=>{"string"==typeof M&&(M=[M]),null!==M&&(R[S]=Ic(new xn([],{}),0,M))}),R}function oa(w){const R={};return Object.entries(w).forEach(([S,M])=>R[S]=`${M}`),R}function jo(w,R,S){return w==S.path&&gr(R,S.parameters)}const Ur="imperative";var pn=function(w){return w[w.NavigationStart=0]="NavigationStart",w[w.NavigationEnd=1]="NavigationEnd",w[w.NavigationCancel=2]="NavigationCancel",w[w.NavigationError=3]="NavigationError",w[w.RoutesRecognized=4]="RoutesRecognized",w[w.ResolveStart=5]="ResolveStart",w[w.ResolveEnd=6]="ResolveEnd",w[w.GuardsCheckStart=7]="GuardsCheckStart",w[w.GuardsCheckEnd=8]="GuardsCheckEnd",w[w.RouteConfigLoadStart=9]="RouteConfigLoadStart",w[w.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",w[w.ChildActivationStart=11]="ChildActivationStart",w[w.ChildActivationEnd=12]="ChildActivationEnd",w[w.ActivationStart=13]="ActivationStart",w[w.ActivationEnd=14]="ActivationEnd",w[w.Scroll=15]="Scroll",w[w.NavigationSkipped=16]="NavigationSkipped",w}(pn||{});class mi{constructor(R,S){this.id=R,this.url=S}}class to extends mi{constructor(R,S,M="imperative",F=null){super(R,S),this.type=pn.NavigationStart,this.navigationTrigger=M,this.restoredState=F}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class es extends mi{constructor(R,S,M){super(R,S),this.urlAfterRedirects=M,this.type=pn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Pr=function(w){return w[w.Redirect=0]="Redirect",w[w.SupersededByNewNavigation=1]="SupersededByNewNavigation",w[w.NoDataFromResolver=2]="NoDataFromResolver",w[w.GuardRejected=3]="GuardRejected",w}(Pr||{}),Pa=function(w){return w[w.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",w[w.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",w}(Pa||{});class $t extends mi{constructor(R,S,M,F){super(R,S),this.reason=M,this.code=F,this.type=pn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jn extends mi{constructor(R,S,M,F){super(R,S),this.reason=M,this.code=F,this.type=pn.NavigationSkipped}}class $o extends mi{constructor(R,S,M,F){super(R,S),this.error=M,this.target=F,this.type=pn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Br extends mi{constructor(R,S,M,F){super(R,S),this.urlAfterRedirects=M,this.state=F,this.type=pn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ma extends mi{constructor(R,S,M,F){super(R,S),this.urlAfterRedirects=M,this.state=F,this.type=pn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wc extends mi{constructor(R,S,M,F,q){super(R,S),this.urlAfterRedirects=M,this.state=F,this.shouldActivate=q,this.type=pn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ho extends mi{constructor(R,S,M,F){super(R,S),this.urlAfterRedirects=M,this.state=F,this.type=pn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aa extends mi{constructor(R,S,M,F){super(R,S),this.urlAfterRedirects=M,this.state=F,this.type=pn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dn{constructor(R){this.route=R,this.type=pn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _i{constructor(R){this.route=R,this.type=pn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class no{constructor(R){this.snapshot=R,this.type=pn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ki{constructor(R){this.snapshot=R,this.type=pn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ps{constructor(R){this.snapshot=R,this.type=pn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uu{constructor(R){this.snapshot=R,this.type=pn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Do{}class ro{constructor(R){this.url=R}}class ua{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new zo,this.attachRef=null}}let zo=(()=>{class w{constructor(){this.contexts=new Map}onChildOutletCreated(S,M){const F=this.getOrCreateContext(S);F.outlet=M,this.contexts.set(S,F)}onChildOutletDestroyed(S){const M=this.getContext(S);M&&(M.outlet=null,M.attachRef=null)}onOutletDeactivated(){const S=this.contexts;return this.contexts=new Map,S}onOutletReAttached(S){this.contexts=S}getOrCreateContext(S){let M=this.getContext(S);return M||(M=new ua,this.contexts.set(S,M)),M}getContext(S){return this.contexts.get(S)||null}static#e=this.\u0275fac=function(M){return new(M||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();class Na{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const S=this.pathFromRoot(R);return S.length>1?S[S.length-2]:null}children(R){const S=Oa(R,this._root);return S?S.children.map(M=>M.value):[]}firstChild(R){const S=Oa(R,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(R){const S=yi(R,this._root);return S.length<2?[]:S[S.length-2].children.map(F=>F.value).filter(F=>F!==R)}pathFromRoot(R){return yi(R,this._root).map(S=>S.value)}}function Oa(w,R){if(w===R.value)return R;for(const S of R.children){const M=Oa(w,S);if(M)return M}return null}function yi(w,R){if(w===R.value)return[R];for(const S of R.children){const M=yi(w,S);if(M.length)return M.unshift(R),M}return[]}class Mr{constructor(R,S){this.value=R,this.children=S}toString(){return`TreeNode(${this.value})`}}function vi(w){const R={};return w&&w.children.forEach(S=>R[S.value.outlet]=S),R}class xa extends Na{constructor(R,S){super(R),this.snapshot=S,ls(this,R)}toString(){return this.snapshot.toString()}}function Kr(w){const R=function ts(w){const q=new la([],{},{},"",{},kt,w,null,{});return new ys("",new Mr(q,[]))}(w),S=new he.X([new lr("",{})]),M=new he.X({}),F=new he.X({}),q=new he.X({}),oe=new he.X(""),ze=new Kt(S,M,q,oe,F,kt,w,R.root);return ze.snapshot=R.root,new xa(new Mr(ze,[]),R)}class Kt{constructor(R,S,M,F,q,oe,ze,we){this.urlSubject=R,this.paramsSubject=S,this.queryParamsSubject=M,this.fragmentSubject=F,this.dataSubject=q,this.outlet=oe,this.component=ze,this._futureSnapshot=we,this.title=this.dataSubject?.pipe((0,ye.U)(It=>It[Gn]))??(0,fe.of)(void 0),this.url=R,this.params=S,this.queryParams=M,this.fragment=F,this.data=q}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,ye.U)(R=>Wn(R))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,ye.U)(R=>Wn(R))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ca(w,R,S="emptyOnly"){let M;const{routeConfig:F}=w;return M=null===R||"always"!==S&&""!==F?.path&&(R.component||R.routeConfig?.loadComponent)?{params:{...w.params},data:{...w.data},resolve:{...w.data,...w._resolvedData??{}}}:{params:{...R.params,...w.params},data:{...R.data,...w.data},resolve:{...w.data,...R.data,...F?.data,...w._resolvedData}},F&&so(F)&&(M.resolve[Gn]=F.title),M}class la{get title(){return this.data?.[Gn]}constructor(R,S,M,F,q,oe,ze,we,It){this.url=R,this.params=S,this.queryParams=M,this.fragment=F,this.data=q,this.outlet=oe,this.component=ze,this.routeConfig=we,this._resolve=It}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Wn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Wn(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(M=>M.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ys extends Na{constructor(R,S){super(S),this.url=R,ls(this,S)}toString(){return cu(this._root)}}function ls(w,R){R.value._routerState=w,R.children.forEach(S=>ls(w,S))}function cu(w){const R=w.children.length>0?` { ${w.children.map(cu).join(", ")} } `:"";return`${w.value}${R}`}function io(w){if(w.snapshot){const R=w.snapshot,S=w._futureSnapshot;w.snapshot=S,gr(R.queryParams,S.queryParams)||w.queryParamsSubject.next(S.queryParams),R.fragment!==S.fragment&&w.fragmentSubject.next(S.fragment),gr(R.params,S.params)||w.paramsSubject.next(S.params),function er(w,R){if(w.length!==R.length)return!1;for(let S=0;S<w.length;++S)if(!gr(w[S],R[S]))return!1;return!0}(R.url,S.url)||w.urlSubject.next(S.url),gr(R.data,S.data)||w.dataSubject.next(S.data)}else w.snapshot=w._futureSnapshot,w.dataSubject.next(w._futureSnapshot.data)}function hi(w,R){const S=gr(w.params,R.params)&&function ms(w,R){return Fn(w,R)&&w.every((S,M)=>gr(S.parameters,R[M].parameters))}(w.url,R.url);return S&&!(!w.parent!=!R.parent)&&(!w.parent||hi(w.parent,R.parent))}function so(w){return"string"==typeof w.title||null===w.title}let oo=(()=>{class w{constructor(){this.activated=null,this._activatedRoute=null,this.name=kt,this.activateEvents=new D.vpe,this.deactivateEvents=new D.vpe,this.attachEvents=new D.vpe,this.detachEvents=new D.vpe,this.parentContexts=(0,D.f3M)(zo),this.location=(0,D.f3M)(D.s_b),this.changeDetector=(0,D.f3M)(D.sBO),this.environmentInjector=(0,D.f3M)(D.lqb),this.inputBinder=(0,D.f3M)(nr,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(S){if(S.name){const{firstChange:M,previousValue:F}=S.name;if(M)return;this.isTrackedInParentContexts(F)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(F)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(S){return this.parentContexts.getContext(S)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const S=this.parentContexts.getContext(this.name);S?.route&&(S.attachRef?this.attach(S.attachRef,S.route):this.activateWith(S.route,S.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new D.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new D.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new D.vHH(4012,!1);this.location.detach();const S=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(S.instance),S}attach(S,M){this.activated=S,this._activatedRoute=M,this.location.insert(S.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(S.instance)}deactivate(){if(this.activated){const S=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,M){if(this.isActivated)throw new D.vHH(4013,!1);this._activatedRoute=S;const F=this.location,oe=S.snapshot.component,ze=this.parentContexts.getOrCreateContext(this.name).children,we=new So(S,ze,F.injector);this.activated=F.createComponent(oe,{index:F.length,injector:we,environmentInjector:M??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(M){return new(M||w)};static#t=this.\u0275dir=D.lG2({type:w,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[D.TTD]})}return w})();class So{__ngOutletInjector(R){return new So(this.route,this.childContexts,R)}constructor(R,S,M){this.route=R,this.childContexts=S,this.parent=M}get(R,S){return R===Kt?this.route:R===zo?this.childContexts:this.parent.get(R,S)}}const nr=new D.OlP("");function ei(w,R,S){if(S&&w.shouldReuseRoute(R.value,S.value.snapshot)){const M=S.value;M._futureSnapshot=R.value;const F=function ha(w,R,S){return R.children.map(M=>{for(const F of S.children)if(w.shouldReuseRoute(M.value,F.value.snapshot))return ei(w,M,F);return ei(w,M)})}(w,R,S);return new Mr(M,F)}{if(w.shouldAttach(R.value)){const q=w.retrieve(R.value);if(null!==q){const oe=q.route;return oe.value._futureSnapshot=R.value,oe.children=R.children.map(ze=>ei(w,ze)),oe}}const M=function lu(w){return new Kt(new he.X(w.url),new he.X(w.params),new he.X(w.queryParams),new he.X(w.fragment),new he.X(w.data),w.outlet,w.component,w)}(R.value),F=R.children.map(q=>ei(w,q));return new Mr(M,F)}}const Nr="ngNavigationCancelingError";function zs(w,R){const{redirectTo:S,navigationBehaviorOptions:M}=mn(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,F=zu(!1,Pr.Redirect);return F.url=S,F.navigationBehaviorOptions=M,F}function zu(w,R){const S=new Error(`NavigationCancelingError: ${w||""}`);return S[Nr]=!0,S.cancellationCode=R,S}function fa(w){return!!w&&w[Nr]}let Ns=(()=>{class w{static#e=this.\u0275fac=function(M){return new(M||w)};static#t=this.\u0275cmp=D.Xpm({type:w,selectors:[["ng-component"]],standalone:!0,features:[D.jDz],decls:1,vars:0,template:function(M,F){1&M&&D._UZ(0,"router-outlet")},dependencies:[oo],encapsulation:2})}return w})();function ao(w){const R=w.children&&w.children.map(ao),S=R?{...w,children:R}:{...w};return!S.component&&!S.loadComponent&&(R||S.loadChildren)&&S.outlet&&S.outlet!==kt&&(S.component=Ns),S}function Bi(w){return w.outlet||kt}function ss(w){if(!w)return null;if(w.routeConfig?._injector)return w.routeConfig._injector;for(let R=w.parent;R;R=R.parent){const S=R.routeConfig;if(S?._loadedInjector)return S._loadedInjector;if(S?._injector)return S._injector}return null}class ka{constructor(R,S,M,F,q){this.routeReuseStrategy=R,this.futureState=S,this.currState=M,this.forwardEvent=F,this.inputBindingEnabled=q}activate(R){const S=this.futureState._root,M=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,M,R),io(this.futureState.root),this.activateChildRoutes(S,M,R)}deactivateChildRoutes(R,S,M){const F=vi(S);R.children.forEach(q=>{const oe=q.value.outlet;this.deactivateRoutes(q,F[oe],M),delete F[oe]}),Object.values(F).forEach(q=>{this.deactivateRouteAndItsChildren(q,M)})}deactivateRoutes(R,S,M){const F=R.value,q=S?S.value:null;if(F===q)if(F.component){const oe=M.getContext(F.outlet);oe&&this.deactivateChildRoutes(R,S,oe.children)}else this.deactivateChildRoutes(R,S,M);else q&&this.deactivateRouteAndItsChildren(S,M)}deactivateRouteAndItsChildren(R,S){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,S):this.deactivateRouteAndOutlet(R,S)}detachAndStoreRouteSubtree(R,S){const M=S.getContext(R.value.outlet),F=M&&R.value.component?M.children:S,q=vi(R);for(const oe of Object.values(q))this.deactivateRouteAndItsChildren(oe,F);if(M&&M.outlet){const oe=M.outlet.detach(),ze=M.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:oe,route:R,contexts:ze})}}deactivateRouteAndOutlet(R,S){const M=S.getContext(R.value.outlet),F=M&&R.value.component?M.children:S,q=vi(R);for(const oe of Object.values(q))this.deactivateRouteAndItsChildren(oe,F);M&&(M.outlet&&(M.outlet.deactivate(),M.children.onOutletDeactivated()),M.attachRef=null,M.route=null)}activateChildRoutes(R,S,M){const F=vi(S);R.children.forEach(q=>{this.activateRoutes(q,F[q.value.outlet],M),this.forwardEvent(new uu(q.value.snapshot))}),R.children.length&&this.forwardEvent(new Ki(R.value.snapshot))}activateRoutes(R,S,M){const F=R.value,q=S?S.value:null;if(io(F),F===q)if(F.component){const oe=M.getOrCreateContext(F.outlet);this.activateChildRoutes(R,S,oe.children)}else this.activateChildRoutes(R,S,M);else if(F.component){const oe=M.getOrCreateContext(F.outlet);if(this.routeReuseStrategy.shouldAttach(F.snapshot)){const ze=this.routeReuseStrategy.retrieve(F.snapshot);this.routeReuseStrategy.store(F.snapshot,null),oe.children.onOutletReAttached(ze.contexts),oe.attachRef=ze.componentRef,oe.route=ze.route.value,oe.outlet&&oe.outlet.attach(ze.componentRef,ze.route.value),io(ze.route.value),this.activateChildRoutes(R,null,oe.children)}else{const ze=ss(F.snapshot);oe.attachRef=null,oe.route=F,oe.injector=ze,oe.outlet&&oe.outlet.activateWith(F,oe.injector),this.activateChildRoutes(R,null,oe.children)}}else this.activateChildRoutes(R,null,M)}}class ga{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class Wo{constructor(R,S){this.component=R,this.route=S}}function Co(w,R,S){const M=w._root;return Ws(M,R?R._root:null,S,[M.value])}function Gs(w,R){const S=Symbol(),M=R.get(w,S);return M===S?"function"!=typeof w||(0,D.Z0I)(w)?R.get(w):w:M}function Ws(w,R,S,M,F={canDeactivateChecks:[],canActivateChecks:[]}){const q=vi(R);return w.children.forEach(oe=>{(function La(w,R,S,M,F={canDeactivateChecks:[],canActivateChecks:[]}){const q=w.value,oe=R?R.value:null,ze=S?S.getContext(w.value.outlet):null;if(oe&&q.routeConfig===oe.routeConfig){const we=function ma(w,R,S){if("function"==typeof S)return S(w,R);switch(S){case"pathParamsChange":return!Fn(w.url,R.url);case"pathParamsOrQueryParamsChange":return!Fn(w.url,R.url)||!gr(w.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hi(w,R)||!gr(w.queryParams,R.queryParams);default:return!hi(w,R)}}(oe,q,q.routeConfig.runGuardsAndResolvers);we?F.canActivateChecks.push(new ga(M)):(q.data=oe.data,q._resolvedData=oe._resolvedData),Ws(w,R,q.component?ze?ze.children:null:S,M,F),we&&ze&&ze.outlet&&ze.outlet.isActivated&&F.canDeactivateChecks.push(new Wo(ze.outlet.component,oe))}else oe&&ds(R,ze,F),F.canActivateChecks.push(new ga(M)),Ws(w,null,q.component?ze?ze.children:null:S,M,F)})(oe,q[oe.value.outlet],S,M.concat([oe.value]),F),delete q[oe.value.outlet]}),Object.entries(q).forEach(([oe,ze])=>ds(ze,S.getContext(oe),F)),F}function ds(w,R,S){const M=vi(w),F=w.value;Object.entries(M).forEach(([q,oe])=>{ds(oe,F.component?R?R.children.getContext(q):null:R,S)}),S.canDeactivateChecks.push(new Wo(F.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,F))}function ji(w){return"function"==typeof w}function Wu(w){return w instanceof Ne.K||"EmptyError"===w?.name}const Va=Symbol("INITIAL_VALUE");function Ao(){return(0,Ce.w)(w=>Bt(w.map(R=>R.pipe((0,an.q)(1),(0,Pt.O)(Va)))).pipe((0,ye.U)(R=>{for(const S of R)if(!0!==S){if(S===Va)return Va;if(!1===S||S instanceof Pn)return S}return!0}),(0,Xn.h)(R=>R!==Va),(0,an.q)(1)))}function $r(w){return(0,rt.z)((0,ge.b)(R=>{if(mn(R))throw zs(0,R)}),(0,ye.U)(R=>!0===R))}class Zi{constructor(R){this.segmentGroup=R||null}}class Ci extends Error{constructor(R){super(),this.urlTree=R}}function Yo(w){return(0,ne._)(new Zi(w))}class gu{constructor(R,S){this.urlSerializer=R,this.urlTree=S}lineralizeSegments(R,S){let M=[],F=S.root;for(;;){if(M=M.concat(F.segments),0===F.numberOfChildren)return(0,fe.of)(M);if(F.numberOfChildren>1||!F.children[kt])return(0,ne._)(new D.vHH(4e3,!1));F=F.children[kt]}}applyRedirectCommands(R,S,M){const F=this.applyRedirectCreateUrlTree(S,this.urlSerializer.parse(S),R,M);if(S.startsWith("/"))throw new Ci(F);return F}applyRedirectCreateUrlTree(R,S,M,F){const q=this.createSegmentGroup(R,S.root,M,F);return new Pn(q,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(R,S){const M={};return Object.entries(R).forEach(([F,q])=>{if("string"==typeof q&&q.startsWith(":")){const ze=q.substring(1);M[F]=S[ze]}else M[F]=q}),M}createSegmentGroup(R,S,M,F){const q=this.createSegments(R,S.segments,M,F);let oe={};return Object.entries(S.children).forEach(([ze,we])=>{oe[ze]=this.createSegmentGroup(R,we,M,F)}),new xn(q,oe)}createSegments(R,S,M,F){return S.map(q=>q.path.startsWith(":")?this.findPosParam(R,q,F):this.findOrReturn(q,M))}findPosParam(R,S,M){const F=M[S.path.substring(1)];if(!F)throw new D.vHH(4001,!1);return F}findOrReturn(R,S){let M=0;for(const F of S){if(F.path===R.path)return S.splice(M),F;M++}return R}}const Ai={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ba(w,R,S,M,F){const q=Es(w,R,S);return q.matched?(M=function ti(w,R){return w.providers&&!w._injector&&(w._injector=(0,D.MMx)(w.providers,R,`Route: ${w.path}`)),w._injector??R}(R,M),function Zr(w,R,S,M){const F=R.canMatch;if(!F||0===F.length)return(0,fe.of)(!0);const q=F.map(oe=>{const ze=Gs(oe,w);return qt(function fu(w){return w&&ji(w.canMatch)}(ze)?ze.canMatch(R,S):(0,D.r_H)(w,()=>ze(R,S)))});return(0,fe.of)(q).pipe(Ao(),$r())}(M,R,S).pipe((0,ye.U)(oe=>!0===oe?q:{...Ai}))):(0,fe.of)(q)}function Es(w,R,S){if("**"===R.path)return function Zu(w){return{matched:!0,parameters:w.length>0?sn(w).parameters:{},consumedSegments:w,remainingSegments:[],positionalParamSegments:{}}}(S);if(""===R.path)return"full"===R.pathMatch&&(w.hasChildren()||S.length>0)?{...Ai}:{matched:!0,consumedSegments:[],remainingSegments:S,parameters:{},positionalParamSegments:{}};const F=(R.matcher||Gr)(S,w,R);if(!F)return{...Ai};const q={};Object.entries(F.posParams??{}).forEach(([ze,we])=>{q[ze]=we.path});const oe=F.consumed.length>0?{...q,...F.consumed[F.consumed.length-1].parameters}:q;return{matched:!0,consumedSegments:F.consumed,remainingSegments:S.slice(F.consumed.length),parameters:oe,positionalParamSegments:F.posParams??{}}}function Xo(w,R,S,M){return S.length>0&&function Yu(w,R,S){return S.some(M=>$a(w,R,M)&&Bi(M)!==kt)}(w,S,M)?{segmentGroup:new xn(R,Qu(M,new xn(S,w.children))),slicedSegments:[]}:0===S.length&&function mu(w,R,S){return S.some(M=>$a(w,R,M))}(w,S,M)?{segmentGroup:new xn(w.segments,ja(w,S,M,w.children)),slicedSegments:S}:{segmentGroup:new xn(w.segments,w.children),slicedSegments:S}}function ja(w,R,S,M){const F={};for(const q of S)if($a(w,R,q)&&!M[Bi(q)]){const oe=new xn([],{});F[Bi(q)]=oe}return{...M,...F}}function Qu(w,R){const S={};S[kt]=R;for(const M of w)if(""===M.path&&Bi(M)!==kt){const F=new xn([],{});S[Bi(M)]=F}return S}function $a(w,R,S){return(!(w.hasChildren()||R.length>0)||"full"!==S.pathMatch)&&""===S.path}class _u{}class el{constructor(R,S,M,F,q,oe,ze){this.injector=R,this.configLoader=S,this.rootComponentType=M,this.config=F,this.urlTree=q,this.paramsInheritanceStrategy=oe,this.urlSerializer=ze,this.applyRedirects=new gu(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(R){return new D.vHH(4002,`'${R.segmentGroup}'`)}recognize(){const R=Xo(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(R).pipe((0,ye.U)(S=>{const M=new la([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},kt,this.rootComponentType,null,{}),F=new Mr(M,S),q=new ys("",F),oe=function qn(w,R,S=null,M=null){return _r(mr(w),R,S,M)}(M,[],this.urlTree.queryParams,this.urlTree.fragment);return oe.queryParams=this.urlTree.queryParams,q.url=this.urlSerializer.serialize(oe),this.inheritParamsAndData(q._root,null),{state:q,tree:oe}}))}match(R){return this.processSegmentGroup(this.injector,this.config,R,kt).pipe(Ee(M=>{if(M instanceof Ci)return this.urlTree=M.urlTree,this.match(M.urlTree.root);throw M instanceof Zi?this.noMatchError(M):M}))}inheritParamsAndData(R,S){const M=R.value,F=ca(M,S,this.paramsInheritanceStrategy);M.params=Object.freeze(F.params),M.data=Object.freeze(F.data),R.children.forEach(q=>this.inheritParamsAndData(q,M))}processSegmentGroup(R,S,M,F){return 0===M.segments.length&&M.hasChildren()?this.processChildren(R,S,M):this.processSegment(R,S,M,M.segments,F,!0).pipe((0,ye.U)(q=>q instanceof Mr?[q]:[]))}processChildren(R,S,M){const F=[];for(const q of Object.keys(M.children))"primary"===q?F.unshift(q):F.push(q);return(0,de.D)(F).pipe(en(q=>{const oe=M.children[q],ze=function Go(w,R){const S=w.filter(M=>Bi(M)===R);return S.push(...w.filter(M=>Bi(M)!==R)),S}(S,q);return this.processSegmentGroup(R,ze,oe,q)}),(0,Fe.R)((q,oe)=>(q.push(...oe),q)),(0,Te.d)(null),function cn(w,R){const S=arguments.length>=2;return M=>M.pipe(w?(0,Xn.h)((F,q)=>w(F,q,M)):ue.y,_t(1),S?(0,Te.d)(R):(0,rn.T)(()=>new Ne.K))}(),(0,Rn.z)(q=>{if(null===q)return Yo(M);const oe=Sn(q);return function os(w){w.sort((R,S)=>R.value.outlet===kt?-1:S.value.outlet===kt?1:R.value.outlet.localeCompare(S.value.outlet))}(oe),(0,fe.of)(oe)}))}processSegment(R,S,M,F,q,oe){return(0,de.D)(S).pipe(en(ze=>this.processSegmentAgainstRoute(ze._injector??R,S,ze,M,F,q,oe).pipe(Ee(we=>{if(we instanceof Zi)return(0,fe.of)(null);throw we}))),(0,Ht.P)(ze=>!!ze),Ee(ze=>{if(Wu(ze))return function ni(w,R,S){return 0===R.length&&!w.children[S]}(M,F,q)?(0,fe.of)(new _u):Yo(M);throw ze}))}processSegmentAgainstRoute(R,S,M,F,q,oe,ze){return function Jo(w,R,S,M){return!!(Bi(w)===M||M!==kt&&$a(R,S,w))&&Es(R,w,S).matched}(M,F,q,oe)?void 0===M.redirectTo?this.matchSegmentAgainstRoute(R,F,M,q,oe):this.allowRedirects&&ze?this.expandSegmentAgainstRouteUsingRedirect(R,F,S,M,q,oe):Yo(F):Yo(F)}expandSegmentAgainstRouteUsingRedirect(R,S,M,F,q,oe){const{matched:ze,consumedSegments:we,positionalParamSegments:It,remainingSegments:vn}=Es(S,F,q);if(!ze)return Yo(S);F.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Cn=this.applyRedirects.applyRedirectCommands(we,F.redirectTo,It);return this.applyRedirects.lineralizeSegments(F,Cn).pipe((0,Rn.z)(Qn=>this.processSegment(R,M,S,Qn.concat(vn),oe,!1)))}matchSegmentAgainstRoute(R,S,M,F,q){const oe=Ba(S,M,F,R);return"**"===M.path&&(S.children={}),oe.pipe((0,Ce.w)(ze=>ze.matched?this.getChildConfig(R=M._injector??R,M,F).pipe((0,Ce.w)(({routes:we})=>{const It=M._loadedInjector??R,{consumedSegments:vn,remainingSegments:Cn,parameters:Qn}=ze,Ka=new la(vn,Qn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function co(w){return w.data||{}}(M),Bi(M),M.component??M._loadedComponent??null,M,function lo(w){return w.resolve||{}}(M)),{segmentGroup:nc,slicedSegments:rs}=Xo(S,vn,Cn,we);if(0===rs.length&&nc.hasChildren())return this.processChildren(It,we,nc).pipe((0,ye.U)(Pi=>null===Pi?null:new Mr(Ka,Pi)));if(0===we.length&&0===rs.length)return(0,fe.of)(new Mr(Ka,[]));const tl=Bi(M)===q;return this.processSegment(It,we,nc,rs,tl?kt:q,!0).pipe((0,ye.U)(Pi=>new Mr(Ka,Pi instanceof Mr?[Pi]:[])))})):Yo(S)))}getChildConfig(R,S,M){return S.children?(0,fe.of)({routes:S.children,injector:R}):S.loadChildren?void 0!==S._loadedRoutes?(0,fe.of)({routes:S._loadedRoutes,injector:S._loadedInjector}):function En(w,R,S,M){const F=R.canLoad;if(void 0===F||0===F.length)return(0,fe.of)(!0);const q=F.map(oe=>{const ze=Gs(oe,w);return qt(function du(w){return w&&ji(w.canLoad)}(ze)?ze.canLoad(R,S):(0,D.r_H)(w,()=>ze(R,S)))});return(0,fe.of)(q).pipe(Ao(),$r())}(R,S,M).pipe((0,Rn.z)(F=>F?this.configLoader.loadChildren(R,S).pipe((0,ge.b)(q=>{S._loadedRoutes=q.routes,S._loadedInjector=q.injector})):function pu(w){return(0,ne._)(zu(!1,Pr.GuardRejected))}())):(0,fe.of)({routes:[],injector:R})}}function Ha(w){const R=w.value.routeConfig;return R&&""===R.path}function Sn(w){const R=[],S=new Set;for(const M of w){if(!Ha(M)){R.push(M);continue}const F=R.find(q=>M.value.routeConfig===q.value.routeConfig);void 0!==F?(F.children.push(...M.children),S.add(F)):R.push(M)}for(const M of S){const F=Sn(M.children);R.push(new Mr(M.value,F))}return R.filter(M=>!S.has(M))}function jt(w){const R=w.children.map(S=>jt(S)).flat();return[w,...R]}function fi(w){return(0,Ce.w)(R=>{const S=w(R);return S?(0,de.D)(S).pipe((0,ye.U)(()=>R)):(0,fe.of)(R)})}let Or=(()=>{class w{buildTitle(S){let M,F=S.root;for(;void 0!==F;)M=this.getResolvedTitleForRoute(F)??M,F=F.children.find(q=>q.outlet===kt);return M}getResolvedTitleForRoute(S){return S.data[Gn]}static#e=this.\u0275fac=function(M){return new(M||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:()=>(0,D.f3M)(Iu),providedIn:"root"})}return w})(),Iu=(()=>{class w extends Or{constructor(S){super(),this.title=S}updateTitle(S){const M=this.buildTitle(S);void 0!==M&&this.title.setTitle(M)}static#e=this.\u0275fac=function(M){return new(M||w)(D.LFG(Jn.Dx))};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const xs=new D.OlP("",{providedIn:"root",factory:()=>({})}),A=new D.OlP("");let $=(()=>{class w{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,D.f3M)(D.Sil)}loadComponent(S){if(this.componentLoaders.get(S))return this.componentLoaders.get(S);if(S._loadedComponent)return(0,fe.of)(S._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(S);const M=qt(S.loadComponent()).pipe((0,ye.U)(ee),(0,ge.b)(q=>{this.onLoadEndListener&&this.onLoadEndListener(S),S._loadedComponent=q}),tn(()=>{this.componentLoaders.delete(S)})),F=new pt.c(M,()=>new Ze.x).pipe((0,hn.x)());return this.componentLoaders.set(S,F),F}loadChildren(S,M){if(this.childrenLoaders.get(M))return this.childrenLoaders.get(M);if(M._loadedRoutes)return(0,fe.of)({routes:M._loadedRoutes,injector:M._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(M);const q=function O(w,R,S,M){return qt(w.loadChildren()).pipe((0,ye.U)(ee),(0,Rn.z)(F=>F instanceof D.YKP||Array.isArray(F)?(0,fe.of)(F):(0,de.D)(R.compileModuleAsync(F))),(0,ye.U)(F=>{M&&M(w);let q,oe,ze=!1;return Array.isArray(F)?(oe=F,!0):(q=F.create(S).injector,oe=q.get(A,[],{optional:!0,self:!0}).flat()),{routes:oe.map(ao),injector:q}}))}(M,this.compiler,S,this.onLoadEndListener).pipe(tn(()=>{this.childrenLoaders.delete(M)})),oe=new pt.c(q,()=>new Ze.x).pipe((0,hn.x)());return this.childrenLoaders.set(M,oe),oe}static#e=this.\u0275fac=function(M){return new(M||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function ee(w){return function V(w){return w&&"object"==typeof w&&"default"in w}(w)?w.default:w}let He=(()=>{class w{static#e=this.\u0275fac=function(M){return new(M||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:()=>(0,D.f3M)(nt),providedIn:"root"})}return w})(),nt=(()=>{class w{shouldProcessUrl(S){return!0}extract(S){return S}merge(S,M){return S}static#e=this.\u0275fac=function(M){return new(M||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const Vt=new D.OlP("");let Tn=(()=>{class w{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ze.x,this.transitionAbortSubject=new Ze.x,this.configLoader=(0,D.f3M)($),this.environmentInjector=(0,D.f3M)(D.lqb),this.urlSerializer=(0,D.f3M)(Jr),this.rootContexts=(0,D.f3M)(zo),this.location=(0,D.f3M)(ie.Ye),this.inputBindingEnabled=null!==(0,D.f3M)(nr,{optional:!0}),this.titleStrategy=(0,D.f3M)(Or),this.options=(0,D.f3M)(xs,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,D.f3M)(He),this.createViewTransition=(0,D.f3M)(Vt,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,fe.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=F=>this.events.next(new _i(F)),this.configLoader.onLoadStartListener=F=>this.events.next(new Dn(F))}complete(){this.transitions?.complete()}handleNavigationRequest(S){const M=++this.navigationId;this.transitions?.next({...this.transitions.value,...S,id:M})}setupNavigations(S,M,F){return this.transitions=new he.X({id:0,currentUrlTree:M,currentRawUrl:M,extractedUrl:this.urlHandlingStrategy.extract(M),urlAfterRedirects:this.urlHandlingStrategy.extract(M),rawUrl:M,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ur,restoredState:null,currentSnapshot:F.snapshot,targetSnapshot:null,currentRouterState:F,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Xn.h)(q=>0!==q.id),(0,ye.U)(q=>({...q,extractedUrl:this.urlHandlingStrategy.extract(q.rawUrl)})),(0,Ce.w)(q=>{let oe=!1,ze=!1;return(0,fe.of)(q).pipe((0,Ce.w)(we=>{if(this.navigationId>q.id)return this.cancelNavigationTransition(q,"",Pr.SupersededByNewNavigation),Ge.E;this.currentTransition=q,this.currentNavigation={id:we.id,initialUrl:we.rawUrl,extractedUrl:we.extractedUrl,trigger:we.source,extras:we.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const It=!S.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!It&&"reload"!==(we.extras.onSameUrlNavigation??S.onSameUrlNavigation)){const Cn="";return this.events.next(new jn(we.id,this.urlSerializer.serialize(we.rawUrl),Cn,Pa.IgnoredSameUrlNavigation)),we.resolve(null),Ge.E}if(this.urlHandlingStrategy.shouldProcessUrl(we.rawUrl))return(0,fe.of)(we).pipe((0,Ce.w)(Cn=>{const Qn=this.transitions?.getValue();return this.events.next(new to(Cn.id,this.urlSerializer.serialize(Cn.extractedUrl),Cn.source,Cn.restoredState)),Qn!==this.transitions?.getValue()?Ge.E:Promise.resolve(Cn)}),function Xu(w,R,S,M,F,q){return(0,Rn.z)(oe=>function yu(w,R,S,M,F,q,oe="emptyOnly"){return new el(w,R,S,M,F,oe,q).recognize()}(w,R,S,M,oe.extractedUrl,F,q).pipe((0,ye.U)(({state:ze,tree:we})=>({...oe,targetSnapshot:ze,urlAfterRedirects:we}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,S.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,ge.b)(Cn=>{q.targetSnapshot=Cn.targetSnapshot,q.urlAfterRedirects=Cn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Cn.urlAfterRedirects};const Qn=new Br(Cn.id,this.urlSerializer.serialize(Cn.extractedUrl),this.urlSerializer.serialize(Cn.urlAfterRedirects),Cn.targetSnapshot);this.events.next(Qn)}));if(It&&this.urlHandlingStrategy.shouldProcessUrl(we.currentRawUrl)){const{id:Cn,extractedUrl:Qn,source:Ka,restoredState:nc,extras:rs}=we,tl=new to(Cn,this.urlSerializer.serialize(Qn),Ka,nc);this.events.next(tl);const Pi=Kr(this.rootComponentType).snapshot;return this.currentTransition=q={...we,targetSnapshot:Pi,urlAfterRedirects:Qn,extras:{...rs,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Qn,(0,fe.of)(q)}{const Cn="";return this.events.next(new jn(we.id,this.urlSerializer.serialize(we.extractedUrl),Cn,Pa.IgnoredByUrlHandlingStrategy)),we.resolve(null),Ge.E}}),(0,ge.b)(we=>{const It=new Ma(we.id,this.urlSerializer.serialize(we.extractedUrl),this.urlSerializer.serialize(we.urlAfterRedirects),we.targetSnapshot);this.events.next(It)}),(0,ye.U)(we=>(this.currentTransition=q={...we,guards:Co(we.targetSnapshot,we.currentSnapshot,this.rootContexts)},q)),function qu(w,R){return(0,Rn.z)(S=>{const{targetSnapshot:M,currentSnapshot:F,guards:{canActivateChecks:q,canDeactivateChecks:oe}}=S;return 0===oe.length&&0===q.length?(0,fe.of)({...S,guardsResult:!0}):function qs(w,R,S,M){return(0,de.D)(w).pipe((0,Rn.z)(F=>function Qo(w,R,S,M,F){const q=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!q||0===q.length)return(0,fe.of)(!0);const oe=q.map(ze=>{const we=ss(R)??F,It=Gs(ze,we);return qt(function ur(w){return w&&ji(w.canDeactivate)}(It)?It.canDeactivate(w,R,S,M):(0,D.r_H)(we,()=>It(w,R,S,M))).pipe((0,Ht.P)())});return(0,fe.of)(oe).pipe(Ao())}(F.component,F.route,S,R,M)),(0,Ht.P)(F=>!0!==F,!0))}(oe,M,F,w).pipe((0,Rn.z)(ze=>ze&&function jr(w){return"boolean"==typeof w}(ze)?function Ku(w,R,S,M){return(0,de.D)(R).pipe(en(F=>(0,Gt.z)(function Ua(w,R){return null!==w&&R&&R(new no(w)),(0,fe.of)(!0)}(F.route.parent,M),function Jc(w,R){return null!==w&&R&&R(new Ps(w)),(0,fe.of)(!0)}(F.route,M),function Zo(w,R,S){const M=R[R.length-1],q=R.slice(0,R.length-1).reverse().map(oe=>function qo(w){const R=w.routeConfig?w.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:w,guards:R}:null}(oe)).filter(oe=>null!==oe).map(oe=>(0,Wt.P)(()=>{const ze=oe.guards.map(we=>{const It=ss(oe.node)??S,vn=Gs(we,It);return qt(function hu(w){return w&&ji(w.canActivateChild)}(vn)?vn.canActivateChild(M,w):(0,D.r_H)(It,()=>vn(M,w))).pipe((0,Ht.P)())});return(0,fe.of)(ze).pipe(Ao())}));return(0,fe.of)(q).pipe(Ao())}(w,F.path,S),function Ko(w,R,S){const M=R.routeConfig?R.routeConfig.canActivate:null;if(!M||0===M.length)return(0,fe.of)(!0);const F=M.map(q=>(0,Wt.P)(()=>{const oe=ss(R)??S,ze=Gs(q,oe);return qt(function Fa(w){return w&&ji(w.canActivate)}(ze)?ze.canActivate(R,w):(0,D.r_H)(oe,()=>ze(R,w))).pipe((0,Ht.P)())}));return(0,fe.of)(F).pipe(Ao())}(w,F.route,S))),(0,Ht.P)(F=>!0!==F,!0))}(M,q,w,R):(0,fe.of)(ze)),(0,ye.U)(ze=>({...S,guardsResult:ze})))})}(this.environmentInjector,we=>this.events.next(we)),(0,ge.b)(we=>{if(q.guardsResult=we.guardsResult,mn(we.guardsResult))throw zs(0,we.guardsResult);const It=new wc(we.id,this.urlSerializer.serialize(we.extractedUrl),this.urlSerializer.serialize(we.urlAfterRedirects),we.targetSnapshot,!!we.guardsResult);this.events.next(It)}),(0,Xn.h)(we=>!!we.guardsResult||(this.cancelNavigationTransition(we,"",Pr.GuardRejected),!1)),fi(we=>{if(we.guards.canActivateChecks.length)return(0,fe.of)(we).pipe((0,ge.b)(It=>{const vn=new Ho(It.id,this.urlSerializer.serialize(It.extractedUrl),this.urlSerializer.serialize(It.urlAfterRedirects),It.targetSnapshot);this.events.next(vn)}),(0,Ce.w)(It=>{let vn=!1;return(0,fe.of)(It).pipe(function _a(w,R){return(0,Rn.z)(S=>{const{targetSnapshot:M,guards:{canActivateChecks:F}}=S;if(!F.length)return(0,fe.of)(S);const q=new Set(F.map(we=>we.route)),oe=new Set;for(const we of q)if(!oe.has(we))for(const It of jt(we))oe.add(It);let ze=0;return(0,de.D)(oe).pipe(en(we=>q.has(we)?function Sc(w,R,S,M){const F=w.routeConfig,q=w._resolve;return void 0!==F?.title&&!so(F)&&(q[Gn]=F.title),function Eu(w,R,S,M){const F=Wr(w);if(0===F.length)return(0,fe.of)({});const q={};return(0,de.D)(F).pipe((0,Rn.z)(oe=>function Ro(w,R,S,M){const F=ss(R)??M,q=Gs(w,F);return qt(q.resolve?q.resolve(R,S):(0,D.r_H)(F,()=>q(R,S)))}(w[oe],R,S,M).pipe((0,Ht.P)(),(0,ge.b)(ze=>{q[oe]=ze}))),_t(1),(0,Ct.h)(q),Ee(oe=>Wu(oe)?Ge.E:(0,ne._)(oe)))}(q,w,R,M).pipe((0,ye.U)(oe=>(w._resolvedData=oe,w.data=ca(w,w.parent,S).resolve,null)))}(we,M,w,R):(we.data=ca(we,we.parent,w).resolve,(0,fe.of)(void 0))),(0,ge.b)(()=>ze++),_t(1),(0,Rn.z)(we=>ze===oe.size?(0,fe.of)(S):Ge.E))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,ge.b)({next:()=>vn=!0,complete:()=>{vn||this.cancelNavigationTransition(It,"",Pr.NoDataFromResolver)}}))}),(0,ge.b)(It=>{const vn=new aa(It.id,this.urlSerializer.serialize(It.extractedUrl),this.urlSerializer.serialize(It.urlAfterRedirects),It.targetSnapshot);this.events.next(vn)}))}),fi(we=>{const It=vn=>{const Cn=[];vn.routeConfig?.loadComponent&&!vn.routeConfig._loadedComponent&&Cn.push(this.configLoader.loadComponent(vn.routeConfig).pipe((0,ge.b)(Qn=>{vn.component=Qn}),(0,ye.U)(()=>{})));for(const Qn of vn.children)Cn.push(...It(Qn));return Cn};return Bt(It(we.targetSnapshot.root)).pipe((0,Te.d)(null),(0,an.q)(1))}),fi(()=>this.afterPreactivation()),(0,Ce.w)(()=>{const{currentSnapshot:we,targetSnapshot:It}=q,vn=this.createViewTransition?.(this.environmentInjector,we.root,It.root);return vn?(0,de.D)(vn).pipe((0,ye.U)(()=>q)):(0,fe.of)(q)}),(0,ye.U)(we=>{const It=function da(w,R,S){const M=ei(w,R._root,S?S._root:void 0);return new xa(M,R)}(S.routeReuseStrategy,we.targetSnapshot,we.currentRouterState);return this.currentTransition=q={...we,targetRouterState:It},this.currentNavigation.targetRouterState=It,q}),(0,ge.b)(()=>{this.events.next(new Do)}),((w,R,S,M)=>(0,ye.U)(F=>(new ka(R,F.targetRouterState,F.currentRouterState,S,M).activate(w),F)))(this.rootContexts,S.routeReuseStrategy,we=>this.events.next(we),this.inputBindingEnabled),(0,an.q)(1),(0,ge.b)({next:we=>{oe=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new es(we.id,this.urlSerializer.serialize(we.extractedUrl),this.urlSerializer.serialize(we.urlAfterRedirects))),this.titleStrategy?.updateTitle(we.targetRouterState.snapshot),we.resolve(!0)},complete:()=>{oe=!0}}),function zn(w){return(0,Ae.e)((R,S)=>{(0,Me.Xf)(w).subscribe((0,Qe.x)(S,()=>S.complete(),On.Z)),!S.closed&&R.subscribe(S)})}(this.transitionAbortSubject.pipe((0,ge.b)(we=>{throw we}))),tn(()=>{!oe&&!ze&&this.cancelNavigationTransition(q,"",Pr.SupersededByNewNavigation),this.currentTransition?.id===q.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ee(we=>{if(ze=!0,fa(we))this.events.next(new $t(q.id,this.urlSerializer.serialize(q.extractedUrl),we.message,we.cancellationCode)),function vs(w){return fa(w)&&mn(w.url)}(we)?this.events.next(new ro(we.url)):q.resolve(!1);else{this.events.next(new $o(q.id,this.urlSerializer.serialize(q.extractedUrl),we,q.targetSnapshot??void 0));try{q.resolve(S.errorHandler(we))}catch(It){this.options.resolveNavigationPromiseOnError?q.resolve(!1):q.reject(It)}}return Ge.E}))}))}cancelNavigationTransition(S,M,F){const q=new $t(S.id,this.urlSerializer.serialize(S.extractedUrl),M,F);this.events.next(q),S.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(M){return new(M||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function ui(w){return w!==Ur}let dr=(()=>{class w{static#e=this.\u0275fac=function(M){return new(M||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:()=>(0,D.f3M)(Zn),providedIn:"root"})}return w})();class xr{shouldDetach(R){return!1}store(R,S){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,S){return R.routeConfig===S.routeConfig}}let Zn=(()=>{class w extends xr{static#e=this.\u0275fac=(()=>{let S;return function(F){return(S||(S=D.n5z(w)))(F||w)}})();static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})(),Ye=(()=>{class w{static#e=this.\u0275fac=function(M){return new(M||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:()=>(0,D.f3M)(Ut),providedIn:"root"})}return w})(),Ut=(()=>{class w extends Ye{constructor(){super(...arguments),this.location=(0,D.f3M)(ie.Ye),this.urlSerializer=(0,D.f3M)(Jr),this.options=(0,D.f3M)(xs,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,D.f3M)(He),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Pn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Kr(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(S){return this.location.subscribe(M=>{"popstate"===M.type&&S(M.url,M.state)})}handleRouterEvent(S,M){if(S instanceof to)this.stateMemento=this.createStateMemento();else if(S instanceof jn)this.rawUrlTree=M.initialUrl;else if(S instanceof Br){if("eager"===this.urlUpdateStrategy&&!M.extras.skipLocationChange){const F=this.urlHandlingStrategy.merge(M.finalUrl,M.initialUrl);this.setBrowserUrl(F,M)}}else S instanceof Do?(this.currentUrlTree=M.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(M.finalUrl,M.initialUrl),this.routerState=M.targetRouterState,"deferred"===this.urlUpdateStrategy&&(M.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,M))):S instanceof $t&&(S.code===Pr.GuardRejected||S.code===Pr.NoDataFromResolver)?this.restoreHistory(M):S instanceof $o?this.restoreHistory(M,!0):S instanceof es&&(this.lastSuccessfulId=S.id,this.currentPageId=this.browserPageId)}setBrowserUrl(S,M){const F=this.urlSerializer.serialize(S);if(this.location.isCurrentPathEqualTo(F)||M.extras.replaceUrl){const oe={...M.extras.state,...this.generateNgRouterState(M.id,this.browserPageId)};this.location.replaceState(F,"",oe)}else{const q={...M.extras.state,...this.generateNgRouterState(M.id,this.browserPageId+1)};this.location.go(F,"",q)}}restoreHistory(S,M=!1){if("computed"===this.canceledNavigationResolution){const q=this.currentPageId-this.browserPageId;0!==q?this.location.historyGo(q):this.currentUrlTree===S.finalUrl&&0===q&&(this.resetState(S),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(M&&this.resetState(S),this.resetUrlToCurrentUrlTree())}resetState(S){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,S.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(S,M){return"computed"===this.canceledNavigationResolution?{navigationId:S,\u0275routerPageId:M}:{navigationId:S}}static#e=this.\u0275fac=(()=>{let S;return function(F){return(S||(S=D.n5z(w)))(F||w)}})();static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();var Ln=function(w){return w[w.COMPLETE=0]="COMPLETE",w[w.FAILED=1]="FAILED",w[w.REDIRECTING=2]="REDIRECTING",w}(Ln||{});function Yr(w){throw w}const Xe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _n=(()=>{class w{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,D.f3M)(D.c2e),this.stateManager=(0,D.f3M)(Ye),this.options=(0,D.f3M)(xs,{optional:!0})||{},this.pendingTasks=(0,D.f3M)(D.I6F),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,D.f3M)(Tn),this.urlSerializer=(0,D.f3M)(Jr),this.location=(0,D.f3M)(ie.Ye),this.urlHandlingStrategy=(0,D.f3M)(He),this._events=new Ze.x,this.errorHandler=this.options.errorHandler||Yr,this.navigated=!1,this.routeReuseStrategy=(0,D.f3M)(dr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,D.f3M)(A,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,D.f3M)(nr,{optional:!0}),this.eventsSubscription=new ot.w0,this.isNgZoneEnabled=(0,D.f3M)(D.R0b)instanceof D.R0b&&D.R0b.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:S=>{this.console.warn(S)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const S=this.navigationTransitions.events.subscribe(M=>{try{const F=this.navigationTransitions.currentTransition,q=this.navigationTransitions.currentNavigation;if(null!==F&&null!==q)if(this.stateManager.handleRouterEvent(M,q),M instanceof $t&&M.code!==Pr.Redirect&&M.code!==Pr.SupersededByNewNavigation)this.navigated=!0;else if(M instanceof es)this.navigated=!0;else if(M instanceof ro){const oe=this.urlHandlingStrategy.merge(M.url,F.currentRawUrl),ze={info:F.extras.info,skipLocationChange:F.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ui(F.source)};this.scheduleNavigation(oe,Ur,null,ze,{resolve:F.resolve,reject:F.reject,promise:F.promise})}(function wt(w){return!(w instanceof Do||w instanceof ro)})(M)&&this._events.next(M)}catch(F){this.navigationTransitions.transitionAbortSubject.next(F)}});this.eventsSubscription.add(S)}resetRootComponentType(S){this.routerState.root.component=S,this.navigationTransitions.rootComponentType=S}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ur,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((S,M)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(S,"popstate",M)},0)})}navigateToSyncWithBrowser(S,M,F){const q={replaceUrl:!0},oe=F?.navigationId?F:null;if(F){const we={...F};delete we.navigationId,delete we.\u0275routerPageId,0!==Object.keys(we).length&&(q.state=we)}const ze=this.parseUrl(S);this.scheduleNavigation(ze,M,oe,q)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(S){this.config=S.map(ao),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(S,M={}){const{relativeTo:F,queryParams:q,fragment:oe,queryParamsHandling:ze,preserveFragment:we}=M,It=we?this.currentUrlTree.fragment:oe;let Cn,vn=null;switch(ze){case"merge":vn={...this.currentUrlTree.queryParams,...q};break;case"preserve":vn=this.currentUrlTree.queryParams;break;default:vn=q||null}null!==vn&&(vn=this.removeEmptyProps(vn));try{Cn=mr(F?F.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof S[0]||!S[0].startsWith("/"))&&(S=[]),Cn=this.currentUrlTree.root}return _r(Cn,S,vn,It??null)}navigateByUrl(S,M={skipLocationChange:!1}){const F=mn(S)?S:this.parseUrl(S),q=this.urlHandlingStrategy.merge(F,this.rawUrlTree);return this.scheduleNavigation(q,Ur,null,M)}navigate(S,M={skipLocationChange:!1}){return function ri(w){for(let R=0;R<w.length;R++)if(null==w[R])throw new D.vHH(4008,!1)}(S),this.navigateByUrl(this.createUrlTree(S,M),M)}serializeUrl(S){return this.urlSerializer.serialize(S)}parseUrl(S){try{return this.urlSerializer.parse(S)}catch{return this.urlSerializer.parse("/")}}isActive(S,M){let F;if(F=!0===M?{...Xe}:!1===M?{...yr}:M,mn(S))return Fr(this.currentUrlTree,S,F);const q=this.parseUrl(S);return Fr(this.currentUrlTree,q,F)}removeEmptyProps(S){return Object.entries(S).reduce((M,[F,q])=>(null!=q&&(M[F]=q),M),{})}scheduleNavigation(S,M,F,q,oe){if(this.disposed)return Promise.resolve(!1);let ze,we,It;oe?(ze=oe.resolve,we=oe.reject,It=oe.promise):It=new Promise((Cn,Qn)=>{ze=Cn,we=Qn});const vn=this.pendingTasks.add();return function Qr(w,R){w.events.pipe((0,Xn.h)(S=>S instanceof es||S instanceof $t||S instanceof $o||S instanceof jn),(0,ye.U)(S=>S instanceof es||S instanceof jn?Ln.COMPLETE:S instanceof $t&&(S.code===Pr.Redirect||S.code===Pr.SupersededByNewNavigation)?Ln.REDIRECTING:Ln.FAILED),(0,Xn.h)(S=>S!==Ln.REDIRECTING),(0,an.q)(1)).subscribe(()=>{R()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(vn))}),this.navigationTransitions.handleNavigationRequest({source:M,restoredState:F,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:S,extras:q,resolve:ze,reject:we,promise:It,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),It.catch(Cn=>Promise.reject(Cn))}static#e=this.\u0275fac=function(M){return new(M||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})(),st=(()=>{class w{constructor(S,M,F,q,oe,ze){this.router=S,this.route=M,this.tabIndexAttribute=F,this.renderer=q,this.el=oe,this.locationStrategy=ze,this.href=null,this.commands=null,this.onChanges=new Ze.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const we=oe.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===we||"area"===we,this.isAnchorElement?this.subscription=S.events.subscribe(It=>{It instanceof es&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(S){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",S)}ngOnChanges(S){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(S){null!=S?(this.commands=Array.isArray(S)?S:[S],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(S,M,F,q,oe){const ze=this.urlTree;return!!(null===ze||this.isAnchorElement&&(0!==S||M||F||q||oe||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(ze,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const S=this.urlTree;this.href=null!==S&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(S)):null;const M=null===this.href?null:(0,D.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",M)}applyAttributeValue(S,M){const F=this.renderer,q=this.el.nativeElement;null!==M?F.setAttribute(q,S,M):F.removeAttribute(q,S)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(M){return new(M||w)(D.Y36(_n),D.Y36(Kt),D.$8M("tabindex"),D.Y36(D.Qsj),D.Y36(D.SBq),D.Y36(ie.S$))};static#t=this.\u0275dir=D.lG2({type:w,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(M,F){1&M&&D.NdJ("click",function(oe){return F.onClick(oe.button,oe.ctrlKey,oe.shiftKey,oe.altKey,oe.metaKey)}),2&M&&D.uIk("target",F.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[D.lbL.HasDecoratorInputTransform,"preserveFragment","preserveFragment",D.VuI],skipLocationChange:[D.lbL.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",D.VuI],replaceUrl:[D.lbL.HasDecoratorInputTransform,"replaceUrl","replaceUrl",D.VuI],routerLink:"routerLink"},standalone:!0,features:[D.Xq5,D.TTD]})}return w})();const as=new D.OlP("");function ho(w,...R){return(0,D.MR2)([{provide:A,multi:!0,useValue:w},[],{provide:Kt,useFactory:Ei,deps:[_n]},{provide:D.tb,multi:!0,useFactory:hs},R.map(S=>S.\u0275providers)])}function Ei(w){return w.routerState.root}function hs(){const w=(0,D.f3M)(D.zs3);return R=>{const S=w.get(D.z2F);if(R!==S.components[0])return;const M=w.get(_n),F=w.get(fn);1===w.get(ws)&&M.initialNavigation(),w.get(Ri,null,D.XFs.Optional)?.setUpPreloading(),w.get(as,null,D.XFs.Optional)?.init(),M.resetRootComponentType(S.componentTypes[0]),F.closed||(F.next(),F.complete(),F.unsubscribe())}}const fn=new D.OlP("",{factory:()=>new Ze.x}),ws=new D.OlP("",{providedIn:"root",factory:()=>1}),Ri=new D.OlP("")},3106:(Rt,Ve,B)=>{B.d(Ve,{Z:()=>vt});var D=B(9058),H=B(4537),K=B(534),pe=B(7879);class de{constructor(Dt,ct){this._delegate=Dt,this.firebase=ct,(0,K._addComponent)(Dt,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=Dt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Dt){this._delegate.automaticDataCollectionEnabled=Dt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Dt=>{this._delegate.checkDestroyed(),Dt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,K.deleteApp)(this._delegate)))}_getService(Dt,ct=K._DEFAULT_ENTRY_NAME){var Gt;this._delegate.checkDestroyed();const Wt=this._delegate.container.getProvider(Dt);return!Wt.isInitialized()&&"EXPLICIT"===(null===(Gt=Wt.getComponent())||void 0===Gt?void 0:Gt.instantiationMode)&&Wt.initialize(),Wt.getImmediate({identifier:ct})}_removeServiceInstance(Dt,ct=K._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Dt).clearInstance(ct)}_addComponent(Dt){(0,K._addComponent)(this._delegate,Dt)}_addOrOverwriteComponent(Dt){(0,K._addOrOverwriteComponent)(this._delegate,Dt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new D.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ue=function Oe(){const Bt=function Ne(Bt){const Dt={},ct={__esModule:!0,initializeApp:function rt(Ze,ot={}){const ie=K.initializeApp(Ze,ot);if((0,D.r3)(Dt,ie.name))return Dt[ie.name];const ye=new Bt(ie,ct);return Dt[ie.name]=ye,ye},app:Wt,registerVersion:K.registerVersion,setLogLevel:K.setLogLevel,onLog:K.onLog,apps:null,SDK_VERSION:K.SDK_VERSION,INTERNAL:{registerComponent:function Ge(Ze){const ot=Ze.name,ie=ot.replace("-compat","");if(K._registerComponent(Ze)&&"PUBLIC"===Ze.type){const ye=(Ce=Wt())=>{if("function"!=typeof Ce[ie])throw he.create("invalid-app-argument",{appName:ot});return Ce[ie]()};void 0!==Ze.serviceProps&&(0,D.ZB)(ye,Ze.serviceProps),ct[ie]=ye,Bt.prototype[ie]=function(...Ce){return this._getService.bind(this,ot).apply(this,Ze.multipleInstances?Ce:[])}}return"PUBLIC"===Ze.type?ct[ie]:null},removeApp:function Gt(Ze){delete Dt[Ze]},useAsService:function pt(Ze,ot){return"serverAuth"===ot?null:ot},modularAPIs:K}};function Wt(Ze){if(!(0,D.r3)(Dt,Ze=Ze||K._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:Ze});return Dt[Ze]}return ct.default=ct,Object.defineProperty(ct,"apps",{get:function ne(){return Object.keys(Dt).map(Ze=>Dt[Ze])}}),Wt.App=Bt,ct}(de);return Bt.INTERNAL=Object.assign(Object.assign({},Bt.INTERNAL),{createFirebaseNamespace:Oe,extendNamespace:function Dt(ct){(0,D.ZB)(Bt,ct)},createSubscribe:D.ne,ErrorFactory:D.LL,deepExtend:D.ZB}),Bt}(),re=new pe.Yd("@firebase/app-compat");if((0,D.jU)()&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Bt=self.firebase.SDK_VERSION;Bt&&Bt.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const vt=ue;!function Qe(Bt){(0,K.registerVersion)("@firebase/app-compat","0.2.23",Bt)}()},534:(Rt,Ve,B)=>{B.r(Ve),B.d(Ve,{FirebaseError:()=>pe.ZR,SDK_VERSION:()=>Pn,_DEFAULT_ENTRY_NAME:()=>Wr,_addComponent:()=>gi,_addOrOverwriteComponent:()=>di,_apps:()=>sn,_clearComponents:()=>Wi,_components:()=>qt,_getProvider:()=>Xi,_registerComponent:()=>Fr,_removeServiceInstance:()=>Cr,deleteApp:()=>Fn,getApp:()=>lr,getApps:()=>ms,initializeApp:()=>xn,onLog:()=>Ie,registerVersion:()=>Jr,setLogLevel:()=>xe});var D=B(5861),H=B(4537),K=B(7879),pe=B(9058);const de=($e,Le)=>Le.some(qe=>$e instanceof qe);let fe,he;const ue=new WeakMap,re=new WeakMap,Re=new WeakMap,at=new WeakMap,Qe=new WeakMap;let Dt={get($e,Le,qe){if($e instanceof IDBTransaction){if("done"===Le)return re.get($e);if("objectStoreNames"===Le)return $e.objectStoreNames||Re.get($e);if("store"===Le)return qe.objectStoreNames[1]?void 0:qe.objectStore(qe.objectStoreNames[0])}return rt($e[Le])},set:($e,Le,qe)=>($e[Le]=qe,!0),has:($e,Le)=>$e instanceof IDBTransaction&&("done"===Le||"store"===Le)||Le in $e};function Wt($e){return"function"==typeof $e?function Gt($e){return $e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Oe(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($e)?function(...Le){return $e.apply(ne(this),Le),rt(ue.get(this))}:function(...Le){return rt($e.apply(ne(this),Le))}:function(Le,...qe){const Jt=$e.call(ne(this),Le,...qe);return Re.set(Jt,Le.sort?Le.sort():[Le]),rt(Jt)}}($e):($e instanceof IDBTransaction&&function Bt($e){if(re.has($e))return;const Le=new Promise((qe,Jt)=>{const ln=()=>{$e.removeEventListener("complete",mn),$e.removeEventListener("error",qn),$e.removeEventListener("abort",qn)},mn=()=>{qe(),ln()},qn=()=>{Jt($e.error||new DOMException("AbortError","AbortError")),ln()};$e.addEventListener("complete",mn),$e.addEventListener("error",qn),$e.addEventListener("abort",qn)});re.set($e,Le)}($e),de($e,function Ne(){return fe||(fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($e,Dt):$e)}function rt($e){if($e instanceof IDBRequest)return function vt($e){const Le=new Promise((qe,Jt)=>{const ln=()=>{$e.removeEventListener("success",mn),$e.removeEventListener("error",qn)},mn=()=>{qe(rt($e.result)),ln()},qn=()=>{Jt($e.error),ln()};$e.addEventListener("success",mn),$e.addEventListener("error",qn)});return Le.then(qe=>{qe instanceof IDBCursor&&ue.set(qe,$e)}).catch(()=>{}),Qe.set(Le,$e),Le}($e);if(at.has($e))return at.get($e);const Le=Wt($e);return Le!==$e&&(at.set($e,Le),Qe.set(Le,$e)),Le}const ne=$e=>Qe.get($e),Ze=["get","getKey","getAll","getAllKeys","count"],ot=["put","add","delete","clear"],ie=new Map;function ye($e,Le){if(!($e instanceof IDBDatabase)||Le in $e||"string"!=typeof Le)return;if(ie.get(Le))return ie.get(Le);const qe=Le.replace(/FromIndex$/,""),Jt=Le!==qe,ln=ot.includes(qe);if(!(qe in(Jt?IDBIndex:IDBObjectStore).prototype)||!ln&&!Ze.includes(qe))return;const mn=function(){var qn=(0,D.Z)(function*(mr,..._r){const Ti=this.transaction(mr,ln?"readwrite":"readonly");let Ji=Ti.store;return Jt&&(Ji=Ji.index(_r.shift())),(yield Promise.all([Ji[qe](..._r),ln&&Ti.done]))[0]});return function(_r){return qn.apply(this,arguments)}}();return ie.set(Le,mn),mn}!function ct($e){Dt=$e(Dt)}($e=>({...$e,get:(Le,qe,Jt)=>ye(Le,qe)||$e.get(Le,qe,Jt),has:(Le,qe)=>!!ye(Le,qe)||$e.has(Le,qe)}));class Ce{constructor(Le){this.container=Le}getPlatformInfoString(){return this.container.getProviders().map(qe=>{if(function an($e){const Le=$e.getComponent();return"VERSION"===Le?.type}(qe)){const Jt=qe.getImmediate();return`${Jt.library}/${Jt.version}`}return null}).filter(qe=>qe).join(" ")}}const Pt="@firebase/app",Rn=new K.Yd("@firebase/app"),Wr="[DEFAULT]",Fi={[Pt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},sn=new Map,qt=new Map;function gi($e,Le){try{$e.container.addComponent(Le)}catch(qe){Rn.debug(`Component ${Le.name} failed to register with FirebaseApp ${$e.name}`,qe)}}function di($e,Le){$e.container.addOrOverwriteComponent(Le)}function Fr($e){const Le=$e.name;if(qt.has(Le))return Rn.debug(`There were multiple attempts to register component ${Le}.`),!1;qt.set(Le,$e);for(const qe of sn.values())gi(qe,$e);return!0}function Xi($e,Le){const qe=$e.container.getProvider("heartbeat").getImmediate({optional:!0});return qe&&qe.triggerHeartbeat(),$e.container.getProvider(Le)}function Cr($e,Le,qe=Wr){Xi($e,Le).clearInstance(qe)}function Wi(){qt.clear()}const qr=new pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class wn{constructor(Le,qe,Jt){this._isDeleted=!1,this._options=Object.assign({},Le),this._config=Object.assign({},qe),this._name=qe.name,this._automaticDataCollectionEnabled=qe.automaticDataCollectionEnabled,this._container=Jt,this.container.addComponent(new H.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Le){this.checkDestroyed(),this._automaticDataCollectionEnabled=Le}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Le){this._isDeleted=Le}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}}const Pn="10.6.0";function xn($e,Le={}){let qe=$e;"object"!=typeof Le&&(Le={name:Le});const Jt=Object.assign({name:Wr,automaticDataCollectionEnabled:!1},Le),ln=Jt.name;if("string"!=typeof ln||!ln)throw qr.create("bad-app-name",{appName:String(ln)});if(qe||(qe=(0,pe.aH)()),!qe)throw qr.create("no-options");const mn=sn.get(ln);if(mn){if((0,pe.vZ)(qe,mn.options)&&(0,pe.vZ)(Jt,mn.config))return mn;throw qr.create("duplicate-app",{appName:ln})}const qn=new H.H0(ln);for(const _r of qt.values())qn.addComponent(_r);const mr=new wn(qe,Jt,qn);return sn.set(ln,mr),mr}function lr($e=Wr){const Le=sn.get($e);if(!Le&&$e===Wr&&(0,pe.aH)())return xn();if(!Le)throw qr.create("no-app",{appName:$e});return Le}function ms(){return Array.from(sn.values())}function Fn($e){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,D.Z)(function*($e){const Le=$e.name;sn.has(Le)&&(sn.delete(Le),yield Promise.all($e.container.getProviders().map(qe=>qe.delete())),$e.isDeleted=!0)})).apply(this,arguments)}function Jr($e,Le,qe){var Jt;let ln=null!==(Jt=Fi[$e])&&void 0!==Jt?Jt:$e;qe&&(ln+=`-${qe}`);const mn=ln.match(/\s|\//),qn=Le.match(/\s|\//);if(mn||qn){const mr=[`Unable to register library "${ln}" with version "${Le}":`];return mn&&mr.push(`library name "${ln}" contains illegal characters (whitespace or "/")`),mn&&qn&&mr.push("and"),qn&&mr.push(`version name "${Le}" contains illegal characters (whitespace or "/")`),void Rn.warn(mr.join(" "))}Fr(new H.wA(`${ln}-version`,()=>({library:ln,version:Le}),"VERSION"))}function Ie($e,Le){if(null!==$e&&"function"!=typeof $e)throw qr.create("invalid-log-argument");(0,K.Am)($e,Le)}function xe($e){(0,K.Ub)($e)}const te="firebase-heartbeat-database",De=1,Z="firebase-heartbeat-store";let Y=null;function se(){return Y||(Y=function Ge($e,Le,{blocked:qe,upgrade:Jt,blocking:ln,terminated:mn}={}){const qn=indexedDB.open($e,Le),mr=rt(qn);return Jt&&qn.addEventListener("upgradeneeded",_r=>{Jt(rt(qn.result),_r.oldVersion,_r.newVersion,rt(qn.transaction),_r)}),qe&&qn.addEventListener("blocked",_r=>qe(_r.oldVersion,_r.newVersion,_r)),mr.then(_r=>{mn&&_r.addEventListener("close",()=>mn()),ln&&_r.addEventListener("versionchange",Ti=>ln(Ti.oldVersion,Ti.newVersion,Ti))}).catch(()=>{}),mr}(te,De,{upgrade:($e,Le)=>{0===Le&&$e.createObjectStore(Z)}}).catch($e=>{throw qr.create("idb-open",{originalErrorMessage:$e.message})})),Y}function Se(){return(Se=(0,D.Z)(function*($e){try{return yield(yield se()).transaction(Z).objectStore(Z).get(un($e))}catch(Le){if(Le instanceof pe.ZR)Rn.warn(Le.message);else{const qe=qr.create("idb-get",{originalErrorMessage:Le?.message});Rn.warn(qe.message)}}})).apply(this,arguments)}function mt($e,Le){return on.apply(this,arguments)}function on(){return(on=(0,D.Z)(function*($e,Le){try{const Jt=(yield se()).transaction(Z,"readwrite");yield Jt.objectStore(Z).put(Le,un($e)),yield Jt.done}catch(qe){if(qe instanceof pe.ZR)Rn.warn(qe.message);else{const Jt=qr.create("idb-set",{originalErrorMessage:qe?.message});Rn.warn(Jt.message)}}})).apply(this,arguments)}function un($e){return`${$e.name}!${$e.options.appId}`}class ai{constructor(Le){this.container=Le,this._heartbeatsCache=null;const qe=this.container.getProvider("app").getImmediate();this._storage=new Rr(qe),this._heartbeatsCachePromise=this._storage.read().then(Jt=>(this._heartbeatsCache=Jt,Jt))}triggerHeartbeat(){var Le=this;return(0,D.Z)(function*(){var qe;const ln=Le.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),mn=Yt();if(null==(null===(qe=Le._heartbeatsCache)||void 0===qe?void 0:qe.heartbeats)&&(Le._heartbeatsCache=yield Le._heartbeatsCachePromise),Le._heartbeatsCache.lastSentHeartbeatDate!==mn&&!Le._heartbeatsCache.heartbeats.some(qn=>qn.date===mn))return Le._heartbeatsCache.heartbeats.push({date:mn,agent:ln}),Le._heartbeatsCache.heartbeats=Le._heartbeatsCache.heartbeats.filter(qn=>{const mr=new Date(qn.date).valueOf();return Date.now()-mr<=2592e6}),Le._storage.overwrite(Le._heartbeatsCache)})()}getHeartbeatsHeader(){var Le=this;return(0,D.Z)(function*(){var qe;if(null===Le._heartbeatsCache&&(yield Le._heartbeatsCachePromise),null==(null===(qe=Le._heartbeatsCache)||void 0===qe?void 0:qe.heartbeats)||0===Le._heartbeatsCache.heartbeats.length)return"";const Jt=Yt(),{heartbeatsToSend:ln,unsentEntries:mn}=function Et($e,Le=1024){const qe=[];let Jt=$e.slice();for(const ln of $e){const mn=qe.find(qn=>qn.agent===ln.agent);if(mn){if(mn.dates.push(ln.date),qi(qe)>Le){mn.dates.pop();break}}else if(qe.push({agent:ln.agent,dates:[ln.date]}),qi(qe)>Le){qe.pop();break}Jt=Jt.slice(1)}return{heartbeatsToSend:qe,unsentEntries:Jt}}(Le._heartbeatsCache.heartbeats),qn=(0,pe.L)(JSON.stringify({version:2,heartbeats:ln}));return Le._heartbeatsCache.lastSentHeartbeatDate=Jt,mn.length>0?(Le._heartbeatsCache.heartbeats=mn,yield Le._storage.overwrite(Le._heartbeatsCache)):(Le._heartbeatsCache.heartbeats=[],Le._storage.overwrite(Le._heartbeatsCache)),qn})()}}function Yt(){return(new Date).toISOString().substring(0,10)}class Rr{constructor(Le){this.app=Le,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.Z)(function*(){return!!(0,pe.hl)()&&(0,pe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Le=this;return(0,D.Z)(function*(){return(yield Le._canUseIndexedDBPromise)&&(yield function Be($e){return Se.apply(this,arguments)}(Le.app))||{heartbeats:[]}})()}overwrite(Le){var qe=this;return(0,D.Z)(function*(){var Jt;if(yield qe._canUseIndexedDBPromise){const mn=yield qe.read();return mt(qe.app,{lastSentHeartbeatDate:null!==(Jt=Le.lastSentHeartbeatDate)&&void 0!==Jt?Jt:mn.lastSentHeartbeatDate,heartbeats:Le.heartbeats})}})()}add(Le){var qe=this;return(0,D.Z)(function*(){var Jt;if(yield qe._canUseIndexedDBPromise){const mn=yield qe.read();return mt(qe.app,{lastSentHeartbeatDate:null!==(Jt=Le.lastSentHeartbeatDate)&&void 0!==Jt?Jt:mn.lastSentHeartbeatDate,heartbeats:[...mn.heartbeats,...Le.heartbeats]})}})()}}function qi($e){return(0,pe.L)(JSON.stringify({version:2,heartbeats:$e})).length}!function Xs($e){Fr(new H.wA("platform-logger",Le=>new Ce(Le),"PRIVATE")),Fr(new H.wA("heartbeat",Le=>new ai(Le),"PRIVATE")),Jr(Pt,"0.9.23",$e),Jr(Pt,"0.9.23","esm2017"),Jr("fire-js","")}("")},4537:(Rt,Ve,B)=>{B.d(Ve,{H0:()=>Ne,wA:()=>K});var D=B(5861),H=B(9058);class K{constructor(ue,re,Re){this.name=ue,this.instanceFactory=re,this.type=Re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ue){return this.instantiationMode=ue,this}setMultipleInstances(ue){return this.multipleInstances=ue,this}setServiceProps(ue){return this.serviceProps=ue,this}setInstanceCreatedCallback(ue){return this.onInstanceCreated=ue,this}}const pe="[DEFAULT]";class de{constructor(ue,re){this.name=ue,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ue){const re=this.normalizeInstanceIdentifier(ue);if(!this.instancesDeferred.has(re)){const Re=new H.BH;if(this.instancesDeferred.set(re,Re),this.isInitialized(re)||this.shouldAutoInitialize())try{const at=this.getOrInitializeService({instanceIdentifier:re});at&&Re.resolve(at)}catch{}}return this.instancesDeferred.get(re).promise}getImmediate(ue){var re;const Re=this.normalizeInstanceIdentifier(ue?.identifier),at=null!==(re=ue?.optional)&&void 0!==re&&re;if(!this.isInitialized(Re)&&!this.shouldAutoInitialize()){if(at)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Re})}catch(Qe){if(at)return null;throw Qe}}getComponent(){return this.component}setComponent(ue){if(ue.name!==this.name)throw Error(`Mismatching Component ${ue.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ue,this.shouldAutoInitialize()){if(function he(Oe){return"EAGER"===Oe.instantiationMode}(ue))try{this.getOrInitializeService({instanceIdentifier:pe})}catch{}for(const[re,Re]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(re);try{const Qe=this.getOrInitializeService({instanceIdentifier:at});Re.resolve(Qe)}catch{}}}}clearInstance(ue=pe){this.instancesDeferred.delete(ue),this.instancesOptions.delete(ue),this.instances.delete(ue)}delete(){var ue=this;return(0,D.Z)(function*(){const re=Array.from(ue.instances.values());yield Promise.all([...re.filter(Re=>"INTERNAL"in Re).map(Re=>Re.INTERNAL.delete()),...re.filter(Re=>"_delete"in Re).map(Re=>Re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ue=pe){return this.instances.has(ue)}getOptions(ue=pe){return this.instancesOptions.get(ue)||{}}initialize(ue={}){const{options:re={}}=ue,Re=this.normalizeInstanceIdentifier(ue.instanceIdentifier);if(this.isInitialized(Re))throw Error(`${this.name}(${Re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const at=this.getOrInitializeService({instanceIdentifier:Re,options:re});for(const[Qe,vt]of this.instancesDeferred.entries())Re===this.normalizeInstanceIdentifier(Qe)&&vt.resolve(at);return at}onInit(ue,re){var Re;const at=this.normalizeInstanceIdentifier(re),Qe=null!==(Re=this.onInitCallbacks.get(at))&&void 0!==Re?Re:new Set;Qe.add(ue),this.onInitCallbacks.set(at,Qe);const vt=this.instances.get(at);return vt&&ue(vt,at),()=>{Qe.delete(ue)}}invokeOnInitCallbacks(ue,re){const Re=this.onInitCallbacks.get(re);if(Re)for(const at of Re)try{at(ue,re)}catch{}}getOrInitializeService({instanceIdentifier:ue,options:re={}}){let Re=this.instances.get(ue);if(!Re&&this.component&&(Re=this.component.instanceFactory(this.container,{instanceIdentifier:(Oe=ue,Oe===pe?void 0:Oe),options:re}),this.instances.set(ue,Re),this.instancesOptions.set(ue,re),this.invokeOnInitCallbacks(Re,ue),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ue,Re)}catch{}var Oe;return Re||null}normalizeInstanceIdentifier(ue=pe){return this.component?this.component.multipleInstances?ue:pe:ue}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ne{constructor(ue){this.name=ue,this.providers=new Map}addComponent(ue){const re=this.getProvider(ue.name);if(re.isComponentSet())throw new Error(`Component ${ue.name} has already been registered with ${this.name}`);re.setComponent(ue)}addOrOverwriteComponent(ue){this.getProvider(ue.name).isComponentSet()&&this.providers.delete(ue.name),this.addComponent(ue)}getProvider(ue){if(this.providers.has(ue))return this.providers.get(ue);const re=new de(ue,this);return this.providers.set(ue,re),re}getProviders(){return Array.from(this.providers.values())}}},7879:(Rt,Ve,B)=>{B.d(Ve,{Am:()=>Oe,Ub:()=>Ne,Yd:()=>he,in:()=>H});const D=[];var H=function(ue){return ue[ue.DEBUG=0]="DEBUG",ue[ue.VERBOSE=1]="VERBOSE",ue[ue.INFO=2]="INFO",ue[ue.WARN=3]="WARN",ue[ue.ERROR=4]="ERROR",ue[ue.SILENT=5]="SILENT",ue}(H||{});const K={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},pe=H.INFO,de={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},fe=(ue,re,...Re)=>{if(re<ue.logLevel)return;const at=(new Date).toISOString(),Qe=de[re];if(!Qe)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[Qe](`[${at}]  ${ue.name}:`,...Re)};class he{constructor(re){this.name=re,this._logLevel=pe,this._logHandler=fe,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in H))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?K[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...re),this._logHandler(this,H.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...re),this._logHandler(this,H.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,H.INFO,...re),this._logHandler(this,H.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,H.WARN,...re),this._logHandler(this,H.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...re),this._logHandler(this,H.ERROR,...re)}}function Ne(ue){D.forEach(re=>{re.setLogLevel(ue)})}function Oe(ue,re){for(const Re of D){let at=null;re&&re.level&&(at=K[re.level]),Re.userLogHandler=null===ue?null:(Qe,vt,...Bt)=>{const Dt=Bt.map(ct=>{if(null==ct)return null;if("string"==typeof ct)return ct;if("number"==typeof ct||"boolean"==typeof ct)return ct.toString();if(ct instanceof Error)return ct.message;try{return JSON.stringify(ct)}catch{return null}}).filter(ct=>ct).join(" ");vt>=(at??Qe.logLevel)&&ue({level:H[vt].toLowerCase(),message:Dt,args:Bt,type:Qe.name})}}}},7142:(Rt,Ve,B)=>{B.d(Ve,{Z:()=>D.Z});var D=B(3106);D.Z.registerVersion("firebase","10.6.0","app-compat")},3956:(Rt,Ve,B)=>{B.r(Ve);var D=B(5861),H=B(3106),K=B(9058),pe=B(534),de=B(7879),fe=B(7582),he=B(4537);const Oe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const vt=function at(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Bt=function Qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Dt=new K.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Gt=new de.Yd("@firebase/auth");function rt(y,...h){Gt.logLevel<=de.in.ERROR&&Gt.error(`Auth (${pe.SDK_VERSION}): ${y}`,...h)}function ne(y,...h){throw ot(y,...h)}function Ge(y,...h){return ot(y,...h)}function pt(y,h,p){const I=Object.assign(Object.assign({},Bt()),{[h]:p});return new K.LL("auth","Firebase",I).create(h,{appName:y.name})}function Ze(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&ne(y,"argument-error"),pt(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ot(y,...h){if("string"!=typeof y){const p=h[0],I=[...h.slice(1)];return I[0]&&(I[0].appName=y.name),y._errorFactory.create(p,...I)}return Dt.create(y,...h)}function ie(y,h,...p){if(!y)throw ot(h,...p)}function ye(y){const h="INTERNAL ASSERTION FAILED: "+y;throw rt(h),new Error(h)}function Ce(y,h){y||ye(h)}function an(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Pt(){return"http:"===Xn()||"https:"===Xn()}function Xn(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class en{constructor(h,p){this.shortDelay=h,this.longDelay=p,Ce(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,K.uI)()||(0,K.b$)()}get(){return function Rn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Pt()||(0,K.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ge(y,h){Ce(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Me{static initialize(h,p,I){this.fetchImpl=h,p&&(this.headersImpl=p),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ae={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ee=new en(3e4,6e4);function Fe(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Te(y,h,p,I){return _t.apply(this,arguments)}function _t(){return(_t=(0,D.Z)(function*(y,h,p,I,k={}){return rn(y,k,(0,D.Z)(function*(){let G={},ce={};I&&("GET"===h?ce=I:G={body:JSON.stringify(I)});const Pe=(0,K.xO)(Object.assign({key:y.config.apiKey},ce)).slice(1),tt=yield y._getAdditionalHeaders();return tt["Content-Type"]="application/json",y.languageCode&&(tt["X-Firebase-Locale"]=y.languageCode),Me.fetch()(hn(y,y.config.apiHost,p,Pe),Object.assign({method:h,headers:tt,referrerPolicy:"no-referrer"},G))}))})).apply(this,arguments)}function rn(y,h,p){return cn.apply(this,arguments)}function cn(){return(cn=(0,D.Z)(function*(y,h,p){y._canInitEmulator=!1;const I=Object.assign(Object.assign({},Ae),h);try{const k=new zn(y),G=yield Promise.race([p(),k.promise]);k.clearNetworkTimeout();const ce=yield G.json();if("needConfirmation"in ce)throw or(y,"account-exists-with-different-credential",ce);if(G.ok&&!("errorMessage"in ce))return ce;{const Pe=G.ok?ce.errorMessage:ce.error.message,[tt,Lt]=Pe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===tt)throw or(y,"credential-already-in-use",ce);if("EMAIL_EXISTS"===tt)throw or(y,"email-already-in-use",ce);if("USER_DISABLED"===tt)throw or(y,"user-disabled",ce);const Qt=I[tt]||tt.toLowerCase().replace(/[_\s]+/g,"-");if(Lt)throw pt(y,Qt,Lt);ne(y,Qt)}}catch(k){if(k instanceof K.ZR)throw k;ne(y,"network-request-failed",{message:String(k)})}})).apply(this,arguments)}function Ct(y,h,p,I){return tn.apply(this,arguments)}function tn(){return(tn=(0,D.Z)(function*(y,h,p,I,k={}){const G=yield Te(y,h,p,I,k);return"mfaPendingCredential"in G&&ne(y,"multi-factor-auth-required",{_serverResponse:G}),G})).apply(this,arguments)}function hn(y,h,p,I){const k=`${h}${p}?${I}`;return y.config.emulator?ge(y.config,k):`${y.config.apiScheme}://${k}`}function On(y){switch(y){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,I)=>{this.timer=setTimeout(()=>I(Ge(this.auth,"network-request-failed")),Ee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function or(y,h,p){const I={appName:y.name};p.email&&(I.email=p.email),p.phoneNumber&&(I.phoneNumber=p.phoneNumber);const k=Ge(y,h,I);return k.customData._tokenResponse=p,k}function Jn(y){return void 0!==y&&void 0!==y.getResponse}function kt(y){return void 0!==y&&void 0!==y.enterprise}class Gn{constructor(h){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=h.recaptchaEnforcementState}getProviderEnforcementState(h){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const p of this.recaptchaEnforcementState)if(p.provider&&p.provider===h)return On(p.enforcementState);return null}isProviderEnabled(h){return"ENFORCE"===this.getProviderEnforcementState(h)||"AUDIT"===this.getProviderEnforcementState(h)}}function Wn(){return(Wn=(0,D.Z)(function*(y){return(yield Te(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Gr(y,h){return er.apply(this,arguments)}function er(){return(er=(0,D.Z)(function*(y,h){return Te(y,"GET","/v2/recaptchaConfig",Fe(y,h))})).apply(this,arguments)}function Wr(){return(Wr=(0,D.Z)(function*(y,h){return Te(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function sn(){return(sn=(0,D.Z)(function*(y,h){return Te(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function gi(){return(gi=(0,D.Z)(function*(y,h){return Te(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function di(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Cr(){return(Cr=(0,D.Z)(function*(y,h=!1){const p=(0,K.m9)(y),I=yield p.getIdToken(h),k=zt(I);ie(k&&k.exp&&k.auth_time&&k.iat,p.auth,"internal-error");const G="object"==typeof k.firebase?k.firebase:void 0,ce=G?.sign_in_provider;return{claims:k,token:I,authTime:di(Wi(k.auth_time)),issuedAtTime:di(Wi(k.iat)),expirationTime:di(Wi(k.exp)),signInProvider:ce||null,signInSecondFactor:G?.sign_in_second_factor||null}})).apply(this,arguments)}function Wi(y){return 1e3*Number(y)}function zt(y){const[h,p,I]=y.split(".");if(void 0===h||void 0===p||void 0===I)return rt("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,K.tV)(p);return k?JSON.parse(k):(rt("Failed to decode base64 JWT payload"),null)}catch(k){return rt("Caught error parsing JWT payload as JSON",k?.toString()),null}}function wn(y,h){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,D.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(I){throw I instanceof K.ZR&&function xn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(I)&&y.auth.currentUser===y&&(yield y.auth.signOut()),I}})).apply(this,arguments)}class lr{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const k=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const I=this.getInterval(h);this.timerId=setTimeout((0,D.Z)(function*(){yield p.iteration()}),I)}iteration(){var h=this;return(0,D.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&h.schedule(!0))}h.schedule()})()}}class ms{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=di(this.lastLoginAt),this.creationTime=di(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fn(y){return Hn.apply(this,arguments)}function Hn(){return Hn=(0,D.Z)(function*(y){var h;const p=y.auth,I=yield y.getIdToken(),k=yield wn(y,function qt(y,h){return gi.apply(this,arguments)}(p,{idToken:I}));ie(k?.users.length,p,"internal-error");const G=k.users[0];y._notifyReloadListener(G);const ce=null!==(h=G.providerUserInfo)&&void 0!==h&&h.length?function te(y){return y.map(h=>{var{providerId:p}=h,I=(0,fe._T)(h,["providerId"]);return{providerId:p,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(G.providerUserInfo):[],Pe=function xe(y,h){return[...y.filter(I=>!h.some(k=>k.providerId===I.providerId)),...h]}(y.providerData,ce),Qt=!!y.isAnonymous&&!(y.email&&G.passwordHash||Pe?.length),xt={uid:G.localId,displayName:G.displayName||null,photoURL:G.photoUrl||null,email:G.email||null,emailVerified:G.emailVerified||!1,phoneNumber:G.phoneNumber||null,tenantId:G.tenantId||null,providerData:Pe,metadata:new ms(G.createdAt,G.lastLoginAt),isAnonymous:Qt};Object.assign(y,xt)}),Hn.apply(this,arguments)}function Ie(){return(Ie=(0,D.Z)(function*(y){const h=(0,K.m9)(y);yield Fn(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Z(){return(Z=(0,D.Z)(function*(y,h){const p=yield rn(y,{},(0,D.Z)(function*(){const I=(0,K.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:k,apiKey:G}=y.config,ce=hn(y,k,"/v1/token",`key=${G}`),Pe=yield y._getAdditionalHeaders();return Pe["Content-Type"]="application/x-www-form-urlencoded",Me.fetch()(ce,{method:"POST",headers:Pe,body:I})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}function se(){return(se=(0,D.Z)(function*(y,h){return Te(y,"POST","/v2/accounts:revokeToken",Fe(y,h))})).apply(this,arguments)}class Be{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ie(h.idToken,"internal-error"),ie(typeof h.idToken<"u","internal-error"),ie(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function qr(y){const h=zt(y);return ie(h,"internal-error"),ie(typeof h.exp<"u","internal-error"),ie(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var I=this;return(0,D.Z)(function*(){return ie(!I.accessToken||I.refreshToken,h,"user-token-expired"),p||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(h,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var I=this;return(0,D.Z)(function*(){const{accessToken:k,refreshToken:G,expiresIn:ce}=yield function De(y,h){return Z.apply(this,arguments)}(h,p);I.updateTokensAndExpiration(k,G,Number(ce))})()}updateTokensAndExpiration(h,p,I){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(h,p){const{refreshToken:I,accessToken:k,expirationTime:G}=p,ce=new Be;return I&&(ie("string"==typeof I,"internal-error",{appName:h}),ce.refreshToken=I),k&&(ie("string"==typeof k,"internal-error",{appName:h}),ce.accessToken=k),G&&(ie("number"==typeof G,"internal-error",{appName:h}),ce.expirationTime=G),ce}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Be,this.toJSON())}_performRefresh(){return ye("not implemented")}}function Se(y,h){ie("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class mt{constructor(h){var{uid:p,auth:I,stsTokenManager:k}=h,G=(0,fe._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=I,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=G.displayName||null,this.email=G.email||null,this.emailVerified=G.emailVerified||!1,this.phoneNumber=G.phoneNumber||null,this.photoURL=G.photoURL||null,this.isAnonymous=G.isAnonymous||!1,this.tenantId=G.tenantId||null,this.providerData=G.providerData?[...G.providerData]:[],this.metadata=new ms(G.createdAt||void 0,G.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,D.Z)(function*(){const I=yield wn(p,p.stsTokenManager.getToken(p.auth,h));return ie(I,p.auth,"internal-error"),p.accessToken!==I&&(p.accessToken=I,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),I})()}getIdTokenResult(h){return function Xi(y){return Cr.apply(this,arguments)}(this,h)}reload(){return function Jr(y){return Ie.apply(this,arguments)}(this)}_assign(h){this!==h&&(ie(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const p=new mt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(h){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var I=this;return(0,D.Z)(function*(){let k=!1;h.idToken&&h.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(h),k=!0),p&&(yield Fn(I)),yield I.auth._persistUserIfCurrent(I),k&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var h=this;return(0,D.Z)(function*(){const p=yield h.getIdToken();return yield wn(h,function gr(y,h){return Wr.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var I,k,G,ce,Pe,tt,Lt,Qt;const xt=null!==(I=p.displayName)&&void 0!==I?I:void 0,wi=null!==(k=p.email)&&void 0!==k?k:void 0,Lo=null!==(G=p.phoneNumber)&&void 0!==G?G:void 0,tu=null!==(ce=p.photoURL)&&void 0!==ce?ce:void 0,As=null!==(Pe=p.tenantId)&&void 0!==Pe?Pe:void 0,pl=null!==(tt=p._redirectEventId)&&void 0!==tt?tt:void 0,zi=null!==(Lt=p.createdAt)&&void 0!==Lt?Lt:void 0,wd=null!==(Qt=p.lastLoginAt)&&void 0!==Qt?Qt:void 0,{uid:Jd,emailVerified:gl,isAnonymous:nu,providerData:$l,stsTokenManager:Bh}=p;ie(Jd&&Bh,h,"internal-error");const Hl=Be.fromJSON(this.name,Bh);ie("string"==typeof Jd,h,"internal-error"),Se(xt,h.name),Se(wi,h.name),ie("boolean"==typeof gl,h,"internal-error"),ie("boolean"==typeof nu,h,"internal-error"),Se(Lo,h.name),Se(tu,h.name),Se(As,h.name),Se(pl,h.name),Se(zi,h.name),Se(wd,h.name);const eh=new mt({uid:Jd,auth:h,email:wi,emailVerified:gl,displayName:xt,isAnonymous:nu,photoURL:tu,phoneNumber:Lo,tenantId:As,stsTokenManager:Hl,createdAt:zi,lastLoginAt:wd});return $l&&Array.isArray($l)&&(eh.providerData=$l.map(qf=>Object.assign({},qf))),pl&&(eh._redirectEventId=pl),eh}static _fromIdTokenResponse(h,p,I=!1){return(0,D.Z)(function*(){const k=new Be;k.updateFromServerResponse(p);const G=new mt({uid:p.localId,auth:h,stsTokenManager:k,isAnonymous:I});return yield Fn(G),G})()}}const on=new Map;function un(y){Ce(y instanceof Function,"Expected a class definition");let h=on.get(y);return h?(Ce(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,on.set(y,h),h)}const Vr=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.Z)(function*(){return!0})()}_set(p,I){var k=this;return(0,D.Z)(function*(){k.storage[p]=I})()}_get(p){var I=this;return(0,D.Z)(function*(){const k=I.storage[p];return void 0===k?null:k})()}_remove(p){var I=this;return(0,D.Z)(function*(){delete I.storage[p]})()}_addListener(p,I){}_removeListener(p,I){}}return y.type="NONE",y})();function ai(y,h,p){return`firebase:${y}:${h}:${p}`}class Yt{constructor(h,p,I){this.persistence=h,this.auth=p,this.userKey=I;const{config:k,name:G}=this.auth;this.fullUserKey=ai(this.userKey,k.apiKey,G),this.fullPersistenceKey=ai("persistence",k.apiKey,G),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,D.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?mt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,D.Z)(function*(){if(p.persistence===h)return;const I=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,I?p.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,I="authUser"){return(0,D.Z)(function*(){if(!p.length)return new Yt(un(Vr),h,I);const k=(yield Promise.all(p.map(function(){var Lt=(0,D.Z)(function*(Qt){if(yield Qt._isAvailable())return Qt});return function(Qt){return Lt.apply(this,arguments)}}()))).filter(Lt=>Lt);let G=k[0]||un(Vr);const ce=ai(I,h.config.apiKey,h.name);let Pe=null;for(const Lt of p)try{const Qt=yield Lt._get(ce);if(Qt){const xt=mt._fromJSON(h,Qt);Lt!==G&&(Pe=xt),G=Lt;break}}catch{}const tt=k.filter(Lt=>Lt._shouldAllowMigration);return G._shouldAllowMigration&&tt.length?(G=tt[0],Pe&&(yield G._set(ce,Pe.toJSON())),yield Promise.all(p.map(function(){var Lt=(0,D.Z)(function*(Qt){if(Qt!==G)try{yield Qt._remove(ce)}catch{}});return function(Qt){return Lt.apply(this,arguments)}}())),new Yt(G,h,I)):new Yt(G,h,I)})()}}function Et(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if($e(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Rr(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(qe(h))return"Blackberry";if(Jt(h))return"Webos";if(qi(h))return"Safari";if((h.includes("chrome/")||Xs(h))&&!h.includes("edge/"))return"Chrome";if(Le(h))return"Android";{const I=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function Rr(y=(0,K.z$)()){return/firefox\//i.test(y)}function qi(y=(0,K.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Xs(y=(0,K.z$)()){return/crios\//i.test(y)}function $e(y=(0,K.z$)()){return/iemobile/i.test(y)}function Le(y=(0,K.z$)()){return/android/i.test(y)}function qe(y=(0,K.z$)()){return/blackberry/i.test(y)}function Jt(y=(0,K.z$)()){return/webos/i.test(y)}function ln(y=(0,K.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function _r(y=(0,K.z$)()){return ln(y)||Le(y)||Jt(y)||qe(y)||/windows phone/i.test(y)||$e(y)}function Ji(y,h=[]){let p;switch(y){case"Browser":p=Et((0,K.z$)());break;case"Worker":p=`${Et((0,K.z$)())}-${y}`;break;default:p=y}const I=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${pe.SDK_VERSION}/${I}`}class cs{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const I=G=>new Promise((ce,Pe)=>{try{ce(h(G))}catch(tt){Pe(tt)}});I.onAbort=p,this.queue.push(I);const k=this.queue.length-1;return()=>{this.queue[k]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,D.Z)(function*(){if(p.auth.currentUser===h)return;const I=[];try{for(const k of p.queue)yield k(h),k.onAbort&&I.push(k.onAbort)}catch(k){I.reverse();for(const G of I)try{G()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:k?.message})}})()}}function _s(){return(_s=(0,D.Z)(function*(y,h={}){return Te(y,"GET","/v2/passwordPolicy",Fe(y,h))})).apply(this,arguments)}class Uo{constructor(h){var p,I,k,G;const ce=h.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(p=ce.minPasswordLength)&&void 0!==p?p:6,ce.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ce.maxPasswordLength),void 0!==ce.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ce.containsLowercaseCharacter),void 0!==ce.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ce.containsUppercaseCharacter),void 0!==ce.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ce.containsNumericCharacter),void 0!==ce.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ce.containsNonAlphanumericCharacter),this.enforcementState=h.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(k=null===(I=h.allowedNonAlphanumericCharacters)||void 0===I?void 0:I.join(""))&&void 0!==k?k:"",this.forceUpgradeOnSignin=null!==(G=h.forceUpgradeOnSignin)&&void 0!==G&&G,this.schemaVersion=h.schemaVersion}validatePassword(h){var p,I,k,G,ce,Pe;const tt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(h,tt),this.validatePasswordCharacterOptions(h,tt),tt.isValid&&(tt.isValid=null===(p=tt.meetsMinPasswordLength)||void 0===p||p),tt.isValid&&(tt.isValid=null===(I=tt.meetsMaxPasswordLength)||void 0===I||I),tt.isValid&&(tt.isValid=null===(k=tt.containsLowercaseLetter)||void 0===k||k),tt.isValid&&(tt.isValid=null===(G=tt.containsUppercaseLetter)||void 0===G||G),tt.isValid&&(tt.isValid=null===(ce=tt.containsNumericCharacter)||void 0===ce||ce),tt.isValid&&(tt.isValid=null===(Pe=tt.containsNonAlphanumericCharacter)||void 0===Pe||Pe),tt}validatePasswordLengthOptions(h,p){const I=this.customStrengthOptions.minPasswordLength,k=this.customStrengthOptions.maxPasswordLength;I&&(p.meetsMinPasswordLength=h.length>=I),k&&(p.meetsMaxPasswordLength=h.length<=k)}validatePasswordCharacterOptions(h,p){let I;this.updatePasswordCharacterOptionsStatuses(p,!1,!1,!1,!1);for(let k=0;k<h.length;k++)I=h.charAt(k),this.updatePasswordCharacterOptionsStatuses(p,I>="a"&&I<="z",I>="A"&&I<="Z",I>="0"&&I<="9",this.allowedNonAlphanumericCharacters.includes(I))}updatePasswordCharacterOptionsStatuses(h,p,I,k,G){this.customStrengthOptions.containsLowercaseLetter&&(h.containsLowercaseLetter||(h.containsLowercaseLetter=p)),this.customStrengthOptions.containsUppercaseLetter&&(h.containsUppercaseLetter||(h.containsUppercaseLetter=I)),this.customStrengthOptions.containsNumericCharacter&&(h.containsNumericCharacter||(h.containsNumericCharacter=k)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(h.containsNonAlphanumericCharacter||(h.containsNonAlphanumericCharacter=G))}}class Bo{constructor(h,p,I,k){this.app=h,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=I,this.config=k,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ra(this),this.idTokenSubscription=new Ra(this),this.beforeStateQueue=new cs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=k.sdkClientVersion}_initializeWithPersistence(h,p){var I=this;return p&&(this._popupRedirectResolver=un(p)),this._initializationPromise=this.queue((0,D.Z)(function*(){var k,G;if(!I._deleted&&(I.persistenceManager=yield Yt.create(I,h),!I._deleted)){if(null!==(k=I._popupRedirectResolver)&&void 0!==k&&k._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(p),I.lastNotifiedUid=(null===(G=I.currentUser)||void 0===G?void 0:G.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,D.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,D.Z)(function*(){var I;const k=yield p.assertedPersistence.getCurrentUser();let G=k,ce=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Pe=null===(I=p.redirectUser)||void 0===I?void 0:I._redirectEventId,tt=G?._redirectEventId,Lt=yield p.tryRedirectSignIn(h);(!Pe||Pe===tt)&&Lt?.user&&(G=Lt.user,ce=!0)}if(!G)return p.directlySetCurrentUser(null);if(!G._redirectEventId){if(ce)try{yield p.beforeStateQueue.runMiddleware(G)}catch(Pe){G=k,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Pe))}return G?p.reloadAndSetCurrentUserOrClear(G):p.directlySetCurrentUser(null)}return ie(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===G._redirectEventId?p.directlySetCurrentUser(G):p.reloadAndSetCurrentUserOrClear(G)})()}tryRedirectSignIn(h){var p=this;return(0,D.Z)(function*(){let I=null;try{I=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,D.Z)(function*(){try{yield Fn(h)}catch(I){if("auth/network-request-failed"!==I?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ht(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,D.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,D.Z)(function*(){const I=h?(0,K.m9)(h):null;return I&&ie(I.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(I&&I._clone(p))})()}_updateCurrentUser(h,p=!1){var I=this;return(0,D.Z)(function*(){if(!I._deleted)return h&&ie(I.tenantId===h.tenantId,I,"tenant-id-mismatch"),p||(yield I.beforeStateQueue.runMiddleware(h)),I.queue((0,D.Z)(function*(){yield I.directlySetCurrentUser(h),I.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,D.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,D.Z)(function*(){yield p.assertedPersistence.setPersistence(un(h))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(h){var p=this;return(0,D.Z)(function*(){p._getPasswordPolicyInternal()||(yield p._updatePasswordPolicy());const I=p._getPasswordPolicyInternal();return I.schemaVersion!==p.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(p._errorFactory.create("unsupported-password-policy-schema-version",{})):I.validatePassword(h)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var h=this;return(0,D.Z)(function*(){const p=yield function Js(y){return _s.apply(this,arguments)}(h),I=new Uo(p);null===h.tenantId?h._projectPasswordPolicy=I:h._tenantPasswordPolicies[h.tenantId]=I})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new K.LL("auth","Firebase",h())}onAuthStateChanged(h,p,I){return this.registerStateListener(this.authStateSubscription,h,p,I)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,I){return this.registerStateListener(this.idTokenSubscription,h,p,I)}authStateReady(){return new Promise((h,p)=>{if(this.currentUser)h();else{const I=this.onAuthStateChanged(()=>{I(),h()},p)}})}revokeAccessToken(h){var p=this;return(0,D.Z)(function*(){if(p.currentUser){const I=yield p.currentUser.getIdToken(),k={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:h,idToken:I};null!=p.tenantId&&(k.tenantId=p.tenantId),yield function Y(y,h){return se.apply(this,arguments)}(p,k)}})()}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var I=this;return(0,D.Z)(function*(){const k=yield I.getOrInitRedirectPersistenceManager(p);return null===h?k.removeCurrentUser():k.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,D.Z)(function*(){if(!p.redirectPersistenceManager){const I=h&&un(h)||p._popupRedirectResolver;ie(I,p,"argument-error"),p.redirectPersistenceManager=yield Yt.create(p,[un(I._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,D.Z)(function*(){var I,k;return p._isInitialized&&(yield p.queue((0,D.Z)(function*(){}))),(null===(I=p._currentUser)||void 0===I?void 0:I._redirectEventId)===h?p._currentUser:(null===(k=p.redirectUser)||void 0===k?void 0:k._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,D.Z)(function*(){if(h===p.currentUser)return p.queue((0,D.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,I,k){if(this._deleted)return()=>{};const G="function"==typeof p?p:p.next.bind(p);let ce=!1;const Pe=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(Pe,this,"internal-error"),Pe.then(()=>{ce||G(this.currentUser)}),"function"==typeof p){const tt=h.addObserver(p,I,k);return()=>{ce=!0,tt()}}{const tt=h.addObserver(p);return()=>{ce=!0,tt()}}}directlySetCurrentUser(h){var p=this;return(0,D.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Ji(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,D.Z)(function*(){var p;const I={"X-Client-Version":h.clientVersion};h.app.options.appId&&(I["X-Firebase-gmpid"]=h.app.options.appId);const k=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();k&&(I["X-Firebase-Client"]=k);const G=yield h._getAppCheckToken();return G&&(I["X-Firebase-AppCheck"]=G),I})()}_getAppCheckToken(){var h=this;return(0,D.Z)(function*(){var p;const I=yield null===(p=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return I?.error&&function Wt(y,...h){Gt.logLevel<=de.in.WARN&&Gt.warn(`Auth (${pe.SDK_VERSION}): ${y}`,...h)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function ar(y){return(0,K.m9)(y)}class Ra{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,K.ne)(p=>this.observer=p)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function eo(y){return new Promise((h,p)=>{const I=document.createElement("script");I.setAttribute("src",y),I.onload=h,I.onerror=k=>{const G=Ge("internal-error");G.customData=k,p(G)},I.type="text/javascript",I.charset="UTF-8",function ou(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(I)})}function au(y){return`__${y}${Math.floor(1e6*Math.random())}`}class jo{constructor(h){this.type="recaptcha-enterprise",this.auth=ar(h)}verify(h="verify",p=!1){var I=this;return(0,D.Z)(function*(){function G(){return G=(0,D.Z)(function*(Pe){if(!p){if(null==Pe.tenantId&&null!=Pe._agentRecaptchaConfig)return Pe._agentRecaptchaConfig.siteKey;if(null!=Pe.tenantId&&void 0!==Pe._tenantRecaptchaConfigs[Pe.tenantId])return Pe._tenantRecaptchaConfigs[Pe.tenantId].siteKey}return new Promise(function(){var tt=(0,D.Z)(function*(Lt,Qt){Gr(Pe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(xt=>{if(void 0!==xt.recaptchaKey){const wi=new Gn(xt);return null==Pe.tenantId?Pe._agentRecaptchaConfig=wi:Pe._tenantRecaptchaConfigs[Pe.tenantId]=wi,Lt(wi.siteKey)}Qt(new Error("recaptcha Enterprise site key undefined"))}).catch(xt=>{Qt(xt)})});return function(Lt,Qt){return tt.apply(this,arguments)}}())}),G.apply(this,arguments)}function ce(Pe,tt,Lt){const Qt=window.grecaptcha;kt(Qt)?Qt.enterprise.ready(()=>{Qt.enterprise.execute(Pe,{action:h}).then(xt=>{tt(xt)}).catch(()=>{tt("NO_RECAPTCHA")})}):Lt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Pe,tt)=>{(function k(Pe){return G.apply(this,arguments)})(I.auth).then(Lt=>{if(!p&&kt(window.grecaptcha))ce(Lt,Pe,tt);else{if(typeof window>"u")return void tt(new Error("RecaptchaVerifier is only supported in browser"));eo("https://www.google.com/recaptcha/enterprise.js?render="+Lt).then(()=>{ce(Lt,Pe,tt)}).catch(Qt=>{tt(Qt)})}}).catch(Lt=>{tt(Lt)})})})()}}function Ur(y,h,p){return pn.apply(this,arguments)}function pn(){return(pn=(0,D.Z)(function*(y,h,p,I=!1){const k=new jo(y);let G;try{G=yield k.verify(p)}catch{G=yield k.verify(p,!0)}const ce=Object.assign({},h);return Object.assign(ce,I?{captchaResp:G}:{captchaResponse:G}),Object.assign(ce,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ce,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ce})).apply(this,arguments)}function mi(y,h,p,I){return to.apply(this,arguments)}function to(){return to=(0,D.Z)(function*(y,h,p,I){var k;if(null!==(k=y._getRecaptchaConfig())&&void 0!==k&&k.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const G=yield Ur(y,h,p,"getOobCode"===p);return I(y,G)}return I(y,h).catch(function(){var G=(0,D.Z)(function*(ce){if("auth/missing-recaptcha-token"===ce.code){console.log(`${p} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Pe=yield Ur(y,h,p,"getOobCode"===p);return I(y,Pe)}return Promise.reject(ce)});return function(ce){return G.apply(this,arguments)}}())}),to.apply(this,arguments)}function $o(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Ma(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class Ho{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return ye("not implemented")}_getIdTokenResponse(h){return ye("not implemented")}_linkToIdToken(h,p){return ye("not implemented")}_getReauthenticationResolver(h){return ye("not implemented")}}function aa(y,h){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,D.Z)(function*(y,h){return Te(y,"POST","/v1/accounts:resetPassword",Fe(y,h))})).apply(this,arguments)}function no(){return(no=(0,D.Z)(function*(y,h){return Te(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ki(y,h){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,D.Z)(function*(y,h){return Te(y,"POST","/v1/accounts:signUp",h)})).apply(this,arguments)}function Tc(){return(Tc=(0,D.Z)(function*(y,h){return Te(y,"POST","/v1/accounts:update",Fe(y,h))})).apply(this,arguments)}function Do(y,h){return ro.apply(this,arguments)}function ro(){return(ro=(0,D.Z)(function*(y,h){return Ct(y,"POST","/v1/accounts:signInWithPassword",Fe(y,h))})).apply(this,arguments)}function Ms(y,h){return ua.apply(this,arguments)}function ua(){return(ua=(0,D.Z)(function*(y,h){return Te(y,"POST","/v1/accounts:sendOobCode",Fe(y,h))})).apply(this,arguments)}function Na(){return(Na=(0,D.Z)(function*(y,h){return Ms(y,h)})).apply(this,arguments)}function Oa(y,h){return yi.apply(this,arguments)}function yi(){return(yi=(0,D.Z)(function*(y,h){return Ms(y,h)})).apply(this,arguments)}function Mr(y,h){return vi.apply(this,arguments)}function vi(){return(vi=(0,D.Z)(function*(y,h){return Ms(y,h)})).apply(this,arguments)}function Kr(){return(Kr=(0,D.Z)(function*(y,h){return Ms(y,h)})).apply(this,arguments)}function Kt(){return(Kt=(0,D.Z)(function*(y,h){return Ct(y,"POST","/v1/accounts:signInWithEmailLink",Fe(y,h))})).apply(this,arguments)}function la(){return(la=(0,D.Z)(function*(y,h){return Ct(y,"POST","/v1/accounts:signInWithEmailLink",Fe(y,h))})).apply(this,arguments)}class ys extends Ho{constructor(h,p,I,k=null){super("password",I),this._email=h,this._password=p,this._tenantId=k}static _fromEmailAndPassword(h,p){return new ys(h,p,"password")}static _fromEmailAndCode(h,p,I=null){return new ys(h,p,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,D.Z)(function*(){switch(p.signInMethod){case"password":return mi(h,{returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Do);case"emailLink":return function ts(y,h){return Kt.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:ne(h,"internal-error")}})()}_linkToIdToken(h,p){var I=this;return(0,D.Z)(function*(){switch(I.signInMethod){case"password":return mi(h,{idToken:p,returnSecureToken:!0,email:I._email,password:I._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ki);case"emailLink":return function ca(y,h){return la.apply(this,arguments)}(h,{idToken:p,email:I._email,oobCode:I._password});default:ne(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function ls(y,h){return cu.apply(this,arguments)}function cu(){return(cu=(0,D.Z)(function*(y,h){return Ct(y,"POST","/v1/accounts:signInWithIdp",Fe(y,h))})).apply(this,arguments)}class hi extends Ho{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new hi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):ne("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:I,signInMethod:k}=p,G=(0,fe._T)(p,["providerId","signInMethod"]);if(!I||!k)return null;const ce=new hi(I,k);return ce.idToken=G.idToken||void 0,ce.accessToken=G.accessToken||void 0,ce.secret=G.secret,ce.nonce=G.nonce,ce.pendingToken=G.pendingToken||null,ce}_getIdTokenResponse(h){return ls(h,this.buildRequest())}_linkToIdToken(h,p){const I=this.buildRequest();return I.idToken=p,ls(h,I)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,ls(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,K.xO)(p)}return h}}function oo(){return(oo=(0,D.Z)(function*(y,h){return Te(y,"POST","/v1/accounts:sendVerificationCode",Fe(y,h))})).apply(this,arguments)}function nr(){return(nr=(0,D.Z)(function*(y,h){return Ct(y,"POST","/v1/accounts:signInWithPhoneNumber",Fe(y,h))})).apply(this,arguments)}function da(){return(da=(0,D.Z)(function*(y,h){const p=yield Ct(y,"POST","/v1/accounts:signInWithPhoneNumber",Fe(y,h));if(p.temporaryProof)throw or(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const ei={USER_NOT_FOUND:"user-not-found"};function lu(){return(lu=(0,D.Z)(function*(y,h){return Ct(y,"POST","/v1/accounts:signInWithPhoneNumber",Fe(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),ei)})).apply(this,arguments)}class Nr extends Ho{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Nr({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Nr({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function So(y,h){return nr.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Hs(y,h){return da.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ha(y,h){return lu.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:I,verificationCode:k}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:I,code:k}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:I,phoneNumber:k,temporaryProof:G}=h;return I||p||k||G?new Nr({verificationId:p,verificationCode:I,phoneNumber:k,temporaryProof:G}):null}}class vs{constructor(h){var p,I,k,G,ce,Pe;const tt=(0,K.zd)((0,K.pd)(h)),Lt=null!==(p=tt.apiKey)&&void 0!==p?p:null,Qt=null!==(I=tt.oobCode)&&void 0!==I?I:null,xt=function zs(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=tt.mode)&&void 0!==k?k:null);ie(Lt&&Qt&&xt,"argument-error"),this.apiKey=Lt,this.operation=xt,this.code=Qt,this.continueUrl=null!==(G=tt.continueUrl)&&void 0!==G?G:null,this.languageCode=null!==(ce=tt.languageCode)&&void 0!==ce?ce:null,this.tenantId=null!==(Pe=tt.tenantId)&&void 0!==Pe?Pe:null}static parseLink(h){const p=function zu(y){const h=(0,K.zd)((0,K.pd)(y)).link,p=h?(0,K.zd)((0,K.pd)(h)).deep_link_id:null,I=(0,K.zd)((0,K.pd)(y)).deep_link_id;return(I?(0,K.zd)((0,K.pd)(I)).link:null)||I||p||h||y}(h);try{return new vs(p)}catch{return null}}}let Ns=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,I){return ys._fromEmailAndPassword(p,I)}static credentialWithLink(p,I){const k=vs.parseLink(I);return ie(k,"argument-error"),ys._fromEmailAndCode(p,k.code,k.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ti{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Di extends ti{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class ns extends Di{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return ie("providerId"in p&&"signInMethod"in p,"argument-error"),hi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ie(h.idToken||h.accessToken,"argument-error"),hi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return ns.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return ns.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:I,oauthTokenSecret:k,pendingToken:G,nonce:ce,providerId:Pe}=h;if(!I&&!k&&!p&&!G||!Pe)return null;try{return new ns(Pe)._credential({idToken:p,accessToken:I,nonce:ce,pendingToken:G})}catch{return null}}}let pa=(()=>{class y extends Di{constructor(){super("facebook.com")}static credential(p){return hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Xc=(()=>{class y extends Di{constructor(){super("google.com"),this.addScope("profile")}static credential(p,I){return hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:I})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:I,oauthAccessToken:k}=p;if(!I&&!k)return null;try{return y.credential(I,k)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Os=(()=>{class y extends Di{constructor(){super("github.com")}static credential(p){return hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Ui extends Ho{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return ls(h,this.buildRequest())}_linkToIdToken(h,p){const I=this.buildRequest();return I.idToken=p,ls(h,I)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,ls(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:I,signInMethod:k,pendingToken:G}=p;return I&&k&&G&&I===k?new Ui(I,G):null}static _create(h,p){return new Ui(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ao extends ti{constructor(h){ie(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ao.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ao.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Ui.fromJSON(h);return ie(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:I}=h;if(!p||!I)return null;try{return Ui._create(I,p)}catch{return null}}}let Bi=(()=>{class y extends Di{constructor(){super("twitter.com")}static credential(p,I){return hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:I})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:I,oauthTokenSecret:k}=p;if(!I||!k)return null;try{return y.credential(I,k)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Go(y,h){return ss.apply(this,arguments)}function ss(){return(ss=(0,D.Z)(function*(y,h){return Ct(y,"POST","/v1/accounts:signUp",Fe(y,h))})).apply(this,arguments)}class Si{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,I,k=!1){return(0,D.Z)(function*(){const G=yield mt._fromIdTokenResponse(h,I,k),ce=Gu(I);return new Si({user:G,providerId:ce,_tokenResponse:I,operationType:p})})()}static _forOperation(h,p,I){return(0,D.Z)(function*(){yield h._updateTokensIfNecessary(I,!0);const k=Gu(I);return new Si({user:h,providerId:k,_tokenResponse:I,operationType:p})})()}}function Gu(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ga(){return(ga=(0,D.Z)(function*(y){var h;const p=ar(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new Si({user:p.currentUser,providerId:null,operationType:"signIn"});const I=yield Go(p,{returnSecureToken:!0}),k=yield Si._fromIdTokenResponse(p,"signIn",I,!0);return yield p._updateCurrentUser(k.user),k})).apply(this,arguments)}class Wo extends K.ZR{constructor(h,p,I,k){var G;super(p.code,p.message),this.operationType=I,this.user=k,Object.setPrototypeOf(this,Wo.prototype),this.customData={appName:h.name,tenantId:null!==(G=h.tenantId)&&void 0!==G?G:void 0,_serverResponse:p.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(h,p,I,k){return new Wo(h,p,I,k)}}function Co(y,h,p,I){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(G=>{throw"auth/multi-factor-auth-required"===G.code?Wo._fromErrorAndOperation(y,G,h,I):G})}function qo(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Ws(){return Ws=(0,D.Z)(function*(y,h){const p=(0,K.m9)(y);yield ds(!0,p,h);const{providerUserInfo:I}=yield function Fi(y,h){return sn.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),k=qo(I||[]);return p.providerData=p.providerData.filter(G=>k.has(G.providerId)),k.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),Ws.apply(this,arguments)}function La(y,h){return ma.apply(this,arguments)}function ma(){return(ma=(0,D.Z)(function*(y,h,p=!1){const I=yield wn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return Si._forOperation(y,"link",I)})).apply(this,arguments)}function ds(y,h,p){return ji.apply(this,arguments)}function ji(){return(ji=(0,D.Z)(function*(y,h,p){yield Fn(h);const k=!1===y?"provider-already-linked":"no-such-provider";ie(qo(h.providerData).has(p)===y,h.auth,k)})).apply(this,arguments)}function jr(y,h){return du.apply(this,arguments)}function du(){return(du=(0,D.Z)(function*(y,h,p=!1){const{auth:I}=y,k="reauthenticate";try{const G=yield wn(y,Co(I,k,h,y),p);ie(G.idToken,I,"internal-error");const ce=zt(G.idToken);ie(ce,I,"internal-error");const{sub:Pe}=ce;return ie(y.uid===Pe,I,"user-mismatch"),Si._forOperation(y,k,G)}catch(G){throw"auth/user-not-found"===G?.code&&ne(I,"user-mismatch"),G}})).apply(this,arguments)}function Fa(y,h){return hu.apply(this,arguments)}function hu(){return(hu=(0,D.Z)(function*(y,h,p=!1){const I="signIn",k=yield Co(y,I,h),G=yield Si._fromIdTokenResponse(y,I,k);return p||(yield y._updateCurrentUser(G.user)),G})).apply(this,arguments)}function ur(y,h){return fu.apply(this,arguments)}function fu(){return(fu=(0,D.Z)(function*(y,h){return Fa(ar(y),h)})).apply(this,arguments)}function Wu(y,h){return Va.apply(this,arguments)}function Va(){return(Va=(0,D.Z)(function*(y,h){const p=(0,K.m9)(y);return yield ds(!1,p,h.providerId),La(p,h)})).apply(this,arguments)}function Ao(y,h){return qu.apply(this,arguments)}function qu(){return(qu=(0,D.Z)(function*(y,h){return jr((0,K.m9)(y),h)})).apply(this,arguments)}function Ku(){return(Ku=(0,D.Z)(function*(y,h){return Ct(y,"POST","/v1/accounts:signInWithCustomToken",Fe(y,h))})).apply(this,arguments)}function Ua(){return Ua=(0,D.Z)(function*(y,h){const p=ar(y),I=yield function qs(y,h){return Ku.apply(this,arguments)}(p,{token:h,returnSecureToken:!0}),k=yield Si._fromIdTokenResponse(p,"signIn",I);return yield p._updateCurrentUser(k.user),k}),Ua.apply(this,arguments)}class Ko{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Zo._fromServerResponse(h,p):"totpInfo"in p?Qo._fromServerResponse(h,p):ne(h,"internal-error")}}class Zo extends Ko{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Zo(p)}}class Qo extends Ko{constructor(h){super("totp",h)}static _fromServerResponse(h,p){return new Qo(p)}}function En(y,h,p){var I;ie((null===(I=p.url)||void 0===I?void 0:I.length)>0,y,"invalid-continue-uri"),ie(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ie(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(ie(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function $r(y){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,D.Z)(function*(y){const h=ar(y);h._getPasswordPolicyInternal()&&(yield h._updatePasswordPolicy())})).apply(this,arguments)}function Ci(){return(Ci=(0,D.Z)(function*(y,h,p){const I=ar(y),k={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};p&&En(I,k,p),yield mi(I,k,"getOobCode",Oa)})).apply(this,arguments)}function bo(){return bo=(0,D.Z)(function*(y,h,p){yield aa((0,K.m9)(y),{oobCode:h,newPassword:p}).catch(function(){var I=(0,D.Z)(function*(k){throw"auth/password-does-not-meet-requirements"===k.code&&$r(y),k});return function(k){return I.apply(this,arguments)}}())}),bo.apply(this,arguments)}function pu(){return pu=(0,D.Z)(function*(y,h){yield function uu(y,h){return Tc.apply(this,arguments)}((0,K.m9)(y),{oobCode:h})}),pu.apply(this,arguments)}function gu(y,h){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,D.Z)(function*(y,h){const p=(0,K.m9)(y),I=yield aa(p,{oobCode:h}),k=I.requestType;switch(ie(k,p,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(I.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(I.mfaInfo,p,"internal-error");default:ie(I.email,p,"internal-error")}let G=null;return I.mfaInfo&&(G=Ko._fromServerResponse(ar(p),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:G},operation:k}})).apply(this,arguments)}function Es(){return(Es=(0,D.Z)(function*(y,h){const{data:p}=yield gu((0,K.m9)(y),h);return p.email})).apply(this,arguments)}function Xo(){return(Xo=(0,D.Z)(function*(y,h,p){const I=ar(y),ce=yield mi(I,{returnSecureToken:!0,email:h,password:p,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Go).catch(tt=>{throw"auth/password-does-not-meet-requirements"===tt.code&&$r(y),tt}),Pe=yield Si._fromIdTokenResponse(I,"signIn",ce);return yield I._updateCurrentUser(Pe.user),Pe})).apply(this,arguments)}function Yu(){return(Yu=(0,D.Z)(function*(y,h,p){const I=ar(y),k={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};(function G(ce,Pe){ie(Pe.handleCodeInApp,I,"argument-error"),Pe&&En(I,ce,Pe)})(k,p),yield mi(I,k,"getOobCode",Mr)})).apply(this,arguments)}function Jo(){return(Jo=(0,D.Z)(function*(y,h,p){const I=(0,K.m9)(y),k=Ns.credentialWithLink(h,p||an());return ie(k._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),ur(I,k)})).apply(this,arguments)}function _u(){return(_u=(0,D.Z)(function*(y,h){return Te(y,"POST","/v1/accounts:createAuthUri",Fe(y,h))})).apply(this,arguments)}function Ks(){return Ks=(0,D.Z)(function*(y,h){const I={identifier:h,continueUri:Pt()?an():"http://localhost"},{signinMethods:k}=yield function ni(y,h){return _u.apply(this,arguments)}((0,K.m9)(y),I);return k||[]}),Ks.apply(this,arguments)}function os(){return os=(0,D.Z)(function*(y,h){const p=(0,K.m9)(y),k={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&En(p.auth,k,h);const{email:G}=yield function zo(y,h){return Na.apply(this,arguments)}(p.auth,k);G!==y.email&&(yield y.reload())}),os.apply(this,arguments)}function Sn(){return Sn=(0,D.Z)(function*(y,h,p){const I=(0,K.m9)(y),G={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&En(I.auth,G,p);const{email:ce}=yield function xa(y,h){return Kr.apply(this,arguments)}(I.auth,G);ce!==y.email&&(yield y.reload())}),Sn.apply(this,arguments)}function co(){return(co=(0,D.Z)(function*(y,h){return Te(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Xu(){return Xu=(0,D.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const I=(0,K.m9)(y),G={idToken:yield I.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},ce=yield wn(I,function vu(y,h){return co.apply(this,arguments)}(I.auth,G));I.displayName=ce.displayName||null,I.photoURL=ce.photoUrl||null;const Pe=I.providerData.find(({providerId:tt})=>"password"===tt);Pe&&(Pe.displayName=I.displayName,Pe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(ce)}),Xu.apply(this,arguments)}function Sc(y,h,p){return Eu.apply(this,arguments)}function Eu(){return Eu=(0,D.Z)(function*(y,h,p){const{auth:I}=y,G={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(G.email=h),p&&(G.password=p);const ce=yield wn(y,function _i(y,h){return no.apply(this,arguments)}(I,G));yield y._updateTokensIfNecessary(ce,!0)}),Eu.apply(this,arguments)}class fi{constructor(h,p,I={}){this.isNewUser=h,this.providerId=p,this.profile=I}}class Or extends fi{constructor(h,p,I,k){super(h,p,I),this.username=k}}class Iu extends fi{constructor(h,p){super(h,"facebook.com",p)}}class xs extends Or{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class A extends fi{constructor(h,p){super(h,"google.com",p)}}class $ extends Or{constructor(h,p,I){super(h,"twitter.com",p,I)}}function O(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Ro(y){var h,p;if(!y)return null;const{providerId:I}=y,k=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},G=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!I&&y?.idToken){const ce=null===(p=null===(h=zt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(ce)return new fi(G,"anonymous"!==ce&&"custom"!==ce?ce:null)}if(!I)return null;switch(I){case"facebook.com":return new Iu(G,k);case"github.com":return new xs(G,k);case"google.com":return new A(G,k);case"twitter.com":return new $(G,k,y.screenName||null);case"custom":case"anonymous":return new fi(G,null);default:return new fi(G,I,k)}}(p)}class Ye{constructor(h,p,I){this.type=h,this.credential=p,this.user=I}static _fromIdtoken(h,p){return new Ye("enroll",h,p)}static _fromMfaPendingCredential(h){return new Ye("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,I;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Ye._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(I=h.multiFactorSession)&&void 0!==I&&I.idToken)return Ye._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Ut{constructor(h,p,I){this.session=h,this.hints=p,this.signInResolver=I}static _fromError(h,p){const I=ar(h),k=p.customData._serverResponse,G=(k.mfaInfo||[]).map(Pe=>Ko._fromServerResponse(I,Pe));ie(k.mfaPendingCredential,I,"internal-error");const ce=Ye._fromMfaPendingCredential(k.mfaPendingCredential);return new Ut(ce,G,function(){var Pe=(0,D.Z)(function*(tt){const Lt=yield tt._process(I,ce);delete k.mfaInfo,delete k.mfaPendingCredential;const Qt=Object.assign(Object.assign({},k),{idToken:Lt.idToken,refreshToken:Lt.refreshToken});switch(p.operationType){case"signIn":const xt=yield Si._fromIdTokenResponse(I,p.operationType,Qt);return yield I._updateCurrentUser(xt.user),xt;case"reauthenticate":return ie(p.user,I,"internal-error"),Si._forOperation(p.user,p.operationType,Qt);default:ne(I,"internal-error")}});return function(tt){return Pe.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,D.Z)(function*(){return p.signInResolver(h)})()}}class ri{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(I=>Ko._fromServerResponse(h.auth,I)))})}static _fromUser(h){return new ri(h)}getSession(){var h=this;return(0,D.Z)(function*(){return Ye._fromIdtoken(yield h.user.getIdToken(),h.user)})()}enroll(h,p){var I=this;return(0,D.Z)(function*(){const k=h,G=yield I.getSession(),ce=yield wn(I.user,k._process(I.user.auth,G,p));return yield I.user._updateTokensIfNecessary(ce),I.user.reload()})()}unenroll(h){var p=this;return(0,D.Z)(function*(){const I="string"==typeof h?h:h.uid,k=yield p.user.getIdToken();try{const G=yield wn(p.user,function _n(y,h){return Te(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Fe(y,h))}(p.user.auth,{idToken:k,mfaEnrollmentId:I}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ce})=>ce!==I),yield p.user._updateTokensIfNecessary(G),yield p.user.reload()}catch(G){throw G}})()}}const wt=new WeakMap,ya="__sak";class Tt{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(ya,"1"),this.storage.removeItem(ya),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const as=(()=>{class y extends Tt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,I)=>this.onStorageEvent(p,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function je(){const y=(0,K.z$)();return qi(y)||ln(y)}()&&function Ti(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=_r(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const I of Object.keys(this.listeners)){const k=this.storage.getItem(I),G=this.localCache[I];k!==G&&p(I,G,k)}}onStorageEvent(p,I=!1){if(!p.key)return void this.forAllChangedKeys((Pe,tt,Lt)=>{this.notifyListeners(Pe,Lt)});const k=p.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Pe=this.storage.getItem(k);if(p.newValue!==Pe)null!==p.newValue?this.storage.setItem(k,p.newValue):this.storage.removeItem(k);else if(this.localCache[k]===p.newValue&&!I)return}const G=()=>{const Pe=this.storage.getItem(k);!I&&this.localCache[k]===Pe||this.notifyListeners(k,Pe)},ce=this.storage.getItem(k);!function mr(){return(0,K.w1)()&&10===document.documentMode}()||ce===p.newValue||p.newValue===p.oldValue?G():setTimeout(G,10)}notifyListeners(p,I){this.localCache[p]=I;const k=this.listeners[p];if(k)for(const G of Array.from(k))G(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,I,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:I,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(I)}_removeListener(p,I){this.listeners[p]&&(this.listeners[p].delete(I),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,I){var k=()=>super._set,G=this;return(0,D.Z)(function*(){yield k().call(G,p,I),G.localCache[p]=JSON.stringify(I)})()}_get(p){var I=()=>super._get,k=this;return(0,D.Z)(function*(){const G=yield I().call(k,p);return k.localCache[p]=JSON.stringify(G),G})()}_remove(p){var I=()=>super._remove,k=this;return(0,D.Z)(function*(){yield I().call(k,p),delete k.localCache[p]})()}}return y.type="LOCAL",y})(),ho=(()=>{class y extends Tt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,I){}_removeListener(p,I){}}return y.type="SESSION",y})();let Is=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const I=this.receivers.find(G=>G.isListeningto(p));if(I)return I;const k=new y(p);return this.receivers.push(k),k}isListeningto(p){return this.eventTarget===p}handleEvent(p){var I=this;return(0,D.Z)(function*(){const k=p,{eventId:G,eventType:ce,data:Pe}=k.data,tt=I.handlersMap[ce];if(!tt?.size)return;k.ports[0].postMessage({status:"ack",eventId:G,eventType:ce});const Lt=Array.from(tt).map(function(){var xt=(0,D.Z)(function*(wi){return wi(k.origin,Pe)});return function(wi){return xt.apply(this,arguments)}}()),Qt=yield function Ei(y){return Promise.all(y.map(function(){var h=(0,D.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(I){return{fulfilled:!1,reason:I}}});return function(p){return h.apply(this,arguments)}}()))}(Lt);k.ports[0].postMessage({status:"done",eventId:G,eventType:ce,response:Qt})})()}_subscribe(p,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(I)}_unsubscribe(p,I){this.handlersMap[p]&&I&&this.handlersMap[p].delete(I),(!I||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Zs(y="",h=10){let p="";for(let I=0;I<h;I++)p+=Math.floor(10*Math.random());return y+p}class In{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,I=50){var k=this;return(0,D.Z)(function*(){const G=typeof MessageChannel<"u"?new MessageChannel:null;if(!G)throw new Error("connection_unavailable");let ce,Pe;return new Promise((tt,Lt)=>{const Qt=Zs("",20);G.port1.start();const xt=setTimeout(()=>{Lt(new Error("unsupported_event"))},I);Pe={messageChannel:G,onMessage(wi){const Lo=wi;if(Lo.data.eventId===Qt)switch(Lo.data.status){case"ack":clearTimeout(xt),ce=setTimeout(()=>{Lt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ce),tt(Lo.data.response);break;default:clearTimeout(xt),clearTimeout(ce),Lt(new Error("invalid_response"))}}},k.handlers.add(Pe),G.port1.addEventListener("message",Pe.onMessage),k.target.postMessage({eventType:h,eventId:Qt,data:p},[G.port2])}).finally(()=>{Pe&&k.removeMessageHandler(Pe)})})()}}function bi(){return window}function hs(){return typeof bi().WorkerGlobalScope<"u"&&"function"==typeof bi().importScripts}function ws(){return(ws=(0,D.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Nt="firebaseLocalStorageDb",Vn="firebaseLocalStorage",ea="fbase_key";class rr{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function dt(y,h){return y.transaction([Vn],h?"readwrite":"readonly").objectStore(Vn)}function Ju(){const y=indexedDB.open(Nt,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const I=y.result;try{I.createObjectStore(Vn,{keyPath:ea})}catch(k){p(k)}}),y.addEventListener("success",(0,D.Z)(function*(){const I=y.result;I.objectStoreNames.contains(Vn)?h(I):(I.close(),yield function Wa(){const y=indexedDB.deleteDatabase(Nt);return new rr(y).toPromise()}(),h(yield Ju()))}))})}function qa(y,h,p){return wu.apply(this,arguments)}function wu(){return(wu=(0,D.Z)(function*(y,h,p){const I=dt(y,!0).put({[ea]:h,value:p});return new rr(I).toPromise()})).apply(this,arguments)}function ec(){return(ec=(0,D.Z)(function*(y,h){const p=dt(y,!1).get(h),I=yield new rr(p).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function fo(y,h){const p=dt(y,!0).delete(h);return new rr(p).toPromise()}const va=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,D.Z)(function*(){return p.db||(p.db=yield Ju()),p.db})()}_withRetries(p){var I=this;return(0,D.Z)(function*(){let k=0;for(;;)try{const G=yield I._openDb();return yield p(G)}catch(G){if(k++>3)throw G;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,D.Z)(function*(){return hs()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,D.Z)(function*(){p.receiver=Is._getInstance(function kr(){return hs()?self:null}()),p.receiver._subscribe("keyChanged",function(){var I=(0,D.Z)(function*(k,G){return{keyProcessed:(yield p._poll()).includes(G.key)}});return function(k,G){return I.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var I=(0,D.Z)(function*(k,G){return["keyChanged"]});return function(k,G){return I.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,D.Z)(function*(){var I,k;if(p.activeServiceWorker=yield function fn(){return ws.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new In(p.activeServiceWorker);const G=yield p.sender._send("ping",{},800);G&&null!==(I=G[0])&&void 0!==I&&I.fulfilled&&null!==(k=G[0])&&void 0!==k&&k.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var I=this;return(0,D.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function pi(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:p},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Ju();return yield qa(p,ya,"1"),yield fo(p,ya),!0}catch{}return!1})()}_withPendingWrite(p){var I=this;return(0,D.Z)(function*(){I.pendingWrites++;try{yield p()}finally{I.pendingWrites--}})()}_set(p,I){var k=this;return(0,D.Z)(function*(){return k._withPendingWrite((0,D.Z)(function*(){return yield k._withRetries(G=>qa(G,p,I)),k.localCache[p]=I,k.notifyServiceWorker(p)}))})()}_get(p){var I=this;return(0,D.Z)(function*(){const k=yield I._withRetries(G=>function Mo(y,h){return ec.apply(this,arguments)}(G,p));return I.localCache[p]=k,k})()}_remove(p){var I=this;return(0,D.Z)(function*(){return I._withPendingWrite((0,D.Z)(function*(){return yield I._withRetries(k=>fo(k,p)),delete I.localCache[p],I.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,D.Z)(function*(){const I=yield p._withRetries(ce=>{const Pe=dt(ce,!1).getAll();return new rr(Pe).toPromise()});if(!I)return[];if(0!==p.pendingWrites)return[];const k=[],G=new Set;for(const{fbase_key:ce,value:Pe}of I)G.add(ce),JSON.stringify(p.localCache[ce])!==JSON.stringify(Pe)&&(p.notifyListeners(ce,Pe),k.push(ce));for(const ce of Object.keys(p.localCache))p.localCache[ce]&&!G.has(ce)&&(p.notifyListeners(ce,null),k.push(ce));return k})()}notifyListeners(p,I){this.localCache[p]=I;const k=this.listeners[p];if(k)for(const G of Array.from(k))G(I)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,D.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(I)}_removeListener(p,I){this.listeners[p]&&(this.listeners[p].delete(I),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})(),po=1e12;class ks{constructor(h){this.auth=h,this.counter=po,this._widgets=new Map}render(h,p){const I=this.counter;return this._widgets.set(I,new Oh(h,this.auth.name,p||{})),this.counter++,I}reset(h){var p;const I=h||po;null===(p=this._widgets.get(I))||void 0===p||p.delete(),this._widgets.delete(I)}getResponse(h){var p;return(null===(p=this._widgets.get(h||po))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,D.Z)(function*(){var I;return null===(I=p._widgets.get(h||po))||void 0===I||I.execute(),""})()}}class Oh{constructor(h,p,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof h?document.getElementById(h):h;ie(k,"argument-error",{appName:p}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function w(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<y;I++)h.push(p.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const R=au("rcb"),S=new en(3e4,6e4);class F{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=bi().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return ie(function q(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)&&Jn(bi().grecaptcha)?Promise.resolve(bi().grecaptcha):new Promise((I,k)=>{const G=bi().setTimeout(()=>{k(Ge(h,"network-request-failed"))},S.get());bi()[R]=()=>{bi().clearTimeout(G),delete bi()[R];const Pe=bi().grecaptcha;if(!Pe||!Jn(Pe))return void k(Ge(h,"internal-error"));const tt=Pe.render;Pe.render=(Lt,Qt)=>{const xt=tt(Lt,Qt);return this.counter++,xt},this.hostLanguage=p,I(Pe)},eo(`https://www.google.com/recaptcha/api.js??${(0,K.xO)({onload:R,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(G),k(Ge(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=bi().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class oe{load(h){return(0,D.Z)(function*(){return new ks(h)})()}clearedOneInstance(){}}const ze="recaptcha",we={theme:"light",type:"image"};class It{constructor(h,p,I=Object.assign({},we)){this.parameters=I,this.type=ze,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ar(h),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof p?document.getElementById(p):p;ie(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new oe:new F,this.validateStartingState()}verify(){var h=this;return(0,D.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),I=h.getAssertedRecaptcha();return I.getResponse(p)||new Promise(G=>{const ce=Pe=>{Pe&&(h.tokenChangeListeners.delete(ce),G(Pe))};h.tokenChangeListeners.add(ce),h.isInvisible&&I.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(I=>I(p)),"function"==typeof h)h(p);else if("string"==typeof h){const I=bi()[h];"function"==typeof I&&I(p)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,D.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const I=document.createElement("div");p.appendChild(I),p=I}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,D.Z)(function*(){ie(Pt()&&!hs(),h.auth,"internal-error"),yield function vn(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function lt(y){return Wn.apply(this,arguments)}(h.auth);ie(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Cn{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Nr._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Ka(){return(Ka=(0,D.Z)(function*(y,h,p){const I=ar(y),k=yield Za(I,h,(0,K.m9)(p));return new Cn(k,G=>ur(I,G))})).apply(this,arguments)}function rs(){return(rs=(0,D.Z)(function*(y,h,p){const I=(0,K.m9)(y);yield ds(!1,I,"phone");const k=yield Za(I.auth,h,(0,K.m9)(p));return new Cn(k,G=>Wu(I,G))})).apply(this,arguments)}function Pi(){return(Pi=(0,D.Z)(function*(y,h,p){const I=(0,K.m9)(y),k=yield Za(I.auth,h,(0,K.m9)(p));return new Cn(k,G=>Ao(I,G))})).apply(this,arguments)}function Za(y,h,p){return Rl.apply(this,arguments)}function Rl(){return Rl=(0,D.Z)(function*(y,h,p){var I;const k=yield p.verify();try{let G;if(ie("string"==typeof k,y,"argument-error"),ie(p.type===ze,y,"argument-error"),G="string"==typeof h?{phoneNumber:h}:h,"session"in G){const ce=G.session;if("phoneNumber"in G)return ie("enroll"===ce.type,y,"internal-error"),(yield function Qr(y,h){return Te(y,"POST","/v2/accounts/mfaEnrollment:start",Fe(y,h))}(y,{idToken:ce.credential,phoneEnrollmentInfo:{phoneNumber:G.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{ie("signin"===ce.type,y,"internal-error");const Pe=(null===(I=G.multiFactorHint)||void 0===I?void 0:I.uid)||G.multiFactorUid;return ie(Pe,y,"missing-multi-factor-info"),(yield function tc(y,h){return Te(y,"POST","/v2/accounts/mfaSignIn:start",Fe(y,h))}(y,{mfaPendingCredential:ce.credential,mfaEnrollmentId:Pe,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ce}=yield function so(y,h){return oo.apply(this,arguments)}(y,{phoneNumber:G.phoneNumber,recaptchaToken:k});return ce}}finally{p._reset()}}),Rl.apply(this,arguments)}function ld(){return(ld=(0,D.Z)(function*(y,h){yield La((0,K.m9)(y),h)})).apply(this,arguments)}let rc=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=ar(p)}verifyPhoneNumber(p,I){return Za(this.auth,p,(0,K.m9)(I))}static credential(p,I){return Nr._fromVerification(p,I)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:I,temporaryProof:k}=p;return I&&k?Nr._fromTokenResponse(I,k):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Yn(y,h){return h?un(h):(ie(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Cc extends Ho{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return ls(h,this._buildIdpRequest())}_linkToIdToken(h,p){return ls(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return ls(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Ac(y){return Fa(y.auth,new Cc(y),y.bypassAuthState)}function Ls(y){const{auth:h,user:p}=y;return ie(p,h,"internal-error"),jr(p,new Cc(y),y.bypassAuthState)}function dd(y){return Du.apply(this,arguments)}function Du(){return(Du=(0,D.Z)(function*(y){const{auth:h,user:p}=y;return ie(p,h,"internal-error"),La(p,new Cc(y),y.bypassAuthState)})).apply(this,arguments)}class ic{constructor(h,p,I,k,G=!1){this.auth=h,this.resolver=I,this.user=k,this.bypassAuthState=G,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,D.Z)(function*(I,k){h.pendingPromise={resolve:I,reject:k};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(G){h.reject(G)}});return function(I,k){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,D.Z)(function*(){const{urlResponse:I,sessionId:k,postBody:G,tenantId:ce,error:Pe,type:tt}=h;if(Pe)return void p.reject(Pe);const Lt={auth:p.auth,requestUri:I,sessionId:k,tenantId:ce||void 0,postBody:G||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(tt)(Lt))}catch(Qt){p.reject(Qt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Ac;case"linkViaPopup":case"linkViaRedirect":return dd;case"reauthViaPopup":case"reauthViaRedirect":return Ls;default:ne(this.auth,"internal-error")}}resolve(h){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const go=new en(2e3,1e4);function nl(){return(nl=(0,D.Z)(function*(y,h,p){const I=ar(y);Ze(y,h,ti);const k=Yn(I,p);return new sc(I,"signInViaPopup",h,k).executeNotNull()})).apply(this,arguments)}function mo(){return(mo=(0,D.Z)(function*(y,h,p){const I=(0,K.m9)(y);Ze(I.auth,h,ti);const k=Yn(I.auth,p);return new sc(I.auth,"reauthViaPopup",h,k,I).executeNotNull()})).apply(this,arguments)}function bc(){return(bc=(0,D.Z)(function*(y,h,p){const I=(0,K.m9)(y);Ze(I.auth,h,ti);const k=Yn(I.auth,p);return new sc(I.auth,"linkViaPopup",h,k,I).executeNotNull()})).apply(this,arguments)}let sc=(()=>{class y extends ic{constructor(p,I,k,G,ce){super(p,I,G,ce),this.provider=k,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,D.Z)(function*(){const I=yield p.execute();return ie(I,p.auth,"internal-error"),I})()}onExecution(){var p=this;return(0,D.Z)(function*(){Ce(1===p.filter.length,"Popup operations only handle one event");const I=Zs();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],I),p.authWindow.associatedEvent=I,p.resolver._originValidation(p.auth).catch(k=>{p.reject(k)}),p.resolver._isIframeWebStorageSupported(p.auth,k=>{k||p.reject(Ge(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Ge(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var I,k;this.pollId=null!==(k=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==k&&k.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ge(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,go.get())};p()}}return y.currentPopupAction=null,y})();const Rc="pendingRedirect",Qa=new Map;class Mi extends ic{constructor(h,p,I=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,I),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,D.Z)(function*(){let I=Qa.get(p.auth._key());if(!I){try{const G=(yield function rl(y,h){return No.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;I=()=>Promise.resolve(G)}catch(k){I=()=>Promise.reject(k)}Qa.set(p.auth._key(),I)}return p.bypassAuthState||Qa.set(p.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,I=this;return(0,D.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(I,h);if("unknown"!==h.type){if(h.eventId){const k=yield I.auth._redirectUserForId(h.eventId);if(k)return I.user=k,p().call(I,h);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,D.Z)(function*(){})()}cleanUp(){}}function No(){return(No=(0,D.Z)(function*(y,h){const p=Pc(h),I=wr(y);if(!(yield I._isAvailable()))return!1;const k="true"===(yield I._get(p));return yield I._remove(p),k})).apply(this,arguments)}function Ea(y,h){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,D.Z)(function*(y,h){return wr(y)._set(Pc(h),"true")})).apply(this,arguments)}function $i(y,h){Qa.set(y._key(),h)}function wr(y){return un(y._redirectPersistence)}function Pc(y){return ai(Rc,y.config.apiKey,y.name)}function Mc(y,h,p){return function Ts(y,h,p){return Ya.apply(this,arguments)}(y,h,p)}function Ya(){return(Ya=(0,D.Z)(function*(y,h,p){const I=ar(y);Ze(y,h,ti),yield I._initializationPromise;const k=Yn(I,p);return yield Ea(k,I),k._openRedirect(I,h,"signInViaRedirect")})).apply(this,arguments)}function Wd(y,h,p){return function Hi(y,h,p){return Pl.apply(this,arguments)}(y,h,p)}function Pl(){return(Pl=(0,D.Z)(function*(y,h,p){const I=(0,K.m9)(y);Ze(I.auth,h,ti),yield I.auth._initializationPromise;const k=Yn(I.auth,p);yield Ea(k,I.auth);const G=yield ta(I);return k._openRedirect(I.auth,h,"reauthViaRedirect",G)})).apply(this,arguments)}function oc(y,h,p){return function Ni(y,h,p){return We.apply(this,arguments)}(y,h,p)}function We(){return(We=(0,D.Z)(function*(y,h,p){const I=(0,K.m9)(y);Ze(I.auth,h,ti),yield I.auth._initializationPromise;const k=Yn(I.auth,p);yield ds(!1,I,h.providerId),yield Ea(k,I.auth);const G=yield ta(I);return k._openRedirect(I.auth,h,"linkViaRedirect",G)})).apply(this,arguments)}function ac(){return(ac=(0,D.Z)(function*(y,h){return yield ar(y)._initializationPromise,Xa(y,h,!1)})).apply(this,arguments)}function Xa(y,h){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,D.Z)(function*(y,h,p=!1){const I=ar(y),k=Yn(I,h),ce=yield new Mi(I,k,p).execute();return ce&&!p&&(delete ce.user._redirectEventId,yield I._persistUserIfCurrent(ce.user),yield I._setRedirectUser(null,h)),ce})).apply(this,arguments)}function ta(y){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,D.Z)(function*(y){const h=Zs(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Oo{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(h,I)&&(p=!0,this.sendToConsumer(h,I),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function uc(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cu(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var I;if(h.error&&!Cu(h)){const k=(null===(I=h.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";p.onError(Ge(this.auth,k))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const I=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&I}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yo(h))}saveEventToCache(h){this.cachedEventUids.add(yo(h)),this.lastProcessedEventTime=Date.now()}}function yo(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Cu({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Ml(y){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,D.Z)(function*(y,h={}){return Te(y,"GET","/v1/projects",h)})).apply(this,arguments)}const na=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nc=/^https?/;function Ii(){return(Ii=(0,D.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Ml(y);for(const p of h)try{if(cc(p))return}catch{}ne(y,"unauthorized-domain")})).apply(this,arguments)}function cc(y){const h=an(),{protocol:p,hostname:I}=new URL(h);if(y.startsWith("chrome-extension://")){const ce=new URL(y);return""===ce.hostname&&""===I?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&ce.hostname===I}if(!Nc.test(p))return!1;if(na.test(y))return I===y;const k=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(I)}const lc=new en(3e4,6e4);function sl(){const y=bi().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Ia=null;const hd=new en(5e3,15e3),Ol="__/auth/iframe",ol="emulator/auth/iframe",fd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xl(y){const h=y.config;ie(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?ge(h,ol):`https://${y.config.authDomain}/${Ol}`,I={apiKey:h.apiKey,appName:y.name,v:pe.SDK_VERSION},k=Yi.get(y.config.apiHost);k&&(I.eid=k);const G=y._getFrameworks();return G.length&&(I.fw=G.join(",")),`${p}?${(0,K.xO)(I).slice(1)}`}function xi(){return xi=(0,D.Z)(function*(y){const h=yield function Oc(y){return Ia=Ia||function Nl(y){return new Promise((h,p)=>{var I,k,G;function ce(){sl(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{sl(),p(Ge(y,"network-request-failed"))},timeout:lc.get()})}if(null!==(k=null===(I=bi().gapi)||void 0===I?void 0:I.iframes)&&void 0!==k&&k.Iframe)h(gapi.iframes.getContext());else{if(null===(G=bi().gapi)||void 0===G||!G.load){const Pe=au("iframefcb");return bi()[Pe]=()=>{gapi.load?ce():p(Ge(y,"network-request-failed"))},eo(`https://apis.google.com/js/api.js?onload=${Pe}`).catch(tt=>p(tt))}ce()}}).catch(h=>{throw Ia=null,h})}(y),Ia}(y),p=bi().gapi;return ie(p,y,"internal-error"),h.open({where:document.body,url:xl(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fd,dontclear:!0},I=>new Promise(function(){var k=(0,D.Z)(function*(G,ce){yield I.restyle({setHideOnLeave:!1});const Pe=Ge(y,"network-request-failed"),tt=bi().setTimeout(()=>{ce(Pe)},hd.get());function Lt(){bi().clearTimeout(tt),G(I)}I.ping(Lt).then(Lt,()=>{ce(Pe)})});return function(G,ce){return k.apply(this,arguments)}}()))}),xi.apply(this,arguments)}const Au={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Xt{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const dc="__/auth/handler",ul="emulator/auth/handler",pd=encodeURIComponent("fac");function hc(y,h,p,I,k,G){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,D.Z)(function*(y,h,p,I,k,G){ie(y.config.authDomain,y,"auth-domain-config-required"),ie(y.config.apiKey,y,"invalid-api-key");const ce={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:I,v:pe.SDK_VERSION,eventId:k};if(h instanceof ti){h.setDefaultLanguage(y.languageCode),ce.providerId=h.providerId||"",(0,K.xb)(h.getCustomParameters())||(ce.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Qt,xt]of Object.entries(G||{}))ce[Qt]=xt}if(h instanceof Di){const Qt=h.getScopes().filter(xt=>""!==xt);Qt.length>0&&(ce.scopes=Qt.join(","))}y.tenantId&&(ce.tid=y.tenantId);const Pe=ce;for(const Qt of Object.keys(Pe))void 0===Pe[Qt]&&delete Pe[Qt];const tt=yield y._getAppCheckToken(),Lt=tt?`#${pd}=${encodeURIComponent(tt)}`:"";return`${function wa({config:y}){return y.emulator?ge(y,ul):`https://${y.authDomain}/${dc}`}(y)}?${(0,K.xO)(Pe).slice(1)}${Lt}`})).apply(this,arguments)}const gd="webStorageSupport",kc=class fc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ho,this._completeRedirectFn=Xa,this._overrideRedirectResult=$i}_openPopup(h,p,I,k){var G=this;return(0,D.Z)(function*(){var ce;Ce(null===(ce=G.eventManagers[h._key()])||void 0===ce?void 0:ce.manager,"_initialize() not called before _openPopup()");const Pe=yield hc(h,p,I,an(),k);return function hr(y,h,p,I=500,k=600){const G=Math.max((window.screen.availHeight-k)/2,0).toString(),ce=Math.max((window.screen.availWidth-I)/2,0).toString();let Pe="";const tt=Object.assign(Object.assign({},Au),{width:I.toString(),height:k.toString(),top:G,left:ce}),Lt=(0,K.z$)().toLowerCase();p&&(Pe=Xs(Lt)?"_blank":p),Rr(Lt)&&(h=h||"http://localhost",tt.scrollbars="yes");const Qt=Object.entries(tt).reduce((wi,[Lo,tu])=>`${wi}${Lo}=${tu},`,"");if(function qn(y=(0,K.z$)()){var h;return ln(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Lt)&&"_self"!==Pe)return function xc(y,h){const p=document.createElement("a");p.href=y,p.target=h;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(I)}(h||"",Pe),new Xt(null);const xt=window.open(h||"",Pe,Qt);ie(xt,y,"popup-blocked");try{xt.focus()}catch{}return new Xt(xt)}(h,Pe,Zs())})()}_openRedirect(h,p,I,k){var G=this;return(0,D.Z)(function*(){return yield G._originValidation(h),function Po(y){bi().location.href=y}(yield hc(h,p,I,an(),k)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:k,promise:G}=this.eventManagers[p];return k?Promise.resolve(k):(Ce(G,"If manager is not set, promise should be"),G)}const I=this.initAndGetManager(h);return this.eventManagers[p]={promise:I},I.catch(()=>{delete this.eventManagers[p]}),I}initAndGetManager(h){var p=this;return(0,D.Z)(function*(){const I=yield function Xr(y){return xi.apply(this,arguments)}(h),k=new Oo(h);return I.register("authEvent",G=>(ie(G?.authEvent,h,"invalid-auth-event"),{status:k.onEvent(G.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:k},p.iframes[h._key()]=I,k})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(gd,{type:gd},k=>{var G;const ce=null===(G=k?.[0])||void 0===G?void 0:G[gd];void 0!==ce&&p(!!ce),ne(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function fs(y){return Ii.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return _r()||qi()||ln()}};class cl{constructor(h){this.factorId=h}_process(h,p,I){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,I);case"signin":return this._finalizeSignIn(h,p.credential);default:return ye("unexpected MultiFactorSessionType")}}}class Lc extends cl{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Lc(h)}_finalizeEnroll(h,p,I){return function Yr(y,h){return Te(y,"POST","/v2/accounts/mfaEnrollment:finalize",Fe(y,h))}(h,{idToken:p,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function zd(y,h){return Te(y,"POST","/v2/accounts/mfaSignIn:finalize",Fe(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let qd=(()=>{class y{constructor(){}static assertion(p){return Lc._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Ll="@firebase/auth";class ll{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,D.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(I=>{h(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);p&&(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xo(){return window}(0,K.Pz)("authIdTokenMaxAge"),function _d(y){(0,pe._registerComponent)(new he.wA("auth",(h,{options:p})=>{const I=h.getProvider("app").getImmediate(),k=h.getProvider("heartbeat"),G=h.getProvider("app-check-internal"),{apiKey:ce,authDomain:Pe}=I.options;ie(ce&&!ce.includes(":"),"invalid-api-key",{appName:I.name});const tt={apiKey:ce,authDomain:Pe,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ji(y)},Lt=new Bo(I,k,G,tt);return function $t(y,h){const p=h?.persistence||[],I=(Array.isArray(p)?p:[p]).map(un);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(I,h?.popupRedirectResolver)}(Lt,p),Lt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,I)=>{h.getProvider("auth-internal").initialize()})),(0,pe._registerComponent)(new he.wA("auth-internal",h=>{const p=ar(h.getProvider("auth").getImmediate());return new ll(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,pe.registerVersion)(Ll,"1.4.0",function Fl(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,pe.registerVersion)(Ll,"1.4.0","esm2017")}("Browser");function Ds(){return Ds=(0,D.Z)(function*(y,h,p){var I;const{BuildInfo:k}=xo();Ce(h.sessionId,"AuthEvent did not contain a session ID");const G=yield function Uc(y){return dl.apply(this,arguments)}(h.sessionId),ce={};return ln()?ce.ibi=k.packageName:Le()?ce.apn=k.packageName:ne(y,"operation-not-supported-in-this-environment"),k.displayName&&(ce.appDisplayName=k.displayName),ce.sessionId=G,hc(y,p,h.type,void 0,null!==(I=h.eventId)&&void 0!==I?I:void 0,ce)}),Ds.apply(this,arguments)}function gc(){return(gc=(0,D.Z)(function*(y){const{BuildInfo:h}=xo(),p={};ln()?p.iosBundleId=h.packageName:Le()?p.androidPackageName=h.packageName:ne(y,"operation-not-supported-in-this-environment"),yield Ml(y,p)})).apply(this,arguments)}function yd(){return(yd=(0,D.Z)(function*(y,h,p){const{cordova:I}=xo();let k=()=>{};try{yield new Promise((G,ce)=>{let Pe=null;function tt(){var xt;G();const wi=null===(xt=I.plugins.browsertab)||void 0===xt?void 0:xt.close;"function"==typeof wi&&wi(),"function"==typeof p?.close&&p.close()}function Lt(){Pe||(Pe=window.setTimeout(()=>{ce(Ge(y,"redirect-cancelled-by-user"))},2e3))}function Qt(){"visible"===document?.visibilityState&&Lt()}h.addPassiveListener(tt),document.addEventListener("resume",Lt,!1),Le()&&document.addEventListener("visibilitychange",Qt,!1),k=()=>{h.removePassiveListener(tt),document.removeEventListener("resume",Lt,!1),document.removeEventListener("visibilitychange",Qt,!1),Pe&&window.clearTimeout(Pe)}})}finally{k()}})).apply(this,arguments)}function dl(){return(dl=(0,D.Z)(function*(y){const h=function E(y){if(Ce(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let I=0;I<y.length;I++)p[I]=y.charCodeAt(I);return p}(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(k=>k.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class m extends Oo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,D.Z)(function*(){yield h.initPromise})()}}function U(y){return W.apply(this,arguments)}function W(){return(W=(0,D.Z)(function*(y){const h=yield _e()._get(et(y));return h&&(yield _e()._remove(et(y))),h})).apply(this,arguments)}function ae(){const y=[];for(let p=0;p<20;p++){const I=Math.floor(62*Math.random());y.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(I))}return y.join("")}function _e(){return un(as)}function et(y){return ai("authEvent",y.config.apiKey,y.name)}function it(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,K.zd)(p.join("?"))}const An=class Mt{constructor(){this._redirectPersistence=ho,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xa,this._overrideRedirectResult=$i}_initialize(h){var p=this;return(0,D.Z)(function*(){const I=h._key();let k=p.eventManagers.get(I);return k||(k=new m(h),p.eventManagers.set(I,k),p.attachCallbackListeners(h,k)),k})()}_openPopup(h){ne(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,I,k){var G=this;return(0,D.Z)(function*(){!function Mu(y){var h,p,I,k,G,ce,Pe,tt,Lt,Qt;const xt=xo();ie("function"==typeof(null===(h=xt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ie(typeof(null===(p=xt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ie("function"==typeof(null===(G=null===(k=null===(I=xt?.cordova)||void 0===I?void 0:I.plugins)||void 0===k?void 0:k.browsertab)||void 0===G?void 0:G.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ie("function"==typeof(null===(tt=null===(Pe=null===(ce=xt?.cordova)||void 0===ce?void 0:ce.plugins)||void 0===Pe?void 0:Pe.browsertab)||void 0===tt?void 0:tt.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ie("function"==typeof(null===(Qt=null===(Lt=xt?.cordova)||void 0===Lt?void 0:Lt.InAppBrowser)||void 0===Qt?void 0:Qt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const ce=yield G._initialize(h);yield ce.initialized(),ce.resetRedirect(),function il(){Qa.clear()}(),yield G._originValidation(h);const Pe=function T(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:ae(),postBody:null,tenantId:y.tenantId,error:Ge(y,"no-auth-event")}}(h,I,k);yield function P(y,h){return _e()._set(et(y),h)}(h,Pe);const tt=yield function Pu(y,h,p){return Ds.apply(this,arguments)}(h,Pe,p),Lt=yield function Bl(y){const{cordova:h}=xo();return new Promise(p=>{h.plugins.browsertab.isAvailable(I=>{let k=null;I?h.plugins.browsertab.openUrl(y):k=h.InAppBrowser.open(y,function mn(y=(0,K.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(k)})})}(tt);return function Ys(y,h,p){return yd.apply(this,arguments)}(h,ce,Lt)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Ul(y){return gc.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:I,handleOpenURL:k,BuildInfo:G}=xo(),ce=setTimeout((0,D.Z)(function*(){yield U(h),p.onEvent(vr())}),500),Pe=function(){var Qt=(0,D.Z)(function*(xt){clearTimeout(ce);const wi=yield U(h);let Lo=null;wi&&xt?.url&&(Lo=function J(y,h){var p,I;const k=function nn(y){const h=it(y),p=h.link?decodeURIComponent(h.link):void 0,I=it(p).link,k=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return it(k).link||k||I||p||y}(h);if(k.includes("/__/auth/callback")){const G=it(k),ce=G.firebaseError?function gt(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(G.firebaseError)):null,Pe=null===(I=null===(p=ce?.code)||void 0===p?void 0:p.split("auth/"))||void 0===I?void 0:I[1],tt=Pe?Ge(Pe):null;return tt?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:tt,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:k,postBody:null}}return null}(wi,xt.url)),p.onEvent(Lo||vr())});return function(wi){return Qt.apply(this,arguments)}}();typeof I<"u"&&"function"==typeof I.subscribe&&I.subscribe(null,Pe);const tt=k,Lt=`${G.packageName.toLowerCase()}://`;xo().handleOpenURL=function(){var Qt=(0,D.Z)(function*(xt){if(xt.toLowerCase().startsWith(Lt)&&Pe({url:xt}),"function"==typeof tt)try{tt(xt)}catch(wi){console.error(wi)}});return function(xt){return Qt.apply(this,arguments)}}()}};function vr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ge("no-auth-event")}}function ki(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Lr(y=(0,K.z$)()){return!("file:"!==ki()&&"ionic:"!==ki()&&"capacitor:"!==ki()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function hl(){try{const y=self.localStorage,h=Zs();if(y)return y.setItem(h,"1"),y.removeItem(h),!function ko(y=(0,K.z$)()){return function vo(){return(0,K.w1)()&&11===document?.documentMode}()||function vd(y=(0,K.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,K.hl)()}catch{return Bc()&&(0,K.hl)()}return!1}function Bc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Nu(){return(function ci(){return"http:"===ki()||"https:"===ki()}()||(0,K.ru)()||Lr())&&!function Fs(){return(0,K.b$)()||(0,K.UG)()}()&&hl()&&!Bc()}function Zt(){return Lr()&&typeof document<"u"}function Ft(){return(Ft=(0,D.Z)(function*(){return!!Zt()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const cr={LOCAL:"local",NONE:"none",SESSION:"session"},Cs=ie,ii="persistence";function si(y){return jl.apply(this,arguments)}function jl(){return(jl=(0,D.Z)(function*(y){yield y._initializationPromise;const h=fr(),p=ai(ii,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function fr(){var y;try{return(null===(y=function sr(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const eu=ie;class oi{constructor(){this.browserResolver=un(kc),this.cordovaResolver=un(An),this.underlyingResolver=null,this._redirectPersistence=ho,this._completeRedirectFn=Xa,this._overrideRedirectResult=$i}_initialize(h){var p=this;return(0,D.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,I,k){var G=this;return(0,D.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._openPopup(h,p,I,k)})()}_openRedirect(h,p,I,k){var G=this;return(0,D.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._openRedirect(h,p,I,k)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Zt()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return eu(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,D.Z)(function*(){if(h.underlyingResolver)return;const p=yield function dn(){return Ft.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function jc(y){return y.unwrap()}function Zd(y){return Fh(y)}function Fh(y){const{_tokenResponse:h}=y instanceof K.ZR?y.customData:y;if(!h)return null;if(!(y instanceof K.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return rc.credentialFromResult(y);const p=h.providerId;if(!p||p===Oe.PASSWORD)return null;let I;switch(p){case Oe.GOOGLE:I=Xc;break;case Oe.FACEBOOK:I=pa;break;case Oe.GITHUB:I=Os;break;case Oe.TWITTER:I=Bi;break;default:const{oauthIdToken:k,oauthAccessToken:G,oauthTokenSecret:ce,pendingToken:Pe,nonce:tt}=h;return G||ce||k||Pe?Pe?p.startsWith("saml.")?Ui._create(p,Pe):hi._fromParams({providerId:p,signInMethod:p,pendingToken:Pe,idToken:k,accessToken:G}):new ns(p).credential({idToken:k,accessToken:G,rawNonce:tt}):null}return y instanceof K.ZR?I.credentialFromError(y):I.credentialFromResult(y)}function Vs(y,h){return h.catch(p=>{throw p instanceof K.ZR&&function Gf(y,h){var p;const I=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new us(y,function Ln(y,h){var p;const I=(0,K.m9)(y),k=h;return ie(h.customData.operationType,I,"argument-error"),ie(null===(p=k.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,I,"argument-error"),Ut._fromError(I,k)}(y,h));else if(I){const k=Fh(h),G=h;k&&(G.credential=k,G.tenantId=I.tenantId||void 0,G.email=I.email||void 0,G.phoneNumber=I.phoneNumber||void 0)}}(y,p),p}).then(p=>{const k=p.user;return{operationType:p.operationType,credential:Zd(p),additionalUserInfo:O(p),user:Mn.getOrCreate(k)}})}function Vh(y,h){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,D.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:I=>Vs(y,p.confirm(I))}})).apply(this,arguments)}class us{constructor(h,p){this.resolver=p,this.auth=function xu(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Vs(jc(this.auth),this.resolver.resolveSignIn(h))}}class Mn{constructor(h){this._delegate=h,this.multiFactor=function st(y){const h=(0,K.m9)(y);return wt.has(h)||wt.set(h,ri._fromUser(h)),wt.get(h)}(h)}static getOrCreate(h){return Mn.USER_MAP.has(h)||Mn.USER_MAP.set(h,new Mn(h)),Mn.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,D.Z)(function*(){return Vs(p.auth,Wu(p._delegate,h))})()}linkWithPhoneNumber(h,p){var I=this;return(0,D.Z)(function*(){return Vh(I.auth,function nc(y,h,p){return rs.apply(this,arguments)}(I._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,D.Z)(function*(){return Vs(p.auth,function Su(y,h,p){return bc.apply(this,arguments)}(p._delegate,h,oi))})()}linkWithRedirect(h){var p=this;return(0,D.Z)(function*(){return yield si(ar(p.auth)),oc(p._delegate,h,oi)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,D.Z)(function*(){return Vs(p.auth,Ao(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Vh(this.auth,function tl(y,h,p){return Pi.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Vs(this.auth,function kh(y,h,p){return mo.apply(this,arguments)}(this._delegate,h,oi))}reauthenticateWithRedirect(h){var p=this;return(0,D.Z)(function*(){return yield si(ar(p.auth)),Wd(p._delegate,h,oi)})()}sendEmailVerification(h){return function el(y,h){return os.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,D.Z)(function*(){return yield function Gs(y,h){return Ws.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function _a(y,h){return Sc((0,K.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function jt(y,h){return Sc((0,K.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Gd(y,h){return ld.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function lo(y,h){return Xu.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function Ha(y,h,p){return Sn.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Mn.USER_MAP=new WeakMap;const ku=ie;let Qd=(()=>{class y{constructor(p,I){if(this.app=p,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:k}=p.options;ku(k,"invalid-api-key",{appName:p.name}),ku(k,"invalid-api-key",{appName:p.name});const G=typeof window<"u"?oi:void 0;this._delegate=I.initialize({options:{persistence:Yd(k,p.name),popupRedirectResolver:G}}),this._delegate._updateErrorMap(vt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,I){!function jn(y,h,p){const I=ar(y);ie(I._canInitEmulator,I,"emulator-config-failed"),ie(/^https?:\/\//.test(h),I,"invalid-emulator-scheme");const k=!!p?.disableWarnings,G=$o(h),{host:ce,port:Pe}=function Br(y){const h=$o(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const I=p[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(I);if(k){const G=k[1];return{host:G,port:Ma(I.substr(G.length+1))}}{const[G,ce]=I.split(":");return{host:G,port:Ma(ce)}}}(h);I.config.emulator={url:`${G}//${ce}${null===Pe?"":`:${Pe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:ce,port:Pe,protocol:G.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function wc(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,I)}applyActionCode(p){return function uo(y,h){return pu.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return gu(this._delegate,p)}confirmPasswordReset(p,I){return function Yo(y,h,p){return bo.apply(this,arguments)}(this._delegate,p,I)}createUserWithEmailAndPassword(p,I){var k=this;return(0,D.Z)(function*(){return Vs(k._delegate,function Zu(y,h,p){return Xo.apply(this,arguments)}(k._delegate,p,I))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function yu(y,h){return Ks.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function mu(y,h){const p=vs.parseLink(h);return"EMAIL_SIGNIN"===p?.operation}(0,p)}getRedirectResult(){var p=this;return(0,D.Z)(function*(){ku(Nu(),p._delegate,"operation-not-supported-in-this-environment");const I=yield function $n(y,h){return ac.apply(this,arguments)}(p._delegate,oi);return I?Vs(p._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Dr(y,h){ar(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,I,k){const{next:G,error:ce,complete:Pe}=Ed(p,I,k);return this._delegate.onAuthStateChanged(G,ce,Pe)}onIdTokenChanged(p,I,k){const{next:G,error:ce,complete:Pe}=Ed(p,I,k);return this._delegate.onIdTokenChanged(G,ce,Pe)}sendSignInLinkToEmail(p,I){return function Qu(y,h,p){return Yu.apply(this,arguments)}(this._delegate,p,I)}sendPasswordResetEmail(p,I){return function Zi(y,h,p){return Ci.apply(this,arguments)}(this._delegate,p,I||void 0)}setPersistence(p){var I=this;return(0,D.Z)(function*(){let k;switch(function sa(y,h){Cs(Object.values(cr).includes(h),y,"invalid-persistence-type"),(0,K.b$)()?Cs(h!==cr.SESSION,y,"unsupported-persistence-type"):(0,K.UG)()?Cs(h===cr.NONE,y,"unsupported-persistence-type"):Bc()?Cs(h===cr.NONE||h===cr.LOCAL&&(0,K.hl)(),y,"unsupported-persistence-type"):Cs(h===cr.NONE||hl(),y,"unsupported-persistence-type")}(I._delegate,p),p){case cr.SESSION:k=ho;break;case cr.LOCAL:k=(yield un(va)._isAvailable())?va:as;break;case cr.NONE:k=Vr;break;default:return ne("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(k)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Vs(this._delegate,function ka(y){return ga.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Vs(this._delegate,ur(this._delegate,p))}signInWithCustomToken(p){return Vs(this._delegate,function Jc(y,h){return Ua.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,I){return Vs(this._delegate,function ja(y,h,p){return ur((0,K.m9)(y),Ns.credential(h,p)).catch(function(){var I=(0,D.Z)(function*(k){throw"auth/password-does-not-meet-requirements"===k.code&&$r(y),k});return function(k){return I.apply(this,arguments)}}())}(this._delegate,p,I))}signInWithEmailLink(p,I){return Vs(this._delegate,function $a(y,h,p){return Jo.apply(this,arguments)}(this._delegate,p,I))}signInWithPhoneNumber(p,I){return Vh(this._delegate,function Qn(y,h,p){return Ka.apply(this,arguments)}(this._delegate,p,I))}signInWithPopup(p){var I=this;return(0,D.Z)(function*(){return ku(Nu(),I._delegate,"operation-not-supported-in-this-environment"),Vs(I._delegate,function xh(y,h,p){return nl.apply(this,arguments)}(I._delegate,p,oi))})()}signInWithRedirect(p){var I=this;return(0,D.Z)(function*(){return ku(Nu(),I._delegate,"operation-not-supported-in-this-environment"),yield si(I._delegate),Mc(I._delegate,p,oi)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Ba(y,h){return Es.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=cr,y})();function Ed(y,h,p){let I=y;"function"!=typeof y&&({next:I,error:h,complete:p}=y);const k=I;return{next:ce=>k(ce&&Mn.getOrCreate(ce)),error:h,complete:p}}function Yd(y,h){const p=function Ou(y,h){const p=fr();if(!p)return[];const I=ai(ii,y,h);switch(p.getItem(I)){case cr.NONE:return[Vr];case cr.LOCAL:return[va,ho];case cr.SESSION:return[ho];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(va)&&p.push(va),typeof window<"u")for(const I of[as,ho])p.includes(I)||p.push(I);return p.includes(Vr)||p.push(Vr),p}class Ta{constructor(){this.providerId="phone",this._delegate=new rc(jc(H.Z.auth()))}static credential(h,p){return rc.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Ta.PHONE_SIGN_IN_METHOD=rc.PHONE_SIGN_IN_METHOD,Ta.PROVIDER_ID=rc.PROVIDER_ID;const Wf=ie;class Xd{constructor(h,p,I=H.Z.app()){var k;Wf(null===(k=I.options)||void 0===k?void 0:k.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new It(I.auth(),h,p),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Id(y){y.INTERNAL.registerComponent(new he.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),I=h.getProvider("auth");return new Qd(p,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ns,FacebookAuthProvider:pa,GithubAuthProvider:Os,GoogleAuthProvider:Xc,OAuthProvider:ns,SAMLAuthProvider:ao,PhoneAuthProvider:Ta,PhoneMultiFactorGenerator:qd,RecaptchaVerifier:Xd,TwitterAuthProvider:Bi,Auth:Qd,AuthCredential:Ho,Error:K.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.9")}(H.Z)},5861:(Rt,Ve,B)=>{function D(K,pe,de,fe,he,Ne,Oe){try{var ue=K[Ne](Oe),re=ue.value}catch(Re){return void de(Re)}ue.done?pe(re):Promise.resolve(re).then(fe,he)}function H(K){return function(){var pe=this,de=arguments;return new Promise(function(fe,he){var Ne=K.apply(pe,de);function Oe(re){D(Ne,fe,he,Oe,ue,"next",re)}function ue(re){D(Ne,fe,he,Oe,ue,"throw",re)}Oe(void 0)})}}B.d(Ve,{Z:()=>H})},7582:(Rt,Ve,B)=>{function pe(ge,Me){var Ae={};for(var Ee in ge)Object.prototype.hasOwnProperty.call(ge,Ee)&&Me.indexOf(Ee)<0&&(Ae[Ee]=ge[Ee]);if(null!=ge&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(Ee=Object.getOwnPropertySymbols(ge);Fe<Ee.length;Fe++)Me.indexOf(Ee[Fe])<0&&Object.prototype.propertyIsEnumerable.call(ge,Ee[Fe])&&(Ae[Ee[Fe]]=ge[Ee[Fe]])}return Ae}function Re(ge,Me,Ae,Ee){return new(Ae||(Ae=Promise))(function(Te,_t){function rn(tn){try{Ct(Ee.next(tn))}catch(hn){_t(hn)}}function cn(tn){try{Ct(Ee.throw(tn))}catch(hn){_t(hn)}}function Ct(tn){tn.done?Te(tn.value):function Fe(Te){return Te instanceof Ae?Te:new Ae(function(_t){_t(Te)})}(tn.value).then(rn,cn)}Ct((Ee=Ee.apply(ge,Me||[])).next())})}function rt(ge){return this instanceof rt?(this.v=ge,this):new rt(ge)}function ne(ge,Me,Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,Ee=Ae.apply(ge,Me||[]),Te=[];return Fe={},_t("next"),_t("throw"),_t("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function _t(On){Ee[On]&&(Fe[On]=function(zn){return new Promise(function(or,Jn){Te.push([On,zn,or,Jn])>1||rn(On,zn)})})}function rn(On,zn){try{!function cn(On){On.value instanceof rt?Promise.resolve(On.value.v).then(Ct,tn):hn(Te[0][2],On)}(Ee[On](zn))}catch(or){hn(Te[0][3],or)}}function Ct(On){rn("next",On)}function tn(On){rn("throw",On)}function hn(On,zn){On(zn),Te.shift(),Te.length&&rn(Te[0][0],Te[0][1])}}function pt(ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,Me=ge[Symbol.asyncIterator];return Me?Me.call(ge):(ge=function Bt(ge){var Me="function"==typeof Symbol&&Symbol.iterator,Ae=Me&&ge[Me],Ee=0;if(Ae)return Ae.call(ge);if(ge&&"number"==typeof ge.length)return{next:function(){return ge&&Ee>=ge.length&&(ge=void 0),{value:ge&&ge[Ee++],done:!ge}}};throw new TypeError(Me?"Object is not iterable.":"Symbol.iterator is not defined.")}(ge),Ae={},Ee("next"),Ee("throw"),Ee("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae);function Ee(Te){Ae[Te]=ge[Te]&&function(_t){return new Promise(function(rn,cn){!function Fe(Te,_t,rn,cn){Promise.resolve(cn).then(function(Ct){Te({value:Ct,done:rn})},_t)}(rn,cn,(_t=ge[Te](_t)).done,_t.value)})}}}B.d(Ve,{FC:()=>ne,KL:()=>pt,_T:()=>pe,mG:()=>Re,qq:()=>rt}),"function"==typeof SuppressedError&&SuppressedError}},Rt=>{Rt(Rt.s=3717)}]);