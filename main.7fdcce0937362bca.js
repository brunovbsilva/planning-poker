"use strict";(self.webpackChunkplanning_poker=self.webpackChunkplanning_poker||[]).push([[179],{9058:(Mt,Ue,$)=>{$.d(Ue,{BH:()=>ze,G6:()=>rn,L:()=>Fe,LL:()=>Me,Pz:()=>ce,Sg:()=>ht,UG:()=>$e,ZB:()=>Oe,ZR:()=>We,aH:()=>nt,b$:()=>an,eu:()=>be,hl:()=>Ee,jU:()=>ue,m9:()=>ss,ne:()=>Ai,pd:()=>An,r3:()=>Sn,ru:()=>Ve,tV:()=>fe,uI:()=>Ze,vZ:()=>fr,w1:()=>Un,xO:()=>pr,xb:()=>ft,z$:()=>Ge,zd:()=>nr});const se=function(me){const X=[];let ne=0;for(let ee=0;ee<me.length;ee++){let re=me.charCodeAt(ee);re<128?X[ne++]=re:re<2048?(X[ne++]=re>>6|192,X[ne++]=63&re|128):55296==(64512&re)&&ee+1<me.length&&56320==(64512&me.charCodeAt(ee+1))?(re=65536+((1023&re)<<10)+(1023&me.charCodeAt(++ee)),X[ne++]=re>>18|240,X[ne++]=re>>12&63|128,X[ne++]=re>>6&63|128,X[ne++]=63&re|128):(X[ne++]=re>>12|224,X[ne++]=re>>6&63|128,X[ne++]=63&re|128)}return X},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(me,X){if(!Array.isArray(me))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ne=X?this.byteToCharMapWebSafe_:this.byteToCharMap_,ee=[];for(let re=0;re<me.length;re+=3){const we=me[re],et=re+1<me.length,Nt=et?me[re+1]:0,hn=re+2<me.length,Wt=hn?me[re+2]:0;let Mn=(15&Nt)<<2|Wt>>6,Or=63&Wt;hn||(Or=64,et||(Mn=64)),ee.push(ne[we>>2],ne[(3&we)<<4|Nt>>4],ne[Mn],ne[Or])}return ee.join("")},encodeString(me,X){return this.HAS_NATIVE_SUPPORT&&!X?btoa(me):this.encodeByteArray(se(me),X)},decodeString(me,X){return this.HAS_NATIVE_SUPPORT&&!X?atob(me):function(me){const X=[];let ne=0,ee=0;for(;ne<me.length;){const re=me[ne++];if(re<128)X[ee++]=String.fromCharCode(re);else if(re>191&&re<224){const we=me[ne++];X[ee++]=String.fromCharCode((31&re)<<6|63&we)}else if(re>239&&re<365){const hn=((7&re)<<18|(63&me[ne++])<<12|(63&me[ne++])<<6|63&me[ne++])-65536;X[ee++]=String.fromCharCode(55296+(hn>>10)),X[ee++]=String.fromCharCode(56320+(1023&hn))}else{const we=me[ne++],et=me[ne++];X[ee++]=String.fromCharCode((15&re)<<12|(63&we)<<6|63&et)}}return X.join("")}(this.decodeStringToByteArray(me,X))},decodeStringToByteArray(me,X){this.init_();const ne=X?this.charToByteMapWebSafe_:this.charToByteMap_,ee=[];for(let re=0;re<me.length;){const we=ne[me.charAt(re++)],Nt=re<me.length?ne[me.charAt(re)]:0;++re;const Wt=re<me.length?ne[me.charAt(re)]:64;++re;const fn=re<me.length?ne[me.charAt(re)]:64;if(++re,null==we||null==Nt||null==Wt||null==fn)throw new Pe;ee.push(we<<2|Nt>>4),64!==Wt&&(ee.push(Nt<<4&240|Wt>>2),64!==fn&&ee.push(Wt<<6&192|fn))}return ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let me=0;me<this.ENCODED_VALS.length;me++)this.byteToCharMap_[me]=this.ENCODED_VALS.charAt(me),this.charToByteMap_[this.byteToCharMap_[me]]=me,this.byteToCharMapWebSafe_[me]=this.ENCODED_VALS_WEBSAFE.charAt(me),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[me]]=me,me>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(me)]=me,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(me)]=me)}}};class Pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(me){return function(me){const X=se(me);return pe.encodeByteArray(X,!0)}(me).replace(/\./g,"")},fe=function(me){try{return pe.decodeString(me,!0)}catch(X){console.error("base64Decode failed: ",X)}return null};function Oe(me,X){if(!(X instanceof Object))return X;switch(X.constructor){case Date:return new Date(X.getTime());case Object:void 0===me&&(me={});break;case Array:me=[];break;default:return X}for(const ne in X)!X.hasOwnProperty(ne)||!st(ne)||(me[ne]=Oe(me[ne],X[ne]));return me}function st(me){return"__proto__"!==me}const dt=()=>{try{return function Xe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const me=process.env.__FIREBASE_DEFAULTS__;return me?JSON.parse(me):void 0})()||(()=>{if(typeof document>"u")return;let me;try{me=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const X=me&&fe(me[1]);return X&&JSON.parse(X)})()}catch(me){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${me}`)}},nt=()=>{var me;return null===(me=dt())||void 0===me?void 0:me.config},ce=me=>{var X;return null===(X=dt())||void 0===X?void 0:X[`_${me}`]};class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((X,ne)=>{this.resolve=X,this.reject=ne})}wrapCallback(X){return(ne,ee)=>{ne?this.reject(ne):this.resolve(ee),"function"==typeof X&&(this.promise.catch(()=>{}),1===X.length?X(ne):X(ne,ee))}}}function ht(me,X){if(me.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ee=X||"demo-project",re=me.iat||0,we=me.sub||me.user_id;if(!we)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const et=Object.assign({iss:`https://securetoken.google.com/${ee}`,aud:ee,iat:re,exp:re+3600,auth_time:re,sub:we,user_id:we,firebase:{sign_in_provider:"custom",identities:{}}},me);return[Fe(JSON.stringify({alg:"none",type:"JWT"})),Fe(JSON.stringify(et)),""].join(".")}function Ge(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ze(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function $e(){var me;const X=null===(me=dt())||void 0===me?void 0:me.forceEnvironment;if("node"===X)return!0;if("browser"===X)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ue(){return"object"==typeof self&&self.self===self}function Ve(){const me="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof me&&void 0!==me.id}function an(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Un(){const me=Ge();return me.indexOf("MSIE ")>=0||me.indexOf("Trident/")>=0}function rn(){return!$e()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ee(){try{return"object"==typeof indexedDB}catch{return!1}}function be(){return new Promise((me,X)=>{try{let ne=!0;const ee="validate-browser-context-for-indexeddb-analytics-module",re=self.indexedDB.open(ee);re.onsuccess=()=>{re.result.close(),ne||self.indexedDB.deleteDatabase(ee),me(!0)},re.onupgradeneeded=()=>{ne=!1},re.onerror=()=>{var we;X((null===(we=re.error)||void 0===we?void 0:we.message)||"")}}catch(ne){X(ne)}})}class We extends Error{constructor(X,ne,ee){super(ne),this.code=X,this.customData=ee,this.name="FirebaseError",Object.setPrototypeOf(this,We.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Me.prototype.create)}}class Me{constructor(X,ne,ee){this.service=X,this.serviceName=ne,this.errors=ee}create(X,...ne){const ee=ne[0]||{},re=`${this.service}/${X}`,we=this.errors[X],et=we?function ut(me,X){return me.replace(Dt,(ne,ee)=>{const re=X[ee];return null!=re?String(re):`<${ee}?>`})}(we,ee):"Error";return new We(re,`${this.serviceName}: ${et} (${re}).`,ee)}}const Dt=/\{\$([^}]+)}/g;function Sn(me,X){return Object.prototype.hasOwnProperty.call(me,X)}function ft(me){for(const X in me)if(Object.prototype.hasOwnProperty.call(me,X))return!1;return!0}function fr(me,X){if(me===X)return!0;const ne=Object.keys(me),ee=Object.keys(X);for(const re of ne){if(!ee.includes(re))return!1;const we=me[re],et=X[re];if(Wr(we)&&Wr(et)){if(!fr(we,et))return!1}else if(we!==et)return!1}for(const re of ee)if(!ne.includes(re))return!1;return!0}function Wr(me){return null!==me&&"object"==typeof me}function pr(me){const X=[];for(const[ne,ee]of Object.entries(me))Array.isArray(ee)?ee.forEach(re=>{X.push(encodeURIComponent(ne)+"="+encodeURIComponent(re))}):X.push(encodeURIComponent(ne)+"="+encodeURIComponent(ee));return X.length?"&"+X.join("&"):""}function nr(me){const X={};return me.replace(/^\?/,"").split("&").forEach(ee=>{if(ee){const[re,we]=ee.split("=");X[decodeURIComponent(re)]=decodeURIComponent(we)}}),X}function An(me){const X=me.indexOf("?");if(!X)return"";const ne=me.indexOf("#",X);return me.substring(X,ne>0?ne:void 0)}function Ai(me,X){const ne=new En(me,X);return ne.subscribe.bind(ne)}class En{constructor(X,ne){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ne,this.task.then(()=>{X(this)}).catch(ee=>{this.error(ee)})}next(X){this.forEachObserver(ne=>{ne.next(X)})}error(X){this.forEachObserver(ne=>{ne.error(X)}),this.close(X)}complete(){this.forEachObserver(X=>{X.complete()}),this.close()}subscribe(X,ne,ee){let re;if(void 0===X&&void 0===ne&&void 0===ee)throw new Error("Missing Observer.");re=function Bn(me,X){if("object"!=typeof me||null===me)return!1;for(const ne of X)if(ne in me&&"function"==typeof me[ne])return!0;return!1}(X,["next","error","complete"])?X:{next:X,error:ne,complete:ee},void 0===re.next&&(re.next=Ln),void 0===re.error&&(re.error=Ln),void 0===re.complete&&(re.complete=Ln);const we=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?re.error(this.finalError):re.complete()}catch{}}),this.observers.push(re),we}unsubscribeOne(X){void 0===this.observers||void 0===this.observers[X]||(delete this.observers[X],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(X){if(!this.finalized)for(let ne=0;ne<this.observers.length;ne++)this.sendOne(ne,X)}sendOne(X,ne){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[X])try{ne(this.observers[X])}catch(ee){typeof console<"u"&&console.error&&console.error(ee)}})}close(X){this.finalized||(this.finalized=!0,void 0!==X&&(this.finalError=X),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ln(){}function ss(me){return me&&me._delegate?me._delegate:me}},5737:(Mt,Ue,$)=>{$.r(Ue),$.d(Ue,{PagesModule:()=>z});var C=$(6814),W=$(8878),le=$(7398);class se{constructor(N,w,U,Y){this.id=N,this.name=w,this.roomService=U,this.router=Y}delete(){this.roomService.deleteRoom(this.id)}join(){this.router.navigate(["room",this.id])}}class ye{constructor(N,w,U,Y=!0){this.userId=N,this.userName=w,this.value=U,this.hidden=Y}updateVote(N){this.value=N}showVote(){this.hidden=!1}updateValues(N){this.updateCurrentVote(N.value),this.updateHidden(N.hidden)}updateHidden(N){this.hidden!==N&&(this.hidden=N)}updateCurrentVote(N){this.value!==N&&(this.value=N)}}class pe{constructor(N,w=[]){this.name=N,this.votes=w}vote(N){this.votes=this.votes.filter(w=>w.userId!==N.userId),this.votes.push(N)}deleteVote(N){this.votes=this.votes.filter(w=>w!==N)}showVotes(){this.votes.forEach(N=>N.showVote())}revote(){this.votes=[]}getResult(){const N=this.votes.filter(U=>Number(U.value)>0),w=N.length;return Math.round(N.reduce((U,Y)=>U+Number(Y.value)/w,0))}updateValues(N){this.updateName(N.name),this.updateVotes(N.votes)}updateName(N){this.name===N||!N||(this.name=N)}updateVotes(N){this.votes!==N&&(0===N.length?this.votes=[]:N.forEach(w=>{const U=this.votes.find(Y=>Y.userId===w.userId);U?U.updateValues(w):this.pushVote(w),this.votes=this.votes.filter(Y=>N.map(Ke=>Ke.userId).includes(Y.userId))}))}pushVote(N){this.votes.push(new ye(N.userId,N.userName,N.value,N.hidden))}}class Pe{get name(){return this._name}get creator(){return this._creator}constructor(N,w,U=[],Y=0,Ke){this.tasks=U,this.currentTask=Y,this.id=Ke,this._name=N,this._creator=w}createTask(N){this.tasks.push(new pe(N))}nextTask(){this.currentTask==this.tasks.length-1||this.currentTask++}previousTask(){0==this.currentTask||this.currentTask--}deleteTask(N){this.tasks=this.tasks.filter(w=>w!==N),this.setTaskIndex(0)}setTaskIndex(N){this.currentTask=N}updateValues(N){this.updateName(N.name),this.updateCreator(N.creator),this.updateTasks(N.tasks),this.updateCurrentTask(N.currentTask)}updateName(N){this._name===N||!N||(this._name=N)}updateCreator(N){this._creator===N||!N||(this._creator=N)}updateTasks(N){this.tasks!==N&&(0===N.length?this.tasks=[]:N.forEach(w=>{const U=this.tasks.find(Y=>Y.name===w.name);U?U.updateValues(w):this.pushTask(w),this.tasks=this.tasks.filter(Y=>N.map(Ke=>Ke.name).includes(Y.name))}))}pushTask(N){this.tasks.push(new pe(N.name,N.votes.map(w=>new ye(w.userId,w.userName,w.value,w.hidden))))}updateCurrentTask(N){this.currentTask!==N&&(this.currentTask=N)}}var b=$(9212);let Fe=(()=>{class A{constructor(){this.objectsForDestruction=[]}toDestroy(w){this.objectsForDestruction.push(w)}ngOnDestroy(){this.objectsForDestruction.forEach(w=>w.unsubscribe())}static#e=this.\u0275fac=function(U){return new(U||A)};static#t=this.\u0275cmp=b.Xpm({type:A,selectors:[["ng-component"]],decls:0,vars:0,template:function(U,Y){},encapsulation:2})}return A})();var fe=$(6533);let he=(()=>{class A{constructor(w){this.firestore=w}createRoom(w){this.firestore.collection("rooms").add(this.roomObjectModel(w))}updateRoom(w){this.firestore.doc("rooms/"+w.id).update(this.roomObjectModel(w))}deleteRoom(w){this.firestore.doc("rooms/"+w).delete()}listenerRoom(w){return this.firestore.doc("rooms/"+w).valueChanges().pipe((0,le.U)(U=>Object.assign({id:w},U)))}getRooms(){return this.firestore.collection("rooms").snapshotChanges().pipe((0,le.U)(w=>w.map(this.actionToRoomModel)))}actionToRoomModel(w){const U=w.payload.doc.data();return Object.assign({id:w.payload.doc.id},U)}roomObjectModel(w){return Object.assign({name:w.name,creator:w.creator,tasks:w.tasks.map(U=>this.taskObjectModel(U)),currentTask:w.currentTask})}taskObjectModel(w){return Object.assign({name:w.name,votes:w.votes.map(U=>this.voteObjectModel(U))})}voteObjectModel(w){return Object.assign({userId:w.userId,userName:w.userName,value:String(w.value),hidden:w.hidden})}static#e=this.\u0275fac=function(U){return new(U||A)(b.LFG(fe.ST))};static#t=this.\u0275prov=b.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})();var Oe=$(4694);let st=(()=>{class A{constructor(){this.escapeKeydown=new b.vpe,this.enterKeydown=new b.vpe}onEscapeKeydown(w){this.escapeKeydown.emit()}onEnterKeydown(w){this.enterKeydown.emit()}static#e=this.\u0275fac=function(U){return new(U||A)};static#t=this.\u0275dir=b.lG2({type:A,selectors:[["","modalKeydowns",""]],hostBindings:function(U,Y){1&U&&b.NdJ("keydown.escape",function(rt){return Y.onEscapeKeydown(rt)},!1,b.evT)("keydown.enter",function(rt){return Y.onEnterKeydown(rt)},!1,b.evT)},outputs:{escapeKeydown:"escapeKeydown",enterKeydown:"enterKeydown"}})}return A})();const Xe=["button"];function gt(A,N){if(1&A){const w=b.EpF();b.TgZ(0,"div",2),b.NdJ("click",function(){b.CHM(w);const Y=b.oxw();return b.KtG(Y.close())}),b.qZA()}}function qt(A,N){if(1&A){const w=b.EpF();b.TgZ(0,"div",3),b.NdJ("escapeKeydown",function(){b.CHM(w);const Y=b.oxw();return b.KtG(Y.close())}),b.TgZ(1,"div",4)(2,"h1"),b._uU(3),b.qZA()(),b.TgZ(4,"div",5),b.Hsn(5),b.qZA(),b.TgZ(6,"div",6),b.Hsn(7,1),b.qZA()()}if(2&A){const w=b.oxw();b.xp6(3),b.Oqu(w.modalTitle)}}const Et=["*",[["button"]]],dt=["*","button"];let Kt=(()=>{class A{constructor(){this.buttons=[],this.modalTitle="",this.isOpen=(0,b.tdS)(!1),this.isOpen$=this.isOpen.asReadonly()}open(){this.isOpen.set(!0)}close(){this.isOpen.set(!1)}static#e=this.\u0275fac=function(U){return new(U||A)};static#t=this.\u0275cmp=b.Xpm({type:A,selectors:[["app-modal"]],viewQuery:function(U,Y){if(1&U&&b.Gf(Xe,5),2&U){let Ke;b.iGM(Ke=b.CRH())&&(Y.buttons=Ke)}},inputs:{modalTitle:"modalTitle"},ngContentSelectors:dt,decls:2,vars:2,consts:[["class","background",3,"click",4,"ngIf"],["class","modal","modalKeydowns","",3,"escapeKeydown",4,"ngIf"],[1,"background",3,"click"],["modalKeydowns","",1,"modal",3,"escapeKeydown"],[1,"modal__header"],[1,"modal__body"],[1,"modal__footer"]],template:function(U,Y){1&U&&(b.F$t(Et),b.YNc(0,gt,1,0,"div",0)(1,qt,8,1,"div",1)),2&U&&(b.Q6J("ngIf",Y.isOpen$()),b.xp6(),b.Q6J("ngIf",Y.isOpen$()))},dependencies:[C.O5,st],styles:[".background[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000;opacity:.5;z-index:99}.modal[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fff;padding:20px;border-radius:8px;box-shadow:0 0 10px #00000080;z-index:100}.modal[_ngcontent-%COMP%]   .modal__header[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%]   .modal__body[_ngcontent-%COMP%]{margin-bottom:10px}.modal[_ngcontent-%COMP%]   .modal__footer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row-reverse;gap:10px}"]})}return A})();var Bt=$(4176);let nt=(()=>{class A{constructor(w){this.element=w}ngOnInit(){this.setStyle()}setStyle(){this.element.nativeElement.classList.add("main-input")}static#e=this.\u0275fac=function(U){return new(U||A)(b.Y36(b.SBq))};static#t=this.\u0275dir=b.lG2({type:A,selectors:[["","main-input",""]]})}return A})(),ce=(()=>{class A{static#e=this.\u0275fac=function(U){return new(U||A)};static#t=this.\u0275cmp=b.Xpm({type:A,selectors:[["app-room-item"]],inputs:{room:"room"},decls:8,vars:1,consts:[[1,"room"],[1,"room__name"],[1,"buttons"],["main-button","",3,"click"],["main-button","","theme","error",3,"click"]],template:function(U,Y){1&U&&(b.TgZ(0,"div",0)(1,"h2",1),b._uU(2),b.qZA(),b.TgZ(3,"div",2)(4,"button",3),b.NdJ("click",function(){return Y.room.join()}),b._uU(5,"Entrar"),b.qZA(),b.TgZ(6,"button",4),b.NdJ("click",function(){return Y.room.delete()}),b._uU(7,"Deletar"),b.qZA()()()),2&U&&(b.xp6(2),b.Oqu(Y.room.name))},dependencies:[Bt.j],styles:[".room[_ngcontent-%COMP%]{background:transparent;display:flex;justify-content:space-between}.room[_ngcontent-%COMP%]   .room__name[_ngcontent-%COMP%]{padding:0 16px}.room[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;gap:10px;margin-right:10px}"]})}return A})();const ze=["modal"];function ht(A,N){1&A&&b._UZ(0,"app-room-item",14),2&A&&b.Q6J("room",N.$implicit)}function Ge(A,N){1&A&&(b.TgZ(0,"h3",15),b._uU(1,"N\xe3o h\xe1 salas no momento!"),b.qZA())}let Ze=(()=>{class A extends Fe{constructor(w,U,Y){super(),this.roomService=w,this.userAuth=U,this.router=Y,this.rooms=[]}ngOnInit(){this.toDestroy(this.roomService.getRooms().pipe((0,le.U)(w=>w.map(U=>new se(U.id,U.name,this.roomService,this.router)))).subscribe({next:w=>this.rooms=w,error:w=>{throw w}}))}createRoom(w){this.isNullOrEmpty(w)||this.userAuth.currentUser.then(U=>this.roomService.createRoom(new Pe(w,U?.uid))).finally(()=>this.modal.close())}isNullOrEmpty(w){return null==w||""===w}static#e=this.\u0275fac=function(U){return new(U||A)(b.Y36(he),b.Y36(Oe.zQ),b.Y36(W.F0))};static#t=this.\u0275cmp=b.Xpm({type:A,selectors:[["app-rooms"]],viewQuery:function(U,Y){if(1&U&&b.Gf(ze,5),2&U){let Ke;b.iGM(Ke=b.CRH())&&(Y.modal=Ke.first)}},features:[b.qOj],decls:18,vars:2,consts:[[1,"rooms-content"],[1,"actions"],[1,"rooms__header"],["main-button","","theme","primary",3,"click"],[1,"rooms"],[1,"rooms__list"],[3,"room",4,"ngFor","ngForOf"],["class","no-room",4,"ngIf"],["modalTitle","Criar sala"],["modal",""],["main-input","","type","text","placeholder","Digite o nome da sala",1,"input"],["name",""],["main-button","",3,"click"],["main-button","","theme","error",3,"click"],[3,"room"],[1,"no-room"]],template:function(U,Y){if(1&U){const Ke=b.EpF();b.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),b._uU(3,"Salas"),b.qZA(),b.TgZ(4,"button",3),b.NdJ("click",function(){b.CHM(Ke);const wt=b.MAs(11);return b.KtG(wt.open())}),b._uU(5,"Criar sala"),b.qZA()(),b.TgZ(6,"div",4)(7,"div",5),b.YNc(8,ht,1,1,"app-room-item",6)(9,Ge,2,0,"h3",7),b.qZA()()(),b.TgZ(10,"app-modal",8,9),b._UZ(12,"input",10,11),b.TgZ(14,"button",12),b.NdJ("click",function(){b.CHM(Ke);const wt=b.MAs(13);return b.KtG(Y.createRoom(wt.value))}),b._uU(15,"Criar"),b.qZA(),b.TgZ(16,"button",13),b.NdJ("click",function(){b.CHM(Ke);const wt=b.MAs(11);return b.KtG(wt.close())}),b._uU(17,"Cancelar"),b.qZA()()}2&U&&(b.xp6(8),b.Q6J("ngForOf",Y.rooms),b.xp6(),b.Q6J("ngIf",0==Y.rooms.length))},dependencies:[C.sg,C.O5,Kt,Bt.j,nt,ce],styles:[".rooms-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{max-width:1260px;margin:0 auto 16px;display:flex;justify-content:space-between}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]{max-width:1260px;display:block;margin:0 auto}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]{border:1px solid gray;border-radius:4px;width:100%}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   app-room-item[_ngcontent-%COMP%]{display:block;padding:10px 0}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   .no-room[_ngcontent-%COMP%]{line-height:3.25rem;text-align:center}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2n){background-color:#f5f5f5}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{border-radius:4px 4px 0 0}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:last-child{border-radius:0 0 4px 4px}"]})}return A})();var $e=$(2459),ue=$(5592),Ve=$(7453),an=$(4829),At=$(9940),Un=$(8251),Rn=$(7400),zt=$(2714);let Ee=(()=>{class A{constructor(w,U){this._renderer=w,this._elementRef=U,this.onChange=Y=>{},this.onTouched=()=>{}}setProperty(w,U){this._renderer.setProperty(this._elementRef.nativeElement,w,U)}registerOnTouched(w){this.onTouched=w}registerOnChange(w){this.onChange=w}setDisabledState(w){this.setProperty("disabled",w)}static#e=this.\u0275fac=function(U){return new(U||A)(b.Y36(b.Qsj),b.Y36(b.SBq))};static#t=this.\u0275dir=b.lG2({type:A})}return A})(),be=(()=>{class A extends Ee{static#e=this.\u0275fac=(()=>{let w;return function(Y){return(w||(w=b.n5z(A)))(Y||A)}})();static#t=this.\u0275dir=b.lG2({type:A,features:[b.qOj]})}return A})();const Se=new b.OlP("NgValueAccessor"),Me={provide:Se,useExisting:(0,b.Gpc)(()=>Rt),multi:!0},Dt=new b.OlP("CompositionEventMode");let Rt=(()=>{class A extends Ee{constructor(w,U,Y){super(w,U),this._compositionMode=Y,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ut(){const A=(0,C.q)()?(0,C.q)().getUserAgent():"";return/android (\d+)/.test(A.toLowerCase())}())}writeValue(w){this.setProperty("value",w??"")}_handleInput(w){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(w)}_compositionStart(){this._composing=!0}_compositionEnd(w){this._composing=!1,this._compositionMode&&this.onChange(w)}static#e=this.\u0275fac=function(U){return new(U||A)(b.Y36(b.Qsj),b.Y36(b.SBq),b.Y36(Dt,8))};static#t=this.\u0275dir=b.lG2({type:A,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(U,Y){1&U&&b.NdJ("input",function(rt){return Y._handleInput(rt.target.value)})("blur",function(){return Y.onTouched()})("compositionstart",function(){return Y._compositionStart()})("compositionend",function(rt){return Y._compositionEnd(rt.target.value)})},features:[b._Bn([Me]),b.qOj]})}return A})();const Ht=new b.OlP("NgValidators"),Dn=new b.OlP("NgAsyncValidators");function An(A){return null!=A}function Yt(A){return(0,b.QGY)(A)?(0,$e.D)(A):A}function Ai(A){let N={};return A.forEach(w=>{N=null!=w?{...N,...w}:N}),0===Object.keys(N).length?null:N}function En(A,N){return N.map(w=>w(A))}function Bn(A){return A.map(N=>function Fr(A){return!A.validate}(N)?N:w=>N.validate(w))}function Fo(A){return null!=A?function Ln(A){if(!A)return null;const N=A.filter(An);return 0==N.length?null:function(w){return Ai(En(w,N))}}(Bn(A)):null}function Qi(A){return null!=A?function qn(A){if(!A)return null;const N=A.filter(An);return 0==N.length?null:function(w){return function rn(...A){const N=(0,At.jO)(A),{args:w,keys:U}=(0,Ve.D)(A),Y=new ue.y(Ke=>{const{length:rt}=w;if(!rt)return void Ke.complete();const wt=new Array(rt);let Vn=rt,cn=rt;for(let mr=0;mr<rt;mr++){let Lr=!1;(0,an.Xf)(w[mr]).subscribe((0,Un.x)(Ke,ur=>{Lr||(Lr=!0,cn--),wt[mr]=ur},()=>Vn--,void 0,()=>{(!Vn||!Lr)&&(cn||Ke.next(U?(0,zt.n)(U,wt):wt),Ke.complete())}))}});return N?Y.pipe((0,Rn.Z)(N)):Y}(En(w,N).map(Yt)).pipe((0,le.U)(Ai))}}(Bn(A)):null}function _t(A,N){return null===A?[N]:Array.isArray(A)?[...A,N]:[A,N]}function Ui(A){return A._rawValidators}function wn(A){return A._rawAsyncValidators}function Yn(A){return A?Array.isArray(A)?A:[A]:[]}function yi(A,N){return Array.isArray(A)?A.includes(N):A===N}function qr(A,N){const w=Yn(N);return Yn(A).forEach(Y=>{yi(w,Y)||w.push(Y)}),w}function Oi(A,N){return Yn(N).filter(w=>!yi(A,w))}class zn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(N){this._rawValidators=N||[],this._composedValidatorFn=Fo(this._rawValidators)}_setAsyncValidators(N){this._rawAsyncValidators=N||[],this._composedAsyncValidatorFn=Qi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(N){this._onDestroyCallbacks.push(N)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(N=>N()),this._onDestroyCallbacks=[]}reset(N=void 0){this.control&&this.control.reset(N)}hasError(N,w){return!!this.control&&this.control.hasError(N,w)}getError(N,w){return this.control?this.control.getError(N,w):null}}class Br extends zn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class en{constructor(N){this._cd=N}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let me=(()=>{class A extends en{constructor(w){super(w)}static#e=this.\u0275fac=function(U){return new(U||A)(b.Y36(Br,2))};static#t=this.\u0275dir=b.lG2({type:A,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(U,Y){2&U&&b.ekj("ng-untouched",Y.isUntouched)("ng-touched",Y.isTouched)("ng-pristine",Y.isPristine)("ng-dirty",Y.isDirty)("ng-valid",Y.isValid)("ng-invalid",Y.isInvalid)("ng-pending",Y.isPending)},features:[b.qOj]})}return A})();const Ut="VALID",Yi="INVALID",Be="PENDING",Re="DISABLED";function _n(A){return null!=A&&!Array.isArray(A)&&"object"==typeof A}class Xr{constructor(N,w){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(N),this._assignAsyncValidators(w)}get validator(){return this._composedValidatorFn}set validator(N){this._rawValidators=this._composedValidatorFn=N}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(N){this._rawAsyncValidators=this._composedAsyncValidatorFn=N}get parent(){return this._parent}get valid(){return this.status===Ut}get invalid(){return this.status===Yi}get pending(){return this.status==Be}get disabled(){return this.status===Re}get enabled(){return this.status!==Re}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(N){this._assignValidators(N)}setAsyncValidators(N){this._assignAsyncValidators(N)}addValidators(N){this.setValidators(qr(N,this._rawValidators))}addAsyncValidators(N){this.setAsyncValidators(qr(N,this._rawAsyncValidators))}removeValidators(N){this.setValidators(Oi(N,this._rawValidators))}removeAsyncValidators(N){this.setAsyncValidators(Oi(N,this._rawAsyncValidators))}hasValidator(N){return yi(this._rawValidators,N)}hasAsyncValidator(N){return yi(this._rawAsyncValidators,N)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(N={}){this.touched=!0,this._parent&&!N.onlySelf&&this._parent.markAsTouched(N)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(N=>N.markAllAsTouched())}markAsUntouched(N={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(w=>{w.markAsUntouched({onlySelf:!0})}),this._parent&&!N.onlySelf&&this._parent._updateTouched(N)}markAsDirty(N={}){this.pristine=!1,this._parent&&!N.onlySelf&&this._parent.markAsDirty(N)}markAsPristine(N={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(w=>{w.markAsPristine({onlySelf:!0})}),this._parent&&!N.onlySelf&&this._parent._updatePristine(N)}markAsPending(N={}){this.status=Be,!1!==N.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!N.onlySelf&&this._parent.markAsPending(N)}disable(N={}){const w=this._parentMarkedDirty(N.onlySelf);this.status=Re,this.errors=null,this._forEachChild(U=>{U.disable({...N,onlySelf:!0})}),this._updateValue(),!1!==N.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...N,skipPristineCheck:w}),this._onDisabledChange.forEach(U=>U(!0))}enable(N={}){const w=this._parentMarkedDirty(N.onlySelf);this.status=Ut,this._forEachChild(U=>{U.enable({...N,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:N.emitEvent}),this._updateAncestors({...N,skipPristineCheck:w}),this._onDisabledChange.forEach(U=>U(!1))}_updateAncestors(N){this._parent&&!N.onlySelf&&(this._parent.updateValueAndValidity(N),N.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(N){this._parent=N}getRawValue(){return this.value}updateValueAndValidity(N={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ut||this.status===Be)&&this._runAsyncValidator(N.emitEvent)),!1!==N.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!N.onlySelf&&this._parent.updateValueAndValidity(N)}_updateTreeValidity(N={emitEvent:!0}){this._forEachChild(w=>w._updateTreeValidity(N)),this.updateValueAndValidity({onlySelf:!0,emitEvent:N.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Re:Ut}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(N){if(this.asyncValidator){this.status=Be,this._hasOwnPendingAsyncValidator=!0;const w=Yt(this.asyncValidator(this));this._asyncValidationSubscription=w.subscribe(U=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(U,{emitEvent:N})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(N,w={}){this.errors=N,this._updateControlsErrors(!1!==w.emitEvent)}get(N){let w=N;return null==w||(Array.isArray(w)||(w=w.split(".")),0===w.length)?null:w.reduce((U,Y)=>U&&U._find(Y),this)}getError(N,w){const U=w?this.get(w):this;return U&&U.errors?U.errors[N]:null}hasError(N,w){return!!this.getError(N,w)}get root(){let N=this;for(;N._parent;)N=N._parent;return N}_updateControlsErrors(N){this.status=this._calculateStatus(),N&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(N)}_initObservables(){this.valueChanges=new b.vpe,this.statusChanges=new b.vpe}_calculateStatus(){return this._allControlsDisabled()?Re:this.errors?Yi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Be)?Be:this._anyControlsHaveStatus(Yi)?Yi:Ut}_anyControlsHaveStatus(N){return this._anyControls(w=>w.status===N)}_anyControlsDirty(){return this._anyControls(N=>N.dirty)}_anyControlsTouched(){return this._anyControls(N=>N.touched)}_updatePristine(N={}){this.pristine=!this._anyControlsDirty(),this._parent&&!N.onlySelf&&this._parent._updatePristine(N)}_updateTouched(N={}){this.touched=this._anyControlsTouched(),this._parent&&!N.onlySelf&&this._parent._updateTouched(N)}_registerOnCollectionChange(N){this._onCollectionChange=N}_setUpdateStrategy(N){_n(N)&&null!=N.updateOn&&(this._updateOn=N.updateOn)}_parentMarkedDirty(N){return!N&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(N){return null}_assignValidators(N){this._rawValidators=Array.isArray(N)?N.slice():N,this._composedValidatorFn=function ot(A){return Array.isArray(A)?Fo(A):A||null}(this._rawValidators)}_assignAsyncValidators(N){this._rawAsyncValidators=Array.isArray(N)?N.slice():N,this._composedAsyncValidatorFn=function ln(A){return Array.isArray(A)?Qi(A):A||null}(this._rawAsyncValidators)}}const Ji=new b.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>vi}),vi="always";function Si(A,N,w=vi){(function oo(A,N){const w=Ui(A);null!==N.validator?A.setValidators(_t(w,N.validator)):"function"==typeof w&&A.setValidators([w]);const U=wn(A);null!==N.asyncValidator?A.setAsyncValidators(_t(U,N.asyncValidator)):"function"==typeof U&&A.setAsyncValidators([U]);const Y=()=>A.updateValueAndValidity();tn(N._rawValidators,Y),tn(N._rawAsyncValidators,Y)})(A,N),N.valueAccessor.writeValue(A.value),(A.disabled||"always"===w)&&N.valueAccessor.setDisabledState?.(A.disabled),function bi(A,N){N.valueAccessor.registerOnChange(w=>{A._pendingValue=w,A._pendingChange=!0,A._pendingDirty=!0,"change"===A.updateOn&&Es(A,N)})}(A,N),function jr(A,N){const w=(U,Y)=>{N.valueAccessor.writeValue(U),Y&&N.viewToModelUpdate(U)};A.registerOnChange(w),N._registerOnDestroy(()=>{A._unregisterOnChange(w)})}(A,N),function vs(A,N){N.valueAccessor.registerOnTouched(()=>{A._pendingTouched=!0,"blur"===A.updateOn&&A._pendingChange&&Es(A,N),"submit"!==A.updateOn&&A.markAsTouched()})}(A,N),function si(A,N){if(N.valueAccessor.setDisabledState){const w=U=>{N.valueAccessor.setDisabledState(U)};A.registerOnDisabledChange(w),N._registerOnDestroy(()=>{A._unregisterOnDisabledChange(w)})}}(A,N)}function so(A,N,w=!0){const U=()=>{};N.valueAccessor&&(N.valueAccessor.registerOnChange(U),N.valueAccessor.registerOnTouched(U)),function gn(A,N){let w=!1;if(null!==A){if(null!==N.validator){const Y=Ui(A);if(Array.isArray(Y)&&Y.length>0){const Ke=Y.filter(rt=>rt!==N.validator);Ke.length!==Y.length&&(w=!0,A.setValidators(Ke))}}if(null!==N.asyncValidator){const Y=wn(A);if(Array.isArray(Y)&&Y.length>0){const Ke=Y.filter(rt=>rt!==N.asyncValidator);Ke.length!==Y.length&&(w=!0,A.setAsyncValidators(Ke))}}}const U=()=>{};return tn(N._rawValidators,U),tn(N._rawAsyncValidators,U),w}(A,N),A&&(N._invokeOnDestroyCallbacks(),A._registerOnCollectionChange(()=>{}))}function tn(A,N){A.forEach(w=>{w.registerOnValidatorChange&&w.registerOnValidatorChange(N)})}function Es(A,N){A._pendingDirty&&A.markAsDirty(),A.setValue(A._pendingValue,{emitModelToViewChange:!1}),N.viewToModelUpdate(A._pendingValue),A._pendingChange=!1}function ks(A,N){const w=A.indexOf(N);w>-1&&A.splice(w,1)}function qs(A){return"object"==typeof A&&null!==A&&2===Object.keys(A).length&&"value"in A&&"disabled"in A}Promise.resolve();const lr=class extends Xr{constructor(N=null,w,U){super(function Qe(A){return(_n(A)?A.validators:A)||null}(w),function $t(A,N){return(_n(N)?N.asyncValidators:A)||null}(U,w)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(N),this._setUpdateStrategy(w),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_n(w)&&(w.nonNullable||w.initialValueIsDefault)&&(this.defaultValue=qs(N)?N.value:N)}setValue(N,w={}){this.value=this._pendingValue=N,this._onChange.length&&!1!==w.emitModelToViewChange&&this._onChange.forEach(U=>U(this.value,!1!==w.emitViewToModelChange)),this.updateValueAndValidity(w)}patchValue(N,w={}){this.setValue(N,w)}reset(N=this.defaultValue,w={}){this._applyFormState(N),this.markAsPristine(w),this.markAsUntouched(w),this.setValue(this.value,w),this._pendingChange=!1}_updateValue(){}_anyControls(N){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(N){this._onChange.push(N)}_unregisterOnChange(N){ks(this._onChange,N)}registerOnDisabledChange(N){this._onDisabledChange.push(N)}_unregisterOnDisabledChange(N){ks(this._onDisabledChange,N)}_forEachChild(N){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(N){qs(N)?(this.value=this._pendingValue=N.value,N.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=N}};Promise.resolve();let Bo=(()=>{class A{static#e=this.\u0275fac=function(U){return new(U||A)};static#t=this.\u0275mod=b.oAB({type:A});static#n=this.\u0275inj=b.cJS({})}return A})();const uo=new b.OlP("NgModelWithFormControlWarning"),au={provide:Br,useExisting:(0,b.Gpc)(()=>jo)};let jo=(()=>{class A extends Br{set isDisabled(w){}static#e=this._ngModelWarningSentOnce=!1;constructor(w,U,Y,Ke,rt){super(),this._ngModelWarningConfig=Ke,this.callSetDisabledState=rt,this.update=new b.vpe,this._ngModelWarningSent=!1,this._setValidators(w),this._setAsyncValidators(U),this.valueAccessor=function sa(A,N){if(!N)return null;let w,U,Y;return Array.isArray(N),N.forEach(Ke=>{Ke.constructor===Rt?w=Ke:function ia(A){return Object.getPrototypeOf(A.constructor)===be}(Ke)?U=Ke:Y=Ke}),Y||U||w||null}(0,Y)}ngOnChanges(w){if(this._isControlChanged(w)){const U=w.form.previousValue;U&&so(U,this,!1),Si(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}(function Is(A,N){if(!A.hasOwnProperty("model"))return!1;const w=A.model;return!!w.isFirstChange()||!Object.is(N,w.currentValue)})(w,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&so(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(w){this.viewModel=w,this.update.emit(w)}_isControlChanged(w){return w.hasOwnProperty("form")}static#t=this.\u0275fac=function(U){return new(U||A)(b.Y36(Ht,10),b.Y36(Dn,10),b.Y36(Se,10),b.Y36(uo,8),b.Y36(Ji,8))};static#n=this.\u0275dir=b.lG2({type:A,selectors:[["","formControl",""]],inputs:{form:[b.lbL.None,"formControl","form"],isDisabled:[b.lbL.None,"disabled","isDisabled"],model:[b.lbL.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[b._Bn([au]),b.qOj,b.TTD]})}return A})(),Li=(()=>{class A{static#e=this.\u0275fac=function(U){return new(U||A)};static#t=this.\u0275mod=b.oAB({type:A});static#n=this.\u0275inj=b.cJS({imports:[Bo]})}return A})(),Ls=(()=>{class A{static withConfig(w){return{ngModule:A,providers:[{provide:Ji,useValue:w.callSetDisabledState??vi}]}}static#e=this.\u0275fac=function(U){return new(U||A)};static#t=this.\u0275mod=b.oAB({type:A});static#n=this.\u0275inj=b.cJS({imports:[Li]})}return A})(),yn=(()=>{class A{static withConfig(w){return{ngModule:A,providers:[{provide:uo,useValue:w.warnOnNgModelWithFormControl??"always"},{provide:Ji,useValue:w.callSetDisabledState??vi}]}}static#e=this.\u0275fac=function(U){return new(U||A)};static#t=this.\u0275mod=b.oAB({type:A});static#n=this.\u0275inj=b.cJS({imports:[Li]})}return A})();const Wo=["modal"];function po(A,N){if(1&A){const w=b.EpF();b.TgZ(0,"div",13)(1,"div",14)(2,"button",9),b.NdJ("click",function(){b.CHM(w);const Y=b.oxw();return b.KtG(Y.setTask(0))}),b._uU(3),b.qZA(),b.TgZ(4,"button",9),b.NdJ("click",function(){b.CHM(w);const Y=b.oxw();return b.KtG(Y.previousTask())}),b._uU(5),b.qZA()(),b.TgZ(6,"h3"),b._uU(7),b.qZA(),b.TgZ(8,"div",15)(9,"button",9),b.NdJ("click",function(){b.CHM(w);const Y=b.oxw();return b.KtG(Y.nextTask())}),b._uU(10),b.qZA(),b.TgZ(11,"button",9),b.NdJ("click",function(){b.CHM(w);const Y=b.oxw();return b.KtG(Y.setTask(Y.room.tasks.length-1))}),b._uU(12),b.qZA()()()}if(2&A){const w=b.oxw();b.xp6(2),b.Q6J("disabled",0==w.room.currentTask),b.xp6(),b.Oqu("<<"),b.xp6(),b.Q6J("disabled",0==w.room.currentTask),b.xp6(),b.Oqu("<"),b.xp6(2),b.Oqu(w.room.tasks[w.room.currentTask].name),b.xp6(2),b.Q6J("disabled",w.room.currentTask==w.room.tasks.length-1),b.xp6(),b.Oqu(">"),b.xp6(),b.Q6J("disabled",w.room.currentTask==w.room.tasks.length-1),b.xp6(),b.Oqu(">>")}}function ui(A,N){1&A&&(b.TgZ(0,"h3",16),b._uU(1,"N\xe3o h\xe1 tasks no momento"),b.qZA())}function lu(A,N){if(1&A){const w=b.EpF();b.TgZ(0,"div",17)(1,"span",18),b._uU(2),b.qZA(),b.TgZ(3,"button",19),b.NdJ("click",function(){const Ke=b.CHM(w).$implicit,rt=b.oxw();return b.KtG(rt.deleteTask(Ke))}),b._uU(4,"delete"),b.qZA()()}if(2&A){const w=N.$implicit;b.xp6(2),b.Oqu(w.name)}}function bo(A,N){1&A&&(b.TgZ(0,"h3",20),b._uU(1,"N\xe3o h\xe1 tasks no momento"),b.qZA())}let Qr=(()=>{class A{constructor(w){this.roomService=w,this.createTaskForm=new lr("")}nextTask(){this.room.nextTask(),this.roomService.updateRoom(this.room)}previousTask(){this.room.previousTask(),this.roomService.updateRoom(this.room)}setTask(w){this.room.setTaskIndex(w),this.roomService.updateRoom(this.room)}createTask(w){this.room.createTask(w),this.createTaskForm.reset(),this.roomService.updateRoom(this.room)}deleteTask(w){this.room.deleteTask(w),this.roomService.updateRoom(this.room)}static#e=this.\u0275fac=function(U){return new(U||A)(b.Y36(he))};static#t=this.\u0275cmp=b.Xpm({type:A,selectors:[["app-tasks"]],viewQuery:function(U,Y){if(1&U&&b.Gf(Wo,5),2&U){let Ke;b.iGM(Ke=b.CRH())&&(Y.modal=Ke.first)}},inputs:{room:"room"},decls:16,vars:6,consts:[[1,"update-tasks"],["main-button","",1,"update-tasks-btn",3,"click"],["class","tasks-control",4,"ngIf","ngIfElse"],["noTasks",""],["modalTitle","Tasks"],["modal",""],[1,"create-task"],["main-input","","type","text","placeholder","Digite o nome da task",3,"formControl","keyup"],["name",""],["main-button","",3,"disabled","click"],[1,"task__list"],["class","task",4,"ngFor","ngForOf"],["class","no-tasks-modal",4,"ngIf"],[1,"tasks-control"],[1,"tasks-control__previous"],[1,"tasks-control__next"],[1,"no-tasks"],[1,"task"],[1,"task__name"],["main-button","","theme","error",3,"click"],[1,"no-tasks-modal"]],template:function(U,Y){if(1&U){const Ke=b.EpF();b.TgZ(0,"div",0)(1,"button",1),b.NdJ("click",function(){b.CHM(Ke);const wt=b.MAs(7);return b.KtG(wt.open())}),b._uU(2,"Atualizar tasks"),b.qZA()(),b.YNc(3,po,13,9,"div",2)(4,ui,2,0,"ng-template",null,3,b.W1O),b.TgZ(6,"app-modal",4,5)(8,"div",6)(9,"input",7,8),b.NdJ("keyup",function(){return 0}),b.qZA(),b.TgZ(11,"button",9),b.NdJ("click",function(){b.CHM(Ke);const wt=b.MAs(10);return Y.createTask(wt.value),b.KtG(wt.focus())}),b._uU(12,"Criar"),b.qZA()(),b.TgZ(13,"div",10),b.YNc(14,lu,5,1,"div",11)(15,bo,2,0,"h3",12),b.qZA()()}if(2&U){const Ke=b.MAs(5),rt=b.MAs(10);b.xp6(3),b.Q6J("ngIf",Y.room.tasks[Y.room.currentTask])("ngIfElse",Ke),b.xp6(6),b.Q6J("formControl",Y.createTaskForm),b.xp6(2),b.Q6J("disabled",!rt.value),b.xp6(3),b.Q6J("ngForOf",Y.room.tasks),b.xp6(),b.Q6J("ngIf",0==Y.room.tasks.length)}},dependencies:[C.sg,C.O5,Kt,Bt.j,nt,Rt,me,jo],styles:[".update-tasks[_ngcontent-%COMP%]{margin-bottom:1rem;display:flex;flex-direction:row-reverse}.tasks-control[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;background-color:transparent;border:2px solid #9e9e9e;color:#2e2e2e;border-radius:4px}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%], .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%]{display:flex;gap:5px}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background:transparent}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled), .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled){color:#2e2e2e}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled):hover, .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled):hover{background:#bdbdbd;color:#2e2e2e}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled):active, .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled):active{background:#424242;color:#c2c2c2}.no-tasks[_ngcontent-%COMP%]{border:1px solid gray;border-radius:4px;line-height:3.25rem;text-align:center}app-modal[_ngcontent-%COMP%]   .create-task[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:16px}app-modal[_ngcontent-%COMP%]   .create-task[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]{border:1px solid gray;border-radius:4px}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2n){background-color:#f5f5f5}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-radius:4px 4px 0 0}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-radius:0 0 4px 4px}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   .no-tasks-modal[_ngcontent-%COMP%]{line-height:3.25rem;text-align:center}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]   .task__name[_ngcontent-%COMP%]{max-width:50vw;min-width:180px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;margin-right:1rem}"]})}return A})();class Gi{constructor(N,w=!1,U){this.value=N,this.isFliped=w,this.creator=U}toggleFlip(){this.isFliped=!this.isFliped}}var ir=$(6825);const ei=[(0,ir.X$)("hover",[(0,ir.SB)("true",(0,ir.oB)({transform:"translateY(-20%)"})),(0,ir.SB)("false",(0,ir.oB)({transform:"translateY(0)"})),(0,ir.eR)("true <=> false",(0,ir.jt)("200ms ease-in-out"))])],qo=[(0,ir.X$)("flipAnimation",[(0,ir.SB)("true",(0,ir.oB)({transform:"rotateY(179deg)"})),(0,ir.SB)("false",(0,ir.oB)({transform:"rotateY(0)"})),(0,ir.eR)("true => false",(0,ir.jt)("500ms ease-out")),(0,ir.eR)("false => true",(0,ir.jt)("500ms ease-in"))])];function go(A,N){if(1&A&&(b.TgZ(0,"span",5),b._uU(1),b.qZA()),2&A){const w=b.oxw();b.xp6(),b.Oqu(w.card.creator)}}function eo(A,N){if(1&A&&(b.TgZ(0,"span",5),b._uU(1),b.qZA()),2&A){const w=b.oxw();b.xp6(),b.Oqu(w.card.creator)}}let us=(()=>{class A{constructor(){this.isHovered=!1}changeIsHovered(w){this.isHovered="mouseenter"===w.type}static#e=this.\u0275fac=function(U){return new(U||A)};static#t=this.\u0275cmp=b.Xpm({type:A,selectors:[["app-card"]],hostBindings:function(U,Y){1&U&&b.NdJ("mouseenter",function(rt){return Y.changeIsHovered(rt)})("mouseleave",function(rt){return Y.changeIsHovered(rt)})},inputs:{card:"card"},decls:7,vars:4,consts:[[1,"card"],[1,"card-side","card-front"],["class","creator-name",4,"ngIf"],[1,"card-value"],[1,"card-side","card-back"],[1,"creator-name"]],template:function(U,Y){1&U&&(b.TgZ(0,"div",0)(1,"div",1),b.YNc(2,go,2,1,"span",2),b.TgZ(3,"span",3),b._uU(4),b.qZA()(),b.TgZ(5,"div",4),b.YNc(6,eo,2,1,"span",2),b.qZA()()),2&U&&(b.Q6J("@flipAnimation",Y.card.isFliped),b.xp6(2),b.Q6J("ngIf",Y.card.creator),b.xp6(2),b.Oqu(Y.card.value),b.xp6(2),b.Q6J("ngIf",Y.card.creator))},dependencies:[C.O5],styles:[".card[_ngcontent-%COMP%]{position:relative;width:4.5rem;height:6rem;background-color:#f8f9fa;border-radius:8px;box-shadow:0 0 10px #00000026;transform-style:preserve-3d;transform:transform 1s}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;transform:rotateY(0);border:2px solid #ff1a40;color:#ff1a40}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]:hover{background:#ff1a40;color:#fff;transition:.2s ease-out}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{font-size:2rem}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .creator-name[_ngcontent-%COMP%]{position:absolute;top:0;left:.5rem;font-size:.75rem;max-width:3.5rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:700}.card[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]{transform:rotateY(-180deg);background:#ff1a40}.card[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]   .back-image[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:8px;background-size:cover;background-position:center}.card[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]   .creator-name[_ngcontent-%COMP%]{position:absolute;top:0;left:.5rem;font-size:.75rem;max-width:3.5rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:700;color:#fff}.card[_ngcontent-%COMP%]   .card-side[_ngcontent-%COMP%]{backface-visibility:hidden;width:100%;height:100%;border-radius:8px;position:absolute;-webkit-user-select:none;user-select:none}"],data:{animation:qo}})}return A})(),cu=(()=>{class A{constructor(){this.label=b.qHZ.required(),this.currentValue="",this.onChoose=new b.vpe}emit(w){this.currentValue=w,this.onChoose.emit(w)}getTheme(w){return this.currentValue===w}static#e=this.\u0275fac=function(U){return new(U||A)};static#t=this.\u0275cmp=b.Xpm({type:A,selectors:[["app-modal-vote-item"]],inputs:{label:[b.lbL.SignalBased,"label"]},outputs:{onChoose:"onChoose"},decls:11,vars:17,consts:[[1,"vote-button"],["main-button","",3,"click"]],template:function(U,Y){1&U&&(b.TgZ(0,"h4"),b._uU(1),b.qZA(),b.TgZ(2,"div",0)(3,"button",1),b.NdJ("click",function(){return Y.emit("1")}),b._uU(4," F\xe1cil "),b.qZA(),b.TgZ(5,"button",1),b.NdJ("click",function(){return Y.emit("3")}),b._uU(6," M\xe9dio "),b.qZA(),b.TgZ(7,"button",1),b.NdJ("click",function(){return Y.emit("13")}),b._uU(8," Dif\xedcil "),b.qZA(),b.TgZ(9,"button",1),b.NdJ("click",function(){return Y.emit("?")}),b._uU(10," ? "),b.qZA()()),2&U&&(b.xp6(),b.hij("",Y.label(),":"),b.xp6(2),b.ekj("main-button--primary",Y.getTheme("1"))("main-button--accent",!Y.getTheme("1")),b.xp6(2),b.ekj("main-button--primary",Y.getTheme("3"))("main-button--accent",!Y.getTheme("3")),b.xp6(2),b.ekj("main-button--primary",Y.getTheme("13"))("main-button--accent",!Y.getTheme("13")),b.xp6(2),b.ekj("main-button--primary",Y.getTheme("?"))("main-button--accent",!Y.getTheme("?")))},dependencies:[Bt.j],styles:[".vote-button[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;gap:.25rem}"]})}return A})();function du(A,N){if(1&A&&b._UZ(0,"app-card",16),2&A){const w=N.$implicit,U=b.oxw();b.Q6J("card",U.mapVote(w))}}function zu(A,N){if(1&A){const w=b.EpF();b.TgZ(0,"app-card",19,20),b.NdJ("click",function(){const Ke=b.CHM(w).$implicit,rt=b.oxw(2);return b.KtG(rt.vote(Ke.value))}),b.qZA()}if(2&A){const w=N.$implicit,U=b.MAs(1);b.Q6J("@hover",U.isHovered)("card",w)}}function Ro(A,N){if(1&A&&(b.TgZ(0,"div",17),b.YNc(1,zu,2,2,"app-card",18),b.qZA()),2&A){const w=b.oxw();b.xp6(),b.Q6J("ngForOf",w.cards)}}let zi=(()=>{class A{get task(){return this.room.tasks[this.room.currentTask]}get flippedVotes(){return this.task.votes.some(w=>!w.hidden)}getVoteByComplexity(w,U){const Y=(w+U)/2;return Y<=3?String(Y):Y<5?"3":Y<8?"5":Y<13?"8":"13"}constructor(w,U){this.userAuth=w,this.roomService=U,this.cards=[new Gi(1),new Gi(2),new Gi(3),new Gi(5),new Gi(8),new Gi(13),new Gi(21),new Gi("?"),new Gi("\u2615\ufe0e")],this.complexity=(0,b.tdS)("?"),this.understandment=(0,b.tdS)("?"),this.compute=(0,b.Flj)(()=>{const Y=this.complexity(),Ke=this.understandment();return[Y,Ke].some(rt=>"?"==rt)?"?":this.getVoteByComplexity(Number(Y),Number(Ke))})}mapVote(w){return new Gi(w.value,w.hidden,w.userName)}vote(w){this.flippedVotes||this.userAuth.currentUser.then(U=>this.task.vote(new ye(U?.uid,U?.displayName,w))).finally(()=>this.roomService.updateRoom(this.room))}showVotes(){this.flippedVotes||(this.task.showVotes(),this.roomService.updateRoom(this.room))}revote(){this.task.revote(),this.roomService.updateRoom(this.room)}getResult(){return this.task.getResult()}static#e=this.\u0275fac=function(U){return new(U||A)(b.Y36(Oe.zQ),b.Y36(he))};static#t=this.\u0275cmp=b.Xpm({type:A,selectors:[["app-votes"]],inputs:{room:"room"},decls:23,vars:8,consts:[[1,"actions"],["main-button","",1,"current-votes__btn-flip",3,"disabled","click"],["main-button","","theme","accent",1,"current-votes__btn-revote",3,"disabled","click"],["main-button","","theme","accent",3,"disabled","click"],[1,"votes-result"],[1,"current-votes-list"],[3,"card",4,"ngFor","ngForOf"],["class","votes",4,"ngIf"],["modalTitle","Vota\xe7\xe3o"],["modal",""],[1,"modal-content"],[1,"modal-votes"],["label","Entendimento",3,"onChoose"],["label","Complexidade",3,"onChoose"],[1,"modal-result"],["main-button","","theme","primary",3,"disabled","click"],[3,"card"],[1,"votes"],["class","card",3,"card","click",4,"ngFor","ngForOf"],[1,"card",3,"card","click"],["cardComponent",""]],template:function(U,Y){if(1&U){const Ke=b.EpF();b.TgZ(0,"div",0)(1,"button",1),b.NdJ("click",function(){return Y.showVotes()}),b._uU(2," Virar cartas "),b.qZA(),b.TgZ(3,"button",2),b.NdJ("click",function(){return Y.revote()}),b._uU(4," Revotar "),b.qZA(),b.TgZ(5,"button",3),b.NdJ("click",function(){b.CHM(Ke);const wt=b.MAs(14);return b.KtG(wt.open())}),b._uU(6," Votar "),b.qZA()(),b.TgZ(7,"div",4)(8,"h1"),b._uU(9),b.qZA()(),b.TgZ(10,"div",5),b.YNc(11,du,1,1,"app-card",6),b.qZA(),b.YNc(12,Ro,2,1,"div",7),b.TgZ(13,"app-modal",8,9)(15,"div",10)(16,"div",11)(17,"app-modal-vote-item",12),b.NdJ("onChoose",function(wt){return Y.complexity.set(wt)}),b.qZA(),b.TgZ(18,"app-modal-vote-item",13),b.NdJ("onChoose",function(wt){return Y.understandment.set(wt)}),b.qZA()(),b.TgZ(19,"h2",14),b._uU(20),b.qZA()(),b.TgZ(21,"button",15),b.NdJ("click",function(){b.CHM(Ke);const wt=b.MAs(14);return Y.vote(Y.compute()),b.KtG(wt.close())}),b._uU(22," Votar "),b.qZA()()}2&U&&(b.xp6(),b.Q6J("disabled",0==Y.task.votes.length||Y.flippedVotes),b.xp6(2),b.Q6J("disabled",0==Y.task.votes.length||!Y.flippedVotes),b.xp6(2),b.Q6J("disabled",Y.flippedVotes),b.xp6(4),b.Oqu(Y.flippedVotes?Y.getResult():"-"),b.xp6(2),b.Q6J("ngForOf",Y.task.votes),b.xp6(),b.Q6J("ngIf",!Y.flippedVotes),b.xp6(8),b.Oqu(Y.compute()),b.xp6(),b.Q6J("disabled",Y.flippedVotes))},dependencies:[C.sg,C.O5,us,Kt,Bt.j,cu],styles:[".actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem;margin-bottom:.5rem}.votes-result[_ngcontent-%COMP%]{border:3px solid #9e9e9e;color:#2e2e2e;border-radius:4px;text-align:center;font-size:3rem;line-height:8rem}.current-votes-list[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:.5rem 0;overflow-y:hidden;overflow-x:auto}.votes[_ngcontent-%COMP%]{display:flex;position:absolute;bottom:0;left:50%;transform:translate(-50%);overflow-x:show;gap:.5rem;padding:2rem .5rem .5rem;max-width:100vw;overflow-x:auto;overflow-y:visible}.votes[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{cursor:pointer}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;align-items:center;justify-content:center}.modal-content[_ngcontent-%COMP%]   .modal-result[_ngcontent-%COMP%]{width:5rem;height:3rem;line-height:2.6rem;text-align:center;border:2px solid black}"],data:{animation:[ei]}})}return A})();function Wu(A,N){if(1&A&&b._UZ(0,"app-votes",3),2&A){const w=b.oxw(2);b.Q6J("room",w.room)}}function hu(A,N){if(1&A&&(b.TgZ(0,"div",1)(1,"h1",2),b._uU(2),b.qZA(),b._UZ(3,"app-tasks",3),b.YNc(4,Wu,1,1,"app-votes",4),b.qZA()),2&A){const w=b.oxw();b.xp6(2),b.Oqu(w.room.name),b.xp6(),b.Q6J("room",w.room),b.xp6(),b.Q6J("ngIf",w.room.tasks[w.room.currentTask])}}const P=[{path:"rooms",component:Ze,title:"Salas"},{path:"room/:id",component:(()=>{class A extends Fe{constructor(w,U){super(),this.activatedRoute=w,this.roomService=U,this.roomId=this.activatedRoute.snapshot.paramMap.get("id")}ngOnInit(){this.startListenerRoom()}startListenerRoom(){this.toDestroy(this.roomService.listenerRoom(this.roomId).subscribe(w=>{this.room?this.room?.updateValues(w):this.startRoom(w)}))}startRoom(w){this.room=new Pe(w.name,w.creator,w.tasks.map(U=>new pe(U.name,U.votes.map(Y=>new ye(Y.userId,Y.userName,Y.value,Y.hidden)))),w.currentTask,w.id)}static#e=this.\u0275fac=function(U){return new(U||A)(b.Y36(W.gz),b.Y36(he))};static#t=this.\u0275cmp=b.Xpm({type:A,selectors:[["app-room"]],features:[b.qOj],decls:1,vars:1,consts:[["class","current-room",4,"ngIf"],[1,"current-room"],[1,"room-name"],[3,"room"],[3,"room",4,"ngIf"]],template:function(U,Y){1&U&&b.YNc(0,hu,5,3,"div",0),2&U&&b.Q6J("ngIf",Y.room)},dependencies:[C.O5,Qr,zi],styles:[".current-room[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin:0 auto;max-width:1260px;width:100%}.current-room[_ngcontent-%COMP%]   .room-name[_ngcontent-%COMP%]{font-size:3rem;text-align:center}"]})}return A})(),title:(()=>{class A{constructor(w){this.roomService=w}resolve(w){const U=w.paramMap.get("id");return this.roomService.listenerRoom(U).pipe((0,le.U)(Y=>Y.name))}static#e=this.\u0275fac=function(U){return new(U||A)(b.LFG(he))};static#t=this.\u0275prov=b.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})()},{path:"**",redirectTo:"rooms"}];let K=(()=>{class A{static#e=this.\u0275fac=function(U){return new(U||A)};static#t=this.\u0275mod=b.oAB({type:A});static#n=this.\u0275inj=b.cJS({imports:[W.Bz.forChild(P),W.Bz]})}return A})();var L=$(6208);let z=(()=>{class A{static#e=this.\u0275fac=function(U){return new(U||A)};static#t=this.\u0275mod=b.oAB({type:A});static#n=this.\u0275inj=b.cJS({imports:[K,C.ez,L.m,Ls,yn]})}return A})()},4176:(Mt,Ue,$)=>{$.d(Ue,{j:()=>W});var C=$(9212);let W=(()=>{class le{constructor(ye){this.element=ye,this.theme="primary"}ngOnInit(){this.setStyle()}setStyle(){this.element.nativeElement.classList.add("main-button"),this.element.nativeElement.classList.add(`main-button--${this.theme}`)}static#e=this.\u0275fac=function(pe){return new(pe||le)(C.Y36(C.SBq))};static#t=this.\u0275dir=C.lG2({type:le,selectors:[["button","main-button",""]],inputs:{theme:"theme"}})}return le})()},6208:(Mt,Ue,$)=>{$.d(Ue,{m:()=>le});var C=$(6814),W=$(9212);let le=(()=>{class se{static#e=this.\u0275fac=function(Pe){return new(Pe||se)};static#t=this.\u0275mod=W.oAB({type:se});static#n=this.\u0275inj=W.cJS({imports:[C.ez]})}return se})()},7258:(Mt,Ue,$)=>{var C=$(6593),W=$(9212),le=$(8878);function pe(v,f){const m=!f?.manualCleanup;m&&!f?.injector&&(0,W.gHi)(pe);const D=m?f?.injector?.get(W.ktI)??(0,W.f3M)(W.ktI):null;let k;k=(0,W.tdS)(f?.requireSync?{kind:0}:{kind:1,value:f?.initialValue});const G=v.subscribe({next:te=>k.set({kind:1,value:te}),error:te=>{if(f?.rejectErrors)throw te;k.set({kind:2,error:te})}});return D?.onDestroy(G.unsubscribe.bind(G)),(0,W.Flj)(()=>{const te=k();switch(te.kind){case 1:return te.value;case 2:throw te.error;case 0:throw new W.vHH(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var Pe=$(4694),b=$(6814),Fe=$(4176);function fe(v,f){if(1&v){const m=W.EpF();W.TgZ(0,"div",3)(1,"div",4),W._UZ(2,"img",5),W.TgZ(3,"span",6),W._uU(4),W.qZA()(),W.TgZ(5,"div",7)(6,"button",8),W.NdJ("click",function(){W.CHM(m);const k=W.oxw();return W.KtG(k.logout())}),W._uU(7,"Sair"),W.qZA()()()}if(2&v){const m=W.oxw();W.xp6(2),W.Q6J("src",m.user().photoURL,W.LSH),W.xp6(2),W.Oqu(m.user().displayName)}}let he=(()=>{class v{constructor(m,D,k){this.auth=m,this.router=D,this.ngZone=k,this.user=pe(m.user)}ngOnInit(){}logout(){this.auth.signOut().then(()=>this.ngZone.run(()=>this.router.navigate([""])))}static#e=this.\u0275fac=function(D){return new(D||v)(W.Y36(Pe.zQ),W.Y36(le.F0),W.Y36(W.R0b))};static#t=this.\u0275cmp=W.Xpm({type:v,selectors:[["app-header"]],decls:4,vars:2,consts:[[1,"header"],[1,"header-title",3,"routerLink"],["class","user-content",4,"ngIf"],[1,"user-content"],[1,"user"],["alt","user image",1,"user-image",3,"src"],[1,"user-name"],[1,"logout"],["main-button","","theme","error",1,"logout-btn",3,"click"]],template:function(D,k){1&D&&(W.TgZ(0,"div",0)(1,"h4",1),W._uU(2,"Planning Poker"),W.qZA(),W.YNc(3,fe,8,2,"div",2),W.qZA()),2&D&&(W.xp6(),W.Q6J("routerLink",""),W.xp6(2),W.Q6J("ngIf",k.user()))},dependencies:[b.O5,le.rH,Fe.j],styles:[".header[_ngcontent-%COMP%]{background:#ff1a40;width:100vw;height:120px;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;padding:0 2rem}.header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{color:#fff;flex-basis:100%;text-align:center;cursor:pointer}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;flex-basis:100%}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{flex-basis:100%;width:100%;display:flex;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{margin:0 .5rem;color:#fff}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]{width:3rem;height:3rem;border-radius:50%}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{flex-basis:100%;display:flex;justify-content:center}@media (min-width: 641px){.header[_ngcontent-%COMP%]{height:100px}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{flex-basis:content}}@media (min-width: 961px){.header[_ngcontent-%COMP%]{height:80px}.header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]{flex-basis:content}}"]})}return v})(),Oe=(()=>{class v{static#e=this.\u0275fac=function(D){return new(D||v)};static#t=this.\u0275cmp=W.Xpm({type:v,selectors:[["app-layout"]],decls:3,vars:0,consts:[[1,"page"]],template:function(D,k){1&D&&(W._UZ(0,"app-header"),W.TgZ(1,"div",0),W._UZ(2,"router-outlet"),W.qZA())},dependencies:[le.lC,he],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .page[_ngcontent-%COMP%]{overflow:hidden;flex:1 1 auto;padding:16px;height:calc(100vh - 120px);position:relative}@media (min-width: 641px){[_nghost-%COMP%]   .page[_ngcontent-%COMP%]{height:calc(100vh - 100px)}}@media (min-width: 961px){[_nghost-%COMP%]   .page[_ngcontent-%COMP%]{height:calc(100vh - 80px)}}"]})}return v})();var st=$(7142);let Xe=(()=>{class v{constructor(m,D,k){this.auth=m,this.router=D,this.ngZone=k}login(){this.auth.signInWithPopup(this.googleAuthProvider()).then(()=>this.ngZone.run(()=>this.router.navigate(["rooms"])))}googleAuthProvider(){return new st.Z.auth.GoogleAuthProvider}static#e=this.\u0275fac=function(D){return new(D||v)(W.Y36(Pe.zQ),W.Y36(le.F0),W.Y36(W.R0b))};static#t=this.\u0275cmp=W.Xpm({type:v,selectors:[["app-login"]],decls:2,vars:0,consts:[["main-button","","theme","error",1,"login-btn","login-btn--google",3,"click"]],template:function(D,k){1&D&&(W.TgZ(0,"button",0),W.NdJ("click",function(){return k.login()}),W._uU(1,"Entrar pelo google"),W.qZA())},dependencies:[Fe.j],styles:[".login-btn[_ngcontent-%COMP%]{position:fixed;height:60px;width:320px;font-size:1.5rem;line-height:1.75rem;top:50%;left:50%;transform:translate(-50%,-50%)}"]})}return v})();var gt=$(7398);const Et=[{path:"",component:Oe,canMatch:[(v,f)=>(0,W.f3M)(Pe.zQ).user.pipe((0,gt.U)(m=>!!m))],children:[{path:"",loadChildren:()=>Promise.resolve().then($.bind($,5737)).then(v=>v.PagesModule)}]},{path:"",component:Xe},{path:"**",redirectTo:""}];let dt=(()=>{class v{static#e=this.\u0275fac=function(D){return new(D||v)};static#t=this.\u0275mod=W.oAB({type:v});static#n=this.\u0275inj=W.cJS({imports:[le.Bz.forRoot(Et,{preloadingStrategy:le.wm,useHash:!0,anchorScrolling:"enabled"}),le.Bz]})}return v})(),Kt=(()=>{class v{static#e=this.\u0275fac=function(D){return new(D||v)};static#t=this.\u0275cmp=W.Xpm({type:v,selectors:[["app-root"]],decls:1,vars:0,template:function(D,k){1&D&&W._UZ(0,"router-outlet")},dependencies:[le.lC]})}return v})();var Bt=$(6208);let nt=(()=>{class v{static#e=this.\u0275fac=function(D){return new(D||v)};static#t=this.\u0275mod=W.oAB({type:v});static#n=this.\u0275inj=W.cJS({imports:[b.ez,le.Bz,Bt.m]})}return v})();var ce=$(7217),ze=$(6533),ht=$(8326),Ge=$(5592),Ze=$(2096),$e=$(2459),ue=$(6321),Ve=$(9360),an=$(8251),Un=$(4664),Rn=$(3106),zt=$(5861),rn=$(534),Ee=$(9058),be=$(4537);const Se="firebasestorage.googleapis.com",De="storageBucket";class Dt extends Ee.ZR{constructor(f,m,D=0){super(It(f),`Firebase Storage: ${m} (${It(f)})`),this.status_=D,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dt.prototype)}get status(){return this.status_}set status(f){this.status_=f}_codeEquals(f){return It(f)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(f){this.customData.serverResponse=f,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Rt=function(v){return v.UNKNOWN="unknown",v.OBJECT_NOT_FOUND="object-not-found",v.BUCKET_NOT_FOUND="bucket-not-found",v.PROJECT_NOT_FOUND="project-not-found",v.QUOTA_EXCEEDED="quota-exceeded",v.UNAUTHENTICATED="unauthenticated",v.UNAUTHORIZED="unauthorized",v.UNAUTHORIZED_APP="unauthorized-app",v.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",v.INVALID_CHECKSUM="invalid-checksum",v.CANCELED="canceled",v.INVALID_EVENT_NAME="invalid-event-name",v.INVALID_URL="invalid-url",v.INVALID_DEFAULT_BUCKET="invalid-default-bucket",v.NO_DEFAULT_BUCKET="no-default-bucket",v.CANNOT_SLICE_BLOB="cannot-slice-blob",v.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",v.NO_DOWNLOAD_URL="no-download-url",v.INVALID_ARGUMENT="invalid-argument",v.INVALID_ARGUMENT_COUNT="invalid-argument-count",v.APP_DELETED="app-deleted",v.INVALID_ROOT_OPERATION="invalid-root-operation",v.INVALID_FORMAT="invalid-format",v.INTERNAL_ERROR="internal-error",v.UNSUPPORTED_ENVIRONMENT="unsupported-environment",v}(Rt||{});function It(v){return"storage/"+v}function jt(){return new Dt(Rt.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Vt(){return new Dt(Rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ft(){return new Dt(Rt.CANCELED,"User canceled the upload/download.")}function Fn(){return new Dt(Rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Yt(v){return new Dt(Rt.INVALID_ARGUMENT,v)}function Ai(){return new Dt(Rt.APP_DELETED,"The Firebase app was deleted.")}function En(v){return new Dt(Rt.INVALID_ROOT_OPERATION,"The operation '"+v+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Fr(v,f){return new Dt(Rt.INVALID_FORMAT,"String does not match format '"+v+"': "+f)}function Bn(v){throw new Dt(Rt.INTERNAL_ERROR,"Internal error: "+v)}class Ln{constructor(f,m){this.bucket=f,this.path_=m}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const f=encodeURIComponent;return"/b/"+f(this.bucket)+"/o/"+f(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(f,m){let D;try{D=Ln.makeFromUrl(f,m)}catch{return new Ln(f,"")}if(""===D.path)return D;throw function fr(v){return new Dt(Rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+v+"'.")}(f)}static makeFromUrl(f,m){let D=null;const k="([A-Za-z0-9.\\-_]+)",oe=new RegExp("^gs://"+k+"(/(.*))?$","i");function Ae(cr){cr.path_=decodeURIComponent(cr.path)}const mt=m.replace(/[.]/g,"\\."),_r=[{regex:oe,indices:{bucket:1,path:3},postModify:function G(cr){"/"===cr.path.charAt(cr.path.length-1)&&(cr.path_=cr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${mt}/v[A-Za-z0-9_]+/b/${k}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Ae},{regex:new RegExp(`^https?://${m===Se?"(?:storage.googleapis.com|storage.cloud.google.com)":m}/${k}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Ae}];for(let cr=0;cr<_r.length;cr++){const _o=_r[cr],Jr=_o.regex.exec(f);if(Jr){let ni=Jr[_o.indices.path];ni||(ni=""),D=new Ln(Jr[_o.indices.bucket],ni),_o.postModify(D);break}}if(null==D)throw function Sr(v){return new Dt(Rt.INVALID_URL,"Invalid URL '"+v+"'.")}(f);return D}}class Fo{constructor(f){this.promise_=Promise.reject(f)}getPromise(){return this.promise_}cancel(f=!1){}}function Yn(v){return"string"==typeof v||v instanceof String}function yi(v){return qr()&&v instanceof Blob}function qr(){return typeof Blob<"u"}function Oi(v,f,m,D){if(D<f)throw Yt(`Invalid value for '${v}'. Expected ${f} or greater.`);if(D>m)throw Yt(`Invalid value for '${v}'. Expected ${m} or less.`)}function zn(v,f,m){let D=f;return null==m&&(D=`https://${f}`),`${m}://${D}/v0${v}`}function rr(v){const f=encodeURIComponent;let m="?";for(const D in v)v.hasOwnProperty(D)&&(m=m+(f(D)+"=")+f(v[D])+"&");return m=m.slice(0,-1),m}var Br=function(v){return v[v.NO_ERROR=0]="NO_ERROR",v[v.NETWORK_ERROR=1]="NETWORK_ERROR",v[v.ABORT=2]="ABORT",v}(Br||{});function en(v,f){const m=v>=500&&v<600,k=-1!==[408,429].indexOf(v),G=-1!==f.indexOf(v);return m||k||G}class Pn{constructor(f,m,D,k,G,te,oe,_e,Ae,tt,mt,pt=!0){this.url_=f,this.method_=m,this.headers_=D,this.body_=k,this.successCodes_=G,this.additionalRetryCodes_=te,this.callback_=oe,this.errorCallback_=_e,this.timeout_=Ae,this.progressCallback_=tt,this.connectionFactory_=mt,this.retry=pt,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Qt,xt)=>{this.resolve_=Qt,this.reject_=xt,this.start_()})}start_(){const m=(D,k)=>{const G=this.resolve_,te=this.reject_,oe=k.connection;if(k.wasSuccessCode)try{const _e=this.callback_(oe,oe.getResponse());!function _t(v){return void 0!==v}(_e)?G():G(_e)}catch(_e){te(_e)}else if(null!==oe){const _e=jt();_e.serverResponse=oe.getErrorText(),te(this.errorCallback_?this.errorCallback_(oe,_e):_e)}else te(k.canceled?this.appDelete_?Ai():ft():Vt())};this.canceled_?m(0,new ss(!1,null,!0)):this.backoffId_=function qn(v,f,m){let D=1,k=null,G=null,te=!1,oe=0;function _e(){return 2===oe}let Ae=!1;function tt(...jn){Ae||(Ae=!0,f.apply(null,jn))}function mt(jn){k=setTimeout(()=>{k=null,v(Qt,_e())},jn)}function pt(){G&&clearTimeout(G)}function Qt(jn,...Nr){if(Ae)return void pt();if(jn)return pt(),void tt.call(null,jn,...Nr);if(_e()||te)return pt(),void tt.call(null,jn,...Nr);let _r;D<64&&(D*=2),1===oe?(oe=2,_r=0):_r=1e3*(D+Math.random()),mt(_r)}let xt=!1;function Xt(jn){xt||(xt=!0,pt(),!Ae&&(null!==k?(jn||(oe=2),clearTimeout(k),mt(0)):jn||(oe=1)))}return mt(0),G=setTimeout(()=>{te=!0,Xt(!0)},m),Xt}((D,k)=>{if(k)return void D(!1,new ss(!1,null,!0));const G=this.connectionFactory_();this.pendingConnection_=G;const te=oe=>{null!==this.progressCallback_&&this.progressCallback_(oe.loaded,oe.lengthComputable?oe.total:-1)};null!==this.progressCallback_&&G.addUploadProgressListener(te),G.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&G.removeUploadProgressListener(te),this.pendingConnection_=null;const oe=G.getErrorCode()===Br.NO_ERROR,_e=G.getStatus();if(!oe||en(_e,this.additionalRetryCodes_)&&this.retry){const tt=G.getErrorCode()===Br.ABORT;return void D(!1,new ss(!1,null,tt))}const Ae=-1!==this.successCodes_.indexOf(_e);D(!0,new ss(Ae,G))})},m,this.timeout_)}getPromise(){return this.promise_}cancel(f){this.canceled_=!0,this.appDelete_=f||!1,null!==this.backoffId_&&function Qi(v){v(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ss{constructor(f,m,D){this.wasSuccessCode=f,this.connection=m,this.canceled=!!D}}function et(...v){const f=function we(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==f){const m=new f;for(let D=0;D<v.length;D++)m.append(v[D]);return m.getBlob()}if(qr())return new Blob(v);throw new Dt(Rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Wt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Hn{constructor(f,m){this.data=f,this.contentType=m||null}}function fn(v,f){switch(v){case Wt.RAW:return new Hn(Mn(f));case Wt.BASE64:case Wt.BASE64URL:return new Hn(Ws(v,f));case Wt.DATA_URL:return new Hn(function Ua(v){const f=new Eo(v);return f.base64?Ws(Wt.BASE64,f.rest):function Or(v){let f;try{f=decodeURIComponent(v)}catch{throw Fr(Wt.DATA_URL,"Malformed data URL.")}return Mn(f)}(f.rest)}(f),function ya(v){return new Eo(v).contentType}(f))}throw jt()}function Mn(v){const f=[];for(let m=0;m<v.length;m++){let D=v.charCodeAt(m);D<=127?f.push(D):D<=2047?f.push(192|D>>6,128|63&D):55296==(64512&D)?m<v.length-1&&56320==(64512&v.charCodeAt(m+1))?(D=65536|(1023&D)<<10|1023&v.charCodeAt(++m),f.push(240|D>>18,128|D>>12&63,128|D>>6&63,128|63&D)):f.push(239,191,189):56320==(64512&D)?f.push(239,191,189):f.push(224|D>>12,128|D>>6&63,128|63&D)}return new Uint8Array(f)}function Ws(v,f){switch(v){case Wt.BASE64:{const k=-1!==f.indexOf("-"),G=-1!==f.indexOf("_");if(k||G)throw Fr(v,"Invalid character '"+(k?"-":"_")+"' found: is it base64url encoded?");break}case Wt.BASE64URL:{const k=-1!==f.indexOf("+"),G=-1!==f.indexOf("/");if(k||G)throw Fr(v,"Invalid character '"+(k?"+":"/")+"' found: is it base64 encoded?");f=f.replace(/-/g,"+").replace(/_/g,"/");break}}let m;try{m=function hn(v){if(typeof atob>"u")throw function An(v){return new Dt(Rt.UNSUPPORTED_ENVIRONMENT,`${v} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(v)}(f)}catch(k){throw k.message.includes("polyfill")?k:Fr(v,"Invalid character found")}const D=new Uint8Array(m.length);for(let k=0;k<m.length;k++)D[k]=m.charCodeAt(k);return D}class Eo{constructor(f){this.base64=!1,this.contentType=null;const m=f.match(/^data:([^,]+)?,/);if(null===m)throw Fr(Wt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const D=m[1]||null;null!=D&&(this.base64=function ii(v,f){return v.length>=f.length&&v.substring(v.length-f.length)===f}(D,";base64"),this.contentType=this.base64?D.substring(0,D.length-7):D),this.rest=f.substring(f.indexOf(",")+1)}}class Ut{constructor(f,m){let D=0,k="";yi(f)?(this.data_=f,D=f.size,k=f.type):f instanceof ArrayBuffer?(m?this.data_=new Uint8Array(f):(this.data_=new Uint8Array(f.byteLength),this.data_.set(new Uint8Array(f))),D=this.data_.length):f instanceof Uint8Array&&(m?this.data_=f:(this.data_=new Uint8Array(f.length),this.data_.set(f)),D=f.length),this.size_=D,this.type_=k}size(){return this.size_}type(){return this.type_}slice(f,m){if(yi(this.data_)){const k=function Nt(v,f,m){return v.webkitSlice?v.webkitSlice(f,m):v.mozSlice?v.mozSlice(f,m):v.slice?v.slice(f,m):null}(this.data_,f,m);return null===k?null:new Ut(k)}{const D=new Uint8Array(this.data_.buffer,f,m-f);return new Ut(D,!0)}}static getBlob(...f){if(qr()){const m=f.map(D=>D instanceof Ut?D.data_:D);return new Ut(et.apply(null,m))}{const m=f.map(te=>Yn(te)?fn(Wt.RAW,te).data:te.data_);let D=0;m.forEach(te=>{D+=te.byteLength});const k=new Uint8Array(D);let G=0;return m.forEach(te=>{for(let oe=0;oe<te.length;oe++)k[G++]=te[oe]}),new Ut(k,!0)}}uploadData(){return this.data_}}function Yi(v){let f;try{f=JSON.parse(v)}catch{return null}return function wn(v){return"object"==typeof v&&!Array.isArray(v)}(f)?f:null}function Qe(v){const f=v.lastIndexOf("/",v.length-2);return-1===f?v:v.slice(f+1)}function ot(v,f){return f}class $t{constructor(f,m,D,k){this.server=f,this.local=m||f,this.writable=!!D,this.xform=k||ot}}let ln=null;function Jn(){if(ln)return ln;const v=[];v.push(new $t("bucket")),v.push(new $t("generation")),v.push(new $t("metageneration")),v.push(new $t("name","fullPath",!0));const m=new $t("name");m.xform=function f(G,te){return function _n(v){return!Yn(v)||v.length<2?v:Qe(v)}(te)},v.push(m);const k=new $t("size");return k.xform=function D(G,te){return void 0!==te?Number(te):te},v.push(k),v.push(new $t("timeCreated")),v.push(new $t("updated")),v.push(new $t("md5Hash",null,!0)),v.push(new $t("cacheControl",null,!0)),v.push(new $t("contentDisposition",null,!0)),v.push(new $t("contentEncoding",null,!0)),v.push(new $t("contentLanguage",null,!0)),v.push(new $t("contentType",null,!0)),v.push(new $t("metadata","customMetadata",!0)),ln=v,ln}function Bi(v,f,m){const D=Yi(f);return null===D?null:function Xr(v,f,m){const D={type:"file"},k=m.length;for(let G=0;G<k;G++){const te=m[G];D[te.local]=te.xform(D,f[te.server])}return function yr(v,f){Object.defineProperty(v,"ref",{get:function m(){const G=new Ln(v.bucket,v.fullPath);return f._makeStorageReference(G)}})}(D,v),D}(v,D,m)}function io(v,f){const m={},D=f.length;for(let k=0;k<D;k++){const G=f[k];G.writable&&(m[G.server]=v[G.local])}return JSON.stringify(m)}const gr="prefixes",Lo="items";class vi{constructor(f,m,D,k){this.url=f,this.method=m,this.handler=D,this.timeout=k,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function wr(v){if(!v)throw jt()}function Si(v,f){return function m(D,k){const G=Bi(v,k,f);return wr(null!==G),G}}function si(v){return function f(m,D){let k;return k=401===m.getStatus()?m.getErrorText().includes("Firebase App Check token is invalid")?function Ar(){return new Dt(Rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function hr(){return new Dt(Rt.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===m.getStatus()?function Dn(v){return new Dt(Rt.QUOTA_EXCEEDED,"Quota for bucket '"+v+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(v.bucket):403===m.getStatus()?function Sn(v){return new Dt(Rt.UNAUTHORIZED,"User does not have permission to access '"+v+"'.")}(v.path):D,k.status=m.getStatus(),k.serverResponse=D.serverResponse,k}}function oo(v){const f=si(v);return function m(D,k){let G=f(D,k);return 404===D.getStatus()&&(G=function Ht(v){return new Dt(Rt.OBJECT_NOT_FOUND,"Object '"+v+"' does not exist.")}(v.path)),G.serverResponse=k.serverResponse,G}}function gn(v,f,m){const k=zn(f.fullServerUrl(),v.host,v._protocol),te=v.maxOperationRetryTime,oe=new vi(k,"GET",Si(v,m),te);return oe.errorHandler=oo(f),oe}function bi(v,f,m,D,k){const G={};G.prefix=f.isRoot?"":f.path+"/",m&&m.length>0&&(G.delimiter=m),D&&(G.pageToken=D),k&&(G.maxResults=k);const oe=zn(f.bucketOnlyServerUrl(),v.host,v._protocol),Ae=v.maxOperationRetryTime,tt=new vi(oe,"GET",function so(v,f){return function m(D,k){const G=function Ji(v,f,m){const D=Yi(m);return null===D?null:function On(v,f,m){const D={prefixes:[],items:[],nextPageToken:m.nextPageToken};if(m[gr])for(const k of m[gr]){const G=k.replace(/\/$/,""),te=v._makeStorageReference(new Ln(f,G));D.prefixes.push(te)}if(m[Lo])for(const k of m[Lo]){const G=v._makeStorageReference(new Ln(f,k.name));D.items.push(G)}return D}(v,f,D)}(v,f,k);return wr(null!==G),G}}(v,f.bucket),Ae);return tt.urlParams=G,tt.errorHandler=si(f),tt}function su(v,f,m){const D=Object.assign({},m);return D.fullPath=v.path,D.size=f.size(),D.contentType||(D.contentType=function oi(v,f){return v&&v.contentType||f&&f.type()||"application/octet-stream"}(null,f)),D}class Io{constructor(f,m,D,k){this.current=f,this.total=m,this.finalized=!!D,this.metadata=k||null}}function ou(v,f){let m=null;try{m=v.getResponseHeader("X-Goog-Upload-Status")}catch{wr(!1)}return wr(!!m&&-1!==(f||["active"]).indexOf(m)),m}const sa={STATE_CHANGED:"state_changed"},ai={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Vo(v){switch(v){case"running":case"pausing":case"canceling":return ai.RUNNING;case"paused":return ai.PAUSED;case"success":return ai.SUCCESS;case"canceled":return ai.CANCELED;default:return ai.ERROR}}class Uo{constructor(f,m,D){if(function Ui(v){return"function"==typeof v}(f)||null!=m||null!=D)this.next=f,this.error=m??void 0,this.complete=D??void 0;else{const G=f;this.next=G.next,this.error=G.error,this.complete=G.complete}}}function Ri(v){return(...f)=>{Promise.resolve().then(()=>v(...f))}}let oa=null;class ks{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Br.NO_ERROR,this.sendPromise_=new Promise(f=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Br.ABORT,f()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Br.NETWORK_ERROR,f()}),this.xhr_.addEventListener("load",()=>{f()})})}send(f,m,D,k){if(this.sent_)throw Bn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(m,f,!0),void 0!==k)for(const G in k)k.hasOwnProperty(G)&&this.xhr_.setRequestHeader(G,k[G].toString());return void 0!==D?this.xhr_.send(D):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(f){return this.xhr_.getResponseHeader(f)}addUploadProgressListener(f){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",f)}removeUploadProgressListener(f){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",f)}}class qs extends ks{initXhr(){this.xhr_.responseType="text"}}function lr(){return oa?oa():new qs}class ao{constructor(f,m,D=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=f,this._blob=m,this._metadata=D,this._mappings=Jn(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=k=>{if(this._request=void 0,this._chunkMultiplier=1,k._codeEquals(Rt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const G=this.isExponentialBackoffExpired();if(en(k.status,[])){if(!G)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();k=Vt()}this._error=k,this._transition("error")}},this._metadataErrorHandler=k=>{this._request=void 0,k._codeEquals(Rt.CANCELED)?this.completeTransitions_():(this._error=k,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((k,G)=>{this._resolve=k,this._reject=G,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const f=this._transferred;return m=>this._updateProgress(f+m)}_shouldDoResumable(f){return f.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(f){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([m,D])=>{switch(this._state){case"running":f(m,D);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((f,m)=>{const D=function Il(v,f,m,D,k){const G=f.bucketOnlyServerUrl(),te=su(f,D,k),oe={name:te.fullPath},_e=zn(G,v.host,v._protocol),tt={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${D.size()}`,"X-Goog-Upload-Header-Content-Type":te.contentType,"Content-Type":"application/json; charset=utf-8"},mt=io(te,m),xt=new vi(_e,"POST",function Qt(Xt){let jn;ou(Xt);try{jn=Xt.getResponseHeader("X-Goog-Upload-URL")}catch{wr(!1)}return wr(Yn(jn)),jn},v.maxUploadRetryTime);return xt.urlParams=oe,xt.headers=tt,xt.body=mt,xt.errorHandler=si(f),xt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),k=this._ref.storage._makeRequest(D,lr,f,m);this._request=k,k.getPromise().then(G=>{this._request=void 0,this._uploadUrl=G,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const f=this._uploadUrl;this._resolveToken((m,D)=>{const k=function Is(v,f,m,D){const _e=new vi(m,"POST",function G(Ae){const tt=ou(Ae,["active","final"]);let mt=null;try{mt=Ae.getResponseHeader("X-Goog-Upload-Size-Received")}catch{wr(!1)}mt||wr(!1);const pt=Number(mt);return wr(!isNaN(pt)),new Io(pt,D.size(),"final"===tt)},v.maxUploadRetryTime);return _e.headers={"X-Goog-Upload-Command":"query"},_e.errorHandler=si(f),_e}(this._ref.storage,this._ref._location,f,this._blob),G=this._ref.storage._makeRequest(k,lr,m,D);this._request=G,G.getPromise().then(te=>{this._request=void 0,this._updateProgress(te.current),this._needToFetchStatus=!1,te.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const f=262144*this._chunkMultiplier,m=new Io(this._transferred,this._blob.size()),D=this._uploadUrl;this._resolveToken((k,G)=>{let te;try{te=function ws(v,f,m,D,k,G,te,oe){const _e=new Io(0,0);if(te?(_e.current=te.current,_e.total=te.total):(_e.current=0,_e.total=D.size()),D.size()!==_e.total)throw function pr(){return new Dt(Rt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const Ae=_e.total-_e.current;let tt=Ae;k>0&&(tt=Math.min(tt,k));const mt=_e.current;let Qt="";Qt=0===tt?"finalize":Ae===tt?"upload, finalize":"upload";const xt={"X-Goog-Upload-Command":Qt,"X-Goog-Upload-Offset":`${_e.current}`},Xt=D.slice(mt,mt+tt);if(null===Xt)throw Fn();const _r=new vi(m,"POST",function jn(cr,_o){const Jr=ou(cr,["active","final"]),mi=_e.current+tt,ni=D.size();let is;return is="final"===Jr?Si(f,G)(cr,_o):null,new Io(mi,ni,"final"===Jr,is)},f.maxUploadRetryTime);return _r.headers=xt,_r.body=Xt.uploadData(),_r.progressCallback=oe||null,_r.errorHandler=si(v),_r}(this._ref._location,this._ref.storage,D,this._blob,f,this._mappings,m,this._makeProgressCallback())}catch(_e){return this._error=_e,void this._transition("error")}const oe=this._ref.storage._makeRequest(te,lr,k,G,!1);this._request=oe,oe.getPromise().then(_e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_e.current),_e.finalized?(this._metadata=_e.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((f,m)=>{const D=gn(this._ref.storage,this._ref._location,this._mappings),k=this._ref.storage._makeRequest(D,lr,f,m);this._request=k,k.getPromise().then(G=>{this._request=void 0,this._metadata=G,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((f,m)=>{const D=function Au(v,f,m,D,k){const G=f.bucketOnlyServerUrl(),te={"X-Goog-Upload-Protocol":"multipart"},_e=function oe(){let _r="";for(let cr=0;cr<2;cr++)_r+=Math.random().toString().slice(2);return _r}();te["Content-Type"]="multipart/related; boundary="+_e;const Ae=su(f,D,k),tt=io(Ae,m),Qt=Ut.getBlob("--"+_e+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+tt+"\r\n--"+_e+"\r\nContent-Type: "+Ae.contentType+"\r\n\r\n",D,"\r\n--"+_e+"--");if(null===Qt)throw Fn();const xt={name:Ae.fullPath},Xt=zn(G,v.host,v._protocol),Nr=v.maxUploadRetryTime,xr=new vi(Xt,"POST",Si(v,m),Nr);return xr.urlParams=xt,xr.headers=te,xr.body=Qt.uploadData(),xr.errorHandler=si(f),xr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),k=this._ref.storage._makeRequest(D,lr,f,m);this._request=k,k.getPromise().then(G=>{this._request=void 0,this._metadata=G,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(f){const m=this._transferred;this._transferred=f,this._transferred!==m&&this._notifyObservers()}_transition(f){if(this._state!==f)switch(f){case"canceling":case"pausing":this._state=f,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const m="paused"===this._state;this._state=f,m&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=f,this._notifyObservers();break;case"canceled":this._error=ft(),this._state=f,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const f=Vo(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:f,metadata:this._metadata,task:this,ref:this._ref}}on(f,m,D,k){const G=new Uo(m||void 0,D||void 0,k||void 0);return this._addObserver(G),()=>{this._removeObserver(G)}}then(f,m){return this._promise.then(f,m)}catch(f){return this.then(null,f)}_addObserver(f){this._observers.push(f),this._notifyObserver(f)}_removeObserver(f){const m=this._observers.indexOf(f);-1!==m&&this._observers.splice(m,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(m=>{this._notifyObserver(m)})}_finishPromise(){if(void 0!==this._resolve){let f=!0;switch(Vo(this._state)){case ai.SUCCESS:Ri(this._resolve.bind(null,this.snapshot))();break;case ai.CANCELED:case ai.ERROR:Ri(this._reject.bind(null,this._error))();break;default:f=!1}f&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(f){switch(Vo(this._state)){case ai.RUNNING:case ai.PAUSED:f.next&&Ri(f.next.bind(f,this.snapshot))();break;case ai.SUCCESS:f.complete&&Ri(f.complete.bind(f))();break;default:f.error&&Ri(f.error.bind(f,this._error))()}}resume(){const f="paused"===this._state||"pausing"===this._state;return f&&this._transition("running"),f}pause(){const f="running"===this._state;return f&&this._transition("pausing"),f}cancel(){const f="running"===this._state||"pausing"===this._state;return f&&this._transition("canceling"),f}}class Ks{constructor(f,m){this._service=f,this._location=m instanceof Ln?m:Ln.makeFromUrl(m,f.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(f,m){return new Ks(f,m)}get root(){const f=new Ln(this._location.bucket,"");return this._newRef(this._service,f)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Qe(this._location.path)}get storage(){return this._service}get parent(){const f=function Be(v){if(0===v.length)return null;const f=v.lastIndexOf("/");return-1===f?"":v.slice(0,f)}(this._location.path);if(null===f)return null;const m=new Ln(this._location.bucket,f);return new Ks(this._service,m)}_throwIfRoot(f){if(""===this._location.path)throw En(f)}}function $n(v,f,m){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,zt.Z)(function*(v,f,m){const k=yield Xi(v,{pageToken:m});f.prefixes.push(...k.prefixes),f.items.push(...k.items),null!=k.nextPageToken&&(yield $n(v,f,k.nextPageToken))})).apply(this,arguments)}function Xi(v,f){null!=f&&"number"==typeof f.maxResults&&Oi("options.maxResults",1,1e3,f.maxResults);const m=f||{},D=bi(v.storage,v._location,"/",m.pageToken,m.maxResults);return v.storage.makeRequestWithTokens(D,lr)}function Bo(v){v._throwIfRoot("getDownloadURL");const f=function Es(v,f,m){const k=zn(f.fullServerUrl(),v.host,v._protocol),te=v.maxOperationRetryTime,oe=new vi(k,"GET",function tn(v,f){return function m(D,k){const G=Bi(v,k,f);return wr(null!==G),function va(v,f,m,D){const k=Yi(f);if(null===k||!Yn(k.downloadTokens))return null;const G=k.downloadTokens;if(0===G.length)return null;const te=encodeURIComponent;return G.split(",").map(Ae=>{const mt=v.fullPath;return zn("/b/"+te(v.bucket)+"/o/"+te(mt),m,D)+rr({alt:"media",token:Ae})})[0]}(G,k,v.host,v._protocol)}}(v,m),te);return oe.errorHandler=oo(f),oe}(v.storage,v._location,Jn());return v.storage.makeRequestWithTokens(f,lr).then(m=>{if(null===m)throw function nr(){return new Dt(Rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return m})}function Gn(v,f){const m=function Re(v,f){const m=f.split("/").filter(D=>D.length>0).join("/");return 0===v.length?m:v+"/"+m}(v._location.path,f),D=new Ln(v._location.bucket,m);return new Ks(v.storage,D)}function uo(v,f){if(v instanceof Co){const m=v;if(null==m._bucket)throw function Wr(){return new Dt(Rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+De+"' property when initializing the app?")}();const D=new Ks(m,m._bucket);return null!=f?uo(D,f):D}return void 0!==f?Gn(v,f):v}function au(v,f){if(f&&function wa(v){return/^[A-Za-z]+:\/\//.test(v)}(f)){if(v instanceof Co)return function Ds(v,f){return new Ks(v,f)}(v,f);throw Yt("To use ref(service, url), the first argument must be a Storage instance.")}return uo(v,f)}function jo(v,f){const m=f?.[De];return null==m?null:Ln.makeFromBucketSpec(m,v)}class Co{constructor(f,m,D,k,G){this.app=f,this._authProvider=m,this._appCheckProvider=D,this._url=k,this._firebaseVersion=G,this._bucket=null,this._host=Se,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=k?Ln.makeFromBucketSpec(k,this._host):jo(this._host,this.app.options)}get host(){return this._host}set host(f){this._host=f,this._bucket=null!=this._url?Ln.makeFromBucketSpec(this._url,f):jo(f,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(f){Oi("time",0,Number.POSITIVE_INFINITY,f),this._maxUploadRetryTime=f}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(f){Oi("time",0,Number.POSITIVE_INFINITY,f),this._maxOperationRetryTime=f}_getAuthToken(){var f=this;return(0,zt.Z)(function*(){if(f._overrideAuthToken)return f._overrideAuthToken;const m=f._authProvider.getImmediate({optional:!0});if(m){const D=yield m.getToken();if(null!==D)return D.accessToken}return null})()}_getAppCheckToken(){var f=this;return(0,zt.Z)(function*(){const m=f._appCheckProvider.getImmediate({optional:!0});return m?(yield m.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(f=>f.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(f){return new Ks(this,f)}_makeRequest(f,m,D,k,G=!0){if(this._deleted)return new Fo(Ai());{const te=function re(v,f,m,D,k,G,te=!0){const oe=rr(v.urlParams),_e=v.url+oe,Ae=Object.assign({},v.headers);return function ne(v,f){f&&(v["X-Firebase-GMPID"]=f)}(Ae,f),function me(v,f){null!==f&&f.length>0&&(v.Authorization="Firebase "+f)}(Ae,m),function X(v,f){v["X-Firebase-Storage-Version"]="webjs/"+(f??"AppManager")}(Ae,G),function ee(v,f){null!==f&&(v["X-Firebase-AppCheck"]=f)}(Ae,D),new Pn(_e,v.method,Ae,v.body,v.successCodes,v.additionalRetryCodes,v.handler,v.errorHandler,v.timeout,v.progressCallback,k,te)}(f,this._appId,D,k,m,this._firebaseVersion,G);return this._requests.add(te),te.getPromise().then(()=>this._requests.delete(te),()=>this._requests.delete(te)),te}}makeRequestWithTokens(f,m){var D=this;return(0,zt.Z)(function*(){const[k,G]=yield Promise.all([D._getAuthToken(),D._getAppCheckToken()]);return D._makeRequest(f,m,k,G).getPromise()})()}}const Su="@firebase/storage";function $i(v,f){return au(v=(0,Ee.m9)(v),f)}function Ys(v,{instanceIdentifier:f}){const m=v.getProvider("app").getImmediate(),D=v.getProvider("auth-internal"),k=v.getProvider("app-check-internal");return new Co(m,D,k,f,rn.SDK_VERSION)}!function br(){(0,rn._registerComponent)(new be.wA("storage",Ys,"PUBLIC").setMultipleInstances(!0)),(0,rn.registerVersion)(Su,"0.12.4",""),(0,rn.registerVersion)(Su,"0.12.4","esm2017")}();class ki{constructor(f,m,D){this._delegate=f,this.task=m,this.ref=D}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ao{constructor(f,m){this._delegate=f,this._ref=m,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ki(this._delegate.snapshot,this,this._ref)}then(f,m){return this._delegate.then(D=>{if(f)return f(new ki(D,this,this._ref))},m)}on(f,m,D,k){let G;return m&&(G="function"==typeof m?te=>m(new ki(te,this,this._ref)):{next:m.next?te=>m.next(new ki(te,this,this._ref)):void 0,complete:m.complete||void 0,error:m.error||void 0}),this._delegate.on(f,G,D||void 0,k||void 0)}}class ts{constructor(f,m){this._delegate=f,this._service=m}get prefixes(){return this._delegate.prefixes.map(f=>new wi(f,this._service))}get items(){return this._delegate.items.map(f=>new wi(f,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class wi{constructor(f,m){this._delegate=f,this.storage=m}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(f){const m=function uu(v,f){return Gn(v,f)}(this._delegate,f);return new wi(m,this.storage)}get root(){return new wi(this._delegate.root,this.storage)}get parent(){const f=this._delegate.parent;return null==f?null:new wi(f,this.storage)}put(f,m){return this._throwIfRoot("put"),new Ao(function wl(v,f,m){return function Ia(v,f,m){return v._throwIfRoot("uploadBytesResumable"),new ao(v,new Ut(f),m)}(v=(0,Ee.m9)(v),f,m)}(this._delegate,f,m),this)}putString(f,m=Wt.RAW,D){this._throwIfRoot("putString");const k=fn(m,f),G=Object.assign({},D);return null==G.contentType&&null!=k.contentType&&(G.contentType=k.contentType),new Ao(new ao(this._delegate,new Ut(k.data,!0),G),this)}listAll(){return function Do(v){return function Hi(v){const f={prefixes:[],items:[]};return $n(v,f).then(()=>f)}(v=(0,Ee.m9)(v))}(this._delegate).then(f=>new ts(f,this.storage))}list(f){return function Ca(v,f){return Xi(v=(0,Ee.m9)(v),f)}(this._delegate,f||void 0).then(m=>new ts(m,this.storage))}getMetadata(){return function $o(v){return function Pi(v){v._throwIfRoot("getMetadata");const f=gn(v.storage,v._location,Jn());return v.storage.makeRequestWithTokens(f,lr)}(v=(0,Ee.m9)(v))}(this._delegate)}updateMetadata(f){return function Zs(v,f){return function es(v,f){v._throwIfRoot("updateMetadata");const m=function jr(v,f,m,D){const G=zn(f.fullServerUrl(),v.host,v._protocol),oe=io(m,D),Ae=v.maxOperationRetryTime,tt=new vi(G,"PATCH",Si(v,D),Ae);return tt.headers={"Content-Type":"application/json; charset=utf-8"},tt.body=oe,tt.errorHandler=oo(f),tt}(v.storage,v._location,f,Jn());return v.storage.makeRequestWithTokens(m,lr)}(v=(0,Ee.m9)(v),f)}(this._delegate,f)}getDownloadURL(){return function bu(v){return Bo(v=(0,Ee.m9)(v))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Go(v){return function To(v){v._throwIfRoot("deleteObject");const f=function Ea(v,f){const D=zn(f.fullServerUrl(),v.host,v._protocol),oe=new vi(D,"DELETE",function te(_e,Ae){},v.maxOperationRetryTime);return oe.successCodes=[200,204],oe.errorHandler=oo(f),oe}(v.storage,v._location);return v.storage.makeRequestWithTokens(f,lr)}(v=(0,Ee.m9)(v))}(this._delegate)}_throwIfRoot(f){if(""===this._delegate._location.path)throw En(f)}}class ua{constructor(f,m){this.app=f,this._delegate=m}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(f){if(Tn(f))throw Yt("ref() expected a child path but got a URL, use refFromURL instead.");return new wi($i(this._delegate,f),this)}refFromURL(f){if(!Tn(f))throw Yt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ln.makeFromUrl(f,this._delegate.host)}catch{throw Yt("refFromUrl() expected a valid full URL but got an invalid one.")}return new wi($i(this._delegate,f),this)}setMaxUploadRetryTime(f){this._delegate.maxUploadRetryTime=f}setMaxOperationRetryTime(f){this._delegate.maxOperationRetryTime=f}useEmulator(f,m,D={}){!function Nn(v,f,m,D={}){!function os(v,f,m,D={}){v.host=`${f}:${m}`,v._protocol="http";const{mockUserToken:k}=D;k&&(v._overrideAuthToken="string"==typeof k?k:(0,Ee.Sg)(k,v.app.options.projectId))}(v,f,m,D)}(this._delegate,f,m,D)}}function Tn(v){return/^[A-Za-z]+:\/\//.test(v)}function Xn(v,{instanceIdentifier:f}){const m=v.getProvider("app-compat").getImmediate(),D=v.getProvider("storage").getImmediate({identifier:f});return new ua(m,D)}function So(v){const f=function ns(v){return new Ge.y(f=>{const m=te=>f.next(te);m(v.snapshot);const G=v.on("state_changed",m);return v.then(te=>{m(te),f.complete()},te=>{m(v.snapshot),(te=>{f.error(te)})(te)}),function(){G()}}).pipe(function At(v,f=ue.z){return(0,Ve.e)((m,D)=>{let k=null,G=null,te=null;const oe=()=>{if(k){k.unsubscribe(),k=null;const Ae=G;G=null,D.next(Ae)}};function _e(){const Ae=te+v,tt=f.now();if(tt<Ae)return k=this.schedule(void 0,Ae-tt),void D.add(k);oe()}m.subscribe((0,an.x)(D,Ae=>{G=Ae,te=f.now(),k||(k=f.schedule(_e,v),D.add(k))},()=>{oe(),D.complete()},void 0,()=>{G=k=null}))})}(0))}(v);return{task:v,then:v.then.bind(v),catch:v.catch.bind(v),pause:v.pause.bind(v),cancel:v.cancel.bind(v),resume:v.resume.bind(v),snapshotChanges:()=>f,percentageChanges:()=>f.pipe((0,gt.U)(m=>m.bytesTransferred/m.totalBytes*100))}}function ar(v){return{getDownloadURL:()=>(0,Ze.of)(void 0).pipe(ht.fc,(0,Un.w)(()=>v.getDownloadURL()),ht.iC),getMetadata:()=>(0,Ze.of)(void 0).pipe(ht.fc,(0,Un.w)(()=>v.getMetadata()),ht.iC),delete:()=>(0,$e.D)(v.delete()),child:f=>ar(v.child(f)),updateMetadata:f=>(0,$e.D)(v.updateMetadata(f)),put:(f,m)=>So(v.put(f,m)),putString:(f,m,D)=>So(v.putString(f,m,D)),list:f=>(0,$e.D)(v.list(f)),listAll:()=>(0,$e.D)(v.listAll())}}!function Ti(v){const f={TaskState:ai,TaskEvent:sa,StringFormat:Wt,Storage:ua,Reference:wi};v.INTERNAL.registerComponent(new be.wA("storage-compat",Xn,"PUBLIC").setServiceProps(f).setMultipleInstances(!0)),v.registerVersion("@firebase/storage-compat","0.3.7")}(Rn.Z);const Fi=new W.OlP("angularfire2.storageBucket"),As=new W.OlP("angularfire2.storage.maxUploadRetryTime"),Cn=new W.OlP("angularfire2.storage.maxOperationRetryTime"),rs=new W.OlP("angularfire2.storage.use-emulator");let co=(()=>{class v{storage;constructor(m,D,k,G,te,oe,_e,Ae,tt,mt){const pt=(0,ce.on)(m,te,D);this.storage=(0,ce.cc)(`${pt.name}.storage.${k}`,"AngularFireStorage",pt.name,()=>{const Qt=te.runOutsideAngular(()=>pt.storage(k||void 0)),xt=tt;return xt&&Qt.useEmulator(...xt),_e&&Qt.setMaxUploadRetryTime(_e),Ae&&Qt.setMaxOperationRetryTime(Ae),Qt},[_e,Ae])}ref(m){return ar(this.storage.ref(m))}refFromURL(m){return ar(this.storage.refFromURL(m))}upload(m,D,k){return ar(this.storage.ref(m)).put(D,k)}static \u0275fac=function(D){return new(D||v)(W.LFG(ce.Dh),W.LFG(ce.xv,8),W.LFG(Fi,8),W.LFG(W.Lbi),W.LFG(W.R0b),W.LFG(ht.HU),W.LFG(As,8),W.LFG(Cn,8),W.LFG(rs,8),W.LFG(ht.Rf,8))};static \u0275prov=W.Yz7({token:v,factory:v.\u0275fac,providedIn:"any"})}return v})(),vr=(()=>{class v{static \u0275fac=function(D){return new(D||v)};static \u0275mod=W.oAB({type:v});static \u0275inj=W.cJS({})}return v})(),ho=(()=>{class v{constructor(){st.Z.registerVersion("angularfire",ht.q4.full,"gcs-compat")}static \u0275fac=function(D){return new(D||v)};static \u0275mod=W.oAB({type:v});static \u0275inj=W.cJS({providers:[co],imports:[vr]})}return v})();var zo=$(5737),Gt=$(6825);function ja(v){return new W.vHH(3e3,!1)}function rt(v){switch(v.length){case 0:return new Gt.ZN;case 1:return v[0];default:return new Gt.ZE(v)}}function wt(v,f,m=new Map,D=new Map){const k=[],G=[];let te=-1,oe=null;if(f.forEach(_e=>{const Ae=_e.get("offset"),tt=Ae==te,mt=tt&&oe||new Map;_e.forEach((pt,Qt)=>{let xt=Qt,Xt=pt;if("offset"!==Qt)switch(xt=v.normalizePropertyName(xt,k),Xt){case Gt.k1:Xt=m.get(Qt);break;case Gt.l3:Xt=D.get(Qt);break;default:Xt=v.normalizeStyleValue(Qt,xt,Xt,k)}mt.set(xt,Xt)}),tt||G.push(mt),oe=mt,te=Ae}),k.length)throw function hu(v){return new W.vHH(3502,!1)}();return G}function Vn(v,f,m,D){switch(f){case"start":v.onStart(()=>D(m&&cn(m,"start",v)));break;case"done":v.onDone(()=>D(m&&cn(m,"done",v)));break;case"destroy":v.onDestroy(()=>D(m&&cn(m,"destroy",v)))}}function cn(v,f,m){const G=mr(v.element,v.triggerName,v.fromState,v.toState,f||v.phaseName,m.totalTime??v.totalTime,!!m.disabled),te=v._data;return null!=te&&(G._data=te),G}function mr(v,f,m,D,k="",G=0,te){return{element:v,triggerName:f,fromState:m,toState:D,phaseName:k,totalTime:G,disabled:!!te}}function Lr(v,f,m){let D=v.get(f);return D||v.set(f,D=m),D}function ur(v){const f=v.indexOf(":");return[v.substring(1,f),v.slice(f+1)]}const ls=typeof document>"u"?null:document.documentElement;function Ss(v){const f=v.parentNode||v.host||null;return f===ls?null:f}let cs=null,la=!1;function Ql(v,f){for(;f;){if(f===v)return!0;f=Ss(f)}return!1}function qu(v,f,m){if(m)return Array.from(v.querySelectorAll(f));const D=v.querySelector(f);return D?[D]:[]}let Vs=(()=>{class v{validateStyleProperty(m){return function Da(v){cs||(cs=function Sc(){return typeof document<"u"?document.body:null}()||{},la=!!cs.style&&"WebkitAppearance"in cs.style);let f=!0;return cs.style&&!function bs(v){return"ebkit"==v.substring(1,6)}(v)&&(f=v in cs.style,!f&&la&&(f="Webkit"+v.charAt(0).toUpperCase()+v.slice(1)in cs.style)),f}(m)}matchesElement(m,D){return!1}containsElement(m,D){return Ql(m,D)}getParentElement(m){return Ss(m)}query(m,D,k){return qu(m,D,k)}computeStyle(m,D,k){return k||""}animate(m,D,k,G,te,oe=[],_e){return new Gt.ZN(k,G)}static#e=this.\u0275fac=function(D){return new(D||v)};static#t=this.\u0275prov=W.Yz7({token:v,factory:v.\u0275fac})}return v})(),Jl=(()=>{class v{static#e=this.NOOP=new Vs}return v})();class Ha{}const ds=1e3,Rs="ng-enter",Us="ng-leave",Ye="ng-trigger",li=".ng-trigger",Wi="ng-animating",Mi=".ng-animating";function vt(v){if("number"==typeof v)return v;const f=v.match(/^(-?[\.\d]+)(m?s)/);return!f||f.length<2?0:Jt(parseFloat(f[1]),f[2])}function Jt(v,f){return"s"===f?v*ds:v}function Aa(v,f,m){return v.hasOwnProperty("duration")?v:function Tt(v,f,m){let k,G=0,te="";if("string"==typeof v){const oe=v.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===oe)return f.push(ja()),{duration:0,delay:0,easing:""};k=Jt(parseFloat(oe[1]),oe[2]);const _e=oe[3];null!=_e&&(G=Jt(parseFloat(_e),oe[4]));const Ae=oe[5];Ae&&(te=Ae)}else k=v;if(!m){let oe=!1,_e=f.length;k<0&&(f.push(function Xs(){return new W.vHH(3100,!1)}()),oe=!0),G<0&&(f.push(function fo(){return new W.vHH(3101,!1)}()),oe=!0),oe&&f.splice(_e,0,ja())}return{duration:k,delay:G,easing:te}}(v,f,m)}function Tr(v,f,m){f.forEach((D,k)=>{const G=dn(k);m&&!m.has(k)&&m.set(k,v.style[G]),v.style[G]=D})}function Sa(v,f){f.forEach((m,D)=>{const k=dn(D);v.style[k]=""})}function Pu(v){return Array.isArray(v)?1==v.length?v[0]:(0,Gt.vP)(v):v}const $a=new RegExp("{{\\s*(.+?)\\s*}}","g");function Xl(v){let f=[];if("string"==typeof v){let m;for(;m=$a.exec(v);)f.push(m[1]);$a.lastIndex=0}return f}function Ko(v,f,m){const D=`${v}`,k=D.replace($a,(G,te)=>{let oe=f[te];return null==oe&&(m.push(function yn(v){return new W.vHH(3003,!1)}()),oe=""),oe.toString()});return k==D?v:k}const Ps=/-+([a-z0-9])/g;function dn(v){return v.replace(Ps,(...f)=>f[1].toUpperCase())}function sn(v,f,m){switch(f.type){case Gt.mo.Trigger:return v.visitTrigger(f,m);case Gt.mo.State:return v.visitState(f,m);case Gt.mo.Transition:return v.visitTransition(f,m);case Gt.mo.Sequence:return v.visitSequence(f,m);case Gt.mo.Group:return v.visitGroup(f,m);case Gt.mo.Animate:return v.visitAnimate(f,m);case Gt.mo.Keyframes:return v.visitKeyframes(f,m);case Gt.mo.Style:return v.visitStyle(f,m);case Gt.mo.Reference:return v.visitReference(f,m);case Gt.mo.AnimateChild:return v.visitAnimateChild(f,m);case Gt.mo.AnimateRef:return v.visitAnimateRef(f,m);case Gt.mo.Query:return v.visitQuery(f,m);case Gt.mo.Stagger:return v.visitStagger(f,m);default:throw function Wo(v){return new W.vHH(3004,!1)}()}}function Vr(v,f){return window.getComputedStyle(v)[f]}const Qu=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Ir extends Ha{normalizePropertyName(f,m){return dn(f)}normalizeStyleValue(f,m,D,k){let G="";const te=D.toString().trim();if(Qu.has(m)&&0!==D&&"0"!==D)if("number"==typeof D)G="px";else{const oe=D.match(/^[+-]?[\d\.]+([a-z]*)$/);oe&&0==oe[1].length&&k.push(function po(v,f){return new W.vHH(3005,!1)}())}return te+G}}const kn="*";const Mo=new Set(["true","1"]),ca=new Set(["false","0"]);function hs(v,f){const m=Mo.has(v)||ca.has(v),D=Mo.has(f)||ca.has(f);return(k,G)=>{let te=v==kn||v==k,oe=f==kn||f==G;return!te&&m&&"boolean"==typeof k&&(te=k?Mo.has(v):ca.has(v)),!oe&&D&&"boolean"==typeof G&&(oe=G?Mo.has(f):ca.has(f)),te&&oe}}const Tl=new RegExp("s*:selfs*,?","g");function fs(v,f,m,D){return new ec(v).build(f,m,D)}class ec{constructor(f){this._driver=f}build(f,m,D){const k=new Ga(m);return this._resetContextStyleTimingState(k),sn(this,Pu(f),k)}_resetContextStyleTimingState(f){f.currentQuerySelector="",f.collectedStyles=new Map,f.collectedStyles.set("",new Map),f.currentTime=0}visitTrigger(f,m){let D=m.queryCount=0,k=m.depCount=0;const G=[],te=[];return"@"==f.name.charAt(0)&&m.errors.push(function ui(){return new W.vHH(3006,!1)}()),f.definitions.forEach(oe=>{if(this._resetContextStyleTimingState(m),oe.type==Gt.mo.State){const _e=oe,Ae=_e.name;Ae.toString().split(/\s*,\s*/).forEach(tt=>{_e.name=tt,G.push(this.visitState(_e,m))}),_e.name=Ae}else if(oe.type==Gt.mo.Transition){const _e=this.visitTransition(oe,m);D+=_e.queryCount,k+=_e.depCount,te.push(_e)}else m.errors.push(function lu(){return new W.vHH(3007,!1)}())}),{type:Gt.mo.Trigger,name:f.name,states:G,transitions:te,queryCount:D,depCount:k,options:null}}visitState(f,m){const D=this.visitStyle(f.styles,m),k=f.options&&f.options.params||null;if(D.containsDynamicStyles){const G=new Set,te=k||{};D.styles.forEach(oe=>{oe instanceof Map&&oe.forEach(_e=>{Xl(_e).forEach(Ae=>{te.hasOwnProperty(Ae)||G.add(Ae)})})}),G.size&&m.errors.push(function bo(v,f){return new W.vHH(3008,!1)}(0,G.values()))}return{type:Gt.mo.State,name:f.name,style:D,options:k?{params:k}:null}}visitTransition(f,m){m.queryCount=0,m.depCount=0;const D=sn(this,Pu(f.animation),m),k=function Ju(v,f){const m=[];return"string"==typeof v?v.split(/\s*,\s*/).forEach(D=>function Po(v,f,m){if(":"==v[0]){const _e=function Rr(v,f){switch(v){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(m,D)=>parseFloat(D)>parseFloat(m);case":decrement":return(m,D)=>parseFloat(D)<parseFloat(m);default:return f.push(function zu(v){return new W.vHH(3016,!1)}()),"* => *"}}(v,m);if("function"==typeof _e)return void f.push(_e);v=_e}const D=v.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==D||D.length<4)return m.push(function du(v){return new W.vHH(3015,!1)}()),f;const k=D[1],G=D[2],te=D[3];f.push(hs(k,te)),"<"==G[0]&&(k!=kn||te!=kn)&&f.push(hs(te,k))}(D,m,f)):m.push(v),m}(f.expr,m.errors);return{type:Gt.mo.Transition,matchers:k,animation:D,queryCount:m.queryCount,depCount:m.depCount,options:gs(f.options)}}visitSequence(f,m){return{type:Gt.mo.Sequence,steps:f.steps.map(D=>sn(this,D,m)),options:gs(f.options)}}visitGroup(f,m){const D=m.currentTime;let k=0;const G=f.steps.map(te=>{m.currentTime=D;const oe=sn(this,te,m);return k=Math.max(k,m.currentTime),oe});return m.currentTime=k,{type:Gt.mo.Group,steps:G,options:gs(f.options)}}visitAnimate(f,m){const D=function Zo(v,f){if(v.hasOwnProperty("duration"))return v;if("number"==typeof v)return tc(Aa(v,f).duration,0,"");const m=v;if(m.split(/\s+/).some(G=>"{"==G.charAt(0)&&"{"==G.charAt(1))){const G=tc(0,0,"");return G.dynamic=!0,G.strValue=m,G}const k=Aa(m,f);return tc(k.duration,k.delay,k.easing)}(f.timings,m.errors);m.currentAnimateTimings=D;let k,G=f.styles?f.styles:(0,Gt.oB)({});if(G.type==Gt.mo.Keyframes)k=this.visitKeyframes(G,m);else{let te=f.styles,oe=!1;if(!te){oe=!0;const Ae={};D.easing&&(Ae.easing=D.easing),te=(0,Gt.oB)(Ae)}m.currentTime+=D.duration+D.delay;const _e=this.visitStyle(te,m);_e.isEmptyStep=oe,k=_e}return m.currentAnimateTimings=null,{type:Gt.mo.Animate,timings:D,style:k,options:null}}visitStyle(f,m){const D=this._makeStyleAst(f,m);return this._validateStyleAst(D,m),D}_makeStyleAst(f,m){const D=[],k=Array.isArray(f.styles)?f.styles:[f.styles];for(let oe of k)"string"==typeof oe?oe===Gt.l3?D.push(oe):m.errors.push(new W.vHH(3002,!1)):D.push(new Map(Object.entries(oe)));let G=!1,te=null;return D.forEach(oe=>{if(oe instanceof Map&&(oe.has("easing")&&(te=oe.get("easing"),oe.delete("easing")),!G))for(let _e of oe.values())if(_e.toString().indexOf("{{")>=0){G=!0;break}}),{type:Gt.mo.Style,styles:D,easing:te,offset:f.offset,containsDynamicStyles:G,options:null}}_validateStyleAst(f,m){const D=m.currentAnimateTimings;let k=m.currentTime,G=m.currentTime;D&&G>0&&(G-=D.duration+D.delay),f.styles.forEach(te=>{"string"!=typeof te&&te.forEach((oe,_e)=>{const Ae=m.collectedStyles.get(m.currentQuerySelector),tt=Ae.get(_e);let mt=!0;tt&&(G!=k&&G>=tt.startTime&&k<=tt.endTime&&(m.errors.push(function ir(v,f,m,D,k){return new W.vHH(3010,!1)}()),mt=!1),G=tt.startTime),mt&&Ae.set(_e,{startTime:G,endTime:k}),m.options&&function Ku(v,f,m){const D=f.params||{},k=Xl(v);k.length&&k.forEach(G=>{D.hasOwnProperty(G)||m.push(function Ls(v){return new W.vHH(3001,!1)}())})}(oe,m.options,m.errors)})})}visitKeyframes(f,m){const D={type:Gt.mo.Keyframes,styles:[],options:null};if(!m.currentAnimateTimings)return m.errors.push(function ei(){return new W.vHH(3011,!1)}()),D;let G=0;const te=[];let oe=!1,_e=!1,Ae=0;const tt=f.steps.map(Nr=>{const xr=this._makeStyleAst(Nr,m);let _r=null!=xr.offset?xr.offset:function xe(v){if("string"==typeof v)return null;let f=null;if(Array.isArray(v))v.forEach(m=>{if(m instanceof Map&&m.has("offset")){const D=m;f=parseFloat(D.get("offset")),D.delete("offset")}});else if(v instanceof Map&&v.has("offset")){const m=v;f=parseFloat(m.get("offset")),m.delete("offset")}return f}(xr.styles),cr=0;return null!=_r&&(G++,cr=xr.offset=_r),_e=_e||cr<0||cr>1,oe=oe||cr<Ae,Ae=cr,te.push(cr),xr});_e&&m.errors.push(function qo(){return new W.vHH(3012,!1)}()),oe&&m.errors.push(function go(){return new W.vHH(3200,!1)}());const mt=f.steps.length;let pt=0;G>0&&G<mt?m.errors.push(function eo(){return new W.vHH(3202,!1)}()):0==G&&(pt=1/(mt-1));const Qt=mt-1,xt=m.currentTime,Xt=m.currentAnimateTimings,jn=Xt.duration;return tt.forEach((Nr,xr)=>{const _r=pt>0?xr==Qt?1:pt*xr:te[xr],cr=_r*jn;m.currentTime=xt+Xt.delay+cr,Xt.duration=cr,this._validateStyleAst(Nr,m),Nr.offset=_r,D.styles.push(Nr)}),D}visitReference(f,m){return{type:Gt.mo.Reference,animation:sn(this,Pu(f.animation),m),options:gs(f.options)}}visitAnimateChild(f,m){return m.depCount++,{type:Gt.mo.AnimateChild,options:gs(f.options)}}visitAnimateRef(f,m){return{type:Gt.mo.AnimateRef,animation:this.visitReference(f.animation,m),options:gs(f.options)}}visitQuery(f,m){const D=m.currentQuerySelector,k=f.options||{};m.queryCount++,m.currentQuery=f;const[G,te]=function ps(v){const f=!!v.split(/\s*,\s*/).find(m=>":self"==m);return f&&(v=v.replace(Tl,"")),v=v.replace(/@\*/g,li).replace(/@\w+/g,m=>li+"-"+m.slice(1)).replace(/:animating/g,Mi),[v,f]}(f.selector);m.currentQuerySelector=D.length?D+" "+G:G,Lr(m.collectedStyles,m.currentQuerySelector,new Map);const oe=sn(this,Pu(f.animation),m);return m.currentQuery=null,m.currentQuerySelector=D,{type:Gt.mo.Query,selector:G,limit:k.limit||0,optional:!!k.optional,includeSelf:te,animation:oe,originalSelector:f.selector,options:gs(f.options)}}visitStagger(f,m){m.currentQuery||m.errors.push(function us(){return new W.vHH(3013,!1)}());const D="full"===f.timings?{duration:0,delay:0,easing:"full"}:Aa(f.timings,m.errors,!0);return{type:Gt.mo.Stagger,animation:sn(this,Pu(f.animation),m),timings:D,options:null}}}class Ga{constructor(f){this.errors=f,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function gs(v){return v?(v={...v}).params&&(v.params=function Bs(v){return v?{...v}:null}(v.params)):v={},v}function tc(v,f,m){return{duration:v,delay:f,easing:m}}function Mu(v,f,m,D,k,G,te=null,oe=!1){return{type:1,element:v,keyframes:f,preStyleProps:m,postStyleProps:D,duration:k,delay:G,totalTime:k+G,easing:te,subTimeline:oe}}class I{constructor(){this._map=new Map}get(f){return this._map.get(f)||[]}append(f,m){let D=this._map.get(f);D||this._map.set(f,D=[]),D.push(...m)}has(f){return this._map.has(f)}clear(){this._map.clear()}}const x=new RegExp(":enter","g"),J=new RegExp(":leave","g");function de(v,f,m,D,k,G=new Map,te=new Map,oe,_e,Ae=[]){return(new Le).buildKeyframes(v,f,m,D,k,G,te,oe,_e,Ae)}class Le{buildKeyframes(f,m,D,k,G,te,oe,_e,Ae,tt=[]){Ae=Ae||new I;const mt=new Ct(f,m,Ae,k,G,tt,[]);mt.options=_e;const pt=_e.delay?vt(_e.delay):0;mt.currentTimeline.delayNextStep(pt),mt.currentTimeline.setStyles([te],null,mt.errors,_e),sn(this,D,mt);const Qt=mt.timelines.filter(xt=>xt.containsAnimation());if(Qt.length&&oe.size){let xt;for(let Xt=Qt.length-1;Xt>=0;Xt--){const jn=Qt[Xt];if(jn.element===m){xt=jn;break}}xt&&!xt.allowOnlyTimelineStyles()&&xt.setStyles([oe],null,mt.errors,_e)}return Qt.length?Qt.map(xt=>xt.buildKeyframes()):[Mu(m,[],[],[],0,pt,"",!1)]}visitTrigger(f,m){}visitState(f,m){}visitTransition(f,m){}visitAnimateChild(f,m){const D=m.subInstructions.get(m.element);if(D){const k=m.createSubContext(f.options),G=m.currentTimeline.currentTime,te=this._visitSubInstructions(D,k,k.options);G!=te&&m.transformIntoNewTimeline(te)}m.previousNode=f}visitAnimateRef(f,m){const D=m.createSubContext(f.options);D.transformIntoNewTimeline(),this._applyAnimationRefDelays([f.options,f.animation.options],m,D),this.visitReference(f.animation,D),m.transformIntoNewTimeline(D.currentTimeline.currentTime),m.previousNode=f}_applyAnimationRefDelays(f,m,D){for(const k of f){const G=k?.delay;if(G){const te="number"==typeof G?G:vt(Ko(G,k?.params??{},m.errors));D.delayNextStep(te)}}}_visitSubInstructions(f,m,D){let G=m.currentTimeline.currentTime;const te=null!=D.duration?vt(D.duration):null,oe=null!=D.delay?vt(D.delay):null;return 0!==te&&f.forEach(_e=>{const Ae=m.appendInstructionToTimeline(_e,te,oe);G=Math.max(G,Ae.duration+Ae.delay)}),G}visitReference(f,m){m.updateOptions(f.options,!0),sn(this,f.animation,m),m.previousNode=f}visitSequence(f,m){const D=m.subContextCount;let k=m;const G=f.options;if(G&&(G.params||G.delay)&&(k=m.createSubContext(G),k.transformIntoNewTimeline(),null!=G.delay)){k.previousNode.type==Gt.mo.Style&&(k.currentTimeline.snapshotCurrentStyles(),k.previousNode=ke);const te=vt(G.delay);k.delayNextStep(te)}f.steps.length&&(f.steps.forEach(te=>sn(this,te,k)),k.currentTimeline.applyStylesToKeyframe(),k.subContextCount>D&&k.transformIntoNewTimeline()),m.previousNode=f}visitGroup(f,m){const D=[];let k=m.currentTimeline.currentTime;const G=f.options&&f.options.delay?vt(f.options.delay):0;f.steps.forEach(te=>{const oe=m.createSubContext(f.options);G&&oe.delayNextStep(G),sn(this,te,oe),k=Math.max(k,oe.currentTimeline.currentTime),D.push(oe.currentTimeline)}),D.forEach(te=>m.currentTimeline.mergeTimelineCollectedStyles(te)),m.transformIntoNewTimeline(k),m.previousNode=f}_visitTiming(f,m){if(f.dynamic){const D=f.strValue;return Aa(m.params?Ko(D,m.params,m.errors):D,m.errors)}return{duration:f.duration,delay:f.delay,easing:f.easing}}visitAnimate(f,m){const D=m.currentAnimateTimings=this._visitTiming(f.timings,m),k=m.currentTimeline;D.delay&&(m.incrementTime(D.delay),k.snapshotCurrentStyles());const G=f.style;G.type==Gt.mo.Keyframes?this.visitKeyframes(G,m):(m.incrementTime(D.duration),this.visitStyle(G,m),k.applyStylesToKeyframe()),m.currentAnimateTimings=null,m.previousNode=f}visitStyle(f,m){const D=m.currentTimeline,k=m.currentAnimateTimings;!k&&D.hasCurrentStyleProperties()&&D.forwardFrame();const G=k&&k.easing||f.easing;f.isEmptyStep?D.applyEmptyStep(G):D.setStyles(f.styles,G,m.errors,m.options),m.previousNode=f}visitKeyframes(f,m){const D=m.currentAnimateTimings,k=m.currentTimeline.duration,G=D.duration,oe=m.createSubContext().currentTimeline;oe.easing=D.easing,f.styles.forEach(_e=>{oe.forwardTime((_e.offset||0)*G),oe.setStyles(_e.styles,_e.easing,m.errors,m.options),oe.applyStylesToKeyframe()}),m.currentTimeline.mergeTimelineCollectedStyles(oe),m.transformIntoNewTimeline(k+G),m.previousNode=f}visitQuery(f,m){const D=m.currentTimeline.currentTime,k=f.options||{},G=k.delay?vt(k.delay):0;G&&(m.previousNode.type===Gt.mo.Style||0==D&&m.currentTimeline.hasCurrentStyleProperties())&&(m.currentTimeline.snapshotCurrentStyles(),m.previousNode=ke);let te=D;const oe=m.invokeQuery(f.selector,f.originalSelector,f.limit,f.includeSelf,!!k.optional,m.errors);m.currentQueryTotal=oe.length;let _e=null;oe.forEach((Ae,tt)=>{m.currentQueryIndex=tt;const mt=m.createSubContext(f.options,Ae);G&&mt.delayNextStep(G),Ae===m.element&&(_e=mt.currentTimeline),sn(this,f.animation,mt),mt.currentTimeline.applyStylesToKeyframe(),te=Math.max(te,mt.currentTimeline.currentTime)}),m.currentQueryIndex=0,m.currentQueryTotal=0,m.transformIntoNewTimeline(te),_e&&(m.currentTimeline.mergeTimelineCollectedStyles(_e),m.currentTimeline.snapshotCurrentStyles()),m.previousNode=f}visitStagger(f,m){const D=m.parentContext,k=m.currentTimeline,G=f.timings,te=Math.abs(G.duration),oe=te*(m.currentQueryTotal-1);let _e=te*m.currentQueryIndex;switch(G.duration<0?"reverse":G.easing){case"reverse":_e=oe-_e;break;case"full":_e=D.currentStaggerTime}const tt=m.currentTimeline;_e&&tt.delayNextStep(_e);const mt=tt.currentTime;sn(this,f.animation,m),m.previousNode=f,D.currentStaggerTime=k.currentTime-mt+(k.startTime-D.currentTimeline.startTime)}}const ke={};class Ct{constructor(f,m,D,k,G,te,oe,_e){this._driver=f,this.element=m,this.subInstructions=D,this._enterClassName=k,this._leaveClassName=G,this.errors=te,this.timelines=oe,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ke,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_e||new bn(this._driver,m,0),oe.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(f,m){if(!f)return;const D=f;let k=this.options;null!=D.duration&&(k.duration=vt(D.duration)),null!=D.delay&&(k.delay=vt(D.delay));const G=D.params;if(G){let te=k.params;te||(te=this.options.params={}),Object.keys(G).forEach(oe=>{(!m||!te.hasOwnProperty(oe))&&(te[oe]=Ko(G[oe],te,this.errors))})}}_copyOptions(){const f={};if(this.options){const m=this.options.params;if(m){const D=f.params={};Object.keys(m).forEach(k=>{D[k]=m[k]})}}return f}createSubContext(f=null,m,D){const k=m||this.element,G=new Ct(this._driver,k,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(k,D||0));return G.previousNode=this.previousNode,G.currentAnimateTimings=this.currentAnimateTimings,G.options=this._copyOptions(),G.updateOptions(f),G.currentQueryIndex=this.currentQueryIndex,G.currentQueryTotal=this.currentQueryTotal,G.parentContext=this,this.subContextCount++,G}transformIntoNewTimeline(f){return this.previousNode=ke,this.currentTimeline=this.currentTimeline.fork(this.element,f),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(f,m,D){const k={duration:m??f.duration,delay:this.currentTimeline.currentTime+(D??0)+f.delay,easing:""},G=new pn(this._driver,f.element,f.keyframes,f.preStyleProps,f.postStyleProps,k,f.stretchStartingKeyframe);return this.timelines.push(G),k}incrementTime(f){this.currentTimeline.forwardTime(this.currentTimeline.duration+f)}delayNextStep(f){f>0&&this.currentTimeline.delayNextStep(f)}invokeQuery(f,m,D,k,G,te){let oe=[];if(k&&oe.push(this.element),f.length>0){f=(f=f.replace(x,"."+this._enterClassName)).replace(J,"."+this._leaveClassName);let Ae=this._driver.query(this.element,f,1!=D);0!==D&&(Ae=D<0?Ae.slice(Ae.length+D,Ae.length):Ae.slice(0,D)),oe.push(...Ae)}return!G&&0==oe.length&&te.push(function cu(v){return new W.vHH(3014,!1)}()),oe}}class bn{constructor(f,m,D,k){this._driver=f,this.element=m,this.startTime=D,this._elementTimelineStylesLookup=k,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(m),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(m,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(f){const m=1===this._keyframes.size&&this._pendingStyles.size;this.duration||m?(this.forwardTime(this.currentTime+f),m&&this.snapshotCurrentStyles()):this.startTime+=f}fork(f,m){return this.applyStylesToKeyframe(),new bn(this._driver,f,m||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(f){this.applyStylesToKeyframe(),this.duration=f,this._loadKeyframe()}_updateStyle(f,m){this._localTimelineStyles.set(f,m),this._globalTimelineStyles.set(f,m),this._styleSummary.set(f,{time:this.currentTime,value:m})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(f){f&&this._previousKeyframe.set("easing",f);for(let[m,D]of this._globalTimelineStyles)this._backFill.set(m,D||Gt.l3),this._currentKeyframe.set(m,Gt.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(f,m,D,k){m&&this._previousKeyframe.set("easing",m);const G=k&&k.params||{},te=function za(v,f){const m=new Map;let D;return v.forEach(k=>{if("*"===k){D??=f.keys();for(let G of D)m.set(G,Gt.l3)}else for(let[G,te]of k)m.set(G,te)}),m}(f,this._globalTimelineStyles);for(let[oe,_e]of te){const Ae=Ko(_e,G,D);this._pendingStyles.set(oe,Ae),this._localTimelineStyles.has(oe)||this._backFill.set(oe,this._globalTimelineStyles.get(oe)??Gt.l3),this._updateStyle(oe,Ae)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((f,m)=>{this._currentKeyframe.set(m,f)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((f,m)=>{this._currentKeyframe.has(m)||this._currentKeyframe.set(m,f)}))}snapshotCurrentStyles(){for(let[f,m]of this._localTimelineStyles)this._pendingStyles.set(f,m),this._updateStyle(f,m)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const f=[];for(let m in this._currentKeyframe)f.push(m);return f}mergeTimelineCollectedStyles(f){f._styleSummary.forEach((m,D)=>{const k=this._styleSummary.get(D);(!k||m.time>k.time)&&this._updateStyle(D,m.value)})}buildKeyframes(){this.applyStylesToKeyframe();const f=new Set,m=new Set,D=1===this._keyframes.size&&0===this.duration;let k=[];this._keyframes.forEach((oe,_e)=>{const Ae=new Map([...this._backFill,...oe]);Ae.forEach((tt,mt)=>{tt===Gt.k1?f.add(mt):tt===Gt.l3&&m.add(mt)}),D||Ae.set("offset",_e/this.duration),k.push(Ae)});const G=[...f.values()],te=[...m.values()];if(D){const oe=k[0],_e=new Map(oe);oe.set("offset",0),_e.set("offset",1),k=[oe,_e]}return Mu(this.element,k,G,te,this.duration,this.startTime,this.easing,!1)}}class pn extends bn{constructor(f,m,D,k,G,te,oe=!1){super(f,m,te.delay),this.keyframes=D,this.preStyleProps=k,this.postStyleProps=G,this._stretchStartingKeyframe=oe,this.timings={duration:te.duration,delay:te.delay,easing:te.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let f=this.keyframes,{delay:m,duration:D,easing:k}=this.timings;if(this._stretchStartingKeyframe&&m){const G=[],te=D+m,oe=m/te,_e=new Map(f[0]);_e.set("offset",0),G.push(_e);const Ae=new Map(f[0]);Ae.set("offset",fi(oe)),G.push(Ae);const tt=f.length-1;for(let mt=1;mt<=tt;mt++){let pt=new Map(f[mt]);const Qt=pt.get("offset");pt.set("offset",fi((m+Qt*D)/te)),G.push(pt)}D=te,m=0,k="",f=G}return Mu(this.element,f,this.preStyleProps,this.postStyleProps,D,m,k,!0)}}function fi(v,f=3){const m=Math.pow(10,f-1);return Math.round(v*m)/m}function Pr(v,f,m,D,k,G,te,oe,_e,Ae,tt,mt,pt){return{type:0,element:v,triggerName:f,isRemovalTransition:k,fromState:m,fromStyles:G,toState:D,toStyles:te,timelines:oe,queriedElements:_e,preStyleProps:Ae,postStyleProps:tt,totalTime:mt,errors:pt}}const Ms={};class Cr{constructor(f,m,D){this._triggerName=f,this.ast=m,this._stateStyles=D}match(f,m,D,k){return function $h(v,f,m,D,k){return v.some(G=>G(f,m,D,k))}(this.ast.matchers,f,m,D,k)}buildStyles(f,m,D){let k=this._stateStyles.get("*");return void 0!==f&&(k=this._stateStyles.get(f?.toString())||k),k?k.buildStyles(m,D):new Map}build(f,m,D,k,G,te,oe,_e,Ae,tt){const mt=[],pt=this.ast.options&&this.ast.options.params||Ms,xt=this.buildStyles(D,oe&&oe.params||Ms,mt),Xt=_e&&_e.params||Ms,jn=this.buildStyles(k,Xt,mt),Nr=new Set,xr=new Map,_r=new Map,cr="void"===k,_o={params:Rc(Xt,pt),delay:this.ast.options?.delay},Jr=tt?[]:de(f,m,this.ast.animation,G,te,xt,jn,_o,Ae,mt);let mi=0;return Jr.forEach(ni=>{mi=Math.max(ni.duration+ni.delay,mi)}),mt.length?Pr(m,this._triggerName,D,k,cr,xt,jn,[],[],xr,_r,mi,mt):(Jr.forEach(ni=>{const is=ni.element,Uu=Lr(xr,is,new Set);ni.preStyleProps.forEach(xa=>Uu.add(xa));const Eu=Lr(_r,is,new Set);ni.postStyleProps.forEach(xa=>Eu.add(xa)),is!==m&&Nr.add(is)}),Pr(m,this._triggerName,D,k,cr,xt,jn,Jr,[...Nr.values()],xr,_r,mi))}}function Rc(v,f){const m={...f};return Object.entries(v).forEach(([D,k])=>{null!=k&&(m[D]=k)}),m}class Pc{constructor(f,m,D){this.styles=f,this.defaultParams=m,this.normalizer=D}buildStyles(f,m){const D=new Map,k=Rc(f,this.defaultParams);return this.styles.styles.forEach(G=>{"string"!=typeof G&&G.forEach((te,oe)=>{te&&(te=Ko(te,k,m));const _e=this.normalizer.normalizePropertyName(oe,m);te=this.normalizer.normalizeStyleValue(oe,_e,te,m),D.set(oe,te)})}),D}}class Qd{constructor(f,m,D){this.name=f,this.ast=m,this._normalizer=D,this.transitionFactories=[],this.states=new Map,m.states.forEach(k=>{this.states.set(k.name,new Pc(k.style,k.options&&k.options.params||{},D))}),Qo(this.states,"true","1"),Qo(this.states,"false","0"),m.transitions.forEach(k=>{this.transitionFactories.push(new Cr(f,k,this.states))}),this.fallbackTransition=function Dl(v,f,m){return new Cr(v,{type:Gt.mo.Transition,animation:{type:Gt.mo.Sequence,steps:[],options:null},matchers:[(te,oe)=>!0],options:null,queryCount:0,depCount:0},f)}(f,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(f,m,D,k){return this.transitionFactories.find(te=>te.match(f,m,D,k))||null}matchStyles(f,m,D){return this.fallbackTransition.buildStyles(f,m,D)}}function Qo(v,f,m){v.has(f)?v.has(m)||v.set(m,v.get(f)):v.has(m)&&v.set(f,v.get(m))}const Xu=new I;class Al{constructor(f,m,D){this.bodyNode=f,this._driver=m,this._normalizer=D,this._animations=new Map,this._playersById=new Map,this.players=[]}register(f,m){const D=[],G=fs(this._driver,m,D,[]);if(D.length)throw function mo(v){return new W.vHH(3503,!1)}();this._animations.set(f,G)}_buildPlayer(f,m,D){const k=f.element,G=wt(this._normalizer,f.keyframes,m,D);return this._driver.animate(k,G,f.duration,f.delay,f.easing,[],!0)}create(f,m,D={}){const k=[],G=this._animations.get(f);let te;const oe=new Map;if(G?(te=de(this._driver,m,G,Rs,Us,new Map,new Map,D,Xu,k),te.forEach(tt=>{const mt=Lr(oe,tt.element,new Map);tt.postStyleProps.forEach(pt=>mt.set(pt,null))})):(k.push(function Ac(){return new W.vHH(3300,!1)}()),te=[]),k.length)throw function P(v){return new W.vHH(3504,!1)}();oe.forEach((tt,mt)=>{tt.forEach((pt,Qt)=>{tt.set(Qt,this._driver.computeStyle(mt,Qt,Gt.l3))})});const Ae=rt(te.map(tt=>{const mt=oe.get(tt.element);return this._buildPlayer(tt,new Map,mt)}));return this._playersById.set(f,Ae),Ae.onDestroy(()=>this.destroy(f)),this.players.push(Ae),Ae}destroy(f){const m=this._getPlayer(f);m.destroy(),this._playersById.delete(f);const D=this.players.indexOf(m);D>=0&&this.players.splice(D,1)}_getPlayer(f){const m=this._playersById.get(f);if(!m)throw function K(v){return new W.vHH(3301,!1)}();return m}listen(f,m,D,k){const G=mr(m,"","","");return Vn(this._getPlayer(f),D,G,k),()=>{}}command(f,m,D,k){if("register"==D)return void this.register(f,k[0]);if("create"==D)return void this.create(f,m,k[0]||{});const G=this._getPlayer(f);switch(D){case"play":G.play();break;case"pause":G.pause();break;case"reset":G.reset();break;case"restart":G.restart();break;case"finish":G.finish();break;case"init":G.init();break;case"setPosition":G.setPosition(parseFloat(k[0]));break;case"destroy":this.destroy(f)}}}const nc="ng-animate-queued",rc="ng-animate-disabled",el=[],Nu={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Yd={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},to="__ng_removed";class xc{get params(){return this.options.params}constructor(f,m=""){this.namespaceId=m;const D=f&&f.hasOwnProperty("value");if(this.value=function Yr(v){return v??null}(D?f.value:f),D){const{value:G,...te}=f;this.options=te}else this.options={};this.options.params||(this.options.params={})}absorbOptions(f){const m=f.params;if(m){const D=this.options.params;Object.keys(m).forEach(k=>{null==D[k]&&(D[k]=m[k])})}}}const tl="void",nl=new xc(tl);class js{constructor(f,m,D){this.id=f,this.hostElement=m,this._engine=D,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+f,ti(m,this._hostClassName)}listen(f,m,D,k){if(!this._triggers.has(m))throw function L(v,f){return new W.vHH(3302,!1)}();if(null==D||0==D.length)throw function z(v){return new W.vHH(3303,!1)}();if(!function qi(v){return"start"==v||"done"==v}(D))throw function A(v,f){return new W.vHH(3400,!1)}();const G=Lr(this._elementListeners,f,[]),te={name:m,phase:D,callback:k};G.push(te);const oe=Lr(this._engine.statesByElement,f,new Map);return oe.has(m)||(ti(f,Ye),ti(f,Ye+"-"+m),oe.set(m,nl)),()=>{this._engine.afterFlush(()=>{const _e=G.indexOf(te);_e>=0&&G.splice(_e,1),this._triggers.has(m)||oe.delete(m)})}}register(f,m){return!this._triggers.has(f)&&(this._triggers.set(f,m),!0)}_getTrigger(f){const m=this._triggers.get(f);if(!m)throw function N(v){return new W.vHH(3401,!1)}();return m}trigger(f,m,D,k=!0){const G=this._getTrigger(m),te=new da(this.id,m,f);let oe=this._engine.statesByElement.get(f);oe||(ti(f,Ye),ti(f,Ye+"-"+m),this._engine.statesByElement.set(f,oe=new Map));let _e=oe.get(m);const Ae=new xc(D,this.id);if(!(D&&D.hasOwnProperty("value"))&&_e&&Ae.absorbOptions(_e.options),oe.set(m,Ae),_e||(_e=nl),Ae.value!==tl&&_e.value===Ae.value){if(!function Ra(v,f){const m=Object.keys(v),D=Object.keys(f);if(m.length!=D.length)return!1;for(let k=0;k<m.length;k++){const G=m[k];if(!f.hasOwnProperty(G)||v[G]!==f[G])return!1}return!0}(_e.params,Ae.params)){const Xt=[],jn=G.matchStyles(_e.value,_e.params,Xt),Nr=G.matchStyles(Ae.value,Ae.params,Xt);Xt.length?this._engine.reportError(Xt):this._engine.afterFlush(()=>{Sa(f,jn),Tr(f,Nr)})}return}const pt=Lr(this._engine.playersByElement,f,[]);pt.forEach(Xt=>{Xt.namespaceId==this.id&&Xt.triggerName==m&&Xt.queued&&Xt.destroy()});let Qt=G.matchTransition(_e.value,Ae.value,f,Ae.params),xt=!1;if(!Qt){if(!k)return;Qt=G.fallbackTransition,xt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:f,triggerName:m,transition:Qt,fromState:_e,toState:Ae,player:te,isFallbackTransition:xt}),xt||(ti(f,nc),te.onStart(()=>{rl(f,nc)})),te.onDone(()=>{let Xt=this.players.indexOf(te);Xt>=0&&this.players.splice(Xt,1);const jn=this._engine.playersByElement.get(f);if(jn){let Nr=jn.indexOf(te);Nr>=0&&jn.splice(Nr,1)}}),this.players.push(te),pt.push(te),te}deregister(f){this._triggers.delete(f),this._engine.statesByElement.forEach(m=>m.delete(f)),this._elementListeners.forEach((m,D)=>{this._elementListeners.set(D,m.filter(k=>k.name!=f))})}clearElementCache(f){this._engine.statesByElement.delete(f),this._elementListeners.delete(f);const m=this._engine.playersByElement.get(f);m&&(m.forEach(D=>D.destroy()),this._engine.playersByElement.delete(f))}_signalRemovalForInnerTriggers(f,m){const D=this._engine.driver.query(f,li,!0);D.forEach(k=>{if(k[to])return;const G=this._engine.fetchNamespacesByElement(k);G.size?G.forEach(te=>te.triggerLeaveAnimation(k,m,!1,!0)):this.clearElementCache(k)}),this._engine.afterFlushAnimationsDone(()=>D.forEach(k=>this.clearElementCache(k)))}triggerLeaveAnimation(f,m,D,k){const G=this._engine.statesByElement.get(f),te=new Map;if(G){const oe=[];if(G.forEach((_e,Ae)=>{if(te.set(Ae,_e.value),this._triggers.has(Ae)){const tt=this.trigger(f,Ae,tl,k);tt&&oe.push(tt)}}),oe.length)return this._engine.markElementAsRemoved(this.id,f,!0,m,te),D&&rt(oe).onDone(()=>this._engine.processLeaveNode(f)),!0}return!1}prepareLeaveAnimationListeners(f){const m=this._elementListeners.get(f),D=this._engine.statesByElement.get(f);if(m&&D){const k=new Set;m.forEach(G=>{const te=G.name;if(k.has(te))return;k.add(te);const _e=this._triggers.get(te).fallbackTransition,Ae=D.get(te)||nl,tt=new xc(tl),mt=new da(this.id,te,f);this._engine.totalQueuedPlayers++,this._queue.push({element:f,triggerName:te,transition:_e,fromState:Ae,toState:tt,player:mt,isFallbackTransition:!0})})}}removeNode(f,m){const D=this._engine;if(f.childElementCount&&this._signalRemovalForInnerTriggers(f,m),this.triggerLeaveAnimation(f,m,!0))return;let k=!1;if(D.totalAnimations){const G=D.players.length?D.playersByQueriedElement.get(f):[];if(G&&G.length)k=!0;else{let te=f;for(;te=te.parentNode;)if(D.statesByElement.get(te)){k=!0;break}}}if(this.prepareLeaveAnimationListeners(f),k)D.markElementAsRemoved(this.id,f,!1,m);else{const G=f[to];(!G||G===Nu)&&(D.afterFlush(()=>this.clearElementCache(f)),D.destroyInnerAnimations(f),D._onRemovalComplete(f,m))}}insertNode(f,m){ti(f,this._hostClassName)}drainQueuedTransitions(f){const m=[];return this._queue.forEach(D=>{const k=D.player;if(k.destroyed)return;const G=D.element,te=this._elementListeners.get(G);te&&te.forEach(oe=>{if(oe.name==D.triggerName){const _e=mr(G,D.triggerName,D.fromState.value,D.toState.value);_e._data=f,Vn(D.player,oe.phase,_e,oe.callback)}}),k.markedForDestroy?this._engine.afterFlush(()=>{k.destroy()}):m.push(D)}),this._queue=[],m.sort((D,k)=>{const G=D.transition.ast.depCount,te=k.transition.ast.depCount;return 0==G||0==te?G-te:this._engine.driver.containsElement(D.element,k.element)?1:-1})}destroy(f){this.players.forEach(m=>m.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,f)}}class ic{_onRemovalComplete(f,m){this.onRemovalComplete(f,m)}constructor(f,m,D){this.bodyNode=f,this.driver=m,this._normalizer=D,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(k,G)=>{}}get queuedPlayers(){const f=[];return this._namespaceList.forEach(m=>{m.players.forEach(D=>{D.queued&&f.push(D)})}),f}createNamespace(f,m){const D=new js(f,m,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,m)?this._balanceNamespaceList(D,m):(this.newHostElements.set(m,D),this.collectEnterElement(m)),this._namespaceLookup[f]=D}_balanceNamespaceList(f,m){const D=this._namespaceList,k=this.namespacesByHostElement;if(D.length-1>=0){let te=!1,oe=this.driver.getParentElement(m);for(;oe;){const _e=k.get(oe);if(_e){const Ae=D.indexOf(_e);D.splice(Ae+1,0,f),te=!0;break}oe=this.driver.getParentElement(oe)}te||D.unshift(f)}else D.push(f);return k.set(m,f),f}register(f,m){let D=this._namespaceLookup[f];return D||(D=this.createNamespace(f,m)),D}registerTrigger(f,m,D){let k=this._namespaceLookup[f];k&&k.register(m,D)&&this.totalAnimations++}destroy(f,m){f&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const D=this._fetchNamespace(f);this.namespacesByHostElement.delete(D.hostElement);const k=this._namespaceList.indexOf(D);k>=0&&this._namespaceList.splice(k,1),D.destroy(m),delete this._namespaceLookup[f]}))}_fetchNamespace(f){return this._namespaceLookup[f]}fetchNamespacesByElement(f){const m=new Set,D=this.statesByElement.get(f);if(D)for(let k of D.values())if(k.namespaceId){const G=this._fetchNamespace(k.namespaceId);G&&m.add(G)}return m}trigger(f,m,D,k){if(Yo(m)){const G=this._fetchNamespace(f);if(G)return G.trigger(m,D,k),!0}return!1}insertNode(f,m,D,k){if(!Yo(m))return;const G=m[to];if(G&&G.setForRemoval){G.setForRemoval=!1,G.setForMove=!0;const te=this.collectedLeaveElements.indexOf(m);te>=0&&this.collectedLeaveElements.splice(te,1)}if(f){const te=this._fetchNamespace(f);te&&te.insertNode(m,D)}k&&this.collectEnterElement(m)}collectEnterElement(f){this.collectedEnterElements.push(f)}markElementAsDisabled(f,m){m?this.disabledNodes.has(f)||(this.disabledNodes.add(f),ti(f,rc)):this.disabledNodes.has(f)&&(this.disabledNodes.delete(f),rl(f,rc))}removeNode(f,m,D){if(Yo(m)){const k=f?this._fetchNamespace(f):null;k?k.removeNode(m,D):this.markElementAsRemoved(f,m,!1,D);const G=this.namespacesByHostElement.get(m);G&&G.id!==f&&G.removeNode(m,D)}else this._onRemovalComplete(m,D)}markElementAsRemoved(f,m,D,k,G){this.collectedLeaveElements.push(m),m[to]={namespaceId:f,setForRemoval:k,hasAnimation:D,removedBeforeQueried:!1,previousTriggersValues:G}}listen(f,m,D,k,G){return Yo(m)?this._fetchNamespace(f).listen(m,D,k,G):()=>{}}_buildInstruction(f,m,D,k,G){return f.transition.build(this.driver,f.element,f.fromState.value,f.toState.value,D,k,f.fromState.options,f.toState.options,m,G)}destroyInnerAnimations(f){let m=this.driver.query(f,li,!0);m.forEach(D=>this.destroyActiveAnimationsForElement(D)),0!=this.playersByQueriedElement.size&&(m=this.driver.query(f,Mi,!0),m.forEach(D=>this.finishActiveQueriedAnimationOnElement(D)))}destroyActiveAnimationsForElement(f){const m=this.playersByElement.get(f);m&&m.forEach(D=>{D.queued?D.markedForDestroy=!0:D.destroy()})}finishActiveQueriedAnimationOnElement(f){const m=this.playersByQueriedElement.get(f);m&&m.forEach(D=>D.finish())}whenRenderingDone(){return new Promise(f=>{if(this.players.length)return rt(this.players).onDone(()=>f());f()})}processLeaveNode(f){const m=f[to];if(m&&m.setForRemoval){if(f[to]=Nu,m.namespaceId){this.destroyInnerAnimations(f);const D=this._fetchNamespace(m.namespaceId);D&&D.clearElementCache(f)}this._onRemovalComplete(f,m.setForRemoval)}f.classList?.contains(rc)&&this.markElementAsDisabled(f,!1),this.driver.query(f,".ng-animate-disabled",!0).forEach(D=>{this.markElementAsDisabled(D,!1)})}flush(f=-1){let m=[];if(this.newHostElements.size&&(this.newHostElements.forEach((D,k)=>this._balanceNamespaceList(D,k)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let D=0;D<this.collectedEnterElements.length;D++)ti(this.collectedEnterElements[D],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const D=[];try{m=this._flushAnimations(D,f)}finally{for(let k=0;k<D.length;k++)D[k]()}}else for(let D=0;D<this.collectedLeaveElements.length;D++)this.processLeaveNode(this.collectedLeaveElements[D]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(D=>D()),this._flushFns=[],this._whenQuietFns.length){const D=this._whenQuietFns;this._whenQuietFns=[],m.length?rt(m).onDone(()=>{D.forEach(k=>k())}):D.forEach(k=>k())}}reportError(f){throw function w(v){return new W.vHH(3402,!1)}()}_flushAnimations(f,m){const D=new I,k=[],G=new Map,te=[],oe=new Map,_e=new Map,Ae=new Map,tt=new Set;this.disabledNodes.forEach(nn=>{tt.add(nn);const kt=this.driver.query(nn,".ng-animate-queued",!0);for(let In=0;In<kt.length;In++)tt.add(kt[In])});const mt=this.bodyNode,pt=Array.from(this.statesByElement.keys()),Qt=pu(pt,this.collectedEnterElements),xt=new Map;let Xt=0;Qt.forEach((nn,kt)=>{const In=Rs+Xt++;xt.set(kt,In),nn.forEach(Kn=>ti(Kn,In))});const jn=[],Nr=new Set,xr=new Set;for(let nn=0;nn<this.collectedLeaveElements.length;nn++){const kt=this.collectedLeaveElements[nn],In=kt[to];In&&In.setForRemoval&&(jn.push(kt),Nr.add(kt),In.hasAnimation?this.driver.query(kt,".ng-star-inserted",!0).forEach(Kn=>Nr.add(Kn)):xr.add(kt))}const _r=new Map,cr=pu(pt,Array.from(Nr));cr.forEach((nn,kt)=>{const In=Us+Xt++;_r.set(kt,In),nn.forEach(Kn=>ti(Kn,In))}),f.push(()=>{Qt.forEach((nn,kt)=>{const In=xt.get(kt);nn.forEach(Kn=>rl(Kn,In))}),cr.forEach((nn,kt)=>{const In=_r.get(kt);nn.forEach(Kn=>rl(Kn,In))}),jn.forEach(nn=>{this.processLeaveNode(nn)})});const _o=[],Jr=[];for(let nn=this._namespaceList.length-1;nn>=0;nn--)this._namespaceList[nn].drainQueuedTransitions(m).forEach(In=>{const Kn=In.player,Zi=In.element;if(_o.push(Kn),this.collectedEnterElements.length){const _s=Zi[to];if(_s&&_s.setForMove){if(_s.previousTriggersValues&&_s.previousTriggersValues.has(In.triggerName)){const Bu=_s.previousTriggersValues.get(In.triggerName),yo=this.statesByElement.get(In.element);if(yo&&yo.has(In.triggerName)){const Iu=yo.get(In.triggerName);Iu.value=Bu,yo.set(In.triggerName,Iu)}}return void Kn.destroy()}}const Ja=!mt||!this.driver.containsElement(mt,Zi),Hr=_r.get(Zi),No=xt.get(Zi),_i=this._buildInstruction(In,D,No,Hr,Ja);if(_i.errors&&_i.errors.length)return void Jr.push(_i);if(Ja)return Kn.onStart(()=>Sa(Zi,_i.fromStyles)),Kn.onDestroy(()=>Tr(Zi,_i.toStyles)),void k.push(Kn);if(In.isFallbackTransition)return Kn.onStart(()=>Sa(Zi,_i.fromStyles)),Kn.onDestroy(()=>Tr(Zi,_i.toStyles)),void k.push(Kn);const Xa=[];_i.timelines.forEach(_s=>{_s.stretchStartingKeyframe=!0,this.disabledNodes.has(_s.element)||Xa.push(_s)}),_i.timelines=Xa,D.append(Zi,_i.timelines),te.push({instruction:_i,player:Kn,element:Zi}),_i.queriedElements.forEach(_s=>Lr(oe,_s,[]).push(Kn)),_i.preStyleProps.forEach((_s,Bu)=>{if(_s.size){let yo=_e.get(Bu);yo||_e.set(Bu,yo=new Set),_s.forEach((Iu,ea)=>yo.add(ea))}}),_i.postStyleProps.forEach((_s,Bu)=>{let yo=Ae.get(Bu);yo||Ae.set(Bu,yo=new Set),_s.forEach((Iu,ea)=>yo.add(ea))})});if(Jr.length){const nn=[];Jr.forEach(kt=>{nn.push(function Y(v,f){return new W.vHH(3505,!1)}())}),_o.forEach(kt=>kt.destroy()),this.reportError(nn)}const mi=new Map,ni=new Map;te.forEach(nn=>{const kt=nn.element;D.has(kt)&&(ni.set(kt,kt),this._beforeAnimationBuild(nn.player.namespaceId,nn.instruction,mi))}),k.forEach(nn=>{const kt=nn.element;this._getPreviousPlayers(kt,!1,nn.namespaceId,nn.triggerName,null).forEach(Kn=>{Lr(mi,kt,[]).push(Kn),Kn.destroy()})});const is=jn.filter(nn=>di(nn,_e,Ae)),Uu=new Map;kc(Uu,this.driver,xr,Ae,Gt.l3).forEach(nn=>{di(nn,_e,Ae)&&is.push(nn)});const xa=new Map;Qt.forEach((nn,kt)=>{kc(xa,this.driver,new Set(nn),_e,Gt.k1)}),is.forEach(nn=>{const kt=Uu.get(nn),In=xa.get(nn);Uu.set(nn,new Map([...kt?.entries()??[],...In?.entries()??[]]))});const Xo=[],ka=[],dc={};te.forEach(nn=>{const{element:kt,player:In,instruction:Kn}=nn;if(D.has(kt)){if(tt.has(kt))return In.onDestroy(()=>Tr(kt,Kn.toStyles)),In.disabled=!0,In.overrideTotalTime(Kn.totalTime),void k.push(In);let Zi=dc;if(ni.size>1){let Hr=kt;const No=[];for(;Hr=Hr.parentNode;){const _i=ni.get(Hr);if(_i){Zi=_i;break}No.push(Hr)}No.forEach(_i=>ni.set(_i,Zi))}const Ja=this._buildAnimation(In.namespaceId,Kn,mi,G,xa,Uu);if(In.setRealPlayer(Ja),Zi===dc)Xo.push(In);else{const Hr=this.playersByElement.get(Zi);Hr&&Hr.length&&(In.parentPlayer=rt(Hr)),k.push(In)}}else Sa(kt,Kn.fromStyles),In.onDestroy(()=>Tr(kt,Kn.toStyles)),ka.push(In),tt.has(kt)&&k.push(In)}),ka.forEach(nn=>{const kt=G.get(nn.element);if(kt&&kt.length){const In=rt(kt);nn.setRealPlayer(In)}}),k.forEach(nn=>{nn.parentPlayer?nn.syncPlayerEvents(nn.parentPlayer):nn.destroy()});for(let nn=0;nn<jn.length;nn++){const kt=jn[nn],In=kt[to];if(rl(kt,Us),In&&In.hasAnimation)continue;let Kn=[];if(oe.size){let Ja=oe.get(kt);Ja&&Ja.length&&Kn.push(...Ja);let Hr=this.driver.query(kt,Mi,!0);for(let No=0;No<Hr.length;No++){let _i=oe.get(Hr[No]);_i&&_i.length&&Kn.push(..._i)}}const Zi=Kn.filter(Ja=>!Ja.destroyed);Zi.length?Wa(this,kt,Zi):this.processLeaveNode(kt)}return jn.length=0,Xo.forEach(nn=>{this.players.push(nn),nn.onDone(()=>{nn.destroy();const kt=this.players.indexOf(nn);this.players.splice(kt,1)}),nn.play()}),Xo}afterFlush(f){this._flushFns.push(f)}afterFlushAnimationsDone(f){this._whenQuietFns.push(f)}_getPreviousPlayers(f,m,D,k,G){let te=[];if(m){const oe=this.playersByQueriedElement.get(f);oe&&(te=oe)}else{const oe=this.playersByElement.get(f);if(oe){const _e=!G||G==tl;oe.forEach(Ae=>{Ae.queued||!_e&&Ae.triggerName!=k||te.push(Ae)})}}return(D||k)&&(te=te.filter(oe=>!(D&&D!=oe.namespaceId||k&&k!=oe.triggerName))),te}_beforeAnimationBuild(f,m,D){const G=m.element,te=m.isRemovalTransition?void 0:f,oe=m.isRemovalTransition?void 0:m.triggerName;for(const _e of m.timelines){const Ae=_e.element,tt=Ae!==G,mt=Lr(D,Ae,[]);this._getPreviousPlayers(Ae,tt,te,oe,m.toState).forEach(Qt=>{const xt=Qt.getRealPlayer();xt.beforeDestroy&&xt.beforeDestroy(),Qt.destroy(),mt.push(Qt)})}Sa(G,m.fromStyles)}_buildAnimation(f,m,D,k,G,te){const oe=m.triggerName,_e=m.element,Ae=[],tt=new Set,mt=new Set,pt=m.timelines.map(xt=>{const Xt=xt.element;tt.add(Xt);const jn=Xt[to];if(jn&&jn.removedBeforeQueried)return new Gt.ZN(xt.duration,xt.delay);const Nr=Xt!==_e,xr=function Ki(v){const f=[];return sc(v,f),f}((D.get(Xt)||el).map(mi=>mi.getRealPlayer())).filter(mi=>!!mi.element&&mi.element===Xt),_r=G.get(Xt),cr=te.get(Xt),_o=wt(this._normalizer,xt.keyframes,_r,cr),Jr=this._buildPlayer(xt,_o,xr);if(xt.subTimeline&&k&&mt.add(Xt),Nr){const mi=new da(f,oe,Xt);mi.setRealPlayer(Jr),Ae.push(mi)}return Jr});Ae.forEach(xt=>{Lr(this.playersByQueriedElement,xt.element,[]).push(xt),xt.onDone(()=>function Sl(v,f,m){let D=v.get(f);if(D){if(D.length){const k=D.indexOf(m);D.splice(k,1)}0==D.length&&v.delete(f)}return D}(this.playersByQueriedElement,xt.element,xt))}),tt.forEach(xt=>ti(xt,Wi));const Qt=rt(pt);return Qt.onDestroy(()=>{tt.forEach(xt=>rl(xt,Wi)),Tr(_e,m.toStyles)}),mt.forEach(xt=>{Lr(k,xt,[]).push(Qt)}),Qt}_buildPlayer(f,m,D){return m.length>0?this.driver.animate(f.element,m,f.duration,f.delay,f.easing,D):new Gt.ZN(f.duration,f.delay)}}class da{constructor(f,m,D){this.namespaceId=f,this.triggerName=m,this.element=D,this._player=new Gt.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(f){this._containsRealPlayer||(this._player=f,this._queuedCallbacks.forEach((m,D)=>{m.forEach(k=>Vn(f,D,void 0,k))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(f.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(f){this.totalTime=f}syncPlayerEvents(f){const m=this._player;m.triggerCallback&&f.onStart(()=>m.triggerCallback("start")),f.onDone(()=>this.finish()),f.onDestroy(()=>this.destroy())}_queueEvent(f,m){Lr(this._queuedCallbacks,f,[]).push(m)}onDone(f){this.queued&&this._queueEvent("done",f),this._player.onDone(f)}onStart(f){this.queued&&this._queueEvent("start",f),this._player.onStart(f)}onDestroy(f){this.queued&&this._queueEvent("destroy",f),this._player.onDestroy(f)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(f){this.queued||this._player.setPosition(f)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(f){const m=this._player;m.triggerCallback&&m.triggerCallback(f)}}function Yo(v){return v&&1===v.nodeType}function Mr(v,f){const m=v.style.display;return v.style.display=f??"none",m}function kc(v,f,m,D,k){const G=[];m.forEach(_e=>G.push(Mr(_e)));const te=[];D.forEach((_e,Ae)=>{const tt=new Map;_e.forEach(mt=>{const pt=f.computeStyle(Ae,mt,k);tt.set(mt,pt),(!pt||0==pt.length)&&(Ae[to]=Yd,te.push(Ae))}),v.set(Ae,tt)});let oe=0;return m.forEach(_e=>Mr(_e,G[oe++])),te}function pu(v,f){const m=new Map;if(v.forEach(oe=>m.set(oe,[])),0==f.length)return m;const k=new Set(f),G=new Map;function te(oe){if(!oe)return 1;let _e=G.get(oe);if(_e)return _e;const Ae=oe.parentNode;return _e=m.has(Ae)?Ae:k.has(Ae)?1:te(Ae),G.set(oe,_e),_e}return f.forEach(oe=>{const _e=te(oe);1!==_e&&m.get(_e).push(oe)}),m}function ti(v,f){v.classList?.add(f)}function rl(v,f){v.classList?.remove(f)}function Wa(v,f,m){rt(m).onDone(()=>v.processLeaveNode(f))}function sc(v,f){for(let m=0;m<v.length;m++){const D=v[m];D instanceof Gt.ZE?sc(D.players,f):f.push(D)}}function di(v,f,m){const D=m.get(v);if(!D)return!1;let k=f.get(v);return k?D.forEach(G=>k.add(G)):f.set(v,D),m.delete(v),!0}class no{constructor(f,m,D){this._driver=m,this._normalizer=D,this._triggerCache={},this.onRemovalComplete=(k,G)=>{},this._transitionEngine=new ic(f.body,m,D),this._timelineEngine=new Al(f.body,m,D),this._transitionEngine.onRemovalComplete=(k,G)=>this.onRemovalComplete(k,G)}registerTrigger(f,m,D,k,G){const te=f+"-"+k;let oe=this._triggerCache[te];if(!oe){const _e=[],tt=fs(this._driver,G,_e,[]);if(_e.length)throw function Wu(v,f){return new W.vHH(3404,!1)}();oe=function Mc(v,f,m){return new Qd(v,f,m)}(k,tt,this._normalizer),this._triggerCache[te]=oe}this._transitionEngine.registerTrigger(m,k,oe)}register(f,m){this._transitionEngine.register(f,m)}destroy(f,m){this._transitionEngine.destroy(f,m)}onInsert(f,m,D,k){this._transitionEngine.insertNode(f,m,D,k)}onRemove(f,m,D){this._transitionEngine.removeNode(f,m,D)}disableAnimations(f,m){this._transitionEngine.markElementAsDisabled(f,m)}process(f,m,D,k){if("@"==D.charAt(0)){const[G,te]=ur(D);this._timelineEngine.command(G,m,te,k)}else this._transitionEngine.trigger(f,m,D,k)}listen(f,m,D,k,G){if("@"==D.charAt(0)){const[te,oe]=ur(D);return this._timelineEngine.listen(te,m,oe,G)}return this._transitionEngine.listen(f,m,D,k,G)}flush(f=-1){this._transitionEngine.flush(f)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(f){this._transitionEngine.afterFlushAnimationsDone(f)}}let Rl=(()=>{class v{static#e=this.initialStylesByElement=new WeakMap;constructor(m,D,k){this._element=m,this._startStyles=D,this._endStyles=k,this._state=0;let G=v.initialStylesByElement.get(m);G||v.initialStylesByElement.set(m,G=new Map),this._initialStyles=G}start(){this._state<1&&(this._startStyles&&Tr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Tr(this._element,this._initialStyles),this._endStyles&&(Tr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(v.initialStylesByElement.delete(this._element),this._startStyles&&(Sa(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Sa(this._element,this._endStyles),this._endStyles=null),Tr(this._element,this._initialStyles),this._state=3)}}return v})();function Ou(v){let f=null;return v.forEach((m,D)=>{(function Fc(v){return"display"===v||"position"===v})(D)&&(f=f||new Map,f.set(D,m))}),f}class Jo{constructor(f,m,D,k){this.element=f,this.keyframes=m,this.options=D,this._specialStyles=k,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=D.duration,this._delay=D.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(f=>f()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const f=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,f,this.options),this._finalKeyframe=f.length?f[f.length-1]:new Map;const m=()=>this._onFinish();this.domPlayer.addEventListener("finish",m),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",m)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(f){const m=[];return f.forEach(D=>{m.push(Object.fromEntries(D))}),m}_triggerWebAnimation(f,m,D){return f.animate(this._convertKeyframesToObject(m),D)}onStart(f){this._originalOnStartFns.push(f),this._onStartFns.push(f)}onDone(f){this._originalOnDoneFns.push(f),this._onDoneFns.push(f)}onDestroy(f){this._onDestroyFns.push(f)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(f=>f()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(f=>f()),this._onDestroyFns=[])}setPosition(f){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=f*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const f=new Map;this.hasStarted()&&this._finalKeyframe.forEach((D,k)=>{"offset"!==k&&f.set(k,this._finished?D:Vr(this.element,k))}),this.currentSnapshot=f}triggerCallback(f){const m="start"===f?this._onStartFns:this._onDoneFns;m.forEach(D=>D()),m.length=0}}class ha{validateStyleProperty(f){return!0}validateAnimatableStyleProperty(f){return!0}matchesElement(f,m){return!1}containsElement(f,m){return Ql(f,m)}getParentElement(f){return Ss(f)}query(f,m,D){return qu(f,m,D)}computeStyle(f,m,D){return Vr(f,m)}animate(f,m,D,k,G,te=[]){const _e={duration:D,delay:k,fill:0==k?"both":"forwards"};G&&(_e.easing=G);const Ae=new Map,tt=te.filter(Qt=>Qt instanceof Jo);(function Hh(v,f){return 0===v||0===f})(D,k)&&tt.forEach(Qt=>{Qt.currentSnapshot.forEach((xt,Xt)=>Ae.set(Xt,xt))});let mt=function He(v){return v.length?v[0]instanceof Map?v:v.map(f=>new Map(Object.entries(f))):[]}(m).map(Qt=>new Map(Qt));mt=function Zu(v,f,m){if(m.size&&f.length){let D=f[0],k=[];if(m.forEach((G,te)=>{D.has(te)||k.push(te),D.set(te,G)}),k.length)for(let G=1;G<f.length;G++){let te=f[G];k.forEach(oe=>te.set(oe,Vr(v,oe)))}}return f}(f,mt,Ae);const pt=function bl(v,f){let m=null,D=null;return Array.isArray(f)&&f.length?(m=Ou(f[0]),f.length>1&&(D=Ou(f[f.length-1]))):f instanceof Map&&(m=Ou(f)),m||D?new Rl(v,m,D):null}(f,mt);return new Jo(f,mt,_e,pt)}}const il="@.disabled";class Pa{constructor(f,m,D,k){this.namespaceId=f,this.delegate=m,this.engine=D,this._onDestroy=k,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(f){this.delegate.destroyNode?.(f)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(f,m){return this.delegate.createElement(f,m)}createComment(f){return this.delegate.createComment(f)}createText(f){return this.delegate.createText(f)}appendChild(f,m){this.delegate.appendChild(f,m),this.engine.onInsert(this.namespaceId,m,f,!1)}insertBefore(f,m,D,k=!0){this.delegate.insertBefore(f,m,D),this.engine.onInsert(this.namespaceId,m,f,k)}removeChild(f,m,D){this.engine.onRemove(this.namespaceId,m,this.delegate)}selectRootElement(f,m){return this.delegate.selectRootElement(f,m)}parentNode(f){return this.delegate.parentNode(f)}nextSibling(f){return this.delegate.nextSibling(f)}setAttribute(f,m,D,k){this.delegate.setAttribute(f,m,D,k)}removeAttribute(f,m,D){this.delegate.removeAttribute(f,m,D)}addClass(f,m){this.delegate.addClass(f,m)}removeClass(f,m){this.delegate.removeClass(f,m)}setStyle(f,m,D,k){this.delegate.setStyle(f,m,D,k)}removeStyle(f,m,D){this.delegate.removeStyle(f,m,D)}setProperty(f,m,D){"@"==m.charAt(0)&&m==il?this.disableAnimations(f,!!D):this.delegate.setProperty(f,m,D)}setValue(f,m){this.delegate.setValue(f,m)}listen(f,m,D){return this.delegate.listen(f,m,D)}disableAnimations(f,m){this.engine.disableAnimations(f,m)}}class Vc extends Pa{constructor(f,m,D,k,G){super(m,D,k,G),this.factory=f,this.namespaceId=m}setProperty(f,m,D){"@"==m.charAt(0)?"."==m.charAt(1)&&m==il?this.disableAnimations(f,D=void 0===D||!!D):this.engine.process(this.namespaceId,f,m.slice(1),D):this.delegate.setProperty(f,m,D)}listen(f,m,D){if("@"==m.charAt(0)){const k=function Ma(v){switch(v){case"body":return document.body;case"document":return document;case"window":return window;default:return v}}(f);let G=m.slice(1),te="";return"@"!=G.charAt(0)&&([G,te]=function gu(v){const f=v.indexOf(".");return[v.substring(0,f),v.slice(f+1)]}(G)),this.engine.listen(this.namespaceId,k,G,te,oe=>{this.factory.scheduleListenerCallback(oe._data||-1,D,oe)})}return this.delegate.listen(f,m,D)}}class Ci{constructor(f,m,D){this.delegate=f,this.engine=m,this._zone=D,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,m.onRemovalComplete=(k,G)=>{const te=G?.parentNode(k);te&&G.removeChild(te,k)}}createRenderer(f,m){const k=this.delegate.createRenderer(f,m);if(!f||!m?.data?.animation){const Ae=this._rendererCache;let tt=Ae.get(k);return tt||(tt=new Pa("",k,this.engine,()=>Ae.delete(k)),Ae.set(k,tt)),tt}const G=m.id,te=m.id+"-"+this._currentId;this._currentId++,this.engine.register(te,f);const oe=Ae=>{Array.isArray(Ae)?Ae.forEach(oe):this.engine.registerTrigger(G,te,f,Ae.name,Ae)};return m.data.animation.forEach(oe),new Vc(this,te,k,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(f,m,D){if(f>=0&&f<this._microtaskId)return void this._zone.run(()=>m(D));const k=this._animationCallbacksBuffer;0==k.length&&queueMicrotask(()=>{this._zone.run(()=>{k.forEach(G=>{const[te,oe]=G;te(oe)}),this._animationCallbacksBuffer=[]})}),k.push([m,D])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const oc=[{provide:Ha,useFactory:function Uc(){return new Ir}},{provide:no,useClass:(()=>{class v extends no{constructor(m,D,k,G){super(m,D,k)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(D){return new(D||v)(W.LFG(b.K0),W.LFG(Jl),W.LFG(Ha),W.LFG(W.z2F))};static#t=this.\u0275prov=W.Yz7({token:v,factory:v.\u0275fac})}return v})()},{provide:W.FYo,useFactory:function ol(v,f,m){return new Ci(v,f,m)},deps:[C.se,no,W.R0b]}],ac=[{provide:Jl,useFactory:()=>new ha},{provide:W.QbO,useValue:"BrowserAnimations"},...oc],al=[{provide:Jl,useClass:Vs},{provide:W.QbO,useValue:"NoopAnimations"},...oc];let Na=(()=>{class v{static withConfig(m){return{ngModule:v,providers:m.disableAnimations?al:ac}}static#e=this.\u0275fac=function(D){return new(D||v)};static#t=this.\u0275mod=W.oAB({type:v});static#n=this.\u0275inj=W.cJS({providers:ac,imports:[C.b2]})}return v})(),Bc=(()=>{class v extends le.eV{constructor(m){super(),this.title=m}updateTitle(m){const D=this.buildTitle(m);this.title.setTitle(D?`PlanningPoker - ${D}`:"PlanningPoker")}static#e=this.\u0275fac=function(D){return new(D||v)(W.LFG(C.Dx))};static#t=this.\u0275prov=W.Yz7({token:v,factory:v.\u0275fac})}return v})();var ku=$(4911),ro=$(8504),jc=$(4829),pi=$(1631),ul=$(4266),mu=$(4674),md=$(7400);const Hc=["addListener","removeListener"],tp=["addEventListener","removeEventListener"],ll=["on","off"];function sr(v,f,m,D){if((0,mu.m)(m)&&(D=m,m=void 0),D)return sr(v,f,m).pipe((0,md.Z)(D));const[k,G]=function cl(v){return(0,mu.m)(v.addEventListener)&&(0,mu.m)(v.removeEventListener)}(v)?tp.map(te=>oe=>v[te](f,oe,m)):function gi(v){return(0,mu.m)(v.addListener)&&(0,mu.m)(v.removeListener)}(v)?Hc.map(Ur(v,f)):function _d(v){return(0,mu.m)(v.on)&&(0,mu.m)(v.off)}(v)?ll.map(Ur(v,f)):[];if(!k&&(0,ul.z)(v))return(0,pi.z)(te=>sr(te,f,m))((0,jc.Xf)(v));if(!k)throw new TypeError("Invalid event target");return new Ge.y(te=>{const oe=(..._e)=>te.next(1<_e.length?_e:_e[0]);return k(oe),()=>G(oe)})}function Ur(v,f){return m=>D=>v[m](f,D)}var yd=$(5211),Ns=$(8645),Fu=$(2420);const qa=new Ge.y(Fu.Z);var uc=$(3019),_u=$(2181),np=$(3168);const rp={connector:()=>new Ns.x};function Hs(v,f=rp){const{connector:m}=f;return(0,Ve.e)((D,k)=>{const G=m();(0,jc.Xf)(v(function $c(v){return new Ge.y(f=>v.subscribe(f))}(G))).subscribe(k),k.add(D.subscribe(G))})}var yu=$(8180),cc=$(9397),Nl=$(975);function Ol(v,f){return f?m=>(0,yd.z)(f.pipe((0,yu.q)(1),function Ka(){return(0,Ve.e)((v,f)=>{v.subscribe((0,an.x)(f,Fu.Z))})}()),m.pipe(Ol(v))):(0,pi.z)((m,D)=>(0,jc.Xf)(v(m,D)).pipe((0,yu.q)(1),(0,Nl.h)(m)))}var Gc=$(671);const vu="Service workers are disabled or not supported by this browser";class Lu{constructor(f){if(this.serviceWorker=f,f){const D=sr(f,"controllerchange").pipe((0,gt.U)(()=>f.controller)),k=(0,ku.P)(()=>(0,Ze.of)(f.controller)),G=(0,yd.z)(k,D);this.worker=G.pipe((0,_u.h)(tt=>!!tt)),this.registration=this.worker.pipe((0,Un.w)(()=>f.getRegistration()));const Ae=sr(f,"message").pipe((0,gt.U)(tt=>tt.data)).pipe((0,_u.h)(tt=>tt&&tt.type)).pipe(function lc(v){return v?f=>Hs(v)(f):f=>function vd(v,f){const m=(0,mu.m)(v)?v:()=>v;return(0,mu.m)(f)?Hs(f,{connector:m}):D=>new np.c(D,m)}(new Ns.x)(f)}());Ae.connect(),this.events=Ae}else this.worker=this.events=this.registration=function dl(v){return(0,ku.P)(()=>(0,ro._)(new Error(v)))}(vu)}postMessage(f,m){return this.worker.pipe((0,yu.q)(1),(0,cc.b)(D=>{D.postMessage({action:f,...m})})).toPromise().then(()=>{})}postMessageWithOperation(f,m,D){const k=this.waitForOperationCompleted(D),G=this.postMessage(f,m);return Promise.all([G,k]).then(([,te])=>te)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(f){let m;return m="string"==typeof f?D=>D.type===f:D=>f.includes(D.type),this.events.pipe((0,_u.h)(m))}nextEventOfType(f){return this.eventsOfType(f).pipe((0,yu.q)(1))}waitForOperationCompleted(f){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,_u.h)(m=>m.nonce===f),(0,yu.q)(1),(0,gt.U)(m=>{if(void 0!==m.result)return m.result;throw new Error(m.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Ed=(()=>{class v{get isEnabled(){return this.sw.isEnabled}constructor(m){if(this.sw=m,this.pushManager=null,this.subscriptionChanges=new Ns.x,!m.isEnabled)return this.messages=qa,this.notificationClicks=qa,void(this.subscription=qa);this.messages=this.sw.eventsOfType("PUSH").pipe((0,gt.U)(k=>k.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,gt.U)(k=>k.data)),this.pushManager=this.sw.registration.pipe((0,gt.U)(k=>k.pushManager));const D=this.pushManager.pipe((0,Un.w)(k=>k.getSubscription()));this.subscription=(0,uc.T)(D,this.subscriptionChanges)}requestSubscription(m){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(vu));const D={userVisibleOnly:!0};let k=this.decodeBase64(m.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),G=new Uint8Array(new ArrayBuffer(k.length));for(let te=0;te<k.length;te++)G[te]=k.charCodeAt(te);return D.applicationServerKey=G,this.pushManager.pipe((0,Un.w)(te=>te.subscribe(D)),(0,yu.q)(1)).toPromise().then(te=>(this.subscriptionChanges.next(te),te))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,yu.q)(1),(0,Un.w)(D=>{if(null===D)throw new Error("Not subscribed to push notifications.");return D.unsubscribe().then(k=>{if(!k)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(vu))}decodeBase64(m){return atob(m)}static#e=this.\u0275fac=function(D){return new(D||v)(W.LFG(Lu))};static#t=this.\u0275prov=W.Yz7({token:v,factory:v.\u0275fac})}return v})(),Za=(()=>{class v{get isEnabled(){return this.sw.isEnabled}constructor(m){if(this.sw=m,!m.isEnabled)return this.versionUpdates=qa,void(this.unrecoverable=qa);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(vu));const m=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:m},m)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(vu));const m=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:m},m)}static#e=this.\u0275fac=function(D){return new(D||v)(W.LFG(Lu))};static#t=this.\u0275prov=W.Yz7({token:v,factory:v.\u0275fac})}return v})();const Vi=new W.OlP("NGSW_REGISTER_SCRIPT");function Id(v,f,m,D){return()=>{if(!(0,b.NF)(D)||!("serviceWorker"in navigator)||!1===m.enabled)return;let k;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof m.registrationStrategy)k=m.registrationStrategy();else{const[te,...oe]=(m.registrationStrategy||"registerWhenStable:30000").split(":");switch(te){case"registerImmediately":k=(0,Ze.of)(null);break;case"registerWithDelay":k=xl(+oe[0]||0);break;case"registerWhenStable":k=oe[0]?(0,uc.T)(Qa(v),xl(+oe[0])):Qa(v);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${m.registrationStrategy}`)}}v.get(W.R0b).runOutsideAngular(()=>k.pipe((0,yu.q)(1)).subscribe(()=>navigator.serviceWorker.register(f,{scope:m.scope}).catch(te=>console.error("Service worker registration failed with:",te))))}}function xl(v){return(0,Ze.of)(null).pipe(function Oa(v,f=ue.z){const m=function Xd(v=0,f,m=ue.P){let D=-1;return null!=f&&((0,Gc.K)(f)?m=f:D=f),new Ge.y(k=>{let G=function Jd(v){return v instanceof Date&&!isNaN(v)}(v)?+v-m.now():v;G<0&&(G=0);let te=0;return m.schedule(function(){k.closed||(k.next(te++),0<=D?this.schedule(void 0,D):k.complete())},G)})}(v,f);return Ol(()=>m)}(v))}function Qa(v){return v.get(W.z2F).isStable.pipe((0,_u.h)(m=>m))}function kl(v,f){return new Lu((0,b.NF)(f)&&!1!==v.enabled?navigator.serviceWorker:void 0)}class Fl{}function Ll(v,f={}){return(0,W.MR2)([Ed,Za,{provide:Vi,useValue:v},{provide:Fl,useValue:f},{provide:Lu,useFactory:kl,deps:[Fl,W.Lbi]},{provide:W.ip1,useFactory:Id,deps:[W.zs3,Vi,Fl,W.Lbi],multi:!0}])}let Ya=(()=>{class v{static register(m,D={}){return{ngModule:v,providers:[Ll(m,D)]}}static#e=this.\u0275fac=function(D){return new(D||v)};static#t=this.\u0275mod=W.oAB({type:v});static#n=this.\u0275inj=W.cJS({providers:[Ed,Za]})}return v})();const Vu_firebaseConfig={apiKey:"AIzaSyAeN6DAueQxYzVMBF2cGv2olFE_Kf9Qc58",authDomain:"planning-poker-343c7.firebaseapp.com",projectId:"planning-poker-343c7",storageBucket:"planning-poker-343c7.appspot.com",messagingSenderId:"26931702551",appId:"1:26931702551:web:08fb091c75b07a4be2e552",measurementId:"G-E3V6Y1ESZ1"};let eh=(()=>{class v{static#e=this.\u0275fac=function(D){return new(D||v)};static#t=this.\u0275mod=W.oAB({type:v,bootstrap:[Kt]});static#n=this.\u0275inj=W.cJS({providers:[{provide:le.eV,useClass:Bc}],imports:[C.b2,Na,b.ez,dt,nt,zo.PagesModule,Bt.m,ce.hO.initializeApp(Vu_firebaseConfig),ze.yb,Pe.ww,ho,Ya.register("ngsw-worker.js",{enabled:!(0,W.X6Q)(),registrationStrategy:"registerWhenStable:30000"}),Bt.m]})}return v})();C.q6().bootstrapModule(eh).catch(v=>console.error(v))},5619:(Mt,Ue,$)=>{$.d(Ue,{X:()=>W});var C=$(8645);class W extends C.x{constructor(se){super(),this._value=se}get value(){return this.getValue()}_subscribe(se){const ye=super._subscribe(se);return!ye.closed&&se.next(this._value),ye}getValue(){const{hasError:se,thrownError:ye,_value:pe}=this;if(se)throw ye;return this._throwIfClosed(),pe}next(se){super.next(this._value=se)}}},5592:(Mt,Ue,$)=>{$.d(Ue,{y:()=>b});var C=$(305),W=$(7394),le=$(4850),se=$(8407),ye=$(2653),pe=$(4674),Pe=$(1441);let b=(()=>{class Oe{constructor(Xe){Xe&&(this._subscribe=Xe)}lift(Xe){const gt=new Oe;return gt.source=this,gt.operator=Xe,gt}subscribe(Xe,gt,qt){const Et=function he(Oe){return Oe&&Oe instanceof C.Lv||function fe(Oe){return Oe&&(0,pe.m)(Oe.next)&&(0,pe.m)(Oe.error)&&(0,pe.m)(Oe.complete)}(Oe)&&(0,W.Nn)(Oe)}(Xe)?Xe:new C.Hp(Xe,gt,qt);return(0,Pe.x)(()=>{const{operator:dt,source:Kt}=this;Et.add(dt?dt.call(Et,Kt):Kt?this._subscribe(Et):this._trySubscribe(Et))}),Et}_trySubscribe(Xe){try{return this._subscribe(Xe)}catch(gt){Xe.error(gt)}}forEach(Xe,gt){return new(gt=Fe(gt))((qt,Et)=>{const dt=new C.Hp({next:Kt=>{try{Xe(Kt)}catch(Bt){Et(Bt),dt.unsubscribe()}},error:Et,complete:qt});this.subscribe(dt)})}_subscribe(Xe){var gt;return null===(gt=this.source)||void 0===gt?void 0:gt.subscribe(Xe)}[le.L](){return this}pipe(...Xe){return(0,se.U)(Xe)(this)}toPromise(Xe){return new(Xe=Fe(Xe))((gt,qt)=>{let Et;this.subscribe(dt=>Et=dt,dt=>qt(dt),()=>gt(Et))})}}return Oe.create=st=>new Oe(st),Oe})();function Fe(Oe){var st;return null!==(st=Oe??ye.config.Promise)&&void 0!==st?st:Promise}},8645:(Mt,Ue,$)=>{$.d(Ue,{x:()=>Pe});var C=$(5592),W=$(7394);const se=(0,$(2306).d)(Fe=>function(){Fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ye=$(9039),pe=$(1441);let Pe=(()=>{class Fe extends C.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(he){const Oe=new b(this,this);return Oe.operator=he,Oe}_throwIfClosed(){if(this.closed)throw new se}next(he){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Oe of this.currentObservers)Oe.next(he)}})}error(he){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=he;const{observers:Oe}=this;for(;Oe.length;)Oe.shift().error(he)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:he}=this;for(;he.length;)he.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var he;return(null===(he=this.observers)||void 0===he?void 0:he.length)>0}_trySubscribe(he){return this._throwIfClosed(),super._trySubscribe(he)}_subscribe(he){return this._throwIfClosed(),this._checkFinalizedStatuses(he),this._innerSubscribe(he)}_innerSubscribe(he){const{hasError:Oe,isStopped:st,observers:Xe}=this;return Oe||st?W.Lc:(this.currentObservers=null,Xe.push(he),new W.w0(()=>{this.currentObservers=null,(0,ye.P)(Xe,he)}))}_checkFinalizedStatuses(he){const{hasError:Oe,thrownError:st,isStopped:Xe}=this;Oe?he.error(st):Xe&&he.complete()}asObservable(){const he=new C.y;return he.source=this,he}}return Fe.create=(fe,he)=>new b(fe,he),Fe})();class b extends Pe{constructor(fe,he){super(),this.destination=fe,this.source=he}next(fe){var he,Oe;null===(Oe=null===(he=this.destination)||void 0===he?void 0:he.next)||void 0===Oe||Oe.call(he,fe)}error(fe){var he,Oe;null===(Oe=null===(he=this.destination)||void 0===he?void 0:he.error)||void 0===Oe||Oe.call(he,fe)}complete(){var fe,he;null===(he=null===(fe=this.destination)||void 0===fe?void 0:fe.complete)||void 0===he||he.call(fe)}_subscribe(fe){var he,Oe;return null!==(Oe=null===(he=this.source)||void 0===he?void 0:he.subscribe(fe))&&void 0!==Oe?Oe:W.Lc}}},305:(Mt,Ue,$)=>{$.d(Ue,{Hp:()=>qt,Lv:()=>Oe});var C=$(4674),W=$(7394),le=$(2653),se=$(3894),ye=$(2420);const pe=Fe("C",void 0,void 0);function Fe(nt,ce,ze){return{kind:nt,value:ce,error:ze}}var fe=$(7599),he=$(1441);class Oe extends W.w0{constructor(ce){super(),this.isStopped=!1,ce?(this.destination=ce,(0,W.Nn)(ce)&&ce.add(this)):this.destination=Bt}static create(ce,ze,ht){return new qt(ce,ze,ht)}next(ce){this.isStopped?Kt(function b(nt){return Fe("N",nt,void 0)}(ce),this):this._next(ce)}error(ce){this.isStopped?Kt(function Pe(nt){return Fe("E",void 0,nt)}(ce),this):(this.isStopped=!0,this._error(ce))}complete(){this.isStopped?Kt(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ce){this.destination.next(ce)}_error(ce){try{this.destination.error(ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const st=Function.prototype.bind;function Xe(nt,ce){return st.call(nt,ce)}class gt{constructor(ce){this.partialObserver=ce}next(ce){const{partialObserver:ze}=this;if(ze.next)try{ze.next(ce)}catch(ht){Et(ht)}}error(ce){const{partialObserver:ze}=this;if(ze.error)try{ze.error(ce)}catch(ht){Et(ht)}else Et(ce)}complete(){const{partialObserver:ce}=this;if(ce.complete)try{ce.complete()}catch(ze){Et(ze)}}}class qt extends Oe{constructor(ce,ze,ht){let Ge;if(super(),(0,C.m)(ce)||!ce)Ge={next:ce??void 0,error:ze??void 0,complete:ht??void 0};else{let Ze;this&&le.config.useDeprecatedNextContext?(Ze=Object.create(ce),Ze.unsubscribe=()=>this.unsubscribe(),Ge={next:ce.next&&Xe(ce.next,Ze),error:ce.error&&Xe(ce.error,Ze),complete:ce.complete&&Xe(ce.complete,Ze)}):Ge=ce}this.destination=new gt(Ge)}}function Et(nt){le.config.useDeprecatedSynchronousErrorHandling?(0,he.O)(nt):(0,se.h)(nt)}function Kt(nt,ce){const{onStoppedNotification:ze}=le.config;ze&&fe.z.setTimeout(()=>ze(nt,ce))}const Bt={closed:!0,next:ye.Z,error:function dt(nt){throw nt},complete:ye.Z}},7394:(Mt,Ue,$)=>{$.d(Ue,{Lc:()=>pe,w0:()=>ye,Nn:()=>Pe});var C=$(4674);const le=(0,$(2306).d)(Fe=>function(he){Fe(this),this.message=he?`${he.length} errors occurred during unsubscription:\n${he.map((Oe,st)=>`${st+1}) ${Oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=he});var se=$(9039);class ye{constructor(fe){this.initialTeardown=fe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let fe;if(!this.closed){this.closed=!0;const{_parentage:he}=this;if(he)if(this._parentage=null,Array.isArray(he))for(const Xe of he)Xe.remove(this);else he.remove(this);const{initialTeardown:Oe}=this;if((0,C.m)(Oe))try{Oe()}catch(Xe){fe=Xe instanceof le?Xe.errors:[Xe]}const{_finalizers:st}=this;if(st){this._finalizers=null;for(const Xe of st)try{b(Xe)}catch(gt){fe=fe??[],gt instanceof le?fe=[...fe,...gt.errors]:fe.push(gt)}}if(fe)throw new le(fe)}}add(fe){var he;if(fe&&fe!==this)if(this.closed)b(fe);else{if(fe instanceof ye){if(fe.closed||fe._hasParent(this))return;fe._addParent(this)}(this._finalizers=null!==(he=this._finalizers)&&void 0!==he?he:[]).push(fe)}}_hasParent(fe){const{_parentage:he}=this;return he===fe||Array.isArray(he)&&he.includes(fe)}_addParent(fe){const{_parentage:he}=this;this._parentage=Array.isArray(he)?(he.push(fe),he):he?[he,fe]:fe}_removeParent(fe){const{_parentage:he}=this;he===fe?this._parentage=null:Array.isArray(he)&&(0,se.P)(he,fe)}remove(fe){const{_finalizers:he}=this;he&&(0,se.P)(he,fe),fe instanceof ye&&fe._removeParent(this)}}ye.EMPTY=(()=>{const Fe=new ye;return Fe.closed=!0,Fe})();const pe=ye.EMPTY;function Pe(Fe){return Fe instanceof ye||Fe&&"closed"in Fe&&(0,C.m)(Fe.remove)&&(0,C.m)(Fe.add)&&(0,C.m)(Fe.unsubscribe)}function b(Fe){(0,C.m)(Fe)?Fe():Fe.unsubscribe()}},2653:(Mt,Ue,$)=>{$.d(Ue,{config:()=>C});const C={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},3168:(Mt,Ue,$)=>{$.d(Ue,{c:()=>pe});var C=$(5592),W=$(7394),le=$(6196),se=$(8251),ye=$(9360);class pe extends C.y{constructor(b,Fe){super(),this.source=b,this.subjectFactory=Fe,this._subject=null,this._refCount=0,this._connection=null,(0,ye.A)(b)&&(this.lift=b.lift)}_subscribe(b){return this.getSubject().subscribe(b)}getSubject(){const b=this._subject;return(!b||b.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:b}=this;this._subject=this._connection=null,b?.unsubscribe()}connect(){let b=this._connection;if(!b){b=this._connection=new W.w0;const Fe=this.getSubject();b.add(this.source.subscribe((0,se.x)(Fe,void 0,()=>{this._teardown(),Fe.complete()},fe=>{this._teardown(),Fe.error(fe)},()=>this._teardown()))),b.closed&&(this._connection=null,b=W.w0.EMPTY)}return b}refCount(){return(0,le.x)()(this)}}},5211:(Mt,Ue,$)=>{$.d(Ue,{z:()=>ye});var C=$(7537),le=$(9940),se=$(2459);function ye(...pe){return function W(){return(0,C.J)(1)}()((0,se.D)(pe,(0,le.yG)(pe)))}},4911:(Mt,Ue,$)=>{$.d(Ue,{P:()=>le});var C=$(5592),W=$(4829);function le(se){return new C.y(ye=>{(0,W.Xf)(se()).subscribe(ye)})}},6232:(Mt,Ue,$)=>{$.d(Ue,{E:()=>W});const W=new($(5592).y)(ye=>ye.complete())},2459:(Mt,Ue,$)=>{$.d(Ue,{D:()=>ce});var C=$(4829),W=$(3093),le=$(5137),pe=$(5592),b=$(4971),Fe=$(4674),fe=$(7103);function Oe(ze,ht){if(!ze)throw new Error("Iterable cannot be null");return new pe.y(Ge=>{(0,fe.f)(Ge,ht,()=>{const Ze=ze[Symbol.asyncIterator]();(0,fe.f)(Ge,ht,()=>{Ze.next().then($e=>{$e.done?Ge.complete():Ge.next($e.value)})},0,!0)})})}var st=$(8382),Xe=$(4026),gt=$(4266),qt=$(3664),Et=$(5726),dt=$(9853),Kt=$(541);function ce(ze,ht){return ht?function nt(ze,ht){if(null!=ze){if((0,st.c)(ze))return function se(ze,ht){return(0,C.Xf)(ze).pipe((0,le.R)(ht),(0,W.Q)(ht))}(ze,ht);if((0,gt.z)(ze))return function Pe(ze,ht){return new pe.y(Ge=>{let Ze=0;return ht.schedule(function(){Ze===ze.length?Ge.complete():(Ge.next(ze[Ze++]),Ge.closed||this.schedule())})})}(ze,ht);if((0,Xe.t)(ze))return function ye(ze,ht){return(0,C.Xf)(ze).pipe((0,le.R)(ht),(0,W.Q)(ht))}(ze,ht);if((0,Et.D)(ze))return Oe(ze,ht);if((0,qt.T)(ze))return function he(ze,ht){return new pe.y(Ge=>{let Ze;return(0,fe.f)(Ge,ht,()=>{Ze=ze[b.h](),(0,fe.f)(Ge,ht,()=>{let $e,ue;try{({value:$e,done:ue}=Ze.next())}catch(Ve){return void Ge.error(Ve)}ue?Ge.complete():Ge.next($e)},0,!0)}),()=>(0,Fe.m)(Ze?.return)&&Ze.return()})}(ze,ht);if((0,Kt.L)(ze))return function Bt(ze,ht){return Oe((0,Kt.Q)(ze),ht)}(ze,ht)}throw(0,dt.z)(ze)}(ze,ht):(0,C.Xf)(ze)}},4829:(Mt,Ue,$)=>{$.d(Ue,{Xf:()=>st});var C=$(7582),W=$(4266),le=$(4026),se=$(5592),ye=$(8382),pe=$(5726),Pe=$(9853),b=$(3664),Fe=$(541),fe=$(4674),he=$(3894),Oe=$(4850);function st(nt){if(nt instanceof se.y)return nt;if(null!=nt){if((0,ye.c)(nt))return function Xe(nt){return new se.y(ce=>{const ze=nt[Oe.L]();if((0,fe.m)(ze.subscribe))return ze.subscribe(ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(nt);if((0,W.z)(nt))return function gt(nt){return new se.y(ce=>{for(let ze=0;ze<nt.length&&!ce.closed;ze++)ce.next(nt[ze]);ce.complete()})}(nt);if((0,le.t)(nt))return function qt(nt){return new se.y(ce=>{nt.then(ze=>{ce.closed||(ce.next(ze),ce.complete())},ze=>ce.error(ze)).then(null,he.h)})}(nt);if((0,pe.D)(nt))return dt(nt);if((0,b.T)(nt))return function Et(nt){return new se.y(ce=>{for(const ze of nt)if(ce.next(ze),ce.closed)return;ce.complete()})}(nt);if((0,Fe.L)(nt))return function Kt(nt){return dt((0,Fe.Q)(nt))}(nt)}throw(0,Pe.z)(nt)}function dt(nt){return new se.y(ce=>{(function Bt(nt,ce){var ze,ht,Ge,Ze;return(0,C.mG)(this,void 0,void 0,function*(){try{for(ze=(0,C.KL)(nt);!(ht=yield ze.next()).done;)if(ce.next(ht.value),ce.closed)return}catch($e){Ge={error:$e}}finally{try{ht&&!ht.done&&(Ze=ze.return)&&(yield Ze.call(ze))}finally{if(Ge)throw Ge.error}}ce.complete()})})(nt,ce).catch(ze=>ce.error(ze))})}},3019:(Mt,Ue,$)=>{$.d(Ue,{T:()=>pe});var C=$(7537),W=$(4829),le=$(6232),se=$(9940),ye=$(2459);function pe(...Pe){const b=(0,se.yG)(Pe),Fe=(0,se._6)(Pe,1/0),fe=Pe;return fe.length?1===fe.length?(0,W.Xf)(fe[0]):(0,C.J)(Fe)((0,ye.D)(fe,b)):le.E}},2096:(Mt,Ue,$)=>{$.d(Ue,{of:()=>le});var C=$(9940),W=$(2459);function le(...se){const ye=(0,C.yG)(se);return(0,W.D)(se,ye)}},8504:(Mt,Ue,$)=>{$.d(Ue,{_:()=>le});var C=$(5592),W=$(4674);function le(se,ye){const pe=(0,W.m)(se)?se:()=>se,Pe=b=>b.error(pe());return new C.y(ye?b=>ye.schedule(Pe,0,b):Pe)}},8251:(Mt,Ue,$)=>{$.d(Ue,{x:()=>W});var C=$(305);function W(se,ye,pe,Pe,b){return new le(se,ye,pe,Pe,b)}class le extends C.Lv{constructor(ye,pe,Pe,b,Fe,fe){super(ye),this.onFinalize=Fe,this.shouldUnsubscribe=fe,this._next=pe?function(he){try{pe(he)}catch(Oe){ye.error(Oe)}}:super._next,this._error=b?function(he){try{b(he)}catch(Oe){ye.error(Oe)}finally{this.unsubscribe()}}:super._error,this._complete=Pe?function(){try{Pe()}catch(he){ye.error(he)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ye;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(ye=this.onFinalize)||void 0===ye||ye.call(this))}}}},3572:(Mt,Ue,$)=>{$.d(Ue,{d:()=>le});var C=$(9360),W=$(8251);function le(se){return(0,C.e)((ye,pe)=>{let Pe=!1;ye.subscribe((0,W.x)(pe,b=>{Pe=!0,pe.next(b)},()=>{Pe||pe.next(se),pe.complete()}))})}},2181:(Mt,Ue,$)=>{$.d(Ue,{h:()=>le});var C=$(9360),W=$(8251);function le(se,ye){return(0,C.e)((pe,Pe)=>{let b=0;pe.subscribe((0,W.x)(Pe,Fe=>se.call(ye,Fe,b++)&&Pe.next(Fe)))})}},1374:(Mt,Ue,$)=>{$.d(Ue,{P:()=>Pe});var C=$(6973),W=$(2181),le=$(8180),se=$(3572),ye=$(3026),pe=$(2737);function Pe(b,Fe){const fe=arguments.length>=2;return he=>he.pipe(b?(0,W.h)((Oe,st)=>b(Oe,st,he)):pe.y,(0,le.q)(1),fe?(0,se.d)(Fe):(0,ye.T)(()=>new C.K))}},7398:(Mt,Ue,$)=>{$.d(Ue,{U:()=>le});var C=$(9360),W=$(8251);function le(se,ye){return(0,C.e)((pe,Pe)=>{let b=0;pe.subscribe((0,W.x)(Pe,Fe=>{Pe.next(se.call(ye,Fe,b++))}))})}},975:(Mt,Ue,$)=>{$.d(Ue,{h:()=>W});var C=$(7398);function W(le){return(0,C.U)(()=>le)}},7537:(Mt,Ue,$)=>{$.d(Ue,{J:()=>le});var C=$(1631),W=$(2737);function le(se=1/0){return(0,C.z)(W.y,se)}},1631:(Mt,Ue,$)=>{$.d(Ue,{z:()=>b});var C=$(7398),W=$(4829),le=$(9360),se=$(7103),ye=$(8251),Pe=$(4674);function b(Fe,fe,he=1/0){return(0,Pe.m)(fe)?b((Oe,st)=>(0,C.U)((Xe,gt)=>fe(Oe,Xe,st,gt))((0,W.Xf)(Fe(Oe,st))),he):("number"==typeof fe&&(he=fe),(0,le.e)((Oe,st)=>function pe(Fe,fe,he,Oe,st,Xe,gt,qt){const Et=[];let dt=0,Kt=0,Bt=!1;const nt=()=>{Bt&&!Et.length&&!dt&&fe.complete()},ce=ht=>dt<Oe?ze(ht):Et.push(ht),ze=ht=>{Xe&&fe.next(ht),dt++;let Ge=!1;(0,W.Xf)(he(ht,Kt++)).subscribe((0,ye.x)(fe,Ze=>{st?.(Ze),Xe?ce(Ze):fe.next(Ze)},()=>{Ge=!0},void 0,()=>{if(Ge)try{for(dt--;Et.length&&dt<Oe;){const Ze=Et.shift();gt?(0,se.f)(fe,gt,()=>ze(Ze)):ze(Ze)}nt()}catch(Ze){fe.error(Ze)}}))};return Fe.subscribe((0,ye.x)(fe,ce,()=>{Bt=!0,nt()})),()=>{qt?.()}}(Oe,st,Fe,he)))}},3093:(Mt,Ue,$)=>{$.d(Ue,{Q:()=>se});var C=$(7103),W=$(9360),le=$(8251);function se(ye,pe=0){return(0,W.e)((Pe,b)=>{Pe.subscribe((0,le.x)(b,Fe=>(0,C.f)(b,ye,()=>b.next(Fe),pe),()=>(0,C.f)(b,ye,()=>b.complete(),pe),Fe=>(0,C.f)(b,ye,()=>b.error(Fe),pe)))})}},6196:(Mt,Ue,$)=>{$.d(Ue,{x:()=>le});var C=$(9360),W=$(8251);function le(){return(0,C.e)((se,ye)=>{let pe=null;se._refCount++;const Pe=(0,W.x)(ye,void 0,void 0,void 0,()=>{if(!se||se._refCount<=0||0<--se._refCount)return void(pe=null);const b=se._connection,Fe=pe;pe=null,b&&(!Fe||b===Fe)&&b.unsubscribe(),ye.unsubscribe()});se.subscribe(Pe),Pe.closed||(pe=se.connect())})}},6699:(Mt,Ue,$)=>{$.d(Ue,{R:()=>se});var C=$(9360),W=$(8251);function se(ye,pe){return(0,C.e)(function le(ye,pe,Pe,b,Fe){return(fe,he)=>{let Oe=Pe,st=pe,Xe=0;fe.subscribe((0,W.x)(he,gt=>{const qt=Xe++;st=Oe?ye(st,gt,qt):(Oe=!0,gt),b&&he.next(st)},Fe&&(()=>{Oe&&he.next(st),he.complete()})))}}(ye,pe,arguments.length>=2,!0))}},7921:(Mt,Ue,$)=>{$.d(Ue,{O:()=>se});var C=$(5211),W=$(9940),le=$(9360);function se(...ye){const pe=(0,W.yG)(ye);return(0,le.e)((Pe,b)=>{(pe?(0,C.z)(ye,Pe,pe):(0,C.z)(ye,Pe)).subscribe(b)})}},5137:(Mt,Ue,$)=>{$.d(Ue,{R:()=>W});var C=$(9360);function W(le,se=0){return(0,C.e)((ye,pe)=>{pe.add(le.schedule(()=>ye.subscribe(pe),se))})}},4664:(Mt,Ue,$)=>{$.d(Ue,{w:()=>se});var C=$(4829),W=$(9360),le=$(8251);function se(ye,pe){return(0,W.e)((Pe,b)=>{let Fe=null,fe=0,he=!1;const Oe=()=>he&&!Fe&&b.complete();Pe.subscribe((0,le.x)(b,st=>{Fe?.unsubscribe();let Xe=0;const gt=fe++;(0,C.Xf)(ye(st,gt)).subscribe(Fe=(0,le.x)(b,qt=>b.next(pe?pe(st,qt,gt,Xe++):qt),()=>{Fe=null,Oe()}))},()=>{he=!0,Oe()}))})}},8180:(Mt,Ue,$)=>{$.d(Ue,{q:()=>se});var C=$(6232),W=$(9360),le=$(8251);function se(ye){return ye<=0?()=>C.E:(0,W.e)((pe,Pe)=>{let b=0;pe.subscribe((0,le.x)(Pe,Fe=>{++b<=ye&&(Pe.next(Fe),ye<=b&&Pe.complete())}))})}},9397:(Mt,Ue,$)=>{$.d(Ue,{b:()=>ye});var C=$(4674),W=$(9360),le=$(8251),se=$(2737);function ye(pe,Pe,b){const Fe=(0,C.m)(pe)||Pe||b?{next:pe,error:Pe,complete:b}:pe;return Fe?(0,W.e)((fe,he)=>{var Oe;null===(Oe=Fe.subscribe)||void 0===Oe||Oe.call(Fe);let st=!0;fe.subscribe((0,le.x)(he,Xe=>{var gt;null===(gt=Fe.next)||void 0===gt||gt.call(Fe,Xe),he.next(Xe)},()=>{var Xe;st=!1,null===(Xe=Fe.complete)||void 0===Xe||Xe.call(Fe),he.complete()},Xe=>{var gt;st=!1,null===(gt=Fe.error)||void 0===gt||gt.call(Fe,Xe),he.error(Xe)},()=>{var Xe,gt;st&&(null===(Xe=Fe.unsubscribe)||void 0===Xe||Xe.call(Fe)),null===(gt=Fe.finalize)||void 0===gt||gt.call(Fe)}))}):se.y}},3026:(Mt,Ue,$)=>{$.d(Ue,{T:()=>se});var C=$(6973),W=$(9360),le=$(8251);function se(pe=ye){return(0,W.e)((Pe,b)=>{let Fe=!1;Pe.subscribe((0,le.x)(b,fe=>{Fe=!0,b.next(fe)},()=>Fe?b.complete():b.error(pe())))})}function ye(){return new C.K}},1954:(Mt,Ue,$)=>{$.d(Ue,{o:()=>ye});var C=$(7394);class W extends C.w0{constructor(Pe,b){super()}schedule(Pe,b=0){return this}}const le={setInterval(pe,Pe,...b){const{delegate:Fe}=le;return Fe?.setInterval?Fe.setInterval(pe,Pe,...b):setInterval(pe,Pe,...b)},clearInterval(pe){const{delegate:Pe}=le;return(Pe?.clearInterval||clearInterval)(pe)},delegate:void 0};var se=$(9039);class ye extends W{constructor(Pe,b){super(Pe,b),this.scheduler=Pe,this.work=b,this.pending=!1}schedule(Pe,b=0){var Fe;if(this.closed)return this;this.state=Pe;const fe=this.id,he=this.scheduler;return null!=fe&&(this.id=this.recycleAsyncId(he,fe,b)),this.pending=!0,this.delay=b,this.id=null!==(Fe=this.id)&&void 0!==Fe?Fe:this.requestAsyncId(he,this.id,b),this}requestAsyncId(Pe,b,Fe=0){return le.setInterval(Pe.flush.bind(Pe,this),Fe)}recycleAsyncId(Pe,b,Fe=0){if(null!=Fe&&this.delay===Fe&&!1===this.pending)return b;null!=b&&le.clearInterval(b)}execute(Pe,b){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Fe=this._execute(Pe,b);if(Fe)return Fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Pe,b){let fe,Fe=!1;try{this.work(Pe)}catch(he){Fe=!0,fe=he||new Error("Scheduled action threw falsy error")}if(Fe)return this.unsubscribe(),fe}unsubscribe(){if(!this.closed){const{id:Pe,scheduler:b}=this,{actions:Fe}=b;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(Fe,this),null!=Pe&&(this.id=this.recycleAsyncId(b,Pe,null)),this.delay=null,super.unsubscribe()}}}},2631:(Mt,Ue,$)=>{$.d(Ue,{v:()=>le});var C=$(4552);class W{constructor(ye,pe=W.now){this.schedulerActionCtor=ye,this.now=pe}schedule(ye,pe=0,Pe){return new this.schedulerActionCtor(this,ye).schedule(Pe,pe)}}W.now=C.l.now;class le extends W{constructor(ye,pe=W.now){super(ye,pe),this.actions=[],this._active=!1}flush(ye){const{actions:pe}=this;if(this._active)return void pe.push(ye);let Pe;this._active=!0;do{if(Pe=ye.execute(ye.state,ye.delay))break}while(ye=pe.shift());if(this._active=!1,Pe){for(;ye=pe.shift();)ye.unsubscribe();throw Pe}}}},6321:(Mt,Ue,$)=>{$.d(Ue,{P:()=>se,z:()=>le});var C=$(1954);const le=new($(2631).v)(C.o),se=le},4552:(Mt,Ue,$)=>{$.d(Ue,{l:()=>C});const C={now:()=>(C.delegate||Date).now(),delegate:void 0}},7599:(Mt,Ue,$)=>{$.d(Ue,{z:()=>C});const C={setTimeout(W,le,...se){const{delegate:ye}=C;return ye?.setTimeout?ye.setTimeout(W,le,...se):setTimeout(W,le,...se)},clearTimeout(W){const{delegate:le}=C;return(le?.clearTimeout||clearTimeout)(W)},delegate:void 0}},4971:(Mt,Ue,$)=>{$.d(Ue,{h:()=>W});const W=function C(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Mt,Ue,$)=>{$.d(Ue,{L:()=>C});const C="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(Mt,Ue,$)=>{$.d(Ue,{K:()=>W});const W=(0,$(2306).d)(le=>function(){le(this),this.name="EmptyError",this.message="no elements in sequence"})},9940:(Mt,Ue,$)=>{$.d(Ue,{_6:()=>pe,jO:()=>se,yG:()=>ye});var C=$(4674),W=$(671);function le(Pe){return Pe[Pe.length-1]}function se(Pe){return(0,C.m)(le(Pe))?Pe.pop():void 0}function ye(Pe){return(0,W.K)(le(Pe))?Pe.pop():void 0}function pe(Pe,b){return"number"==typeof le(Pe)?Pe.pop():b}},7453:(Mt,Ue,$)=>{$.d(Ue,{D:()=>ye});const{isArray:C}=Array,{getPrototypeOf:W,prototype:le,keys:se}=Object;function ye(Pe){if(1===Pe.length){const b=Pe[0];if(C(b))return{args:b,keys:null};if(function pe(Pe){return Pe&&"object"==typeof Pe&&W(Pe)===le}(b)){const Fe=se(b);return{args:Fe.map(fe=>b[fe]),keys:Fe}}}return{args:Pe,keys:null}}},9039:(Mt,Ue,$)=>{function C(W,le){if(W){const se=W.indexOf(le);0<=se&&W.splice(se,1)}}$.d(Ue,{P:()=>C})},2306:(Mt,Ue,$)=>{function C(W){const se=W(ye=>{Error.call(ye),ye.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}$.d(Ue,{d:()=>C})},2714:(Mt,Ue,$)=>{function C(W,le){return W.reduce((se,ye,pe)=>(se[ye]=le[pe],se),{})}$.d(Ue,{n:()=>C})},1441:(Mt,Ue,$)=>{$.d(Ue,{O:()=>se,x:()=>le});var C=$(2653);let W=null;function le(ye){if(C.config.useDeprecatedSynchronousErrorHandling){const pe=!W;if(pe&&(W={errorThrown:!1,error:null}),ye(),pe){const{errorThrown:Pe,error:b}=W;if(W=null,Pe)throw b}}else ye()}function se(ye){C.config.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=ye)}},7103:(Mt,Ue,$)=>{function C(W,le,se,ye=0,pe=!1){const Pe=le.schedule(function(){se(),pe?W.add(this.schedule(null,ye)):this.unsubscribe()},ye);if(W.add(Pe),!pe)return Pe}$.d(Ue,{f:()=>C})},2737:(Mt,Ue,$)=>{function C(W){return W}$.d(Ue,{y:()=>C})},4266:(Mt,Ue,$)=>{$.d(Ue,{z:()=>C});const C=W=>W&&"number"==typeof W.length&&"function"!=typeof W},5726:(Mt,Ue,$)=>{$.d(Ue,{D:()=>W});var C=$(4674);function W(le){return Symbol.asyncIterator&&(0,C.m)(le?.[Symbol.asyncIterator])}},4674:(Mt,Ue,$)=>{function C(W){return"function"==typeof W}$.d(Ue,{m:()=>C})},8382:(Mt,Ue,$)=>{$.d(Ue,{c:()=>le});var C=$(4850),W=$(4674);function le(se){return(0,W.m)(se[C.L])}},3664:(Mt,Ue,$)=>{$.d(Ue,{T:()=>le});var C=$(4971),W=$(4674);function le(se){return(0,W.m)(se?.[C.h])}},4026:(Mt,Ue,$)=>{$.d(Ue,{t:()=>W});var C=$(4674);function W(le){return(0,C.m)(le?.then)}},541:(Mt,Ue,$)=>{$.d(Ue,{L:()=>se,Q:()=>le});var C=$(7582),W=$(4674);function le(ye){return(0,C.FC)(this,arguments,function*(){const Pe=ye.getReader();try{for(;;){const{value:b,done:Fe}=yield(0,C.qq)(Pe.read());if(Fe)return yield(0,C.qq)(void 0);yield yield(0,C.qq)(b)}}finally{Pe.releaseLock()}})}function se(ye){return(0,W.m)(ye?.getReader)}},671:(Mt,Ue,$)=>{$.d(Ue,{K:()=>W});var C=$(4674);function W(le){return le&&(0,C.m)(le.schedule)}},9360:(Mt,Ue,$)=>{$.d(Ue,{A:()=>W,e:()=>le});var C=$(4674);function W(se){return(0,C.m)(se?.lift)}function le(se){return ye=>{if(W(ye))return ye.lift(function(pe){try{return se(pe,this)}catch(Pe){this.error(Pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(Mt,Ue,$)=>{$.d(Ue,{Z:()=>se});var C=$(7398);const{isArray:W}=Array;function se(ye){return(0,C.U)(pe=>function le(ye,pe){return W(pe)?ye(...pe):ye(pe)}(ye,pe))}},2420:(Mt,Ue,$)=>{function C(){}$.d(Ue,{Z:()=>C})},8407:(Mt,Ue,$)=>{$.d(Ue,{U:()=>le,z:()=>W});var C=$(2737);function W(...se){return le(se)}function le(se){return 0===se.length?C.y:1===se.length?se[0]:function(pe){return se.reduce((Pe,b)=>b(Pe),pe)}}},3894:(Mt,Ue,$)=>{$.d(Ue,{h:()=>le});var C=$(2653),W=$(7599);function le(se){W.z.setTimeout(()=>{const{onUnhandledError:ye}=C.config;if(!ye)throw se;ye(se)})}},9853:(Mt,Ue,$)=>{function C(W){return new TypeError(`You provided ${null!==W&&"object"==typeof W?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}$.d(Ue,{z:()=>C})},6825:(Mt,Ue,$)=>{$.d(Ue,{SB:()=>b,X$:()=>le,ZE:()=>Ge,ZN:()=>ht,eR:()=>fe,jt:()=>se,k1:()=>Ze,l3:()=>W,mo:()=>C,oB:()=>Pe,vP:()=>pe});var C=function($e){return $e[$e.State=0]="State",$e[$e.Transition=1]="Transition",$e[$e.Sequence=2]="Sequence",$e[$e.Group=3]="Group",$e[$e.Animate=4]="Animate",$e[$e.Keyframes=5]="Keyframes",$e[$e.Style=6]="Style",$e[$e.Trigger=7]="Trigger",$e[$e.Reference=8]="Reference",$e[$e.AnimateChild=9]="AnimateChild",$e[$e.AnimateRef=10]="AnimateRef",$e[$e.Query=11]="Query",$e[$e.Stagger=12]="Stagger",$e}(C||{});const W="*";function le($e,ue){return{type:C.Trigger,name:$e,definitions:ue,options:{}}}function se($e,ue=null){return{type:C.Animate,styles:ue,timings:$e}}function pe($e,ue=null){return{type:C.Sequence,steps:$e,options:ue}}function Pe($e){return{type:C.Style,styles:$e,offset:null}}function b($e,ue,Ve){return{type:C.State,name:$e,styles:ue,options:Ve}}function fe($e,ue,Ve=null){return{type:C.Transition,expr:$e,animation:ue,options:Ve}}class ht{constructor(ue=0,Ve=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ue+Ve}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ue=>ue()),this._onDoneFns=[])}onStart(ue){this._originalOnStartFns.push(ue),this._onStartFns.push(ue)}onDone(ue){this._originalOnDoneFns.push(ue),this._onDoneFns.push(ue)}onDestroy(ue){this._onDestroyFns.push(ue)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ue=>ue()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ue=>ue()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(ue){this._position=this.totalTime?ue*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ue){const Ve="start"==ue?this._onStartFns:this._onDoneFns;Ve.forEach(an=>an()),Ve.length=0}}class Ge{constructor(ue){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ue;let Ve=0,an=0,At=0;const Un=this.players.length;0==Un?queueMicrotask(()=>this._onFinish()):this.players.forEach(Rn=>{Rn.onDone(()=>{++Ve==Un&&this._onFinish()}),Rn.onDestroy(()=>{++an==Un&&this._onDestroy()}),Rn.onStart(()=>{++At==Un&&this._onStart()})}),this.totalTime=this.players.reduce((Rn,zt)=>Math.max(Rn,zt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ue=>ue()),this._onDoneFns=[])}init(){this.players.forEach(ue=>ue.init())}onStart(ue){this._onStartFns.push(ue)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ue=>ue()),this._onStartFns=[])}onDone(ue){this._onDoneFns.push(ue)}onDestroy(ue){this._onDestroyFns.push(ue)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ue=>ue.play())}pause(){this.players.forEach(ue=>ue.pause())}restart(){this.players.forEach(ue=>ue.restart())}finish(){this._onFinish(),this.players.forEach(ue=>ue.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ue=>ue.destroy()),this._onDestroyFns.forEach(ue=>ue()),this._onDestroyFns=[])}reset(){this.players.forEach(ue=>ue.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ue){const Ve=ue*this.totalTime;this.players.forEach(an=>{const At=an.totalTime?Math.min(1,Ve/an.totalTime):1;an.setPosition(At)})}getPosition(){const ue=this.players.reduce((Ve,an)=>null===Ve||an.totalTime>Ve.totalTime?an:Ve,null);return null!=ue?ue.getPosition():0}beforeDestroy(){this.players.forEach(ue=>{ue.beforeDestroy&&ue.beforeDestroy()})}triggerCallback(ue){const Ve="start"==ue?this._onStartFns:this._onDoneFns;Ve.forEach(an=>an()),Ve.length=0}}const Ze="!"},6814:(Mt,Ue,$)=>{$.d(Ue,{Do:()=>qt,EM:()=>wa,HT:()=>se,JF:()=>jo,K0:()=>pe,Mx:()=>ln,NF:()=>Pi,O5:()=>On,PM:()=>es,S$:()=>st,V_:()=>b,Ye:()=>Et,b0:()=>gt,bD:()=>Hi,ez:()=>Ts,q:()=>le,sg:()=>io,w_:()=>ye});var C=$(9212);let W=null;function le(){return W}function se(P){W||(W=P)}class ye{}const pe=new C.OlP("DocumentToken");let Pe=(()=>{class P{historyGo(L){throw new Error("Not implemented")}static#e=this.\u0275fac=function(z){return new(z||P)};static#t=this.\u0275prov=C.Yz7({token:P,factory:()=>(0,C.f3M)(Fe),providedIn:"platform"})}return P})();const b=new C.OlP("Location Initialized");let Fe=(()=>{class P extends Pe{constructor(){super(),this._doc=(0,C.f3M)(pe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return le().getBaseHref(this._doc)}onPopState(L){const z=le().getGlobalEventTarget(this._doc,"window");return z.addEventListener("popstate",L,!1),()=>z.removeEventListener("popstate",L)}onHashChange(L){const z=le().getGlobalEventTarget(this._doc,"window");return z.addEventListener("hashchange",L,!1),()=>z.removeEventListener("hashchange",L)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(L){this._location.pathname=L}pushState(L,z,A){this._history.pushState(L,z,A)}replaceState(L,z,A){this._history.replaceState(L,z,A)}forward(){this._history.forward()}back(){this._history.back()}historyGo(L=0){this._history.go(L)}getState(){return this._history.state}static#e=this.\u0275fac=function(z){return new(z||P)};static#t=this.\u0275prov=C.Yz7({token:P,factory:()=>new P,providedIn:"platform"})}return P})();function fe(P,K){if(0==P.length)return K;if(0==K.length)return P;let L=0;return P.endsWith("/")&&L++,K.startsWith("/")&&L++,2==L?P+K.substring(1):1==L?P+K:P+"/"+K}function he(P){const K=P.match(/#|\?|$/),L=K&&K.index||P.length;return P.slice(0,L-("/"===P[L-1]?1:0))+P.slice(L)}function Oe(P){return P&&"?"!==P[0]?"?"+P:P}let st=(()=>{class P{historyGo(L){throw new Error("Not implemented")}static#e=this.\u0275fac=function(z){return new(z||P)};static#t=this.\u0275prov=C.Yz7({token:P,factory:()=>(0,C.f3M)(gt),providedIn:"root"})}return P})();const Xe=new C.OlP("appBaseHref");let gt=(()=>{class P extends st{constructor(L,z){super(),this._platformLocation=L,this._removeListenerFns=[],this._baseHref=z??this._platformLocation.getBaseHrefFromDOM()??(0,C.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}prepareExternalUrl(L){return fe(this._baseHref,L)}path(L=!1){const z=this._platformLocation.pathname+Oe(this._platformLocation.search),A=this._platformLocation.hash;return A&&L?`${z}${A}`:z}pushState(L,z,A,N){const w=this.prepareExternalUrl(A+Oe(N));this._platformLocation.pushState(L,z,w)}replaceState(L,z,A,N){const w=this.prepareExternalUrl(A+Oe(N));this._platformLocation.replaceState(L,z,w)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}static#e=this.\u0275fac=function(z){return new(z||P)(C.LFG(Pe),C.LFG(Xe,8))};static#t=this.\u0275prov=C.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"})}return P})(),qt=(()=>{class P extends st{constructor(L,z){super(),this._platformLocation=L,this._baseHref="",this._removeListenerFns=[],null!=z&&(this._baseHref=z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}path(L=!1){let z=this._platformLocation.hash;return null==z&&(z="#"),z.length>0?z.substring(1):z}prepareExternalUrl(L){const z=fe(this._baseHref,L);return z.length>0?"#"+z:z}pushState(L,z,A,N){let w=this.prepareExternalUrl(A+Oe(N));0==w.length&&(w=this._platformLocation.pathname),this._platformLocation.pushState(L,z,w)}replaceState(L,z,A,N){let w=this.prepareExternalUrl(A+Oe(N));0==w.length&&(w=this._platformLocation.pathname),this._platformLocation.replaceState(L,z,w)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}static#e=this.\u0275fac=function(z){return new(z||P)(C.LFG(Pe),C.LFG(Xe,8))};static#t=this.\u0275prov=C.Yz7({token:P,factory:P.\u0275fac})}return P})(),Et=(()=>{class P{constructor(L){this._subject=new C.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=L;const z=this._locationStrategy.getBaseHref();this._basePath=function nt(P){if(new RegExp("^(https?:)?//").test(P)){const[,L]=P.split(/\/\/[^\/]+/);return L}return P}(he(Bt(z))),this._locationStrategy.onPopState(A=>{this._subject.emit({url:this.path(!0),pop:!0,state:A.state,type:A.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(L=!1){return this.normalize(this._locationStrategy.path(L))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(L,z=""){return this.path()==this.normalize(L+Oe(z))}normalize(L){return P.stripTrailingSlash(function Kt(P,K){if(!P||!K.startsWith(P))return K;const L=K.substring(P.length);return""===L||["/",";","?","#"].includes(L[0])?L:K}(this._basePath,Bt(L)))}prepareExternalUrl(L){return L&&"/"!==L[0]&&(L="/"+L),this._locationStrategy.prepareExternalUrl(L)}go(L,z="",A=null){this._locationStrategy.pushState(A,"",L,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+Oe(z)),A)}replaceState(L,z="",A=null){this._locationStrategy.replaceState(A,"",L,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+Oe(z)),A)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(L=0){this._locationStrategy.historyGo?.(L)}onUrlChange(L){return this._urlChangeListeners.push(L),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(z=>{this._notifyUrlChangeListeners(z.url,z.state)})),()=>{const z=this._urlChangeListeners.indexOf(L);this._urlChangeListeners.splice(z,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(L="",z){this._urlChangeListeners.forEach(A=>A(L,z))}subscribe(L,z,A){return this._subject.subscribe({next:L,error:z,complete:A})}static#e=this.normalizeQueryParams=Oe;static#t=this.joinWithSlash=fe;static#n=this.stripTrailingSlash=he;static#r=this.\u0275fac=function(z){return new(z||P)(C.LFG(st))};static#i=this.\u0275prov=C.Yz7({token:P,factory:()=>function dt(){return new Et((0,C.LFG)(st))}(),providedIn:"root"})}return P})();function Bt(P){return P.replace(/\/index.html$/,"")}function ln(P,K){K=encodeURIComponent(K);for(const L of P.split(";")){const z=L.indexOf("="),[A,N]=-1==z?[L,""]:[L.slice(0,z),L.slice(z+1)];if(A.trim()===K)return decodeURIComponent(N)}return null}class va{constructor(K,L,z,A){this.$implicit=K,this.ngForOf=L,this.index=z,this.count=A}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let io=(()=>{class P{set ngForOf(L){this._ngForOf=L,this._ngForOfDirty=!0}set ngForTrackBy(L){this._trackByFn=L}get ngForTrackBy(){return this._trackByFn}constructor(L,z,A){this._viewContainer=L,this._template=z,this._differs=A,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(L){L&&(this._template=L)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const L=this._ngForOf;!this._differ&&L&&(this._differ=this._differs.find(L).create(this.ngForTrackBy))}if(this._differ){const L=this._differ.diff(this._ngForOf);L&&this._applyChanges(L)}}_applyChanges(L){const z=this._viewContainer;L.forEachOperation((A,N,w)=>{if(null==A.previousIndex)z.createEmbeddedView(this._template,new va(A.item,this._ngForOf,-1,-1),null===w?void 0:w);else if(null==w)z.remove(null===N?void 0:N);else if(null!==N){const U=z.get(N);z.move(U,w),gr(U,A)}});for(let A=0,N=z.length;A<N;A++){const U=z.get(A).context;U.index=A,U.count=N,U.ngForOf=this._ngForOf}L.forEachIdentityChange(A=>{gr(z.get(A.currentIndex),A)})}static ngTemplateContextGuard(L,z){return!0}static#e=this.\u0275fac=function(z){return new(z||P)(C.Y36(C.s_b),C.Y36(C.Rgc),C.Y36(C.ZZ4))};static#t=this.\u0275dir=C.lG2({type:P,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return P})();function gr(P,K){P.context.$implicit=K.item}let On=(()=>{class P{constructor(L,z){this._viewContainer=L,this._context=new Ji,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=z}set ngIf(L){this._context.$implicit=this._context.ngIf=L,this._updateView()}set ngIfThen(L){vi("ngIfThen",L),this._thenTemplateRef=L,this._thenViewRef=null,this._updateView()}set ngIfElse(L){vi("ngIfElse",L),this._elseTemplateRef=L,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(L,z){return!0}static#e=this.\u0275fac=function(z){return new(z||P)(C.Y36(C.s_b),C.Y36(C.Rgc))};static#t=this.\u0275dir=C.lG2({type:P,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return P})();class Ji{constructor(){this.$implicit=null,this.ngIf=null}}function vi(P,K){if(K&&!K.createEmbeddedView)throw new Error(`${P} must be a TemplateRef, but received '${(0,C.AaK)(K)}'.`)}let Ts=(()=>{class P{static#e=this.\u0275fac=function(z){return new(z||P)};static#t=this.\u0275mod=C.oAB({type:P});static#n=this.\u0275inj=C.cJS({})}return P})();const Hi="browser",$n="server";function Pi(P){return P===Hi}function es(P){return P===$n}let wa=(()=>{class P{static#e=this.\u0275prov=(0,C.Yz7)({token:P,providedIn:"root",factory:()=>Pi((0,C.f3M)(C.Lbi))?new Ds((0,C.f3M)(pe),window):new au})}return P})();class Ds{constructor(K,L){this.document=K,this.window=L,this.offset=()=>[0,0]}setOffset(K){this.offset=Array.isArray(K)?()=>K:K}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(K){this.window.scrollTo(K[0],K[1])}scrollToAnchor(K){const L=function uo(P,K){const L=P.getElementById(K)||P.getElementsByName(K)[0];if(L)return L;if("function"==typeof P.createTreeWalker&&P.body&&"function"==typeof P.body.attachShadow){const z=P.createTreeWalker(P.body,NodeFilter.SHOW_ELEMENT);let A=z.currentNode;for(;A;){const N=A.shadowRoot;if(N){const w=N.getElementById(K)||N.querySelector(`[name="${K}"]`);if(w)return w}A=z.nextNode()}}return null}(this.document,K);L&&(this.scrollToElement(L),L.focus())}setHistoryScrollRestoration(K){this.window.history.scrollRestoration=K}scrollToElement(K){const L=K.getBoundingClientRect(),z=L.left+this.window.pageXOffset,A=L.top+this.window.pageYOffset,N=this.offset();this.window.scrollTo(z-N[0],A-N[1])}}class au{setOffset(K){}getScrollPosition(){return[0,0]}scrollToPosition(K){}scrollToAnchor(K){}setHistoryScrollRestoration(K){}}class jo{}},9212:(Mt,Ue,$)=>{function C(t,r){return Object.is(t,r)}$.d(Ue,{QbO:()=>p,tb:()=>Iw,AFp:()=>zc,ip1:()=>YC,hGG:()=>KR,z2F:()=>Xf,Ojb:()=>T,sBO:()=>xf,Sil:()=>eR,EJc:()=>LR,ktI:()=>hi,Xts:()=>oe,SBq:()=>$l,lqb:()=>Xo,qLn:()=>id,vpe:()=>zl,XFs:()=>On,OlP:()=>gn,zs3:()=>Wn,ZZ4:()=>Dm,aQg:()=>Am,soG:()=>nE,YKP:()=>lC,h0i:()=>Jf,R0b:()=>$s,FiY:()=>Lu,Lbi:()=>y,g9A:()=>Dd,Qsj:()=>Ih,FYo:()=>Vp,JOm:()=>Jh,tp0:()=>Za,Rgc:()=>F_,dDg:()=>SR,eoX:()=>QC,q4F:()=>Jb,GfV:()=>HC,s_b:()=>mg,ifc:()=>Ts,T8G:()=>r_,gHi:()=>Xa,dUe:()=>xs,VuI:()=>IP,Flj:()=>LE,MMx:()=>dC,Lck:()=>tb,eFA:()=>oD,Gpc:()=>Qi,f3M:()=>xn,qHZ:()=>Ai,X6Q:()=>HR,$WT:()=>Ys,MR2:()=>mt,_c5:()=>qR,qFp:()=>TP,r_H:()=>_i,tdS:()=>mm,rg0:()=>ym,c2e:()=>$C,zSh:()=>ni,wAp:()=>kg,I6F:()=>Jv,vHH:()=>ft,lri:()=>KC,rWj:()=>ZC,cg1:()=>KI,kuF:()=>Sr,kL8:()=>H0,dqk:()=>tn,Z0I:()=>Jn,eJc:()=>wu,QGY:()=>YI,F4k:()=>gT,RDi:()=>Td,AaK:()=>Bn,qOj:()=>Kl,lbL:()=>Cs,Xq5:()=>mv,TTD:()=>bs,_Bn:()=>uC,jDz:()=>hC,xp6:()=>Ly,uIk:()=>OI,ekj:()=>UI,Suo:()=>LT,Xpm:()=>Ca,lG2:()=>uu,Yz7:()=>ot,cJS:()=>ln,oAB:()=>Go,Yjl:()=>Qs,Y36:()=>Dh,_UZ:()=>zI,qZA:()=>Hv,TgZ:()=>jv,EpF:()=>U0,n5z:()=>Uc,LFG:()=>lr,$8M:()=>al,$Z:()=>Qp,NdJ:()=>JI,CRH:()=>BT,oxw:()=>ET,Hsn:()=>wT,F$t:()=>IT,Q6J:()=>LI,iGM:()=>UT,MAs:()=>jT,KtG:()=>Po,evT:()=>Ne,CHM:()=>Ju,LSH:()=>cm,P3R:()=>Mp,YNc:()=>cd,W1O:()=>AC,_uU:()=>YT,Oqu:()=>ow,hij:()=>Kv,Gf:()=>VT});let W=null,le=!1,se=1;const ye=Symbol("SIGNAL");function pe(t){const r=W;return W=t,r}const fe={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function he(t){if(le)throw new Error("");if(null===W)return;W.consumerOnSignalRead(t);const r=W.nextProducerIndex++;ht(W),r<W.producerNode.length&&W.producerNode[r]!==t&&ze(W)&&ce(W.producerNode[r],W.producerIndexOfThis[r]),W.producerNode[r]!==t&&(W.producerNode[r]=t,W.producerIndexOfThis[r]=ze(W)?nt(t,W,r):0),W.producerLastReadVersion[r]=t.version}function st(t){if((!ze(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==se)){if(!t.producerMustRecompute(t)&&!Kt(t))return t.dirty=!1,void(t.lastCleanEpoch=se);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=se}}function Xe(t){if(void 0===t.liveConsumerNode)return;const r=le;le=!0;try{for(const s of t.liveConsumerNode)s.dirty||qt(s)}finally{le=r}}function gt(){return!1!==W?.consumerAllowSignalWrites}function qt(t){t.dirty=!0,Xe(t),t.consumerMarkedDirty?.(t)}function Et(t){return t&&(t.nextProducerIndex=0),pe(t)}function dt(t,r){if(pe(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(ze(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)ce(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Kt(t){ht(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==s.version||(st(s),a!==s.version))return!0}return!1}function nt(t,r,s){if(Ge(t),ht(t),0===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)t.producerIndexOfThis[a]=nt(t.producerNode[a],t,a);return t.liveConsumerIndexOfThis.push(s),t.liveConsumerNode.push(r)-1}function ce(t,r){if(Ge(t),ht(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)ce(t.producerNode[a],t.producerIndexOfThis[a]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],l=t.liveConsumerNode[r];ht(l),l.producerIndexOfThis[a]=r}}function ze(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ht(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Ge(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}const $e=Symbol("UNSET"),ue=Symbol("COMPUTING"),Ve=Symbol("ERRORED"),an={...fe,value:$e,dirty:!0,error:null,equal:C,producerMustRecompute:t=>t.value===$e||t.value===ue,producerRecomputeValue(t){if(t.value===ue)throw new Error("Detected cycle in computations.");const r=t.value;t.value=ue;const s=Et(t);let a;try{a=t.computation()}catch(l){a=Ve,t.error=l}finally{dt(t,s)}r!==$e&&r!==Ve&&a!==Ve&&t.equal(r,a)?t.value=r:(t.value=a,t.version++)}};let Un=function At(){throw new Error};function Rn(){Un()}let rn=null;function De(t,r){gt()||Rn(),t.equal(t.value,r)||(t.value=r,function ut(t){t.version++,function Oe(){se++}(),Xe(t),rn?.()}(t))}const Me={...fe,equal:C,value:void 0};var Ht=$(8645),Dn=$(7394),hr=$(5619),Ar=$(7398);const Vt="https://g.co/ng/security#xss";class ft extends Error{constructor(r,s){super(Sr(r,s)),this.code=r}}function Sr(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}const fr=Symbol("InputSignalNode#UNSET"),Wr={...Me,transformFn:void 0,applyValueToInputSignal(t,r){De(t,r)}};function nr(t,r){const s=Object.create(Wr);function a(){if(he(s),s.value===fr)throw new ft(-950,!1);return s.value}return s.value=t,s.transformFn=r?.transform,a[ye]=s,a}function An(t,r){return nr(t,r)}const Ai=(An.required=function Yt(t){return nr(fr,t)},An);function En(t){for(let r in t)if(t[r]===En)return r;throw Error("Could not find renamed property on target object.")}function Fr(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function Bn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Bn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Ln(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const qn=En({__forward_ref__:En});function Qi(t){return t.__forward_ref__=Qi,t.toString=function(){return Bn(this())},t}function _t(t){return Ui(t)?t():t}function Ui(t){return"function"==typeof t&&t.hasOwnProperty(qn)&&t.__forward_ref__===Qi}function wn(t){return t&&!!t.\u0275providers}const Yn=En({\u0275cmp:En}),yi=En({\u0275dir:En}),qr=En({\u0275pipe:En}),Oi=En({\u0275mod:En}),zn=En({\u0275fac:En}),rr=En({__NG_ELEMENT_ID__:En}),Br=En({__NG_ENV_ID__:En});function en(t){return"string"==typeof t?t:null==t?"":String(t)}function re(t,r){throw new ft(-201,!1)}function ii(t,r){null==t&&function Ut(t,r,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function ot(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ln(t){return{providers:t.providers||[],imports:t.imports||[]}}function _n(t){return yr(t,va)||yr(t,gr)}function Jn(t){return null!==_n(t)}function yr(t,r){return t.hasOwnProperty(r)?t[r]:null}function Bi(t){return t&&(t.hasOwnProperty(io)||t.hasOwnProperty(Lo))?t[io]:null}const va=En({\u0275prov:En}),io=En({\u0275inj:En}),gr=En({ngInjectableDef:En}),Lo=En({ngInjectorDef:En});var On=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(On||{});let Ji;function vi(){return Ji}function wr(t){const r=Ji;return Ji=t,r}function Si(t,r,s){const a=_n(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&On.Optional?null:void 0!==r?r:void re()}const tn=globalThis;class gn{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=ot({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Is={},ia="__NG_DI_FLAG__",ws="ngTempTokenPath",ai=/\n/gm,Uo="__source";let Ri;function ks(t){const r=Ri;return Ri=t,r}function qs(t,r=On.Default){if(void 0===Ri)throw new ft(-203,!1);return null===Ri?Si(t,void 0,r):Ri.get(t,r&On.Optional?null:void 0,r)}function lr(t,r=On.Default){return(vi()||qs)(_t(t),r)}function xn(t,r=On.Default){return lr(t,Ei(r))}function Ei(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Fs(t){const r=[];for(let s=0;s<t.length;s++){const a=_t(t[s]);if(Array.isArray(a)){if(0===a.length)throw new ft(900,!1);let l,h=On.Default;for(let _=0;_<a.length;_++){const E=a[_],R=Ks(E);"number"==typeof R?-1===R?l=E.token:h|=R:l=E}r.push(lr(l,h))}else r.push(lr(a))}return r}function ao(t,r){return t[ia]=r,t.prototype[ia]=r,t}function Ks(t){return t[ia]}function xi(t){return{toString:t}.toString()}var Ia=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Ia||{}),Ts=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ts||{});const Hi={},$n=[];var Cs=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Cs||{});function Xi(t,r,s){let a=t.length;for(;;){const l=t.indexOf(r,s);if(-1===l)return l;if(0===l||t.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||t.charCodeAt(l+h)<=32)return l}s=l+1}}function Pi(t,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const h=s[a++],_=s[a++],E=s[a++];t.setAttribute(r,_,E,h)}else{const h=l,_=s[++a];Bo(h)?t.setProperty(r,h,_):t.setAttribute(r,h,_),a++}}return a}function es(t){return 3===t||4===t||6===t}function Bo(t){return 64===t.charCodeAt(0)}function To(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||Gn(t,s,l,null,-1===s||2===s?r[++a]:null)}}return t}function Gn(t,r,s,a,l){let h=0,_=t.length;if(-1===r)_=-1;else for(;h<t.length;){const E=t[h++];if("number"==typeof E){if(E===r){_=-1;break}if(E>r){_=h-1;break}}}for(;h<t.length;){const E=t[h];if("number"==typeof E)break;if(E===s){if(null===a)return void(null!==l&&(t[h+1]=l));if(a===t[h+1])return void(t[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==_&&(t.splice(_,0,r),h=_+1),t.splice(h++,0,s),null!==a&&t.splice(h++,0,a),null!==l&&t.splice(h++,0,l)}const wa="ng-template";function Ds(t,r,s){let a=0,l=!0;for(;a<t.length;){let h=t[a++];if("string"==typeof h&&l){const _=t[a++];if(s&&"class"===h&&-1!==Xi(_.toLowerCase(),r,0))return!0}else{if(1===h){for(;a<t.length&&"string"==typeof(h=t[a++]);)if(h.toLowerCase()===r)return!0;return!1}"number"==typeof h&&(l=!1)}}return!1}function uo(t){return 4===t.type&&t.value!==wa}function au(t,r,s){return r===(4!==t.type||s?t.value:wa)}function jo(t,r,s){let a=4;const l=t.attrs||[],h=function as(t){for(let r=0;r<t.length;r++)if(es(t[r]))return r;return t.length}(l);let _=!1;for(let E=0;E<r.length;E++){const R=r[E];if("number"!=typeof R){if(!_)if(4&a){if(a=2|1&a,""!==R&&!au(t,R,s)||""===R&&1===r.length){if(os(a))return!1;_=!0}}else{const B=8&a?R:r[++E];if(8&a&&null!==t.attrs){if(!Ds(t.attrs,B,s)){if(os(a))return!1;_=!0}continue}const ie=Co(8&a?"class":R,l,uo(t),s);if(-1===ie){if(os(a))return!1;_=!0;continue}if(""!==B){let ve;ve=ie>h?"":l[ie+1].toLowerCase();const Ce=8&a?ve:null;if(Ce&&-1!==Xi(Ce,B,0)||2&a&&B!==ve){if(os(a))return!1;_=!0}}}}else{if(!_&&!os(a)&&!os(R))return!1;if(_&&os(R))continue;_=!1,a=R|1&a}}return os(a)||_}function os(t){return 0==(1&t)}function Co(t,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const _=r[l];if(_===t)return l;if(3===_||6===_)h=!0;else{if(1===_||2===_){let E=r[++l];for(;"string"==typeof E;)E=r[++l];continue}if(4===_)break;if(0===_){l+=4;continue}}l+=h?1:2}return-1}return function lo(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function Su(t,r,s=!1){for(let a=0;a<r.length;a++)if(jo(t,r[a],s))return!0;return!1}function Ba(t,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(t.length===a.length){for(let l=0;l<t.length;l++)if(t[l]!==a[l])continue e;return!0}}return!1}function Ta(t,r){return t?":not("+r.trim()+")":r}function wl(t){let r=t[0],s=1,a=2,l="",h=!1;for(;s<t.length;){let _=t[s];if("string"==typeof _)if(2&a){const E=t[++s];l+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&a?l+="."+_:4&a&&(l+=" "+_);else""!==l&&!os(_)&&(r+=Ta(h,l),l=""),a=_,h=h||!os(a);s++}return""!==l&&(r+=Ta(h,l)),r}function Ca(t){return xi(()=>{const r=ki(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Ia.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ts.Emulated,styles:t.styles||$n,_:null,schemas:t.schemas||null,tView:null,id:""};Ao(s);const a=t.dependencies;return s.directiveDefs=ts(a,!1),s.pipeDefs=ts(a,!0),s.id=function ua(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const l of s)r=Math.imul(31,r)+l.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(s),s})}function Do(t){return Nn(t)||Kr(t)}function bu(t){return null!==t}function Go(t){return xi(()=>({type:t.type,bootstrap:t.bootstrap||$n,declarations:t.declarations||$n,imports:t.imports||$n,exports:t.exports||$n,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function $i(t,r){if(null==t)return Hi;const s={};for(const a in t)if(t.hasOwnProperty(a)){const l=t[a];let h,_,E=Cs.None;Array.isArray(l)?(E=l[0],h=l[1],_=l[2]??h):(h=l,_=l),r?(s[h]=E!==Cs.None?[a,E]:a,r[h]=_):s[h]=a}return s}function uu(t){return xi(()=>{const r=ki(t);return Ao(r),r})}function Qs(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Nn(t){return t[Yn]||null}function Kr(t){return t[yi]||null}function Ii(t){return t[qr]||null}function Ys(t){const r=Nn(t)||Kr(t)||Ii(t);return null!==r&&r.standalone}function br(t,r){const s=t[Oi]||null;if(!s&&!0===r)throw new Error(`Type ${Bn(t)} does not have '\u0275mod' property.`);return s}function ki(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||Hi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||$n,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$i(t.inputs,r),outputs:$i(t.outputs),debugInfo:null}}function Ao(t){t.features?.forEach(r=>r(t))}function ts(t,r){if(!t)return null;const s=r?Ii:Do;return()=>("function"==typeof t?t():t).map(a=>s(a)).filter(bu)}const Tn=0,lt=1,Zt=2,Zr=3,Xn=4,Ti=5,ns=6,So=7,ar=8,Fi=9,As=10,Cn=11,rs=12,co=13,Li=14,vr=15,ho=16,zo=17,Gt=18,Js=19,ja=20,Xs=21,fo=22,Ls=23,yn=25,Wo=1,ui=7,bo=9,Qr=10;var Gi=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Gi||{});function ir(t){return Array.isArray(t)&&"object"==typeof t[Wo]}function ei(t){return Array.isArray(t)&&!0===t[Wo]}function qo(t){return 0!=(4&t.flags)}function go(t){return t.componentOffset>-1}function eo(t){return 1==(1&t.flags)}function us(t){return!!t.template}function cu(t){return 0!=(512&t[Zt])}function ur(t,r){return t.hasOwnProperty(zn)?t[zn]:null}class ls{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function Ss(t,r,s,a){null!==r?r.applyValueToInputSignal(r,a):t[s]=a}function bs(){return cs}function cs(t){return t.type.prototype.ngOnChanges&&(t.setInput=Da),la}function la(){const t=Sc(this),r=t?.current;if(r){const s=t.previous;if(s===Hi)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function Da(t,r,s,a,l){const h=this.declaredInputs[a],_=Sc(t)||function Ql(t,r){return t[Kd]=r}(t,{previous:Hi,current:null}),E=_.current||(_.current={}),R=_.previous,B=R[h];E[h]=new ls(B&&B.currentValue,s,R===Hi),Ss(t,r,l,s)}bs.ngInherit=!0;const Kd="__ngSimpleChanges__";function Sc(t){return t[Kd]||null}const Vs=function(t,r,s){};let bc=!1;function Er(t){for(;Array.isArray(t);)t=t[Tn];return t}function Us(t,r){return Er(r[t])}function Ye(t,r){return Er(r[t.index])}function Wi(t,r){return t.data[r]}function vt(t,r){const s=r[t];return ir(s)?s:s[Tn]}function Aa(t){return 128==(128&t[Zt])}function He(t,r){return null==r?null:t[r]}function it(t){t[zo]=0}function Tr(t){1024&t[Zt]||(t[Zt]|=1024,Aa(t)&&$a(t))}function Pu(t){return 9216&t[Zt]||t[Ls]?.dirty}function Ku(t){Pu(t)?$a(t):64&t[Zt]&&(function ds(){return bc}()?(t[Zt]|=1024,$a(t)):t[As].changeDetectionScheduler?.notify())}function $a(t){t[As].changeDetectionScheduler?.notify();let r=Ps(t);for(;null!==r&&!(8192&r[Zt])&&(r[Zt]|=8192,Aa(r));)r=Ps(r)}function Xl(t,r){if(256==(256&t[Zt]))throw new ft(911,!1);null===t[Xs]&&(t[Xs]=[]),t[Xs].push(r)}function Ps(t){const r=t[Zr];return ei(r)?r[Zr]:r}const dn={lFrame:Ct(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Qu(){return dn.bindingsEnabled}function Ir(){return null!==dn.skipHydrationRootTNode}function Te(){return dn.lFrame.lView}function kn(){return dn.lFrame.tView}function Ju(t){return dn.lFrame.contextLView=t,t[ar]}function Po(t){return dn.lFrame.contextLView=null,t}function Rr(){let t=Mo();for(;null!==t&&64===t.type;)t=t.parent;return t}function Mo(){return dn.lFrame.currentTNode}function hs(t,r){const s=dn.lFrame;s.currentTNode=t,s.isParent=r}function fu(){return dn.lFrame.isParent}function Tl(){dn.lFrame.isParent=!1}function xe(){return dn.lFrame.bindingIndex++}function Mu(t,r){const s=dn.lFrame;s.bindingIndex=s.bindingRootIndex=t,O(r)}function O(t){dn.lFrame.currentDirectiveIndex=t}function x(){return dn.lFrame.currentQueryIndex}function H(t){dn.lFrame.currentQueryIndex=t}function J(t){const r=t[lt];return 2===r.type?r.declTNode:1===r.type?t[Ti]:null}function de(t,r,s){if(s&On.SkipSelf){let l=r,h=t;for(;!(l=l.parent,null!==l||s&On.Host||(l=J(h),null===l||(h=h[Li],10&l.type))););if(null===l)return!1;r=l,t=h}const a=dn.lFrame=ke();return a.currentTNode=r,a.lView=t,!0}function Le(t){const r=ke(),s=t[lt];dn.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function ke(){const t=dn.lFrame,r=null===t?null:t.child;return null===r?Ct(t):r}function Ct(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function bn(){const t=dn.lFrame;return dn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const pn=bn;function fi(){const t=bn();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Pr(){return dn.lFrame.selectedIndex}function Ms(t){dn.lFrame.selectedIndex=t}function Cr(){const t=dn.lFrame;return Wi(t.tView,t.selectedIndex)}let Qd=!0;function Dl(){return Qd}function Qo(t){Qd=t}function Al(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=t.data[s].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:R,ngAfterViewChecked:B,ngOnDestroy:q}=h;_&&(t.contentHooks??=[]).push(-s,_),E&&((t.contentHooks??=[]).push(s,E),(t.contentCheckHooks??=[]).push(s,E)),R&&(t.viewHooks??=[]).push(-s,R),B&&((t.viewHooks??=[]).push(s,B),(t.viewCheckHooks??=[]).push(s,B)),null!=q&&(t.destroyHooks??=[]).push(s,q)}}function nc(t,r,s){Oc(t,r,3,s)}function Nc(t,r,s,a){(3&t[Zt])===s&&Oc(t,r,s,a)}function rc(t,r){let s=t[Zt];(3&s)===r&&(s&=16383,s+=1,t[Zt]=s)}function Oc(t,r,s,a){const h=a??-1,_=r.length-1;let E=0;for(let R=void 0!==a?65535&t[zo]:0;R<_;R++)if("number"==typeof r[R+1]){if(E=r[R],null!=a&&E>=a)break}else r[R]<0&&(t[zo]+=65536),(E<h||-1==h)&&(Gh(t,s,r,R),t[zo]=(4294901760&t[zo])+R+2),R++}function gd(t,r){Vs(4,t,r);const s=pe(null);try{r.call(t)}finally{pe(s),Vs(5,t,r)}}function Gh(t,r,s,a){const l=s[a]<0,h=s[a+1],E=t[l?-s[a]:s[a]];l?t[Zt]>>14<t[zo]>>16&&(3&t[Zt])===r&&(t[Zt]+=16384,gd(E,h)):gd(E,h)}const el=-1;class Nu{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function da(t){return t!==el}function Sl(t){return 32767&t}function Yo(t,r){let s=function Yr(t){return t>>16}(t),a=r;for(;s>0;)a=a[Li],s--;return a}let qi=!0;function Mr(t){const r=qi;return qi=t,r}const pu=255,ti=5;let rl=0;const Wa={};function sc(t,r){const s=di(t,r);if(-1!==s)return s;const a=r[lt];a.firstCreatePass&&(t.injectorIndex=r.length,Ra(a.data,t),Ra(r,null),Ra(a.blueprint,null));const l=no(t,r),h=t.injectorIndex;if(da(l)){const _=Sl(l),E=Yo(l,r),R=E[lt].data;for(let B=0;B<8;B++)r[h+B]=E[_+B]|R[_+B]}return r[h+8]=l,h}function Ra(t,r){t.push(0,0,0,0,0,0,0,0,r)}function di(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function no(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=ac(l),null===a)return el;if(s++,l=l[Li],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return el}function bl(t,r,s){!function Ki(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(rr)&&(a=s[rr]),null==a&&(a=s[rr]=rl++);const l=a&pu;r.data[t+(l>>ti)]|=1<<l}(t,r,s)}function Ou(t,r,s){if(s&On.Optional||void 0!==t)return t;re()}function Fc(t,r,s,a){if(s&On.Optional&&void 0===a&&(a=null),!(s&(On.Self|On.Host))){const l=t[Fi],h=wr(void 0);try{return l?l.get(r,a,s&On.Optional):Si(r,a,s&On.Optional)}finally{wr(h)}}return Ou(a,0,s)}function Jo(t,r,s,a=On.Default,l){if(null!==t){if(2048&r[Zt]&&!(a&On.Self)){const _=function oc(t,r,s,a,l){let h=t,_=r;for(;null!==h&&null!==_&&2048&_[Zt]&&!(512&_[Zt]);){const E=ha(h,_,s,a|On.Self,Wa);if(E!==Wa)return E;let R=h.parent;if(!R){const B=_[ja];if(B){const q=B.get(s,Wa,a);if(q!==Wa)return q}R=ac(_),_=_[Li]}h=R}return l}(t,r,s,a,Wa);if(_!==Wa)return _}const h=ha(t,r,s,a,Wa);if(h!==Wa)return h}return Fc(r,s,a,l)}function ha(t,r,s,a,l){const h=function il(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(rr)?t[rr]:void 0;return"number"==typeof r?r>=0?r&pu:sl:r}(s);if("function"==typeof h){if(!de(r,t,a))return a&On.Host?Ou(l,0,a):Fc(r,s,a,l);try{let _;if(_=h(a),null!=_||a&On.Optional)return _;re()}finally{pn()}}else if("number"==typeof h){let _=null,E=di(t,r),R=el,B=a&On.Host?r[vr][Ti]:null;for((-1===E||a&On.SkipSelf)&&(R=-1===E?no(t,r):r[E+8],R!==el&&Vc(a,!1)?(_=r[lt],E=Sl(R),r=Yo(R,r)):E=-1);-1!==E;){const q=r[lt];if(Pa(h,E,q.data)){const ie=Lc(E,r,s,_,a,B);if(ie!==Wa)return ie}R=r[E+8],R!==el&&Vc(a,r[lt].data[E+8]===B)&&Pa(h,E,r)?(_=q,E=Sl(R),r=Yo(R,r)):E=-1}}return l}function Lc(t,r,s,a,l,h){const _=r[lt],E=_.data[t+8],q=fa(E,_,s,null==a?go(E)&&qi:a!=_&&0!=(3&E.type),l&On.Host&&h===E);return null!==q?ms(r,_,q,E):Wa}function fa(t,r,s,a,l){const h=t.providerIndexes,_=r.data,E=1048575&h,R=t.directiveStart,q=h>>20,ve=l?E+q:t.directiveEnd;for(let Ce=a?E:E+q;Ce<ve;Ce++){const qe=_[Ce];if(Ce<R&&s===qe||Ce>=R&&qe.type===s)return Ce}if(l){const Ce=_[R];if(Ce&&us(Ce)&&Ce.type===s)return R}return null}function ms(t,r,s,a){let l=t[s];const h=r.data;if(function Yd(t){return t instanceof Nu}(l)){const _=l;_.resolving&&function X(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new ft(-200,`Circular dependency in DI detected for ${t}${s}`)}(function Pn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():en(t)}(h[s]));const E=Mr(_.canSeeViewProviders);_.resolving=!0;const B=_.injectImpl?wr(_.injectImpl):null;de(t,a,On.Default);try{l=t[s]=_.factory(void 0,h,t,a),r.firstCreatePass&&s>=a.directiveStart&&function Xu(t,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const _=cs(r);(s.preOrderHooks??=[]).push(t,_),(s.preOrderCheckHooks??=[]).push(t,_)}l&&(s.preOrderHooks??=[]).push(0-t,l),h&&((s.preOrderHooks??=[]).push(t,h),(s.preOrderCheckHooks??=[]).push(t,h))}(s,h[s],r)}finally{null!==B&&wr(B),Mr(E),_.resolving=!1,pn()}}return l}function Pa(t,r,s){return!!(s[r+(t>>ti)]&1<<t)}function Vc(t,r){return!(t&On.Self||t&On.Host&&r)}class Ci{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return Jo(this._tNode,this._lView,r,Ei(a),s)}}function sl(){return new Ci(Rr(),Te())}function Uc(t){return xi(()=>{const r=t.prototype.constructor,s=r[zn]||ol(r),a=Object.prototype;let l=Object.getPrototypeOf(t.prototype).constructor;for(;l&&l!==a;){const h=l[zn]||ol(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function ol(t){return Ui(t)?()=>{const r=ol(_t(t));return r&&r()}:ur(t)}function ac(t){const r=t[lt],s=r.type;return 2===s?r.declTNode:1===s?t[Ti]:null}function al(t){return function Rl(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(es(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(Rr(),t)}const Pl="__parameters__";function ku(t,r,s){return xi(()=>{const a=function Bc(t){return function(...s){if(t){const a=t(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const _=new l(...h);return E.annotation=_,E;function E(R,B,q){const ie=R.hasOwnProperty(Pl)?R[Pl]:Object.defineProperty(R,Pl,{value:[]})[Pl];for(;ie.length<=q;)ie.push(null);return(ie[q]=ie[q]||[]).push(_),R}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=t,l.annotationCls=l,l})}function Fu(t,r){t.forEach(s=>Array.isArray(s)?Fu(s,r):r(s))}function qa(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function Ml(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function Hs(t,r,s){let a=lc(t,r);return a>=0?t[1|a]=s:(a=~a,function $c(t,r,s,a){let l=t.length;if(l==r)t.push(s,a);else if(1===l)t.push(a,t[0]),t[0]=s;else{for(l--,t.push(t[l-1],t[l]);l>r;)t[l]=t[l-2],l--;t[r]=s,t[r+1]=a}}(t,a,r,s)),a}function vd(t,r){const s=lc(t,r);if(s>=0)return t[1|s]}function lc(t,r){return function cc(t,r,s){let a=0,l=t.length>>s;for(;l!==a;){const h=a+(l-a>>1),_=t[h<<s];if(r===_)return h<<s;_>r?l=h:a=h+1}return~(l<<s)}(t,r,1)}const Lu=ao(ku("Optional"),8),Za=ao(ku("SkipSelf"),4),oe=new gn("ENVIRONMENT_INITIALIZER"),_e=new gn("INJECTOR",-1),Ae=new gn("INJECTOR_DEF_TYPES");class tt{get(r,s=Is){if(s===Is){const a=new Error(`NullInjectorError: No provider for ${Bn(r)}!`);throw a.name="NullInjectorError",a}return s}}function mt(t){return{\u0275providers:t}}function pt(...t){return{\u0275providers:Qt(0,t),\u0275fromNgModule:!0}}function Qt(t,...r){const s=[],a=new Set;let l;const h=_=>{s.push(_)};return Fu(r,_=>{const E=_;Xt(E,h,[],a)&&(l||=[],l.push(E))}),void 0!==l&&xt(l,h),s}function xt(t,r){for(let s=0;s<t.length;s++){const{ngModule:a,providers:l}=t[s];Nr(l,h=>{r(h,a)})}}function Xt(t,r,s,a){if(!(t=_t(t)))return!1;let l=null,h=Bi(t);const _=!h&&Nn(t);if(h||_){if(_&&!_.standalone)return!1;l=t}else{const R=t.ngModule;if(h=Bi(R),!h)return!1;l=R}const E=a.has(l);if(_){if(E)return!1;if(a.add(l),_.dependencies){const R="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const B of R)Xt(B,r,s,a)}}else{if(!h)return!1;{if(null!=h.imports&&!E){let B;a.add(l);try{Fu(h.imports,q=>{Xt(q,r,s,a)&&(B||=[],B.push(q))})}finally{}void 0!==B&&xt(B,r)}if(!E){const B=ur(l)||(()=>new l);r({provide:l,useFactory:B,deps:$n},l),r({provide:Ae,useValue:l,multi:!0},l),r({provide:oe,useValue:()=>lr(l),multi:!0},l)}const R=h.providers;if(null!=R&&!E){const B=t;Nr(R,q=>{r(q,B)})}}}return l!==t&&void 0!==t.providers}function Nr(t,r){for(let s of t)wn(s)&&(s=s.\u0275providers),Array.isArray(s)?Nr(s,r):r(s)}const xr=En({provide:String,useValue:En});function _r(t){return null!==t&&"object"==typeof t&&xr in t}function Jr(t){return"function"==typeof t}const ni=new gn("Set Injector scope."),is={},Uu={};let Eu;function xa(){return void 0===Eu&&(Eu=new tt),Eu}class Xo{}class ka extends Xo{get destroyed(){return this._destroyed}constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,No(r,_=>this.processProvider(_)),this.records.set(_e,Kn(void 0,this)),l.has("environment")&&this.records.set(Xo,Kn(void 0,this));const h=this.records.get(ni);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(Ae,$n,On.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=ks(this),a=wr(void 0);try{return r()}finally{ks(s),wr(a)}}get(r,s=Is,a=On.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(Br))return r[Br](this);a=Ei(a);const h=ks(this),_=wr(void 0);try{if(!(a&On.SkipSelf)){let R=this.records.get(r);if(void 0===R){const B=function Hr(t){return"function"==typeof t||"object"==typeof t&&t instanceof gn}(r)&&_n(r);R=B&&this.injectableDefInScope(B)?Kn(dc(r),is):null,this.records.set(r,R)}if(null!=R)return this.hydrate(r,R)}return(a&On.Self?xa():this.parent).get(r,s=a&On.Optional&&s===Is?null:s)}catch(E){if("NullInjectorError"===E.name){if((E[ws]=E[ws]||[]).unshift(Bn(r)),h)throw E;return function wo(t,r,s,a){const l=t[ws];throw r[Uo]&&l.unshift(r[Uo]),t.message=function ji(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let l=Bn(r);if(Array.isArray(r))l=r.map(Bn).join(" -> ");else if("object"==typeof r){let h=[];for(let _ in r)if(r.hasOwnProperty(_)){let E=r[_];h.push(_+":"+("string"==typeof E?JSON.stringify(E):Bn(E)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${t.replace(ai,"\n  ")}`}("\n"+t.message,l,s,a),t.ngTokenPath=l,t[ws]=null,t}(E,r,"R3InjectorError",this.source)}throw E}finally{wr(_),ks(h)}}resolveInjectorInitializers(){const r=ks(this),s=wr(void 0);try{const l=this.get(oe,$n,On.Self);for(const h of l)h()}finally{ks(r),wr(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(Bn(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ft(205,!1)}processProvider(r){let s=Jr(r=_t(r))?r:_t(r&&r.provide);const a=function kt(t){return _r(t)?Kn(void 0,t.useValue):Kn(In(t),is)}(r);if(!Jr(r)&&!0===r.multi){let l=this.records.get(s);l||(l=Kn(void 0,is,!0),l.factory=()=>Fs(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===is&&(s.value=Uu,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Ja(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=_t(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function dc(t){const r=_n(t),s=null!==r?r.factory:ur(t);if(null!==s)return s;if(t instanceof gn)throw new ft(204,!1);if(t instanceof Function)return function nn(t){if(t.length>0)throw new ft(204,!1);const s=function Xr(t){return t&&(t[va]||t[gr])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new ft(204,!1)}function In(t,r,s){let a;if(Jr(t)){const l=_t(t);return ur(l)||dc(l)}if(_r(t))a=()=>_t(t.useValue);else if(function _o(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...Fs(t.deps||[]));else if(function cr(t){return!(!t||!t.useExisting)}(t))a=()=>lr(_t(t.useExisting));else{const l=_t(t&&(t.useClass||t.provide));if(!function Zi(t){return!!t.deps}(t))return ur(l)||dc(l);a=()=>new l(...Fs(t.deps))}return a}function Kn(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function No(t,r){for(const s of t)Array.isArray(s)?No(s,r):s&&wn(s)?No(s.\u0275providers,r):r(s)}function _i(t,r){t instanceof ka&&t.assertNotDestroyed();const a=ks(t),l=wr(void 0);try{return r()}finally{ks(a),wr(l)}}function Xa(t){if(!vi()&&!function oa(){return Ri}())throw new ft(-203,!1)}function sp(t,r=null,s=null,a){const l=qh(t,r,s,a);return l.resolveInjectorInitializers(),l}function qh(t,r=null,s=null,a,l=new Set){const h=[s||$n,pt(t)];return a=a||("object"==typeof t?void 0:Bn(t)),new ka(h,r||xa(),a||null,l)}let nh,Wn=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Is;static#t=this.NULL=new tt;static create(s,a){if(Array.isArray(s))return sp({name:""},a,s,"");{const l=s.name??"";return sp({name:l},s.parent,s.providers,l)}}static#n=this.\u0275prov=ot({token:t,providedIn:"any",factory:()=>lr(_e)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function wu(t){return!!br(t)}function Td(t){nh=t}const zc=new gn("AppId",{providedIn:"root",factory:()=>Cd}),Cd="ng",Dd=new gn("Platform Initializer"),y=new gn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),p=new gn("AnimationModuleType"),T=new gn("CSP nonce",{providedIn:"root",factory:()=>function eu(){if(void 0!==nh)return nh;if(typeof document<"u")return document;throw new ft(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Ne(t){return t.ownerDocument}function Ot(t){return t instanceof Function?t():t}function Yh(t){return 128==(128&t.flags)}var Jh=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Jh||{});const Rd=new Map;let z_=0;const Pd="__ngContext__";function Os(t,r){ir(r)?(t[Pd]=r[Js],function $g(t){Rd.set(t[Js],t)}(r)):t[Pd]=r}let qg;function nf(t,r){return qg(t,r)}function Md(t,r,s,a,l){if(null!=a){let h,_=!1;ei(a)?h=a:ir(a)&&(_=!0,a=a[Tn]);const E=Er(a);0===t&&null!==s?null==l?pc(r,s,E):Yc(r,s,E,l||null,!0):1===t&&null!==s?Yc(r,s,E,l||null,!0):2===t?function uf(t,r,s){const a=vp(t,r);a&&function X_(t,r,s,a){t.removeChild(r,s,a)}(t,a,r,s)}(r,E,_):3===t&&r.destroyNode(E),null!=h&&function lf(t,r,s,a,l){const h=s[ui];h!==Er(s)&&Md(r,t,a,h,l);for(let E=Qr;E<s.length;E++){const R=s[E];wp(R[lt],R,t,r,a,h)}}(r,t,h,s,l)}}function Nd(t,r,s){return t.createElement(r,s)}function rf(t,r){r[As].changeDetectionScheduler?.notify(),wp(t,r,r[Cn],2,null,null)}function lh(t,r){const s=t[bo],a=s.indexOf(r);s.splice(a,1)}function Bl(t,r){if(t.length<=Qr)return;const s=Qr+r,a=t[s];if(a){const l=a[ho];null!==l&&l!==t&&lh(l,a),r>0&&(t[s-1][Xn]=a[Xn]);const h=Ml(t,Qr+r);!function mE(t,r){rf(t,r),r[Tn]=null,r[Ti]=null}(a[lt],a);const _=h[Gt];null!==_&&_.detachView(h[lt]),a[Zr]=null,a[Xn]=null,a[Zt]&=-129}return a}function sf(t,r){if(!(256&r[Zt])){const s=r[Cn];s.destroyNode&&wp(t,r,s,3,null,null),function _E(t){let r=t[rs];if(!r)return yp(t[lt],t);for(;r;){let s=null;if(ir(r))s=r[rs];else{const a=r[Qr];a&&(s=a)}if(!s){for(;r&&!r[Xn]&&r!==t;)ir(r)&&yp(r[lt],r),r=r[Zr];null===r&&(r=t),ir(r)&&yp(r[lt],r),s=r&&r[Xn]}r=s}}(r)}}function yp(t,r){if(!(256&r[Zt])){r[Zt]&=-129,r[Zt]|=256,r[Ls]&&function Bt(t){if(ht(t),ze(t))for(let r=0;r<t.producerNode.length;r++)ce(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(r[Ls]),function J_(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof Nu)){const h=s[a+1];if(Array.isArray(h))for(let _=0;_<h.length;_+=2){const E=l[h[_]],R=h[_+1];Vs(4,E,R);try{R.call(E)}finally{Vs(5,E,R)}}else{Vs(4,l,h);try{h.call(l)}finally{Vs(5,l,h)}}}}}(t,r),function ga(t,r){const s=t.cleanup,a=r[So];if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const _=s[h+3];_>=0?a[_]():a[-_].unsubscribe(),h+=2}else s[h].call(a[s[h+1]]);null!==a&&(r[So]=null);const l=r[Xs];if(null!==l){r[Xs]=null;for(let h=0;h<l.length;h++)(0,l[h])()}}(t,r),1===r[lt].type&&r[Cn].destroy();const s=r[ho];if(null!==s&&ei(r[Zr])){s!==r[Zr]&&lh(s,r);const a=r[Gt];null!==a&&a.detachView(t)}!function W_(t){Rd.delete(t[Js])}(r)}}function ch(t,r,s){return function af(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[Tn];{const{componentOffset:l}=a;if(l>-1){const{encapsulation:h}=t.data[a.directiveStart+l];if(h===Ts.None||h===Ts.Emulated)return null}return Ye(a,s)}}(t,r.parent,s)}function Yc(t,r,s,a,l){t.insertBefore(r,s,a,l)}function pc(t,r,s){t.appendChild(r,s)}function Od(t,r,s,a,l){null!==a?Yc(t,r,s,a,l):pc(t,r,s)}function vp(t,r){return t.parentNode(r)}function Qg(t,r,s){return Yg(t,r,s)}let Jg,Cp,Yg=function gc(t,r,s){return 40&t.type?Ye(t,s):null};function Ep(t,r,s,a){const l=ch(t,a,r),h=r[Cn],E=Qg(a.parent||r[Ti],a,r);if(null!=l)if(Array.isArray(s))for(let R=0;R<s.length;R++)Od(h,l,s[R],E,!1);else Od(h,l,s,E,!1);void 0!==Jg&&Jg(h,a,r,s,l)}function fh(t,r){if(null!==r){const s=r.type;if(3&s)return Ye(r,t);if(4&s)return ph(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return fh(t,a);{const l=t[r.index];return ei(l)?ph(-1,l):Er(l)}}if(32&s)return nf(r,t)()||Er(t[r.index]);{const a=ey(t,r);return null!==a?Array.isArray(a)?a[0]:fh(Ps(t[vr]),a):fh(t,r.next)}}return null}function ey(t,r){return null!==r?t[vr][Ti].projection[r.projection]:null}function ph(t,r){const s=Qr+t+1;if(s<r.length){const a=r[s],l=a[lt].firstChild;if(null!==l)return fh(a,l)}return r[ui]}function Ip(t,r,s,a,l,h,_){for(;null!=s;){const E=a[s.index],R=s.type;if(_&&0===r&&(E&&Os(Er(E),a),s.flags|=2),32!=(32&s.flags))if(8&R)Ip(t,r,s.child,a,l,h,!1),Md(r,t,l,E,h);else if(32&R){const B=nf(s,a);let q;for(;q=B();)Md(r,t,l,q,h);Md(r,t,l,E,h)}else 16&R?Jc(t,r,a,s,l,h):Md(r,t,l,E,h);s=_?s.projectionNext:s.next}}function wp(t,r,s,a,l,h){Ip(s,a,t.firstChild,r,l,h,!1)}function Jc(t,r,s,a,l,h){const _=s[vr],R=_[Ti].projection[a.projection];if(Array.isArray(R))for(let B=0;B<R.length;B++)Md(r,t,l,R[B],h);else{let B=R;const q=_[Zr];Yh(a)&&(B.flags|=128),Ip(t,r,B,q,l,h,!0)}}function sy(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function em(t,r,s){const{mergedAttrs:a,classes:l,styles:h}=s;null!==a&&Pi(t,r,a),null!==l&&sy(t,r,l),null!==h&&function iy(t,r,s){t.setAttribute(r,"style",s)}(t,r,h)}function hf(t){return function cf(){if(void 0===Cp&&(Cp=null,tn.trustedTypes))try{Cp=tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Cp}()?.createScriptURL(t)||t}class ay{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Vt})`}}function jl(t){return t instanceof ay?t.changingThisBreaksApplicationSecurity:t}function xd(t,r){const s=function EE(t){return t instanceof ay&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${Vt})`)}return s===r}const DE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var mc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(mc||{});function cm(t){const r=yf();return r?r.sanitize(mc.URL,t)||"":xd(t,"URL")?jl(t):function ed(t){return(t=String(t)).match(DE)?t:"unsafe:"+t}(en(t))}function ta(t){const r=yf();if(r)return hf(r.sanitize(mc.RESOURCE_URL,t)||"");if(xd(t,"ResourceURL"))return hf(jl(t));throw new ft(904,!1)}function Mp(t,r,s){return function _f(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?ta:cm}(r,s)(t)}function yf(){const t=Te();return t&&t[As].sanitizer}class _y{}let Op=()=>null;function yh(t,r,s=!1){return Op(t,r,s)}class fm{}class Ty{}class Ay{resolveComponentFactory(r){throw function pm(t){const r=Error(`No component factory found for ${Bn(t)}.`);return r.ngComponent=t,r}(r)}}let Eh=(()=>{class t{static#e=this.NULL=new Ay}return t})();function gm(){return td(Rr(),Te())}function td(t,r){return new $l(Ye(t,r))}let $l=(()=>{class t{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=gm}return t})();function nd(t){return t instanceof $l?t.nativeElement:t}class Vp{}let Ih=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function wh(){const t=Te(),s=vt(Rr().index,t);return(ir(s)?s:t)[Cn]}()}return t})(),Sy=(()=>{class t{static#e=this.\u0275prov=ot({token:t,providedIn:"root",factory:()=>null})}return t})();const rd={};function LE(t,r){const s=function Ze(t){const r=Object.create(an);r.computation=t;const s=()=>{if(st(r),he(r),r.value===Ve)throw r.error;return r.value};return s[ye]=r,s}(t);return r?.equal&&(s[ye].equal=r.equal),s}function mm(t,r){const s=function Ee(t){const r=Object.create(Me);r.value=t;const s=()=>(he(r),r.value);return s[ye]=r,s}(t),a=s[ye];return r?.equal&&(a.equal=r.equal),s.set=l=>De(a,l),s.update=l=>function We(t,r){gt()||Rn(),De(t,r(t.value))}(a,l),s.asReadonly=_m.bind(s),s}function _m(){const t=this[ye];if(void 0===t.readonlyFn){const r=()=>this();r[ye]=t,t.readonlyFn=r}return t.readonlyFn}function ym(t){const r=pe(null);try{return t()}finally{pe(r)}}function Up(t){return!!Cf(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Cf(t){return null!==t&&("function"==typeof t||"object"==typeof t)}class Em{constructor(){}supports(r){return Up(r)}create(r){return new UE(r)}}const Im=(t,r)=>r;class UE{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||Im}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const _=!a||s&&s.currentIndex<Tm(a,l,h)?s:a,E=Tm(_,l,h),R=_.currentIndex;if(_===a)l--,a=a._nextRemoved;else if(s=s._next,null==_.previousIndex)l++;else{h||(h=[]);const B=E-l,q=R-l;if(B!=q){for(let ve=0;ve<B;ve++){const Ce=ve<h.length?h[ve]:h[ve]=0,qe=Ce+ve;q<=qe&&qe<B&&(h[ve]=Ce+1)}h[_.previousIndex]=q-B}}E!==R&&r(_,E,R)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Up(r))throw new ft(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,_,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let E=0;E<this.length;E++)h=r[E],_=this._trackByFn(E,h),null!==s&&Object.is(s.trackById,_)?(a&&(s=this._verifyReinsertion(s,h,_,E)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,_,E),a=!0),s=s._next}else l=0,function vm(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,E=>{_=this._trackByFn(l,E),null!==s&&Object.is(s.trackById,_)?(a&&(s=this._verifyReinsertion(s,E,_,l)),Object.is(s.item,E)||this._addIdentityChange(s,E)):(s=this._mismatch(s,E,_,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new Ry(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new wm),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wm),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class Ry{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class BE{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class wm{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new BE,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Tm(t,r,s){const a=t.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class Cm{constructor(){}supports(r){return r instanceof Map||Cf(r)}create(){return new Py}}class Py{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Cf(r)))throw new ft(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,_=l._next;return h&&(h._next=_),_&&(_._prev=h),l._next=null,l._prev=null,l}const a=new jE(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class jE{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function My(){return new Dm([new Em])}let Dm=(()=>{class t{static#e=this.\u0275prov=ot({token:t,providedIn:"root",factory:My});constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||My()),deps:[[t,new Za,new Lu]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new ft(901,!1)}}return t})();function Bp(){return new Am([new Cm])}let Am=(()=>{class t{static#e=this.\u0275prov=ot({token:t,providedIn:"root",factory:Bp});constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||Bp()),deps:[[t,new Za,new Lu]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new ft(901,!1)}}return t})();function Th(t,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];null!==h&&a.push(Er(h)),ei(h)&&jp(h,a);const _=s.type;if(8&_)Th(t,r,s.child,a);else if(32&_){const E=nf(s,r);let R;for(;R=E();)a.push(R)}else if(16&_){const E=ey(r,s);if(Array.isArray(E))a.push(...E);else{const R=Ps(r[vr]);Th(R[lt],R,E,a,!0)}}s=l?s.projectionNext:s.next}return a}function jp(t,r){for(let s=Qr;s<t.length;s++){const a=t[s],l=a[lt].firstChild;null!==l&&Th(a[lt],a,l,r)}t[ui]!==t[Tn]&&r.push(t[ui])}let Hp=[];const $E={...fe,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{$a(t.lView)},consumerOnSignalRead(){this.lView[Ls]=this}};function $p(t){return Gp(t[rs])}function Mm(t){return Gp(t[Xn])}function Gp(t){for(;null!==t&&!ei(t);)t=t[Xn];return t}function Df(t){return t.ngOriginalError}class id{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Df(r);for(;s&&Df(s);)s=Df(s);return s||null}}const zp=new gn("",{providedIn:"root",factory:()=>xn(id).handleError.bind(void 0)}),Ny=new gn("",{providedIn:"root",factory:()=>!1}),er={};function Ly(t=1){Zp(kn(),Te(),Pr()+t,!1)}function Zp(t,r,s,a){if(!a)if(3==(3&r[Zt])){const h=t.preOrderCheckHooks;null!==h&&nc(r,h,s)}else{const h=t.preOrderHooks;null!==h&&Nc(r,h,0,s)}Ms(s)}function Dh(t,r=On.Default){const s=Te();return null===s?lr(t,r):Jo(Rr(),s,_t(t),r)}function Qp(){throw new Error("invalid")}function Vy(t,r,s,a,l,h){const _=pe(null);try{let E=null;l&Cs.SignalBased&&(E=r[a][ye]),null!==E&&void 0!==E.transformFn&&(h=E.transformFn(h)),l&Cs.HasDecoratorInputTransform&&(h=t.inputTransforms[a].call(r,h)),null!==t.setInput?t.setInput(r,E,h,s,a):Ss(r,E,a,h)}finally{pe(_)}}function Yp(t,r,s,a,l,h,_,E,R,B,q){const ie=r.blueprint.slice();return ie[Tn]=l,ie[Zt]=204|a,(null!==B||t&&2048&t[Zt])&&(ie[Zt]|=2048),it(ie),ie[Zr]=ie[Li]=t,ie[ar]=s,ie[As]=_||t&&t[As],ie[Cn]=E||t&&t[Cn],ie[Fi]=R||t&&t[Fi]||null,ie[Ti]=h,ie[Js]=function Hg(){return z_++}(),ie[ns]=q,ie[ja]=B,ie[vr]=2==r.type?t[vr]:ie,ie}function od(t,r,s,a,l){let h=t.data[r];if(null===h)h=function Jp(t,r,s,a,l){const h=Mo(),_=fu(),R=t.data[r]=function Sh(t,r,s,a,l,h){let _=r?r.injectorIndex:-1,E=0;return Ir()&&(E|=128),{type:s,index:a,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?h:h&&h.parent,s,r,a,l);return null===t.firstChild&&(t.firstChild=R),null!==h&&(_?null==h.child&&null!==R.parent&&(h.child=R):null===h.next&&(h.next=R,R.prev=h)),R}(t,r,s,a,l),function gs(){return dn.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const _=function ca(){const t=dn.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();h.injectorIndex=null===_?-1:_.injectorIndex}return hs(h,!0),h}function Ud(t,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),t.blueprint.push(a),t.data.push(null);return l}function Vm(t,r,s,a,l){const h=Pr(),_=2&a;try{Ms(-1),_&&r.length>yn&&Zp(t,r,yn,!1),Vs(_?2:0,l),s(a,l)}finally{Ms(h),Vs(_?3:1,l)}}function Um(t,r,s){if(qo(r)){const a=pe(null);try{const h=r.directiveEnd;for(let _=r.directiveStart;_<h;_++){const E=t.data[_];E.contentQueries&&E.contentQueries(1,s[_],_)}}finally{pe(a)}}}function Bm(t,r,s){Qu()&&(function zm(t,r,s,a){const l=s.directiveStart,h=s.directiveEnd;go(s)&&function Km(t,r,s){const a=Ye(r,t),l=Uy(s);let _=16;s.signals?_=4096:s.onPush&&(_=64);const E=ng(t,Yp(t,l,null,_,a,r,null,t[As].rendererFactory.createRenderer(a,s),null,null,null));t[r.index]=E}(r,s,t.data[l+s.componentOffset]),t.firstCreatePass||sc(s,r),Os(a,r);const _=s.initialInputs;for(let E=l;E<h;E++){const R=t.data[E],B=ms(r,t,E,s);Os(B,r),null!==_&&YE(0,E-l,B,R,0,_),us(R)&&(vt(s.index,r)[ar]=ms(r,t,E,s))}}(t,r,s,Ye(s,r)),64==(64&s.flags)&&Pf(t,r,s))}function Af(t,r,s=Ye){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const _=a[h+1],E=-1===_?s(r,t):t[_];t[l++]=E}}}function Uy(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=Sf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function Sf(t,r,s,a,l,h,_,E,R,B,q){const ie=yn+a,ve=ie+l,Ce=function Xp(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:er);return s}(ie,ve),qe="function"==typeof B?B():B;return Ce[lt]={type:t,blueprint:Ce,template:s,queries:null,viewQuery:E,declTNode:r,data:Ce.slice().fill(null,ie),bindingStartIndex:ie,expandoStartIndex:ve,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:R,consts:qe,incompleteFirstPass:!1,ssrId:q}}let Ah=()=>null;function $m(t,r,s,a,l){for(let h in r){if(!r.hasOwnProperty(h))continue;const _=r[h];if(void 0===_)continue;a??={};let E,R=Cs.None;Array.isArray(_)?(E=_[0],R=_[1]):E=_;let B=h;if(null!==l){if(!l.hasOwnProperty(h))continue;B=l[h]}0===t?bf(a,s,B,E,R):bf(a,s,B,E)}return a}function bf(t,r,s,a,l){let h;t.hasOwnProperty(s)?(h=t[s]).push(r,a):h=t[s]=[r,a],void 0!==l&&h.push(l)}function Rf(t,r,s,a){if(Qu()){const l=null===a?null:{"":-1},h=function $y(t,r){const s=t.directiveRegistry;let a=null,l=null;if(s)for(let h=0;h<s.length;h++){const _=s[h];if(Su(r,_.selectors,!1))if(a||(a=[]),us(_))if(null!==_.findHostDirectiveDefs){const E=[];l=l||new Map,_.findHostDirectiveDefs(_,E,l),a.unshift(...E,_),ad(t,r,E.length)}else a.unshift(_),ad(t,r,0);else l=l||new Map,_.findHostDirectiveDefs?.(_,a,l),a.push(_)}return null===a?null:[a,l]}(t,s);let _,E;null===h?_=E=null:[_,E]=h,null!==_&&tg(t,r,s,_,l,E),l&&function Gy(t,r,s){if(r){const a=t.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new ft(-301,!1);a.push(r[l],h)}}}(s,a,l)}s.mergedAttrs=To(s.mergedAttrs,s.attrs)}function tg(t,r,s,a,l,h){for(let B=0;B<a.length;B++)bl(sc(s,r),t,a[B].type);!function zy(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,a.length);for(let B=0;B<a.length;B++){const q=a[B];q.providersResolver&&q.providersResolver(q)}let _=!1,E=!1,R=Ud(t,r,a.length,null);for(let B=0;B<a.length;B++){const q=a[B];s.mergedAttrs=To(s.mergedAttrs,q.hostAttrs),bh(t,s,r,R,q),qm(R,q,l),null!==q.contentQueries&&(s.flags|=4),(null!==q.hostBindings||null!==q.hostAttrs||0!==q.hostVars)&&(s.flags|=64);const ie=q.type.prototype;!_&&(ie.ngOnChanges||ie.ngOnInit||ie.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),_=!0),!E&&(ie.ngOnChanges||ie.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),E=!0),R++}!function KE(t,r,s){const l=r.directiveEnd,h=t.data,_=r.attrs,E=[];let R=null,B=null;for(let q=r.directiveStart;q<l;q++){const ie=h[q],ve=s?s.get(ie):null,qe=ve?ve.outputs:null;R=$m(0,ie.inputs,q,R,ve?ve.inputs:null),B=$m(1,ie.outputs,q,B,qe);const ct=null===R||null===_||uo(r)?null:Wy(R,q,_);E.push(ct)}null!==R&&(R.hasOwnProperty("class")&&(r.flags|=8),R.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=E,r.inputs=R,r.outputs=B}(t,s,h)}function Pf(t,r,s){const a=s.directiveStart,l=s.directiveEnd,h=s.index,_=function I(){return dn.lFrame.currentDirectiveIndex}();try{Ms(h);for(let E=a;E<l;E++){const R=t.data[E],B=r[E];O(E),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&Wm(R,B)}}finally{Ms(-1),O(_)}}function Wm(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function ad(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function qm(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;us(r)&&(s[""]=t)}}function bh(t,r,s,a,l){t.data[a]=l;const h=l.factory||(l.factory=ur(l.type)),_=new Nu(h,us(l),Dh);t.blueprint[a]=_,s[a]=_,function Hy(t,r,s,a,l){const h=l.hostBindings;if(h){let _=t.hostBindingOpCodes;null===_&&(_=t.hostBindingOpCodes=[]);const E=~r.index;(function Gm(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(_)!=E&&_.push(E),_.push(s,a,h)}}(t,r,a,Ud(t,s,l.hostVars,er),l)}function Gl(t,r,s,a,l,h){const _=Ye(t,r);!function Zm(t,r,s,a,l,h,_){if(null==h)t.removeAttribute(r,l,s);else{const E=null==_?en(h):_(h,a||"",l);t.setAttribute(r,l,E,s)}}(r[Cn],_,h,t.value,s,a,l)}function YE(t,r,s,a,l,h){const _=h[r];if(null!==_)for(let E=0;E<_.length;)Vy(a,s,_[E++],_[E++],_[E++],_[E++])}function Wy(t,r,s){let a=null,l=0;for(;l<s.length;){const h=s[l];if(0!==h)if(5!==h){if("number"==typeof h)break;if(t.hasOwnProperty(h)){null===a&&(a=[]);const _=t[h];for(let E=0;E<_.length;E+=3)if(_[E]===r){a.push(h,_[E+1],_[E+2],s[l+1]);break}}l+=2}else l+=2;else l+=4}return a}function qy(t,r,s,a){return[t,!0,0,r,null,a,null,s,null,null]}function Qm(t,r){const s=t.contentQueries;if(null!==s){const a=pe(null);try{for(let l=0;l<s.length;l+=2){const _=s[l+1];if(-1!==_){const E=t.data[_];H(s[l]),E.contentQueries(2,r[_],_)}}}finally{pe(a)}}}function ng(t,r){return t[rs]?t[co][Xn]=r:t[rs]=r,t[co]=r,r}function Ym(t,r,s){H(0);const a=pe(null);try{r(t,s)}finally{pe(a)}}function Ky(t){return t[So]||(t[So]=[])}function Zy(t){return t.cleanup||(t.cleanup=[])}function Mf(t,r){const s=t[Fi],a=s?s.get(id,null):null;a&&a.handleError(r)}function rg(t,r,s,a,l){for(let h=0;h<s.length;){const _=s[h++],E=s[h++],R=s[h++];Vy(t.data[_],r[_],a,E,R,l)}}function Dr(t,r,s,a){const l=r[Zt];if(256==(256&l))return;r[As].inlineEffectRunner?.flush(),Le(r);let _=null,E=null;(function Xy(t){return 2!==t.type})(t)&&(E=function bm(t){return t[Ls]??function HE(t){const r=Hp.pop()??Object.create($E);return r.lView=t,r}(t)}(r),_=Et(E));try{it(r),function Ga(t){return dn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&Vm(t,r,s,2,a);const R=3==(3&l);if(R){const ie=t.preOrderCheckHooks;null!==ie&&nc(r,ie,null)}else{const ie=t.preOrderHooks;null!==ie&&Nc(r,ie,0,null),rc(r,0)}if(function Nf(t){for(let r=$p(t);null!==r;r=Mm(r)){if(!(r[Zt]&Gi.HasTransplantedViews))continue;const s=r[bo];for(let a=0;a<s.length;a++){Tr(s[a])}}}(r),Xm(r,0),null!==t.contentQueries&&Qm(t,r),R){const ie=t.contentCheckHooks;null!==ie&&nc(r,ie)}else{const ie=t.contentHooks;null!==ie&&Nc(r,ie,1),rc(r,1)}!function Lm(t,r){const s=t.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)Ms(~l);else{const h=l,_=s[++a],E=s[++a];Mu(_,h),E(2,r[h])}}}finally{Ms(-1)}}(t,r);const B=t.components;null!==B&&gl(r,B,0);const q=t.viewQuery;if(null!==q&&Ym(2,q,a),R){const ie=t.viewCheckHooks;null!==ie&&nc(r,ie)}else{const ie=t.viewHooks;null!==ie&&Nc(r,ie,2),rc(r,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[fo]){for(const ie of r[fo])ie();r[fo]=null}r[Zt]&=-73}catch(R){throw $a(r),R}finally{null!==E&&(dt(E,_),function Rm(t){t.lView[Ls]!==t&&(t.lView=null,Hp.push(t))}(E)),fi()}}function Xm(t,r){for(let s=$p(t);null!==s;s=Mm(s))for(let a=Qr;a<s.length;a++)xo(s[a],r)}function ev(t,r,s){xo(vt(r,t),s)}function xo(t,r){Aa(t)&&Ni(t,r)}function Ni(t,r){const a=t[lt],l=t[Zt],h=t[Ls];let _=!!(0===r&&16&l);if(_||=!!(64&l&&0===r),_||=!!(1024&l),_||=!(!h?.dirty||!Kt(h)),h&&(h.dirty=!1),t[Zt]&=-9217,_)Dr(a,t,a.template,t[ar]);else if(8192&l){Xm(t,1);const E=a.components;null!==E&&gl(t,E,1)}}function gl(t,r,s){for(let a=0;a<r.length;a++)ev(t,r[a],s)}function Rh(t){for(t[As].changeDetectionScheduler?.notify();t;){t[Zt]|=64;const r=Ps(t);if(cu(t)&&!r)return t;t=r}return null}class Of{get rootNodes(){const r=this._lView,s=r[lt];return Th(s,r,s.firstChild,[])}constructor(r,s,a=!0){this._lView=r,this._cdRefInjectingView=s,this.notifyErrorHandler=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ar]}set context(r){this._lView[ar]=r}get destroyed(){return 256==(256&this._lView[Zt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Zr];if(ei(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Bl(r,a),Ml(s,a))}this._attachedToViewContainer=!1}sf(this._lView[lt],this._lView)}onDestroy(r){Xl(this._lView,r)}markForCheck(){Rh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Zt]&=-129}reattach(){Ku(this._lView),this._lView[Zt]|=128}detectChanges(){this._lView[Zt]|=1024,function ig(t,r=!0){const s=t[As],a=s.rendererFactory;a.begin?.();try{!function Jy(t){Ni(t,0);let r=0;for(;Pu(t);){if(100===r)throw new ft(103,!1);r++,Ni(t,1)}}(t)}catch(h){throw r&&Mf(t,h),h}finally{a.end?.(),s.inlineEffectRunner?.flush()}}(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ft(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,rf(this._lView[lt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ft(902,!1);this._appRef=r,Ku(this._lView)}}let xf=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=tv}return t})();function tv(t){return function e_(t,r,s){if(go(t)&&!s){const a=vt(t.index,r);return new Of(a,a)}return 47&t.type?new Of(r[vr],r):null}(Rr(),Te(),16==(16&t))}let hi=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=zw;static#t=this.__NG_ENV_ID__=s=>s}return t})();class Gw extends hi{constructor(r){super(),this._lView=r}onDestroy(r){return Xl(this._lView,r),()=>function Ko(t,r){if(null===t[Xs])return;const s=t[Xs].indexOf(r);-1!==s&&t[Xs].splice(s,1)}(this._lView,r)}}function zw(){return new Gw(Te())}function xs(t,r){if(null!==function Pe(){return W}())throw new ft(-602,!1)}const iv=new Set;function Bd(t){iv.has(t)||(iv.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function sv(t){return r=>{setTimeout(t,void 0,r)}}const zl=class nI extends Ht.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,h=s||(()=>null),_=a;if(r&&"object"==typeof r){const R=r;l=R.next?.bind(R),h=R.error?.bind(R),_=R.complete?.bind(R)}this.__isAsync&&(h=sv(h),l&&(l=sv(l)),_&&(_=sv(_)));const E=super.subscribe({next:l,error:h,complete:_});return r instanceof Dn.w0&&r.add(E),E}};function ov(...t){}class $s{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new zl(!1),this.onMicrotaskEmpty=new zl(!1),this.onStable=new zl(!1),this.onError=new zl(!1),typeof Zone>"u")throw new ft(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function av(){const t="function"==typeof tn.requestAnimationFrame;let r=tn[t?"requestAnimationFrame":"setTimeout"],s=tn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&s){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function jd(t){const r=()=>{!function Ww(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(tn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ph(t),t.isCheckStableRunning=!0,ml(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ph(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,_,E)=>{if(function cv(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(E))return s.invokeTask(l,h,_,E);try{return uv(t),s.invokeTask(l,h,_,E)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||t.shouldCoalesceRunChangeDetection)&&r(),lv(t)}},onInvoke:(s,a,l,h,_,E,R)=>{try{return uv(t),s.invoke(l,h,_,E,R)}finally{t.shouldCoalesceRunChangeDetection&&r(),lv(t)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(t._hasPendingMicrotasks=h.microTask,Ph(t),ml(t)):"macroTask"==h.change&&(t.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),t.runOutsideAngular(()=>t.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$s.isInAngularZone())throw new ft(909,!1)}static assertNotInAngularZone(){if($s.isInAngularZone())throw new ft(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,_=h.scheduleEventTask("NgZoneEvent: "+l,r,Wl,ov,ov);try{return h.runTask(_,s,a)}finally{h.cancelTask(_)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const Wl={};function ml(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ph(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function uv(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function lv(t){t._nesting--,ml(t)}class n_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zl,this.onMicrotaskEmpty=new zl,this.onStable=new zl,this.onError=new zl}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}var Hd=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Hd||{});const ud={destroy(){}};function r_(t,r){!r&&Xa();const s=r?.injector??xn(Wn);if(!function Ft(t){return"browser"===(t??xn(Wn)).get(y)}(s))return ud;Bd("NgAfterNextRender");const a=s.get($d),l=a.handler??=new ug,h=r?.phase??Hd.MixedReadWrite,_=()=>{l.unregister(R),E()},E=s.get(hi).onDestroy(_),R=new ag(s,h,()=>{_(),t()});return l.register(R),{destroy:_}}class ag{constructor(r,s,a){this.phase=s,this.callbackFn=a,this.zone=r.get($s),this.errorHandler=r.get(id,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(r){this.errorHandler?.handleError(r)}}}class ug{constructor(){this.executingCallbacks=!1,this.buckets={[Hd.EarlyRead]:new Set,[Hd.Write]:new Set,[Hd.MixedReadWrite]:new Set,[Hd.Read]:new Set},this.deferredCallbacks=new Set}register(r){(this.executingCallbacks?this.deferredCallbacks:this.buckets[r.phase]).add(r)}unregister(r){this.buckets[r.phase].delete(r),this.deferredCallbacks.delete(r)}execute(){let r=!1;this.executingCallbacks=!0;for(const s of Object.values(this.buckets))for(const a of s)r=!0,a.invoke();this.executingCallbacks=!1;for(const s of this.deferredCallbacks)this.buckets[s.phase].add(s);return this.deferredCallbacks.clear(),r}destroy(){for(const r of Object.values(this.buckets))r.clear();this.deferredCallbacks.clear()}}let $d=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){const s=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const l of s)l();return!!this.handler?.execute()||s.length>0}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=ot({token:t,providedIn:"root",factory:()=>new t})}return t})();function i_(t,r){const s=vt(r,t),a=s[lt];!function s_(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(a,s);const l=s[Tn];null!==l&&null===s[ns]&&(s[ns]=yh(l,s[Fi])),Lf(a,s,s[ar])}function Lf(t,r,s){Le(r);try{const a=t.viewQuery;null!==a&&Ym(1,a,s);const l=t.template;null!==l&&Vm(t,r,l,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Qm(t,r),t.staticViewQueries&&Ym(2,t.viewQuery,s);const h=t.components;null!==h&&function dv(t,r){for(let s=0;s<r.length;s++)i_(t,r[s])}(r,h)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[Zt]&=-5,fi()}}function ql(t,r,s){let a=s?t.styles:null,l=s?t.classes:null,h=0;if(null!==r)for(let _=0;_<r.length;_++){const E=r[_];"number"==typeof E?h=E:1==h?l=Ln(l,E):2==h&&(a=Ln(a,E+": "+r[++_]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=l:t.classesWithoutHost=l}class o_ extends Eh{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Nn(r);return new Uf(s,this.ngModule)}}function a_(t){const r=[];for(const s in t){if(!t.hasOwnProperty(s))continue;const a=t[s];void 0!==a&&r.push({propName:Array.isArray(a)?a[0]:a,templateName:s})}return r}class Vf{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){a=Ei(a);const l=this.injector.get(r,rd,a);return l!==rd||s===rd?l:this.parentInjector.get(r,s,a)}}class Uf extends Ty{get inputs(){const r=this.componentDef,s=r.inputTransforms,a=a_(r.inputs);if(null!==s)for(const l of a)s.hasOwnProperty(l.propName)&&(l.transform=s[l.propName]);return a}get outputs(){return a_(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function $o(t){return t.map(wl).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,a,l){let h=(l=l||this.ngModule)instanceof Xo?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const _=h?new Vf(r,h):r,E=_.get(Vp,null);if(null===E)throw new ft(407,!1);const ie={rendererFactory:E,sanitizer:_.get(Sy,null),inlineEffectRunner:null,afterRenderEventManager:_.get($d,null),changeDetectionScheduler:_.get(_y,null)},ve=E.createRenderer(null,this.componentDef),Ce=this.componentDef.selectors[0][0]||"div",qe=a?function jm(t,r,s,a){const h=a.get(Ny,!1)||s===Ts.ShadowDom,_=t.selectRootElement(r,h);return function WE(t){Ah(t)}(_),_}(ve,a,this.componentDef.encapsulation,_):Nd(ve,Ce,function u_(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Ce));let ct=512;this.componentDef.signals?ct|=4096:this.componentDef.onPush||(ct|=16);let Pt=null;null!==qe&&(Pt=yh(qe,_,!0));const on=Sf(0,null,null,1,0,null,null,null,null,null,null),at=Yp(null,on,null,ct,null,null,ie,ve,_,null,Pt);let tr,kr;Le(at);try{const zr=this.componentDef;let iu,cE=null;zr.findHostDirectiveDefs?(iu=[],cE=new Map,zr.findHostDirectiveDefs(zr,iu,cE),iu.push(zr)):iu=[zr];const CP=function cg(t,r){const s=t[lt],a=yn;return t[a]=r,od(s,a,2,"#host",null)}(at,qe),DP=function hv(t,r,s,a,l,h,_){const E=l[lt];!function Bf(t,r,s,a){for(const l of t)r.mergedAttrs=To(r.mergedAttrs,l.hostAttrs);null!==r.mergedAttrs&&(ql(r,r.mergedAttrs,!0),null!==s&&em(a,s,r))}(a,t,r,_);let R=null;null!==r&&(R=yh(r,l[Fi]));const B=h.rendererFactory.createRenderer(r,s);let q=16;s.signals?q=4096:s.onPush&&(q=64);const ie=Yp(l,Uy(s),null,q,l[t.index],t,h,B,null,null,R);return E.firstCreatePass&&ad(E,t,a.length-1),ng(l,ie),l[t.index]=ie}(CP,qe,zr,iu,at,ie,ve);kr=Wi(on,yn),qe&&function dg(t,r,s,a){if(a)Pi(t,s,["ng-version","17.1.0"]);else{const{attrs:l,classes:h}=function Zs(t){const r=[],s=[];let a=1,l=2;for(;a<t.length;){let h=t[a];if("string"==typeof h)2===l?""!==h&&r.push(h,t[++a]):8===l&&s.push(h);else{if(!os(l))break;l=h}a++}return{attrs:r,classes:s}}(r.selectors[0]);l&&Pi(t,s,l),h&&h.length>0&&sy(t,s,h.join(" "))}}(ve,zr,qe,a),void 0!==s&&function fv(t,r,s){const a=t.projection=[];for(let l=0;l<r.length;l++){const h=s[l];a.push(null!=h?Array.from(h):null)}}(kr,this.ngContentSelectors,s),tr=function rI(t,r,s,a,l,h){const _=Rr(),E=l[lt],R=Ye(_,l);tg(E,l,_,s,null,a);for(let q=0;q<s.length;q++)Os(ms(l,E,_.directiveStart+q,_),l);Pf(E,l,_),R&&Os(R,l);const B=ms(l,E,_.directiveStart+_.componentOffset,_);if(t[ar]=l[ar]=B,null!==h)for(const q of h)q(B,r);return Um(E,_,t),B}(DP,zr,iu,cE,at,[l_]),Lf(on,at,null)}finally{fi()}return new lg(this.componentType,tr,td(kr,at),at,kr)}}class lg extends fm{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new Of(l,void 0,!1),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const h=this._rootLView;rg(h[lt],h,l,r,s),this.previousInputValues.set(r,s),Rh(vt(this._tNode.index,h))}}get injector(){return new Ci(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function l_(){const t=Rr();Al(Te()[lt],t)}function Kl(t){let r=function Mh(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;r;){let l;if(us(t))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new ft(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const _=t;_.inputs=_c(t.inputs),_.inputTransforms=_c(t.inputTransforms),_.declaredInputs=_c(t.declaredInputs),_.outputs=_c(t.outputs);const E=l.hostBindings;E&&c_(t,E);const R=l.viewQuery,B=l.contentQueries;if(R&&qw(t,R),B&&Kw(t,B),jf(t,l),Fr(t.outputs,l.outputs),us(l)&&l.data.animation){const q=t.data;q.animation=(q.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let _=0;_<h.length;_++){const E=h[_];E&&E.ngInherit&&E(t),E===Kl&&(s=!1)}}r=Object.getPrototypeOf(r)}!function iI(t){let r=0,s=null;for(let a=t.length-1;a>=0;a--){const l=t[a];l.hostVars=r+=l.hostVars,l.hostAttrs=To(l.hostAttrs,s=To(s,l.hostAttrs))}}(a)}function jf(t,r){for(const s in r.inputs){if(!r.inputs.hasOwnProperty(s)||t.inputs.hasOwnProperty(s))continue;const a=r.inputs[s];if(void 0!==a&&(t.inputs[s]=a,t.declaredInputs[s]=r.declaredInputs[s],null!==r.inputTransforms)){const l=Array.isArray(a)?a[0]:a;if(!r.inputTransforms.hasOwnProperty(l))continue;t.inputTransforms??={},t.inputTransforms[l]=r.inputTransforms[l]}}}function _c(t){return t===Hi?{}:t===$n?[]:t}function qw(t,r){const s=t.viewQuery;t.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Kw(t,r){const s=t.contentQueries;t.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function c_(t,r){const s=t.hostBindings;t.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}function mv(t){const r=t.inputConfig,s={};for(const a in r)if(r.hasOwnProperty(a)){const l=r[a];Array.isArray(l)&&l[3]&&(s[a]=l[3])}t.inputTransforms=s}function xh(t,r){return!r||null===r.firstChild||Yh(t)}function kh(t,r,s,a=!0){const l=r[lt];if(function Y_(t,r,s,a){const l=Qr+a,h=s.length;a>0&&(s[l-1][Xn]=r),a<h-Qr?(r[Xn]=s[l],qa(s,Qr+a,r)):(s.push(r),r[Xn]=null),r[Zr]=s;const _=r[ho];null!==_&&s!==_&&function uh(t,r){const s=t[bo];r[vr]!==r[Zr][Zr][vr]&&(t[Zt]|=Gi.HasTransplantedViews),null===s?t[bo]=[r]:s.push(r)}(_,r);const E=r[Gt];null!==E&&E.insertView(t),Ku(r),r[Zt]|=128}(l,r,t,s),a){const _=ph(s,t),E=r[Cn],R=vp(E,t[ui]);null!==R&&function Zg(t,r,s,a,l,h){a[Tn]=l,a[Ti]=r,wp(t,a,s,1,l,h)}(l,t[Ti],E,r,R,_)}const h=r[ns];null!==h&&null!==h.firstChild&&(h.firstChild=null)}let mg=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=CI}return t})();function CI(){return Sv(Rr(),Te())}const DI=mg,Dv=class extends DI{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return td(this._hostTNode,this._hostLView)}get injector(){return new Ci(this._hostTNode,this._hostLView)}get parentInjector(){const r=no(this._hostTNode,this._hostLView);if(da(r)){const s=Yo(r,this._hostLView),a=Sl(r);return new Ci(s[lt].data[a+8],s)}return new Ci(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Av(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-Qr}createEmbeddedView(r,s,a){let l,h;"number"==typeof a?l=a:null!=a&&(l=a.index,h=a.injector);const E=r.createEmbeddedViewImpl(s||{},h,null);return this.insertImpl(E,l,xh(this._hostTNode,null)),E}createComponent(r,s,a,l,h){const _=r&&!function cl(t){return"function"==typeof t}(r);let E;if(_)E=s;else{const qe=s||{};E=qe.index,a=qe.injector,l=qe.projectableNodes,h=qe.environmentInjector||qe.ngModuleRef}const R=_?r:new Uf(Nn(r)),B=a||this.parentInjector;if(!h&&null==R.ngModule){const ct=(_?B:this.parentInjector).get(Xo,null);ct&&(h=ct)}Nn(R.componentType??{});const Ce=R.create(B,l,null,h);return this.insertImpl(Ce.hostView,E,xh(this._hostTNode,null)),Ce}insert(r,s){return this.insertImpl(r,s,!0)}insertImpl(r,s,a){const l=r._lView;if(function Tt(t){return ei(t[Zr])}(l)){const E=this.indexOf(r);if(-1!==E)this.detach(E);else{const R=l[Zr],B=new Dv(R,R[Ti],R[Zr]);B.detach(B.indexOf(r))}}const h=this._adjustIndex(s),_=this._lContainer;return kh(_,l,h,a),r.attachToViewContainerRef(),qa(m_(_),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Av(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Bl(this._lContainer,s);a&&(Ml(m_(this._lContainer),s),sf(a[lt],a))}detach(r){const s=this._adjustIndex(r,-1),a=Bl(this._lContainer,s);return a&&null!=Ml(m_(this._lContainer),s)?new Of(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function Av(t){return t[8]}function m_(t){return t[8]||(t[8]=[])}function Sv(t,r){let s;const a=r[t.index];return ei(a)?s=a:(s=qy(a,r,null,t),r[t.index]=s,ng(r,s)),AI(s,r,t,a),new Dv(s,t,r)}let AI=function SI(t,r,s,a){if(t[ui])return;let l;l=8&s.type?Er(a):function e0(t,r){const s=t[Cn],a=s.createComment(""),l=Ye(r,t);return Yc(s,vp(s,l),a,function hh(t,r){return t.nextSibling(r)}(s,l),!1),a}(r,s),t[ui]=l},_g=()=>!1;function vo(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function cd(t,r,s,a,l,h,_,E){const R=Te(),B=kn(),q=t+yn,ie=B.firstCreatePass?function bI(t,r,s,a,l,h,_,E,R){const B=r.consts,q=od(r,t,4,_||null,He(B,E));Rf(r,s,q,He(B,R)),Al(r,q);const ie=q.tView=Sf(2,q,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,B,null);return null!==r.queries&&(r.queries.template(r,q),ie.queries=r.queries.embeddedTView(q)),q}(q,B,R,r,s,a,l,h,_):B.data[q];hs(ie,!1);const ve=__(B,R,ie,t);Dl()&&Ep(B,R,ve,ie),Os(ve,R);const Ce=qy(ve,R,ve,ie);return R[q]=Ce,ng(R,Ce),function bv(t,r,s){return _g(t,r,s)}(Ce,ie,R),eo(ie)&&Bm(B,R,ie),null!=_&&Af(R,ie,E),cd}let __=function y_(t,r,s,a){return Qo(!0),r[Cn].createComment("")};function OI(t,r,s,a){const l=Te();return vo(l,xe(),r)&&(kn(),Gl(Cr(),l,t,r,s,a)),OI}function Uv(t,r){return t<<17|r<<2}function Uh(t){return t>>17&32767}function xI(t){return 2|t}function Qf(t){return(131068&t)>>2}function kI(t,r){return-131069&t|r<<2}function FI(t){return 1|t}function v0(t,r,s,a){const l=t[s+1],h=null===r;let _=a?Uh(l):Qf(l),E=!1;for(;0!==_&&(!1===E||h);){const B=t[_+1];BD(t[_],r)&&(E=!0,t[_+1]=a?FI(B):xI(B)),_=a?Uh(B):Qf(B)}E&&(t[s+1]=a?xI(l):FI(l))}function BD(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&lc(t,r)>=0}function LI(t,r,s){const a=Te();return vo(a,xe(),r)&&function Tu(t,r,s,a,l,h,_,E){const R=Ye(r,s);let q,B=r.inputs;!E&&null!=B&&(q=B[a])?(rg(t,s,q,a,l),go(r)&&function QE(t,r){const s=vt(r,t);16&s[Zt]||(s[Zt]|=64)}(s,r.index)):3&r.type&&(a=function ZE(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),l=null!=_?_(l,r.value||"",a):l,h.setProperty(R,a,l))}(kn(),Cr(),a,t,r,a[Cn],s,!1),LI}function VI(t,r,s,a,l){const _=l?"class":"style";rg(t,s,r.inputs[_],_,a)}function UI(t,r){return function Cc(t,r,s,a){const l=Te(),h=kn(),_=function Zo(t){const r=dn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}(2);h.firstUpdatePass&&function b0(t,r,s,a){const l=t.data;if(null===l[s+1]){const h=l[Pr()],_=function S0(t,r){return r>=t.expandoStartIndex}(t,s);(function N0(t,r){return 0!=(t.flags&(r?8:16))})(h,a)&&null===r&&!_&&(r=!1),r=function ZD(t,r,s,a){const l=function S(t){const r=dn.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=P_(s=BI(null,t,r,s,a),r.attrs,a),h=null);else{const _=r.directiveStylingLast;if(-1===_||t[_]!==l)if(s=BI(l,t,r,s,a),null===h){let R=function QD(t,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Qf(a))return t[Uh(a)]}(t,r,a);void 0!==R&&Array.isArray(R)&&(R=BI(null,t,r,R[1],a),R=P_(R,r.attrs,a),function YD(t,r,s,a){t[Uh(s?r.classBindings:r.styleBindings)]=a}(t,r,a,R))}else h=function JD(t,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=P_(a,t[h].hostAttrs,s);return P_(a,r.attrs,s)}(t,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function VD(t,r,s,a,l,h){let _=h?r.classBindings:r.styleBindings,E=Uh(_),R=Qf(_);t[a]=s;let q,B=!1;if(Array.isArray(s)?(q=s[1],(null===q||lc(s,q)>0)&&(B=!0)):q=s,l)if(0!==R){const ve=Uh(t[E+1]);t[a+1]=Uv(ve,E),0!==ve&&(t[ve+1]=kI(t[ve+1],a)),t[E+1]=function FD(t,r){return 131071&t|r<<17}(t[E+1],a)}else t[a+1]=Uv(E,0),0!==E&&(t[E+1]=kI(t[E+1],a)),E=a;else t[a+1]=Uv(R,0),0===E?E=a:t[R+1]=kI(t[R+1],a),R=a;B&&(t[a+1]=xI(t[a+1])),v0(t,q,a,!0),v0(t,q,a,!1),function UD(t,r,s,a,l){const h=l?t.residualClasses:t.residualStyles;null!=h&&"string"==typeof r&&lc(h,r)>=0&&(s[a+1]=FI(s[a+1]))}(r,q,t,a,h),_=Uv(E,R),h?r.classBindings=_:r.styleBindings=_}(l,h,r,s,_,a)}}(h,t,_,a),r!==er&&vo(l,_,r)&&function P0(t,r,s,a,l,h,_,E){if(!(3&r.type))return;const R=t.data,B=R[E+1],q=function LD(t){return 1==(1&t)}(B)?M0(R,r,s,l,Qf(B),_):void 0;Bv(q)||(Bv(h)||function kD(t){return 2==(2&t)}(B)&&(h=M0(R,null,s,l,E,_)),function ry(t,r,s,a,l){if(r)l?t.addClass(s,a):t.removeClass(s,a);else{let h=-1===a.indexOf("-")?void 0:Jh.DashCase;null==l?t.removeStyle(s,a,h):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),h|=Jh.Important),t.setStyle(s,a,l,h))}}(a,_,Us(Pr(),s),l,h))}(h,h.data[Pr()],l,l[Cn],t,l[_+1]=function nA(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=Bn(jl(t)))),t}(r,s),a,_)}(t,r,null,!0),UI}function BI(t,r,s,a,l){let h=null;const _=s.directiveEnd;let E=s.directiveStylingLast;for(-1===E?E=s.directiveStart:E++;E<_&&(h=r[E],a=P_(a,h.hostAttrs,l),h!==t);)E++;return null!==t&&(s.directiveStylingLast=E),a}function P_(t,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const _=r[h];"number"==typeof _?l=_:l===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Hs(t,_,!!s||r[++h]))}return void 0===t?null:t}function M0(t,r,s,a,l,h){const _=null===r;let E;for(;l>0;){const R=t[l],B=Array.isArray(R),q=B?R[1]:R,ie=null===q;let ve=s[l+1];ve===er&&(ve=ie?$n:void 0);let Ce=ie?vd(ve,a):q===a?ve:void 0;if(B&&!Bv(Ce)&&(Ce=vd(R,a)),Bv(Ce)&&(E=Ce,_))return E;const qe=t[l+1];l=_?Uh(qe):Qf(qe)}if(null!==r){let R=h?r.residualClasses:r.residualStyles;null!=R&&(E=vd(R,a))}return E}function Bv(t){return void 0!==t}function jv(t,r,s,a){const l=Te(),h=kn(),_=yn+t,E=l[Cn],R=h.firstCreatePass?function DA(t,r,s,a,l,h){const _=r.consts,R=od(r,t,2,a,He(_,l));return Rf(r,s,R,He(_,h)),null!==R.attrs&&ql(R,R.attrs,!1),null!==R.mergedAttrs&&ql(R,R.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,R),R}(_,h,l,r,s,a):h.data[_],B=F0(h,l,R,E,r,t);l[_]=B;const q=eo(R);return hs(R,!0),em(E,B,R),32!=(32&R.flags)&&Dl()&&Ep(h,l,B,R),0===function Zu(){return dn.lFrame.elementDepthCount}()&&Os(B,l),function sn(){dn.lFrame.elementDepthCount++}(),q&&(Bm(h,l,R),Um(h,R,l)),null!==a&&Af(l,R),jv}function Hv(){let t=Rr();fu()?Tl():(t=t.parent,hs(t,!1));const r=t;(function un(t){return dn.skipHydrationRootTNode===t})(r)&&function ci(){dn.skipHydrationRootTNode=null}(),function Vr(){dn.lFrame.elementDepthCount--}();const s=kn();return s.firstCreatePass&&(Al(s,t),qo(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function tl(t){return 0!=(8&t.flags)}(r)&&VI(s,r,Te(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function nl(t){return 0!=(16&t.flags)}(r)&&VI(s,r,Te(),r.stylesWithoutHost,!1),Hv}function zI(t,r,s,a){return jv(t,r,s,a),Hv(),zI}let F0=(t,r,s,a,l,h)=>(Qo(!0),Nd(a,l,function Mc(){return dn.lFrame.currentNamespace}()));function U0(){return Te()}const Yf=void 0;var NA=["en",[["a","p"],["AM","PM"],Yf],[["AM","PM"],Yf,Yf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yf,"{1} 'at' {0}",Yf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function MA(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let xg={};function KI(t){const r=function OA(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=$0(r);if(s)return s;const a=r.split("-")[0];if(s=$0(a),s)return s;if("en"===a)return NA;throw new ft(701,!1)}function H0(t){return KI(t)[kg.PluralCase]}function $0(t){return t in xg||(xg[t]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[t]),xg[t]}var kg=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(kg||{});const Fg="en-US";let G0=Fg;function YI(t){return!!t&&"function"==typeof t.then}function gT(t){return!!t&&"function"==typeof t.subscribe}function JI(t,r,s,a){const l=Te(),h=kn(),_=Rr();return function _T(t,r,s,a,l,h,_){const E=eo(a),B=t.firstCreatePass&&Zy(t),q=r[ar],ie=Ky(r);let ve=!0;if(3&a.type||_){const ct=Ye(a,r),Pt=_?_(ct):ct,on=ie.length,at=_?kr=>_(Er(kr[a.index])):a.index;let tr=null;if(!_&&E&&(tr=function SS(t,r,s,a){const l=t.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const _=l[h];if(_===s&&l[h+1]===a){const E=r[So],R=l[h+2];return E.length>R?E[R]:null}"string"==typeof _&&(h+=2)}return null}(t,r,l,a.index)),null!==tr)(tr.__ngLastListenerFn__||tr).__ngNextListenerFn__=h,tr.__ngLastListenerFn__=h,ve=!1;else{h=vT(a,r,q,h,!1);const kr=s.listen(Pt,l,h);ie.push(h,kr),B&&B.push(l,at,on,on+1)}}else h=vT(a,r,q,h,!1);const Ce=a.outputs;let qe;if(ve&&null!==Ce&&(qe=Ce[l])){const ct=qe.length;if(ct)for(let Pt=0;Pt<ct;Pt+=2){const zr=r[qe[Pt]][qe[Pt+1]].subscribe(h),iu=ie.length;ie.push(h,zr),B&&B.push(l,a.index,iu,-(iu+1))}}}(h,l,l[Cn],_,t,r,a),JI}function yT(t,r,s,a){try{return Vs(6,r,s),!1!==s(a)}catch(l){return Mf(t,l),!1}finally{Vs(7,r,s)}}function vT(t,r,s,a,l){return function h(_){if(_===Function)return a;Rh(t.componentOffset>-1?vt(t.index,r):r);let R=yT(r,s,a,_),B=h.__ngNextListenerFn__;for(;B;)R=yT(r,s,B,_)&&R,B=B.__ngNextListenerFn__;return l&&!1===R&&_.preventDefault(),R}}function ET(t=1){return function za(t){return(dn.lFrame.contextLView=function Sa(t,r){for(;t>0;)r=r[Li],t--;return r}(t,dn.lFrame.contextLView))[ar]}(t)}function bS(t,r){let s=null;const a=function Ho(t){const r=t.attrs;if(null!=r){const s=r.indexOf(5);if(!(1&s))return r[s+1]}return null}(t);for(let l=0;l<r.length;l++){const h=r[l];if("*"!==h){if(null===a?Su(t,h,!0):Ba(a,h))return l}else s=l}return s}function IT(t){const r=Te()[vr][Ti];if(!r.projection){const a=r.projection=function uc(t,r){const s=[];for(let a=0;a<t;a++)s.push(r);return s}(t?t.length:1,null),l=a.slice();let h=r.child;for(;null!==h;){const _=t?bS(h,t):0;null!==_&&(l[_]?l[_].projectionNext=h:a[_]=h,l[_]=h),h=h.next}}}function wT(t,r=0,s){const a=Te(),l=kn(),h=od(l,yn+t,16,null,s||null);null===h.projection&&(h.projection=r),Tl(),(!a[ns]||Ir())&&32!=(32&h.flags)&&function ny(t,r,s){Jc(r[Cn],0,r,s,ch(t,s,r),Qg(s.parent||r[Ti],s,r))}(l,a,h)}function RS(){return this._results[Symbol.iterator]()}class ew{static#e=Symbol.iterator;get changes(){return this._changes??=new zl}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const s=ew.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=RS)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){this.dirty=!1;const a=function Ns(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function yd(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let l=t[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(this._results,a,s))&&(this._results=a,this.length=a.length,this.last=a[this.length-1],this.first=a[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}let F_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=NS}return t})();const PS=F_,MS=class extends PS{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,a){const l=function zf(t,r,s,a){const l=r.tView,E=Yp(t,l,s,4096&t[Zt]?4096:16,null,r,null,null,null,a?.injector??null,a?.dehydratedView??null);E[ho]=t[r.index];const B=t[Gt];return null!==B&&(E[Gt]=B.createEmbeddedView(l)),Lf(l,E,s),E}(this._declarationLView,this._declarationTContainer,r,{injector:s,dehydratedView:a});return new Of(l)}};function NS(){return qv(Rr(),Te())}function qv(t,r){return 4&t.type?new MS(r,t,td(t,r)):null}class tw{constructor(r){this.queryList=r,this.matches=null}clone(){return new tw(this.queryList)}setDirty(){this.queryList.setDirty()}}class nw{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const _=s.getByIndex(h);l.push(this.queries[_.indexInDeclarationView].clone())}return new nw(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==FT(r,s).matches&&this.queries[s].setDirty()}}class NT{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class rw{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new rw(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class iw{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new iw(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,OS(s,h)),this.matchTNodeWithReadOption(r,s,fa(s,r,h,!1,!1))}else a===F_?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,fa(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===$l||l===mg||l===F_&&4&s.type)this.addMatch(s.index,-2);else{const h=fa(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function OS(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function kS(t,r,s,a){return-1===s?function xS(t,r){return 11&t.type?td(t,r):4&t.type?qv(t,r):null}(r,t):-2===s?function FS(t,r,s){return s===$l?td(r,t):s===F_?qv(r,t):s===mg?Sv(r,t):void 0}(t,r,a):ms(t,t[lt],s,r)}function OT(t,r,s,a){const l=r[Gt].queries[a];if(null===l.matches){const h=t.data,_=s.matches,E=[];for(let R=0;R<_.length;R+=2){const B=_[R];E.push(B<0?null:kS(r,h[B],_[R+1],s.metadata.read))}l.matches=E}return l.matches}function sw(t,r,s,a){const l=t.queries.getByIndex(s),h=l.matches;if(null!==h){const _=OT(t,r,l,s);for(let E=0;E<h.length;E+=2){const R=h[E];if(R>0)a.push(_[E/2]);else{const B=h[E+1],q=r[-R];for(let ie=Qr;ie<q.length;ie++){const ve=q[ie];ve[ho]===ve[Zr]&&sw(ve[lt],ve,B,a)}if(null!==q[bo]){const ie=q[bo];for(let ve=0;ve<ie.length;ve++){const Ce=ie[ve];sw(Ce[lt],Ce,B,a)}}}}}return a}function xT(t,r,s){const a=new ew(4==(4&s));(function By(t,r,s,a){const l=Ky(r);l.push(s),t.firstCreatePass&&Zy(t).push(a,l.length-1)})(t,r,a,a.destroy),null===r[Gt]&&(r[Gt]=new nw),r[Gt].queries.push(new tw(a))}function kT(t,r,s){null===t.queries&&(t.queries=new rw),t.queries.track(new iw(r,s))}function FT(t,r){return t.queries.getByIndex(r)}function LT(t,r,s,a){const l=kn();if(l.firstCreatePass){const h=Rr();kT(l,new NT(r,s,a),h.index),function VS(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(l,t),2==(2&s)&&(l.staticContentQueries=!0)}xT(l,Te(),s)}function VT(t,r,s){const a=kn();a.firstCreatePass&&(kT(a,new NT(t,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),xT(a,Te(),r)}function UT(t){const r=Te(),s=kn(),a=x();H(a+1);const l=FT(s,a);if(t.dirty&&function Jt(t){return 4==(4&t[Zt])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)t.reset([]);else{const h=l.crossesNgTemplate?sw(s,r,a,[]):OT(s,r,l,a);t.reset(h,nd),t.notifyOnChanges()}return!0}return!1}function BT(){return function LS(t,r){return t[Gt].queries[r].queryList}(Te(),x())}function jT(t){return function Mi(t,r){return t[r]}(function fs(){return dn.lFrame.contextLView}(),yn+t)}function YT(t,r=""){const s=Te(),a=kn(),l=t+yn,h=a.firstCreatePass?od(a,l,1,r,null):a.data[l],_=JT(a,s,h,r,t);s[l]=_,Dl()&&Ep(a,s,_,h),hs(h,!1)}let JT=(t,r,s,a,l)=>(Qo(!0),function ah(t,r){return t.createText(r)}(r[Cn],a));function ow(t){return Kv("",t,""),ow}function Kv(t,r,s){const a=Te(),l=function Dg(t,r,s,a){return vo(t,xe(),s)?r+en(s)+a:er}(a,t,r,s);return l!==er&&function pl(t,r,s){const a=Us(r,t);!function mp(t,r,s){t.setValue(r,s)}(t[Cn],a,s)}(a,Pr(),l),Kv}function aw(t,r,s,a,l){if(t=_t(t),Array.isArray(t))for(let h=0;h<t.length;h++)aw(t[h],r,s,a,l);else{const h=kn(),_=Te(),E=Rr();let R=Jr(t)?t:_t(t.provide);const B=In(t),q=1048575&E.providerIndexes,ie=E.directiveStart,ve=E.providerIndexes>>20;if(Jr(t)||!t.multi){const Ce=new Nu(B,l,Dh),qe=lw(R,r,l?q:q+ve,ie);-1===qe?(bl(sc(E,_),h,R),uw(h,t,r.length),r.push(R),E.directiveStart++,E.directiveEnd++,l&&(E.providerIndexes+=1048576),s.push(Ce),_.push(Ce)):(s[qe]=Ce,_[qe]=Ce)}else{const Ce=lw(R,r,q+ve,ie),qe=lw(R,r,q,q+ve),Pt=qe>=0&&s[qe];if(l&&!Pt||!l&&!(Ce>=0&&s[Ce])){bl(sc(E,_),h,R);const on=function eb(t,r,s,a,l){const h=new Nu(t,s,Dh);return h.multi=[],h.index=r,h.componentProviders=0,aC(h,l,a&&!s),h}(l?XS:JS,s.length,l,a,B);!l&&Pt&&(s[qe].providerFactory=on),uw(h,t,r.length,0),r.push(R),E.directiveStart++,E.directiveEnd++,l&&(E.providerIndexes+=1048576),s.push(on),_.push(on)}else uw(h,t,Ce>-1?Ce:qe,aC(s[l?qe:Ce],B,!l&&a));!l&&a&&Pt&&s[qe].componentProviders++}}}function uw(t,r,s,a){const l=Jr(r),h=function mi(t){return!!t.useClass}(r);if(l||h){const R=(h?_t(r.useClass):r).prototype.ngOnDestroy;if(R){const B=t.destroyHooks||(t.destroyHooks=[]);if(!l&&r.multi){const q=B.indexOf(s);-1===q?B.push(s,[a,R]):B[q+1].push(a,R)}else B.push(s,R)}}}function aC(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function lw(t,r,s,a){for(let l=s;l<a;l++)if(r[l]===t)return l;return-1}function JS(t,r,s,a){return cw(this.multi,[])}function XS(t,r,s,a){const l=this.multi;let h;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=ms(s,s[lt],this.providerFactory.index,a);h=E.slice(0,_),cw(l,h);for(let R=_;R<E.length;R++)h.push(E[R])}else h=[],cw(l,h);return h}function cw(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function uC(t,r=[]){return s=>{s.providersResolver=(a,l)=>function YS(t,r,s){const a=kn();if(a.firstCreatePass){const l=us(t);aw(s,a.data,a.blueprint,l,!0),aw(r,a.data,a.blueprint,l,!1)}}(a,l?l(t):t,r)}}class Jf{}class lC{}function tb(t,r){return new dw(t,r??null,[])}class dw extends Jf{constructor(r,s,a){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new o_(this);const l=br(r);this._bootstrapComponents=Ot(l.bootstrap),this._r3Injector=qh(r,s,[{provide:Jf,useValue:this},{provide:Eh,useValue:this.componentFactoryResolver},...a],Bn(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class hw extends lC{constructor(r){super(),this.moduleType=r}create(r){return new dw(this.moduleType,r,[])}}class cC extends Jf{constructor(r){super(),this.componentFactoryResolver=new o_(this),this.instance=null;const s=new ka([...r.providers,{provide:Jf,useValue:this},{provide:Eh,useValue:this.componentFactoryResolver}],r.parent||xa(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function dC(t,r,s=null){return new cC({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let rb=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const a=Qt(0,s.type),l=a.length>0?dC([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,l)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ot({token:t,providedIn:"environment",factory:()=>new t(lr(Xo))})}return t})();function hC(t){Bd("NgStandalone"),t.getStandaloneInjector=r=>r.get(rb).getOrCreateStandaloneInjector(t)}function AC(t,r){return qv(t,r)}class HC{constructor(r){this.full=r;const s=r.split(".");this.major=s[0],this.minor=s[1],this.patch=s.slice(2).join(".")}}const Jb=new HC("17.1.0");let $C=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=ot({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();class Xb{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let eR=(()=>{class t{compileModuleSync(s){return new hw(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=Ot(br(s).declarations).reduce((_,E)=>{const R=Nn(E);return R&&_.push(new Uf(R)),_},[]);return new Xb(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Jv=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new hr.X(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const KC=new gn(""),ZC=new gn("");let vw,SR=(()=>{class t{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,vw||(function bR(t){vw=t}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$s.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb()}});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==h),s()},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(lr($s),lr(QC),lr(ZC))};static#t=this.\u0275prov=ot({token:t,factory:t.\u0275fac})}return t})(),QC=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return vw?.findTestabilityInTree(this,s,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=ot({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const YC=new gn("Application Initializer");let Ew=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,a)=>{this.resolve=s,this.reject=a}),this.appInits=xn(YC,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const l of this.appInits){const h=l();if(YI(h))s.push(h);else if(gT(h)){const _=new Promise((E,R)=>{h.subscribe({complete:E,error:R})});s.push(_)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Iw=new gn("appBootstrapListener");function eD(t,r){return Array.isArray(r)?r.reduce(eD,t):{...t,...r}}let Xf=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=xn(zp),this.afterRenderEffectManager=xn($d),this.componentTypes=[],this.components=[],this.isStable=xn(Jv).hasPendingTasks.pipe((0,Ar.U)(s=>!s)),this._injector=xn(Xo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const l=s instanceof Ty;if(!this._injector.get(Ew).done)throw!l&&Ys(s),new ft(405,!1);let _;_=l?s:this._injector.get(Eh).resolveComponentFactory(s),this.componentTypes.push(_.componentType);const E=function PR(t){return t.isBoundToModule}(_)?void 0:this._injector.get(Jf),B=_.create(Wn.NULL,[],a||_.selector,E),q=B.location.nativeElement,ie=B.injector.get(KC,null);return ie?.registerApplication(q),B.onDestroy(()=>{this.detachView(B.hostView),eE(this.components,B),ie?.unregisterApplication(q)}),this._loadComponent(B),B}tick(){if(this._runningTick)throw new ft(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this.internalErrorHandler(s)}finally{try{this.afterRenderEffectManager.execute()}catch(s){this.internalErrorHandler(s)}this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;eE(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(Iw,[]);[...this._bootstrapListeners,...a].forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>eE(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new ft(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function eE(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}let NR=(()=>{class t{constructor(){this.zone=xn($s),this.applicationRef=xn(Xf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function OR(){const t=xn($s),r=xn(id);return s=>t.runOutsideAngular(()=>r.handleError(s))}let kR=(()=>{class t{constructor(){this.subscription=new Dn.w0,this.initialized=!1,this.zone=xn($s),this.pendingTasks=xn(Jv)}initialize(){if(this.initialized)return;this.initialized=!0;let s=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(s=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{$s.assertNotInAngularZone(),queueMicrotask(()=>{null!==s&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(s),s=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{$s.assertInAngularZone(),s??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const nE=new gn("LocaleId",{providedIn:"root",factory:()=>xn(nE,On.Optional|On.SkipSelf)||function FR(){return typeof $localize<"u"&&$localize.locale||Fg}()}),LR=new gn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),ww=new gn("PlatformDestroyListeners");let iD=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function og(t="zone.js",r){return"noop"===t?new n_:"zone.js"===t?new $s(r):t}(a?.ngZone,function rD(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return l.run(()=>{const h=function nb(t,r,s){return new dw(t,r,s)}(s.moduleType,this.injector,function nD(t){return[{provide:$s,useFactory:t},{provide:oe,multi:!0,useFactory:()=>{const r=xn(NR,{optional:!0});return()=>r.initialize()}},{provide:oe,multi:!0,useFactory:()=>{const r=xn(kR);return()=>{r.initialize()}}},{provide:zp,useFactory:OR}]}(()=>l)),_=h.injector.get(id,null);return l.runOutsideAngular(()=>{const E=l.onError.subscribe({next:R=>{_.handleError(R)}});h.onDestroy(()=>{eE(this._modules,h),E.unsubscribe()})}),function XC(t,r,s){try{const a=s();return YI(a)?a.catch(l=>{throw r.runOutsideAngular(()=>t.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(_,l,()=>{const E=h.injector.get(Ew);return E.runInitializers(),E.donePromise.then(()=>(function z0(t){ii(t,"Expected localeId to be defined"),"string"==typeof t&&(G0=t.toLowerCase().replace(/_/g,"-"))}(h.injector.get(nE,Fg)||Fg),this._moduleDoBootstrap(h),h))})})}bootstrapModule(s,a=[]){const l=eD({},a);return function RR(t,r,s){const a=new hw(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(Xf);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new ft(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ft(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(ww,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||t)(lr(Wn))};static#t=this.\u0275prov=ot({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Bh=null;const sD=new gn("AllowMultipleToken");function oD(t,r,s=[]){const a=`Platform: ${r}`,l=new gn(a);return(h=[])=>{let _=Tw();if(!_||_.injector.get(sD,!1)){const E=[...s,...h,{provide:l,useValue:!0}];t?t(E):function UR(t){if(Bh&&!Bh.get(sD,!1))throw new ft(400,!1);(function JC(){!function zt(t){Un=t}(()=>{throw new ft(600,!1)})})(),Bh=t;const r=t.get(iD);(function uD(t){t.get(Dd,null)?.forEach(s=>s())})(t)}(function aD(t=[],r){return Wn.create({name:r,providers:[{provide:ni,useValue:"platform"},{provide:ww,useValue:new Set([()=>Bh=null])},...t]})}(E,a))}return function BR(t){const r=Tw();if(!r)throw new ft(401,!1);return r}()}}function Tw(){return Bh?.get(iD)??null}function HR(){return!1}const qR=oD(null,"core",[]);let KR=(()=>{class t{constructor(s){}static#e=this.\u0275fac=function(a){return new(a||t)(lr(Xf))};static#t=this.\u0275mod=Go({type:t});static#n=this.\u0275inj=ln({})}return t})();function IP(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function TP(t){const r=Nn(t);if(!r)return null;const s=new Uf(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},4694:(Mt,Ue,$)=>{$.d(Ue,{zQ:()=>Ee,ww:()=>be,rT:()=>Un,f7:()=>zt,L6:()=>an,_Q:()=>At,lh:()=>Rn,Qv:()=>Ve,nw:()=>rn}),$(5622);var W=$(6814),le=$(9212),se=$(8326),ye=$(7217),pe=$(8645),Pe=$(2096),b=$(5592),Fe=$(2459),fe=$(3019),he=$(3093),Oe=$(4664),st=$(7398),Xe=$(4552);class gt extends pe.x{constructor(De=1/0,We=1/0,Me=Xe.l){super(),this._bufferSize=De,this._windowTime=We,this._timestampProvider=Me,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=We===1/0,this._bufferSize=Math.max(1,De),this._windowTime=Math.max(1,We)}next(De){const{isStopped:We,_buffer:Me,_infiniteTimeWindow:ut,_timestampProvider:Dt,_windowTime:Rt}=this;We||(Me.push(De),!ut&&Me.push(Dt.now()+Rt)),this._trimBuffer(),super.next(De)}_subscribe(De){this._throwIfClosed(),this._trimBuffer();const We=this._innerSubscribe(De),{_infiniteTimeWindow:Me,_buffer:ut}=this,Dt=ut.slice();for(let Rt=0;Rt<Dt.length&&!De.closed;Rt+=Me?1:2)De.next(Dt[Rt]);return this._checkFinalizedStatuses(De),We}_trimBuffer(){const{_bufferSize:De,_timestampProvider:We,_buffer:Me,_infiniteTimeWindow:ut}=this,Dt=(ut?1:2)*De;if(De<1/0&&Dt<Me.length&&Me.splice(0,Me.length-Dt),!ut){const Rt=We.now();let It=0;for(let jt=1;jt<Me.length&&Me[jt]<=Rt;jt+=2)It=jt;It&&Me.splice(0,It+1)}}}var qt=$(4829),Et=$(305),dt=$(9360);function Bt(Se,De,...We){if(!0===De)return void Se();if(!1===De)return;const Me=new Et.Hp({next:()=>{Me.unsubscribe(),Se()}});return(0,qt.Xf)(De(...We)).subscribe(Me)}function nt(Se,De,We){let Me,ut=!1;return Se&&"object"==typeof Se?({bufferSize:Me=1/0,windowTime:De=1/0,refCount:ut=!1,scheduler:We}=Se):Me=Se??1/0,function Kt(Se={}){const{connector:De=(()=>new pe.x),resetOnError:We=!0,resetOnComplete:Me=!0,resetOnRefCountZero:ut=!0}=Se;return Dt=>{let Rt,It,jt,Ht=0,Dn=!1,hr=!1;const Ar=()=>{It?.unsubscribe(),It=void 0},Sn=()=>{Ar(),Rt=jt=void 0,Dn=hr=!1},Vt=()=>{const ft=Rt;Sn(),ft?.unsubscribe()};return(0,dt.e)((ft,Sr)=>{Ht++,!hr&&!Dn&&Ar();const fr=jt=jt??De();Sr.add(()=>{Ht--,0===Ht&&!hr&&!Dn&&(It=Bt(Vt,ut))}),fr.subscribe(Sr),!Rt&&Ht>0&&(Rt=new Et.Hp({next:Wr=>fr.next(Wr),error:Wr=>{hr=!0,Ar(),It=Bt(Sn,We,Wr),fr.error(Wr)},complete:()=>{Dn=!0,Ar(),It=Bt(Sn,Me),fr.complete()}}),(0,qt.Xf)(ft).subscribe(Rt))})(Dt)}}({connector:()=>new gt(Me,De,We),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ut})}var ce=$(1374),ze=$(4674);function ht(Se,De){return(0,ze.m)(De)?(0,Oe.w)(()=>Se,De):(0,Oe.w)(()=>Se)}var Ge=$(5137),Ze=$(2181),$e=$(7142);const Ve=new le.OlP("angularfire2.auth.use-emulator"),an=new le.OlP("angularfire2.auth.settings"),At=new le.OlP("angularfire2.auth.tenant-id"),Un=new le.OlP("angularfire2.auth.langugage-code"),Rn=new le.OlP("angularfire2.auth.use-device-language"),zt=new le.OlP("angularfire.auth.persistence"),rn=(Se,De,We,Me,ut,Dt,Rt,It)=>(0,ye.cc)(`${Se.name}.auth`,"AngularFireAuth",Se.name,()=>{const jt=De.runOutsideAngular(()=>Se.auth());if(We&&jt.useEmulator(...We),Me&&(jt.tenantId=Me),jt.languageCode=ut,Dt&&jt.useDeviceLanguage(),Rt)for(const[Ht,Dn]of Object.entries(Rt))jt.settings[Ht]=Dn;return It&&jt.setPersistence(It),jt},[We,Me,ut,Dt,Rt,It]);let Ee=(()=>{class Se{authState;idToken;user;idTokenResult;credential;constructor(We,Me,ut,Dt,Rt,It,jt,Ht,Dn,hr,Ar,Sn){const Vt=new pe.x,ft=(0,Pe.of)(void 0).pipe((0,he.Q)(Rt.outsideAngular),(0,Oe.w)(()=>Dt.runOutsideAngular(()=>Promise.resolve().then($.bind($,5622)))),(0,st.U)(()=>(0,ye.on)(We,Dt,Me)),(0,st.U)(Sr=>rn(Sr,Dt,It,Ht,Dn,hr,jt,Ar)),nt({bufferSize:1,refCount:!1}));if((0,W.PM)(ut))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Pe.of)(null);else{ft.pipe((0,ce.P)()).subscribe();const Sr=ft.pipe((0,Oe.w)(Fn=>Fn.getRedirectResult().then(pr=>pr,()=>null)),se.iC,nt({bufferSize:1,refCount:!1})),fr=ft.pipe((0,Oe.w)(Fn=>new b.y(pr=>({unsubscribe:Dt.runOutsideAngular(()=>Fn.onAuthStateChanged(nr=>pr.next(nr),nr=>pr.error(nr),()=>pr.complete()))})))),Wr=ft.pipe((0,Oe.w)(Fn=>new b.y(pr=>({unsubscribe:Dt.runOutsideAngular(()=>Fn.onIdTokenChanged(nr=>pr.next(nr),nr=>pr.error(nr),()=>pr.complete()))}))));this.authState=Sr.pipe(ht(fr),(0,Ge.R)(Rt.outsideAngular),(0,he.Q)(Rt.insideAngular)),this.user=Sr.pipe(ht(Wr),(0,Ge.R)(Rt.outsideAngular),(0,he.Q)(Rt.insideAngular)),this.idToken=this.user.pipe((0,Oe.w)(Fn=>Fn?(0,Fe.D)(Fn.getIdToken()):(0,Pe.of)(null))),this.idTokenResult=this.user.pipe((0,Oe.w)(Fn=>Fn?(0,Fe.D)(Fn.getIdTokenResult()):(0,Pe.of)(null))),this.credential=(0,fe.T)(Sr,Vt,this.authState.pipe((0,Ze.h)(Fn=>!Fn))).pipe((0,st.U)(Fn=>Fn?.user?Fn:null),(0,Ge.R)(Rt.outsideAngular),(0,he.Q)(Rt.insideAngular))}return(0,ye.pX)(this,ft,Dt,{spy:{apply:(Sr,fr,Wr)=>{(Sr.startsWith("signIn")||Sr.startsWith("createUser"))&&Wr.then(Fn=>Vt.next(Fn))}}})}static \u0275fac=function(Me){return new(Me||Se)(le.LFG(ye.Dh),le.LFG(ye.xv,8),le.LFG(le.Lbi),le.LFG(le.R0b),le.LFG(se.HU),le.LFG(Ve,8),le.LFG(an,8),le.LFG(At,8),le.LFG(Un,8),le.LFG(Rn,8),le.LFG(zt,8),le.LFG(se.Rf,8))};static \u0275prov=le.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"any"})}return Se})(),be=(()=>{class Se{constructor(){$e.Z.registerVersion("angularfire",se.q4.full,"auth-compat")}static \u0275fac=function(Me){return new(Me||Se)};static \u0275mod=le.oAB({type:Se});static \u0275inj=le.cJS({providers:[Ee]})}return Se})()},6533:(Mt,Ue,$)=>{$.d(Ue,{ST:()=>Lv,yb:()=>MI});var C=$(6814),W=$(9212),le=$(8326),se=$(7217),ye=$(4694),pe=$(6321),Pe=$(5592),b=$(2459),Fe=$(2096),fe=$(7921),he=$(9360),Oe=$(8251);function st(){return(0,he.e)((i,e)=>{let n,o=!1;i.subscribe((0,Oe.x)(e,u=>{const c=n;n=u,o&&e.next([c,u]),o=!0}))})}var Xe=$(7398),gt=$(6699),qt=$(2737);function dt(i,e){return i===e}var Ve,Kt=$(2181),nt=($(5622),$(3106)),ce=$(5861),ze=$(534),ht=$(4537),Ge=$(7879),Ze=$(9058),$e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ue={},an=an||{},At=$e||self;function Un(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Rn(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var rn="closure_uid_"+(1e9*Math.random()>>>0),Ee=0;function be(i,e,n){return i.call.apply(i.bind,arguments)}function Se(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function De(i,e,n){return(De=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?be:Se).apply(null,arguments)}function We(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Me(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(o,u,c){for(var g=Array(arguments.length-2),M=2;M<arguments.length;M++)g[M-2]=arguments[M];return e.prototype[u].apply(o,g)}}function ut(){this.s=this.s,this.o=this.o}ut.prototype.s=!1,ut.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function zt(i){Object.prototype.hasOwnProperty.call(i,rn)&&i[rn]||(i[rn]=++Ee)}(this)},ut.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Rt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function It(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function jt(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(Un(o)){const u=i.length||0,c=o.length||0;i.length=u+c;for(let g=0;g<c;g++)i[u+g]=o[g]}else i.push(o)}}function Ht(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Ht.prototype.h=function(){this.defaultPrevented=!0};var Dn=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{const n=()=>{};At.addEventListener("test",n,e),At.removeEventListener("test",n,e)}catch{}return i}();function hr(i){return/^[\s\xa0]*$/.test(i)}function Ar(){var i=At.navigator;return i&&(i=i.userAgent)?i:""}function Sn(i){return-1!=Ar().indexOf(i)}function Vt(i){return Vt[" "](i),i}Vt[" "]=function(){};var Yt,i,Sr=Sn("Opera"),fr=Sn("Trident")||Sn("MSIE"),Wr=Sn("Edge"),Fn=Wr||fr,pr=Sn("Gecko")&&!(-1!=Ar().toLowerCase().indexOf("webkit")&&!Sn("Edge"))&&!(Sn("Trident")||Sn("MSIE"))&&!Sn("Edge"),nr=-1!=Ar().toLowerCase().indexOf("webkit")&&!Sn("Edge");function An(){var i=At.document;return i?i.documentMode:void 0}e:{var Ai="",En=(i=Ar(),pr?/rv:([^\);]+)(\)|;)/.exec(i):Wr?/Edge\/([\d\.]+)/.exec(i):fr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):nr?/WebKit\/(\S+)/.exec(i):Sr?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(En&&(Ai=En?En[1]:""),fr){var Fr=An();if(null!=Fr&&Fr>parseFloat(Ai)){Yt=String(Fr);break e}}Yt=Ai}var Fo=At.document&&fr&&(An()||parseInt(Yt,10))||void 0;function qn(i,e){if(Ht.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(pr){e:{try{Vt(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Qi[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&qn.$.h.call(this)}}Me(qn,Ht);var Qi={2:"touch",3:"pen",4:"mouse"};qn.prototype.h=function(){qn.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var _t="closure_listenable_"+(1e6*Math.random()|0),Ui=0;function wn(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=u,this.key=++Ui,this.fa=this.ia=!1}function Yn(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function yi(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function Oi(i){const e={};for(const n in i)e[n]=i[n];return e}const zn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rr(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let c=0;c<zn.length;c++)n=zn[c],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function Br(i){this.src=i,this.g={},this.h=0}function en(i,e){var n=e.type;if(n in i.g){var c,o=i.g[n],u=Rt(o,e);(c=0<=u)&&Array.prototype.splice.call(o,u,1),c&&(Yn(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function Pn(i,e,n,o){for(var u=0;u<i.length;++u){var c=i[u];if(!c.fa&&c.listener==e&&c.capture==!!n&&c.la==o)return u}return-1}Br.prototype.add=function(i,e,n,o,u){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var g=Pn(i,e,o,u);return-1<g?(e=i[g],n||(e.ia=!1)):((e=new wn(e,this.src,c,!!o,u)).ia=n,i.push(e)),e};var ss="closure_lm_"+(1e6*Math.random()|0),me={};function X(i,e,n,o,u){if(o&&o.once)return re(i,e,n,o,u);if(Array.isArray(e)){for(var c=0;c<e.length;c++)X(i,e[c],n,o,u);return null}return n=fn(n),i&&i[_t]?i.O(e,n,Rn(o)?!!o.capture:!!o,u):ne(i,e,n,!1,o,u)}function ne(i,e,n,o,u,c){if(!e)throw Error("Invalid event type");var g=Rn(u)?!!u.capture:!!u,M=Wt(i);if(M||(i[ss]=M=new Br(i)),(n=M.add(e,n,o,g,c)).proxy)return n;if(o=function ee(){const e=hn;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)Dn||(u=g),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Nt(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function re(i,e,n,o,u){if(Array.isArray(e)){for(var c=0;c<e.length;c++)re(i,e[c],n,o,u);return null}return n=fn(n),i&&i[_t]?i.P(e,n,Rn(o)?!!o.capture:!!o,u):ne(i,e,n,!0,o,u)}function we(i,e,n,o,u){if(Array.isArray(e))for(var c=0;c<e.length;c++)we(i,e[c],n,o,u);else o=Rn(o)?!!o.capture:!!o,n=fn(n),i&&i[_t]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=Pn(c=i.g[e],n,o,u))&&(Yn(c[n]),Array.prototype.splice.call(c,n,1),0==c.length&&(delete i.g[e],i.h--))):i&&(i=Wt(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Pn(e,n,o,u)),(n=-1<i?e[i]:null)&&et(n))}function et(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[_t])en(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(Nt(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=Wt(e))?(en(n,i),0==n.h&&(n.src=null,e[ss]=null)):Yn(i)}}}function Nt(i){return i in me?me[i]:me[i]="on"+i}function hn(i,e){if(i.fa)i=!0;else{e=new qn(e,this);var n=i.listener,o=i.la||i.src;i.ia&&et(i),i=n.call(o,e)}return i}function Wt(i){return(i=i[ss])instanceof Br?i:null}var Hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function fn(i){return"function"==typeof i?i:(i[Hn]||(i[Hn]=function(e){return i.handleEvent(e)}),i[Hn])}function Mn(){ut.call(this),this.i=new Br(this),this.S=this,this.J=null}function Or(i,e){var n,o=i.J;if(o)for(n=[];o;o=o.J)n.push(o);if(i=i.S,o=e.type||e,"string"==typeof e)e=new Ht(e,i);else if(e instanceof Ht)e.target=e.target||i;else{var u=e;rr(e=new Ht(o,i),u)}if(u=!0,n)for(var c=n.length-1;0<=c;c--){var g=e.g=n[c];u=Ws(g,o,!0,e)&&u}if(u=Ws(g=e.g=i,o,!0,e)&&u,u=Ws(g,o,!1,e)&&u,n)for(c=0;c<n.length;c++)u=Ws(g=e.g=n[c],o,!1,e)&&u}function Ws(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,c=0;c<e.length;++c){var g=e[c];if(g&&!g.fa&&g.capture==n){var M=g.listener,F=g.la||g.src;g.ia&&en(i.i,g),u=!1!==M.call(F,o)&&u}}return u&&!o.defaultPrevented}Me(Mn,ut),Mn.prototype[_t]=!0,Mn.prototype.removeEventListener=function(i,e,n,o){we(this,i,e,n,o)},Mn.prototype.N=function(){if(Mn.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)Yn(n[o]);delete i.g[e],i.h--}}this.J=null},Mn.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},Mn.prototype.P=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var Eo=At.JSON.stringify;function ya(){var i=$t;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Ut=new class Ua{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Yi,i=>i.reset());class Yi{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Be(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function Re(i){At.setTimeout(()=>{throw i},0)}let Qe,ot=!1,$t=new class ii{constructor(){this.h=this.g=null}add(e,n){const o=Ut.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},ln=()=>{const i=At.Promise.resolve(void 0);Qe=()=>{i.then(_n)}};var _n=()=>{for(var i;i=ya();){try{i.h.call(i.g)}catch(n){Re(n)}var e=Ut;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}ot=!1};function Jn(i,e){Mn.call(this),this.h=i||1,this.g=e||At,this.j=De(this.qb,this),this.l=Date.now()}function yr(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function Xr(i,e,n){if("function"==typeof i)n&&(i=De(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=De(i.handleEvent,i)}return 2147483647<Number(e)?-1:At.setTimeout(i,e||0)}function Bi(i){i.g=Xr(()=>{i.g=null,i.i&&(i.i=!1,Bi(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Me(Jn,Mn),(Ve=Jn.prototype).ga=!1,Ve.T=null,Ve.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Or(this,"tick"),this.ga&&(yr(this),this.start()))}},Ve.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ve.N=function(){Jn.$.N.call(this),yr(this),delete this.g};class va extends ut{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Bi(this)}N(){super.N(),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function io(i){ut.call(this),this.h=i,this.g={}}Me(io,ut);var gr=[];function Lo(i,e,n,o){Array.isArray(n)||(n&&(gr[0]=n.toString()),n=gr);for(var u=0;u<n.length;u++){var c=X(e,n[u],o||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function On(i){yi(i.g,function(e,n){this.g.hasOwnProperty(n)&&et(e)},i),i.g={}}function Ji(){this.g=!0}function Si(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function tn(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var c=u[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var g=1;g<u.length;g++)u[g]=""}}}return Eo(n)}catch{return e}}(i,n)+(o?" "+o:"")})}io.prototype.N=function(){io.$.N.call(this),On(this)},io.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ji.prototype.Ea=function(){this.g=!1},Ji.prototype.info=function(){};var si={},oo=null;function gn(){return oo=oo||new Mn}function bi(i){Ht.call(this,si.Ta,i)}function vs(i){const e=gn();Or(e,new bi(e))}function Es(i,e){Ht.call(this,si.STAT_EVENT,i),this.stat=e}function jr(i){const e=gn();Or(e,new Es(e,i))}function Ea(i,e){Ht.call(this,si.Ua,i),this.size=e}function oi(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){i()},e)}si.Ta="serverreachability",Me(bi,Ht),si.STAT_EVENT="statevent",Me(Es,Ht),si.Ua="timingevent",Me(Ea,Ht);var su={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Au={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Io(){}function Il(){}Io.prototype.h=null;var sa,Is={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ia(){Ht.call(this,"d")}function ws(){Ht.call(this,"c")}function ai(){}function Vo(i,e,n,o){this.l=i,this.j=e,this.m=n,this.W=o||1,this.U=new io(this),this.P=Ri,this.V=new Jn(i=Fn?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Uo}function Uo(){this.i=null,this.g="",this.h=!1}Me(ia,Ht),Me(ws,Ht),Me(ai,Io),ai.prototype.g=function(){return new XMLHttpRequest},ai.prototype.i=function(){return{}},sa=new ai;var Ri=45e3,oa={},ks={};function qs(i,e,n){i.L=1,i.A=wa(Pi(e)),i.u=n,i.S=!0,lr(i,null)}function lr(i,e){i.G=Date.now(),Fs(i),i.B=Pi(i.A);var n=i.B,o=i.W;Array.isArray(o)||(o=[String(o)]),wl(n.i,"t",o),i.o=0,n=i.l.J,i.h=new Uo,i.g=du(i.l,n?e:null,!i.u),0<i.O&&(i.M=new va(De(i.Pa,i,i.g),i.O)),Lo(i.U,i.g,"readystatechange",i.nb),e=i.I?Oi(i.I):{},i.u?(i.v||(i.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.B,i.v,i.u,e)):(i.v="GET",i.g.ha(i.B,i.v,null,e)),vs(),function vi(i,e,n,o,u,c){i.info(function(){if(i.g)if(c)for(var g="",M=c.split("&"),F=0;F<M.length;F++){var j=M[F].split("=");if(1<j.length){var Q=j[0];j=j[1];var ae=Q.split("_");g=2<=ae.length&&"type"==ae[1]?g+(Q+"=")+j+"&":g+(Q+"=redacted&")}}else g=null;else g=c;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+g})}(i.j,i.v,i.B,i.m,i.W,i.u)}function aa(i){return!!i.g&&"GET"==i.v&&2!=i.L&&i.l.Ha}function xn(i,e,n){let u,o=!0;for(;!i.J&&i.o<n.length;){if(u=Ei(i,n),u==ks){4==e&&(i.s=4,jr(14),o=!1),Si(i.j,i.m,null,"[Incomplete Response]");break}if(u==oa){i.s=4,jr(15),Si(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}Si(i.j,i.m,u,null),xi(i,u)}aa(i)&&0!=i.o&&(i.h.g=i.h.g.slice(i.o),i.o=0),4!=e||0!=n.length||i.h.h||(i.s=1,jr(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gi(e),e.M=!0,jr(11))):(Si(i.j,i.m,n,"[Invalid Chunked Response]"),ji(i),wo(i))}function Ei(i,e){var n=i.o,o=e.indexOf("\n",n);return-1==o?ks:(n=Number(e.substring(n,o)),isNaN(n)?oa:(o+=1)+n>e.length?ks:(e=e.slice(o,o+n),i.o=o+n,e))}function Fs(i){i.Y=Date.now()+i.P,ao(i,i.P)}function ao(i,e){if(null!=i.C)throw Error("WatchDog timer not null");i.C=oi(De(i.lb,i),e)}function Ks(i){i.C&&(At.clearTimeout(i.C),i.C=null)}function wo(i){0==i.l.H||i.J||qo(i.l,i)}function ji(i){Ks(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,yr(i.V),On(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function xi(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||uu(n.i,i)))if(!i.K&&uu(n.i,i)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;ei(n),fo(n)}Qr(n),jr(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=oi(De(n.ib,n),6e3));if(1>=$i(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else eo(n,11)}else if((i.K||n.g==i)&&ei(n),!hr(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let j=u[e];if(n.V=j[0],j=j[1],2==n.H)if("c"==j[0]){n.K=j[1],n.pa=j[2];const Q=j[3];null!=Q&&(n.ra=Q,n.l.info("VER="+n.ra));const ae=j[4];null!=ae&&(n.Ga=ae,n.l.info("SVER="+n.Ga));const Ie=j[5];null!=Ie&&"number"==typeof Ie&&0<Ie&&(n.L=o=1.5*Ie,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const je=i.g;if(je){const yt=je.g?je.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yt){var c=o.i;c.g||-1==yt.indexOf("spdy")&&-1==yt.indexOf("quic")&&-1==yt.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(Qs(c,c.h),c.h=null))}if(o.F){const Lt=je.g?je.g.getResponseHeader("X-HTTP-Session-Id"):null;Lt&&(o.Da=Lt,Gn(o.I,o.F,Lt))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var g=i;if((o=n).wa=cu(o,o.J?o.pa:null,o.Y),g.K){Nn(o.i,g);var M=g,F=o.L;F&&M.setTimeout(F),M.C&&(Ks(M),Fs(M)),o.g=g}else bo(o);0<n.j.length&&yn(n)}else"stop"!=j[0]&&"close"!=j[0]||eo(n,7);else 3==n.H&&("stop"==j[0]||"close"==j[0]?"stop"==j[0]?eo(n,7):Xs(n):"noop"!=j[0]&&n.h&&n.h.Aa(j),n.A=0)}vs()}catch{}}function Hi(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Un(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function Ts(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Un(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function Ia(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Un(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length,c=0;c<u;c++)e.call(void 0,o[c],n&&n[c],i)}(Ve=Vo.prototype).setTimeout=function(i){this.P=i},Ve.nb=function(i){i=i.target;const e=this.M;e&&3==Li(i)?e.l():this.Pa(i)},Ve.Pa=function(i){try{if(i==this.g)e:{const Q=Li(this.g);var e=this.g.Ia();if(this.g.da(),!(3>Q)&&(3!=Q||Fn||this.g&&(this.h.h||this.g.ja()||vr(this.g)))){this.J||4!=Q||7==e||vs(),Ks(this);var n=this.g.da();this.ca=n;t:if(aa(this)){var o=vr(this.g);i="";var u=o.length,c=4==Li(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ji(this),wo(this);var g="";break t}this.h.i=new At.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:c&&e==u-1});o.length=0,this.h.g+=i,this.o=0,g=this.h.g}else g=this.g.ja();if(this.i=200==n,function wr(i,e,n,o,u,c,g){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+c+" "+g})}(this.j,this.v,this.B,this.m,this.W,Q,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var M,F=this.g;if((M=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hr(M)){var j=M;break t}}j=null}if(!(n=j)){this.i=!1,this.s=3,jr(12),ji(this),wo(this);break e}Si(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xi(this,n)}this.S?(xn(this,Q,g),Fn&&this.i&&3==Q&&(Lo(this.U,this.V,"tick",this.mb),this.V.start())):(Si(this.j,this.m,g,null),xi(this,g)),4==Q&&ji(this),this.i&&!this.J&&(4==Q?qo(this.l,this):(this.i=!1,Fs(this)))}else(function ho(i){const e={};i=(i.g&&2<=Li(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<i.length;o++){if(hr(i[o]))continue;var n=Be(i[o]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const c=e[u]||[];e[u]=c,c.push(n)}!function qr(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<g.indexOf("Unknown SID")?(this.s=3,jr(12)):(this.s=0,jr(13)),ji(this),wo(this)}}}catch{}},Ve.mb=function(){if(this.g){var i=Li(this.g),e=this.g.ja();this.o<e.length&&(Ks(this),xn(this,i,e),this.i&&4!=i&&Fs(this))}},Ve.cancel=function(){this.J=!0,ji(this)},Ve.lb=function(){this.C=null;const i=Date.now();0<=i-this.Y?(function so(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(vs(),jr(17)),ji(this),this.s=2,wo(this)):ao(this,this.Y-i)};var $n=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xi(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Xi){this.h=i.h,es(this,i.j),this.s=i.s,this.g=i.g,Bo(this,i.m),this.l=i.l;var e=i.i,n=new as;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),To(this,n),this.o=i.o}else i&&(e=String(i).match($n))?(this.h=!1,es(this,e[1]||"",!0),this.s=Ds(e[2]||""),this.g=Ds(e[3]||"",!0),Bo(this,e[4]),this.l=Ds(e[5]||"",!0),To(this,e[6]||"",!0),this.o=Ds(e[7]||"")):(this.h=!1,this.i=new as(null,this.h))}function Pi(i){return new Xi(i)}function es(i,e,n){i.j=n?Ds(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Bo(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function To(i,e,n){e instanceof as?(i.i=e,function Zs(i,e){e&&!i.j&&(lo(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(Ba(this,o),wl(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=uo(e,Su)),i.i=new as(e,i.h))}function Gn(i,e,n){i.i.set(e,n)}function wa(i){return Gn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Ds(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function uo(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,au),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function au(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Xi.prototype.toString=function(){var i=[],e=this.j;e&&i.push(uo(e,jo,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(uo(e,jo,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(uo(n,"/"==n.charAt(0)?Co:os,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",uo(n,Ho)),i.join("")};var jo=/[#\/\?@]/g,os=/[#\?:]/g,Co=/[#\?]/g,Su=/[#\?@]/g,Ho=/#/g;function as(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function lo(i){i.g||(i.g=new Map,i.h=0,i.i&&function Cs(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var c=i[n].substring(0,o);u=i[n].substring(o+1)}else c=i[n];e(c,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ba(i,e){lo(i),e=$o(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Ta(i,e){return lo(i),e=$o(i,e),i.g.has(e)}function wl(i,e,n){Ba(i,e),0<n.length&&(i.i=null,i.g.set($o(i,e),It(n)),i.h+=n.length)}function $o(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}(Ve=as.prototype).add=function(i,e){lo(this),this.i=null,i=$o(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},Ve.forEach=function(i,e){lo(this),this.g.forEach(function(n,o){n.forEach(function(u){i.call(e,u,o,this)},this)},this)},Ve.ta=function(){lo(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=i[o];for(let c=0;c<u.length;c++)n.push(e[o])}return n},Ve.Z=function(i){lo(this);let e=[];if("string"==typeof i)Ta(this,i)&&(e=e.concat(this.g.get($o(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},Ve.set=function(i,e){return lo(this),this.i=null,Ta(this,i=$o(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Ve.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},Ve.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const c=encodeURIComponent(String(o)),g=this.Z(o);for(o=0;o<g.length;o++){var u=c;""!==g[o]&&(u+="="+encodeURIComponent(String(g[o]))),i.push(u)}}return this.i=i.join("&")};var Ca=class{constructor(i,e){this.g=i,this.map=e}};function Do(i){this.l=i||bu,i=At.PerformanceNavigationTiming?0<(i=At.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(At.g&&At.g.Ka&&At.g.Ka()&&At.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bu=10;function Go(i){return!!i.h||!!i.g&&i.g.size>=i.j}function $i(i){return i.h?1:i.g?i.g.size:0}function uu(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Qs(i,e){i.g?i.g.add(e):i.h=e}function Nn(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Kr(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return It(i.i)}Do.prototype.cancel=function(){if(this.i=Kr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var Ii=class{stringify(i){return At.JSON.stringify(i,void 0)}parse(i){return At.JSON.parse(i,void 0)}};function Ys(){this.g=new Ii}function br(i,e,n){const o=n||"";try{Hi(i,function(u,c){let g=u;Rn(u)&&(g=Eo(u)),e.push(o+c+"="+encodeURIComponent(g))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Ao(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function ts(i){this.l=i.ec||null,this.j=i.ob||!1}function wi(i,e){Mn.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=ua,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Me(ts,Io),ts.prototype.g=function(){return new wi(this.l,this.j)},ts.prototype.i=function(i){return function(){return i}}({}),Me(wi,Mn);var ua=0;function Tn(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function lt(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Zt(i)}function Zt(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Ve=wi.prototype).open=function(i,e){if(this.readyState!=ua)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Zt(this)},Ve.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||At).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ve.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,lt(this)),this.readyState=ua},Ve.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Zt(this)),this.g&&(this.readyState=3,Zt(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof At.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Tn(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},Ve.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?lt(this):Zt(this),3==this.readyState&&Tn(this)}},Ve.Za=function(i){this.g&&(this.response=this.responseText=i,lt(this))},Ve.Ya=function(i){this.g&&(this.response=i,lt(this))},Ve.ka=function(){this.g&&lt(this)},Ve.setRequestHeader=function(i,e){this.v.append(i,e)},Ve.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Ve.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(wi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Zr=At.JSON.parse;function Xn(i){Mn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ti,this.L=this.M=!1}Me(Xn,Mn);var Ti="",ns=/^https?$/i,So=["POST","PUT"];function Fi(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,As(i),rs(i)}function As(i){i.F||(i.F=!0,Or(i,"complete"),Or(i,"error"))}function Cn(i){if(i.h&&typeof an<"u"&&(!i.C[1]||4!=Li(i)||2!=i.da()))if(i.v&&4==Li(i))Xr(i.La,0,i);else if(Or(i,"readystatechange"),4==Li(i)){i.h=!1;try{const g=i.da();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===g){var u=String(i.I).match($n)[1]||null;!u&&At.self&&At.self.location&&(u=At.self.location.protocol.slice(0,-1)),o=!ns.test(u?u.toLowerCase():"")}n=o}if(n)Or(i,"complete"),Or(i,"success");else{i.m=6;try{var c=2<Li(i)?i.g.statusText:""}catch{c=""}i.j=c+" ["+i.da()+"]",As(i)}}finally{rs(i)}}}function rs(i,e){if(i.g){co(i);const n=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||Or(i,"ready");try{n.onreadystatechange=o}catch{}}}function co(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(At.clearTimeout(i.A),i.A=null)}function Li(i){return i.g?i.g.readyState:0}function vr(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case Ti:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function zo(i){let e="";return yi(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function Gt(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=zo(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):Gn(i,e,n))}function Js(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function ja(i){this.Ga=0,this.j=[],this.l=new Ji,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Js("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Js("baseRetryDelayMs",5e3,i),this.hb=Js("retryDelaySeedMs",1e4,i),this.eb=Js("forwardChannelMaxRetries",2,i),this.xa=Js("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new Do(i&&i.concurrentRequestLimit),this.Ja=new Ys,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Xs(i){if(Ls(i),3==i.H){var e=i.W++,n=Pi(i.I);if(Gn(n,"SID",i.K),Gn(n,"RID",e),Gn(n,"TYPE","terminate"),ui(i,n),(e=new Vo(i,i.l,e)).L=2,e.A=wa(Pi(n)),n=!1,At.navigator&&At.navigator.sendBeacon)try{n=At.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&At.Image&&((new Image).src=e.A,n=!0),n||(e.g=du(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Fs(e)}us(i)}function fo(i){i.g&&(Gi(i),i.g.cancel(),i.g=null)}function Ls(i){fo(i),i.u&&(At.clearTimeout(i.u),i.u=null),ei(i),i.i.cancel(),i.m&&("number"==typeof i.m&&At.clearTimeout(i.m),i.m=null)}function yn(i){if(!Go(i.i)&&!i.m){i.m=!0;var e=i.Na;Qe||ln(),ot||(Qe(),ot=!0),$t.add(e,i),i.C=0}}function po(i,e){var n;n=e?e.m:i.W++;const o=Pi(i.I);Gn(o,"SID",i.K),Gn(o,"RID",n),Gn(o,"AID",i.V),ui(i,o),i.o&&i.s&&Gt(o,i.o,i.s),n=new Vo(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=lu(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),Qs(i.i,n),qs(n,o,e)}function ui(i,e){i.na&&yi(i.na,function(n,o){Gn(e,o,n)}),i.h&&Hi({},function(n,o){Gn(e,o,n)})}function lu(i,e,n){n=Math.min(i.j.length,n);var o=i.h?De(i.h.Va,i.h,i):null;e:{var u=i.j;let c=-1;for(;;){const g=["count="+n];-1==c?0<n?(c=u[0].g,g.push("ofs="+c)):c=0:g.push("ofs="+c);let M=!0;for(let F=0;F<n;F++){let j=u[F].g;const Q=u[F].map;if(j-=c,0>j)c=Math.max(0,u[F].g-100),M=!1;else try{br(Q,g,"req"+j+"_")}catch{o&&o(Q)}}if(M){o=g.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,o}function bo(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;Qe||ln(),ot||(Qe(),ot=!0),$t.add(e,i),i.A=0}}function Qr(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=oi(De(i.Ma,i),go(i,i.A)),i.A++,0))}function Gi(i){null!=i.B&&(At.clearTimeout(i.B),i.B=null)}function ir(i){i.g=new Vo(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=Pi(i.wa);Gn(e,"RID","rpc"),Gn(e,"SID",i.K),Gn(e,"AID",i.V),Gn(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&Gn(e,"TO",i.qa),Gn(e,"TYPE","xmlhttp"),ui(i,e),i.o&&i.s&&Gt(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.A=wa(Pi(e)),n.u=null,n.S=!0,lr(n,i)}function ei(i){null!=i.v&&(At.clearTimeout(i.v),i.v=null)}function qo(i,e){var n=null;if(i.g==e){ei(i),Gi(i),i.g=null;var o=2}else{if(!uu(i.i,e))return;n=e.F,Nn(i.i,e),o=1}if(0!=i.H)if(e.i)if(1==o){n=e.u?e.u.length:0,e=Date.now()-e.G;var u=i.C;Or(o=gn(),new Ea(o,n)),yn(i)}else bo(i);else if(3==(u=e.s)||0==u&&0<e.ca||!(1==o&&function Wo(i,e){return!($i(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=oi(De(i.Na,i,e),go(i,i.C)),i.C++,0)))}(i,e)||2==o&&Qr(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:eo(i,5);break;case 4:eo(i,10);break;case 3:eo(i,6);break;default:eo(i,2)}}function go(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function eo(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var o=De(i.pb,i);n||(n=new Xi("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||es(n,"https"),wa(n)),function ki(i,e){const n=new Ji;if(At.Image){const o=new Image;o.onload=We(Ao,n,o,"TestLoadImage: loaded",!0,e),o.onerror=We(Ao,n,o,"TestLoadImage: error",!1,e),o.onabort=We(Ao,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=We(Ao,n,o,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else jr(2);i.H=0,i.h&&i.h.za(e),us(i),Ls(i)}function us(i){if(i.H=0,i.ma=[],i.h){const e=Kr(i.i);(0!=e.length||0!=i.j.length)&&(jt(i.ma,e),jt(i.ma,i.j),i.i.i.length=0,It(i.j),i.j.length=0),i.h.ya()}}function cu(i,e,n){var o=n instanceof Xi?Pi(n):new Xi(n);if(""!=o.g)e&&(o.g=e+"."+o.g),Bo(o,o.m);else{var u=At.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var c=new Xi(null);o&&es(c,o),e&&(c.g=e),u&&Bo(c,u),n&&(c.l=n),o=c}return e=i.Da,(n=i.F)&&e&&Gn(o,n,e),Gn(o,"VER",i.ra),ui(i,o),o}function du(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xn(i.Ha&&!i.va?new ts({ob:n}):i.va)).Oa(i.J),e}function zu(){}function Ro(){if(fr&&!(10<=Number(Fo)))throw Error("Environmental error: no available transport.")}function zi(i,e){Mn.call(this),this.g=new ja(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!hr(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hr(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new mo(this)}function Wu(i){ia.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function hu(){ws.call(this),this.status=1}function mo(i){this.g=i}function P(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function K(i,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)o[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)o[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var c=i.g[3],g=(e=i.g[0])+(c^(n=i.g[1])&((u=i.g[2])^c))+o[0]+3614090360&4294967295;g=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=n+(g<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[1]+3905402710&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[3]+3250441966&4294967295)<<22&4294967295|g>>>10))+((g=e+(c^n&(u^c))+o[4]+4118548399&4294967295)<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[5]+1200080426&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[7]+4249261313&4294967295)<<22&4294967295|g>>>10))+((g=e+(c^n&(u^c))+o[8]+1770035416&4294967295)<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[9]+2336552879&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[11]+2304563134&4294967295)<<22&4294967295|g>>>10))+((g=e+(c^n&(u^c))+o[12]+1804603682&4294967295)<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[13]+4254626195&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[15]+1236535329&4294967295)<<22&4294967295|g>>>10))+((g=e+(u^c&(n^u))+o[1]+4129170786&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[11]+643717713&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[0]+3921069994&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^c&(n^u))+o[5]+3593408605&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[15]+3634488961&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[4]+3889429448&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^c&(n^u))+o[9]+568446438&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[3]+4107603335&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[8]+1163531501&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^c&(n^u))+o[13]+2850285829&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[7]+1735328473&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[12]+2368359562&4294967295)<<20&4294967295|g>>>12))+((g=e+(n^u^c)+o[5]+4294588738&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[8]+2272392833&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[14]+4259657740&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^c)+o[1]+2763975236&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[4]+1272893353&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[10]+3200236656&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^c)+o[13]+681279174&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[0]+3936430074&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[6]+76029189&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^c)+o[9]+3654602809&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[12]+3873151461&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[15]+530742520&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[2]+3299628645&4294967295)<<23&4294967295|g>>>9))+((g=e+(u^(n|~c))+o[0]+4096336452&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[7]+1126891415&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(c|~n))+o[14]+2878612391&4294967295)<<15&4294967295|g>>>17))+((g=n+(c^(u|~e))+o[5]+4237533241&4294967295)<<21&4294967295|g>>>11))+((g=e+(u^(n|~c))+o[12]+1700485571&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[3]+2399980690&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(c|~n))+o[10]+4293915773&4294967295)<<15&4294967295|g>>>17))+((g=n+(c^(u|~e))+o[1]+2240044497&4294967295)<<21&4294967295|g>>>11))+((g=e+(u^(n|~c))+o[8]+1873313359&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[15]+4264355552&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(c|~n))+o[6]+2734768916&4294967295)<<15&4294967295|g>>>17))+((g=n+(c^(u|~e))+o[13]+1309151649&4294967295)<<21&4294967295|g>>>11))+((c=(e=n+((g=e+(u^(n|~c))+o[4]+4149444226&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[11]+3174756917&4294967295)<<10&4294967295|g>>>22))^((u=c+((g=u+(e^(c|~n))+o[2]+718787259&4294967295)<<15&4294967295|g>>>17))|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(g<<21&4294967295|g>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+c&4294967295}function L(i,e){this.h=e;for(var n=[],o=!0,u=i.length-1;0<=u;u--){var c=0|i[u];o&&c==e||(n[u]=c,o=!1)}this.g=n}(Ve=Xn.prototype).Oa=function(i){this.M=i},Ve.ha=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():sa.g(),this.C=function ou(i){return i.h||(i.h=i.i())}(this.u?this.u:sa),this.g.onreadystatechange=De(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(c){return void Fi(this,c)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const c of o.keys())n.set(c,o.get(c))}o=Array.from(n.keys()).find(c=>"content-type"==c.toLowerCase()),u=At.FormData&&i instanceof At.FormData,!(0<=Rt(So,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,g]of n)this.g.setRequestHeader(c,g);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{co(this),0<this.B&&((this.L=function ar(i){return fr&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=De(this.ua,this)):this.A=Xr(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){Fi(this,c)}},Ve.ua=function(){typeof an<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Or(this,"timeout"),this.abort(8))},Ve.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Or(this,"complete"),Or(this,"abort"),rs(this))},Ve.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rs(this,!0)),Xn.$.N.call(this)},Ve.La=function(){this.s||(this.G||this.v||this.l?Cn(this):this.kb())},Ve.kb=function(){Cn(this)},Ve.isActive=function(){return!!this.g},Ve.da=function(){try{return 2<Li(this)?this.g.status:-1}catch{return-1}},Ve.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ve.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Zr(e)}},Ve.Ia=function(){return this.m},Ve.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ve=ja.prototype).ra=8,Ve.H=1,Ve.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new Vo(this,this.l,i);let c=this.s;if(this.U&&(c?(c=Oi(c),rr(c,this.U)):c=this.U),null!==this.o||this.O||(u.I=c,c=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=lu(this,u,e),Gn(n=Pi(this.I),"RID",i),Gn(n,"CVER",22),this.F&&Gn(n,"X-HTTP-Session-Id",this.F),ui(this,n),c&&(this.O?e="headers="+encodeURIComponent(String(zo(c)))+"&"+e:this.o&&Gt(n,this.o,c)),Qs(this.i,u),this.bb&&Gn(n,"TYPE","init"),this.P?(Gn(n,"$req",e),Gn(n,"SID","null"),u.aa=!0,qs(u,n,null)):qs(u,n,e),this.H=2}}else 3==this.H&&(i?po(this,i):0==this.j.length||Go(this.i)||po(this))},Ve.Ma=function(){if(this.u=null,ir(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=oi(De(this.jb,this),i)}},Ve.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,jr(10),fo(this),ir(this))},Ve.ib=function(){null!=this.v&&(this.v=null,fo(this),Qr(this),jr(19))},Ve.pb=function(i){i?(this.l.info("Successfully pinged google.com"),jr(2)):(this.l.info("Failed to ping google.com"),jr(1))},Ve.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ve=zu.prototype).Ba=function(){},Ve.Aa=function(){},Ve.za=function(){},Ve.ya=function(){},Ve.isActive=function(){return!0},Ve.Va=function(){},Ro.prototype.g=function(i,e){return new zi(i,e)},Me(zi,Mn),zi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;jr(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=cu(i,null,i.Y),yn(i)},zi.prototype.close=function(){Xs(this.g)},zi.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=Eo(i),i=n);e.j.push(new Ca(e.fb++,i)),3==e.H&&yn(e)},zi.prototype.N=function(){this.g.h=null,delete this.j,Xs(this.g),delete this.g,zi.$.N.call(this)},Me(Wu,ia),Me(hu,ws),Me(mo,zu),mo.prototype.Ba=function(){Or(this.g,"a")},mo.prototype.Aa=function(i){Or(this.g,new Wu(i))},mo.prototype.za=function(i){Or(this.g,new hu)},mo.prototype.ya=function(){Or(this.g,"b")},Me(P,function Ac(){this.blockSize=-1}),P.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},P.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,o=this.m,u=this.h,c=0;c<e;){if(0==u)for(;c<=n;)K(this,i,c),c+=this.blockSize;if("string"==typeof i){for(;c<e;)if(o[u++]=i.charCodeAt(c++),u==this.blockSize){K(this,o),u=0;break}}else for(;c<e;)if(o[u++]=i[c++],u==this.blockSize){K(this,o),u=0;break}}this.h=u,this.i+=e},P.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)i[n++]=this.g[e]>>>o&255;return i};var z={};function A(i){return-128<=i&&128>i?function ft(i,e){var n=z;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new L([0|e],0>e?-1:0)}):new L([0|i],0>i?-1:0)}function N(i){if(isNaN(i)||!isFinite(i))return Y;if(0>i)return cn(N(-i));for(var e=[],n=1,o=0;i>=n;o++)e[o]=i/n|0,n*=U;return new L(e,0)}var U=4294967296,Y=A(0),Ke=A(1),rt=A(16777216);function wt(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function Vn(i){return-1==i.h}function cn(i){for(var e=i.g.length,n=[],o=0;o<e;o++)n[o]=~i.g[o];return new L(n,~i.h).add(Ke)}function mr(i,e){return i.add(cn(e))}function Lr(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function ur(i,e){this.g=i,this.h=e}function ls(i,e){if(wt(e))throw Error("division by zero");if(wt(i))return new ur(Y,Y);if(Vn(i))return e=ls(cn(i),e),new ur(cn(e.g),cn(e.h));if(Vn(e))return e=ls(i,cn(e)),new ur(cn(e.g),e.h);if(30<i.g.length){if(Vn(i)||Vn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Ke,o=e;0>=o.X(i);)n=Ss(n),o=Ss(o);var u=bs(n,1),c=bs(o,1);for(o=bs(o,2),n=bs(n,2);!wt(o);){var g=c.add(o);0>=g.X(i)&&(u=u.add(n),c=g),o=bs(o,1),n=bs(n,1)}return e=mr(i,u.R(e)),new ur(u,e)}for(u=Y;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),g=(c=N(n)).R(e);Vn(g)||0<g.X(i);)g=(c=N(n-=o)).R(e);wt(c)&&(c=Ke),u=u.add(c),i=mr(i,g)}return new ur(u,i)}function Ss(i){for(var e=i.g.length+1,n=[],o=0;o<e;o++)n[o]=i.D(o)<<1|i.D(o-1)>>>31;return new L(n,i.h)}function bs(i,e){var n=e>>5;e%=32;for(var o=i.g.length-n,u=[],c=0;c<o;c++)u[c]=0<e?i.D(c+n)>>>e|i.D(c+n+1)<<32-e:i.D(c+n);return new L(u,i.h)}(Ve=L.prototype).ea=function(){if(Vn(this))return-cn(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);i+=(0<=o?o:U+o)*e,e*=U}return i},Ve.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(wt(this))return"0";if(Vn(this))return"-"+cn(this).toString(i);for(var e=N(Math.pow(i,6)),n=this,o="";;){var u=ls(n,e).g,c=((0<(n=mr(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(wt(n=u))return c+o;for(;6>c.length;)c="0"+c;o=c+o}},Ve.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},Ve.X=function(i){return Vn(i=mr(this,i))?-1:wt(i)?0:1},Ve.abs=function(){return Vn(this)?cn(this):this},Ve.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0,u=0;u<=e;u++){var c=o+(65535&this.D(u))+(65535&i.D(u)),g=(c>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);o=g>>>16,n[u]=(g&=65535)<<16|(c&=65535)}return new L(n,-2147483648&n[n.length-1]?-1:0)},Ve.R=function(i){if(wt(this)||wt(i))return Y;if(Vn(this))return Vn(i)?cn(this).R(cn(i)):cn(cn(this).R(i));if(Vn(i))return cn(this.R(cn(i)));if(0>this.X(rt)&&0>i.X(rt))return N(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var u=0;u<i.g.length;u++){var c=this.D(o)>>>16,g=65535&this.D(o),M=i.D(u)>>>16,F=65535&i.D(u);n[2*o+2*u]+=g*F,Lr(n,2*o+2*u),n[2*o+2*u+1]+=c*F,Lr(n,2*o+2*u+1),n[2*o+2*u+1]+=g*M,Lr(n,2*o+2*u+1),n[2*o+2*u+2]+=c*M,Lr(n,2*o+2*u+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new L(n,0)},Ve.gb=function(i){return ls(this,i).h},Ve.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&i.D(o);return new L(n,this.h&i.h)},Ve.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|i.D(o);return new L(n,this.h|i.h)},Ve.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^i.D(o);return new L(n,this.h^i.h)},Ro.prototype.createWebChannel=Ro.prototype.g,zi.prototype.send=zi.prototype.u,zi.prototype.open=zi.prototype.m,zi.prototype.close=zi.prototype.close,su.NO_ERROR=0,su.TIMEOUT=8,su.HTTP_ERROR=6,Au.COMPLETE="complete",Il.EventType=Is,Is.OPEN="a",Is.CLOSE="b",Is.ERROR="c",Is.MESSAGE="d",Mn.prototype.listen=Mn.prototype.O,Xn.prototype.listenOnce=Xn.prototype.P,Xn.prototype.getLastError=Xn.prototype.Sa,Xn.prototype.getLastErrorCode=Xn.prototype.Ia,Xn.prototype.getStatus=Xn.prototype.da,Xn.prototype.getResponseJson=Xn.prototype.Wa,Xn.prototype.getResponseText=Xn.prototype.ja,Xn.prototype.send=Xn.prototype.ha,Xn.prototype.setWithCredentials=Xn.prototype.Oa,P.prototype.digest=P.prototype.l,P.prototype.reset=P.prototype.reset,P.prototype.update=P.prototype.j,L.prototype.add=L.prototype.add,L.prototype.multiply=L.prototype.R,L.prototype.modulo=L.prototype.gb,L.prototype.compare=L.prototype.X,L.prototype.toNumber=L.prototype.ea,L.prototype.toString=L.prototype.toString,L.prototype.getBits=L.prototype.D,L.fromNumber=N,L.fromString=function w(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return cn(w(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=N(Math.pow(e,8)),o=Y,u=0;u<i.length;u+=8){var c=Math.min(8,i.length-u),g=parseInt(i.substring(u,u+c),e);8>c?(c=N(Math.pow(e,c)),o=o.R(c).add(N(g))):o=(o=o.R(n)).add(N(g))}return o};var cs=ue.createWebChannelTransport=function(){return new Ro},la=ue.getStatEventTarget=function(){return gn()},Da=ue.ErrorCode=su,Kd=ue.EventType=Au,Sc=ue.Event=si,Ql=ue.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Yl=(ue.FetchXmlHttpFactory=ts,ue.WebChannel=Il),Vs=ue.XhrIo=Xn,Jl=ue.Md5=P,Ha=ue.Integer=L;const bc="@firebase/firestore";class ds{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ds.UNAUTHENTICATED=new ds(null),ds.GOOGLE_CREDENTIALS=new ds("google-credentials-uid"),ds.FIRST_PARTY=new ds("first-party-uid"),ds.MOCK_USER=new ds("mock-user");let Ru="10.11.0";const Er=new Ge.Yd("@firebase/firestore");function Rs(){return Er.logLevel}function Ye(i,...e){if(Er.logLevel<=Ge.in.DEBUG){const n=e.map(Mi);Er.debug(`Firestore (${Ru}): ${i}`,...n)}}function li(i,...e){if(Er.logLevel<=Ge.in.ERROR){const n=e.map(Mi);Er.error(`Firestore (${Ru}): ${i}`,...n)}}function Wi(i,...e){if(Er.logLevel<=Ge.in.WARN){const n=e.map(Mi);Er.warn(`Firestore (${Ru}): ${i}`,...n)}}function Mi(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function vt(i="Unexpected state"){const e=`FIRESTORE (${Ru}) INTERNAL ASSERTION FAILED: `+i;throw li(e),new Error(e)}function Jt(i,e){i||vt()}function Tt(i,e){return i}const He={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class it extends Ze.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Sa{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Pu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ds.UNAUTHENTICATED))}shutdown(){}}class Ku{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $a{constructor(e){this.t=e,this.currentUser=ds.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const c=j=>this.i!==u?(u=this.i,n(j)):Promise.resolve();let g=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Tr,e.enqueueRetryable(()=>c(this.currentUser))};const M=()=>{const j=g;e.enqueueRetryable((0,ce.Z)(function*(){yield j.promise,yield c(o.currentUser)}))},F=j=>{Ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=j,this.auth.addAuthTokenListener(this.o),M()};this.t.onInit(j=>F(j)),setTimeout(()=>{if(!this.auth){const j=this.t.getImmediate({optional:!0});j?F(j):(Ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Tr)}},0),M()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(Ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Jt("string"==typeof o.accessToken),new Sa(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Jt(null===e||"string"==typeof e),new ds(e)}}class Xl{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=ds.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ko{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new Xl(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ds.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ps{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dn{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const o=c=>{null!=c.error&&Ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const g=c.token!==this.R;return this.R=c.token,Ye("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>o(c))};const u=c=>{Ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>u(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?u(c):Ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Jt("string"==typeof n.token),this.R=n.token,new Ps(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Hh(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class Zu{static newId(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=Hh(40);for(let c=0;c<u.length;++c)o.length<20&&u[c]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[c]%62))}return o}}function sn(i,e){return i<e?-1:i>e?1:0}function Vr(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function Qu(i){return i+"\0"}class Ir{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new it(He.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new it(He.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new it(He.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new it(He.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ir.fromMillis(Date.now())}static fromDate(e){return Ir.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new Ir(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?sn(this.nanoseconds,e.nanoseconds):sn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class un{constructor(e){this.timestamp=e}static fromTimestamp(e){return new un(e)}static min(){return new un(new Ir(0,0))}static max(){return new un(new Ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Yu{constructor(e,n,o){void 0===n?n=0:n>e.length&&vt(),void 0===o?o=e.length-n:o>e.length-n&&vt(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===Yu.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yu?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const c=e.get(u),g=n.get(u);if(c<g)return-1;if(c>g)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class or extends Yu{construct(e,n,o){return new or(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new it(He.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new or(n)}static emptyPath(){return new or([])}}const Zd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ci extends Yu{construct(e,n,o){return new ci(e,n,o)}static isValidIdentifier(e){return Zd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ci.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ci(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const c=()=>{if(0===o.length)throw new it(He.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let g=!1;for(;u<e.length;){const M=e[u];if("\\"===M){if(u+1===e.length)throw new it(He.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const F=e[u+1];if("\\"!==F&&"."!==F&&"`"!==F)throw new it(He.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=F,u+=2}else"`"===M?(g=!g,u++):"."!==M||g?(o+=M,u++):(c(),u++)}if(c(),g)throw new it(He.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ci(n)}static emptyPath(){return new ci([])}}class Te{constructor(e){this.path=e}static fromPath(e){return new Te(or.fromString(e))}static fromName(e){return new Te(or.fromString(e).popFirst(5))}static empty(){return new Te(or.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===or.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return or.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new or(e.slice()))}}class kn{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function Ju(i){return i.fields.find(e=>2===e.kind)}function Po(i){return i.fields.filter(e=>2!==e.kind)}kn.UNKNOWN_ID=-1;class Mo{constructor(e,n){this.fieldPath=e,this.kind=n}}class hs{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new hs(0,fs.min())}}function fu(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=un.fromTimestamp(1e9===o?new Ir(n+1,0):new Ir(n,o));return new fs(u,Te.empty(),e)}function Tl(i){return new fs(i.readTime,i.key,-1)}class fs{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new fs(un.min(),Te.empty(),-1)}static max(){return new fs(un.max(),Te.empty(),-1)}}function Cl(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=Te.comparator(i.documentKey,e.documentKey),0!==n?n:sn(i.largestBatchId,e.largestBatchId))}const ec="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ps{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Bs(i){return Ga.apply(this,arguments)}function Ga(){return Ga=(0,ce.Z)(function*(i){if(i.code!==He.FAILED_PRECONDITION||i.message!==ec)throw i;Ye("LocalStore","Unexpectedly lost primary lease")}),Ga.apply(this,arguments)}class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new xe((o,u)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(o,u)},this.catchCallback=c=>{this.wrapFailure(n,c).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof xe?n:xe.resolve(n)}catch(n){return xe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):xe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):xe.reject(n)}static resolve(e){return new xe((n,o)=>{n(e)})}static reject(e){return new xe((n,o)=>{o(e)})}static waitFor(e){return new xe((n,o)=>{let u=0,c=0,g=!1;e.forEach(M=>{++u,M.next(()=>{++c,g&&c===u&&n()},F=>o(F))}),g=!0,c===u&&n()})}static or(e){let n=xe.resolve(!1);for(const o of e)n=n.next(u=>u?xe.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,c)=>{o.push(n.call(this,u,c))}),this.waitFor(o)}static mapArray(e,n){return new xe((o,u)=>{const c=e.length,g=new Array(c);let M=0;for(let F=0;F<c;F++){const j=F;n(e[j]).next(Q=>{g[j]=Q,++M,M===c&&o(g)},Q=>u(Q))}})}static doWhile(e,n){return new xe((o,u)=>{const c=()=>{!0===e()?n().next(()=>{c()},u):o()};c()})}}class Zo{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Tr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Mu(e,n.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=H(o.target.error);this.V.reject(new Mu(e,u))}}static open(e,n,o,u){try{return new Zo(n,e.transaction(u,o))}catch(c){throw new Mu(n,c)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ye("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new O(n)}}class gs{constructor(e,n,o){this.name=e,this.version=n,this.p=o,12.2===gs.S((0,Ze.z$)())&&li("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ye("SimpleDb","Removing database:",e),S(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ze.hl)())return!1;if(gs.C())return!0;const e=(0,Ze.z$)(),n=gs.S(e),o=0<n&&n<10,u=gs.v(e),c=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var n=this;return(0,ce.Z)(function*(){return n.db||(Ye("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const c=indexedDB.open(n.name,n.version);c.onsuccess=g=>{o(g.target.result)},c.onblocked=()=>{u(new Mu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=g=>{const M=g.target.error;u("VersionError"===M.name?new it(He.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===M.name?new it(He.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+M):new Mu(e,M))},c.onupgradeneeded=g=>{Ye("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',g.oldVersion),n.p.N(g.target.result,c.transaction,g.oldVersion,n.version).next(()=>{Ye("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.L&&(n.db.onversionchange=o=>n.L(o)),n.db})()}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var c=this;return(0,ce.Z)(function*(){const g="readonly"===n;let M=0;for(;;){++M;try{c.db=yield c.O(e);const F=Zo.open(c.db,e,g?"readonly":"readwrite",o),j=u(F).next(Q=>(F.g(),Q)).catch(Q=>(F.abort(Q),xe.reject(Q))).toPromise();return j.catch(()=>{}),yield F.m,j}catch(F){const j=F,Q="FirebaseError"!==j.name&&M<3;if(Ye("SimpleDb","Transaction failed with error:",j.message,"Retrying:",Q),c.close(),!Q)return Promise.reject(j)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class tc{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return S(this.k.delete())}}class Mu extends it{constructor(e,n){super(He.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function I(i){return"IndexedDbTransactionError"===i.name}class O{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(Ye("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(Ye("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),S(o)}add(e){return Ye("SimpleDb","ADD",this.store.name,e,e),S(this.store.add(e))}get(e){return S(this.store.get(e)).next(n=>(void 0===n&&(n=null),Ye("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Ye("SimpleDb","DELETE",this.store.name,e),S(this.store.delete(e))}count(){return Ye("SimpleDb","COUNT",this.store.name),S(this.store.count())}W(e,n){const o=this.options(e,n),u=o.index?this.store.index(o.index):this.store;if("function"==typeof u.getAll){const c=u.getAll(o.range);return new xe((g,M)=>{c.onerror=F=>{M(F.target.error)},c.onsuccess=F=>{g(F.target.result)}})}{const c=this.cursor(o),g=[];return this.G(c,(M,F)=>{g.push(F)}).next(()=>g)}}j(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new xe((u,c)=>{o.onerror=g=>{c(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}H(e,n){Ye("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.J=!1;const u=this.cursor(o);return this.G(u,(c,g,M)=>M.delete())}Y(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.G(u,n)}Z(e){const n=this.cursor({});return new xe((o,u)=>{n.onerror=c=>{const g=H(c.target.error);u(g)},n.onsuccess=c=>{const g=c.target.result;g?e(g.primaryKey,g.value).next(M=>{M?g.continue():o()}):o()}})}G(e,n){const o=[];return new xe((u,c)=>{e.onerror=g=>{c(g.target.error)},e.onsuccess=g=>{const M=g.target.result;if(!M)return void u();const F=new tc(M),j=n(M.primaryKey,M.value,F);if(j instanceof xe){const Q=j.catch(ae=>(F.done(),xe.reject(ae)));o.push(Q)}F.isDone?u():null===F.$?M.continue():M.continue(F.$)}}).next(()=>xe.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function S(i){return new xe((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=H(o.target.error);n(u)}})}let x=!1;function H(i){const e=gs.S((0,Ze.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new it("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return x||(x=!0,setTimeout(()=>{throw o},0)),o}}return i}class J{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;Ye("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ce.Z)(function*(){n.task=null;try{Ye("IndexBackfiller",`Documents written: ${yield n.X.te()}`)}catch(o){I(o)?Ye("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):yield Bs(o)}yield n.ee(6e4)}))}}class de{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,ce.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.ne(o,e))})()}ne(e,n){const o=new Set;let u=n,c=!0;return xe.doWhile(()=>!0===c&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!o.has(g))return Ye("IndexBackfiller",`Processing collection: ${g}`),this.re(e,g,u).next(M=>{u-=M,o.add(g)});c=!1})).next(()=>n-u)}re(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(c=>{const g=c.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.ie(u,c)).next(M=>(Ye("IndexBackfiller",`Updating offset: ${M}`),this.localStore.indexManager.updateCollectionGroup(e,n,M))).next(()=>g.size)}))}ie(e,n){let o=e;return n.changes.forEach((u,c)=>{const g=Tl(c);Cl(g,o)>0&&(o=g)}),new fs(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Le=(()=>{class i{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=u=>this.se(u),this.oe=u=>o.writeSequenceNumber(u))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function ke(i){return null==i}function Ct(i){return 0===i&&1/i==-1/0}function bn(i){return"number"==typeof i&&Number.isInteger(i)&&!Ct(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function pn(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=za(e)),e=fi(i.get(n),e);return za(e)}function fi(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const c=i.charAt(u);switch(c){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=c}}return n}function za(i){return i+"\x01\x01"}function Pr(i){const e=i.length;if(Jt(e>=2),2===e)return Jt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),or.emptyPath();const n=e-2,o=[];let u="";for(let c=0;c<e;){const g=i.indexOf("\x01",c);switch((g<0||g>n)&&vt(),i.charAt(g+1)){case"\x01":const M=i.substring(c,g);let F;0===u.length?F=M:(u+=M,F=u,u=""),o.push(F);break;case"\x10":u+=i.substring(c,g),u+="\0";break;case"\x11":u+=i.substring(c,g+1);break;default:vt()}c=g+2}return new or(o)}const Ms=["userId","batchId"];function Cr(i,e){return[i,pn(e)]}function ba(i,e,n){return[i,pn(e),n]}const $h={},Rc=["prefixPath","collectionGroup","readTime","documentId"],Pc=["prefixPath","collectionGroup","documentId"],Mc=["collectionGroup","readTime","prefixPath","documentId"],Qd=["canonicalId","targetId"],Dl=["targetId","path"],Qo=["path","targetId"],Xu=["collectionId","parent"],Al=["indexId","uid"],nc=["uid","sequenceNumber"],Nc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rc=["indexId","uid","orderedDocumentKey"],Oc=["userId","collectionPath","documentId"],gd=["userId","collectionPath","largestBatchId"],Gh=["userId","collectionGroup","largestBatchId"],el=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Nu=[...el,"documentOverlays"],Yd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],to=Yd,xc=[...to,"indexConfiguration","indexState","indexEntries"],tl=xc;class nl extends ps{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function js(i,e){const n=Tt(i);return gs.M(n.ae,e)}function ic(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function da(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Sl(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Yr{constructor(e,n){this.comparator=e,this.root=n||qi.EMPTY}insert(e,n){return new Yr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qi.BLACK,null,null))}remove(e){return new Yr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yo(this.root,e,this.comparator,!0)}}class Yo{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?o(e.key,n):1,n&&u&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qi{constructor(e,n,o,u,c){this.key=e,this.value=n,this.color=o??qi.RED,this.left=u??qi.EMPTY,this.right=c??qi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,c){return new qi(e??this.key,n??this.value,o??this.color,u??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const c=o(e,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===c?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return qi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return qi.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const e=this.left.check();if(e!==this.right.check())throw vt();return e+(this.isRed()?0:1)}}qi.EMPTY=null,qi.RED=!0,qi.BLACK=!1,qi.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(e,n,o,u,c){return this}insert(e,n,o){return new qi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Mr{constructor(e){this.comparator=e,this.data=new Yr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kc(this.data.getIterator())}getIteratorFrom(e){return new kc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof Mr)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=o.getNext().key;if(0!==this.comparator(u,c))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Mr(this.comparator);return n.data=e,n}}class kc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function pu(i){return i.hasNext()?i.getNext():void 0}class ti{constructor(e){this.fields=e,e.sort(ci.comparator)}static empty(){return new ti([])}unionWith(e){let n=new Mr(ci.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new ti(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vr(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class rl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ki{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new rl("Invalid base64 string: "+c):c}}(e);return new Ki(n)}static fromUint8Array(e){const n=function(u){let c="";for(let g=0;g<u.length;++g)c+=String.fromCharCode(u[g]);return c}(e);return new Ki(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ki.EMPTY_BYTE_STRING=new Ki("");const sc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ra(i){if(Jt(!!i),"string"==typeof i){let e=0;const n=sc.exec(i);if(Jt(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:di(i.seconds),nanos:di(i.nanos)}}function di(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function no(i){return"string"==typeof i?Ki.fromBase64String(i):Ki.fromUint8Array(i)}function bl(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Rl(i){const e=i.mapValue.fields.__previous_value__;return bl(e)?Rl(e):e}function Ou(i){const e=Ra(i.mapValue.fields.__local_write_time__.timestampValue);return new Ir(e.seconds,e.nanos)}class Fc{constructor(e,n,o,u,c,g,M,F,j){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=c,this.forceLongPolling=g,this.autoDetectLongPolling=M,this.longPollingOptions=F,this.useFetchStreams=j}}class Jo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Jo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Jo&&e.projectId===this.projectId&&e.database===this.database}}const ha={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Lc={nullValue:"NULL_VALUE"};function fa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?bl(i)?4:Pl(i)?9007199254740991:10:vt()}function ms(i,e){if(i===e)return!0;const n=fa(i);if(n!==fa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ou(i).isEqual(Ou(e));case 3:return function(u,c){if("string"==typeof u.timestampValue&&"string"==typeof c.timestampValue&&u.timestampValue.length===c.timestampValue.length)return u.timestampValue===c.timestampValue;const g=Ra(u.timestampValue),M=Ra(c.timestampValue);return g.seconds===M.seconds&&g.nanos===M.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return c=e,no(i.bytesValue).isEqual(no(c.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,c){return di(u.geoPointValue.latitude)===di(c.geoPointValue.latitude)&&di(u.geoPointValue.longitude)===di(c.geoPointValue.longitude)}(i,e);case 2:return function(u,c){if("integerValue"in u&&"integerValue"in c)return di(u.integerValue)===di(c.integerValue);if("doubleValue"in u&&"doubleValue"in c){const g=di(u.doubleValue),M=di(c.doubleValue);return g===M?Ct(g)===Ct(M):isNaN(g)&&isNaN(M)}return!1}(i,e);case 9:return Vr(i.arrayValue.values||[],e.arrayValue.values||[],ms);case 10:return function(u,c){const g=u.mapValue.fields||{},M=c.mapValue.fields||{};if(ic(g)!==ic(M))return!1;for(const F in g)if(g.hasOwnProperty(F)&&(void 0===M[F]||!ms(g[F],M[F])))return!1;return!0}(i,e);default:return vt()}var c}function il(i,e){return void 0!==(i.values||[]).find(n=>ms(n,e))}function Pa(i,e){if(i===e)return 0;const n=fa(i),o=fa(e);if(n!==o)return sn(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return sn(i.booleanValue,e.booleanValue);case 2:return function(c,g){const M=di(c.integerValue||c.doubleValue),F=di(g.integerValue||g.doubleValue);return M<F?-1:M>F?1:M===F?0:isNaN(M)?isNaN(F)?0:-1:1}(i,e);case 3:return Vc(i.timestampValue,e.timestampValue);case 4:return Vc(Ou(i),Ou(e));case 5:return sn(i.stringValue,e.stringValue);case 6:return function(c,g){const M=no(c),F=no(g);return M.compareTo(F)}(i.bytesValue,e.bytesValue);case 7:return function(c,g){const M=c.split("/"),F=g.split("/");for(let j=0;j<M.length&&j<F.length;j++){const Q=sn(M[j],F[j]);if(0!==Q)return Q}return sn(M.length,F.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,g){const M=sn(di(c.latitude),di(g.latitude));return 0!==M?M:sn(di(c.longitude),di(g.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(c,g){const M=c.values||[],F=g.values||[];for(let j=0;j<M.length&&j<F.length;++j){const Q=Pa(M[j],F[j]);if(Q)return Q}return sn(M.length,F.length)}(i.arrayValue,e.arrayValue);case 10:return function(c,g){if(c===ha.mapValue&&g===ha.mapValue)return 0;if(c===ha.mapValue)return 1;if(g===ha.mapValue)return-1;const M=c.fields||{},F=Object.keys(M),j=g.fields||{},Q=Object.keys(j);F.sort(),Q.sort();for(let ae=0;ae<F.length&&ae<Q.length;++ae){const Ie=sn(F[ae],Q[ae]);if(0!==Ie)return Ie;const je=Pa(M[F[ae]],j[Q[ae]]);if(0!==je)return je}return sn(F.length,Q.length)}(i.mapValue,e.mapValue);default:throw vt()}}function Vc(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return sn(i,e);const n=Ra(i),o=Ra(e),u=sn(n.seconds,o.seconds);return 0!==u?u:sn(n.nanos,o.nanos)}function Ma(i){return gu(i)}function gu(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=Ra(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?no(i.bytesValue).toBase64():"referenceValue"in i?Te.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",u=!0;for(const c of n.values||[])u?u=!1:o+=",",o+=gu(c);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let u="{",c=!0;for(const g of o)c?c=!1:u+=",",u+=`${g}:${gu(n.fields[g])}`;return u+"}"}(i.mapValue):vt()}function sl(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Uc(i){return!!i&&"integerValue"in i}function ol(i){return!!i&&"arrayValue"in i}function oc(i){return!!i&&"nullValue"in i}function ac(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function al(i){return!!i&&"mapValue"in i}function Na(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return da(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=Na(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Na(i.arrayValue.values[n]);return e}return Object.assign({},i)}function Pl(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function xu(i){return"nullValue"in i?Lc:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?sl(Jo.empty(),Te.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:vt()}function zh(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?sl(Jo.empty(),Te.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?ha:vt()}function Bc(i,e){const n=Pa(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function ku(i,e){const n=Pa(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class ro{constructor(e){this.value=e}static empty(){return new ro({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!al(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Na(n)}setAll(e){let n=ci.emptyPath(),o={},u=[];e.forEach((g,M)=>{if(!n.isImmediateParentOf(M)){const F=this.getFieldsMap(n);this.applyChanges(F,o,u),o={},u=[],n=M.popLast()}g?o[M.lastSegment()]=Na(g):u.push(M.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,o,u)}delete(e){const n=this.field(e.popLast());al(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ms(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];al(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){da(n,(u,c)=>e[u]=c);for(const u of o)delete e[u]}clone(){return new ro(Na(this.value))}}function jc(i){const e=[];return da(i.fields,(n,o)=>{const u=new ci([n]);if(al(o)){const c=jc(o.mapValue).fields;if(0===c.length)e.push(u);else for(const g of c)e.push(u.child(g))}else e.push(u)}),new ti(e)}class pi{constructor(e,n,o,u,c,g,M){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=c,this.data=g,this.documentState=M}static newInvalidDocument(e){return new pi(e,0,un.min(),un.min(),un.min(),ro.empty(),0)}static newFoundDocument(e,n,o,u){return new pi(e,1,n,un.min(),o,u,0)}static newNoDocument(e,n){return new pi(e,2,n,un.min(),un.min(),ro.empty(),0)}static newUnknownDocument(e,n){return new pi(e,3,n,un.min(),un.min(),ro.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(un.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ro.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ro.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=un.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ul{constructor(e,n){this.position=e,this.inclusive=n}}function mu(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const c=e[u],g=i.position[u];if(o=c.field.isKeyField()?Te.comparator(Te.fromName(g.referenceValue),n.key):Pa(g,n.data.field(c.field)),"desc"===c.dir&&(o*=-1),0!==o)break}return o}function md(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!ms(i.position[n],e.position[n]))return!1;return!0}class Hc{constructor(e,n="asc"){this.field=e,this.dir=n}}function tp(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class ll{}class sr extends ll{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new uc(e,n,o):"array-contains"===n?new rp(e,o):"in"===n?new Hs(e,o):"not-in"===n?new vd(e,o):"array-contains-any"===n?new lc(e,o):new sr(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new _u(e,o):new np(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Pa(n,this.value)):null!==n&&fa(this.value)===fa(n)&&this.matchesComparison(Pa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ur extends ll{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Ur(e,n)}matches(e){return gi(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function gi(i){return"and"===i.op}function _d(i){return"or"===i.op}function cl(i){return yd(i)&&gi(i)}function yd(i){for(const e of i.filters)if(e instanceof Ur)return!1;return!0}function Ns(i){if(i instanceof sr)return i.field.canonicalString()+i.op.toString()+Ma(i.value);if(cl(i))return i.filters.map(e=>Ns(e)).join(",");{const e=i.filters.map(n=>Ns(n)).join(",");return`${i.op}(${e})`}}function Fu(i,e){return i instanceof sr?(o=i,(u=e)instanceof sr&&o.op===u.op&&o.field.isEqual(u.field)&&ms(o.value,u.value)):i instanceof Ur?function(o,u){return u instanceof Ur&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((c,g,M)=>c&&Fu(g,u.filters[M]),!0)}(i,e):void vt();var o,u}function qa(i,e){const n=i.filters.concat(e);return Ur.create(n,i.op)}function Ml(i){return i instanceof sr?`${(n=i).field.canonicalString()} ${n.op} ${Ma(n.value)}`:i instanceof Ur?function(n){return n.op.toString()+" {"+n.getFilters().map(Ml).join(" ,")+"}"}(i):"Filter";var n}class uc extends sr{constructor(e,n,o){super(e,n,o),this.key=Te.fromName(o.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class _u extends sr{constructor(e,n){super(e,"in",n),this.keys=$c(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class np extends sr{constructor(e,n){super(e,"not-in",n),this.keys=$c(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $c(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>Te.fromName(o.referenceValue))}class rp extends sr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ol(n)&&il(n.arrayValue,this.value)}}class Hs extends sr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&il(this.value.arrayValue,n)}}class vd extends sr{constructor(e,n){super(e,"not-in",n)}matches(e){if(il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!il(this.value.arrayValue,n)}}class lc extends sr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ol(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>il(this.value.arrayValue,o))}}class yu{constructor(e,n=null,o=[],u=[],c=null,g=null,M=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=c,this.startAt=g,this.endAt=M,this.ce=null}}function cc(i,e=null,n=[],o=[],u=null,c=null,g=null){return new yu(i,e,n,o,u,c,g)}function Ka(i){const e=Tt(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>Ns(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(c=o).field.canonicalString()+c.dir;var c}).join(","),ke(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>Ma(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>Ma(o)).join(",")),e.ce=n}return e.ce}function Nl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!tp(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Fu(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!md(i.startAt,e.startAt)&&md(i.endAt,e.endAt)}function Ol(i){return Te.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Gc(i,e){return i.filters.filter(n=>n instanceof sr&&n.field.isEqual(e))}function Jd(i,e,n){let o=Lc,u=!0;for(const c of Gc(i,e)){let g=Lc,M=!0;switch(c.op){case"<":case"<=":g=xu(c.value);break;case"==":case"in":case">=":g=c.value;break;case">":g=c.value,M=!1;break;case"!=":case"not-in":g=Lc}Bc({value:o,inclusive:u},{value:g,inclusive:M})<0&&(o=g,u=M)}if(null!==n)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const g=n.position[c];Bc({value:o,inclusive:u},{value:g,inclusive:n.inclusive})<0&&(o=g,u=n.inclusive);break}return{value:o,inclusive:u}}function Xd(i,e,n){let o=ha,u=!0;for(const c of Gc(i,e)){let g=ha,M=!0;switch(c.op){case">=":case">":g=zh(c.value),M=!1;break;case"==":case"in":case"<=":g=c.value;break;case"<":g=c.value,M=!1;break;case"!=":case"not-in":g=ha}ku({value:o,inclusive:u},{value:g,inclusive:M})>0&&(o=g,u=M)}if(null!==n)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const g=n.position[c];ku({value:o,inclusive:u},{value:g,inclusive:n.inclusive})>0&&(o=g,u=n.inclusive);break}return{value:o,inclusive:u}}class Oa{constructor(e,n=null,o=[],u=[],c=null,g="F",M=null,F=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=c,this.limitType=g,this.startAt=M,this.endAt=F,this.le=null,this.he=null,this.Pe=null}}function vu(i,e,n,o,u,c,g,M){return new Oa(i,e,n,o,u,c,g,M)}function dl(i){return new Oa(i)}function Lu(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Ed(i){return null!==i.collectionGroup}function Za(i){const e=Tt(i);if(null===e.le){e.le=[];const n=new Set;for(const c of e.explicitOrderBy)e.le.push(c),n.add(c.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(g){let M=new Mr(ci.comparator);return g.filters.forEach(F=>{F.getFlattenedFilters().forEach(j=>{j.isInequality()&&(M=M.add(j.field))})}),M})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.le.push(new Hc(c,o))}),n.has(ci.keyField().canonicalString())||e.le.push(new Hc(ci.keyField(),o))}return e.le}function Vi(i){const e=Tt(i);return e.he||(e.he=function Id(i,e){if("F"===i.limitType)return cc(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(u=>new Hc(u.field,"desc"===u.dir?"asc":"desc"));const n=i.endAt?new ul(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new ul(i.startAt.position,i.startAt.inclusive):null;return cc(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}(e,Za(i))),e.he}function xl(i,e){const n=i.filters.concat([e]);return new Oa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Qa(i,e,n){return new Oa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function kl(i,e){return Nl(Vi(i),Vi(e))&&i.limitType===e.limitType}function Fl(i){return`${Ka(Vi(i))}|lt:${i.limitType}`}function Ll(i){return`Query(target=${function(n){let o=n.path.canonicalString();return null!==n.collectionGroup&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(u=>Ml(u)).join(", ")}]`),ke(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(u=>{return`${(g=u).field.canonicalString()} (${g.dir})`;var g}).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(u=>Ma(u)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(u=>Ma(u)).join(",")),`Target(${o})`}(Vi(i))}; limitType=${i.limitType})`}function Ya(i,e){return e.isFoundDocument()&&function(o,u){const c=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(c):Te.isDocumentKey(o.path)?o.path.isEqual(c):o.path.isImmediateParentOf(c)}(i,e)&&function(o,u){for(const c of Za(o))if(!c.field.isKeyField()&&null===u.data.field(c.field))return!1;return!0}(i,e)&&function(o,u){for(const c of o.filters)if(!c.matches(u))return!1;return!0}(i,e)&&(u=e,!((o=i).startAt&&!function(g,M,F){const j=mu(g,M,F);return g.inclusive?j<=0:j<0}(o.startAt,Za(o),u)||o.endAt&&!function(g,M,F){const j=mu(g,M,F);return g.inclusive?j>=0:j>0}(o.endAt,Za(o),u)));var o,u}function Vu(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function eh(i){return(e,n)=>{let o=!1;for(const u of Za(i)){const c=v(u,e,n);if(0!==c)return c;o=o||u.field.isKeyField()}return 0}}function v(i,e,n){const o=i.field.isKeyField()?Te.comparator(e.key,n.key):function(c,g,M){const F=g.data.field(c),j=M.data.field(c);return null!==F&&null!==j?Pa(F,j):vt()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return vt()}}class f{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,c]of o)if(this.equalsFn(u,e))return c}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let c=0;c<u.length;c++)if(this.equalsFn(u[c][0],e))return void(u[c]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,(n,o)=>{for(const[u,c]of o)e(u,c)})}isEmpty(){return Sl(this.inner)}size(){return this.innerSize}}const m=new Yr(Te.comparator);function D(){return m}const k=new Yr(Te.comparator);function G(...i){let e=k;for(const n of i)e=e.insert(n.key,n);return e}function te(i){let e=k;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function oe(){return Ae()}function _e(){return Ae()}function Ae(){return new f(i=>i.toString(),(i,e)=>i.isEqual(e))}const tt=new Yr(Te.comparator),mt=new Mr(Te.comparator);function pt(...i){let e=mt;for(const n of i)e=e.add(n);return e}const Qt=new Mr(sn);function xt(){return Qt}function Xt(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ct(e)?"-0":e}}function jn(i){return{integerValue:""+i}}function Nr(i,e){return bn(e)?jn(e):Xt(i,e)}class xr{constructor(){this._=void 0}}function _r(i,e,n){return i instanceof Jr?function(u,c){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return c&&bl(c)&&(c=Rl(c)),c&&(g.fields.__previous_value__=c),{mapValue:g}}(n,e):i instanceof mi?ni(i,e):i instanceof is?Uu(i,e):function(u,c){const g=_o(u,c),M=xa(g)+xa(u.Ie);return Uc(g)&&Uc(u.Ie)?jn(M):Xt(u.serializer,M)}(i,e)}function cr(i,e,n){return i instanceof mi?ni(i,e):i instanceof is?Uu(i,e):n}function _o(i,e){return i instanceof Eu?Uc(o=e)||(c=o)&&"doubleValue"in c?e:{integerValue:0}:null;var o,c}class Jr extends xr{}class mi extends xr{constructor(e){super(),this.elements=e}}function ni(i,e){const n=Xo(e);for(const o of i.elements)n.some(u=>ms(u,o))||n.push(o);return{arrayValue:{values:n}}}class is extends xr{constructor(e){super(),this.elements=e}}function Uu(i,e){let n=Xo(e);for(const o of i.elements)n=n.filter(u=>!ms(u,o));return{arrayValue:{values:n}}}class Eu extends xr{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function xa(i){return di(i.integerValue||i.doubleValue)}function Xo(i){return ol(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class ka{constructor(e,n){this.field=e,this.transform=n}}class nn{constructor(e,n){this.version=e,this.transformResults=n}}class kt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kt}static exists(e){return new kt(void 0,e)}static updateTime(e){return new kt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function In(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Kn{}function Zi(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Iu(i.key,kt.none()):new Xa(i.key,i.data,kt.none());{const n=i.data,o=ro.empty();let u=new Mr(ci.comparator);for(let c of e.fields)if(!u.has(c)){let g=n.field(c);null===g&&c.length>1&&(c=c.popLast(),g=n.field(c)),null===g?o.delete(c):o.set(c,g),u=u.add(c)}return new pa(i.key,o,new ti(u.toArray()),kt.none())}}function Ja(i,e,n){i instanceof Xa?function(u,c,g){const M=u.value.clone(),F=Bu(u.fieldTransforms,c,g.transformResults);M.setAll(F),c.convertToFoundDocument(g.version,M).setHasCommittedMutations()}(i,e,n):i instanceof pa?function(u,c,g){if(!In(u.precondition,c))return void c.convertToUnknownDocument(g.version);const M=Bu(u.fieldTransforms,c,g.transformResults),F=c.data;F.setAll(_s(u)),F.setAll(M),c.convertToFoundDocument(g.version,F).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Hr(i,e,n,o){return i instanceof Xa?function(c,g,M,F){if(!In(c.precondition,g))return M;const j=c.value.clone(),Q=yo(c.fieldTransforms,F,g);return j.setAll(Q),g.convertToFoundDocument(g.version,j).setHasLocalMutations(),null}(i,e,n,o):i instanceof pa?function(c,g,M,F){if(!In(c.precondition,g))return M;const j=yo(c.fieldTransforms,F,g),Q=g.data;return Q.setAll(_s(c)),Q.setAll(j),g.convertToFoundDocument(g.version,Q).setHasLocalMutations(),null===M?null:M.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(ae=>ae.field))}(i,e,n,o):(M=n,In(i.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):M);var g,M}function No(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),c=_o(o.transform,u||null);null!=c&&(null===n&&(n=ro.empty()),n.set(o.field,c))}return n||null}function _i(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(o=i.fieldTransforms)&&void 0===u||o&&u&&Vr(o,u,(c,g)=>function dc(i,e){return i.field.isEqual(e.field)&&(u=e.transform,(o=i.transform)instanceof mi&&u instanceof mi||o instanceof is&&u instanceof is?Vr(o.elements,u.elements,ms):o instanceof Eu&&u instanceof Eu?ms(o.Ie,u.Ie):o instanceof Jr&&u instanceof Jr);var o,u}(c,g))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var o,u}class Xa extends Kn{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class pa extends Kn{constructor(e,n,o,u,c=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function _s(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function Bu(i,e,n){const o=new Map;Jt(i.length===n.length);for(let u=0;u<n.length;u++){const c=i[u],g=c.transform,M=e.data.field(c.field);o.set(c.field,cr(g,M,n[u]))}return o}function yo(i,e,n){const o=new Map;for(const u of i){const c=u.transform,g=n.data.field(u.field);o.set(u.field,_r(c,g,e))}return o}class Iu extends Kn{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ea extends Kn{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class th{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const c=this.mutations[u];c.key.isEqual(e.key)&&Ja(c,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=Hr(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=Hr(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=_e();return this.mutations.forEach(u=>{const c=e.get(u.key),g=c.overlayedDocument;let M=this.applyToLocalView(g,c.mutatedFields);M=n.has(u.key)?null:M;const F=Zi(g,M);null!==F&&o.set(u.key,F),g.isValidDocument()||g.convertToNoDocument(un.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pt())}isEqual(e){return this.batchId===e.batchId&&Vr(this.mutations,e.mutations,(n,o)=>_i(n,o))&&Vr(this.baseMutations,e.baseMutations,(n,o)=>_i(n,o))}}class Wh{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){Jt(e.mutations.length===o.length);let u=function(){return tt}();const c=e.mutations;for(let g=0;g<c.length;g++)u=u.insert(c[g].key,o[g].version);return new Wh(e,n,o,u)}}class ip{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class qh{constructor(e,n){this.count=e,this.unchangedNames=n}}var Wn,dr;function wu(i){switch(i){default:return vt();case He.CANCELLED:case He.UNKNOWN:case He.DEADLINE_EXCEEDED:case He.RESOURCE_EXHAUSTED:case He.INTERNAL:case He.UNAVAILABLE:case He.UNAUTHENTICATED:return!1;case He.INVALID_ARGUMENT:case He.NOT_FOUND:case He.ALREADY_EXISTS:case He.PERMISSION_DENIED:case He.FAILED_PRECONDITION:case He.ABORTED:case He.OUT_OF_RANGE:case He.UNIMPLEMENTED:case He.DATA_LOSS:return!0}}function wd(i){if(void 0===i)return li("GRPC error has no .code"),He.UNKNOWN;switch(i){case Wn.OK:return He.OK;case Wn.CANCELLED:return He.CANCELLED;case Wn.UNKNOWN:return He.UNKNOWN;case Wn.DEADLINE_EXCEEDED:return He.DEADLINE_EXCEEDED;case Wn.RESOURCE_EXHAUSTED:return He.RESOURCE_EXHAUSTED;case Wn.INTERNAL:return He.INTERNAL;case Wn.UNAVAILABLE:return He.UNAVAILABLE;case Wn.UNAUTHENTICATED:return He.UNAUTHENTICATED;case Wn.INVALID_ARGUMENT:return He.INVALID_ARGUMENT;case Wn.NOT_FOUND:return He.NOT_FOUND;case Wn.ALREADY_EXISTS:return He.ALREADY_EXISTS;case Wn.PERMISSION_DENIED:return He.PERMISSION_DENIED;case Wn.FAILED_PRECONDITION:return He.FAILED_PRECONDITION;case Wn.ABORTED:return He.ABORTED;case Wn.OUT_OF_RANGE:return He.OUT_OF_RANGE;case Wn.UNIMPLEMENTED:return He.UNIMPLEMENTED;case Wn.DATA_LOSS:return He.DATA_LOSS;default:return vt()}}(dr=Wn||(Wn={}))[dr.OK=0]="OK",dr[dr.CANCELLED=1]="CANCELLED",dr[dr.UNKNOWN=2]="UNKNOWN",dr[dr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dr[dr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dr[dr.NOT_FOUND=5]="NOT_FOUND",dr[dr.ALREADY_EXISTS=6]="ALREADY_EXISTS",dr[dr.PERMISSION_DENIED=7]="PERMISSION_DENIED",dr[dr.UNAUTHENTICATED=16]="UNAUTHENTICATED",dr[dr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dr[dr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dr[dr.ABORTED=10]="ABORTED",dr[dr.OUT_OF_RANGE=11]="OUT_OF_RANGE",dr[dr.UNIMPLEMENTED=12]="UNIMPLEMENTED",dr[dr.INTERNAL=13]="INTERNAL",dr[dr.UNAVAILABLE=14]="UNAVAILABLE",dr[dr.DATA_LOSS=15]="DATA_LOSS";function ju(){return new TextEncoder}const op=new Ha([4294967295,4294967295],0);function Kh(i){const e=ju().encode(i),n=new Jl;return n.update(e),new Uint8Array(n.digest())}function nh(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ha([n,o],0),new Ha([u,c],0)]}class Td{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new eu(`Invalid padding: ${n}`);if(o<0)throw new eu(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new eu(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new eu(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Ha.fromNumber(this.Te)}de(e,n,o){let u=e.add(n.multiply(Ha.fromNumber(o)));return 1===u.compare(op)&&(u=new Ha([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=Kh(e),[o,u]=nh(n);for(let c=0;c<this.hashCount;c++){const g=this.de(o,u,c);if(!this.Ae(g))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),g=new Td(c,u,n);return o.forEach(M=>g.insert(M)),g}insert(e){if(0===this.Te)return;const n=Kh(e),[o,u]=nh(n);for(let c=0;c<this.hashCount;c++){const g=this.de(o,u,c);this.Re(g)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zc{constructor(e,n,o,u,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,Cd.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new zc(un.min(),u,new Yr(sn),D(),pt())}}class Cd{constructor(e,n,o,u,c){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Cd(o,n,pt(),pt(),pt())}}class Dd{constructor(e,n,o,u){this.Ve=e,this.removedTargetIds=n,this.key=o,this.me=u}}class y{constructor(e,n){this.targetId=e,this.fe=n}}class d{constructor(e,n,o=Ki.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class p{constructor(){this.ge=0,this.pe=Z(),this.ye=Ki.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=pt(),n=pt(),o=pt();return this.pe.forEach((u,c)=>{switch(c){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:vt()}}),new Cd(this.ye,this.we,e,n,o)}Fe(){this.Se=!1,this.pe=Z()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Jt(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class T{constructor(e){this.Be=e,this.ke=new Map,this.qe=D(),this.Qe=V(),this.Ke=new Yr(sn)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(n);break;case 3:this.je(n)&&(o.Le(),o.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.Ce(e.resumeToken));break;default:vt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((o,u)=>{this.je(u)&&n(u)})}Je(e){const n=e.targetId,o=e.fe.count,u=this.Ye(n);if(u){const c=u.target;if(Ol(c))if(0===o){const g=new Te(c.path);this.We(n,g,pi.newNoDocument(g,un.min()))}else Jt(1===o);else{const g=this.Ze(n);if(g!==o){const M=this.Xe(e),F=M?this.et(M,e,g):1;0!==F&&(this.He(n),this.Ke=this.Ke.insert(n,2===F?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:c=0}=n;let g,M;try{g=no(o).toUint8Array()}catch(F){if(F instanceof rl)return Wi("Decoding the base64 bloom filter in existence filter failed ("+F.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw F}try{M=new Td(g,u,c)}catch(F){return Wi(F instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",F),null}return 0===M.Te?null:M}et(e,n,o){return n.fe.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Be.getRemoteKeysForTarget(n);let u=0;return o.forEach(c=>{const g=this.Be.nt(),M=`projects/${g.projectId}/databases/${g.database}/documents/${c.path.canonicalString()}`;e.mightContain(M)||(this.We(n,c,null),u++)}),u}it(e){const n=new Map;this.ke.forEach((c,g)=>{const M=this.Ye(g);if(M){if(c.current&&Ol(M.target)){const F=new Te(M.target.path);null!==this.qe.get(F)||this.st(g,F)||this.We(g,F,pi.newNoDocument(F,e))}c.De&&(n.set(g,c.ve()),c.Fe())}});let o=pt();this.Qe.forEach((c,g)=>{let M=!0;g.forEachWhile(F=>{const j=this.Ye(F);return!j||"TargetPurposeLimboResolution"===j.purpose||(M=!1,!1)}),M&&(o=o.add(c))}),this.qe.forEach((c,g)=>g.setReadTime(e));const u=new zc(e,n,this.Ke,this.qe,o);return this.qe=D(),this.Qe=V(),this.Ke=new Yr(sn),u}Ue(e,n){if(!this.je(e))return;const o=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,o),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const u=this.ze(e);this.st(e,n)?u.Me(n,1):u.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),o&&(this.qe=this.qe.insert(n,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new p,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Mr(sn),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||Ye("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new p),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function V(){return new Yr(Te.comparator)}function Z(){return new Yr(Te.comparator)}const ge={asc:"ASCENDING",desc:"DESCENDING"},Ne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Je={and:"AND",or:"OR"};class St{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ot(i,e){return i.useProto3Json||ke(e)?e:{value:e}}function Ft(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Di(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function tu(i,e){return Ft(i,e.toTimestamp())}function $r(i){return Jt(!!i),un.fromTimestamp(function(n){const o=Ra(n);return new Ir(o.seconds,o.nanos)}(i))}function Vl(i,e){return rh(i,e).canonicalString()}function rh(i,e){const n=(u=i,new or(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===e?n:n.child(e)}function Wc(i){const e=or.fromString(i);return Jt(jg(e)),e}function hc(i,e){return Vl(i.databaseId,e.path)}function nu(i,e){const n=Wc(e);if(n.get(1)!==i.databaseId.projectId)throw new it(He.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new it(He.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Te(up(n))}function ih(i,e){return Vl(i.databaseId,e)}function ap(i){const e=Wc(i);return 4===e.length?or.emptyPath():up(e)}function qc(i){return new or(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function up(i){return Jt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function lp(i,e,n){return{name:hc(i,e),fields:n.value.mapValue.fields}}function sh(i,e,n){const o=nu(i,e.name),u=$r(e.updateTime),c=e.createTime?$r(e.createTime):un.min(),g=new ro({mapValue:{fields:e.fields}}),M=pi.newFoundDocument(o,u,c,g);return n&&M.setHasCommittedMutations(),n?M.setHasCommittedMutations():M}function cp(i,e){let n;if(e instanceof Xa)n={update:lp(i,e.key,e.value)};else if(e instanceof Iu)n={delete:hc(i,e.key)};else if(e instanceof pa)n={update:lp(i,e.key,e.data),updateMask:fE(e.fieldMask)};else{if(!(e instanceof ea))return vt();n={verify:hc(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(c,g){const M=g.transform;if(M instanceof Jr)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(M instanceof mi)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:M.elements}};if(M instanceof is)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:M.elements}};if(M instanceof Eu)return{fieldPath:g.field.canonicalString(),increment:M.Ie};throw vt()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:tu(i,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:vt()),n;var c}function Qh(i,e){const n=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?kt.updateTime($r(c.updateTime)):void 0!==c.exists?kt.exists(c.exists):kt.none():kt.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(g,M){let F=null;"setToServerValue"in M?(Jt("REQUEST_TIME"===M.setToServerValue),F=new Jr):"appendMissingElements"in M?F=new mi(M.appendMissingElements.values||[]):"removeAllFromArray"in M?F=new is(M.removeAllFromArray.values||[]):"increment"in M?F=new Eu(g,M.increment):vt();const j=ci.fromServerFormat(M.fieldPath);return new ka(j,F)}(i,u)):[];var c;if(e.update){const u=nu(i,e.update.name),c=new ro({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new ti((e.updateMask.fieldPaths||[]).map(Q=>ci.fromServerFormat(Q)));return new pa(u,c,g,n,o)}return new Xa(u,c,n,o)}if(e.delete){const u=nu(i,e.delete);return new Iu(u,n)}if(e.verify){const u=nu(i,e.verify);return new ea(u,n)}return vt()}function dE(i,e){return{documents:[ih(i,e.path)]}}function $_(i,e){const n={structuredQuery:{}},o=e.path;let u;null!==e.collectionGroup?(u=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=ih(i,u);const c=function(j){if(0!==j.length)return oh(Ur.create(j,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const g=function(j){if(0!==j.length)return j.map(Q=>{return{field:fc((Ie=Q).field),direction:dp(Ie.dir)};var Ie})}(e.orderBy);g&&(n.structuredQuery.orderBy=g);const M=Ot(i,e.limit);return null!==M&&(n.structuredQuery.limit=M),e.startAt&&(n.structuredQuery.startAt={before:(j=e.startAt).inclusive,values:j.position}),e.endAt&&(n.structuredQuery.endAt=function(j){return{before:!j.inclusive,values:j.position}}(e.endAt)),{ut:n,parent:u};var j}function hE(i){let e=ap(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){Jt(1===o);const Q=n.from[0];Q.allDescendants?u=Q.collectionId:e=e.child(Q.collectionId)}let c=[];n.where&&(c=function(ae){const Ie=G_(ae);return Ie instanceof Ur&&cl(Ie)?Ie.getFilters():[Ie]}(n.where));let g=[];n.orderBy&&(g=n.orderBy.map(Ie=>{return new Hc(Ad((yt=Ie).field),function(bt){switch(bt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(yt.direction));var yt}));let M=null;n.limit&&(M=function(ae){let Ie;return Ie="object"==typeof ae?ae.value:ae,ke(Ie)?null:Ie}(n.limit));let F=null;var ae;n.startAt&&(F=new ul((ae=n.startAt).values||[],!!ae.before));let j=null;return n.endAt&&(j=function(ae){return new ul(ae.values||[],!ae.before)}(n.endAt)),vu(e,u,g,c,M,"F",F,j)}function G_(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Ad(n.unaryFilter.field);return sr.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=Ad(n.unaryFilter.field);return sr.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ad(n.unaryFilter.field);return sr.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=Ad(n.unaryFilter.field);return sr.create(g,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}(i):void 0!==i.fieldFilter?sr.create(Ad((n=i).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return Ur.create(n.compositeFilter.filters.map(o=>G_(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return vt()}}(n.compositeFilter.op))}(i):vt();var n}function dp(i){return ge[i]}function hp(i){return Ne[i]}function Bg(i){return Je[i]}function fc(i){return{fieldPath:i.canonicalString()}}function Ad(i){return ci.fromServerFormat(i.fieldPath)}function oh(i){return i instanceof sr?function(n){if("=="===n.op){if(ac(n.value))return{unaryFilter:{field:fc(n.field),op:"IS_NAN"}};if(oc(n.value))return{unaryFilter:{field:fc(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(ac(n.value))return{unaryFilter:{field:fc(n.field),op:"IS_NOT_NAN"}};if(oc(n.value))return{unaryFilter:{field:fc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fc(n.field),op:hp(n.op),value:n.value}}}(i):i instanceof Ur?function(n){const o=n.getFilters().map(u=>oh(u));return 1===o.length?o[0]:{compositeFilter:{op:Bg(n.op),filters:o}}}(i):vt()}function fE(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jg(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Ul{constructor(e,n,o,u,c=un.min(),g=un.min(),M=Ki.EMPTY_BYTE_STRING,F=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=M,this.expectedCount=F}withSequenceNumber(e){return new Ul(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ul(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ul(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ul(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Yh{constructor(e){this.ct=e}}function Jh(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:pp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:hc(c=i.ct,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:Ft(c,g.version.toTimestamp()),createTime:Ft(c,g.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:Sd(e.version)};else{if(!e.isUnknownDocument())return vt();o.unknownDocument={path:n.path.toArray(),version:Sd(e.version)}}var c,g;return o}function pp(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Sd(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bd(i){const e=new Ir(i.seconds,i.nanoseconds);return un.fromTimestamp(e)}function Kc(i,e){const n=(e.baseMutations||[]).map(c=>Qh(i.ct,c));for(let c=0;c<e.mutations.length-1;++c)c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(e.mutations[c].updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c);const o=e.mutations.map(c=>Qh(i.ct,c)),u=Ir.fromMillis(e.localWriteTimeMs);return new th(e.batchId,u,n,o)}function Rd(i){const e=bd(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?bd(i.lastLimboFreeSnapshotVersion):un.min();let o;return o=void 0!==i.query.documents?(Jt(1===(c=i.query).documents.length),Vi(dl(ap(c.documents[0])))):function(c){return Vi(hE(c))}(i.query),new Ul(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,Ki.fromBase64String(i.resumeToken));var c}function z_(i,e){const n=Sd(e.snapshotVersion),o=Sd(e.lastLimboFreeSnapshotVersion);let u;u=Ol(e.target)?dE(i.ct,e.target):$_(i.ct,e.target).ut;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ka(e.target),readTime:n,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Hg(i){const e=hE({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Qa(e,e.limit,"L"):e}function $g(i,e){return new ip(e.largestBatchId,Qh(i.ct,e.overlayMutation))}function Gg(i,e){const n=e.path.lastSegment();return[i,pn(e.path.popLast()),n]}function W_(i,e,n,o){return{indexId:i,uid:e,sequenceNumber:n,readTime:Sd(o.readTime),documentKey:pn(o.documentKey.path),largestBatchId:o.largestBatchId}}class pE{getBundleMetadata(e,n){return La(e).get(n).next(o=>{if(o)return{id:(c=o).bundleId,createTime:bd(c.createTime),version:c.version};var c})}saveBundleMetadata(e,n){return La(e).put({bundleId:(u=n).id,createTime:Sd($r(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return gp(e).get(n).next(o=>{if(o)return{name:(c=o).name,query:Hg(c.bundledQuery),readTime:bd(c.readTime)};var c})}saveNamedQuery(e,n){return gp(e).put({name:(u=n).name,readTime:Sd($r(u.readTime)),bundledQuery:u.bundledQuery});var u}}function La(i){return js(i,"bundles")}function gp(i){return js(i,"namedQueries")}class Xh{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new Xh(e,n.uid||"")}getOverlay(e,n){return Pd(e).get(Gg(this.userId,n)).next(o=>o?$g(this.serializer,o):null)}getOverlays(e,n){const o=oe();return xe.forEach(n,u=>this.getOverlay(e,u).next(c=>{null!==c&&o.set(u,c)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((c,g)=>{const M=new ip(n,g);u.push(this.ht(e,M))}),xe.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(g=>u.add(pn(g.getCollectionPath())));const c=[];return u.forEach(g=>{const M=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,o+1],!1,!0);c.push(Pd(e).H("collectionPathOverlayIndex",M))}),xe.waitFor(c)}getOverlaysForCollection(e,n,o){const u=oe(),c=pn(n),g=IDBKeyRange.bound([this.userId,c,o],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Pd(e).W("collectionPathOverlayIndex",g).next(M=>{for(const F of M){const j=$g(this.serializer,F);u.set(j.getKey(),j)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const c=oe();let g;const M=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Pd(e).Y({index:"collectionGroupOverlayIndex",range:M},(F,j,Q)=>{const ae=$g(this.serializer,j);c.size()<u||ae.largestBatchId===g?(c.set(ae.getKey(),ae),g=ae.largestBatchId):Q.done()}).next(()=>c)}ht(e,n){return Pd(e).put(function(u,c,g){const[M,F,j]=Gg(c,g.mutation.key);return{userId:c,collectionPath:F,documentId:j,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:cp(u.ct,g.mutation)}}(this.serializer,this.userId,n))}}function Pd(i){return js(i,"documentOverlays")}class Os{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(di(e.integerValue));else if("doubleValue"in e){const o=di(e.doubleValue);isNaN(o)?this.Et(n,13):(this.Et(n,15),Ct(o)?n.dt(0):n.dt(o))}else if("timestampValue"in e){let o=e.timestampValue;this.Et(n,20),"string"==typeof o&&(o=Ra(o)),n.At(`${o.seconds||""}`),n.dt(o.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(no(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.Et(n,45),n.dt(o.latitude||0),n.dt(o.longitude||0)}else"mapValue"in e?Pl(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):vt()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const o=e.fields||{};this.Et(n,55);for(const u of Object.keys(o))this.Rt(u,n),this.It(o[u],n)}wt(e,n){const o=e.values||[];this.Et(n,50);for(const u of o)this.It(u,n)}gt(e,n){this.Et(n,37),Te.fromName(e).path.forEach(o=>{this.Et(n,60),this.St(o,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}function ef(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function zg(i){const e=64-function(o){let u=0;for(let c=0;c<8;++c){const g=ef(255&o[c]);if(u+=g,8!==g)break}return u}(i);return Math.ceil(e/8)}Os.bt=new Os;class q_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ct(o.value),o=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Mt(o.value),o=n.next();this.xt()}Ot(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ct(o);else if(o<2048)this.Ct(960|o>>>6),this.Ct(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ct(480|o>>>12),this.Ct(128|63&o>>>6),this.Ct(128|63&o);else{const u=n.codePointAt(0);this.Ct(240|u>>>18),this.Ct(128|63&u>>>12),this.Ct(128|63&u>>>6),this.Ct(128|63&u)}}this.vt()}Nt(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Mt(o);else if(o<2048)this.Mt(960|o>>>6),this.Mt(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Mt(480|o>>>12),this.Mt(128|63&o>>>6),this.Mt(128|63&o);else{const u=n.codePointAt(0);this.Mt(240|u>>>18),this.Mt(128|63&u>>>12),this.Mt(128|63&u>>>6),this.Mt(128|63&u)}}this.xt()}Lt(e){const n=this.Bt(e),o=zg(n);this.kt(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}qt(e){const n=this.Bt(e),o=zg(n);this.kt(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(c){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,c,!1),new Uint8Array(g.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}Ct(e){const n=255&e;0===n?(this.Kt(0),this.Kt(255)):255===n?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class gE{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class K_{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class tf{constructor(){this.Gt=new q_,this.zt=new gE(this.Gt),this.jt=new K_(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Zc{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Jt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Zc(this.indexId,this.documentKey,this.arrayValue,o)}}function Qc(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=Wg(i.arrayValue,e.arrayValue),0!==n?n:(n=Wg(i.directionalValue,e.directionalValue),0!==n?n:Te.comparator(i.documentKey,e.documentKey)))}function Wg(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class Z_{constructor(e){this.Yt=new Mr((n,o)=>ci.comparator(n.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const o=n;o.isInequality()?this.Yt=this.Yt.add(o):this.Xt.push(o)}}get en(){return this.Yt.size>1}tn(e){if(Jt(e.collectionGroup===this.collectionId),this.en)return!1;const n=Ju(e);if(void 0!==n&&!this.nn(n))return!1;const o=Po(e);let u=new Set,c=0,g=0;for(;c<o.length&&this.nn(o[c]);++c)u=u.add(o[c].fieldPath.canonicalString());if(c===o.length)return!0;if(this.Yt.size>0){const M=this.Yt.getIterator().getNext();if(!u.has(M.field.canonicalString())){const F=o[c];if(!this.rn(M,F)||!this.sn(this.Zt[g++],F))return!1}++c}for(;c<o.length;++c)if(g>=this.Zt.length||!this.sn(this.Zt[g++],o[c]))return!1;return!0}on(){if(this.en)return null;let e=new Mr(ci.comparator);const n=[];for(const o of this.Xt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)n.push(new Mo(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),n.push(new Mo(o.field,0))}for(const o of this.Zt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),n.push(new Mo(o.field,"asc"===o.dir?0:1)));return new kn(kn.UNKNOWN_ID,this.collectionId,n,hs.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function Q_(i){var e,n;if(Jt(i instanceof sr||i instanceof Ur),i instanceof sr){if(i instanceof Hs){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(c=>sr.create(i.field,"==",c)))||[];return Ur.create(u,"or")}return i}const o=i.filters.map(u=>Q_(u));return Ur.create(o,i.op)}function qg(i){if(0===i.getFilters().length)return[];const e=ah(Q_(i));return Jt(Md(e)),nf(e)||Kg(e)?[e]:e.getFilters()}function nf(i){return i instanceof sr}function Kg(i){return i instanceof Ur&&cl(i)}function Md(i){return nf(i)||Kg(i)||function(n){if(n instanceof Ur&&_d(n)){for(const o of n.getFilters())if(!nf(o)&&!Kg(o))return!1;return!0}return!1}(i)}function ah(i){if(Jt(i instanceof sr||i instanceof Ur),i instanceof sr)return i;if(1===i.filters.length)return ah(i.filters[0]);const e=i.filters.map(o=>ah(o));let n=Ur.create(e,i.op);return n=Nd(n),Md(n)?n:(Jt(n instanceof Ur),Jt(gi(n)),Jt(n.filters.length>1),n.filters.reduce((o,u)=>mp(o,u)))}function mp(i,e){let n;return Jt(i instanceof sr||i instanceof Ur),Jt(e instanceof sr||e instanceof Ur),n=i instanceof sr?e instanceof sr?Ur.create([i,e],"and"):_p(i,e):e instanceof sr?_p(e,i):function(u,c){if(Jt(u.filters.length>0&&c.filters.length>0),gi(u)&&gi(c))return qa(u,c.getFilters());const g=_d(u)?u:c,M=_d(u)?c:u,F=g.filters.map(j=>mp(j,M));return Ur.create(F,"or")}(i,e),Nd(n)}function _p(i,e){if(gi(e))return qa(e,i.getFilters());{const n=e.filters.map(o=>mp(i,o));return Ur.create(n,"or")}}function Nd(i){if(Jt(i instanceof sr||i instanceof Ur),i instanceof sr)return i;const e=i.getFilters();if(1===e.length)return Nd(e[0]);if(yd(i))return i;const n=e.map(u=>Nd(u)),o=[];return n.forEach(u=>{u instanceof sr?o.push(u):u instanceof Ur&&(u.op===i.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:Ur.create(o,i.op)}class mE{constructor(){this._n=new Zg}addToCollectionParentIndex(e,n){return this._n.add(n),xe.resolve()}getCollectionParents(e,n){return xe.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return xe.resolve()}deleteFieldIndex(e,n){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,n){return xe.resolve()}getDocumentsMatchingTarget(e,n){return xe.resolve(null)}getIndexType(e,n){return xe.resolve(0)}getFieldIndexes(e,n){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,n){return xe.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,n){return xe.resolve(fs.min())}updateCollectionGroup(e,n,o){return xe.resolve()}updateIndexEntries(e,n){return xe.resolve()}}class Zg{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new Mr(or.comparator),c=!u.has(o);return this.index[n]=u.add(o),c}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Mr(or.comparator)).toArray()}}const rf=new Uint8Array(0);class _E{constructor(e,n){this.databaseId=n,this.an=new Zg,this.un=new f(o=>Ka(o),(o,u)=>Nl(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const c={collectionId:o,parent:pn(u)};return Y_(e).put(c)}return xe.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[Qu(n),""],!1,!0);return Y_(e).W(u).next(c=>{for(const g of c){if(g.collectionId!==n)break;o.push(Pr(g.parent))}return o})}addFieldIndex(e,n){const o=lh(e),u={indexId:(M=n).indexId,collectionGroup:M.collectionGroup,fields:M.fields.map(F=>[F.fieldPath.canonicalString(),F.kind])};var M;delete u.indexId;const c=o.add(u);if(n.indexState){const g=Bl(e);return c.next(M=>{g.put(W_(M,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return c.next()}deleteFieldIndex(e,n){const o=lh(e),u=Bl(e),c=uh(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=lh(e),o=uh(e),u=Bl(e);return n.H().next(()=>o.H()).next(()=>u.H())}createTargetIndexes(e,n){return xe.forEach(this.cn(n),o=>this.getIndexType(e,o).next(u=>{if(0===u||1===u){const c=new Z_(o).on();if(null!=c)return this.addFieldIndex(e,c)}}))}getDocumentsMatchingTarget(e,n){const o=uh(e);let u=!0;const c=new Map;return xe.forEach(this.cn(n),g=>this.ln(e,g).next(M=>{u&&(u=!!M),c.set(g,M)})).next(()=>{if(u){let g=pt();const M=[];return xe.forEach(c,(F,j)=>{var mn;Ye("IndexedDbIndexManager",`Using index ${mn=F,`id=${mn.indexId}|cg=${mn.collectionGroup}|f=${mn.fields.map(Qn=>`${Qn.fieldPath}:${Qn.kind}`).join(",")}`} to execute ${Ka(n)}`);const Q=function(mn,Qn){const Gr=Ju(Qn);if(void 0===Gr)return null;for(const ri of Gc(mn,Gr.fieldPath))switch(ri.op){case"array-contains-any":return ri.value.arrayValue.values||[];case"array-contains":return[ri.value]}return null}(j,F),ae=function(mn,Qn){const Gr=new Map;for(const ri of Po(Qn))for(const zs of Gc(mn,ri.fieldPath))switch(zs.op){case"==":case"in":Gr.set(ri.fieldPath.canonicalString(),zs.value);break;case"not-in":case"!=":return Gr.set(ri.fieldPath.canonicalString(),zs.value),Array.from(Gr.values())}return null}(j,F),Ie=function(mn,Qn){const Gr=[];let ri=!0;for(const zs of Po(Qn)){const Cu=0===zs.kind?Jd(mn,zs.fieldPath,mn.startAt):Xd(mn,zs.fieldPath,mn.startAt);Gr.push(Cu.value),ri&&(ri=Cu.inclusive)}return new ul(Gr,ri)}(j,F),je=function(mn,Qn){const Gr=[];let ri=!0;for(const zs of Po(Qn)){const Cu=0===zs.kind?Xd(mn,zs.fieldPath,mn.endAt):Jd(mn,zs.fieldPath,mn.endAt);Gr.push(Cu.value),ri&&(ri=Cu.inclusive)}return new ul(Gr,ri)}(j,F),yt=this.hn(F,j,Ie),Lt=this.hn(F,j,je),bt=this.Pn(F,j,ae),vn=this.In(F.indexId,Q,yt,Ie.inclusive,Lt,je.inclusive,bt);return xe.forEach(vn,Zn=>o.j(Zn,n.limit).next(mn=>{mn.forEach(Qn=>{const Gr=Te.fromSegments(Qn.documentKey);g.has(Gr)||(g=g.add(Gr),M.push(Gr))})}))}).next(()=>M)}return xe.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:qg(Ur.create(e.filters,"and")).map(o=>cc(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,o,u,c,g,M){const F=(null!=n?n.length:1)*Math.max(o.length,c.length),j=F/(null!=n?n.length:1),Q=[];for(let ae=0;ae<F;++ae){const Ie=n?this.Tn(n[ae/j]):rf,je=this.En(e,Ie,o[ae%j],u),yt=this.dn(e,Ie,c[ae%j],g),Lt=M.map(bt=>this.En(e,Ie,bt,!0));Q.push(...this.createRange(je,yt,Lt))}return Q}En(e,n,o,u){const c=new Zc(e,Te.empty(),n,o);return u?c:c.Jt()}dn(e,n,o,u){const c=new Zc(e,Te.empty(),n,o);return u?c.Jt():c}ln(e,n){const o=new Z_(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(c=>{let g=null;for(const M of c)o.tn(M)&&(!g||M.fields.length>g.fields.length)&&(g=M);return g})}getIndexType(e,n){let o=2;const u=this.cn(n);return xe.forEach(u,c=>this.ln(e,c).next(g=>{g?0!==o&&g.fields.length<function(F){let j=new Mr(ci.comparator),Q=!1;for(const ae of F.filters)for(const Ie of ae.getFlattenedFilters())Ie.field.isKeyField()||("array-contains"===Ie.op||"array-contains-any"===Ie.op?Q=!0:j=j.add(Ie.field));for(const ae of F.orderBy)ae.field.isKeyField()||(j=j.add(ae.field));return j.size+(Q?1:0)}(c)&&(o=1):o=0})).next(()=>null!==n.limit&&u.length>1&&2===o?1:o)}An(e,n){const o=new tf;for(const u of Po(e)){const c=n.data.field(u.fieldPath);if(null==c)return null;const g=o.Ht(u.kind);Os.bt.Pt(c,g)}return o.Wt()}Tn(e){const n=new tf;return Os.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const o=new tf;return Os.bt.Pt(sl(this.databaseId,n),o.Ht(function(c){const g=Po(c);return 0===g.length?0:g[g.length-1].kind}(e))),o.Wt()}Pn(e,n,o){if(null===o)return[];let u=[];u.push(new tf);let c=0;for(const g of Po(e)){const M=o[c++];for(const F of u)if(this.Vn(n,g.fieldPath)&&ol(M))u=this.mn(u,g,M);else{const j=F.Ht(g.kind);Os.bt.Pt(M,j)}}return this.fn(u)}hn(e,n,o){return this.Pn(e,n,o.position)}fn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Wt();return n}mn(e,n,o){const u=[...e],c=[];for(const g of o.arrayValue.values||[])for(const M of u){const F=new tf;F.seed(M.Wt()),Os.bt.Pt(g,F.Ht(n.kind)),c.push(F)}return c}Vn(e,n){return!!e.filters.find(o=>o instanceof sr&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=lh(e),u=Bl(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(c=>{const g=[];return xe.forEach(c,M=>u.get([M.indexId,this.uid]).next(F=>{g.push(function(Q,ae){const Ie=ae?new hs(ae.sequenceNumber,new fs(bd(ae.readTime),new Te(Pr(ae.documentKey)),ae.largestBatchId)):hs.empty(),je=Q.fields.map(([yt,Lt])=>new Mo(ci.fromServerFormat(yt),Lt));return new kn(Q.indexId,Q.collectionGroup,je,Ie)}(M,F))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const c=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==c?c:sn(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=lh(e),c=Bl(e);return this.gn(e).next(g=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(M=>xe.forEach(M,F=>c.put(W_(F.indexId,this.uid,g,o)))))}updateIndexEntries(e,n){const o=new Map;return xe.forEach(n,(u,c)=>{const g=o.get(u.collectionGroup);return(g?xe.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(M=>(o.set(u.collectionGroup,M),xe.forEach(M,F=>this.pn(e,u,F).next(j=>{const Q=this.yn(c,F);return j.isEqual(Q)?xe.resolve():this.wn(e,c,F,j,Q)}))))})}Sn(e,n,o,u){return uh(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.Rn(o,n.key),documentKey:n.key.path.toArray()})}bn(e,n,o,u){return uh(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.Rn(o,n.key),n.key.path.toArray()])}pn(e,n,o){const u=uh(e);let c=new Mr(Qc);return u.Y({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.Rn(o,n)])},(g,M)=>{c=c.add(new Zc(o.indexId,n,M.arrayValue,M.directionalValue))}).next(()=>c)}yn(e,n){let o=new Mr(Qc);const u=this.An(n,e);if(null==u)return o;const c=Ju(n);if(null!=c){const g=e.data.field(c.fieldPath);if(ol(g))for(const M of g.arrayValue.values||[])o=o.add(new Zc(n.indexId,e.key,this.Tn(M),u))}else o=o.add(new Zc(n.indexId,e.key,rf,u));return o}wn(e,n,o,u,c){Ye("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const g=[];return function(F,j,Q,ae,Ie){const je=F.getIterator(),yt=j.getIterator();let Lt=pu(je),bt=pu(yt);for(;Lt||bt;){let vn=!1,Zn=!1;if(Lt&&bt){const mn=Q(Lt,bt);mn<0?Zn=!0:mn>0&&(vn=!0)}else null!=Lt?Zn=!0:vn=!0;vn?(ae(bt),bt=pu(yt)):Zn?(Ie(Lt),Lt=pu(je)):(Lt=pu(je),bt=pu(yt))}}(u,c,Qc,M=>{g.push(this.Sn(e,n,o,M))},M=>{g.push(this.bn(e,n,o,M))}),xe.waitFor(g)}gn(e){let n=1;return Bl(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,c)=>{c.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((g,M)=>Qc(g,M)).filter((g,M,F)=>!M||0!==Qc(g,F[M-1]));const u=[];u.push(e);for(const g of o){const M=Qc(g,e),F=Qc(g,n);if(0===M)u[0]=e.Jt();else if(M>0&&F<0)u.push(g),u.push(g.Jt());else if(F>0)break}u.push(n);const c=[];for(let g=0;g<u.length;g+=2){if(this.Dn(u[g],u[g+1]))return[];c.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,rf,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,rf,[]]))}return c}Dn(e,n){return Qc(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(sf)}getMinOffset(e,n){return xe.mapArray(this.cn(n),o=>this.ln(e,o).next(u=>u||vt())).next(sf)}}function Y_(i){return js(i,"collectionParents")}function uh(i){return js(i,"indexEntries")}function lh(i){return js(i,"indexConfiguration")}function Bl(i){return js(i,"indexState")}function sf(i){Jt(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;Cl(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new fs(e.readTime,e.documentKey,n)}const yp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ga{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new ga(e,ga.DEFAULT_COLLECTION_PERCENTILE,ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function J_(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),c=[],g=IDBKeyRange.only(n.batchId);let M=0;const F=o.Y({range:g},(Q,ae,Ie)=>(M++,Ie.delete()));c.push(F.next(()=>{Jt(1===M)}));const j=[];for(const Q of n.mutations){const ae=ba(e,Q.key.path,n.batchId);c.push(u.delete(ae)),j.push(Q.key)}return xe.waitFor(c).next(()=>j)}function ch(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw vt();e=i.noDocument}return JSON.stringify(e).length}ga.DEFAULT_COLLECTION_PERCENTILE=10,ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ga.DEFAULT=new ga(41943040,ga.DEFAULT_COLLECTION_PERCENTILE,ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ga.DISABLED=new ga(-1,0,0);class af{constructor(e,n,o,u){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=u,this.Cn={}}static lt(e,n,o,u){Jt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new af(c,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pc(e).Y({index:"userMutationsIndex",range:o},(u,c,g)=>{n=!1,g.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const c=Od(e),g=pc(e);return g.add({}).next(M=>{Jt("number"==typeof M);const F=new th(M,n,o,u),j=function(je,yt,Lt){const bt=Lt.baseMutations.map(Zn=>cp(je.ct,Zn)),vn=Lt.mutations.map(Zn=>cp(je.ct,Zn));return{userId:yt,batchId:Lt.batchId,localWriteTimeMs:Lt.localWriteTime.toMillis(),baseMutations:bt,mutations:vn}}(this.serializer,this.userId,F),Q=[];let ae=new Mr((Ie,je)=>sn(Ie.canonicalString(),je.canonicalString()));for(const Ie of u){const je=ba(this.userId,Ie.key.path,M);ae=ae.add(Ie.key.path.popLast()),Q.push(g.put(j)),Q.push(c.put(je,$h))}return ae.forEach(Ie=>{Q.push(this.indexManager.addToCollectionParentIndex(e,Ie))}),e.addOnCommittedListener(()=>{this.Cn[M]=F.keys()}),xe.waitFor(Q).next(()=>F)})}lookupMutationBatch(e,n){return pc(e).get(n).next(o=>o?(Jt(o.userId===this.userId),Kc(this.serializer,o)):null)}vn(e,n){return this.Cn[n]?xe.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.Cn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let c=null;return pc(e).Y({index:"userMutationsIndex",range:u},(g,M,F)=>{M.userId===this.userId&&(Jt(M.batchId>=o),c=Kc(this.serializer,M)),F.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return pc(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(u,c,g)=>{o=c.batchId,g.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pc(e).W("userMutationsIndex",n).next(o=>o.map(u=>Kc(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=Cr(this.userId,n.path),u=IDBKeyRange.lowerBound(o),c=[];return Od(e).Y({range:u},(g,M,F)=>{const[j,Q,ae]=g,Ie=Pr(Q);if(j===this.userId&&n.path.isEqual(Ie))return pc(e).get(ae).next(je=>{if(!je)throw vt();Jt(je.userId===this.userId),c.push(Kc(this.serializer,je))});F.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Mr(sn);const u=[];return n.forEach(c=>{const g=Cr(this.userId,c.path),M=IDBKeyRange.lowerBound(g),F=Od(e).Y({range:M},(j,Q,ae)=>{const[Ie,je,yt]=j,Lt=Pr(je);Ie===this.userId&&c.path.isEqual(Lt)?o=o.add(yt):ae.done()});u.push(F)}),xe.waitFor(u).next(()=>this.Fn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,c=Cr(this.userId,o),g=IDBKeyRange.lowerBound(c);let M=new Mr(sn);return Od(e).Y({range:g},(F,j,Q)=>{const[ae,Ie,je]=F,yt=Pr(Ie);ae===this.userId&&o.isPrefixOf(yt)?yt.length===u&&(M=M.add(je)):Q.done()}).next(()=>this.Fn(e,M))}Fn(e,n){const o=[],u=[];return n.forEach(c=>{u.push(pc(e).get(c).next(g=>{if(null===g)throw vt();Jt(g.userId===this.userId),o.push(Kc(this.serializer,g))}))}),xe.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return J_(e.ae,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),xe.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return xe.resolve();const o=IDBKeyRange.lowerBound(function(g){return[g]}(this.userId)),u=[];return Od(e).Y({range:o},(c,g,M)=>{if(c[0]===this.userId){const F=Pr(c[1]);u.push(F)}else M.done()}).next(()=>{Jt(0===u.length)})})}containsKey(e,n){return Yc(e,this.userId,n)}xn(e){return X_(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Yc(i,e,n){const o=Cr(e,n.path),u=o[1],c=IDBKeyRange.lowerBound(o);let g=!1;return Od(i).Y({range:c,J:!0},(M,F,j)=>{const[Q,ae,Ie]=M;Q===e&&ae===u&&(g=!0),j.done()}).next(()=>g)}function pc(i){return js(i,"mutations")}function Od(i){return js(i,"documentMutations")}function X_(i){return js(i,"mutationQueues")}class dh{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new dh(0)}static Ln(){return new dh(-1)}}class vp{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const o=new dh(n.highestTargetId);return n.highestTargetId=o.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>un.fromTimestamp(new Ir(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Bn(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.kn(e,u)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(o=>(o.targetCount+=1,this.Qn(n,o),this.kn(e,o))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>hh(e).delete(n.targetId)).next(()=>this.Bn(e)).next(o=>(Jt(o.targetCount>0),o.targetCount-=1,this.kn(e,o)))}removeTargets(e,n,o){let u=0;const c=[];return hh(e).Y((g,M)=>{const F=Rd(M);F.sequenceNumber<=n&&null===o.get(F.targetId)&&(u++,c.push(this.removeTargetData(e,F)))}).next(()=>xe.waitFor(c)).next(()=>u)}forEachTarget(e,n){return hh(e).Y((o,u)=>{const c=Rd(u);n(c)})}Bn(e){return Qg(e).get("targetGlobalKey").next(n=>(Jt(null!==n),n))}kn(e,n){return Qg(e).put("targetGlobalKey",n)}qn(e,n){return hh(e).put(z_(this.serializer,n))}Qn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=Ka(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let c=null;return hh(e).Y({range:u,index:"queryTargetsIndex"},(g,M,F)=>{const j=Rd(M);Nl(n,j.target)&&(c=j,F.done())}).next(()=>c)}addMatchingKeys(e,n,o){const u=[],c=gc(e);return n.forEach(g=>{const M=pn(g.path);u.push(c.put({targetId:o,path:M})),u.push(this.referenceDelegate.addReference(e,o,g))}),xe.waitFor(u)}removeMatchingKeys(e,n,o){const u=gc(e);return xe.forEach(n,c=>{const g=pn(c.path);return xe.waitFor([u.delete([o,g]),this.referenceDelegate.removeReference(e,o,c)])})}removeMatchingKeysForTargetId(e,n){const o=gc(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=gc(e);let c=pt();return u.Y({range:o,J:!0},(g,M,F)=>{const j=Pr(g[1]),Q=new Te(j);c=c.add(Q)}).next(()=>c)}containsKey(e,n){const o=pn(n.path),u=IDBKeyRange.bound([o],[Qu(o)],!1,!0);let c=0;return gc(e).Y({index:"documentTargetsIndex",J:!0,range:u},([g,M],F,j)=>{0!==g&&(c++,j.done())}).next(()=>c>0)}_t(e,n){return hh(e).get(n).next(o=>o?Rd(o):null)}}function hh(i){return js(i,"targets")}function Qg(i){return js(i,"targetGlobal")}function gc(i){return js(i,"targetDocuments")}function Yg([i,e],[n,o]){const u=sn(i,n);return 0===u?sn(e,o):u}class Jg{constructor(e){this.Kn=e,this.buffer=new Mr(Yg),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();Yg(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Xg{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var n=this;Ye("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ce.Z)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){I(o)?Ye("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Bs(o)}yield n.zn(3e5)}))}}class Ep{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return xe.resolve(Le._e);const o=new Jg(n);return this.jn.forEachTarget(e,u=>o.Wn(u.sequenceNumber)).next(()=>this.jn.Jn(e,u=>o.Wn(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.jn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Ye("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(yp)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yp):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let o,u,c,g,M,F,j;const Q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ae=>(ae>this.params.maximumSequenceNumbersToCollect?(Ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ae}`),u=this.params.maximumSequenceNumbersToCollect):u=ae,g=Date.now(),this.nthSequenceNumber(e,u))).next(ae=>(o=ae,M=Date.now(),this.removeTargets(e,o,n))).next(ae=>(c=ae,F=Date.now(),this.removeOrphanedDocuments(e,o))).next(ae=>(j=Date.now(),Rs()<=Ge.in.DEBUG&&Ye("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-Q}ms\n\tDetermined least recently used ${u} in `+(M-g)+`ms\n\tRemoved ${c} targets in `+(F-M)+`ms\n\tRemoved ${ae} documents in `+(j-F)+`ms\nTotal Duration: ${j-Q}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:c,documentsRemoved:ae})))}}class ey{constructor(e,n){this.db=e,this.garbageCollector=function fh(i,e){return new Ep(i,e)}(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}Zn(e){let n=0;return this.Jn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(o,u)=>n(u))}addReference(e,n,o){return ph(e,o)}removeReference(e,n,o){return ph(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return ph(e,n)}er(e,n){return function(u,c){let g=!1;return X_(u).Z(M=>Yc(u,M,c).next(F=>(F&&(g=!0),xe.resolve(!F)))).next(()=>g)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let c=0;return this.Xn(e,(g,M)=>{if(M<=n){const F=this.er(e,g).next(j=>{if(!j)return c++,o.getEntry(e,g).next(()=>(o.removeEntry(g,un.min()),gc(e).delete([0,pn(g.path)])))});u.push(F)}}).next(()=>xe.waitFor(u)).next(()=>o.apply(e)).next(()=>c)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return ph(e,n)}Xn(e,n){const o=gc(e);let u,c=Le._e;return o.Y({index:"documentTargetsIndex"},([g,M],{path:F,sequenceNumber:j})=>{0===g?(c!==Le._e&&n(new Te(Pr(u)),c),c=j,u=F):c=Le._e}).next(()=>{c!==Le._e&&n(new Te(Pr(u)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ph(i,e){return gc(i).put((u=i.currentSequenceNumber,{targetId:0,path:pn(e.path),sequenceNumber:u}));var u}class uf{constructor(){this.changes=new f(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?xe.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ty{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return Jc(e).put(o)}removeEntry(e,n,o){return Jc(e).delete(function(c,g){const M=c.path.toArray();return[M.slice(0,M.length-2),M[M.length-2],pp(g),M[M.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.tr(e,o)))}getEntry(e,n){let o=pi.newInvalidDocument(n);return Jc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(lf(n))},(u,c)=>{o=this.nr(n,c)}).next(()=>o)}rr(e,n){let o={size:0,document:pi.newInvalidDocument(n)};return Jc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(lf(n))},(u,c)=>{o={document:this.nr(n,c),size:ch(c)}}).next(()=>o)}getEntries(e,n){let o=D();return this.ir(e,n,(u,c)=>{const g=this.nr(u,c);o=o.insert(u,g)}).next(()=>o)}sr(e,n){let o=D(),u=new Yr(Te.comparator);return this.ir(e,n,(c,g)=>{const M=this.nr(c,g);o=o.insert(c,M),u=u.insert(c,ch(g))}).next(()=>({documents:o,_r:u}))}ir(e,n,o){if(n.isEmpty())return xe.resolve();let u=new Mr(iy);n.forEach(F=>u=u.add(F));const c=IDBKeyRange.bound(lf(u.first()),lf(u.last())),g=u.getIterator();let M=g.getNext();return Jc(e).Y({index:"documentKeyIndex",range:c},(F,j,Q)=>{const ae=Te.fromSegments([...j.prefixPath,j.collectionGroup,j.documentId]);for(;M&&iy(M,ae)<0;)o(M,null),M=g.getNext();M&&M.isEqual(ae)&&(o(M,j),M=g.hasNext()?g.getNext():null),M?Q.U(lf(M)):Q.done()}).next(()=>{for(;M;)o(M,null),M=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,n,o,u,c){const g=n.path,M=[g.popLast().toArray(),g.lastSegment(),pp(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],F=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jc(e).W(IDBKeyRange.bound(M,F,!0)).next(j=>{c?.incrementDocumentReadCount(j.length);let Q=D();for(const ae of j){const Ie=this.nr(Te.fromSegments(ae.prefixPath.concat(ae.collectionGroup,ae.documentId)),ae);Ie.isFoundDocument()&&(Ya(n,Ie)||u.has(Ie.key))&&(Q=Q.insert(Ie.key,Ie))}return Q})}getAllFromCollectionGroup(e,n,o,u){let c=D();const g=ry(n,o),M=ry(n,fs.max());return Jc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,M,!0)},(F,j,Q)=>{const ae=this.nr(Te.fromSegments(j.prefixPath.concat(j.collectionGroup,j.documentId)),j);c=c.insert(ae.key,ae),c.size===u&&Q.done()}).next(()=>c)}newChangeBuffer(e){return new wp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return ny(e).get("remoteDocumentGlobalKey").next(n=>(Jt(!!n),n))}tr(e,n){return ny(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const o=function fp(i,e){let n;if(e.document)n=sh(i.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Te.fromSegments(e.noDocument.path),u=bd(e.noDocument.readTime);n=pi.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return vt();{const o=Te.fromSegments(e.unknownDocument.path),u=bd(e.unknownDocument.version);n=pi.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(u){const c=new Ir(u[0],u[1]);return un.fromTimestamp(c)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual(un.min()))return o}return pi.newInvalidDocument(e)}}function Ip(i){return new ty(i)}class wp extends uf{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new f(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new Mr((c,g)=>sn(c.canonicalString(),g.canonicalString()));return this.changes.forEach((c,g)=>{const M=this.ur.get(c);if(n.push(this.ar.removeEntry(e,c,M.readTime)),g.isValidDocument()){const F=Jh(this.ar.serializer,g);u=u.add(c.path.popLast());const j=ch(F);o+=j-M.size,n.push(this.ar.addEntry(e,c,F))}else if(o-=M.size,this.trackRemovals){const F=Jh(this.ar.serializer,g.convertToNoDocument(un.min()));n.push(this.ar.addEntry(e,c,F))}}),u.forEach(c=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,c))}),n.push(this.ar.updateMetadata(e,o)),xe.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(o=>(this.ur.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:o,_r:u})=>(u.forEach((c,g)=>{this.ur.set(c,{size:g,readTime:o.get(c).readTime})}),o))}}function ny(i){return js(i,"remoteDocumentGlobal")}function Jc(i){return js(i,"remoteDocumentsV14")}function lf(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ry(i,e){const n=e.documentKey.path.toArray();return[i,pp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function iy(i,e){const n=i.path.toArray(),o=e.path.toArray();let u=0;for(let c=0;c<n.length-2&&c<o.length-2;++c)if(u=sn(n[c],o[c]),u)return u;return u=sn(n.length,o.length),u||(u=sn(n[n.length-2],o[o.length-2]),u||sn(n[n.length-1],o[o.length-1]))}class sy{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class em{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==o&&Hr(o.mutation,u,ti.empty(),Ir.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,pt()).next(()=>o))}getLocalViewOfDocuments(e,n,o=pt()){const u=oe();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(c=>{let g=G();return c.forEach((M,F)=>{g=g.insert(M,F.overlayedDocument)}),g}))}getOverlayedDocuments(e,n){const o=oe();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,pt()))}populateOverlays(e,n,o){const u=[];return o.forEach(c=>{n.has(c)||u.push(c)}),this.documentOverlayCache.getOverlays(e,u).next(c=>{c.forEach((g,M)=>{n.set(g,M)})})}computeViews(e,n,o,u){let c=D();const g=Ae(),M=Ae();return n.forEach((F,j)=>{const Q=o.get(j.key);u.has(j.key)&&(void 0===Q||Q.mutation instanceof pa)?c=c.insert(j.key,j):void 0!==Q?(g.set(j.key,Q.mutation.getFieldMask()),Hr(Q.mutation,j,Q.mutation.getFieldMask(),Ir.now())):g.set(j.key,ti.empty())}),this.recalculateAndSaveOverlays(e,c).next(F=>(F.forEach((j,Q)=>g.set(j,Q)),n.forEach((j,Q)=>{var ae;return M.set(j,new sy(Q,null!==(ae=g.get(j))&&void 0!==ae?ae:null))}),M))}recalculateAndSaveOverlays(e,n){const o=Ae();let u=new Yr((g,M)=>g-M),c=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(g=>{for(const M of g)M.keys().forEach(F=>{const j=n.get(F);if(null===j)return;let Q=o.get(F)||ti.empty();Q=M.applyToLocalView(j,Q),o.set(F,Q);const ae=(u.get(M.batchId)||pt()).add(F);u=u.insert(M.batchId,ae)})}).next(()=>{const g=[],M=u.getReverseIterator();for(;M.hasNext();){const F=M.getNext(),j=F.key,Q=F.value,ae=_e();Q.forEach(Ie=>{if(!c.has(Ie)){const je=Zi(n.get(Ie),o.get(Ie));null!==je&&ae.set(Ie,je),c=c.add(Ie)}}),g.push(this.documentOverlayCache.saveOverlays(e,j,ae))}return xe.waitFor(g)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,u){return Te.isDocumentKey((g=n).path)&&null===g.collectionGroup&&0===g.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):Ed(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u);var g}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(c=>{const g=u-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-c.size):xe.resolve(oe());let M=-1,F=c;return g.next(j=>xe.forEach(j,(Q,ae)=>(M<ae.largestBatchId&&(M=ae.largestBatchId),c.get(Q)?xe.resolve():this.remoteDocumentCache.getEntry(e,Q).next(Ie=>{F=F.insert(Q,Ie)}))).next(()=>this.populateOverlays(e,j,c)).next(()=>this.computeViews(e,F,j,pt())).next(Q=>({batchId:M,changes:te(Q)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next(o=>{let u=G();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const c=n.collectionGroup;let g=G();return this.indexManager.getCollectionParents(e,c).next(M=>xe.forEach(M,F=>{const j=(ae=n,Ie=F.child(c),new Oa(Ie,null,ae.explicitOrderBy.slice(),ae.filters.slice(),ae.limit,ae.limitType,ae.startAt,ae.endAt));var ae,Ie;return this.getDocumentsMatchingCollectionQuery(e,j,o,u).next(Q=>{Q.forEach((ae,Ie)=>{g=g.insert(ae,Ie)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,n,o,u){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(g=>(c=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,c,u))).next(g=>{c.forEach((F,j)=>{const Q=j.getKey();null===g.get(Q)&&(g=g.insert(Q,pi.newInvalidDocument(Q)))});let M=G();return g.forEach((F,j)=>{const Q=c.get(F);void 0!==Q&&Hr(Q.mutation,j,ti.empty(),Ir.now()),Ya(n,j)&&(M=M.insert(F,j))}),M})}}class Tp{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return xe.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(u=n).id,version:u.version,createTime:$r(u.createTime)}),xe.resolve();var u}getNamedQuery(e,n){return xe.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(u=n).name,query:Hg(u.bundledQuery),readTime:$r(u.readTime)}),xe.resolve();var u}}class tm{constructor(){this.overlays=new Yr(Te.comparator),this.hr=new Map}getOverlay(e,n){return xe.resolve(this.overlays.get(n))}getOverlays(e,n){const o=oe();return xe.forEach(n,u=>this.getOverlay(e,u).next(c=>{null!==c&&o.set(u,c)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,c)=>{this.ht(e,n,c)}),xe.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.hr.get(o);return void 0!==u&&(u.forEach(c=>this.overlays=this.overlays.remove(c)),this.hr.delete(o)),xe.resolve()}getOverlaysForCollection(e,n,o){const u=oe(),c=n.length+1,g=new Te(n.child("")),M=this.overlays.getIteratorFrom(g);for(;M.hasNext();){const F=M.getNext().value,j=F.getKey();if(!n.isPrefixOf(j.path))break;j.path.length===c&&F.largestBatchId>o&&u.set(F.getKey(),F)}return xe.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let c=new Yr((j,Q)=>j-Q);const g=this.overlays.getIterator();for(;g.hasNext();){const j=g.getNext().value;if(j.getKey().getCollectionGroup()===n&&j.largestBatchId>o){let Q=c.get(j.largestBatchId);null===Q&&(Q=oe(),c=c.insert(j.largestBatchId,Q)),Q.set(j.getKey(),j)}}const M=oe(),F=c.getIterator();for(;F.hasNext()&&(F.getNext().value.forEach((j,Q)=>M.set(j,Q)),!(M.size()>=u)););return xe.resolve(M)}ht(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const g=this.hr.get(u.largestBatchId).delete(o.key);this.hr.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(o.key,new ip(n,o));let c=this.hr.get(n);void 0===c&&(c=pt(),this.hr.set(n,c)),this.hr.set(n,c.add(o.key))}}class Xc{constructor(){this.Pr=new Mr(Oo.Ir),this.Tr=new Mr(Oo.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const o=new Oo(e,n);this.Pr=this.Pr.add(o),this.Tr=this.Tr.add(o)}dr(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.Ar(new Oo(e,n))}Rr(e,n){e.forEach(o=>this.removeReference(o,n))}Vr(e){const n=new Te(new or([])),o=new Oo(n,e),u=new Oo(n,e+1),c=[];return this.Tr.forEachInRange([o,u],g=>{this.Ar(g),c.push(g.key)}),c}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new Te(new or([])),o=new Oo(n,e),u=new Oo(n,e+1);let c=pt();return this.Tr.forEachInRange([o,u],g=>{c=c.add(g.key)}),c}containsKey(e){const n=new Oo(e,0),o=this.Pr.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class Oo{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Te.comparator(e.key,n.key)||sn(e.pr,n.pr)}static Er(e,n){return sn(e.pr,n.pr)||Te.comparator(e.key,n.key)}}class yE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Mr(Oo.Ir)}checkEmpty(e){return xe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const c=this.yr;this.yr++;const g=new th(c,n,o,u);this.mutationQueue.push(g);for(const M of u)this.wr=this.wr.add(new Oo(M.key,c)),this.indexManager.addToCollectionParentIndex(e,M.key.path.popLast());return xe.resolve(g)}lookupMutationBatch(e,n){return xe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.br(n+1),c=u<0?0:u;return xe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Oo(n,0),u=new Oo(n,Number.POSITIVE_INFINITY),c=[];return this.wr.forEachInRange([o,u],g=>{const M=this.Sr(g.pr);c.push(M)}),xe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Mr(sn);return n.forEach(u=>{const c=new Oo(u,0),g=new Oo(u,Number.POSITIVE_INFINITY);this.wr.forEachInRange([c,g],M=>{o=o.add(M.pr)})}),xe.resolve(this.Dr(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let c=o;Te.isDocumentKey(c)||(c=c.child(""));const g=new Oo(new Te(c),0);let M=new Mr(sn);return this.wr.forEachWhile(F=>{const j=F.key.path;return!!o.isPrefixOf(j)&&(j.length===u&&(M=M.add(F.pr)),!0)},g),xe.resolve(this.Dr(M))}Dr(e){const n=[];return e.forEach(o=>{const u=this.Sr(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){Jt(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let o=this.wr;return xe.forEach(n.mutations,u=>{const c=new Oo(u.key,n.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.wr=o})}Mn(e){}containsKey(e,n){const o=new Oo(n,0),u=this.wr.firstAfterOrEqual(o);return xe.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return xe.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Ow{constructor(e){this.vr=e,this.docs=new Yr(Te.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),c=u?u.size:0,g=this.vr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:g}),this.size+=g-c,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return xe.resolve(o?o.document.mutableCopy():pi.newInvalidDocument(n))}getEntries(e,n){let o=D();return n.forEach(u=>{const c=this.docs.get(u);o=o.insert(u,c?c.document.mutableCopy():pi.newInvalidDocument(u))}),xe.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let c=D();const g=n.path,M=new Te(g.child("")),F=this.docs.getIteratorFrom(M);for(;F.hasNext();){const{key:j,value:{document:Q}}=F.getNext();if(!g.isPrefixOf(j.path))break;j.path.length>g.length+1||Cl(Tl(Q),o)<=0||(u.has(Q.key)||Ya(n,Q))&&(c=c.insert(Q.key,Q.mutableCopy()))}return xe.resolve(c)}getAllFromCollectionGroup(e,n,o,u){vt()}Fr(e,n){return xe.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new vE(this)}getSize(e){return xe.resolve(this.size)}}class vE extends uf{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this.ar.addEntry(e,u)):this.ar.removeEntry(o)}),xe.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class Cp{constructor(e){this.persistence=e,this.Mr=new f(n=>Ka(n),Nl),this.lastRemoteSnapshotVersion=un.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Xc,this.targetCount=0,this.Lr=dh.Nn()}forEachTarget(e,n){return this.Mr.forEach((o,u)=>n(u)),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Or&&(this.Or=n),xe.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new dh(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,xe.resolve()}updateTargetData(e,n){return this.qn(n),xe.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,n,o){let u=0;const c=[];return this.Mr.forEach((g,M)=>{M.sequenceNumber<=n&&null===o.get(M.targetId)&&(this.Mr.delete(g),c.push(this.removeMatchingKeysForTargetId(e,M.targetId)),u++)}),xe.waitFor(c).next(()=>u)}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,n){const o=this.Mr.get(n)||null;return xe.resolve(o)}addMatchingKeys(e,n,o){return this.Nr.dr(n,o),xe.resolve()}removeMatchingKeys(e,n,o){this.Nr.Rr(n,o);const u=this.persistence.referenceDelegate,c=[];return u&&n.forEach(g=>{c.push(u.markPotentiallyOrphaned(e,g))}),xe.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),xe.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Nr.gr(n);return xe.resolve(o)}containsKey(e,n){return xe.resolve(this.Nr.containsKey(n))}}class cf{constructor(e,n){this.Br={},this.overlays={},this.kr=new Le(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Cp(this),this.indexManager=new mE,this.remoteDocumentCache=new Ow(o=>this.referenceDelegate.Kr(o)),this.serializer=new Yh(n),this.$r=new Tp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tm,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Br[e.toKey()];return o||(o=new yE(n,this.referenceDelegate),this.Br[e.toKey()]=o),o}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,o){Ye("MemoryPersistence","Starting transaction:",e);const u=new oy(this.kr.next());return this.referenceDelegate.Ur(),o(u).next(c=>this.referenceDelegate.Wr(u).next(()=>c)).toPromise().then(c=>(u.raiseOnCommittedEvent(),c))}Gr(e,n){return xe.or(Object.values(this.Br).map(o=>()=>o.containsKey(e,n)))}}class oy extends ps{constructor(e){super(),this.currentSequenceNumber=e}}class df{constructor(e){this.persistence=e,this.zr=new Xc,this.jr=null}static Hr(e){return new df(e)}get Jr(){if(this.jr)return this.jr;throw vt()}addReference(e,n,o){return this.zr.addReference(o,n),this.Jr.delete(o.toString()),xe.resolve()}removeReference(e,n,o){return this.zr.removeReference(o,n),this.Jr.add(o.toString()),xe.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),xe.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(u=>this.Jr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(c=>this.Jr.add(c.toString()))}).next(()=>o.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.Jr,o=>{const u=Te.fromPath(o);return this.Yr(e,u).next(c=>{c||n.removeEntry(u,un.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(o=>{o?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return xe.or([()=>xe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class ay{constructor(e){this.serializer=e}N(e,n,o,u){const c=new Zo("createOrUpgrade",n);var F;o<1&&u>=1&&(e.createObjectStore("owner"),(F=e).createObjectStore("mutationQueues",{keyPath:"userId"}),F.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ms,{unique:!0}),F.createObjectStore("documentMutations"),uy(e),function(F){F.createObjectStore("remoteDocuments")}(e));let g=xe.resolve();return o<3&&u>=3&&(0!==o&&(function(F){F.deleteObjectStore("targetDocuments"),F.deleteObjectStore("targets"),F.deleteObjectStore("targetGlobal")}(e),uy(e)),g=g.next(()=>function(F){const j=F.store("targetGlobal"),Q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:un.min().toTimestamp(),targetCount:0};return j.put("targetGlobalKey",Q)}(c))),o<4&&u>=4&&(0!==o&&(g=g.next(()=>function(F,j){return j.store("mutations").W().next(Q=>{F.deleteObjectStore("mutations"),F.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ms,{unique:!0});const ae=j.store("mutations"),Ie=Q.map(je=>ae.put(je));return xe.waitFor(Ie)})}(e,c))),g=g.next(()=>{!function(F){F.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(g=g.next(()=>this.Xr(c))),o<6&&u>=6&&(g=g.next(()=>(function(F){F.createObjectStore("remoteDocumentGlobal")}(e),this.ei(c)))),o<7&&u>=7&&(g=g.next(()=>this.ti(c))),o<8&&u>=8&&(g=g.next(()=>this.ni(e,c))),o<9&&u>=9&&(g=g.next(()=>{!function(F){F.objectStoreNames.contains("remoteDocumentChanges")&&F.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(g=g.next(()=>this.ri(c))),o<11&&u>=11&&(g=g.next(()=>{(function(F){F.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(F){F.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(g=g.next(()=>{!function(F){const j=F.createObjectStore("documentOverlays",{keyPath:Oc});j.createIndex("collectionPathOverlayIndex",gd,{unique:!1}),j.createIndex("collectionGroupOverlayIndex",Gh,{unique:!1})}(e)})),o<13&&u>=13&&(g=g.next(()=>function(F){const j=F.createObjectStore("remoteDocumentsV14",{keyPath:Rc});j.createIndex("documentKeyIndex",Pc),j.createIndex("collectionGroupIndex",Mc)}(e)).next(()=>this.ii(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(g=g.next(()=>this.si(e,c))),o<15&&u>=15&&(g=g.next(()=>function(F){F.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),F.createObjectStore("indexState",{keyPath:Al}).createIndex("sequenceNumberIndex",nc,{unique:!1}),F.createObjectStore("indexEntries",{keyPath:Nc}).createIndex("documentKeyIndex",rc,{unique:!1})}(e))),o<16&&u>=16&&(g=g.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),g}ei(e){let n=0;return e.store("remoteDocuments").Y((o,u)=>{n+=ch(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Xr(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(u=>xe.forEach(u,c=>{const g=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",g).next(M=>xe.forEach(M,F=>{Jt(F.userId===c.userId);const j=Kc(this.serializer,F);return J_(e,c.userId,j).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const c=[];return o.Y((g,M)=>{const F=new or(g),j=[0,pn(F)];c.push(n.get(j).next(Q=>Q?xe.resolve():n.put({targetId:0,path:pn(F),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>xe.waitFor(c))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:Xu});const o=n.store("collectionParents"),u=new Zg,c=g=>{if(u.add(g)){const M=g.lastSegment(),F=g.popLast();return o.put({collectionId:M,parent:pn(F)})}};return n.store("remoteDocuments").Y({J:!0},(g,M)=>{const F=new or(g);return c(F.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([g,M,F],j)=>{const Q=Pr(M);return c(Q.popLast())}))}ri(e){const n=e.store("targets");return n.Y((o,u)=>{const c=Rd(u),g=z_(this.serializer,c);return n.put(g)})}ii(e,n){const o=n.store("remoteDocuments"),u=[];return o.Y((c,g)=>{const M=n.store("remoteDocumentsV14"),F=(ae=g,ae.document?new Te(or.fromString(ae.document.name).popFirst(5)):ae.noDocument?Te.fromSegments(ae.noDocument.path):ae.unknownDocument?Te.fromSegments(ae.unknownDocument.path):vt()).path.toArray(),j={prefixPath:F.slice(0,F.length-2),collectionGroup:F[F.length-2],documentId:F[F.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};var ae;u.push(M.put(j))}).next(()=>xe.waitFor(u))}si(e,n){const o=n.store("mutations"),u=Ip(this.serializer),c=new cf(df.Hr,this.serializer.ct);return o.W().next(g=>{const M=new Map;return g.forEach(F=>{var j;let Q=null!==(j=M.get(F.userId))&&void 0!==j?j:pt();Kc(this.serializer,F).keys().forEach(ae=>Q=Q.add(ae)),M.set(F.userId,Q)}),xe.forEach(M,(F,j)=>{const Q=new ds(j),ae=Xh.lt(this.serializer,Q),Ie=c.getIndexManager(Q),je=af.lt(Q,this.serializer,Ie,c.referenceDelegate);return new em(u,je,ae,Ie).recalculateAndSaveOverlaysForDocumentKeys(new nl(n,Le._e),F).next()})})}}function uy(i){i.createObjectStore("targetDocuments",{keyPath:Dl}).createIndex("documentTargetsIndex",Qo,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Qd,{unique:!0}),i.createObjectStore("targetGlobal")}const nm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class rm{constructor(e,n,o,u,c,g,M,F,j,Q,ae=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.oi=c,this.window=g,this.document=M,this._i=j,this.ai=Q,this.ui=ae,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=Ie=>Promise.resolve(),!rm.D())throw new it(He.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ey(this,u),this.Ti=n+"main",this.serializer=new Yh(F),this.Ei=new gs(this.Ti,this.ui,new ay(this.serializer)),this.Qr=new vp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ip(this.serializer),this.$r=new pE,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===Q&&li("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new it(He.FAILED_PRECONDITION,nm);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Le(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var n=this;return this.Ii=function(){var o=(0,ce.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(function(){var n=(0,ce.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,ce.Z)(function*(){n.started&&(yield n.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Dp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(I(e))return Ye("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ye("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return ff(e).get("owner").next(n=>xe.resolve(this.Si(n)))}bi(e){return Dp(e).delete(this.clientId)}Di(){var e=this;return(0,ce.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=js(o,"clientMetadata");return u.W().next(c=>{const g=e.vi(c,18e5),M=c.filter(F=>-1===g.indexOf(F));return xe.forEach(M,F=>u.delete(F.clientId)).next(()=>M)})}).catch(()=>[]);if(e.di)for(const o of n)e.di.removeItem(e.Fi(o.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?xe.resolve(!0):ff(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new it(He.FAILED_PRECONDITION,nm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Dp(e).W().next(o=>void 0===this.vi(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Ye("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,ce.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new nl(n,Le._e);return e.yi(o).next(()=>e.bi(o))}),e.Ei.close(),e.Li()})()}vi(e,n){return e.filter(o=>this.Ci(o.updateTimeMs,n)&&!this.Mi(o.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Dp(e).W().next(n=>this.vi(n,18e5).map(o=>o.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return af.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _E(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Xh.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,o){Ye("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",c=16===(F=this.ui)?tl:15===F?xc:14===F?to:13===F?Yd:12===F?Nu:11===F?el:void vt();var F;let g;return this.Ei.runTransaction(e,u,c,M=>(g=new nl(M,this.kr?this.kr.next():Le._e),"readwrite-primary"===n?this.gi(g).next(F=>!!F||this.pi(g)).next(F=>{if(!F)throw li(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new it(He.FAILED_PRECONDITION,ec);return o(g)}).next(F=>this.wi(g).next(()=>F)):this.ki(g).next(()=>o(g)))).then(M=>(g.raiseOnCommittedEvent(),M))}ki(e){return ff(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new it(He.FAILED_PRECONDITION,nm)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ff(e).put("owner",n)}static D(){return gs.D()}yi(e){const n=ff(e);return n.get("owner").next(o=>this.Si(o)?(Ye("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):xe.resolve())}Ci(e,n){const o=Date.now();return!(e<o-n||e>o&&(li(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,Ze.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const o=null!==(null===(n=this.di)||void 0===n?void 0:n.getItem(this.Fi(e)));return Ye("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return li("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){li("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ff(i){return js(i,"owner")}function Dp(i){return js(i,"clientMetadata")}function jl(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class xd{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.qi=o,this.Qi=u}static Ki(e,n){let o=pt(),u=pt();for(const c of n.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:u=u.add(c.doc.key)}return new xd(e,n.fromCache,o,u)}}class EE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class IE{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,Ze.G6)()?8:gs.v((0,Ze.z$)())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,o,u){const c={result:null};return this.ji(e,n).next(g=>{c.result=g}).next(()=>{if(!c.result)return this.Hi(e,n,u,o).next(g=>{c.result=g})}).next(()=>{if(c.result)return;const g=new EE;return this.Ji(e,n,g).next(M=>{if(c.result=M,this.Ui)return this.Yi(e,n,g,M.size)})}).next(()=>c.result)}Yi(e,n,o,u){return o.documentReadCount<this.Wi?(Rs()<=Ge.in.DEBUG&&Ye("QueryEngine","SDK will not create cache indexes for query:",Ll(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),xe.resolve()):(Rs()<=Ge.in.DEBUG&&Ye("QueryEngine","Query:",Ll(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Gi*u?(Rs()<=Ge.in.DEBUG&&Ye("QueryEngine","The SDK decides to create cache indexes for query:",Ll(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vi(n))):xe.resolve())}ji(e,n){if(Lu(n))return xe.resolve(null);let o=Vi(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=Qa(n,null,"F"),o=Vi(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(c=>{const g=pt(...c);return this.zi.getDocuments(e,g).next(M=>this.indexManager.getMinOffset(e,o).next(F=>{const j=this.Zi(n,M);return this.Xi(n,j,g,F.readTime)?this.ji(e,Qa(n,null,"F")):this.es(e,j,n,F)}))})))}Hi(e,n,o,u){return Lu(n)||u.isEqual(un.min())?xe.resolve(null):this.zi.getDocuments(e,o).next(c=>{const g=this.Zi(n,c);return this.Xi(n,g,o,u)?xe.resolve(null):(Rs()<=Ge.in.DEBUG&&Ye("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Ll(n)),this.es(e,g,n,fu(u,-1)).next(M=>M))})}Zi(e,n){let o=new Mr(eh(e));return n.forEach((u,c)=>{Ya(e,c)&&(o=o.add(c))}),o}Xi(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const c="F"===e.limitType?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(u)>0)}Ji(e,n,o){return Rs()<=Ge.in.DEBUG&&Ye("QueryEngine","Using full collection scan to execute query:",Ll(n)),this.zi.getDocumentsMatchingQuery(e,n,fs.min(),o)}es(e,n,o,u){return this.zi.getDocumentsMatchingQuery(e,o,u).next(c=>(n.forEach(g=>{c=c.insert(g.key,g)}),c))}}class xw{constructor(e,n,o,u){this.persistence=e,this.ts=n,this.serializer=u,this.ns=new Yr(sn),this.rs=new f(c=>Ka(c),Nl),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(o)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new em(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function wE(i,e,n,o){return new xw(i,e,n,o)}function TE(i,e){return ly.apply(this,arguments)}function ly(){return ly=(0,ce.Z)(function*(i,e){const n=Tt(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(c=>(u=c,n._s(e),n.mutationQueue.getAllMutationBatches(o))).next(c=>{const g=[],M=[];let F=pt();for(const j of u){g.push(j.batchId);for(const Q of j.mutations)F=F.add(Q.key)}for(const j of c){M.push(j.batchId);for(const Q of j.mutations)F=F.add(Q.key)}return n.localDocuments.getDocuments(o,F).next(j=>({us:j,removedBatchIds:g,addedBatchIds:M}))})})}),ly.apply(this,arguments)}function dy(i){const e=Tt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function hy(i,e,n){let o=pt(),u=pt();return n.forEach(c=>o=o.add(c)),e.getEntries(i,o).next(c=>{let g=D();return n.forEach((M,F)=>{const j=c.get(M);F.isFoundDocument()!==j.isFoundDocument()&&(u=u.add(M)),F.isNoDocument()&&F.version.isEqual(un.min())?(e.removeEntry(M,F.readTime),g=g.insert(M,F)):!j.isValidDocument()||F.version.compareTo(j.version)>0||0===F.version.compareTo(j.version)&&j.hasPendingWrites?(e.addEntry(F),g=g.insert(M,F)):Ye("LocalStore","Ignoring outdated watch update for ",M,". Current version:",j.version," Watch version:",F.version)}),{cs:g,ls:u}})}function DE(i,e){const n=Tt(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function ed(i,e){const n=Tt(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.Qr.getTargetData(o,e).next(c=>c?(u=c,xe.resolve(u)):n.Qr.allocateTargetId(o).next(g=>(u=new Ul(e,g,"TargetPurposeListen",o.currentSequenceNumber),n.Qr.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.ns.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.ns=n.ns.insert(o.targetId,o),n.rs.set(e,o.targetId)),o})}function ru(i,e,n){return kd.apply(this,arguments)}function kd(){return kd=(0,ce.Z)(function*(i,e,n){const o=Tt(i),u=o.ns.get(e),c=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",c,g=>o.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!I(g))throw g;Ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}o.ns=o.ns.remove(e),o.rs.delete(u.target)}),kd.apply(this,arguments)}function pf(i,e,n){const o=Tt(i);let u=un.min(),c=pt();return o.persistence.runTransaction("Execute query","readwrite",g=>function(F,j,Q){const ae=Tt(F),Ie=ae.rs.get(Q);return void 0!==Ie?xe.resolve(ae.ns.get(Ie)):ae.Qr.getTargetData(j,Q)}(o,g,Vi(e)).next(M=>{if(M)return u=M.lastLimboFreeSnapshotVersion,o.Qr.getMatchingKeysForTargetId(g,M.targetId).next(F=>{c=F})}).next(()=>o.ts.getDocumentsMatchingQuery(g,e,n?u:un.min(),n?c:pt())).next(M=>(AE(o,Vu(e),M),{documents:M,hs:c})))}function im(i,e){const n=Tt(i),o=Tt(n.Qr),u=n.ns.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",c=>o._t(c,e).next(g=>g?g.target:null))}function sm(i,e){const n=Tt(i),o=n.ss.get(e)||un.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.os.getAllFromCollectionGroup(u,e,fu(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(AE(n,e,u),u))}function AE(i,e,n){let o=i.ss.get(e)||un.min();n.forEach((u,c)=>{c.readTime.compareTo(o)>0&&(o=c.readTime)}),i.ss.set(e,o)}function fy(){return fy=(0,ce.Z)(function*(i,e,n,o){const u=Tt(i);let c=pt(),g=D();for(const j of n){const Q=e.Ps(j.metadata.name);j.document&&(c=c.add(Q));const ae=e.Is(j);ae.setReadTime(e.Ts(j.metadata.readTime)),g=g.insert(Q,ae)}const M=u.os.newChangeBuffer({trackRemovals:!0}),F=yield ed(u,(Q=o,Vi(dl(or.fromString(`__bundle__/docs/${Q}`)))));var Q;return u.persistence.runTransaction("Apply bundle documents","readwrite",j=>hy(j,M,g).next(Q=>(M.apply(j),Q)).next(Q=>u.Qr.removeMatchingKeysForTargetId(j,F.targetId).next(()=>u.Qr.addMatchingKeys(j,c,F.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(j,Q.cs,Q.ls)).next(()=>Q.cs)))}),fy.apply(this,arguments)}function om(i,e){return gf.apply(this,arguments)}function gf(){return gf=(0,ce.Z)(function*(i,e,n=pt()){const o=yield ed(i,Vi(Hg(e.bundledQuery))),u=Tt(i);return u.persistence.runTransaction("Save named query","readwrite",c=>{const g=$r(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return u.$r.saveNamedQuery(c,e);const M=o.withResumeToken(Ki.EMPTY_BYTE_STRING,g);return u.ns=u.ns.insert(M.targetId,M),u.Qr.updateTargetData(c,M).next(()=>u.Qr.removeMatchingKeysForTargetId(c,o.targetId)).next(()=>u.Qr.addMatchingKeys(c,n,o.targetId)).next(()=>u.$r.saveNamedQuery(c,e))})}),gf.apply(this,arguments)}function SE(i,e){return`firestore_clients_${i}_${e}`}function bE(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Ap(i,e){return`firestore_targets_${i}_${e}`}class Sp{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Es(e,n,o){const u=JSON.parse(o);let c,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(c=new it(u.error.code,u.error.message))),g?new Sp(e,n,u.state,c):(li("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mf{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Es(e,n){const o=JSON.parse(n);let u,c="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(u=new it(o.error.code,o.error.message))),c?new mf(e,o.state,u):(li("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,c=xt();for(let g=0;u&&g<o.activeTargetIds.length;++g)u=bn(o.activeTargetIds[g]),c=c.add(o.activeTargetIds[g]);return u?new bp(e,c):(li("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class am{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new am(n.clientId,n.onlineState):(li("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Rp{constructor(){this.activeTargetIds=xt()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gh{constructor(e,n,o,u,c){this.window=e,this.oi=n,this.persistenceKey=o,this.Vs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Yr(sn),this.started=!1,this.ys=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ws=SE(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new Rp),this.bs=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(F){return`firestore_bundle_loaded_v2_${F}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ce.Z)(function*(){const n=yield e.syncEngine.Bi();for(const u of n){if(u===e.Vs)continue;const c=e.getItem(SE(e.persistenceKey,u));if(c){const g=bp.Es(u,c);g&&(e.ps=e.ps.insert(g.clientId,g))}}e.Ms();const o=e.storage.getItem(e.vs);if(o){const u=e.xs(o);u&&e.Os(u)}for(const u of e.ys)e.gs(u);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,o){this.Ls(e,n,o),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Ap(this.persistenceKey,e));if(o){const u=mf.Es(e,o);u&&(n=u.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ap(this.persistenceKey,e))}updateQueryState(e,n,o){this.qs(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Bs(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Ye("SharedClientState","READ",e,n),n}setItem(e,n){Ye("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Ye("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var n=this;const o=e;if(o.storageArea===this.storage){if(Ye("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ws)return void li("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,ce.Z)(function*(){if(n.started){if(null!==o.key)if(n.bs.test(o.key)){if(null==o.newValue){const u=n.$s(o.key);return n.Us(u,null)}{const u=n.Ws(o.key,o.newValue);if(u)return n.Us(u.clientId,u)}}else if(n.Ds.test(o.key)){if(null!==o.newValue){const u=n.Gs(o.key,o.newValue);if(u)return n.zs(u)}}else if(n.Cs.test(o.key)){if(null!==o.newValue){const u=n.js(o.key,o.newValue);if(u)return n.Hs(u)}}else if(o.key===n.vs){if(null!==o.newValue){const u=n.xs(o.newValue);if(u)return n.Os(u)}}else if(o.key===n.Ss){const u=function(g){let M=Le._e;if(null!=g)try{const F=JSON.parse(g);Jt("number"==typeof F),M=F}catch(F){li("SharedClientState","Failed to read sequence number from WebStorage",F)}return M}(o.newValue);u!==Le._e&&n.sequenceNumberHandler(u)}else if(o.key===n.Fs){const u=n.Js(o.newValue);yield Promise.all(u.map(c=>n.syncEngine.Ys(c)))}}else n.ys.push(o)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,o){const u=new Sp(this.currentUser,e,n,o),c=bE(this.persistenceKey,this.currentUser,e);this.setItem(c,u.ds())}Bs(e){const n=bE(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,n,o){const u=Ap(this.persistenceKey,e),c=new mf(e,n,o);this.setItem(u,c.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const o=this.$s(e);return bp.Es(o,n)}Gs(e,n){const o=this.Ds.exec(e),u=Number(o[1]);return Sp.Es(new ds(void 0!==o[2]?o[2]:null),u,n)}js(e,n){const o=this.Cs.exec(e),u=Number(o[1]);return mf.Es(u,n)}xs(e){return am.Es(e)}Js(e){return JSON.parse(e)}zs(e){var n=this;return(0,ce.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Zs(e.batchId,e.state,e.error);Ye("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const o=n?this.ps.insert(e,n):this.ps.remove(e),u=this.Ns(this.ps),c=this.Ns(o),g=[],M=[];return c.forEach(F=>{u.has(F)||g.push(F)}),u.forEach(F=>{c.has(F)||M.push(F)}),this.syncEngine.eo(g,M).then(()=>{this.ps=o})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=xt();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class py{constructor(){this.no=new Rp,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,o){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Rp,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class um{io(e){}shutdown(){}}class gy{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let mc=null;function lm(){return null===mc?mc=268435456+Math.round(2147483648*Math.random()):mc++,"0x"+mc.toString(16)}const RE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cm{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const ta="WebChannelConnection";class PE extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.fo=o+"://"+n.host,this.po=`projects/${u}/databases/${c}`,this.yo="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${c}`}get wo(){return!1}So(n,o,u,c,g){const M=lm(),F=this.bo(n,o.toUriEncodedString());Ye("RestConnection",`Sending RPC '${n}' ${M}:`,F,u);const j={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(j,c,g),this.Co(n,F,j,u).then(Q=>(Ye("RestConnection",`Received RPC '${n}' ${M}: `,Q),Q),Q=>{throw Wi("RestConnection",`RPC '${n}' ${M} failed with error: `,Q,"url: ",F,"request:",u),Q})}vo(n,o,u,c,g,M){return this.So(n,o,u,c,g)}Do(n,o,u){n["X-Goog-Api-Client"]="gl-js/ fire/"+Ru,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((c,g)=>n[g]=c),u&&u.headers.forEach((c,g)=>n[g]=c)}bo(n,o){return`${this.fo}/v1/${o}:${RE[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,o,u){const c=lm();return new Promise((g,M)=>{const F=new Vs;F.setWithCredentials(!0),F.listenOnce(Kd.COMPLETE,()=>{try{switch(F.getLastErrorCode()){case Da.NO_ERROR:const Q=F.getResponseJson();Ye(ta,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(Q)),g(Q);break;case Da.TIMEOUT:Ye(ta,`RPC '${e}' ${c} timed out`),M(new it(He.DEADLINE_EXCEEDED,"Request time out"));break;case Da.HTTP_ERROR:const ae=F.getStatus();if(Ye(ta,`RPC '${e}' ${c} failed with status:`,ae,"response text:",F.getResponseText()),ae>0){let Ie=F.getResponseJson();Array.isArray(Ie)&&(Ie=Ie[0]);const je=Ie?.error;if(je&&je.status&&je.message){const yt=function(bt){const vn=bt.toLowerCase().replace(/_/g,"-");return Object.values(He).indexOf(vn)>=0?vn:He.UNKNOWN}(je.status);M(new it(yt,je.message))}else M(new it(He.UNKNOWN,"Server responded with status "+F.getStatus()))}else M(new it(He.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{Ye(ta,`RPC '${e}' ${c} completed.`)}});const j=JSON.stringify(u);Ye(ta,`RPC '${e}' ${c} sending request:`,u),F.send(n,"POST",j,o,15)})}Fo(e,n,o){const u=lm(),c=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=cs(),M=la(),F={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},j=this.longPollingOptions.timeoutSeconds;void 0!==j&&(F.longPollingTimeout=Math.round(1e3*j)),this.useFetchStreams&&(F.useFetchStreams=!0),this.Do(F.initMessageHeaders,n,o),F.encodeInitMessageHeaders=!0;const Q=c.join("");Ye(ta,`Creating RPC '${e}' stream ${u}: ${Q}`,F);const ae=g.createWebChannel(Q,F);let Ie=!1,je=!1;const yt=new cm({lo:bt=>{je?Ye(ta,`Not sending because RPC '${e}' stream ${u} is closed:`,bt):(Ie||(Ye(ta,`Opening RPC '${e}' stream ${u} transport.`),ae.open(),Ie=!0),Ye(ta,`RPC '${e}' stream ${u} sending:`,bt),ae.send(bt))},ho:()=>ae.close()}),Lt=(bt,vn,Zn)=>{bt.listen(vn,mn=>{try{Zn(mn)}catch(Qn){setTimeout(()=>{throw Qn},0)}})};return Lt(ae,Yl.EventType.OPEN,()=>{je||Ye(ta,`RPC '${e}' stream ${u} transport opened.`)}),Lt(ae,Yl.EventType.CLOSE,()=>{je||(je=!0,Ye(ta,`RPC '${e}' stream ${u} transport closed`),yt.Vo())}),Lt(ae,Yl.EventType.ERROR,bt=>{je||(je=!0,Wi(ta,`RPC '${e}' stream ${u} transport errored:`,bt),yt.Vo(new it(He.UNAVAILABLE,"The operation could not be completed")))}),Lt(ae,Yl.EventType.MESSAGE,bt=>{var vn;if(!je){const Zn=bt.data[0];Jt(!!Zn);const Qn=Zn.error||(null===(vn=Zn[0])||void 0===vn?void 0:vn.error);if(Qn){Ye(ta,`RPC '${e}' stream ${u} received error:`,Qn);const Gr=Qn.status;let ri=function(Vv){const Tc=Wn[Vv];if(void 0!==Tc)return wd(Tc)}(Gr),zs=Qn.message;void 0===ri&&(ri=He.INTERNAL,zs="Unknown error status: "+Gr+" with message "+Qn.message),je=!0,yt.Vo(new it(ri,zs)),ae.close()}else Ye(ta,`RPC '${e}' stream ${u} received:`,Zn),yt.mo(Zn)}}),Lt(M,Sc.STAT_EVENT,bt=>{bt.stat===Ql.PROXY?Ye(ta,`RPC '${e}' stream ${u} detected buffering proxy`):bt.stat===Ql.NOPROXY&&Ye(ta,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{yt.Ro()},0),yt}}function my(){return typeof window<"u"?window:null}function Pp(){return typeof document<"u"?document:null}function _f(i){return new St(i,!0)}class Mp{constructor(e,n,o=1e3,u=1.5,c=6e4){this.oi=e,this.timerId=n,this.Mo=o,this.xo=u,this.Oo=c,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),o=Math.max(0,Date.now()-this.Bo),u=Math.max(0,n-o);u>0&&Ye("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,u,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class ME{constructor(e,n,o,u,c,g,M,F){this.oi=e,this.$o=o,this.Uo=u,this.connection=c,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=M,this.listener=F,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Mp(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,ce.Z)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,ce.Z)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var o=this;return(0,ce.Z)(function*(){o.n_(),o.r_(),o.jo.cancel(),o.Wo++,4!==e?o.jo.reset():n&&n.code===He.RESOURCE_EXHAUSTED?(li(n.toString()),li("Using maximum backoff delay to prevent overloading the backend."),o.jo.ko()):n&&n.code===He.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.i_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Wo===n&&this.o_(o,u)},o=>{e(()=>{const u=new it(He.UNKNOWN,"Fetching auth token failed: "+o.message);return this.__(u)})})}o_(e,n){const o=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{o(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(u=>{o(()=>this.__(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Yo(){var e=this;this.state=5,this.jo.qo((0,ce.Z)(function*(){e.state=0,e.start()}))}__(e){return Ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(Ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Fw extends ME{constructor(e,n,o,u,c,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,g),this.serializer=c}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function Pw(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(j=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===j?1:"REMOVE"===j?2:"CURRENT"===j?3:"RESET"===j?4:vt(),u=e.targetChange.targetIds||[],c=function(j,Q){return j.useProto3Json?(Jt(void 0===Q||"string"==typeof Q),Ki.fromBase64String(Q||"")):(Jt(void 0===Q||Q instanceof Buffer||Q instanceof Uint8Array),Ki.fromUint8Array(Q||new Uint8Array))}(i,e.targetChange.resumeToken),g=e.targetChange.cause,M=g&&function(j){const Q=void 0===j.code?He.UNKNOWN:wd(j.code);return new it(Q,j.message||"")}(g);n=new d(o,u,c,M||null)}else if("documentChange"in e){const o=e.documentChange,u=nu(i,o.document.name),c=$r(o.document.updateTime),g=o.document.createTime?$r(o.document.createTime):un.min(),M=new ro({mapValue:{fields:o.document.fields}}),F=pi.newFoundDocument(u,c,g,M);n=new Dd(o.targetIds||[],o.removedTargetIds||[],F.key,F)}else if("documentDelete"in e){const o=e.documentDelete,u=nu(i,o.document),c=o.readTime?$r(o.readTime):un.min(),g=pi.newNoDocument(u,c);n=new Dd([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const o=e.documentRemove,u=nu(i,o.document);n=new Dd([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return vt();{const o=e.filter,{count:u=0,unchangedNames:c}=o,g=new qh(u,c);n=new y(o.targetId,g)}}var j;return n}(this.serializer,e),o=function(c){if(!("targetChange"in c))return un.min();const g=c.targetChange;return g.targetIds&&g.targetIds.length?un.min():g.readTime?$r(g.readTime):un.min()}(e);return this.listener.u_(n,o)}c_(e){const n={};n.database=qc(this.serializer),n.addTarget=function(c,g){let M;const F=g.target;if(M=Ol(F)?{documents:dE(c,F)}:{query:$_(c,F).ut},M.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){M.resumeToken=Di(c,g.resumeToken);const j=Ot(c,g.expectedCount);null!==j&&(M.expectedCount=j)}else if(g.snapshotVersion.compareTo(un.min())>0){M.readTime=Ft(c,g.snapshotVersion.toTimestamp());const j=Ot(c,g.expectedCount);null!==j&&(M.expectedCount=j)}return M}(this.serializer,e);const o=function Nw(i,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.t_(n)}l_(e){const n={};n.database=qc(this.serializer),n.removeTarget=e,this.t_(n)}}class yf extends ME{constructor(e,n,o,u,c,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,g),this.serializer=c,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Jt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=function Mw(i,e){return i&&i.length>0?(Jt(void 0!==e),i.map(n=>function(u,c){let g=$r(u.updateTime?u.updateTime:c);return g.isEqual(un.min())&&(g=$r(c)),new nn(g,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=$r(e.commitTime);return this.listener.T_(o,n)}return Jt(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=qc(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>cp(this.serializer,o))};this.t_(n)}}class _y extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.A_=!1}R_(){if(this.A_)throw new it(He.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,o,u){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,g])=>this.connection.So(e,rh(n,o),u,c,g)).catch(c=>{throw"FirebaseError"===c.name?(c.code===He.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new it(He.UNKNOWN,c.toString())})}vo(e,n,o,u,c){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,M])=>this.connection.vo(e,rh(n,o),u,g,M,c)).catch(g=>{throw"FirebaseError"===g.name?(g.code===He.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new it(He.UNKNOWN,g.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class Np{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(li(n),this.g_=!1):Ye("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class NE{constructor(e,n,o,u,c){var g=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=c,this.M_.io(M=>{o.enqueueAndForget((0,ce.Z)(function*(){var F;fl(g)&&(Ye("RemoteStore","Restarting streams for network reachability change."),yield(F=(0,ce.Z)(function*(Q){const ae=Tt(Q);ae.v_.add(4),yield hl(ae),ae.x_.set("Unknown"),ae.v_.delete(4),yield Fd(ae)}),function j(Q){return F.apply(this,arguments)})(g))}))}),this.x_=new Np(o,u)}}function Fd(i){return vf.apply(this,arguments)}function vf(){return vf=(0,ce.Z)(function*(i){if(fl(i))for(const e of i.F_)yield e(!0)}),vf.apply(this,arguments)}function hl(i){return Ef.apply(this,arguments)}function Ef(){return Ef=(0,ce.Z)(function*(i){for(const e of i.F_)yield e(!1)}),Ef.apply(this,arguments)}function mh(i,e){const n=Tt(i);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),wf(n)?If(n):$l(n).Jo()&&_h(n,e))}function Hl(i,e){const n=Tt(i),o=$l(n);n.C_.delete(e),o.Jo()&&Ld(n,e),0===n.C_.size&&(o.Jo()?o.Xo():fl(n)&&n.x_.set("Unknown"))}function _h(i,e){if(i.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(un.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$l(i).c_(e)}function Ld(i,e){i.O_.Oe(e),$l(i).l_(e)}function If(i){i.O_=new T({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.C_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),$l(i).start(),i.x_.p_()}function wf(i){return fl(i)&&!$l(i).Ho()&&i.C_.size>0}function fl(i){return 0===Tt(i).v_.size}function OE(i){i.O_=void 0}function dm(i){return Vd.apply(this,arguments)}function Vd(){return Vd=(0,ce.Z)(function*(i){i.C_.forEach((e,n)=>{_h(i,e)})}),Vd.apply(this,arguments)}function xE(i,e){return Op.apply(this,arguments)}function Op(){return Op=(0,ce.Z)(function*(i,e){OE(i),wf(i)?(i.x_.S_(e),If(i)):i.x_.set("Unknown")}),Op.apply(this,arguments)}function kE(i,e,n){return hm.apply(this,arguments)}function hm(){return hm=(0,ce.Z)(function*(i,e,n){if(i.x_.set("Online"),e instanceof d&&2===e.state&&e.cause)try{yield(o=(0,ce.Z)(function*(c,g){const M=g.cause;for(const F of g.targetIds)c.C_.has(F)&&(yield c.remoteSyncer.rejectListen(F,M),c.C_.delete(F),c.O_.removeTarget(F))}),function u(c,g){return o.apply(this,arguments)})(i,e)}catch(o){Ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield yh(i,o)}else if(e instanceof Dd?i.O_.$e(e):e instanceof y?i.O_.Je(e):i.O_.Ge(e),!n.isEqual(un.min()))try{const o=yield dy(i.localStore);n.compareTo(o)>=0&&(yield function(c,g){const M=c.O_.it(g);return M.targetChanges.forEach((F,j)=>{if(F.resumeToken.approximateByteSize()>0){const Q=c.C_.get(j);Q&&c.C_.set(j,Q.withResumeToken(F.resumeToken,g))}}),M.targetMismatches.forEach((F,j)=>{const Q=c.C_.get(F);if(!Q)return;c.C_.set(F,Q.withResumeToken(Ki.EMPTY_BYTE_STRING,Q.snapshotVersion)),Ld(c,F);const ae=new Ul(Q.target,F,j,Q.sequenceNumber);_h(c,ae)}),c.remoteSyncer.applyRemoteEvent(M)}(i,n))}catch(o){Ye("RemoteStore","Failed to raise snapshot:",o),yield yh(i,o)}var o}),hm.apply(this,arguments)}function yh(i,e,n){return xp.apply(this,arguments)}function xp(){return xp=(0,ce.Z)(function*(i,e,n){if(!I(e))throw e;i.v_.add(1),yield hl(i),i.x_.set("Offline"),n||(n=()=>dy(i.localStore)),i.asyncQueue.enqueueRetryable((0,ce.Z)(function*(){Ye("RemoteStore","Retrying IndexedDB access"),yield n(),i.v_.delete(1),yield Fd(i)}))}),xp.apply(this,arguments)}function vy(i,e){return e().catch(n=>yh(i,n,e))}function vh(i){return Ey.apply(this,arguments)}function Ey(){return Ey=(0,ce.Z)(function*(i){const e=Tt(i),n=nd(e);let o=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;FE(e);)try{const u=yield DE(e.localStore,o);if(null===u){0===e.D_.length&&n.Xo();break}o=u.batchId,kp(e,u)}catch(u){yield yh(e,u)}Fp(e)&&Iy(e)}),Ey.apply(this,arguments)}function FE(i){return fl(i)&&i.D_.length<10}function kp(i,e){i.D_.push(e);const n=nd(i);n.Jo()&&n.P_&&n.I_(e.mutations)}function Fp(i){return fl(i)&&!nd(i).Ho()&&i.D_.length>0}function Iy(i){nd(i).start()}function wy(i){return Tf.apply(this,arguments)}function Tf(){return Tf=(0,ce.Z)(function*(i){nd(i).d_()}),Tf.apply(this,arguments)}function Lp(i){return fm.apply(this,arguments)}function fm(){return fm=(0,ce.Z)(function*(i){const e=nd(i);for(const n of i.D_)e.I_(n.mutations)}),fm.apply(this,arguments)}function Ty(i,e,n){return pm.apply(this,arguments)}function pm(){return pm=(0,ce.Z)(function*(i,e,n){const o=i.D_.shift(),u=Wh.from(o,e,n);yield vy(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield vh(i)}),pm.apply(this,arguments)}function Cy(i,e){return Dy.apply(this,arguments)}function Dy(){return Dy=(0,ce.Z)(function*(i,e){var n;e&&nd(i).P_&&(yield(n=(0,ce.Z)(function*(u,c){if(wu(M=c.code)&&M!==He.ABORTED){const g=u.D_.shift();nd(u).Zo(),yield vy(u,()=>u.remoteSyncer.rejectFailedWrite(g.batchId,c)),yield vh(u)}var M}),function o(u,c){return n.apply(this,arguments)})(i,e)),Fp(i)&&Iy(i)}),Dy.apply(this,arguments)}function Ay(i,e){return Eh.apply(this,arguments)}function Eh(){return Eh=(0,ce.Z)(function*(i,e){const n=Tt(i);n.asyncQueue.verifyOperationInProgress(),Ye("RemoteStore","RemoteStore received new credentials");const o=fl(n);n.v_.add(3),yield hl(n),o&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Fd(n)}),Eh.apply(this,arguments)}function gm(i,e){return td.apply(this,arguments)}function td(){return td=(0,ce.Z)(function*(i,e){const n=Tt(i);e?(n.v_.delete(2),yield Fd(n)):e||(n.v_.add(2),yield hl(n),n.x_.set("Unknown"))}),td.apply(this,arguments)}function $l(i){return i.N_||(i.N_=function(n,o,u){const c=Tt(n);return c.R_(),new Fw(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(i.datastore,i.asyncQueue,{Po:dm.bind(null,i),To:xE.bind(null,i),u_:kE.bind(null,i)}),i.F_.push(function(){var e=(0,ce.Z)(function*(n){n?(i.N_.Zo(),wf(i)?If(i):i.x_.set("Unknown")):(yield i.N_.stop(),OE(i))});return function(n){return e.apply(this,arguments)}}())),i.N_}function nd(i){return i.L_||(i.L_=function(n,o,u){const c=Tt(n);return c.R_(),new yf(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(i.datastore,i.asyncQueue,{Po:wy.bind(null,i),To:Cy.bind(null,i),E_:Lp.bind(null,i),T_:Ty.bind(null,i)}),i.F_.push(function(){var e=(0,ce.Z)(function*(n){n?(i.L_.Zo(),yield vh(i)):(yield i.L_.stop(),i.D_.length>0&&(Ye("RemoteStore",`Stopping write stream with ${i.D_.length} pending writes`),i.D_=[]))});return function(n){return e.apply(this,arguments)}}())),i.L_}class Vp{constructor(e,n,o,u,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=c,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,c){const g=Date.now()+o,M=new Vp(e,n,g,u,c);return M.start(o),M}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new it(He.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ih(i,e){if(li("AsyncQueue",`${e}: ${i}`),I(i))return new it(He.UNAVAILABLE,`${e}: ${i}`);throw i}class wh{constructor(e){this.comparator=e?(n,o)=>e(n,o)||Te.comparator(n.key,o.key):(n,o)=>Te.comparator(n.key,o.key),this.keyedMap=G(),this.sortedSet=new Yr(this.comparator)}static emptySet(e){return new wh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=o.getNext().key;if(!u.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new wh;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class Sy{constructor(){this.B_=new Yr(Te.comparator)}track(e){const n=e.doc.key,o=this.B_.get(n);o?0!==e.type&&3===o.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==o.type?this.B_=this.B_.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.B_=this.B_.remove(n):1===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):vt():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,o)=>{e.push(o)}),e}}class rd{constructor(e,n,o,u,c,g,M,F,j){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=c,this.fromCache=g,this.syncStateChanged=M,this.excludesMetadataChanges=F,this.hasCachedResults=j}static fromInitialDocuments(e,n,o,u,c){const g=[];return n.forEach(M=>{g.push({type:0,doc:M})}),new rd(e,n,wh.emptySet(n),g,o,u,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class Vw{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class LE{constructor(){this.queries=new f(e=>Fl(e),kl),this.onlineState="Unknown",this.W_=new Set}}function mm(i,e){return _m.apply(this,arguments)}function _m(){return _m=(0,ce.Z)(function*(i,e){const n=Tt(i);let o=3;const u=e.query;let c=n.queries.get(u);c?!c.K_()&&e.U_()&&(o=2):(c=new Vw,o=e.U_()?0:1);try{switch(o){case 0:c.q_=yield n.onListen(u,!0);break;case 1:c.q_=yield n.onListen(u,!1);break;case 2:yield n.onFirstRemoteStoreListen(u)}}catch(g){const M=Ih(g,`Initialization of query '${Ll(e.query)}' failed`);return void e.onError(M)}n.queries.set(u,c),c.Q_.push(e),e.G_(n.onlineState),c.q_&&e.z_(c.q_)&&vm(n)}),_m.apply(this,arguments)}function ym(i,e){return by.apply(this,arguments)}function by(){return by=(0,ce.Z)(function*(i,e){const n=Tt(i),o=e.query;let u=3;const c=n.queries.get(o);if(c){const g=c.Q_.indexOf(e);g>=0&&(c.Q_.splice(g,1),0===c.Q_.length?u=e.U_()?0:1:!c.K_()&&e.U_()&&(u=2))}switch(u){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}),by.apply(this,arguments)}function Up(i,e){const n=Tt(i);let o=!1;for(const u of e){const g=n.queries.get(u.query);if(g){for(const M of g.Q_)M.z_(u)&&(o=!0);g.q_=u}}o&&vm(n)}function VE(i,e,n){const o=Tt(i),u=o.queries.get(e);if(u)for(const c of u.Q_)c.onError(n);o.queries.delete(e)}function vm(i){i.W_.forEach(e=>{e.next()})}var Cf,Em;(Em=Cf||(Cf={})).j_="default",Em.Cache="cache";class Im{constructor(e,n,o){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=o||{}}z_(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new rd(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){return!e.fromCache||!this.U_()||(!this.options.ta||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ea(e){e=rd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==Cf.Cache}}class UE{constructor(e,n){this.na=e,this.byteLength=n}ra(){return"metadata"in this.na}}class Ry{constructor(e){this.serializer=e}Ps(e){return nu(this.serializer,e)}Is(e){return e.metadata.exists?sh(this.serializer,e.document,!1):pi.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return $r(e)}}class BE{constructor(e,n,o){this.ia=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wm(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++n;const o=or.fromString(e.na.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}oa(e){const n=new Map,o=new Ry(this.serializer);for(const u of e)if(u.metadata.queries){const c=o.Ps(u.metadata.name);for(const g of u.metadata.queries){const M=(n.get(g)||pt()).add(c);n.set(g,M)}}return n}complete(){var e=this;return(0,ce.Z)(function*(){const n=yield function kw(i,e,n,o){return fy.apply(this,arguments)}(e.localStore,new Ry(e.serializer),e.documents,e.ia.id),o=e.oa(e.documents);for(const u of e.queries)yield om(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,_a:e.collectionGroups,aa:n}})()}}function wm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Tm{constructor(e){this.key=e}}class Cm{constructor(e){this.key=e}}class Py{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=pt(),this.mutatedKeys=pt(),this.ha=eh(e),this.Pa=new wh(this.ha)}get Ia(){return this.ua}Ta(e,n){const o=n?n.Ea:new Sy,u=n?n.Pa:this.Pa;let c=n?n.mutatedKeys:this.mutatedKeys,g=u,M=!1;const F="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,j="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((Q,ae)=>{const Ie=u.get(Q),je=Ya(this.query,ae)?ae:null,yt=!!Ie&&this.mutatedKeys.has(Ie.key),Lt=!!je&&(je.hasLocalMutations||this.mutatedKeys.has(je.key)&&je.hasCommittedMutations);let bt=!1;Ie&&je?Ie.data.isEqual(je.data)?yt!==Lt&&(o.track({type:3,doc:je}),bt=!0):this.da(Ie,je)||(o.track({type:2,doc:je}),bt=!0,(F&&this.ha(je,F)>0||j&&this.ha(je,j)<0)&&(M=!0)):!Ie&&je?(o.track({type:0,doc:je}),bt=!0):Ie&&!je&&(o.track({type:1,doc:Ie}),bt=!0,(F||j)&&(M=!0)),bt&&(je?(g=g.add(je),c=Lt?c.add(Q):c.delete(Q)):(g=g.delete(Q),c=c.delete(Q)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const Q="F"===this.query.limitType?g.last():g.first();g=g.delete(Q.key),c=c.delete(Q.key),o.track({type:1,doc:Q})}return{Pa:g,Ea:o,Xi:M,mutatedKeys:c}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,u){const c=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const g=e.Ea.k_();g.sort((Q,ae)=>function(je,yt){const Lt=bt=>{switch(bt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return Lt(je)-Lt(yt)}(Q.type,ae.type)||this.ha(Q.doc,ae.doc)),this.Aa(o),u=null!=u&&u;const M=n&&!u?this.Ra():[],F=0===this.la.size&&this.current&&!u?1:0,j=F!==this.ca;return this.ca=F,0!==g.length||j?{snapshot:new rd(this.query,e.Pa,c,g,e.mutatedKeys,0===F,j,!1,!!o&&o.resumeToken.approximateByteSize()>0),Va:M}:{Va:M}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Sy,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=pt(),this.Pa.forEach(o=>{this.ma(o.key)&&(this.la=this.la.add(o.key))});const n=[];return e.forEach(o=>{this.la.has(o)||n.push(new Cm(o))}),this.la.forEach(o=>{e.has(o)||n.push(new Tm(o))}),n}fa(e){this.ua=e.hs,this.la=pt();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return rd.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class jE{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class My{constructor(e){this.key=e,this.pa=!1}}class Dm{constructor(e,n,o,u,c,g){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=c,this.maxConcurrentLimboResolutions=g,this.ya={},this.wa=new f(M=>Fl(M),kl),this.Sa=new Map,this.ba=new Set,this.Da=new Yr(Te.comparator),this.Ca=new Map,this.va=new Xc,this.Fa={},this.Ma=new Map,this.xa=dh.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}function Uw(i,e){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,ce.Z)(function*(i,e,n=!0){const o=Xp(i);let u;const c=o.wa.get(e);return c?(o.sharedClientState.addLocalQueryTarget(c.targetId),u=c.view.ga()):u=yield Th(o,e,n,!0),u}),Bp.apply(this,arguments)}function Am(i,e){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,ce.Z)(function*(i,e){const n=Xp(i);yield Th(n,e,!0,!1)}),Sm.apply(this,arguments)}function Th(i,e,n,o){return jp.apply(this,arguments)}function jp(){return jp=(0,ce.Z)(function*(i,e,n,o){const u=yield ed(i.localStore,Vi(e)),c=u.targetId,g=n?i.sharedClientState.addLocalQueryTarget(c):"not-current";let M;return o&&(M=yield Hp(i,e,c,"current"===g,u.resumeToken)),i.isPrimaryClient&&n&&mh(i.remoteStore,u),M}),jp.apply(this,arguments)}function Hp(i,e,n,o,u){return bm.apply(this,arguments)}function bm(){return bm=(0,ce.Z)(function*(i,e,n,o,u){i.Na=(ae,Ie,je)=>{return(yt=(0,ce.Z)(function*(bt,vn,Zn,mn){let Qn=vn.view.Ta(Zn);Qn.Xi&&(Qn=yield pf(bt.localStore,vn.query,!1).then(({documents:Cu})=>vn.view.Ta(Cu,Qn)));const Gr=mn&&mn.targetChanges.get(vn.targetId),ri=mn&&null!=mn.targetMismatches.get(vn.targetId),zs=vn.view.applyChanges(Qn,bt.isPrimaryClient,Gr,ri);return Oy(bt,vn.targetId,zs.Va),zs.snapshot}),function Lt(bt,vn,Zn,mn){return yt.apply(this,arguments)})(i,ae,Ie,je);var yt};const c=yield pf(i.localStore,e,!0),g=new Py(e,c.hs),M=g.Ta(c.documents),F=Cd.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,u),j=g.applyChanges(M,i.isPrimaryClient,F);Oy(i,n,j.Va);const Q=new jE(e,n,g);return i.wa.set(e,Q),i.Sa.has(n)?i.Sa.get(n).push(e):i.Sa.set(n,[e]),j.snapshot}),bm.apply(this,arguments)}function HE(i,e,n){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,ce.Z)(function*(i,e,n){const o=Tt(i),u=o.wa.get(e),c=o.Sa.get(u.targetId);if(c.length>1)return o.Sa.set(u.targetId,c.filter(g=>!kl(g,e))),void o.wa.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||(yield ru(o.localStore,u.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(u.targetId),n&&Hl(o.remoteStore,u.targetId),Ch(o,u.targetId)}).catch(Bs))):(Ch(o,u.targetId),yield ru(o.localStore,u.targetId,!0))}),Rm.apply(this,arguments)}function $E(i,e){return Pm.apply(this,arguments)}function Pm(){return Pm=(0,ce.Z)(function*(i,e){const n=Tt(i),o=n.wa.get(e),u=n.Sa.get(o.targetId);n.isPrimaryClient&&1===u.length&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),Hl(n.remoteStore,o.targetId))}),Pm.apply(this,arguments)}function $p(){return $p=(0,ce.Z)(function*(i,e,n){const o=jm(i);try{const u=yield function(g,M){const F=Tt(g),j=Ir.now(),Q=M.reduce((je,yt)=>je.add(yt.key),pt());let ae,Ie;return F.persistence.runTransaction("Locally write mutations","readwrite",je=>{let yt=D(),Lt=pt();return F.os.getEntries(je,Q).next(bt=>{yt=bt,yt.forEach((vn,Zn)=>{Zn.isValidDocument()||(Lt=Lt.add(vn))})}).next(()=>F.localDocuments.getOverlayedDocuments(je,yt)).next(bt=>{ae=bt;const vn=[];for(const Zn of M){const mn=No(Zn,ae.get(Zn.key).overlayedDocument);null!=mn&&vn.push(new pa(Zn.key,mn,jc(mn.value.mapValue),kt.exists(!0)))}return F.mutationQueue.addMutationBatch(je,j,vn,M)}).next(bt=>{Ie=bt;const vn=bt.applyToLocalDocumentSet(ae,Lt);return F.documentOverlayCache.saveOverlays(je,bt.batchId,vn)})}).then(()=>({batchId:Ie.batchId,changes:te(ae)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(g,M,F){let j=g.Fa[g.currentUser.toKey()];j||(j=new Yr(sn)),j=j.insert(M,F),g.Fa[g.currentUser.toKey()]=j}(o,u.batchId,n),yield sd(o,u.changes),yield vh(o.remoteStore)}catch(u){const c=Ih(u,"Failed to persist write");n.reject(c)}}),$p.apply(this,arguments)}function Mm(i,e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,ce.Z)(function*(i,e){const n=Tt(i);try{const o=yield function CE(i,e){const n=Tt(i),o=e.snapshotVersion;let u=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const g=n.os.newChangeBuffer({trackRemovals:!0});u=n.ns;const M=[];e.targetChanges.forEach((Q,ae)=>{const Ie=u.get(ae);if(!Ie)return;M.push(n.Qr.removeMatchingKeys(c,Q.removedDocuments,ae).next(()=>n.Qr.addMatchingKeys(c,Q.addedDocuments,ae)));let je=Ie.withSequenceNumber(c.currentSequenceNumber);var Lt,bt,vn;null!==e.targetMismatches.get(ae)?je=je.withResumeToken(Ki.EMPTY_BYTE_STRING,un.min()).withLastLimboFreeSnapshotVersion(un.min()):Q.resumeToken.approximateByteSize()>0&&(je=je.withResumeToken(Q.resumeToken,o)),u=u.insert(ae,je),bt=je,vn=Q,(0===(Lt=Ie).resumeToken.approximateByteSize()||bt.snapshotVersion.toMicroseconds()-Lt.snapshotVersion.toMicroseconds()>=3e8||vn.addedDocuments.size+vn.modifiedDocuments.size+vn.removedDocuments.size>0)&&M.push(n.Qr.updateTargetData(c,je))});let F=D(),j=pt();if(e.documentUpdates.forEach(Q=>{e.resolvedLimboDocuments.has(Q)&&M.push(n.persistence.referenceDelegate.updateLimboDocument(c,Q))}),M.push(hy(c,g,e.documentUpdates).next(Q=>{F=Q.cs,j=Q.ls})),!o.isEqual(un.min())){const Q=n.Qr.getLastRemoteSnapshotVersion(c).next(ae=>n.Qr.setTargetsMetadata(c,c.currentSequenceNumber,o));M.push(Q)}return xe.waitFor(M).next(()=>g.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,F,j)).next(()=>F)}).then(c=>(n.ns=u,c))}(n.localStore,e);e.targetChanges.forEach((u,c)=>{const g=n.Ca.get(c);g&&(Jt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.pa=!0:u.modifiedDocuments.size>0?Jt(g.pa):u.removedDocuments.size>0&&(Jt(g.pa),g.pa=!1))}),yield sd(n,o,e)}catch(o){yield Bs(o)}}),Gp.apply(this,arguments)}function Nm(i,e,n){const o=Tt(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.wa.forEach((c,g)=>{const M=g.view.G_(e);M.snapshot&&u.push(M.snapshot)}),function(g,M){const F=Tt(g);F.onlineState=M;let j=!1;F.queries.forEach((Q,ae)=>{for(const Ie of ae.Q_)Ie.G_(M)&&(j=!0)}),j&&vm(F)}(o.eventManager,e),u.length&&o.ya.u_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Bw(i,e,n){return Df.apply(this,arguments)}function Df(){return Df=(0,ce.Z)(function*(i,e,n){const o=Tt(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.Ca.get(e),c=u&&u.key;if(c){let g=new Yr(Te.comparator);g=g.insert(c,pi.newNoDocument(c,un.min()));const M=pt().add(c),F=new zc(un.min(),new Map,new Yr(sn),g,M);yield Mm(o,F),o.Da=o.Da.remove(c),o.Ca.delete(e),xy(o)}else yield ru(o.localStore,e,!1).then(()=>Ch(o,e,n)).catch(Bs)}),Df.apply(this,arguments)}function id(i,e){return zp.apply(this,arguments)}function zp(){return zp=(0,ce.Z)(function*(i,e){const n=Tt(i),o=e.batch.batchId;try{const u=yield function cy(i,e){const n=Tt(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),c=n.os.newChangeBuffer({trackRemovals:!0});return function(M,F,j,Q){const ae=j.batch,Ie=ae.keys();let je=xe.resolve();return Ie.forEach(yt=>{je=je.next(()=>Q.getEntry(F,yt)).next(Lt=>{const bt=j.docVersions.get(yt);Jt(null!==bt),Lt.version.compareTo(bt)<0&&(ae.applyToRemoteDocument(Lt,j),Lt.isValidDocument()&&(Lt.setReadTime(j.commitVersion),Q.addEntry(Lt)))})}),je.next(()=>M.mutationQueue.removeMutationBatch(F,ae))}(n,o,e,c).next(()=>c.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(M){let F=pt();for(let j=0;j<M.mutationResults.length;++j)M.mutationResults[j].transformResults.length>0&&(F=F.add(M.batch.mutations[j].key));return F}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}(n.localStore,e);km(n,o,null),xm(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield sd(n,u)}catch(u){yield Bs(u)}}),zp.apply(this,arguments)}function Wp(i,e,n){return qp.apply(this,arguments)}function qp(){return qp=(0,ce.Z)(function*(i,e,n){const o=Tt(i);try{const u=yield function(g,M){const F=Tt(g);return F.persistence.runTransaction("Reject batch","readwrite-primary",j=>{let Q;return F.mutationQueue.lookupMutationBatch(j,M).next(ae=>(Jt(null!==ae),Q=ae.keys(),F.mutationQueue.removeMutationBatch(j,ae))).next(()=>F.mutationQueue.performConsistencyCheck(j)).next(()=>F.documentOverlayCache.removeOverlaysForBatchId(j,Q,M)).next(()=>F.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(j,Q)).next(()=>F.localDocuments.getDocuments(j,Q))})}(o.localStore,e);km(o,e,n),xm(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield sd(o,u)}catch(u){yield Bs(u)}}),qp.apply(this,arguments)}function Om(){return Om=(0,ce.Z)(function*(i,e){const n=Tt(i);fl(n.remoteStore)||Ye("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(g){const M=Tt(g);return M.persistence.runTransaction("Get highest unacknowledged batch id","readonly",F=>M.mutationQueue.getHighestUnacknowledgedBatchId(F))}(n.localStore);if(-1===o)return void e.resolve();const u=n.Ma.get(o)||[];u.push(e),n.Ma.set(o,u)}catch(o){const u=Ih(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Om.apply(this,arguments)}function xm(i,e){(i.Ma.get(e)||[]).forEach(n=>{n.resolve()}),i.Ma.delete(e)}function km(i,e,n){const o=Tt(i);let u=o.Fa[o.currentUser.toKey()];if(u){const c=u.get(e);c&&(n?c.reject(n):c.resolve(),u=u.remove(e)),o.Fa[o.currentUser.toKey()]=u}}function Ch(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.Sa.get(e))i.wa.delete(o),n&&i.ya.La(o,n);i.Sa.delete(e),i.isPrimaryClient&&i.va.Vr(e).forEach(o=>{i.va.containsKey(o)||Fm(i,o)})}function Fm(i,e){i.ba.delete(e.path.canonicalString());const n=i.Da.get(e);null!==n&&(Hl(i.remoteStore,n),i.Da=i.Da.remove(e),i.Ca.delete(n),xy(i))}function Oy(i,e,n){for(const o of n)o instanceof Tm?(i.va.addReference(o.key,e),zE(i,o)):o instanceof Cm?(Ye("SyncEngine","Document no longer in limbo: "+o.key),i.va.removeReference(o.key,e),i.va.containsKey(o.key)||Fm(i,o.key)):vt()}function zE(i,e){const n=e.key,o=n.path.canonicalString();i.Da.get(n)||i.ba.has(o)||(Ye("SyncEngine","New document in limbo: "+n),i.ba.add(o),xy(i))}function xy(i){for(;i.ba.size>0&&i.Da.size<i.maxConcurrentLimboResolutions;){const e=i.ba.values().next().value;i.ba.delete(e);const n=new Te(or.fromString(e)),o=i.xa.next();i.Ca.set(o,new My(n)),i.Da=i.Da.insert(n,o),mh(i.remoteStore,new Ul(Vi(dl(n.path)),o,"TargetPurposeLimboResolution",Le._e))}}function sd(i,e,n){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,ce.Z)(function*(i,e,n){const o=Tt(i),u=[],c=[],g=[];var M;o.wa.isEmpty()||(o.wa.forEach((M,F)=>{g.push(o.Na(F,e,n).then(j=>{if((j||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(F.targetId,j?.fromCache?"not-current":"current"),j){u.push(j);const Q=xd.Ki(F.targetId,j);c.push(Q)}}))}),yield Promise.all(g),o.ya.u_(u),yield(M=(0,ce.Z)(function*(j,Q){const ae=Tt(j);try{yield ae.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ie=>xe.forEach(Q,je=>xe.forEach(je.qi,yt=>ae.persistence.referenceDelegate.addReference(Ie,je.targetId,yt)).next(()=>xe.forEach(je.Qi,yt=>ae.persistence.referenceDelegate.removeReference(Ie,je.targetId,yt)))))}catch(Ie){if(!I(Ie))throw Ie;Ye("LocalStore","Failed to update sequence numbers: "+Ie)}for(const Ie of Q){const je=Ie.targetId;if(!Ie.fromCache){const yt=ae.ns.get(je),bt=yt.withLastLimboFreeSnapshotVersion(yt.snapshotVersion);ae.ns=ae.ns.insert(je,bt)}}}),function F(j,Q){return M.apply(this,arguments)})(o.localStore,c))}),Kp.apply(this,arguments)}function ky(i,e){return Fy.apply(this,arguments)}function Fy(){return Fy=(0,ce.Z)(function*(i,e){const n=Tt(i);if(!n.currentUser.isEqual(e)){Ye("SyncEngine","User change. New user:",e.toKey());const o=yield TE(n.localStore,e);n.currentUser=e,(c=n).Ma.forEach(M=>{M.forEach(F=>{F.reject(new it(He.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Ma.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield sd(n,o.us)}var c}),Fy.apply(this,arguments)}function er(i,e){const n=Tt(i),o=n.Ca.get(e);if(o&&o.pa)return pt().add(o.key);{let u=pt();const c=n.Sa.get(e);if(!c)return u;for(const g of c){const M=n.wa.get(g);u=u.unionWith(M.view.Ia)}return u}}function Ly(i,e){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,ce.Z)(function*(i,e){const n=Tt(i),o=yield pf(n.localStore,e.query,!0),u=e.view.fa(o);return n.isPrimaryClient&&Oy(n,e.targetId,u.Va),u}),Zp.apply(this,arguments)}function Dh(i,e){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,ce.Z)(function*(i,e){const n=Tt(i);return sm(n.localStore,e).then(o=>sd(n,o))}),Qp.apply(this,arguments)}function Vy(i,e,n,o){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,ce.Z)(function*(i,e,n,o){const u=Tt(i),c=yield function(M,F){const j=Tt(M),Q=Tt(j.mutationQueue);return j.persistence.runTransaction("Lookup mutation documents","readonly",ae=>Q.vn(ae,F).next(Ie=>Ie?j.localDocuments.getDocuments(ae,Ie):xe.resolve(null)))}(u.localStore,e);var F;null!==c?("pending"===n?yield vh(u.remoteStore):"acknowledged"===n||"rejected"===n?(km(u,e,o||null),xm(u,e),F=e,Tt(Tt(u.localStore).mutationQueue).Mn(F)):vt(),yield sd(u,c)):Ye("SyncEngine","Cannot apply mutation batch with id: "+e)}),Lm.apply(this,arguments)}function od(){return od=(0,ce.Z)(function*(i,e){const n=Tt(i);if(Xp(n),jm(n),!0===e&&!0!==n.Oa){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield Jp(n,o.toArray());n.Oa=!0,yield gm(n.remoteStore,!0);for(const c of u)mh(n.remoteStore,c)}else if(!1===e&&!1!==n.Oa){const o=[];let u=Promise.resolve();n.Sa.forEach((c,g)=>{n.sharedClientState.isLocalQueryTarget(g)?o.push(g):u=u.then(()=>(Ch(n,g),ru(n.localStore,g,!0))),Hl(n.remoteStore,g)}),yield u,yield Jp(n,o),function(g){const M=Tt(g);M.Ca.forEach((F,j)=>{Hl(M.remoteStore,j)}),M.va.mr(),M.Ca=new Map,M.Da=new Yr(Te.comparator)}(n),n.Oa=!1,yield gm(n.remoteStore,!1)}}),od.apply(this,arguments)}function Jp(i,e,n){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,ce.Z)(function*(i,e,n){const o=Tt(i),u=[],c=[];for(const g of e){let M;const F=o.Sa.get(g);if(F&&0!==F.length){M=yield ed(o.localStore,Vi(F[0]));for(const j of F){const Q=o.wa.get(j),ae=yield Ly(o,Q);ae.snapshot&&c.push(ae.snapshot)}}else{const j=yield im(o.localStore,g);M=yield ed(o.localStore,j),yield Hp(o,Vm(j),g,!1,M.resumeToken)}u.push(M)}return o.ya.u_(c),u}),Ud.apply(this,arguments)}function Vm(i){return vu(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Um(i){return n=Tt(i).localStore,Tt(Tt(n).persistence).Bi();var n}function Bm(i,e,n,o){return Af.apply(this,arguments)}function Af(){return Af=(0,ce.Z)(function*(i,e,n,o){const u=Tt(i);if(u.Oa)return void Ye("SyncEngine","Ignoring unexpected query state notification.");const c=u.Sa.get(e);if(c&&c.length>0)switch(n){case"current":case"not-current":{const g=yield sm(u.localStore,Vu(c[0])),M=zc.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Ki.EMPTY_BYTE_STRING);yield sd(u,g,M);break}case"rejected":yield ru(u.localStore,e,!0),Ch(u,e,o);break;default:vt()}}),Af.apply(this,arguments)}function Uy(i,e,n){return Sf.apply(this,arguments)}function Sf(){return Sf=(0,ce.Z)(function*(i,e,n){const o=Xp(i);if(o.Oa){for(const u of e){if(o.Sa.has(u)&&o.sharedClientState.isActiveQueryTarget(u)){Ye("SyncEngine","Adding an already active target "+u);continue}const c=yield im(o.localStore,u),g=yield ed(o.localStore,c);yield Hp(o,Vm(c),g.targetId,!1,g.resumeToken),mh(o.remoteStore,g)}for(const u of n)o.Sa.has(u)&&(yield ru(o.localStore,u,!1).then(()=>{Hl(o.remoteStore,u),Ch(o,u)}).catch(Bs))}}),Sf.apply(this,arguments)}function Xp(i){const e=Tt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=er.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bw.bind(null,e),e.ya.u_=Up.bind(null,e.eventManager),e.ya.La=VE.bind(null,e.eventManager),e}function jm(i){const e=Tt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=id.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wp.bind(null,e),e}class Ah{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,ce.Z)(function*(){n.serializer=_f(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return wE(this.persistence,new IE,e.initialUser,this.serializer)}createPersistence(e){return new cf(df.Hr,this.serializer)}createSharedClientState(e){return new py}terminate(){var e=this;return(0,ce.Z)(function*(){var n,o;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(o=e.indexBackfillerScheduler)||void 0===o||o.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Hm extends Ah{constructor(e,n,o){super(),this.ka=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,ce.Z)(function*(){yield n().call(o,e),yield o.ka.initialize(o,e),yield jm(o.ka.syncEngine),yield vh(o.ka.remoteStore),yield o.persistence.fi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return wE(this.persistence,new IE,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new Xg(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new de(n,this.persistence);return new J(e.asyncQueue,o)}createPersistence(e){const n=jl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?ga.withCacheSize(this.cacheSizeBytes):ga.DEFAULT;return new rm(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,my(),Pp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new py}}class By extends Hm{constructor(e,n){super(e,n,!1),this.ka=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,ce.Z)(function*(){yield n().call(o,e);const u=o.ka.syncEngine;o.sharedClientState instanceof gh&&(o.sharedClientState.syncEngine={Zs:Vy.bind(null,u),Xs:Bm.bind(null,u),eo:Uy.bind(null,u),Bi:Um.bind(null,u),Ys:Dh.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.fi(function(){var c=(0,ce.Z)(function*(g){yield function Yp(i,e){return od.apply(this,arguments)}(o.ka.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start():g||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(g&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():g||o.indexBackfillerScheduler.stop())});return function(g){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const n=my();if(!gh.D(n))throw new it(He.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=jl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gh(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class Sh{initialize(e,n){var o=this;return(0,ce.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Nm(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=ky.bind(null,o.syncEngine),yield gm(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new LE}createDatastore(e){const n=_f(e.databaseInfo.databaseId),o=new PE(e.databaseInfo);return new _y(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return o=this.localStore,u=this.datastore,c=e.asyncQueue,g=n=>Nm(this.syncEngine,n,0),M=gy.D()?new gy:new um,new NE(o,u,c,g,M);var o,u,c,g,M}createSyncEngine(e,n){return function(u,c,g,M,F,j,Q){const ae=new Dm(u,c,g,M,F,j);return Q&&(ae.Oa=!0),ae}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,ce.Z)(function*(){var n,o;yield(o=(0,ce.Z)(function*(c){const g=Tt(c);Ye("RemoteStore","RemoteStore shutting down."),g.v_.add(5),yield hl(g),g.M_.shutdown(),g.x_.set("Unknown")}),function u(c){return o.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}function $m(i,e=10240){let n=0;return{read:()=>(0,ce.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,ce.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class bf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):li("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class KE{constructor(e,n){this.Ka=e,this.serializer=n,this.metadata=new Tr,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then(o=>{o&&o.ra()?this.metadata.resolve(o.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.na)}`))},o=>this.metadata.reject(o))}close(){return this.Ka.cancel()}getMetadata(){var e=this;return(0,ce.Z)(function*(){return e.metadata.promise})()}Ba(){var e=this;return(0,ce.Z)(function*(){return yield e.getMetadata(),e.Ua()})()}Ua(){var e=this;return(0,ce.Z)(function*(){const n=yield e.Wa();if(null===n)return null;const o=e.$a.decode(n),u=Number(o);isNaN(u)&&e.Ga(`length string (${o}) is not valid number`);const c=yield e.za(u);return new UE(JSON.parse(c),n.length+u)})()}ja(){return this.buffer.findIndex(e=>123===e)}Wa(){var e=this;return(0,ce.Z)(function*(){for(;e.ja()<0&&!(yield e.Ha()););if(0===e.buffer.length)return null;const n=e.ja();n<0&&e.Ga("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}za(e){var n=this;return(0,ce.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ha())&&n.Ga("Reached the end of bundle when more is expected.");const o=n.$a.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Ga(e){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ha(){var e=this;return(0,ce.Z)(function*(){const n=yield e.Ka.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class ZE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,ce.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new it(He.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const o=yield(u=(0,ce.Z)(function*(g,M){const F=Tt(g),j={documents:M.map(je=>hc(F.serializer,je))},Q=yield F.vo("BatchGetDocuments",F.serializer.databaseId,or.emptyPath(),j,M.length),ae=new Map;Q.forEach(je=>{const yt=function Zh(i,e){return"found"in e?function(o,u){Jt(!!u.found);const c=nu(o,u.found.name),g=$r(u.found.updateTime),M=u.found.createTime?$r(u.found.createTime):un.min(),F=new ro({mapValue:{fields:u.found.fields}});return pi.newFoundDocument(c,g,M,F)}(i,e):"missing"in e?function(o,u){Jt(!!u.missing),Jt(!!u.readTime);const c=nu(o,u.missing),g=$r(u.readTime);return pi.newNoDocument(c,g)}(i,e):vt()}(F.serializer,je);ae.set(yt.key.toString(),yt)});const Ie=[];return M.forEach(je=>{const yt=ae.get(je.toString());Jt(!!yt),Ie.push(yt)}),Ie}),function c(g,M){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Iu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const c=Te.fromPath(u);e.mutations.push(new ea(c,e.precondition(c)))}),yield(o=(0,ce.Z)(function*(c,g){const M=Tt(c),F={writes:g.map(j=>cp(M.serializer,j))};yield M.So("Commit",M.serializer.databaseId,or.emptyPath(),F)}),function u(c,g){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw vt();n=un.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new it(He.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(un.min())?kt.exists(!1):kt.updateTime(n):kt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(un.min()))throw new it(He.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kt.updateTime(n)}return kt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Tu{constructor(e,n,o,u,c){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=c,this.Ja=o.maxAttempts,this.jo=new Mp(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){var e=this;this.jo.qo((0,ce.Z)(function*(){const n=new ZE(e.datastore),o=e.Xa(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(c=>{e.eu(c)}))}).catch(u=>{e.eu(u)})}))}Xa(e){try{const n=this.updateFunction(e);return!ke(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!wu(n)}return!1}}class QE{constructor(e,n,o,u){var c=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=ds.UNAUTHENTICATED,this.clientId=Zu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var g=(0,ce.Z)(function*(M){Ye("FirestoreClient","Received user=",M.uid),yield c.authCredentialListener(M),c.user=M});return function(M){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(o,g=>(Ye("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new it(He.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ce.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=Ih(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function eg(i,e){return jy.apply(this,arguments)}function jy(){return jy=(0,ce.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Ye("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,ce.Z)(function*(c){o.isEqual(c)||(yield TE(e.localStore,c),o=c)});return function(c){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),jy.apply(this,arguments)}function Rf(i,e){return tg.apply(this,arguments)}function tg(){return tg=(0,ce.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield Gm(i);Ye("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,i.configuration),i.setCredentialChangeListener(o=>Ay(e.remoteStore,o)),i.setAppCheckTokenChangeListener((o,u)=>Ay(e.remoteStore,u)),i._onlineComponents=e}),tg.apply(this,arguments)}function Hy(i){return"FirebaseError"===i.name?i.code===He.FAILED_PRECONDITION||i.code===He.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function Gm(i){return zm.apply(this,arguments)}function zm(){return zm=(0,ce.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ye("FirestoreClient","Using user provided OfflineComponentProvider");try{yield eg(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Hy(n))throw n;Wi("Error using user provided cache. Falling back to memory cache: "+n),yield eg(i,new Ah)}}else Ye("FirestoreClient","Using default OfflineComponentProvider"),yield eg(i,new Ah);return i._offlineComponents}),zm.apply(this,arguments)}function Pf(i){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,ce.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ye("FirestoreClient","Using user provided OnlineComponentProvider"),yield Rf(i,i._uninitializedComponentsProvider._online)):(Ye("FirestoreClient","Using default OnlineComponentProvider"),yield Rf(i,new Sh))),i._onlineComponents}),Wm.apply(this,arguments)}function $y(i){return Gm(i).then(e=>e.persistence)}function ad(i){return Gm(i).then(e=>e.localStore)}function Gy(i){return Pf(i).then(e=>e.remoteStore)}function qm(i){return Pf(i).then(e=>e.syncEngine)}function bh(i){return Km.apply(this,arguments)}function Km(){return Km=(0,ce.Z)(function*(i){const e=yield Pf(i),n=e.eventManager;return n.onListen=Uw.bind(null,e.syncEngine),n.onUnlisten=HE.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Am.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$E.bind(null,e.syncEngine),n}),Km.apply(this,arguments)}function Wy(i,e,n={}){const o=new Tr;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function(c,g,M,F,j){const Q=new bf({next:Ie=>{g.enqueueAndForget(()=>ym(c,ae));const je=Ie.docs.has(M);!je&&Ie.fromCache?j.reject(new it(He.UNAVAILABLE,"Failed to get document because the client is offline.")):je&&Ie.fromCache&&F&&"server"===F.source?j.reject(new it(He.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):j.resolve(Ie)},error:Ie=>j.reject(Ie)}),ae=new Im(dl(M.path),Q,{includeMetadataChanges:!0,ta:!0});return mm(c,ae)}(yield bh(i),i.asyncQueue,e,n,o)})),o.promise}function Qm(i,e,n={}){const o=new Tr;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function(c,g,M,F,j){const Q=new bf({next:Ie=>{g.enqueueAndForget(()=>ym(c,ae)),Ie.fromCache&&"server"===F.source?j.reject(new it(He.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):j.resolve(Ie)},error:Ie=>j.reject(Ie)}),ae=new Im(M,Q,{includeMetadataChanges:!0,ta:!0});return mm(c,ae)}(yield bh(i),i.asyncQueue,e,n,o)})),o.promise}function Mf(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const rg=new Map;function pl(i,e,n){if(!n)throw new it(He.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Yy(i,e,n,o){if(!0===e&&!0===o)throw new it(He.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function ig(i){if(!Te.isDocumentKey(i))throw new it(He.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Jy(i){if(Te.isDocumentKey(i))throw new it(He.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Jm(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(o=i).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof i?"a function":vt()}function Dr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new it(He.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jm(i);throw new it(He.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Xy(i,e){if(e<=0)throw new it(He.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Xm{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new it(He.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new it(He.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Mf(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(c){if(void 0!==c.timeoutSeconds){if(isNaN(c.timeoutSeconds))throw new it(He.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new it(He.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new it(He.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nf{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new it(He.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new it(He.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xm(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new Pu;switch(o.type){case"firstParty":return new Ko(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new it(He.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=rg.get(n);o&&(Ye("ComponentProvider","Removing Datastore"),rg.delete(n),o.terminate())}(this),Promise.resolve()}}class xo{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new xo(this.firestore,e,this._query)}}class Ni{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ni(this.firestore,e,this._key)}}class gl extends xo{constructor(e,n,o){super(e,n,dl(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ni(this.firestore,null,new Te(e))}withConverter(e){return new gl(this.firestore,e,this._path)}}function Rh(i,e,...n){if(i=(0,Ze.m9)(i),pl("collection","path",e),i instanceof Nf){const o=or.fromString(e,...n);return Jy(o),new gl(i,null,o)}{if(!(i instanceof Ni||i instanceof gl))throw new it(He.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(or.fromString(e,...n));return Jy(o),new gl(i.firestore,null,o)}}function xf(i,e,...n){if(i=(0,Ze.m9)(i),1===arguments.length&&(e=Zu.newId()),pl("doc","path",e),i instanceof Nf){const o=or.fromString(e,...n);return ig(o),new Ni(i,null,new Te(o))}{if(!(i instanceof Ni||i instanceof gl))throw new it(He.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(or.fromString(e,...n));return ig(o),new Ni(i.firestore,i instanceof gl?i.converter:null,new Te(o))}}function tv(i,e){return i=(0,Ze.m9)(i),e=(0,Ze.m9)(e),(i instanceof Ni||i instanceof gl)&&(e instanceof Ni||e instanceof gl)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function e_(i,e){return i=(0,Ze.m9)(i),e=(0,Ze.m9)(e),i instanceof xo&&e instanceof xo&&i.firestore===e.firestore&&kl(i._query,e._query)&&i.converter===e.converter}class JE{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Mp(this,"async_queue_retry"),this.cu=()=>{const n=Pp();n&&Ye("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=Pp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=Pp();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new Tr;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){var e=this;return(0,ce.Z)(function*(){if(0!==e.ru.length){try{yield e.ru[0](),e.ru.shift(),e.jo.reset()}catch(n){if(!I(n))throw n;Ye("AsyncQueue","Operation failed with retryable error: "+n)}e.ru.length>0&&e.jo.qo(()=>e.Pu())}})()}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(o=>{throw this.ou=o,this._u=!1,li("INTERNAL UNHANDLED ERROR: ",function(g){let M=g.message||"";return g.stack&&(M=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),M}(o)),o}).then(o=>(this._u=!1,o))));return this.nu=n,n}enqueueAfterDelay(e,n,o){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const u=Vp.createAndSchedule(this,e,n,o,c=>this.Iu(c));return this.su.push(u),u}lu(){this.ou&&vt()}verifyOperationInProgress(){}Tu(){var e=this;return(0,ce.Z)(function*(){let n;do{n=e.nu,yield n}while(n!==e.nu)})()}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.su)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function t_(i){return function(n,o){if("object"!=typeof n||null===n)return!1;const u=n;for(const c of["next","error","complete"])if(c in u&&"function"==typeof u[c])return!0;return!1}(i)}class Hw{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class hi extends Nf{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new JE,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||nv(this),this._firestoreClient.terminate()}}function xs(i){return i._firestoreClient||nv(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function nv(i){var e,n,o;const u=i._freezeSettings(),c=(F=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Fc(i._databaseId,F,i._persistenceKey,(Q=u).host,Q.ssl,Q.experimentalForceLongPolling,Q.experimentalAutoDetectLongPolling,Mf(Q.experimentalLongPollingOptions),Q.useFetchStreams));var F,Q;i._firestoreClient=new QE(i._authCredentials,i._appCheckCredentials,i._queue,c),null!==(n=u.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function rv(i,e,n){const o=new Tr;return i.asyncQueue.enqueue((0,ce.Z)(function*(){try{yield eg(i,n),yield Rf(i,e),o.resolve()}catch(u){const c=u;if(!Hy(c))throw c;Wi("Error enabling indexeddb cache. Falling back to memory cache: "+c),o.reject(c)}})).then(()=>o.promise)}function av(i){if(i._initialized||i._terminated)throw new it(He.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Wl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wl(Ki.fromBase64String(e))}catch(n){throw new it(He.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wl(Ki.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ml{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new it(He.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ci(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jd{constructor(e){this._methodName=e}}class Ph{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new it(He.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new it(He.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return sn(this._lat,e._lat)||sn(this._long,e._long)}}const uv=/^__.*__$/;class lv{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new pa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xa(e,this.data,n,this.fieldTransforms)}}class n_{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new pa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function cv(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class og{constructor(e,n,o,u,c,g){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===c&&this.Ru(),this.fieldTransforms=c||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new og(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.mu({path:o,gu:!1});return u.pu(e),u}yu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.mu({path:o,gu:!1});return u.Ru(),u}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return cg(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(cv(this.Vu)&&uv.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class Hd{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||_f(e)}Cu(e,n,o,u=!1){return new og({Vu:e,methodName:n,Du:o,path:ci.emptyPath(),gu:!1,bu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ud(i){const e=i._freezeSettings(),n=_f(i._databaseId);return new Hd(i._databaseId,!!e.ignoreUndefinedProperties,n)}function kf(i,e,n,o,u,c={}){const g=i.Cu(c.merge||c.mergeFields?2:0,e,n,u);u_("Data must be an object, but it was:",g,o);const M=o_(o,g);let F,j;if(c.merge)F=new ti(g.fieldMask),j=g.fieldTransforms;else if(c.mergeFields){const Q=[];for(const ae of c.mergeFields){const Ie=Vf(e,ae,n);if(!g.contains(Ie))throw new it(He.INVALID_ARGUMENT,`Field '${Ie}' is specified in your field mask but missing from your input data.`);hv(Q,Ie)||Q.push(Ie)}F=new ti(Q),j=g.fieldTransforms.filter(ae=>F.covers(ae.field))}else F=null,j=g.fieldTransforms;return new lv(new ro(M),F,j)}class Ff extends jd{_toFieldTransform(e){if(2!==e.Vu)throw e.Su(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ff}}function r_(i,e,n){return new og({Vu:3,Du:e.settings.Du,methodName:i._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ag extends jd{_toFieldTransform(e){return new ka(e.path,new Jr)}isEqual(e){return e instanceof ag}}class ug extends jd{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=r_(this,e,!0),o=this.vu.map(c=>ql(c,n)),u=new mi(o);return new ka(e.path,u)}isEqual(e){return e instanceof ug&&(0,Ze.vZ)(this.vu,e.vu)}}class $d extends jd{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=r_(this,e,!0),o=this.vu.map(c=>ql(c,n)),u=new is(o);return new ka(e.path,u)}isEqual(e){return e instanceof $d&&(0,Ze.vZ)(this.vu,e.vu)}}class i_ extends jd{constructor(e,n){super(e),this.Fu=n}_toFieldTransform(e){const n=new Eu(e.serializer,Nr(e.serializer,this.Fu));return new ka(e.path,n)}isEqual(e){return e instanceof i_&&this.Fu===e.Fu}}function s_(i,e,n,o){const u=i.Cu(1,e,n);u_("Data must be an object, but it was:",u,o);const c=[],g=ro.empty();da(o,(F,j)=>{const Q=lg(e,F,n);j=(0,Ze.m9)(j);const ae=u.yu(Q);if(j instanceof Ff)c.push(Q);else{const Ie=ql(j,ae);null!=Ie&&(c.push(Q),g.set(Q,Ie))}});const M=new ti(c);return new n_(g,M,u.fieldTransforms)}function Lf(i,e,n,o,u,c){const g=i.Cu(1,e,n),M=[Vf(e,o,n)],F=[u];if(c.length%2!=0)throw new it(He.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ie=0;Ie<c.length;Ie+=2)M.push(Vf(e,c[Ie])),F.push(c[Ie+1]);const j=[],Q=ro.empty();for(let Ie=M.length-1;Ie>=0;--Ie)if(!hv(j,M[Ie])){const je=M[Ie];let yt=F[Ie];yt=(0,Ze.m9)(yt);const Lt=g.yu(je);if(yt instanceof Ff)j.push(je);else{const bt=ql(yt,Lt);null!=bt&&(j.push(je),Q.set(je,bt))}}const ae=new ti(j);return new n_(Q,ae,g.fieldTransforms)}function dv(i,e,n,o=!1){return ql(n,i.Cu(o?4:3,e))}function ql(i,e){if(a_(i=(0,Ze.m9)(i)))return u_("Unsupported field value:",e,i),o_(i,e);if(i instanceof jd)return function(o,u){if(!cv(u.Vu))throw u.Su(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Su(`${o._methodName}() is not currently supported inside arrays`);const c=o._toFieldTransform(u);c&&u.fieldTransforms.push(c)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.gu&&4!==e.Vu)throw e.Su("Nested arrays are not supported");return function(o,u){const c=[];let g=0;for(const M of o){let F=ql(M,u.wu(g));null==F&&(F={nullValue:"NULL_VALUE"}),c.push(F),g++}return{arrayValue:{values:c}}}(i,e)}return function(o,u){if(null===(o=(0,Ze.m9)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return Nr(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const c=Ir.fromDate(o);return{timestampValue:Ft(u.serializer,c)}}if(o instanceof Ir){const c=new Ir(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Ft(u.serializer,c)}}if(o instanceof Ph)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Wl)return{bytesValue:Di(u.serializer,o._byteString)};if(o instanceof Ni){const c=u.databaseId,g=o.firestore._databaseId;if(!g.isEqual(c))throw u.Su(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Vl(o.firestore._databaseId||u.databaseId,o._key.path)}}throw u.Su(`Unsupported field value: ${Jm(o)}`)}(i,e)}function o_(i,e){const n={};return Sl(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(i,(o,u)=>{const c=ql(u,e.fu(o));null!=c&&(n[o]=c)}),{mapValue:{fields:n}}}function a_(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Ir||i instanceof Ph||i instanceof Wl||i instanceof Ni||i instanceof jd)}function u_(i,e,n){if(!a_(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=Jm(n);throw e.Su("an object"===o?i+" a custom object":i+" "+o)}var u}function Vf(i,e,n){if((e=(0,Ze.m9)(e))instanceof ml)return e._internalPath;if("string"==typeof e)return lg(i,e);throw cg("Field path arguments must be of type string or ",i,!1,void 0,n)}const Uf=new RegExp("[~\\*/\\[\\]]");function lg(i,e,n){if(e.search(Uf)>=0)throw cg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new ml(...e.split("."))._internalPath}catch{throw cg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function cg(i,e,n,o,u){const c=o&&!o.isEmpty(),g=void 0!==u;let M=`Function ${e}() called with invalid data`;n&&(M+=" (via `toFirestore()`)"),M+=". ";let F="";return(c||g)&&(F+=" (found",c&&(F+=` in field ${o}`),g&&(F+=` in document ${u}`),F+=")"),new it(He.INVALID_ARGUMENT,M+i+F)}function hv(i,e){return i.some(n=>n.isEqual(e))}class Bf{constructor(e,n,o,u,c){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ni(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new rI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class rI extends Bf{data(){return super.data()}}function dg(i,e){return"string"==typeof e?lg(i,e):e instanceof ml?e._internalPath:e._delegate._internalPath}function fv(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new it(He.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class l_{}class Mh extends l_{}function Kl(i,e,...n){let o=[];e instanceof l_&&o.push(e),o=o.concat(n),function(c){const g=c.filter(F=>F instanceof _c).length,M=c.filter(F=>F instanceof jf).length;if(g>1||g>0&&M>0)throw new it(He.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class jf extends Mh{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new jf(e,n,o)}_apply(e){const n=this._parse(e);return cI(e._query,n),new xo(e.firestore,e.converter,xl(e._query,n))}_parse(e){const n=ud(e.firestore);return function(c,g,M,F,j,Q,ae){let Ie;if(j.isKeyField()){if("array-contains"===Q||"array-contains-any"===Q)throw new it(He.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Q}' queries on documentId().`);if("in"===Q||"not-in"===Q){lI(ae,Q);const je=[];for(const yt of ae)je.push(_v(F,c,yt));Ie={arrayValue:{values:je}}}else Ie=_v(F,c,ae)}else"in"!==Q&&"not-in"!==Q&&"array-contains-any"!==Q||lI(ae,Q),Ie=dv(M,"where",ae,"in"===Q||"not-in"===Q);return sr.create(j,Q,Ie)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class _c extends l_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _c(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:Ur.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,c){let g=u;const M=c.getFlattenedFilters();for(const F of M)cI(g,F),g=xl(g,F)}(e._query,n),new xo(e.firestore,e.converter,xl(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class c_ extends Mh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new c_(e,n)}_apply(e){const n=function(u,c,g){if(null!==u.startAt)throw new it(He.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new it(He.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hc(c,g)}(e._query,this._field,this._direction);return new xo(e.firestore,e.converter,function(u,c){const g=u.explicitOrderBy.concat([c]);return new Oa(u.path,u.collectionGroup,g,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}class hg extends Mh{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new hg(e,n,o)}_apply(e){return new xo(e.firestore,e.converter,Qa(e._query,this._limit,this._limitType))}}class Hf extends Mh{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new Hf(e,n,o)}_apply(e){const n=fg(e,this.type,this._docOrFields,this._inclusive);return new xo(e.firestore,e.converter,(c=n,new Oa((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,c,u.endAt)));var u,c}}class d_ extends Mh{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new d_(e,n,o)}_apply(e){const n=fg(e,this.type,this._docOrFields,this._inclusive);return new xo(e.firestore,e.converter,(c=n,new Oa((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,c)));var u,c}}function fg(i,e,n,o){if(n[0]=(0,Ze.m9)(n[0]),n[0]instanceof Bf)return function(c,g,M,F,j){if(!F)throw new it(He.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${M}().`);const Q=[];for(const ae of Za(c))if(ae.field.isKeyField())Q.push(sl(g,F.key));else{const Ie=F.data.field(ae.field);if(bl(Ie))throw new it(He.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ae.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ie){const je=ae.field.canonicalString();throw new it(He.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${je}' (used as the orderBy) does not exist.`)}Q.push(Ie)}return new ul(Q,j)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=ud(i.firestore);return function(g,M,F,j,Q,ae){const Ie=g.explicitOrderBy;if(Q.length>Ie.length)throw new it(He.INVALID_ARGUMENT,`Too many arguments provided to ${j}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const je=[];for(let yt=0;yt<Q.length;yt++){const Lt=Q[yt];if(Ie[yt].field.isKeyField()){if("string"!=typeof Lt)throw new it(He.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${j}(), but got a ${typeof Lt}`);if(!Ed(g)&&-1!==Lt.indexOf("/"))throw new it(He.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${j}() must be a plain document ID, but '${Lt}' contains a slash.`);const bt=g.path.child(or.fromString(Lt));if(!Te.isDocumentKey(bt))throw new it(He.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${j}() must result in a valid document path, but '${bt}' is not because it contains an odd number of segments.`);const vn=new Te(bt);je.push(sl(M,vn))}else{const bt=dv(F,j,Lt);je.push(bt)}}return new ul(je,ae)}(i._query,i.firestore._databaseId,u,e,n,o)}}function _v(i,e,n){if("string"==typeof(n=(0,Ze.m9)(n))){if(""===n)throw new it(He.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ed(e)&&-1!==n.indexOf("/"))throw new it(He.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(or.fromString(n));if(!Te.isDocumentKey(o))throw new it(He.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return sl(i,new Te(o))}if(n instanceof Ni)return sl(i,n._key);throw new it(He.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jm(n)}.`)}function lI(i,e){if(!Array.isArray(i)||0===i.length)throw new it(He.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cI(i,e){const n=function(u,c){for(const g of u)for(const M of g.getFlattenedFilters())if(c.indexOf(M.op)>=0)return M.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new it(He.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class h_{convertValue(e,n="none"){switch(fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return di(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(no(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw vt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return da(e,(u,c)=>{o[u]=this.convertValue(c,n)}),o}convertGeoPoint(e){return new Ph(di(e.latitude),di(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Rl(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Ou(e));default:return null}}convertTimestamp(e){const n=Ra(e);return new Ir(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=or.fromString(e);Jt(jg(o));const u=new Jo(o.get(1),o.get(3)),c=new Te(o.popFirst(5));return u.isEqual(n)||li(`Document ${c} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function f_(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class dI extends h_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ni(this.firestore,null,n)}}class _l{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yl extends Bf{constructor(e,n,o,u,c,g){super(e,n,o,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(dg("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class ld extends yl{data(e={}){return super.data(e)}}class yc{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new _l(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new ld(this._firestore,this._userDataWriter,o.key,o,new _l(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new it(He.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,c){if(u._snapshot.oldDocs.isEmpty()){let g=0;return u._snapshot.docChanges.map(M=>({type:"added",doc:new ld(u._firestore,u._userDataWriter,M.doc.key,M.doc,new _l(u._snapshot.mutatedKeys.has(M.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:g++}))}{let g=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(M=>c||3!==M.type).map(M=>{const F=new ld(u._firestore,u._userDataWriter,M.doc.key,M.doc,new _l(u._snapshot.mutatedKeys.has(M.doc.key),u._snapshot.fromCache),u.query.converter);let j=-1,Q=-1;return 0!==M.type&&(j=g.indexOf(M.doc.key),g=g.delete(M.doc.key)),1!==M.type&&(g=g.add(M.doc),Q=g.indexOf(M.doc.key)),{type:$f(M.type),doc:F,oldIndex:j,newIndex:Q}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function $f(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}function p_(i,e){return i instanceof yl&&e instanceof yl?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof yc&&e instanceof yc&&i._firestore===e._firestore&&e_(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Hu extends h_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ni(this.firestore,null,n)}}function wv(i,e,n){i=Dr(i,Ni);const o=Dr(i.firestore,hi),u=f_(i.converter,e,n);return vc(o,[kf(ud(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,kt.none())])}function Tv(i,e,n,...o){i=Dr(i,Ni);const u=Dr(i.firestore,hi),c=ud(u);let g;return g="string"==typeof(e=(0,Ze.m9)(e))||e instanceof ml?Lf(c,"updateDoc",i._key,e,n,o):s_(c,"updateDoc",i._key,e),vc(u,[g.toMutation(i._key,kt.exists(!0))])}function gg(i,...e){var n,o,u;i=(0,Ze.m9)(i);let c={includeMetadataChanges:!1,source:"default"},g=0;"object"!=typeof e[g]||t_(e[g])||(c=e[g],g++);const M={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(t_(e[g])){const ae=e[g];e[g]=null===(n=ae.next)||void 0===n?void 0:n.bind(ae),e[g+1]=null===(o=ae.error)||void 0===o?void 0:o.bind(ae),e[g+2]=null===(u=ae.complete)||void 0===u?void 0:u.bind(ae)}let F,j,Q;if(i instanceof Ni)j=Dr(i.firestore,hi),Q=dl(i._key.path),F={next:ae=>{e[g]&&e[g](Nh(j,i,ae))},error:e[g+1],complete:e[g+2]};else{const ae=Dr(i,xo);j=Dr(ae.firestore,hi),Q=ae._query;const Ie=new Hu(j);F={next:je=>{e[g]&&e[g](new yc(j,Ie,ae,je))},error:e[g+1],complete:e[g+2]},fv(i._query)}return function(Ie,je,yt,Lt){const bt=new bf(Lt),vn=new Im(je,bt,yt);return Ie.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return mm(yield bh(Ie),vn)})),()=>{bt.Qa(),Ie.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return ym(yield bh(Ie),vn)}))}}(xs(j),Q,M,F)}function vc(i,e){return function(o,u){const c=new Tr;return o.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function GE(i,e,n){return $p.apply(this,arguments)}(yield qm(o),u,c)})),c.promise}(xs(i),e)}function Nh(i,e,n){const o=n.docs.get(e._key),u=new Hu(i);return new yl(i,u,e._key,o,new _l(n.hasPendingWrites,n.fromCache),e.converter)}const xh={maxAttempts:5};class kh{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ud(e)}set(e,n,o){this._verifyNotCommitted();const u=Zl(e,this._firestore),c=f_(u.converter,n,o),g=kf(this._dataReader,"WriteBatch.set",u._key,c,null!==u.converter,o);return this._mutations.push(g.toMutation(u._key,kt.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const c=Zl(e,this._firestore);let g;return g="string"==typeof(n=(0,Ze.m9)(n))||n instanceof ml?Lf(this._dataReader,"WriteBatch.update",c._key,n,o,u):s_(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(g.toMutation(c._key,kt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Zl(e,this._firestore);return this._mutations=this._mutations.concat(new Iu(n._key,kt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new it(He.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zl(i,e){if((i=(0,Ze.m9)(i)).firestore!==e)throw new it(He.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class mg extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=ud(n)}get(n){const o=Zl(n,this._firestore),u=new dI(this._firestore);return this._transaction.lookup([o._key]).then(c=>{if(!c||1!==c.length)return vt();const g=c[0];if(g.isFoundDocument())return new Bf(this._firestore,u,g.key,g,o.converter);if(g.isNoDocument())return new Bf(this._firestore,u,o._key,null,o.converter);throw vt()})}set(n,o,u){const c=Zl(n,this._firestore),g=f_(c.converter,o,u),M=kf(this._dataReader,"Transaction.set",c._key,g,null!==c.converter,u);return this._transaction.set(c._key,M),this}update(n,o,u,...c){const g=Zl(n,this._firestore);let M;return M="string"==typeof(o=(0,Ze.m9)(o))||o instanceof ml?Lf(this._dataReader,"Transaction.update",g._key,o,u,c):s_(this._dataReader,"Transaction.update",g._key,o),this._transaction.update(g._key,M),this}delete(n){const o=Zl(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Zl(e,this._firestore),o=new Hu(this._firestore);return super.get(e).then(u=>new yl(this._firestore,o,n._key,u._document,new _l(!1,!1),n.converter))}}function cd(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new it("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function __(){if(typeof Uint8Array>"u")throw new it("unimplemented","Uint8Arrays are not available in this environment.")}function y_(){if(!function Wa(){return typeof atob<"u"}())throw new it("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Ru=ze.SDK_VERSION,(0,ze._registerComponent)(new ht.wA("firestore",(o,{instanceIdentifier:u,options:c})=>{const g=o.getProvider("app").getImmediate(),M=new hi(new $a(o.getProvider("auth-internal")),new dn(o.getProvider("app-check-internal")),function(j,Q){if(!Object.prototype.hasOwnProperty.apply(j.options,["projectId"]))throw new it(He.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jo(j.options.projectId,Q)}(g,u),g);return c=Object.assign({useFetchStreams:n},c),M._setSettings(c),M},"PUBLIC").setMultipleInstances(!0)),(0,ze.registerVersion)(bc,"4.6.0",e),(0,ze.registerVersion)(bc,"4.6.0","esm2017")}();class Wf{constructor(e){this._delegate=e}static fromBase64String(e){return y_(),new Wf(Wl.fromBase64String(e))}static fromUint8Array(e){return __(),new Wf(Wl.fromUint8Array(e))}toBase64(){return y_(),this._delegate.toBase64()}toUint8Array(){return __(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function v_(i){return function Gs(i,e){if("object"!=typeof i||null===i)return!1;const n=i;for(const o of e)if(o in n&&"function"==typeof n[o])return!0;return!1}(i,["next","error","complete"])}class Rv{enableIndexedDbPersistence(e,n){return function XE(i,e){av(i=Dr(i,hi));const n=xs(i);if(n._uninitializedComponentsProvider)throw new it(He.FAILED_PRECONDITION,"SDK cache is already specified.");Wi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),u=new Sh;return rv(n,u,new Hm(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function eI(i){av(i=Dr(i,hi));const e=xs(i);if(e._uninitializedComponentsProvider)throw new it(He.FAILED_PRECONDITION,"SDK cache is already specified.");Wi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),o=new Sh;return rv(e,o,new By(o,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function tI(i){if(i._initialized&&!i._terminated)throw new it(He.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ce.Z)(function*(){try{yield(n=(0,ce.Z)(function*(u){if(!gs.D())return Promise.resolve();const c=u+"main";yield gs.delete(c)}),function o(u){return n.apply(this,arguments)})(jl(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class Pv{constructor(e,n,o){this._delegate=n,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Jo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Wi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,o={}){!function ev(i,e,n,o={}){var u;const c=(i=Dr(i,Nf))._getSettings(),g=`${e}:${n}`;if("firestore.googleapis.com"!==c.host&&c.host!==g&&Wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:g,ssl:!1})),o.mockUserToken){let M,F;if("string"==typeof o.mockUserToken)M=o.mockUserToken,F=ds.MOCK_USER;else{M=(0,Ze.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const j=o.mockUserToken.sub||o.mockUserToken.user_id;if(!j)throw new it(He.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");F=new ds(j)}i._authCredentials=new Ku(new Sa(M,F))}}(this._delegate,e,n,o)}enableNetwork(){return function Bd(i){return function Gl(i){return i.asyncQueue.enqueue((0,ce.Z)(function*(){const e=yield $y(i),n=yield Gy(i);return e.setNetworkEnabled(!0),function(u){const c=Tt(u);return c.v_.delete(0),Fd(c)}(n)}))}(xs(i=Dr(i,hi)))}(this._delegate)}disableNetwork(){return function nI(i){return function Zm(i){return i.asyncQueue.enqueue((0,ce.Z)(function*(){const e=yield $y(i),n=yield Gy(i);return e.setNetworkEnabled(!1),(o=(0,ce.Z)(function*(c){const g=Tt(c);g.v_.add(0),yield hl(g),g.x_.set("Offline")}),function u(c){return o.apply(this,arguments)})(n);var o}))}(xs(i=Dr(i,hi)))}(this._delegate)}enablePersistence(e){let n=!1,o=!1;return e&&(n=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Yy("synchronizeTabs",n,"experimentalForceOwningTab",o)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function iv(i){return function(n){const o=new Tr;return n.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function Ny(i,e){return Om.apply(this,arguments)}(yield qm(n),o)})),o.promise}(xs(i=Dr(i,hi)))}(this._delegate)}onSnapshotsInSync(e){return function Gf(i,e){return function ng(i,e){const n=new bf(e);return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return u=yield bh(i),c=n,Tt(u).W_.add(c),void c.next();var u,c})),()=>{n.Qa(),i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return u=yield bh(i),c=n,void Tt(u).W_.delete(c);var u,c}))}}(xs(i=Dr(i,hi)),t_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new it("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Lh(this,Rh(this._delegate,e))}catch(n){throw ma(n,"collection()","Firestore.collection()")}}doc(e){try{return new Va(this,xf(this._delegate,e))}catch(n){throw ma(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _a(this,function Of(i,e){if(i=Dr(i,Nf),pl("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new it(He.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xo(i,null,(o=e,new Oa(or.emptyPath(),o)));var o}(this._delegate,e))}catch(n){throw ma(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function CI(i,e,n){i=Dr(i,hi);const o=Object.assign(Object.assign({},xh),n);return function(c){if(c.maxAttempts<1)throw new it(He.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(c,g,M){const F=new Tr;return c.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){const j=yield function zy(i){return Pf(i).then(e=>e.datastore)}(c);new Tu(c.asyncQueue,j,M,g,F).Ya()})),F.promise}(xs(i),u=>e(new mg(i,u)),o)}(this._delegate,n=>e(new zd(this,n)))}batch(){return xs(this._delegate),new Kf(new kh(this._delegate,e=>vc(this._delegate,e)))}loadBundle(e){return function zl(i,e){const n=xs(i=Dr(i,hi)),o=new Hw;return function Ym(i,e,n,o){const u=function(g,M){let F;return F="string"==typeof g?ju().encode(g):g,Q=function(Q,ae){if(Q instanceof Uint8Array)return $m(Q,void 0);if(Q instanceof ArrayBuffer)return $m(new Uint8Array(Q),void 0);if(Q instanceof ReadableStream)return Q.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(F),new KE(Q,M);var Q}(n,_f(e));i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){!function WE(i,e,n){const o=Tt(i);var u;(u=(0,ce.Z)(function*(g,M,F){try{const j=yield M.getMetadata();if(yield function(yt,Lt){const bt=Tt(yt),vn=$r(Lt.createTime);return bt.persistence.runTransaction("hasNewerBundle","readonly",Zn=>bt.$r.getBundleMetadata(Zn,Lt.id)).then(Zn=>!!Zn&&Zn.createTime.compareTo(vn)>=0)}(g.localStore,j))return yield M.close(),F._completeWith({taskState:"Success",documentsLoaded:(yt=j).totalDocuments,bytesLoaded:yt.totalBytes,totalDocuments:yt.totalDocuments,totalBytes:yt.totalBytes}),Promise.resolve(new Set);F._updateProgress(wm(j));const Q=new BE(j,g.localStore,M.serializer);let ae=yield M.Ba();for(;ae;){const je=yield Q.sa(ae);je&&F._updateProgress(je),ae=yield M.Ba()}const Ie=yield Q.complete();return yield sd(g,Ie.aa,void 0),yield function(yt,Lt){const bt=Tt(yt);return bt.persistence.runTransaction("Save bundle","readwrite",vn=>bt.$r.saveBundleMetadata(vn,Lt))}(g.localStore,j),F._completeWith(Ie.progress),Promise.resolve(Ie._a)}catch(j){return Wi("SyncEngine",`Loading bundle failed with ${j}`),F._failWith(j),Promise.resolve(new Set)}var yt}),function c(g,M,F){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield qm(i),u,o)}))}(n,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function ov(i,e){return function jw(i,e){return i.asyncQueue.enqueue((0,ce.Z)(function*(){return function(o,u){const c=Tt(o);return c.persistence.runTransaction("Get named query","readonly",g=>c.$r.getNamedQuery(g,u))}(yield ad(i),e)}))}(xs(i=Dr(i,hi)),e).then(n=>n?new xo(i,null,n.query):null)}(this._delegate,e).then(n=>n?new _a(this,n):null)}}class ys extends h_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wf(new Wl(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Va.forKey(n,this.firestore,null)}}class zd{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new ys(e)}get(e){const n=ko(e);return this._delegate.get(n).then(o=>new dd(this._firestore,new yl(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,n.converter)))}set(e,n,o){const u=ko(e);return o?(cd("Transaction.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const c=ko(e);return 2===arguments.length?this._delegate.update(c,n):this._delegate.update(c,n,o,...u),this}delete(e){const n=ko(e);return this._delegate.delete(n),this}}class Kf{constructor(e){this._delegate=e}set(e,n,o){const u=ko(e);return o?(cd("WriteBatch.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const c=ko(e);return 2===arguments.length?this._delegate.update(c,n):this._delegate.update(c,n,o,...u),this}delete(e){const n=ko(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class El{constructor(e,n,o){this._firestore=e,this._userDataWriter=n,this._delegate=o}fromFirestore(e,n){const o=new ld(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Wd(this._firestore,o),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const o=El.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let c=u.get(n);return c||(c=new El(e,new ys(e),n),u.set(n,c)),c}}El.INSTANCES=new WeakMap;class Va{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ys(e)}static forPath(e,n,o){if(e.length%2!=0)throw new it("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Va(n,new Ni(n._delegate,o,new Te(e)))}static forKey(e,n,o){return new Va(n,new Ni(n._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Lh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Lh(this.firestore,Rh(this._delegate,e))}catch(n){throw ma(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ze.m9)(e))instanceof Ni&&tv(this._delegate,e)}set(e,n){n=cd("DocumentReference.set",n);try{return n?wv(this._delegate,e,n):wv(this._delegate,e)}catch(o){throw ma(o,"setDoc()","DocumentReference.set()")}}update(e,n,...o){try{return 1===arguments.length?Tv(this._delegate,e):Tv(this._delegate,e,n,...o)}catch(u){throw ma(u,"updateDoc()","DocumentReference.update()")}}delete(){return function mI(i){return vc(Dr(i.firestore,hi),[new Iu(i._key,kt.none())])}(this._delegate)}onSnapshot(...e){const n=E_(e),o=I_(e,u=>new dd(this.firestore,new yl(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return gg(this._delegate,n,o)}get(e){let n;return n="cache"===e?.source?function Ev(i){i=Dr(i,Ni);const e=Dr(i.firestore,hi),n=xs(e),o=new Hu(e);return function YE(i,e){const n=new Tr;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return(o=(0,ce.Z)(function*(c,g,M){try{const F=yield function(Q,ae){const Ie=Tt(Q);return Ie.persistence.runTransaction("read document","readonly",je=>Ie.localDocuments.getDocument(je,ae))}(c,g);F.isFoundDocument()?M.resolve(F):F.isNoDocument()?M.resolve(null):M.reject(new it(He.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(F){const j=Ih(F,`Failed to get document '${g} from cache`);M.reject(j)}}),function u(c,g,M){return o.apply(this,arguments)})(yield ad(i),e,n);var o})),n.promise}(n,i._key).then(u=>new yl(e,o,i._key,u,new _l(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function pI(i){i=Dr(i,Ni);const e=Dr(i.firestore,hi);return Wy(xs(e),i._key,{source:"server"}).then(n=>Nh(e,i,n))}(this._delegate):function fI(i){i=Dr(i,Ni);const e=Dr(i.firestore,hi);return Wy(xs(e),i._key).then(n=>Nh(e,i,n))}(this._delegate),n.then(o=>new dd(this.firestore,new yl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Va(this.firestore,this._delegate.withConverter(e?El.getInstance(this.firestore,e):null))}}function ma(i,e,n){return i.message=i.message.replace(e,n),i}function E_(i){for(const e of i)if("object"==typeof e&&!v_(e))return e;return{}}function I_(i,e){var n,o;let u;return u=v_(i[0])?i[0]:v_(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:c=>{u.next&&u.next(e(c))},error:null===(n=u.error)||void 0===n?void 0:n.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class dd{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Va(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return p_(this._delegate,e._delegate)}}class Wd extends dd{data(e){const n=this._delegate.data(e);return this._delegate._converter||function Aa(i,e){i||vt()}(void 0!==n),n}}class _a{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ys(e)}where(e,n,o){try{return new _a(this.firestore,Kl(this._delegate,function iI(i,e,n){const o=e,u=dg("where",i);return jf._create(u,o,n)}(e,n,o)))}catch(u){throw ma(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new _a(this.firestore,Kl(this._delegate,function sI(i,e="asc"){const n=e,o=dg("orderBy",i);return c_._create(o,n)}(e,n)))}catch(o){throw ma(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _a(this.firestore,Kl(this._delegate,function oI(i){return Xy("limit",i),hg._create("limit",i,"F")}(e)))}catch(n){throw ma(n,"limit()","Query.limit()")}}limitToLast(e){try{return new _a(this.firestore,Kl(this._delegate,function aI(i){return Xy("limitToLast",i),hg._create("limitToLast",i,"L")}(e)))}catch(n){throw ma(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new _a(this.firestore,Kl(this._delegate,function pv(...i){return Hf._create("startAt",i,!0)}(...e)))}catch(n){throw ma(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new _a(this.firestore,Kl(this._delegate,function uI(...i){return Hf._create("startAfter",i,!1)}(...e)))}catch(n){throw ma(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new _a(this.firestore,Kl(this._delegate,function gv(...i){return d_._create("endBefore",i,!1)}(...e)))}catch(n){throw ma(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new _a(this.firestore,Kl(this._delegate,function mv(...i){return d_._create("endAt",i,!0)}(...e)))}catch(n){throw ma(n,"endAt()","Query.endAt()")}}isEqual(e){return e_(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function pg(i){i=Dr(i,xo);const e=Dr(i.firestore,hi),n=xs(e),o=new Hu(e);return function qy(i,e){const n=new Tr;return i.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return(o=(0,ce.Z)(function*(c,g,M){try{const F=yield pf(c,g,!0),j=new Py(g,F.hs),Q=j.Ta(F.documents),ae=j.applyChanges(Q,!1);M.resolve(ae.snapshot)}catch(F){const j=Ih(F,`Failed to execute query '${g} against cache`);M.reject(j)}}),function u(c,g,M){return o.apply(this,arguments)})(yield ad(i),e,n);var o})),n.promise}(n,i._query).then(u=>new yc(e,o,i,u))}(this._delegate):"server"===e?.source?function gI(i){i=Dr(i,xo);const e=Dr(i.firestore,hi),n=xs(e),o=new Hu(e);return Qm(n,i._query,{source:"server"}).then(u=>new yc(e,o,i,u))}(this._delegate):function Iv(i){i=Dr(i,xo);const e=Dr(i.firestore,hi),n=xs(e),o=new Hu(e);return fv(i._query),Qm(n,i._query).then(u=>new yc(e,o,i,u))}(this._delegate),n.then(o=>new Ic(this.firestore,new yc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const n=E_(e),o=I_(e,u=>new Ic(this.firestore,new yc(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return gg(this._delegate,n,o)}withConverter(e){return new _a(this.firestore,this._delegate.withConverter(e?El.getInstance(this.firestore,e):null))}}class yg{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Wd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ic{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new _a(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Wd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new yg(this._firestore,n))}forEach(e,n){this._delegate.forEach(o=>{e.call(n,new Wd(this._firestore,o))})}isEqual(e){return p_(this._delegate,e._delegate)}}class Lh extends _a{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Va(this.firestore,e):null}doc(e){try{return new Va(this.firestore,void 0===e?xf(this._delegate):xf(this._delegate,e))}catch(n){throw ma(n,"doc()","CollectionReference.doc()")}}add(e){return function _I(i,e){const n=Dr(i.firestore,hi),o=xf(i),u=f_(i.converter,e);return vc(n,[kf(ud(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,kt.exists(!1))]).then(()=>o)}(this._delegate,e).then(n=>new Va(this.firestore,n))}isEqual(e){return tv(this._delegate,e._delegate)}withConverter(e){return new Lh(this.firestore,this._delegate.withConverter(e?El.getInstance(this.firestore,e):null))}}function ko(i){return Dr(i,Ni)}class w_{constructor(...e){this._delegate=new ml(...e)}static documentId(){return new w_(ci.keyField().canonicalString())}isEqual(e){return(e=(0,Ze.m9)(e))instanceof ml&&this._delegate._internalPath.isEqual(e._internalPath)}}class qd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Dv(){return new ag("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new qd(e)}static delete(){const e=function DI(){return new Ff("deleteField")}();return e._methodName="FieldValue.delete",new qd(e)}static arrayUnion(...e){const n=function Av(...i){return new ug("arrayUnion",i)}(...e);return n._methodName="FieldValue.arrayUnion",new qd(n)}static arrayRemove(...e){const n=function m_(...i){return new $d("arrayRemove",i)}(...e);return n._methodName="FieldValue.arrayRemove",new qd(n)}static increment(e){const n=function Sv(i){return new i_("increment",i)}(e);return n._methodName="FieldValue.increment",new qd(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const T_={Firestore:Pv,GeoPoint:Ph,Timestamp:Ir,Blob:Wf,Transaction:zd,WriteBatch:Kf,DocumentReference:Va,DocumentSnapshot:dd,Query:_a,QueryDocumentSnapshot:Wd,QuerySnapshot:Ic,CollectionReference:Lh,FieldPath:w_,FieldValue:qd,setLogLevel:function qf(i){!function Us(i){Er.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Nv(i){(function Mv(i,e){i.INTERNAL.registerComponent(new ht.wA("firestore-compat",n=>{const o=n.getProvider("app-compat").getImmediate(),u=n.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},T_)))})(i,(e,n)=>new Pv(e,n,new Rv)),i.registerVersion("@firebase/firestore-compat","0.3.29")}(nt.Z);var RI=$(7142);function Ov(i,e){return function s0(i,e=pe.z){return new Pe.y(n=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},n)}):o=i.onSnapshot({includeMetadataChanges:!0},n),()=>{o?.()}})}(i,e)}function Zf(i,e){return Ov(i,e).pipe((0,Xe.U)(n=>({payload:n,type:"query"})))}class Eg{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const o=this.ref.collection(e),{ref:u,query:c}=b_(o,n);return new A_(u,c,this.afs)}snapshotChanges(){return function vg(i,e){return Ov(i,e).pipe((0,fe.O)(void 0),st(),(0,Xe.U)(n=>{const[o,u]=n;return u.exists?o?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(le.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Xe.U)(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return(0,b.D)(this.ref.get(e)).pipe(le.iC)}}function wc(i,e){return Zf(i,e).pipe((0,fe.O)(void 0),st(),(0,Xe.U)(n=>{const[o,u]=n,c=u.payload.docChanges(),g=c.map(M=>({type:M.type,payload:M}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((M,F)=>{const j=c.find(ae=>ae.doc.ref.isEqual(M.ref)),Q=o?.payload.docs.find(ae=>ae.ref.isEqual(M.ref));j&&JSON.stringify(j.doc.metadata)===JSON.stringify(M.metadata)||!j&&Q&&JSON.stringify(Q.metadata)===JSON.stringify(M.metadata)||g.push({type:"modified",payload:{oldIndex:F,newIndex:F,type:"modified",doc:M}})}),g}))}function C_(i,e,n){return wc(i,n).pipe((0,gt.R)((o,u)=>function xv(i,e,n){return e.forEach(o=>{n.indexOf(o.type)>-1&&(i=function D_(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return hd(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=i.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return hd(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return hd(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(c=>c.payload),e),[]),function Et(i,e=qt.y){return i=i??dt,(0,he.e)((n,o)=>{let u,c=!0;n.subscribe((0,Oe.x)(o,g=>{const M=e(g);(c||!i(u,M))&&(c=!1,u=M,o.next(g))}))})}(),(0,Xe.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function hd(i,e,n,...o){const u=i.slice();return u.splice(e,n,...o),u}function Ig(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class A_{ref;query;afs;constructor(e,n,o){this.ref=e,this.query=n,this.afs=o}stateChanges(e){let n=wc(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,Xe.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),n.pipe((0,fe.O)(void 0),st(),(0,Kt.h)(([o,u])=>u.length>0||!o),(0,Xe.U)(([,o])=>o),le.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,gt.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=Ig(e);return C_(this.query,n,this.afs.schedulers.outsideAngular).pipe(le.iC)}valueChanges(e={}){return Zf(this.query,this.afs.schedulers.outsideAngular).pipe((0,Xe.U)(n=>n.payload.docs.map(o=>e.idField?{...o.data(),[e.idField]:o.id}:o.data())),le.iC)}get(e){return(0,b.D)(this.query.get(e)).pipe(le.iC)}add(e){return this.ref.add(e)}doc(e){return new Eg(this.ref.doc(e),this.afs)}}class kv{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?wc(this.query,this.afs.schedulers.outsideAngular).pipe((0,Xe.U)(n=>n.filter(o=>e.indexOf(o.type)>-1)),(0,Kt.h)(n=>n.length>0),le.iC):wc(this.query,this.afs.schedulers.outsideAngular).pipe(le.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,gt.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=Ig(e);return C_(this.query,n,this.afs.schedulers.outsideAngular).pipe(le.iC)}valueChanges(e={}){return Zf(this.query,this.afs.schedulers.outsideAngular).pipe((0,Xe.U)(o=>o.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),le.iC)}get(e){return(0,b.D)(this.query.get(e)).pipe(le.iC)}}const S_=new W.OlP("angularfire2.enableFirestorePersistence"),Fv=new W.OlP("angularfire2.firestore.persistenceSettings"),PI=new W.OlP("angularfire2.firestore.settings"),Vh=new W.OlP("angularfire2.firestore.use-emulator");function b_(i,e=(n=>n)){return{query:e(i),ref:i}}let Lv=(()=>{class i{schedulers;firestore;persistenceEnabled$;constructor(n,o,u,c,g,M,F,j,Q,ae,Ie,je,yt,Lt,bt,vn,Zn){this.schedulers=F;const mn=(0,se.on)(n,M,o),Qn=Q;ae&&(0,ye.nw)(mn,M,Ie,yt,Lt,bt,je,vn),[this.firestore,this.persistenceEnabled$]=(0,se.cc)(`${mn.name}.firestore`,"AngularFirestore",mn.name,()=>{const Gr=M.runOutsideAngular(()=>mn.firestore());if(c&&Gr.settings(c),Qn&&Gr.useEmulator(...Qn),u&&!(0,C.PM)(g)){const ri=()=>{try{return(0,b.D)(Gr.enablePersistence(j||void 0).then(()=>!0,()=>!1))}catch(zs){return typeof console<"u"&&console.warn(zs),(0,Fe.of)(!1)}};return[Gr,M.runOutsideAngular(ri)]}return[Gr,(0,Fe.of)(!1)]},[c,Qn,u])}collection(n,o){let u;u="string"==typeof n?this.firestore.collection(n):n;const{ref:c,query:g}=b_(u,o),M=this.schedulers.ngZone.run(()=>c);return new A_(M,g,this)}collectionGroup(n,o){const u=o||(g=>g),c=this.firestore.collectionGroup(n);return new kv(u(c),this)}doc(n){let o;o="string"==typeof n?this.firestore.doc(n):n;const u=this.schedulers.ngZone.run(()=>o);return new Eg(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||i)(W.LFG(se.Dh),W.LFG(se.xv,8),W.LFG(S_,8),W.LFG(PI,8),W.LFG(W.Lbi),W.LFG(W.R0b),W.LFG(le.HU),W.LFG(Fv,8),W.LFG(Vh,8),W.LFG(ye.zQ,8),W.LFG(ye.Qv,8),W.LFG(ye.L6,8),W.LFG(ye._Q,8),W.LFG(ye.rT,8),W.LFG(ye.lh,8),W.LFG(ye.f7,8),W.LFG(le.Rf,8))};static \u0275prov=W.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})(),MI=(()=>{class i{constructor(){RI.Z.registerVersion("angularfire",le.q4.full,"fst-compat")}static enablePersistence(n){return{ngModule:i,providers:[{provide:S_,useValue:!0},{provide:Fv,useValue:n}]}}static \u0275fac=function(o){return new(o||i)};static \u0275mod=W.oAB({type:i});static \u0275inj=W.cJS({providers:[Lv]})}return i})()},7217:(Mt,Ue,$)=>{$.d(Ue,{Dh:()=>b,GT:()=>pe,cc:()=>Xe,hO:()=>st,on:()=>fe,pX:()=>ye,xv:()=>Fe});var C=$(9212),W=$(8326),le=$(7142);const se=["ngOnDestroy"],ye=(dt,Kt,Bt,nt={})=>new Proxy(dt,{get:(ce,ze)=>Bt.runOutsideAngular(()=>{if(dt[ze])return nt?.spy?.get&&nt.spy.get(ze,dt[ze]),dt[ze];if(se.indexOf(ze)>-1)return()=>{};const ht=Kt.toPromise().then(Ge=>{const Ze=Ge?.[ze];return"function"==typeof Ze?Ze.bind(Ge):Ze?.then?Ze.then($e=>Bt.run(()=>$e)):Bt.run(()=>Ze)});return new Proxy(()=>{},{get:(Ge,Ze)=>ht[Ze],apply:(Ge,Ze,$e)=>ht.then(ue=>{const Ve=ue?.(...$e);return nt?.spy?.apply&&nt.spy.apply(ze,$e,Ve),Ve})})})}),pe=(dt,Kt)=>{Kt.forEach(Bt=>{Object.getOwnPropertyNames(Bt.prototype||Bt).forEach(nt=>{Object.defineProperty(dt.prototype,nt,Object.getOwnPropertyDescriptor(Bt.prototype||Bt,nt))})})};class Pe{constructor(Kt){return Kt}}const b=new C.OlP("angularfire2.app.options"),Fe=new C.OlP("angularfire2.app.name");function fe(dt,Kt,Bt){const ce="object"==typeof Bt&&Bt||{};ce.name=ce.name||"string"==typeof Bt&&Bt||"[DEFAULT]";const ht=le.Z.apps.filter(Ge=>Ge&&Ge.name===ce.name)[0]||Kt.runOutsideAngular(()=>le.Z.initializeApp(dt,ce));try{if(JSON.stringify(dt)!==JSON.stringify(ht.options)){const Ge=!!module.hot;he("error",`${ht.name} Firebase App already initialized with different options${Ge?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Pe(ht)}const he=(dt,...Kt)=>{(0,C.X6Q)()&&typeof console<"u"&&console[dt](...Kt)},Oe={provide:Pe,useFactory:fe,deps:[b,C.R0b,[new C.FiY,Fe]]};let st=(()=>{class dt{static initializeApp(Bt,nt){return{ngModule:dt,providers:[{provide:b,useValue:Bt},{provide:Fe,useValue:nt}]}}constructor(Bt){le.Z.registerVersion("angularfire",W.q4.full,"core"),le.Z.registerVersion("angularfire",W.q4.full,"app-compat"),le.Z.registerVersion("angular",C.q4F.full,Bt.toString())}static \u0275fac=function(nt){return new(nt||dt)(C.LFG(C.Lbi))};static \u0275mod=C.oAB({type:dt});static \u0275inj=C.cJS({providers:[Oe]})}return dt})();function Xe(dt,Kt,Bt,nt,ce){const[,ze,ht]=globalThis.\u0275AngularfireInstanceCache.find(Ge=>Ge[0]===dt)||[];if(ze)return function gt(dt,Kt){try{return dt.toString()===Kt.toString()}catch{return dt===Kt}}(ce,ht)||(Et("error",`${Kt} was already initialized on the ${Bt} Firebase App with different settings.${qt?" You may need to reload as Firebase is not HMR aware.":""}`),Et("warn",{is:ce,was:ht})),ze;{const Ge=nt();return globalThis.\u0275AngularfireInstanceCache.push([dt,Ge,ce]),Ge}}const qt=typeof module<"u"&&!!module.hot,Et=(dt,...Kt)=>{(0,C.X6Q)()&&typeof console<"u"&&console[dt](...Kt)};globalThis.\u0275AngularfireInstanceCache||=[]},8326:(Mt,Ue,$)=>{$.d(Ue,{q4:()=>gt,iC:()=>an,fc:()=>ue,HU:()=>ht,Rf:()=>Kt});var C=$(9212),W=$(534);(0,W.registerVersion)("firebase","10.11.0","app");var ye=$(1954),Pe=$(2631);const Fe=new class b extends Pe.v{}(class pe extends ye.o{constructor(rn,Ee){super(rn,Ee),this.scheduler=rn,this.work=Ee}schedule(rn,Ee=0){return Ee>0?super.schedule(rn,Ee):(this.delay=Ee,this.state=rn,this.scheduler.flush(this),this)}execute(rn,Ee){return Ee>0||this.closed?super.execute(rn,Ee):this._execute(rn,Ee)}requestAsyncId(rn,Ee,be=0){return null!=be&&be>0||null==be&&this.delay>0?super.requestAsyncId(rn,Ee,be):(rn.flush(this),0)}});var he=$(6321),Oe=$(9397),st=$(3093),Xe=$(5137);const gt=new C.GfV("ANGULARFIRE2_VERSION");class Kt{constructor(){return((zt,rn)=>{const Ee=(0,W.getApps)(),be=[];return Ee.forEach(Se=>{Se.container.getProvider(zt).instances.forEach(We=>{be.includes(We)||be.push(We)})}),be})(Bt)}}const Bt="app-check";function nt(){}class ce{zone;delegate;constructor(rn,Ee=Fe){this.zone=rn,this.delegate=Ee}now(){return this.delegate.now()}schedule(rn,Ee,be){const Se=this.zone;return this.delegate.schedule(function(We){Se.runGuarded(()=>{rn.apply(this,[We])})},Ee,be)}}class ze{zone;task=null;constructor(rn){this.zone=rn}call(rn,Ee){const be=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",nt,{},nt,nt)),Ee.pipe((0,Oe.b)({next:be,complete:be,error:be})).subscribe(rn).add(be)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ht=(()=>{class zt{ngZone;outsideAngular;insideAngular;constructor(Ee){this.ngZone=Ee,this.outsideAngular=Ee.runOutsideAngular(()=>new ce(Zone.current)),this.insideAngular=Ee.run(()=>new ce(Zone.current,he.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(be){return new(be||zt)(C.LFG(C.R0b))};static \u0275prov=C.Yz7({token:zt,factory:zt.\u0275fac,providedIn:"root"})}return zt})();function Ge(){const zt=globalThis.\u0275AngularFireScheduler;if(!zt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return zt}function ue(zt){return zt.pipe((0,st.Q)(Ge().outsideAngular))}function an(zt){return function At(zt){return function(Ee){return(Ee=Ee.lift(new ze(zt.ngZone))).pipe((0,Xe.R)(zt.outsideAngular),(0,st.Q)(zt.insideAngular))}}(Ge())(zt)}},6593:(Mt,Ue,$)=>{$.d(Ue,{Dx:()=>fr,b2:()=>Ar,q6:()=>jt,se:()=>Ge});var C=$(9212),W=$(6814);class le extends W.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class se extends le{static makeCurrent(){(0,W.HT)(new se)}onAndCancel(ne,ee,re){return ne.addEventListener(ee,re),()=>{ne.removeEventListener(ee,re)}}dispatchEvent(ne,ee){ne.dispatchEvent(ee)}remove(ne){ne.parentNode&&ne.parentNode.removeChild(ne)}createElement(ne,ee){return(ee=ee||this.getDefaultDocument()).createElement(ne)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ne){return ne.nodeType===Node.ELEMENT_NODE}isShadowRoot(ne){return ne instanceof DocumentFragment}getGlobalEventTarget(ne,ee){return"window"===ee?window:"document"===ee?ne:"body"===ee?ne.body:null}getBaseHref(ne){const ee=function pe(){return ye=ye||document.querySelector("base"),ye?ye.getAttribute("href"):null}();return null==ee?null:function Pe(X){return new URL(X,document.baseURI).pathname}(ee)}resetBaseElement(){ye=null}getUserAgent(){return window.navigator.userAgent}getCookie(ne){return(0,W.Mx)(document.cookie,ne)}}let ye=null,Fe=(()=>{class X{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(re){return new(re||X)};static#t=this.\u0275prov=C.Yz7({token:X,factory:X.\u0275fac})}return X})();const fe=new C.OlP("EventManagerPlugins");let he=(()=>{class X{constructor(ee,re){this._zone=re,this._eventNameToPlugin=new Map,ee.forEach(we=>{we.manager=this}),this._plugins=ee.slice().reverse()}addEventListener(ee,re,we){return this._findPluginFor(re).addEventListener(ee,re,we)}getZone(){return this._zone}_findPluginFor(ee){let re=this._eventNameToPlugin.get(ee);if(re)return re;if(re=this._plugins.find(et=>et.supports(ee)),!re)throw new C.vHH(5101,!1);return this._eventNameToPlugin.set(ee,re),re}static#e=this.\u0275fac=function(re){return new(re||X)(C.LFG(fe),C.LFG(C.R0b))};static#t=this.\u0275prov=C.Yz7({token:X,factory:X.\u0275fac})}return X})();class Oe{constructor(ne){this._doc=ne}}const st="ng-app-id";let Xe=(()=>{class X{constructor(ee,re,we,et={}){this.doc=ee,this.appId=re,this.nonce=we,this.platformId=et,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,W.PM)(et),this.resetHostNodes()}addStyles(ee){for(const re of ee)1===this.changeUsageCount(re,1)&&this.onStyleAdded(re)}removeStyles(ee){for(const re of ee)this.changeUsageCount(re,-1)<=0&&this.onStyleRemoved(re)}ngOnDestroy(){const ee=this.styleNodesInDOM;ee&&(ee.forEach(re=>re.remove()),ee.clear());for(const re of this.getAllStyles())this.onStyleRemoved(re);this.resetHostNodes()}addHost(ee){this.hostNodes.add(ee);for(const re of this.getAllStyles())this.addStyleToHost(ee,re)}removeHost(ee){this.hostNodes.delete(ee)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(ee){for(const re of this.hostNodes)this.addStyleToHost(re,ee)}onStyleRemoved(ee){const re=this.styleRef;re.get(ee)?.elements?.forEach(we=>we.remove()),re.delete(ee)}collectServerRenderedStyles(){const ee=this.doc.head?.querySelectorAll(`style[${st}="${this.appId}"]`);if(ee?.length){const re=new Map;return ee.forEach(we=>{null!=we.textContent&&re.set(we.textContent,we)}),re}return null}changeUsageCount(ee,re){const we=this.styleRef;if(we.has(ee)){const et=we.get(ee);return et.usage+=re,et.usage}return we.set(ee,{usage:re,elements:[]}),re}getStyleElement(ee,re){const we=this.styleNodesInDOM,et=we?.get(re);if(et?.parentNode===ee)return we.delete(re),et.removeAttribute(st),et;{const Nt=this.doc.createElement("style");return this.nonce&&Nt.setAttribute("nonce",this.nonce),Nt.textContent=re,this.platformIsServer&&Nt.setAttribute(st,this.appId),ee.appendChild(Nt),Nt}}addStyleToHost(ee,re){const we=this.getStyleElement(ee,re),et=this.styleRef,Nt=et.get(re)?.elements;Nt?Nt.push(we):et.set(re,{elements:[we],usage:1})}resetHostNodes(){const ee=this.hostNodes;ee.clear(),ee.add(this.doc.head)}static#e=this.\u0275fac=function(re){return new(re||X)(C.LFG(W.K0),C.LFG(C.AFp),C.LFG(C.Ojb,8),C.LFG(C.Lbi))};static#t=this.\u0275prov=C.Yz7({token:X,factory:X.\u0275fac})}return X})();const gt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qt=/%COMP%/g,nt=new C.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!0});function ht(X,ne){return ne.map(ee=>ee.replace(qt,X))}let Ge=(()=>{class X{constructor(ee,re,we,et,Nt,hn,Wt,Hn=null){this.eventManager=ee,this.sharedStylesHost=re,this.appId=we,this.removeStylesOnCompDestroy=et,this.doc=Nt,this.platformId=hn,this.ngZone=Wt,this.nonce=Hn,this.rendererByCompId=new Map,this.platformIsServer=(0,W.PM)(hn),this.defaultRenderer=new Ze(ee,Nt,Wt,this.platformIsServer)}createRenderer(ee,re){if(!ee||!re)return this.defaultRenderer;this.platformIsServer&&re.encapsulation===C.ifc.ShadowDom&&(re={...re,encapsulation:C.ifc.Emulated});const we=this.getOrCreateRenderer(ee,re);return we instanceof Un?we.applyToHost(ee):we instanceof At&&we.applyStyles(),we}getOrCreateRenderer(ee,re){const we=this.rendererByCompId;let et=we.get(re.id);if(!et){const Nt=this.doc,hn=this.ngZone,Wt=this.eventManager,Hn=this.sharedStylesHost,fn=this.removeStylesOnCompDestroy,Mn=this.platformIsServer;switch(re.encapsulation){case C.ifc.Emulated:et=new Un(Wt,Hn,re,this.appId,fn,Nt,hn,Mn);break;case C.ifc.ShadowDom:return new an(Wt,Hn,ee,re,Nt,hn,this.nonce,Mn);default:et=new At(Wt,Hn,re,fn,Nt,hn,Mn)}we.set(re.id,et)}return et}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(re){return new(re||X)(C.LFG(he),C.LFG(Xe),C.LFG(C.AFp),C.LFG(nt),C.LFG(W.K0),C.LFG(C.Lbi),C.LFG(C.R0b),C.LFG(C.Ojb))};static#t=this.\u0275prov=C.Yz7({token:X,factory:X.\u0275fac})}return X})();class Ze{constructor(ne,ee,re,we){this.eventManager=ne,this.doc=ee,this.ngZone=re,this.platformIsServer=we,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(ne,ee){return ee?this.doc.createElementNS(gt[ee]||ee,ne):this.doc.createElement(ne)}createComment(ne){return this.doc.createComment(ne)}createText(ne){return this.doc.createTextNode(ne)}appendChild(ne,ee){(Ve(ne)?ne.content:ne).appendChild(ee)}insertBefore(ne,ee,re){ne&&(Ve(ne)?ne.content:ne).insertBefore(ee,re)}removeChild(ne,ee){ne&&ne.removeChild(ee)}selectRootElement(ne,ee){let re="string"==typeof ne?this.doc.querySelector(ne):ne;if(!re)throw new C.vHH(-5104,!1);return ee||(re.textContent=""),re}parentNode(ne){return ne.parentNode}nextSibling(ne){return ne.nextSibling}setAttribute(ne,ee,re,we){if(we){ee=we+":"+ee;const et=gt[we];et?ne.setAttributeNS(et,ee,re):ne.setAttribute(ee,re)}else ne.setAttribute(ee,re)}removeAttribute(ne,ee,re){if(re){const we=gt[re];we?ne.removeAttributeNS(we,ee):ne.removeAttribute(`${re}:${ee}`)}else ne.removeAttribute(ee)}addClass(ne,ee){ne.classList.add(ee)}removeClass(ne,ee){ne.classList.remove(ee)}setStyle(ne,ee,re,we){we&(C.JOm.DashCase|C.JOm.Important)?ne.style.setProperty(ee,re,we&C.JOm.Important?"important":""):ne.style[ee]=re}removeStyle(ne,ee,re){re&C.JOm.DashCase?ne.style.removeProperty(ee):ne.style[ee]=""}setProperty(ne,ee,re){null!=ne&&(ne[ee]=re)}setValue(ne,ee){ne.nodeValue=ee}listen(ne,ee,re){if("string"==typeof ne&&!(ne=(0,W.q)().getGlobalEventTarget(this.doc,ne)))throw new Error(`Unsupported event target ${ne} for event ${ee}`);return this.eventManager.addEventListener(ne,ee,this.decoratePreventDefault(re))}decoratePreventDefault(ne){return ee=>{if("__ngUnwrap__"===ee)return ne;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>ne(ee)):ne(ee))&&ee.preventDefault()}}}function Ve(X){return"TEMPLATE"===X.tagName&&void 0!==X.content}class an extends Ze{constructor(ne,ee,re,we,et,Nt,hn,Wt){super(ne,et,Nt,Wt),this.sharedStylesHost=ee,this.hostEl=re,this.shadowRoot=re.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Hn=ht(we.id,we.styles);for(const fn of Hn){const Mn=document.createElement("style");hn&&Mn.setAttribute("nonce",hn),Mn.textContent=fn,this.shadowRoot.appendChild(Mn)}}nodeOrShadowRoot(ne){return ne===this.hostEl?this.shadowRoot:ne}appendChild(ne,ee){return super.appendChild(this.nodeOrShadowRoot(ne),ee)}insertBefore(ne,ee,re){return super.insertBefore(this.nodeOrShadowRoot(ne),ee,re)}removeChild(ne,ee){return super.removeChild(this.nodeOrShadowRoot(ne),ee)}parentNode(ne){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ne)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class At extends Ze{constructor(ne,ee,re,we,et,Nt,hn,Wt){super(ne,et,Nt,hn),this.sharedStylesHost=ee,this.removeStylesOnCompDestroy=we,this.styles=Wt?ht(Wt,re.styles):re.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Un extends At{constructor(ne,ee,re,we,et,Nt,hn,Wt){const Hn=we+"-"+re.id;super(ne,ee,re,et,Nt,hn,Wt,Hn),this.contentAttr=function ce(X){return"_ngcontent-%COMP%".replace(qt,X)}(Hn),this.hostAttr=function ze(X){return"_nghost-%COMP%".replace(qt,X)}(Hn)}applyToHost(ne){this.applyStyles(),this.setAttribute(ne,this.hostAttr,"")}createElement(ne,ee){const re=super.createElement(ne,ee);return super.setAttribute(re,this.contentAttr,""),re}}let Rn=(()=>{class X extends Oe{constructor(ee){super(ee)}supports(ee){return!0}addEventListener(ee,re,we){return ee.addEventListener(re,we,!1),()=>this.removeEventListener(ee,re,we)}removeEventListener(ee,re,we){return ee.removeEventListener(re,we)}static#e=this.\u0275fac=function(re){return new(re||X)(C.LFG(W.K0))};static#t=this.\u0275prov=C.Yz7({token:X,factory:X.\u0275fac})}return X})();const zt=["alt","control","meta","shift"],rn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ee={alt:X=>X.altKey,control:X=>X.ctrlKey,meta:X=>X.metaKey,shift:X=>X.shiftKey};let be=(()=>{class X extends Oe{constructor(ee){super(ee)}supports(ee){return null!=X.parseEventName(ee)}addEventListener(ee,re,we){const et=X.parseEventName(re),Nt=X.eventCallback(et.fullKey,we,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,W.q)().onAndCancel(ee,et.domEventName,Nt))}static parseEventName(ee){const re=ee.toLowerCase().split("."),we=re.shift();if(0===re.length||"keydown"!==we&&"keyup"!==we)return null;const et=X._normalizeKey(re.pop());let Nt="",hn=re.indexOf("code");if(hn>-1&&(re.splice(hn,1),Nt="code."),zt.forEach(Hn=>{const fn=re.indexOf(Hn);fn>-1&&(re.splice(fn,1),Nt+=Hn+".")}),Nt+=et,0!=re.length||0===et.length)return null;const Wt={};return Wt.domEventName=we,Wt.fullKey=Nt,Wt}static matchEventFullKeyCode(ee,re){let we=rn[ee.key]||ee.key,et="";return re.indexOf("code.")>-1&&(we=ee.code,et="code."),!(null==we||!we)&&(we=we.toLowerCase()," "===we?we="space":"."===we&&(we="dot"),zt.forEach(Nt=>{Nt!==we&&(0,Ee[Nt])(ee)&&(et+=Nt+".")}),et+=we,et===re)}static eventCallback(ee,re,we){return et=>{X.matchEventFullKeyCode(et,ee)&&we.runGuarded(()=>re(et))}}static _normalizeKey(ee){return"esc"===ee?"escape":ee}static#e=this.\u0275fac=function(re){return new(re||X)(C.LFG(W.K0))};static#t=this.\u0275prov=C.Yz7({token:X,factory:X.\u0275fac})}return X})();const jt=(0,C.eFA)(C._c5,"browser",[{provide:C.Lbi,useValue:W.bD},{provide:C.g9A,useValue:function ut(){se.makeCurrent()},multi:!0},{provide:W.K0,useFactory:function Rt(){return(0,C.RDi)(document),document},deps:[]}]),Ht=new C.OlP(""),Dn=[{provide:C.rWj,useClass:class b{addToWindow(ne){C.dqk.getAngularTestability=(re,we=!0)=>{const et=ne.findTestabilityInTree(re,we);if(null==et)throw new C.vHH(5103,!1);return et},C.dqk.getAllAngularTestabilities=()=>ne.getAllTestabilities(),C.dqk.getAllAngularRootElements=()=>ne.getAllRootElements(),C.dqk.frameworkStabilizers||(C.dqk.frameworkStabilizers=[]),C.dqk.frameworkStabilizers.push(re=>{const we=C.dqk.getAllAngularTestabilities();let et=we.length;const Nt=function(){et--,0==et&&re()};we.forEach(hn=>{hn.whenStable(Nt)})})}findTestabilityInTree(ne,ee,re){return null==ee?null:ne.getTestability(ee)??(re?(0,W.q)().isShadowRoot(ee)?this.findTestabilityInTree(ne,ee.host,!0):this.findTestabilityInTree(ne,ee.parentElement,!0):null)}},deps:[]},{provide:C.lri,useClass:C.dDg,deps:[C.R0b,C.eoX,C.rWj]},{provide:C.dDg,useClass:C.dDg,deps:[C.R0b,C.eoX,C.rWj]}],hr=[{provide:C.zSh,useValue:"root"},{provide:C.qLn,useFactory:function Dt(){return new C.qLn},deps:[]},{provide:fe,useClass:Rn,multi:!0,deps:[W.K0,C.R0b,C.Lbi]},{provide:fe,useClass:be,multi:!0,deps:[W.K0]},Ge,Xe,he,{provide:C.FYo,useExisting:Ge},{provide:W.JF,useClass:Fe,deps:[]},[]];let Ar=(()=>{class X{constructor(ee){}static withServerTransition(ee){return{ngModule:X,providers:[{provide:C.AFp,useValue:ee.appId}]}}static#e=this.\u0275fac=function(re){return new(re||X)(C.LFG(Ht,12))};static#t=this.\u0275mod=C.oAB({type:X});static#n=this.\u0275inj=C.cJS({providers:[...hr,...Dn],imports:[W.ez,C.hGG]})}return X})(),fr=(()=>{class X{constructor(ee){this._doc=ee}getTitle(){return this._doc.title}setTitle(ee){this._doc.title=ee||""}static#e=this.\u0275fac=function(re){return new(re||X)(C.LFG(W.K0))};static#t=this.\u0275prov=C.Yz7({token:X,factory:function(re){let we=null;return we=re?new re:function Sr(){return new fr((0,C.LFG)(W.K0))}(),we},providedIn:"root"})}return X})();typeof window<"u"&&window},8878:(Mt,Ue,$)=>{$.d(Ue,{gz:()=>ji,wm:()=>Tr,F0:()=>Mi,rH:()=>Aa,Bz:()=>hs,lC:()=>es,eV:()=>mr});var C=$(9212),W=$(5592),le=$(4674),ye=$(2459),pe=$(2096),Pe=$(5619),b=$(7453),Fe=$(2737),fe=$(7400),he=$(9940),Oe=$(2714),st=$(8251),Xe=$(7103);function gt(...I){const O=(0,he.yG)(I),S=(0,he.jO)(I),{args:x,keys:H}=(0,b.D)(I);if(0===x.length)return(0,ye.D)([],O);const J=new W.y(function qt(I,O,S=Fe.y){return x=>{Et(O,()=>{const{length:H}=I,J=new Array(H);let de=H,Le=H;for(let ke=0;ke<H;ke++)Et(O,()=>{const Ct=(0,ye.D)(I[ke],O);let bn=!1;Ct.subscribe((0,st.x)(x,pn=>{J[ke]=pn,bn||(bn=!0,Le--),Le||x.next(S(J.slice()))},()=>{--de||x.complete()}))},x)},x)}}(x,O,H?de=>(0,Oe.n)(H,de):Fe.y));return S?J.pipe((0,fe.Z)(S)):J}function Et(I,O,S){I?(0,Xe.f)(S,I,O):O()}var dt=$(6973),Kt=$(5211),Bt=$(4911),nt=$(8407),ce=$(8504),ze=$(6232),ht=$(3168),Ge=$(8645),Ze=$(7394),$e=$(6814),ue=$(7398),Ve=$(4664),an=$(8180),At=$(7921),Un=$(2181),Rn=$(1631),zt=$(1374);function rn(I,O){return(0,le.m)(O)?(0,Rn.z)(I,O,1):(0,Rn.z)(I,1)}var Ee=$(9397),be=$(4829),Se=$(9360);function De(I){return(0,Se.e)((O,S)=>{let J,x=null,H=!1;x=O.subscribe((0,st.x)(S,void 0,void 0,de=>{J=(0,be.Xf)(I(de,De(I)(O))),x?(x.unsubscribe(),x=null,J.subscribe(S)):H=!0})),H&&(x.unsubscribe(),x=null,J.subscribe(S))})}var We=$(6699),Me=$(3572);function ut(I){return I<=0?()=>ze.E:(0,Se.e)((O,S)=>{let x=[];O.subscribe((0,st.x)(S,H=>{x.push(H),I<x.length&&x.shift()},()=>{for(const H of x)S.next(H);S.complete()},void 0,()=>{x=null}))})}var Dt=$(3026),It=$(975);function jt(I){return(0,Se.e)((O,S)=>{try{O.subscribe(S)}finally{S.add(I)}})}var Ht=$(6196),Dn=$(2420),Ar=$(7537),Sn=$(6593);const Vt="primary",ft=Symbol("RouteTitle");class Sr{constructor(O){this.params=O||{}}has(O){return Object.prototype.hasOwnProperty.call(this.params,O)}get(O){if(this.has(O)){const S=this.params[O];return Array.isArray(S)?S[0]:S}return null}getAll(O){if(this.has(O)){const S=this.params[O];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function fr(I){return new Sr(I)}function Wr(I,O,S){const x=S.path.split("/");if(x.length>I.length||"full"===S.pathMatch&&(O.hasChildren()||x.length<I.length))return null;const H={};for(let J=0;J<x.length;J++){const de=x[J],Le=I[J];if(de.startsWith(":"))H[de.substring(1)]=Le;else if(de!==Le.path)return null}return{consumed:I.slice(0,x.length),posParams:H}}function pr(I,O){const S=I?nr(I):void 0,x=O?nr(O):void 0;if(!S||!x||S.length!=x.length)return!1;let H;for(let J=0;J<S.length;J++)if(H=S[J],!An(I[H],O[H]))return!1;return!0}function nr(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}function An(I,O){if(Array.isArray(I)&&Array.isArray(O)){if(I.length!==O.length)return!1;const S=[...I].sort(),x=[...O].sort();return S.every((H,J)=>x[J]===H)}return I===O}function Yt(I){return function se(I){return!!I&&(I instanceof W.y||(0,le.m)(I.lift)&&(0,le.m)(I.subscribe))}(I)?I:(0,C.QGY)(I)?(0,ye.D)(Promise.resolve(I)):(0,pe.of)(I)}const Ai={exact:function Ln(I,O,S){if(!qr(I.segments,O.segments)||!_t(I.segments,O.segments,S)||I.numberOfChildren!==O.numberOfChildren)return!1;for(const x in O.children)if(!I.children[x]||!Ln(I.children[x],O.children[x],S))return!1;return!0},subset:qn},En={exact:function Bn(I,O){return pr(I,O)},subset:function Fo(I,O){return Object.keys(O).length<=Object.keys(I).length&&Object.keys(O).every(S=>An(I[S],O[S]))},ignored:()=>!0};function Fr(I,O,S){return Ai[S.paths](I.root,O.root,S.matrixParams)&&En[S.queryParams](I.queryParams,O.queryParams)&&!("exact"===S.fragment&&I.fragment!==O.fragment)}function qn(I,O,S){return Qi(I,O,O.segments,S)}function Qi(I,O,S,x){if(I.segments.length>S.length){const H=I.segments.slice(0,S.length);return!(!qr(H,S)||O.hasChildren()||!_t(H,S,x))}if(I.segments.length===S.length){if(!qr(I.segments,S)||!_t(I.segments,S,x))return!1;for(const H in O.children)if(!I.children[H]||!qn(I.children[H],O.children[H],x))return!1;return!0}{const H=S.slice(0,I.segments.length),J=S.slice(I.segments.length);return!!(qr(I.segments,H)&&_t(I.segments,H,x)&&I.children[Vt])&&Qi(I.children[Vt],O,J,x)}}function _t(I,O,S){return O.every((x,H)=>En[S](I[H].parameters,x.parameters))}class Ui{constructor(O=new wn([],{}),S={},x=null){this.root=O,this.queryParams=S,this.fragment=x}get queryParamMap(){return this._queryParamMap??=fr(this.queryParams),this._queryParamMap}toString(){return Br.serialize(this)}}class wn{constructor(O,S){this.segments=O,this.children=S,this.parent=null,Object.values(S).forEach(x=>x.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return en(this)}}class Yn{constructor(O,S){this.path=O,this.parameters=S}get parameterMap(){return this._parameterMap??=fr(this.parameters),this._parameterMap}toString(){return we(this)}}function qr(I,O){return I.length===O.length&&I.every((S,x)=>S.path===O[x].path)}let zn=(()=>{class I{static#e=this.\u0275fac=function(x){return new(x||I)};static#t=this.\u0275prov=C.Yz7({token:I,factory:()=>new rr,providedIn:"root"})}return I})();class rr{parse(O){const S=new Ua(O);return new Ui(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(O){const S=`/${Pn(O.root,!0)}`,x=function Nt(I){const O=Object.entries(I).map(([S,x])=>Array.isArray(x)?x.map(H=>`${me(S)}=${me(H)}`).join("&"):`${me(S)}=${me(x)}`).filter(S=>S);return O.length?`?${O.join("&")}`:""}(O.queryParams);return`${S}${x}${"string"==typeof O.fragment?`#${function X(I){return encodeURI(I)}(O.fragment)}`:""}`}}const Br=new rr;function en(I){return I.segments.map(O=>we(O)).join("/")}function Pn(I,O){if(!I.hasChildren())return en(I);if(O){const S=I.children[Vt]?Pn(I.children[Vt],!1):"",x=[];return Object.entries(I.children).forEach(([H,J])=>{H!==Vt&&x.push(`${H}:${Pn(J,!1)}`)}),x.length>0?`${S}(${x.join("//")})`:S}{const S=function Oi(I,O){let S=[];return Object.entries(I.children).forEach(([x,H])=>{x===Vt&&(S=S.concat(O(H,x)))}),Object.entries(I.children).forEach(([x,H])=>{x!==Vt&&(S=S.concat(O(H,x)))}),S}(I,(x,H)=>H===Vt?[Pn(I.children[Vt],!1)]:[`${H}:${Pn(x,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[Vt]?`${en(I)}/${S[0]}`:`${en(I)}/(${S.join("//")})`}}function ss(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function me(I){return ss(I).replace(/%3B/gi,";")}function ne(I){return ss(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ee(I){return decodeURIComponent(I)}function re(I){return ee(I.replace(/\+/g,"%20"))}function we(I){return`${ne(I.path)}${function et(I){return Object.entries(I).map(([O,S])=>`;${ne(O)}=${ne(S)}`).join("")}(I.parameters)}`}const hn=/^[^\/()?;#]+/;function Wt(I){const O=I.match(hn);return O?O[0]:""}const Hn=/^[^\/()?;=#]+/,Mn=/^[^=?&#]+/,Ws=/^[^&#]+/;class Ua{constructor(O){this.url=O,this.remaining=O}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wn([],{}):new wn([],this.parseChildren())}parseQueryParams(){const O={};if(this.consumeOptional("?"))do{this.parseQueryParam(O)}while(this.consumeOptional("&"));return O}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const O=[];for(this.peekStartsWith("(")||O.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),O.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let x={};return this.peekStartsWith("(")&&(x=this.parseParens(!1)),(O.length>0||Object.keys(S).length>0)&&(x[Vt]=new wn(O,S)),x}parseSegment(){const O=Wt(this.remaining);if(""===O&&this.peekStartsWith(";"))throw new C.vHH(4009,!1);return this.capture(O),new Yn(ee(O),this.parseMatrixParams())}parseMatrixParams(){const O={};for(;this.consumeOptional(";");)this.parseParam(O);return O}parseParam(O){const S=function fn(I){const O=I.match(Hn);return O?O[0]:""}(this.remaining);if(!S)return;this.capture(S);let x="";if(this.consumeOptional("=")){const H=Wt(this.remaining);H&&(x=H,this.capture(x))}O[ee(S)]=ee(x)}parseQueryParam(O){const S=function Or(I){const O=I.match(Mn);return O?O[0]:""}(this.remaining);if(!S)return;this.capture(S);let x="";if(this.consumeOptional("=")){const de=function Eo(I){const O=I.match(Ws);return O?O[0]:""}(this.remaining);de&&(x=de,this.capture(x))}const H=re(S),J=re(x);if(O.hasOwnProperty(H)){let de=O[H];Array.isArray(de)||(de=[de],O[H]=de),de.push(J)}else O[H]=J}parseParens(O){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const x=Wt(this.remaining),H=this.remaining[x.length];if("/"!==H&&")"!==H&&";"!==H)throw new C.vHH(4010,!1);let J;x.indexOf(":")>-1?(J=x.slice(0,x.indexOf(":")),this.capture(J),this.capture(":")):O&&(J=Vt);const de=this.parseChildren();S[J]=1===Object.keys(de).length?de[Vt]:new wn([],de),this.consumeOptional("//")}return S}peekStartsWith(O){return this.remaining.startsWith(O)}consumeOptional(O){return!!this.peekStartsWith(O)&&(this.remaining=this.remaining.substring(O.length),!0)}capture(O){if(!this.consumeOptional(O))throw new C.vHH(4011,!1)}}function ya(I){return I.segments.length>0?new wn([],{[Vt]:I}):I}function ii(I){const O={};for(const[x,H]of Object.entries(I.children)){const J=ii(H);if(x===Vt&&0===J.segments.length&&J.hasChildren())for(const[de,Le]of Object.entries(J.children))O[de]=Le;else(J.segments.length>0||J.hasChildren())&&(O[x]=J)}return function Ut(I){if(1===I.numberOfChildren&&I.children[Vt]){const O=I.children[Vt];return new wn(I.segments.concat(O.segments),O.children)}return I}(new wn(I.segments,O))}function Yi(I){return I instanceof Ui}function Re(I){let O;const H=ya(function S(J){const de={};for(const ke of J.children){const Ct=S(ke);de[ke.outlet]=Ct}const Le=new wn(J.url,de);return J===I&&(O=Le),Le}(I.root));return O??H}function Qe(I,O,S,x){let H=I;for(;H.parent;)H=H.parent;if(0===O.length)return ln(H,H,H,S,x);const J=function yr(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new Jn(!0,0,I);let O=0,S=!1;const x=I.reduce((H,J,de)=>{if("object"==typeof J&&null!=J){if(J.outlets){const Le={};return Object.entries(J.outlets).forEach(([ke,Ct])=>{Le[ke]="string"==typeof Ct?Ct.split("/"):Ct}),[...H,{outlets:Le}]}if(J.segmentPath)return[...H,J.segmentPath]}return"string"!=typeof J?[...H,J]:0===de?(J.split("/").forEach((Le,ke)=>{0==ke&&"."===Le||(0==ke&&""===Le?S=!0:".."===Le?O++:""!=Le&&H.push(Le))}),H):[...H,J]},[]);return new Jn(S,O,x)}(O);if(J.toRoot())return ln(H,H,new wn([],{}),S,x);const de=function Bi(I,O,S){if(I.isAbsolute)return new Xr(O,!0,0);if(!S)return new Xr(O,!1,NaN);if(null===S.parent)return new Xr(S,!0,0);const x=ot(I.commands[0])?0:1;return function va(I,O,S){let x=I,H=O,J=S;for(;J>H;){if(J-=H,x=x.parent,!x)throw new C.vHH(4005,!1);H=x.segments.length}return new Xr(x,!1,H-J)}(S,S.segments.length-1+x,I.numberOfDoubleDots)}(J,H,I),Le=de.processChildren?Lo(de.segmentGroup,de.index,J.commands):gr(de.segmentGroup,de.index,J.commands);return ln(H,de.segmentGroup,Le,S,x)}function ot(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function $t(I){return"object"==typeof I&&null!=I&&I.outlets}function ln(I,O,S,x,H){let de,J={};x&&Object.entries(x).forEach(([ke,Ct])=>{J[ke]=Array.isArray(Ct)?Ct.map(bn=>`${bn}`):`${Ct}`}),de=I===O?S:_n(I,O,S);const Le=ya(ii(de));return new Ui(Le,J,H)}function _n(I,O,S){const x={};return Object.entries(I.children).forEach(([H,J])=>{x[H]=J===O?S:_n(J,O,S)}),new wn(I.segments,x)}class Jn{constructor(O,S,x){if(this.isAbsolute=O,this.numberOfDoubleDots=S,this.commands=x,O&&x.length>0&&ot(x[0]))throw new C.vHH(4003,!1);const H=x.find($t);if(H&&H!==x.at(-1))throw new C.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xr{constructor(O,S,x){this.segmentGroup=O,this.processChildren=S,this.index=x}}function gr(I,O,S){if(I??=new wn([],{}),0===I.segments.length&&I.hasChildren())return Lo(I,O,S);const x=function On(I,O,S){let x=0,H=O;const J={match:!1,pathIndex:0,commandIndex:0};for(;H<I.segments.length;){if(x>=S.length)return J;const de=I.segments[H],Le=S[x];if($t(Le))break;const ke=`${Le}`,Ct=x<S.length-1?S[x+1]:null;if(H>0&&void 0===ke)break;if(ke&&Ct&&"object"==typeof Ct&&void 0===Ct.outlets){if(!Si(ke,Ct,de))return J;x+=2}else{if(!Si(ke,{},de))return J;x++}H++}return{match:!0,pathIndex:H,commandIndex:x}}(I,O,S),H=S.slice(x.commandIndex);if(x.match&&x.pathIndex<I.segments.length){const J=new wn(I.segments.slice(0,x.pathIndex),{});return J.children[Vt]=new wn(I.segments.slice(x.pathIndex),I.children),Lo(J,0,H)}return x.match&&0===H.length?new wn(I.segments,{}):x.match&&!I.hasChildren()?Ji(I,O,S):x.match?Lo(I,0,H):Ji(I,O,S)}function Lo(I,O,S){if(0===S.length)return new wn(I.segments,{});{const x=function io(I){return $t(I[0])?I[0].outlets:{[Vt]:I}}(S),H={};if(Object.keys(x).some(J=>J!==Vt)&&I.children[Vt]&&1===I.numberOfChildren&&0===I.children[Vt].segments.length){const J=Lo(I.children[Vt],O,S);return new wn(I.segments,J.children)}return Object.entries(x).forEach(([J,de])=>{"string"==typeof de&&(de=[de]),null!==de&&(H[J]=gr(I.children[J],O,de))}),Object.entries(I.children).forEach(([J,de])=>{void 0===x[J]&&(H[J]=de)}),new wn(I.segments,H)}}function Ji(I,O,S){const x=I.segments.slice(0,O);let H=0;for(;H<S.length;){const J=S[H];if($t(J)){const ke=vi(J.outlets);return new wn(x,ke)}if(0===H&&ot(S[0])){x.push(new Yn(I.segments[O].path,wr(S[0]))),H++;continue}const de=$t(J)?J.outlets[Vt]:`${J}`,Le=H<S.length-1?S[H+1]:null;de&&Le&&ot(Le)?(x.push(new Yn(de,wr(Le))),H+=2):(x.push(new Yn(de,{})),H++)}return new wn(x,{})}function vi(I){const O={};return Object.entries(I).forEach(([S,x])=>{"string"==typeof x&&(x=[x]),null!==x&&(O[S]=Ji(new wn([],{}),0,x))}),O}function wr(I){const O={};return Object.entries(I).forEach(([S,x])=>O[S]=`${x}`),O}function Si(I,O,S){return I==S.path&&pr(O,S.parameters)}const so="imperative";var tn=function(I){return I[I.NavigationStart=0]="NavigationStart",I[I.NavigationEnd=1]="NavigationEnd",I[I.NavigationCancel=2]="NavigationCancel",I[I.NavigationError=3]="NavigationError",I[I.RoutesRecognized=4]="RoutesRecognized",I[I.ResolveStart=5]="ResolveStart",I[I.ResolveEnd=6]="ResolveEnd",I[I.GuardsCheckStart=7]="GuardsCheckStart",I[I.GuardsCheckEnd=8]="GuardsCheckEnd",I[I.RouteConfigLoadStart=9]="RouteConfigLoadStart",I[I.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",I[I.ChildActivationStart=11]="ChildActivationStart",I[I.ChildActivationEnd=12]="ChildActivationEnd",I[I.ActivationStart=13]="ActivationStart",I[I.ActivationEnd=14]="ActivationEnd",I[I.Scroll=15]="Scroll",I[I.NavigationSkipped=16]="NavigationSkipped",I}(tn||{});class si{constructor(O,S){this.id=O,this.url=S}}class oo extends si{constructor(O,S,x="imperative",H=null){super(O,S),this.type=tn.NavigationStart,this.navigationTrigger=x,this.restoredState=H}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class gn extends si{constructor(O,S,x){super(O,S),this.urlAfterRedirects=x,this.type=tn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var bi=function(I){return I[I.Redirect=0]="Redirect",I[I.SupersededByNewNavigation=1]="SupersededByNewNavigation",I[I.NoDataFromResolver=2]="NoDataFromResolver",I[I.GuardRejected=3]="GuardRejected",I}(bi||{}),vs=function(I){return I[I.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",I[I.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",I}(vs||{});class Es extends si{constructor(O,S,x,H){super(O,S),this.reason=x,this.code=H,this.type=tn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jr extends si{constructor(O,S,x,H){super(O,S),this.reason=x,this.code=H,this.type=tn.NavigationSkipped}}class Ea extends si{constructor(O,S,x,H){super(O,S),this.error=x,this.target=H,this.type=tn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class oi extends si{constructor(O,S,x,H){super(O,S),this.urlAfterRedirects=x,this.state=H,this.type=tn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class su extends si{constructor(O,S,x,H){super(O,S),this.urlAfterRedirects=x,this.state=H,this.type=tn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Au extends si{constructor(O,S,x,H,J){super(O,S),this.urlAfterRedirects=x,this.state=H,this.shouldActivate=J,this.type=tn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Io extends si{constructor(O,S,x,H){super(O,S),this.urlAfterRedirects=x,this.state=H,this.type=tn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ou extends si{constructor(O,S,x,H){super(O,S),this.urlAfterRedirects=x,this.state=H,this.type=tn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Il{constructor(O){this.route=O,this.type=tn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Is{constructor(O){this.route=O,this.type=tn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ia{constructor(O){this.snapshot=O,this.type=tn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ws{constructor(O){this.snapshot=O,this.type=tn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sa{constructor(O){this.snapshot=O,this.type=tn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ai{constructor(O){this.snapshot=O,this.type=tn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vo{constructor(O,S,x){this.routerEvent=O,this.position=S,this.anchor=x,this.type=tn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Uo{}class Ri{constructor(O){this.url=O}}class ks{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new qs,this.attachRef=null}}let qs=(()=>{class I{constructor(){this.contexts=new Map}onChildOutletCreated(S,x){const H=this.getOrCreateContext(S);H.outlet=x,this.contexts.set(S,H)}onChildOutletDestroyed(S){const x=this.getContext(S);x&&(x.outlet=null,x.attachRef=null)}onOutletDeactivated(){const S=this.contexts;return this.contexts=new Map,S}onOutletReAttached(S){this.contexts=S}getOrCreateContext(S){let x=this.getContext(S);return x||(x=new ks,this.contexts.set(S,x)),x}getContext(S){return this.contexts.get(S)||null}static#e=this.\u0275fac=function(x){return new(x||I)};static#t=this.\u0275prov=C.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();class lr{constructor(O){this._root=O}get root(){return this._root.value}parent(O){const S=this.pathFromRoot(O);return S.length>1?S[S.length-2]:null}children(O){const S=aa(O,this._root);return S?S.children.map(x=>x.value):[]}firstChild(O){const S=aa(O,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(O){const S=xn(O,this._root);return S.length<2?[]:S[S.length-2].children.map(H=>H.value).filter(H=>H!==O)}pathFromRoot(O){return xn(O,this._root).map(S=>S.value)}}function aa(I,O){if(I===O.value)return O;for(const S of O.children){const x=aa(I,S);if(x)return x}return null}function xn(I,O){if(I===O.value)return[O];for(const S of O.children){const x=xn(I,S);if(x.length)return x.unshift(O),x}return[]}class Ei{constructor(O,S){this.value=O,this.children=S}toString(){return`TreeNode(${this.value})`}}function Fs(I){const O={};return I&&I.children.forEach(S=>O[S.value.outlet]=S),O}class ao extends lr{constructor(O,S){super(O),this.snapshot=S,Hi(this,O)}toString(){return this.snapshot.toString()}}function Ks(I){const O=function wo(I){const J=new Ia([],{},{},"",{},Vt,I,null,{});return new Ts("",new Ei(J,[]))}(I),S=new Pe.X([new Yn("",{})]),x=new Pe.X({}),H=new Pe.X({}),J=new Pe.X({}),de=new Pe.X(""),Le=new ji(S,x,J,de,H,Vt,I,O.root);return Le.snapshot=O.root,new ao(new Ei(Le,[]),O)}class ji{constructor(O,S,x,H,J,de,Le,ke){this.urlSubject=O,this.paramsSubject=S,this.queryParamsSubject=x,this.fragmentSubject=H,this.dataSubject=J,this.outlet=de,this.component=Le,this._futureSnapshot=ke,this.title=this.dataSubject?.pipe((0,ue.U)(Ct=>Ct[ft]))??(0,pe.of)(void 0),this.url=O,this.params=S,this.queryParams=x,this.fragment=H,this.data=J}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,ue.U)(O=>fr(O))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,ue.U)(O=>fr(O))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xi(I,O,S="emptyOnly"){let x;const{routeConfig:H}=I;return x=null===O||"always"!==S&&""!==H?.path&&(O.component||O.routeConfig?.loadComponent)?{params:{...I.params},data:{...I.data},resolve:{...I.data,...I._resolvedData??{}}}:{params:{...O.params,...I.params},data:{...O.data,...I.data},resolve:{...I.data,...O.data,...H?.data,...I._resolvedData}},H&&Pi(H)&&(x.resolve[ft]=H.title),x}class Ia{get title(){return this.data?.[ft]}constructor(O,S,x,H,J,de,Le,ke,Ct){this.url=O,this.params=S,this.queryParams=x,this.fragment=H,this.data=J,this.outlet=de,this.component=Le,this.routeConfig=ke,this._resolve=Ct}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=fr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=fr(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(x=>x.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ts extends lr{constructor(O,S){super(S),this.url=O,Hi(this,S)}toString(){return $n(this._root)}}function Hi(I,O){O.value._routerState=I,O.children.forEach(S=>Hi(I,S))}function $n(I){const O=I.children.length>0?` { ${I.children.map($n).join(", ")} } `:"";return`${I.value}${O}`}function Cs(I){if(I.snapshot){const O=I.snapshot,S=I._futureSnapshot;I.snapshot=S,pr(O.queryParams,S.queryParams)||I.queryParamsSubject.next(S.queryParams),O.fragment!==S.fragment&&I.fragmentSubject.next(S.fragment),pr(O.params,S.params)||I.paramsSubject.next(S.params),function Fn(I,O){if(I.length!==O.length)return!1;for(let S=0;S<I.length;++S)if(!pr(I[S],O[S]))return!1;return!0}(O.url,S.url)||I.urlSubject.next(S.url),pr(O.data,S.data)||I.dataSubject.next(S.data)}else I.snapshot=I._futureSnapshot,I.dataSubject.next(I._futureSnapshot.data)}function Xi(I,O){const S=pr(I.params,O.params)&&function yi(I,O){return qr(I,O)&&I.every((S,x)=>pr(S.parameters,O[x].parameters))}(I.url,O.url);return S&&!(!I.parent!=!O.parent)&&(!I.parent||Xi(I.parent,O.parent))}function Pi(I){return"string"==typeof I.title||null===I.title}let es=(()=>{class I{constructor(){this.activated=null,this._activatedRoute=null,this.name=Vt,this.activateEvents=new C.vpe,this.deactivateEvents=new C.vpe,this.attachEvents=new C.vpe,this.detachEvents=new C.vpe,this.parentContexts=(0,C.f3M)(qs),this.location=(0,C.f3M)(C.s_b),this.changeDetector=(0,C.f3M)(C.sBO),this.environmentInjector=(0,C.f3M)(C.lqb),this.inputBinder=(0,C.f3M)(To,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(S){if(S.name){const{firstChange:x,previousValue:H}=S.name;if(x)return;this.isTrackedInParentContexts(H)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(H)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(S){return this.parentContexts.getContext(S)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const S=this.parentContexts.getContext(this.name);S?.route&&(S.attachRef?this.attach(S.attachRef,S.route):this.activateWith(S.route,S.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new C.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new C.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new C.vHH(4012,!1);this.location.detach();const S=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(S.instance),S}attach(S,x){this.activated=S,this._activatedRoute=x,this.location.insert(S.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(S.instance)}deactivate(){if(this.activated){const S=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,x){if(this.isActivated)throw new C.vHH(4013,!1);this._activatedRoute=S;const H=this.location,de=S.snapshot.component,Le=this.parentContexts.getOrCreateContext(this.name).children,ke=new Bo(S,Le,H.injector);this.activated=H.createComponent(de,{index:H.length,injector:ke,environmentInjector:x??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(x){return new(x||I)};static#t=this.\u0275dir=C.lG2({type:I,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[C.TTD]})}return I})();class Bo{constructor(O,S,x){this.route=O,this.childContexts=S,this.parent=x}get(O,S){return O===ji?this.route:O===qs?this.childContexts:this.parent.get(O,S)}}const To=new C.OlP("");let Gn=(()=>{class I{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(S){this.unsubscribeFromRouteData(S),this.subscribeToRouteData(S)}unsubscribeFromRouteData(S){this.outletDataSubscriptions.get(S)?.unsubscribe(),this.outletDataSubscriptions.delete(S)}subscribeToRouteData(S){const{activatedRoute:x}=S,H=gt([x.queryParams,x.params,x.data]).pipe((0,Ve.w)(([J,de,Le],ke)=>(Le={...J,...de,...Le},0===ke?(0,pe.of)(Le):Promise.resolve(Le)))).subscribe(J=>{if(!S.isActivated||!S.activatedComponentRef||S.activatedRoute!==x||null===x.component)return void this.unsubscribeFromRouteData(S);const de=(0,C.qFp)(x.component);if(de)for(const{templateName:Le}of de.inputs)S.activatedComponentRef.setInput(Le,J[Le]);else this.unsubscribeFromRouteData(S)});this.outletDataSubscriptions.set(S,H)}static#e=this.\u0275fac=function(x){return new(x||I)};static#t=this.\u0275prov=C.Yz7({token:I,factory:I.\u0275fac})}return I})();function Ds(I,O,S){if(S&&I.shouldReuseRoute(O.value,S.value.snapshot)){const x=S.value;x._futureSnapshot=O.value;const H=function uo(I,O,S){return O.children.map(x=>{for(const H of S.children)if(I.shouldReuseRoute(x.value,H.value.snapshot))return Ds(I,x,H);return Ds(I,x)})}(I,O,S);return new Ei(x,H)}{if(I.shouldAttach(O.value)){const J=I.retrieve(O.value);if(null!==J){const de=J.route;return de.value._futureSnapshot=O.value,de.children=O.children.map(Le=>Ds(I,Le)),de}}const x=function au(I){return new ji(new Pe.X(I.url),new Pe.X(I.params),new Pe.X(I.queryParams),new Pe.X(I.fragment),new Pe.X(I.data),I.outlet,I.component,I)}(O.value),H=O.children.map(J=>Ds(I,J));return new Ei(x,H)}}const jo="ngNavigationCancelingError";function os(I,O){const{redirectTo:S,navigationBehaviorOptions:x}=Yi(O)?{redirectTo:O,navigationBehaviorOptions:void 0}:O,H=Co(!1,bi.Redirect,O);return H.url=S,H.navigationBehaviorOptions=x,H}function Co(I,O,S){const x=new Error("NavigationCancelingError: "+(I||""));return x[jo]=!0,x.cancellationCode=O,S&&(x.url=S),x}function Ho(I){return I&&I[jo]}let as=(()=>{class I{static#e=this.\u0275fac=function(x){return new(x||I)};static#t=this.\u0275cmp=C.Xpm({type:I,selectors:[["ng-component"]],standalone:!0,features:[C.jDz],decls:1,vars:0,template:function(x,H){1&x&&C._UZ(0,"router-outlet")},dependencies:[es],encapsulation:2})}return I})();function Go(I){const O=I.children&&I.children.map(Go),S=O?{...I,children:O}:{...I};return!S.component&&!S.loadComponent&&(O||S.loadChildren)&&S.outlet&&S.outlet!==Vt&&(S.component=as),S}function $i(I){return I.outlet||Vt}function Qs(I){if(!I)return null;if(I.routeConfig?._injector)return I.routeConfig._injector;for(let O=I.parent;O;O=O.parent){const S=O.routeConfig;if(S?._loadedInjector)return S._loadedInjector;if(S?._injector)return S._injector}return null}class Ii{constructor(O,S,x,H,J){this.routeReuseStrategy=O,this.futureState=S,this.currState=x,this.forwardEvent=H,this.inputBindingEnabled=J}activate(O){const S=this.futureState._root,x=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,x,O),Cs(this.futureState.root),this.activateChildRoutes(S,x,O)}deactivateChildRoutes(O,S,x){const H=Fs(S);O.children.forEach(J=>{const de=J.value.outlet;this.deactivateRoutes(J,H[de],x),delete H[de]}),Object.values(H).forEach(J=>{this.deactivateRouteAndItsChildren(J,x)})}deactivateRoutes(O,S,x){const H=O.value,J=S?S.value:null;if(H===J)if(H.component){const de=x.getContext(H.outlet);de&&this.deactivateChildRoutes(O,S,de.children)}else this.deactivateChildRoutes(O,S,x);else J&&this.deactivateRouteAndItsChildren(S,x)}deactivateRouteAndItsChildren(O,S){O.value.component&&this.routeReuseStrategy.shouldDetach(O.value.snapshot)?this.detachAndStoreRouteSubtree(O,S):this.deactivateRouteAndOutlet(O,S)}detachAndStoreRouteSubtree(O,S){const x=S.getContext(O.value.outlet),H=x&&O.value.component?x.children:S,J=Fs(O);for(const de of Object.values(J))this.deactivateRouteAndItsChildren(de,H);if(x&&x.outlet){const de=x.outlet.detach(),Le=x.children.onOutletDeactivated();this.routeReuseStrategy.store(O.value.snapshot,{componentRef:de,route:O,contexts:Le})}}deactivateRouteAndOutlet(O,S){const x=S.getContext(O.value.outlet),H=x&&O.value.component?x.children:S,J=Fs(O);for(const de of Object.values(J))this.deactivateRouteAndItsChildren(de,H);x&&(x.outlet&&(x.outlet.deactivate(),x.children.onOutletDeactivated()),x.attachRef=null,x.route=null)}activateChildRoutes(O,S,x){const H=Fs(S);O.children.forEach(J=>{this.activateRoutes(J,H[J.value.outlet],x),this.forwardEvent(new ai(J.value.snapshot))}),O.children.length&&this.forwardEvent(new ws(O.value.snapshot))}activateRoutes(O,S,x){const H=O.value,J=S?S.value:null;if(Cs(H),H===J)if(H.component){const de=x.getOrCreateContext(H.outlet);this.activateChildRoutes(O,S,de.children)}else this.activateChildRoutes(O,S,x);else if(H.component){const de=x.getOrCreateContext(H.outlet);if(this.routeReuseStrategy.shouldAttach(H.snapshot)){const Le=this.routeReuseStrategy.retrieve(H.snapshot);this.routeReuseStrategy.store(H.snapshot,null),de.children.onOutletReAttached(Le.contexts),de.attachRef=Le.componentRef,de.route=Le.route.value,de.outlet&&de.outlet.attach(Le.componentRef,Le.route.value),Cs(Le.route.value),this.activateChildRoutes(O,null,de.children)}else{const Le=Qs(H.snapshot);de.attachRef=null,de.route=H,de.injector=Le,de.outlet&&de.outlet.activateWith(H,de.injector),this.activateChildRoutes(O,null,de.children)}}else this.activateChildRoutes(O,null,x)}}class Ys{constructor(O){this.path=O,this.route=this.path[this.path.length-1]}}class br{constructor(O,S){this.component=O,this.route=S}}function ki(I,O,S){const x=I._root;return wi(x,O?O._root:null,S,[x.value])}function ts(I,O){const S=Symbol(),x=O.get(I,S);return x===S?"function"!=typeof I||(0,C.Z0I)(I)?O.get(I):I:x}function wi(I,O,S,x,H={canDeactivateChecks:[],canActivateChecks:[]}){const J=Fs(O);return I.children.forEach(de=>{(function ua(I,O,S,x,H={canDeactivateChecks:[],canActivateChecks:[]}){const J=I.value,de=O?O.value:null,Le=S?S.getContext(I.value.outlet):null;if(de&&J.routeConfig===de.routeConfig){const ke=function Tn(I,O,S){if("function"==typeof S)return S(I,O);switch(S){case"pathParamsChange":return!qr(I.url,O.url);case"pathParamsOrQueryParamsChange":return!qr(I.url,O.url)||!pr(I.queryParams,O.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xi(I,O)||!pr(I.queryParams,O.queryParams);default:return!Xi(I,O)}}(de,J,J.routeConfig.runGuardsAndResolvers);ke?H.canActivateChecks.push(new Ys(x)):(J.data=de.data,J._resolvedData=de._resolvedData),wi(I,O,J.component?Le?Le.children:null:S,x,H),ke&&Le&&Le.outlet&&Le.outlet.isActivated&&H.canDeactivateChecks.push(new br(Le.outlet.component,de))}else de&&lt(O,Le,H),H.canActivateChecks.push(new Ys(x)),wi(I,null,J.component?Le?Le.children:null:S,x,H)})(de,J[de.value.outlet],S,x.concat([de.value]),H),delete J[de.value.outlet]}),Object.entries(J).forEach(([de,Le])=>lt(Le,S.getContext(de),H)),H}function lt(I,O,S){const x=Fs(I),H=I.value;Object.entries(x).forEach(([J,de])=>{lt(de,H.component?O?O.children.getContext(J):null:O,S)}),S.canDeactivateChecks.push(new br(H.component&&O&&O.outlet&&O.outlet.isActivated?O.outlet.component:null,H))}function Zt(I){return"function"==typeof I}function Cn(I){return I instanceof dt.K||"EmptyError"===I?.name}const rs=Symbol("INITIAL_VALUE");function co(){return(0,Ve.w)(I=>gt(I.map(O=>O.pipe((0,an.q)(1),(0,At.O)(rs)))).pipe((0,ue.U)(O=>{for(const S of O)if(!0!==S){if(S===rs)return rs;if(!1===S||S instanceof Ui)return S}return!0}),(0,Un.h)(O=>O!==rs),(0,an.q)(1)))}function Ls(I){return(0,nt.z)((0,Ee.b)(O=>{if(Yi(O))throw os(0,O)}),(0,ue.U)(O=>!0===O))}class Wo{constructor(O){this.segmentGroup=O||null}}class po extends Error{constructor(O){super(),this.urlTree=O}}function ui(I){return(0,ce._)(new Wo(I))}class Gi{constructor(O,S){this.urlSerializer=O,this.urlTree=S}lineralizeSegments(O,S){let x=[],H=S.root;for(;;){if(x=x.concat(H.segments),0===H.numberOfChildren)return(0,pe.of)(x);if(H.numberOfChildren>1||!H.children[Vt])return(0,ce._)(new C.vHH(4e3,!1));H=H.children[Vt]}}applyRedirectCommands(O,S,x){const H=this.applyRedirectCreateUrlTree(S,this.urlSerializer.parse(S),O,x);if(S.startsWith("/"))throw new po(H);return H}applyRedirectCreateUrlTree(O,S,x,H){const J=this.createSegmentGroup(O,S.root,x,H);return new Ui(J,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(O,S){const x={};return Object.entries(O).forEach(([H,J])=>{if("string"==typeof J&&J.startsWith(":")){const Le=J.substring(1);x[H]=S[Le]}else x[H]=J}),x}createSegmentGroup(O,S,x,H){const J=this.createSegments(O,S.segments,x,H);let de={};return Object.entries(S.children).forEach(([Le,ke])=>{de[Le]=this.createSegmentGroup(O,ke,x,H)}),new wn(J,de)}createSegments(O,S,x,H){return S.map(J=>J.path.startsWith(":")?this.findPosParam(O,J,H):this.findOrReturn(J,x))}findPosParam(O,S,x){const H=x[S.path.substring(1)];if(!H)throw new C.vHH(4001,!1);return H}findOrReturn(O,S){let x=0;for(const H of S){if(H.path===O.path)return S.splice(x),H;x++}return O}}const ir={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ei(I,O,S,x,H){const J=qo(I,O,S);return J.matched?(x=function lo(I,O){return I.providers&&!I._injector&&(I._injector=(0,C.MMx)(I.providers,O,`Route: ${I.path}`)),I._injector??O}(O,x),function yn(I,O,S,x){const H=O.canMatch;if(!H||0===H.length)return(0,pe.of)(!0);const J=H.map(de=>{const Le=ts(de,I);return Yt(function ar(I){return I&&Zt(I.canMatch)}(Le)?Le.canMatch(O,S):(0,C.r_H)(I,()=>Le(O,S)))});return(0,pe.of)(J).pipe(co(),Ls())}(x,O,S).pipe((0,ue.U)(de=>!0===de?J:{...ir}))):(0,pe.of)(J)}function qo(I,O,S){if("**"===O.path)return function go(I){return{matched:!0,parameters:I.at(-1)?.parameters??{},consumedSegments:I,remainingSegments:[],positionalParamSegments:{}}}(S);if(""===O.path)return"full"===O.pathMatch&&(I.hasChildren()||S.length>0)?{...ir}:{matched:!0,consumedSegments:[],remainingSegments:S,parameters:{},positionalParamSegments:{}};const H=(O.matcher||Wr)(S,I,O);if(!H)return{...ir};const J={};Object.entries(H.posParams??{}).forEach(([Le,ke])=>{J[Le]=ke.path});const de=H.consumed.length>0?{...J,...H.consumed[H.consumed.length-1].parameters}:J;return{matched:!0,consumedSegments:H.consumed,remainingSegments:S.slice(H.consumed.length),parameters:de,positionalParamSegments:H.posParams??{}}}function eo(I,O,S,x){return S.length>0&&function du(I,O,S){return S.some(x=>Ro(I,O,x)&&$i(x)!==Vt)}(I,S,x)?{segmentGroup:new wn(O,cu(x,new wn(S,I.children))),slicedSegments:[]}:0===S.length&&function zu(I,O,S){return S.some(x=>Ro(I,O,x))}(I,S,x)?{segmentGroup:new wn(I.segments,us(I,S,x,I.children)),slicedSegments:S}:{segmentGroup:new wn(I.segments,I.children),slicedSegments:S}}function us(I,O,S,x){const H={};for(const J of S)if(Ro(I,O,J)&&!x[$i(J)]){const de=new wn([],{});H[$i(J)]=de}return{...x,...H}}function cu(I,O){const S={};S[Vt]=O;for(const x of I)if(""===x.path&&$i(x)!==Vt){const H=new wn([],{});S[$i(x)]=H}return S}function Ro(I,O,S){return(!(I.hasChildren()||O.length>0)||"full"!==S.pathMatch)&&""===S.path}class hu{}class P{constructor(O,S,x,H,J,de,Le){this.injector=O,this.configLoader=S,this.rootComponentType=x,this.config=H,this.urlTree=J,this.paramsInheritanceStrategy=de,this.urlSerializer=Le,this.applyRedirects=new Gi(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(O){return new C.vHH(4002,`'${O.segmentGroup}'`)}recognize(){const O=eo(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(O).pipe((0,ue.U)(S=>{const x=new Ia([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Vt,this.rootComponentType,null,{}),H=new Ei(x,S),J=new Ts("",H),de=function Be(I,O,S=null,x=null){return Qe(Re(I),O,S,x)}(x,[],this.urlTree.queryParams,this.urlTree.fragment);return de.queryParams=this.urlTree.queryParams,J.url=this.urlSerializer.serialize(de),this.inheritParamsAndData(J._root,null),{state:J,tree:de}}))}match(O){return this.processSegmentGroup(this.injector,this.config,O,Vt).pipe(De(x=>{if(x instanceof po)return this.urlTree=x.urlTree,this.match(x.urlTree.root);throw x instanceof Wo?this.noMatchError(x):x}))}inheritParamsAndData(O,S){const x=O.value,H=xi(x,S,this.paramsInheritanceStrategy);x.params=Object.freeze(H.params),x.data=Object.freeze(H.data),O.children.forEach(J=>this.inheritParamsAndData(J,x))}processSegmentGroup(O,S,x,H){return 0===x.segments.length&&x.hasChildren()?this.processChildren(O,S,x):this.processSegment(O,S,x,x.segments,H,!0).pipe((0,ue.U)(J=>J instanceof Ei?[J]:[]))}processChildren(O,S,x){const H=[];for(const J of Object.keys(x.children))"primary"===J?H.unshift(J):H.push(J);return(0,ye.D)(H).pipe(rn(J=>{const de=x.children[J],Le=function uu(I,O){const S=I.filter(x=>$i(x)===O);return S.push(...I.filter(x=>$i(x)!==O)),S}(S,J);return this.processSegmentGroup(O,Le,de,J)}),(0,We.R)((J,de)=>(J.push(...de),J)),(0,Me.d)(null),function Rt(I,O){const S=arguments.length>=2;return x=>x.pipe(I?(0,Un.h)((H,J)=>I(H,J,x)):Fe.y,ut(1),S?(0,Me.d)(O):(0,Dt.T)(()=>new dt.K))}(),(0,Rn.z)(J=>{if(null===J)return ui(x);const de=z(J);return function K(I){I.sort((O,S)=>O.value.outlet===Vt?-1:S.value.outlet===Vt?1:O.value.outlet.localeCompare(S.value.outlet))}(de),(0,pe.of)(de)}))}processSegment(O,S,x,H,J,de){return(0,ye.D)(S).pipe(rn(Le=>this.processSegmentAgainstRoute(Le._injector??O,S,Le,x,H,J,de).pipe(De(ke=>{if(ke instanceof Wo)return(0,pe.of)(null);throw ke}))),(0,zt.P)(Le=>!!Le),De(Le=>{if(Cn(Le))return function Wu(I,O,S){return 0===O.length&&!I.children[S]}(x,H,J)?(0,pe.of)(new hu):ui(x);throw Le}))}processSegmentAgainstRoute(O,S,x,H,J,de,Le){return function zi(I,O,S,x){return!!($i(I)===x||x!==Vt&&Ro(O,S,I))&&qo(O,I,S).matched}(x,H,J,de)?void 0===x.redirectTo?this.matchSegmentAgainstRoute(O,H,x,J,de):this.allowRedirects&&Le?this.expandSegmentAgainstRouteUsingRedirect(O,H,S,x,J,de):ui(H):ui(H)}expandSegmentAgainstRouteUsingRedirect(O,S,x,H,J,de){const{matched:Le,consumedSegments:ke,positionalParamSegments:Ct,remainingSegments:bn}=qo(S,H,J);if(!Le)return ui(S);H.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const pn=this.applyRedirects.applyRedirectCommands(ke,H.redirectTo,Ct);return this.applyRedirects.lineralizeSegments(H,pn).pipe((0,Rn.z)(fi=>this.processSegment(O,x,S,fi.concat(bn),de,!1)))}matchSegmentAgainstRoute(O,S,x,H,J){const de=ei(S,x,H,O);return"**"===x.path&&(S.children={}),de.pipe((0,Ve.w)(Le=>Le.matched?this.getChildConfig(O=x._injector??O,x,H).pipe((0,Ve.w)(({routes:ke})=>{const Ct=x._loadedInjector??O,{consumedSegments:bn,remainingSegments:pn,parameters:fi}=Le,za=new Ia(bn,fi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function N(I){return I.data||{}}(x),$i(x),x.component??x._loadedComponent??null,x,function w(I){return I.resolve||{}}(x)),{segmentGroup:Pr,slicedSegments:Ms}=eo(S,bn,pn,ke);if(0===Ms.length&&Pr.hasChildren())return this.processChildren(Ct,ke,Pr).pipe((0,ue.U)(ba=>null===ba?null:new Ei(za,ba)));if(0===ke.length&&0===Ms.length)return(0,pe.of)(new Ei(za,[]));const Cr=$i(x)===J;return this.processSegment(Ct,ke,Pr,Ms,Cr?Vt:J,!0).pipe((0,ue.U)(ba=>new Ei(za,ba instanceof Ei?[ba]:[])))})):ui(S)))}getChildConfig(O,S,x){return S.children?(0,pe.of)({routes:S.children,injector:O}):S.loadChildren?void 0!==S._loadedRoutes?(0,pe.of)({routes:S._loadedRoutes,injector:S._loadedInjector}):function fo(I,O,S,x){const H=O.canLoad;if(void 0===H||0===H.length)return(0,pe.of)(!0);const J=H.map(de=>{const Le=ts(de,I);return Yt(function Xn(I){return I&&Zt(I.canLoad)}(Le)?Le.canLoad(O,S):(0,C.r_H)(I,()=>Le(O,S)))});return(0,pe.of)(J).pipe(co(),Ls())}(O,S,x).pipe((0,Rn.z)(H=>H?this.configLoader.loadChildren(O,S).pipe((0,Ee.b)(J=>{S._loadedRoutes=J.routes,S._loadedInjector=J.injector})):function Qr(I){return(0,ce._)(Co(!1,bi.GuardRejected))}())):(0,pe.of)({routes:[],injector:O})}}function L(I){const O=I.value.routeConfig;return O&&""===O.path}function z(I){const O=[],S=new Set;for(const x of I){if(!L(x)){O.push(x);continue}const H=O.find(J=>x.value.routeConfig===J.value.routeConfig);void 0!==H?(H.children.push(...x.children),S.add(H)):O.push(x)}for(const x of S){const H=z(x.children);O.push(new Ei(x.value,H))}return O.filter(x=>!S.has(x))}function Ke(I){const O=I.children.map(S=>Ke(S)).flat();return[I,...O]}function cn(I){return(0,Ve.w)(O=>{const S=I(O);return S?(0,ye.D)(S).pipe((0,ue.U)(()=>O)):(0,pe.of)(O)})}let mr=(()=>{class I{buildTitle(S){let x,H=S.root;for(;void 0!==H;)x=this.getResolvedTitleForRoute(H)??x,H=H.children.find(J=>J.outlet===Vt);return x}getResolvedTitleForRoute(S){return S.data[ft]}static#e=this.\u0275fac=function(x){return new(x||I)};static#t=this.\u0275prov=C.Yz7({token:I,factory:()=>(0,C.f3M)(Lr),providedIn:"root"})}return I})(),Lr=(()=>{class I extends mr{constructor(S){super(),this.title=S}updateTitle(S){const x=this.buildTitle(S);void 0!==x&&this.title.setTitle(x)}static#e=this.\u0275fac=function(x){return new(x||I)(C.LFG(Sn.Dx))};static#t=this.\u0275prov=C.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();const ur=new C.OlP("",{providedIn:"root",factory:()=>({})}),ls=new C.OlP("ROUTES");let Ss=(()=>{class I{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,C.f3M)(C.Sil)}loadComponent(S){if(this.componentLoaders.get(S))return this.componentLoaders.get(S);if(S._loadedComponent)return(0,pe.of)(S._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(S);const x=Yt(S.loadComponent()).pipe((0,ue.U)(la),(0,Ee.b)(J=>{this.onLoadEndListener&&this.onLoadEndListener(S),S._loadedComponent=J}),jt(()=>{this.componentLoaders.delete(S)})),H=new ht.c(x,()=>new Ge.x).pipe((0,Ht.x)());return this.componentLoaders.set(S,H),H}loadChildren(S,x){if(this.childrenLoaders.get(x))return this.childrenLoaders.get(x);if(x._loadedRoutes)return(0,pe.of)({routes:x._loadedRoutes,injector:x._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(x);const J=function bs(I,O,S,x){return Yt(I.loadChildren()).pipe((0,ue.U)(la),(0,Rn.z)(H=>H instanceof C.YKP||Array.isArray(H)?(0,pe.of)(H):(0,ye.D)(O.compileModuleAsync(H))),(0,ue.U)(H=>{x&&x(I);let J,de,Le=!1;return Array.isArray(H)?(de=H,!0):(J=H.create(S).injector,de=J.get(ls,[],{optional:!0,self:!0}).flat()),{routes:de.map(Go),injector:J}}))}(x,this.compiler,S,this.onLoadEndListener).pipe(jt(()=>{this.childrenLoaders.delete(x)})),de=new ht.c(J,()=>new Ge.x).pipe((0,Ht.x)());return this.childrenLoaders.set(x,de),de}static#e=this.\u0275fac=function(x){return new(x||I)};static#t=this.\u0275prov=C.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();function la(I){return function cs(I){return I&&"object"==typeof I&&"default"in I}(I)?I.default:I}let Da=(()=>{class I{static#e=this.\u0275fac=function(x){return new(x||I)};static#t=this.\u0275prov=C.Yz7({token:I,factory:()=>(0,C.f3M)(Kd),providedIn:"root"})}return I})(),Kd=(()=>{class I{shouldProcessUrl(S){return!0}extract(S){return S}merge(S,x){return S}static#e=this.\u0275fac=function(x){return new(x||I)};static#t=this.\u0275prov=C.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();const Sc=new C.OlP(""),Ql=new C.OlP("");function qu(I,O,S){const x=I.get(Ql),H=I.get($e.K0);return I.get(C.R0b).runOutsideAngular(()=>{if(!H.startViewTransition||x.skipNextTransition)return x.skipNextTransition=!1,Promise.resolve();let J;const de=new Promise(Ct=>{J=Ct}),Le=H.startViewTransition(()=>(J(),function Yl(I){return new Promise(O=>{(0,C.T8G)(O,{injector:I})})}(I))),{onViewTransitionCreated:ke}=x;return ke&&(0,C.r_H)(I,()=>ke({transition:Le,from:O,to:S})),de})}let Vs=(()=>{class I{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ge.x,this.transitionAbortSubject=new Ge.x,this.configLoader=(0,C.f3M)(Ss),this.environmentInjector=(0,C.f3M)(C.lqb),this.urlSerializer=(0,C.f3M)(zn),this.rootContexts=(0,C.f3M)(qs),this.location=(0,C.f3M)($e.Ye),this.inputBindingEnabled=null!==(0,C.f3M)(To,{optional:!0}),this.titleStrategy=(0,C.f3M)(mr),this.options=(0,C.f3M)(ur,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,C.f3M)(Da),this.createViewTransition=(0,C.f3M)(Sc,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,pe.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=H=>this.events.next(new Is(H)),this.configLoader.onLoadStartListener=H=>this.events.next(new Il(H))}complete(){this.transitions?.complete()}handleNavigationRequest(S){const x=++this.navigationId;this.transitions?.next({...this.transitions.value,...S,id:x})}setupNavigations(S,x,H){return this.transitions=new Pe.X({id:0,currentUrlTree:x,currentRawUrl:x,extractedUrl:this.urlHandlingStrategy.extract(x),urlAfterRedirects:this.urlHandlingStrategy.extract(x),rawUrl:x,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:so,restoredState:null,currentSnapshot:H.snapshot,targetSnapshot:null,currentRouterState:H,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Un.h)(J=>0!==J.id),(0,ue.U)(J=>({...J,extractedUrl:this.urlHandlingStrategy.extract(J.rawUrl)})),(0,Ve.w)(J=>{this.currentTransition=J;let de=!1,Le=!1;return(0,pe.of)(J).pipe((0,Ee.b)(ke=>{this.currentNavigation={id:ke.id,initialUrl:ke.rawUrl,extractedUrl:ke.extractedUrl,trigger:ke.source,extras:ke.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ve.w)(ke=>{const Ct=!S.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!Ct&&"reload"!==(ke.extras.onSameUrlNavigation??S.onSameUrlNavigation)){const pn="";return this.events.next(new jr(ke.id,this.urlSerializer.serialize(ke.rawUrl),pn,vs.IgnoredSameUrlNavigation)),ke.resolve(null),ze.E}if(this.urlHandlingStrategy.shouldProcessUrl(ke.rawUrl))return(0,pe.of)(ke).pipe((0,Ve.w)(pn=>{const fi=this.transitions?.getValue();return this.events.next(new oo(pn.id,this.urlSerializer.serialize(pn.extractedUrl),pn.source,pn.restoredState)),fi!==this.transitions?.getValue()?ze.E:Promise.resolve(pn)}),function U(I,O,S,x,H,J){return(0,Rn.z)(de=>function mo(I,O,S,x,H,J,de="emptyOnly"){return new P(I,O,S,x,H,de,J).recognize()}(I,O,S,x,de.extractedUrl,H,J).pipe((0,ue.U)(({state:Le,tree:ke})=>({...de,targetSnapshot:Le,urlAfterRedirects:ke}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,S.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,Ee.b)(pn=>{J.targetSnapshot=pn.targetSnapshot,J.urlAfterRedirects=pn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:pn.urlAfterRedirects};const fi=new oi(pn.id,this.urlSerializer.serialize(pn.extractedUrl),this.urlSerializer.serialize(pn.urlAfterRedirects),pn.targetSnapshot);this.events.next(fi)}));if(Ct&&this.urlHandlingStrategy.shouldProcessUrl(ke.currentRawUrl)){const{id:pn,extractedUrl:fi,source:za,restoredState:Pr,extras:Ms}=ke,Cr=new oo(pn,this.urlSerializer.serialize(fi),za,Pr);this.events.next(Cr);const ba=Ks(this.rootComponentType).snapshot;return this.currentTransition=J={...ke,targetSnapshot:ba,urlAfterRedirects:fi,extras:{...Ms,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=fi,(0,pe.of)(J)}{const pn="";return this.events.next(new jr(ke.id,this.urlSerializer.serialize(ke.extractedUrl),pn,vs.IgnoredByUrlHandlingStrategy)),ke.resolve(null),ze.E}}),(0,Ee.b)(ke=>{const Ct=new su(ke.id,this.urlSerializer.serialize(ke.extractedUrl),this.urlSerializer.serialize(ke.urlAfterRedirects),ke.targetSnapshot);this.events.next(Ct)}),(0,ue.U)(ke=>(this.currentTransition=J={...ke,guards:ki(ke.targetSnapshot,ke.currentSnapshot,this.rootContexts)},J)),function Li(I,O){return(0,Rn.z)(S=>{const{targetSnapshot:x,currentSnapshot:H,guards:{canActivateChecks:J,canDeactivateChecks:de}}=S;return 0===de.length&&0===J.length?(0,pe.of)({...S,guardsResult:!0}):function vr(I,O,S,x){return(0,ye.D)(I).pipe((0,Rn.z)(H=>function Xs(I,O,S,x,H){const J=O&&O.routeConfig?O.routeConfig.canDeactivate:null;if(!J||0===J.length)return(0,pe.of)(!0);const de=J.map(Le=>{const ke=Qs(O)??H,Ct=ts(Le,ke);return Yt(function So(I){return I&&Zt(I.canDeactivate)}(Ct)?Ct.canDeactivate(I,O,S,x):(0,C.r_H)(ke,()=>Ct(I,O,S,x))).pipe((0,zt.P)())});return(0,pe.of)(de).pipe(co())}(H.component,H.route,S,O,x)),(0,zt.P)(H=>!0!==H,!0))}(de,x,H,I).pipe((0,Rn.z)(Le=>Le&&function Zr(I){return"boolean"==typeof I}(Le)?function ho(I,O,S,x){return(0,ye.D)(O).pipe(rn(H=>(0,Kt.z)(function Gt(I,O){return null!==I&&O&&O(new ia(I)),(0,pe.of)(!0)}(H.route.parent,x),function zo(I,O){return null!==I&&O&&O(new sa(I)),(0,pe.of)(!0)}(H.route,x),function ja(I,O,S){const x=O[O.length-1],J=O.slice(0,O.length-1).reverse().map(de=>function Ao(I){const O=I.routeConfig?I.routeConfig.canActivateChild:null;return O&&0!==O.length?{node:I,guards:O}:null}(de)).filter(de=>null!==de).map(de=>(0,Bt.P)(()=>{const Le=de.guards.map(ke=>{const Ct=Qs(de.node)??S,bn=ts(ke,Ct);return Yt(function ns(I){return I&&Zt(I.canActivateChild)}(bn)?bn.canActivateChild(x,I):(0,C.r_H)(Ct,()=>bn(x,I))).pipe((0,zt.P)())});return(0,pe.of)(Le).pipe(co())}));return(0,pe.of)(J).pipe(co())}(I,H.path,S),function Js(I,O,S){const x=O.routeConfig?O.routeConfig.canActivate:null;if(!x||0===x.length)return(0,pe.of)(!0);const H=x.map(J=>(0,Bt.P)(()=>{const de=Qs(O)??S,Le=ts(J,de);return Yt(function Ti(I){return I&&Zt(I.canActivate)}(Le)?Le.canActivate(O,I):(0,C.r_H)(de,()=>Le(O,I))).pipe((0,zt.P)())}));return(0,pe.of)(H).pipe(co())}(I,H.route,S))),(0,zt.P)(H=>!0!==H,!0))}(x,J,I,O):(0,pe.of)(Le)),(0,ue.U)(Le=>({...S,guardsResult:Le})))})}(this.environmentInjector,ke=>this.events.next(ke)),(0,Ee.b)(ke=>{if(J.guardsResult=ke.guardsResult,Yi(ke.guardsResult))throw os(0,ke.guardsResult);const Ct=new Au(ke.id,this.urlSerializer.serialize(ke.extractedUrl),this.urlSerializer.serialize(ke.urlAfterRedirects),ke.targetSnapshot,!!ke.guardsResult);this.events.next(Ct)}),(0,Un.h)(ke=>!!ke.guardsResult||(this.cancelNavigationTransition(ke,"",bi.GuardRejected),!1)),cn(ke=>{if(ke.guards.canActivateChecks.length)return(0,pe.of)(ke).pipe((0,Ee.b)(Ct=>{const bn=new Io(Ct.id,this.urlSerializer.serialize(Ct.extractedUrl),this.urlSerializer.serialize(Ct.urlAfterRedirects),Ct.targetSnapshot);this.events.next(bn)}),(0,Ve.w)(Ct=>{let bn=!1;return(0,pe.of)(Ct).pipe(function Y(I,O){return(0,Rn.z)(S=>{const{targetSnapshot:x,guards:{canActivateChecks:H}}=S;if(!H.length)return(0,pe.of)(S);const J=new Set(H.map(ke=>ke.route)),de=new Set;for(const ke of J)if(!de.has(ke))for(const Ct of Ke(ke))de.add(Ct);let Le=0;return(0,ye.D)(de).pipe(rn(ke=>J.has(ke)?function rt(I,O,S,x){const H=I.routeConfig,J=I._resolve;return void 0!==H?.title&&!Pi(H)&&(J[ft]=H.title),function wt(I,O,S,x){const H=nr(I);if(0===H.length)return(0,pe.of)({});const J={};return(0,ye.D)(H).pipe((0,Rn.z)(de=>function Vn(I,O,S,x){const H=Qs(O)??x,J=ts(I,H);return Yt(J.resolve?J.resolve(O,S):(0,C.r_H)(H,()=>J(O,S)))}(I[de],O,S,x).pipe((0,zt.P)(),(0,Ee.b)(Le=>{J[de]=Le}))),ut(1),(0,It.h)(J),De(de=>Cn(de)?ze.E:(0,ce._)(de)))}(J,I,O,x).pipe((0,ue.U)(de=>(I._resolvedData=de,I.data=xi(I,I.parent,S).resolve,null)))}(ke,x,I,O):(ke.data=xi(ke,ke.parent,I).resolve,(0,pe.of)(void 0))),(0,Ee.b)(()=>Le++),ut(1),(0,Rn.z)(ke=>Le===de.size?(0,pe.of)(S):ze.E))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,Ee.b)({next:()=>bn=!0,complete:()=>{bn||this.cancelNavigationTransition(Ct,"",bi.NoDataFromResolver)}}))}),(0,Ee.b)(Ct=>{const bn=new ou(Ct.id,this.urlSerializer.serialize(Ct.extractedUrl),this.urlSerializer.serialize(Ct.urlAfterRedirects),Ct.targetSnapshot);this.events.next(bn)}))}),cn(ke=>{const Ct=bn=>{const pn=[];bn.routeConfig?.loadComponent&&!bn.routeConfig._loadedComponent&&pn.push(this.configLoader.loadComponent(bn.routeConfig).pipe((0,Ee.b)(fi=>{bn.component=fi}),(0,ue.U)(()=>{})));for(const fi of bn.children)pn.push(...Ct(fi));return pn};return gt(Ct(ke.targetSnapshot.root)).pipe((0,Me.d)(null),(0,an.q)(1))}),cn(()=>this.afterPreactivation()),(0,Ve.w)(()=>{const{currentSnapshot:ke,targetSnapshot:Ct}=J,bn=this.createViewTransition?.(this.environmentInjector,ke.root,Ct.root);return bn?(0,ye.D)(bn).pipe((0,ue.U)(()=>J)):(0,pe.of)(J)}),(0,ue.U)(ke=>{const Ct=function wa(I,O,S){const x=Ds(I,O._root,S?S._root:void 0);return new ao(x,O)}(S.routeReuseStrategy,ke.targetSnapshot,ke.currentRouterState);return this.currentTransition=J={...ke,targetRouterState:Ct},this.currentNavigation.targetRouterState=Ct,J}),(0,Ee.b)(()=>{this.events.next(new Uo)}),((I,O,S,x)=>(0,ue.U)(H=>(new Ii(O,H.targetRouterState,H.currentRouterState,S,x).activate(I),H)))(this.rootContexts,S.routeReuseStrategy,ke=>this.events.next(ke),this.inputBindingEnabled),(0,an.q)(1),(0,Ee.b)({next:ke=>{de=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new gn(ke.id,this.urlSerializer.serialize(ke.extractedUrl),this.urlSerializer.serialize(ke.urlAfterRedirects))),this.titleStrategy?.updateTitle(ke.targetRouterState.snapshot),ke.resolve(!0)},complete:()=>{de=!0}}),function hr(I){return(0,Se.e)((O,S)=>{(0,be.Xf)(I).subscribe((0,st.x)(S,()=>S.complete(),Dn.Z)),!S.closed&&O.subscribe(S)})}(this.transitionAbortSubject.pipe((0,Ee.b)(ke=>{throw ke}))),jt(()=>{!de&&!Le&&this.cancelNavigationTransition(J,"",bi.SupersededByNewNavigation),this.currentNavigation?.id===J.id&&(this.currentNavigation=null)}),De(ke=>{if(Le=!0,Ho(ke))this.events.next(new Es(J.id,this.urlSerializer.serialize(J.extractedUrl),ke.message,ke.cancellationCode)),function Su(I){return Ho(I)&&Yi(I.url)}(ke)?this.events.next(new Ri(ke.url)):J.resolve(!1);else{this.events.next(new Ea(J.id,this.urlSerializer.serialize(J.extractedUrl),ke,J.targetSnapshot??void 0));try{J.resolve(S.errorHandler(ke))}catch(Ct){this.options.resolveNavigationPromiseOnError?J.resolve(!1):J.reject(Ct)}}return ze.E}))}))}cancelNavigationTransition(S,x,H){const J=new Es(S.id,this.urlSerializer.serialize(S.extractedUrl),x,H);this.events.next(J),S.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(x){return new(x||I)};static#t=this.\u0275prov=C.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();function Jl(I){return I!==so}let Ha=(()=>{class I{static#e=this.\u0275fac=function(x){return new(x||I)};static#t=this.\u0275prov=C.Yz7({token:I,factory:()=>(0,C.f3M)(ds),providedIn:"root"})}return I})();class bc{shouldDetach(O){return!1}store(O,S){}shouldAttach(O){return!1}retrieve(O){return null}shouldReuseRoute(O,S){return O.routeConfig===S.routeConfig}}let ds=(()=>{class I extends bc{static#e=this.\u0275fac=(()=>{let S;return function(H){return(S||(S=C.n5z(I)))(H||I)}})();static#t=this.\u0275prov=C.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})(),Ru=(()=>{class I{static#e=this.\u0275fac=function(x){return new(x||I)};static#t=this.\u0275prov=C.Yz7({token:I,factory:()=>(0,C.f3M)(Er),providedIn:"root"})}return I})(),Er=(()=>{class I extends Ru{constructor(){super(...arguments),this.location=(0,C.f3M)($e.Ye),this.urlSerializer=(0,C.f3M)(zn),this.options=(0,C.f3M)(ur,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,C.f3M)(Da),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ui,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Ks(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(S){return this.location.subscribe(x=>{"popstate"===x.type&&S(x.url,x.state)})}handleRouterEvent(S,x){if(S instanceof oo)this.stateMemento=this.createStateMemento();else if(S instanceof jr)this.rawUrlTree=x.initialUrl;else if(S instanceof oi){if("eager"===this.urlUpdateStrategy&&!x.extras.skipLocationChange){const H=this.urlHandlingStrategy.merge(x.finalUrl,x.initialUrl);this.setBrowserUrl(H,x)}}else S instanceof Uo?(this.currentUrlTree=x.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(x.finalUrl,x.initialUrl),this.routerState=x.targetRouterState,"deferred"===this.urlUpdateStrategy&&(x.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,x))):S instanceof Es&&(S.code===bi.GuardRejected||S.code===bi.NoDataFromResolver)?this.restoreHistory(x):S instanceof Ea?this.restoreHistory(x,!0):S instanceof gn&&(this.lastSuccessfulId=S.id,this.currentPageId=this.browserPageId)}setBrowserUrl(S,x){const H=this.urlSerializer.serialize(S);if(this.location.isCurrentPathEqualTo(H)||x.extras.replaceUrl){const de={...x.extras.state,...this.generateNgRouterState(x.id,this.browserPageId)};this.location.replaceState(H,"",de)}else{const J={...x.extras.state,...this.generateNgRouterState(x.id,this.browserPageId+1)};this.location.go(H,"",J)}}restoreHistory(S,x=!1){if("computed"===this.canceledNavigationResolution){const J=this.currentPageId-this.browserPageId;0!==J?this.location.historyGo(J):this.currentUrlTree===S.finalUrl&&0===J&&(this.resetState(S),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(x&&this.resetState(S),this.resetUrlToCurrentUrlTree())}resetState(S){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,S.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(S,x){return"computed"===this.canceledNavigationResolution?{navigationId:S,\u0275routerPageId:x}:{navigationId:S}}static#e=this.\u0275fac=(()=>{let S;return function(H){return(S||(S=C.n5z(I)))(H||I)}})();static#t=this.\u0275prov=C.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();var Rs=function(I){return I[I.COMPLETE=0]="COMPLETE",I[I.FAILED=1]="FAILED",I[I.REDIRECTING=2]="REDIRECTING",I}(Rs||{});function Us(I,O){I.events.pipe((0,Un.h)(S=>S instanceof gn||S instanceof Es||S instanceof Ea||S instanceof jr),(0,ue.U)(S=>S instanceof gn||S instanceof jr?Rs.COMPLETE:S instanceof Es&&(S.code===bi.Redirect||S.code===bi.SupersededByNewNavigation)?Rs.REDIRECTING:Rs.FAILED),(0,Un.h)(S=>S!==Rs.REDIRECTING),(0,an.q)(1)).subscribe(()=>{O()})}function Ye(I){throw I}const li={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Wi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Mi=(()=>{class I{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,C.f3M)(C.c2e),this.stateManager=(0,C.f3M)(Ru),this.options=(0,C.f3M)(ur,{optional:!0})||{},this.pendingTasks=(0,C.f3M)(C.I6F),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,C.f3M)(Vs),this.urlSerializer=(0,C.f3M)(zn),this.location=(0,C.f3M)($e.Ye),this.urlHandlingStrategy=(0,C.f3M)(Da),this._events=new Ge.x,this.errorHandler=this.options.errorHandler||Ye,this.navigated=!1,this.routeReuseStrategy=(0,C.f3M)(Ha),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,C.f3M)(ls,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,C.f3M)(To,{optional:!0}),this.eventsSubscription=new Ze.w0,this.isNgZoneEnabled=(0,C.f3M)(C.R0b)instanceof C.R0b&&C.R0b.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:S=>{this.console.warn(S)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const S=this.navigationTransitions.events.subscribe(x=>{try{const H=this.navigationTransitions.currentTransition,J=this.navigationTransitions.currentNavigation;if(null!==H&&null!==J)if(this.stateManager.handleRouterEvent(x,J),x instanceof Es&&x.code!==bi.Redirect&&x.code!==bi.SupersededByNewNavigation)this.navigated=!0;else if(x instanceof gn)this.navigated=!0;else if(x instanceof Ri){const de=this.urlHandlingStrategy.merge(x.url,H.currentRawUrl),Le={info:H.extras.info,skipLocationChange:H.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Jl(H.source)};this.scheduleNavigation(de,so,null,Le,{resolve:H.resolve,reject:H.reject,promise:H.promise})}(function Jt(I){return!(I instanceof Uo||I instanceof Ri)})(x)&&this._events.next(x)}catch(H){this.navigationTransitions.transitionAbortSubject.next(H)}});this.eventsSubscription.add(S)}resetRootComponentType(S){this.routerState.root.component=S,this.navigationTransitions.rootComponentType=S}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),so,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((S,x)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(S,"popstate",x)},0)})}navigateToSyncWithBrowser(S,x,H){const J={replaceUrl:!0},de=H?.navigationId?H:null;if(H){const ke={...H};delete ke.navigationId,delete ke.\u0275routerPageId,0!==Object.keys(ke).length&&(J.state=ke)}const Le=this.parseUrl(S);this.scheduleNavigation(Le,x,de,J)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(S){this.config=S.map(Go),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(S,x={}){const{relativeTo:H,queryParams:J,fragment:de,queryParamsHandling:Le,preserveFragment:ke}=x,Ct=ke?this.currentUrlTree.fragment:de;let pn,bn=null;switch(Le){case"merge":bn={...this.currentUrlTree.queryParams,...J};break;case"preserve":bn=this.currentUrlTree.queryParams;break;default:bn=J||null}null!==bn&&(bn=this.removeEmptyProps(bn));try{pn=Re(H?H.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof S[0]||!S[0].startsWith("/"))&&(S=[]),pn=this.currentUrlTree.root}return Qe(pn,S,bn,Ct??null)}navigateByUrl(S,x={skipLocationChange:!1}){const H=Yi(S)?S:this.parseUrl(S),J=this.urlHandlingStrategy.merge(H,this.rawUrlTree);return this.scheduleNavigation(J,so,null,x)}navigate(S,x={skipLocationChange:!1}){return function vt(I){for(let O=0;O<I.length;O++)if(null==I[O])throw new C.vHH(4008,!1)}(S),this.navigateByUrl(this.createUrlTree(S,x),x)}serializeUrl(S){return this.urlSerializer.serialize(S)}parseUrl(S){try{return this.urlSerializer.parse(S)}catch{return this.urlSerializer.parse("/")}}isActive(S,x){let H;if(H=!0===x?{...li}:!1===x?{...Wi}:x,Yi(S))return Fr(this.currentUrlTree,S,H);const J=this.parseUrl(S);return Fr(this.currentUrlTree,J,H)}removeEmptyProps(S){return Object.entries(S).reduce((x,[H,J])=>(null!=J&&(x[H]=J),x),{})}scheduleNavigation(S,x,H,J,de){if(this.disposed)return Promise.resolve(!1);let Le,ke,Ct;de?(Le=de.resolve,ke=de.reject,Ct=de.promise):Ct=new Promise((pn,fi)=>{Le=pn,ke=fi});const bn=this.pendingTasks.add();return Us(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(bn))}),this.navigationTransitions.handleNavigationRequest({source:x,restoredState:H,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:S,extras:J,resolve:Le,reject:ke,promise:Ct,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ct.catch(pn=>Promise.reject(pn))}static#e=this.\u0275fac=function(x){return new(x||I)};static#t=this.\u0275prov=C.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})(),Aa=(()=>{class I{constructor(S,x,H,J,de,Le){this.router=S,this.route=x,this.tabIndexAttribute=H,this.renderer=J,this.el=de,this.locationStrategy=Le,this.href=null,this.commands=null,this.onChanges=new Ge.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const ke=de.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===ke||"area"===ke,this.isAnchorElement?this.subscription=S.events.subscribe(Ct=>{Ct instanceof gn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(S){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",S)}ngOnChanges(S){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(S){null!=S?(this.commands=Array.isArray(S)?S:[S],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(S,x,H,J,de){return!!(null===this.urlTree||this.isAnchorElement&&(0!==S||x||H||J||de||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const S=null===this.href?null:(0,C.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",S)}applyAttributeValue(S,x){const H=this.renderer,J=this.el.nativeElement;null!==x?H.setAttribute(J,S,x):H.removeAttribute(J,S)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(x){return new(x||I)(C.Y36(Mi),C.Y36(ji),C.$8M("tabindex"),C.Y36(C.Qsj),C.Y36(C.SBq),C.Y36($e.S$))};static#t=this.\u0275dir=C.lG2({type:I,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(x,H){1&x&&C.NdJ("click",function(de){return H.onClick(de.button,de.ctrlKey,de.shiftKey,de.altKey,de.metaKey)}),2&x&&C.uIk("target",H.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[C.lbL.HasDecoratorInputTransform,"preserveFragment","preserveFragment",C.VuI],skipLocationChange:[C.lbL.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",C.VuI],replaceUrl:[C.lbL.HasDecoratorInputTransform,"replaceUrl","replaceUrl",C.VuI],routerLink:"routerLink"},standalone:!0,features:[C.Xq5,C.TTD]})}return I})();class it{}let Tr=(()=>{class I{preload(S,x){return x().pipe(De(()=>(0,pe.of)(null)))}static#e=this.\u0275fac=function(x){return new(x||I)};static#t=this.\u0275prov=C.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})(),Pu=(()=>{class I{constructor(S,x,H,J,de){this.router=S,this.injector=H,this.preloadingStrategy=J,this.loader=de}setUpPreloading(){this.subscription=this.router.events.pipe((0,Un.h)(S=>S instanceof gn),rn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(S,x){const H=[];for(const J of x){J.providers&&!J._injector&&(J._injector=(0,C.MMx)(J.providers,S,`Route: ${J.path}`));const de=J._injector??S,Le=J._loadedInjector??de;(J.loadChildren&&!J._loadedRoutes&&void 0===J.canLoad||J.loadComponent&&!J._loadedComponent)&&H.push(this.preloadConfig(de,J)),(J.children||J._loadedRoutes)&&H.push(this.processRoutes(Le,J.children??J._loadedRoutes))}return(0,ye.D)(H).pipe((0,Ar.J)())}preloadConfig(S,x){return this.preloadingStrategy.preload(x,()=>{let H;H=x.loadChildren&&void 0===x.canLoad?this.loader.loadChildren(S,x):(0,pe.of)(null);const J=H.pipe((0,Rn.z)(de=>null===de?(0,pe.of)(void 0):(x._loadedRoutes=de.routes,x._loadedInjector=de.injector,this.processRoutes(de.injector??S,de.routes))));if(x.loadComponent&&!x._loadedComponent){const de=this.loader.loadComponent(x);return(0,ye.D)([J,de]).pipe((0,Ar.J)())}return J})}static#e=this.\u0275fac=function(x){return new(x||I)(C.LFG(Mi),C.LFG(C.Sil),C.LFG(C.lqb),C.LFG(it),C.LFG(Ss))};static#t=this.\u0275prov=C.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();const Ku=new C.OlP("");let $a=(()=>{class I{constructor(S,x,H,J,de={}){this.urlSerializer=S,this.transitions=x,this.viewportScroller=H,this.zone=J,this.options=de,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},de.scrollPositionRestoration||="disabled",de.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(S=>{S instanceof oo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=S.navigationTrigger,this.restoredId=S.restoredState?S.restoredState.navigationId:0):S instanceof gn?(this.lastId=S.id,this.scheduleScrollEvent(S,this.urlSerializer.parse(S.urlAfterRedirects).fragment)):S instanceof jr&&S.code===vs.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(S,this.urlSerializer.parse(S.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(S=>{S instanceof Vo&&(S.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(S.position):S.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(S.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(S,x){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Vo(S,"popstate"===this.lastSource?this.store[this.restoredId]:null,x))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(x){C.$Z()};static#t=this.\u0275prov=C.Yz7({token:I,factory:I.\u0275fac})}return I})();function Ps(I,O){return{\u0275kind:I,\u0275providers:O}}function sn(){const I=(0,C.f3M)(C.zs3);return O=>{const S=I.get(C.z2F);if(O!==S.components[0])return;const x=I.get(Mi),H=I.get(Vr);1===I.get(Qu)&&x.initialNavigation(),I.get(or,null,C.XFs.Optional)?.setUpPreloading(),I.get(Ku,null,C.XFs.Optional)?.init(),x.resetRootComponentType(S.componentTypes[0]),H.closed||(H.next(),H.complete(),H.unsubscribe())}}const Vr=new C.OlP("",{factory:()=>new Ge.x}),Qu=new C.OlP("",{providedIn:"root",factory:()=>1}),or=new C.OlP("");function Zd(I){return Ps(0,[{provide:or,useExisting:Pu},{provide:it,useExisting:I}])}function Po(I){return Ps(9,[{provide:Sc,useValue:qu},{provide:Ql,useValue:{skipNextTransition:!!I?.skipInitialTransition,...I}}])}const Mo=new C.OlP("ROUTER_FORROOT_GUARD"),ca=[$e.Ye,{provide:zn,useClass:rr},Mi,qs,{provide:ji,useFactory:function Ko(I){return I.routerState.root},deps:[Mi]},Ss,[]];let hs=(()=>{class I{constructor(S){}static forRoot(S,x){return{ngModule:I,providers:[ca,[],{provide:ls,multi:!0,useValue:S},{provide:Mo,useFactory:Cl,deps:[[Mi,new C.FiY,new C.tp0]]},{provide:ur,useValue:x||{}},x?.useHash?{provide:$e.S$,useClass:$e.Do}:{provide:$e.S$,useClass:$e.b0},{provide:Ku,useFactory:()=>{const I=(0,C.f3M)($e.EM),O=(0,C.f3M)(C.R0b),S=(0,C.f3M)(ur),x=(0,C.f3M)(Vs),H=(0,C.f3M)(zn);return S.scrollOffset&&I.setOffset(S.scrollOffset),new $a(H,x,I,O,S)}},x?.preloadingStrategy?Zd(x.preloadingStrategy).\u0275providers:[],x?.initialNavigation?ec(x):[],x?.bindToComponentInputs?Ps(8,[Gn,{provide:To,useExisting:Gn}]).\u0275providers:[],x?.enableViewTransitions?Po().\u0275providers:[],[{provide:ps,useFactory:sn},{provide:C.tb,multi:!0,useExisting:ps}]]}}static forChild(S){return{ngModule:I,providers:[{provide:ls,multi:!0,useValue:S}]}}static#e=this.\u0275fac=function(x){return new(x||I)(C.LFG(Mo,8))};static#t=this.\u0275mod=C.oAB({type:I});static#n=this.\u0275inj=C.cJS({})}return I})();function Cl(I){return"guarded"}function ec(I){return["disabled"===I.initialNavigation?Ps(3,[{provide:C.ip1,multi:!0,useFactory:()=>{const O=(0,C.f3M)(Mi);return()=>{O.setUpLocationChangeListener()}}},{provide:Qu,useValue:2}]).\u0275providers:[],"enabledBlocking"===I.initialNavigation?Ps(2,[{provide:Qu,useValue:0},{provide:C.ip1,multi:!0,deps:[C.zs3],useFactory:O=>{const S=O.get($e.V_,Promise.resolve());return()=>S.then(()=>new Promise(x=>{const H=O.get(Mi),J=O.get(Vr);Us(H,()=>{x(!0)}),O.get(Vs).afterPreactivation=()=>(x(!0),J.closed?(0,pe.of)(void 0):J),H.initialNavigation()}))}}]).\u0275providers:[]]}const ps=new C.OlP("")},3106:(Mt,Ue,$)=>{$.d(Ue,{Z:()=>gt});var C=$(9058),W=$(4537),le=$(534),se=$(7879);class ye{constructor(Et,dt){this._delegate=Et,this.firebase=dt,(0,le._addComponent)(Et,new W.wA("app-compat",()=>this,"PUBLIC")),this.container=Et.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Et){this._delegate.automaticDataCollectionEnabled=Et}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Et=>{this._delegate.checkDestroyed(),Et()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,le.deleteApp)(this._delegate)))}_getService(Et,dt=le._DEFAULT_ENTRY_NAME){var Kt;this._delegate.checkDestroyed();const Bt=this._delegate.container.getProvider(Et);return!Bt.isInitialized()&&"EXPLICIT"===(null===(Kt=Bt.getComponent())||void 0===Kt?void 0:Kt.instantiationMode)&&Bt.initialize(),Bt.getImmediate({identifier:dt})}_removeServiceInstance(Et,dt=le._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Et).clearInstance(dt)}_addComponent(Et){(0,le._addComponent)(this._delegate,Et)}_addOrOverwriteComponent(Et){(0,le._addOrOverwriteComponent)(this._delegate,Et)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Pe=new C.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),fe=function Fe(){const qt=function b(qt){const Et={},dt={__esModule:!0,initializeApp:function nt(Ge,Ze={}){const $e=le.initializeApp(Ge,Ze);if((0,C.r3)(Et,$e.name))return Et[$e.name];const ue=new qt($e,dt);return Et[$e.name]=ue,ue},app:Bt,registerVersion:le.registerVersion,setLogLevel:le.setLogLevel,onLog:le.onLog,apps:null,SDK_VERSION:le.SDK_VERSION,INTERNAL:{registerComponent:function ze(Ge){const Ze=Ge.name,$e=Ze.replace("-compat","");if(le._registerComponent(Ge)&&"PUBLIC"===Ge.type){const ue=(Ve=Bt())=>{if("function"!=typeof Ve[$e])throw Pe.create("invalid-app-argument",{appName:Ze});return Ve[$e]()};void 0!==Ge.serviceProps&&(0,C.ZB)(ue,Ge.serviceProps),dt[$e]=ue,qt.prototype[$e]=function(...Ve){return this._getService.bind(this,Ze).apply(this,Ge.multipleInstances?Ve:[])}}return"PUBLIC"===Ge.type?dt[$e]:null},removeApp:function Kt(Ge){delete Et[Ge]},useAsService:function ht(Ge,Ze){return"serverAuth"===Ze?null:Ze},modularAPIs:le}};function Bt(Ge){if(!(0,C.r3)(Et,Ge=Ge||le._DEFAULT_ENTRY_NAME))throw Pe.create("no-app",{appName:Ge});return Et[Ge]}return dt.default=dt,Object.defineProperty(dt,"apps",{get:function ce(){return Object.keys(Et).map(Ge=>Et[Ge])}}),Bt.App=qt,dt}(ye);return qt.INTERNAL=Object.assign(Object.assign({},qt.INTERNAL),{createFirebaseNamespace:Fe,extendNamespace:function Et(dt){(0,C.ZB)(qt,dt)},createSubscribe:C.ne,ErrorFactory:C.LL,deepExtend:C.ZB}),qt}(),he=new se.Yd("@firebase/app-compat");if((0,C.jU)()&&void 0!==self.firebase){he.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const qt=self.firebase.SDK_VERSION;qt&&qt.indexOf("LITE")>=0&&he.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const gt=fe;!function Xe(qt){(0,le.registerVersion)("@firebase/app-compat","0.2.31",qt)}()},534:(Mt,Ue,$)=>{$.r(Ue),$.d(Ue,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Oi,_DEFAULT_ENTRY_NAME:()=>nr,_addComponent:()=>Fr,_addOrOverwriteComponent:()=>Bn,_apps:()=>Yt,_clearComponents:()=>Ui,_components:()=>En,_getProvider:()=>Fo,_isFirebaseApp:()=>Qi,_isFirebaseServerApp:()=>_t,_registerComponent:()=>Ln,_removeServiceInstance:()=>qn,_serverApps:()=>Ai,deleteApp:()=>Pn,getApp:()=>Br,getApps:()=>en,initializeApp:()=>zn,initializeServerApp:()=>rr,onLog:()=>X,registerVersion:()=>me,setLogLevel:()=>ne});var C=$(5861),W=$(4537),le=$(7879),se=$(9058);const ye=(Be,Re)=>Re.some(Qe=>Be instanceof Qe);let pe,Pe;const fe=new WeakMap,he=new WeakMap,Oe=new WeakMap,st=new WeakMap,Xe=new WeakMap;let Et={get(Be,Re,Qe){if(Be instanceof IDBTransaction){if("done"===Re)return he.get(Be);if("objectStoreNames"===Re)return Be.objectStoreNames||Oe.get(Be);if("store"===Re)return Qe.objectStoreNames[1]?void 0:Qe.objectStore(Qe.objectStoreNames[0])}return nt(Be[Re])},set:(Be,Re,Qe)=>(Be[Re]=Qe,!0),has:(Be,Re)=>Be instanceof IDBTransaction&&("done"===Re||"store"===Re)||Re in Be};function Bt(Be){return"function"==typeof Be?function Kt(Be){return Be!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Fe(){return Pe||(Pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Be)?function(...Re){return Be.apply(ce(this),Re),nt(fe.get(this))}:function(...Re){return nt(Be.apply(ce(this),Re))}:function(Re,...Qe){const ot=Be.call(ce(this),Re,...Qe);return Oe.set(ot,Re.sort?Re.sort():[Re]),nt(ot)}}(Be):(Be instanceof IDBTransaction&&function qt(Be){if(he.has(Be))return;const Re=new Promise((Qe,ot)=>{const $t=()=>{Be.removeEventListener("complete",ln),Be.removeEventListener("error",_n),Be.removeEventListener("abort",_n)},ln=()=>{Qe(),$t()},_n=()=>{ot(Be.error||new DOMException("AbortError","AbortError")),$t()};Be.addEventListener("complete",ln),Be.addEventListener("error",_n),Be.addEventListener("abort",_n)});he.set(Be,Re)}(Be),ye(Be,function b(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Be,Et):Be)}function nt(Be){if(Be instanceof IDBRequest)return function gt(Be){const Re=new Promise((Qe,ot)=>{const $t=()=>{Be.removeEventListener("success",ln),Be.removeEventListener("error",_n)},ln=()=>{Qe(nt(Be.result)),$t()},_n=()=>{ot(Be.error),$t()};Be.addEventListener("success",ln),Be.addEventListener("error",_n)});return Re.then(Qe=>{Qe instanceof IDBCursor&&fe.set(Qe,Be)}).catch(()=>{}),Xe.set(Re,Be),Re}(Be);if(st.has(Be))return st.get(Be);const Re=Bt(Be);return Re!==Be&&(st.set(Be,Re),Xe.set(Re,Be)),Re}const ce=Be=>Xe.get(Be),Ge=["get","getKey","getAll","getAllKeys","count"],Ze=["put","add","delete","clear"],$e=new Map;function ue(Be,Re){if(!(Be instanceof IDBDatabase)||Re in Be||"string"!=typeof Re)return;if($e.get(Re))return $e.get(Re);const Qe=Re.replace(/FromIndex$/,""),ot=Re!==Qe,$t=Ze.includes(Qe);if(!(Qe in(ot?IDBIndex:IDBObjectStore).prototype)||!$t&&!Ge.includes(Qe))return;const ln=function(){var _n=(0,C.Z)(function*(Jn,...yr){const Xr=this.transaction(Jn,$t?"readwrite":"readonly");let Bi=Xr.store;return ot&&(Bi=Bi.index(yr.shift())),(yield Promise.all([Bi[Qe](...yr),$t&&Xr.done]))[0]});return function(yr){return _n.apply(this,arguments)}}();return $e.set(Re,ln),ln}!function dt(Be){Et=Be(Et)}(Be=>({...Be,get:(Re,Qe,ot)=>ue(Re,Qe)||Be.get(Re,Qe,ot),has:(Re,Qe)=>!!ue(Re,Qe)||Be.has(Re,Qe)}));class Ve{constructor(Re){this.container=Re}getPlatformInfoString(){return this.container.getProviders().map(Qe=>{if(function an(Be){const Re=Be.getComponent();return"VERSION"===Re?.type}(Qe)){const ot=Qe.getImmediate();return`${ot.library}/${ot.version}`}return null}).filter(Qe=>Qe).join(" ")}}const At="@firebase/app",Un="0.10.1",Rn=new le.Yd("@firebase/app"),nr="[DEFAULT]",An={[At]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Yt=new Map,Ai=new Map,En=new Map;function Fr(Be,Re){try{Be.container.addComponent(Re)}catch(Qe){Rn.debug(`Component ${Re.name} failed to register with FirebaseApp ${Be.name}`,Qe)}}function Bn(Be,Re){Be.container.addOrOverwriteComponent(Re)}function Ln(Be){const Re=Be.name;if(En.has(Re))return Rn.debug(`There were multiple attempts to register component ${Re}.`),!1;En.set(Re,Be);for(const Qe of Yt.values())Fr(Qe,Be);for(const Qe of Ai.values())Fr(Qe,Be);return!0}function Fo(Be,Re){const Qe=Be.container.getProvider("heartbeat").getImmediate({optional:!0});return Qe&&Qe.triggerHeartbeat(),Be.container.getProvider(Re)}function qn(Be,Re,Qe=nr){Fo(Be,Re).clearInstance(Qe)}function Qi(Be){return void 0!==Be.options}function _t(Be){return void 0!==Be.settings}function Ui(){En.clear()}const Yn=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class yi{constructor(Re,Qe,ot){this._isDeleted=!1,this._options=Object.assign({},Re),this._config=Object.assign({},Qe),this._name=Qe.name,this._automaticDataCollectionEnabled=Qe.automaticDataCollectionEnabled,this._container=ot,this.container.addComponent(new W.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Re){this.checkDestroyed(),this._automaticDataCollectionEnabled=Re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Re){this._isDeleted=Re}checkDestroyed(){if(this.isDeleted)throw Yn.create("app-deleted",{appName:this._name})}}class qr extends yi{constructor(Re,Qe,ot,$t){const ln=void 0!==Qe.automaticDataCollectionEnabled&&Qe.automaticDataCollectionEnabled,_n={name:ot,automaticDataCollectionEnabled:ln};super(void 0!==Re.apiKey?Re:Re.options,_n,$t),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ln},Qe),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,Qe.releaseOnDeref=void 0,me(At,Un,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Re){this.isDeleted||(this._refCount++,void 0!==Re&&this._finalizationRegistry.register(Re,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Pn(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Yn.create("server-app-deleted")}}const Oi="10.11.0";function zn(Be,Re={}){let Qe=Be;"object"!=typeof Re&&(Re={name:Re});const ot=Object.assign({name:nr,automaticDataCollectionEnabled:!1},Re),$t=ot.name;if("string"!=typeof $t||!$t)throw Yn.create("bad-app-name",{appName:String($t)});if(Qe||(Qe=(0,se.aH)()),!Qe)throw Yn.create("no-options");const ln=Yt.get($t);if(ln){if((0,se.vZ)(Qe,ln.options)&&(0,se.vZ)(ot,ln.config))return ln;throw Yn.create("duplicate-app",{appName:$t})}const _n=new W.H0($t);for(const yr of En.values())_n.addComponent(yr);const Jn=new yi(Qe,ot,_n);return Yt.set($t,Jn),Jn}function rr(Be,Re){if((0,se.jU)())throw Yn.create("invalid-server-app-environment");let Qe;void 0===Re.automaticDataCollectionEnabled&&(Re.automaticDataCollectionEnabled=!1),Qe=Qi(Be)?Be.options:Be;const ot=Object.assign(Object.assign({},Re),Qe);if(void 0!==ot.releaseOnDeref&&delete ot.releaseOnDeref,void 0!==Re.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Yn.create("finalization-registry-not-supported",{});const ln=""+(Xr=JSON.stringify(ot),[...Xr].reduce((Bi,va)=>Math.imul(31,Bi)+va.charCodeAt(0)|0,0)),_n=Ai.get(ln);var Xr;if(_n)return _n.incRefCount(Re.releaseOnDeref),_n;const Jn=new W.H0(ln);for(const Xr of En.values())Jn.addComponent(Xr);const yr=new qr(Qe,Re,ln,Jn);return Ai.set(ln,yr),yr}function Br(Be=nr){const Re=Yt.get(Be);if(!Re&&Be===nr&&(0,se.aH)())return zn();if(!Re)throw Yn.create("no-app",{appName:Be});return Re}function en(){return Array.from(Yt.values())}function Pn(Be){return ss.apply(this,arguments)}function ss(){return(ss=(0,C.Z)(function*(Be){let Re=!1;const Qe=Be.name;Yt.has(Qe)?(Re=!0,Yt.delete(Qe)):Ai.has(Qe)&&Be.decRefCount()<=0&&(Ai.delete(Qe),Re=!0),Re&&(yield Promise.all(Be.container.getProviders().map(ot=>ot.delete())),Be.isDeleted=!0)})).apply(this,arguments)}function me(Be,Re,Qe){var ot;let $t=null!==(ot=An[Be])&&void 0!==ot?ot:Be;Qe&&($t+=`-${Qe}`);const ln=$t.match(/\s|\//),_n=Re.match(/\s|\//);if(ln||_n){const Jn=[`Unable to register library "${$t}" with version "${Re}":`];return ln&&Jn.push(`library name "${$t}" contains illegal characters (whitespace or "/")`),ln&&_n&&Jn.push("and"),_n&&Jn.push(`version name "${Re}" contains illegal characters (whitespace or "/")`),void Rn.warn(Jn.join(" "))}Ln(new W.wA(`${$t}-version`,()=>({library:$t,version:Re}),"VERSION"))}function X(Be,Re){if(null!==Be&&"function"!=typeof Be)throw Yn.create("invalid-log-argument");(0,le.Am)(Be,Re)}function ne(Be){(0,le.Ub)(Be)}const ee="firebase-heartbeat-database",re=1,we="firebase-heartbeat-store";let et=null;function Nt(){return et||(et=function ze(Be,Re,{blocked:Qe,upgrade:ot,blocking:$t,terminated:ln}={}){const _n=indexedDB.open(Be,Re),Jn=nt(_n);return ot&&_n.addEventListener("upgradeneeded",yr=>{ot(nt(_n.result),yr.oldVersion,yr.newVersion,nt(_n.transaction),yr)}),Qe&&_n.addEventListener("blocked",yr=>Qe(yr.oldVersion,yr.newVersion,yr)),Jn.then(yr=>{ln&&yr.addEventListener("close",()=>ln()),$t&&yr.addEventListener("versionchange",Xr=>$t(Xr.oldVersion,Xr.newVersion,Xr))}).catch(()=>{}),Jn}(ee,re,{upgrade:(Be,Re)=>{if(0===Re)try{Be.createObjectStore(we)}catch(Qe){console.warn(Qe)}}}).catch(Be=>{throw Yn.create("idb-open",{originalErrorMessage:Be.message})})),et}function Wt(){return(Wt=(0,C.Z)(function*(Be){try{const Qe=(yield Nt()).transaction(we),ot=yield Qe.objectStore(we).get(Mn(Be));return yield Qe.done,ot}catch(Re){if(Re instanceof se.ZR)Rn.warn(Re.message);else{const Qe=Yn.create("idb-get",{originalErrorMessage:Re?.message});Rn.warn(Qe.message)}}})).apply(this,arguments)}function Hn(Be,Re){return fn.apply(this,arguments)}function fn(){return(fn=(0,C.Z)(function*(Be,Re){try{const ot=(yield Nt()).transaction(we,"readwrite");yield ot.objectStore(we).put(Re,Mn(Be)),yield ot.done}catch(Qe){if(Qe instanceof se.ZR)Rn.warn(Qe.message);else{const ot=Yn.create("idb-set",{originalErrorMessage:Qe?.message});Rn.warn(ot.message)}}})).apply(this,arguments)}function Mn(Be){return`${Be.name}!${Be.options.appId}`}class Eo{constructor(Re){this.container=Re,this._heartbeatsCache=null;const Qe=this.container.getProvider("app").getImmediate();this._storage=new ii(Qe),this._heartbeatsCachePromise=this._storage.read().then(ot=>(this._heartbeatsCache=ot,ot))}triggerHeartbeat(){var Re=this;return(0,C.Z)(function*(){var Qe,ot;const ln=Re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),_n=Ua();if((null!=(null===(Qe=Re._heartbeatsCache)||void 0===Qe?void 0:Qe.heartbeats)||(Re._heartbeatsCache=yield Re._heartbeatsCachePromise,null!=(null===(ot=Re._heartbeatsCache)||void 0===ot?void 0:ot.heartbeats)))&&Re._heartbeatsCache.lastSentHeartbeatDate!==_n&&!Re._heartbeatsCache.heartbeats.some(Jn=>Jn.date===_n))return Re._heartbeatsCache.heartbeats.push({date:_n,agent:ln}),Re._heartbeatsCache.heartbeats=Re._heartbeatsCache.heartbeats.filter(Jn=>{const yr=new Date(Jn.date).valueOf();return Date.now()-yr<=2592e6}),Re._storage.overwrite(Re._heartbeatsCache)})()}getHeartbeatsHeader(){var Re=this;return(0,C.Z)(function*(){var Qe;if(null===Re._heartbeatsCache&&(yield Re._heartbeatsCachePromise),null==(null===(Qe=Re._heartbeatsCache)||void 0===Qe?void 0:Qe.heartbeats)||0===Re._heartbeatsCache.heartbeats.length)return"";const ot=Ua(),{heartbeatsToSend:$t,unsentEntries:ln}=function ya(Be,Re=1024){const Qe=[];let ot=Be.slice();for(const $t of Be){const ln=Qe.find(_n=>_n.agent===$t.agent);if(ln){if(ln.dates.push($t.date),Ut(Qe)>Re){ln.dates.pop();break}}else if(Qe.push({agent:$t.agent,dates:[$t.date]}),Ut(Qe)>Re){Qe.pop();break}ot=ot.slice(1)}return{heartbeatsToSend:Qe,unsentEntries:ot}}(Re._heartbeatsCache.heartbeats),_n=(0,se.L)(JSON.stringify({version:2,heartbeats:$t}));return Re._heartbeatsCache.lastSentHeartbeatDate=ot,ln.length>0?(Re._heartbeatsCache.heartbeats=ln,yield Re._storage.overwrite(Re._heartbeatsCache)):(Re._heartbeatsCache.heartbeats=[],Re._storage.overwrite(Re._heartbeatsCache)),_n})()}}function Ua(){return(new Date).toISOString().substring(0,10)}class ii{constructor(Re){this.app=Re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,C.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Re=this;return(0,C.Z)(function*(){if(yield Re._canUseIndexedDBPromise){const ot=yield function hn(Be){return Wt.apply(this,arguments)}(Re.app);return ot?.heartbeats?ot:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Re){var Qe=this;return(0,C.Z)(function*(){var ot;if(yield Qe._canUseIndexedDBPromise){const ln=yield Qe.read();return Hn(Qe.app,{lastSentHeartbeatDate:null!==(ot=Re.lastSentHeartbeatDate)&&void 0!==ot?ot:ln.lastSentHeartbeatDate,heartbeats:Re.heartbeats})}})()}add(Re){var Qe=this;return(0,C.Z)(function*(){var ot;if(yield Qe._canUseIndexedDBPromise){const ln=yield Qe.read();return Hn(Qe.app,{lastSentHeartbeatDate:null!==(ot=Re.lastSentHeartbeatDate)&&void 0!==ot?ot:ln.lastSentHeartbeatDate,heartbeats:[...ln.heartbeats,...Re.heartbeats]})}})()}}function Ut(Be){return(0,se.L)(JSON.stringify({version:2,heartbeats:Be})).length}!function Yi(Be){Ln(new W.wA("platform-logger",Re=>new Ve(Re),"PRIVATE")),Ln(new W.wA("heartbeat",Re=>new Eo(Re),"PRIVATE")),me(At,Un,Be),me(At,Un,"esm2017"),me("fire-js","")}("")},4537:(Mt,Ue,$)=>{$.d(Ue,{H0:()=>b,wA:()=>le});var C=$(5861),W=$(9058);class le{constructor(fe,he,Oe){this.name=fe,this.instanceFactory=he,this.type=Oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(fe){return this.instantiationMode=fe,this}setMultipleInstances(fe){return this.multipleInstances=fe,this}setServiceProps(fe){return this.serviceProps=fe,this}setInstanceCreatedCallback(fe){return this.onInstanceCreated=fe,this}}const se="[DEFAULT]";class ye{constructor(fe,he){this.name=fe,this.container=he,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(fe){const he=this.normalizeInstanceIdentifier(fe);if(!this.instancesDeferred.has(he)){const Oe=new W.BH;if(this.instancesDeferred.set(he,Oe),this.isInitialized(he)||this.shouldAutoInitialize())try{const st=this.getOrInitializeService({instanceIdentifier:he});st&&Oe.resolve(st)}catch{}}return this.instancesDeferred.get(he).promise}getImmediate(fe){var he;const Oe=this.normalizeInstanceIdentifier(fe?.identifier),st=null!==(he=fe?.optional)&&void 0!==he&&he;if(!this.isInitialized(Oe)&&!this.shouldAutoInitialize()){if(st)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Oe})}catch(Xe){if(st)return null;throw Xe}}getComponent(){return this.component}setComponent(fe){if(fe.name!==this.name)throw Error(`Mismatching Component ${fe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=fe,this.shouldAutoInitialize()){if(function Pe(Fe){return"EAGER"===Fe.instantiationMode}(fe))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[he,Oe]of this.instancesDeferred.entries()){const st=this.normalizeInstanceIdentifier(he);try{const Xe=this.getOrInitializeService({instanceIdentifier:st});Oe.resolve(Xe)}catch{}}}}clearInstance(fe=se){this.instancesDeferred.delete(fe),this.instancesOptions.delete(fe),this.instances.delete(fe)}delete(){var fe=this;return(0,C.Z)(function*(){const he=Array.from(fe.instances.values());yield Promise.all([...he.filter(Oe=>"INTERNAL"in Oe).map(Oe=>Oe.INTERNAL.delete()),...he.filter(Oe=>"_delete"in Oe).map(Oe=>Oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(fe=se){return this.instances.has(fe)}getOptions(fe=se){return this.instancesOptions.get(fe)||{}}initialize(fe={}){const{options:he={}}=fe,Oe=this.normalizeInstanceIdentifier(fe.instanceIdentifier);if(this.isInitialized(Oe))throw Error(`${this.name}(${Oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const st=this.getOrInitializeService({instanceIdentifier:Oe,options:he});for(const[Xe,gt]of this.instancesDeferred.entries())Oe===this.normalizeInstanceIdentifier(Xe)&&gt.resolve(st);return st}onInit(fe,he){var Oe;const st=this.normalizeInstanceIdentifier(he),Xe=null!==(Oe=this.onInitCallbacks.get(st))&&void 0!==Oe?Oe:new Set;Xe.add(fe),this.onInitCallbacks.set(st,Xe);const gt=this.instances.get(st);return gt&&fe(gt,st),()=>{Xe.delete(fe)}}invokeOnInitCallbacks(fe,he){const Oe=this.onInitCallbacks.get(he);if(Oe)for(const st of Oe)try{st(fe,he)}catch{}}getOrInitializeService({instanceIdentifier:fe,options:he={}}){let Oe=this.instances.get(fe);if(!Oe&&this.component&&(Oe=this.component.instanceFactory(this.container,{instanceIdentifier:(Fe=fe,Fe===se?void 0:Fe),options:he}),this.instances.set(fe,Oe),this.instancesOptions.set(fe,he),this.invokeOnInitCallbacks(Oe,fe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,fe,Oe)}catch{}var Fe;return Oe||null}normalizeInstanceIdentifier(fe=se){return this.component?this.component.multipleInstances?fe:se:fe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class b{constructor(fe){this.name=fe,this.providers=new Map}addComponent(fe){const he=this.getProvider(fe.name);if(he.isComponentSet())throw new Error(`Component ${fe.name} has already been registered with ${this.name}`);he.setComponent(fe)}addOrOverwriteComponent(fe){this.getProvider(fe.name).isComponentSet()&&this.providers.delete(fe.name),this.addComponent(fe)}getProvider(fe){if(this.providers.has(fe))return this.providers.get(fe);const he=new ye(fe,this);return this.providers.set(fe,he),he}getProviders(){return Array.from(this.providers.values())}}},7879:(Mt,Ue,$)=>{$.d(Ue,{Am:()=>Fe,Ub:()=>b,Yd:()=>Pe,in:()=>W});const C=[];var W=function(fe){return fe[fe.DEBUG=0]="DEBUG",fe[fe.VERBOSE=1]="VERBOSE",fe[fe.INFO=2]="INFO",fe[fe.WARN=3]="WARN",fe[fe.ERROR=4]="ERROR",fe[fe.SILENT=5]="SILENT",fe}(W||{});const le={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},se=W.INFO,ye={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},pe=(fe,he,...Oe)=>{if(he<fe.logLevel)return;const st=(new Date).toISOString(),Xe=ye[he];if(!Xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${he})`);console[Xe](`[${st}]  ${fe.name}:`,...Oe)};class Pe{constructor(he){this.name=he,this._logLevel=se,this._logHandler=pe,this._userLogHandler=null,C.push(this)}get logLevel(){return this._logLevel}set logLevel(he){if(!(he in W))throw new TypeError(`Invalid value "${he}" assigned to \`logLevel\``);this._logLevel=he}setLogLevel(he){this._logLevel="string"==typeof he?le[he]:he}get logHandler(){return this._logHandler}set logHandler(he){if("function"!=typeof he)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=he}get userLogHandler(){return this._userLogHandler}set userLogHandler(he){this._userLogHandler=he}debug(...he){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...he),this._logHandler(this,W.DEBUG,...he)}log(...he){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...he),this._logHandler(this,W.VERBOSE,...he)}info(...he){this._userLogHandler&&this._userLogHandler(this,W.INFO,...he),this._logHandler(this,W.INFO,...he)}warn(...he){this._userLogHandler&&this._userLogHandler(this,W.WARN,...he),this._logHandler(this,W.WARN,...he)}error(...he){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...he),this._logHandler(this,W.ERROR,...he)}}function b(fe){C.forEach(he=>{he.setLogLevel(fe)})}function Fe(fe,he){for(const Oe of C){let st=null;he&&he.level&&(st=le[he.level]),Oe.userLogHandler=null===fe?null:(Xe,gt,...qt)=>{const Et=qt.map(dt=>{if(null==dt)return null;if("string"==typeof dt)return dt;if("number"==typeof dt||"boolean"==typeof dt)return dt.toString();if(dt instanceof Error)return dt.message;try{return JSON.stringify(dt)}catch{return null}}).filter(dt=>dt).join(" ");gt>=(st??Xe.logLevel)&&fe({level:W[gt].toLowerCase(),message:Et,args:qt,type:Xe.name})}}}},7142:(Mt,Ue,$)=>{$.d(Ue,{Z:()=>C.Z});var C=$(3106);C.Z.registerVersion("firebase","10.11.0","app-compat")},5622:(Mt,Ue,$)=>{$.r(Ue);var C=$(5861),W=$(3106),le=$(534),se=$(9058),ye=$(7879),pe=$(7582),Pe=$(4537);const Fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const gt=function st(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},qt=function Xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Et=new se.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Kt=new ye.Yd("@firebase/auth");function nt(y,...d){Kt.logLevel<=ye.in.ERROR&&Kt.error(`Auth (${le.SDK_VERSION}): ${y}`,...d)}function ce(y,...d){throw $e(y,...d)}function ze(y,...d){return $e(y,...d)}function ht(y,d,p){const T=Object.assign(Object.assign({},qt()),{[d]:p});return new se.LL("auth","Firebase",T).create(d,{appName:y.name})}function Ge(y){return ht(y,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ze(y,d,p){if(!(d instanceof p))throw p.name!==d.constructor.name&&ce(y,"argument-error"),ht(y,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(y,...d){if("string"!=typeof y){const p=d[0],T=[...d.slice(1)];return T[0]&&(T[0].appName=y.name),y._errorFactory.create(p,...T)}return Et.create(y,...d)}function ue(y,d,...p){if(!y)throw $e(d,...p)}function Ve(y){const d="INTERNAL ASSERTION FAILED: "+y;throw nt(d),new Error(d)}function an(y,d){y||Ve(d)}function At(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Un(){return"http:"===Rn()||"https:"===Rn()}function Rn(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Ee{constructor(d,p){this.shortDelay=d,this.longDelay=p,an(p>d,"Short delay should be less than long delay!"),this.isMobile=(0,se.uI)()||(0,se.b$)()}get(){return function zt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Un()||(0,se.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function be(y,d){an(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return d?`${p}${d.startsWith("/")?d.slice(1):d}`:p}class Se{static initialize(d,p,T){this.fetchImpl=d,p&&(this.headersImpl=p),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const De={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},We=new Ee(3e4,6e4);function Me(y,d){return y.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:y.tenantId}):d}function ut(y,d,p,T){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,C.Z)(function*(y,d,p,T,V={}){return Rt(y,V,(0,C.Z)(function*(){let Z={},ge={};T&&("GET"===d?ge=T:Z={body:JSON.stringify(T)});const Ne=(0,se.xO)(Object.assign({key:y.config.apiKey},ge)).slice(1),Je=yield y._getAdditionalHeaders();return Je["Content-Type"]="application/json",y.languageCode&&(Je["X-Firebase-Locale"]=y.languageCode),Se.fetch()(Dn(y,y.config.apiHost,p,Ne),Object.assign({method:d,headers:Je,referrerPolicy:"no-referrer"},Z))}))})).apply(this,arguments)}function Rt(y,d,p){return It.apply(this,arguments)}function It(){return(It=(0,C.Z)(function*(y,d,p){y._canInitEmulator=!1;const T=Object.assign(Object.assign({},De),d);try{const V=new Ar(y),Z=yield Promise.race([p(),V.promise]);V.clearNetworkTimeout();const ge=yield Z.json();if("needConfirmation"in ge)throw Sn(y,"account-exists-with-different-credential",ge);if(Z.ok&&!("errorMessage"in ge))return ge;{const Ne=Z.ok?ge.errorMessage:ge.error.message,[Je,St]=Ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Je)throw Sn(y,"credential-already-in-use",ge);if("EMAIL_EXISTS"===Je)throw Sn(y,"email-already-in-use",ge);if("USER_DISABLED"===Je)throw Sn(y,"user-disabled",ge);const Ot=T[Je]||Je.toLowerCase().replace(/[_\s]+/g,"-");if(St)throw ht(y,Ot,St);ce(y,Ot)}}catch(V){if(V instanceof se.ZR)throw V;ce(y,"network-request-failed",{message:String(V)})}})).apply(this,arguments)}function jt(y,d,p,T){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,C.Z)(function*(y,d,p,T,V={}){const Z=yield ut(y,d,p,T,V);return"mfaPendingCredential"in Z&&ce(y,"multi-factor-auth-required",{_serverResponse:Z}),Z})).apply(this,arguments)}function Dn(y,d,p,T){const V=`${d}${p}?${T}`;return y.config.emulator?be(y.config,V):`${y.config.apiScheme}://${V}`}function hr(y){switch(y){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ar{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((p,T)=>{this.timer=setTimeout(()=>T(ze(this.auth,"network-request-failed")),We.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sn(y,d,p){const T={appName:y.name};p.email&&(T.email=p.email),p.phoneNumber&&(T.phoneNumber=p.phoneNumber);const V=ze(y,d,T);return V.customData._tokenResponse=p,V}function Vt(y){return void 0!==y&&void 0!==y.getResponse}function ft(y){return void 0!==y&&void 0!==y.enterprise}class Sr{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const p of this.recaptchaEnforcementState)if(p.provider&&p.provider===d)return hr(p.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function Wr(){return(Wr=(0,C.Z)(function*(y){return(yield ut(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fn(y,d){return pr.apply(this,arguments)}function pr(){return(pr=(0,C.Z)(function*(y,d){return ut(y,"GET","/v2/recaptchaConfig",Me(y,d))})).apply(this,arguments)}function An(){return(An=(0,C.Z)(function*(y,d){return ut(y,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Ai(){return(Ai=(0,C.Z)(function*(y,d){return ut(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function En(y,d){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,C.Z)(function*(y,d){return ut(y,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Bn(y){if(y)try{const d=new Date(Number(y));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function qn(){return(qn=(0,C.Z)(function*(y,d=!1){const p=(0,se.m9)(y),T=yield p.getIdToken(d),V=_t(T);ue(V&&V.exp&&V.auth_time&&V.iat,p.auth,"internal-error");const Z="object"==typeof V.firebase?V.firebase:void 0,ge=Z?.sign_in_provider;return{claims:V,token:T,authTime:Bn(Qi(V.auth_time)),issuedAtTime:Bn(Qi(V.iat)),expirationTime:Bn(Qi(V.exp)),signInProvider:ge||null,signInSecondFactor:Z?.sign_in_second_factor||null}})).apply(this,arguments)}function Qi(y){return 1e3*Number(y)}function _t(y){const[d,p,T]=y.split(".");if(void 0===d||void 0===p||void 0===T)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const V=(0,se.tV)(p);return V?JSON.parse(V):(nt("Failed to decode base64 JWT payload"),null)}catch(V){return nt("Caught error parsing JWT payload as JSON",V?.toString()),null}}function Ui(y){const d=_t(y);return ue(d,"internal-error"),ue(typeof d.exp<"u","internal-error"),ue(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}function wn(y,d){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,C.Z)(function*(y,d,p=!1){if(p)return d;try{return yield d}catch(T){throw T instanceof se.ZR&&function yi({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(T)&&y.auth.currentUser===y&&(yield y.auth.signOut()),T}})).apply(this,arguments)}class qr{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var p;if(d){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const V=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,V)}}schedule(d=!1){var p=this;if(!this.isRunning)return;const T=this.getInterval(d);this.timerId=setTimeout((0,C.Z)(function*(){yield p.iteration()}),T)}iteration(){var d=this;return(0,C.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&d.schedule(!0))}d.schedule()})()}}class Oi{constructor(d,p){this.createdAt=d,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bn(this.lastLoginAt),this.creationTime=Bn(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function zn(y){return rr.apply(this,arguments)}function rr(){return(rr=(0,C.Z)(function*(y){var d;const p=y.auth,T=yield y.getIdToken(),V=yield wn(y,En(p,{idToken:T}));ue(V?.users.length,p,"internal-error");const Z=V.users[0];y._notifyReloadListener(Z);const ge=null!==(d=Z.providerUserInfo)&&void 0!==d&&d.length?ss(Z.providerUserInfo):[],Ne=function Pn(y,d){return[...y.filter(T=>!d.some(V=>V.providerId===T.providerId)),...d]}(y.providerData,ge),Ot=!!y.isAnonymous&&!(y.email&&Z.passwordHash||Ne?.length),Ft={uid:Z.localId,displayName:Z.displayName||null,photoURL:Z.photoUrl||null,email:Z.email||null,emailVerified:Z.emailVerified||!1,phoneNumber:Z.phoneNumber||null,tenantId:Z.tenantId||null,providerData:Ne,metadata:new Oi(Z.createdAt,Z.lastLoginAt),isAnonymous:Ot};Object.assign(y,Ft)})).apply(this,arguments)}function en(){return(en=(0,C.Z)(function*(y){const d=(0,se.m9)(y);yield zn(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function ss(y){return y.map(d=>{var{providerId:p}=d,T=(0,pe._T)(d,["providerId"]);return{providerId:p,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}function X(){return(X=(0,C.Z)(function*(y,d){const p=yield Rt(y,{},(0,C.Z)(function*(){const T=(0,se.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:V,apiKey:Z}=y.config,ge=Dn(y,V,"/v1/token",`key=${Z}`),Ne=yield y._getAdditionalHeaders();return Ne["Content-Type"]="application/x-www-form-urlencoded",Se.fetch()(ge,{method:"POST",headers:Ne,body:T})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}function ee(){return(ee=(0,C.Z)(function*(y,d){return ut(y,"POST","/v2/accounts:revokeToken",Me(y,d))})).apply(this,arguments)}class re{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){ue(d.idToken,"internal-error"),ue(typeof d.idToken<"u","internal-error"),ue(typeof d.refreshToken<"u","internal-error");const p="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):Ui(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,p)}updateFromIdToken(d){ue(0!==d.length,"internal-error");const p=Ui(d);this.updateTokensAndExpiration(d,null,p)}getToken(d,p=!1){var T=this;return(0,C.Z)(function*(){return p||!T.accessToken||T.isExpired?(ue(T.refreshToken,d,"user-token-expired"),T.refreshToken?(yield T.refresh(d,T.refreshToken),T.accessToken):null):T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,p){var T=this;return(0,C.Z)(function*(){const{accessToken:V,refreshToken:Z,expiresIn:ge}=yield function me(y,d){return X.apply(this,arguments)}(d,p);T.updateTokensAndExpiration(V,Z,Number(ge))})()}updateTokensAndExpiration(d,p,T){this.refreshToken=p||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(d,p){const{refreshToken:T,accessToken:V,expirationTime:Z}=p,ge=new re;return T&&(ue("string"==typeof T,"internal-error",{appName:d}),ge.refreshToken=T),V&&(ue("string"==typeof V,"internal-error",{appName:d}),ge.accessToken=V),Z&&(ue("number"==typeof Z,"internal-error",{appName:d}),ge.expirationTime=Z),ge}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new re,this.toJSON())}_performRefresh(){return Ve("not implemented")}}function we(y,d){ue("string"==typeof y||typeof y>"u","internal-error",{appName:d})}class et{constructor(d){var{uid:p,auth:T,stsTokenManager:V}=d,Z=(0,pe._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=T,this.stsTokenManager=V,this.accessToken=V.accessToken,this.displayName=Z.displayName||null,this.email=Z.email||null,this.emailVerified=Z.emailVerified||!1,this.phoneNumber=Z.phoneNumber||null,this.photoURL=Z.photoURL||null,this.isAnonymous=Z.isAnonymous||!1,this.tenantId=Z.tenantId||null,this.providerData=Z.providerData?[...Z.providerData]:[],this.metadata=new Oi(Z.createdAt||void 0,Z.lastLoginAt||void 0)}getIdToken(d){var p=this;return(0,C.Z)(function*(){const T=yield wn(p,p.stsTokenManager.getToken(p.auth,d));return ue(T,p.auth,"internal-error"),p.accessToken!==T&&(p.accessToken=T,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),T})()}getIdTokenResult(d){return function Fo(y){return qn.apply(this,arguments)}(this,d)}reload(){return function Br(y){return en.apply(this,arguments)}(this)}_assign(d){this!==d&&(ue(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(p=>Object.assign({},p)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const p=new et(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(d){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,p=!1){var T=this;return(0,C.Z)(function*(){let V=!1;d.idToken&&d.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(d),V=!0),p&&(yield zn(T)),yield T.auth._persistUserIfCurrent(T),V&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var d=this;return(0,C.Z)(function*(){if((0,le._isFirebaseServerApp)(d.auth.app))return Promise.reject(Ge(d.auth));const p=yield d.getIdToken();return yield wn(d,function nr(y,d){return An.apply(this,arguments)}(d.auth,{idToken:p})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,p){var T,V,Z,ge,Ne,Je,St,Ot;const Ft=null!==(T=p.displayName)&&void 0!==T?T:void 0,Di=null!==(V=p.email)&&void 0!==V?V:void 0,tu=null!==(Z=p.phoneNumber)&&void 0!==Z?Z:void 0,$r=null!==(ge=p.photoURL)&&void 0!==ge?ge:void 0,Vl=null!==(Ne=p.tenantId)&&void 0!==Ne?Ne:void 0,rh=null!==(Je=p._redirectEventId)&&void 0!==Je?Je:void 0,Wc=null!==(St=p.createdAt)&&void 0!==St?St:void 0,hc=null!==(Ot=p.lastLoginAt)&&void 0!==Ot?Ot:void 0,{uid:nu,emailVerified:ih,isAnonymous:ap,providerData:qc,stsTokenManager:up}=p;ue(nu&&up,d,"internal-error");const lp=re.fromJSON(this.name,up);ue("string"==typeof nu,d,"internal-error"),we(Ft,d.name),we(Di,d.name),ue("boolean"==typeof ih,d,"internal-error"),ue("boolean"==typeof ap,d,"internal-error"),we(tu,d.name),we($r,d.name),we(Vl,d.name),we(rh,d.name),we(Wc,d.name),we(hc,d.name);const sh=new et({uid:nu,auth:d,email:Di,emailVerified:ih,displayName:Ft,isAnonymous:ap,photoURL:$r,phoneNumber:tu,tenantId:Vl,stsTokenManager:lp,createdAt:Wc,lastLoginAt:hc});return qc&&Array.isArray(qc)&&(sh.providerData=qc.map(Zh=>Object.assign({},Zh))),rh&&(sh._redirectEventId=rh),sh}static _fromIdTokenResponse(d,p,T=!1){return(0,C.Z)(function*(){const V=new re;V.updateFromServerResponse(p);const Z=new et({uid:p.localId,auth:d,stsTokenManager:V,isAnonymous:T});return yield zn(Z),Z})()}static _fromGetAccountInfoResponse(d,p,T){return(0,C.Z)(function*(){const V=p.users[0];ue(void 0!==V.localId,"internal-error");const Z=void 0!==V.providerUserInfo?ss(V.providerUserInfo):[],ge=!(V.email&&V.passwordHash||Z?.length),Ne=new re;Ne.updateFromIdToken(T);const Je=new et({uid:V.localId,auth:d,stsTokenManager:Ne,isAnonymous:ge}),St={uid:V.localId,displayName:V.displayName||null,photoURL:V.photoUrl||null,email:V.email||null,emailVerified:V.emailVerified||!1,phoneNumber:V.phoneNumber||null,tenantId:V.tenantId||null,providerData:Z,metadata:new Oi(V.createdAt,V.lastLoginAt),isAnonymous:!(V.email&&V.passwordHash||Z?.length)};return Object.assign(Je,St),Je})()}}const Nt=new Map;function hn(y){an(y instanceof Function,"Expected a class definition");let d=Nt.get(y);return d?(an(d instanceof y,"Instance stored in cache mismatched with class"),d):(d=new y,Nt.set(y,d),d)}const Hn=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,C.Z)(function*(){return!0})()}_set(p,T){var V=this;return(0,C.Z)(function*(){V.storage[p]=T})()}_get(p){var T=this;return(0,C.Z)(function*(){const V=T.storage[p];return void 0===V?null:V})()}_remove(p){var T=this;return(0,C.Z)(function*(){delete T.storage[p]})()}_addListener(p,T){}_removeListener(p,T){}}return y.type="NONE",y})();function fn(y,d,p){return`firebase:${y}:${d}:${p}`}class Mn{constructor(d,p,T){this.persistence=d,this.auth=p,this.userKey=T;const{config:V,name:Z}=this.auth;this.fullUserKey=fn(this.userKey,V.apiKey,Z),this.fullPersistenceKey=fn("persistence",V.apiKey,Z),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,C.Z)(function*(){const p=yield d.persistence._get(d.fullUserKey);return p?et._fromJSON(d.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var p=this;return(0,C.Z)(function*(){if(p.persistence===d)return;const T=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=d,T?p.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,p,T="authUser"){return(0,C.Z)(function*(){if(!p.length)return new Mn(hn(Hn),d,T);const V=(yield Promise.all(p.map(function(){var St=(0,C.Z)(function*(Ot){if(yield Ot._isAvailable())return Ot});return function(Ot){return St.apply(this,arguments)}}()))).filter(St=>St);let Z=V[0]||hn(Hn);const ge=fn(T,d.config.apiKey,d.name);let Ne=null;for(const St of p)try{const Ot=yield St._get(ge);if(Ot){const Ft=et._fromJSON(d,Ot);St!==Z&&(Ne=Ft),Z=St;break}}catch{}const Je=V.filter(St=>St._shouldAllowMigration);return Z._shouldAllowMigration&&Je.length?(Z=Je[0],Ne&&(yield Z._set(ge,Ne.toJSON())),yield Promise.all(p.map(function(){var St=(0,C.Z)(function*(Ot){if(Ot!==Z)try{yield Ot._remove(ge)}catch{}});return function(Ot){return St.apply(this,arguments)}}())),new Mn(Z,d,T)):new Mn(Z,d,T)})()}}function Or(y){const d=y.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(ya(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Ws(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Ut(d))return"Blackberry";if(Yi(d))return"Webos";if(Eo(d))return"Safari";if((d.includes("chrome/")||Ua(d))&&!d.includes("edge/"))return"Chrome";if(ii(d))return"Android";{const T=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function Ws(y=(0,se.z$)()){return/firefox\//i.test(y)}function Eo(y=(0,se.z$)()){const d=y.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Ua(y=(0,se.z$)()){return/crios\//i.test(y)}function ya(y=(0,se.z$)()){return/iemobile/i.test(y)}function ii(y=(0,se.z$)()){return/android/i.test(y)}function Ut(y=(0,se.z$)()){return/blackberry/i.test(y)}function Yi(y=(0,se.z$)()){return/webos/i.test(y)}function Be(y=(0,se.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function $t(y=(0,se.z$)()){return Be(y)||ii(y)||Yi(y)||Ut(y)||/windows phone/i.test(y)||ya(y)}function _n(y,d=[]){let p;switch(y){case"Browser":p=Or((0,se.z$)());break;case"Worker":p=`${Or((0,se.z$)())}-${y}`;break;default:p=y}const T=d.length?d.join(","):"FirebaseCore-web";return`${p}/JsCore/${le.SDK_VERSION}/${T}`}class Jn{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,p){const T=Z=>new Promise((ge,Ne)=>{try{ge(d(Z))}catch(Je){Ne(Je)}});T.onAbort=p,this.queue.push(T);const V=this.queue.length-1;return()=>{this.queue[V]=()=>Promise.resolve()}}runMiddleware(d){var p=this;return(0,C.Z)(function*(){if(p.auth.currentUser===d)return;const T=[];try{for(const V of p.queue)yield V(d),V.onAbort&&T.push(V.onAbort)}catch(V){T.reverse();for(const Z of T)try{Z()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:V?.message})}})()}}function Xr(){return(Xr=(0,C.Z)(function*(y,d={}){return ut(y,"GET","/v2/passwordPolicy",Me(y,d))})).apply(this,arguments)}class va{constructor(d){var p,T,V,Z;const ge=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(p=ge.minPasswordLength)&&void 0!==p?p:6,ge.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ge.maxPasswordLength),void 0!==ge.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ge.containsLowercaseCharacter),void 0!==ge.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ge.containsUppercaseCharacter),void 0!==ge.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ge.containsNumericCharacter),void 0!==ge.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ge.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(V=null===(T=d.allowedNonAlphanumericCharacters)||void 0===T?void 0:T.join(""))&&void 0!==V?V:"",this.forceUpgradeOnSignin=null!==(Z=d.forceUpgradeOnSignin)&&void 0!==Z&&Z,this.schemaVersion=d.schemaVersion}validatePassword(d){var p,T,V,Z,ge,Ne;const Je={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,Je),this.validatePasswordCharacterOptions(d,Je),Je.isValid&&(Je.isValid=null===(p=Je.meetsMinPasswordLength)||void 0===p||p),Je.isValid&&(Je.isValid=null===(T=Je.meetsMaxPasswordLength)||void 0===T||T),Je.isValid&&(Je.isValid=null===(V=Je.containsLowercaseLetter)||void 0===V||V),Je.isValid&&(Je.isValid=null===(Z=Je.containsUppercaseLetter)||void 0===Z||Z),Je.isValid&&(Je.isValid=null===(ge=Je.containsNumericCharacter)||void 0===ge||ge),Je.isValid&&(Je.isValid=null===(Ne=Je.containsNonAlphanumericCharacter)||void 0===Ne||Ne),Je}validatePasswordLengthOptions(d,p){const T=this.customStrengthOptions.minPasswordLength,V=this.customStrengthOptions.maxPasswordLength;T&&(p.meetsMinPasswordLength=d.length>=T),V&&(p.meetsMaxPasswordLength=d.length<=V)}validatePasswordCharacterOptions(d,p){let T;this.updatePasswordCharacterOptionsStatuses(p,!1,!1,!1,!1);for(let V=0;V<d.length;V++)T=d.charAt(V),this.updatePasswordCharacterOptionsStatuses(p,T>="a"&&T<="z",T>="A"&&T<="Z",T>="0"&&T<="9",this.allowedNonAlphanumericCharacters.includes(T))}updatePasswordCharacterOptionsStatuses(d,p,T,V,Z){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=p)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=T)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=V)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=Z))}}class io{constructor(d,p,T,V){this.app=d,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=T,this.config=V,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lo(this),this.idTokenSubscription=new Lo(this),this.beforeStateQueue=new Jn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Et,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=V.sdkClientVersion}_initializeWithPersistence(d,p){var T=this;return p&&(this._popupRedirectResolver=hn(p)),this._initializationPromise=this.queue((0,C.Z)(function*(){var V,Z;if(!T._deleted&&(T.persistenceManager=yield Mn.create(T,d),!T._deleted)){if(null!==(V=T._popupRedirectResolver)&&void 0!==V&&V._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(p),T.lastNotifiedUid=(null===(Z=T.currentUser)||void 0===Z?void 0:Z.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,C.Z)(function*(){if(d._deleted)return;const p=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||p){if(d.currentUser&&p&&d.currentUser.uid===p.uid)return d._currentUser._assign(p),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(p,!0)}})()}initializeCurrentUserFromIdToken(d){var p=this;return(0,C.Z)(function*(){try{const T=yield En(p,{idToken:d}),V=yield et._fromGetAccountInfoResponse(p,T,d);yield p.directlySetCurrentUser(V)}catch(T){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",T),yield p.directlySetCurrentUser(null)}})()}initializeCurrentUser(d){var p=this;return(0,C.Z)(function*(){var T;if((0,le._isFirebaseServerApp)(p.app)){const Ne=p.app.settings.authIdToken;return Ne?new Promise(Je=>{setTimeout(()=>p.initializeCurrentUserFromIdToken(Ne).then(Je,Je))}):p.directlySetCurrentUser(null)}const V=yield p.assertedPersistence.getCurrentUser();let Z=V,ge=!1;if(d&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Ne=null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId,Je=Z?._redirectEventId,St=yield p.tryRedirectSignIn(d);(!Ne||Ne===Je)&&St?.user&&(Z=St.user,ge=!0)}if(!Z)return p.directlySetCurrentUser(null);if(!Z._redirectEventId){if(ge)try{yield p.beforeStateQueue.runMiddleware(Z)}catch(Ne){Z=V,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Ne))}return Z?p.reloadAndSetCurrentUserOrClear(Z):p.directlySetCurrentUser(null)}return ue(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===Z._redirectEventId?p.directlySetCurrentUser(Z):p.reloadAndSetCurrentUserOrClear(Z)})()}tryRedirectSignIn(d){var p=this;return(0,C.Z)(function*(){let T=null;try{T=yield p._popupRedirectResolver._completeRedirectFn(p,d,!0)}catch{yield p._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(d){var p=this;return(0,C.Z)(function*(){try{yield zn(d)}catch(T){if("auth/network-request-failed"!==T?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function rn(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var d=this;return(0,C.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var p=this;return(0,C.Z)(function*(){if((0,le._isFirebaseServerApp)(p.app))return Promise.reject(Ge(p));const T=d?(0,se.m9)(d):null;return T&&ue(T.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(T&&T._clone(p))})()}_updateCurrentUser(d,p=!1){var T=this;return(0,C.Z)(function*(){if(!T._deleted)return d&&ue(T.tenantId===d.tenantId,T,"tenant-id-mismatch"),p||(yield T.beforeStateQueue.runMiddleware(d)),T.queue((0,C.Z)(function*(){yield T.directlySetCurrentUser(d),T.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,C.Z)(function*(){return(0,le._isFirebaseServerApp)(d.app)?Promise.reject(Ge(d)):(yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0))})()}setPersistence(d){var p=this;return(0,le._isFirebaseServerApp)(this.app)?Promise.reject(Ge(this)):this.queue((0,C.Z)(function*(){yield p.assertedPersistence.setPersistence(hn(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var p=this;return(0,C.Z)(function*(){p._getPasswordPolicyInternal()||(yield p._updatePasswordPolicy());const T=p._getPasswordPolicyInternal();return T.schemaVersion!==p.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(p._errorFactory.create("unsupported-password-policy-schema-version",{})):T.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,C.Z)(function*(){const p=yield function yr(y){return Xr.apply(this,arguments)}(d),T=new va(p);null===d.tenantId?d._projectPasswordPolicy=T:d._tenantPasswordPolicies[d.tenantId]=T})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new se.LL("auth","Firebase",d())}onAuthStateChanged(d,p,T){return this.registerStateListener(this.authStateSubscription,d,p,T)}beforeAuthStateChanged(d,p){return this.beforeStateQueue.pushCallback(d,p)}onIdTokenChanged(d,p,T){return this.registerStateListener(this.idTokenSubscription,d,p,T)}authStateReady(){return new Promise((d,p)=>{if(this.currentUser)d();else{const T=this.onAuthStateChanged(()=>{T(),d()},p)}})}revokeAccessToken(d){var p=this;return(0,C.Z)(function*(){if(p.currentUser){const T=yield p.currentUser.getIdToken(),V={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:T};null!=p.tenantId&&(V.tenantId=p.tenantId),yield function ne(y,d){return ee.apply(this,arguments)}(p,V)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,p){var T=this;return(0,C.Z)(function*(){const V=yield T.getOrInitRedirectPersistenceManager(p);return null===d?V.removeCurrentUser():V.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var p=this;return(0,C.Z)(function*(){if(!p.redirectPersistenceManager){const T=d&&hn(d)||p._popupRedirectResolver;ue(T,p,"argument-error"),p.redirectPersistenceManager=yield Mn.create(p,[hn(T._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(d){var p=this;return(0,C.Z)(function*(){var T,V;return p._isInitialized&&(yield p.queue((0,C.Z)(function*(){}))),(null===(T=p._currentUser)||void 0===T?void 0:T._redirectEventId)===d?p._currentUser:(null===(V=p.redirectUser)||void 0===V?void 0:V._redirectEventId)===d?p.redirectUser:null})()}_persistUserIfCurrent(d){var p=this;return(0,C.Z)(function*(){if(d===p.currentUser)return p.queue((0,C.Z)(function*(){return p.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(p=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,p,T,V){if(this._deleted)return()=>{};const Z="function"==typeof p?p:p.next.bind(p);let ge=!1;const Ne=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(Ne,this,"internal-error"),Ne.then(()=>{ge||Z(this.currentUser)}),"function"==typeof p){const Je=d.addObserver(p,T,V);return()=>{ge=!0,Je()}}{const Je=d.addObserver(p);return()=>{ge=!0,Je()}}}directlySetCurrentUser(d){var p=this;return(0,C.Z)(function*(){p.currentUser&&p.currentUser!==d&&p._currentUser._stopProactiveRefresh(),d&&p.isProactiveRefreshEnabled&&d._startProactiveRefresh(),p.currentUser=d,d?yield p.assertedPersistence.setCurrentUser(d):yield p.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=_n(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,C.Z)(function*(){var p;const T={"X-Client-Version":d.clientVersion};d.app.options.appId&&(T["X-Firebase-gmpid"]=d.app.options.appId);const V=yield null===(p=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();V&&(T["X-Firebase-Client"]=V);const Z=yield d._getAppCheckToken();return Z&&(T["X-Firebase-AppCheck"]=Z),T})()}_getAppCheckToken(){var d=this;return(0,C.Z)(function*(){var p;const T=yield null===(p=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return T?.error&&function Bt(y,...d){Kt.logLevel<=ye.in.WARN&&Kt.warn(`Auth (${le.SDK_VERSION}): ${y}`,...d)}(`Error while retrieving App Check token: ${T.error}`),T?.token})()}}function gr(y){return(0,se.m9)(y)}class Lo{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,se.ne)(p=>this.observer=p)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let On={loadJS:()=>(0,C.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vi(y){return On.loadJS(y)}function tn(y){return`__${y}${Math.floor(1e6*Math.random())}`}class gn{constructor(d){this.type="recaptcha-enterprise",this.auth=gr(d)}verify(d="verify",p=!1){var T=this;return(0,C.Z)(function*(){function Z(){return Z=(0,C.Z)(function*(Ne){if(!p){if(null==Ne.tenantId&&null!=Ne._agentRecaptchaConfig)return Ne._agentRecaptchaConfig.siteKey;if(null!=Ne.tenantId&&void 0!==Ne._tenantRecaptchaConfigs[Ne.tenantId])return Ne._tenantRecaptchaConfigs[Ne.tenantId].siteKey}return new Promise(function(){var Je=(0,C.Z)(function*(St,Ot){Fn(Ne,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ft=>{if(void 0!==Ft.recaptchaKey){const Di=new Sr(Ft);return null==Ne.tenantId?Ne._agentRecaptchaConfig=Di:Ne._tenantRecaptchaConfigs[Ne.tenantId]=Di,St(Di.siteKey)}Ot(new Error("recaptcha Enterprise site key undefined"))}).catch(Ft=>{Ot(Ft)})});return function(St,Ot){return Je.apply(this,arguments)}}())}),Z.apply(this,arguments)}function ge(Ne,Je,St){const Ot=window.grecaptcha;ft(Ot)?Ot.enterprise.ready(()=>{Ot.enterprise.execute(Ne,{action:d}).then(Ft=>{Je(Ft)}).catch(()=>{Je("NO_RECAPTCHA")})}):St(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ne,Je)=>{(function V(Ne){return Z.apply(this,arguments)})(T.auth).then(St=>{if(!p&&ft(window.grecaptcha))ge(St,Ne,Je);else{if(typeof window>"u")return void Je(new Error("RecaptchaVerifier is only supported in browser"));let Ot=function Si(){return On.recaptchaEnterpriseScript}();0!==Ot.length&&(Ot+=St),vi(Ot).then(()=>{ge(St,Ne,Je)}).catch(Ft=>{Je(Ft)})}}).catch(St=>{Je(St)})})})()}}function bi(y,d,p){return vs.apply(this,arguments)}function vs(){return(vs=(0,C.Z)(function*(y,d,p,T=!1){const V=new gn(y);let Z;try{Z=yield V.verify(p)}catch{Z=yield V.verify(p,!0)}const ge=Object.assign({},d);return Object.assign(ge,T?{captchaResp:Z}:{captchaResponse:Z}),Object.assign(ge,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ge,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ge})).apply(this,arguments)}function Es(y,d,p,T){return jr.apply(this,arguments)}function jr(){return jr=(0,C.Z)(function*(y,d,p,T){var V;if(null!==(V=y._getRecaptchaConfig())&&void 0!==V&&V.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const Z=yield bi(y,d,p,"getOobCode"===p);return T(y,Z)}return T(y,d).catch(function(){var Z=(0,C.Z)(function*(ge){if("auth/missing-recaptcha-token"===ge.code){console.log(`${p} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Ne=yield bi(y,d,p,"getOobCode"===p);return T(y,Ne)}return Promise.reject(ge)});return function(ge){return Z.apply(this,arguments)}}())}),jr.apply(this,arguments)}function ou(y){const d=y.indexOf(":");return d<0?"":y.substr(0,d+1)}function Is(y){if(!y)return null;const d=Number(y);return isNaN(d)?null:d}class ws{constructor(d,p){this.providerId=d,this.signInMethod=p}toJSON(){return Ve("not implemented")}_getIdTokenResponse(d){return Ve("not implemented")}_linkToIdToken(d,p){return Ve("not implemented")}_getReauthenticationResolver(d){return Ve("not implemented")}}function sa(y,d){return ai.apply(this,arguments)}function ai(){return(ai=(0,C.Z)(function*(y,d){return ut(y,"POST","/v1/accounts:resetPassword",Me(y,d))})).apply(this,arguments)}function Uo(){return(Uo=(0,C.Z)(function*(y,d){return ut(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ri(y,d){return oa.apply(this,arguments)}function oa(){return(oa=(0,C.Z)(function*(y,d){return ut(y,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function qs(){return(qs=(0,C.Z)(function*(y,d){return ut(y,"POST","/v1/accounts:update",Me(y,d))})).apply(this,arguments)}function lr(y,d){return aa.apply(this,arguments)}function aa(){return(aa=(0,C.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:signInWithPassword",Me(y,d))})).apply(this,arguments)}function xn(y,d){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,C.Z)(function*(y,d){return ut(y,"POST","/v1/accounts:sendOobCode",Me(y,d))})).apply(this,arguments)}function ao(){return(ao=(0,C.Z)(function*(y,d){return xn(y,d)})).apply(this,arguments)}function Ks(y,d){return wo.apply(this,arguments)}function wo(){return(wo=(0,C.Z)(function*(y,d){return xn(y,d)})).apply(this,arguments)}function ji(y,d){return xi.apply(this,arguments)}function xi(){return(xi=(0,C.Z)(function*(y,d){return xn(y,d)})).apply(this,arguments)}function Ts(){return(Ts=(0,C.Z)(function*(y,d){return xn(y,d)})).apply(this,arguments)}function $n(){return($n=(0,C.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:signInWithEmailLink",Me(y,d))})).apply(this,arguments)}function Xi(){return(Xi=(0,C.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:signInWithEmailLink",Me(y,d))})).apply(this,arguments)}class Pi extends ws{constructor(d,p,T,V=null){super("password",T),this._email=d,this._password=p,this._tenantId=V}static _fromEmailAndPassword(d,p){return new Pi(d,p,"password")}static _fromEmailAndCode(d,p,T=null){return new Pi(d,p,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(d){var p=this;return(0,C.Z)(function*(){switch(p.signInMethod){case"password":return Es(d,{returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",lr);case"emailLink":return function Hi(y,d){return $n.apply(this,arguments)}(d,{email:p._email,oobCode:p._password});default:ce(d,"internal-error")}})()}_linkToIdToken(d,p){var T=this;return(0,C.Z)(function*(){switch(T.signInMethod){case"password":return Es(d,{idToken:p,returnSecureToken:!0,email:T._email,password:T._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ri);case"emailLink":return function Cs(y,d){return Xi.apply(this,arguments)}(d,{idToken:p,email:T._email,oobCode:T._password});default:ce(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function es(y,d){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,C.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:signInWithIdp",Me(y,d))})).apply(this,arguments)}class Gn extends ws{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const p=new Gn(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(p.idToken=d.idToken),d.accessToken&&(p.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(p.nonce=d.nonce),d.pendingToken&&(p.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(p.accessToken=d.oauthToken,p.secret=d.oauthTokenSecret):ce("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:T,signInMethod:V}=p,Z=(0,pe._T)(p,["providerId","signInMethod"]);if(!T||!V)return null;const ge=new Gn(T,V);return ge.idToken=Z.idToken||void 0,ge.accessToken=Z.accessToken||void 0,ge.secret=Z.secret,ge.nonce=Z.nonce,ge.pendingToken=Z.pendingToken||null,ge}_getIdTokenResponse(d){return es(d,this.buildRequest())}_linkToIdToken(d,p){const T=this.buildRequest();return T.idToken=p,es(d,T)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,es(d,p)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),d.postBody=(0,se.xO)(p)}return d}}function Ds(){return(Ds=(0,C.Z)(function*(y,d){return ut(y,"POST","/v1/accounts:sendVerificationCode",Me(y,d))})).apply(this,arguments)}function au(){return(au=(0,C.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:signInWithPhoneNumber",Me(y,d))})).apply(this,arguments)}function os(){return(os=(0,C.Z)(function*(y,d){const p=yield jt(y,"POST","/v1/accounts:signInWithPhoneNumber",Me(y,d));if(p.temporaryProof)throw Sn(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Co={USER_NOT_FOUND:"user-not-found"};function Ho(){return(Ho=(0,C.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:signInWithPhoneNumber",Me(y,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Co)})).apply(this,arguments)}class as extends ws{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,p){return new as({verificationId:d,verificationCode:p})}static _fromTokenResponse(d,p){return new as({phoneNumber:d,temporaryProof:p})}_getIdTokenResponse(d){return function uo(y,d){return au.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,p){return function jo(y,d){return os.apply(this,arguments)}(d,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function Su(y,d){return Ho.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:p,verificationId:T,verificationCode:V}=this.params;return d&&p?{temporaryProof:d,phoneNumber:p}:{sessionInfo:T,code:V}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:p,verificationCode:T,phoneNumber:V,temporaryProof:Z}=d;return T||p||V||Z?new as({verificationId:p,verificationCode:T,phoneNumber:V,temporaryProof:Z}):null}}class Ta{constructor(d){var p,T,V,Z,ge,Ne;const Je=(0,se.zd)((0,se.pd)(d)),St=null!==(p=Je.apiKey)&&void 0!==p?p:null,Ot=null!==(T=Je.oobCode)&&void 0!==T?T:null,Ft=function lo(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(V=Je.mode)&&void 0!==V?V:null);ue(St&&Ot&&Ft,"argument-error"),this.apiKey=St,this.operation=Ft,this.code=Ot,this.continueUrl=null!==(Z=Je.continueUrl)&&void 0!==Z?Z:null,this.languageCode=null!==(ge=Je.languageCode)&&void 0!==ge?ge:null,this.tenantId=null!==(Ne=Je.tenantId)&&void 0!==Ne?Ne:null}static parseLink(d){const p=function Ba(y){const d=(0,se.zd)((0,se.pd)(y)).link,p=d?(0,se.zd)((0,se.pd)(d)).deep_link_id:null,T=(0,se.zd)((0,se.pd)(y)).deep_link_id;return(T?(0,se.zd)((0,se.pd)(T)).link:null)||T||p||d||y}(d);try{return new Ta(p)}catch{return null}}}let $o=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,T){return Pi._fromEmailAndPassword(p,T)}static credentialWithLink(p,T){const V=Ta.parseLink(T);return ue(V,"argument-error"),Pi._fromEmailAndCode(p,V.code,V.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Zs{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Ca extends Zs{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Do extends Ca{static credentialFromJSON(d){const p="string"==typeof d?JSON.parse(d):d;return ue("providerId"in p&&"signInMethod"in p,"argument-error"),Gn._fromParams(p)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return ue(d.idToken||d.accessToken,"argument-error"),Gn._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Do.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Do.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:T,oauthTokenSecret:V,pendingToken:Z,nonce:ge,providerId:Ne}=d;if(!T&&!V&&!p&&!Z||!Ne)return null;try{return new Do(Ne)._credential({idToken:p,accessToken:T,nonce:ge,pendingToken:Z})}catch{return null}}}let bu=(()=>{class y extends Ca{constructor(){super("facebook.com")}static credential(p){return Gn._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Go=(()=>{class y extends Ca{constructor(){super("google.com"),this.addScope("profile")}static credential(p,T){return Gn._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:T})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:T,oauthAccessToken:V}=p;if(!T&&!V)return null;try{return y.credential(T,V)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),$i=(()=>{class y extends Ca{constructor(){super("github.com")}static credential(p){return Gn._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Qs extends ws{constructor(d,p){super(d,d),this.pendingToken=p}_getIdTokenResponse(d){return es(d,this.buildRequest())}_linkToIdToken(d,p){const T=this.buildRequest();return T.idToken=p,es(d,T)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,es(d,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:T,signInMethod:V,pendingToken:Z}=p;return T&&V&&Z&&T===V?new Qs(T,Z):null}static _create(d,p){return new Qs(d,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Kr extends Zs{constructor(d){ue(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Kr.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Kr.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const p=Qs.fromJSON(d);return ue(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:p,providerId:T}=d;if(!p||!T)return null;try{return Qs._create(T,p)}catch{return null}}}let Ii=(()=>{class y extends Ca{constructor(){super("twitter.com")}static credential(p,T){return Gn._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:T})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:T,oauthTokenSecret:V}=p;if(!T||!V)return null;try{return y.credential(T,V)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ys(y,d){return br.apply(this,arguments)}function br(){return(br=(0,C.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:signUp",Me(y,d))})).apply(this,arguments)}class ki{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,p,T,V=!1){return(0,C.Z)(function*(){const Z=yield et._fromIdTokenResponse(d,T,V),ge=Ao(T);return new ki({user:Z,providerId:ge,_tokenResponse:T,operationType:p})})()}static _forOperation(d,p,T){return(0,C.Z)(function*(){yield d._updateTokensIfNecessary(T,!0);const V=Ao(T);return new ki({user:d,providerId:V,_tokenResponse:T,operationType:p})})()}}function Ao(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function wi(){return(wi=(0,C.Z)(function*(y){var d;if((0,le._isFirebaseServerApp)(y.app))return Promise.reject(Ge(y));const p=gr(y);if(yield p._initializationPromise,null!==(d=p.currentUser)&&void 0!==d&&d.isAnonymous)return new ki({user:p.currentUser,providerId:null,operationType:"signIn"});const T=yield Ys(p,{returnSecureToken:!0}),V=yield ki._fromIdTokenResponse(p,"signIn",T,!0);return yield p._updateCurrentUser(V.user),V})).apply(this,arguments)}class ua extends se.ZR{constructor(d,p,T,V){var Z;super(p.code,p.message),this.operationType=T,this.user=V,Object.setPrototypeOf(this,ua.prototype),this.customData={appName:d.name,tenantId:null!==(Z=d.tenantId)&&void 0!==Z?Z:void 0,_serverResponse:p.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(d,p,T,V){return new ua(d,p,T,V)}}function Tn(y,d,p,T){return("reauthenticate"===d?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(Z=>{throw"auth/multi-factor-auth-required"===Z.code?ua._fromErrorAndOperation(y,Z,d,T):Z})}function lt(y){return new Set(y.map(({providerId:d})=>d).filter(d=>!!d))}function Zr(){return Zr=(0,C.Z)(function*(y,d){const p=(0,se.m9)(y);yield ns(!0,p,d);const{providerUserInfo:T}=yield function Yt(y,d){return Ai.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[d]}),V=lt(T||[]);return p.providerData=p.providerData.filter(Z=>V.has(Z.providerId)),V.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),Zr.apply(this,arguments)}function Xn(y,d){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,C.Z)(function*(y,d,p=!1){const T=yield wn(y,d._linkToIdToken(y.auth,yield y.getIdToken()),p);return ki._forOperation(y,"link",T)})).apply(this,arguments)}function ns(y,d,p){return So.apply(this,arguments)}function So(){return(So=(0,C.Z)(function*(y,d,p){yield zn(d);const V=!1===y?"provider-already-linked":"no-such-provider";ue(lt(d.providerData).has(p)===y,d.auth,V)})).apply(this,arguments)}function ar(y,d){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,C.Z)(function*(y,d,p=!1){const{auth:T}=y;if((0,le._isFirebaseServerApp)(T.app))return Promise.reject(Ge(T));const V="reauthenticate";try{const Z=yield wn(y,Tn(T,V,d,y),p);ue(Z.idToken,T,"internal-error");const ge=_t(Z.idToken);ue(ge,T,"internal-error");const{sub:Ne}=ge;return ue(y.uid===Ne,T,"user-mismatch"),ki._forOperation(y,V,Z)}catch(Z){throw"auth/user-not-found"===Z?.code&&ce(T,"user-mismatch"),Z}})).apply(this,arguments)}function As(y,d){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,C.Z)(function*(y,d,p=!1){if((0,le._isFirebaseServerApp)(y.app))return Promise.reject(Ge(y));const T="signIn",V=yield Tn(y,T,d),Z=yield ki._fromIdTokenResponse(y,T,V);return p||(yield y._updateCurrentUser(Z.user)),Z})).apply(this,arguments)}function rs(y,d){return co.apply(this,arguments)}function co(){return(co=(0,C.Z)(function*(y,d){return As(gr(y),d)})).apply(this,arguments)}function Li(y,d){return vr.apply(this,arguments)}function vr(){return(vr=(0,C.Z)(function*(y,d){const p=(0,se.m9)(y);return yield ns(!1,p,d.providerId),Xn(p,d)})).apply(this,arguments)}function ho(y,d){return zo.apply(this,arguments)}function zo(){return(zo=(0,C.Z)(function*(y,d){return ar((0,se.m9)(y),d)})).apply(this,arguments)}function Js(){return(Js=(0,C.Z)(function*(y,d){return jt(y,"POST","/v1/accounts:signInWithCustomToken",Me(y,d))})).apply(this,arguments)}function Xs(){return Xs=(0,C.Z)(function*(y,d){if((0,le._isFirebaseServerApp)(y.app))return Promise.reject(Ge(y));const p=gr(y),T=yield function Gt(y,d){return Js.apply(this,arguments)}(p,{token:d,returnSecureToken:!0}),V=yield ki._fromIdTokenResponse(p,"signIn",T);return yield p._updateCurrentUser(V.user),V}),Xs.apply(this,arguments)}class fo{constructor(d,p){this.factorId=d,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(d,p){return"phoneInfo"in p?Ls._fromServerResponse(d,p):"totpInfo"in p?yn._fromServerResponse(d,p):ce(d,"internal-error")}}class Ls extends fo{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,p){return new Ls(p)}}class yn extends fo{constructor(d){super("totp",d)}static _fromServerResponse(d,p){return new yn(p)}}function Wo(y,d,p){var T;ue((null===(T=p.url)||void 0===T?void 0:T.length)>0,y,"invalid-continue-uri"),ue(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),d.continueUrl=p.url,d.dynamicLinkDomain=p.dynamicLinkDomain,d.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ue(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),d.iOSBundleId=p.iOS.bundleId),p.android&&(ue(p.android.packageName.length>0,y,"missing-android-pkg-name"),d.androidInstallApp=p.android.installApp,d.androidMinimumVersionCode=p.android.minimumVersion,d.androidPackageName=p.android.packageName)}function po(y){return ui.apply(this,arguments)}function ui(){return(ui=(0,C.Z)(function*(y){const d=gr(y);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function bo(){return(bo=(0,C.Z)(function*(y,d,p){const T=gr(y),V={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};p&&Wo(T,V,p),yield Es(T,V,"getOobCode",Ks)})).apply(this,arguments)}function Gi(){return Gi=(0,C.Z)(function*(y,d,p){yield sa((0,se.m9)(y),{oobCode:d,newPassword:p}).catch(function(){var T=(0,C.Z)(function*(V){throw"auth/password-does-not-meet-requirements"===V.code&&po(y),V});return function(V){return T.apply(this,arguments)}}())}),Gi.apply(this,arguments)}function ei(){return ei=(0,C.Z)(function*(y,d){yield function ks(y,d){return qs.apply(this,arguments)}((0,se.m9)(y),{oobCode:d})}),ei.apply(this,arguments)}function qo(y,d){return go.apply(this,arguments)}function go(){return(go=(0,C.Z)(function*(y,d){const p=(0,se.m9)(y),T=yield sa(p,{oobCode:d}),V=T.requestType;switch(ue(V,p,"internal-error"),V){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(T.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(T.mfaInfo,p,"internal-error");default:ue(T.email,p,"internal-error")}let Z=null;return T.mfaInfo&&(Z=fo._fromServerResponse(gr(p),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:Z},operation:V}})).apply(this,arguments)}function us(){return(us=(0,C.Z)(function*(y,d){const{data:p}=yield qo((0,se.m9)(y),d);return p.email})).apply(this,arguments)}function du(){return(du=(0,C.Z)(function*(y,d,p){if((0,le._isFirebaseServerApp)(y.app))return Promise.reject(Ge(y));const T=gr(y),ge=yield Es(T,{returnSecureToken:!0,email:d,password:p,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ys).catch(Je=>{throw"auth/password-does-not-meet-requirements"===Je.code&&po(y),Je}),Ne=yield ki._fromIdTokenResponse(T,"signIn",ge);return yield T._updateCurrentUser(Ne.user),Ne})).apply(this,arguments)}function zi(){return(zi=(0,C.Z)(function*(y,d,p){const T=gr(y),V={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function Z(ge,Ne){ue(Ne.handleCodeInApp,T,"argument-error"),Ne&&Wo(T,ge,Ne)})(V,p),yield Es(T,V,"getOobCode",ji)})).apply(this,arguments)}function mo(){return(mo=(0,C.Z)(function*(y,d,p){if((0,le._isFirebaseServerApp)(y.app))return Promise.reject(Ge(y));const T=(0,se.m9)(y),V=$o.credentialWithLink(d,p||At());return ue(V._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),rs(T,V)})).apply(this,arguments)}function P(){return(P=(0,C.Z)(function*(y,d){return ut(y,"POST","/v1/accounts:createAuthUri",Me(y,d))})).apply(this,arguments)}function L(){return L=(0,C.Z)(function*(y,d){const T={identifier:d,continueUri:Un()?At():"http://localhost"},{signinMethods:V}=yield function Ac(y,d){return P.apply(this,arguments)}((0,se.m9)(y),T);return V||[]}),L.apply(this,arguments)}function A(){return A=(0,C.Z)(function*(y,d){const p=(0,se.m9)(y),V={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};d&&Wo(p.auth,V,d);const{email:Z}=yield function Fs(y,d){return ao.apply(this,arguments)}(p.auth,V);Z!==y.email&&(yield y.reload())}),A.apply(this,arguments)}function w(){return w=(0,C.Z)(function*(y,d,p){const T=(0,se.m9)(y),Z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:d};p&&Wo(T.auth,Z,p);const{email:ge}=yield function Ia(y,d){return Ts.apply(this,arguments)}(T.auth,Z);ge!==y.email&&(yield y.reload())}),w.apply(this,arguments)}function Y(){return(Y=(0,C.Z)(function*(y,d){return ut(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function rt(){return rt=(0,C.Z)(function*(y,{displayName:d,photoURL:p}){if(void 0===d&&void 0===p)return;const T=(0,se.m9)(y),Z={idToken:yield T.getIdToken(),displayName:d,photoUrl:p,returnSecureToken:!0},ge=yield wn(T,function U(y,d){return Y.apply(this,arguments)}(T.auth,Z));T.displayName=ge.displayName||null,T.photoURL=ge.photoUrl||null;const Ne=T.providerData.find(({providerId:Je})=>"password"===Je);Ne&&(Ne.displayName=T.displayName,Ne.photoURL=T.photoURL),yield T._updateTokensIfNecessary(ge)}),rt.apply(this,arguments)}function cn(y,d,p){return mr.apply(this,arguments)}function mr(){return mr=(0,C.Z)(function*(y,d,p){const{auth:T}=y,Z={idToken:yield y.getIdToken(),returnSecureToken:!0};d&&(Z.email=d),p&&(Z.password=p);const ge=yield wn(y,function Vo(y,d){return Uo.apply(this,arguments)}(T,Z));yield y._updateTokensIfNecessary(ge,!0)}),mr.apply(this,arguments)}class ur{constructor(d,p,T={}){this.isNewUser=d,this.providerId=p,this.profile=T}}class ls extends ur{constructor(d,p,T,V){super(d,p,T),this.username=V}}class Ss extends ur{constructor(d,p){super(d,"facebook.com",p)}}class bs extends ls{constructor(d,p){super(d,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class cs extends ur{constructor(d,p){super(d,"google.com",p)}}class la extends ls{constructor(d,p,T){super(d,"twitter.com",p,T)}}function Da(y){const{user:d,_tokenResponse:p}=y;return d.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Lr(y){var d,p;if(!y)return null;const{providerId:T}=y,V=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},Z=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!T&&y?.idToken){const ge=null===(p=null===(d=_t(y.idToken))||void 0===d?void 0:d.firebase)||void 0===p?void 0:p.sign_in_provider;if(ge)return new ur(Z,"anonymous"!==ge&&"custom"!==ge?ge:null)}if(!T)return null;switch(T){case"facebook.com":return new Ss(Z,V);case"github.com":return new bs(Z,V);case"google.com":return new cs(Z,V);case"twitter.com":return new la(Z,V,y.screenName||null);case"custom":case"anonymous":return new ur(Z,null);default:return new ur(Z,T,V)}}(p)}class Us{constructor(d,p,T){this.type=d,this.credential=p,this.user=T}static _fromIdtoken(d,p){return new Us("enroll",d,p)}static _fromMfaPendingCredential(d){return new Us("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var p,T;if(d?.multiFactorSession){if(null!==(p=d.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Us._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(T=d.multiFactorSession)&&void 0!==T&&T.idToken)return Us._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Ye{constructor(d,p,T){this.session=d,this.hints=p,this.signInResolver=T}static _fromError(d,p){const T=gr(d),V=p.customData._serverResponse,Z=(V.mfaInfo||[]).map(Ne=>fo._fromServerResponse(T,Ne));ue(V.mfaPendingCredential,T,"internal-error");const ge=Us._fromMfaPendingCredential(V.mfaPendingCredential);return new Ye(ge,Z,function(){var Ne=(0,C.Z)(function*(Je){const St=yield Je._process(T,ge);delete V.mfaInfo,delete V.mfaPendingCredential;const Ot=Object.assign(Object.assign({},V),{idToken:St.idToken,refreshToken:St.refreshToken});switch(p.operationType){case"signIn":const Ft=yield ki._fromIdTokenResponse(T,p.operationType,Ot);return yield T._updateCurrentUser(Ft.user),Ft;case"reauthenticate":return ue(p.user,T,"internal-error"),ki._forOperation(p.user,p.operationType,Ot);default:ce(T,"internal-error")}});return function(Je){return Ne.apply(this,arguments)}}())}resolveSignIn(d){var p=this;return(0,C.Z)(function*(){return p.signInResolver(d)})()}}class Tt{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(T=>fo._fromServerResponse(d.auth,T)))})}static _fromUser(d){return new Tt(d)}getSession(){var d=this;return(0,C.Z)(function*(){return Us._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,p){var T=this;return(0,C.Z)(function*(){const V=d,Z=yield T.getSession(),ge=yield wn(T.user,V._process(T.user.auth,Z,p));return yield T.user._updateTokensIfNecessary(ge),T.user.reload()})()}unenroll(d){var p=this;return(0,C.Z)(function*(){const T="string"==typeof d?d:d.uid,V=yield p.user.getIdToken();try{const Z=yield wn(p.user,function Aa(y,d){return ut(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Me(y,d))}(p.user.auth,{idToken:V,mfaEnrollmentId:T}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ge})=>ge!==T),yield p.user._updateTokensIfNecessary(Z),yield p.user.reload()}catch(Z){throw Z}})()}}const He=new WeakMap,Tr="__sak";class Sa{constructor(d,p){this.storageRetriever=d,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Tr,"1"),this.storage.removeItem(Tr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,p){return this.storage.setItem(d,JSON.stringify(p)),Promise.resolve()}_get(d){const p=this.storage.getItem(d);return Promise.resolve(p?JSON.parse(p):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ko=(()=>{class y extends Sa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,T)=>this.onStorageEvent(p,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Pu(){const y=(0,se.z$)();return Eo(y)||Be(y)}()&&function ln(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=$t(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const T of Object.keys(this.listeners)){const V=this.storage.getItem(T),Z=this.localCache[T];V!==Z&&p(T,Z,V)}}onStorageEvent(p,T=!1){if(!p.key)return void this.forAllChangedKeys((Ne,Je,St)=>{this.notifyListeners(Ne,St)});const V=p.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ne=this.storage.getItem(V);if(p.newValue!==Ne)null!==p.newValue?this.storage.setItem(V,p.newValue):this.storage.removeItem(V);else if(this.localCache[V]===p.newValue&&!T)return}const Z=()=>{const Ne=this.storage.getItem(V);!T&&this.localCache[V]===Ne||this.notifyListeners(V,Ne)},ge=this.storage.getItem(V);!function ot(){return(0,se.w1)()&&10===document.documentMode}()||ge===p.newValue||p.newValue===p.oldValue?Z():setTimeout(Z,10)}notifyListeners(p,T){this.localCache[p]=T;const V=this.listeners[p];if(V)for(const Z of Array.from(V))Z(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,T,V)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:T,newValue:V}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(T)}_removeListener(p,T){this.listeners[p]&&(this.listeners[p].delete(T),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,T){var V=()=>super._set,Z=this;return(0,C.Z)(function*(){yield V().call(Z,p,T),Z.localCache[p]=JSON.stringify(T)})()}_get(p){var T=()=>super._get,V=this;return(0,C.Z)(function*(){const Z=yield T().call(V,p);return V.localCache[p]=JSON.stringify(Z),Z})()}_remove(p){var T=()=>super._remove,V=this;return(0,C.Z)(function*(){yield T().call(V,p),delete V.localCache[p]})()}}return y.type="LOCAL",y})(),dn=(()=>{class y extends Sa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,T){}_removeListener(p,T){}}return y.type="SESSION",y})();let Hh=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const T=this.receivers.find(Z=>Z.isListeningto(p));if(T)return T;const V=new y(p);return this.receivers.push(V),V}isListeningto(p){return this.eventTarget===p}handleEvent(p){var T=this;return(0,C.Z)(function*(){const V=p,{eventId:Z,eventType:ge,data:Ne}=V.data,Je=T.handlersMap[ge];if(!Je?.size)return;V.ports[0].postMessage({status:"ack",eventId:Z,eventType:ge});const St=Array.from(Je).map(function(){var Ft=(0,C.Z)(function*(Di){return Di(V.origin,Ne)});return function(Di){return Ft.apply(this,arguments)}}()),Ot=yield function jh(y){return Promise.all(y.map(function(){var d=(0,C.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(T){return{fulfilled:!1,reason:T}}});return function(p){return d.apply(this,arguments)}}()))}(St);V.ports[0].postMessage({status:"done",eventId:Z,eventType:ge,response:Ot})})()}_subscribe(p,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(T)}_unsubscribe(p,T){this.handlersMap[p]&&T&&this.handlersMap[p].delete(T),(!T||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Zu(y="",d=10){let p="";for(let T=0;T<d;T++)p+=Math.floor(10*Math.random());return y+p}class sn{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,p,T=50){var V=this;return(0,C.Z)(function*(){const Z=typeof MessageChannel<"u"?new MessageChannel:null;if(!Z)throw new Error("connection_unavailable");let ge,Ne;return new Promise((Je,St)=>{const Ot=Zu("",20);Z.port1.start();const Ft=setTimeout(()=>{St(new Error("unsupported_event"))},T);Ne={messageChannel:Z,onMessage(Di){const tu=Di;if(tu.data.eventId===Ot)switch(tu.data.status){case"ack":clearTimeout(Ft),ge=setTimeout(()=>{St(new Error("timeout"))},3e3);break;case"done":clearTimeout(ge),Je(tu.data.response);break;default:clearTimeout(Ft),clearTimeout(ge),St(new Error("invalid_response"))}}},V.handlers.add(Ne),Z.port1.addEventListener("message",Ne.onMessage),V.target.postMessage({eventType:d,eventId:Ot,data:p},[Z.port2])}).finally(()=>{Ne&&V.removeMessageHandler(Ne)})})()}}function Vr(){return window}function Ir(){return typeof Vr().WorkerGlobalScope<"u"&&"function"==typeof Vr().importScripts}function Yu(){return(Yu=(0,C.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ci="firebaseLocalStorageDb",kn="firebaseLocalStorage",Ju="fbase_key";class Po{constructor(d){this.request=d}toPromise(){return new Promise((d,p)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Rr(y,d){return y.transaction([kn],d?"readwrite":"readonly").objectStore(kn)}function ca(){const y=indexedDB.open(ci,1);return new Promise((d,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const T=y.result;try{T.createObjectStore(kn,{keyPath:Ju})}catch(V){p(V)}}),y.addEventListener("success",(0,C.Z)(function*(){const T=y.result;T.objectStoreNames.contains(kn)?d(T):(T.close(),yield function Mo(){const y=indexedDB.deleteDatabase(ci);return new Po(y).toPromise()}(),d(yield ca()))}))})}function hs(y,d,p){return fu.apply(this,arguments)}function fu(){return(fu=(0,C.Z)(function*(y,d,p){const T=Rr(y,!0).put({[Ju]:d,value:p});return new Po(T).toPromise()})).apply(this,arguments)}function fs(){return(fs=(0,C.Z)(function*(y,d){const p=Rr(y,!1).get(d),T=yield new Po(p).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function Cl(y,d){const p=Rr(y,!0).delete(d);return new Po(p).toPromise()}const Ga=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,C.Z)(function*(){return p.db||(p.db=yield ca()),p.db})()}_withRetries(p){var T=this;return(0,C.Z)(function*(){let V=0;for(;;)try{const Z=yield T._openDb();return yield p(Z)}catch(Z){if(V++>3)throw Z;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,C.Z)(function*(){return Ir()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,C.Z)(function*(){p.receiver=Hh._getInstance(function Zd(){return Ir()?self:null}()),p.receiver._subscribe("keyChanged",function(){var T=(0,C.Z)(function*(V,Z){return{keyProcessed:(yield p._poll()).includes(Z.key)}});return function(V,Z){return T.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var T=(0,C.Z)(function*(V,Z){return["keyChanged"]});return function(V,Z){return T.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,C.Z)(function*(){var T,V;if(p.activeServiceWorker=yield function un(){return Yu.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new sn(p.activeServiceWorker);const Z=yield p.sender._send("ping",{},800);Z&&null!==(T=Z[0])&&void 0!==T&&T.fulfilled&&null!==(V=Z[0])&&void 0!==V&&V.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var T=this;return(0,C.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function or(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:p},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,C.Z)(function*(){try{if(!indexedDB)return!1;const p=yield ca();return yield hs(p,Tr,"1"),yield Cl(p,Tr),!0}catch{}return!1})()}_withPendingWrite(p){var T=this;return(0,C.Z)(function*(){T.pendingWrites++;try{yield p()}finally{T.pendingWrites--}})()}_set(p,T){var V=this;return(0,C.Z)(function*(){return V._withPendingWrite((0,C.Z)(function*(){return yield V._withRetries(Z=>hs(Z,p,T)),V.localCache[p]=T,V.notifyServiceWorker(p)}))})()}_get(p){var T=this;return(0,C.Z)(function*(){const V=yield T._withRetries(Z=>function Tl(y,d){return fs.apply(this,arguments)}(Z,p));return T.localCache[p]=V,V})()}_remove(p){var T=this;return(0,C.Z)(function*(){return T._withPendingWrite((0,C.Z)(function*(){return yield T._withRetries(V=>Cl(V,p)),delete T.localCache[p],T.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,C.Z)(function*(){const T=yield p._withRetries(ge=>{const Ne=Rr(ge,!1).getAll();return new Po(Ne).toPromise()});if(!T)return[];if(0!==p.pendingWrites)return[];const V=[],Z=new Set;if(0!==T.length)for(const{fbase_key:ge,value:Ne}of T)Z.add(ge),JSON.stringify(p.localCache[ge])!==JSON.stringify(Ne)&&(p.notifyListeners(ge,Ne),V.push(ge));for(const ge of Object.keys(p.localCache))p.localCache[ge]&&!Z.has(ge)&&(p.notifyListeners(ge,null),V.push(ge));return V})()}notifyListeners(p,T){this.localCache[p]=T;const V=this.listeners[p];if(V)for(const Z of Array.from(V))Z(T)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,C.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(T)}_removeListener(p,T){this.listeners[p]&&(this.listeners[p].delete(T),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})(),I=1e12;class O{constructor(d){this.auth=d,this.counter=I,this._widgets=new Map}render(d,p){const T=this.counter;return this._widgets.set(T,new S(d,this.auth.name,p||{})),this.counter++,T}reset(d){var p;const T=d||I;null===(p=this._widgets.get(T))||void 0===p||p.delete(),this._widgets.delete(T)}getResponse(d){var p;return(null===(p=this._widgets.get(d||I))||void 0===p?void 0:p.getResponse())||""}execute(d){var p=this;return(0,C.Z)(function*(){var T;return null===(T=p._widgets.get(d||I))||void 0===T||T.execute(),""})()}}class S{constructor(d,p,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const V="string"==typeof d?document.getElementById(d):d;ue(V,"argument-error",{appName:p}),this.container=V,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function x(y){const d=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<y;T++)d.push(p.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":p}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const H=tn("rcb"),J=new Ee(3e4,6e4);class de{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Vr().grecaptcha)||void 0===d||!d.render)}load(d,p=""){return ue(function Le(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),d,"argument-error"),this.shouldResolveImmediately(p)&&Vt(Vr().grecaptcha)?Promise.resolve(Vr().grecaptcha):new Promise((T,V)=>{const Z=Vr().setTimeout(()=>{V(ze(d,"network-request-failed"))},J.get());Vr()[H]=()=>{Vr().clearTimeout(Z),delete Vr()[H];const Ne=Vr().grecaptcha;if(!Ne||!Vt(Ne))return void V(ze(d,"internal-error"));const Je=Ne.render;Ne.render=(St,Ot)=>{const Ft=Je(St,Ot);return this.counter++,Ft},this.hostLanguage=p,T(Ne)},vi(`${function wr(){return On.recaptchaV2Script}()}?${(0,se.xO)({onload:H,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(Z),V(ze(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var p;return!(null===(p=Vr().grecaptcha)||void 0===p||!p.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ke{load(d){return(0,C.Z)(function*(){return new O(d)})()}clearedOneInstance(){}}const Ct="recaptcha",bn={theme:"light",type:"image"};class pn{constructor(d,p,T=Object.assign({},bn)){this.parameters=T,this.type=Ct,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gr(d),this.isInvisible="invisible"===this.parameters.size,ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const V="string"==typeof p?document.getElementById(p):p;ue(V,this.auth,"argument-error"),this.container=V,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ke:new de,this.validateStartingState()}verify(){var d=this;return(0,C.Z)(function*(){d.assertNotDestroyed();const p=yield d.render(),T=d.getAssertedRecaptcha();return T.getResponse(p)||new Promise(Z=>{const ge=Ne=>{Ne&&(d.tokenChangeListeners.delete(ge),Z(Ne))};d.tokenChangeListeners.add(ge),d.isInvisible&&T.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return p=>{if(this.tokenChangeListeners.forEach(T=>T(p)),"function"==typeof d)d(p);else if("string"==typeof d){const T=Vr()[d];"function"==typeof T&&T(p)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,C.Z)(function*(){if(yield d.init(),!d.widgetId){let p=d.container;if(!d.isInvisible){const T=document.createElement("div");p.appendChild(T),p=T}d.widgetId=d.getAssertedRecaptcha().render(p,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,C.Z)(function*(){ue(Un()&&!Ir(),d.auth,"internal-error"),yield function fi(){let y=null;return new Promise(d=>{"complete"!==document.readyState?(y=()=>d(),window.addEventListener("load",y)):d()}).catch(d=>{throw y&&window.removeEventListener("load",y),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const p=yield function fr(y){return Wr.apply(this,arguments)}(d.auth);ue(p,d.auth,"internal-error"),d.parameters.sitekey=p})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class za{constructor(d,p){this.verificationId=d,this.onConfirmation=p}confirm(d){const p=as._fromVerification(this.verificationId,d);return this.onConfirmation(p)}}function Ms(){return(Ms=(0,C.Z)(function*(y,d,p){if((0,le._isFirebaseServerApp)(y.app))return Promise.reject(Ge(y));const T=gr(y),V=yield Pc(T,d,(0,se.m9)(p));return new za(V,Z=>rs(T,Z))})).apply(this,arguments)}function ba(){return(ba=(0,C.Z)(function*(y,d,p){const T=(0,se.m9)(y);yield ns(!1,T,"phone");const V=yield Pc(T.auth,d,(0,se.m9)(p));return new za(V,Z=>Li(T,Z))})).apply(this,arguments)}function Rc(){return(Rc=(0,C.Z)(function*(y,d,p){const T=(0,se.m9)(y);if((0,le._isFirebaseServerApp)(T.auth.app))return Promise.reject(Ge(T.auth));const V=yield Pc(T.auth,d,(0,se.m9)(p));return new za(V,Z=>ho(T,Z))})).apply(this,arguments)}function Pc(y,d,p){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,C.Z)(function*(y,d,p){var T;const V=yield p.verify();try{let Z;if(ue("string"==typeof V,y,"argument-error"),ue(p.type===Ct,y,"argument-error"),Z="string"==typeof d?{phoneNumber:d}:d,"session"in Z){const ge=Z.session;if("phoneNumber"in Z)return ue("enroll"===ge.type,y,"internal-error"),(yield function Wi(y,d){return ut(y,"POST","/v2/accounts/mfaEnrollment:start",Me(y,d))}(y,{idToken:ge.credential,phoneEnrollmentInfo:{phoneNumber:Z.phoneNumber,recaptchaToken:V}})).phoneSessionInfo.sessionInfo;{ue("signin"===ge.type,y,"internal-error");const Ne=(null===(T=Z.multiFactorHint)||void 0===T?void 0:T.uid)||Z.multiFactorUid;return ue(Ne,y,"missing-multi-factor-info"),(yield function xe(y,d){return ut(y,"POST","/v2/accounts/mfaSignIn:start",Me(y,d))}(y,{mfaPendingCredential:ge.credential,mfaEnrollmentId:Ne,phoneSignInInfo:{recaptchaToken:V}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ge}=yield function wa(y,d){return Ds.apply(this,arguments)}(y,{phoneNumber:Z.phoneNumber,recaptchaToken:V});return ge}}finally{p._reset()}}),Mc.apply(this,arguments)}function Dl(){return(Dl=(0,C.Z)(function*(y,d){const p=(0,se.m9)(y);if((0,le._isFirebaseServerApp)(p.auth.app))return Promise.reject(Ge(p.auth));yield Xn(p,d)})).apply(this,arguments)}let Qo=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=gr(p)}verifyPhoneNumber(p,T){return Pc(this.auth,p,(0,se.m9)(T))}static credential(p,T){return as._fromVerification(p,T)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:T,temporaryProof:V}=p;return T&&V?as._fromTokenResponse(T,V):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Xu(y,d){return d?hn(d):(ue(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Al extends ws{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return es(d,this._buildIdpRequest())}_linkToIdToken(d,p){return es(d,this._buildIdpRequest(p))}_getReauthenticationResolver(d){return es(d,this._buildIdpRequest())}_buildIdpRequest(d){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(p.idToken=d),p}}function nc(y){return As(y.auth,new Al(y),y.bypassAuthState)}function Nc(y){const{auth:d,user:p}=y;return ue(p,d,"internal-error"),ar(p,new Al(y),y.bypassAuthState)}function rc(y){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,C.Z)(function*(y){const{auth:d,user:p}=y;return ue(p,d,"internal-error"),Xn(p,new Al(y),y.bypassAuthState)})).apply(this,arguments)}class gd{constructor(d,p,T,V,Z=!1){this.auth=d,this.resolver=T,this.user=V,this.bypassAuthState=Z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var d=this;return new Promise(function(){var p=(0,C.Z)(function*(T,V){d.pendingPromise={resolve:T,reject:V};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(Z){d.reject(Z)}});return function(T,V){return p.apply(this,arguments)}}())}onAuthEvent(d){var p=this;return(0,C.Z)(function*(){const{urlResponse:T,sessionId:V,postBody:Z,tenantId:ge,error:Ne,type:Je}=d;if(Ne)return void p.reject(Ne);const St={auth:p.auth,requestUri:T,sessionId:V,tenantId:ge||void 0,postBody:Z||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Je)(St))}catch(Ot){p.reject(Ot)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return nc;case"linkViaPopup":case"linkViaRedirect":return rc;case"reauthViaPopup":case"reauthViaRedirect":return Nc;default:ce(this.auth,"internal-error")}}resolve(d){an(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){an(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gh=new Ee(2e3,1e4);function Nu(){return(Nu=(0,C.Z)(function*(y,d,p){if((0,le._isFirebaseServerApp)(y.app))return Promise.reject(ze(y,"operation-not-supported-in-this-environment"));const T=gr(y);Ze(y,d,Zs);const V=Xu(T,p);return new nl(T,"signInViaPopup",d,V).executeNotNull()})).apply(this,arguments)}function to(){return(to=(0,C.Z)(function*(y,d,p){const T=(0,se.m9)(y);if((0,le._isFirebaseServerApp)(T.auth.app))return Promise.reject(ze(T.auth,"operation-not-supported-in-this-environment"));Ze(T.auth,d,Zs);const V=Xu(T.auth,p);return new nl(T.auth,"reauthViaPopup",d,V,T).executeNotNull()})).apply(this,arguments)}function tl(){return(tl=(0,C.Z)(function*(y,d,p){const T=(0,se.m9)(y);Ze(T.auth,d,Zs);const V=Xu(T.auth,p);return new nl(T.auth,"linkViaPopup",d,V,T).executeNotNull()})).apply(this,arguments)}let nl=(()=>{class y extends gd{constructor(p,T,V,Z,ge){super(p,T,Z,ge),this.provider=V,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,C.Z)(function*(){const T=yield p.execute();return ue(T,p.auth,"internal-error"),T})()}onExecution(){var p=this;return(0,C.Z)(function*(){an(1===p.filter.length,"Popup operations only handle one event");const T=Zu();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],T),p.authWindow.associatedEvent=T,p.resolver._originValidation(p.auth).catch(V=>{p.reject(V)}),p.resolver._isIframeWebStorageSupported(p.auth,V=>{V||p.reject(ze(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ze(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var T,V;this.pollId=null!==(V=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==V&&V.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ze(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,Gh.get())};p()}}return y.currentPopupAction=null,y})();const js="pendingRedirect",ic=new Map;class da extends gd{constructor(d,p,T=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,T),this.eventId=null}execute(){var d=()=>super.execute,p=this;return(0,C.Z)(function*(){let T=ic.get(p.auth._key());if(!T){try{const Z=(yield function Sl(y,d){return Yr.apply(this,arguments)}(p.resolver,p.auth))?yield d().call(p):null;T=()=>Promise.resolve(Z)}catch(V){T=()=>Promise.reject(V)}ic.set(p.auth._key(),T)}return p.bypassAuthState||ic.set(p.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(d){var p=()=>super.onAuthEvent,T=this;return(0,C.Z)(function*(){if("signInViaRedirect"===d.type)return p().call(T,d);if("unknown"!==d.type){if(d.eventId){const V=yield T.auth._redirectUserForId(d.eventId);if(V)return T.user=V,p().call(T,d);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,C.Z)(function*(){})()}cleanUp(){}}function Yr(){return(Yr=(0,C.Z)(function*(y,d){const p=ti(d),T=pu(y);if(!(yield T._isAvailable()))return!1;const V="true"===(yield T._get(p));return yield T._remove(p),V})).apply(this,arguments)}function Yo(y,d){return qi.apply(this,arguments)}function qi(){return(qi=(0,C.Z)(function*(y,d){return pu(y)._set(ti(d),"true")})).apply(this,arguments)}function kc(y,d){ic.set(y._key(),d)}function pu(y){return hn(y._redirectPersistence)}function ti(y){return fn(js,y.config.apiKey,y.name)}function rl(y,d,p){return function Wa(y,d,p){return Ki.apply(this,arguments)}(y,d,p)}function Ki(){return(Ki=(0,C.Z)(function*(y,d,p){if((0,le._isFirebaseServerApp)(y.app))return Promise.reject(Ge(y));const T=gr(y);Ze(y,d,Zs),yield T._initializationPromise;const V=Xu(T,p);return yield Yo(V,T),V._openRedirect(T,d,"signInViaRedirect")})).apply(this,arguments)}function sc(y,d,p){return function Ra(y,d,p){return di.apply(this,arguments)}(y,d,p)}function di(){return(di=(0,C.Z)(function*(y,d,p){const T=(0,se.m9)(y);if(Ze(T.auth,d,Zs),(0,le._isFirebaseServerApp)(T.auth.app))return Promise.reject(Ge(T.auth));yield T.auth._initializationPromise;const V=Xu(T.auth,p);yield Yo(V,T.auth);const Z=yield Lc(T);return V._openRedirect(T.auth,d,"reauthViaRedirect",Z)})).apply(this,arguments)}function no(y,d,p){return function bl(y,d,p){return Rl.apply(this,arguments)}(y,d,p)}function Rl(){return(Rl=(0,C.Z)(function*(y,d,p){const T=(0,se.m9)(y);Ze(T.auth,d,Zs),yield T.auth._initializationPromise;const V=Xu(T.auth,p);yield ns(!1,T,d.providerId),yield Yo(V,T.auth);const Z=yield Lc(T);return V._openRedirect(T.auth,d,"linkViaRedirect",Z)})).apply(this,arguments)}function Fc(){return(Fc=(0,C.Z)(function*(y,d){return yield gr(y)._initializationPromise,Jo(y,d,!1)})).apply(this,arguments)}function Jo(y,d){return ha.apply(this,arguments)}function ha(){return(ha=(0,C.Z)(function*(y,d,p=!1){if((0,le._isFirebaseServerApp)(y.app))return Promise.reject(Ge(y));const T=gr(y),V=Xu(T,d),ge=yield new da(T,V,p).execute();return ge&&!p&&(delete ge.user._redirectEventId,yield T._persistUserIfCurrent(ge.user),yield T._setRedirectUser(null,d)),ge})).apply(this,arguments)}function Lc(y){return fa.apply(this,arguments)}function fa(){return(fa=(0,C.Z)(function*(y){const d=Zu(`${y.uid}:::`);return y._redirectEventId=d,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),d})).apply(this,arguments)}class il{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let p=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(d,T)&&(p=!0,this.sendToConsumer(d,T),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Ma(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vc(y);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=d,p=!0)),p}sendToConsumer(d,p){var T;if(d.error&&!Vc(d)){const V=(null===(T=d.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";p.onError(ze(this.auth,V))}else p.onAuthEvent(d)}isEventForConsumer(d,p){const T=null===p.eventId||!!d.eventId&&d.eventId===p.eventId;return p.filter.includes(d.type)&&T}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pa(d))}saveEventToCache(d){this.cachedEventUids.add(Pa(d)),this.lastProcessedEventTime=Date.now()}}function Pa(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(d=>d).join("-")}function Vc({type:y,error:d}){return"unknown"===y&&"auth/no-auth-event"===d?.code}function gu(y){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,C.Z)(function*(y,d={}){return ut(y,"GET","/v1/projects",d)})).apply(this,arguments)}const sl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Uc=/^https?/;function oc(){return(oc=(0,C.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:d}=yield gu(y);for(const p of d)try{if(ac(p))return}catch{}ce(y,"unauthorized-domain")})).apply(this,arguments)}function ac(y){const d=At(),{protocol:p,hostname:T}=new URL(d);if(y.startsWith("chrome-extension://")){const ge=new URL(y);return""===ge.hostname&&""===T?"chrome-extension:"===p&&y.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===p&&ge.hostname===T}if(!Uc.test(p))return!1;if(sl.test(y))return T===y;const V=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+V+"|"+V+")$","i").test(T)}const al=new Ee(3e4,6e4);function Na(){const y=Vr().___jsl;if(y?.H)for(const d of Object.keys(y.H))if(y.H[d].r=y.H[d].r||[],y.H[d].L=y.H[d].L||[],y.H[d].r=[...y.H[d].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let xu=null;const Bc=new Ee(5e3,15e3),ku="__/auth/iframe",ro="emulator/auth/iframe",jc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ul(y){const d=y.config;ue(d.authDomain,y,"auth-domain-config-required");const p=d.emulator?be(d,ro):`https://${y.config.authDomain}/${ku}`,T={apiKey:d.apiKey,appName:y.name,v:le.SDK_VERSION},V=pi.get(y.config.apiHost);V&&(T.eid=V);const Z=y._getFrameworks();return Z.length&&(T.fw=Z.join(",")),`${p}?${(0,se.xO)(T).slice(1)}`}function md(){return md=(0,C.Z)(function*(y){const d=yield function zh(y){return xu=xu||function Pl(y){return new Promise((d,p)=>{var T,V,Z;function ge(){Na(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Na(),p(ze(y,"network-request-failed"))},timeout:al.get()})}if(null!==(V=null===(T=Vr().gapi)||void 0===T?void 0:T.iframes)&&void 0!==V&&V.Iframe)d(gapi.iframes.getContext());else{if(null===(Z=Vr().gapi)||void 0===Z||!Z.load){const Ne=tn("iframefcb");return Vr()[Ne]=()=>{gapi.load?ge():p(ze(y,"network-request-failed"))},vi(`${function so(){return On.gapiScript}()}?onload=${Ne}`).catch(Je=>p(Je))}ge()}}).catch(d=>{throw xu=null,d})}(y),xu}(y),p=Vr().gapi;return ue(p,y,"internal-error"),d.open({where:document.body,url:ul(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jc,dontclear:!0},T=>new Promise(function(){var V=(0,C.Z)(function*(Z,ge){yield T.restyle({setHideOnLeave:!1});const Ne=ze(y,"network-request-failed"),Je=Vr().setTimeout(()=>{ge(Ne)},Bc.get());function St(){Vr().clearTimeout(Je),Z(T)}T.ping(St).then(St,()=>{ge(Ne)})});return function(Z,ge){return V.apply(this,arguments)}}()))}),md.apply(this,arguments)}const Hc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class gi{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const yd="__/auth/handler",Ns="emulator/auth/handler",Fu=encodeURIComponent("fac");function qa(y,d,p,T,V,Z){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,C.Z)(function*(y,d,p,T,V,Z){ue(y.config.authDomain,y,"auth-domain-config-required"),ue(y.config.apiKey,y,"invalid-api-key");const ge={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:T,v:le.SDK_VERSION,eventId:V};if(d instanceof Zs){d.setDefaultLanguage(y.languageCode),ge.providerId=d.providerId||"",(0,se.xb)(d.getCustomParameters())||(ge.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Ot,Ft]of Object.entries(Z||{}))ge[Ot]=Ft}if(d instanceof Ca){const Ot=d.getScopes().filter(Ft=>""!==Ft);Ot.length>0&&(ge.scopes=Ot.join(","))}y.tenantId&&(ge.tid=y.tenantId);const Ne=ge;for(const Ot of Object.keys(Ne))void 0===Ne[Ot]&&delete Ne[Ot];const Je=yield y._getAppCheckToken(),St=Je?`#${Fu}=${encodeURIComponent(Je)}`:"";return`${function uc({config:y}){return y.emulator?be(y,Ns):`https://${y.authDomain}/${yd}`}(y)}?${(0,se.xO)(Ne).slice(1)}${St}`})).apply(this,arguments)}const _u="webStorageSupport",$c=class np{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dn,this._completeRedirectFn=Jo,this._overrideRedirectResult=kc}_openPopup(d,p,T,V){var Z=this;return(0,C.Z)(function*(){var ge;an(null===(ge=Z.eventManagers[d._key()])||void 0===ge?void 0:ge.manager,"_initialize() not called before _openPopup()");const Ne=yield qa(d,p,T,At(),V);return function _d(y,d,p,T=500,V=600){const Z=Math.max((window.screen.availHeight-V)/2,0).toString(),ge=Math.max((window.screen.availWidth-T)/2,0).toString();let Ne="";const Je=Object.assign(Object.assign({},Hc),{width:T.toString(),height:V.toString(),top:Z,left:ge}),St=(0,se.z$)().toLowerCase();p&&(Ne=Ua(St)?"_blank":p),Ws(St)&&(d=d||"http://localhost",Je.scrollbars="yes");const Ot=Object.entries(Je).reduce((Di,[tu,$r])=>`${Di}${tu}=${$r},`,"");if(function Qe(y=(0,se.z$)()){var d;return Be(y)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(St)&&"_self"!==Ne)return function cl(y,d){const p=document.createElement("a");p.href=y,p.target=d;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(T)}(d||"",Ne),new gi(null);const Ft=window.open(d||"",Ne,Ot);ue(Ft,y,"popup-blocked");try{Ft.focus()}catch{}return new gi(Ft)}(d,Ne,Zu())})()}_openRedirect(d,p,T,V){var Z=this;return(0,C.Z)(function*(){return yield Z._originValidation(d),function Qu(y){Vr().location.href=y}(yield qa(d,p,T,At(),V)),new Promise(()=>{})})()}_initialize(d){const p=d._key();if(this.eventManagers[p]){const{manager:V,promise:Z}=this.eventManagers[p];return V?Promise.resolve(V):(an(Z,"If manager is not set, promise should be"),Z)}const T=this.initAndGetManager(d);return this.eventManagers[p]={promise:T},T.catch(()=>{delete this.eventManagers[p]}),T}initAndGetManager(d){var p=this;return(0,C.Z)(function*(){const T=yield function mu(y){return md.apply(this,arguments)}(d),V=new il(d);return T.register("authEvent",Z=>(ue(Z?.authEvent,d,"invalid-auth-event"),{status:V.onEvent(Z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[d._key()]={manager:V},p.iframes[d._key()]=T,V})()}_isIframeWebStorageSupported(d,p){this.iframes[d._key()].send(_u,{type:_u},V=>{var Z;const ge=null===(Z=V?.[0])||void 0===Z?void 0:Z[_u];void 0!==ge&&p(!!ge),ce(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function ol(y){return oc.apply(this,arguments)}(d)),this.originValidationPromises[p]}get _shouldInitProactively(){return $t()||Eo()||Be()}};class rp{constructor(d){this.factorId=d}_process(d,p,T){switch(p.type){case"enroll":return this._finalizeEnroll(d,p.credential,T);case"signin":return this._finalizeSignIn(d,p.credential);default:return Ve("unexpected MultiFactorSessionType")}}}class Hs extends rp{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Hs(d)}_finalizeEnroll(d,p,T){return function Mi(y,d){return ut(y,"POST","/v2/accounts/mfaEnrollment:finalize",Me(y,d))}(d,{idToken:p,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,p){return function Zo(y,d){return ut(y,"POST","/v2/accounts/mfaSignIn:finalize",Me(y,d))}(d,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let vd=(()=>{class y{constructor(){}static assertion(p){return Hs._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Nl="@firebase/auth";class Gc{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var p=this;return(0,C.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const p=this.auth.onIdTokenChanged(T=>{d(T?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,p),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const p=this.internalListeners.get(d);p&&(this.internalListeners.delete(d),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Vi(){return window}(0,se.Pz)("authIdTokenMaxAge"),function Ji(y){On=y}({loadJS:y=>new Promise((d,p)=>{const T=document.createElement("script");T.setAttribute("src",y),T.onload=d,T.onerror=V=>{const Z=ze("internal-error");Z.customData=V,p(Z)},T.type="text/javascript",T.charset="UTF-8",function Za(){var y,d;return null!==(d=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==d?d:document}().appendChild(T)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Xd(y){(0,le._registerComponent)(new Pe.wA("auth",(d,{options:p})=>{const T=d.getProvider("app").getImmediate(),V=d.getProvider("heartbeat"),Z=d.getProvider("app-check-internal"),{apiKey:ge,authDomain:Ne}=T.options;ue(ge&&!ge.includes(":"),"invalid-api-key",{appName:T.name});const Je={apiKey:ge,authDomain:Ne,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_n(y)},St=new io(T,V,Z,Je);return function Au(y,d){const p=d?.persistence||[],T=(Array.isArray(p)?p:[p]).map(hn);d?.errorMap&&y._updateErrorMap(d.errorMap),y._initializeWithPersistence(T,d?.popupRedirectResolver)}(St,p),St},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,p,T)=>{d.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new Pe.wA("auth-internal",d=>{const p=gr(d.getProvider("auth").getImmediate());return new Gc(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(Nl,"1.7.1",function Jd(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(y)),(0,le.registerVersion)(Nl,"1.7.1","esm2017")}("Browser");function Qa(){return Qa=(0,C.Z)(function*(y,d,p){var T;const{BuildInfo:V}=Vi();an(d.sessionId,"AuthEvent did not contain a session ID");const Z=yield function v(y){return f.apply(this,arguments)}(d.sessionId),ge={};return Be()?ge.ibi=V.packageName:ii()?ge.apn=V.packageName:ce(y,"operation-not-supported-in-this-environment"),V.displayName&&(ge.appDisplayName=V.displayName),ge.sessionId=Z,qa(y,p,d.type,void 0,null!==(T=d.eventId)&&void 0!==T?T:void 0,ge)}),Qa.apply(this,arguments)}function Fl(){return(Fl=(0,C.Z)(function*(y){const{BuildInfo:d}=Vi(),p={};Be()?p.iosBundleId=d.packageName:ii()?p.androidPackageName=d.packageName:ce(y,"operation-not-supported-in-this-environment"),yield gu(y,p)})).apply(this,arguments)}function Vu(){return(Vu=(0,C.Z)(function*(y,d,p){const{cordova:T}=Vi();let V=()=>{};try{yield new Promise((Z,ge)=>{let Ne=null;function Je(){var Ft;Z();const Di=null===(Ft=T.plugins.browsertab)||void 0===Ft?void 0:Ft.close;"function"==typeof Di&&Di(),"function"==typeof p?.close&&p.close()}function St(){Ne||(Ne=window.setTimeout(()=>{ge(ze(y,"redirect-cancelled-by-user"))},2e3))}function Ot(){"visible"===document?.visibilityState&&St()}d.addPassiveListener(Je),document.addEventListener("resume",St,!1),ii()&&document.addEventListener("visibilitychange",Ot,!1),V=()=>{d.removePassiveListener(Je),document.removeEventListener("resume",St,!1),document.removeEventListener("visibilitychange",Ot,!1),Ne&&window.clearTimeout(Ne)}})}finally{V()}})).apply(this,arguments)}function f(){return(f=(0,C.Z)(function*(y){const d=function m(y){if(an(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const d=new ArrayBuffer(y.length),p=new Uint8Array(d);for(let T=0;T<y.length;T++)p[T]=y.charCodeAt(T);return p}(y),p=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(p)).map(V=>V.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class k extends il{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(d)),super.onEvent(d)}initialized(){var d=this;return(0,C.Z)(function*(){yield d.initPromise})()}}function oe(y){return _e.apply(this,arguments)}function _e(){return(_e=(0,C.Z)(function*(y){const d=yield mt()._get(pt(y));return d&&(yield mt()._remove(pt(y))),d})).apply(this,arguments)}function tt(){const y=[];for(let p=0;p<20;p++){const T=Math.floor(62*Math.random());y.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(T))}return y.join("")}function mt(){return hn(Ko)}function pt(y){return fn("authEvent",y.config.apiKey,y.name)}function Xt(y){if(!y?.includes("?"))return{};const[d,...p]=y.split("?");return(0,se.zd)(p.join("?"))}const xr=class Nr{constructor(){this._redirectPersistence=dn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Jo,this._overrideRedirectResult=kc}_initialize(d){var p=this;return(0,C.Z)(function*(){const T=d._key();let V=p.eventManagers.get(T);return V||(V=new k(d),p.eventManagers.set(T,V),p.attachCallbackListeners(d,V)),V})()}_openPopup(d){ce(d,"operation-not-supported-in-this-environment")}_openRedirect(d,p,T,V){var Z=this;return(0,C.Z)(function*(){!function eh(y){var d,p,T,V,Z,ge,Ne,Je,St,Ot;const Ft=Vi();ue("function"==typeof(null===(d=Ft?.universalLinks)||void 0===d?void 0:d.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ue(typeof(null===(p=Ft?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ue("function"==typeof(null===(Z=null===(V=null===(T=Ft?.cordova)||void 0===T?void 0:T.plugins)||void 0===V?void 0:V.browsertab)||void 0===Z?void 0:Z.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(Je=null===(Ne=null===(ge=Ft?.cordova)||void 0===ge?void 0:ge.plugins)||void 0===Ne?void 0:Ne.browsertab)||void 0===Je?void 0:Je.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(Ot=null===(St=Ft?.cordova)||void 0===St?void 0:St.InAppBrowser)||void 0===Ot?void 0:Ot.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const ge=yield Z._initialize(d);yield ge.initialized(),ge.resetRedirect(),function Mr(){ic.clear()}(),yield Z._originValidation(d);const Ne=function G(y,d,p=null){return{type:d,eventId:p,urlResponse:null,sessionId:tt(),postBody:null,tenantId:y.tenantId,error:ze(y,"no-auth-event")}}(d,T,V);yield function te(y,d){return mt()._set(pt(y),d)}(d,Ne);const Je=yield function xl(y,d,p){return Qa.apply(this,arguments)}(d,Ne,p),St=yield function Ll(y){const{cordova:d}=Vi();return new Promise(p=>{d.plugins.browsertab.isAvailable(T=>{let V=null;T?d.plugins.browsertab.openUrl(y):V=d.InAppBrowser.open(y,function Re(y=(0,se.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(V)})})}(Je);return function Ya(y,d,p){return Vu.apply(this,arguments)}(d,ge,St)})()}_isIframeWebStorageSupported(d,p){throw new Error("Method not implemented.")}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function kl(y){return Fl.apply(this,arguments)}(d)),this.originValidationPromises[p]}attachCallbackListeners(d,p){const{universalLinks:T,handleOpenURL:V,BuildInfo:Z}=Vi(),ge=setTimeout((0,C.Z)(function*(){yield oe(d),p.onEvent(_r())}),500),Ne=function(){var Ot=(0,C.Z)(function*(Ft){clearTimeout(ge);const Di=yield oe(d);let tu=null;Di&&Ft?.url&&(tu=function Ae(y,d){var p,T;const V=function xt(y){const d=Xt(y),p=d.link?decodeURIComponent(d.link):void 0,T=Xt(p).link,V=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return Xt(V).link||V||T||p||y}(d);if(V.includes("/__/auth/callback")){const Z=Xt(V),ge=Z.firebaseError?function Qt(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(Z.firebaseError)):null,Ne=null===(T=null===(p=ge?.code)||void 0===p?void 0:p.split("auth/"))||void 0===T?void 0:T[1],Je=Ne?ze(Ne):null;return Je?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Je,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:V,postBody:null}}return null}(Di,Ft.url)),p.onEvent(tu||_r())});return function(Di){return Ot.apply(this,arguments)}}();typeof T<"u"&&"function"==typeof T.subscribe&&T.subscribe(null,Ne);const Je=V,St=`${Z.packageName.toLowerCase()}://`;Vi().handleOpenURL=function(){var Ot=(0,C.Z)(function*(Ft){if(Ft.toLowerCase().startsWith(St)&&Ne({url:Ft}),"function"==typeof Je)try{Je(Ft)}catch(Di){console.error(Di)}});return function(Ft){return Ot.apply(this,arguments)}}()}};function _r(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ze("no-auth-event")}}function ni(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Uu(y=(0,se.z$)()){return!("file:"!==ni()&&"ionic:"!==ni()&&"capacitor:"!==ni()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function dc(){try{const y=self.localStorage,d=Zu();if(y)return y.setItem(d,"1"),y.removeItem(d),!function ka(y=(0,se.z$)()){return function xa(){return(0,se.w1)()&&11===document?.documentMode}()||function Xo(y=(0,se.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,se.hl)()}catch{return nn()&&(0,se.hl)()}return!1}function nn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function kt(){return(function is(){return"http:"===ni()||"https:"===ni()}()||(0,se.ru)()||Uu())&&!function Eu(){return(0,se.b$)()||(0,se.UG)()}()&&dc()&&!nn()}function In(){return Uu()&&typeof document<"u"}function Zi(){return(Zi=(0,C.Z)(function*(){return!!In()&&new Promise(y=>{const d=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),y(!0)})})})).apply(this,arguments)}const Hr={LOCAL:"local",NONE:"none",SESSION:"session"},No=ue,_i="persistence";function pa(y){return _s.apply(this,arguments)}function _s(){return(_s=(0,C.Z)(function*(y){yield y._initializationPromise;const d=yo(),p=fn(_i,y.config.apiKey,y.name);d&&d.setItem(p,y._getPersistence())})).apply(this,arguments)}function yo(){var y;try{return(null===(y=function Ja(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Iu=ue;class ea{constructor(){this.browserResolver=hn($c),this.cordovaResolver=hn(xr),this.underlyingResolver=null,this._redirectPersistence=dn,this._completeRedirectFn=Jo,this._overrideRedirectResult=kc}_initialize(d){var p=this;return(0,C.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,p,T,V){var Z=this;return(0,C.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openPopup(d,p,T,V)})()}_openRedirect(d,p,T,V){var Z=this;return(0,C.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openRedirect(d,p,T,V)})()}_isIframeWebStorageSupported(d,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,p)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return In()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Iu(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,C.Z)(function*(){if(d.underlyingResolver)return;const p=yield function Kn(){return Zi.apply(this,arguments)}();d.underlyingResolver=p?d.cordovaResolver:d.browserResolver})()}}function th(y){return y.unwrap()}function ip(y){return qh(y)}function qh(y){const{_tokenResponse:d}=y instanceof se.ZR?y.customData:y;if(!d)return null;if(!(y instanceof se.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Qo.credentialFromResult(y);const p=d.providerId;if(!p||p===Fe.PASSWORD)return null;let T;switch(p){case Fe.GOOGLE:T=Go;break;case Fe.FACEBOOK:T=bu;break;case Fe.GITHUB:T=$i;break;case Fe.TWITTER:T=Ii;break;default:const{oauthIdToken:V,oauthAccessToken:Z,oauthTokenSecret:ge,pendingToken:Ne,nonce:Je}=d;return Z||ge||V||Ne?Ne?p.startsWith("saml.")?Qs._create(p,Ne):Gn._fromParams({providerId:p,signInMethod:p,pendingToken:Ne,idToken:V,accessToken:Z}):new Do(p).credential({idToken:V,accessToken:Z,rawNonce:Je}):null}return y instanceof se.ZR?T.credentialFromError(y):T.credentialFromResult(y)}function Wn(y,d){return d.catch(p=>{throw p instanceof se.ZR&&function sp(y,d){var p;const T=null===(p=d.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new wd(y,function li(y,d){var p;const T=(0,se.m9)(y),V=d;return ue(d.customData.operationType,T,"argument-error"),ue(null===(p=V.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,T,"argument-error"),Ye._fromError(T,V)}(y,d));else if(T){const V=qh(d),Z=d;V&&(Z.credential=V,Z.tenantId=T.tenantId||void 0,Z.email=T.email||void 0,Z.phoneNumber=T.phoneNumber||void 0)}}(y,p),p}).then(p=>{const V=p.user;return{operationType:p.operationType,credential:ip(p),additionalUserInfo:Da(p),user:Fa.getOrCreate(V)}})}function dr(y,d){return wu.apply(this,arguments)}function wu(){return(wu=(0,C.Z)(function*(y,d){const p=yield d;return{verificationId:p.verificationId,confirm:T=>Wn(y,p.confirm(T))}})).apply(this,arguments)}class wd{constructor(d,p){this.resolver=p,this.auth=function Wh(y){return y.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Wn(th(this.auth),this.resolver.resolveSignIn(d))}}class Fa{constructor(d){this._delegate=d,this.multiFactor=function it(y){const d=(0,se.m9)(y);return He.has(d)||He.set(d,Tt._fromUser(d)),He.get(d)}(d)}static getOrCreate(d){return Fa.USER_MAP.has(d)||Fa.USER_MAP.set(d,new Fa(d)),Fa.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var p=this;return(0,C.Z)(function*(){return Wn(p.auth,Li(p._delegate,d))})()}linkWithPhoneNumber(d,p){var T=this;return(0,C.Z)(function*(){return dr(T.auth,function Cr(y,d,p){return ba.apply(this,arguments)}(T._delegate,d,p))})()}linkWithPopup(d){var p=this;return(0,C.Z)(function*(){return Wn(p.auth,function xc(y,d,p){return tl.apply(this,arguments)}(p._delegate,d,ea))})()}linkWithRedirect(d){var p=this;return(0,C.Z)(function*(){return yield pa(gr(p.auth)),no(p._delegate,d,ea)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var p=this;return(0,C.Z)(function*(){return Wn(p.auth,ho(p._delegate,d))})()}reauthenticateWithPhoneNumber(d,p){return dr(this.auth,function $h(y,d,p){return Rc.apply(this,arguments)}(this._delegate,d,p))}reauthenticateWithPopup(d){return Wn(this.auth,function Yd(y,d,p){return to.apply(this,arguments)}(this._delegate,d,ea))}reauthenticateWithRedirect(d){var p=this;return(0,C.Z)(function*(){return yield pa(gr(p.auth)),sc(p._delegate,d,ea)})()}sendEmailVerification(d){return function z(y,d){return A.apply(this,arguments)}(this._delegate,d)}unlink(d){var p=this;return(0,C.Z)(function*(){return yield function Zt(y,d){return Zr.apply(this,arguments)}(p._delegate,d),p})()}updateEmail(d){return function wt(y,d){const p=(0,se.m9)(y);return(0,le._isFirebaseServerApp)(p.auth.app)?Promise.reject(Ge(p.auth)):cn(p,d,null)}(this._delegate,d)}updatePassword(d){return function Vn(y,d){return cn((0,se.m9)(y),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function Qd(y,d){return Dl.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Ke(y,d){return rt.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,p){return function N(y,d,p){return w.apply(this,arguments)}(this._delegate,d,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Fa.USER_MAP=new WeakMap;const ju=ue;let op=(()=>{class y{constructor(p,T){if(this.app=p,T.isInitialized())return this._delegate=T.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:V}=p.options;ju(V,"invalid-api-key",{appName:p.name}),ju(V,"invalid-api-key",{appName:p.name});const Z=typeof window<"u"?ea:void 0;this._delegate=T.initialize({options:{persistence:nh(V,p.name),popupRedirectResolver:Z}}),this._delegate._updateErrorMap(gt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Fa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,T){!function Io(y,d,p){const T=gr(y);ue(T._canInitEmulator,T,"emulator-config-failed"),ue(/^https?:\/\//.test(d),T,"invalid-emulator-scheme");const V=!!p?.disableWarnings,Z=ou(d),{host:ge,port:Ne}=function Il(y){const d=ou(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(d.length));if(!p)return{host:"",port:null};const T=p[2].split("@").pop()||"",V=/^(\[[^\]]+\])(:|$)/.exec(T);if(V){const Z=V[1];return{host:Z,port:Is(T.substr(Z.length+1))}}{const[Z,ge]=T.split(":");return{host:Z,port:Is(ge)}}}(d);T.config.emulator={url:`${Z}//${ge}${null===Ne?"":`:${Ne}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:ge,port:Ne,protocol:Z.replace(":",""),options:Object.freeze({disableWarnings:V})}),V||function ia(){function y(){const d=document.createElement("p"),p=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,T)}applyActionCode(p){return function ir(y,d){return ei.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return qo(this._delegate,p)}confirmPasswordReset(p,T){return function Qr(y,d,p){return Gi.apply(this,arguments)}(this._delegate,p,T)}createUserWithEmailAndPassword(p,T){var V=this;return(0,C.Z)(function*(){return Wn(V._delegate,function cu(y,d,p){return du.apply(this,arguments)}(V._delegate,p,T))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function K(y,d){return L.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Wu(y,d){const p=Ta.parseLink(d);return"EMAIL_SIGNIN"===p?.operation}(0,p)}getRedirectResult(){var p=this;return(0,C.Z)(function*(){ju(kt(),p._delegate,"operation-not-supported-in-this-environment");const T=yield function Ou(y,d){return Fc.apply(this,arguments)}(p._delegate,ea);return T?Wn(p._delegate,Promise.resolve(T)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function cr(y,d){gr(y)._logFramework(d)}(this._delegate,p)}onAuthStateChanged(p,T,V){const{next:Z,error:ge,complete:Ne}=Kh(p,T,V);return this._delegate.onAuthStateChanged(Z,ge,Ne)}onIdTokenChanged(p,T,V){const{next:Z,error:ge,complete:Ne}=Kh(p,T,V);return this._delegate.onIdTokenChanged(Z,ge,Ne)}sendSignInLinkToEmail(p,T){return function Ro(y,d,p){return zi.apply(this,arguments)}(this._delegate,p,T)}sendPasswordResetEmail(p,T){return function lu(y,d,p){return bo.apply(this,arguments)}(this._delegate,p,T||void 0)}setPersistence(p){var T=this;return(0,C.Z)(function*(){let V;switch(function Xa(y,d){No(Object.values(Hr).includes(d),y,"invalid-persistence-type"),(0,se.b$)()?No(d!==Hr.SESSION,y,"unsupported-persistence-type"):(0,se.UG)()?No(d===Hr.NONE,y,"unsupported-persistence-type"):nn()?No(d===Hr.NONE||d===Hr.LOCAL&&(0,se.hl)(),y,"unsupported-persistence-type"):No(d===Hr.NONE||dc(),y,"unsupported-persistence-type")}(T._delegate,p),p){case Hr.SESSION:V=dn;break;case Hr.LOCAL:V=(yield hn(Ga)._isAvailable())?Ga:Ko;break;case Hr.NONE:V=Hn;break;default:return ce("argument-error",{appName:T._delegate.name})}return T._delegate.setPersistence(V)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Wn(this._delegate,function ts(y){return wi.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Wn(this._delegate,rs(this._delegate,p))}signInWithCustomToken(p){return Wn(this._delegate,function ja(y,d){return Xs.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,T){return Wn(this._delegate,function zu(y,d,p){return(0,le._isFirebaseServerApp)(y.app)?Promise.reject(Ge(y)):rs((0,se.m9)(y),$o.credential(d,p)).catch(function(){var T=(0,C.Z)(function*(V){throw"auth/password-does-not-meet-requirements"===V.code&&po(y),V});return function(V){return T.apply(this,arguments)}}())}(this._delegate,p,T))}signInWithEmailLink(p,T){return Wn(this._delegate,function hu(y,d,p){return mo.apply(this,arguments)}(this._delegate,p,T))}signInWithPhoneNumber(p,T){return dr(this._delegate,function Pr(y,d,p){return Ms.apply(this,arguments)}(this._delegate,p,T))}signInWithPopup(p){var T=this;return(0,C.Z)(function*(){return ju(kt(),T._delegate,"operation-not-supported-in-this-environment"),Wn(T._delegate,function el(y,d,p){return Nu.apply(this,arguments)}(T._delegate,p,ea))})()}signInWithRedirect(p){var T=this;return(0,C.Z)(function*(){return ju(kt(),T._delegate,"operation-not-supported-in-this-environment"),yield pa(T._delegate),rl(T._delegate,p,ea)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function eo(y,d){return us.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Hr,y})();function Kh(y,d,p){let T=y;"function"!=typeof y&&({next:T,error:d,complete:p}=y);const V=T;return{next:ge=>V(ge&&Fa.getOrCreate(ge)),error:d,complete:p}}function nh(y,d){const p=function Bu(y,d){const p=yo();if(!p)return[];const T=fn(_i,y,d);switch(p.getItem(T)){case Hr.NONE:return[Hn];case Hr.LOCAL:return[Ga,dn];case Hr.SESSION:return[dn];default:return[]}}(y,d);if(typeof self<"u"&&!p.includes(Ga)&&p.push(Ga),typeof window<"u")for(const T of[Ko,dn])p.includes(T)||p.push(T);return p.includes(Hn)||p.push(Hn),p}class Td{constructor(){this.providerId="phone",this._delegate=new Qo(th(W.Z.auth()))}static credential(d,p){return Qo.credential(d,p)}verifyPhoneNumber(d,p){return this._delegate.verifyPhoneNumber(d,p)}unwrap(){return this._delegate}}Td.PHONE_SIGN_IN_METHOD=Qo.PHONE_SIGN_IN_METHOD,Td.PROVIDER_ID=Qo.PROVIDER_ID;const eu=ue;class zc{constructor(d,p,T=W.Z.app()){var V;eu(null===(V=T.options)||void 0===V?void 0:V.apiKey,"invalid-api-key",{appName:T.name}),this._delegate=new pn(T.auth(),d,p),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Dd(y){y.INTERNAL.registerComponent(new Pe.wA("auth-compat",d=>{const p=d.getProvider("app-compat").getImmediate(),T=d.getProvider("auth");return new op(p,T)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:$o,FacebookAuthProvider:bu,GithubAuthProvider:$i,GoogleAuthProvider:Go,OAuthProvider:Do,SAMLAuthProvider:Kr,PhoneAuthProvider:Td,PhoneMultiFactorGenerator:vd,RecaptchaVerifier:zc,TwitterAuthProvider:Ii,Auth:op,AuthCredential:ws,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.5.6")}(W.Z)},5861:(Mt,Ue,$)=>{function C(le,se,ye,pe,Pe,b,Fe){try{var fe=le[b](Fe),he=fe.value}catch(Oe){return void ye(Oe)}fe.done?se(he):Promise.resolve(he).then(pe,Pe)}function W(le){return function(){var se=this,ye=arguments;return new Promise(function(pe,Pe){var b=le.apply(se,ye);function Fe(he){C(b,pe,Pe,Fe,fe,"next",he)}function fe(he){C(b,pe,Pe,Fe,fe,"throw",he)}Fe(void 0)})}}$.d(Ue,{Z:()=>W})},7582:(Mt,Ue,$)=>{function se(Ee,be){var Se={};for(var De in Ee)Object.prototype.hasOwnProperty.call(Ee,De)&&be.indexOf(De)<0&&(Se[De]=Ee[De]);if(null!=Ee&&"function"==typeof Object.getOwnPropertySymbols){var We=0;for(De=Object.getOwnPropertySymbols(Ee);We<De.length;We++)be.indexOf(De[We])<0&&Object.prototype.propertyIsEnumerable.call(Ee,De[We])&&(Se[De[We]]=Ee[De[We]])}return Se}function Oe(Ee,be,Se,De){return new(Se||(Se=Promise))(function(Me,ut){function Dt(jt){try{It(De.next(jt))}catch(Ht){ut(Ht)}}function Rt(jt){try{It(De.throw(jt))}catch(Ht){ut(Ht)}}function It(jt){jt.done?Me(jt.value):function We(Me){return Me instanceof Se?Me:new Se(function(ut){ut(Me)})}(jt.value).then(Dt,Rt)}It((De=De.apply(Ee,be||[])).next())})}function nt(Ee){return this instanceof nt?(this.v=Ee,this):new nt(Ee)}function ce(Ee,be,Se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var We,De=Se.apply(Ee,be||[]),Me=[];return We={},ut("next"),ut("throw"),ut("return"),We[Symbol.asyncIterator]=function(){return this},We;function ut(Dn){De[Dn]&&(We[Dn]=function(hr){return new Promise(function(Ar,Sn){Me.push([Dn,hr,Ar,Sn])>1||Dt(Dn,hr)})})}function Dt(Dn,hr){try{!function Rt(Dn){Dn.value instanceof nt?Promise.resolve(Dn.value.v).then(It,jt):Ht(Me[0][2],Dn)}(De[Dn](hr))}catch(Ar){Ht(Me[0][3],Ar)}}function It(Dn){Dt("next",Dn)}function jt(Dn){Dt("throw",Dn)}function Ht(Dn,hr){Dn(hr),Me.shift(),Me.length&&Dt(Me[0][0],Me[0][1])}}function ht(Ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se,be=Ee[Symbol.asyncIterator];return be?be.call(Ee):(Ee=function qt(Ee){var be="function"==typeof Symbol&&Symbol.iterator,Se=be&&Ee[be],De=0;if(Se)return Se.call(Ee);if(Ee&&"number"==typeof Ee.length)return{next:function(){return Ee&&De>=Ee.length&&(Ee=void 0),{value:Ee&&Ee[De++],done:!Ee}}};throw new TypeError(be?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ee),Se={},De("next"),De("throw"),De("return"),Se[Symbol.asyncIterator]=function(){return this},Se);function De(Me){Se[Me]=Ee[Me]&&function(ut){return new Promise(function(Dt,Rt){!function We(Me,ut,Dt,Rt){Promise.resolve(Rt).then(function(It){Me({value:It,done:Dt})},ut)}(Dt,Rt,(ut=Ee[Me](ut)).done,ut.value)})}}}$.d(Ue,{FC:()=>ce,KL:()=>ht,_T:()=>se,mG:()=>Oe,qq:()=>nt}),"function"==typeof SuppressedError&&SuppressedError}},Mt=>{Mt(Mt.s=7258)}]);