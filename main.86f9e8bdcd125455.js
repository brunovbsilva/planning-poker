"use strict";(self.webpackChunkplanning_poker=self.webpackChunkplanning_poker||[]).push([[179],{9058:(Ht,Fe,$)=>{$.d(Fe,{BH:()=>De,G6:()=>Nt,L:()=>Ne,LL:()=>$e,Pz:()=>je,Sg:()=>Ve,UG:()=>ae,ZB:()=>ge,ZR:()=>be,aH:()=>we,b$:()=>nr,eu:()=>de,hl:()=>he,jU:()=>Zt,m9:()=>Zr,ne:()=>Fn,pd:()=>on,r3:()=>Bn,ru:()=>ct,tV:()=>re,uI:()=>ot,vZ:()=>Ir,w1:()=>dr,xO:()=>fi,xb:()=>Sn,z$:()=>Ye,zd:()=>st});const Ie=function(ce){const q=[];let Y=0;for(let Z=0;Z<ce.length;Z++){let K=ce.charCodeAt(Z);K<128?q[Y++]=K:K<2048?(q[Y++]=K>>6|192,q[Y++]=63&K|128):55296==(64512&K)&&Z+1<ce.length&&56320==(64512&ce.charCodeAt(Z+1))?(K=65536+((1023&K)<<10)+(1023&ce.charCodeAt(++Z)),q[Y++]=K>>18|240,q[Y++]=K>>12&63|128,q[Y++]=K>>6&63|128,q[Y++]=63&K|128):(q[Y++]=K>>12|224,q[Y++]=K>>6&63|128,q[Y++]=63&K|128)}return q},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ce,q){if(!Array.isArray(ce))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Z=[];for(let K=0;K<ce.length;K+=3){const Ee=ce[K],Ge=K+1<ce.length,lt=Ge?ce[K+1]:0,Qt=K+2<ce.length,Xt=Qt?ce[K+2]:0;let qn=(15&lt)<<2|Xt>>6,mi=63&Xt;Qt||(mi=64,Ge||(qn=64)),Z.push(Y[Ee>>2],Y[(3&Ee)<<4|lt>>4],Y[qn],Y[mi])}return Z.join("")},encodeString(ce,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(ce):this.encodeByteArray(Ie(ce),q)},decodeString(ce,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(ce):function(ce){const q=[];let Y=0,Z=0;for(;Y<ce.length;){const K=ce[Y++];if(K<128)q[Z++]=String.fromCharCode(K);else if(K>191&&K<224){const Ee=ce[Y++];q[Z++]=String.fromCharCode((31&K)<<6|63&Ee)}else if(K>239&&K<365){const Qt=((7&K)<<18|(63&ce[Y++])<<12|(63&ce[Y++])<<6|63&ce[Y++])-65536;q[Z++]=String.fromCharCode(55296+(Qt>>10)),q[Z++]=String.fromCharCode(56320+(1023&Qt))}else{const Ee=ce[Y++],Ge=ce[Y++];q[Z++]=String.fromCharCode((15&K)<<12|(63&Ee)<<6|63&Ge)}}return q.join("")}(this.decodeStringToByteArray(ce,q))},decodeStringToByteArray(ce,q){this.init_();const Y=q?this.charToByteMapWebSafe_:this.charToByteMap_,Z=[];for(let K=0;K<ce.length;){const Ee=Y[ce.charAt(K++)],lt=K<ce.length?Y[ce.charAt(K)]:0;++K;const Xt=K<ce.length?Y[ce.charAt(K)]:64;++K;const Ft=K<ce.length?Y[ce.charAt(K)]:64;if(++K,null==Ee||null==lt||null==Xt||null==Ft)throw new Ce;Z.push(Ee<<2|lt>>4),64!==Xt&&(Z.push(lt<<4&240|Xt>>2),64!==Ft&&Z.push(Xt<<6&192|Ft))}return Z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ce=0;ce<this.ENCODED_VALS.length;ce++)this.byteToCharMap_[ce]=this.ENCODED_VALS.charAt(ce),this.charToByteMap_[this.byteToCharMap_[ce]]=ce,this.byteToCharMapWebSafe_[ce]=this.ENCODED_VALS_WEBSAFE.charAt(ce),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ce]]=ce,ce>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ce)]=ce,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ce)]=ce)}}};class Ce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ne=function(ce){return function(ce){const q=Ie(ce);return me.encodeByteArray(q,!0)}(ce).replace(/\./g,"")},re=function(ce){try{return me.decodeString(ce,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function ge(ce,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===ce&&(ce={});break;case Array:ce=[];break;default:return q}for(const Y in q)!q.hasOwnProperty(Y)||!Qe(Y)||(ce[Y]=ge(ce[Y],q[Y]));return ce}function Qe(ce){return"__proto__"!==ce}const at=()=>{try{return function ze(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ce=process.env.__FIREBASE_DEFAULTS__;return ce?JSON.parse(ce):void 0})()||(()=>{if(typeof document>"u")return;let ce;try{ce=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const q=ce&&re(ce[1]);return q&&JSON.parse(q)})()}catch(ce){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ce}`)}},we=()=>{var ce;return null===(ce=at())||void 0===ce?void 0:ce.config},je=ce=>{var q;return null===(q=at())||void 0===q?void 0:q[`_${ce}`]};class De{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,Y)=>{this.resolve=q,this.reject=Y})}wrapCallback(q){return(Y,Z)=>{Y?this.reject(Y):this.resolve(Z),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(Y):q(Y,Z))}}}function Ve(ce,q){if(ce.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Z=q||"demo-project",K=ce.iat||0,Ee=ce.sub||ce.user_id;if(!Ee)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ge=Object.assign({iss:`https://securetoken.google.com/${Z}`,aud:Z,iat:K,exp:K+3600,auth_time:K,sub:Ee,user_id:Ee,firebase:{sign_in_provider:"custom",identities:{}}},ce);return[Ne(JSON.stringify({alg:"none",type:"JWT"})),Ne(JSON.stringify(Ge)),""].join(".")}function Ye(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ot(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function ae(){var ce;const q=null===(ce=at())||void 0===ce?void 0:ce.forceEnvironment;if("node"===q)return!0;if("browser"===q)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Zt(){return"object"==typeof self&&self.self===self}function ct(){const ce="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ce&&void 0!==ce.id}function nr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function dr(){const ce=Ye();return ce.indexOf("MSIE ")>=0||ce.indexOf("Trident/")>=0}function Nt(){return!ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function he(){try{return"object"==typeof indexedDB}catch{return!1}}function de(){return new Promise((ce,q)=>{try{let Y=!0;const Z="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(Z);K.onsuccess=()=>{K.result.close(),Y||self.indexedDB.deleteDatabase(Z),ce(!0)},K.onupgradeneeded=()=>{Y=!1},K.onerror=()=>{var Ee;q((null===(Ee=K.error)||void 0===Ee?void 0:Ee.message)||"")}}catch(Y){q(Y)}})}class be extends Error{constructor(q,Y,Z){super(Y),this.code=q,this.customData=Z,this.name="FirebaseError",Object.setPrototypeOf(this,be.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$e.prototype.create)}}class $e{constructor(q,Y,Z){this.service=q,this.serviceName=Y,this.errors=Z}create(q,...Y){const Z=Y[0]||{},K=`${this.service}/${q}`,Ee=this.errors[q],Ge=Ee?function mt(ce,q){return ce.replace(it,(Y,Z)=>{const K=q[Z];return null!=K?String(K):`<${Z}?>`})}(Ee,Z):"Error";return new be(K,`${this.serviceName}: ${Ge} (${K}).`,Z)}}const it=/\{\$([^}]+)}/g;function Bn(ce,q){return Object.prototype.hasOwnProperty.call(ce,q)}function Sn(ce){for(const q in ce)if(Object.prototype.hasOwnProperty.call(ce,q))return!1;return!0}function Ir(ce,q){if(ce===q)return!0;const Y=Object.keys(ce),Z=Object.keys(q);for(const K of Y){if(!Z.includes(K))return!1;const Ee=ce[K],Ge=q[K];if(Wr(Ee)&&Wr(Ge)){if(!Ir(Ee,Ge))return!1}else if(Ee!==Ge)return!1}for(const K of Z)if(!Y.includes(K))return!1;return!0}function Wr(ce){return null!==ce&&"object"==typeof ce}function fi(ce){const q=[];for(const[Y,Z]of Object.entries(ce))Array.isArray(Z)?Z.forEach(K=>{q.push(encodeURIComponent(Y)+"="+encodeURIComponent(K))}):q.push(encodeURIComponent(Y)+"="+encodeURIComponent(Z));return q.length?"&"+q.join("&"):""}function st(ce){const q={};return ce.replace(/^\?/,"").split("&").forEach(Z=>{if(Z){const[K,Ee]=Z.split("=");q[decodeURIComponent(K)]=decodeURIComponent(Ee)}}),q}function on(ce){const q=ce.indexOf("?");if(!q)return"";const Y=ce.indexOf("#",q);return ce.substring(q,Y>0?Y:void 0)}function Fn(ce,q){const Y=new Ai(ce,q);return Y.subscribe.bind(Y)}class Ai{constructor(q,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{q(this)}).catch(Z=>{this.error(Z)})}next(q){this.forEachObserver(Y=>{Y.next(q)})}error(q){this.forEachObserver(Y=>{Y.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,Y,Z){let K;if(void 0===q&&void 0===Y&&void 0===Z)throw new Error("Missing Observer.");K=function Tn(ce,q){if("object"!=typeof ce||null===ce)return!1;for(const Y of q)if(Y in ce&&"function"==typeof ce[Y])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:Y,complete:Z},void 0===K.next&&(K.next=mr),void 0===K.error&&(K.error=mr),void 0===K.complete&&(K.complete=mr);const Ee=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch{}}),this.observers.push(K),Ee}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,q)}sendOne(q,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{Y(this.observers[q])}catch(Z){typeof console<"u"&&console.error&&console.error(Z)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mr(){}function Zr(ce){return ce&&ce._delegate?ce._delegate:ce}},4136:(Ht,Fe,$)=>{$.r(Fe),$.d(Fe,{PagesModule:()=>co});var D=$(6814),oe=$(3228),x=$(5879),Ie=$(7398),ye=$(9027);let me=(()=>{class j{constructor(T){this.firestore=T}createRoom(T){this.firestore.collection("rooms").add(T)}updateRoom(T){this.firestore.doc("rooms/"+T.id).update(T)}deleteRoom(T){this.firestore.doc("rooms/"+T).delete()}listenerRoom(T){return this.firestore.doc("rooms/"+T).valueChanges().pipe((0,Ie.U)(h=>Object.assign({id:T},h)))}getRooms(){return this.firestore.collection("rooms").snapshotChanges().pipe((0,Ie.U)(T=>T.map(this.actionToRoomModel)))}actionToRoomModel(T){const h=T.payload.doc.data();return Object.assign({id:T.payload.doc.id},h)}static#e=this.\u0275fac=function(h){return new(h||j)(x.LFG(ye.ST))};static#t=this.\u0275prov=x.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"})}return j})(),Ce=(()=>{class j{constructor(){this.onDelete=new x.vpe,this.onJoin=new x.vpe}deleteRoom(){this.onDelete.emit(this.room.id)}joinRoom(){this.onJoin.emit(this.room.id)}static#e=this.\u0275fac=function(h){return new(h||j)};static#t=this.\u0275cmp=x.Xpm({type:j,selectors:[["app-room-item"]],inputs:{room:"room"},outputs:{onDelete:"onDelete",onJoin:"onJoin"},decls:7,vars:1,consts:[[3,"click"]],template:function(h,A){1&h&&(x.TgZ(0,"div")(1,"h1"),x._uU(2),x.qZA(),x.TgZ(3,"button",0),x.NdJ("click",function(){return A.joinRoom()}),x._uU(4,"join"),x.qZA(),x.TgZ(5,"button",0),x.NdJ("click",function(){return A.deleteRoom()}),x._uU(6,"delete"),x.qZA()()),2&h&&(x.xp6(2),x.Oqu(A.room.name))}})}return j})();function He(j,y){if(1&j){const T=x.EpF();x.TgZ(0,"app-room-item",5),x.NdJ("onDelete",function(A){x.CHM(T);const v=x.oxw();return x.KtG(v.deleteRoom(A))})("onJoin",function(A){x.CHM(T);const v=x.oxw();return x.KtG(v.joinRoom(A))}),x.qZA()}2&j&&x.Q6J("room",y.$implicit)}let Ne=(()=>{class j{constructor(T,h){this.roomService=T,this.router=h,this.rooms=[]}ngOnInit(){this.roomService.getRooms().subscribe({next:T=>this.rooms=T,error:T=>console.log(T)})}createRoom(T){this.roomService.createRoom({name:T,tasks:[],currentTask:0})}deleteRoom(T){console.log(T),this.roomService.deleteRoom(T)}joinRoom(T){this.router.navigate(["room",T])}static#e=this.\u0275fac=function(h){return new(h||j)(x.Y36(me),x.Y36(oe.F0))};static#t=this.\u0275cmp=x.Xpm({type:j,selectors:[["app-rooms"]],decls:6,vars:1,consts:[[1,"room-list"],["type","text"],["name",""],[3,"click"],[3,"room","onDelete","onJoin",4,"ngFor","ngForOf"],[3,"room","onDelete","onJoin"]],template:function(h,A){if(1&h){const v=x.EpF();x.TgZ(0,"div",0),x._UZ(1,"input",1,2),x.TgZ(3,"a",3),x.NdJ("click",function(){x.CHM(v);const B=x.MAs(2);return x.KtG(A.createRoom(B.value))}),x._uU(4,"create room"),x.qZA(),x.YNc(5,He,1,1,"app-room-item",4),x.qZA()}2&h&&(x.xp6(5),x.Q6J("ngForOf",A.rooms))},dependencies:[D.sg,Ce]})}return j})(),re=(()=>{class j{constructor(T){this.roomService=T,this.index=0}ngOnInit(){}nextTask(){this.room.currentTask++,this.roomService.updateRoom(this.room)}previousTask(){this.room.currentTask--,this.roomService.updateRoom(this.room)}getTask(){return this.room?.tasks[this.room.currentTask]||""}addTask(){this.room.tasks.push("task "+this.index),this.roomService.updateRoom(this.room),this.index++}static#e=this.\u0275fac=function(h){return new(h||j)(x.Y36(me))};static#t=this.\u0275cmp=x.Xpm({type:j,selectors:[["app-tasks"]],inputs:{room:"room"},decls:8,vars:5,consts:[[3,"disabled","click"],[3,"click"]],template:function(h,A){1&h&&(x.TgZ(0,"button",0),x.NdJ("click",function(){return A.previousTask()}),x._uU(1),x.qZA(),x.TgZ(2,"span"),x._uU(3),x.qZA(),x.TgZ(4,"button",0),x.NdJ("click",function(){return A.nextTask()}),x._uU(5),x.qZA(),x.TgZ(6,"button",1),x.NdJ("click",function(){return A.addTask()}),x._uU(7,"addTasks"),x.qZA()),2&h&&(x.Q6J("disabled",0==A.room.currentTask),x.xp6(1),x.Oqu("<"),x.xp6(2),x.Oqu(A.room.tasks[A.room.currentTask]||""),x.xp6(1),x.Q6J("disabled",A.room.currentTask==A.room.tasks.length-1),x.xp6(1),x.Oqu(">"))}})}return j})();var ie=function(j){return j[j.DIAMONDS=0]="DIAMONDS",j[j.SPADES=1]="SPADES",j[j.HEARTS=2]="HEARTS",j[j.CLUBS=3]="CLUBS",j}(ie||{});class ge{constructor(y,T){this.cardType=y,this.value=T,this.isFliped=!1,this.type=this.getCardType(y)}getCardType(y){switch(y){case 1:return ie.DIAMONDS;case 2:return ie.SPADES;case 3:return ie.HEARTS;case 4:return ie.CLUBS;default:throw new Error("Invalid card type")}}toggleFlip(){this.isFliped=!this.isFliped}}class Qe{}class ze{}const We="*";function ht(j,y=null){return{type:4,styles:y,timings:j}}function Lt(j,y=null){return{type:2,steps:j,options:y}}function Te(j){return{type:6,styles:j,offset:null}}function we(j,y,T){return{type:0,name:j,styles:y,options:T}}function De(j,y,T=null){return{type:1,expr:j,animation:y,options:T}}class ct{constructor(y=0,T=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=y+T}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(y=>y()),this._onDoneFns=[])}onStart(y){this._originalOnStartFns.push(y),this._onStartFns.push(y)}onDone(y){this._originalOnDoneFns.push(y),this._onDoneFns.push(y)}onDestroy(y){this._onDestroyFns.push(y)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(y=>y()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(y=>y()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(y){this._position=this.totalTime?y*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(y){const T="start"==y?this._onStartFns:this._onDoneFns;T.forEach(h=>h()),T.length=0}}class nr{constructor(y){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=y;let T=0,h=0,A=0;const v=this.players.length;0==v?queueMicrotask(()=>this._onFinish()):this.players.forEach(M=>{M.onDone(()=>{++T==v&&this._onFinish()}),M.onDestroy(()=>{++h==v&&this._onDestroy()}),M.onStart(()=>{++A==v&&this._onStart()})}),this.totalTime=this.players.reduce((M,B)=>Math.max(M,B.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(y=>y()),this._onDoneFns=[])}init(){this.players.forEach(y=>y.init())}onStart(y){this._onStartFns.push(y)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(y=>y()),this._onStartFns=[])}onDone(y){this._onDoneFns.push(y)}onDestroy(y){this._onDestroyFns.push(y)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(y=>y.play())}pause(){this.players.forEach(y=>y.pause())}restart(){this.players.forEach(y=>y.restart())}finish(){this._onFinish(),this.players.forEach(y=>y.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(y=>y.destroy()),this._onDestroyFns.forEach(y=>y()),this._onDestroyFns=[])}reset(){this.players.forEach(y=>y.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(y){const T=y*this.totalTime;this.players.forEach(h=>{const A=h.totalTime?Math.min(1,T/h.totalTime):1;h.setPosition(A)})}getPosition(){const y=this.players.reduce((T,h)=>null===T||h.totalTime>T.totalTime?h:T,null);return null!=y?y.getPosition():0}beforeDestroy(){this.players.forEach(y=>{y.beforeDestroy&&y.beforeDestroy()})}triggerCallback(y){const T="start"==y?this._onStartFns:this._onDoneFns;T.forEach(h=>h()),T.length=0}}const dr=[function Je(j,y){return{type:7,name:j,definitions:y,options:{}}}("flipAnimation",[we("true",Te({transform:"rotateY(179deg)"})),we("false",Te({transform:"rotateY(0)"})),De("true => false",ht("500ms ease-out")),De("false => true",ht("500ms ease-in"))])];let Wn=(()=>{class j{getCardType(){switch(this.card.type){case ie.HEARTS:return"\u2665";case ie.DIAMONDS:return"\u2666";case ie.SPADES:return"\u2660";case ie.CLUBS:return"\u2663"}}getCardValue(){switch(this.card.value){case 1:return"A";case 11:return"J";case 12:return"Q";case 13:return"K";default:return this.card.value}}getClasses(){return{"card-front--red":[ie.HEARTS,ie.DIAMONDS].includes(this.card.type),"card-front--black":[ie.SPADES,ie.CLUBS].includes(this.card.type)}}static#e=this.\u0275fac=function(h){return new(h||j)};static#t=this.\u0275cmp=x.Xpm({type:j,selectors:[["app-card"]],inputs:{card:"card"},decls:12,vars:5,consts:[[1,"card"],[1,"card-side","card-front",3,"ngClass"],[1,"retangle"],[1,"card-type"],[1,"card-value"],[1,"number"],[1,"type"],[1,"card-side","card-back"]],template:function(h,A){1&h&&(x.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),x._uU(4),x.qZA()(),x.TgZ(5,"div",4)(6,"span",5),x._uU(7),x.qZA(),x.TgZ(8,"span",6),x._uU(9),x.qZA()()(),x.TgZ(10,"div",7),x._uU(11,"back"),x.qZA()()),2&h&&(x.Q6J("@flipAnimation",A.card.isFliped),x.xp6(1),x.Q6J("ngClass",A.getClasses()),x.xp6(3),x.Oqu(A.getCardType()),x.xp6(3),x.Oqu(A.getCardValue()),x.xp6(2),x.Oqu(A.getCardType()))},dependencies:[D.mk],styles:[".card[_ngcontent-%COMP%]{position:relative;width:200px;height:300px;background-color:#f8f9fa;border-radius:8px;box-shadow:0 0 10px #00000040;transform-style:preserve-3d;transform:transform 1s}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;transform:rotateY(0)}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .retangle[_ngcontent-%COMP%]{width:60%;height:65%;border-radius:6px;display:flex;align-items:center;justify-content:center}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .retangle[_ngcontent-%COMP%]   .card-type[_ngcontent-%COMP%]{font-size:50px}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{position:absolute;top:10px;left:15px}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{font-size:25px}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{font-size:30px}.card[_ngcontent-%COMP%]   .card-front--red[_ngcontent-%COMP%]{color:red}.card[_ngcontent-%COMP%]   .card-front--red[_ngcontent-%COMP%]   .retangle[_ngcontent-%COMP%]{border:2px solid red}.card[_ngcontent-%COMP%]   .card-front--black[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]   .card-front--black[_ngcontent-%COMP%]   .retangle[_ngcontent-%COMP%]{border:2px solid black}.card[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]{background:red;transform:rotateY(-180deg)}.card[_ngcontent-%COMP%]   .card-side[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:8px;position:absolute;-webkit-user-select:none;user-select:none;backface-visibility:hidden}"],data:{animation:dr}})}return j})();function It(j,y){if(1&j){const T=x.EpF();x.TgZ(0,"app-card",2),x.NdJ("click",function(){const v=x.CHM(T).$implicit;return x.KtG(v.toggleFlip())}),x.qZA()}2&j&&x.Q6J("card",y.$implicit)}let Nt=(()=>{class j{constructor(){this.cards=[new ge(1,1),new ge(2,2),new ge(3,3),new ge(4,5),new ge(1,8),new ge(2,13),new ge(3,21),new ge(4,34),new ge(1,55),new ge(2,89)]}static#e=this.\u0275fac=function(h){return new(h||j)};static#t=this.\u0275cmp=x.Xpm({type:j,selectors:[["app-votes"]],decls:2,vars:1,consts:[[1,"votes"],["class","card",3,"card","click",4,"ngFor","ngForOf"],[1,"card",3,"card","click"]],template:function(h,A){1&h&&(x.TgZ(0,"div",0),x.YNc(1,It,1,1,"app-card",1),x.qZA()),2&h&&(x.xp6(1),x.Q6J("ngForOf",A.cards))},dependencies:[D.sg,Wn],styles:[".votes[_ngcontent-%COMP%]{display:flex}.votes[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100px}"]})}return j})();function he(j,y){if(1&j&&(x.TgZ(0,"div",1)(1,"span",2),x._uU(2),x.qZA(),x._UZ(3,"app-tasks",3)(4,"app-votes"),x.qZA()),2&j){const T=x.oxw();x.xp6(2),x.hij(" ",T.room.name," "),x.xp6(1),x.Q6J("room",T.room)}}const ve=[{path:"rooms",component:Ne},{path:"room/:id",component:(()=>{class j{constructor(T,h){this.activatedRoute=T,this.roomService=h,this.roomId=this.activatedRoute.snapshot.paramMap.get("id")}ngOnInit(){this.subscription=this.roomService.listenerRoom(this.roomId).subscribe(T=>{this.room=T})}ngOnDestroy(){this.subscription?.unsubscribe()}static#e=this.\u0275fac=function(h){return new(h||j)(x.Y36(oe.gz),x.Y36(me))};static#t=this.\u0275cmp=x.Xpm({type:j,selectors:[["app-room"]],decls:1,vars:1,consts:[["class","current-room",4,"ngIf"],[1,"current-room"],[1,"room-name"],[3,"room"]],template:function(h,A){1&h&&x.YNc(0,he,5,2,"div",0),2&h&&x.Q6J("ngIf",A.room)},dependencies:[D.O5,re,Nt],styles:[".current-room[_ngcontent-%COMP%]{display:flex;flex-flow:column;justify-content:center;align-items:center}.current-room[_ngcontent-%COMP%]   .room-name[_ngcontent-%COMP%]{font-size:3rem;font-weight:600;margin-bottom:.5rem}"]})}return j})()},{path:"**",redirectTo:"rooms"}];let fe=(()=>{class j{static#e=this.\u0275fac=function(h){return new(h||j)};static#t=this.\u0275mod=x.oAB({type:j});static#n=this.\u0275inj=x.cJS({imports:[oe.Bz.forChild(ve),oe.Bz]})}return j})();var be=$(6593);function mt(j){return new x.vHH(3e3,!1)}function ln(j){switch(j.length){case 0:return new ct;case 1:return j[0];default:return new nr(j)}}function gi(j,y,T=new Map,h=new Map){const A=[],v=[];let M=-1,B=null;if(y.forEach(X=>{const se=X.get("offset"),Ue=se==M,dt=Ue&&B||new Map;X.forEach((Vt,yt)=>{let nt=yt,Mt=Vt;if("offset"!==yt)switch(nt=j.normalizePropertyName(nt,A),Mt){case"!":Mt=T.get(yt);break;case We:Mt=h.get(yt);break;default:Mt=j.normalizeStyleValue(yt,nt,Mt,A)}dt.set(nt,Mt)}),Ue||v.push(dt),B=dt,M=se}),A.length)throw function mr(j){return new x.vHH(3502,!1)}();return v}function zi(j,y,T,h){switch(y){case"start":j.onStart(()=>h(T&&Zr(T,"start",j)));break;case"done":j.onDone(()=>h(T&&Zr(T,"done",j)));break;case"destroy":j.onDestroy(()=>h(T&&Zr(T,"destroy",j)))}}function Zr(j,y,T){const v=ce(j.element,j.triggerName,j.fromState,j.toState,y||j.phaseName,T.totalTime??j.totalTime,!!T.disabled),M=j._data;return null!=M&&(v._data=M),v}function ce(j,y,T,h,A="",v=0,M){return{element:j,triggerName:y,fromState:T,toState:h,phaseName:A,totalTime:v,disabled:!!M}}function q(j,y,T){let h=j.get(y);return h||j.set(y,h=T),h}function Y(j){const y=j.indexOf(":");return[j.substring(1,y),j.slice(y+1)]}const Z=(()=>typeof document>"u"?null:document.documentElement)();function K(j){const y=j.parentNode||j.host||null;return y===Z?null:y}let Ge=null,lt=!1;function Ft(j,y){for(;y;){if(y===j)return!0;y=K(y)}return!1}function qn(j,y,T){if(T)return Array.from(j.querySelectorAll(y));const h=j.querySelector(y);return h?[h]:[]}let Qr=(()=>{class j{validateStyleProperty(T){return function Qt(j){Ge||(Ge=function _t(){return typeof document<"u"?document.body:null}()||{},lt=!!Ge.style&&"WebkitAppearance"in Ge.style);let y=!0;return Ge.style&&!function Ee(j){return"ebkit"==j.substring(1,6)}(j)&&(y=j in Ge.style,!y&&lt&&(y="Webkit"+j.charAt(0).toUpperCase()+j.slice(1)in Ge.style)),y}(T)}matchesElement(T,h){return!1}containsElement(T,h){return Ft(T,h)}getParentElement(T){return K(T)}query(T,h,A){return qn(T,h,A)}computeStyle(T,h,A){return A||""}animate(T,h,A,v,M,B=[],X){return new ct(A,v)}static#e=this.\u0275fac=function(h){return new(h||j)};static#t=this.\u0275prov=x.Yz7({token:j,factory:j.\u0275fac})}return j})(),ks=(()=>{class j{static#e=this.NOOP=new Qr}return j})();const Be=1e3,Bt="ng-enter",Pt="ng-leave",vt="ng-trigger",fn=".ng-trigger",rr="ng-animating",ir=".ng-animating";function si(j){if("number"==typeof j)return j;const y=j.match(/^(-?[\.\d]+)(m?s)/);return!y||y.length<2?0:Fr(parseFloat(y[1]),y[2])}function Fr(j,y){return"s"===y?j*Be:j}function Yr(j,y,T){return j.hasOwnProperty("duration")?j:function Xs(j,y,T){let A,v=0,M="";if("string"==typeof j){const B=j.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===B)return y.push(mt()),{duration:0,delay:0,easing:""};A=Fr(parseFloat(B[1]),B[2]);const X=B[3];null!=X&&(v=Fr(parseFloat(X),B[4]));const se=B[5];se&&(M=se)}else A=j;if(!T){let B=!1,X=y.length;A<0&&(y.push(function it(){return new x.vHH(3100,!1)}()),B=!0),v<0&&(y.push(function kn(){return new x.vHH(3101,!1)}()),B=!0),B&&y.splice(X,0,mt())}return{duration:A,delay:v,easing:M}}(j,y,T)}function Yi(j,y={}){return Object.keys(j).forEach(T=>{y[T]=j[T]}),y}function Io(j){const y=new Map;return Object.keys(j).forEach(T=>{y.set(T,j[T])}),y}function an(j,y=new Map,T){if(T)for(let[h,A]of T)y.set(h,A);for(let[h,A]of j)y.set(h,A);return y}function _r(j,y,T){y.forEach((h,A)=>{const v=eo(A);T&&!T.has(A)&&T.set(A,j.style[v]),j.style[v]=h})}function Ni(j,y){y.forEach((T,h)=>{const A=eo(h);j.style[A]=""})}function Fs(j){return Array.isArray(j)?1==j.length?j[0]:Lt(j):j}const xi=new RegExp("{{\\s*(.+?)\\s*}}","g");function Vs(j){let y=[];if("string"==typeof j){let T;for(;T=xi.exec(j);)y.push(T[1]);xi.lastIndex=0}return y}function Jr(j,y,T){const h=j.toString(),A=h.replace(xi,(v,M)=>{let B=y[M];return null==B&&(T.push(function rn(j){return new x.vHH(3003,!1)}()),B=""),B.toString()});return A==h?j:A}function Ji(j){const y=[];let T=j.next();for(;!T.done;)y.push(T.value),T=j.next();return y}const Ds=/-+([a-z0-9])/g;function eo(j){return j.replace(Ds,(...y)=>y[1].toUpperCase())}function jn(j,y,T){switch(y.type){case 7:return j.visitTrigger(y,T);case 0:return j.visitState(y,T);case 1:return j.visitTransition(y,T);case 2:return j.visitSequence(y,T);case 3:return j.visitGroup(y,T);case 4:return j.visitAnimate(y,T);case 5:return j.visitKeyframes(y,T);case 6:return j.visitStyle(y,T);case 8:return j.visitReference(y,T);case 9:return j.visitAnimateChild(y,T);case 10:return j.visitAnimateRef(y,T);case 11:return j.visitQuery(y,T);case 12:return j.visitStagger(y,T);default:throw function Yt(j){return new x.vHH(3004,!1)}()}}function to(j,y){return window.getComputedStyle(j)[y]}const _i="*";function Xr(j,y){const T=[];return"string"==typeof j?j.split(/\s*,\s*/).forEach(h=>function js(j,y,T){if(":"==j[0]){const X=function Jo(j,y){switch(j){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(T,h)=>parseFloat(h)>parseFloat(T);case":decrement":return(T,h)=>parseFloat(h)<parseFloat(T);default:return y.push(function Fn(j){return new x.vHH(3016,!1)}()),"* => *"}}(j,T);if("function"==typeof X)return void y.push(X);j=X}const h=j.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==h||h.length<4)return T.push(function jt(j){return new x.vHH(3015,!1)}()),y;const A=h[1],v=h[2],M=h[3];y.push(Pr(A,M));"<"==v[0]&&!(A==_i&&M==_i)&&y.push(Pr(M,A))}(h,T,y)):T.push(j),T}const Ci=new Set(["true","1"]),yn=new Set(["false","0"]);function Pr(j,y){const T=Ci.has(j)||yn.has(j),h=Ci.has(y)||yn.has(y);return(A,v)=>{let M=j==_i||j==A,B=y==_i||y==v;return!M&&T&&"boolean"==typeof A&&(M=A?Ci.has(j):yn.has(j)),!B&&h&&"boolean"==typeof v&&(B=v?Ci.has(y):yn.has(y)),M&&B}}const Vr=new RegExp("s*:selfs*,?","g");function ei(j,y,T,h){return new ro(j).build(y,T,h)}class ro{constructor(y){this._driver=y}build(y,T,h){const A=new Ss(T);return this._resetContextStyleTimingState(A),jn(this,Fs(y),A)}_resetContextStyleTimingState(y){y.currentQuerySelector="",y.collectedStyles=new Map,y.collectedStyles.set("",new Map),y.currentTime=0}visitTrigger(y,T){let h=T.queryCount=0,A=T.depCount=0;const v=[],M=[];return"@"==y.name.charAt(0)&&T.errors.push(function Dn(){return new x.vHH(3006,!1)}()),y.definitions.forEach(B=>{if(this._resetContextStyleTimingState(T),0==B.type){const X=B,se=X.name;se.toString().split(/\s*,\s*/).forEach(Ue=>{X.name=Ue,v.push(this.visitState(X,T))}),X.name=se}else if(1==B.type){const X=this.visitTransition(B,T);h+=X.queryCount,A+=X.depCount,M.push(X)}else T.errors.push(function Rn(){return new x.vHH(3007,!1)}())}),{type:7,name:y.name,states:v,transitions:M,queryCount:h,depCount:A,options:null}}visitState(y,T){const h=this.visitStyle(y.styles,T),A=y.options&&y.options.params||null;if(h.containsDynamicStyles){const v=new Set,M=A||{};h.styles.forEach(B=>{B instanceof Map&&B.forEach(X=>{Vs(X).forEach(se=>{M.hasOwnProperty(se)||v.add(se)})})}),v.size&&(Ji(v.values()),T.errors.push(function Bn(j,y){return new x.vHH(3008,!1)}()))}return{type:0,name:y.name,style:h,options:A?{params:A}:null}}visitTransition(y,T){T.queryCount=0,T.depCount=0;const h=jn(this,Fs(y.animation),T);return{type:1,matchers:Xr(y.expr,T.errors),animation:h,queryCount:T.queryCount,depCount:T.depCount,options:en(y.options)}}visitSequence(y,T){return{type:2,steps:y.steps.map(h=>jn(this,h,T)),options:en(y.options)}}visitGroup(y,T){const h=T.currentTime;let A=0;const v=y.steps.map(M=>{T.currentTime=h;const B=jn(this,M,T);return A=Math.max(A,T.currentTime),B});return T.currentTime=A,{type:3,steps:v,options:en(y.options)}}visitAnimate(y,T){const h=function Et(j,y){if(j.hasOwnProperty("duration"))return j;if("number"==typeof j)return bn(Yr(j,y).duration,0,"");const T=j;if(T.split(/\s+/).some(v=>"{"==v.charAt(0)&&"{"==v.charAt(1))){const v=bn(0,0,"");return v.dynamic=!0,v.strValue=T,v}const A=Yr(T,y);return bn(A.duration,A.delay,A.easing)}(y.timings,T.errors);T.currentAnimateTimings=h;let A,v=y.styles?y.styles:Te({});if(5==v.type)A=this.visitKeyframes(v,T);else{let M=y.styles,B=!1;if(!M){B=!0;const se={};h.easing&&(se.easing=h.easing),M=Te(se)}T.currentTime+=h.duration+h.delay;const X=this.visitStyle(M,T);X.isEmptyStep=B,A=X}return T.currentAnimateTimings=null,{type:4,timings:h,style:A,options:null}}visitStyle(y,T){const h=this._makeStyleAst(y,T);return this._validateStyleAst(h,T),h}_makeStyleAst(y,T){const h=[],A=Array.isArray(y.styles)?y.styles:[y.styles];for(let B of A)"string"==typeof B?B===We?h.push(B):T.errors.push(new x.vHH(3002,!1)):h.push(Io(B));let v=!1,M=null;return h.forEach(B=>{if(B instanceof Map&&(B.has("easing")&&(M=B.get("easing"),B.delete("easing")),!v))for(let X of B.values())if(X.toString().indexOf("{{")>=0){v=!0;break}}),{type:6,styles:h,easing:M,offset:y.offset,containsDynamicStyles:v,options:null}}_validateStyleAst(y,T){const h=T.currentAnimateTimings;let A=T.currentTime,v=T.currentTime;h&&v>0&&(v-=h.duration+h.delay),y.styles.forEach(M=>{"string"!=typeof M&&M.forEach((B,X)=>{const se=T.collectedStyles.get(T.currentQuerySelector),Ue=se.get(X);let dt=!0;Ue&&(v!=A&&v>=Ue.startTime&&A<=Ue.endTime&&(T.errors.push(function Rr(j,y,T,h,A){return new x.vHH(3010,!1)}()),dt=!1),v=Ue.startTime),dt&&se.set(X,{startTime:v,endTime:A}),T.options&&function To(j,y,T){const h=y.params||{},A=Vs(j);A.length&&A.forEach(v=>{h.hasOwnProperty(v)||T.push(function wt(j){return new x.vHH(3001,!1)}())})}(B,T.options,T.errors)})})}visitKeyframes(y,T){const h={type:5,styles:[],options:null};if(!T.currentAnimateTimings)return T.errors.push(function Ir(){return new x.vHH(3011,!1)}()),h;let v=0;const M=[];let B=!1,X=!1,se=0;const Ue=y.steps.map(wn=>{const Zn=this._makeStyleAst(wn,T);let Jn=null!=Zn.offset?Zn.offset:function ur(j){if("string"==typeof j)return null;let y=null;if(Array.isArray(j))j.forEach(T=>{if(T instanceof Map&&T.has("offset")){const h=T;y=parseFloat(h.get("offset")),h.delete("offset")}});else if(j instanceof Map&&j.has("offset")){const T=j;y=parseFloat(T.get("offset")),T.delete("offset")}return y}(Zn.styles),sr=0;return null!=Jn&&(v++,sr=Zn.offset=Jn),X=X||sr<0||sr>1,B=B||sr<se,se=sr,M.push(sr),Zn});X&&T.errors.push(function Wr(){return new x.vHH(3012,!1)}()),B&&T.errors.push(function qr(){return new x.vHH(3200,!1)}());const dt=y.steps.length;let Vt=0;v>0&&v<dt?T.errors.push(function fi(){return new x.vHH(3202,!1)}()):0==v&&(Vt=1/(dt-1));const yt=dt-1,nt=T.currentTime,Mt=T.currentAnimateTimings,sn=Mt.duration;return Ue.forEach((wn,Zn)=>{const Jn=Vt>0?Zn==yt?1:Vt*Zn:M[Zn],sr=Jn*sn;T.currentTime=nt+Mt.delay+sr,Mt.duration=sr,this._validateStyleAst(wn,T),wn.offset=Jn,h.styles.push(wn)}),h}visitReference(y,T){return{type:8,animation:jn(this,Fs(y.animation),T),options:en(y.options)}}visitAnimateChild(y,T){return T.depCount++,{type:9,options:en(y.options)}}visitAnimateRef(y,T){return{type:10,animation:this.visitReference(y.animation,T),options:en(y.options)}}visitQuery(y,T){const h=T.currentQuerySelector,A=y.options||{};T.queryCount++,T.currentQuery=y;const[v,M]=function Cs(j){const y=!!j.split(/\s*,\s*/).find(T=>":self"==T);return y&&(j=j.replace(Vr,"")),j=j.replace(/@\*/g,fn).replace(/@\w+/g,T=>fn+"-"+T.slice(1)).replace(/:animating/g,ir),[j,y]}(y.selector);T.currentQuerySelector=h.length?h+" "+v:v,q(T.collectedStyles,T.currentQuerySelector,new Map);const B=jn(this,Fs(y.animation),T);return T.currentQuery=null,T.currentQuerySelector=h,{type:11,selector:v,limit:A.limit||0,optional:!!A.optional,includeSelf:M,animation:B,originalSelector:y.selector,options:en(y.options)}}visitStagger(y,T){T.currentQuery||T.errors.push(function st(){return new x.vHH(3013,!1)}());const h="full"===y.timings?{duration:0,delay:0,easing:"full"}:Yr(y.timings,T.errors,!0);return{type:12,animation:jn(this,Fs(y.animation),T),timings:h,options:null}}}class Ss{constructor(y){this.errors=y,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function en(j){return j?(j=Yi(j)).params&&(j.params=function Uo(j){return j?Yi(j):null}(j.params)):j={},j}function bn(j,y,T){return{duration:j,delay:y,easing:T}}function Tr(j,y,T,h,A,v,M=null,B=!1){return{type:1,element:j,keyframes:y,preStyleProps:T,postStyleProps:h,duration:A,delay:v,totalTime:A+v,easing:M,subTimeline:B}}class Hr{constructor(){this._map=new Map}get(y){return this._map.get(y)||[]}append(y,T){let h=this._map.get(y);h||this._map.set(y,h=[]),h.push(...T)}has(y){return this._map.has(y)}clear(){this._map.clear()}}const hr=new RegExp(":enter","g"),vi=new RegExp(":leave","g");function Gt(j,y,T,h,A,v=new Map,M=new Map,B,X,se=[]){return(new Oi).buildKeyframes(j,y,T,h,A,v,M,B,X,se)}class Oi{buildKeyframes(y,T,h,A,v,M,B,X,se,Ue=[]){se=se||new Hr;const dt=new Ur(y,T,se,A,v,Ue,[]);dt.options=X;const Vt=X.delay?si(X.delay):0;dt.currentTimeline.delayNextStep(Vt),dt.currentTimeline.setStyles([M],null,dt.errors,X),jn(this,h,dt);const yt=dt.timelines.filter(nt=>nt.containsAnimation());if(yt.length&&B.size){let nt;for(let Mt=yt.length-1;Mt>=0;Mt--){const sn=yt[Mt];if(sn.element===T){nt=sn;break}}nt&&!nt.allowOnlyTimelineStyles()&&nt.setStyles([B],null,dt.errors,X)}return yt.length?yt.map(nt=>nt.buildKeyframes()):[Tr(T,[],[],[],0,Vt,"",!1)]}visitTrigger(y,T){}visitState(y,T){}visitTransition(y,T){}visitAnimateChild(y,T){const h=T.subInstructions.get(T.element);if(h){const A=T.createSubContext(y.options),v=T.currentTimeline.currentTime,M=this._visitSubInstructions(h,A,A.options);v!=M&&T.transformIntoNewTimeline(M)}T.previousNode=y}visitAnimateRef(y,T){const h=T.createSubContext(y.options);h.transformIntoNewTimeline(),this._applyAnimationRefDelays([y.options,y.animation.options],T,h),this.visitReference(y.animation,h),T.transformIntoNewTimeline(h.currentTimeline.currentTime),T.previousNode=y}_applyAnimationRefDelays(y,T,h){for(const A of y){const v=A?.delay;if(v){const M="number"==typeof v?v:si(Jr(v,A?.params??{},T.errors));h.delayNextStep(M)}}}_visitSubInstructions(y,T,h){let v=T.currentTimeline.currentTime;const M=null!=h.duration?si(h.duration):null,B=null!=h.delay?si(h.delay):null;return 0!==M&&y.forEach(X=>{const se=T.appendInstructionToTimeline(X,M,B);v=Math.max(v,se.duration+se.delay)}),v}visitReference(y,T){T.updateOptions(y.options,!0),jn(this,y.animation,T),T.previousNode=y}visitSequence(y,T){const h=T.subContextCount;let A=T;const v=y.options;if(v&&(v.params||v.delay)&&(A=T.createSubContext(v),A.transformIntoNewTimeline(),null!=v.delay)){6==A.previousNode.type&&(A.currentTimeline.snapshotCurrentStyles(),A.previousNode=Xi);const M=si(v.delay);A.delayNextStep(M)}y.steps.length&&(y.steps.forEach(M=>jn(this,M,A)),A.currentTimeline.applyStylesToKeyframe(),A.subContextCount>h&&A.transformIntoNewTimeline()),T.previousNode=y}visitGroup(y,T){const h=[];let A=T.currentTimeline.currentTime;const v=y.options&&y.options.delay?si(y.options.delay):0;y.steps.forEach(M=>{const B=T.createSubContext(y.options);v&&B.delayNextStep(v),jn(this,M,B),A=Math.max(A,B.currentTimeline.currentTime),h.push(B.currentTimeline)}),h.forEach(M=>T.currentTimeline.mergeTimelineCollectedStyles(M)),T.transformIntoNewTimeline(A),T.previousNode=y}_visitTiming(y,T){if(y.dynamic){const h=y.strValue;return Yr(T.params?Jr(h,T.params,T.errors):h,T.errors)}return{duration:y.duration,delay:y.delay,easing:y.easing}}visitAnimate(y,T){const h=T.currentAnimateTimings=this._visitTiming(y.timings,T),A=T.currentTimeline;h.delay&&(T.incrementTime(h.delay),A.snapshotCurrentStyles());const v=y.style;5==v.type?this.visitKeyframes(v,T):(T.incrementTime(h.duration),this.visitStyle(v,T),A.applyStylesToKeyframe()),T.currentAnimateTimings=null,T.previousNode=y}visitStyle(y,T){const h=T.currentTimeline,A=T.currentAnimateTimings;!A&&h.hasCurrentStyleProperties()&&h.forwardFrame();const v=A&&A.easing||y.easing;y.isEmptyStep?h.applyEmptyStep(v):h.setStyles(y.styles,v,T.errors,T.options),T.previousNode=y}visitKeyframes(y,T){const h=T.currentAnimateTimings,A=T.currentTimeline.duration,v=h.duration,B=T.createSubContext().currentTimeline;B.easing=h.easing,y.styles.forEach(X=>{B.forwardTime((X.offset||0)*v),B.setStyles(X.styles,X.easing,T.errors,T.options),B.applyStylesToKeyframe()}),T.currentTimeline.mergeTimelineCollectedStyles(B),T.transformIntoNewTimeline(A+v),T.previousNode=y}visitQuery(y,T){const h=T.currentTimeline.currentTime,A=y.options||{},v=A.delay?si(A.delay):0;v&&(6===T.previousNode.type||0==h&&T.currentTimeline.hasCurrentStyleProperties())&&(T.currentTimeline.snapshotCurrentStyles(),T.previousNode=Xi);let M=h;const B=T.invokeQuery(y.selector,y.originalSelector,y.limit,y.includeSelf,!!A.optional,T.errors);T.currentQueryTotal=B.length;let X=null;B.forEach((se,Ue)=>{T.currentQueryIndex=Ue;const dt=T.createSubContext(y.options,se);v&&dt.delayNextStep(v),se===T.element&&(X=dt.currentTimeline),jn(this,y.animation,dt),dt.currentTimeline.applyStylesToKeyframe(),M=Math.max(M,dt.currentTimeline.currentTime)}),T.currentQueryIndex=0,T.currentQueryTotal=0,T.transformIntoNewTimeline(M),X&&(T.currentTimeline.mergeTimelineCollectedStyles(X),T.currentTimeline.snapshotCurrentStyles()),T.previousNode=y}visitStagger(y,T){const h=T.parentContext,A=T.currentTimeline,v=y.timings,M=Math.abs(v.duration),B=M*(T.currentQueryTotal-1);let X=M*T.currentQueryIndex;switch(v.duration<0?"reverse":v.easing){case"reverse":X=B-X;break;case"full":X=h.currentStaggerTime}const Ue=T.currentTimeline;X&&Ue.delayNextStep(X);const dt=Ue.currentTime;jn(this,y.animation,T),T.previousNode=y,h.currentStaggerTime=A.currentTime-dt+(A.startTime-h.currentTimeline.startTime)}}const Xi={};class Ur{constructor(y,T,h,A,v,M,B,X){this._driver=y,this.element=T,this.subInstructions=h,this._enterClassName=A,this._leaveClassName=v,this.errors=M,this.timelines=B,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Xi,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=X||new cr(this._driver,T,0),B.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(y,T){if(!y)return;const h=y;let A=this.options;null!=h.duration&&(A.duration=si(h.duration)),null!=h.delay&&(A.delay=si(h.delay));const v=h.params;if(v){let M=A.params;M||(M=this.options.params={}),Object.keys(v).forEach(B=>{(!T||!M.hasOwnProperty(B))&&(M[B]=Jr(v[B],M,this.errors))})}}_copyOptions(){const y={};if(this.options){const T=this.options.params;if(T){const h=y.params={};Object.keys(T).forEach(A=>{h[A]=T[A]})}}return y}createSubContext(y=null,T,h){const A=T||this.element,v=new Ur(this._driver,A,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(A,h||0));return v.previousNode=this.previousNode,v.currentAnimateTimings=this.currentAnimateTimings,v.options=this._copyOptions(),v.updateOptions(y),v.currentQueryIndex=this.currentQueryIndex,v.currentQueryTotal=this.currentQueryTotal,v.parentContext=this,this.subContextCount++,v}transformIntoNewTimeline(y){return this.previousNode=Xi,this.currentTimeline=this.currentTimeline.fork(this.element,y),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(y,T,h){const A={duration:T??y.duration,delay:this.currentTimeline.currentTime+(h??0)+y.delay,easing:""},v=new Vn(this._driver,y.element,y.keyframes,y.preStyleProps,y.postStyleProps,A,y.stretchStartingKeyframe);return this.timelines.push(v),A}incrementTime(y){this.currentTimeline.forwardTime(this.currentTimeline.duration+y)}delayNextStep(y){y>0&&this.currentTimeline.delayNextStep(y)}invokeQuery(y,T,h,A,v,M){let B=[];if(A&&B.push(this.element),y.length>0){y=(y=y.replace(hr,"."+this._enterClassName)).replace(vi,"."+this._leaveClassName);let se=this._driver.query(this.element,y,1!=h);0!==h&&(se=h<0?se.slice(se.length+h,se.length):se.slice(0,h)),B.push(...se)}return!v&&0==B.length&&M.push(function on(j){return new x.vHH(3014,!1)}()),B}}class cr{constructor(y,T,h,A){this._driver=y,this.element=T,this.startTime=h,this._elementTimelineStylesLookup=A,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(T),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(T,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(y){const T=1===this._keyframes.size&&this._pendingStyles.size;this.duration||T?(this.forwardTime(this.currentTime+y),T&&this.snapshotCurrentStyles()):this.startTime+=y}fork(y,T){return this.applyStylesToKeyframe(),new cr(this._driver,y,T||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(y){this.applyStylesToKeyframe(),this.duration=y,this._loadKeyframe()}_updateStyle(y,T){this._localTimelineStyles.set(y,T),this._globalTimelineStyles.set(y,T),this._styleSummary.set(y,{time:this.currentTime,value:T})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(y){y&&this._previousKeyframe.set("easing",y);for(let[T,h]of this._globalTimelineStyles)this._backFill.set(T,h||We),this._currentKeyframe.set(T,We);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(y,T,h,A){T&&this._previousKeyframe.set("easing",T);const v=A&&A.params||{},M=function zr(j,y){const T=new Map;let h;return j.forEach(A=>{if("*"===A){h=h||y.keys();for(let v of h)T.set(v,We)}else an(A,T)}),T}(y,this._globalTimelineStyles);for(let[B,X]of M){const se=Jr(X,v,h);this._pendingStyles.set(B,se),this._localTimelineStyles.has(B)||this._backFill.set(B,this._globalTimelineStyles.get(B)??We),this._updateStyle(B,se)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((y,T)=>{this._currentKeyframe.set(T,y)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((y,T)=>{this._currentKeyframe.has(T)||this._currentKeyframe.set(T,y)}))}snapshotCurrentStyles(){for(let[y,T]of this._localTimelineStyles)this._pendingStyles.set(y,T),this._updateStyle(y,T)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const y=[];for(let T in this._currentKeyframe)y.push(T);return y}mergeTimelineCollectedStyles(y){y._styleSummary.forEach((T,h)=>{const A=this._styleSummary.get(h);(!A||T.time>A.time)&&this._updateStyle(h,T.value)})}buildKeyframes(){this.applyStylesToKeyframe();const y=new Set,T=new Set,h=1===this._keyframes.size&&0===this.duration;let A=[];this._keyframes.forEach((B,X)=>{const se=an(B,new Map,this._backFill);se.forEach((Ue,dt)=>{"!"===Ue?y.add(dt):Ue===We&&T.add(dt)}),h||se.set("offset",X/this.duration),A.push(se)});const v=y.size?Ji(y.values()):[],M=T.size?Ji(T.values()):[];if(h){const B=A[0],X=new Map(B);B.set("offset",0),X.set("offset",1),A=[B,X]}return Tr(this.element,A,v,M,this.duration,this.startTime,this.easing,!1)}}class Vn extends cr{constructor(y,T,h,A,v,M,B=!1){super(y,T,M.delay),this.keyframes=h,this.preStyleProps=A,this.postStyleProps=v,this._stretchStartingKeyframe=B,this.timings={duration:M.duration,delay:M.delay,easing:M.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let y=this.keyframes,{delay:T,duration:h,easing:A}=this.timings;if(this._stretchStartingKeyframe&&T){const v=[],M=h+T,B=T/M,X=an(y[0]);X.set("offset",0),v.push(X);const se=an(y[0]);se.set("offset",es(B)),v.push(se);const Ue=y.length-1;for(let dt=1;dt<=Ue;dt++){let Vt=an(y[dt]);const yt=Vt.get("offset");Vt.set("offset",es((T+yt*h)/M)),v.push(Vt)}h=M,T=0,A="",y=v}return Tr(this.element,y,this.preStyleProps,this.postStyleProps,h,T,A,!0)}}function es(j,y=3){const T=Math.pow(10,y-1);return Math.round(j*T)/T}class io{}const ms=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class _s extends io{normalizePropertyName(y,T){return eo(y)}normalizeStyleValue(y,T,h,A){let v="";const M=h.toString().trim();if(ms.has(T)&&0!==h&&"0"!==h)if("number"==typeof h)v="px";else{const B=h.match(/^[+-]?[\d\.]+([a-z]*)$/);B&&0==B[1].length&&A.push(function Ln(j,y){return new x.vHH(3005,!1)}())}return M+v}}function ki(j,y,T,h,A,v,M,B,X,se,Ue,dt,Vt){return{type:0,element:j,triggerName:y,isRemovalTransition:A,fromState:T,fromStyles:v,toState:h,toStyles:M,timelines:B,queriedElements:X,preStyleProps:se,postStyleProps:Ue,totalTime:dt,errors:Vt}}const An={};class Xo{constructor(y,T,h){this._triggerName=y,this.ast=T,this._stateStyles=h}match(y,T,h,A){return function Ao(j,y,T,h,A){return j.some(v=>v(y,T,h,A))}(this.ast.matchers,y,T,h,A)}buildStyles(y,T,h){let A=this._stateStyles.get("*");return void 0!==y&&(A=this._stateStyles.get(y?.toString())||A),A?A.buildStyles(T,h):new Map}build(y,T,h,A,v,M,B,X,se,Ue){const dt=[],Vt=this.ast.options&&this.ast.options.params||An,nt=this.buildStyles(h,B&&B.params||An,dt),Mt=X&&X.params||An,sn=this.buildStyles(A,Mt,dt),wn=new Set,Zn=new Map,Jn=new Map,sr="void"===A,Ti={params:Li(Mt,Vt),delay:this.ast.options?.delay},Ki=Ue?[]:Gt(y,T,this.ast.animation,v,M,nt,sn,Ti,se,dt);let zn=0;if(Ki.forEach(bs=>{zn=Math.max(bs.duration+bs.delay,zn)}),dt.length)return ki(T,this._triggerName,h,A,sr,nt,sn,[],[],Zn,Jn,zn,dt);Ki.forEach(bs=>{const Un=bs.element,au=q(Zn,Un,new Set);bs.preStyleProps.forEach(Pi=>au.add(Pi));const Po=q(Jn,Un,new Set);bs.postStyleProps.forEach(Pi=>Po.add(Pi)),Un!==T&&wn.add(Un)});const Ri=Ji(wn.values());return ki(T,this._triggerName,h,A,sr,nt,sn,Ki,Ri,Zn,Jn,zn)}}function Li(j,y){const T=Yi(y);for(const h in j)j.hasOwnProperty(h)&&null!=j[h]&&(T[h]=j[h]);return T}class ns{constructor(y,T,h){this.styles=y,this.defaultParams=T,this.normalizer=h}buildStyles(y,T){const h=new Map,A=Yi(this.defaultParams);return Object.keys(y).forEach(v=>{const M=y[v];null!==M&&(A[v]=M)}),this.styles.styles.forEach(v=>{"string"!=typeof v&&v.forEach((M,B)=>{M&&(M=Jr(M,A,T));const X=this.normalizer.normalizePropertyName(B,T);M=this.normalizer.normalizeStyleValue(B,X,M,T),h.set(B,M)})}),h}}class cs{constructor(y,T,h){this.name=y,this.ast=T,this._normalizer=h,this.transitionFactories=[],this.states=new Map,T.states.forEach(A=>{this.states.set(A.name,new ns(A.style,A.options&&A.options.params||{},h))}),Ta(this.states,"true","1"),Ta(this.states,"false","0"),T.transitions.forEach(A=>{this.transitionFactories.push(new Xo(y,A,this.states))}),this.fallbackTransition=function ai(j,y,T){return new Xo(j,{type:1,animation:{type:2,steps:[],options:null},matchers:[(M,B)=>!0],options:null,queryCount:0,depCount:0},y)}(y,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(y,T,h,A){return this.transitionFactories.find(M=>M.match(y,T,h,A))||null}matchStyles(y,T,h){return this.fallbackTransition.buildStyles(y,T,h)}}function Ta(j,y,T){j.has(y)?j.has(T)||j.set(T,j.get(y)):j.has(T)&&j.set(y,j.get(T))}const Fi=new Hr;class Vi{constructor(y,T,h){this.bodyNode=y,this._driver=T,this._normalizer=h,this._animations=new Map,this._playersById=new Map,this.players=[]}register(y,T){const h=[],v=ei(this._driver,T,h,[]);if(h.length)throw function Js(j){return new x.vHH(3503,!1)}();this._animations.set(y,v)}_buildPlayer(y,T,h){const A=y.element,v=gi(this._normalizer,y.keyframes,T,h);return this._driver.animate(A,v,y.duration,y.delay,y.easing,[],!0)}create(y,T,h={}){const A=[],v=this._animations.get(y);let M;const B=new Map;if(v?(M=Gt(this._driver,T,v,Bt,Pt,new Map,new Map,h,Fi,A),M.forEach(Ue=>{const dt=q(B,Ue.element,new Map);Ue.postStyleProps.forEach(Vt=>dt.set(Vt,null))})):(A.push(function Ct(){return new x.vHH(3300,!1)}()),M=[]),A.length)throw function os(j){return new x.vHH(3504,!1)}();B.forEach((Ue,dt)=>{Ue.forEach((Vt,yt)=>{Ue.set(yt,this._driver.computeStyle(dt,yt,We))})});const se=ln(M.map(Ue=>{const dt=B.get(Ue.element);return this._buildPlayer(Ue,new Map,dt)}));return this._playersById.set(y,se),se.onDestroy(()=>this.destroy(y)),this.players.push(se),se}destroy(y){const T=this._getPlayer(y);T.destroy(),this._playersById.delete(y);const h=this.players.indexOf(T);h>=0&&this.players.splice(h,1)}_getPlayer(y){const T=this._playersById.get(y);if(!T)throw function gn(j){return new x.vHH(3301,!1)}();return T}listen(y,T,h,A){const v=ce(T,"","","");return zi(this._getPlayer(y),h,v,A),()=>{}}command(y,T,h,A){if("register"==h)return void this.register(y,A[0]);if("create"==h)return void this.create(y,T,A[0]||{});const v=this._getPlayer(y);switch(h){case"play":v.play();break;case"pause":v.pause();break;case"reset":v.reset();break;case"restart":v.restart();break;case"finish":v.finish();break;case"init":v.init();break;case"setPosition":v.setPosition(parseFloat(A[0]));break;case"destroy":this.destroy(y)}}}const ys="ng-animate-queued",$s="ng-animate-disabled",Cr=[],wa={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Wi={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ei="__ng_removed";class vs{get params(){return this.options.params}constructor(y,T=""){this.namespaceId=T;const h=y&&y.hasOwnProperty("value");if(this.value=function Qn(j){return j??null}(h?y.value:y),h){const v=Yi(y);delete v.value,this.options=v}else this.options={};this.options.params||(this.options.params={})}absorbOptions(y){const T=y.params;if(T){const h=this.options.params;Object.keys(T).forEach(A=>{null==h[A]&&(h[A]=T[A])})}}}const oo="void",jo=new vs(oo);class fr{constructor(y,T,h){this.id=y,this.hostElement=T,this._engine=h,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+y,Ii(T,this._hostClassName)}listen(y,T,h,A){if(!this._triggers.has(T))throw function kr(j,y){return new x.vHH(3302,!1)}();if(null==h||0==h.length)throw function Ar(j){return new x.vHH(3303,!1)}();if(!function ou(j){return"start"==j||"done"==j}(h))throw function Os(j,y){return new x.vHH(3400,!1)}();const v=q(this._elementListeners,y,[]),M={name:T,phase:h,callback:A};v.push(M);const B=q(this._engine.statesByElement,y,new Map);return B.has(T)||(Ii(y,vt),Ii(y,vt+"-"+T),B.set(T,jo)),()=>{this._engine.afterFlush(()=>{const X=v.indexOf(M);X>=0&&v.splice(X,1),this._triggers.has(T)||B.delete(T)})}}register(y,T){return!this._triggers.has(y)&&(this._triggers.set(y,T),!0)}_getTrigger(y){const T=this._triggers.get(y);if(!T)throw function pi(j){return new x.vHH(3401,!1)}();return T}trigger(y,T,h,A=!0){const v=this._getTrigger(T),M=new ao(this.id,T,y);let B=this._engine.statesByElement.get(y);B||(Ii(y,vt),Ii(y,vt+"-"+T),this._engine.statesByElement.set(y,B=new Map));let X=B.get(T);const se=new vs(h,this.id);if(!(h&&h.hasOwnProperty("value"))&&X&&se.absorbOptions(X.options),B.set(T,se),X||(X=jo),se.value!==oo&&X.value===se.value){if(!function rs(j,y){const T=Object.keys(j),h=Object.keys(y);if(T.length!=h.length)return!1;for(let A=0;A<T.length;A++){const v=T[A];if(!y.hasOwnProperty(v)||j[v]!==y[v])return!1}return!0}(X.params,se.params)){const Mt=[],sn=v.matchStyles(X.value,X.params,Mt),wn=v.matchStyles(se.value,se.params,Mt);Mt.length?this._engine.reportError(Mt):this._engine.afterFlush(()=>{Ni(y,sn),_r(y,wn)})}return}const Vt=q(this._engine.playersByElement,y,[]);Vt.forEach(Mt=>{Mt.namespaceId==this.id&&Mt.triggerName==T&&Mt.queued&&Mt.destroy()});let yt=v.matchTransition(X.value,se.value,y,se.params),nt=!1;if(!yt){if(!A)return;yt=v.fallbackTransition,nt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:y,triggerName:T,transition:yt,fromState:X,toState:se,player:M,isFallbackTransition:nt}),nt||(Ii(y,ys),M.onStart(()=>{Ro(y,ys)})),M.onDone(()=>{let Mt=this.players.indexOf(M);Mt>=0&&this.players.splice(Mt,1);const sn=this._engine.playersByElement.get(y);if(sn){let wn=sn.indexOf(M);wn>=0&&sn.splice(wn,1)}}),this.players.push(M),Vt.push(M),M}deregister(y){this._triggers.delete(y),this._engine.statesByElement.forEach(T=>T.delete(y)),this._elementListeners.forEach((T,h)=>{this._elementListeners.set(h,T.filter(A=>A.name!=y))})}clearElementCache(y){this._engine.statesByElement.delete(y),this._elementListeners.delete(y);const T=this._engine.playersByElement.get(y);T&&(T.forEach(h=>h.destroy()),this._engine.playersByElement.delete(y))}_signalRemovalForInnerTriggers(y,T){const h=this._engine.driver.query(y,fn,!0);h.forEach(A=>{if(A[Ei])return;const v=this._engine.fetchNamespacesByElement(A);v.size?v.forEach(M=>M.triggerLeaveAnimation(A,T,!1,!0)):this.clearElementCache(A)}),this._engine.afterFlushAnimationsDone(()=>h.forEach(A=>this.clearElementCache(A)))}triggerLeaveAnimation(y,T,h,A){const v=this._engine.statesByElement.get(y),M=new Map;if(v){const B=[];if(v.forEach((X,se)=>{if(M.set(se,X.value),this._triggers.has(se)){const Ue=this.trigger(y,se,oo,A);Ue&&B.push(Ue)}}),B.length)return this._engine.markElementAsRemoved(this.id,y,!0,T,M),h&&ln(B).onDone(()=>this._engine.processLeaveNode(y)),!0}return!1}prepareLeaveAnimationListeners(y){const T=this._elementListeners.get(y),h=this._engine.statesByElement.get(y);if(T&&h){const A=new Set;T.forEach(v=>{const M=v.name;if(A.has(M))return;A.add(M);const X=this._triggers.get(M).fallbackTransition,se=h.get(M)||jo,Ue=new vs(oo),dt=new ao(this.id,M,y);this._engine.totalQueuedPlayers++,this._queue.push({element:y,triggerName:M,transition:X,fromState:se,toState:Ue,player:dt,isFallbackTransition:!0})})}}removeNode(y,T){const h=this._engine;if(y.childElementCount&&this._signalRemovalForInnerTriggers(y,T),this.triggerLeaveAnimation(y,T,!0))return;let A=!1;if(h.totalAnimations){const v=h.players.length?h.playersByQueriedElement.get(y):[];if(v&&v.length)A=!0;else{let M=y;for(;M=M.parentNode;)if(h.statesByElement.get(M)){A=!0;break}}}if(this.prepareLeaveAnimationListeners(y),A)h.markElementAsRemoved(this.id,y,!1,T);else{const v=y[Ei];(!v||v===wa)&&(h.afterFlush(()=>this.clearElementCache(y)),h.destroyInnerAnimations(y),h._onRemovalComplete(y,T))}}insertNode(y,T){Ii(y,this._hostClassName)}drainQueuedTransitions(y){const T=[];return this._queue.forEach(h=>{const A=h.player;if(A.destroyed)return;const v=h.element,M=this._elementListeners.get(v);M&&M.forEach(B=>{if(B.name==h.triggerName){const X=ce(v,h.triggerName,h.fromState.value,h.toState.value);X._data=y,zi(h.player,B.phase,X,B.callback)}}),A.markedForDestroy?this._engine.afterFlush(()=>{A.destroy()}):T.push(h)}),this._queue=[],T.sort((h,A)=>{const v=h.transition.ast.depCount,M=A.transition.ast.depCount;return 0==v||0==M?v-M:this._engine.driver.containsElement(h.element,A.element)?1:-1})}destroy(y){this.players.forEach(T=>T.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,y)}}class $o{_onRemovalComplete(y,T){this.onRemovalComplete(y,T)}constructor(y,T,h){this.bodyNode=y,this.driver=T,this._normalizer=h,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(A,v)=>{}}get queuedPlayers(){const y=[];return this._namespaceList.forEach(T=>{T.players.forEach(h=>{h.queued&&y.push(h)})}),y}createNamespace(y,T){const h=new fr(y,T,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,T)?this._balanceNamespaceList(h,T):(this.newHostElements.set(T,h),this.collectEnterElement(T)),this._namespaceLookup[y]=h}_balanceNamespaceList(y,T){const h=this._namespaceList,A=this.namespacesByHostElement;if(h.length-1>=0){let M=!1,B=this.driver.getParentElement(T);for(;B;){const X=A.get(B);if(X){const se=h.indexOf(X);h.splice(se+1,0,y),M=!0;break}B=this.driver.getParentElement(B)}M||h.unshift(y)}else h.push(y);return A.set(T,y),y}register(y,T){let h=this._namespaceLookup[y];return h||(h=this.createNamespace(y,T)),h}registerTrigger(y,T,h){let A=this._namespaceLookup[y];A&&A.register(T,h)&&this.totalAnimations++}destroy(y,T){y&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const h=this._fetchNamespace(y);this.namespacesByHostElement.delete(h.hostElement);const A=this._namespaceList.indexOf(h);A>=0&&this._namespaceList.splice(A,1),h.destroy(T),delete this._namespaceLookup[y]}))}_fetchNamespace(y){return this._namespaceLookup[y]}fetchNamespacesByElement(y){const T=new Set,h=this.statesByElement.get(y);if(h)for(let A of h.values())if(A.namespaceId){const v=this._fetchNamespace(A.namespaceId);v&&T.add(v)}return T}trigger(y,T,h,A){if(zs(T)){const v=this._fetchNamespace(y);if(v)return v.trigger(T,h,A),!0}return!1}insertNode(y,T,h,A){if(!zs(T))return;const v=T[Ei];if(v&&v.setForRemoval){v.setForRemoval=!1,v.setForMove=!0;const M=this.collectedLeaveElements.indexOf(T);M>=0&&this.collectedLeaveElements.splice(M,1)}if(y){const M=this._fetchNamespace(y);M&&M.insertNode(T,h)}A&&this.collectEnterElement(T)}collectEnterElement(y){this.collectedEnterElements.push(y)}markElementAsDisabled(y,T){T?this.disabledNodes.has(y)||(this.disabledNodes.add(y),Ii(y,$s)):this.disabledNodes.has(y)&&(this.disabledNodes.delete(y),Ro(y,$s))}removeNode(y,T,h){if(zs(T)){const A=y?this._fetchNamespace(y):null;A?A.removeNode(T,h):this.markElementAsRemoved(y,T,!1,h);const v=this.namespacesByHostElement.get(T);v&&v.id!==y&&v.removeNode(T,h)}else this._onRemovalComplete(T,h)}markElementAsRemoved(y,T,h,A,v){this.collectedLeaveElements.push(T),T[Ei]={namespaceId:y,setForRemoval:A,hasAnimation:h,removedBeforeQueried:!1,previousTriggersValues:v}}listen(y,T,h,A,v){return zs(T)?this._fetchNamespace(y).listen(T,h,A,v):()=>{}}_buildInstruction(y,T,h,A,v){return y.transition.build(this.driver,y.element,y.fromState.value,y.toState.value,h,A,y.fromState.options,y.toState.options,T,v)}destroyInnerAnimations(y){let T=this.driver.query(y,fn,!0);T.forEach(h=>this.destroyActiveAnimationsForElement(h)),0!=this.playersByQueriedElement.size&&(T=this.driver.query(y,ir,!0),T.forEach(h=>this.finishActiveQueriedAnimationOnElement(h)))}destroyActiveAnimationsForElement(y){const T=this.playersByElement.get(y);T&&T.forEach(h=>{h.queued?h.markedForDestroy=!0:h.destroy()})}finishActiveQueriedAnimationOnElement(y){const T=this.playersByQueriedElement.get(y);T&&T.forEach(h=>h.finish())}whenRenderingDone(){return new Promise(y=>{if(this.players.length)return ln(this.players).onDone(()=>y());y()})}processLeaveNode(y){const T=y[Ei];if(T&&T.setForRemoval){if(y[Ei]=wa,T.namespaceId){this.destroyInnerAnimations(y);const h=this._fetchNamespace(T.namespaceId);h&&h.clearElementCache(y)}this._onRemovalComplete(y,T.setForRemoval)}y.classList?.contains($s)&&this.markElementAsDisabled(y,!1),this.driver.query(y,".ng-animate-disabled",!0).forEach(h=>{this.markElementAsDisabled(h,!1)})}flush(y=-1){let T=[];if(this.newHostElements.size&&(this.newHostElements.forEach((h,A)=>this._balanceNamespaceList(h,A)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let h=0;h<this.collectedEnterElements.length;h++)Ii(this.collectedEnterElements[h],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const h=[];try{T=this._flushAnimations(h,y)}finally{for(let A=0;A<h.length;A++)h[A]()}}else for(let h=0;h<this.collectedLeaveElements.length;h++)this.processLeaveNode(this.collectedLeaveElements[h]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(h=>h()),this._flushFns=[],this._whenQuietFns.length){const h=this._whenQuietFns;this._whenQuietFns=[],T.length?ln(T).onDone(()=>{h.forEach(A=>A())}):h.forEach(A=>A())}}reportError(y){throw function hs(j){return new x.vHH(3402,!1)}()}_flushAnimations(y,T){const h=new Hr,A=[],v=new Map,M=[],B=new Map,X=new Map,se=new Map,Ue=new Set;this.disabledNodes.forEach(zt=>{Ue.add(zt);const Dt=this.driver.query(zt,".ng-animate-queued",!0);for(let Jt=0;Jt<Dt.length;Jt++)Ue.add(Dt[Jt])});const dt=this.bodyNode,Vt=Array.from(this.statesByElement.keys()),yt=Ho(Vt,this.collectedEnterElements),nt=new Map;let Mt=0;yt.forEach((zt,Dt)=>{const Jt=Bt+Mt++;nt.set(Dt,Jt),zt.forEach(mn=>Ii(mn,Jt))});const sn=[],wn=new Set,Zn=new Set;for(let zt=0;zt<this.collectedLeaveElements.length;zt++){const Dt=this.collectedLeaveElements[zt],Jt=Dt[Ei];Jt&&Jt.setForRemoval&&(sn.push(Dt),wn.add(Dt),Jt.hasAnimation?this.driver.query(Dt,".ng-star-inserted",!0).forEach(mn=>wn.add(mn)):Zn.add(Dt))}const Jn=new Map,sr=Ho(Vt,Array.from(wn));sr.forEach((zt,Dt)=>{const Jt=Pt+Mt++;Jn.set(Dt,Jt),zt.forEach(mn=>Ii(mn,Jt))}),y.push(()=>{yt.forEach((zt,Dt)=>{const Jt=nt.get(Dt);zt.forEach(mn=>Ro(mn,Jt))}),sr.forEach((zt,Dt)=>{const Jt=Jn.get(Dt);zt.forEach(mn=>Ro(mn,Jt))}),sn.forEach(zt=>{this.processLeaveNode(zt)})});const Ti=[],Ki=[];for(let zt=this._namespaceList.length-1;zt>=0;zt--)this._namespaceList[zt].drainQueuedTransitions(T).forEach(Jt=>{const mn=Jt.player,xr=Jt.element;if(Ti.push(mn),this.collectedEnterElements.length){const St=xr[Ei];if(St&&St.setForMove){if(St.previousTriggersValues&&St.previousTriggersValues.has(Jt.triggerName)){const nn=St.previousTriggersValues.get(Jt.triggerName),ft=this.statesByElement.get(Jt.element);if(ft&&ft.has(Jt.triggerName)){const ke=ft.get(Jt.triggerName);ke.value=nn,ft.set(Jt.triggerName,ke)}}return void mn.destroy()}}const Zi=!dt||!this.driver.containsElement(dt,xr),Ke=Jn.get(xr),yr=nt.get(xr),pn=this._buildInstruction(Jt,h,yr,Ke,Zi);if(pn.errors&&pn.errors.length)return void Ki.push(pn);if(Zi)return mn.onStart(()=>Ni(xr,pn.fromStyles)),mn.onDestroy(()=>_r(xr,pn.toStyles)),void A.push(mn);if(Jt.isFallbackTransition)return mn.onStart(()=>Ni(xr,pn.fromStyles)),mn.onDestroy(()=>_r(xr,pn.toStyles)),void A.push(mn);const Ba=[];pn.timelines.forEach(St=>{St.stretchStartingKeyframe=!0,this.disabledNodes.has(St.element)||Ba.push(St)}),pn.timelines=Ba,h.append(xr,pn.timelines),M.push({instruction:pn,player:mn,element:xr}),pn.queriedElements.forEach(St=>q(B,St,[]).push(mn)),pn.preStyleProps.forEach((St,nn)=>{if(St.size){let ft=X.get(nn);ft||X.set(nn,ft=new Set),St.forEach((ke,et)=>ft.add(et))}}),pn.postStyleProps.forEach((St,nn)=>{let ft=se.get(nn);ft||se.set(nn,ft=new Set),St.forEach((ke,et)=>ft.add(et))})});if(Ki.length){const zt=[];Ki.forEach(Dt=>{zt.push(function Lr(j,y){return new x.vHH(3505,!1)}())}),Ti.forEach(Dt=>Dt.destroy()),this.reportError(zt)}const zn=new Map,Ri=new Map;M.forEach(zt=>{const Dt=zt.element;h.has(Dt)&&(Ri.set(Dt,Dt),this._beforeAnimationBuild(zt.player.namespaceId,zt.instruction,zn))}),A.forEach(zt=>{const Dt=zt.element;this._getPreviousPlayers(Dt,!1,zt.namespaceId,zt.triggerName,null).forEach(mn=>{q(zn,Dt,[]).push(mn),mn.destroy()})});const bs=sn.filter(zt=>Go(zt,X,se)),Un=new Map;bo(Un,this.driver,Zn,se,We).forEach(zt=>{Go(zt,X,se)&&bs.push(zt)});const Po=new Map;yt.forEach((zt,Dt)=>{bo(Po,this.driver,new Set(zt),X,"!")}),bs.forEach(zt=>{const Dt=Un.get(zt),Jt=Po.get(zt);Un.set(zt,new Map([...Dt?.entries()??[],...Jt?.entries()??[]]))});const Pi=[],kc=[],Mo={};M.forEach(zt=>{const{element:Dt,player:Jt,instruction:mn}=zt;if(h.has(Dt)){if(Ue.has(Dt))return Jt.onDestroy(()=>_r(Dt,mn.toStyles)),Jt.disabled=!0,Jt.overrideTotalTime(mn.totalTime),void A.push(Jt);let xr=Mo;if(Ri.size>1){let Ke=Dt;const yr=[];for(;Ke=Ke.parentNode;){const pn=Ri.get(Ke);if(pn){xr=pn;break}yr.push(Ke)}yr.forEach(pn=>Ri.set(pn,xr))}const Zi=this._buildAnimation(Jt.namespaceId,mn,zn,v,Po,Un);if(Jt.setRealPlayer(Zi),xr===Mo)Pi.push(Jt);else{const Ke=this.playersByElement.get(xr);Ke&&Ke.length&&(Jt.parentPlayer=ln(Ke)),A.push(Jt)}}else Ni(Dt,mn.fromStyles),Jt.onDestroy(()=>_r(Dt,mn.toStyles)),kc.push(Jt),Ue.has(Dt)&&A.push(Jt)}),kc.forEach(zt=>{const Dt=v.get(zt.element);if(Dt&&Dt.length){const Jt=ln(Dt);zt.setRealPlayer(Jt)}}),A.forEach(zt=>{zt.parentPlayer?zt.syncPlayerEvents(zt.parentPlayer):zt.destroy()});for(let zt=0;zt<sn.length;zt++){const Dt=sn[zt],Jt=Dt[Ei];if(Ro(Dt,Pt),Jt&&Jt.hasAnimation)continue;let mn=[];if(B.size){let Zi=B.get(Dt);Zi&&Zi.length&&mn.push(...Zi);let Ke=this.driver.query(Dt,ir,!0);for(let yr=0;yr<Ke.length;yr++){let pn=B.get(Ke[yr]);pn&&pn.length&&mn.push(...pn)}}const xr=mn.filter(Zi=>!Zi.destroyed);xr.length?zo(this,Dt,xr):this.processLeaveNode(Dt)}return sn.length=0,Pi.forEach(zt=>{this.players.push(zt),zt.onDone(()=>{zt.destroy();const Dt=this.players.indexOf(zt);this.players.splice(Dt,1)}),zt.play()}),Pi}afterFlush(y){this._flushFns.push(y)}afterFlushAnimationsDone(y){this._whenQuietFns.push(y)}_getPreviousPlayers(y,T,h,A,v){let M=[];if(T){const B=this.playersByQueriedElement.get(y);B&&(M=B)}else{const B=this.playersByElement.get(y);if(B){const X=!v||v==oo;B.forEach(se=>{se.queued||!X&&se.triggerName!=A||M.push(se)})}}return(h||A)&&(M=M.filter(B=>!(h&&h!=B.namespaceId||A&&A!=B.triggerName))),M}_beforeAnimationBuild(y,T,h){const v=T.element,M=T.isRemovalTransition?void 0:y,B=T.isRemovalTransition?void 0:T.triggerName;for(const X of T.timelines){const se=X.element,Ue=se!==v,dt=q(h,se,[]);this._getPreviousPlayers(se,Ue,M,B,T.toState).forEach(yt=>{const nt=yt.getRealPlayer();nt.beforeDestroy&&nt.beforeDestroy(),yt.destroy(),dt.push(yt)})}Ni(v,T.fromStyles)}_buildAnimation(y,T,h,A,v,M){const B=T.triggerName,X=T.element,se=[],Ue=new Set,dt=new Set,Vt=T.timelines.map(nt=>{const Mt=nt.element;Ue.add(Mt);const sn=Mt[Ei];if(sn&&sn.removedBeforeQueried)return new ct(nt.duration,nt.delay);const wn=Mt!==X,Zn=function oa(j){const y=[];return ti(j,y),y}((h.get(Mt)||Cr).map(zn=>zn.getRealPlayer())).filter(zn=>!!zn.element&&zn.element===Mt),Jn=v.get(Mt),sr=M.get(Mt),Ti=gi(this._normalizer,nt.keyframes,Jn,sr),Ki=this._buildPlayer(nt,Ti,Zn);if(nt.subTimeline&&A&&dt.add(Mt),wn){const zn=new ao(y,B,Mt);zn.setRealPlayer(Ki),se.push(zn)}return Ki});se.forEach(nt=>{q(this.playersByQueriedElement,nt.element,[]).push(nt),nt.onDone(()=>function Co(j,y,T){let h=j.get(y);if(h){if(h.length){const A=h.indexOf(T);h.splice(A,1)}0==h.length&&j.delete(y)}return h}(this.playersByQueriedElement,nt.element,nt))}),Ue.forEach(nt=>Ii(nt,rr));const yt=ln(Vt);return yt.onDestroy(()=>{Ue.forEach(nt=>Ro(nt,rr)),_r(X,T.toStyles)}),dt.forEach(nt=>{q(A,nt,[]).push(yt)}),yt}_buildPlayer(y,T,h){return T.length>0?this.driver.animate(y.element,T,y.duration,y.delay,y.easing,h):new ct(y.duration,y.delay)}}class ao{constructor(y,T,h){this.namespaceId=y,this.triggerName=T,this.element=h,this._player=new ct,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(y){this._containsRealPlayer||(this._player=y,this._queuedCallbacks.forEach((T,h)=>{T.forEach(A=>zi(y,h,void 0,A))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(y.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(y){this.totalTime=y}syncPlayerEvents(y){const T=this._player;T.triggerCallback&&y.onStart(()=>T.triggerCallback("start")),y.onDone(()=>this.finish()),y.onDestroy(()=>this.destroy())}_queueEvent(y,T){q(this._queuedCallbacks,y,[]).push(T)}onDone(y){this.queued&&this._queueEvent("done",y),this._player.onDone(y)}onStart(y){this.queued&&this._queueEvent("start",y),this._player.onStart(y)}onDestroy(y){this.queued&&this._queueEvent("destroy",y),this._player.onDestroy(y)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(y){this.queued||this._player.setPosition(y)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(y){const T=this._player;T.triggerCallback&&T.triggerCallback(y)}}function zs(j){return j&&1===j.nodeType}function So(j,y){const T=j.style.display;return j.style.display=y??"none",T}function bo(j,y,T,h,A){const v=[];T.forEach(X=>v.push(So(X)));const M=[];h.forEach((X,se)=>{const Ue=new Map;X.forEach(dt=>{const Vt=y.computeStyle(se,dt,A);Ue.set(dt,Vt),(!Vt||0==Vt.length)&&(se[Ei]=Wi,M.push(se))}),j.set(se,Ue)});let B=0;return T.forEach(X=>So(X,v[B++])),M}function Ho(j,y){const T=new Map;if(j.forEach(B=>T.set(B,[])),0==y.length)return T;const A=new Set(y),v=new Map;function M(B){if(!B)return 1;let X=v.get(B);if(X)return X;const se=B.parentNode;return X=T.has(se)?se:A.has(se)?1:M(se),v.set(B,X),X}return y.forEach(B=>{const X=M(B);1!==X&&T.get(X).push(B)}),T}function Ii(j,y){j.classList?.add(y)}function Ro(j,y){j.classList?.remove(y)}function zo(j,y,T){ln(T).onDone(()=>j.processLeaveNode(y))}function ti(j,y){for(let T=0;T<j.length;T++){const h=j[T];h instanceof nr?ti(h.players,y):y.push(h)}}function Go(j,y,T){const h=T.get(j);if(!h)return!1;let A=y.get(j);return A?h.forEach(v=>A.add(v)):y.set(j,h),T.delete(j),!0}class O{constructor(y,T,h){this.bodyNode=y,this._driver=T,this._normalizer=h,this._triggerCache={},this.onRemovalComplete=(A,v)=>{},this._transitionEngine=new $o(y,T,h),this._timelineEngine=new Vi(y,T,h),this._transitionEngine.onRemovalComplete=(A,v)=>this.onRemovalComplete(A,v)}registerTrigger(y,T,h,A,v){const M=y+"-"+A;let B=this._triggerCache[M];if(!B){const X=[],Ue=ei(this._driver,v,X,[]);if(X.length)throw function Tn(j,y){return new x.vHH(3404,!1)}();B=function oi(j,y,T){return new cs(j,y,T)}(A,Ue,this._normalizer),this._triggerCache[M]=B}this._transitionEngine.registerTrigger(T,A,B)}register(y,T){this._transitionEngine.register(y,T)}destroy(y,T){this._transitionEngine.destroy(y,T)}onInsert(y,T,h,A){this._transitionEngine.insertNode(y,T,h,A)}onRemove(y,T,h){this._transitionEngine.removeNode(y,T,h)}disableAnimations(y,T){this._transitionEngine.markElementAsDisabled(y,T)}process(y,T,h,A){if("@"==h.charAt(0)){const[v,M]=Y(h);this._timelineEngine.command(v,T,M,A)}else this._transitionEngine.trigger(y,T,h,A)}listen(y,T,h,A,v){if("@"==h.charAt(0)){const[M,B]=Y(h);return this._timelineEngine.listen(M,T,B,v)}return this._transitionEngine.listen(y,T,h,A,v)}flush(y=-1){this._transitionEngine.flush(y)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(y){this._transitionEngine.afterFlushAnimationsDone(y)}}let Q=(()=>{class j{static#e=this.initialStylesByElement=new WeakMap;constructor(T,h,A){this._element=T,this._startStyles=h,this._endStyles=A,this._state=0;let v=j.initialStylesByElement.get(T);v||j.initialStylesByElement.set(T,v=new Map),this._initialStyles=v}start(){this._state<1&&(this._startStyles&&_r(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(_r(this._element,this._initialStyles),this._endStyles&&(_r(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(j.initialStylesByElement.delete(this._element),this._startStyles&&(Ni(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ni(this._element,this._endStyles),this._endStyles=null),_r(this._element,this._initialStyles),this._state=3)}}return j})();function J(j){let y=null;return j.forEach((T,h)=>{(function le(j){return"display"===j||"position"===j})(h)&&(y=y||new Map,y.set(h,T))}),y}class xe{constructor(y,T,h,A){this.element=y,this.keyframes=T,this.options=h,this._specialStyles=A,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=h.duration,this._delay=h.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(y=>y()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const y=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,y,this.options),this._finalKeyframe=y.length?y[y.length-1]:new Map;const T=()=>this._onFinish();this.domPlayer.addEventListener("finish",T),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",T)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(y){const T=[];return y.forEach(h=>{T.push(Object.fromEntries(h))}),T}_triggerWebAnimation(y,T,h){return y.animate(this._convertKeyframesToObject(T),h)}onStart(y){this._originalOnStartFns.push(y),this._onStartFns.push(y)}onDone(y){this._originalOnDoneFns.push(y),this._onDoneFns.push(y)}onDestroy(y){this._onDestroyFns.push(y)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(y=>y()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(y=>y()),this._onDestroyFns=[])}setPosition(y){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=y*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const y=new Map;this.hasStarted()&&this._finalKeyframe.forEach((h,A)=>{"offset"!==A&&y.set(A,this._finished?h:to(this.element,A))}),this.currentSnapshot=y}triggerCallback(y){const T="start"===y?this._onStartFns:this._onDoneFns;T.forEach(h=>h()),T.length=0}}class Xe{validateStyleProperty(y){return!0}validateAnimatableStyleProperty(y){return!0}matchesElement(y,T){return!1}containsElement(y,T){return Ft(y,T)}getParentElement(y){return K(y)}query(y,T,h){return qn(y,T,h)}computeStyle(y,T,h){return window.getComputedStyle(y)[T]}animate(y,T,h,A,v,M=[]){const X={duration:h,delay:A,fill:0==A?"both":"forwards"};v&&(X.easing=v);const se=new Map,Ue=M.filter(yt=>yt instanceof xe);(function wo(j,y){return 0===j||0===y})(h,A)&&Ue.forEach(yt=>{yt.currentSnapshot.forEach((nt,Mt)=>se.set(Mt,nt))});let dt=function fs(j){return j.length?j[0]instanceof Map?j:j.map(y=>Io(y)):[]}(T).map(yt=>an(yt));dt=function Ia(j,y,T){if(T.size&&y.length){let h=y[0],A=[];if(T.forEach((v,M)=>{h.has(M)||A.push(M),h.set(M,v)}),A.length)for(let v=1;v<y.length;v++){let M=y[v];A.forEach(B=>M.set(B,to(j,B)))}}return y}(y,dt,se);const Vt=function L(j,y){let T=null,h=null;return Array.isArray(y)&&y.length?(T=J(y[0]),y.length>1&&(h=J(y[y.length-1]))):y instanceof Map&&(T=J(y)),T||h?new Q(j,T,h):null}(y,dt);return new xe(y,dt,X,Vt)}}let kt=(()=>{class j extends Qe{constructor(T,h){super(),this._nextAnimationId=0,this._renderer=T.createRenderer(h.body,{id:"0",encapsulation:x.ifc.None,styles:[],data:{animation:[]}})}build(T){const h=this._nextAnimationId.toString();this._nextAnimationId++;const A=Array.isArray(T)?Lt(T):T;return dn(this._renderer,null,h,"register",[A]),new Ot(h,this._renderer)}static#e=this.\u0275fac=function(h){return new(h||j)(x.LFG(x.FYo),x.LFG(D.K0))};static#t=this.\u0275prov=x.Yz7({token:j,factory:j.\u0275fac})}return j})();class Ot extends ze{constructor(y,T){super(),this._id=y,this._renderer=T}create(y,T){return new tn(this._id,y,T||{},this._renderer)}}class tn{constructor(y,T,h,A){this.id=y,this.element=T,this._renderer=A,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",h)}_listen(y,T){return this._renderer.listen(this.element,`@@${this.id}:${y}`,T)}_command(y,...T){return dn(this._renderer,this.element,this.id,y,T)}onDone(y){this._listen("done",y)}onStart(y){this._listen("start",y)}onDestroy(y){this._listen("destroy",y)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(y){this._command("setPosition",y)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function dn(j,y,T,h,A){return j.setProperty(y,`@@${T}:${h}`,A)}const Yn="@.disabled";let pr=(()=>{class j{constructor(T,h,A){this.delegate=T,this.engine=h,this._zone=A,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,h.onRemovalComplete=(v,M)=>{const B=M?.parentNode(v);B&&M.removeChild(B,v)}}createRenderer(T,h){const v=this.delegate.createRenderer(T,h);if(!(T&&h&&h.data&&h.data.animation)){let Ue=this._rendererCache.get(v);return Ue||(Ue=new Kn("",v,this.engine,()=>this._rendererCache.delete(v)),this._rendererCache.set(v,Ue)),Ue}const M=h.id,B=h.id+"-"+this._currentId;this._currentId++,this.engine.register(B,T);const X=Ue=>{Array.isArray(Ue)?Ue.forEach(X):this.engine.registerTrigger(M,B,T,Ue.name,Ue)};return h.data.animation.forEach(X),new ui(this,B,v,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(T,h,A){T>=0&&T<this._microtaskId?this._zone.run(()=>h(A)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(v=>{const[M,B]=v;M(B)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([h,A]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(h){return new(h||j)(x.LFG(x.FYo),x.LFG(O),x.LFG(x.R0b))};static#t=this.\u0275prov=x.Yz7({token:j,factory:j.\u0275fac})}return j})();class Kn{constructor(y,T,h,A){this.namespaceId=y,this.delegate=T,this.engine=h,this._onDestroy=A}get data(){return this.delegate.data}destroyNode(y){this.delegate.destroyNode?.(y)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(y,T){return this.delegate.createElement(y,T)}createComment(y){return this.delegate.createComment(y)}createText(y){return this.delegate.createText(y)}appendChild(y,T){this.delegate.appendChild(y,T),this.engine.onInsert(this.namespaceId,T,y,!1)}insertBefore(y,T,h,A=!0){this.delegate.insertBefore(y,T,h),this.engine.onInsert(this.namespaceId,T,y,A)}removeChild(y,T,h){this.engine.onRemove(this.namespaceId,T,this.delegate)}selectRootElement(y,T){return this.delegate.selectRootElement(y,T)}parentNode(y){return this.delegate.parentNode(y)}nextSibling(y){return this.delegate.nextSibling(y)}setAttribute(y,T,h,A){this.delegate.setAttribute(y,T,h,A)}removeAttribute(y,T,h){this.delegate.removeAttribute(y,T,h)}addClass(y,T){this.delegate.addClass(y,T)}removeClass(y,T){this.delegate.removeClass(y,T)}setStyle(y,T,h,A){this.delegate.setStyle(y,T,h,A)}removeStyle(y,T,h){this.delegate.removeStyle(y,T,h)}setProperty(y,T,h){"@"==T.charAt(0)&&T==Yn?this.disableAnimations(y,!!h):this.delegate.setProperty(y,T,h)}setValue(y,T){this.delegate.setValue(y,T)}listen(y,T,h){return this.delegate.listen(y,T,h)}disableAnimations(y,T){this.engine.disableAnimations(y,T)}}class ui extends Kn{constructor(y,T,h,A,v){super(T,h,A,v),this.factory=y,this.namespaceId=T}setProperty(y,T,h){"@"==T.charAt(0)?"."==T.charAt(1)&&T==Yn?this.disableAnimations(y,h=void 0===h||!!h):this.engine.process(this.namespaceId,y,T.slice(1),h):this.delegate.setProperty(y,T,h)}listen(y,T,h){if("@"==T.charAt(0)){const A=function Nn(j){switch(j){case"body":return document.body;case"document":return document;case"window":return window;default:return j}}(y);let v=T.slice(1),M="";return"@"!=v.charAt(0)&&([v,M]=function bi(j){const y=j.indexOf(".");return[j.substring(0,y),j.slice(y+1)]}(v)),this.engine.listen(this.namespaceId,A,v,M,B=>{this.factory.scheduleListenerCallback(B._data||-1,h,B)})}return this.delegate.listen(y,T,h)}}const Gs=[{provide:Qe,useClass:kt},{provide:io,useFactory:function Nr(){return new _s}},{provide:O,useClass:(()=>{class j extends O{constructor(T,h,A,v){super(T.body,h,A)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(h){return new(h||j)(x.LFG(D.K0),x.LFG(ks),x.LFG(io),x.LFG(x.z2F))};static#t=this.\u0275prov=x.Yz7({token:j,factory:j.\u0275fac})}return j})()},{provide:x.FYo,useFactory:function ni(j,y,T){return new pr(j,y,T)},deps:[be.se,O,x.R0b]}],Ws=[{provide:ks,useFactory:()=>new Xe},{provide:x.QbO,useValue:"BrowserAnimations"},...Gs],qs=[{provide:ks,useClass:Qr},{provide:x.QbO,useValue:"NoopAnimations"},...Gs];let uo=(()=>{class j{static withConfig(T){return{ngModule:j,providers:T.disableAnimations?qs:Ws}}static#e=this.\u0275fac=function(h){return new(h||j)};static#t=this.\u0275mod=x.oAB({type:j});static#n=this.\u0275inj=x.cJS({providers:Ws,imports:[be.b2]})}return j})(),co=(()=>{class j{static#e=this.\u0275fac=function(h){return new(h||j)};static#t=this.\u0275mod=x.oAB({type:j});static#n=this.\u0275inj=x.cJS({imports:[fe,D.ez,be.b2,uo]})}return j})()},1383:(Ht,Fe,$)=>{var D=$(6593),oe=$(3228),x=$(5879),Ie=$(7213),ye=$(6814);function me(O,L){if(1&O){const Q=x.EpF();x.TgZ(0,"div",3),x._UZ(1,"img",4),x.TgZ(2,"span",5),x._uU(3),x.qZA(),x.TgZ(4,"a",6),x.NdJ("click",function(){x.CHM(Q);const le=x.oxw();return x.KtG(le.logout())}),x._uU(5,"Sair"),x.qZA()()}if(2&O){const Q=L.ngIf;x.xp6(1),x.Q6J("src",Q.photoURL,x.LSH),x.xp6(2),x.Oqu(Q.displayName)}}let Ce=(()=>{class O{constructor(Q,J){this.auth=Q,this.router=J}ngOnInit(){}logout(){this.auth.signOut().then(()=>this.router.navigate([""]))}static#e=this.\u0275fac=function(J){return new(J||O)(x.Y36(Ie.zQ),x.Y36(oe.F0))};static#t=this.\u0275cmp=x.Xpm({type:O,selectors:[["app-header"]],decls:5,vars:3,consts:[[1,"header"],[1,"header-title"],["class","user",4,"ngIf"],[1,"user"],["alt","user image",1,"user-image",3,"src"],[1,"user-name"],[1,"log-out",3,"click"]],template:function(J,le){1&J&&(x.TgZ(0,"div",0)(1,"h1",1),x._uU(2,"Planning Poker"),x.qZA(),x.YNc(3,me,6,2,"div",2),x.ALo(4,"async"),x.qZA()),2&J&&(x.xp6(3),x.Q6J("ngIf",x.lcZ(4,1,le.auth.user)))},dependencies:[ye.O5,ye.Ov],styles:[".header[_ngcontent-%COMP%]{background:#c2c2c2;width:100vw;height:80px;display:flex;justify-content:space-between;align-items:center;padding:0 20px}.header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{color:#000}.header[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;align-items:center}.header[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{margin-right:10px;color:#000;font-weight:700}.header[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;margin-right:10px}.header[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .log-out[_ngcontent-%COMP%]{cursor:pointer;border-radius:5px;border:#000 1px solid;padding:5px 10px}"]})}return O})(),He=(()=>{class O{static#e=this.\u0275fac=function(J){return new(J||O)};static#t=this.\u0275cmp=x.Xpm({type:O,selectors:[["app-layout"]],decls:3,vars:0,consts:[[1,"page"]],template:function(J,le){1&J&&(x._UZ(0,"app-header"),x.TgZ(1,"div",0),x._UZ(2,"router-outlet"),x.qZA())},dependencies:[oe.lC,Ce],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .page[_ngcontent-%COMP%]{overflow:auto;flex:1 1 auto;position:relative}"]})}return O})();var Ne=$(7142);let re=(()=>{class O{constructor(Q,J){this.auth=Q,this.router=J}login(){this.auth.signInWithPopup(this.googleAuthProvider()).then(()=>this.router.navigate(["room"]),Q=>console.log(Q))}googleAuthProvider(){return new Ne.Z.auth.GoogleAuthProvider}static#e=this.\u0275fac=function(J){return new(J||O)(x.Y36(Ie.zQ),x.Y36(oe.F0))};static#t=this.\u0275cmp=x.Xpm({type:O,selectors:[["app-login"]],decls:2,vars:0,consts:[[3,"click"]],template:function(J,le){1&J&&(x.TgZ(0,"button",0),x.NdJ("click",function(){return le.login()}),x._uU(1,"login"),x.qZA())}})}return O})();var ie=$(7398);const Qe=[{path:"",component:He,canMatch:[(O,L)=>(0,x.f3M)(Ie.zQ).user.pipe((0,ie.U)(Q=>null!=Q))],children:[{path:"",loadChildren:()=>Promise.resolve().then($.bind($,4136)).then(O=>O.PagesModule)}]},{path:"",component:re},{path:"**",redirectTo:""}];let ze=(()=>{class O{static#e=this.\u0275fac=function(J){return new(J||O)};static#t=this.\u0275mod=x.oAB({type:O});static#n=this.\u0275inj=x.cJS({imports:[oe.Bz.forRoot(Qe),oe.Bz]})}return O})(),We=(()=>{class O{constructor(){this.title="planning-poker"}static#e=this.\u0275fac=function(J){return new(J||O)};static#t=this.\u0275cmp=x.Xpm({type:O,selectors:[["app-root"]],decls:1,vars:0,template:function(J,le){1&J&&x._UZ(0,"router-outlet")},dependencies:[oe.lC]})}return O})(),Je=(()=>{class O{static#e=this.\u0275fac=function(J){return new(J||O)};static#t=this.\u0275mod=x.oAB({type:O});static#n=this.\u0275inj=x.cJS({imports:[ye.ez,oe.Bz]})}return O})();var ht=$(7217),at=$(9027),Lt=$(8326),Te=$(5592),we=$(2096),je=$(2459),De=$(6321),Ve=$(9360),Ye=$(8251),ae=$(4664),Zt=$(3106),ct=$(5861),nr=$(534),Cn=$(9058),dr=$(4537);const Wn="firebasestorage.googleapis.com",It="storageBucket";class ve extends Cn.ZR{constructor(L,Q,J=0){super(be(L),`Firebase Storage: ${Q} (${be(L)})`),this.status_=J,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ve.prototype)}get status(){return this.status_}set status(L){this.status_=L}_codeEquals(L){return be(L)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(L){this.customData.serverResponse=L,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var fe=function(O){return O.UNKNOWN="unknown",O.OBJECT_NOT_FOUND="object-not-found",O.BUCKET_NOT_FOUND="bucket-not-found",O.PROJECT_NOT_FOUND="project-not-found",O.QUOTA_EXCEEDED="quota-exceeded",O.UNAUTHENTICATED="unauthenticated",O.UNAUTHORIZED="unauthorized",O.UNAUTHORIZED_APP="unauthorized-app",O.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",O.INVALID_CHECKSUM="invalid-checksum",O.CANCELED="canceled",O.INVALID_EVENT_NAME="invalid-event-name",O.INVALID_URL="invalid-url",O.INVALID_DEFAULT_BUCKET="invalid-default-bucket",O.NO_DEFAULT_BUCKET="no-default-bucket",O.CANNOT_SLICE_BLOB="cannot-slice-blob",O.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",O.NO_DOWNLOAD_URL="no-download-url",O.INVALID_ARGUMENT="invalid-argument",O.INVALID_ARGUMENT_COUNT="invalid-argument-count",O.APP_DELETED="app-deleted",O.INVALID_ROOT_OPERATION="invalid-root-operation",O.INVALID_FORMAT="invalid-format",O.INTERNAL_ERROR="internal-error",O.UNSUPPORTED_ENVIRONMENT="unsupported-environment",O}(fe||{});function be(O){return"storage/"+O}function $e(){return new ve(fe.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Yt(){return new ve(fe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ln(){return new ve(fe.CANCELED,"User canceled the upload/download.")}function Dr(){return new ve(fe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Wr(O){return new ve(fe.INVALID_ARGUMENT,O)}function qr(){return new ve(fe.APP_DELETED,"The Firebase app was deleted.")}function fi(O){return new ve(fe.INVALID_ROOT_OPERATION,"The operation '"+O+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function st(O,L){return new ve(fe.INVALID_FORMAT,"String does not match format '"+O+"': "+L)}function on(O){throw new ve(fe.INTERNAL_ERROR,"Internal error: "+O)}class jt{constructor(L,Q){this.bucket=L,this.path_=Q}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const L=encodeURIComponent;return"/b/"+L(this.bucket)+"/o/"+L(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(L,Q){let J;try{J=jt.makeFromUrl(L,Q)}catch{return new jt(L,"")}if(""===J.path)return J;throw function Rn(O){return new ve(fe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+O+"'.")}(L)}static makeFromUrl(L,Q){let J=null;const le="([A-Za-z0-9.\\-_]+)",kt=new RegExp("^gs://"+le+"(/(.*))?$","i");function tn(ni){ni.path_=decodeURIComponent(ni.path)}const lr=Q.replace(/[.]/g,"\\."),Nr=[{regex:kt,indices:{bucket:1,path:3},postModify:function xe(ni){"/"===ni.path.charAt(ni.path.length-1)&&(ni.path_=ni.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${lr}/v[A-Za-z0-9_]+/b/${le}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:tn},{regex:new RegExp(`^https?://${Q===Wn?"(?:storage.googleapis.com|storage.cloud.google.com)":Q}/${le}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:tn}];for(let ni=0;ni<Nr.length;ni++){const Gs=Nr[ni],Ws=Gs.regex.exec(L);if(Ws){let uo=Ws[Gs.indices.path];uo||(uo=""),J=new jt(Ws[Gs.indices.bucket],uo),Gs.postModify(J);break}}if(null==J)throw function Dn(O){return new ve(fe.INVALID_URL,"Invalid URL '"+O+"'.")}(L);return J}}class Fn{constructor(L){this.promise_=Promise.reject(L)}getPromise(){return this.promise_}cancel(L=!1){}}function Ct(O){return"string"==typeof O||O instanceof String}function os(O){return gn()&&O instanceof Blob}function gn(){return typeof Blob<"u"&&!(0,Cn.UG)()}function kr(O,L,Q,J){if(J<L)throw Wr(`Invalid value for '${O}'. Expected ${L} or greater.`);if(J>Q)throw Wr(`Invalid value for '${O}'. Expected ${Q} or less.`)}function Ar(O,L,Q){let J=L;return null==Q&&(J=`https://${L}`),`${Q}://${J}/v0${O}`}function Os(O){const L=encodeURIComponent;let Q="?";for(const J in O)O.hasOwnProperty(J)&&(Q=Q+(L(J)+"=")+L(O[J])+"&");return Q=Q.slice(0,-1),Q}var pi=function(O){return O[O.NO_ERROR=0]="NO_ERROR",O[O.NETWORK_ERROR=1]="NETWORK_ERROR",O[O.ABORT=2]="ABORT",O}(pi||{});function hs(O,L){const Q=O>=500&&O<600,le=-1!==[408,429].indexOf(O),xe=-1!==L.indexOf(O);return Q||le||xe}class Hi{constructor(L,Q,J,le,xe,Xe,kt,Ot,tn,dn,lr,Yn=!0){this.url_=L,this.method_=Q,this.headers_=J,this.body_=le,this.successCodes_=xe,this.additionalRetryCodes_=Xe,this.callback_=kt,this.errorCallback_=Ot,this.timeout_=tn,this.progressCallback_=dn,this.connectionFactory_=lr,this.retry=Yn,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((pr,Kn)=>{this.resolve_=pr,this.reject_=Kn,this.start_()})}start_(){const Q=(J,le)=>{const xe=this.resolve_,Xe=this.reject_,kt=le.connection;if(le.wasSuccessCode)try{const Ot=this.callback_(kt,kt.getResponse());!function Tn(O){return void 0!==O}(Ot)?xe():xe(Ot)}catch(Ot){Xe(Ot)}else if(null!==kt){const Ot=$e();Ot.serverResponse=kt.getErrorText(),Xe(this.errorCallback_?this.errorCallback_(kt,Ot):Ot)}else Xe(le.canceled?this.appDelete_?qr():Ln():Yt())};this.canceled_?Q(0,new Lr(!1,null,!0)):this.backoffId_=function Ai(O,L,Q){let J=1,le=null,xe=null,Xe=!1,kt=0;function Ot(){return 2===kt}let tn=!1;function dn(...Nn){tn||(tn=!0,L.apply(null,Nn))}function lr(Nn){le=setTimeout(()=>{le=null,O(pr,Ot())},Nn)}function Yn(){xe&&clearTimeout(xe)}function pr(Nn,...bi){if(tn)return void Yn();if(Nn)return Yn(),void dn.call(null,Nn,...bi);if(Ot()||Xe)return Yn(),void dn.call(null,Nn,...bi);let Nr;J<64&&(J*=2),1===kt?(kt=2,Nr=0):Nr=1e3*(J+Math.random()),lr(Nr)}let Kn=!1;function ui(Nn){Kn||(Kn=!0,Yn(),!tn&&(null!==le?(Nn||(kt=2),clearTimeout(le),lr(0)):Nn||(kt=1)))}return lr(0),xe=setTimeout(()=>{Xe=!0,ui(!0)},Q),ui}((J,le)=>{if(le)return void J(!1,new Lr(!1,null,!0));const xe=this.connectionFactory_();this.pendingConnection_=xe;const Xe=kt=>{null!==this.progressCallback_&&this.progressCallback_(kt.loaded,kt.lengthComputable?kt.total:-1)};null!==this.progressCallback_&&xe.addUploadProgressListener(Xe),xe.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&xe.removeUploadProgressListener(Xe),this.pendingConnection_=null;const kt=xe.getErrorCode()===pi.NO_ERROR,Ot=xe.getStatus();if(!kt||hs(Ot,this.additionalRetryCodes_)&&this.retry){const dn=xe.getErrorCode()===pi.ABORT;return void J(!1,new Lr(!1,null,dn))}const tn=-1!==this.successCodes_.indexOf(Ot);J(!0,new Lr(tn,xe))})},Q,this.timeout_)}getPromise(){return this.promise_}cancel(L){this.canceled_=!0,this.appDelete_=L||!1,null!==this.backoffId_&&function ii(O){O(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Lr{constructor(L,Q,J){this.wasSuccessCode=L,this.connection=Q,this.canceled=!!J}}function q(...O){const L=function ce(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==L){const Q=new L;for(let J=0;J<O.length;J++)Q.append(O[J]);return Q.getBlob()}if(gn())return new Blob(O);throw new ve(fe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const K={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ee{constructor(L,Q){this.data=L,this.contentType=Q||null}}function Ge(O,L){switch(O){case K.RAW:return new Ee(lt(L));case K.BASE64:case K.BASE64URL:return new Ee(Xt(O,L));case K.DATA_URL:return new Ee(function Ft(O){const L=new _t(O);return L.base64?Xt(K.BASE64,L.rest):function Qt(O){let L;try{L=decodeURIComponent(O)}catch{throw st(K.DATA_URL,"Malformed data URL.")}return lt(L)}(L.rest)}(L),function qn(O){return new _t(O).contentType}(L))}throw $e()}function lt(O){const L=[];for(let Q=0;Q<O.length;Q++){let J=O.charCodeAt(Q);J<=127?L.push(J):J<=2047?L.push(192|J>>6,128|63&J):55296==(64512&J)?Q<O.length-1&&56320==(64512&O.charCodeAt(Q+1))?(J=65536|(1023&J)<<10|1023&O.charCodeAt(++Q),L.push(240|J>>18,128|J>>12&63,128|J>>6&63,128|63&J)):L.push(239,191,189):56320==(64512&J)?L.push(239,191,189):L.push(224|J>>12,128|J>>6&63,128|63&J)}return new Uint8Array(L)}function Xt(O,L){switch(O){case K.BASE64:{const le=-1!==L.indexOf("-"),xe=-1!==L.indexOf("_");if(le||xe)throw st(O,"Invalid character '"+(le?"-":"_")+"' found: is it base64url encoded?");break}case K.BASE64URL:{const le=-1!==L.indexOf("+"),xe=-1!==L.indexOf("/");if(le||xe)throw st(O,"Invalid character '"+(le?"+":"/")+"' found: is it base64 encoded?");L=L.replace(/-/g,"+").replace(/_/g,"/");break}}let Q;try{Q=function Z(O){if(typeof atob>"u")throw function Ir(O){return new ve(fe.UNSUPPORTED_ENVIRONMENT,`${O} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(O)}(L)}catch(le){throw le.message.includes("polyfill")?le:st(O,"Invalid character found")}const J=new Uint8Array(Q.length);for(let le=0;le<Q.length;le++)J[le]=Q.charCodeAt(le);return J}class _t{constructor(L){this.base64=!1,this.contentType=null;const Q=L.match(/^data:([^,]+)?,/);if(null===Q)throw st(K.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const J=Q[1]||null;null!=J&&(this.base64=function mi(O,L){return O.length>=L.length&&O.substring(O.length-L.length)===L}(J,";base64"),this.contentType=this.base64?J.substring(0,J.length-7):J),this.rest=L.substring(L.indexOf(",")+1)}}class Qr{constructor(L,Q){let J=0,le="";os(L)?(this.data_=L,J=L.size,le=L.type):L instanceof ArrayBuffer?(Q?this.data_=new Uint8Array(L):(this.data_=new Uint8Array(L.byteLength),this.data_.set(new Uint8Array(L))),J=this.data_.length):L instanceof Uint8Array&&(Q?this.data_=L:(this.data_=new Uint8Array(L.length),this.data_.set(L)),J=L.length),this.size_=J,this.type_=le}size(){return this.size_}type(){return this.type_}slice(L,Q){if(os(this.data_)){const le=function Y(O,L,Q){return O.webkitSlice?O.webkitSlice(L,Q):O.mozSlice?O.mozSlice(L,Q):O.slice?O.slice(L,Q):null}(this.data_,L,Q);return null===le?null:new Qr(le)}{const J=new Uint8Array(this.data_.buffer,L,Q-L);return new Qr(J,!0)}}static getBlob(...L){if(gn()){const Q=L.map(J=>J instanceof Qr?J.data_:J);return new Qr(q.apply(null,Q))}{const Q=L.map(Xe=>Ct(Xe)?Ge(K.RAW,Xe).data:Xe.data_);let J=0;Q.forEach(Xe=>{J+=Xe.byteLength});const le=new Uint8Array(J);let xe=0;return Q.forEach(Xe=>{for(let kt=0;kt<Xe.length;kt++)le[xe++]=Xe[kt]}),new Qr(le,!0)}}uploadData(){return this.data_}}function ks(O){let L;try{L=JSON.parse(O)}catch{return null}return function Js(O){return"object"==typeof O&&!Array.isArray(O)}(L)?L:null}function tt(O){const L=O.lastIndexOf("/",O.length-2);return-1===L?O:O.slice(L+1)}function Bt(O,L){return L}class Pt{constructor(L,Q,J,le){this.server=L,this.local=Q||L,this.writable=!!J,this.xform=le||Bt}}let vt=null;function rr(){if(vt)return vt;const O=[];O.push(new Pt("bucket")),O.push(new Pt("generation")),O.push(new Pt("metageneration")),O.push(new Pt("name","fullPath",!0));const Q=new Pt("name");Q.xform=function L(xe,Xe){return function fn(O){return!Ct(O)||O.length<2?O:tt(O)}(Xe)},O.push(Q);const le=new Pt("size");return le.xform=function J(xe,Xe){return void 0!==Xe?Number(Xe):Xe},O.push(le),O.push(new Pt("timeCreated")),O.push(new Pt("updated")),O.push(new Pt("md5Hash",null,!0)),O.push(new Pt("cacheControl",null,!0)),O.push(new Pt("contentDisposition",null,!0)),O.push(new Pt("contentEncoding",null,!0)),O.push(new Pt("contentLanguage",null,!0)),O.push(new Pt("contentType",null,!0)),O.push(new Pt("metadata","customMetadata",!0)),vt=O,vt}function Fr(O,L,Q){const J=ks(L);return null===J?null:function si(O,L,Q){const J={type:"file"},le=Q.length;for(let xe=0;xe<le;xe++){const Xe=Q[xe];J[Xe.local]=Xe.xform(J,L[Xe.server])}return function ir(O,L){Object.defineProperty(O,"ref",{get:function Q(){const xe=new jt(O.bucket,O.fullPath);return L._makeStorageReference(xe)}})}(J,O),J}(O,J,Q)}function Xs(O,L){const Q={},J=L.length;for(let le=0;le<J;le++){const xe=L[le];xe.writable&&(Q[xe.server]=O[xe.local])}return JSON.stringify(Q)}const Yi="prefixes",Io="items";class an{constructor(L,Q,J,le){this.url=L,this.method=Q,this.handler=J,this.timeout=le,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function _r(O){if(!O)throw $e()}function Ni(O,L){return function Q(J,le){const xe=Fr(O,le,L);return _r(null!==xe),xe}}function xi(O){return function L(Q,J){let le;return le=401===Q.getStatus()?Q.getErrorText().includes("Firebase App Check token is invalid")?function wt(){return new ve(fe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function kn(){return new ve(fe.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===Q.getStatus()?function it(O){return new ve(fe.QUOTA_EXCEEDED,"Quota for bucket '"+O+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(O.bucket):403===Q.getStatus()?function rn(O){return new ve(fe.UNAUTHORIZED,"User does not have permission to access '"+O+"'.")}(O.path):J,le.status=Q.getStatus(),le.serverResponse=J.serverResponse,le}}function Vs(O){const L=xi(O);return function Q(J,le){let xe=L(J,le);return 404===J.getStatus()&&(xe=function mt(O){return new ve(fe.OBJECT_NOT_FOUND,"Object '"+O+"' does not exist.")}(O.path)),xe.serverResponse=le.serverResponse,xe}}function Jr(O,L,Q){const le=Ar(L.fullServerUrl(),O.host,O._protocol),Xe=O.maxOperationRetryTime,kt=new an(le,"GET",Ni(O,Q),Xe);return kt.errorHandler=Vs(L),kt}function Ji(O,L,Q,J,le){const xe={};xe.prefix=L.isRoot?"":L.path+"/",Q&&Q.length>0&&(xe.delimiter=Q),J&&(xe.pageToken=J),le&&(xe.maxResults=le);const kt=Ar(L.bucketOnlyServerUrl(),O.host,O._protocol),tn=O.maxOperationRetryTime,dn=new an(kt,"GET",function Fs(O,L){return function Q(J,le){const xe=function Ls(O,L,Q){const J=ks(Q);return null===J?null:function fs(O,L,Q){const J={prefixes:[],items:[],nextPageToken:Q.nextPageToken};if(Q[Yi])for(const le of Q[Yi]){const xe=le.replace(/\/$/,""),Xe=O._makeStorageReference(new jt(L,xe));J.prefixes.push(Xe)}if(Q[Io])for(const le of Q[Io]){const xe=O._makeStorageReference(new jt(L,le.name));J.items.push(xe)}return J}(O,L,J)}(O,L,le);return _r(null!==xe),xe}}(O,L.bucket),tn);return dn.urlParams=xe,dn.errorHandler=xi(L),dn}function jn(O,L,Q){const J=Object.assign({},Q);return J.fullPath=O.path,J.size=L.size(),J.contentType||(J.contentType=function Ia(O,L){return O&&O.contentType||L&&L.type()||"application/octet-stream"}(null,L)),J}class ar{constructor(L,Q,J,le){this.current=L,this.total=Q,this.finalized=!!J,this.metadata=le||null}}function As(O,L){let Q=null;try{Q=O.getResponseHeader("X-Goog-Upload-Status")}catch{_r(!1)}return _r(!!Q&&-1!==(L||["active"]).indexOf(Q)),Q}const _i={STATE_CHANGED:"state_changed"},Xr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function js(O){switch(O){case"running":case"pausing":case"canceling":return Xr.RUNNING;case"paused":return Xr.PAUSED;case"success":return Xr.SUCCESS;case"canceled":return Xr.CANCELED;default:return Xr.ERROR}}class Jo{constructor(L,Q,J){if(function mr(O){return"function"==typeof O}(L)||null!=Q||null!=J)this.next=L,this.error=Q??void 0,this.complete=J??void 0;else{const xe=L;this.next=xe.next,this.error=xe.error,this.complete=xe.complete}}}function Ci(O){return(...L)=>{Promise.resolve().then(()=>O(...L))}}let yn=null;class Pr{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=pi.NO_ERROR,this.sendPromise_=new Promise(L=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=pi.ABORT,L()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=pi.NETWORK_ERROR,L()}),this.xhr_.addEventListener("load",()=>{L()})})}send(L,Q,J,le){if(this.sent_)throw on("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(Q,L,!0),void 0!==le)for(const xe in le)le.hasOwnProperty(xe)&&this.xhr_.setRequestHeader(xe,le[xe].toString());return void 0!==J?this.xhr_.send(J):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw on("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw on("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw on("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw on("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(L){return this.xhr_.getResponseHeader(L)}addUploadProgressListener(L){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",L)}removeUploadProgressListener(L){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",L)}}class yi extends Pr{initXhr(){this.xhr_.responseType="text"}}function Vr(){return yn?yn():new yi}class Uo{constructor(L,Q,J=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=L,this._blob=Q,this._metadata=J,this._mappings=rr(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=le=>{if(this._request=void 0,this._chunkMultiplier=1,le._codeEquals(fe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const xe=this.isExponentialBackoffExpired();if(hs(le.status,[])){if(!xe)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();le=Yt()}this._error=le,this._transition("error")}},this._metadataErrorHandler=le=>{this._request=void 0,le._codeEquals(fe.CANCELED)?this.completeTransitions_():(this._error=le,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((le,xe)=>{this._resolve=le,this._reject=xe,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const L=this._transferred;return Q=>this._updateProgress(L+Q)}_shouldDoResumable(L){return L.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(L){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([Q,J])=>{switch(this._state){case"running":L(Q,J);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((L,Q)=>{const J=function ps(O,L,Q,J,le){const xe=L.bucketOnlyServerUrl(),Xe=jn(L,J,le),kt={name:Xe.fullPath},Ot=Ar(xe,O.host,O._protocol),dn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${J.size()}`,"X-Goog-Upload-Header-Content-Type":Xe.contentType,"Content-Type":"application/json; charset=utf-8"},lr=Xs(Xe,Q),Kn=new an(Ot,"POST",function pr(ui){let Nn;As(ui);try{Nn=ui.getResponseHeader("X-Goog-Upload-URL")}catch{_r(!1)}return _r(Ct(Nn)),Nn},O.maxUploadRetryTime);return Kn.urlParams=kt,Kn.headers=dn,Kn.body=lr,Kn.errorHandler=xi(L),Kn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),le=this._ref.storage._makeRequest(J,Vr,L,Q);this._request=le,le.getPromise().then(xe=>{this._request=void 0,this._uploadUrl=xe,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const L=this._uploadUrl;this._resolveToken((Q,J)=>{const le=function Do(O,L,Q,J){const Ot=new an(Q,"POST",function xe(tn){const dn=As(tn,["active","final"]);let lr=null;try{lr=tn.getResponseHeader("X-Goog-Upload-Size-Received")}catch{_r(!1)}lr||_r(!1);const Yn=Number(lr);return _r(!isNaN(Yn)),new ar(Yn,J.size(),"final"===dn)},O.maxUploadRetryTime);return Ot.headers={"X-Goog-Upload-Command":"query"},Ot.errorHandler=xi(L),Ot}(this._ref.storage,this._ref._location,L,this._blob),xe=this._ref.storage._makeRequest(le,Vr,Q,J);this._request=xe,xe.getPromise().then(Xe=>{this._request=void 0,this._updateProgress(Xe.current),this._needToFetchStatus=!1,Xe.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const L=262144*this._chunkMultiplier,Q=new ar(this._transferred,this._blob.size()),J=this._uploadUrl;this._resolveToken((le,xe)=>{let Xe;try{Xe=function Vo(O,L,Q,J,le,xe,Xe,kt){const Ot=new ar(0,0);if(Xe?(Ot.current=Xe.current,Ot.total=Xe.total):(Ot.current=0,Ot.total=J.size()),J.size()!==Ot.total)throw function Sn(){return new ve(fe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const tn=Ot.total-Ot.current;let dn=tn;le>0&&(dn=Math.min(dn,le));const lr=Ot.current;let pr="";pr=0===dn?"finalize":tn===dn?"upload, finalize":"upload";const Kn={"X-Goog-Upload-Command":pr,"X-Goog-Upload-Offset":`${Ot.current}`},ui=J.slice(lr,lr+dn);if(null===ui)throw Dr();const Nr=new an(Q,"POST",function Nn(ni,Gs){const Ws=As(ni,["active","final"]),qs=Ot.current+dn,uo=J.size();let Ui;return Ui="final"===Ws?Ni(L,xe)(ni,Gs):null,new ar(qs,uo,"final"===Ws,Ui)},L.maxUploadRetryTime);return Nr.headers=Kn,Nr.body=ui.uploadData(),Nr.progressCallback=kt||null,Nr.errorHandler=xi(O),Nr}(this._ref._location,this._ref.storage,J,this._blob,L,this._mappings,Q,this._makeProgressCallback())}catch(Ot){return this._error=Ot,void this._transition("error")}const kt=this._ref.storage._makeRequest(Xe,Vr,le,xe,!1);this._request=kt,kt.getPromise().then(Ot=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Ot.current),Ot.finalized?(this._metadata=Ot.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((L,Q)=>{const J=Jr(this._ref.storage,this._ref._location,this._mappings),le=this._ref.storage._makeRequest(J,Vr,L,Q);this._request=le,le.getPromise().then(xe=>{this._request=void 0,this._metadata=xe,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((L,Q)=>{const J=function to(O,L,Q,J,le){const xe=L.bucketOnlyServerUrl(),Xe={"X-Goog-Upload-Protocol":"multipart"},Ot=function kt(){let Nr="";for(let ni=0;ni<2;ni++)Nr+=Math.random().toString().slice(2);return Nr}();Xe["Content-Type"]="multipart/related; boundary="+Ot;const tn=jn(L,J,le),dn=Xs(tn,Q),pr=Qr.getBlob("--"+Ot+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+dn+"\r\n--"+Ot+"\r\nContent-Type: "+tn.contentType+"\r\n\r\n",J,"\r\n--"+Ot+"--");if(null===pr)throw Dr();const Kn={name:tn.fullPath},ui=Ar(xe,O.host,O._protocol),bi=O.maxUploadRetryTime,qi=new an(ui,"POST",Ni(O,Q),bi);return qi.urlParams=Kn,qi.headers=Xe,qi.body=pr.uploadData(),qi.errorHandler=xi(L),qi}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),le=this._ref.storage._makeRequest(J,Vr,L,Q);this._request=le,le.getPromise().then(xe=>{this._request=void 0,this._metadata=xe,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(L){const Q=this._transferred;this._transferred=L,this._transferred!==Q&&this._notifyObservers()}_transition(L){if(this._state!==L)switch(L){case"canceling":case"pausing":this._state=L,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const Q="paused"===this._state;this._state=L,Q&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=L,this._notifyObservers();break;case"canceled":this._error=Ln(),this._state=L,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const L=js(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:L,metadata:this._metadata,task:this,ref:this._ref}}on(L,Q,J,le){const xe=new Jo(Q||void 0,J||void 0,le||void 0);return this._addObserver(xe),()=>{this._removeObserver(xe)}}then(L,Q){return this._promise.then(L,Q)}catch(L){return this.then(null,L)}_addObserver(L){this._observers.push(L),this._notifyObserver(L)}_removeObserver(L){const Q=this._observers.indexOf(L);-1!==Q&&this._observers.splice(Q,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(Q=>{this._notifyObserver(Q)})}_finishPromise(){if(void 0!==this._resolve){let L=!0;switch(js(this._state)){case Xr.SUCCESS:Ci(this._resolve.bind(null,this.snapshot))();break;case Xr.CANCELED:case Xr.ERROR:Ci(this._reject.bind(null,this._error))();break;default:L=!1}L&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(L){switch(js(this._state)){case Xr.RUNNING:case Xr.PAUSED:L.next&&Ci(L.next.bind(L,this.snapshot))();break;case Xr.SUCCESS:L.complete&&Ci(L.complete.bind(L))();break;default:L.error&&Ci(L.error.bind(L,this._error))()}}resume(){const L="paused"===this._state||"pausing"===this._state;return L&&this._transition("running"),L}pause(){const L="running"===this._state;return L&&this._transition("pausing"),L}cancel(){const L="running"===this._state||"pausing"===this._state;return L&&this._transition("canceling"),L}}class Ss{constructor(L,Q){this._service=L,this._location=Q instanceof jt?Q:jt.makeFromUrl(Q,L.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(L,Q){return new Ss(L,Q)}get root(){const L=new jt(this._location.bucket,"");return this._newRef(this._service,L)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tt(this._location.path)}get storage(){return this._service}get parent(){const L=function Be(O){if(0===O.length)return null;const L=O.lastIndexOf("/");return-1===L?"":O.slice(0,L)}(this._location.path);if(null===L)return null;const Q=new jt(this._location.bucket,L);return new Ss(this._service,Q)}_throwIfRoot(L){if(""===this._location.path)throw fi(L)}}function Mr(O,L,Q){return as.apply(this,arguments)}function as(){return(as=(0,ct.Z)(function*(O,L,Q){const le=yield hr(O,{pageToken:Q});L.prefixes.push(...le.prefixes),L.items.push(...le.items),null!=le.nextPageToken&&(yield Mr(O,L,le.nextPageToken))})).apply(this,arguments)}function hr(O,L){null!=L&&"number"==typeof L.maxResults&&kr("options.maxResults",1,1e3,L.maxResults);const Q=L||{},J=Ji(O.storage,O._location,"/",Q.pageToken,Q.maxResults);return O.storage.makeRequestWithTokens(J,Vr)}function Gt(O){O._throwIfRoot("getDownloadURL");const L=function eo(O,L,Q){const le=Ar(L.fullServerUrl(),O.host,O._protocol),Xe=O.maxOperationRetryTime,kt=new an(le,"GET",function To(O,L){return function Q(J,le){const xe=Fr(O,le,L);return _r(null!==xe),function Yr(O,L,Q,J){const le=ks(L);if(null===le||!Ct(le.downloadTokens))return null;const xe=le.downloadTokens;if(0===xe.length)return null;const Xe=encodeURIComponent;return xe.split(",").map(tn=>{const lr=O.fullPath;return Ar("/b/"+Xe(O.bucket)+"/o/"+Xe(lr),Q,J)+Os({alt:"media",token:tn})})[0]}(xe,le,O.host,O._protocol)}}(O,Q),Xe);return kt.errorHandler=Vs(L),kt}(O.storage,O._location,rr());return O.storage.makeRequestWithTokens(L,Vr).then(Q=>{if(null===Q)throw function Rr(){return new ve(fe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return Q})}function Xi(O,L){const Q=function Ae(O,L){const Q=L.split("/").filter(J=>J.length>0).join("/");return 0===O.length?Q:O+"/"+Q}(O._location.path,L),J=new jt(O._location.bucket,Q);return new Ss(O.storage,J)}function Vn(O,L){if(O instanceof io){const Q=O;if(null==Q._bucket)throw function Bn(){return new ve(fe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+It+"' property when initializing the app?")}();const J=new Ss(Q,Q._bucket);return null!=L?Vn(J,L):J}return void 0!==L?Xi(O,L):O}function es(O,L){if(L&&function Ur(O){return/^[A-Za-z]+:\/\//.test(O)}(L)){if(O instanceof io)return function cr(O,L){return new Ss(O,L)}(O,L);throw Wr("To use ref(service, url), the first argument must be a Storage instance.")}return Vn(O,L)}function zr(O,L){const Q=L?.[It];return null==Q?null:jt.makeFromBucketSpec(Q,O)}class io{constructor(L,Q,J,le,xe){this.app=L,this._authProvider=Q,this._appCheckProvider=J,this._url=le,this._firebaseVersion=xe,this._bucket=null,this._host=Wn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=le?jt.makeFromBucketSpec(le,this._host):zr(this._host,this.app.options)}get host(){return this._host}set host(L){this._host=L,this._bucket=null!=this._url?jt.makeFromBucketSpec(this._url,L):zr(L,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(L){kr("time",0,Number.POSITIVE_INFINITY,L),this._maxUploadRetryTime=L}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(L){kr("time",0,Number.POSITIVE_INFINITY,L),this._maxOperationRetryTime=L}_getAuthToken(){var L=this;return(0,ct.Z)(function*(){if(L._overrideAuthToken)return L._overrideAuthToken;const Q=L._authProvider.getImmediate({optional:!0});if(Q){const J=yield Q.getToken();if(null!==J)return J.accessToken}return null})()}_getAppCheckToken(){var L=this;return(0,ct.Z)(function*(){const Q=L._appCheckProvider.getImmediate({optional:!0});return Q?(yield Q.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(L=>L.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(L){return new Ss(this,L)}_makeRequest(L,Q,J,le,xe=!0){if(this._deleted)return new Fn(qr());{const Xe=function Zr(O,L,Q,J,le,xe,Xe=!0){const kt=Os(O.urlParams),Ot=O.url+kt,tn=Object.assign({},O.headers);return function gi(O,L){L&&(O["X-Firebase-GMPID"]=L)}(tn,L),function Kr(O,L){null!==L&&L.length>0&&(O.Authorization="Firebase "+L)}(tn,Q),function ln(O,L){O["X-Firebase-Storage-Version"]="webjs/"+(L??"AppManager")}(tn,xe),function zi(O,L){null!==L&&(O["X-Firebase-AppCheck"]=L)}(tn,J),new Hi(Ot,O.method,tn,O.body,O.successCodes,O.additionalRetryCodes,O.handler,O.errorHandler,O.timeout,O.progressCallback,le,Xe)}(L,this._appId,J,le,Q,this._firebaseVersion,xe);return this._requests.add(Xe),Xe.getPromise().then(()=>this._requests.delete(Xe),()=>this._requests.delete(Xe)),Xe}}makeRequestWithTokens(L,Q){var J=this;return(0,ct.Z)(function*(){const[le,xe]=yield Promise.all([J._getAuthToken(),J._getAppCheckToken()]);return J._makeRequest(L,Q,le,xe).getPromise()})()}}const ts="@firebase/storage";function Ta(O,L){return es(O=(0,Cn.m9)(O),L)}function Gi(O,{instanceIdentifier:L}){const Q=O.getProvider("app").getImmediate(),J=O.getProvider("auth-internal"),le=O.getProvider("app-check-internal");return new io(Q,J,le,L,nr.SDK_VERSION)}!function Bo(){(0,nr._registerComponent)(new dr.wA("storage",Gi,"PUBLIC").setMultipleInstances(!0)),(0,nr.registerVersion)(ts,"0.11.2",""),(0,nr.registerVersion)(ts,"0.11.2","esm2017")}();class Hs{constructor(L,Q,J){this._delegate=L,this.task=Q,this.ref=J}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Cr{constructor(L,Q){this._delegate=L,this._ref=Q,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Hs(this._delegate.snapshot,this,this._ref)}then(L,Q){return this._delegate.then(J=>{if(L)return L(new Hs(J,this,this._ref))},Q)}on(L,Q,J,le){let xe;return Q&&(xe="function"==typeof Q?Xe=>Q(new Hs(Xe,this,this._ref)):{next:Q.next?Xe=>Q.next(new Hs(Xe,this,this._ref)):void 0,complete:Q.complete||void 0,error:Q.error||void 0}),this._delegate.on(L,xe,J||void 0,le||void 0)}}class wa{constructor(L,Q){this._delegate=L,this._service=Q}get prefixes(){return this._delegate.prefixes.map(L=>new Wi(L,this._service))}get items(){return this._delegate.items.map(L=>new Wi(L,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Wi{constructor(L,Q){this._delegate=L,this.storage=Q}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(L){const Q=function Fi(O,L){return Xi(O,L)}(this._delegate,L);return new Wi(Q,this.storage)}get root(){return new Wi(this._delegate.root,this.storage)}get parent(){const L=this._delegate.parent;return null==L?null:new Wi(L,this.storage)}put(L,Q){return this._throwIfRoot("put"),new Cr(function Si(O,L,Q){return function bn(O,L,Q){return O._throwIfRoot("uploadBytesResumable"),new Uo(O,new Qr(L),Q)}(O=(0,Cn.m9)(O),L,Q)}(this._delegate,L,Q),this)}putString(L,Q=K.RAW,J){this._throwIfRoot("putString");const le=Ge(Q,L),xe=Object.assign({},J);return null==xe.contentType&&null!=le.contentType&&(xe.contentType=le.contentType),new Cr(new Uo(this._delegate,new Qr(le.data,!0),xe),this)}listAll(){return function oi(O){return function Hr(O){const L={prefixes:[],items:[]};return Mr(O,L).then(()=>L)}(O=(0,Cn.m9)(O))}(this._delegate).then(L=>new wa(L,this.storage))}list(L){return function ns(O,L){return hr(O=(0,Cn.m9)(O),L)}(this._delegate,L||void 0).then(Q=>new wa(Q,this.storage))}getMetadata(){return function Ao(O){return function us(O){O._throwIfRoot("getMetadata");const L=Jr(O.storage,O._location,rr());return O.storage.makeRequestWithTokens(L,Vr)}(O=(0,Cn.m9)(O))}(this._delegate)}updateMetadata(L){return function Li(O,L){return function vi(O,L){O._throwIfRoot("updateMetadata");const Q=function Us(O,L,Q,J){const xe=Ar(L.fullServerUrl(),O.host,O._protocol),kt=Xs(Q,J),tn=O.maxOperationRetryTime,dn=new an(xe,"PATCH",Ni(O,J),tn);return dn.headers={"Content-Type":"application/json; charset=utf-8"},dn.body=kt,dn.errorHandler=Vs(L),dn}(O.storage,O._location,L,rr());return O.storage.makeRequestWithTokens(Q,Vr)}(O=(0,Cn.m9)(O),L)}(this._delegate,L)}getDownloadURL(){return function cs(O){return Gt(O=(0,Cn.m9)(O))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function ai(O){return function Oi(O){O._throwIfRoot("deleteObject");const L=function wo(O,L){const J=Ar(L.fullServerUrl(),O.host,O._protocol),kt=new an(J,"DELETE",function Xe(Ot,tn){},O.maxOperationRetryTime);return kt.successCodes=[200,204],kt.errorHandler=Vs(L),kt}(O.storage,O._location);return O.storage.makeRequestWithTokens(L,Vr)}(O=(0,Cn.m9)(O))}(this._delegate)}_throwIfRoot(L){if(""===this._delegate._location.path)throw fi(L)}}class Ei{constructor(L,Q){this.app=L,this._delegate=Q}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(L){if(vs(L))throw Wr("ref() expected a child path but got a URL, use refFromURL instead.");return new Wi(Ta(this._delegate,L),this)}refFromURL(L){if(!vs(L))throw Wr("refFromURL() expected a full URL but got a child path, use ref() instead.");try{jt.makeFromUrl(L,this._delegate.host)}catch{throw Wr("refFromUrl() expected a valid full URL but got an invalid one.")}return new Wi(Ta(this._delegate,L),this)}setMaxUploadRetryTime(L){this._delegate.maxUploadRetryTime=L}setMaxOperationRetryTime(L){this._delegate.maxOperationRetryTime=L}useEmulator(L,Q,J={}){!function ys(O,L,Q,J={}){!function gs(O,L,Q,J={}){O.host=`${L}:${Q}`,O._protocol="http";const{mockUserToken:le}=J;le&&(O._overrideAuthToken="string"==typeof le?le:(0,Cn.Sg)(le,O.app.options.projectId))}(O,L,Q,J)}(this._delegate,L,Q,J)}}function vs(O){return/^[A-Za-z]+:\/\//.test(O)}function $o(O,{instanceIdentifier:L}){const Q=O.getProvider("app-compat").getImmediate(),J=O.getProvider("storage").getImmediate({identifier:L});return new Ei(Q,J)}function Qn(O){const L=function Co(O){return new Te.y(L=>{const Q=Xe=>L.next(Xe);Q(O.snapshot);const xe=O.on("state_changed",Q);return O.then(Xe=>{Q(Xe),L.complete()},Xe=>{Q(O.snapshot),(Xe=>{L.error(Xe)})(Xe)}),function(){xe()}}).pipe(function ot(O,L=De.z){return(0,Ve.e)((Q,J)=>{let le=null,xe=null,Xe=null;const kt=()=>{if(le){le.unsubscribe(),le=null;const tn=xe;xe=null,J.next(tn)}};function Ot(){const tn=Xe+O,dn=L.now();if(dn<tn)return le=this.schedule(void 0,tn-dn),void J.add(le);kt()}Q.subscribe((0,Ye.x)(J,tn=>{xe=tn,Xe=L.now(),le||(le=L.schedule(Ot,O),J.add(le))},()=>{kt(),J.complete()},void 0,()=>{xe=le=null}))})}(0))}(O);return{task:O,then:O.then.bind(O),catch:O.catch.bind(O),pause:O.pause.bind(O),cancel:O.cancel.bind(O),resume:O.resume.bind(O),snapshotChanges:()=>L,percentageChanges:()=>L.pipe((0,ie.U)(Q=>Q.bytesTransferred/Q.totalBytes*100))}}function zs(O){return{getDownloadURL:()=>(0,we.of)(void 0).pipe(Lt.fc,(0,ae.w)(()=>O.getDownloadURL()),Lt.iC),getMetadata:()=>(0,we.of)(void 0).pipe(Lt.fc,(0,ae.w)(()=>O.getMetadata()),Lt.iC),delete:()=>(0,je.D)(O.delete()),child:L=>zs(O.child(L)),updateMetadata:L=>(0,je.D)(O.updateMetadata(L)),put:(L,Q)=>Qn(O.put(L,Q)),putString:(L,Q,J)=>Qn(O.putString(L,Q,J)),list:L=>(0,je.D)(O.list(L)),listAll:()=>(0,je.D)(O.listAll())}}!function ao(O){const L={TaskState:Xr,TaskEvent:_i,StringFormat:K,Storage:Ei,Reference:Wi};O.INTERNAL.registerComponent(new dr.wA("storage-compat",$o,"PUBLIC").setServiceProps(L).setMultipleInstances(!0)),O.registerVersion("@firebase/storage-compat","0.3.2")}(Zt.Z);const ou=new x.OlP("angularfire2.storageBucket"),So=new x.OlP("angularfire2.storage.maxUploadRetryTime"),bo=new x.OlP("angularfire2.storage.maxOperationRetryTime"),Ho=new x.OlP("angularfire2.storage.use-emulator");let Ii=(()=>{class O{storage;constructor(Q,J,le,xe,Xe,kt,Ot,tn,dn,lr){const Yn=(0,ht.on)(Q,Xe,J);this.storage=(0,ht.cc)(`${Yn.name}.storage.${le}`,"AngularFireStorage",Yn.name,()=>{const pr=Xe.runOutsideAngular(()=>Yn.storage(le||void 0)),Kn=dn;return Kn&&pr.useEmulator(...Kn),Ot&&pr.setMaxUploadRetryTime(Ot),tn&&pr.setMaxOperationRetryTime(tn),pr},[Ot,tn])}ref(Q){return zs(this.storage.ref(Q))}refFromURL(Q){return zs(this.storage.refFromURL(Q))}upload(Q,J,le){return zs(this.storage.ref(Q)).put(J,le)}static \u0275fac=function(J){return new(J||O)(x.LFG(ht.Dh),x.LFG(ht.xv,8),x.LFG(ou,8),x.LFG(x.Lbi),x.LFG(x.R0b),x.LFG(Lt.HU),x.LFG(So,8),x.LFG(bo,8),x.LFG(Ho,8),x.LFG(Lt.Rf,8))};static \u0275prov=x.Yz7({token:O,factory:O.\u0275fac,providedIn:"any"})}return O})(),zo=(()=>{class O{static \u0275fac=function(J){return new(J||O)};static \u0275mod=x.oAB({type:O});static \u0275inj=x.cJS({})}return O})(),oa=(()=>{class O{constructor(){Ne.Z.registerVersion("angularfire",Lt.q4.full,"gcs-compat")}static \u0275fac=function(J){return new(J||O)};static \u0275mod=x.oAB({type:O});static \u0275inj=x.cJS({providers:[Ii],imports:[zo]})}return O})();var ti=$(4136);const rs={apiKey:"AIzaSyBxcb1o6HFEHy-RwZevt909OKSOqEpvW-g",authDomain:"planning-poker-cd302.firebaseapp.com",projectId:"planning-poker-cd302",storageBucket:"planning-poker-cd302.appspot.com",messagingSenderId:"903421093759",appId:"1:903421093759:web:79ee181c62d36ca5d09c4a"};let Go=(()=>{class O{static#e=this.\u0275fac=function(J){return new(J||O)};static#t=this.\u0275mod=x.oAB({type:O,bootstrap:[We]});static#n=this.\u0275inj=x.cJS({imports:[ti.PagesModule,ze,Je,ht.hO.initializeApp(rs),at.yb,Ie.ww,oa]})}return O})();D.q6().bootstrapModule(Go).catch(O=>console.error(O))},5619:(Ht,Fe,$)=>{$.d(Fe,{X:()=>oe});var D=$(8645);class oe extends D.x{constructor(Ie){super(),this._value=Ie}get value(){return this.getValue()}_subscribe(Ie){const ye=super._subscribe(Ie);return!ye.closed&&Ie.next(this._value),ye}getValue(){const{hasError:Ie,thrownError:ye,_value:me}=this;if(Ie)throw ye;return this._throwIfClosed(),me}next(Ie){super.next(this._value=Ie)}}},5592:(Ht,Fe,$)=>{$.d(Fe,{y:()=>He});var D=$(305),oe=$(7394),x=$(4850),Ie=$(8407),ye=$(2653),me=$(4674),Ce=$(1441);let He=(()=>{class ge{constructor(ze){ze&&(this._subscribe=ze)}lift(ze){const We=new ge;return We.source=this,We.operator=ze,We}subscribe(ze,We,Je){const ht=function ie(ge){return ge&&ge instanceof D.Lv||function re(ge){return ge&&(0,me.m)(ge.next)&&(0,me.m)(ge.error)&&(0,me.m)(ge.complete)}(ge)&&(0,oe.Nn)(ge)}(ze)?ze:new D.Hp(ze,We,Je);return(0,Ce.x)(()=>{const{operator:at,source:Lt}=this;ht.add(at?at.call(ht,Lt):Lt?this._subscribe(ht):this._trySubscribe(ht))}),ht}_trySubscribe(ze){try{return this._subscribe(ze)}catch(We){ze.error(We)}}forEach(ze,We){return new(We=Ne(We))((Je,ht)=>{const at=new D.Hp({next:Lt=>{try{ze(Lt)}catch(Te){ht(Te),at.unsubscribe()}},error:ht,complete:Je});this.subscribe(at)})}_subscribe(ze){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(ze)}[x.L](){return this}pipe(...ze){return(0,Ie.U)(ze)(this)}toPromise(ze){return new(ze=Ne(ze))((We,Je)=>{let ht;this.subscribe(at=>ht=at,at=>Je(at),()=>We(ht))})}}return ge.create=Qe=>new ge(Qe),ge})();function Ne(ge){var Qe;return null!==(Qe=ge??ye.config.Promise)&&void 0!==Qe?Qe:Promise}},8645:(Ht,Fe,$)=>{$.d(Fe,{x:()=>Ce});var D=$(5592),oe=$(7394);const Ie=(0,$(2306).d)(Ne=>function(){Ne(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ye=$(9039),me=$(1441);let Ce=(()=>{class Ne extends D.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ie){const ge=new He(this,this);return ge.operator=ie,ge}_throwIfClosed(){if(this.closed)throw new Ie}next(ie){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ge of this.currentObservers)ge.next(ie)}})}error(ie){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ie;const{observers:ge}=this;for(;ge.length;)ge.shift().error(ie)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ie}=this;for(;ie.length;)ie.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ie;return(null===(ie=this.observers)||void 0===ie?void 0:ie.length)>0}_trySubscribe(ie){return this._throwIfClosed(),super._trySubscribe(ie)}_subscribe(ie){return this._throwIfClosed(),this._checkFinalizedStatuses(ie),this._innerSubscribe(ie)}_innerSubscribe(ie){const{hasError:ge,isStopped:Qe,observers:ze}=this;return ge||Qe?oe.Lc:(this.currentObservers=null,ze.push(ie),new oe.w0(()=>{this.currentObservers=null,(0,ye.P)(ze,ie)}))}_checkFinalizedStatuses(ie){const{hasError:ge,thrownError:Qe,isStopped:ze}=this;ge?ie.error(Qe):ze&&ie.complete()}asObservable(){const ie=new D.y;return ie.source=this,ie}}return Ne.create=(re,ie)=>new He(re,ie),Ne})();class He extends Ce{constructor(re,ie){super(),this.destination=re,this.source=ie}next(re){var ie,ge;null===(ge=null===(ie=this.destination)||void 0===ie?void 0:ie.next)||void 0===ge||ge.call(ie,re)}error(re){var ie,ge;null===(ge=null===(ie=this.destination)||void 0===ie?void 0:ie.error)||void 0===ge||ge.call(ie,re)}complete(){var re,ie;null===(ie=null===(re=this.destination)||void 0===re?void 0:re.complete)||void 0===ie||ie.call(re)}_subscribe(re){var ie,ge;return null!==(ge=null===(ie=this.source)||void 0===ie?void 0:ie.subscribe(re))&&void 0!==ge?ge:oe.Lc}}},305:(Ht,Fe,$)=>{$.d(Fe,{Hp:()=>Je,Lv:()=>ge});var D=$(4674),oe=$(7394),x=$(2653),Ie=$(3894),ye=$(2420);const me=Ne("C",void 0,void 0);function Ne(we,je,De){return{kind:we,value:je,error:De}}var re=$(7599),ie=$(1441);class ge extends oe.w0{constructor(je){super(),this.isStopped=!1,je?(this.destination=je,(0,oe.Nn)(je)&&je.add(this)):this.destination=Te}static create(je,De,Ve){return new Je(je,De,Ve)}next(je){this.isStopped?Lt(function He(we){return Ne("N",we,void 0)}(je),this):this._next(je)}error(je){this.isStopped?Lt(function Ce(we){return Ne("E",void 0,we)}(je),this):(this.isStopped=!0,this._error(je))}complete(){this.isStopped?Lt(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(je){this.destination.next(je)}_error(je){try{this.destination.error(je)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Qe=Function.prototype.bind;function ze(we,je){return Qe.call(we,je)}class We{constructor(je){this.partialObserver=je}next(je){const{partialObserver:De}=this;if(De.next)try{De.next(je)}catch(Ve){ht(Ve)}}error(je){const{partialObserver:De}=this;if(De.error)try{De.error(je)}catch(Ve){ht(Ve)}else ht(je)}complete(){const{partialObserver:je}=this;if(je.complete)try{je.complete()}catch(De){ht(De)}}}class Je extends ge{constructor(je,De,Ve){let Ye;if(super(),(0,D.m)(je)||!je)Ye={next:je??void 0,error:De??void 0,complete:Ve??void 0};else{let ot;this&&x.config.useDeprecatedNextContext?(ot=Object.create(je),ot.unsubscribe=()=>this.unsubscribe(),Ye={next:je.next&&ze(je.next,ot),error:je.error&&ze(je.error,ot),complete:je.complete&&ze(je.complete,ot)}):Ye=je}this.destination=new We(Ye)}}function ht(we){x.config.useDeprecatedSynchronousErrorHandling?(0,ie.O)(we):(0,Ie.h)(we)}function Lt(we,je){const{onStoppedNotification:De}=x.config;De&&re.z.setTimeout(()=>De(we,je))}const Te={closed:!0,next:ye.Z,error:function at(we){throw we},complete:ye.Z}},7394:(Ht,Fe,$)=>{$.d(Fe,{Lc:()=>me,w0:()=>ye,Nn:()=>Ce});var D=$(4674);const x=(0,$(2306).d)(Ne=>function(ie){Ne(this),this.message=ie?`${ie.length} errors occurred during unsubscription:\n${ie.map((ge,Qe)=>`${Qe+1}) ${ge.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ie});var Ie=$(9039);class ye{constructor(re){this.initialTeardown=re,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let re;if(!this.closed){this.closed=!0;const{_parentage:ie}=this;if(ie)if(this._parentage=null,Array.isArray(ie))for(const ze of ie)ze.remove(this);else ie.remove(this);const{initialTeardown:ge}=this;if((0,D.m)(ge))try{ge()}catch(ze){re=ze instanceof x?ze.errors:[ze]}const{_finalizers:Qe}=this;if(Qe){this._finalizers=null;for(const ze of Qe)try{He(ze)}catch(We){re=re??[],We instanceof x?re=[...re,...We.errors]:re.push(We)}}if(re)throw new x(re)}}add(re){var ie;if(re&&re!==this)if(this.closed)He(re);else{if(re instanceof ye){if(re.closed||re._hasParent(this))return;re._addParent(this)}(this._finalizers=null!==(ie=this._finalizers)&&void 0!==ie?ie:[]).push(re)}}_hasParent(re){const{_parentage:ie}=this;return ie===re||Array.isArray(ie)&&ie.includes(re)}_addParent(re){const{_parentage:ie}=this;this._parentage=Array.isArray(ie)?(ie.push(re),ie):ie?[ie,re]:re}_removeParent(re){const{_parentage:ie}=this;ie===re?this._parentage=null:Array.isArray(ie)&&(0,Ie.P)(ie,re)}remove(re){const{_finalizers:ie}=this;ie&&(0,Ie.P)(ie,re),re instanceof ye&&re._removeParent(this)}}ye.EMPTY=(()=>{const Ne=new ye;return Ne.closed=!0,Ne})();const me=ye.EMPTY;function Ce(Ne){return Ne instanceof ye||Ne&&"closed"in Ne&&(0,D.m)(Ne.remove)&&(0,D.m)(Ne.add)&&(0,D.m)(Ne.unsubscribe)}function He(Ne){(0,D.m)(Ne)?Ne():Ne.unsubscribe()}},2653:(Ht,Fe,$)=>{$.d(Fe,{config:()=>D});const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(Ht,Fe,$)=>{$.d(Fe,{z:()=>ye});var D=$(7537),x=$(4564),Ie=$(2459);function ye(...me){return function oe(){return(0,D.J)(1)}()((0,Ie.D)(me,(0,x.yG)(me)))}},6232:(Ht,Fe,$)=>{$.d(Fe,{E:()=>oe});const oe=new($(5592).y)(ye=>ye.complete())},2459:(Ht,Fe,$)=>{$.d(Fe,{D:()=>je});var D=$(4829),oe=$(3093),x=$(5137),me=$(5592),He=$(4971),Ne=$(4674),re=$(7103);function ge(De,Ve){if(!De)throw new Error("Iterable cannot be null");return new me.y(Ye=>{(0,re.f)(Ye,Ve,()=>{const ot=De[Symbol.asyncIterator]();(0,re.f)(Ye,Ve,()=>{ot.next().then(ae=>{ae.done?Ye.complete():Ye.next(ae.value)})},0,!0)})})}var Qe=$(8382),ze=$(4026),We=$(4266),Je=$(3664),ht=$(5726),at=$(9853),Lt=$(541);function je(De,Ve){return Ve?function we(De,Ve){if(null!=De){if((0,Qe.c)(De))return function Ie(De,Ve){return(0,D.Xf)(De).pipe((0,x.R)(Ve),(0,oe.Q)(Ve))}(De,Ve);if((0,We.z)(De))return function Ce(De,Ve){return new me.y(Ye=>{let ot=0;return Ve.schedule(function(){ot===De.length?Ye.complete():(Ye.next(De[ot++]),Ye.closed||this.schedule())})})}(De,Ve);if((0,ze.t)(De))return function ye(De,Ve){return(0,D.Xf)(De).pipe((0,x.R)(Ve),(0,oe.Q)(Ve))}(De,Ve);if((0,ht.D)(De))return ge(De,Ve);if((0,Je.T)(De))return function ie(De,Ve){return new me.y(Ye=>{let ot;return(0,re.f)(Ye,Ve,()=>{ot=De[He.h](),(0,re.f)(Ye,Ve,()=>{let ae,Zt;try{({value:ae,done:Zt}=ot.next())}catch(ct){return void Ye.error(ct)}Zt?Ye.complete():Ye.next(ae)},0,!0)}),()=>(0,Ne.m)(ot?.return)&&ot.return()})}(De,Ve);if((0,Lt.L)(De))return function Te(De,Ve){return ge((0,Lt.Q)(De),Ve)}(De,Ve)}throw(0,at.z)(De)}(De,Ve):(0,D.Xf)(De)}},4829:(Ht,Fe,$)=>{$.d(Fe,{Xf:()=>Qe});var D=$(7582),oe=$(4266),x=$(4026),Ie=$(5592),ye=$(8382),me=$(5726),Ce=$(9853),He=$(3664),Ne=$(541),re=$(4674),ie=$(3894),ge=$(4850);function Qe(we){if(we instanceof Ie.y)return we;if(null!=we){if((0,ye.c)(we))return function ze(we){return new Ie.y(je=>{const De=we[ge.L]();if((0,re.m)(De.subscribe))return De.subscribe(je);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(we);if((0,oe.z)(we))return function We(we){return new Ie.y(je=>{for(let De=0;De<we.length&&!je.closed;De++)je.next(we[De]);je.complete()})}(we);if((0,x.t)(we))return function Je(we){return new Ie.y(je=>{we.then(De=>{je.closed||(je.next(De),je.complete())},De=>je.error(De)).then(null,ie.h)})}(we);if((0,me.D)(we))return at(we);if((0,He.T)(we))return function ht(we){return new Ie.y(je=>{for(const De of we)if(je.next(De),je.closed)return;je.complete()})}(we);if((0,Ne.L)(we))return function Lt(we){return at((0,Ne.Q)(we))}(we)}throw(0,Ce.z)(we)}function at(we){return new Ie.y(je=>{(function Te(we,je){var De,Ve,Ye,ot;return(0,D.mG)(this,void 0,void 0,function*(){try{for(De=(0,D.KL)(we);!(Ve=yield De.next()).done;)if(je.next(Ve.value),je.closed)return}catch(ae){Ye={error:ae}}finally{try{Ve&&!Ve.done&&(ot=De.return)&&(yield ot.call(De))}finally{if(Ye)throw Ye.error}}je.complete()})})(we,je).catch(De=>je.error(De))})}},3019:(Ht,Fe,$)=>{$.d(Fe,{T:()=>me});var D=$(7537),oe=$(4829),x=$(6232),Ie=$(4564),ye=$(2459);function me(...Ce){const He=(0,Ie.yG)(Ce),Ne=(0,Ie._6)(Ce,1/0),re=Ce;return re.length?1===re.length?(0,oe.Xf)(re[0]):(0,D.J)(Ne)((0,ye.D)(re,He)):x.E}},2096:(Ht,Fe,$)=>{$.d(Fe,{of:()=>x});var D=$(4564),oe=$(2459);function x(...Ie){const ye=(0,D.yG)(Ie);return(0,oe.D)(Ie,ye)}},8251:(Ht,Fe,$)=>{$.d(Fe,{x:()=>oe});var D=$(305);function oe(Ie,ye,me,Ce,He){return new x(Ie,ye,me,Ce,He)}class x extends D.Lv{constructor(ye,me,Ce,He,Ne,re){super(ye),this.onFinalize=Ne,this.shouldUnsubscribe=re,this._next=me?function(ie){try{me(ie)}catch(ge){ye.error(ge)}}:super._next,this._error=He?function(ie){try{He(ie)}catch(ge){ye.error(ge)}finally{this.unsubscribe()}}:super._error,this._complete=Ce?function(){try{Ce()}catch(ie){ye.error(ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ye;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(ye=this.onFinalize)||void 0===ye||ye.call(this))}}}},3572:(Ht,Fe,$)=>{$.d(Fe,{d:()=>x});var D=$(9360),oe=$(8251);function x(Ie){return(0,D.e)((ye,me)=>{let Ce=!1;ye.subscribe((0,oe.x)(me,He=>{Ce=!0,me.next(He)},()=>{Ce||me.next(Ie),me.complete()}))})}},3997:(Ht,Fe,$)=>{$.d(Fe,{x:()=>Ie});var D=$(2737),oe=$(9360),x=$(8251);function Ie(me,Ce=D.y){return me=me??ye,(0,oe.e)((He,Ne)=>{let re,ie=!0;He.subscribe((0,x.x)(Ne,ge=>{const Qe=Ce(ge);(ie||!me(re,Qe))&&(ie=!1,re=Qe,Ne.next(ge))}))})}function ye(me,Ce){return me===Ce}},2181:(Ht,Fe,$)=>{$.d(Fe,{h:()=>x});var D=$(9360),oe=$(8251);function x(Ie,ye){return(0,D.e)((me,Ce)=>{let He=0;me.subscribe((0,oe.x)(Ce,Ne=>Ie.call(ye,Ne,He++)&&Ce.next(Ne)))})}},1374:(Ht,Fe,$)=>{$.d(Fe,{P:()=>Ce});var D=$(6973),oe=$(2181),x=$(8180),Ie=$(3572),ye=$(3026),me=$(2737);function Ce(He,Ne){const re=arguments.length>=2;return ie=>ie.pipe(He?(0,oe.h)((ge,Qe)=>He(ge,Qe,ie)):me.y,(0,x.q)(1),re?(0,Ie.d)(Ne):(0,ye.T)(()=>new D.K))}},7398:(Ht,Fe,$)=>{$.d(Fe,{U:()=>x});var D=$(9360),oe=$(8251);function x(Ie,ye){return(0,D.e)((me,Ce)=>{let He=0;me.subscribe((0,oe.x)(Ce,Ne=>{Ce.next(Ie.call(ye,Ne,He++))}))})}},7537:(Ht,Fe,$)=>{$.d(Fe,{J:()=>x});var D=$(1631),oe=$(2737);function x(Ie=1/0){return(0,D.z)(oe.y,Ie)}},1631:(Ht,Fe,$)=>{$.d(Fe,{z:()=>He});var D=$(7398),oe=$(4829),x=$(9360),Ie=$(7103),ye=$(8251),Ce=$(4674);function He(Ne,re,ie=1/0){return(0,Ce.m)(re)?He((ge,Qe)=>(0,D.U)((ze,We)=>re(ge,ze,Qe,We))((0,oe.Xf)(Ne(ge,Qe))),ie):("number"==typeof re&&(ie=re),(0,x.e)((ge,Qe)=>function me(Ne,re,ie,ge,Qe,ze,We,Je){const ht=[];let at=0,Lt=0,Te=!1;const we=()=>{Te&&!ht.length&&!at&&re.complete()},je=Ve=>at<ge?De(Ve):ht.push(Ve),De=Ve=>{ze&&re.next(Ve),at++;let Ye=!1;(0,oe.Xf)(ie(Ve,Lt++)).subscribe((0,ye.x)(re,ot=>{Qe?.(ot),ze?je(ot):re.next(ot)},()=>{Ye=!0},void 0,()=>{if(Ye)try{for(at--;ht.length&&at<ge;){const ot=ht.shift();We?(0,Ie.f)(re,We,()=>De(ot)):De(ot)}we()}catch(ot){re.error(ot)}}))};return Ne.subscribe((0,ye.x)(re,je,()=>{Te=!0,we()})),()=>{Je?.()}}(ge,Qe,Ne,ie)))}},3093:(Ht,Fe,$)=>{$.d(Fe,{Q:()=>Ie});var D=$(7103),oe=$(9360),x=$(8251);function Ie(ye,me=0){return(0,oe.e)((Ce,He)=>{Ce.subscribe((0,x.x)(He,Ne=>(0,D.f)(He,ye,()=>He.next(Ne),me),()=>(0,D.f)(He,ye,()=>He.complete(),me),Ne=>(0,D.f)(He,ye,()=>He.error(Ne),me)))})}},6699:(Ht,Fe,$)=>{$.d(Fe,{R:()=>Ie});var D=$(9360),oe=$(8251);function Ie(ye,me){return(0,D.e)(function x(ye,me,Ce,He,Ne){return(re,ie)=>{let ge=Ce,Qe=me,ze=0;re.subscribe((0,oe.x)(ie,We=>{const Je=ze++;Qe=ge?ye(Qe,We,Je):(ge=!0,We),He&&ie.next(Qe)},Ne&&(()=>{ge&&ie.next(Qe),ie.complete()})))}}(ye,me,arguments.length>=2,!0))}},3020:(Ht,Fe,$)=>{$.d(Fe,{B:()=>ye});var D=$(4829),oe=$(8645),x=$(305),Ie=$(9360);function ye(Ce={}){const{connector:He=(()=>new oe.x),resetOnError:Ne=!0,resetOnComplete:re=!0,resetOnRefCountZero:ie=!0}=Ce;return ge=>{let Qe,ze,We,Je=0,ht=!1,at=!1;const Lt=()=>{ze?.unsubscribe(),ze=void 0},Te=()=>{Lt(),Qe=We=void 0,ht=at=!1},we=()=>{const je=Qe;Te(),je?.unsubscribe()};return(0,Ie.e)((je,De)=>{Je++,!at&&!ht&&Lt();const Ve=We=We??He();De.add(()=>{Je--,0===Je&&!at&&!ht&&(ze=me(we,ie))}),Ve.subscribe(De),!Qe&&Je>0&&(Qe=new x.Hp({next:Ye=>Ve.next(Ye),error:Ye=>{at=!0,Lt(),ze=me(Te,Ne,Ye),Ve.error(Ye)},complete:()=>{ht=!0,Lt(),ze=me(Te,re),Ve.complete()}}),(0,D.Xf)(je).subscribe(Qe))})(ge)}}function me(Ce,He,...Ne){if(!0===He)return void Ce();if(!1===He)return;const re=new x.Hp({next:()=>{re.unsubscribe(),Ce()}});return(0,D.Xf)(He(...Ne)).subscribe(re)}},7921:(Ht,Fe,$)=>{$.d(Fe,{O:()=>Ie});var D=$(5211),oe=$(4564),x=$(9360);function Ie(...ye){const me=(0,oe.yG)(ye);return(0,x.e)((Ce,He)=>{(me?(0,D.z)(ye,Ce,me):(0,D.z)(ye,Ce)).subscribe(He)})}},5137:(Ht,Fe,$)=>{$.d(Fe,{R:()=>oe});var D=$(9360);function oe(x,Ie=0){return(0,D.e)((ye,me)=>{me.add(x.schedule(()=>ye.subscribe(me),Ie))})}},4664:(Ht,Fe,$)=>{$.d(Fe,{w:()=>Ie});var D=$(4829),oe=$(9360),x=$(8251);function Ie(ye,me){return(0,oe.e)((Ce,He)=>{let Ne=null,re=0,ie=!1;const ge=()=>ie&&!Ne&&He.complete();Ce.subscribe((0,x.x)(He,Qe=>{Ne?.unsubscribe();let ze=0;const We=re++;(0,D.Xf)(ye(Qe,We)).subscribe(Ne=(0,x.x)(He,Je=>He.next(me?me(Qe,Je,We,ze++):Je),()=>{Ne=null,ge()}))},()=>{ie=!0,ge()}))})}},8180:(Ht,Fe,$)=>{$.d(Fe,{q:()=>Ie});var D=$(6232),oe=$(9360),x=$(8251);function Ie(ye){return ye<=0?()=>D.E:(0,oe.e)((me,Ce)=>{let He=0;me.subscribe((0,x.x)(Ce,Ne=>{++He<=ye&&(Ce.next(Ne),ye<=He&&Ce.complete())}))})}},9397:(Ht,Fe,$)=>{$.d(Fe,{b:()=>ye});var D=$(4674),oe=$(9360),x=$(8251),Ie=$(2737);function ye(me,Ce,He){const Ne=(0,D.m)(me)||Ce||He?{next:me,error:Ce,complete:He}:me;return Ne?(0,oe.e)((re,ie)=>{var ge;null===(ge=Ne.subscribe)||void 0===ge||ge.call(Ne);let Qe=!0;re.subscribe((0,x.x)(ie,ze=>{var We;null===(We=Ne.next)||void 0===We||We.call(Ne,ze),ie.next(ze)},()=>{var ze;Qe=!1,null===(ze=Ne.complete)||void 0===ze||ze.call(Ne),ie.complete()},ze=>{var We;Qe=!1,null===(We=Ne.error)||void 0===We||We.call(Ne,ze),ie.error(ze)},()=>{var ze,We;Qe&&(null===(ze=Ne.unsubscribe)||void 0===ze||ze.call(Ne)),null===(We=Ne.finalize)||void 0===We||We.call(Ne)}))}):Ie.y}},3026:(Ht,Fe,$)=>{$.d(Fe,{T:()=>Ie});var D=$(6973),oe=$(9360),x=$(8251);function Ie(me=ye){return(0,oe.e)((Ce,He)=>{let Ne=!1;Ce.subscribe((0,x.x)(He,re=>{Ne=!0,He.next(re)},()=>Ne?He.complete():He.error(me())))})}function ye(){return new D.K}},1954:(Ht,Fe,$)=>{$.d(Fe,{o:()=>ye});var D=$(7394);class oe extends D.w0{constructor(Ce,He){super()}schedule(Ce,He=0){return this}}const x={setInterval(me,Ce,...He){const{delegate:Ne}=x;return Ne?.setInterval?Ne.setInterval(me,Ce,...He):setInterval(me,Ce,...He)},clearInterval(me){const{delegate:Ce}=x;return(Ce?.clearInterval||clearInterval)(me)},delegate:void 0};var Ie=$(9039);class ye extends oe{constructor(Ce,He){super(Ce,He),this.scheduler=Ce,this.work=He,this.pending=!1}schedule(Ce,He=0){var Ne;if(this.closed)return this;this.state=Ce;const re=this.id,ie=this.scheduler;return null!=re&&(this.id=this.recycleAsyncId(ie,re,He)),this.pending=!0,this.delay=He,this.id=null!==(Ne=this.id)&&void 0!==Ne?Ne:this.requestAsyncId(ie,this.id,He),this}requestAsyncId(Ce,He,Ne=0){return x.setInterval(Ce.flush.bind(Ce,this),Ne)}recycleAsyncId(Ce,He,Ne=0){if(null!=Ne&&this.delay===Ne&&!1===this.pending)return He;null!=He&&x.clearInterval(He)}execute(Ce,He){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ne=this._execute(Ce,He);if(Ne)return Ne;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ce,He){let re,Ne=!1;try{this.work(Ce)}catch(ie){Ne=!0,re=ie||new Error("Scheduled action threw falsy error")}if(Ne)return this.unsubscribe(),re}unsubscribe(){if(!this.closed){const{id:Ce,scheduler:He}=this,{actions:Ne}=He;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ie.P)(Ne,this),null!=Ce&&(this.id=this.recycleAsyncId(He,Ce,null)),this.delay=null,super.unsubscribe()}}}},2631:(Ht,Fe,$)=>{$.d(Fe,{v:()=>x});var D=$(4552);class oe{constructor(ye,me=oe.now){this.schedulerActionCtor=ye,this.now=me}schedule(ye,me=0,Ce){return new this.schedulerActionCtor(this,ye).schedule(Ce,me)}}oe.now=D.l.now;class x extends oe{constructor(ye,me=oe.now){super(ye,me),this.actions=[],this._active=!1}flush(ye){const{actions:me}=this;if(this._active)return void me.push(ye);let Ce;this._active=!0;do{if(Ce=ye.execute(ye.state,ye.delay))break}while(ye=me.shift());if(this._active=!1,Ce){for(;ye=me.shift();)ye.unsubscribe();throw Ce}}}},6321:(Ht,Fe,$)=>{$.d(Fe,{z:()=>x});var D=$(1954);const x=new($(2631).v)(D.o)},4552:(Ht,Fe,$)=>{$.d(Fe,{l:()=>D});const D={now:()=>(D.delegate||Date).now(),delegate:void 0}},7599:(Ht,Fe,$)=>{$.d(Fe,{z:()=>D});const D={setTimeout(oe,x,...Ie){const{delegate:ye}=D;return ye?.setTimeout?ye.setTimeout(oe,x,...Ie):setTimeout(oe,x,...Ie)},clearTimeout(oe){const{delegate:x}=D;return(x?.clearTimeout||clearTimeout)(oe)},delegate:void 0}},4971:(Ht,Fe,$)=>{$.d(Fe,{h:()=>oe});const oe=function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Ht,Fe,$)=>{$.d(Fe,{L:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(Ht,Fe,$)=>{$.d(Fe,{K:()=>oe});const oe=(0,$(2306).d)(x=>function(){x(this),this.name="EmptyError",this.message="no elements in sequence"})},4564:(Ht,Fe,$)=>{$.d(Fe,{_6:()=>me,jO:()=>Ie,yG:()=>ye});var D=$(4674);function x(Ce){return Ce[Ce.length-1]}function Ie(Ce){return(0,D.m)(x(Ce))?Ce.pop():void 0}function ye(Ce){return function oe(Ce){return Ce&&(0,D.m)(Ce.schedule)}(x(Ce))?Ce.pop():void 0}function me(Ce,He){return"number"==typeof x(Ce)?Ce.pop():He}},9039:(Ht,Fe,$)=>{function D(oe,x){if(oe){const Ie=oe.indexOf(x);0<=Ie&&oe.splice(Ie,1)}}$.d(Fe,{P:()=>D})},2306:(Ht,Fe,$)=>{function D(oe){const Ie=oe(ye=>{Error.call(ye),ye.stack=(new Error).stack});return Ie.prototype=Object.create(Error.prototype),Ie.prototype.constructor=Ie,Ie}$.d(Fe,{d:()=>D})},1441:(Ht,Fe,$)=>{$.d(Fe,{O:()=>Ie,x:()=>x});var D=$(2653);let oe=null;function x(ye){if(D.config.useDeprecatedSynchronousErrorHandling){const me=!oe;if(me&&(oe={errorThrown:!1,error:null}),ye(),me){const{errorThrown:Ce,error:He}=oe;if(oe=null,Ce)throw He}}else ye()}function Ie(ye){D.config.useDeprecatedSynchronousErrorHandling&&oe&&(oe.errorThrown=!0,oe.error=ye)}},7103:(Ht,Fe,$)=>{function D(oe,x,Ie,ye=0,me=!1){const Ce=x.schedule(function(){Ie(),me?oe.add(this.schedule(null,ye)):this.unsubscribe()},ye);if(oe.add(Ce),!me)return Ce}$.d(Fe,{f:()=>D})},2737:(Ht,Fe,$)=>{function D(oe){return oe}$.d(Fe,{y:()=>D})},4266:(Ht,Fe,$)=>{$.d(Fe,{z:()=>D});const D=oe=>oe&&"number"==typeof oe.length&&"function"!=typeof oe},5726:(Ht,Fe,$)=>{$.d(Fe,{D:()=>oe});var D=$(4674);function oe(x){return Symbol.asyncIterator&&(0,D.m)(x?.[Symbol.asyncIterator])}},4674:(Ht,Fe,$)=>{function D(oe){return"function"==typeof oe}$.d(Fe,{m:()=>D})},8382:(Ht,Fe,$)=>{$.d(Fe,{c:()=>x});var D=$(4850),oe=$(4674);function x(Ie){return(0,oe.m)(Ie[D.L])}},3664:(Ht,Fe,$)=>{$.d(Fe,{T:()=>x});var D=$(4971),oe=$(4674);function x(Ie){return(0,oe.m)(Ie?.[D.h])}},4026:(Ht,Fe,$)=>{$.d(Fe,{t:()=>oe});var D=$(4674);function oe(x){return(0,D.m)(x?.then)}},541:(Ht,Fe,$)=>{$.d(Fe,{L:()=>Ie,Q:()=>x});var D=$(7582),oe=$(4674);function x(ye){return(0,D.FC)(this,arguments,function*(){const Ce=ye.getReader();try{for(;;){const{value:He,done:Ne}=yield(0,D.qq)(Ce.read());if(Ne)return yield(0,D.qq)(void 0);yield yield(0,D.qq)(He)}}finally{Ce.releaseLock()}})}function Ie(ye){return(0,oe.m)(ye?.getReader)}},9360:(Ht,Fe,$)=>{$.d(Fe,{A:()=>oe,e:()=>x});var D=$(4674);function oe(Ie){return(0,D.m)(Ie?.lift)}function x(Ie){return ye=>{if(oe(ye))return ye.lift(function(me){try{return Ie(me,this)}catch(Ce){this.error(Ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(Ht,Fe,$)=>{function D(){}$.d(Fe,{Z:()=>D})},8407:(Ht,Fe,$)=>{$.d(Fe,{U:()=>x,z:()=>oe});var D=$(2737);function oe(...Ie){return x(Ie)}function x(Ie){return 0===Ie.length?D.y:1===Ie.length?Ie[0]:function(me){return Ie.reduce((Ce,He)=>He(Ce),me)}}},3894:(Ht,Fe,$)=>{$.d(Fe,{h:()=>x});var D=$(2653),oe=$(7599);function x(Ie){oe.z.setTimeout(()=>{const{onUnhandledError:ye}=D.config;if(!ye)throw Ie;ye(Ie)})}},9853:(Ht,Fe,$)=>{function D(oe){return new TypeError(`You provided ${null!==oe&&"object"==typeof oe?"an invalid object":`'${oe}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}$.d(Fe,{z:()=>D})},6814:(Ht,Fe,$)=>{$.d(Fe,{Do:()=>Je,EM:()=>es,HT:()=>Ie,JF:()=>ts,K0:()=>me,Mx:()=>Fr,O5:()=>Fs,Ov:()=>Vo,PM:()=>Xi,S$:()=>Qe,V_:()=>He,Ye:()=>ht,b0:()=>We,bD:()=>hr,ez:()=>as,mk:()=>Yi,q:()=>x,sg:()=>an,w_:()=>ye});var D=$(5879);let oe=null;function x(){return oe}function Ie(h){oe||(oe=h)}class ye{}const me=new D.OlP("DocumentToken");let Ce=(()=>{class h{historyGo(v){throw new Error("Not implemented")}static#e=this.\u0275fac=function(M){return new(M||h)};static#t=this.\u0275prov=D.Yz7({token:h,factory:function(){return(0,D.f3M)(Ne)},providedIn:"platform"})}return h})();const He=new D.OlP("Location Initialized");let Ne=(()=>{class h extends Ce{constructor(){super(),this._doc=(0,D.f3M)(me),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return x().getBaseHref(this._doc)}onPopState(v){const M=x().getGlobalEventTarget(this._doc,"window");return M.addEventListener("popstate",v,!1),()=>M.removeEventListener("popstate",v)}onHashChange(v){const M=x().getGlobalEventTarget(this._doc,"window");return M.addEventListener("hashchange",v,!1),()=>M.removeEventListener("hashchange",v)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(v){this._location.pathname=v}pushState(v,M,B){this._history.pushState(v,M,B)}replaceState(v,M,B){this._history.replaceState(v,M,B)}forward(){this._history.forward()}back(){this._history.back()}historyGo(v=0){this._history.go(v)}getState(){return this._history.state}static#e=this.\u0275fac=function(M){return new(M||h)};static#t=this.\u0275prov=D.Yz7({token:h,factory:function(){return new h},providedIn:"platform"})}return h})();function re(h,A){if(0==h.length)return A;if(0==A.length)return h;let v=0;return h.endsWith("/")&&v++,A.startsWith("/")&&v++,2==v?h+A.substring(1):1==v?h+A:h+"/"+A}function ie(h){const A=h.match(/#|\?|$/),v=A&&A.index||h.length;return h.slice(0,v-("/"===h[v-1]?1:0))+h.slice(v)}function ge(h){return h&&"?"!==h[0]?"?"+h:h}let Qe=(()=>{class h{historyGo(v){throw new Error("Not implemented")}static#e=this.\u0275fac=function(M){return new(M||h)};static#t=this.\u0275prov=D.Yz7({token:h,factory:function(){return(0,D.f3M)(We)},providedIn:"root"})}return h})();const ze=new D.OlP("appBaseHref");let We=(()=>{class h extends Qe{constructor(v,M){super(),this._platformLocation=v,this._removeListenerFns=[],this._baseHref=M??this._platformLocation.getBaseHrefFromDOM()??(0,D.f3M)(me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(v){this._removeListenerFns.push(this._platformLocation.onPopState(v),this._platformLocation.onHashChange(v))}getBaseHref(){return this._baseHref}prepareExternalUrl(v){return re(this._baseHref,v)}path(v=!1){const M=this._platformLocation.pathname+ge(this._platformLocation.search),B=this._platformLocation.hash;return B&&v?`${M}${B}`:M}pushState(v,M,B,X){const se=this.prepareExternalUrl(B+ge(X));this._platformLocation.pushState(v,M,se)}replaceState(v,M,B,X){const se=this.prepareExternalUrl(B+ge(X));this._platformLocation.replaceState(v,M,se)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(v=0){this._platformLocation.historyGo?.(v)}static#e=this.\u0275fac=function(M){return new(M||h)(D.LFG(Ce),D.LFG(ze,8))};static#t=this.\u0275prov=D.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})(),Je=(()=>{class h extends Qe{constructor(v,M){super(),this._platformLocation=v,this._baseHref="",this._removeListenerFns=[],null!=M&&(this._baseHref=M)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(v){this._removeListenerFns.push(this._platformLocation.onPopState(v),this._platformLocation.onHashChange(v))}getBaseHref(){return this._baseHref}path(v=!1){let M=this._platformLocation.hash;return null==M&&(M="#"),M.length>0?M.substring(1):M}prepareExternalUrl(v){const M=re(this._baseHref,v);return M.length>0?"#"+M:M}pushState(v,M,B,X){let se=this.prepareExternalUrl(B+ge(X));0==se.length&&(se=this._platformLocation.pathname),this._platformLocation.pushState(v,M,se)}replaceState(v,M,B,X){let se=this.prepareExternalUrl(B+ge(X));0==se.length&&(se=this._platformLocation.pathname),this._platformLocation.replaceState(v,M,se)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(v=0){this._platformLocation.historyGo?.(v)}static#e=this.\u0275fac=function(M){return new(M||h)(D.LFG(Ce),D.LFG(ze,8))};static#t=this.\u0275prov=D.Yz7({token:h,factory:h.\u0275fac})}return h})(),ht=(()=>{class h{constructor(v){this._subject=new D.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=v;const M=this._locationStrategy.getBaseHref();this._basePath=function we(h){if(new RegExp("^(https?:)?//").test(h)){const[,v]=h.split(/\/\/[^\/]+/);return v}return h}(ie(Te(M))),this._locationStrategy.onPopState(B=>{this._subject.emit({url:this.path(!0),pop:!0,state:B.state,type:B.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(v=!1){return this.normalize(this._locationStrategy.path(v))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(v,M=""){return this.path()==this.normalize(v+ge(M))}normalize(v){return h.stripTrailingSlash(function Lt(h,A){if(!h||!A.startsWith(h))return A;const v=A.substring(h.length);return""===v||["/",";","?","#"].includes(v[0])?v:A}(this._basePath,Te(v)))}prepareExternalUrl(v){return v&&"/"!==v[0]&&(v="/"+v),this._locationStrategy.prepareExternalUrl(v)}go(v,M="",B=null){this._locationStrategy.pushState(B,"",v,M),this._notifyUrlChangeListeners(this.prepareExternalUrl(v+ge(M)),B)}replaceState(v,M="",B=null){this._locationStrategy.replaceState(B,"",v,M),this._notifyUrlChangeListeners(this.prepareExternalUrl(v+ge(M)),B)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(v=0){this._locationStrategy.historyGo?.(v)}onUrlChange(v){return this._urlChangeListeners.push(v),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(M=>{this._notifyUrlChangeListeners(M.url,M.state)})),()=>{const M=this._urlChangeListeners.indexOf(v);this._urlChangeListeners.splice(M,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(v="",M){this._urlChangeListeners.forEach(B=>B(v,M))}subscribe(v,M,B){return this._subject.subscribe({next:v,error:M,complete:B})}static#e=this.normalizeQueryParams=ge;static#t=this.joinWithSlash=re;static#n=this.stripTrailingSlash=ie;static#r=this.\u0275fac=function(M){return new(M||h)(D.LFG(Qe))};static#i=this.\u0275prov=D.Yz7({token:h,factory:function(){return function at(){return new ht((0,D.LFG)(Qe))}()},providedIn:"root"})}return h})();function Te(h){return h.replace(/\/index.html$/,"")}function Fr(h,A){A=encodeURIComponent(A);for(const v of h.split(";")){const M=v.indexOf("="),[B,X]=-1==M?[v,""]:[v.slice(0,M),v.slice(M+1)];if(B.trim()===A)return decodeURIComponent(X)}return null}const Yr=/\s+/,Xs=[];let Yi=(()=>{class h{constructor(v,M,B,X){this._iterableDiffers=v,this._keyValueDiffers=M,this._ngEl=B,this._renderer=X,this.initialClasses=Xs,this.stateMap=new Map}set klass(v){this.initialClasses=null!=v?v.trim().split(Yr):Xs}set ngClass(v){this.rawClass="string"==typeof v?v.trim().split(Yr):v}ngDoCheck(){for(const M of this.initialClasses)this._updateState(M,!0);const v=this.rawClass;if(Array.isArray(v)||v instanceof Set)for(const M of v)this._updateState(M,!0);else if(null!=v)for(const M of Object.keys(v))this._updateState(M,!!v[M]);this._applyStateDiff()}_updateState(v,M){const B=this.stateMap.get(v);void 0!==B?(B.enabled!==M&&(B.changed=!0,B.enabled=M),B.touched=!0):this.stateMap.set(v,{enabled:M,changed:!0,touched:!0})}_applyStateDiff(){for(const v of this.stateMap){const M=v[0],B=v[1];B.changed?(this._toggleClass(M,B.enabled),B.changed=!1):B.touched||(B.enabled&&this._toggleClass(M,!1),this.stateMap.delete(M)),B.touched=!1}}_toggleClass(v,M){(v=v.trim()).length>0&&v.split(Yr).forEach(B=>{M?this._renderer.addClass(this._ngEl.nativeElement,B):this._renderer.removeClass(this._ngEl.nativeElement,B)})}static#e=this.\u0275fac=function(M){return new(M||h)(D.Y36(D.ZZ4),D.Y36(D.aQg),D.Y36(D.SBq),D.Y36(D.Qsj))};static#t=this.\u0275dir=D.lG2({type:h,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return h})();class Ls{constructor(A,v,M,B){this.$implicit=A,this.ngForOf=v,this.index=M,this.count=B}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let an=(()=>{class h{set ngForOf(v){this._ngForOf=v,this._ngForOfDirty=!0}set ngForTrackBy(v){this._trackByFn=v}get ngForTrackBy(){return this._trackByFn}constructor(v,M,B){this._viewContainer=v,this._template=M,this._differs=B,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(v){v&&(this._template=v)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const v=this._ngForOf;!this._differ&&v&&(this._differ=this._differs.find(v).create(this.ngForTrackBy))}if(this._differ){const v=this._differ.diff(this._ngForOf);v&&this._applyChanges(v)}}_applyChanges(v){const M=this._viewContainer;v.forEachOperation((B,X,se)=>{if(null==B.previousIndex)M.createEmbeddedView(this._template,new Ls(B.item,this._ngForOf,-1,-1),null===se?void 0:se);else if(null==se)M.remove(null===X?void 0:X);else if(null!==X){const Ue=M.get(X);M.move(Ue,se),_r(Ue,B)}});for(let B=0,X=M.length;B<X;B++){const Ue=M.get(B).context;Ue.index=B,Ue.count=X,Ue.ngForOf=this._ngForOf}v.forEachIdentityChange(B=>{_r(M.get(B.currentIndex),B)})}static ngTemplateContextGuard(v,M){return!0}static#e=this.\u0275fac=function(M){return new(M||h)(D.Y36(D.s_b),D.Y36(D.Rgc),D.Y36(D.ZZ4))};static#t=this.\u0275dir=D.lG2({type:h,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return h})();function _r(h,A){h.context.$implicit=A.item}let Fs=(()=>{class h{constructor(v,M){this._viewContainer=v,this._context=new To,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=M}set ngIf(v){this._context.$implicit=this._context.ngIf=v,this._updateView()}set ngIfThen(v){xi("ngIfThen",v),this._thenTemplateRef=v,this._thenViewRef=null,this._updateView()}set ngIfElse(v){xi("ngIfElse",v),this._elseTemplateRef=v,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(v,M){return!0}static#e=this.\u0275fac=function(M){return new(M||h)(D.Y36(D.s_b),D.Y36(D.Rgc))};static#t=this.\u0275dir=D.lG2({type:h,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return h})();class To{constructor(){this.$implicit=null,this.ngIf=null}}function xi(h,A){if(A&&!A.createEmbeddedView)throw new Error(`${h} must be a TemplateRef, but received '${(0,D.AaK)(A)}'.`)}class As{createSubscription(A,v){return(0,D.rg0)(()=>A.subscribe({next:v,error:M=>{throw M}}))}dispose(A){(0,D.rg0)(()=>A.unsubscribe())}}class ps{createSubscription(A,v){return A.then(v,M=>{throw M})}dispose(A){}}const Do=new ps,Bs=new As;let Vo=(()=>{class h{constructor(v){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=v}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(v){return this._obj?v!==this._obj?(this._dispose(),this.transform(v)):this._latestValue:(v&&this._subscribe(v),this._latestValue)}_subscribe(v){this._obj=v,this._strategy=this._selectStrategy(v),this._subscription=this._strategy.createSubscription(v,M=>this._updateLatestValue(v,M))}_selectStrategy(v){if((0,D.QGY)(v))return Do;if((0,D.F4k)(v))return Bs;throw function ar(h,A){return new D.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(v,M){v===this._obj&&(this._latestValue=M,this._ref.markForCheck())}static#e=this.\u0275fac=function(M){return new(M||h)(D.Y36(D.sBO,16))};static#t=this.\u0275pipe=D.Yjl({name:"async",type:h,pure:!1,standalone:!0})}return h})(),as=(()=>{class h{static#e=this.\u0275fac=function(M){return new(M||h)};static#t=this.\u0275mod=D.oAB({type:h});static#n=this.\u0275inj=D.cJS({})}return h})();const hr="browser",us="server";function Xi(h){return h===us}let es=(()=>{class h{static#e=this.\u0275prov=(0,D.Yz7)({token:h,providedIn:"root",factory:()=>new zr((0,D.LFG)(me),window)})}return h})();class zr{constructor(A,v){this.document=A,this.window=v,this.offset=()=>[0,0]}setOffset(A){this.offset=Array.isArray(A)?()=>A:A}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(A){this.supportsScrolling()&&this.window.scrollTo(A[0],A[1])}scrollToAnchor(A){if(!this.supportsScrolling())return;const v=function gs(h,A){const v=h.getElementById(A)||h.getElementsByName(A)[0];if(v)return v;if("function"==typeof h.createTreeWalker&&h.body&&"function"==typeof h.body.attachShadow){const M=h.createTreeWalker(h.body,NodeFilter.SHOW_ELEMENT);let B=M.currentNode;for(;B;){const X=B.shadowRoot;if(X){const se=X.getElementById(A)||X.querySelector(`[name="${A}"]`);if(se)return se}B=M.nextNode()}}return null}(this.document,A);v&&(this.scrollToElement(v),v.focus())}setHistoryScrollRestoration(A){this.supportsScrolling()&&(this.window.history.scrollRestoration=A)}scrollToElement(A){const v=A.getBoundingClientRect(),M=v.left+this.window.pageXOffset,B=v.top+this.window.pageYOffset,X=this.offset();this.window.scrollTo(M-X[0],B-X[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class ts{}},5879:(Ht,Fe,$)=>{$.d(Fe,{$8M:()=>Gc,$WT:()=>Vr,$Z:()=>ml,AFp:()=>Ug,ALo:()=>KT,AaK:()=>ge,CHM:()=>ci,CRH:()=>cw,EJc:()=>xA,EpF:()=>LE,F4k:()=>Zy,FYo:()=>Ph,FiY:()=>qo,GfV:()=>op,HDt:()=>Mw,JOm:()=>Za,KtG:()=>vn,LFG:()=>Qt,LSH:()=>Gf,Lbi:()=>Bg,Lck:()=>mD,MAs:()=>zy,MMx:()=>kT,NdJ:()=>Qm,Ojb:()=>q_,OlP:()=>Ct,Oqu:()=>Zp,P3R:()=>Rg,PXZ:()=>uC,Q6J:()=>$p,QGY:()=>Zm,QbO:()=>Gv,Qsj:()=>Mh,R0b:()=>ws,RDi:()=>ah,Rgc:()=>E_,SBq:()=>Iu,Sil:()=>LA,Suo:()=>uw,TTD:()=>nt,TgZ:()=>Hp,VuI:()=>zC,X6Q:()=>mC,XFs:()=>st,Xpm:()=>ps,Xq5:()=>Fm,Xts:()=>gh,Y36:()=>Dc,YKP:()=>xT,YNc:()=>xE,Yjl:()=>Ci,Yz7:()=>Yt,Z0I:()=>Bn,ZZ4:()=>kI,_UZ:()=>zm,_c5:()=>NC,_uU:()=>dv,aQg:()=>LI,c2e:()=>Pw,cJS:()=>Dn,cg1:()=>nI,dDg:()=>iC,dqk:()=>Tn,eFA:()=>jw,eJc:()=>vI,eoX:()=>Fw,f3M:()=>_t,g9A:()=>Kf,h0i:()=>df,hGG:()=>xC,hij:()=>cf,iGM:()=>aw,ifc:()=>Bt,ip1:()=>Rw,jDz:()=>LT,kL8:()=>sT,lG2:()=>Jo,lcZ:()=>ZT,lqb:()=>Eu,lri:()=>kw,n5z:()=>da,oAB:()=>_i,oxw:()=>jE,q4F:()=>ap,qFp:()=>WC,qLn:()=>wu,qZA:()=>zp,rWj:()=>Lw,rg0:()=>X,sBO:()=>_C,s_b:()=>wv,soG:()=>Av,tb:()=>RI,tp0:()=>mu,uIk:()=>Vm,vHH:()=>we,vpe:()=>Oa,wAp:()=>Yp,xp6:()=>_p,z2F:()=>tg,zSh:()=>kg,zs3:()=>eu});var D=$(8645),oe=$(7394),x=$(5592),Ie=$(3019),ye=$(5619),me=$(2096),Ce=$(3020),He=$(4664),Ne=$(3997);function re(t){for(let r in t)if(t[r]===re)return r;throw Error("Could not find renamed property on target object.")}function ge(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ge).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Qe(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const ze=re({__forward_ref__:re});function We(t){return t.__forward_ref__=We,t.toString=function(){return ge(this())},t}function Je(t){return ht(t)?t():t}function ht(t){return"function"==typeof t&&t.hasOwnProperty(ze)&&t.__forward_ref__===We}function at(t){return t&&!!t.\u0275providers}const Te="https://g.co/ng/security#xss";class we extends Error{constructor(r,s){super(function je(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,s)),this.code=r}}function De(t){return"string"==typeof t?t:null==t?"":String(t)}function Zt(t,r){throw new we(-201,!1)}function mt(t,r){null==t&&function it(t,r,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function Yt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Dn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Rn(t){return Dr(t,Ir)||Dr(t,qr)}function Bn(t){return null!==Rn(t)}function Dr(t,r){return t.hasOwnProperty(r)?t[r]:null}function Rr(t){return t&&(t.hasOwnProperty(Wr)||t.hasOwnProperty(fi))?t[Wr]:null}const Ir=re({\u0275prov:re}),Wr=re({\u0275inj:re}),qr=re({ngInjectableDef:re}),fi=re({ngInjectorDef:re});var st=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(st||{});let on;function Fn(t){const r=on;return on=t,r}function Ai(t,r,s){const a=Rn(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&st.Optional?null:void 0!==r?r:void Zt(ge(t))}const Tn=globalThis;class Ct{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Yt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const gi={},zi="__NG_DI_FLAG__",Zr="ngTempTokenPath",q=/\n/gm,Z="__source";let K;function Ge(t){const r=K;return K=t,r}function lt(t,r=st.Default){if(void 0===K)throw new we(-203,!1);return null===K?Ai(t,void 0,r):K.get(t,r&st.Optional?null:void 0,r)}function Qt(t,r=st.Default){return(function jt(){return on}()||lt)(Je(t),r)}function _t(t,r=st.Default){return Qt(t,Ft(r))}function Ft(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function qn(t){const r=[];for(let s=0;s<t.length;s++){const a=Je(t[s]);if(Array.isArray(a)){if(0===a.length)throw new we(900,!1);let c,f=st.Default;for(let _=0;_<a.length;_++){const C=a[_],R=Qr(C);"number"==typeof R?-1===R?c=C.token:f|=R:c=C}r.push(Qt(c,f))}else r.push(Qt(a))}return r}function mi(t,r){return t[zi]=r,t.prototype[zi]=r,t}function Qr(t){return t[zi]}function Ae(t){return{toString:t}.toString()}var tt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(tt||{}),Bt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Bt||{});const Pt={},vt=[],fn=re({\u0275cmp:re}),rr=re({\u0275dir:re}),ir=re({\u0275pipe:re}),si=re({\u0275mod:re}),Fr=re({\u0275fac:re}),Yr=re({__NG_ELEMENT_ID__:re}),Xs=re({__NG_ENV_ID__:re});function Yi(t,r,s){let a=t.length;for(;;){const c=t.indexOf(r,s);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const f=r.length;if(c+f===a||t.charCodeAt(c+f)<=32)return c}s=c+1}}function Io(t,r,s){let a=0;for(;a<s.length;){const c=s[a];if("number"==typeof c){if(0!==c)break;a++;const f=s[a++],_=s[a++],C=s[a++];t.setAttribute(r,_,C,f)}else{const f=c,_=s[++a];Ls(f)?t.setProperty(r,f,_):t.setAttribute(r,f,_),a++}}return a}function fs(t){return 3===t||4===t||6===t}function Ls(t){return 64===t.charCodeAt(0)}function an(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const c=r[a];"number"==typeof c?s=c:0===s||_r(t,s,c,null,-1===s||2===s?r[++a]:null)}}return t}function _r(t,r,s,a,c){let f=0,_=t.length;if(-1===r)_=-1;else for(;f<t.length;){const C=t[f++];if("number"==typeof C){if(C===r){_=-1;break}if(C>r){_=f-1;break}}}for(;f<t.length;){const C=t[f];if("number"==typeof C)break;if(C===s){if(null===a)return void(null!==c&&(t[f+1]=c));if(a===t[f+1])return void(t[f+2]=c)}f++,null!==a&&f++,null!==c&&f++}-1!==_&&(t.splice(_,0,r),f=_+1),t.splice(f++,0,s),null!==a&&t.splice(f++,0,a),null!==c&&t.splice(f++,0,c)}const Ni="ng-template";function Fs(t,r,s){let a=0,c=!0;for(;a<t.length;){let f=t[a++];if("string"==typeof f&&c){const _=t[a++];if(s&&"class"===f&&-1!==Yi(_.toLowerCase(),r,0))return!0}else{if(1===f){for(;a<t.length&&"string"==typeof(f=t[a++]);)if(f.toLowerCase()===r)return!0;return!1}"number"==typeof f&&(c=!1)}}return!1}function To(t){return 4===t.type&&t.value!==Ni}function xi(t,r,s){return r===(4!==t.type||s?t.value:Ni)}function Vs(t,r,s){let a=4;const c=t.attrs||[],f=function Us(t){for(let r=0;r<t.length;r++)if(fs(t[r]))return r;return t.length}(c);let _=!1;for(let C=0;C<r.length;C++){const R=r[C];if("number"!=typeof R){if(!_)if(4&a){if(a=2|1&a,""!==R&&!xi(t,R,s)||""===R&&1===r.length){if(Jr(a))return!1;_=!0}}else{const V=8&a?R:r[++C];if(8&a&&null!==t.attrs){if(!Fs(t.attrs,V,s)){if(Jr(a))return!1;_=!0}continue}const ne=Ji(8&a?"class":R,c,To(t),s);if(-1===ne){if(Jr(a))return!1;_=!0;continue}if(""!==V){let _e;_e=ne>f?"":c[ne+1].toLowerCase();const Se=8&a?_e:null;if(Se&&-1!==Yi(Se,V,0)||2&a&&V!==_e){if(Jr(a))return!1;_=!0}}}}else{if(!_&&!Jr(a)&&!Jr(R))return!1;if(_&&Jr(R))continue;_=!1,a=R|1&a}}return Jr(a)||_}function Jr(t){return 0==(1&t)}function Ji(t,r,s,a){if(null===r)return-1;let c=0;if(a||!s){let f=!1;for(;c<r.length;){const _=r[c];if(_===t)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let C=r[++c];for(;"string"==typeof C;)C=r[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function wo(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function Ds(t,r,s=!1){for(let a=0;a<r.length;a++)if(Vs(t,r[a],s))return!0;return!1}function jn(t,r){return t?":not("+r.trim()+")":r}function to(t){let r=t[0],s=1,a=2,c="",f=!1;for(;s<t.length;){let _=t[s];if("string"==typeof _)if(2&a){const C=t[++s];c+="["+_+(C.length>0?'="'+C+'"':"")+"]"}else 8&a?c+="."+_:4&a&&(c+=" "+_);else""!==c&&!Jr(_)&&(r+=jn(f,c),c=""),a=_,f=f||!Jr(a);s++}return""!==c&&(r+=jn(f,c)),r}function ps(t){return Ae(()=>{const r=no(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===tt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Bt.Emulated,styles:t.styles||vt,_:null,schemas:t.schemas||null,tView:null,id:""};ro(s);const a=t.dependencies;return s.directiveDefs=Cs(a,!1),s.pipeDefs=Cs(a,!0),s.id=function Ss(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const c of s)r=Math.imul(31,r)+c.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(s),s})}function Bs(t){return yn(t)||Pr(t)}function Vo(t){return null!==t}function _i(t){return Ae(()=>({type:t.type,bootstrap:t.bootstrap||vt,declarations:t.declarations||vt,imports:t.imports||vt,exports:t.exports||vt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function js(t,r){if(null==t)return Pt;const s={};for(const a in t)if(t.hasOwnProperty(a)){let c=t[a],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),s[c]=a,r&&(r[c]=f)}return s}function Jo(t){return Ae(()=>{const r=no(t);return ro(r),r})}function Ci(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function yn(t){return t[fn]||null}function Pr(t){return t[rr]||null}function yi(t){return t[ir]||null}function Vr(t){const r=yn(t)||Pr(t)||yi(t);return null!==r&&r.standalone}function ei(t,r){const s=t[si]||null;if(!s&&!0===r)throw new Error(`Type ${ge(t)} does not have '\u0275mod' property.`);return s}function no(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||Pt,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||vt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:js(t.inputs,r),outputs:js(t.outputs)}}function ro(t){t.features?.forEach(r=>r(t))}function Cs(t,r){if(!t)return null;const s=r?yi:Bs;return()=>("function"==typeof t?t():t).map(a=>s(a)).filter(Vo)}const ur=0,Et=1,en=2,bn=3,Tr=4,Hr=5,Mr=6,as=7,hr=8,us=9,vi=10,Gt=11,Oi=12,Xi=13,Ur=14,cr=15,Vn=16,es=17,zr=18,gs=19,io=20,ts=21,ms=22,_s=23,ki=24,An=25,Si=1,Ao=2,Li=7,oi=9,ai=11;function Fi(t){return Array.isArray(t)&&"object"==typeof t[Si]}function Vi(t){return Array.isArray(t)&&!0===t[Si]}function ys(t){return 0!=(4&t.flags)}function so(t){return t.componentOffset>-1}function $s(t){return 1==(1&t.flags)}function Gi(t){return!!t.template}function Bo(t){return 0!=(512&t[en])}function ti(t,r){return t.hasOwnProperty(Fr)?t[Fr]:null}let L=null,Q=!1;function J(t){const r=L;return L=t,r}const le={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Xe(t){if(!Nn(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Yn(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function tn(t){t.dirty=!0,function kt(t){if(void 0===t.liveConsumerNode)return;const r=Q;Q=!0;try{for(const s of t.liveConsumerNode)s.dirty||tn(s)}finally{Q=r}}(t),t.consumerMarkedDirty?.(t)}function dn(t){return t&&(t.nextProducerIndex=0),J(t)}function lr(t,r){if(J(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Nn(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)ui(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Yn(t){bi(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==s.version||(Xe(s),a!==s.version))return!0}return!1}function pr(t){if(bi(t),Nn(t))for(let r=0;r<t.producerNode.length;r++)ui(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function ui(t,r){if(function qi(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),bi(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)ui(t.producerNode[a],t.producerIndexOfThis[a]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],c=t.liveConsumerNode[r];bi(c),c.producerIndexOfThis[a]=r}}function Nn(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function bi(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Ui=null;function X(t){const r=J(null);try{return t()}finally{J(r)}}const Ue=()=>{},dt=(()=>({...le,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Ue}))();class yt{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function nt(){return Mt}function Mt(t){return t.type.prototype.ngOnChanges&&(t.setInput=wn),sn}function sn(){const t=Jn(this),r=t?.current;if(r){const s=t.previous;if(s===Pt)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function wn(t,r,s,a){const c=this.declaredInputs[s],f=Jn(t)||function sr(t,r){return t[Zn]=r}(t,{previous:Pt,current:null}),_=f.current||(f.current={}),C=f.previous,R=C[c];_[c]=new yt(R&&R.currentValue,r,C===Pt),t[a]=r}nt.ngInherit=!0;const Zn="__ngSimpleChanges__";function Jn(t){return t[Zn]||null}const zn=function(t,r,s){};function Un(t){for(;Array.isArray(t);)t=t[ur];return t}function Pi(t,r){return Un(r[t.index])}function Mo(t,r){return t.data[r]}function zt(t,r){return t[r]}function Dt(t,r){const s=r[t];return Fi(s)?s:s[ur]}function Zi(t,r){return null==r?null:t[r]}function Ke(t){t[es]=0}function yr(t){1024&t[en]||(t[en]|=1024,Ba(t,1))}function pn(t){1024&t[en]&&(t[en]&=-1025,Ba(t,-1))}function Ba(t,r){let s=t[bn];if(null===s)return;s[Hr]+=r;let a=s;for(s=s[bn];null!==s&&(1===r&&1===a[Hr]||-1===r&&0===a[Hr]);)s[Hr]+=r,a=s,s=s[bn]}const nn={lFrame:Wo(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Yu(){return nn.bindingsEnabled}function rt(){return nn.lFrame.lView}function or(){return nn.lFrame.tView}function ci(t){return nn.lFrame.contextLView=t,t[hr]}function vn(t){return nn.lFrame.contextLView=null,t}function Br(){let t=Fc();for(;null!==t&&64===t.type;)t=t.parent;return t}function Fc(){return nn.lFrame.currentTNode}function qt(t,r){const s=nn.lFrame;s.currentTNode=t,s.isParent=r}function Aa(){return nn.lFrame.isParent}function Ca(){return nn.lFrame.bindingIndex++}function Ju(t,r){const s=nn.lFrame;s.bindingIndex=s.bindingRootIndex=t,Rs(r)}function Rs(t){nn.lFrame.currentDirectiveIndex=t}function Bc(){return nn.lFrame.currentQueryIndex}function ua(t){nn.lFrame.currentQueryIndex=t}function $a(t){const r=t[Et];return 2===r.type?r.declTNode:1===r.type?t[Mr]:null}function jc(t,r,s){if(s&st.SkipSelf){let c=r,f=t;for(;!(c=c.parent,null!==c||s&st.Host||(c=$a(f),null===c||(f=f[Ur],10&c.type))););if(null===c)return!1;r=c,t=f}const a=nn.lFrame=Xu();return a.currentTNode=r,a.lView=t,!0}function Me(t){const r=Xu(),s=t[Et];nn.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Xu(){const t=nn.lFrame,r=null===t?null:t.child;return null===r?Wo(t):r}function Wo(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function ec(){const t=nn.lFrame;return nn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const w=ec;function b(){const t=ec();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function k(){return nn.lFrame.selectedIndex}function W(t){nn.lFrame.selectedIndex=t}function te(){const t=nn.lFrame;return Mo(t.tView,t.selectedIndex)}let _n=!0;function Ks(){return _n}function ho(t){_n=t}function Ha(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const f=t.data[s].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:C,ngAfterViewInit:R,ngAfterViewChecked:V,ngOnDestroy:G}=f;_&&(t.contentHooks??=[]).push(-s,_),C&&((t.contentHooks??=[]).push(s,C),(t.contentCheckHooks??=[]).push(s,C)),R&&(t.viewHooks??=[]).push(-s,R),V&&((t.viewHooks??=[]).push(s,V),(t.viewCheckHooks??=[]).push(s,V)),null!=G&&(t.destroyHooks??=[]).push(s,G)}}function Zs(t,r,s){Hc(t,r,3,s)}function bu(t,r,s,a){(3&t[en])===s&&Hc(t,r,s,a)}function $c(t,r){let s=t[en];(3&s)===r&&(s&=8191,s+=1,t[en]=s)}function Hc(t,r,s,a){const f=a??-1,_=r.length-1;let C=0;for(let R=void 0!==a?65535&t[es]:0;R<_;R++)if("number"==typeof r[R+1]){if(C=r[R],null!=a&&C>=a)break}else r[R]<0&&(t[es]+=65536),(C<f||-1==f)&&(rg(t,s,r,R),t[es]=(4294901760&t[es])+R+2),R++}function Rl(t,r){zn(4,t,r);const s=J(null);try{r.call(t)}finally{J(s),zn(5,t,r)}}function rg(t,r,s,a){const c=s[a]<0,f=s[a+1],C=t[c?-s[a]:s[a]];c?t[en]>>13<t[es]>>16&&(3&t[en])===r&&(t[en]+=8192,Rl(C,f)):Rl(C,f)}const cu=-1;class za{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function kd(t){return t!==cu}function lu(t){return 32767&t}function du(t,r){let s=function og(t){return t>>16}(t),a=r;for(;s>0;)a=a[Ur],s--;return a}let Pl=!0;function tc(t){const r=Pl;return Pl=t,r}const ls=255,Pu=5;let hu=0;const ca={};function Ga(t,r){const s=Or(t,r);if(-1!==s)return s;const a=r[Et];a.firstCreatePass&&(t.injectorIndex=r.length,Qi(a.data,t),Qi(r,null),Qi(a.blueprint,null));const c=Mu(t,r),f=t.injectorIndex;if(kd(c)){const _=lu(c),C=du(c,r),R=C[Et].data;for(let V=0;V<8;V++)r[f+V]=C[_+V]|R[_+V]}return r[f+8]=c,f}function Qi(t,r){t.push(0,0,0,0,0,0,0,0,r)}function Or(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Mu(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,c=r;for(;null!==c;){if(a=Sa(c),null===a)return cu;if(s++,c=c[Ur],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return cu}function Wa(t,r,s){!function $r(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Yr)&&(a=s[Yr]),null==a&&(a=s[Yr]=hu++);const c=a&ls;r.data[t+(c>>Pu)]|=1<<c}(t,r,s)}function Ld(t,r,s){if(s&st.Optional||void 0!==t)return t;Zt()}function mf(t,r,s,a){if(s&st.Optional&&void 0===a&&(a=null),!(s&(st.Self|st.Host))){const c=t[us],f=Fn(void 0);try{return c?c.get(r,a,s&st.Optional):Ai(r,a,s&st.Optional)}finally{Fn(f)}}return Ld(a,0,s)}function Bi(t,r,s,a=st.Default,c){if(null!==t){if(2048&r[en]&&!(a&st.Self)){const _=function rc(t,r,s,a,c){let f=t,_=r;for(;null!==f&&null!==_&&2048&_[en]&&!(512&_[en]);){const C=_f(f,_,s,a|st.Self,ca);if(C!==ca)return C;let R=f.parent;if(!R){const V=_[io];if(V){const G=V.get(s,ca,a);if(G!==ca)return G}R=Sa(_),_=_[Ur]}f=R}return c}(t,r,s,a,ca);if(_!==ca)return _}const f=_f(t,r,s,a,ca);if(f!==ca)return f}return mf(r,s,a,c)}function _f(t,r,s,a,c){const f=function Nl(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(Yr)?t[Yr]:void 0;return"number"==typeof r?r>=0?r&ls:zc:r}(s);if("function"==typeof f){if(!jc(r,t,a))return a&st.Host?Ld(c,0,a):mf(r,s,a,c);try{let _;if(_=f(a),null!=_||a&st.Optional)return _;Zt()}finally{w()}}else if("number"==typeof f){let _=null,C=Or(t,r),R=cu,V=a&st.Host?r[cr][Mr]:null;for((-1===C||a&st.SkipSelf)&&(R=-1===C?Mu(t,r):r[C+8],R!==cu&&nc(a,!1)?(_=r[Et],C=lu(R),r=du(R,r)):C=-1);-1!==C;){const G=r[Et];if(Nu(f,C,G.data)){const ne=fu(C,r,s,_,a,V);if(ne!==ca)return ne}R=r[C+8],R!==cu&&nc(a,r[Et].data[C+8]===V)&&Nu(f,C,r)?(_=G,C=lu(R),r=du(R,r)):C=-1}}return c}function fu(t,r,s,a,c,f){const _=r[Et],C=_.data[t+8],G=Gr(C,_,s,null==a?so(C)&&Pl:a!=_&&0!=(3&C.type),c&st.Host&&f===C);return null!==G?po(r,_,G,C):ca}function Gr(t,r,s,a,c){const f=t.providerIndexes,_=r.data,C=1048575&f,R=t.directiveStart,G=f>>20,_e=c?C+G:t.directiveEnd;for(let Se=a?C:C+G;Se<_e;Se++){const qe=_[Se];if(Se<R&&s===qe||Se>=R&&qe.type===s)return Se}if(c){const Se=_[R];if(Se&&Gi(Se)&&Se.type===s)return R}return null}function po(t,r,s,a){let c=t[s];const f=r.data;if(function Ru(t){return t instanceof za}(c)){const _=c;_.resolving&&function Ye(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new we(-200,`Circular dependency in DI detected for ${t}${s}`)}(function Ve(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():De(t)}(f[s]));const C=tc(_.canSeeViewProviders);_.resolving=!0;const V=_.injectImpl?Fn(_.injectImpl):null;jc(t,a,st.Default);try{c=t[s]=_.factory(void 0,f,t,a),r.firstCreatePass&&s>=a.directiveStart&&function Ts(t,r,s){const{ngOnChanges:a,ngOnInit:c,ngDoCheck:f}=r.type.prototype;if(a){const _=Mt(r);(s.preOrderHooks??=[]).push(t,_),(s.preOrderCheckHooks??=[]).push(t,_)}c&&(s.preOrderHooks??=[]).push(0-t,c),f&&((s.preOrderHooks??=[]).push(t,f),(s.preOrderCheckHooks??=[]).push(t,f))}(s,f[s],r)}finally{null!==V&&Fn(V),tc(C),_.resolving=!1,w()}}return c}function Nu(t,r,s){return!!(s[r+(t>>Pu)]&1<<t)}function nc(t,r){return!(t&st.Self||t&st.Host&&r)}class wi{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return Bi(this._tNode,this._lView,r,Ft(a),s)}}function zc(){return new wi(Br(),rt())}function da(t){return Ae(()=>{const r=t.prototype.constructor,s=r[Fr]||ea(r),a=Object.prototype;let c=Object.getPrototypeOf(t.prototype).constructor;for(;c&&c!==a;){const f=c[Fr]||ea(c);if(f&&f!==s)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function ea(t){return ht(t)?()=>{const r=ea(Je(t));return r&&r()}:ti(t)}function Sa(t){const r=t[Et],s=r.type;return 2===s?r.declTNode:1===s?t[Mr]:null}function Gc(t){return function fo(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let c=0;for(;c<a;){const f=s[c];if(fs(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<a&&"string"==typeof s[c];)c++;else{if(f===r)return s[c+1];c+=2}}}return null}(Br(),t)}const qa="__parameters__";function ba(t,r,s){return Ae(()=>{const a=function Wc(t){return function(...s){if(t){const a=t(...s);for(const c in a)this[c]=a[c]}}}(r);function c(...f){if(this instanceof c)return a.apply(this,f),this;const _=new c(...f);return C.annotation=_,C;function C(R,V,G){const ne=R.hasOwnProperty(qa)?R[qa]:Object.defineProperty(R,qa,{value:[]})[qa];for(;ne.length<=G;)ne.push(null);return(ne[G]=ne[G]||[]).push(_),R}}return s&&(c.prototype=Object.create(s.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}function sc(t,r){t.forEach(s=>Array.isArray(s)?sc(s,r):r(s))}function Bd(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function Hn(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}const qo=mi(ba("Optional"),8),mu=mi(ba("SkipSelf"),4);function ga(t){return 128==(128&t.flags)}var Za=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Za||{});const el=new Map;let li=0;const Zo="__ngContext__";function Ms(t,r){Fi(r)?(t[Zo]=r[gs],function hc(t){el.set(t[gs],t)}(r)):t[Zo]=r}let ql;function ra(t,r){return ql(t,r)}function Bu(t){const r=t[bn];return Vi(r)?r[bn]:r}function tl(t){return fc(t[Oi])}function Kl(t){return fc(t[Tr])}function fc(t){for(;null!==t&&!Vi(t);)t=t[Tr];return t}function Pa(t,r,s,a,c){if(null!=a){let f,_=!1;Vi(a)?f=a:Fi(a)&&(_=!0,a=a[ur]);const C=Un(a);0===t&&null!==s?null==c?ju(r,s,C):Ja(r,s,C,c||null,!0):1===t&&null!==s?Ja(r,s,C,c||null,!0):2===t?function sh(t,r,s){const a=Ma(t,r);a&&function Ql(t,r,s,a){t.removeChild(r,s,a)}(t,a,r,s)}(r,C,_):3===t&&r.destroyNode(C),null!=f&&function gc(t,r,s,a,c){const f=s[Li];f!==Un(s)&&Pa(r,t,a,f,c);for(let C=ai;C<s.length;C++){const R=s[C];oh(R[Et],R,t,r,a,f)}}(r,t,f,s,c)}}function p(t,r,s){return t.createElement(r,s)}function xt(t,r){const s=t[oi],a=s.indexOf(r);pn(r),s.splice(a,1)}function Kt(t,r){if(t.length<=ai)return;const s=ai+r,a=t[s];if(a){const c=a[Vn];null!==c&&c!==t&&xt(c,a),r>0&&(t[s-1][Tr]=a[Tr]);const f=Hn(t,ai+r);!function E(t,r){oh(t,r,r[Gt],2,null,null),r[ur]=null,r[Mr]=null}(a[Et],a);const _=f[zr];null!==_&&_.detachView(f[Et]),a[bn]=null,a[Tr]=null,a[en]&=-129}return a}function Wt(t,r){if(!(256&r[en])){const s=r[Gt];r[_s]&&pr(r[_s]),r[ki]&&pr(r[ki]),s.destroyNode&&oh(t,r,s,3,null,null),function ue(t){let r=t[Oi];if(!r)return br(t[Et],t);for(;r;){let s=null;if(Fi(r))s=r[Oi];else{const a=r[ai];a&&(s=a)}if(!s){for(;r&&!r[Tr]&&r!==t;)Fi(r)&&br(r[Et],r),r=r[bn];null===r&&(r=t),Fi(r)&&br(r[Et],r),s=r&&r[Tr]}r=s}}(r)}}function br(t,r){if(!(256&r[en])){r[en]&=-129,r[en]|=256,function Zl(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const c=r[s[a]];if(!(c instanceof za)){const f=s[a+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const C=c[f[_]],R=f[_+1];zn(4,C,R);try{R.call(C)}finally{zn(5,C,R)}}else{zn(4,c,f);try{f.call(c)}finally{zn(5,c,f)}}}}}(t,r),function ia(t,r){const s=t.cleanup,a=r[as];if(null!==s)for(let f=0;f<s.length-1;f+=2)if("string"==typeof s[f]){const _=s[f+3];_>=0?a[_]():a[-_].unsubscribe(),f+=2}else s[f].call(a[s[f+1]]);null!==a&&(r[as]=null);const c=r[ts];if(null!==c){r[ts]=null;for(let f=0;f<c.length;f++)(0,c[f])()}}(t,r),1===r[Et].type&&r[Gt].destroy();const s=r[Vn];if(null!==s&&Vi(r[bn])){s!==r[bn]&&xt(s,r);const a=r[zr];null!==a&&a.detachView(t)}!function Ko(t){el.delete(t[gs])}(r)}}function Di(t,r,s){return function pc(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[ur];{const{componentOffset:c}=a;if(c>-1){const{encapsulation:f}=t.data[a.directiveStart+c];if(f===Bt.None||f===Bt.Emulated)return null}return Pi(a,s)}}(t,r.parent,s)}function Ja(t,r,s,a,c){t.insertBefore(r,s,a,c)}function ju(t,r,s){t.appendChild(r,s)}function Qo(t,r,s,a,c){null!==a?Ja(t,r,s,a,c):ju(t,r,s)}function Ma(t,r){return t.parentNode(r)}let _g,$u,nd,kf=function nl(t,r,s){return 40&t.type?Pi(t,s):null};function Jl(t,r,s,a){const c=Di(t,a,r),f=r[Gt],C=function nh(t,r,s){return kf(t,r,s)}(a.parent||r[Mr],a,r);if(null!=c)if(Array.isArray(s))for(let R=0;R<s.length;R++)Qo(f,c,s[R],C,!1);else Qo(f,c,s,C,!1);void 0!==_g&&_g(f,a,r,s,c)}function rh(t,r){if(null!==r){const s=r.type;if(3&s)return Pi(r,t);if(4&s)return ih(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return rh(t,a);{const c=t[r.index];return Vi(c)?ih(-1,c):Un(c)}}if(32&s)return ra(r,t)()||Un(t[r.index]);{const a=yg(t,r);return null!==a?Array.isArray(a)?a[0]:rh(Bu(t[cr]),a):rh(t,r.next)}}return null}function yg(t,r){return null!==r?t[cr][Mr].projection[r.projection]:null}function ih(t,r){const s=ai+t+1;if(s<r.length){const a=r[s],c=a[Et].firstChild;if(null!==c)return rh(a,c)}return r[Li]}function Lf(t,r,s,a,c,f,_){for(;null!=s;){const C=a[s.index],R=s.type;if(_&&0===r&&(C&&Ms(Un(C),a),s.flags|=2),32!=(32&s.flags))if(8&R)Lf(t,r,s.child,a,c,f,!1),Pa(r,t,c,C,f);else if(32&R){const V=ra(s,a);let G;for(;G=V();)Pa(r,t,c,G,f);Pa(r,t,c,C,f)}else 16&R?R_(t,r,a,s,c,f):Pa(r,t,c,C,f);s=_?s.projectionNext:s.next}}function oh(t,r,s,a,c,f){Lf(s,a,t.firstChild,r,c,f,!1)}function R_(t,r,s,a,c,f){const _=s[cr],R=_[Mr].projection[a.projection];if(Array.isArray(R))for(let V=0;V<R.length;V++)Pa(r,t,c,R[V],f);else{let V=R;const G=_[bn];ga(a)&&(V.flags|=128),Lf(t,r,V,G,c,f,!0)}}function M_(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function vg(t,r,s){const{mergedAttrs:a,classes:c,styles:f}=s;null!==a&&Io(t,r,a),null!==c&&M_(t,r,c),null!==f&&function P_(t,r,s){t.setAttribute(r,"style",s)}(t,r,f)}function ah(t){$u=t}function x_(t){return function uh(){if(void 0===nd&&(nd=null,Tn.trustedTypes))try{nd=Tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return nd}()?.createScriptURL(t)||t}class Tg{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Te})`}}function Hu(t){return t instanceof Tg?t.changingThisBreaksApplicationSecurity:t}function lh(t,r){const s=function xv(t){return t instanceof Tg&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${Te})`)}return s===r}const Ag=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var xa=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(xa||{});function Gf(t){const r=sd();return r?r.sanitize(xa.URL,t)||"":lh(t,"URL")?Hu(t):function jf(t){return(t=String(t)).match(Ag)?t:"unsafe:"+t}(De(t))}function zu(t){const r=sd();if(r)return x_(r.sanitize(xa.RESOURCE_URL,t)||"");if(lh(t,"ResourceURL"))return x_(Hu(t));throw new we(904,!1)}function Rg(t,r,s){return function Vv(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?zu:Gf}(r,s)(t)}function sd(){const t=rt();return t&&t[vi].sanitizer}const gh=new Ct("ENVIRONMENT_INITIALIZER"),Mg=new Ct("INJECTOR",-1),H_=new Ct("INJECTOR_DEF_TYPES");class Wf{get(r,s=gi){if(s===gi){const a=new Error(`NullInjectorError: No provider for ${ge(r)}!`);throw a.name="NullInjectorError",a}return s}}function mh(...t){return{\u0275providers:Ng(0,t),\u0275fromNgModule:!0}}function Ng(t,...r){const s=[],a=new Set;let c;const f=_=>{s.push(_)};return sc(r,_=>{const C=_;qf(C,f,[],a)&&(c||=[],c.push(C))}),void 0!==c&&xg(c,f),s}function xg(t,r){for(let s=0;s<t.length;s++){const{ngModule:a,providers:c}=t[s];Og(c,f=>{r(f,a)})}}function qf(t,r,s,a){if(!(t=Je(t)))return!1;let c=null,f=Rr(t);const _=!f&&yn(t);if(f||_){if(_&&!_.standalone)return!1;c=t}else{const R=t.ngModule;if(f=Rr(R),!f)return!1;c=R}const C=a.has(c);if(_){if(C)return!1;if(a.add(c),_.dependencies){const R="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const V of R)qf(V,r,s,a)}}else{if(!f)return!1;{if(null!=f.imports&&!C){let V;a.add(c);try{sc(f.imports,G=>{qf(G,r,s,a)&&(V||=[],V.push(G))})}finally{}void 0!==V&&xg(V,r)}if(!C){const V=ti(c)||(()=>new c);r({provide:c,useFactory:V,deps:vt},c),r({provide:H_,useValue:c,multi:!0},c),r({provide:gh,useValue:()=>Qt(c),multi:!0},c)}const R=f.providers;if(null!=R&&!C){const V=t;Og(R,G=>{r(G,V)})}}}return c!==t&&void 0!==t.providers}function Og(t,r){for(let s of t)at(s)&&(s=s.\u0275providers),Array.isArray(s)?Og(s,r):r(s)}const Bv=re({provide:String,useValue:re});function _h(t){return null!==t&&"object"==typeof t&&Bv in t}function ul(t){return"function"==typeof t}const kg=new Ct("Set Injector scope."),od={},$v={};let ad;function cl(){return void 0===ad&&(ad=new Wf),ad}class Eu{}class ll extends Eu{get destroyed(){return this._destroyed}constructor(r,s,a,c){super(),this.parent=s,this.source=a,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vg(r,_=>this.processProvider(_)),this.records.set(Mg,Ec(void 0,this)),c.has("environment")&&this.records.set(Eu,Ec(void 0,this));const f=this.records.get(kg);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(H_.multi,vt,st.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=Ge(this),a=Fn(void 0);try{return r()}finally{Ge(s),Fn(a)}}get(r,s=gi,a=st.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(Xs))return r[Xs](this);a=Ft(a);const f=Ge(this),_=Fn(void 0);try{if(!(a&st.SkipSelf)){let R=this.records.get(r);if(void 0===R){const V=function G_(t){return"function"==typeof t||"object"==typeof t&&t instanceof Ct}(r)&&Rn(r);R=V&&this.injectableDefInScope(V)?Ec(yh(r),od):null,this.records.set(r,R)}if(null!=R)return this.hydrate(r,R)}return(a&st.Self?cl():this.parent).get(r,s=a&st.Optional&&s===gi?null:s)}catch(C){if("NullInjectorError"===C.name){if((C[Zr]=C[Zr]||[]).unshift(ge(r)),f)throw C;return function ks(t,r,s,a){const c=t[Zr];throw r[Z]&&c.unshift(r[Z]),t.message=function Be(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let c=ge(r);if(Array.isArray(r))c=r.map(ge).join(" -> ");else if("object"==typeof r){let f=[];for(let _ in r)if(r.hasOwnProperty(_)){let C=r[_];f.push(_+":"+("string"==typeof C?JSON.stringify(C):ge(C)))}c=`{${f.join(", ")}}`}return`${s}${a?"("+a+")":""}[${c}]: ${t.replace(q,"\n  ")}`}("\n"+t.message,c,s,a),t.ngTokenPath=c,t[Zr]=null,t}(C,r,"R3InjectorError",this.source)}throw C}finally{Fn(_),Ge(f)}}resolveInjectorInitializers(){const r=Ge(this),s=Fn(void 0);try{const c=this.get(gh.multi,vt,st.Self);for(const f of c)f()}finally{Ge(r),Fn(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(ge(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(r){let s=ul(r=Je(r))?r:Je(r&&r.provide);const a=function vh(t){return _h(t)?Ec(void 0,t.useValue):Ec(function Eh(t,r,s){let a;if(ul(t)){const c=Je(t);return ti(c)||yh(c)}if(_h(t))a=()=>Je(t.useValue);else if(function z_(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...qn(t.deps||[]));else if(function Ns(t){return!(!t||!t.useExisting)}(t))a=()=>Qt(Je(t.useExisting));else{const c=Je(t&&(t.useClass||t.provide));if(!function Fg(t){return!!t.deps}(t))return ti(c)||yh(c);a=()=>new c(...qn(t.deps))}return a}(t),od)}(r);if(ul(r)||!0!==r.multi)this.records.get(s);else{let c=this.records.get(s);c||(c=Ec(void 0,od,!0),c.factory=()=>qn(c.multi),this.records.set(s,c)),s=r,c.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===od&&(s.value=$v,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Hv(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Je(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function yh(t){const r=Rn(t),s=null!==r?r.factory:ti(t);if(null!==s)return s;if(t instanceof Ct)throw new we(204,!1);if(t instanceof Function)return function Lg(t){const r=t.length;if(r>0)throw function gr(t,r){const s=[];for(let a=0;a<t;a++)s.push(r);return s}(r,"?"),new we(204,!1);const s=function Sn(t){return t&&(t[Ir]||t[qr])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new we(204,!1)}function Ec(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function Vg(t,r){for(const s of t)Array.isArray(s)?Vg(s,r):s&&at(s)?Vg(s.\u0275providers,r):r(s)}const Ug=new Ct("AppId",{providedIn:"root",factory:()=>W_}),W_="ng",Kf=new Ct("Platform Initializer"),Bg=new Ct("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Gv=new Ct("AnimationModuleType"),q_=new Ct("CSP nonce",{providedIn:"root",factory:()=>function il(){if(void 0!==$u)return $u;if(typeof document<"u")return document;throw new we(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ep=(t,r,s)=>null;function tp(t,r,s=!1){return ep(t,r,s)}class Zv{}class Z_{}class Yv{resolveComponentFactory(r){throw function Qv(t){const r=Error(`No component factory found for ${ge(t)}.`);return r.ngComponent=t,r}(r)}}let sp=(()=>{class t{static#e=this.NULL=new Yv}return t})();function Rh(){return Ic(Br(),rt())}function Ic(t,r){return new Iu(Pi(t,r))}let Iu=(()=>{class t{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=Rh}return t})();function zg(t){return t instanceof Iu?t.nativeElement:t}class Ph{}let Mh=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Gg(){const t=rt(),s=Dt(Br().index,t);return(Fi(s)?s:t)[Gt]}()}return t})(),J_=(()=>{class t{static#e=this.\u0275prov=Yt({token:t,providedIn:"root",factory:()=>null})}return t})();class op{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const ap=new op("16.2.12"),Tu={};function cp(t,r=null,s=null,a){const c=ty(t,r,s,a);return c.resolveInjectorInitializers(),c}function ty(t,r=null,s=null,a,c=new Set){const f=[s||vt,mh(t)];return a=a||("object"==typeof t?void 0:ge(t)),new ll(f,r||cl(),a||null,c)}let eu=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=gi;static#t=this.NULL=new Wf;static create(s,a){if(Array.isArray(s))return cp({name:""},a,s,"");{const c=s.name??"";return cp({name:c},s.parent,s.providers,c)}}static#n=this.\u0275prov=Yt({token:t,providedIn:"any",factory:()=>Qt(Mg)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function Yg(t){return t.ngOriginalError}class wu{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Yg(r);for(;s&&Yg(s);)s=Yg(s);return s||null}}function tm(t){return r=>{setTimeout(t,void 0,r)}}const Oa=class em extends D.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let c=r,f=s||(()=>null),_=a;if(r&&"object"==typeof r){const R=r;c=R.next?.bind(R),f=R.error?.bind(R),_=R.complete?.bind(R)}this.__isAsync&&(f=tm(f),c&&(c=tm(c)),_&&(_=tm(_)));const C=super.subscribe({next:c,error:f,complete:_});return r instanceof oe.w0&&r.add(C),C}};function nm(...t){}class ws{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Oa(!1),this.onMicrotaskEmpty=new Oa(!1),this.onStable=new Oa(!1),this.onError=new Oa(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!a&&s,c.shouldCoalesceRunChangeDetection=a,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function rm(){const t="function"==typeof Tn.requestAnimationFrame;let r=Tn[t?"requestAnimationFrame":"setTimeout"],s=Tn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&s){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function fd(t){const r=()=>{!function im(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Tn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Tc(t),t.isCheckStableRunning=!0,Du(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Tc(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,c,f,_,C)=>{if(function om(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(C))return s.invokeTask(c,f,_,C);try{return sm(t),s.invokeTask(c,f,_,C)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&r(),gl(t)}},onInvoke:(s,a,c,f,_,C,R)=>{try{return sm(t),s.invoke(c,f,_,C,R)}finally{t.shouldCoalesceRunChangeDetection&&r(),gl(t)}},onHasTask:(s,a,c,f)=>{s.hasTask(c,f),a===c&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,Tc(t),Du(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(s,a,c,f)=>(s.handleError(c,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ws.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(ws.isInAngularZone())throw new we(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,r,hd,nm,nm);try{return f.runTask(_,s,a)}finally{f.cancelTask(_)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const hd={};function Du(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Tc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function sm(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function gl(t){t._nesting--,Du(t)}class tE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Oa,this.onMicrotaskEmpty=new Oa,this.onStable=new Oa,this.onError=new Oa}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,c){return r.apply(s,a)}}const ry=new Ct("",{providedIn:"root",factory:lp});function lp(){const t=_t(ws);let r=!0;const s=new x.y(c=>{r=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{c.next(r),c.complete()})}),a=new x.y(c=>{let f;t.runOutsideAngular(()=>{f=t.onStable.subscribe(()=>{ws.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(r=!0,c.next(!0))})})});const _=t.onUnstable.subscribe(()=>{ws.assertInAngularZone(),r&&(r=!1,t.runOutsideAngular(()=>{c.next(!1)}))});return()=>{f.unsubscribe(),_.unsubscribe()}});return(0,Ie.T)(s,a.pipe((0,Ce.B)()))}function tu(t){return t instanceof Function?t():t}let dp=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Yt({token:t,providedIn:"root",factory:()=>new t})}return t})();function gd(t){for(;t;){t[en]|=64;const r=Bu(t);if(Bo(t)&&!r)return t;t=r}return null}const uy=new Ct("",{providedIn:"root",factory:()=>!1});let pp=null;function gp(t,r){return t[r]??mp()}function ly(t,r){const s=mp();s.producerNode?.length&&(t[r]=pp,s.lView=t,pp=dy())}const pm={...le,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{gd(t.lView)},lView:null};function dy(){return Object.create(pm)}function mp(){return pp??=dy(),pp}const xn={};function _p(t){yp(or(),rt(),k()+t,!1)}function yp(t,r,s,a){if(!a)if(3==(3&r[en])){const f=t.preOrderCheckHooks;null!==f&&Zs(r,f,s)}else{const f=t.preOrderHooks;null!==f&&bu(r,f,0,s)}W(s)}function Dc(t,r=st.Default){const s=rt();return null===s?Qt(t,r):Bi(Br(),s,Je(t),r)}function ml(){throw new Error("invalid")}function md(t,r,s,a,c,f,_,C,R,V,G){const ne=r.blueprint.slice();return ne[ur]=c,ne[en]=140|a,(null!==V||t&&2048&t[en])&&(ne[en]|=2048),Ke(ne),ne[bn]=ne[Ur]=t,ne[hr]=s,ne[vi]=_||t&&t[vi],ne[Gt]=C||t&&t[Gt],ne[us]=R||t&&t[us]||null,ne[Mr]=f,ne[gs]=function $l(){return li++}(),ne[ms]=G,ne[io]=V,ne[cr]=2==r.type?t[cr]:ne,ne}function _d(t,r,s,a,c){let f=t.data[r];if(null===f)f=function kh(t,r,s,a,c){const f=Fc(),_=Aa(),R=t.data[r]=function vm(t,r,s,a,c,f){let _=r?r.injectorIndex:-1,C=0;return function uu(){return null!==nn.skipHydrationRootTNode}()&&(C|=128),{type:s,index:a,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,s,r,a,c);return null===t.firstChild&&(t.firstChild=R),null!==f&&(_?null==f.child&&null!==R.parent&&(f.child=R):null===f.next&&(f.next=R,R.prev=f)),R}(t,r,s,a,c),function Vc(){return nn.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=s,f.value=a,f.attrs=c;const _=function vr(){const t=nn.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return qt(f,!0),f}function ma(t,r,s,a){if(0===s)return-1;const c=r.length;for(let f=0;f<s;f++)r.push(a),t.blueprint.push(a),t.data.push(null);return c}function vp(t,r,s,a,c){const f=gp(r,_s),_=k(),C=2&a;try{W(-1),C&&r.length>An&&yp(t,r,An,!1),zn(C?2:0,c);const V=C?f:null,G=dn(V);try{null!==V&&(V.dirty=!1),s(a,c)}finally{lr(V,G)}}finally{C&&null===r[_s]&&ly(r,_s),W(_),zn(C?3:1,c)}}function gm(t,r,s){if(ys(r)){const a=J(null);try{const f=r.directiveEnd;for(let _=r.directiveStart;_<f;_++){const C=t.data[_];C.contentQueries&&C.contentQueries(1,s[_],_)}}finally{J(a)}}}function Lh(t,r,s){Yu()&&(function _y(t,r,s,a){const c=s.directiveStart,f=s.directiveEnd;so(s)&&function Sm(t,r,s){const a=Pi(r,t),c=fy(s);let _=16;s.signals?_=4096:s.onPush&&(_=64);const C=Bh(t,md(t,c,null,_,a,r,null,t[vi].rendererFactory.createRenderer(a,s),null,null,null));t[r.index]=C}(r,s,t.data[c+s.componentOffset]),t.firstCreatePass||Ga(s,r),Ms(a,r);const _=s.initialInputs;for(let C=c;C<f;C++){const R=t.data[C],V=po(r,t,C,s);Ms(V,r),null!==_&&vy(0,C-c,V,R,0,_),Gi(R)&&(Dt(s.index,r)[hr]=po(r,t,C,s))}}(t,r,s,Pi(s,r)),64==(64&s.flags)&&_l(t,r,s))}function mm(t,r,s=Pi){const a=r.localNames;if(null!==a){let c=r.index+1;for(let f=0;f<a.length;f+=2){const _=a[f+1],C=-1===_?s(r,t):t[_];t[c++]=C}}}function fy(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=Fh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function Fh(t,r,s,a,c,f,_,C,R,V,G){const ne=An+a,_e=ne+c,Se=function oE(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:xn);return s}(ne,_e),qe="function"==typeof V?V():V;return Se[Et]={type:t,blueprint:Se,template:s,queries:null,viewQuery:C,declTNode:r,data:Se.slice().fill(null,ne),bindingStartIndex:ne,expandoStartIndex:_e,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:R,consts:qe,incompleteFirstPass:!1,ssrId:G}}let Ep=t=>null;function Em(t,r,s,a){for(let c in t)if(t.hasOwnProperty(c)){s=null===s?{}:s;const f=t[c];null===a?gy(s,r,c,f):a.hasOwnProperty(c)&&gy(s,r,a[c],f)}return s}function gy(t,r,s,a){t.hasOwnProperty(s)?t[s].push(r,a):t[s]=[r,a]}function Dm(t,r,s,a){if(Yu()){const c=null===a?null:{"":-1},f=function Ip(t,r){const s=t.directiveRegistry;let a=null,c=null;if(s)for(let f=0;f<s.length;f++){const _=s[f];if(Ds(r,_.selectors,!1))if(a||(a=[]),Gi(_))if(null!==_.findHostDirectiveDefs){const C=[];c=c||new Map,_.findHostDirectiveDefs(_,C,c),a.unshift(...C,_),Cm(t,r,C.length)}else a.unshift(_),Cm(t,r,0);else c=c||new Map,_.findHostDirectiveDefs?.(_,a,c),a.push(_)}return null===a?null:[a,c]}(t,s);let _,C;null===f?_=C=null:[_,C]=f,null!==_&&yd(t,r,s,_,c,C),c&&function dE(t,r,s){if(r){const a=t.localNames=[];for(let c=0;c<r.length;c+=2){const f=s[r[c+1]];if(null==f)throw new we(-301,!1);a.push(r[c],f)}}}(s,a,c)}s.mergedAttrs=an(s.mergedAttrs,s.attrs)}function yd(t,r,s,a,c,f){for(let V=0;V<a.length;V++)Wa(Ga(s,r),t,a[V].type);!function fE(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,a.length);for(let V=0;V<a.length;V++){const G=a[V];G.providersResolver&&G.providersResolver(G)}let _=!1,C=!1,R=ma(t,r,a.length,null);for(let V=0;V<a.length;V++){const G=a[V];s.mergedAttrs=an(s.mergedAttrs,G.hostAttrs),Tp(t,s,r,R,G),hE(R,G,c),null!==G.contentQueries&&(s.flags|=4),(null!==G.hostBindings||null!==G.hostAttrs||0!==G.hostVars)&&(s.flags|=64);const ne=G.type.prototype;!_&&(ne.ngOnChanges||ne.ngOnInit||ne.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),_=!0),!C&&(ne.ngOnChanges||ne.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),C=!0),R++}!function cE(t,r,s){const c=r.directiveEnd,f=t.data,_=r.attrs,C=[];let R=null,V=null;for(let G=r.directiveStart;G<c;G++){const ne=f[G],_e=s?s.get(ne):null,qe=_e?_e.outputs:null;R=Em(ne.inputs,G,R,_e?_e.inputs:null),V=Em(ne.outputs,G,V,qe);const pt=null===R||null===_||To(r)?null:bm(R,G,_);C.push(pt)}null!==R&&(R.hasOwnProperty("class")&&(r.flags|=8),R.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=C,r.inputs=R,r.outputs=V}(t,s,f)}function _l(t,r,s){const a=s.directiveStart,c=s.directiveEnd,f=s.index,_=function Uc(){return nn.lFrame.currentDirectiveIndex}();try{W(f);for(let C=a;C<c;C++){const R=t.data[C],V=r[C];Rs(C),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&yy(R,V)}}finally{W(-1),Rs(_)}}function yy(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function Cm(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function hE(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;Gi(r)&&(s[""]=t)}}function Tp(t,r,s,a,c){t.data[a]=c;const f=c.factory||(c.factory=ti(c.type)),_=new za(f,Gi(c),Dc);t.blueprint[a]=_,s[a]=_,function lE(t,r,s,a,c){const f=c.hostBindings;if(f){let _=t.hostBindingOpCodes;null===_&&(_=t.hostBindingOpCodes=[]);const C=~r.index;(function Am(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(_)!=C&&_.push(C),_.push(s,a,f)}}(t,r,a,ma(t,s,c.hostVars,xn),c)}function ka(t,r,s,a,c,f){const _=Pi(t,r);!function Vh(t,r,s,a,c,f,_){if(null==f)t.removeAttribute(r,c,s);else{const C=null==_?De(f):_(f,a||"",c);t.setAttribute(r,c,C,s)}}(r[Gt],_,f,t.value,s,a,c)}function vy(t,r,s,a,c,f){const _=f[r];if(null!==_)for(let C=0;C<_.length;)wp(a,s,_[C++],_[C++],_[C++])}function wp(t,r,s,a,c){const f=J(null);try{const _=t.inputTransforms;null!==_&&_.hasOwnProperty(a)&&(c=_[a].call(r,c)),null!==t.setInput?t.setInput(r,c,s,a):r[a]=c}finally{J(f)}}function bm(t,r,s){let a=null,c=0;for(;c<s.length;){const f=s[c];if(0!==f)if(5!==f){if("number"==typeof f)break;if(t.hasOwnProperty(f)){null===a&&(a=[]);const _=t[f];for(let C=0;C<_.length;C+=2)if(_[C]===r){a.push(f,_[C+1],s[c+1]);break}}c+=2}else c+=2;else c+=4}return a}function Uh(t,r,s,a){return[t,!0,!1,r,null,0,a,s,null,null,null]}function Dp(t,r){const s=t.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const f=s[a+1];if(-1!==f){const _=t.data[f];ua(s[a]),_.contentQueries(2,r[f],f)}}}function Bh(t,r){return t[Oi]?t[Xi][Tr]=r:t[Oi]=r,t[Xi]=r,r}function Ac(t,r,s){ua(0);const a=J(null);try{r(t,s)}finally{J(a)}}function Ap(t){return t[as]||(t[as]=[])}function Rm(t){return t.cleanup||(t.cleanup=[])}function Cp(t,r){const s=t[us],a=s?s.get(wu,null):null;a&&a.handleError(r)}function Pm(t,r,s,a,c){for(let f=0;f<s.length;){const _=s[f++],C=s[f++];wp(t.data[_],r[_],a,C,c)}}function Gu(t,r,s){const a=function Po(t,r){return Un(r[t])}(r,t);!function m(t,r,s){t.setValue(r,s)}(t[Gt],a,s)}function gE(t,r){const s=Dt(r,t),a=s[Et];!function Ey(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(a,s);const c=s[ur];null!==c&&null===s[ms]&&(s[ms]=tp(c,s[us])),Mm(a,s,s[hr])}function Mm(t,r,s){Me(r);try{const a=t.viewQuery;null!==a&&Ac(1,a,s);const c=t.template;null!==c&&vp(t,r,c,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Dp(t,r),t.staticViewQueries&&Ac(2,t.viewQuery,s);const f=t.components;null!==f&&function Iy(t,r){for(let s=0;s<r.length;s++)gE(t,r[s])}(r,f)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[en]&=-5,b()}}let Ty=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(s,a,c){const f=typeof Zone>"u"?null:Zone.current,_=function se(t,r,s){const a=Object.create(dt);s&&(a.consumerAllowSignalWrites=!0),a.fn=t,a.schedule=r;const c=_=>{a.cleanupFn=_};return a.ref={notify:()=>tn(a),run:()=>{if(a.dirty=!1,a.hasRun&&!Yn(a))return;a.hasRun=!0;const _=dn(a);try{a.cleanupFn(),a.cleanupFn=Ue,a.fn(c)}finally{lr(a,_)}},cleanup:()=>a.cleanupFn()},a.ref}(s,V=>{this.all.has(V)&&this.queue.set(V,f)},c);let C;this.all.add(_),_.notify();const R=()=>{_.cleanup(),C?.(),this.all.delete(_),this.queue.delete(_)};return C=a?.onDestroy(R),{destroy:R}}flush(){if(0!==this.queue.size)for(const[s,a]of this.queue)this.queue.delete(s),a?a.run(()=>s.run()):s.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Yt({token:t,providedIn:"root",factory:()=>new t})}return t})();function Sp(t,r,s){let a=s?t.styles:null,c=s?t.classes:null,f=0;if(null!==r)for(let _=0;_<r.length;_++){const C=r[_];"number"==typeof C?f=C:1==f?c=Qe(c,C):2==f&&(a=Qe(a,C+": "+r[++_]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=c:t.classesWithoutHost=c}function jh(t,r,s,a,c=!1){for(;null!==s;){const f=r[s.index];null!==f&&a.push(Un(f)),Vi(f)&&wy(f,a);const _=s.type;if(8&_)jh(t,r,s.child,a);else if(32&_){const C=ra(s,r);let R;for(;R=C();)a.push(R)}else if(16&_){const C=yg(r,s);if(Array.isArray(C))a.push(...C);else{const R=Bu(r[cr]);jh(R[Et],R,C,a,!0)}}s=c?s.projectionNext:s.next}return a}function wy(t,r){for(let s=ai;s<t.length;s++){const a=t[s],c=a[Et].firstChild;null!==c&&jh(a[Et],a,c,r)}t[Li]!==t[ur]&&r.push(t[Li])}function bp(t,r,s,a=!0){const c=r[vi],f=c.rendererFactory,_=c.afterRenderEventManager;f.begin?.(),_?.begin();try{Rp(t,r,t.template,s)}catch(R){throw a&&Cp(r,R),R}finally{f.end?.(),c.effectManager?.flush(),_?.end()}}function Rp(t,r,s,a){const c=r[en];if(256!=(256&c)){r[vi].effectManager?.flush(),Me(r);try{Ke(r),function aa(t){return nn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&vp(t,r,s,2,a);const _=3==(3&c);if(_){const V=t.preOrderCheckHooks;null!==V&&Zs(r,V,null)}else{const V=t.preOrderHooks;null!==V&&bu(r,V,0,null),$c(r,0)}if(function Ay(t){for(let r=tl(t);null!==r;r=Kl(r)){if(!r[Ao])continue;const s=r[oi];for(let a=0;a<s.length;a++){yr(s[a])}}}(r),Nm(r,2),null!==t.contentQueries&&Dp(t,r),_){const V=t.contentCheckHooks;null!==V&&Zs(r,V)}else{const V=t.contentHooks;null!==V&&bu(r,V,1),$c(r,1)}!function hy(t,r){const s=t.hostBindingOpCodes;if(null===s)return;const a=gp(r,ki);try{for(let c=0;c<s.length;c++){const f=s[c];if(f<0)W(~f);else{const _=f,C=s[++c],R=s[++c];Ju(C,_),a.dirty=!1;const V=dn(a);try{R(2,r[_])}finally{lr(a,V)}}}}finally{null===r[ki]&&ly(r,ki),W(-1)}}(t,r);const C=t.components;null!==C&&er(r,C,0);const R=t.viewQuery;if(null!==R&&Ac(2,R,a),_){const V=t.viewCheckHooks;null!==V&&Zs(r,V)}else{const V=t.viewHooks;null!==V&&bu(r,V,2),$c(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[en]&=-73,pn(r)}finally{b()}}}function Nm(t,r){for(let s=tl(t);null!==s;s=Kl(s))for(let a=ai;a<s.length;a++)$h(s[a],r)}function Cy(t,r,s){$h(Dt(r,t),s)}function $h(t,r){if(!function mn(t){return 128==(128&t[en])}(t))return;const s=t[Et],a=t[en];if(80&a&&0===r||1024&a||2===r)Rp(s,t,s.template,t[hr]);else if(t[Hr]>0){Nm(t,1);const c=s.components;null!==c&&er(t,c,1)}}function er(t,r,s){for(let a=0;a<r.length;a++)Cy(t,r[a],s)}class vd{get rootNodes(){const r=this._lView,s=r[Et];return jh(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[hr]}set context(r){this._lView[hr]=r}get destroyed(){return 256==(256&this._lView[en])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[bn];if(Vi(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Kt(r,a),Hn(s,a))}this._attachedToViewContainer=!1}Wt(this._lView[Et],this._lView)}onDestroy(r){!function Ut(t,r){if(256==(256&t[en]))throw new we(911,!1);null===t[ts]&&(t[ts]=[]),t[ts].push(r)}(this._lView,r)}markForCheck(){gd(this._cdRefInjectingView||this._lView)}detach(){this._lView[en]&=-129}reattach(){this._lView[en]|=128}detectChanges(){bp(this._lView[Et],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function z(t,r){oh(t,r,r[Gt],2,null,null)}(this._lView[Et],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=r}}class Sy extends vd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;bp(r[Et],r,r[hr],!1)}checkNoChanges(){}get context(){return null}}class Ed extends sp{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=yn(r);return new sa(s,this.ngModule)}}function xm(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class Mi{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){a=Ft(a);const c=this.injector.get(r,Tu,a);return c!==Tu||s===Tu?c:this.parentInjector.get(r,s,a)}}class sa extends Z_{get inputs(){const r=this.componentDef,s=r.inputTransforms,a=xm(r.inputs);if(null!==s)for(const c of a)s.hasOwnProperty(c.propName)&&(c.transform=s[c.propName]);return a}get outputs(){return xm(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function ar(t){return t.map(to).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,a,c){let f=(c=c||this.ngModule)instanceof Eu?c:c?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const _=f?new Mi(r,f):r,C=_.get(Ph,null);if(null===C)throw new we(407,!1);const ne={rendererFactory:C,sanitizer:_.get(J_,null),effectManager:_.get(Ty,null),afterRenderEventManager:_.get(dp,null)},_e=C.createRenderer(null,this.componentDef),Se=this.componentDef.selectors[0][0]||"div",qe=a?function _m(t,r,s,a){const f=a.get(uy,!1)||s===Bt.ShadowDom,_=t.selectRootElement(r,f);return function aE(t){Ep(t)}(_),_}(_e,a,this.componentDef.encapsulation,_):p(_e,Se,function Eo(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Se)),un=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let ut=null;null!==qe&&(ut=tp(qe,_,!0));const Mn=Fh(0,null,null,1,0,null,null,null,null,null,null),tr=md(null,Mn,null,un,null,null,ne,_e,_,null,ut);let hi,Ua;Me(tr);try{const Cl=this.componentDef;let ng,VI=null;Cl.findHostDirectiveDefs?(ng=[],VI=new Map,Cl.findHostDirectiveDefs(Cl,ng,VI),ng.push(Cl)):ng=[Cl];const qC=function yE(t,r){const s=t[Et],a=An;return t[a]=r,_d(s,a,2,"#host",null)}(tr,qe),KC=function Pp(t,r,s,a,c,f,_){const C=c[Et];!function Ry(t,r,s,a){for(const c of t)r.mergedAttrs=an(r.mergedAttrs,c.hostAttrs);null!==r.mergedAttrs&&(Sp(r,r.mergedAttrs,!0),null!==s&&vg(a,s,r))}(a,t,r,_);let R=null;null!==r&&(R=tp(r,c[us]));const V=f.rendererFactory.createRenderer(r,s);let G=16;s.signals?G=4096:s.onPush&&(G=64);const ne=md(c,fy(s),null,G,c[t.index],t,f,V,null,null,R);return C.firstCreatePass&&Cm(C,t,a.length-1),Bh(c,ne),c[t.index]=ne}(qC,qe,Cl,ng,tr,ne,_e);Ua=Mo(Mn,An),qe&&function vE(t,r,s,a){if(a)Io(t,s,["ng-version",ap.full]);else{const{attrs:c,classes:f}=function As(t){const r=[],s=[];let a=1,c=2;for(;a<t.length;){let f=t[a];if("string"==typeof f)2===c?""!==f&&r.push(f,t[++a]):8===c&&s.push(f);else{if(!Jr(c))break;c=f}a++}return{attrs:r,classes:s}}(r.selectors[0]);c&&Io(t,s,c),f&&f.length>0&&M_(t,s,f.join(" "))}}(_e,Cl,qe,a),void 0!==s&&function km(t,r,s){const a=t.projection=[];for(let c=0;c<r.length;c++){const f=s[c];a.push(null!=f?Array.from(f):null)}}(Ua,this.ngContentSelectors,s),hi=function Om(t,r,s,a,c,f){const _=Br(),C=c[Et],R=Pi(_,c);yd(C,c,_,s,null,a);for(let G=0;G<s.length;G++)Ms(po(c,C,_.directiveStart+G,_),c);_l(C,c,_),R&&Ms(R,c);const V=po(c,C,_.directiveStart+_.componentOffset,_);if(t[hr]=c[hr]=V,null!==f)for(const G of f)G(V,r);return gm(C,_,t),V}(KC,Cl,ng,VI,tr,[EE]),Mm(Mn,tr,null)}finally{b()}return new by(this.componentType,hi,Ic(Ua,tr),tr,Ua)}}class by extends Zv{constructor(r,s,a,c,f){super(),this.location=a,this._rootLView=c,this._tNode=f,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new Sy(c),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let c;if(null!==a&&(c=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const f=this._rootLView;Pm(f[Et],f,c,r,s),this.previousInputValues.set(r,s),gd(Dt(this._tNode.index,f))}}get injector(){return new wi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function EE(){const t=Br();Ha(rt()[Et],t)}function Fm(t){const r=t.inputConfig,s={};for(const a in r)if(r.hasOwnProperty(a)){const c=r[a];Array.isArray(c)&&c[2]&&(s[a]=c[2])}t.inputTransforms=s}function Np(t){return!!Ly(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Ly(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Lo(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function Vm(t,r,s,a){const c=rt();return Lo(c,Ca(),r)&&(or(),ka(te(),c,t,r,s,a)),Vm}function xE(t,r,s,a,c,f,_,C){const R=rt(),V=or(),G=t+An,ne=V.firstCreatePass?function NE(t,r,s,a,c,f,_,C,R){const V=r.consts,G=_d(r,t,4,_||null,Zi(V,C));Dm(r,s,G,Zi(V,R)),Ha(r,G);const ne=G.tView=Fh(2,G,a,c,f,r.directiveRegistry,r.pipeRegistry,null,r.schemas,V,null);return null!==r.queries&&(r.queries.template(r,G),ne.queries=r.queries.embeddedTView(G)),G}(G,V,R,r,s,a,c,f,_):V.data[G];qt(ne,!1);const _e=OE(V,R,ne,t);Ks()&&Jl(V,R,_e,ne),Ms(_e,R),Bh(R,R[G]=Uh(_e,R,_e,ne)),$s(ne)&&Lh(V,R,ne),null!=_&&mm(R,ne,C)}let OE=function Pc(t,r,s,a){return ho(!0),r[Gt].createComment("")};function zy(t){return zt(function pf(){return nn.lFrame.contextLView}(),An+t)}function $p(t,r,s){const a=rt();return Lo(a,Ca(),r)&&function _a(t,r,s,a,c,f,_,C){const R=Pi(r,s);let G,V=r.inputs;!C&&null!=V&&(G=V[a])?(Pm(t,s,G,a,c),so(r)&&function Tm(t,r){const s=Dt(r,t);16&s[en]||(s[en]|=64)}(s,r.index)):3&r.type&&(a=function Im(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),c=null!=_?_(c,r.value||"",a):c,f.setProperty(R,a,c))}(or(),te(),a,t,r,a[Gt],s,!1),$p}function Hm(t,r,s,a,c){const _=c?"class":"style";Pm(t,s,r.inputs[_],_,a)}function Hp(t,r,s,a){const c=rt(),f=or(),_=An+t,C=c[Gt],R=f.firstCreatePass?function Nc(t,r,s,a,c,f){const _=r.consts,R=_d(r,t,2,a,Zi(_,c));return Dm(r,s,R,Zi(_,f)),null!==R.attrs&&Sp(R,R.attrs,!1),null!==R.mergedAttrs&&Sp(R,R.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,R),R}(_,f,c,r,s,a):f.data[_],V=Gy(f,c,R,C,r,t);c[_]=V;const G=$s(R);return qt(R,!0),vg(C,V,R),32!=(32&R.flags)&&Ks()&&Jl(f,c,V,R),0===function et(){return nn.lFrame.elementDepthCount}()&&Ms(V,c),function is(){nn.lFrame.elementDepthCount++}(),G&&(Lh(f,c,R),gm(f,R,c)),null!==a&&mm(c,R),Hp}function zp(){let t=Br();Aa()?function $n(){nn.lFrame.isParent=!1}():(t=t.parent,qt(t,!1));const r=t;(function Lc(t){return nn.skipHydrationRootTNode===t})(r)&&function ff(){nn.skipHydrationRootTNode=null}(),function Sl(){nn.lFrame.elementDepthCount--}();const s=or();return s.firstCreatePass&&(Ha(s,t),ys(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function ig(t){return 0!=(8&t.flags)}(r)&&Hm(s,r,rt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Od(t){return 0!=(16&t.flags)}(r)&&Hm(s,r,rt(),r.stylesWithoutHost,!1),zp}function zm(t,r,s,a){return Hp(t,r,s,a),zp(),zm}let Gy=(t,r,s,a,c,f)=>(ho(!0),p(a,c,function Sr(){return nn.lFrame.currentNamespace}()));function LE(){return rt()}function Zm(t){return!!t&&"function"==typeof t.then}function Zy(t){return!!t&&"function"==typeof t.subscribe}function Qm(t,r,s,a){const c=rt(),f=or(),_=Br();return function VE(t,r,s,a,c,f,_){const C=$s(a),V=t.firstCreatePass&&Rm(t),G=r[hr],ne=Ap(r);let _e=!0;if(3&a.type||_){const pt=Pi(a,r),$t=_?_(pt):pt,un=ne.length,ut=_?tr=>_(Un(tr[a.index])):a.index;let Mn=null;if(!_&&C&&(Mn=function FE(t,r,s,a){const c=t.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===s&&c[f+1]===a){const C=r[as],R=c[f+2];return C.length>R?C[R]:null}"string"==typeof _&&(f+=2)}return null}(t,r,c,a.index)),null!==Mn)(Mn.__ngLastListenerFn__||Mn).__ngNextListenerFn__=f,Mn.__ngLastListenerFn__=f,_e=!1;else{f=BE(a,r,G,f,!1);const tr=s.listen($t,c,f);ne.push(f,tr),V&&V.push(c,ut,un,un+1)}}else f=BE(a,r,G,f,!1);const Se=a.outputs;let qe;if(_e&&null!==Se&&(qe=Se[c])){const pt=qe.length;if(pt)for(let $t=0;$t<pt;$t+=2){const hi=r[qe[$t]][qe[$t+1]].subscribe(f),Ua=ne.length;ne.push(f,hi),V&&V.push(c,a.index,Ua,-(Ua+1))}}}(f,c,c[Gt],_,t,r,a),Qm}function UE(t,r,s,a){try{return zn(6,r,s),!1!==s(a)}catch(c){return Cp(t,c),!1}finally{zn(7,r,s)}}function BE(t,r,s,a,c){return function f(_){if(_===Function)return a;gd(t.componentOffset>-1?Dt(t.index,r):r);let R=UE(r,s,a,_),V=f.__ngNextListenerFn__;for(;V;)R=UE(r,s,V,_)&&R,V=V.__ngNextListenerFn__;return c&&!1===R&&_.preventDefault(),R}}function jE(t=1){return function I(t){return(nn.lFrame.contextLView=function P(t,r){for(;t>0;)r=r[Ur],t--;return r}(t,nn.lFrame.contextLView))[hr]}(t)}function dv(t,r=""){const s=rt(),a=or(),c=t+An,f=a.firstCreatePass?_d(a,c,1,r,null):a.data[c],_=c_(a,s,f,r,t);s[c]=_,Ks()&&Jl(a,s,_,f),qt(f,!1)}let c_=(t,r,s,a,c)=>(ho(!0),function vu(t,r){return t.createText(r)}(r[Gt],a));function Zp(t){return cf("",t,""),Zp}function cf(t,r,s){const a=rt(),c=function qu(t,r,s,a){return Lo(t,Ca(),s)?r+De(s)+a:xn}(a,t,r,s);return c!==xn&&Gu(a,k(),c),cf}const lf=void 0;var g0=["en",[["a","p"],["AM","PM"],lf],[["AM","PM"],lf,lf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],lf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],lf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",lf,"{1} 'at' {0}",lf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function p0(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Qp={};function nI(t){const r=function m0(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=oT(r);if(s)return s;const a=r.split("-")[0];if(s=oT(a),s)return s;if("en"===a)return g0;throw new we(701,!1)}function sT(t){return nI(t)[Yp.PluralCase]}function oT(t){return t in Qp||(Qp[t]=Tn.ng&&Tn.ng.common&&Tn.ng.common.locales&&Tn.ng.common.locales[t]),Qp[t]}var Yp=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Yp||{});const Jp="en-US";let aT=Jp;class df{}class xT{}function mD(t,r){return new cI(t,r??null,[])}class cI extends df{constructor(r,s,a){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ed(this);const c=ei(r);this._bootstrapComponents=tu(c.bootstrap),this._r3Injector=ty(r,s,[{provide:df,useValue:this},{provide:sp,useValue:this.componentFactoryResolver},...a],ge(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class lI extends xT{constructor(r){super(),this.moduleType=r}create(r){return new cI(this.moduleType,r,[])}}class OT extends df{constructor(r){super(),this.componentFactoryResolver=new Ed(this),this.instance=null;const s=new ll([...r.providers,{provide:df,useValue:this},{provide:sp,useValue:this.componentFactoryResolver}],r.parent||cl(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function kT(t,r,s=null){return new OT({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let yD=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const a=Ng(0,s.type),c=a.length>0?kT([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,c)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Yt({token:t,providedIn:"environment",factory:()=>new t(Qt(Eu))})}return t})();function LT(t){t.getStandaloneInjector=r=>r.get(yD).getOrCreateStandaloneInjector(t)}function HT(t,r,s,a,c,f){const _=r+s;return Lo(t,_,c)?function ya(t,r,s){return t[r]=s}(t,_+1,f?a.call(f,c):a(c)):function y_(t,r){const s=t[r];return s===xn?void 0:s}(t,_+1)}function KT(t,r){const s=or();let a;const c=t+An;s.firstCreatePass?(a=function FD(t,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(t===a.name)return a}}(r,s.pipeRegistry),s.data[c]=a,a.onDestroy&&(s.destroyHooks??=[]).push(c,a.onDestroy)):a=s.data[c];const f=a.factory||(a.factory=ti(a.type)),C=Fn(Dc);try{const R=tc(!1),V=f();return tc(R),function Mc(t,r,s,a){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=a}(s,rt(),c,V),V}finally{Fn(C)}}function ZT(t,r,s){const a=t+An,c=rt(),f=zt(c,a);return function v_(t,r){return t[Et].data[r].pure}(c,a)?HT(c,function ri(){const t=nn.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}(),r,f.transform,s,f):f.transform(s)}function $D(){return this._results[Symbol.iterator]()}class hI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Oa)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=hI.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=$D)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const c=function Qs(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function xl(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let c=t[a],f=r[a];if(s&&(c=s(c),f=s(f)),f!==c)return!1}return!0}(a._results,c,s))&&(a._results=c,a.length=c.length,a.last=c[this.length-1],a.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function zD(t,r,s,a=!0){const c=r[Et];if(function Re(t,r,s,a){const c=ai+a,f=s.length;a>0&&(s[c-1][Tr]=r),a<f-ai?(r[Tr]=s[c],Bd(s,ai+a,r)):(s.push(r),r[Tr]=null),r[bn]=s;const _=r[Vn];null!==_&&s!==_&&function Ze(t,r){const s=t[oi];r[cr]!==r[bn][bn][cr]&&(t[Ao]=!0),null===s?t[oi]=[r]:s.push(r)}(_,r);const C=r[zr];null!==C&&C.insertView(t),r[en]|=128}(c,r,t,s),a){const f=ih(s,t),_=r[Gt],C=Ma(_,t[Li]);null!==C&&function F(t,r,s,a,c,f){a[ur]=c,a[Mr]=r,oh(t,a,s,1,c,f)}(c,t[Mr],_,r,C,f)}}let E_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=qD}return t})();const GD=E_,WD=class extends GD{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,a){const c=function HD(t,r,s,a){const c=r.tView,C=md(t,c,s,4096&t[en]?4096:16,null,r,null,null,null,a?.injector??null,a?.hydrationInfo??null);C[Vn]=t[r.index];const V=t[zr];return null!==V&&(C[zr]=V.createEmbeddedView(c)),Mm(c,C,s),C}(this._declarationLView,this._declarationTContainer,r,{injector:s,hydrationInfo:a});return new vd(c)}};function qD(){return Iv(Br(),rt())}function Iv(t,r){return 4&t.type?new WD(r,t,Ic(t,r)):null}let wv=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=XD}return t})();function XD(){return nw(Br(),rt())}const eA=wv,ew=class extends eA{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Ic(this._hostTNode,this._hostLView)}get injector(){return new wi(this._hostTNode,this._hostLView)}get parentInjector(){const r=Mu(this._hostTNode,this._hostLView);if(kd(r)){const s=du(r,this._hostLView),a=lu(r);return new wi(s[Et].data[a+8],s)}return new wi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=tw(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-ai}createEmbeddedView(r,s,a){let c,f;"number"==typeof a?c=a:null!=a&&(c=a.index,f=a.injector);const C=r.createEmbeddedViewImpl(s||{},f,null);return this.insertImpl(C,c,false),C}createComponent(r,s,a,c,f){const _=r&&!function ic(t){return"function"==typeof t}(r);let C;if(_)C=s;else{const pt=s||{};C=pt.index,a=pt.injector,c=pt.projectableNodes,f=pt.environmentInjector||pt.ngModuleRef}const R=_?r:new sa(yn(r)),V=a||this.parentInjector;if(!f&&null==R.ngModule){const $t=(_?V:this.parentInjector).get(Eu,null);$t&&(f=$t)}yn(R.componentType??{});const Se=R.create(V,c,null,f);return this.insertImpl(Se.hostView,C,false),Se}insert(r,s){return this.insertImpl(r,s,!1)}insertImpl(r,s,a){const c=r._lView;if(function xr(t){return Vi(t[bn])}(c)){const R=this.indexOf(r);if(-1!==R)this.detach(R);else{const V=c[bn],G=new ew(V,V[Mr],V[bn]);G.detach(G.indexOf(r))}}const _=this._adjustIndex(s),C=this._lContainer;return zD(C,c,_,!a),r.attachToViewContainerRef(),Bd(fI(C),_,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=tw(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Kt(this._lContainer,s);a&&(Hn(fI(this._lContainer),s),Wt(a[Et],a))}detach(r){const s=this._adjustIndex(r,-1),a=Kt(this._lContainer,s);return a&&null!=Hn(fI(this._lContainer),s)?new vd(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function tw(t){return t[8]}function fI(t){return t[8]||(t[8]=[])}function nw(t,r){let s;const a=r[t.index];return Vi(a)?s=a:(s=Uh(a,r,null,t),r[t.index]=s,Bh(r,s)),rw(s,r,t,a),new ew(s,t,r)}let rw=function iw(t,r,s,a){if(t[Li])return;let c;c=8&s.type?Un(a):function tA(t,r){const s=t[Gt],a=s.createComment(""),c=Pi(r,t);return Ja(s,Ma(s,c),a,function th(t,r){return t.nextSibling(r)}(s,c),!1),a}(r,s),t[Li]=c};class pI{constructor(r){this.queryList=r,this.matches=null}clone(){return new pI(this.queryList)}setDirty(){this.queryList.setDirty()}}class gI{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,c=[];for(let f=0;f<a;f++){const _=s.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new gI(c)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==hw(r,s).matches&&this.queries[s].setDirty()}}class sw{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class mI{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const c=null!==s?s.length:0,f=this.getByIndex(a).embeddedTView(r,c);f&&(f.indexInDeclarationView=a,null!==s?s.push(f):s=[f])}return null!==s?new mI(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class _I{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new _I(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let c=0;c<a.length;c++){const f=a[c];this.matchTNodeWithReadOption(r,s,iA(s,f)),this.matchTNodeWithReadOption(r,s,Gr(s,r,f,!1,!1))}else a===E_?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Gr(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const c=this.metadata.read;if(null!==c)if(c===Iu||c===wv||c===E_&&4&s.type)this.addMatch(s.index,-2);else{const f=Gr(s,r,c,!1,!1);null!==f&&this.addMatch(s.index,f)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function iA(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function oA(t,r,s,a){return-1===s?function sA(t,r){return 11&t.type?Ic(t,r):4&t.type?Iv(t,r):null}(r,t):-2===s?function aA(t,r,s){return s===Iu?Ic(r,t):s===E_?Iv(r,t):s===wv?nw(r,t):void 0}(t,r,a):po(t,t[Et],s,r)}function ow(t,r,s,a){const c=r[zr].queries[a];if(null===c.matches){const f=t.data,_=s.matches,C=[];for(let R=0;R<_.length;R+=2){const V=_[R];C.push(V<0?null:oA(r,f[V],_[R+1],s.metadata.read))}c.matches=C}return c.matches}function yI(t,r,s,a){const c=t.queries.getByIndex(s),f=c.matches;if(null!==f){const _=ow(t,r,c,s);for(let C=0;C<f.length;C+=2){const R=f[C];if(R>0)a.push(_[C/2]);else{const V=f[C+1],G=r[-R];for(let ne=ai;ne<G.length;ne++){const _e=G[ne];_e[Vn]===_e[bn]&&yI(_e[Et],_e,V,a)}if(null!==G[oi]){const ne=G[oi];for(let _e=0;_e<ne.length;_e++){const Se=ne[_e];yI(Se[Et],Se,V,a)}}}}}return a}function aw(t){const r=rt(),s=or(),a=Bc();ua(a+1);const c=hw(s,a);if(t.dirty&&function Jt(t){return 4==(4&t[en])}(r)===(2==(2&c.metadata.flags))){if(null===c.matches)t.reset([]);else{const f=c.crossesNgTemplate?yI(s,r,a,[]):ow(s,r,c,a);t.reset(f,zg),t.notifyOnChanges()}return!0}return!1}function uw(t,r,s,a){const c=or();if(c.firstCreatePass){const f=Br();(function dw(t,r,s){null===t.queries&&(t.queries=new mI),t.queries.track(new _I(r,s))})(c,new sw(r,s,a),f.index),function lA(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(c,t),2==(2&s)&&(c.staticContentQueries=!0)}!function lw(t,r,s){const a=new hI(4==(4&s));(function py(t,r,s,a){const c=Ap(r);c.push(s),t.firstCreatePass&&Rm(t).push(a,c.length-1)})(t,r,a,a.destroy),null===r[zr]&&(r[zr]=new gI),r[zr].queries.push(new pI(a))}(c,rt(),s)}function cw(){return function cA(t,r){return t[zr].queries[r].queryList}(rt(),Bc())}function hw(t,r){return t.queries.getByIndex(r)}function vI(t){return!!ei(t)}const Rw=new Ct("Application Initializer");let DI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,a)=>{this.resolve=s,this.reject=a}),this.appInits=_t(Rw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const c of this.appInits){const f=c();if(Zm(f))s.push(f);else if(Zy(f)){const _=new Promise((C,R)=>{f.subscribe({complete:C,error:R})});s.push(_)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{a()}).catch(c=>{this.reject(c)}),0===s.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Pw=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Av=new Ct("LocaleId",{providedIn:"root",factory:()=>_t(Av,st.Optional|st.SkipSelf)||function NA(){return typeof $localize<"u"&&$localize.locale||Jp}()}),xA=new Ct("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Mw=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ye.X(!1)}add(){this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class kA{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let LA=(()=>{class t{compileModuleSync(s){return new lI(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),f=tu(ei(s).declarations).reduce((_,C)=>{const R=yn(C);return R&&_.push(new sa(R)),_},[]);return new kA(a,f)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const kw=new Ct(""),Lw=new Ct("");let SI,iC=(()=>{class t{constructor(s,a,c){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,SI||(function sC(t){SI=t}(c),c.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ws.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,c){let f=-1;a&&a>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:f,updateCb:c})}whenStable(s,a,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,c){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(Qt(ws),Qt(Fw),Qt(Lw))};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac})}return t})(),Fw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return SI?.findTestabilityInTree(this,s,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Md=null;const Vw=new Ct("AllowMultipleToken"),bI=new Ct("PlatformDestroyListeners"),RI=new Ct("appBootstrapListener");class uC{constructor(r,s){this.name=r,this.token=s}}function jw(t,r,s=[]){const a=`Platform: ${r}`,c=new Ct(a);return(f=[])=>{let _=PI();if(!_||_.injector.get(Vw,!1)){const C=[...s,...f,{provide:c,useValue:!0}];t?t(C):function cC(t){if(Md&&!Md.get(Vw,!1))throw new we(400,!1);(function Uw(){!function Qu(t){Ui=t}(()=>{throw new we(600,!1)})})(),Md=t;const r=t.get(Hw);(function Bw(t){t.get(Kf,null)?.forEach(s=>s())})(t)}(function $w(t=[],r){return eu.create({name:r,providers:[{provide:kg,useValue:"platform"},{provide:bI,useValue:new Set([()=>Md=null])},...t]})}(C,a))}return function dC(t){const r=PI();if(!r)throw new we(401,!1);return r}()}}function PI(){return Md?.get(Hw)??null}let Hw=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const c=function hC(t="zone.js",r){return"noop"===t?new tE:"zone.js"===t?new ws(r):t}(a?.ngZone,function zw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return c.run(()=>{const f=function _D(t,r,s){return new cI(t,r,s)}(s.moduleType,this.injector,function Zw(t){return[{provide:ws,useFactory:t},{provide:gh,multi:!0,useFactory:()=>{const r=_t(pC,{optional:!0});return()=>r.initialize()}},{provide:Kw,useFactory:fC},{provide:ry,useFactory:lp}]}(()=>c)),_=f.injector.get(wu,null);return c.runOutsideAngular(()=>{const C=c.onError.subscribe({next:R=>{_.handleError(R)}});f.onDestroy(()=>{Sv(this._modules,f),C.unsubscribe()})}),function Gw(t,r,s){try{const a=s();return Zm(a)?a.catch(c=>{throw r.runOutsideAngular(()=>t.handleError(c)),c}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(_,c,()=>{const C=f.injector.get(DI);return C.runInitializers(),C.donePromise.then(()=>(function uT(t){mt(t,"Expected localeId to be defined"),"string"==typeof t&&(aT=t.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Av,Jp)||Jp),this._moduleDoBootstrap(f),f))})})}bootstrapModule(s,a=[]){const c=Ww({},a);return function oC(t,r,s){const a=new lI(s);return Promise.resolve(a)}(0,0,s).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(s){const a=s.injector.get(tg);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(c=>a.bootstrap(c));else{if(!s.instance.ngDoBootstrap)throw new we(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(bI,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||t)(Qt(eu))};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Ww(t,r){return Array.isArray(r)?r.reduce(Ww,t):{...t,...r}}let tg=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=_t(Kw),this.zoneIsStable=_t(ry),this.componentTypes=[],this.components=[],this.isStable=_t(Mw).hasPendingTasks.pipe((0,He.w)(s=>s?(0,me.of)(!1):this.zoneIsStable),(0,Ne.x)(),(0,Ce.B)()),this._injector=_t(Eu)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const c=s instanceof Z_;if(!this._injector.get(DI).done)throw!c&&Vr(s),new we(405,!1);let _;_=c?s:this._injector.get(sp).resolveComponentFactory(s),this.componentTypes.push(_.componentType);const C=function aC(t){return t.isBoundToModule}(_)?void 0:this._injector.get(df),V=_.create(eu.NULL,[],a||_.selector,C),G=V.location.nativeElement,ne=V.injector.get(kw,null);return ne?.registerApplication(G),V.onDestroy(()=>{this.detachView(V.hostView),Sv(this.components,V),ne?.unregisterApplication(G)}),this._loadComponent(V),V}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Sv(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(RI,[]);a.push(...this._bootstrapListeners),a.forEach(c=>c(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Sv(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new we(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Sv(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}const Kw=new Ct("",{providedIn:"root",factory:()=>_t(wu).handleError.bind(void 0)});function fC(){const t=_t(ws),r=_t(wu);return s=>t.runOutsideAngular(()=>r.handleError(s))}let pC=(()=>{class t{constructor(){this.zone=_t(ws),this.applicationRef=_t(tg)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mC(){return!1}let _C=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=yC}return t})();function yC(t){return function vC(t,r,s){if(so(t)&&!s){const a=Dt(t.index,r);return new vd(a,a)}return 47&t.type?new vd(r[cr],r):null}(Br(),rt(),16==(16&t))}class Xw{constructor(){}supports(r){return Np(r)}create(r){return new AC(r)}}const DC=(t,r)=>r;class AC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||DC}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,c=0,f=null;for(;s||a;){const _=!a||s&&s.currentIndex<t0(a,c,f)?s:a,C=t0(_,c,f),R=_.currentIndex;if(_===a)c--,a=a._nextRemoved;else if(s=s._next,null==_.previousIndex)c++;else{f||(f=[]);const V=C-c,G=R-c;if(V!=G){for(let _e=0;_e<V;_e++){const Se=_e<f.length?f[_e]:f[_e]=0,qe=Se+_e;G<=qe&&qe<V&&(f[_e]=Se+1)}f[_.previousIndex]=G-V}}C!==R&&r(_,C,R)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Np(r))throw new we(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let c,f,_,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let C=0;C<this.length;C++)f=r[C],_=this._trackByFn(C,f),null!==s&&Object.is(s.trackById,_)?(a&&(s=this._verifyReinsertion(s,f,_,C)),Object.is(s.item,f)||this._addIdentityChange(s,f)):(s=this._mismatch(s,f,_,C),a=!0),s=s._next}else c=0,function Wu(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,C=>{_=this._trackByFn(c,C),null!==s&&Object.is(s.trackById,_)?(a&&(s=this._verifyReinsertion(s,C,_,c)),Object.is(s.item,C)||this._addIdentityChange(s,C)):(s=this._mismatch(s,C,_,c),a=!0),s=s._next,c++}),this.length=c;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,c){let f;return null===r?f=this._itTail:(f=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,f,c)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,c))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,f,c)):r=this._addAfter(new CC(s,a),f,c),r}_verifyReinsertion(r,s,a,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==f?r=this._reinsertAfter(f,r._prev,c):r.currentIndex!=c&&(r.currentIndex=c,this._addToMoves(r,c)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const c=r._prevRemoved,f=r._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const c=null===s?this._itHead:s._next;return r._next=c,r._prev=s,null===c?this._itTail=r:c._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new e0),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new e0),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class CC{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class SC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class e0{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new SC,this.map.set(s,a)),a.add(r)}get(r,s){const c=this.map.get(r);return c?c.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function t0(t,r,s){const a=t.previousIndex;if(null===a)return a;let c=0;return s&&a<s.length&&(c=s[a]),a+r+c}class n0{constructor(){}supports(r){return r instanceof Map||Ly(r)}create(){return new bC}}class bC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Ly(r)))throw new we(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,c)=>{if(s&&s.key===c)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const f=this._getOrCreateRecordForKey(c,a);s=this._insertBeforeOrAppend(s,f)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const c=this._records.get(r);this._maybeAddToChanges(c,s);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const a=new RC(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class RC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function r0(){return new kI([new Xw])}let kI=(()=>{class t{static#e=this.\u0275prov=Yt({token:t,providedIn:"root",factory:r0});constructor(s){this.factories=s}static create(s,a){if(null!=a){const c=a.factories.slice();s=s.concat(c)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||r0()),deps:[[t,new mu,new qo]]}}find(s){const a=this.factories.find(c=>c.supports(s));if(null!=a)return a;throw new we(901,!1)}}return t})();function s0(){return new LI([new n0])}let LI=(()=>{class t{static#e=this.\u0275prov=Yt({token:t,providedIn:"root",factory:s0});constructor(s){this.factories=s}static create(s,a){if(a){const c=a.factories.slice();s=s.concat(c)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||s0()),deps:[[t,new mu,new qo]]}}find(s){const a=this.factories.find(c=>c.supports(s));if(a)return a;throw new we(901,!1)}}return t})();const NC=jw(null,"core",[]);let xC=(()=>{class t{constructor(s){}static#e=this.\u0275fac=function(a){return new(a||t)(Qt(tg))};static#t=this.\u0275mod=_i({type:t});static#n=this.\u0275inj=Dn({})}return t})();function zC(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WC(t){const r=yn(t);if(!r)return null;const s=new sa(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},7213:(Ht,Fe,$)=>{$.d(Fe,{zQ:()=>dr,ww:()=>Wn,rT:()=>Zt,f7:()=>nr,L6:()=>ot,_Q:()=>ae,lh:()=>ct,Qv:()=>Ye,nw:()=>Cn}),$(3956);var oe=$(6814),x=$(5879),Ie=$(8326),ye=$(7217),me=$(8645),Ce=$(2096),He=$(5592),Ne=$(2459),re=$(3019),ie=$(3093),ge=$(4664),Qe=$(7398),ze=$(4552);class We extends me.x{constructor(Nt=1/0,he=1/0,de=ze.l){super(),this._bufferSize=Nt,this._windowTime=he,this._timestampProvider=de,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=he===1/0,this._bufferSize=Math.max(1,Nt),this._windowTime=Math.max(1,he)}next(Nt){const{isStopped:he,_buffer:de,_infiniteTimeWindow:ve,_timestampProvider:fe,_windowTime:be}=this;he||(de.push(Nt),!ve&&de.push(fe.now()+be)),this._trimBuffer(),super.next(Nt)}_subscribe(Nt){this._throwIfClosed(),this._trimBuffer();const he=this._innerSubscribe(Nt),{_infiniteTimeWindow:de,_buffer:ve}=this,fe=ve.slice();for(let be=0;be<fe.length&&!Nt.closed;be+=de?1:2)Nt.next(fe[be]);return this._checkFinalizedStatuses(Nt),he}_trimBuffer(){const{_bufferSize:Nt,_timestampProvider:he,_buffer:de,_infiniteTimeWindow:ve}=this,fe=(ve?1:2)*Nt;if(Nt<1/0&&fe<de.length&&de.splice(0,de.length-fe),!ve){const be=he.now();let $e=0;for(let mt=1;mt<de.length&&de[mt]<=be;mt+=2)$e=mt;$e&&de.splice(0,$e+1)}}}var Je=$(3020);function ht(It,Nt,he){let de,ve=!1;return It&&"object"==typeof It?({bufferSize:de=1/0,windowTime:Nt=1/0,refCount:ve=!1,scheduler:he}=It):de=It??1/0,(0,Je.B)({connector:()=>new We(de,Nt,he),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ve})}var at=$(1374),Lt=$(4674);function Te(It,Nt){return(0,Lt.m)(Nt)?(0,ge.w)(()=>It,Nt):(0,ge.w)(()=>It)}var we=$(5137),je=$(2181),De=$(7142);const Ye=new x.OlP("angularfire2.auth.use-emulator"),ot=new x.OlP("angularfire2.auth.settings"),ae=new x.OlP("angularfire2.auth.tenant-id"),Zt=new x.OlP("angularfire2.auth.langugage-code"),ct=new x.OlP("angularfire2.auth.use-device-language"),nr=new x.OlP("angularfire.auth.persistence"),Cn=(It,Nt,he,de,ve,fe,be,$e)=>(0,ye.cc)(`${It.name}.auth`,"AngularFireAuth",It.name,()=>{const mt=Nt.runOutsideAngular(()=>It.auth());if(he&&mt.useEmulator(...he),de&&(mt.tenantId=de),mt.languageCode=ve,fe&&mt.useDeviceLanguage(),be)for(const[it,kn]of Object.entries(be))mt.settings[it]=kn;return $e&&mt.setPersistence($e),mt},[he,de,ve,fe,be,$e]);let dr=(()=>{class It{authState;idToken;user;idTokenResult;credential;constructor(he,de,ve,fe,be,$e,mt,it,kn,wt,rn,Yt){const Ln=new me.x,Dn=(0,Ce.of)(void 0).pipe((0,ie.Q)(be.outsideAngular),(0,ge.w)(()=>fe.runOutsideAngular(()=>Promise.resolve().then($.bind($,3956)))),(0,Qe.U)(()=>(0,ye.on)(he,fe,de)),(0,Qe.U)(Rn=>Cn(Rn,fe,$e,it,kn,wt,mt,rn)),ht({bufferSize:1,refCount:!1}));if((0,oe.PM)(ve))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ce.of)(null);else{Dn.pipe((0,at.P)()).subscribe();const Rn=Dn.pipe((0,ge.w)(Sn=>Sn.getRedirectResult().then(Rr=>Rr,()=>null)),Ie.iC,ht({bufferSize:1,refCount:!1})),Bn=Dn.pipe((0,ge.w)(Sn=>new He.y(Rr=>({unsubscribe:fe.runOutsideAngular(()=>Sn.onAuthStateChanged(Ir=>Rr.next(Ir),Ir=>Rr.error(Ir),()=>Rr.complete()))})))),Dr=Dn.pipe((0,ge.w)(Sn=>new He.y(Rr=>({unsubscribe:fe.runOutsideAngular(()=>Sn.onIdTokenChanged(Ir=>Rr.next(Ir),Ir=>Rr.error(Ir),()=>Rr.complete()))}))));this.authState=Rn.pipe(Te(Bn),(0,we.R)(be.outsideAngular),(0,ie.Q)(be.insideAngular)),this.user=Rn.pipe(Te(Dr),(0,we.R)(be.outsideAngular),(0,ie.Q)(be.insideAngular)),this.idToken=this.user.pipe((0,ge.w)(Sn=>Sn?(0,Ne.D)(Sn.getIdToken()):(0,Ce.of)(null))),this.idTokenResult=this.user.pipe((0,ge.w)(Sn=>Sn?(0,Ne.D)(Sn.getIdTokenResult()):(0,Ce.of)(null))),this.credential=(0,re.T)(Rn,Ln,this.authState.pipe((0,je.h)(Sn=>!Sn))).pipe((0,Qe.U)(Sn=>Sn?.user?Sn:null),(0,we.R)(be.outsideAngular),(0,ie.Q)(be.insideAngular))}return(0,ye.pX)(this,Dn,fe,{spy:{apply:(Rn,Bn,Dr)=>{(Rn.startsWith("signIn")||Rn.startsWith("createUser"))&&Dr.then(Sn=>Ln.next(Sn))}}})}static \u0275fac=function(de){return new(de||It)(x.LFG(ye.Dh),x.LFG(ye.xv,8),x.LFG(x.Lbi),x.LFG(x.R0b),x.LFG(Ie.HU),x.LFG(Ye,8),x.LFG(ot,8),x.LFG(ae,8),x.LFG(Zt,8),x.LFG(ct,8),x.LFG(nr,8),x.LFG(Ie.Rf,8))};static \u0275prov=x.Yz7({token:It,factory:It.\u0275fac,providedIn:"any"})}return It})(),Wn=(()=>{class It{constructor(){De.Z.registerVersion("angularfire",Ie.q4.full,"auth-compat")}static \u0275fac=function(de){return new(de||It)};static \u0275mod=x.oAB({type:It});static \u0275inj=x.cJS({providers:[dr]})}return It})()},9027:(Ht,Fe,$)=>{$.d(Fe,{ST:()=>d_,yb:()=>gv});var D=$(6814),oe=$(5879),x=$(8326),Ie=$(7217),ye=$(7213),me=$(6321),Ce=$(5592),He=$(2459),Ne=$(2096),re=$(7921),ie=$(9360),ge=$(8251);function Qe(){return(0,ie.e)((i,e)=>{let n,o=!1;i.subscribe((0,ge.x)(e,u=>{const l=n;n=u,o&&e.next([l,u]),o=!0}))})}var ae,ze=$(7398),We=$(6699),Je=$(3997),ht=$(2181),Lt=($(3956),$(3106)),Te=$(5861),we=$(534),je=$(4537),De=$(7879),Ve=$(9058),Ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ot={},Zt=Zt||{},ct=Ye||self;function nr(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Cn(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Wn="closure_uid_"+(1e9*Math.random()>>>0),It=0;function Nt(i,e,n){return i.call.apply(i.bind,arguments)}function he(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function de(i,e,n){return(de=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Nt:he).apply(null,arguments)}function ve(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function fe(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(o,u,l){for(var g=Array(arguments.length-2),S=2;S<arguments.length;S++)g[S-2]=arguments[S];return e.prototype[u].apply(o,g)}}function be(){this.s=this.s,this.o=this.o}be.prototype.s=!1,be.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function dr(i){Object.prototype.hasOwnProperty.call(i,Wn)&&i[Wn]||(i[Wn]=++It)}(this)},be.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const mt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function it(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function kn(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(nr(o)){const u=i.length||0,l=o.length||0;i.length=u+l;for(let g=0;g<l;g++)i[u+g]=o[g]}else i.push(o)}}function wt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}wt.prototype.h=function(){this.defaultPrevented=!0};var rn=function(){if(!ct.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ct.addEventListener("test",()=>{},e),ct.removeEventListener("test",()=>{},e)}catch{}return i}();function Yt(i){return/^[\s\xa0]*$/.test(i)}function Ln(){var i=ct.navigator;return i&&(i=i.userAgent)?i:""}function Dn(i){return-1!=Ln().indexOf(i)}function Rn(i){return Rn[" "](i),i}Rn[" "]=function(){};var st,i,Dr=Dn("Opera"),Sn=Dn("Trident")||Dn("MSIE"),Rr=Dn("Edge"),Ir=Rr||Sn,Wr=Dn("Gecko")&&!(-1!=Ln().toLowerCase().indexOf("webkit")&&!Dn("Edge"))&&!(Dn("Trident")||Dn("MSIE"))&&!Dn("Edge"),qr=-1!=Ln().toLowerCase().indexOf("webkit")&&!Dn("Edge");function fi(){var i=ct.document;return i?i.documentMode:void 0}e:{var on="",jt=(i=Ln(),Wr?/rv:([^\);]+)(\)|;)/.exec(i):Rr?/Edge\/([\d\.]+)/.exec(i):Sn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):qr?/WebKit\/(\S+)/.exec(i):Dr?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(jt&&(on=jt?jt[1]:""),Sn){var Fn=fi();if(null!=Fn&&Fn>parseFloat(on)){st=String(Fn);break e}}st=on}var Tn=ct.document&&Sn&&(fi()||parseInt(st,10))||void 0;function mr(i,e){if(wt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Wr){e:{try{Rn(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Js[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&mr.$.h.call(this)}}fe(mr,wt);var Js={2:"touch",3:"pen",4:"mouse"};mr.prototype.h=function(){mr.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Ct="closure_listenable_"+(1e6*Math.random()|0),os=0;function gn(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=u,this.key=++os,this.fa=this.ia=!1}function kr(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function Ar(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function pi(i){const e={};for(const n in i)e[n]=i[n];return e}const hs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Hi(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let l=0;l<hs.length;l++)n=hs[l],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function Lr(i){this.src=i,this.g={},this.h=0}function Kr(i,e){var n=e.type;if(n in i.g){var l,o=i.g[n],u=mt(o,e);(l=0<=u)&&Array.prototype.splice.call(o,u,1),l&&(kr(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function ln(i,e,n,o){for(var u=0;u<i.length;++u){var l=i[u];if(!l.fa&&l.listener==e&&l.capture==!!n&&l.la==o)return u}return-1}Lr.prototype.add=function(i,e,n,o,u){var l=i.toString();(i=this.g[l])||(i=this.g[l]=[],this.h++);var g=ln(i,e,o,u);return-1<g?(e=i[g],n||(e.ia=!1)):((e=new gn(e,this.src,l,!!o,u)).ia=n,i.push(e)),e};var gi="closure_lm_"+(1e6*Math.random()|0),zi={};function Zr(i,e,n,o,u){if(o&&o.once)return Y(i,e,n,o,u);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Zr(i,e[l],n,o,u);return null}return n=Xt(n),i&&i[Ct]?i.O(e,n,Cn(o)?!!o.capture:!!o,u):ce(i,e,n,!1,o,u)}function ce(i,e,n,o,u,l){if(!e)throw Error("Invalid event type");var g=Cn(u)?!!u.capture:!!u,S=lt(i);if(S||(i[gi]=S=new Lr(i)),(n=S.add(e,n,o,g,l)).proxy)return n;if(o=function q(){const e=Ge;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)rn||(u=g),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Ee(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function Y(i,e,n,o,u){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Y(i,e[l],n,o,u);return null}return n=Xt(n),i&&i[Ct]?i.P(e,n,Cn(o)?!!o.capture:!!o,u):ce(i,e,n,!0,o,u)}function Z(i,e,n,o,u){if(Array.isArray(e))for(var l=0;l<e.length;l++)Z(i,e[l],n,o,u);else o=Cn(o)?!!o.capture:!!o,n=Xt(n),i&&i[Ct]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=ln(l=i.g[e],n,o,u))&&(kr(l[n]),Array.prototype.splice.call(l,n,1),0==l.length&&(delete i.g[e],i.h--))):i&&(i=lt(i))&&(e=i.g[e.toString()],i=-1,e&&(i=ln(e,n,o,u)),(n=-1<i?e[i]:null)&&K(n))}function K(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[Ct])Kr(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(Ee(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=lt(e))?(Kr(n,i),0==n.h&&(n.src=null,e[gi]=null)):kr(i)}}}function Ee(i){return i in zi?zi[i]:zi[i]="on"+i}function Ge(i,e){if(i.fa)i=!0;else{e=new mr(e,this);var n=i.listener,o=i.la||i.src;i.ia&&K(i),i=n.call(o,e)}return i}function lt(i){return(i=i[gi])instanceof Lr?i:null}var Qt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xt(i){return"function"==typeof i?i:(i[Qt]||(i[Qt]=function(e){return i.handleEvent(e)}),i[Qt])}function _t(){be.call(this),this.i=new Lr(this),this.S=this,this.J=null}function Ft(i,e){var n,o=i.J;if(o)for(n=[];o;o=o.J)n.push(o);if(i=i.S,o=e.type||e,"string"==typeof e)e=new wt(e,i);else if(e instanceof wt)e.target=e.target||i;else{var u=e;Hi(e=new wt(o,i),u)}if(u=!0,n)for(var l=n.length-1;0<=l;l--){var g=e.g=n[l];u=qn(g,o,!0,e)&&u}if(u=qn(g=e.g=i,o,!0,e)&&u,u=qn(g,o,!1,e)&&u,n)for(l=0;l<n.length;l++)u=qn(g=e.g=n[l],o,!1,e)&&u}function qn(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,l=0;l<e.length;++l){var g=e[l];if(g&&!g.fa&&g.capture==n){var S=g.listener,N=g.la||g.src;g.ia&&Kr(i.i,g),u=!1!==S.call(N,o)&&u}}return u&&!o.defaultPrevented}fe(_t,be),_t.prototype[Ct]=!0,_t.prototype.removeEventListener=function(i,e,n,o){Z(this,i,e,n,o)},_t.prototype.N=function(){if(_t.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)kr(n[o]);delete i.g[e],i.h--}}this.J=null},_t.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},_t.prototype.P=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var mi=ct.JSON.stringify;function ks(){var i=rr;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Ae=new class Qr{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new tt,i=>i.reset());class tt{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Bt(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function Pt(i){ct.setTimeout(()=>{throw i},0)}let vt,fn=!1,rr=new class Be{constructor(){this.h=this.g=null}add(e,n){const o=Ae.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},ir=()=>{const i=ct.Promise.resolve(void 0);vt=()=>{i.then(si)}};var si=()=>{for(var i;i=ks();){try{i.h.call(i.g)}catch(n){Pt(n)}var e=Ae;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}fn=!1};function Fr(i,e){_t.call(this),this.h=i||1,this.g=e||ct,this.j=de(this.qb,this),this.l=Date.now()}function Yr(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function Xs(i,e,n){if("function"==typeof i)n&&(i=de(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=de(i.handleEvent,i)}return 2147483647<Number(e)?-1:ct.setTimeout(i,e||0)}function Yi(i){i.g=Xs(()=>{i.g=null,i.i&&(i.i=!1,Yi(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}fe(Fr,_t),(ae=Fr.prototype).ga=!1,ae.T=null,ae.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ft(this,"tick"),this.ga&&(Yr(this),this.start()))}},ae.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ae.N=function(){Fr.$.N.call(this),Yr(this),delete this.g};class Io extends be{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Yi(this)}N(){super.N(),this.g&&(ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fs(i){be.call(this),this.h=i,this.g={}}fe(fs,be);var Ls=[];function an(i,e,n,o){Array.isArray(n)||(n&&(Ls[0]=n.toString()),n=Ls);for(var u=0;u<n.length;u++){var l=Zr(e,n[u],o||i.handleEvent,!1,i.h||i);if(!l)break;i.g[l.key]=l}}function _r(i){Ar(i.g,function(e,n){this.g.hasOwnProperty(n)&&K(e)},i),i.g={}}function Ni(){this.g=!0}function xi(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Jr(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var l=u[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var g=1;g<u.length;g++)u[g]=""}}}return mi(n)}catch{return e}}(i,n)+(o?" "+o:"")})}fs.prototype.N=function(){fs.$.N.call(this),_r(this)},fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ni.prototype.Ea=function(){this.g=!1},Ni.prototype.info=function(){};var Ji={},Ds=null;function eo(){return Ds=Ds||new _t}function Us(i){wt.call(this,Ji.Ta,i)}function wo(i){const e=eo();Ft(e,new Us(e))}function Ia(i,e){wt.call(this,Ji.STAT_EVENT,i),this.stat=e}function jn(i){const e=eo();Ft(e,new Ia(e,i))}function to(i,e){wt.call(this,Ji.Ua,i),this.size=e}function ar(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ct.setTimeout(function(){i()},e)}Ji.Ta="serverreachability",fe(Us,wt),Ji.STAT_EVENT="statevent",fe(Ia,wt),Ji.Ua="timingevent",fe(to,wt);var As={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ps={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Do(){}function Vo(){}Do.prototype.h=null;var Jo,_i={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Xr(){wt.call(this,"d")}function js(){wt.call(this,"c")}function Ci(){}function yn(i,e,n,o){this.l=i,this.j=e,this.m=n,this.W=o||1,this.U=new fs(this),this.P=yi,this.V=new Fr(i=Ir?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Pr}function Pr(){this.i=null,this.g="",this.h=!1}fe(Xr,wt),fe(js,wt),fe(Ci,Do),Ci.prototype.g=function(){return new XMLHttpRequest},Ci.prototype.i=function(){return{}},Jo=new Ci;var yi=45e3,Vr={},ei={};function no(i,e,n){i.L=1,i.v=es(Oi(e)),i.s=n,i.S=!0,ro(i,null)}function ro(i,e){i.G=Date.now(),ur(i),i.A=Oi(i.v);var n=i.A,o=i.W;Array.isArray(o)||(o=[String(o)]),ns(n.i,"t",o),i.C=0,n=i.l.J,i.h=new Pr,i.g=Ws(i.l,n?e:null,!i.s),0<i.O&&(i.M=new Io(de(i.Pa,i,i.g),i.O)),an(i.U,i.g,"readystatechange",i.nb),e=i.I?pi(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),wo(),function Fs(i,e,n,o,u,l){i.info(function(){if(i.g)if(l)for(var g="",S=l.split("&"),N=0;N<S.length;N++){var U=S[N].split("=");if(1<U.length){var H=U[0];U=U[1];var ee=H.split("_");g=2<=ee.length&&"type"==ee[1]?g+(H+"=")+U+"&":g+(H+"=redacted&")}}else g=null;else g=l;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+g})}(i.j,i.u,i.A,i.m,i.W,i.s)}function Cs(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function Uo(i,e,n){let u,o=!0;for(;!i.J&&i.C<n.length;){if(u=Ss(i,n),u==ei){4==e&&(i.o=4,jn(14),o=!1),xi(i.j,i.m,null,"[Incomplete Response]");break}if(u==Vr){i.o=4,jn(15),xi(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}xi(i.j,i.m,u,null),Hr(i,u)}Cs(i)&&u!=ei&&u!=Vr&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,jn(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Kn(e),e.M=!0,jn(11))):(xi(i.j,i.m,n,"[Invalid Chunked Response]"),Tr(i),bn(i))}function Ss(i,e){var n=i.C,o=e.indexOf("\n",n);return-1==o?ei:(n=Number(e.substring(n,o)),isNaN(n)?Vr:(o+=1)+n>e.length?ei:(e=e.slice(o,o+n),i.C=o+n,e))}function ur(i){i.Y=Date.now()+i.P,Et(i,i.P)}function Et(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=ar(de(i.lb,i),e)}function en(i){i.B&&(ct.clearTimeout(i.B),i.B=null)}function bn(i){0==i.l.H||i.J||bi(i.l,i)}function Tr(i){en(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,Yr(i.V),_r(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Hr(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||so(n.i,i)))if(!i.K&&so(n.i,i)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;Nn(n),xe(n)}pr(n),jn(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=ar(de(n.ib,n),6e3));if(1>=ys(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Nr(n,11)}else if((i.K||n.g==i)&&Nn(n),!Yt(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let U=u[e];if(n.V=U[0],U=U[1],2==n.H)if("c"==U[0]){n.K=U[1],n.pa=U[2];const H=U[3];null!=H&&(n.ra=H,n.l.info("VER="+n.ra));const ee=U[4];null!=ee&&(n.Ga=ee,n.l.info("SVER="+n.Ga));const pe=U[5];null!=pe&&"number"==typeof pe&&0<pe&&(n.L=o=1.5*pe,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const Oe=i.g;if(Oe){const gt=Oe.g?Oe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gt){var l=o.i;l.g||-1==gt.indexOf("spdy")&&-1==gt.indexOf("quic")&&-1==gt.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&($s(l,l.h),l.h=null))}if(o.F){const Tt=Oe.g?Oe.g.getResponseHeader("X-HTTP-Session-Id"):null;Tt&&(o.Da=Tt,Vn(o.I,o.F,Tt))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var g=i;if((o=n).wa=Gs(o,o.J?o.pa:null,o.Y),g.K){Gi(o.i,g);var S=g,N=o.L;N&&S.setTimeout(N),S.B&&(en(S),ur(S)),o.g=g}else Yn(o);0<n.j.length&&kt(n)}else"stop"!=U[0]&&"close"!=U[0]||Nr(n,7);else 3==n.H&&("stop"==U[0]||"close"==U[0]?"stop"==U[0]?Nr(n,7):le(n):"noop"!=U[0]&&n.h&&n.h.Aa(U),n.A=0)}wo()}catch{}}function hr(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(nr(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function as(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(nr(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function Mr(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(nr(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length,l=0;l<u;l++)e.call(void 0,o[l],n&&n[l],i)}(ae=yn.prototype).setTimeout=function(i){this.P=i},ae.nb=function(i){i=i.target;const e=this.M;e&&3==ti(i)?e.l():this.Pa(i)},ae.Pa=function(i){try{if(i==this.g)e:{const H=ti(this.g);var e=this.g.Ia();if(this.g.da(),!(3>H)&&(3!=H||Ir||this.g&&(this.h.h||this.g.ja()||rs(this.g)))){this.J||4!=H||7==e||wo(),en(this);var n=this.g.da();this.ca=n;t:if(Cs(this)){var o=rs(this.g);i="";var u=o.length,l=4==ti(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Tr(this),bn(this);var g="";break t}this.h.i=new ct.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:l&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,g=this.h.g}else g=this.g.ja();if(this.i=200==n,function To(i,e,n,o,u,l,g){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+l+" "+g})}(this.j,this.u,this.A,this.m,this.W,H,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var S,N=this.g;if((S=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yt(S)){var U=S;break t}}U=null}if(!(n=U)){this.i=!1,this.o=3,jn(12),Tr(this),bn(this);break e}xi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hr(this,n)}this.S?(Uo(this,H,g),Ir&&this.i&&3==H&&(an(this.U,this.V,"tick",this.mb),this.V.start())):(xi(this.j,this.m,g,null),Hr(this,g)),4==H&&Tr(this),this.i&&!this.J&&(4==H?bi(this.l,this):(this.i=!1,ur(this)))}else(function Go(i){const e={};i=(i.g&&2<=ti(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<i.length;o++){if(Yt(i[o]))continue;var n=Bt(i[o]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const l=e[u]||[];e[u]=l,l.push(n)}!function Os(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<g.indexOf("Unknown SID")?(this.o=3,jn(12)):(this.o=0,jn(13)),Tr(this),bn(this)}}}catch{}},ae.mb=function(){if(this.g){var i=ti(this.g),e=this.g.ja();this.C<e.length&&(en(this),Uo(this,i,e),this.i&&4!=i&&ur(this))}},ae.cancel=function(){this.J=!0,Tr(this)},ae.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Vs(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(wo(),jn(17)),Tr(this),this.o=2,bn(this)):Et(this,this.Y-i)};var us=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gt(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Gt){this.h=i.h,Xi(this,i.j),this.s=i.s,this.g=i.g,Ur(this,i.m),this.l=i.l;var e=i.i,n=new Xo;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),cr(this,n),this.o=i.o}else i&&(e=String(i).match(us))?(this.h=!1,Xi(this,e[1]||"",!0),this.s=zr(e[2]||""),this.g=zr(e[3]||"",!0),Ur(this,e[4]),this.l=zr(e[5]||"",!0),cr(this,e[6]||"",!0),this.o=zr(e[7]||"")):(this.h=!1,this.i=new Xo(null,this.h))}function Oi(i){return new Gt(i)}function Xi(i,e,n){i.j=n?zr(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Ur(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function cr(i,e,n){e instanceof Xo?(i.i=e,function cs(i,e){e&&!i.j&&(Si(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(Ao(this,o),ns(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=gs(e,ki)),i.i=new Xo(e,i.h))}function Vn(i,e,n){i.i.set(e,n)}function es(i){return Vn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function zr(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function gs(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,io),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function io(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Gt.prototype.toString=function(){var i=[],e=this.j;e&&i.push(gs(e,ts,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(gs(e,ts,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(gs(n,"/"==n.charAt(0)?_s:ms,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",gs(n,An)),i.join("")};var ts=/[#\/\?@]/g,ms=/[#\?:]/g,_s=/[#\?]/g,ki=/[#\?@]/g,An=/#/g;function Xo(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Si(i){i.g||(i.g=new Map,i.h=0,i.i&&function vi(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var l=i[n].substring(0,o);u=i[n].substring(o+1)}else l=i[n];e(l,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ao(i,e){Si(i),e=oi(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Li(i,e){return Si(i),e=oi(i,e),i.g.has(e)}function ns(i,e,n){Ao(i,e),0<n.length&&(i.i=null,i.g.set(oi(i,e),it(n)),i.h+=n.length)}function oi(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Ta(i){this.l=i||Fi,i=ct.PerformanceNavigationTiming?0<(i=ct.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ct.g&&ct.g.Ka&&ct.g.Ka()&&ct.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ae=Xo.prototype).add=function(i,e){Si(this),this.i=null,i=oi(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},ae.forEach=function(i,e){Si(this),this.g.forEach(function(n,o){n.forEach(function(u){i.call(e,u,o,this)},this)},this)},ae.ta=function(){Si(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=i[o];for(let l=0;l<u.length;l++)n.push(e[o])}return n},ae.Z=function(i){Si(this);let e=[];if("string"==typeof i)Li(this,i)&&(e=e.concat(this.g.get(oi(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},ae.set=function(i,e){return Si(this),this.i=null,Li(this,i=oi(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ae.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},ae.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const l=encodeURIComponent(String(o)),g=this.Z(o);for(o=0;o<g.length;o++){var u=l;""!==g[o]&&(u+="="+encodeURIComponent(String(g[o]))),i.push(u)}}return this.i=i.join("&")};var Fi=10;function Vi(i){return!!i.h||!!i.g&&i.g.size>=i.j}function ys(i){return i.h?1:i.g?i.g.size:0}function so(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function $s(i,e){i.g?i.g.add(e):i.h=e}function Gi(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Bo(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return it(i.i)}Ta.prototype.cancel=function(){if(this.i=Bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var Hs=class{stringify(i){return ct.JSON.stringify(i,void 0)}parse(i){return ct.JSON.parse(i,void 0)}};function Cr(){this.g=new Hs}function wa(i,e,n){const o=n||"";try{hr(i,function(u,l){let g=u;Cn(u)&&(g=mi(u)),e.push(o+l+"="+encodeURIComponent(g))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Ei(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function vs(i){this.l=i.ec||null,this.j=i.ob||!1}function oo(i,e){_t.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=jo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fe(vs,Do),vs.prototype.g=function(){return new oo(this.l,this.j)},vs.prototype.i=function(i){return function(){return i}}({}),fe(oo,_t);var jo=0;function fr(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function $o(i){i.readyState=4,i.l=null,i.j=null,i.A=null,ao(i)}function ao(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ae=oo.prototype).open=function(i,e){if(this.readyState!=jo)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,ao(this)},ae.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||ct).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ae.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$o(this)),this.readyState=jo},ae.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,ao(this)),this.g&&(this.readyState=3,ao(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ct.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fr(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},ae.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?$o(this):ao(this),3==this.readyState&&fr(this)}},ae.Za=function(i){this.g&&(this.response=this.responseText=i,$o(this))},ae.Ya=function(i){this.g&&(this.response=i,$o(this))},ae.ka=function(){this.g&&$o(this)},ae.setRequestHeader=function(i,e){this.v.append(i,e)},ae.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ae.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(oo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Co=ct.JSON.parse;function Qn(i){_t.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=zs,this.L=this.M=!1}fe(Qn,_t);var zs="",ou=/^https?$/i,So=["POST","PUT"];function Ho(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Ii(i),zo(i)}function Ii(i){i.F||(i.F=!0,Ft(i,"complete"),Ft(i,"error"))}function Ro(i){if(i.h&&typeof Zt<"u"&&(!i.C[1]||4!=ti(i)||2!=i.da()))if(i.v&&4==ti(i))Xs(i.La,0,i);else if(Ft(i,"readystatechange"),4==ti(i)){i.h=!1;try{const g=i.da();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===g){var u=String(i.I).match(us)[1]||null;!u&&ct.self&&ct.self.location&&(u=ct.self.location.protocol.slice(0,-1)),o=!ou.test(u?u.toLowerCase():"")}n=o}if(n)Ft(i,"complete"),Ft(i,"success");else{i.m=6;try{var l=2<ti(i)?i.g.statusText:""}catch{l=""}i.j=l+" ["+i.da()+"]",Ii(i)}}finally{zo(i)}}}function zo(i,e){if(i.g){oa(i);const n=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||Ft(i,"ready");try{n.onreadystatechange=o}catch{}}}function oa(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(ct.clearTimeout(i.A),i.A=null)}function ti(i){return i.g?i.g.readyState:0}function rs(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case zs:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function O(i){let e="";return Ar(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function L(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=O(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):Vn(i,e,n))}function Q(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function J(i){this.Ga=0,this.j=[],this.l=new Ni,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Q("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Q("baseRetryDelayMs",5e3,i),this.hb=Q("retryDelaySeedMs",1e4,i),this.eb=Q("forwardChannelMaxRetries",2,i),this.xa=Q("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new Ta(i&&i.concurrentRequestLimit),this.Ja=new Cr,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function le(i){if(Xe(i),3==i.H){var e=i.W++,n=Oi(i.I);if(Vn(n,"SID",i.K),Vn(n,"RID",e),Vn(n,"TYPE","terminate"),dn(i,n),(e=new yn(i,i.l,e)).L=2,e.v=es(Oi(n)),n=!1,ct.navigator&&ct.navigator.sendBeacon)try{n=ct.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&ct.Image&&((new Image).src=e.v,n=!0),n||(e.g=Ws(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ur(e)}ni(i)}function xe(i){i.g&&(Kn(i),i.g.cancel(),i.g=null)}function Xe(i){xe(i),i.u&&(ct.clearTimeout(i.u),i.u=null),Nn(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ct.clearTimeout(i.m),i.m=null)}function kt(i){if(!Vi(i.i)&&!i.m){i.m=!0;var e=i.Na;vt||ir(),fn||(vt(),fn=!0),rr.add(e,i),i.C=0}}function tn(i,e){var n;n=e?e.m:i.W++;const o=Oi(i.I);Vn(o,"SID",i.K),Vn(o,"RID",n),Vn(o,"AID",i.V),dn(i,o),i.o&&i.s&&L(o,i.o,i.s),n=new yn(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=lr(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),$s(i.i,n),no(n,o,e)}function dn(i,e){i.na&&Ar(i.na,function(n,o){Vn(e,o,n)}),i.h&&hr({},function(n,o){Vn(e,o,n)})}function lr(i,e,n){n=Math.min(i.j.length,n);var o=i.h?de(i.h.Va,i.h,i):null;e:{var u=i.j;let l=-1;for(;;){const g=["count="+n];-1==l?0<n?(l=u[0].g,g.push("ofs="+l)):l=0:g.push("ofs="+l);let S=!0;for(let N=0;N<n;N++){let U=u[N].g;const H=u[N].map;if(U-=l,0>U)l=Math.max(0,u[N].g-100),S=!1;else try{wa(H,g,"req"+U+"_")}catch{o&&o(H)}}if(S){o=g.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,o}function Yn(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;vt||ir(),fn||(vt(),fn=!0),rr.add(e,i),i.A=0}}function pr(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=ar(de(i.Ma,i),qi(i,i.A)),i.A++,0))}function Kn(i){null!=i.B&&(ct.clearTimeout(i.B),i.B=null)}function ui(i){i.g=new yn(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=Oi(i.wa);Vn(e,"RID","rpc"),Vn(e,"SID",i.K),Vn(e,"AID",i.V),Vn(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&Vn(e,"TO",i.qa),Vn(e,"TYPE","xmlhttp"),dn(i,e),i.o&&i.s&&L(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.v=es(Oi(e)),n.s=null,n.S=!0,ro(n,i)}function Nn(i){null!=i.v&&(ct.clearTimeout(i.v),i.v=null)}function bi(i,e){var n=null;if(i.g==e){Nn(i),Kn(i),i.g=null;var o=2}else{if(!so(i.i,e))return;n=e.F,Gi(i.i,e),o=1}if(0!=i.H)if(e.i)if(1==o){n=e.s?e.s.length:0,e=Date.now()-e.G;var u=i.C;Ft(o=eo(),new to(o,n)),kt(i)}else Yn(i);else if(3==(u=e.o)||0==u&&0<e.ca||!(1==o&&function Ot(i,e){return!(ys(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=ar(de(i.Na,i,e),qi(i,i.C)),i.C++,0)))}(i,e)||2==o&&pr(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:Nr(i,5);break;case 4:Nr(i,10);break;case 3:Nr(i,6);break;default:Nr(i,2)}}function qi(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function Nr(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var o=de(i.pb,i);n||(n=new Gt("//www.google.com/images/cleardot.gif"),ct.location&&"http"==ct.location.protocol||Xi(n,"https"),es(n)),function Wi(i,e){const n=new Ni;if(ct.Image){const o=new Image;o.onload=ve(Ei,n,o,"TestLoadImage: loaded",!0,e),o.onerror=ve(Ei,n,o,"TestLoadImage: error",!1,e),o.onabort=ve(Ei,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=ve(Ei,n,o,"TestLoadImage: timeout",!1,e),ct.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else jn(2);i.H=0,i.h&&i.h.za(e),ni(i),Xe(i)}function ni(i){if(i.H=0,i.ma=[],i.h){const e=Bo(i.i);(0!=e.length||0!=i.j.length)&&(kn(i.ma,e),kn(i.ma,i.j),i.i.i.length=0,it(i.j),i.j.length=0),i.h.ya()}}function Gs(i,e,n){var o=n instanceof Gt?Oi(n):new Gt(n);if(""!=o.g)e&&(o.g=e+"."+o.g),Ur(o,o.m);else{var u=ct.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var l=new Gt(null);o&&Xi(l,o),e&&(l.g=e),u&&Ur(l,u),n&&(l.l=n),o=l}return e=i.Da,(n=i.F)&&e&&Vn(o,n,e),Vn(o,"VER",i.ra),dn(i,o),o}function Ws(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Qn(n&&i.Ha&&!i.va?new vs({ob:!0}):i.va)).Oa(i.J),e}function qs(){}function uo(){if(Sn&&!(10<=Number(Tn)))throw Error("Environmental error: no available transport.")}function Ui(i,e){_t.call(this),this.g=new J(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!Yt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yt(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new co(this)}function Da(i){Xr.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Qu(){js.call(this),this.status=1}function co(i){this.g=i}function y(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function T(i,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)o[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)o[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var l=i.g[3],g=(e=i.g[0])+(l^(n=i.g[1])&((u=i.g[2])^l))+o[0]+3614090360&4294967295;g=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=n+(g<<7&4294967295|g>>>25))+((g=l+(u^e&(n^u))+o[1]+3905402710&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^l&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(l^e))+o[3]+3250441966&4294967295)<<22&4294967295|g>>>10))+((g=e+(l^n&(u^l))+o[4]+4118548399&4294967295)<<7&4294967295|g>>>25))+((g=l+(u^e&(n^u))+o[5]+1200080426&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^l&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(l^e))+o[7]+4249261313&4294967295)<<22&4294967295|g>>>10))+((g=e+(l^n&(u^l))+o[8]+1770035416&4294967295)<<7&4294967295|g>>>25))+((g=l+(u^e&(n^u))+o[9]+2336552879&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^l&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(l^e))+o[11]+2304563134&4294967295)<<22&4294967295|g>>>10))+((g=e+(l^n&(u^l))+o[12]+1804603682&4294967295)<<7&4294967295|g>>>25))+((g=l+(u^e&(n^u))+o[13]+4254626195&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^l&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(l^e))+o[15]+1236535329&4294967295)<<22&4294967295|g>>>10))+((g=e+(u^l&(n^u))+o[1]+4129170786&4294967295)<<5&4294967295|g>>>27))+((g=l+(n^u&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(l^e))+o[11]+643717713&4294967295)<<14&4294967295|g>>>18))+((g=n+(l^e&(u^l))+o[0]+3921069994&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^l&(n^u))+o[5]+3593408605&4294967295)<<5&4294967295|g>>>27))+((g=l+(n^u&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(l^e))+o[15]+3634488961&4294967295)<<14&4294967295|g>>>18))+((g=n+(l^e&(u^l))+o[4]+3889429448&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^l&(n^u))+o[9]+568446438&4294967295)<<5&4294967295|g>>>27))+((g=l+(n^u&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(l^e))+o[3]+4107603335&4294967295)<<14&4294967295|g>>>18))+((g=n+(l^e&(u^l))+o[8]+1163531501&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^l&(n^u))+o[13]+2850285829&4294967295)<<5&4294967295|g>>>27))+((g=l+(n^u&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(l^e))+o[7]+1735328473&4294967295)<<14&4294967295|g>>>18))+((g=n+(l^e&(u^l))+o[12]+2368359562&4294967295)<<20&4294967295|g>>>12))+((g=e+(n^u^l)+o[5]+4294588738&4294967295)<<4&4294967295|g>>>28))+((g=l+(e^n^u)+o[8]+2272392833&4294967295)<<11&4294967295|g>>>21))+((g=u+(l^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^l^e)+o[14]+4259657740&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^l)+o[1]+2763975236&4294967295)<<4&4294967295|g>>>28))+((g=l+(e^n^u)+o[4]+1272893353&4294967295)<<11&4294967295|g>>>21))+((g=u+(l^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^l^e)+o[10]+3200236656&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^l)+o[13]+681279174&4294967295)<<4&4294967295|g>>>28))+((g=l+(e^n^u)+o[0]+3936430074&4294967295)<<11&4294967295|g>>>21))+((g=u+(l^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^l^e)+o[6]+76029189&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^l)+o[9]+3654602809&4294967295)<<4&4294967295|g>>>28))+((g=l+(e^n^u)+o[12]+3873151461&4294967295)<<11&4294967295|g>>>21))+((g=u+(l^e^n)+o[15]+530742520&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^l^e)+o[2]+3299628645&4294967295)<<23&4294967295|g>>>9))+((g=e+(u^(n|~l))+o[0]+4096336452&4294967295)<<6&4294967295|g>>>26))+((g=l+(n^(e|~u))+o[7]+1126891415&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(l|~n))+o[14]+2878612391&4294967295)<<15&4294967295|g>>>17))+((g=n+(l^(u|~e))+o[5]+4237533241&4294967295)<<21&4294967295|g>>>11))+((g=e+(u^(n|~l))+o[12]+1700485571&4294967295)<<6&4294967295|g>>>26))+((g=l+(n^(e|~u))+o[3]+2399980690&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(l|~n))+o[10]+4293915773&4294967295)<<15&4294967295|g>>>17))+((g=n+(l^(u|~e))+o[1]+2240044497&4294967295)<<21&4294967295|g>>>11))+((g=e+(u^(n|~l))+o[8]+1873313359&4294967295)<<6&4294967295|g>>>26))+((g=l+(n^(e|~u))+o[15]+4264355552&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(l|~n))+o[6]+2734768916&4294967295)<<15&4294967295|g>>>17))+((g=n+(l^(u|~e))+o[13]+1309151649&4294967295)<<21&4294967295|g>>>11))+((l=(e=n+((g=e+(u^(n|~l))+o[4]+4149444226&4294967295)<<6&4294967295|g>>>26))+((g=l+(n^(e|~u))+o[11]+3174756917&4294967295)<<10&4294967295|g>>>22))^((u=l+((g=u+(e^(l|~n))+o[2]+718787259&4294967295)<<15&4294967295|g>>>17))|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(g<<21&4294967295|g>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+l&4294967295}function h(i,e){this.h=e;for(var n=[],o=!0,u=i.length-1;0<=u;u--){var l=0|i[u];o&&l==e||(n[u]=l,o=!1)}this.g=n}(ae=Qn.prototype).Oa=function(i){this.M=i},ae.ha=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Jo.g(),this.C=function Bs(i){return i.h||(i.h=i.i())}(this.u?this.u:Jo),this.g.onreadystatechange=de(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(l){return void Ho(this,l)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const l of o.keys())n.set(l,o.get(l))}o=Array.from(n.keys()).find(l=>"content-type"==l.toLowerCase()),u=ct.FormData&&i instanceof ct.FormData,!(0<=mt(So,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,g]of n)this.g.setRequestHeader(l,g);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{oa(this),0<this.B&&((this.L=function bo(i){return Sn&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=de(this.ua,this)):this.A=Xs(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(l){Ho(this,l)}},ae.ua=function(){typeof Zt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ft(this,"timeout"),this.abort(8))},ae.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Ft(this,"complete"),Ft(this,"abort"),zo(this))},ae.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zo(this,!0)),Qn.$.N.call(this)},ae.La=function(){this.s||(this.G||this.v||this.l?Ro(this):this.kb())},ae.kb=function(){Ro(this)},ae.isActive=function(){return!!this.g},ae.da=function(){try{return 2<ti(this)?this.g.status:-1}catch{return-1}},ae.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ae.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Co(e)}},ae.Ia=function(){return this.m},ae.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ae=J.prototype).ra=8,ae.H=1,ae.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new yn(this,this.l,i);let l=this.s;if(this.U&&(l?(l=pi(l),Hi(l,this.U)):l=this.U),null!==this.o||this.O||(u.I=l,l=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=lr(this,u,e),Vn(n=Oi(this.I),"RID",i),Vn(n,"CVER",22),this.F&&Vn(n,"X-HTTP-Session-Id",this.F),dn(this,n),l&&(this.O?e="headers="+encodeURIComponent(String(O(l)))+"&"+e:this.o&&L(n,this.o,l)),$s(this.i,u),this.bb&&Vn(n,"TYPE","init"),this.P?(Vn(n,"$req",e),Vn(n,"SID","null"),u.aa=!0,no(u,n,null)):no(u,n,e),this.H=2}}else 3==this.H&&(i?tn(this,i):0==this.j.length||Vi(this.i)||tn(this))},ae.Ma=function(){if(this.u=null,ui(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=ar(de(this.jb,this),i)}},ae.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,jn(10),xe(this),ui(this))},ae.ib=function(){null!=this.v&&(this.v=null,xe(this),pr(this),jn(19))},ae.pb=function(i){i?(this.l.info("Successfully pinged google.com"),jn(2)):(this.l.info("Failed to ping google.com"),jn(1))},ae.isActive=function(){return!!this.h&&this.h.isActive(this)},(ae=qs.prototype).Ba=function(){},ae.Aa=function(){},ae.za=function(){},ae.ya=function(){},ae.isActive=function(){return!0},ae.Va=function(){},uo.prototype.g=function(i,e){return new Ui(i,e)},fe(Ui,_t),Ui.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;jn(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=Gs(i,null,i.Y),kt(i)},Ui.prototype.close=function(){le(this.g)},Ui.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=mi(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&kt(e)},Ui.prototype.N=function(){this.g.h=null,delete this.j,le(this.g),delete this.g,Ui.$.N.call(this)},fe(Da,Xr),fe(Qu,js),fe(co,qs),co.prototype.Ba=function(){Ft(this.g,"a")},co.prototype.Aa=function(i){Ft(this.g,new Da(i))},co.prototype.za=function(i){Ft(this.g,new Qu)},co.prototype.ya=function(){Ft(this.g,"b")},fe(y,function j(){this.blockSize=-1}),y.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},y.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,o=this.m,u=this.h,l=0;l<e;){if(0==u)for(;l<=n;)T(this,i,l),l+=this.blockSize;if("string"==typeof i){for(;l<e;)if(o[u++]=i.charCodeAt(l++),u==this.blockSize){T(this,o),u=0;break}}else for(;l<e;)if(o[u++]=i[l++],u==this.blockSize){T(this,o),u=0;break}}this.h=u,this.i+=e},y.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)i[n++]=this.g[e]>>>o&255;return i};var A={};function v(i){return-128<=i&&128>i?function Bn(i,e){var n=A;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new h([0|e],0>e?-1:0)}):new h([0|i],0>i?-1:0)}function M(i){if(isNaN(i)||!isFinite(i))return se;if(0>i)return nt(M(-i));for(var e=[],n=1,o=0;i>=n;o++)e[o]=i/n|0,n*=X;return new h(e,0)}var X=4294967296,se=v(0),Ue=v(1),dt=v(16777216);function Vt(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function yt(i){return-1==i.h}function nt(i){for(var e=i.g.length,n=[],o=0;o<e;o++)n[o]=~i.g[o];return new h(n,~i.h).add(Ue)}function Mt(i,e){return i.add(nt(e))}function sn(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function wn(i,e){this.g=i,this.h=e}function Zn(i,e){if(Vt(e))throw Error("division by zero");if(Vt(i))return new wn(se,se);if(yt(i))return e=Zn(nt(i),e),new wn(nt(e.g),nt(e.h));if(yt(e))return e=Zn(i,nt(e)),new wn(nt(e.g),e.h);if(30<i.g.length){if(yt(i)||yt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Ue,o=e;0>=o.X(i);)n=Jn(n),o=Jn(o);var u=sr(n,1),l=sr(o,1);for(o=sr(o,2),n=sr(n,2);!Vt(o);){var g=l.add(o);0>=g.X(i)&&(u=u.add(n),l=g),o=sr(o,1),n=sr(n,1)}return e=Mt(i,u.R(e)),new wn(u,e)}for(u=se;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),g=(l=M(n)).R(e);yt(g)||0<g.X(i);)g=(l=M(n-=o)).R(e);Vt(l)&&(l=Ue),u=u.add(l),i=Mt(i,g)}return new wn(u,i)}function Jn(i){for(var e=i.g.length+1,n=[],o=0;o<e;o++)n[o]=i.D(o)<<1|i.D(o-1)>>>31;return new h(n,i.h)}function sr(i,e){var n=e>>5;e%=32;for(var o=i.g.length-n,u=[],l=0;l<o;l++)u[l]=0<e?i.D(l+n)>>>e|i.D(l+n+1)<<32-e:i.D(l+n);return new h(u,i.h)}(ae=h.prototype).ea=function(){if(yt(this))return-nt(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);i+=(0<=o?o:X+o)*e,e*=X}return i},ae.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(Vt(this))return"0";if(yt(this))return"-"+nt(this).toString(i);for(var e=M(Math.pow(i,6)),n=this,o="";;){var u=Zn(n,e).g,l=((0<(n=Mt(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(Vt(n=u))return l+o;for(;6>l.length;)l="0"+l;o=l+o}},ae.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},ae.X=function(i){return yt(i=Mt(this,i))?-1:Vt(i)?0:1},ae.abs=function(){return yt(this)?nt(this):this},ae.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0,u=0;u<=e;u++){var l=o+(65535&this.D(u))+(65535&i.D(u)),g=(l>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);o=g>>>16,n[u]=(g&=65535)<<16|(l&=65535)}return new h(n,-2147483648&n[n.length-1]?-1:0)},ae.R=function(i){if(Vt(this)||Vt(i))return se;if(yt(this))return yt(i)?nt(this).R(nt(i)):nt(nt(this).R(i));if(yt(i))return nt(this.R(nt(i)));if(0>this.X(dt)&&0>i.X(dt))return M(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var u=0;u<i.g.length;u++){var l=this.D(o)>>>16,g=65535&this.D(o),S=i.D(u)>>>16,N=65535&i.D(u);n[2*o+2*u]+=g*N,sn(n,2*o+2*u),n[2*o+2*u+1]+=l*N,sn(n,2*o+2*u+1),n[2*o+2*u+1]+=g*S,sn(n,2*o+2*u+1),n[2*o+2*u+2]+=l*S,sn(n,2*o+2*u+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new h(n,0)},ae.gb=function(i){return Zn(this,i).h},ae.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&i.D(o);return new h(n,this.h&i.h)},ae.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|i.D(o);return new h(n,this.h|i.h)},ae.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^i.D(o);return new h(n,this.h^i.h)},uo.prototype.createWebChannel=uo.prototype.g,Ui.prototype.send=Ui.prototype.u,Ui.prototype.open=Ui.prototype.m,Ui.prototype.close=Ui.prototype.close,As.NO_ERROR=0,As.TIMEOUT=8,As.HTTP_ERROR=6,ps.COMPLETE="complete",Vo.EventType=_i,_i.OPEN="a",_i.CLOSE="b",_i.ERROR="c",_i.MESSAGE="d",_t.prototype.listen=_t.prototype.O,Qn.prototype.listenOnce=Qn.prototype.P,Qn.prototype.getLastError=Qn.prototype.Sa,Qn.prototype.getLastErrorCode=Qn.prototype.Ia,Qn.prototype.getStatus=Qn.prototype.da,Qn.prototype.getResponseJson=Qn.prototype.Wa,Qn.prototype.getResponseText=Qn.prototype.ja,Qn.prototype.send=Qn.prototype.ha,Qn.prototype.setWithCredentials=Qn.prototype.Oa,y.prototype.digest=y.prototype.l,y.prototype.reset=y.prototype.reset,y.prototype.update=y.prototype.j,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.R,h.prototype.modulo=h.prototype.gb,h.prototype.compare=h.prototype.X,h.prototype.toNumber=h.prototype.ea,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.D,h.fromNumber=M,h.fromString=function B(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return nt(B(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=M(Math.pow(e,8)),o=se,u=0;u<i.length;u+=8){var l=Math.min(8,i.length-u),g=parseInt(i.substring(u,u+l),e);8>l?(l=M(Math.pow(e,l)),o=o.R(l).add(M(g))):o=(o=o.R(n)).add(M(g))}return o};var Ti=ot.createWebChannelTransport=function(){return new uo},Ki=ot.getStatEventTarget=function(){return eo()},zn=ot.ErrorCode=As,Ri=ot.EventType=ps,bs=ot.Event=Ji,Un=ot.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},au=ot.FetchXmlHttpFactory=vs,Po=ot.WebChannel=Vo,Pi=ot.XhrIo=Qn,kc=ot.Md5=y,Mo=ot.Integer=h;const zt="@firebase/firestore";class Dt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");let Jt="10.5.2";const mn=new De.Yd("@firebase/firestore");function xr(){return mn.logLevel}function Ke(i,...e){if(mn.logLevel<=De.in.DEBUG){const n=e.map(Ba);mn.debug(`Firestore (${Jt}): ${i}`,...n)}}function yr(i,...e){if(mn.logLevel<=De.in.ERROR){const n=e.map(Ba);mn.error(`Firestore (${Jt}): ${i}`,...n)}}function pn(i,...e){if(mn.logLevel<=De.in.WARN){const n=e.map(Ba);mn.warn(`Firestore (${Jt}): ${i}`,...n)}}function Ba(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Ut(i="Unexpected state"){const e=`FIRESTORE (${Jt}) INTERNAL ASSERTION FAILED: `+i;throw yr(e),new Error(e)}function St(i,e){i||Ut()}function ft(i,e){return i}const ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends Ve.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class is{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Sl{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class uu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Lc{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const l=U=>this.i!==u?(u=this.i,n(U)):Promise.resolve();let g=new is;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new is,e.enqueueRetryable(()=>l(this.currentUser))};const S=()=>{const U=g;e.enqueueRetryable((0,Te.Z)(function*(){yield U.promise,yield l(o.currentUser)}))},N=U=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=U,this.auth.addAuthTokenListener(this.o),S()};this.t.onInit(U=>N(U)),setTimeout(()=>{if(!this.auth){const U=this.t.getImmediate({optional:!0});U?N(U):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new is)}},0),S()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(St("string"==typeof o.accessToken),new Sl(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return St(null===e||"string"==typeof e),new Dt(e)}}class Nd{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Es{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new Nd(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ff{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const o=l=>{null!=l.error&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const g=l.token!==this.R;return this.R=l.token,Ke("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>o(l))};const u=l=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>u(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?u(l):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(St("string"==typeof n.token),this.R=n.token,new bl(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function or(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class ci{static newId(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=or(40);for(let l=0;l<u.length;++l)o.length<20&&u[l]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[l]%62))}return o}}function vn(i,e){return i<e?-1:i>e?1:0}function Br(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function Fc(i){return i+"\0"}class vr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new et(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new et(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new et(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vr.fromMillis(Date.now())}static fromDate(e){return vr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new vr(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?vn(this.nanoseconds,e.nanoseconds):vn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qt(e)}static min(){return new qt(new vr(0,0))}static max(){return new qt(new vr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Aa{constructor(e,n,o){void 0===n?n=0:n>e.length&&Ut(),void 0===o?o=e.length-n:o>e.length-n&&Ut(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===Aa.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Aa?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const l=e.get(u),g=n.get(u);if(l<g)return-1;if(l>g)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class $n extends Aa{construct(e,n,o){return new $n(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new et(ke.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new $n(n)}static emptyPath(){return new $n([])}}const pf=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jr extends Aa{construct(e,n,o){return new jr(e,n,o)}static isValidIdentifier(e){return pf.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new jr(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const l=()=>{if(0===o.length)throw new et(ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let g=!1;for(;u<e.length;){const S=e[u];if("\\"===S){if(u+1===e.length)throw new et(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const N=e[u+1];if("\\"!==N&&"."!==N&&"`"!==N)throw new et(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=N,u+=2}else"`"===S?(g=!g,u++):"."!==S||g?(o+=S,u++):(l(),u++)}if(l(),g)throw new et(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jr(n)}static emptyPath(){return new jr([])}}class bt{constructor(e){this.path=e}static fromPath(e){return new bt($n.fromString(e))}static fromName(e){return new bt($n.fromString(e).popFirst(5))}static empty(){return new bt($n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===$n.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return $n.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bt(new $n(e.slice()))}}class ri{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function lo(i){return i.fields.find(e=>2===e.kind)}function aa(i){return i.fields.filter(e=>2!==e.kind)}ri.UNKNOWN_ID=-1;class Is{constructor(e,n){this.fieldPath=e,this.kind=n}}class ja{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ja(0,Rs.min())}}function Ju(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=qt.fromTimestamp(1e9===o?new vr(n+1,0):new vr(n,o));return new Rs(u,bt.empty(),e)}function Uc(i){return new Rs(i.readTime,i.key,-1)}class Rs{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new Rs(qt.min(),bt.empty(),-1)}static max(){return new Rs(qt.max(),bt.empty(),-1)}}function Su(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=bt.comparator(i.documentKey,e.documentKey),0!==n?n:vn(i.largestBatchId,e.largestBatchId))}const Bc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ua{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function $a(i){return jc.apply(this,arguments)}function jc(){return jc=(0,Te.Z)(function*(i){if(i.code!==ke.FAILED_PRECONDITION||i.message!==Bc)throw i;Ke("LocalStore","Unexpectedly lost primary lease")}),jc.apply(this,arguments)}class Me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Me((o,u)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,u)},this.catchCallback=l=>{this.wrapFailure(n,l).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Me?n:Me.resolve(n)}catch(n){return Me.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Me.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Me.reject(n)}static resolve(e){return new Me((n,o)=>{n(e)})}static reject(e){return new Me((n,o)=>{o(e)})}static waitFor(e){return new Me((n,o)=>{let u=0,l=0,g=!1;e.forEach(S=>{++u,S.next(()=>{++l,g&&l===u&&n()},N=>o(N))}),g=!0,l===u&&n()})}static or(e){let n=Me.resolve(!1);for(const o of e)n=n.next(u=>u?Me.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,l)=>{o.push(n.call(this,u,l))}),this.waitFor(o)}static mapArray(e,n){return new Me((o,u)=>{const l=e.length,g=new Array(l);let S=0;for(let N=0;N<l;N++){const U=N;n(e[U]).next(H=>{g[U]=H,++S,S===l&&o(g)},H=>u(H))}})}static doWhile(e,n){return new Me((o,u)=>{const l=()=>{!0===e()?n().next(()=>{l()},u):o()};l()})}}class Xu{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new is,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new w(e,n.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=W(o.target.error);this.V.reject(new w(e,u))}}static open(e,n,o,u){try{return new Xu(n,e.transaction(u,o))}catch(l){throw new w(n,l)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new I(n)}}class Wo{constructor(e,n,o){this.name=e,this.version=n,this.p=o,12.2===Wo.S((0,Ve.z$)())&&yr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ke("SimpleDb","Removing database:",e),P(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ve.hl)())return!1;if(Wo.C())return!0;const e=(0,Ve.z$)(),n=Wo.S(e),o=0<n&&n<10,u=Wo.v(e),l=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||l)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var n=this;return(0,Te.Z)(function*(){return n.db||(Ke("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const l=indexedDB.open(n.name,n.version);l.onsuccess=g=>{o(g.target.result)},l.onblocked=()=>{u(new w(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=g=>{const S=g.target.error;u("VersionError"===S.name?new et(ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===S.name?new et(ke.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+S):new w(e,S))},l.onupgradeneeded=g=>{Ke("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',g.oldVersion),n.p.N(g.target.result,l.transaction,g.oldVersion,n.version).next(()=>{Ke("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=o=>n.B(o)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var l=this;return(0,Te.Z)(function*(){const g="readonly"===n;let S=0;for(;;){++S;try{l.db=yield l.O(e);const N=Xu.open(l.db,e,g?"readonly":"readwrite",o),U=u(N).next(H=>(N.g(),H)).catch(H=>(N.abort(H),Me.reject(H))).toPromise();return U.catch(()=>{}),yield N.m,U}catch(N){const U=N,H="FirebaseError"!==U.name&&S<3;if(Ke("SimpleDb","Transaction failed with error:",U.message,"Retrying:",H),l.close(),!H)return Promise.reject(U)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ec{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return P(this.k.delete())}}class w extends et{constructor(e,n){super(ke.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function b(i){return"IndexedDbTransactionError"===i.name}class I{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(Ke("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),P(o)}add(e){return Ke("SimpleDb","ADD",this.store.name,e,e),P(this.store.add(e))}get(e){return P(this.store.get(e)).next(n=>(void 0===n&&(n=null),Ke("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Ke("SimpleDb","DELETE",this.store.name,e),P(this.store.delete(e))}count(){return Ke("SimpleDb","COUNT",this.store.name),P(this.store.count())}W(e,n){const o=this.options(e,n);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),l=[];return this.G(u,(g,S)=>{l.push(S)}).next(()=>l)}{const u=this.store.getAll(o.range);return new Me((l,g)=>{u.onerror=S=>{g(S.target.error)},u.onsuccess=S=>{l(S.target.result)}})}}j(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new Me((u,l)=>{o.onerror=g=>{l(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}H(e,n){Ke("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.J=!1;const u=this.cursor(o);return this.G(u,(l,g,S)=>S.delete())}Y(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.G(u,n)}Z(e){const n=this.cursor({});return new Me((o,u)=>{n.onerror=l=>{const g=W(l.target.error);u(g)},n.onsuccess=l=>{const g=l.target.result;g?e(g.primaryKey,g.value).next(S=>{S?g.continue():o()}):o()}})}G(e,n){const o=[];return new Me((u,l)=>{e.onerror=g=>{l(g.target.error)},e.onsuccess=g=>{const S=g.target.result;if(!S)return void u();const N=new ec(S),U=n(S.primaryKey,S.value,N);if(U instanceof Me){const H=U.catch(ee=>(N.done(),Me.reject(ee)));o.push(H)}N.isDone?u():null===N.$?S.continue():S.continue(N.$)}}).next(()=>Me.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function P(i){return new Me((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=W(o.target.error);n(u)}})}let k=!1;function W(i){const e=Wo.S((0,Ve.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new et("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return k||(k=!0,setTimeout(()=>{throw o},0)),o}}return i}class te{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;Ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Te.Z)(function*(){n.task=null;try{Ke("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(o){b(o)?Ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield $a(o)}yield n.ee(6e4)}))}}class Le{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,Te.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.ne(o,e))})()}ne(e,n){const o=new Set;let u=n,l=!0;return Me.doWhile(()=>!0===l&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!o.has(g))return Ke("IndexBackiller",`Processing collection: ${g}`),this.re(e,g,u).next(S=>{u-=S,o.add(g)});l=!1})).next(()=>n-u)}re(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(l=>{const g=l.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.ie(u,l)).next(S=>(Ke("IndexBackiller",`Updating offset: ${S}`),this.localStore.indexManager.updateCollectionGroup(e,n,S))).next(()=>g.size)}))}ie(e,n){let o=e;return n.changes.forEach((u,l)=>{const g=Uc(l);Su(g,o)>0&&(o=g)}),new Rs(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Pe=(()=>{class i{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=u=>this.se(u),this.oe=u=>o.writeSequenceNumber(u))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function Rt(i){return null==i}function En(i){return 0===i&&1/i==-1/0}function Sr(i){return"number"==typeof i&&Number.isInteger(i)&&!En(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function _n(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=ho(e)),e=Ks(i.get(n),e);return ho(e)}function Ks(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const l=i.charAt(u);switch(l){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=l}}return n}function ho(i){return i+"\x01\x01"}function Ts(i){const e=i.length;if(St(e>=2),2===e)return St("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),$n.emptyPath();const n=e-2,o=[];let u="";for(let l=0;l<e;){const g=i.indexOf("\x01",l);switch((g<0||g>n)&&Ut(),i.charAt(g+1)){case"\x01":const S=i.substring(l,g);let N;0===u.length?N=S:(u+=S,N=u,u=""),o.push(N);break;case"\x10":u+=i.substring(l,g),u+="\0";break;case"\x11":u+=i.substring(l,g+1);break;default:Ut()}l=g+2}return new $n(o)}const Ha=["userId","batchId"];function Zs(i,e){return[i,_n(e)]}function bu(i,e,n){return[i,_n(e),n]}const $c={},Hc=["prefixPath","collectionGroup","readTime","documentId"],Rl=["prefixPath","collectionGroup","documentId"],rg=["collectionGroup","readTime","prefixPath","documentId"],cu=["canonicalId","targetId"],za=["targetId","path"],Ru=["path","targetId"],gf=["collectionId","parent"],xd=["indexId","uid"],w_=["uid","sequenceNumber"],ig=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Od=["indexId","uid","orderedDocumentKey"],sg=["userId","collectionPath","documentId"],D_=["userId","collectionPath","largestBatchId"],kd=["userId","collectionGroup","largestBatchId"],lu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],og=[...lu,"documentOverlays"],du=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Pl=du,tc=[...Pl,"indexConfiguration","indexState","indexEntries"];class Ml extends ua{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function ls(i,e){const n=ft(i);return Wo.M(n.ae,e)}function Pu(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function hu(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function ca(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class $r{constructor(e,n){this.comparator=e,this.root=n||Qi.EMPTY}insert(e,n){return new $r(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qi.BLACK,null,null))}remove(e){return new $r(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ga(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ga(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ga(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ga(this.root,e,this.comparator,!0)}}class Ga{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?o(e.key,n):1,n&&u&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qi{constructor(e,n,o,u,l){this.key=e,this.value=n,this.color=o??Qi.RED,this.left=u??Qi.EMPTY,this.right=l??Qi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,l){return new Qi(e??this.key,n??this.value,o??this.color,u??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const l=o(e,u.key);return u=l<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===l?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Qi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return Qi.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ut();const e=this.left.check();if(e!==this.right.check())throw Ut();return e+(this.isRed()?0:1)}}Qi.EMPTY=null,Qi.RED=!0,Qi.BLACK=!1,Qi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ut()}get value(){throw Ut()}get color(){throw Ut()}get left(){throw Ut()}get right(){throw Ut()}copy(e,n,o,u,l){return this}insert(e,n,o){return new Qi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Or{constructor(e){this.comparator=e,this.data=new $r(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mu(this.data.getIterator())}getIteratorFrom(e){return new Mu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof Or)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,l=o.getNext().key;if(0!==this.comparator(u,l))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Or(this.comparator);return n.data=e,n}}class Mu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Wa(i){return i.hasNext()?i.getNext():void 0}class fo{constructor(e){this.fields=e,e.sort(jr.comparator)}static empty(){return new fo([])}unionWith(e){let n=new Or(jr.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new fo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Br(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class Ld extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Bi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Ld("Invalid base64 string: "+l):l}}(e);return new Bi(n)}static fromUint8Array(e){const n=function(u){let l="";for(let g=0;g<u.length;++g)l+=String.fromCharCode(u[g]);return l}(e);return new Bi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bi.EMPTY_BYTE_STRING=new Bi("");const _f=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fu(i){if(St(!!i),"string"==typeof i){let e=0;const n=_f.exec(i);if(St(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Gr(i.seconds),nanos:Gr(i.nanos)}}function Gr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function po(i){return"string"==typeof i?Bi.fromBase64String(i):Bi.fromUint8Array(i)}function Nl(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Nu(i){const e=i.mapValue.fields.__previous_value__;return Nl(e)?Nu(e):e}function nc(i){const e=fu(i.mapValue.fields.__local_write_time__.timestampValue);return new vr(e.seconds,e.nanos)}class xu{constructor(e,n,o,u,l,g,S,N,U){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=l,this.forceLongPolling=g,this.autoDetectLongPolling=S,this.longPollingOptions=N,this.useFetchStreams=U}}class la{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new la("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof la&&e.projectId===this.projectId&&e.database===this.database}}const wi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zc={nullValue:"NULL_VALUE"};function da(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Nl(i)?4:ag(i)?9007199254740991:10:Ut()}function ea(i,e){if(i===e)return!0;const n=da(i);if(n!==da(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return nc(i).isEqual(nc(e));case 3:return function(u,l){if("string"==typeof u.timestampValue&&"string"==typeof l.timestampValue&&u.timestampValue.length===l.timestampValue.length)return u.timestampValue===l.timestampValue;const g=fu(u.timestampValue),S=fu(l.timestampValue);return g.seconds===S.seconds&&g.nanos===S.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return l=e,po(i.bytesValue).isEqual(po(l.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,l){return Gr(u.geoPointValue.latitude)===Gr(l.geoPointValue.latitude)&&Gr(u.geoPointValue.longitude)===Gr(l.geoPointValue.longitude)}(i,e);case 2:return function(u,l){if("integerValue"in u&&"integerValue"in l)return Gr(u.integerValue)===Gr(l.integerValue);if("doubleValue"in u&&"doubleValue"in l){const g=Gr(u.doubleValue),S=Gr(l.doubleValue);return g===S?En(g)===En(S):isNaN(g)&&isNaN(S)}return!1}(i,e);case 9:return Br(i.arrayValue.values||[],e.arrayValue.values||[],ea);case 10:return function(u,l){const g=u.mapValue.fields||{},S=l.mapValue.fields||{};if(Pu(g)!==Pu(S))return!1;for(const N in g)if(g.hasOwnProperty(N)&&(void 0===S[N]||!ea(g[N],S[N])))return!1;return!0}(i,e);default:return Ut()}var l}function rc(i,e){return void 0!==(i.values||[]).find(n=>ea(n,e))}function Sa(i,e){if(i===e)return 0;const n=da(i),o=da(e);if(n!==o)return vn(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return vn(i.booleanValue,e.booleanValue);case 2:return function(l,g){const S=Gr(l.integerValue||l.doubleValue),N=Gr(g.integerValue||g.doubleValue);return S<N?-1:S>N?1:S===N?0:isNaN(S)?isNaN(N)?0:-1:1}(i,e);case 3:return Gc(i.timestampValue,e.timestampValue);case 4:return Gc(nc(i),nc(e));case 5:return vn(i.stringValue,e.stringValue);case 6:return function(l,g){const S=po(l),N=po(g);return S.compareTo(N)}(i.bytesValue,e.bytesValue);case 7:return function(l,g){const S=l.split("/"),N=g.split("/");for(let U=0;U<S.length&&U<N.length;U++){const H=vn(S[U],N[U]);if(0!==H)return H}return vn(S.length,N.length)}(i.referenceValue,e.referenceValue);case 8:return function(l,g){const S=vn(Gr(l.latitude),Gr(g.latitude));return 0!==S?S:vn(Gr(l.longitude),Gr(g.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(l,g){const S=l.values||[],N=g.values||[];for(let U=0;U<S.length&&U<N.length;++U){const H=Sa(S[U],N[U]);if(H)return H}return vn(S.length,N.length)}(i.arrayValue,e.arrayValue);case 10:return function(l,g){if(l===wi.mapValue&&g===wi.mapValue)return 0;if(l===wi.mapValue)return 1;if(g===wi.mapValue)return-1;const S=l.fields||{},N=Object.keys(S),U=g.fields||{},H=Object.keys(U);N.sort(),H.sort();for(let ee=0;ee<N.length&&ee<H.length;++ee){const pe=vn(N[ee],H[ee]);if(0!==pe)return pe;const Oe=Sa(S[N[ee]],U[H[ee]]);if(0!==Oe)return Oe}return vn(N.length,H.length)}(i.mapValue,e.mapValue);default:throw Ut()}}function Gc(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return vn(i,e);const n=fu(i),o=fu(e),u=vn(n.seconds,o.seconds);return 0!==u?u:vn(n.nanos,o.nanos)}function ha(i){return qa(i)}function qa(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=fu(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?po(i.bytesValue).toBase64():"referenceValue"in i?bt.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",u=!0;for(const l of n.values||[])u?u=!1:o+=",",o+=qa(l);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let u="{",l=!0;for(const g of o)l?l=!1:u+=",",u+=`${g}:${qa(n.fields[g])}`;return u+"}"}(i.mapValue):Ut()}function pu(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Wc(i){return!!i&&"integerValue"in i}function ba(i){return!!i&&"arrayValue"in i}function Fd(i){return!!i&&"nullValue"in i}function yf(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Vd(i){return!!i&&"mapValue"in i}function qc(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return hu(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=qc(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qc(i.arrayValue.values[n]);return e}return Object.assign({},i)}function ag(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ud(i){return"nullValue"in i?zc:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?pu(la.empty(),bt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Ut()}function A_(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?pu(la.empty(),bt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?wi:Ut()}function ug(i,e){const n=Sa(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Ou(i,e){const n=Sa(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Ps{constructor(e){this.value=e}static empty(){return new Ps({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Vd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qc(n)}setAll(e){let n=jr.emptyPath(),o={},u=[];e.forEach((g,S)=>{if(!n.isImmediateParentOf(S)){const N=this.getFieldsMap(n);this.applyChanges(N,o,u),o={},u=[],n=S.popLast()}g?o[S.lastSegment()]=qc(g):u.push(S.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,o,u)}delete(e){const n=this.field(e.popLast());Vd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ea(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];Vd(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){hu(n,(u,l)=>e[u]=l);for(const u of o)delete e[u]}clone(){return new Ps(qc(this.value))}}function vf(i){const e=[];return hu(i.fields,(n,o)=>{const u=new jr([n]);if(Vd(o)){const l=vf(o.mapValue).fields;if(0===l.length)e.push(u);else for(const g of l)e.push(u.child(g))}else e.push(u)}),new fo(e)}class Pn{constructor(e,n,o,u,l,g,S){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=l,this.data=g,this.documentState=S}static newInvalidDocument(e){return new Pn(e,0,qt.min(),qt.min(),qt.min(),Ps.empty(),0)}static newFoundDocument(e,n,o,u){return new Pn(e,1,n,qt.min(),o,u,0)}static newNoDocument(e,n){return new Pn(e,2,n,qt.min(),qt.min(),Ps.empty(),0)}static newUnknownDocument(e,n){return new Pn(e,3,n,qt.min(),qt.min(),Ps.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(qt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ps.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ps.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gu{constructor(e,n){this.position=e,this.inclusive=n}}function ic(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const l=e[u],g=i.position[u];if(o=l.field.isKeyField()?bt.comparator(bt.fromName(g.referenceValue),n.key):Sa(g,n.data.field(l.field)),"desc"===l.dir&&(o*=-1),0!==o)break}return o}function xl(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!ea(i.position[n],e.position[n]))return!1;return!0}class Qs{constructor(e,n="asc"){this.field=e,this.dir=n}}function sc(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Bd{}class Hn extends Bd{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new If(e,n,o):"array-contains"===n?new dg(e,o):"in"===n?new kl(e,o):"not-in"===n?new hg(e,o):"array-contains-any"===n?new Tf(e,o):new Hn(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new Hd(e,o):new lg(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Sa(n,this.value)):null!==n&&da(this.value)===da(n)&&this.matchesComparison(Sa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ut()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gr extends Bd{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new gr(e,n)}matches(e){return ku(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function ku(i){return"and"===i.op}function Ef(i){return"or"===i.op}function jd(i){return cg(i)&&ku(i)}function cg(i){for(const e of i.filters)if(e instanceof gr)return!1;return!0}function go(i){if(i instanceof Hn)return i.field.canonicalString()+i.op.toString()+ha(i.value);if(jd(i))return i.filters.map(e=>go(e)).join(",");{const e=i.filters.map(n=>go(n)).join(",");return`${i.op}(${e})`}}function Ol(i,e){return i instanceof Hn?(o=i,(u=e)instanceof Hn&&o.op===u.op&&o.field.isEqual(u.field)&&ea(o.value,u.value)):i instanceof gr?function(o,u){return u instanceof gr&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((l,g,S)=>l&&Ol(g,u.filters[S]),!0)}(i,e):void Ut();var o,u}function Ka(i,e){const n=i.filters.concat(e);return gr.create(n,i.op)}function $d(i){return i instanceof Hn?`${(n=i).field.canonicalString()} ${n.op} ${ha(n.value)}`:i instanceof gr?function(n){return n.op.toString()+" {"+n.getFilters().map($d).join(" ,")+"}"}(i):"Filter";var n}class If extends Hn{constructor(e,n,o){super(e,n,o),this.key=bt.fromName(o.referenceValue)}matches(e){const n=bt.comparator(e.key,this.key);return this.matchesComparison(n)}}class Hd extends Hn{constructor(e,n){super(e,"in",n),this.keys=zd(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class lg extends Hn{constructor(e,n){super(e,"not-in",n),this.keys=zd(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zd(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>bt.fromName(o.referenceValue))}class dg extends Hn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ba(n)&&rc(n.arrayValue,this.value)}}class kl extends Hn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&rc(this.value.arrayValue,n)}}class hg extends Hn{constructor(e,n){super(e,"not-in",n)}matches(e){if(rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!rc(this.value.arrayValue,n)}}class Tf extends Hn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ba(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>rc(this.value.arrayValue,o))}}class oc{constructor(e,n=null,o=[],u=[],l=null,g=null,S=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=l,this.startAt=g,this.endAt=S,this.ce=null}}function Ll(i,e=null,n=[],o=[],u=null,l=null,g=null){return new oc(i,e,n,o,u,l,g)}function qo(i){const e=ft(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>go(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(l=o).field.canonicalString()+l.dir;var l}).join(","),Rt(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>ha(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>ha(o)).join(",")),e.ce=n}return e.ce}function ac(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!sc(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Ol(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!xl(i.startAt,e.startAt)&&xl(i.endAt,e.endAt)}function mu(i){return bt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Fl(i,e){return i.filters.filter(n=>n instanceof Hn&&n.field.isEqual(e))}function Gd(i,e,n){let o=zc,u=!0;for(const l of Fl(i,e)){let g=zc,S=!0;switch(l.op){case"<":case"<=":g=Ud(l.value);break;case"==":case"in":case">=":g=l.value;break;case">":g=l.value,S=!1;break;case"!=":case"not-in":g=zc}ug({value:o,inclusive:u},{value:g,inclusive:S})<0&&(o=g,u=S)}if(null!==n)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const g=n.position[l];ug({value:o,inclusive:u},{value:g,inclusive:n.inclusive})<0&&(o=g,u=n.inclusive);break}return{value:o,inclusive:u}}function Vl(i,e,n){let o=wi,u=!0;for(const l of Fl(i,e)){let g=wi,S=!0;switch(l.op){case">=":case">":g=A_(l.value),S=!1;break;case"==":case"in":case"<=":g=l.value;break;case"<":g=l.value,S=!1;break;case"!=":case"not-in":g=wi}Ou({value:o,inclusive:u},{value:g,inclusive:S})>0&&(o=g,u=S)}if(null!==n)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const g=n.position[l];Ou({value:o,inclusive:u},{value:g,inclusive:n.inclusive})>0&&(o=g,u=n.inclusive);break}return{value:o,inclusive:u}}class ta{constructor(e,n=null,o=[],u=[],l=null,g="F",S=null,N=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=l,this.limitType=g,this.startAt=S,this.endAt=N,this.le=null,this.he=null,this.Pe=null}}function Wd(i,e,n,o,u,l,g,S){return new ta(i,e,n,o,u,l,g,S)}function Lu(i){return new ta(i)}function wf(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Fu(i){return null!==i.collectionGroup}function Ys(i){const e=ft(i);if(null===e.le){e.le=[];const n=new Set;for(const l of e.explicitOrderBy)e.le.push(l),n.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(g){let S=new Or(jr.comparator);return g.filters.forEach(N=>{N.getFlattenedFilters().forEach(U=>{U.isInequality()&&(S=S.add(U.field))})}),S})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.le.push(new Qs(l,o))}),n.has(jr.keyField().canonicalString())||e.le.push(new Qs(jr.keyField(),o))}return e.le}function mo(i){const e=ft(i);return e.he||(e.he=function fg(i,e){if("F"===i.limitType)return Ll(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(u=>new Qs(u.field,"desc"===u.dir?"asc":"desc"));const n=i.endAt?new gu(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new gu(i.startAt.position,i.startAt.inclusive):null;return Ll(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}(e,Ys(i))),e.he}function uc(i,e){const n=i.filters.concat([e]);return new ta(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Ul(i,e,n){return new ta(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function cc(i,e){return ac(mo(i),mo(e))&&i.limitType===e.limitType}function Df(i){return`${qo(mo(i))}|lt:${i.limitType}`}function lc(i){return`Query(target=${function(n){let o=n.path.canonicalString();return null!==n.collectionGroup&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(u=>$d(u)).join(", ")}]`),Rt(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(u=>{return`${(g=u).field.canonicalString()} (${g.dir})`;var g}).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(u=>ha(u)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(u=>ha(u)).join(",")),`Target(${o})`}(mo(i))}; limitType=${i.limitType})`}function Vu(i,e){return e.isFoundDocument()&&function(o,u){const l=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):bt.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)}(i,e)&&function(o,u){for(const l of Ys(o))if(!l.field.isKeyField()&&null===u.data.field(l.field))return!1;return!0}(i,e)&&function(o,u){for(const l of o.filters)if(!l.matches(u))return!1;return!0}(i,e)&&(u=e,!((o=i).startAt&&!function(g,S,N){const U=ic(g,S,N);return g.inclusive?U<=0:U<0}(o.startAt,Ys(o),u)||o.endAt&&!function(g,S,N){const U=ic(g,S,N);return g.inclusive?U>=0:U>0}(o.endAt,Ys(o),u)));var o,u}function Kc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function qd(i){return(e,n)=>{let o=!1;for(const u of Ys(i)){const l=Kd(u,e,n);if(0!==l)return l;o=o||u.field.isKeyField()}return 0}}function Kd(i,e,n){const o=i.field.isKeyField()?bt.comparator(e.key,n.key):function(l,g,S){const N=g.data.field(l),U=S.data.field(l);return null!==N&&null!==U?Sa(N,U):Ut()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Ut()}}class Ra{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,l]of o)if(this.equalsFn(u,e))return l}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let l=0;l<u.length;l++)if(this.equalsFn(u[l][0],e))return void(u[l]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){hu(this.inner,(n,o)=>{for(const[u,l]of o)e(u,l)})}isEmpty(){return ca(this.inner)}size(){return this.innerSize}}const C_=new $r(bt.comparator);function _o(){return C_}const pg=new $r(bt.comparator);function Zc(...i){let e=pg;for(const n of i)e=e.insert(n.key,n);return e}function Zd(i){let e=pg;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function No(){return Bl()}function gg(){return Bl()}function Bl(){return new Ra(i=>i.toString(),(i,e)=>i.isEqual(e))}const Qc=new $r(bt.comparator),Af=new Or(bt.comparator);function On(...i){let e=Af;for(const n of i)e=e.add(n);return e}const S_=new Or(vn);function Yc(){return S_}function mg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:En(e)?"-0":e}}function Cf(i){return{integerValue:""+i}}function Jc(i,e){return Sr(e)?Cf(e):mg(i,e)}class _u{constructor(){this._=void 0}}function Sf(i,e,n){return i instanceof pa?function(u,l){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return l&&Nl(l)&&(l=Nu(l)),l&&(g.fields.__previous_value__=l),{mapValue:g}}(n,e):i instanceof na?Yd(i,e):i instanceof ga?Xc(i,e):function(u,l){const g=Qd(u,l),S=Rf(g)+Rf(u.Ie);return Wc(g)&&Wc(u.Ie)?Cf(S):mg(u.serializer,S)}(i,e)}function bf(i,e,n){return i instanceof na?Yd(i,e):i instanceof ga?Xc(i,e):n}function Qd(i,e){return i instanceof Za?Wc(o=e)||(l=o)&&"doubleValue"in l?e:{integerValue:0}:null;var o,l}class pa extends _u{}class na extends _u{constructor(e){super(),this.elements=e}}function Yd(i,e){const n=Pf(e);for(const o of i.elements)n.some(u=>ea(u,o))||n.push(o);return{arrayValue:{values:n}}}class ga extends _u{constructor(e){super(),this.elements=e}}function Xc(i,e){let n=Pf(e);for(const o of i.elements)n=n.filter(u=>!ea(u,o));return{arrayValue:{values:n}}}class Za extends _u{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Rf(i){return Gr(i.integerValue||i.doubleValue)}function Pf(i){return ba(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class dc{constructor(e,n){this.field=e,this.transform=n}}class el{constructor(e,n){this.version=e,this.transformResults=n}}class li{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new li}static exists(e){return new li(void 0,e)}static updateTime(e){return new li(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $l(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class hc{}function Jd(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new xo(i.key,li.none()):new Ya(i.key,i.data,li.none());{const n=i.data,o=Ps.empty();let u=new Or(jr.comparator);for(let l of e.fields)if(!u.has(l)){let g=n.field(l);null===g&&l.length>1&&(l=l.popLast(),g=n.field(l)),null===g?o.delete(l):o.set(l,g),u=u.add(l)}return new Zo(i.key,o,new fo(u.toArray()),li.none())}}function Ko(i,e,n){i instanceof Ya?function(u,l,g){const S=u.value.clone(),N=Uu(u.fieldTransforms,l,g.transformResults);S.setAll(N),l.convertToFoundDocument(g.version,S).setHasCommittedMutations()}(i,e,n):i instanceof Zo?function(u,l,g){if(!$l(u.precondition,l))return void l.convertToUnknownDocument(g.version);const S=Uu(u.fieldTransforms,l,g.transformResults),N=l.data;N.setAll(Ms(u)),N.setAll(S),l.convertToFoundDocument(g.version,N).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Qa(i,e,n,o){return i instanceof Ya?function(l,g,S,N){if(!$l(l.precondition,g))return S;const U=l.value.clone(),H=Xd(l.fieldTransforms,N,g);return U.setAll(H),g.convertToFoundDocument(g.version,U).setHasLocalMutations(),null}(i,e,n,o):i instanceof Zo?function(l,g,S,N){if(!$l(l.precondition,g))return S;const U=Xd(l.fieldTransforms,N,g),H=g.data;return H.setAll(Ms(l)),H.setAll(U),g.convertToFoundDocument(g.version,H).setHasLocalMutations(),null===S?null:S.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(ee=>ee.field))}(i,e,n,o):(S=n,$l(i.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):S);var g,S}function yo(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),l=Qd(o.transform,u||null);null!=l&&(null===n&&(n=Ps.empty()),n.set(o.field,l))}return n||null}function Hl(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(o=i.fieldTransforms)&&void 0===u||o&&u&&Br(o,u,(l,g)=>function jl(i,e){return i.field.isEqual(e.field)&&(u=e.transform,(o=i.transform)instanceof na&&u instanceof na||o instanceof ga&&u instanceof ga?Br(o.elements,u.elements,ea):o instanceof Za&&u instanceof Za?ea(o.Ie,u.Ie):o instanceof pa&&u instanceof pa);var o,u}(l,g))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var o,u}class Ya extends hc{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Zo extends hc{constructor(e,n,o,u,l=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Ms(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function Uu(i,e,n){const o=new Map;St(i.length===n.length);for(let u=0;u<n.length;u++){const l=i[u],g=l.transform,S=e.data.field(l.field);o.set(l.field,bf(g,S,n[u]))}return o}function Xd(i,e,n){const o=new Map;for(const u of i){const l=u.transform,g=n.data.field(u.field);o.set(u.field,Sf(l,g,e))}return o}class xo extends hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zl extends hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gl{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const l=this.mutations[u];l.key.isEqual(e.key)&&Ko(l,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=Qa(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=Qa(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=gg();return this.mutations.forEach(u=>{const l=e.get(u.key),g=l.overlayedDocument;let S=this.applyToLocalView(g,l.mutatedFields);S=n.has(u.key)?null:S;const N=Jd(g,S);null!==N&&o.set(u.key,N),g.isValidDocument()||g.convertToNoDocument(qt.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),On())}isEqual(e){return this.batchId===e.batchId&&Br(this.mutations,e.mutations,(n,o)=>Hl(n,o))&&Br(this.baseMutations,e.baseMutations,(n,o)=>Hl(n,o))}}class eh{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){St(e.mutations.length===o.length);let u=Qc;const l=e.mutations;for(let g=0;g<l.length;g++)u=u.insert(l[g].key,o[g].version);return new eh(e,n,o,u)}}class Wl{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class vo{constructor(e,n){this.count=e,this.unchangedNames=n}}var ji,Xn;function ql(i){switch(i){default:return Ut();case ke.CANCELLED:case ke.UNKNOWN:case ke.DEADLINE_EXCEEDED:case ke.RESOURCE_EXHAUSTED:case ke.INTERNAL:case ke.UNAVAILABLE:case ke.UNAUTHENTICATED:return!1;case ke.INVALID_ARGUMENT:case ke.NOT_FOUND:case ke.ALREADY_EXISTS:case ke.PERMISSION_DENIED:case ke.FAILED_PRECONDITION:case ke.ABORTED:case ke.OUT_OF_RANGE:case ke.UNIMPLEMENTED:case ke.DATA_LOSS:return!0}}function ra(i){if(void 0===i)return yr("GRPC error has no .code"),ke.UNKNOWN;switch(i){case ji.OK:return ke.OK;case ji.CANCELLED:return ke.CANCELLED;case ji.UNKNOWN:return ke.UNKNOWN;case ji.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case ji.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case ji.INTERNAL:return ke.INTERNAL;case ji.UNAVAILABLE:return ke.UNAVAILABLE;case ji.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case ji.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case ji.NOT_FOUND:return ke.NOT_FOUND;case ji.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case ji.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case ji.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case ji.ABORTED:return ke.ABORTED;case ji.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case ji.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case ji.DATA_LOSS:return ke.DATA_LOSS;default:return Ut()}}(Xn=ji||(ji={}))[Xn.OK=0]="OK",Xn[Xn.CANCELLED=1]="CANCELLED",Xn[Xn.UNKNOWN=2]="UNKNOWN",Xn[Xn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xn[Xn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xn[Xn.NOT_FOUND=5]="NOT_FOUND",Xn[Xn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xn[Xn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xn[Xn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xn[Xn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xn[Xn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xn[Xn.ABORTED=10]="ABORTED",Xn[Xn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xn[Xn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xn[Xn.INTERNAL=13]="INTERNAL",Xn[Xn.UNAVAILABLE=14]="UNAVAILABLE",Xn[Xn.DATA_LOSS=15]="DATA_LOSS";function Bu(){return new TextEncoder}const Nf=new Mo([4294967295,4294967295],0);function xf(i){const e=Bu().encode(i),n=new kc;return n.update(e),new Uint8Array(n.digest())}function tl(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Mo([n,o],0),new Mo([u,l],0)]}class Kl{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new fc(`Invalid padding: ${n}`);if(o<0)throw new fc(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new fc(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new fc(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Mo.fromNumber(this.Te)}de(e,n,o){let u=e.add(n.multiply(Mo.fromNumber(o)));return 1===u.compare(Nf)&&(u=new Mo([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=xf(e),[o,u]=tl(n);for(let l=0;l<this.hashCount;l++){const g=this.de(o,u,l);if(!this.Ae(g))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),g=new Kl(l,u,n);return o.forEach(S=>g.insert(S)),g}insert(e){if(0===this.Te)return;const n=xf(e),[o,u]=tl(n);for(let l=0;l<this.hashCount;l++){const g=this.de(o,u,l);this.Re(g)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Pa{constructor(e,n,o,u,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,vu.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Pa(qt.min(),u,new $r(vn),_o(),On())}}class vu{constructor(e,n,o,u,l){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new vu(o,n,On(),On(),On())}}class m{constructor(e,n,o,u){this.Ve=e,this.removedTargetIds=n,this.key=o,this.me=u}}class d{constructor(e,n){this.targetId=e,this.fe=n}}class p{constructor(e,n,o=Bi.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class E{constructor(){this.ge=0,this.pe=ue(),this.ye=Bi.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=On(),n=On(),o=On();return this.pe.forEach((u,l)=>{switch(l){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:Ut()}}),new vu(this.ye,this.we,e,n,o)}Fe(){this.Se=!1,this.pe=ue()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class F{constructor(e){this.Le=e,this.ke=new Map,this.qe=_o(),this.Qe=z(),this.Ke=new $r(vn)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(n);break;case 3:this.je(n)&&(o.Be(),o.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.Ce(e.resumeToken));break;default:Ut()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((o,u)=>{this.je(u)&&n(u)})}Je(e){const n=e.targetId,o=e.fe.count,u=this.Ye(n);if(u){const l=u.target;if(mu(l))if(0===o){const g=new bt(l.path);this.We(n,g,Pn.newNoDocument(g,qt.min()))}else St(1===o);else{const g=this.Ze(n);if(g!==o){const S=this.Xe(e),N=S?this.et(S,e,g):1;0!==N&&(this.He(n),this.Ke=this.Ke.insert(n,2===N?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:l=0}=n;let g,S;try{g=po(o).toUint8Array()}catch(N){if(N instanceof Ld)return pn("Decoding the base64 bloom filter in existence filter failed ("+N.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw N}try{S=new Kl(g,u,l)}catch(N){return pn(N instanceof fc?"BloomFilter error: ":"Applying bloom filter failed: ",N),null}return 0===S.Te?null:S}et(e,n,o){return n.fe.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Le.getRemoteKeysForTarget(n);let u=0;return o.forEach(l=>{const g=this.Le.nt(),S=`projects/${g.projectId}/databases/${g.database}/documents/${l.path.canonicalString()}`;e.mightContain(S)||(this.We(n,l,null),u++)}),u}it(e){const n=new Map;this.ke.forEach((l,g)=>{const S=this.Ye(g);if(S){if(l.current&&mu(S.target)){const N=new bt(S.target.path);null!==this.qe.get(N)||this.st(g,N)||this.We(g,N,Pn.newNoDocument(N,e))}l.De&&(n.set(g,l.ve()),l.Fe())}});let o=On();this.Qe.forEach((l,g)=>{let S=!0;g.forEachWhile(N=>{const U=this.Ye(N);return!U||"TargetPurposeLimboResolution"===U.purpose||(S=!1,!1)}),S&&(o=o.add(l))}),this.qe.forEach((l,g)=>g.setReadTime(e));const u=new Pa(e,n,this.Ke,this.qe,o);return this.qe=_o(),this.Qe=z(),this.Ke=new $r(vn),u}Ue(e,n){if(!this.je(e))return;const o=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,o),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const u=this.ze(e);this.st(e,n)?u.Me(n,1):u.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),o&&(this.qe=this.qe.insert(n,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new E,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Or(vn),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||Ke("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new E),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function z(){return new $r(bt.comparator)}function ue(){return new $r(bt.comparator)}const Re={asc:"ASCENDING",desc:"DESCENDING"},Ze={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xt={and:"AND",or:"OR"};class Kt{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wt(i,e){return i.useProto3Json||Rt(e)?e:{value:e}}function br(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ia(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Zl(i,e){return br(i,e.toTimestamp())}function Di(i){return St(!!i),qt.fromTimestamp(function(n){const o=fu(n);return new vr(o.seconds,o.nanos)}(i))}function pc(i,e){return(o=i,new $n(["projects",o.projectId,"databases",o.database])).child("documents").child(e).canonicalString();var o}function Ja(i){const e=$n.fromString(i);return St(vg(e)),e}function ju(i,e){return pc(i.databaseId,e.path)}function Qo(i,e){const n=Ja(e);if(n.get(1)!==i.databaseId.projectId)throw new et(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new et(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new bt(th(n))}function Ql(i,e){return pc(i.databaseId,e)}function Of(i){const e=Ja(i);return 4===e.length?$n.emptyPath():th(e)}function Ma(i){return new $n(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function th(i){return St(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function nh(i,e,n){return{name:ju(i,e),fields:n.value.mapValue.fields}}function nl(i,e,n){const o=Qo(i,e.name),u=Di(e.updateTime),l=e.createTime?Di(e.createTime):qt.min(),g=new Ps({mapValue:{fields:e.fields}}),S=Pn.newFoundDocument(o,u,l,g);return n&&S.setHasCommittedMutations(),n?S.setHasCommittedMutations():S}function Yl(i,e){let n;if(e instanceof Ya)n={update:nh(i,e.key,e.value)};else if(e instanceof xo)n={delete:ju(i,e.key)};else if(e instanceof Zo)n={update:nh(i,e.key,e.data),updateMask:M_(e.fieldMask)};else{if(!(e instanceof zl))return Ut();n={verify:ju(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(l,g){const S=g.transform;if(S instanceof pa)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(S instanceof na)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:S.elements}};if(S instanceof ga)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:S.elements}};if(S instanceof Za)return{fieldPath:g.field.canonicalString(),increment:S.Ie};throw Ut()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(l=e.precondition).updateTime?{updateTime:Zl(i,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:Ut()),n;var l}function Jl(i,e){const n=e.currentDocument?void 0!==(l=e.currentDocument).updateTime?li.updateTime(Di(l.updateTime)):void 0!==l.exists?li.exists(l.exists):li.none():li.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(g,S){let N=null;"setToServerValue"in S?(St("REQUEST_TIME"===S.setToServerValue),N=new pa):"appendMissingElements"in S?N=new na(S.appendMissingElements.values||[]):"removeAllFromArray"in S?N=new ga(S.removeAllFromArray.values||[]):"increment"in S?N=new Za(g,S.increment):Ut();const U=jr.fromServerFormat(S.fieldPath);return new dc(U,N)}(i,u)):[];var l;if(e.update){const u=Qo(i,e.update.name),l=new Ps({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new fo((e.updateMask.fieldPaths||[]).map(H=>jr.fromServerFormat(H)));return new Zo(u,l,g,n,o)}return new Ya(u,l,n,o)}if(e.delete){const u=Qo(i,e.delete);return new xo(u,n)}if(e.verify){const u=Qo(i,e.verify);return new zl(u,n)}return Ut()}function yg(i,e){return{documents:[Ql(i,e.path)]}}function ih(i,e){const n={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(n.parent=Ql(i,o),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ql(i,o.popLast()),n.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(N){if(0!==N.length)return P_(gr.create(N,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const l=function(N){if(0!==N.length)return N.map(U=>{return{field:gc((ee=U).field),direction:oh(ee.dir)};var ee})}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const g=Wt(i,e.limit);return null!==g&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt={before:(N=e.startAt).inclusive,values:N.position}),e.endAt&&(n.structuredQuery.endAt=function(N){return{before:!N.inclusive,values:N.position}}(e.endAt)),n;var N}function sh(i){let e=Of(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){St(1===o);const H=n.from[0];H.allDescendants?u=H.collectionId:e=e.child(H.collectionId)}let l=[];n.where&&(l=function(ee){const pe=Lf(ee);return pe instanceof gr&&jd(pe)?pe.getFilters():[pe]}(n.where));let g=[];n.orderBy&&(g=n.orderBy.map(pe=>{return new Qs(Xl((gt=pe).field),function(At){switch(At){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(gt.direction));var gt}));let S=null;n.limit&&(S=function(ee){let pe;return pe="object"==typeof ee?ee.value:ee,Rt(pe)?null:pe}(n.limit));let N=null;var ee;n.startAt&&(N=new gu((ee=n.startAt).values||[],!!ee.before));let U=null;return n.endAt&&(U=function(ee){return new gu(ee.values||[],!ee.before)}(n.endAt)),Wd(e,u,g,l,S,"F",N,U)}function Lf(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Xl(n.unaryFilter.field);return Hn.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=Xl(n.unaryFilter.field);return Hn.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Xl(n.unaryFilter.field);return Hn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=Xl(n.unaryFilter.field);return Hn.create(g,"!=",{nullValue:"NULL_VALUE"});default:return Ut()}}(i):void 0!==i.fieldFilter?Hn.create(Xl((n=i).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ut()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return gr.create(n.compositeFilter.filters.map(o=>Lf(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return Ut()}}(n.compositeFilter.op))}(i):Ut();var n}function oh(i){return Re[i]}function Mv(i){return Ze[i]}function R_(i){return xt[i]}function gc(i){return{fieldPath:i.canonicalString()}}function Xl(i){return jr.fromServerFormat(i.fieldPath)}function P_(i){return i instanceof Hn?function(n){if("=="===n.op){if(yf(n.value))return{unaryFilter:{field:gc(n.field),op:"IS_NAN"}};if(Fd(n.value))return{unaryFilter:{field:gc(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(yf(n.value))return{unaryFilter:{field:gc(n.field),op:"IS_NOT_NAN"}};if(Fd(n.value))return{unaryFilter:{field:gc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gc(n.field),op:Mv(n.op),value:n.value}}}(i):i instanceof gr?function(n){const o=n.getFilters().map(u=>P_(u));return 1===o.length?o[0]:{compositeFilter:{op:R_(n.op),filters:o}}}(i):Ut()}function M_(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vg(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Na{constructor(e,n,o,u,l=qt.min(),g=qt.min(),S=Bi.EMPTY_BYTE_STRING,N=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=S,this.expectedCount=N}withSequenceNumber(e){return new Na(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ff{constructor(e){this.ut=e}}function N_(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Vf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:ju(l=i.ut,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:br(l,g.version.toTimestamp()),createTime:br(l,g.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:td(e.version)};else{if(!e.isUnknownDocument())return Ut();o.unknownDocument={path:n.path.toArray(),version:td(e.version)}}var l,g;return o}function Vf(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function td(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rl(i){const e=new vr(i.seconds,i.nanoseconds);return qt.fromTimestamp(e)}function $u(i,e){const n=(e.baseMutations||[]).map(l=>Jl(i.ut,l));for(let l=0;l<e.mutations.length-1;++l)l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(e.mutations[l].updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l);const o=e.mutations.map(l=>Jl(i.ut,l)),u=vr.fromMillis(e.localWriteTimeMs);return new Gl(e.batchId,u,n,o)}function ah(i){const e=rl(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?rl(i.lastLimboFreeSnapshotVersion):qt.min();let o;return o=void 0!==i.query.documents?(St(1===(l=i.query).documents.length),mo(Lu(Of(l.documents[0])))):function(l){return mo(sh(l))}(i.query),new Na(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,Bi.fromBase64String(i.resumeToken));var l}function il(i,e){const n=td(e.snapshotVersion),o=td(e.lastLimboFreeSnapshotVersion);let u;u=mu(e.target)?yg(i.ut,e.target):ih(i.ut,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qo(e.target),readTime:n,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function nd(i){const e=sh({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Ul(e,e.limit,"L"):e}function uh(i,e){return new Wl(e.largestBatchId,Jl(i.ut,e.overlayMutation))}function Eg(i,e){const n=e.path.lastSegment();return[i,_n(e.path.popLast()),n]}function Ig(i,e,n,o){return{indexId:i,uid:e.uid||"",sequenceNumber:n,readTime:td(o.readTime),documentKey:_n(o.documentKey.path),largestBatchId:o.largestBatchId}}class x_{getBundleMetadata(e,n){return Tg(e).get(n).next(o=>{if(o)return{id:(l=o).bundleId,createTime:rl(l.createTime),version:l.version};var l})}saveBundleMetadata(e,n){return Tg(e).put({bundleId:(u=n).id,createTime:td(Di(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return O_(e).get(n).next(o=>{if(o)return{name:(l=o).name,query:nd(l.bundledQuery),readTime:rl(l.readTime)};var l})}saveNamedQuery(e,n){return O_(e).put({name:(u=n).name,readTime:td(Di(u.readTime)),bundledQuery:u.bundledQuery});var u}}function Tg(i){return ls(i,"bundles")}function O_(i){return ls(i,"namedQueries")}class Uf{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new Uf(e,n.uid||"")}getOverlay(e,n){return ch(e).get(Eg(this.userId,n)).next(o=>o?uh(this.serializer,o):null)}getOverlays(e,n){const o=No();return Me.forEach(n,u=>this.getOverlay(e,u).next(l=>{null!==l&&o.set(u,l)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((l,g)=>{const S=new Wl(n,g);u.push(this.lt(e,S))}),Me.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(g=>u.add(_n(g.getCollectionPath())));const l=[];return u.forEach(g=>{const S=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,o+1],!1,!0);l.push(ch(e).H("collectionPathOverlayIndex",S))}),Me.waitFor(l)}getOverlaysForCollection(e,n,o){const u=No(),l=_n(n),g=IDBKeyRange.bound([this.userId,l,o],[this.userId,l,Number.POSITIVE_INFINITY],!0);return ch(e).W("collectionPathOverlayIndex",g).next(S=>{for(const N of S){const U=uh(this.serializer,N);u.set(U.getKey(),U)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const l=No();let g;const S=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ch(e).Y({index:"collectionGroupOverlayIndex",range:S},(N,U,H)=>{const ee=uh(this.serializer,U);l.size()<u||ee.largestBatchId===g?(l.set(ee.getKey(),ee),g=ee.largestBatchId):H.done()}).next(()=>l)}lt(e,n){return ch(e).put(function(u,l,g){const[S,N,U]=Eg(l,g.mutation.key);return{userId:l,collectionPath:N,documentId:U,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:Yl(u.ut,g.mutation)}}(this.serializer,this.userId,n))}}function ch(i){return ls(i,"documentOverlays")}class sl{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Gr(e.integerValue));else if("doubleValue"in e){const o=Gr(e.doubleValue);isNaN(o)?this.Tt(n,13):(this.Tt(n,15),En(o)?n.Et(0):n.Et(o))}else if("timestampValue"in e){const o=e.timestampValue;this.Tt(n,20),"string"==typeof o?n.dt(o):(n.dt(`${o.seconds||""}`),n.Et(o.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(po(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.Tt(n,45),n.Et(o.latitude||0),n.Et(o.longitude||0)}else"mapValue"in e?ag(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):Ut()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const o=e.fields||{};this.Tt(n,55);for(const u of Object.keys(o))this.At(u,n),this.Pt(o[u],n)}yt(e,n){const o=e.values||[];this.Tt(n,50);for(const u of o)this.Pt(u,n)}ft(e,n){this.Tt(n,37),bt.fromName(e).path.forEach(o=>{this.Tt(n,60),this.wt(o,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function Nv(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function Hu(i){const e=64-function(o){let u=0;for(let l=0;l<8;++l){const g=Nv(255&o[l]);if(u+=g,8!==g)break}return u}(i);return Math.ceil(e/8)}sl.St=new sl;class lh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Dt(o.value),o=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ft(o.value),o=n.next();this.Mt()}xt(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Dt(o);else if(o<2048)this.Dt(960|o>>>6),this.Dt(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|o>>>12),this.Dt(128|63&o>>>6),this.Dt(128|63&o);else{const u=n.codePointAt(0);this.Dt(240|u>>>18),this.Dt(128|63&u>>>12),this.Dt(128|63&u>>>6),this.Dt(128|63&u)}}this.Ct()}Ot(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const u=n.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Nt(e){const n=this.Bt(e),o=Hu(n);this.Lt(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}kt(e){const n=this.Bt(e),o=Hu(n);this.Lt(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(l){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,l,!1),new Uint8Array(g.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class xv{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class UI{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Bf{constructor(){this.Wt=new lh,this.Gt=new xv(this.Wt),this.zt=new UI(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class rd{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new rd(this.indexId,this.documentKey,this.arrayValue,o)}}function ol(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=Ov(i.arrayValue,e.arrayValue),0!==n?n:(n=Ov(i.directionalValue,e.directionalValue),0!==n?n:bt.comparator(i.documentKey,e.documentKey)))}function Ov(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class wg{constructor(e){this.Jt=new Or((n,o)=>jr.comparator(n.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const o=n;o.isInequality()?this.Jt=this.Jt.add(o):this.Zt.push(o)}}get Xt(){return this.Jt.size>1}en(e){if(St(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=lo(e);if(void 0!==n&&!this.tn(n))return!1;const o=aa(e);let u=new Set,l=0,g=0;for(;l<o.length&&this.tn(o[l]);++l)u=u.add(o[l].fieldPath.canonicalString());if(l===o.length)return!0;if(this.Jt.size>0){const S=this.Jt.getIterator().getNext();if(!u.has(S.field.canonicalString())){const N=o[l];if(!this.nn(S,N)||!this.rn(this.Yt[g++],N))return!1}++l}for(;l<o.length;++l)if(g>=this.Yt.length||!this.rn(this.Yt[g++],o[l]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Or(jr.comparator);const n=[];for(const o of this.Zt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)n.push(new Is(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),n.push(new Is(o.field,0))}for(const o of this.Yt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),n.push(new Is(o.field,"asc"===o.dir?0:1)));return new ri(ri.UNKNOWN_ID,this.collectionId,n,ja.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function k_(i){var e,n;if(St(i instanceof Hn||i instanceof gr),i instanceof Hn){if(i instanceof kl){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(l=>Hn.create(i.field,"==",l)))||[];return gr.create(u,"or")}return i}const o=i.filters.map(u=>k_(u));return gr.create(o,i.op)}function kv(i){if(0===i.getFilters().length)return[];const e=Xa(k_(i));return St(jf(e)),Dg(e)||Ag(e)?[e]:e.getFilters()}function Dg(i){return i instanceof Hn}function Ag(i){return i instanceof gr&&jd(i)}function jf(i){return Dg(i)||Ag(i)||function(n){if(n instanceof gr&&Ef(n)){for(const o of n.getFilters())if(!Dg(o)&&!Ag(o))return!1;return!0}return!1}(i)}function Xa(i){if(St(i instanceof Hn||i instanceof gr),i instanceof Hn)return i;if(1===i.filters.length)return Xa(i.filters[0]);const e=i.filters.map(o=>Xa(o));let n=gr.create(e,i.op);return n=dh(n),jf(n)?n:(St(n instanceof gr),St(ku(n)),St(n.filters.length>1),n.filters.reduce((o,u)=>al(o,u)))}function al(i,e){let n;return St(i instanceof Hn||i instanceof gr),St(e instanceof Hn||e instanceof gr),n=i instanceof Hn?e instanceof Hn?gr.create([i,e],"and"):Cg(i,e):e instanceof Hn?Cg(e,i):function(u,l){if(St(u.filters.length>0&&l.filters.length>0),ku(u)&&ku(l))return Ka(u,l.getFilters());const g=Ef(u)?u:l,S=Ef(u)?l:u,N=g.filters.map(U=>al(U,S));return gr.create(N,"or")}(i,e),dh(n)}function Cg(i,e){if(ku(e))return Ka(e,i.getFilters());{const n=e.filters.map(o=>al(i,o));return gr.create(n,"or")}}function dh(i){if(St(i instanceof Hn||i instanceof gr),i instanceof Hn)return i;const e=i.getFilters();if(1===e.length)return dh(e[0]);if(cg(i))return i;const n=e.map(u=>dh(u)),o=[];return n.forEach(u=>{u instanceof Hn?o.push(u):u instanceof gr&&(u.op===i.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:gr.create(o,i.op)}class L_{constructor(){this.on=new F_}addToCollectionParentIndex(e,n){return this.on.add(n),Me.resolve()}getCollectionParents(e,n){return Me.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return Me.resolve()}deleteFieldIndex(e,n){return Me.resolve()}deleteAllFieldIndexes(e){return Me.resolve()}createTargetIndexes(e,n){return Me.resolve()}getDocumentsMatchingTarget(e,n){return Me.resolve(null)}getIndexType(e,n){return Me.resolve(0)}getFieldIndexes(e,n){return Me.resolve([])}getNextCollectionGroupToUpdate(e){return Me.resolve(null)}getMinOffset(e,n){return Me.resolve(Rs.min())}getMinOffsetFromCollectionGroup(e,n){return Me.resolve(Rs.min())}updateCollectionGroup(e,n,o){return Me.resolve()}updateIndexEntries(e,n){return Me.resolve()}}class F_{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new Or($n.comparator),l=!u.has(o);return this.index[n]=u.add(o),l}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Or($n.comparator)).toArray()}}const Sg=new Uint8Array(0);class BI{constructor(e,n){this.user=e,this.databaseId=n,this._n=new F_,this.an=new Ra(o=>qo(o),(o,u)=>ac(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const l={collectionId:o,parent:_n(u)};return $f(e).put(l)}return Me.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[Fc(n),""],!1,!0);return $f(e).W(u).next(l=>{for(const g of l){if(g.collectionId!==n)break;o.push(Ts(g.parent))}return o})}addFieldIndex(e,n){const o=Hf(e),u={indexId:(S=n).indexId,collectionGroup:S.collectionGroup,fields:S.fields.map(N=>[N.fieldPath.canonicalString(),N.kind])};var S;delete u.indexId;const l=o.add(u);if(n.indexState){const g=hh(e);return l.next(S=>{g.put(Ig(S,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return l.next()}deleteFieldIndex(e,n){const o=Hf(e),u=hh(e),l=mc(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Hf(e),o=mc(e),u=hh(e);return n.H().next(()=>o.H()).next(()=>u.H())}createTargetIndexes(e,n){return Me.forEach(this.un(n),o=>this.getIndexType(e,o).next(u=>{if(0===u||1===u){const l=new wg(o).sn();if(null!=l)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,n){const o=mc(e);let u=!0;const l=new Map;return Me.forEach(this.un(n),g=>this.cn(e,g).next(S=>{u&&(u=!!S),l.set(g,S)})).next(()=>{if(u){let g=On();const S=[];return Me.forEach(l,(N,U)=>{var cn;Ke("IndexedDbIndexManager",`Using index ${cn=N,`id=${cn.indexId}|cg=${cn.collectionGroup}|f=${cn.fields.map(Gn=>`${Gn.fieldPath}:${Gn.kind}`).join(",")}`} to execute ${qo(n)}`);const H=function(cn,Gn){const Er=lo(Gn);if(void 0===Er)return null;for(const wr of Fl(cn,Er.fieldPath))switch(wr.op){case"array-contains-any":return wr.value.arrayValue.values||[];case"array-contains":return[wr.value]}return null}(U,N),ee=function(cn,Gn){const Er=new Map;for(const wr of aa(Gn))for(const ds of Fl(cn,wr.fieldPath))switch(ds.op){case"==":case"in":Er.set(wr.fieldPath.canonicalString(),ds.value);break;case"not-in":case"!=":return Er.set(wr.fieldPath.canonicalString(),ds.value),Array.from(Er.values())}return null}(U,N),pe=function(cn,Gn){const Er=[];let wr=!0;for(const ds of aa(Gn)){const su=0===ds.kind?Gd(cn,ds.fieldPath,cn.startAt):Vl(cn,ds.fieldPath,cn.startAt);Er.push(su.value),wr&&(wr=su.inclusive)}return new gu(Er,wr)}(U,N),Oe=function(cn,Gn){const Er=[];let wr=!0;for(const ds of aa(Gn)){const su=0===ds.kind?Vl(cn,ds.fieldPath,cn.endAt):Gd(cn,ds.fieldPath,cn.endAt);Er.push(su.value),wr&&(wr=su.inclusive)}return new gu(Er,wr)}(U,N),gt=this.ln(N,U,pe),Tt=this.ln(N,U,Oe),At=this.hn(N,U,ee),hn=this.Pn(N.indexId,H,gt,pe.inclusive,Tt,Oe.inclusive,At);return Me.forEach(hn,In=>o.j(In,n.limit).next(cn=>{cn.forEach(Gn=>{const Er=bt.fromSegments(Gn.documentKey);g.has(Er)||(g=g.add(Er),S.push(Er))})}))}).next(()=>S)}return Me.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:kv(gr.create(e.filters,"and")).map(o=>Ll(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,o,u,l,g,S){const N=(null!=n?n.length:1)*Math.max(o.length,l.length),U=N/(null!=n?n.length:1),H=[];for(let ee=0;ee<N;++ee){const pe=n?this.In(n[ee/U]):Sg,Oe=this.Tn(e,pe,o[ee%U],u),gt=this.En(e,pe,l[ee%U],g),Tt=S.map(At=>this.Tn(e,pe,At,!0));H.push(...this.createRange(Oe,gt,Tt))}return H}Tn(e,n,o,u){const l=new rd(e,bt.empty(),n,o);return u?l:l.Ht()}En(e,n,o,u){const l=new rd(e,bt.empty(),n,o);return u?l.Ht():l}cn(e,n){const o=new wg(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(l=>{let g=null;for(const S of l)o.en(S)&&(!g||S.fields.length>g.fields.length)&&(g=S);return g})}getIndexType(e,n){let o=2;const u=this.un(n);return Me.forEach(u,l=>this.cn(e,l).next(g=>{g?0!==o&&g.fields.length<function(N){let U=new Or(jr.comparator),H=!1;for(const ee of N.filters)for(const pe of ee.getFlattenedFilters())pe.field.isKeyField()||("array-contains"===pe.op||"array-contains-any"===pe.op?H=!0:U=U.add(pe.field));for(const ee of N.orderBy)ee.field.isKeyField()||(U=U.add(ee.field));return U.size+(H?1:0)}(l)&&(o=1):o=0})).next(()=>null!==n.limit&&u.length>1&&2===o?1:o)}dn(e,n){const o=new Bf;for(const u of aa(e)){const l=n.data.field(u.fieldPath);if(null==l)return null;const g=o.jt(u.kind);sl.St.ht(l,g)}return o.Ut()}In(e){const n=new Bf;return sl.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const o=new Bf;return sl.St.ht(pu(this.databaseId,n),o.jt(function(l){const g=aa(l);return 0===g.length?0:g[g.length-1].kind}(e))),o.Ut()}hn(e,n,o){if(null===o)return[];let u=[];u.push(new Bf);let l=0;for(const g of aa(e)){const S=o[l++];for(const N of u)if(this.Rn(n,g.fieldPath)&&ba(S))u=this.Vn(u,g,S);else{const U=N.jt(g.kind);sl.St.ht(S,U)}}return this.mn(u)}ln(e,n,o){return this.hn(e,n,o.position)}mn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Ut();return n}Vn(e,n,o){const u=[...e],l=[];for(const g of o.arrayValue.values||[])for(const S of u){const N=new Bf;N.seed(S.Ut()),sl.St.ht(g,N.jt(n.kind)),l.push(N)}return l}Rn(e,n){return!!e.filters.find(o=>o instanceof Hn&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=Hf(e),u=hh(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(l=>{const g=[];return Me.forEach(l,S=>u.get([S.indexId,this.uid]).next(N=>{g.push(function(H,ee){const pe=ee?new ja(ee.sequenceNumber,new Rs(rl(ee.readTime),new bt(Ts(ee.documentKey)),ee.largestBatchId)):ja.empty(),Oe=H.fields.map(([gt,Tt])=>new Is(jr.fromServerFormat(gt),Tt));return new ri(H.indexId,H.collectionGroup,Oe,pe)}(S,N))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const l=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==l?l:vn(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=Hf(e),l=hh(e);return this.fn(e).next(g=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(S=>Me.forEach(S,N=>l.put(Ig(N.indexId,this.user,g,o)))))}updateIndexEntries(e,n){const o=new Map;return Me.forEach(n,(u,l)=>{const g=o.get(u.collectionGroup);return(g?Me.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(S=>(o.set(u.collectionGroup,S),Me.forEach(S,N=>this.gn(e,u,N).next(U=>{const H=this.pn(l,N);return U.isEqual(H)?Me.resolve():this.yn(e,l,N,U,H)}))))})}wn(e,n,o,u){return mc(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.An(o,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,o,u){return mc(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.An(o,n.key),n.key.path.toArray()])}gn(e,n,o){const u=mc(e);let l=new Or(ol);return u.Y({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.An(o,n)])},(g,S)=>{l=l.add(new rd(o.indexId,n,S.arrayValue,S.directionalValue))}).next(()=>l)}pn(e,n){let o=new Or(ol);const u=this.dn(n,e);if(null==u)return o;const l=lo(n);if(null!=l){const g=e.data.field(l.fieldPath);if(ba(g))for(const S of g.arrayValue.values||[])o=o.add(new rd(n.indexId,e.key,this.In(S),u))}else o=o.add(new rd(n.indexId,e.key,Sg,u));return o}yn(e,n,o,u,l){Ke("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const g=[];return function(N,U,H,ee,pe){const Oe=N.getIterator(),gt=U.getIterator();let Tt=Wa(Oe),At=Wa(gt);for(;Tt||At;){let hn=!1,In=!1;if(Tt&&At){const cn=H(Tt,At);cn<0?In=!0:cn>0&&(hn=!0)}else null!=Tt?In=!0:hn=!0;hn?(ee(At),At=Wa(gt)):In?(pe(Tt),Tt=Wa(Oe)):(Tt=Wa(Oe),At=Wa(gt))}}(u,l,ol,S=>{g.push(this.wn(e,n,o,S))},S=>{g.push(this.Sn(e,n,o,S))}),Me.waitFor(g)}fn(e){let n=1;return hh(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,l)=>{l.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((g,S)=>ol(g,S)).filter((g,S,N)=>!S||0!==ol(g,N[S-1]));const u=[];u.push(e);for(const g of o){const S=ol(g,e),N=ol(g,n);if(0===S)u[0]=e.Ht();else if(S>0&&N<0)u.push(g),u.push(g.Ht());else if(N>0)break}u.push(n);const l=[];for(let g=0;g<u.length;g+=2){if(this.bn(u[g],u[g+1]))return[];l.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,Sg,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,Sg,[]]))}return l}bn(e,n){return ol(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(bg)}getMinOffset(e,n){return Me.mapArray(this.un(n),o=>this.cn(e,o).next(u=>u||Ut())).next(bg)}}function $f(i){return ls(i,"collectionParents")}function mc(i){return ls(i,"indexEntries")}function Hf(i){return ls(i,"indexConfiguration")}function hh(i){return ls(i,"indexState")}function bg(i){St(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;Su(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new Rs(e.readTime,e.documentKey,n)}const V_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Oo{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Oo(e,Oo.DEFAULT_COLLECTION_PERCENTILE,Oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function U_(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),l=[],g=IDBKeyRange.only(n.batchId);let S=0;const N=o.Y({range:g},(H,ee,pe)=>(S++,pe.delete()));l.push(N.next(()=>{St(1===S)}));const U=[];for(const H of n.mutations){const ee=bu(e,H.key.path,n.batchId);l.push(u.delete(ee)),U.push(H.key)}return Me.waitFor(l).next(()=>U)}function zf(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Ut();e=i.noDocument}return JSON.stringify(e).length}Oo.DEFAULT_COLLECTION_PERCENTILE=10,Oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oo.DEFAULT=new Oo(41943040,Oo.DEFAULT_COLLECTION_PERCENTILE,Oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oo.DISABLED=new Oo(-1,0,0);class fh{constructor(e,n,o,u){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=u,this.Dn={}}static ct(e,n,o,u){St(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new fh(l,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _c(e).Y({index:"userMutationsIndex",range:o},(u,l,g)=>{n=!1,g.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const l=yc(e),g=_c(e);return g.add({}).next(S=>{St("number"==typeof S);const N=new Gl(S,n,o,u),U=function(Oe,gt,Tt){const At=Tt.baseMutations.map(In=>Yl(Oe.ut,In)),hn=Tt.mutations.map(In=>Yl(Oe.ut,In));return{userId:gt,batchId:Tt.batchId,localWriteTimeMs:Tt.localWriteTime.toMillis(),baseMutations:At,mutations:hn}}(this.serializer,this.userId,N),H=[];let ee=new Or((pe,Oe)=>vn(pe.canonicalString(),Oe.canonicalString()));for(const pe of u){const Oe=bu(this.userId,pe.key.path,S);ee=ee.add(pe.key.path.popLast()),H.push(g.put(U)),H.push(l.put(Oe,$c))}return ee.forEach(pe=>{H.push(this.indexManager.addToCollectionParentIndex(e,pe))}),e.addOnCommittedListener(()=>{this.Dn[S]=N.keys()}),Me.waitFor(H).next(()=>N)})}lookupMutationBatch(e,n){return _c(e).get(n).next(o=>o?(St(o.userId===this.userId),$u(this.serializer,o)):null)}Cn(e,n){return this.Dn[n]?Me.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.Dn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let l=null;return _c(e).Y({index:"userMutationsIndex",range:u},(g,S,N)=>{S.userId===this.userId&&(St(S.batchId>=o),l=$u(this.serializer,S)),N.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return _c(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(u,l,g)=>{o=l.batchId,g.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _c(e).W("userMutationsIndex",n).next(o=>o.map(u=>$u(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=Zs(this.userId,n.path),u=IDBKeyRange.lowerBound(o),l=[];return yc(e).Y({range:u},(g,S,N)=>{const[U,H,ee]=g,pe=Ts(H);if(U===this.userId&&n.path.isEqual(pe))return _c(e).get(ee).next(Oe=>{if(!Oe)throw Ut();St(Oe.userId===this.userId),l.push($u(this.serializer,Oe))});N.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Or(vn);const u=[];return n.forEach(l=>{const g=Zs(this.userId,l.path),S=IDBKeyRange.lowerBound(g),N=yc(e).Y({range:S},(U,H,ee)=>{const[pe,Oe,gt]=U,Tt=Ts(Oe);pe===this.userId&&l.path.isEqual(Tt)?o=o.add(gt):ee.done()});u.push(N)}),Me.waitFor(u).next(()=>this.vn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,l=Zs(this.userId,o),g=IDBKeyRange.lowerBound(l);let S=new Or(vn);return yc(e).Y({range:g},(N,U,H)=>{const[ee,pe,Oe]=N,gt=Ts(pe);ee===this.userId&&o.isPrefixOf(gt)?gt.length===u&&(S=S.add(Oe)):H.done()}).next(()=>this.vn(e,S))}vn(e,n){const o=[],u=[];return n.forEach(l=>{u.push(_c(e).get(l).next(g=>{if(null===g)throw Ut();St(g.userId===this.userId),o.push($u(this.serializer,g))}))}),Me.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return U_(e.ae,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),Me.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Me.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return yc(e).Y({range:o},(l,g,S)=>{if(l[0]===this.userId){const N=Ts(l[1]);u.push(N)}else S.done()}).next(()=>{St(0===u.length)})})}containsKey(e,n){return ph(e,this.userId,n)}Mn(e){return B_(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ph(i,e,n){const o=Zs(e,n.path),u=o[1],l=IDBKeyRange.lowerBound(o);let g=!1;return yc(i).Y({range:l,J:!0},(S,N,U)=>{const[H,ee,pe]=S;H===e&&ee===u&&(g=!0),U.done()}).next(()=>g)}function _c(i){return ls(i,"mutations")}function yc(i){return ls(i,"documentMutations")}function B_(i){return ls(i,"mutationQueues")}class xa{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new xa(0)}static Nn(){return new xa(-1)}}class Lv{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const o=new xa(n.highestTargetId);return n.highestTargetId=o.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>qt.fromTimestamp(new vr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Bn(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.Ln(e,u)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(o=>(o.targetCount+=1,this.qn(n,o),this.Ln(e,o))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>id(e).delete(n.targetId)).next(()=>this.Bn(e)).next(o=>(St(o.targetCount>0),o.targetCount-=1,this.Ln(e,o)))}removeTargets(e,n,o){let u=0;const l=[];return id(e).Y((g,S)=>{const N=ah(S);N.sequenceNumber<=n&&null===o.get(N.targetId)&&(u++,l.push(this.removeTargetData(e,N)))}).next(()=>Me.waitFor(l)).next(()=>u)}forEachTarget(e,n){return id(e).Y((o,u)=>{const l=ah(u);n(l)})}Bn(e){return Gf(e).get("targetGlobalKey").next(n=>(St(null!==n),n))}Ln(e,n){return Gf(e).put("targetGlobalKey",n)}kn(e,n){return id(e).put(il(this.serializer,n))}qn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=qo(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let l=null;return id(e).Y({range:u,index:"queryTargetsIndex"},(g,S,N)=>{const U=ah(S);ac(n,U.target)&&(l=U,N.done())}).next(()=>l)}addMatchingKeys(e,n,o){const u=[],l=zu(e);return n.forEach(g=>{const S=_n(g.path);u.push(l.put({targetId:o,path:S})),u.push(this.referenceDelegate.addReference(e,o,g))}),Me.waitFor(u)}removeMatchingKeys(e,n,o){const u=zu(e);return Me.forEach(n,l=>{const g=_n(l.path);return Me.waitFor([u.delete([o,g]),this.referenceDelegate.removeReference(e,o,l)])})}removeMatchingKeysForTargetId(e,n){const o=zu(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=zu(e);let l=On();return u.Y({range:o,J:!0},(g,S,N)=>{const U=Ts(g[1]),H=new bt(U);l=l.add(H)}).next(()=>l)}containsKey(e,n){const o=_n(n.path),u=IDBKeyRange.bound([o],[Fc(o)],!1,!0);let l=0;return zu(e).Y({index:"documentTargetsIndex",J:!0,range:u},([g,S],N,U)=>{0!==g&&(l++,U.done())}).next(()=>l>0)}_t(e,n){return id(e).get(n).next(o=>o?ah(o):null)}}function id(i){return ls(i,"targets")}function Gf(i){return ls(i,"targetGlobal")}function zu(i){return ls(i,"targetDocuments")}function j_([i,e],[n,o]){const u=vn(i,n);return 0===u?vn(e,o):u}class Fv{constructor(e){this.Qn=e,this.buffer=new Or(j_),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();j_(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $_{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;Ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Te.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){b(o)?Ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield $a(o)}yield n.Gn(3e5)}))}}class Vv{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return Me.resolve(Pe._e);const o=new Fv(n);return this.zn.forEachTarget(e,u=>o.Un(u.sequenceNumber)).next(()=>this.zn.Hn(e,u=>o.Un(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.zn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),Me.resolve(V_)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),V_):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let o,u,l,g,S,N,U;const H=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ee=>(ee>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ee}`),u=this.params.maximumSequenceNumbersToCollect):u=ee,g=Date.now(),this.nthSequenceNumber(e,u))).next(ee=>(o=ee,S=Date.now(),this.removeTargets(e,o,n))).next(ee=>(l=ee,N=Date.now(),this.removeOrphanedDocuments(e,o))).next(ee=>(U=Date.now(),xr()<=De.in.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-H}ms\n\tDetermined least recently used ${u} in `+(S-g)+`ms\n\tRemoved ${l} targets in `+(N-S)+`ms\n\tRemoved ${ee} documents in `+(U-N)+`ms\nTotal Duration: ${U-H}ms`),Me.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:l,documentsRemoved:ee})))}}class jI{constructor(e,n){this.db=e,this.garbageCollector=function Rg(i,e){return new Vv(i,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}Yn(e){let n=0;return this.Hn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(o,u)=>n(u))}addReference(e,n,o){return Pg(e,o)}removeReference(e,n,o){return Pg(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return Pg(e,n)}Xn(e,n){return function(u,l){let g=!1;return B_(u).Z(S=>ph(u,S,l).next(N=>(N&&(g=!0),Me.resolve(!N)))).next(()=>g)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let l=0;return this.Zn(e,(g,S)=>{if(S<=n){const N=this.Xn(e,g).next(U=>{if(!U)return l++,o.getEntry(e,g).next(()=>(o.removeEntry(g,qt.min()),zu(e).delete([0,_n(g.path)])))});u.push(N)}}).next(()=>Me.waitFor(u)).next(()=>o.apply(e)).next(()=>l)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return Pg(e,n)}Zn(e,n){const o=zu(e);let u,l=Pe._e;return o.Y({index:"documentTargetsIndex"},([g,S],{path:N,sequenceNumber:U})=>{0===g?(l!==Pe._e&&n(new bt(Ts(u)),l),l=U,u=N):l=Pe._e}).next(()=>{l!==Pe._e&&n(new bt(Ts(u)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Pg(i,e){return zu(i).put((u=i.currentSequenceNumber,{targetId:0,path:_n(e.path),sequenceNumber:u}));var u}class sd{constructor(){this.changes=new Ra(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?Me.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gh{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return vc(e).put(o)}removeEntry(e,n,o){return vc(e).delete(function(l,g){const S=l.path.toArray();return[S.slice(0,S.length-2),S[S.length-2],Vf(g),S[S.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.er(e,o)))}getEntry(e,n){let o=Pn.newInvalidDocument(n);return vc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(mh(n))},(u,l)=>{o=this.tr(n,l)}).next(()=>o)}nr(e,n){let o={size:0,document:Pn.newInvalidDocument(n)};return vc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(mh(n))},(u,l)=>{o={document:this.tr(n,l),size:zf(l)}}).next(()=>o)}getEntries(e,n){let o=_o();return this.rr(e,n,(u,l)=>{const g=this.tr(u,l);o=o.insert(u,g)}).next(()=>o)}ir(e,n){let o=_o(),u=new $r(bt.comparator);return this.rr(e,n,(l,g)=>{const S=this.tr(l,g);o=o.insert(l,S),u=u.insert(l,zf(g))}).next(()=>({documents:o,sr:u}))}rr(e,n,o){if(n.isEmpty())return Me.resolve();let u=new Or(xg);n.forEach(N=>u=u.add(N));const l=IDBKeyRange.bound(mh(u.first()),mh(u.last())),g=u.getIterator();let S=g.getNext();return vc(e).Y({index:"documentKeyIndex",range:l},(N,U,H)=>{const ee=bt.fromSegments([...U.prefixPath,U.collectionGroup,U.documentId]);for(;S&&xg(S,ee)<0;)o(S,null),S=g.getNext();S&&S.isEqual(ee)&&(o(S,U),S=g.hasNext()?g.getNext():null),S?H.U(mh(S)):H.done()}).next(()=>{for(;S;)o(S,null),S=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,n,o,u,l){const g=n.path,S=[g.popLast().toArray(),g.lastSegment(),Vf(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],N=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vc(e).W(IDBKeyRange.bound(S,N,!0)).next(U=>{l?.incrementDocumentReadCount(U.length);let H=_o();for(const ee of U){const pe=this.tr(bt.fromSegments(ee.prefixPath.concat(ee.collectionGroup,ee.documentId)),ee);pe.isFoundDocument()&&(Vu(n,pe)||u.has(pe.key))&&(H=H.insert(pe.key,pe))}return H})}getAllFromCollectionGroup(e,n,o,u){let l=_o();const g=Ng(n,o),S=Ng(n,Rs.max());return vc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,S,!0)},(N,U,H)=>{const ee=this.tr(bt.fromSegments(U.prefixPath.concat(U.collectionGroup,U.documentId)),U);l=l.insert(ee.key,ee),l.size===u&&H.done()}).next(()=>l)}newChangeBuffer(e){return new H_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Wf(e).get("remoteDocumentGlobalKey").next(n=>(St(!!n),n))}er(e,n){return Wf(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const o=function ed(i,e){let n;if(e.document)n=nl(i.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=bt.fromSegments(e.noDocument.path),u=rl(e.noDocument.readTime);n=Pn.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ut();{const o=bt.fromSegments(e.unknownDocument.path),u=rl(e.unknownDocument.version);n=Pn.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(u){const l=new vr(u[0],u[1]);return qt.fromTimestamp(l)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual(qt.min()))return o}return Pn.newInvalidDocument(e)}}function Mg(i){return new gh(i)}class H_ extends sd{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Ra(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new Or((l,g)=>vn(l.canonicalString(),g.canonicalString()));return this.changes.forEach((l,g)=>{const S=this.ar.get(l);if(n.push(this._r.removeEntry(e,l,S.readTime)),g.isValidDocument()){const N=N_(this._r.serializer,g);u=u.add(l.path.popLast());const U=zf(N);o+=U-S.size,n.push(this._r.addEntry(e,l,N))}else if(o-=S.size,this.trackRemovals){const N=N_(this._r.serializer,g.convertToNoDocument(qt.min()));n.push(this._r.addEntry(e,l,N))}}),u.forEach(l=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,l))}),n.push(this._r.updateMetadata(e,o)),Me.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(o=>(this.ar.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:o,sr:u})=>(u.forEach((l,g)=>{this.ar.set(l,{size:g,readTime:o.get(l).readTime})}),o))}}function Wf(i){return ls(i,"remoteDocumentGlobal")}function vc(i){return ls(i,"remoteDocumentsV14")}function mh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ng(i,e){const n=e.documentKey.path.toArray();return[i,Vf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function xg(i,e){const n=i.path.toArray(),o=e.path.toArray();let u=0;for(let l=0;l<n.length-2&&l<o.length-2;++l)if(u=vn(n[l],o[l]),u)return u;return u=vn(n.length,o.length),u||(u=vn(n[n.length-2],o[o.length-2]),u||vn(n[n.length-1],o[o.length-1]))}class qf{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Uv{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==o&&Qa(o.mutation,u,fo.empty(),vr.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,On()).next(()=>o))}getLocalViewOfDocuments(e,n,o=On()){const u=No();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(l=>{let g=Zc();return l.forEach((S,N)=>{g=g.insert(S,N.overlayedDocument)}),g}))}getOverlayedDocuments(e,n){const o=No();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,On()))}populateOverlays(e,n,o){const u=[];return o.forEach(l=>{n.has(l)||u.push(l)}),this.documentOverlayCache.getOverlays(e,u).next(l=>{l.forEach((g,S)=>{n.set(g,S)})})}computeViews(e,n,o,u){let l=_o();const g=Bl(),S=Bl();return n.forEach((N,U)=>{const H=o.get(U.key);u.has(U.key)&&(void 0===H||H.mutation instanceof Zo)?l=l.insert(U.key,U):void 0!==H?(g.set(U.key,H.mutation.getFieldMask()),Qa(H.mutation,U,H.mutation.getFieldMask(),vr.now())):g.set(U.key,fo.empty())}),this.recalculateAndSaveOverlays(e,l).next(N=>(N.forEach((U,H)=>g.set(U,H)),n.forEach((U,H)=>{var ee;return S.set(U,new qf(H,null!==(ee=g.get(U))&&void 0!==ee?ee:null))}),S))}recalculateAndSaveOverlays(e,n){const o=Bl();let u=new $r((g,S)=>g-S),l=On();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(g=>{for(const S of g)S.keys().forEach(N=>{const U=n.get(N);if(null===U)return;let H=o.get(N)||fo.empty();H=S.applyToLocalView(U,H),o.set(N,H);const ee=(u.get(S.batchId)||On()).add(N);u=u.insert(S.batchId,ee)})}).next(()=>{const g=[],S=u.getReverseIterator();for(;S.hasNext();){const N=S.getNext(),U=N.key,H=N.value,ee=gg();H.forEach(pe=>{if(!l.has(pe)){const Oe=Jd(n.get(pe),o.get(pe));null!==Oe&&ee.set(pe,Oe),l=l.add(pe)}}),g.push(this.documentOverlayCache.saveOverlays(e,U,ee))}return Me.waitFor(g)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,u){return bt.isDocumentKey((g=n).path)&&null===g.collectionGroup&&0===g.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):Fu(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u);var g}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(l=>{const g=u-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-l.size):Me.resolve(No());let S=-1,N=l;return g.next(U=>Me.forEach(U,(H,ee)=>(S<ee.largestBatchId&&(S=ee.largestBatchId),l.get(H)?Me.resolve():this.remoteDocumentCache.getEntry(e,H).next(pe=>{N=N.insert(H,pe)}))).next(()=>this.populateOverlays(e,U,l)).next(()=>this.computeViews(e,N,U,On())).next(H=>({batchId:S,changes:Zd(H)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new bt(n)).next(o=>{let u=Zc();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const l=n.collectionGroup;let g=Zc();return this.indexManager.getCollectionParents(e,l).next(S=>Me.forEach(S,N=>{const U=(ee=n,pe=N.child(l),new ta(pe,null,ee.explicitOrderBy.slice(),ee.filters.slice(),ee.limit,ee.limitType,ee.startAt,ee.endAt));var ee,pe;return this.getDocumentsMatchingCollectionQuery(e,U,o,u).next(H=>{H.forEach((ee,pe)=>{g=g.insert(ee,pe)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,n,o,u){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(g=>(l=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,l,u))).next(g=>{l.forEach((N,U)=>{const H=U.getKey();null===g.get(H)&&(g=g.insert(H,Pn.newInvalidDocument(H)))});let S=Zc();return g.forEach((N,U)=>{const H=l.get(N);void 0!==H&&Qa(H.mutation,U,fo.empty(),vr.now()),Vu(n,U)&&(S=S.insert(N,U))}),S})}}class Og{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return Me.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(u=n).id,version:u.version,createTime:Di(u.createTime)}),Me.resolve();var u}getNamedQuery(e,n){return Me.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(u=n).name,query:nd(u.bundledQuery),readTime:Di(u.readTime)}),Me.resolve();var u}}class Bv{constructor(){this.overlays=new $r(bt.comparator),this.lr=new Map}getOverlay(e,n){return Me.resolve(this.overlays.get(n))}getOverlays(e,n){const o=No();return Me.forEach(n,u=>this.getOverlay(e,u).next(l=>{null!==l&&o.set(u,l)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,l)=>{this.lt(e,n,l)}),Me.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.lr.get(o);return void 0!==u&&(u.forEach(l=>this.overlays=this.overlays.remove(l)),this.lr.delete(o)),Me.resolve()}getOverlaysForCollection(e,n,o){const u=No(),l=n.length+1,g=new bt(n.child("")),S=this.overlays.getIteratorFrom(g);for(;S.hasNext();){const N=S.getNext().value,U=N.getKey();if(!n.isPrefixOf(U.path))break;U.path.length===l&&N.largestBatchId>o&&u.set(N.getKey(),N)}return Me.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let l=new $r((U,H)=>U-H);const g=this.overlays.getIterator();for(;g.hasNext();){const U=g.getNext().value;if(U.getKey().getCollectionGroup()===n&&U.largestBatchId>o){let H=l.get(U.largestBatchId);null===H&&(H=No(),l=l.insert(U.largestBatchId,H)),H.set(U.getKey(),U)}}const S=No(),N=l.getIterator();for(;N.hasNext()&&(N.getNext().value.forEach((U,H)=>S.set(U,H)),!(S.size()>=u)););return Me.resolve(S)}lt(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const g=this.lr.get(u.largestBatchId).delete(o.key);this.lr.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(o.key,new Wl(n,o));let l=this.lr.get(n);void 0===l&&(l=On(),this.lr.set(n,l)),this.lr.set(n,l.add(o.key))}}class _h{constructor(){this.hr=new Or(Ns.Pr),this.Ir=new Or(Ns.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const o=new Ns(e,n);this.hr=this.hr.add(o),this.Ir=this.Ir.add(o)}Er(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.dr(new Ns(e,n))}Ar(e,n){e.forEach(o=>this.removeReference(o,n))}Rr(e){const n=new bt(new $n([])),o=new Ns(n,e),u=new Ns(n,e+1),l=[];return this.Ir.forEachInRange([o,u],g=>{this.dr(g),l.push(g.key)}),l}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new bt(new $n([])),o=new Ns(n,e),u=new Ns(n,e+1);let l=On();return this.Ir.forEachInRange([o,u],g=>{l=l.add(g.key)}),l}containsKey(e){const n=new Ns(e,0),o=this.hr.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class Ns{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return bt.comparator(e.key,n.key)||vn(e.gr,n.gr)}static Tr(e,n){return vn(e.gr,n.gr)||bt.comparator(e.key,n.key)}}class z_{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Or(Ns.Pr)}checkEmpty(e){return Me.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const l=this.pr;this.pr++;const g=new Gl(l,n,o,u);this.mutationQueue.push(g);for(const S of u)this.yr=this.yr.add(new Ns(S.key,l)),this.indexManager.addToCollectionParentIndex(e,S.key.path.popLast());return Me.resolve(g)}lookupMutationBatch(e,n){return Me.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.Sr(n+1),l=u<0?0:u;return Me.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Me.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return Me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Ns(n,0),u=new Ns(n,Number.POSITIVE_INFINITY),l=[];return this.yr.forEachInRange([o,u],g=>{const S=this.wr(g.gr);l.push(S)}),Me.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Or(vn);return n.forEach(u=>{const l=new Ns(u,0),g=new Ns(u,Number.POSITIVE_INFINITY);this.yr.forEachInRange([l,g],S=>{o=o.add(S.gr)})}),Me.resolve(this.br(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let l=o;bt.isDocumentKey(l)||(l=l.child(""));const g=new Ns(new bt(l),0);let S=new Or(vn);return this.yr.forEachWhile(N=>{const U=N.key.path;return!!o.isPrefixOf(U)&&(U.length===u&&(S=S.add(N.gr)),!0)},g),Me.resolve(this.br(S))}br(e){const n=[];return e.forEach(o=>{const u=this.wr(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){St(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let o=this.yr;return Me.forEach(n.mutations,u=>{const l=new Ns(u.key,n.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.yr=o})}Fn(e){}containsKey(e,n){const o=new Ns(n,0),u=this.yr.firstAfterOrEqual(o);return Me.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return Me.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class ul{constructor(e){this.Cr=e,this.docs=new $r(bt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),l=u?u.size:0,g=this.Cr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:g}),this.size+=g-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Me.resolve(o?o.document.mutableCopy():Pn.newInvalidDocument(n))}getEntries(e,n){let o=_o();return n.forEach(u=>{const l=this.docs.get(u);o=o.insert(u,l?l.document.mutableCopy():Pn.newInvalidDocument(u))}),Me.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let l=_o();const g=n.path,S=new bt(g.child("")),N=this.docs.getIteratorFrom(S);for(;N.hasNext();){const{key:U,value:{document:H}}=N.getNext();if(!g.isPrefixOf(U.path))break;U.path.length>g.length+1||Su(Uc(H),o)<=0||(u.has(H.key)||Vu(n,H))&&(l=l.insert(H.key,H.mutableCopy()))}return Me.resolve(l)}getAllFromCollectionGroup(e,n,o,u){Ut()}vr(e,n){return Me.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new jv(this)}getSize(e){return Me.resolve(this.size)}}class jv extends sd{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this._r.addEntry(e,u)):this._r.removeEntry(o)}),Me.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class kg{constructor(e){this.persistence=e,this.Fr=new Ra(n=>qo(n),ac),this.lastRemoteSnapshotVersion=qt.min(),this.highestTargetId=0,this.Mr=0,this.Or=new _h,this.targetCount=0,this.Nr=xa.On()}forEachTarget(e,n){return this.Fr.forEach((o,u)=>n(u)),Me.resolve()}getLastRemoteSnapshotVersion(e){return Me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Me.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),Me.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Mr&&(this.Mr=n),Me.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new xa(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,Me.resolve()}updateTargetData(e,n){return this.kn(n),Me.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,Me.resolve()}removeTargets(e,n,o){let u=0;const l=[];return this.Fr.forEach((g,S)=>{S.sequenceNumber<=n&&null===o.get(S.targetId)&&(this.Fr.delete(g),l.push(this.removeMatchingKeysForTargetId(e,S.targetId)),u++)}),Me.waitFor(l).next(()=>u)}getTargetCount(e){return Me.resolve(this.targetCount)}getTargetData(e,n){const o=this.Fr.get(n)||null;return Me.resolve(o)}addMatchingKeys(e,n,o){return this.Or.Er(n,o),Me.resolve()}removeMatchingKeys(e,n,o){this.Or.Ar(n,o);const u=this.persistence.referenceDelegate,l=[];return u&&n.forEach(g=>{l.push(u.markPotentiallyOrphaned(e,g))}),Me.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),Me.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Or.mr(n);return Me.resolve(o)}containsKey(e,n){return Me.resolve(this.Or.containsKey(n))}}class od{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Pe(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new kg(this),this.indexManager=new L_,this.remoteDocumentCache=new ul(o=>this.referenceDelegate.Qr(o)),this.serializer=new Ff(n),this.Kr=new Og(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Bv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Br[e.toKey()];return o||(o=new z_(n,this.referenceDelegate),this.Br[e.toKey()]=o),o}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,o){Ke("MemoryPersistence","Starting transaction:",e);const u=new $v(this.Lr.next());return this.referenceDelegate.$r(),o(u).next(l=>this.referenceDelegate.Ur(u).next(()=>l)).toPromise().then(l=>(u.raiseOnCommittedEvent(),l))}Wr(e,n){return Me.or(Object.values(this.Br).map(o=>()=>o.containsKey(e,n)))}}class $v extends ua{constructor(e){super(),this.currentSequenceNumber=e}}class ad{constructor(e){this.persistence=e,this.Gr=new _h,this.zr=null}static jr(e){return new ad(e)}get Hr(){if(this.zr)return this.zr;throw Ut()}addReference(e,n,o){return this.Gr.addReference(o,n),this.Hr.delete(o.toString()),Me.resolve()}removeReference(e,n,o){return this.Gr.removeReference(o,n),this.Hr.add(o.toString()),Me.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),Me.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(u=>this.Hr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(l=>this.Hr.add(l.toString()))}).next(()=>o.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Me.forEach(this.Hr,o=>{const u=bt.fromPath(o);return this.Jr(e,u).next(l=>{l||n.removeEntry(u,qt.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(o=>{o?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return Me.or([()=>Me.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class Eu{constructor(e){this.serializer=e}N(e,n,o,u){const l=new Xu("createOrUpgrade",n);var N;o<1&&u>=1&&(e.createObjectStore("owner"),(N=e).createObjectStore("mutationQueues",{keyPath:"userId"}),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ha,{unique:!0}),N.createObjectStore("documentMutations"),ll(e),function(N){N.createObjectStore("remoteDocuments")}(e));let g=Me.resolve();return o<3&&u>=3&&(0!==o&&(function(N){N.deleteObjectStore("targetDocuments"),N.deleteObjectStore("targets"),N.deleteObjectStore("targetGlobal")}(e),ll(e)),g=g.next(()=>function(N){const U=N.store("targetGlobal"),H={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qt.min().toTimestamp(),targetCount:0};return U.put("targetGlobalKey",H)}(l))),o<4&&u>=4&&(0!==o&&(g=g.next(()=>function(N,U){return U.store("mutations").W().next(H=>{N.deleteObjectStore("mutations"),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ha,{unique:!0});const ee=U.store("mutations"),pe=H.map(Oe=>ee.put(Oe));return Me.waitFor(pe)})}(e,l))),g=g.next(()=>{!function(N){N.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(g=g.next(()=>this.Zr(l))),o<6&&u>=6&&(g=g.next(()=>(function(N){N.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(l)))),o<7&&u>=7&&(g=g.next(()=>this.ei(l))),o<8&&u>=8&&(g=g.next(()=>this.ti(e,l))),o<9&&u>=9&&(g=g.next(()=>{!function(N){N.objectStoreNames.contains("remoteDocumentChanges")&&N.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(g=g.next(()=>this.ni(l))),o<11&&u>=11&&(g=g.next(()=>{(function(N){N.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(N){N.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(g=g.next(()=>{!function(N){const U=N.createObjectStore("documentOverlays",{keyPath:sg});U.createIndex("collectionPathOverlayIndex",D_,{unique:!1}),U.createIndex("collectionGroupOverlayIndex",kd,{unique:!1})}(e)})),o<13&&u>=13&&(g=g.next(()=>function(N){const U=N.createObjectStore("remoteDocumentsV14",{keyPath:Hc});U.createIndex("documentKeyIndex",Rl),U.createIndex("collectionGroupIndex",rg)}(e)).next(()=>this.ri(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(g=g.next(()=>this.ii(e,l))),o<15&&u>=15&&(g=g.next(()=>function(N){N.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),N.createObjectStore("indexState",{keyPath:xd}).createIndex("sequenceNumberIndex",w_,{unique:!1}),N.createObjectStore("indexEntries",{keyPath:ig}).createIndex("documentKeyIndex",Od,{unique:!1})}(e))),g}Xr(e){let n=0;return e.store("remoteDocuments").Y((o,u)=>{n+=zf(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Zr(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(u=>Me.forEach(u,l=>{const g=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",g).next(S=>Me.forEach(S,N=>{St(N.userId===l.userId);const U=$u(this.serializer,N);return U_(e,l.userId,U).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const l=[];return o.Y((g,S)=>{const N=new $n(g),U=[0,_n(N)];l.push(n.get(U).next(H=>H?Me.resolve():n.put({targetId:0,path:_n(N),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Me.waitFor(l))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:gf});const o=n.store("collectionParents"),u=new F_,l=g=>{if(u.add(g)){const S=g.lastSegment(),N=g.popLast();return o.put({collectionId:S,parent:_n(N)})}};return n.store("remoteDocuments").Y({J:!0},(g,S)=>{const N=new $n(g);return l(N.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([g,S,N],U)=>{const H=Ts(S);return l(H.popLast())}))}ni(e){const n=e.store("targets");return n.Y((o,u)=>{const l=ah(u),g=il(this.serializer,l);return n.put(g)})}ri(e,n){const o=n.store("remoteDocuments"),u=[];return o.Y((l,g)=>{const S=n.store("remoteDocumentsV14"),N=(ee=g,ee.document?new bt($n.fromString(ee.document.name).popFirst(5)):ee.noDocument?bt.fromSegments(ee.noDocument.path):ee.unknownDocument?bt.fromSegments(ee.unknownDocument.path):Ut()).path.toArray(),U={prefixPath:N.slice(0,N.length-2),collectionGroup:N[N.length-2],documentId:N[N.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};var ee;u.push(S.put(U))}).next(()=>Me.waitFor(u))}ii(e,n){const o=n.store("mutations"),u=Mg(this.serializer),l=new od(ad.jr,this.serializer.ut);return o.W().next(g=>{const S=new Map;return g.forEach(N=>{var U;let H=null!==(U=S.get(N.userId))&&void 0!==U?U:On();$u(this.serializer,N).keys().forEach(ee=>H=H.add(ee)),S.set(N.userId,H)}),Me.forEach(S,(N,U)=>{const H=new Dt(U),ee=Uf.ct(this.serializer,H),pe=l.getIndexManager(H),Oe=fh.ct(H,this.serializer,pe,l.referenceDelegate);return new Uv(u,Oe,ee,pe).recalculateAndSaveOverlaysForDocumentKeys(new Ml(n,Pe._e),N).next()})})}}function ll(i){i.createObjectStore("targetDocuments",{keyPath:za}).createIndex("documentTargetsIndex",Ru,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cu,{unique:!0}),i.createObjectStore("targetGlobal")}const yh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Lg{constructor(e,n,o,u,l,g,S,N,U,H,ee=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.si=l,this.window=g,this.document=S,this.oi=U,this._i=H,this.ai=ee,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=pe=>Promise.resolve(),!Lg.D())throw new et(ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jI(this,u),this.Ii=n+"main",this.serializer=new Ff(N),this.Ti=new Wo(this.Ii,this.ai,new Eu(this.serializer)),this.qr=new Lv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Mg(this.serializer),this.Kr=new x_,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===H&&yr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new et(ke.FAILED_PRECONDITION,yh);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Pe(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var o=(0,Te.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,Te.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,Te.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Eh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(b(e))return Ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return vh(e).get("owner").next(n=>Me.resolve(this.wi(n)))}Si(e){return Eh(e).delete(this.clientId)}bi(){var e=this;return(0,Te.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=ls(o,"clientMetadata");return u.W().next(l=>{const g=e.Ci(l,18e5),S=l.filter(N=>-1===g.indexOf(N));return Me.forEach(S,N=>u.delete(N.clientId)).next(()=>S)})}).catch(()=>[]);if(e.Ei)for(const o of n)e.Ei.removeItem(e.vi(o.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?Me.resolve(!0):vh(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new et(ke.FAILED_PRECONDITION,yh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Eh(e).W().next(o=>void 0===this.Ci(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Ke("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Te.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new Ml(n,Pe._e);return e.pi(o).next(()=>e.Si(o))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(o=>this.Di(o.updateTimeMs,n)&&!this.Fi(o.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Eh(e).W().next(n=>this.Ci(n,18e5).map(o=>o.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return fh.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new BI(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Uf.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,o){Ke("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",l=15===(N=this.ai)?tc:14===N?Pl:13===N?du:12===N?og:11===N?lu:void Ut();var N;let g;return this.Ti.runTransaction(e,u,l,S=>(g=new Ml(S,this.Lr?this.Lr.next():Pe._e),"readwrite-primary"===n?this.fi(g).next(N=>!!N||this.gi(g)).next(N=>{if(!N)throw yr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new et(ke.FAILED_PRECONDITION,Bc);return o(g)}).next(N=>this.yi(g).next(()=>N)):this.Li(g).next(()=>o(g)))).then(S=>(g.raiseOnCommittedEvent(),S))}Li(e){return vh(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new et(ke.FAILED_PRECONDITION,yh)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vh(e).put("owner",n)}static D(){return Wo.D()}pi(e){const n=vh(e);return n.get("owner").next(o=>this.wi(o)?(Ke("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Me.resolve())}Di(e,n){const o=Date.now();return!(e<o-n||e>o&&(yr(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,Ve.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const o=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return Ke("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return yr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){yr("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vh(i){return ls(i,"owner")}function Eh(i){return ls(i,"clientMetadata")}function Ec(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class Fg{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.ki=o,this.qi=u}static Qi(e,n){let o=On(),u=On();for(const l of n.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:u=u.add(l.doc.key)}return new Fg(e,n.fromCache,o,u)}}class Hv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class G_{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,o,u){const l={result:null};return this.zi(e,n).next(g=>{l.result=g}).next(()=>{if(!l.result)return this.ji(e,n,u,o).next(g=>{l.result=g})}).next(()=>{if(l.result)return;const g=new Hv;return this.Hi(e,n,g).next(S=>{if(l.result=S,this.$i)return this.Ji(e,n,g,S.size)})}).next(()=>l.result)}Ji(e,n,o,u){return o.documentReadCount<this.Ui?(xr()<=De.in.DEBUG&&Ke("QueryEngine","SDK will not create cache indexes for query:",lc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Me.resolve()):(xr()<=De.in.DEBUG&&Ke("QueryEngine","Query:",lc(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Wi*u?(xr()<=De.in.DEBUG&&Ke("QueryEngine","The SDK decides to create cache indexes for query:",lc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mo(n))):Me.resolve())}zi(e,n){if(wf(n))return Me.resolve(null);let o=mo(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=Ul(n,null,"F"),o=mo(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(l=>{const g=On(...l);return this.Gi.getDocuments(e,g).next(S=>this.indexManager.getMinOffset(e,o).next(N=>{const U=this.Yi(n,S);return this.Zi(n,U,g,N.readTime)?this.zi(e,Ul(n,null,"F")):this.Xi(e,U,n,N)}))})))}ji(e,n,o,u){return wf(n)||u.isEqual(qt.min())?Me.resolve(null):this.Gi.getDocuments(e,o).next(l=>{const g=this.Yi(n,l);return this.Zi(n,g,o,u)?Me.resolve(null):(xr()<=De.in.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),lc(n)),this.Xi(e,g,n,Ju(u,-1)).next(S=>S))})}Yi(e,n){let o=new Or(qd(e));return n.forEach((u,l)=>{Vu(e,l)&&(o=o.add(l))}),o}Zi(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const l="F"===e.limitType?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(u)>0)}Hi(e,n,o){return xr()<=De.in.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",lc(n)),this.Gi.getDocumentsMatchingQuery(e,n,Rs.min(),o)}Xi(e,n,o,u){return this.Gi.getDocumentsMatchingQuery(e,o,u).next(l=>(n.forEach(g=>{l=l.insert(g.key,g)}),l))}}class Vg{constructor(e,n,o,u){this.persistence=e,this.es=n,this.serializer=u,this.ts=new $r(vn),this.ns=new Ra(l=>qo(l),ac),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(o)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Uv(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function Ug(i,e,n,o){return new Vg(i,e,n,o)}function W_(i,e){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,Te.Z)(function*(i,e){const n=ft(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(l=>(u=l,n.os(e),n.mutationQueue.getAllMutationBatches(o))).next(l=>{const g=[],S=[];let N=On();for(const U of u){g.push(U.batchId);for(const H of U.mutations)N=N.add(H.key)}for(const U of l){S.push(U.batchId);for(const H of U.mutations)N=N.add(H.key)}return n.localDocuments.getDocuments(o,N).next(U=>({_s:U,removedBatchIds:g,addedBatchIds:S}))})})}),Kf.apply(this,arguments)}function zv(i){const e=ft(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function q_(i,e,n){let o=On(),u=On();return n.forEach(l=>o=o.add(l)),e.getEntries(i,o).next(l=>{let g=_o();return n.forEach((S,N)=>{const U=l.get(S);N.isFoundDocument()!==U.isFoundDocument()&&(u=u.add(S)),N.isNoDocument()&&N.version.isEqual(qt.min())?(e.removeEntry(S,N.readTime),g=g.insert(S,N)):!U.isValidDocument()||N.version.compareTo(U.version)>0||0===N.version.compareTo(U.version)&&U.hasPendingWrites?(e.addEntry(N),g=g.insert(S,N)):Ke("LocalStore","Ignoring outdated watch update for ",S,". Current version:",U.version," Watch version:",N.version)}),{us:g,cs:u}})}function Wv(i,e){const n=ft(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Ih(i,e){const n=ft(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.qr.getTargetData(o,e).next(l=>l?(u=l,Me.resolve(u)):n.qr.allocateTargetId(o).next(g=>(u=new Na(e,g,"TargetPurposeListen",o.currentSequenceNumber),n.qr.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.ts.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.ts=n.ts.insert(o.targetId,o),n.ns.set(e,o.targetId)),o})}function Th(i,e,n){return ud.apply(this,arguments)}function ud(){return ud=(0,Te.Z)(function*(i,e,n){const o=ft(i),u=o.ts.get(e),l=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",l,g=>o.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!b(g))throw g;Ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}o.ts=o.ts.remove(e),o.ns.delete(u.target)}),ud.apply(this,arguments)}function Zf(i,e,n){const o=ft(i);let u=qt.min(),l=On();return o.persistence.runTransaction("Execute query","readwrite",g=>function(N,U,H){const ee=ft(N),pe=ee.ns.get(H);return void 0!==pe?Me.resolve(ee.ts.get(pe)):ee.qr.getTargetData(U,H)}(o,g,mo(e)).next(S=>{if(S)return u=S.lastLimboFreeSnapshotVersion,o.qr.getMatchingKeysForTargetId(g,S.targetId).next(N=>{l=N})}).next(()=>o.es.getDocumentsMatchingQuery(g,e,n?u:qt.min(),n?l:On())).next(S=>(dl(o,Kc(e),S),{documents:S,ls:l})))}function Qf(i,e){const n=ft(i),o=ft(n.qr),u=n.ts.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",l=>o._t(l,e).next(g=>g?g.target:null))}function Yf(i,e){const n=ft(i),o=n.rs.get(e)||qt.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.ss.getAllFromCollectionGroup(u,e,Ju(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(dl(n,e,u),u))}function dl(i,e,n){let o=i.rs.get(e)||qt.min();n.forEach((u,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)}),i.rs.set(e,o)}function wh(){return wh=(0,Te.Z)(function*(i,e,n,o){const u=ft(i);let l=On(),g=_o();for(const U of n){const H=e.hs(U.metadata.name);U.document&&(l=l.add(H));const ee=e.Ps(U);ee.setReadTime(e.Is(U.metadata.readTime)),g=g.insert(H,ee)}const S=u.ss.newChangeBuffer({trackRemovals:!0}),N=yield Ih(u,(H=o,mo(Lu($n.fromString(`__bundle__/docs/${H}`)))));var H;return u.persistence.runTransaction("Apply bundle documents","readwrite",U=>q_(U,S,g).next(H=>(S.apply(U),H)).next(H=>u.qr.removeMatchingKeysForTargetId(U,N.targetId).next(()=>u.qr.addMatchingKeys(U,l,N.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(U,H.us,H.cs)).next(()=>H.us)))}),wh.apply(this,arguments)}function Dh(i,e){return cd.apply(this,arguments)}function cd(){return cd=(0,Te.Z)(function*(i,e,n=On()){const o=yield Ih(i,mo(nd(e.bundledQuery))),u=ft(i);return u.persistence.runTransaction("Save named query","readwrite",l=>{const g=Di(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return u.Kr.saveNamedQuery(l,e);const S=o.withResumeToken(Bi.EMPTY_BYTE_STRING,g);return u.ts=u.ts.insert(S.targetId,S),u.qr.updateTargetData(l,S).next(()=>u.qr.removeMatchingKeysForTargetId(l,o.targetId)).next(()=>u.qr.addMatchingKeys(l,n,o.targetId)).next(()=>u.Kr.saveNamedQuery(l,e))})}),cd.apply(this,arguments)}function hl(i,e){return`firestore_clients_${i}_${e}`}function Jf(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Ah(i,e){return`firestore_targets_${i}_${e}`}class fl{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Ts(e,n,o){const u=JSON.parse(o);let l,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(l=new et(u.error.code,u.error.message))),g?new fl(e,n,u.state,l):(yr("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xf{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Ts(e,n){const o=JSON.parse(n);let u,l="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new et(o.error.code,o.error.message))),l?new Xf(e,o.state,u):(yr("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ld{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,l=Yc();for(let g=0;u&&g<o.activeTargetIds.length;++g)u=Sr(o.activeTargetIds[g]),l=l.add(o.activeTargetIds[g]);return u?new ld(e,l):(yr("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class pl{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new pl(n.clientId,n.onlineState):(yr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class $g{constructor(){this.activeTargetIds=Yc()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ep{constructor(e,n,o,u,l){this.window=e,this.si=n,this.persistenceKey=o,this.Rs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new $r(vn),this.started=!1,this.ps=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ys=hl(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new $g),this.Ss=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(N){return`firestore_bundle_loaded_v2_${N}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Te.Z)(function*(){const n=yield e.syncEngine.Bi();for(const u of n){if(u===e.Rs)continue;const l=e.getItem(hl(e.persistenceKey,u));if(l){const g=ld.Ts(u,l);g&&(e.gs=e.gs.insert(g.clientId,g))}}e.Fs();const o=e.storage.getItem(e.Cs);if(o){const u=e.Ms(o);u&&e.xs(u)}for(const u of e.ps)e.fs(u);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,o){this.Ns(e,n,o),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Ah(this.persistenceKey,e));if(o){const u=Xf.Ts(e,o);u&&(n=u.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ah(this.persistenceKey,e))}updateQueryState(e,n,o){this.ks(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Bs(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Ke("SharedClientState","READ",e,n),n}setItem(e,n){Ke("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const o=e;if(o.storageArea===this.storage){if(Ke("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ys)return void yr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,Te.Z)(function*(){if(n.started){if(null!==o.key)if(n.Ss.test(o.key)){if(null==o.newValue){const u=n.Ks(o.key);return n.$s(u,null)}{const u=n.Us(o.key,o.newValue);if(u)return n.$s(u.clientId,u)}}else if(n.bs.test(o.key)){if(null!==o.newValue){const u=n.Ws(o.key,o.newValue);if(u)return n.Gs(u)}}else if(n.Ds.test(o.key)){if(null!==o.newValue){const u=n.zs(o.key,o.newValue);if(u)return n.js(u)}}else if(o.key===n.Cs){if(null!==o.newValue){const u=n.Ms(o.newValue);if(u)return n.xs(u)}}else if(o.key===n.ws){const u=function(g){let S=Pe._e;if(null!=g)try{const N=JSON.parse(g);St("number"==typeof N),S=N}catch(N){yr("SharedClientState","Failed to read sequence number from WebStorage",N)}return S}(o.newValue);u!==Pe._e&&n.sequenceNumberHandler(u)}else if(o.key===n.vs){const u=n.Hs(o.newValue);yield Promise.all(u.map(l=>n.syncEngine.Js(l)))}}else n.ps.push(o)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,o){const u=new fl(this.currentUser,e,n,o),l=Jf(this.persistenceKey,this.currentUser,e);this.setItem(l,u.Es())}Bs(e){const n=Jf(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,o){const u=Ah(this.persistenceKey,e),l=new Xf(e,n,o);this.setItem(u,l.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const o=this.Ks(e);return ld.Ts(o,n)}Ws(e,n){const o=this.bs.exec(e),u=Number(o[1]);return fl.Ts(new Dt(void 0!==o[2]?o[2]:null),u,n)}zs(e,n){const o=this.Ds.exec(e),u=Number(o[1]);return Xf.Ts(u,n)}Ms(e){return pl.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,Te.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);Ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const o=n?this.gs.insert(e,n):this.gs.remove(e),u=this.Os(this.gs),l=this.Os(o),g=[],S=[];return l.forEach(N=>{u.has(N)||g.push(N)}),u.forEach(N=>{l.has(N)||S.push(N)}),this.syncEngine.Xs(g,S).then(()=>{this.gs=o})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=Yc();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class K_{constructor(){this.eo=new $g,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,o){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new $g,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qv{ro(e){}shutdown(){}}class tp{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ch=null;function Hg(){return null===Ch?Ch=268435456+Math.round(2147483648*Math.random()):Ch++,"0x"+Ch.toString(16)}const Kv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $I{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const ko="WebChannelConnection";class np extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.mo=o+"://"+n.host,this.fo=`projects/${u}/databases/${l}`,this.po="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${l}`}get yo(){return!1}wo(n,o,u,l,g){const S=Hg(),N=this.So(n,o);Ke("RestConnection",`Sending RPC '${n}' ${S}:`,N,u);const U={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(U,l,g),this.Do(n,N,U,u).then(H=>(Ke("RestConnection",`Received RPC '${n}' ${S}: `,H),H),H=>{throw pn("RestConnection",`RPC '${n}' ${S} failed with error: `,H,"url: ",N,"request:",u),H})}Co(n,o,u,l,g,S){return this.wo(n,o,u,l,g)}bo(n,o,u){n["X-Goog-Api-Client"]="gl-js/ fire/"+Jt,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((l,g)=>n[g]=l),u&&u.headers.forEach((l,g)=>n[g]=l)}So(n,o){return`${this.mo}/v1/${o}:${Kv[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,o,u){const l=Hg();return new Promise((g,S)=>{const N=new Pi;N.setWithCredentials(!0),N.listenOnce(Ri.COMPLETE,()=>{try{switch(N.getLastErrorCode()){case zn.NO_ERROR:const H=N.getResponseJson();Ke(ko,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(H)),g(H);break;case zn.TIMEOUT:Ke(ko,`RPC '${e}' ${l} timed out`),S(new et(ke.DEADLINE_EXCEEDED,"Request time out"));break;case zn.HTTP_ERROR:const ee=N.getStatus();if(Ke(ko,`RPC '${e}' ${l} failed with status:`,ee,"response text:",N.getResponseText()),ee>0){let pe=N.getResponseJson();Array.isArray(pe)&&(pe=pe[0]);const Oe=pe?.error;if(Oe&&Oe.status&&Oe.message){const gt=function(At){const hn=At.toLowerCase().replace(/_/g,"-");return Object.values(ke).indexOf(hn)>=0?hn:ke.UNKNOWN}(Oe.status);S(new et(gt,Oe.message))}else S(new et(ke.UNKNOWN,"Server responded with status "+N.getStatus()))}else S(new et(ke.UNAVAILABLE,"Connection failed."));break;default:Ut()}}finally{Ke(ko,`RPC '${e}' ${l} completed.`)}});const U=JSON.stringify(u);Ke(ko,`RPC '${e}' ${l} sending request:`,u),N.send(n,"POST",U,o,15)})}vo(e,n,o){const u=Hg(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=Ti(),S=Ki(),N={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},U=this.longPollingOptions.timeoutSeconds;void 0!==U&&(N.longPollingTimeout=Math.round(1e3*U)),this.useFetchStreams&&(N.xmlHttpFactory=new au({})),this.bo(N.initMessageHeaders,n,o),N.encodeInitMessageHeaders=!0;const H=l.join("");Ke(ko,`Creating RPC '${e}' stream ${u}: ${H}`,N);const ee=g.createWebChannel(H,N);let pe=!1,Oe=!1;const gt=new $I({co:At=>{Oe?Ke(ko,`Not sending because RPC '${e}' stream ${u} is closed:`,At):(pe||(Ke(ko,`Opening RPC '${e}' stream ${u} transport.`),ee.open(),pe=!0),Ke(ko,`RPC '${e}' stream ${u} sending:`,At),ee.send(At))},lo:()=>ee.close()}),Tt=(At,hn,In)=>{At.listen(hn,cn=>{try{In(cn)}catch(Gn){setTimeout(()=>{throw Gn},0)}})};return Tt(ee,Po.EventType.OPEN,()=>{Oe||Ke(ko,`RPC '${e}' stream ${u} transport opened.`)}),Tt(ee,Po.EventType.CLOSE,()=>{Oe||(Oe=!0,Ke(ko,`RPC '${e}' stream ${u} transport closed`),gt.Ro())}),Tt(ee,Po.EventType.ERROR,At=>{Oe||(Oe=!0,pn(ko,`RPC '${e}' stream ${u} transport errored:`,At),gt.Ro(new et(ke.UNAVAILABLE,"The operation could not be completed")))}),Tt(ee,Po.EventType.MESSAGE,At=>{var hn;if(!Oe){const In=At.data[0];St(!!In);const Gn=In.error||(null===(hn=In[0])||void 0===hn?void 0:hn.error);if(Gn){Ke(ko,`RPC '${e}' stream ${u} received error:`,Gn);const Er=Gn.status;let wr=function(mv){const h_=ji[mv];if(void 0!==h_)return ra(h_)}(Er),ds=Gn.message;void 0===wr&&(wr=ke.INTERNAL,ds="Unknown error status: "+Er+" with message "+Gn.message),Oe=!0,gt.Ro(new et(wr,ds)),ee.close()}else Ke(ko,`RPC '${e}' stream ${u} received:`,In),gt.Vo(In)}}),Tt(S,bs.STAT_EVENT,At=>{At.stat===Un.PROXY?Ke(ko,`RPC '${e}' stream ${u} detected buffering proxy`):At.stat===Un.NOPROXY&&Ke(ko,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{gt.Ao()},0),gt}}function rp(){return typeof window<"u"?window:null}function ip(){return typeof document<"u"?document:null}function dd(i){return new Kt(i,!0)}class Sh{constructor(e,n,o=1e3,u=1.5,l=6e4){this.si=e,this.timerId=n,this.Fo=o,this.Mo=u,this.xo=l,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),o=Math.max(0,Date.now()-this.Bo),u=Math.max(0,n-o);u>0&&Ke("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,u,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class bh{constructor(e,n,o,u,l,g,S,N){this.si=e,this.Ko=o,this.$o=u,this.connection=l,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=S,this.listener=N,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Sh(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,Te.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,Te.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var o=this;return(0,Te.Z)(function*(){o.t_(),o.n_(),o.zo.cancel(),o.Uo++,4!==e?o.zo.reset():n&&n.code===ke.RESOURCE_EXHAUSTED?(yr(n.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),o.zo.Lo()):n&&n.code===ke.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.r_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Uo===n&&this.s_(o,u)},o=>{e(()=>{const u=new et(ke.UNKNOWN,"Fetching auth token failed: "+o.message);return this.o_(u)})})}s_(e,n){const o=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{o(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(u=>{o(()=>this.o_(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Jo(){var e=this;this.state=5,this.zo.ko((0,Te.Z)(function*(){e.state=0,e.start()}))}o_(e){return Ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zv extends bh{constructor(e,n,o,u,l,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,g),this.serializer=l}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function _g(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(U=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===U?1:"REMOVE"===U?2:"CURRENT"===U?3:"RESET"===U?4:Ut(),u=e.targetChange.targetIds||[],l=function(U,H){return U.useProto3Json?(St(void 0===H||"string"==typeof H),Bi.fromBase64String(H||"")):(St(void 0===H||H instanceof Uint8Array),Bi.fromUint8Array(H||new Uint8Array))}(i,e.targetChange.resumeToken),g=e.targetChange.cause,S=g&&function(U){const H=void 0===U.code?ke.UNKNOWN:ra(U.code);return new et(H,U.message||"")}(g);n=new p(o,u,l,S||null)}else if("documentChange"in e){const o=e.documentChange,u=Qo(i,o.document.name),l=Di(o.document.updateTime),g=o.document.createTime?Di(o.document.createTime):qt.min(),S=new Ps({mapValue:{fields:o.document.fields}}),N=Pn.newFoundDocument(u,l,g,S);n=new m(o.targetIds||[],o.removedTargetIds||[],N.key,N)}else if("documentDelete"in e){const o=e.documentDelete,u=Qo(i,o.document),l=o.readTime?Di(o.readTime):qt.min(),g=Pn.newNoDocument(u,l);n=new m([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const o=e.documentRemove,u=Qo(i,o.document);n=new m([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Ut();{const o=e.filter,{count:u=0,unchangedNames:l}=o,g=new vo(u,l);n=new d(o.targetId,g)}}var U;return n}(this.serializer,e),o=function(l){if(!("targetChange"in l))return qt.min();const g=l.targetChange;return g.targetIds&&g.targetIds.length?qt.min():g.readTime?Di(g.readTime):qt.min()}(e);return this.listener.a_(n,o)}u_(e){const n={};n.database=Ma(this.serializer),n.addTarget=function(l,g){let S;const N=g.target;if(S=mu(N)?{documents:yg(l,N)}:{query:ih(l,N)},S.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){S.resumeToken=ia(l,g.resumeToken);const U=Wt(l,g.expectedCount);null!==U&&(S.expectedCount=U)}else if(g.snapshotVersion.compareTo(qt.min())>0){S.readTime=br(l,g.snapshotVersion.toTimestamp());const U=Wt(l,g.expectedCount);null!==U&&(S.expectedCount=U)}return S}(this.serializer,e);const o=function b_(i,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ut()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.e_(n)}c_(e){const n={};n.database=Ma(this.serializer),n.removeTarget=e,this.e_(n)}}class Z_ extends bh{constructor(e,n,o,u,l,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,g),this.serializer=l,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(St(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function rh(i,e){return i&&i.length>0?(St(void 0!==e),i.map(n=>function(u,l){let g=Di(u.updateTime?u.updateTime:l);return g.isEqual(qt.min())&&(g=Di(l)),new el(g,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=Di(e.commitTime);return this.listener.I_(o,n)}return St(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Ma(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>Yl(this.serializer,o))};this.e_(n)}}class Qv extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.d_=!1}A_(){if(this.d_)throw new et(ke.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,o){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.wo(e,n,o,u,l)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new et(ke.UNKNOWN,u.toString())})}Co(e,n,o,u){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,g])=>this.connection.Co(e,n,o,l,g,u)).catch(l=>{throw"FirebaseError"===l.name?(l.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new et(ke.UNKNOWN,l.toString())})}terminate(){this.d_=!0}}class Yv{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(yr(n),this.f_=!1):Ke("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class sp{constructor(e,n,o,u,l){var g=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=l,this.F_.ro(S=>{o.enqueueAndForget((0,Te.Z)(function*(){var N;Tu(g)&&(Ke("RemoteStore","Restarting streams for network reachability change."),yield(N=(0,Te.Z)(function*(H){const ee=ft(H);ee.C_.add(4),yield Iu(ee),ee.M_.set("Unknown"),ee.C_.delete(4),yield Rh(ee)}),function U(H){return N.apply(this,arguments)})(g))}))}),this.M_=new Yv(o,u)}}function Rh(i){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,Te.Z)(function*(i){if(Tu(i))for(const e of i.v_)yield e(!0)}),Ic.apply(this,arguments)}function Iu(i){return zg.apply(this,arguments)}function zg(){return zg=(0,Te.Z)(function*(i){for(const e of i.v_)yield e(!1)}),zg.apply(this,arguments)}function Ph(i,e){const n=ft(i);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),ap(n)?op(n):hd(n).Ho()&&Gg(n,e))}function Mh(i,e){const n=ft(i),o=hd(n);n.D_.delete(e),o.Ho()&&J_(n,e),0===n.D_.size&&(o.Ho()?o.Zo():Tu(n)&&n.M_.set("Unknown"))}function Gg(i,e){if(i.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qt.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hd(i).u_(e)}function J_(i,e){i.x_.Oe(e),hd(i).c_(e)}function op(i){i.x_=new F({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.D_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),hd(i).start(),i.M_.g_()}function ap(i){return Tu(i)&&!hd(i).jo()&&i.D_.size>0}function Tu(i){return 0===ft(i).C_.size}function Jv(i){i.x_=void 0}function Wg(i){return up.apply(this,arguments)}function up(){return up=(0,Te.Z)(function*(i){i.D_.forEach((e,n)=>{Gg(i,e)})}),up.apply(this,arguments)}function Xv(i,e){return qg.apply(this,arguments)}function qg(){return qg=(0,Te.Z)(function*(i,e){Jv(i),ap(i)?(i.M_.w_(e),op(i)):i.M_.set("Unknown")}),qg.apply(this,arguments)}function X_(i,e,n){return Kg.apply(this,arguments)}function Kg(){return Kg=(0,Te.Z)(function*(i,e,n){if(i.M_.set("Online"),e instanceof p&&2===e.state&&e.cause)try{yield(o=(0,Te.Z)(function*(l,g){const S=g.cause;for(const N of g.targetIds)l.D_.has(N)&&(yield l.remoteSyncer.rejectListen(N,S),l.D_.delete(N),l.x_.removeTarget(N))}),function u(l,g){return o.apply(this,arguments)})(i,e)}catch(o){Ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Nh(i,o)}else if(e instanceof m?i.x_.$e(e):e instanceof d?i.x_.Je(e):i.x_.Ge(e),!n.isEqual(qt.min()))try{const o=yield zv(i.localStore);n.compareTo(o)>=0&&(yield function(l,g){const S=l.x_.it(g);return S.targetChanges.forEach((N,U)=>{if(N.resumeToken.approximateByteSize()>0){const H=l.D_.get(U);H&&l.D_.set(U,H.withResumeToken(N.resumeToken,g))}}),S.targetMismatches.forEach((N,U)=>{const H=l.D_.get(N);if(!H)return;l.D_.set(N,H.withResumeToken(Bi.EMPTY_BYTE_STRING,H.snapshotVersion)),J_(l,N);const ee=new Na(H.target,N,U,H.sequenceNumber);Gg(l,ee)}),l.remoteSyncer.applyRemoteEvent(S)}(i,n))}catch(o){Ke("RemoteStore","Failed to raise snapshot:",o),yield Nh(i,o)}var o}),Kg.apply(this,arguments)}function Nh(i,e,n){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,Te.Z)(function*(i,e,n){if(!b(e))throw e;i.C_.add(1),yield Iu(i),i.M_.set("Offline"),n||(n=()=>zv(i.localStore)),i.asyncQueue.enqueueRetryable((0,Te.Z)(function*(){Ke("RemoteStore","Retrying IndexedDB access"),yield n(),i.C_.delete(1),yield Rh(i)}))}),Zg.apply(this,arguments)}function ey(i,e){return e().catch(n=>Nh(i,n,e))}function xh(i){return cp.apply(this,arguments)}function cp(){return cp=(0,Te.Z)(function*(i){const e=ft(i),n=Du(e);let o=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;ty(e);)try{const u=yield Wv(e.localStore,o);if(null===u){0===e.b_.length&&n.Zo();break}o=u.batchId,eu(e,u)}catch(u){yield Nh(e,u)}Qg(e)&&eE(e)}),cp.apply(this,arguments)}function ty(i){return Tu(i)&&i.b_.length<10}function eu(i,e){i.b_.push(e);const n=Du(i);n.Ho()&&n.h_&&n.P_(e.mutations)}function Qg(i){return Tu(i)&&!Du(i).jo()&&i.b_.length>0}function eE(i){Du(i).start()}function Yg(i){return wu.apply(this,arguments)}function wu(){return wu=(0,Te.Z)(function*(i){Du(i).E_()}),wu.apply(this,arguments)}function Jg(i){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,Te.Z)(function*(i){const e=Du(i);for(const n of i.b_)e.P_(n.mutations)}),Xg.apply(this,arguments)}function HI(i,e,n){return em.apply(this,arguments)}function em(){return em=(0,Te.Z)(function*(i,e,n){const o=i.b_.shift(),u=eh.from(o,e,n);yield ey(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield xh(i)}),em.apply(this,arguments)}function tm(i,e){return Oa.apply(this,arguments)}function Oa(){return Oa=(0,Te.Z)(function*(i,e){var n;e&&Du(i).h_&&(yield(n=(0,Te.Z)(function*(u,l){if(ql(S=l.code)&&S!==ke.ABORTED){const g=u.b_.shift();Du(u).Yo(),yield ey(u,()=>u.remoteSyncer.rejectFailedWrite(g.batchId,l)),yield xh(u)}var S}),function o(u,l){return n.apply(this,arguments)})(i,e)),Qg(i)&&eE(i)}),Oa.apply(this,arguments)}function nm(i,e){return rm.apply(this,arguments)}function rm(){return rm=(0,Te.Z)(function*(i,e){const n=ft(i);n.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const o=Tu(n);n.C_.add(3),yield Iu(n),o&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Rh(n)}),rm.apply(this,arguments)}function ny(i,e){return ws.apply(this,arguments)}function ws(){return ws=(0,Te.Z)(function*(i,e){const n=ft(i);e?(n.C_.delete(2),yield Rh(n)):e||(n.C_.add(2),yield Iu(n),n.M_.set("Unknown"))}),ws.apply(this,arguments)}function hd(i){return i.O_||(i.O_=function(n,o,u){const l=ft(n);return l.A_(),new Zv(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,u)}(i.datastore,i.asyncQueue,{ho:Wg.bind(null,i),Io:Xv.bind(null,i),a_:X_.bind(null,i)}),i.v_.push(function(){var e=(0,Te.Z)(function*(n){n?(i.O_.Yo(),ap(i)?op(i):i.M_.set("Unknown")):(yield i.O_.stop(),Jv(i))});return function(n){return e.apply(this,arguments)}}())),i.O_}function Du(i){return i.N_||(i.N_=function(n,o,u){const l=ft(n);return l.A_(),new Z_(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,u)}(i.datastore,i.asyncQueue,{ho:Yg.bind(null,i),Io:tm.bind(null,i),T_:Jg.bind(null,i),I_:HI.bind(null,i)}),i.v_.push(function(){var e=(0,Te.Z)(function*(n){n?(i.N_.Yo(),yield xh(i)):(yield i.N_.stop(),i.b_.length>0&&(Ke("RemoteStore",`Stopping write stream with ${i.b_.length} pending writes`),i.b_=[]))});return function(n){return e.apply(this,arguments)}}())),i.N_}class im{constructor(e,n,o,u,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=l,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,l){const g=Date.now()+o,S=new im(e,n,g,u,l);return S.start(o),S}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new et(ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fd(i,e){if(yr("AsyncQueue",`${e}: ${i}`),b(i))return new et(ke.UNAVAILABLE,`${e}: ${i}`);throw i}class Tc{constructor(e){this.comparator=e?(n,o)=>e(n,o)||bt.comparator(n.key,o.key):(n,o)=>bt.comparator(n.key,o.key),this.keyedMap=Zc(),this.sortedSet=new $r(this.comparator)}static emptySet(e){return new Tc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Tc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,l=o.getNext().key;if(!u.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new Tc;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class sm{constructor(){this.B_=new $r(bt.comparator)}track(e){const n=e.doc.key,o=this.B_.get(n);o?0!==e.type&&3===o.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==o.type?this.B_=this.B_.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.B_=this.B_.remove(n):1===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Ut():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,o)=>{e.push(o)}),e}}class gl{constructor(e,n,o,u,l,g,S,N,U){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=l,this.fromCache=g,this.syncStateChanged=S,this.excludesMetadataChanges=N,this.hasCachedResults=U}static fromInitialDocuments(e,n,o,u,l){const g=[];return n.forEach(S=>{g.push({type:0,doc:S})}),new gl(e,n,Tc.emptySet(n),g,o,u,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class tE{constructor(){this.k_=void 0,this.listeners=[]}}class ry{constructor(){this.queries=new Ra(e=>Df(e),cc),this.onlineState="Unknown",this.q_=new Set}}function lp(i,e){return om.apply(this,arguments)}function om(){return om=(0,Te.Z)(function*(i,e){const n=ft(i),o=e.query;let u=!1,l=n.queries.get(o);if(l||(u=!0,l=new tE),u)try{l.k_=yield n.onListen(o)}catch(g){const S=fd(g,`Initialization of query '${lc(e.query)}' failed`);return void e.onError(S)}n.queries.set(o,l),l.listeners.push(e),e.Q_(n.onlineState),l.k_&&e.K_(l.k_)&&tu(n)}),om.apply(this,arguments)}function am(i,e){return um.apply(this,arguments)}function um(){return um=(0,Te.Z)(function*(i,e){const n=ft(i),o=e.query;let u=!1;const l=n.queries.get(o);if(l){const g=l.listeners.indexOf(e);g>=0&&(l.listeners.splice(g,1),u=0===l.listeners.length)}if(u)return n.queries.delete(o),n.onUnlisten(o)}),um.apply(this,arguments)}function iy(i,e){const n=ft(i);let o=!1;for(const u of e){const g=n.queries.get(u.query);if(g){for(const S of g.listeners)S.K_(u)&&(o=!0);g.k_=u}}o&&tu(n)}function pd(i,e,n){const o=ft(i),u=o.queries.get(e);if(u)for(const l of u.listeners)l.onError(n);o.queries.delete(e)}function tu(i){i.q_.forEach(e=>{e.next()})}class wc{constructor(e,n,o){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=o||{}}K_(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new gl(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class nE{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class sy{constructor(e){this.serializer=e}hs(e){return Qo(this.serializer,e)}Ps(e){return e.metadata.exists?nl(this.serializer,e.document,!1):Pn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Di(e)}}class oy{constructor(e,n,o){this.X_=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=cm(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const o=$n.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,o=new sy(this.serializer);for(const u of e)if(u.metadata.queries){const l=o.hs(u.metadata.name);for(const g of u.metadata.queries){const S=(n.get(g)||On()).add(l);n.set(g,S)}}return n}complete(){var e=this;return(0,Te.Z)(function*(){const n=yield function jg(i,e,n,o){return wh.apply(this,arguments)}(e.localStore,new sy(e.serializer),e.documents,e.X_.id),o=e.ta(e.documents);for(const u of e.queries)yield Dh(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function cm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class dp{constructor(e){this.key=e}}class gd{constructor(e){this.key=e}}class Oh{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=On(),this.mutatedKeys=On(),this._a=qd(e),this.aa=new Tc(this._a)}get ua(){return this.ia}ca(e,n){const o=n?n.la:new sm,u=n?n.aa:this.aa;let l=n?n.mutatedKeys:this.mutatedKeys,g=u,S=!1;const N="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,U="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((H,ee)=>{const pe=u.get(H),Oe=Vu(this.query,ee)?ee:null,gt=!!pe&&this.mutatedKeys.has(pe.key),Tt=!!Oe&&(Oe.hasLocalMutations||this.mutatedKeys.has(Oe.key)&&Oe.hasCommittedMutations);let At=!1;pe&&Oe?pe.data.isEqual(Oe.data)?gt!==Tt&&(o.track({type:3,doc:Oe}),At=!0):this.ha(pe,Oe)||(o.track({type:2,doc:Oe}),At=!0,(N&&this._a(Oe,N)>0||U&&this._a(Oe,U)<0)&&(S=!0)):!pe&&Oe?(o.track({type:0,doc:Oe}),At=!0):pe&&!Oe&&(o.track({type:1,doc:pe}),At=!0,(N||U)&&(S=!0)),At&&(Oe?(g=g.add(Oe),l=Tt?l.add(H):l.delete(H)):(g=g.delete(H),l=l.delete(H)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const H="F"===this.query.limitType?g.last():g.first();g=g.delete(H.key),l=l.delete(H.key),o.track({type:1,doc:H})}return{aa:g,la:o,Zi:S,mutatedKeys:l}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o){const u=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const l=e.la.L_();l.sort((U,H)=>function(pe,Oe){const gt=Tt=>{switch(Tt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ut()}};return gt(pe)-gt(Oe)}(U.type,H.type)||this._a(U.doc,H.doc)),this.Pa(o);const g=n?this.Ia():[],S=0===this.oa.size&&this.current?1:0,N=S!==this.sa;return this.sa=S,0!==l.length||N?{snapshot:new gl(this.query,e.aa,u,l,e.mutatedKeys,0===S,N,!1,!!o&&o.resumeToken.approximateByteSize()>0),Ta:g}:{Ta:g}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new sm,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=On(),this.aa.forEach(o=>{this.Ea(o.key)&&(this.oa=this.oa.add(o.key))});const n=[];return e.forEach(o=>{this.oa.has(o)||n.push(new gd(o))}),this.oa.forEach(o=>{e.has(o)||n.push(new dp(o))}),n}da(e){this.ia=e.ls,this.oa=On();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return gl.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class ay{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class uy{constructor(e){this.key=e,this.Ra=!1}}class rE{constructor(e,n,o,u,l,g){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=l,this.maxConcurrentLimboResolutions=g,this.Va={},this.ma=new Ra(S=>Df(S),cc),this.fa=new Map,this.ga=new Set,this.pa=new $r(bt.comparator),this.ya=new Map,this.wa=new _h,this.Sa={},this.ba=new Map,this.Da=xa.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function iE(i,e){return lm.apply(this,arguments)}function lm(){return lm=(0,Te.Z)(function*(i,e){const n=wm(i);let o,u;const l=n.ma.get(e);if(l)o=l.targetId,n.sharedClientState.addLocalQueryTarget(o),u=l.view.Aa();else{const g=yield Ih(n.localStore,mo(e)),S=n.sharedClientState.addLocalQueryTarget(g.targetId);o=g.targetId,u=yield dm(n,e,o,"current"===S,g.resumeToken),n.isPrimaryClient&&Ph(n.remoteStore,g)}return u}),lm.apply(this,arguments)}function dm(i,e,n,o,u){return hp.apply(this,arguments)}function hp(){return hp=(0,Te.Z)(function*(i,e,n,o,u){i.va=(ee,pe,Oe)=>{return(gt=(0,Te.Z)(function*(At,hn,In,cn){let Gn=hn.view.ca(In);Gn.Zi&&(Gn=yield Zf(At.localStore,hn.query,!1).then(({documents:ds})=>hn.view.ca(ds,Gn)));const Er=cn&&cn.targetChanges.get(hn.targetId),wr=hn.view.applyChanges(Gn,At.isPrimaryClient,Er);return md(At,hn.targetId,wr.Ta),wr.snapshot}),function Tt(At,hn,In,cn){return gt.apply(this,arguments)})(i,ee,pe,Oe);var gt};const l=yield Zf(i.localStore,e,!0),g=new Oh(e,l.ls),S=g.ca(l.documents),N=vu.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,u),U=g.applyChanges(S,i.isPrimaryClient,N);md(i,n,U.Ta);const H=new ay(e,n,g);return i.ma.set(e,H),i.fa.has(n)?i.fa.get(n).push(e):i.fa.set(n,[e]),U.snapshot}),hp.apply(this,arguments)}function zI(i,e){return hm.apply(this,arguments)}function hm(){return hm=(0,Te.Z)(function*(i,e){const n=ft(i),o=n.ma.get(e),u=n.fa.get(o.targetId);if(u.length>1)return n.fa.set(o.targetId,u.filter(l=>!cc(l,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Th(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),Mh(n.remoteStore,o.targetId),ml(n,o.targetId)}).catch($a))):(ml(n,o.targetId),yield Th(n.localStore,o.targetId,!0))}),hm.apply(this,arguments)}function cy(){return cy=(0,Te.Z)(function*(i,e,n){const o=my(i);try{const u=yield function(g,S){const N=ft(g),U=vr.now(),H=S.reduce((Oe,gt)=>Oe.add(gt.key),On());let ee,pe;return N.persistence.runTransaction("Locally write mutations","readwrite",Oe=>{let gt=_o(),Tt=On();return N.ss.getEntries(Oe,H).next(At=>{gt=At,gt.forEach((hn,In)=>{In.isValidDocument()||(Tt=Tt.add(hn))})}).next(()=>N.localDocuments.getOverlayedDocuments(Oe,gt)).next(At=>{ee=At;const hn=[];for(const In of S){const cn=yo(In,ee.get(In.key).overlayedDocument);null!=cn&&hn.push(new Zo(In.key,cn,vf(cn.value.mapValue),li.exists(!0)))}return N.mutationQueue.addMutationBatch(Oe,U,hn,S)}).next(At=>{pe=At;const hn=At.applyToLocalDocumentSet(ee,Tt);return N.documentOverlayCache.saveOverlays(Oe,At.batchId,hn)})}).then(()=>({batchId:pe.batchId,changes:Zd(ee)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(g,S,N){let U=g.Sa[g.currentUser.toKey()];U||(U=new $r(vn)),U=U.insert(S,N),g.Sa[g.currentUser.toKey()]=U}(o,u.batchId,n),yield ma(o,u.changes),yield xh(o.remoteStore)}catch(u){const l=fd(u,"Failed to persist write");n.reject(l)}}),cy.apply(this,arguments)}function fm(i,e){return fp.apply(this,arguments)}function fp(){return fp=(0,Te.Z)(function*(i,e){const n=ft(i);try{const o=yield function Gv(i,e){const n=ft(i),o=e.snapshotVersion;let u=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const g=n.ss.newChangeBuffer({trackRemovals:!0});u=n.ts;const S=[];e.targetChanges.forEach((H,ee)=>{const pe=u.get(ee);if(!pe)return;S.push(n.qr.removeMatchingKeys(l,H.removedDocuments,ee).next(()=>n.qr.addMatchingKeys(l,H.addedDocuments,ee)));let Oe=pe.withSequenceNumber(l.currentSequenceNumber);var Tt,At,hn;null!==e.targetMismatches.get(ee)?Oe=Oe.withResumeToken(Bi.EMPTY_BYTE_STRING,qt.min()).withLastLimboFreeSnapshotVersion(qt.min()):H.resumeToken.approximateByteSize()>0&&(Oe=Oe.withResumeToken(H.resumeToken,o)),u=u.insert(ee,Oe),At=Oe,hn=H,(0===(Tt=pe).resumeToken.approximateByteSize()||At.snapshotVersion.toMicroseconds()-Tt.snapshotVersion.toMicroseconds()>=3e8||hn.addedDocuments.size+hn.modifiedDocuments.size+hn.removedDocuments.size>0)&&S.push(n.qr.updateTargetData(l,Oe))});let N=_o(),U=On();if(e.documentUpdates.forEach(H=>{e.resolvedLimboDocuments.has(H)&&S.push(n.persistence.referenceDelegate.updateLimboDocument(l,H))}),S.push(q_(l,g,e.documentUpdates).next(H=>{N=H.us,U=H.cs})),!o.isEqual(qt.min())){const H=n.qr.getLastRemoteSnapshotVersion(l).next(ee=>n.qr.setTargetsMetadata(l,l.currentSequenceNumber,o));S.push(H)}return Me.waitFor(S).next(()=>g.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,N,U)).next(()=>N)}).then(l=>(n.ts=u,l))}(n.localStore,e);e.targetChanges.forEach((u,l)=>{const g=n.ya.get(l);g&&(St(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.Ra=!0:u.modifiedDocuments.size>0?St(g.Ra):u.removedDocuments.size>0&&(St(g.Ra),g.Ra=!1))}),yield ma(n,o,e)}catch(o){yield $a(o)}}),fp.apply(this,arguments)}function sE(i,e,n){const o=ft(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.ma.forEach((l,g)=>{const S=g.view.Q_(e);S.snapshot&&u.push(S.snapshot)}),function(g,S){const N=ft(g);N.onlineState=S;let U=!1;N.queries.forEach((H,ee)=>{for(const pe of ee.listeners)pe.Q_(S)&&(U=!0)}),U&&tu(N)}(o.eventManager,e),u.length&&o.Va.a_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function pp(i,e,n){return gp.apply(this,arguments)}function gp(){return gp=(0,Te.Z)(function*(i,e,n){const o=ft(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.ya.get(e),l=u&&u.key;if(l){let g=new $r(bt.comparator);g=g.insert(l,Pn.newNoDocument(l,qt.min()));const S=On().add(l),N=new Pa(qt.min(),new Map,new $r(vn),g,S);yield fm(o,N),o.pa=o.pa.remove(l),o.ya.delete(e),kh(o)}else yield Th(o.localStore,e,!1).then(()=>ml(o,e,n)).catch($a)}),gp.apply(this,arguments)}function ly(i,e){return pm.apply(this,arguments)}function pm(){return pm=(0,Te.Z)(function*(i,e){const n=ft(i),o=e.batch.batchId;try{const u=yield function Bg(i,e){const n=ft(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),l=n.ss.newChangeBuffer({trackRemovals:!0});return function(S,N,U,H){const ee=U.batch,pe=ee.keys();let Oe=Me.resolve();return pe.forEach(gt=>{Oe=Oe.next(()=>H.getEntry(N,gt)).next(Tt=>{const At=U.docVersions.get(gt);St(null!==At),Tt.version.compareTo(At)<0&&(ee.applyToRemoteDocument(Tt,U),Tt.isValidDocument()&&(Tt.setReadTime(U.commitVersion),H.addEntry(Tt)))})}),Oe.next(()=>S.mutationQueue.removeMutationBatch(N,ee))}(n,o,e,l).next(()=>l.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(S){let N=On();for(let U=0;U<S.mutationResults.length;++U)S.mutationResults[U].transformResults.length>0&&(N=N.add(S.batch.mutations[U].key));return N}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}(n.localStore,e);Dc(n,o,null),yp(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield ma(n,u)}catch(u){yield $a(u)}}),pm.apply(this,arguments)}function dy(i,e,n){return mp.apply(this,arguments)}function mp(){return mp=(0,Te.Z)(function*(i,e,n){const o=ft(i);try{const u=yield function(g,S){const N=ft(g);return N.persistence.runTransaction("Reject batch","readwrite-primary",U=>{let H;return N.mutationQueue.lookupMutationBatch(U,S).next(ee=>(St(null!==ee),H=ee.keys(),N.mutationQueue.removeMutationBatch(U,ee))).next(()=>N.mutationQueue.performConsistencyCheck(U)).next(()=>N.documentOverlayCache.removeOverlaysForBatchId(U,H,S)).next(()=>N.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(U,H)).next(()=>N.localDocuments.getDocuments(U,H))})}(o.localStore,e);Dc(o,e,n),yp(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield ma(o,u)}catch(u){yield $a(u)}}),mp.apply(this,arguments)}function _p(){return _p=(0,Te.Z)(function*(i,e){const n=ft(i);Tu(n.remoteStore)||Ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(g){const S=ft(g);return S.persistence.runTransaction("Get highest unacknowledged batch id","readonly",N=>S.mutationQueue.getHighestUnacknowledgedBatchId(N))}(n.localStore);if(-1===o)return void e.resolve();const u=n.ba.get(o)||[];u.push(e),n.ba.set(o,u)}catch(o){const u=fd(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),_p.apply(this,arguments)}function yp(i,e){(i.ba.get(e)||[]).forEach(n=>{n.resolve()}),i.ba.delete(e)}function Dc(i,e,n){const o=ft(i);let u=o.Sa[o.currentUser.toKey()];if(u){const l=u.get(e);l&&(n?l.reject(n):l.resolve(),u=u.remove(e)),o.Sa[o.currentUser.toKey()]=u}}function ml(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.fa.get(e))i.ma.delete(o),n&&i.Va.Fa(o,n);i.fa.delete(e),i.isPrimaryClient&&i.wa.Rr(e).forEach(o=>{i.wa.containsKey(o)||hy(i,o)})}function hy(i,e){i.ga.delete(e.path.canonicalString());const n=i.pa.get(e);null!==n&&(Mh(i.remoteStore,n),i.pa=i.pa.remove(e),i.ya.delete(n),kh(i))}function md(i,e,n){for(const o of n)o instanceof dp?(i.wa.addReference(o.key,e),_d(i,o)):o instanceof gd?(Ke("SyncEngine","Document no longer in limbo: "+o.key),i.wa.removeReference(o.key,e),i.wa.containsKey(o.key)||hy(i,o.key)):Ut()}function _d(i,e){const n=e.key,o=n.path.canonicalString();i.pa.get(n)||i.ga.has(o)||(Ke("SyncEngine","New document in limbo: "+n),i.ga.add(o),kh(i))}function kh(i){for(;i.ga.size>0&&i.pa.size<i.maxConcurrentLimboResolutions;){const e=i.ga.values().next().value;i.ga.delete(e);const n=new bt($n.fromString(e)),o=i.Da.next();i.ya.set(o,new uy(n)),i.pa=i.pa.insert(n,o),Ph(i.remoteStore,new Na(mo(Lu(n.path)),o,"TargetPurposeLimboResolution",Pe._e))}}function ma(i,e,n){return vp.apply(this,arguments)}function vp(){return vp=(0,Te.Z)(function*(i,e,n){const o=ft(i),u=[],l=[],g=[];var S;o.ma.isEmpty()||(o.ma.forEach((S,N)=>{g.push(o.va(N,e,n).then(U=>{if((U||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(N.targetId,U?.fromCache?"not-current":"current"),U){u.push(U);const H=Fg.Qi(N.targetId,U);l.push(H)}}))}),yield Promise.all(g),o.Va.a_(u),yield(S=(0,Te.Z)(function*(U,H){const ee=ft(U);try{yield ee.persistence.runTransaction("notifyLocalViewChanges","readwrite",pe=>Me.forEach(H,Oe=>Me.forEach(Oe.ki,gt=>ee.persistence.referenceDelegate.addReference(pe,Oe.targetId,gt)).next(()=>Me.forEach(Oe.qi,gt=>ee.persistence.referenceDelegate.removeReference(pe,Oe.targetId,gt)))))}catch(pe){if(!b(pe))throw pe;Ke("LocalStore","Failed to update sequence numbers: "+pe)}for(const pe of H){const Oe=pe.targetId;if(!pe.fromCache){const gt=ee.ts.get(Oe),At=gt.withLastLimboFreeSnapshotVersion(gt.snapshotVersion);ee.ts=ee.ts.insert(Oe,At)}}}),function N(U,H){return S.apply(this,arguments)})(o.localStore,l))}),vp.apply(this,arguments)}function gm(i,e){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,Te.Z)(function*(i,e){const n=ft(i);if(!n.currentUser.isEqual(e)){Ke("SyncEngine","User change. New user:",e.toKey());const o=yield W_(n.localStore,e);n.currentUser=e,(l=n).ba.forEach(S=>{S.forEach(N=>{N.reject(new et(ke.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.ba.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield ma(n,o._s)}var l}),Lh.apply(this,arguments)}function mm(i,e){const n=ft(i),o=n.ya.get(e);if(o&&o.Ra)return On().add(o.key);{let u=On();const l=n.fa.get(e);if(!l)return u;for(const g of l){const S=n.ma.get(g);u=u.unionWith(S.view.ua)}return u}}function fy(i,e){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,Te.Z)(function*(i,e){const n=ft(i),o=yield Zf(n.localStore,e.query,!0),u=e.view.da(o);return n.isPrimaryClient&&md(n,e.targetId,u.Ta),u}),Fh.apply(this,arguments)}function oE(i,e){return _m.apply(this,arguments)}function _m(){return _m=(0,Te.Z)(function*(i,e){const n=ft(i);return Yf(n.localStore,e).then(o=>ma(n,o))}),_m.apply(this,arguments)}function aE(i,e,n,o){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,Te.Z)(function*(i,e,n,o){const u=ft(i),l=yield function(S,N){const U=ft(S),H=ft(U.mutationQueue);return U.persistence.runTransaction("Lookup mutation documents","readonly",ee=>H.Cn(ee,N).next(pe=>pe?U.localDocuments.getDocuments(ee,pe):Me.resolve(null)))}(u.localStore,e);var N;null!==l?("pending"===n?yield xh(u.remoteStore):"acknowledged"===n||"rejected"===n?(Dc(u,e,o||null),yp(u,e),N=e,ft(ft(u.localStore).mutationQueue).Fn(N)):Ut(),yield ma(u,l)):Ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ep.apply(this,arguments)}function ym(){return ym=(0,Te.Z)(function*(i,e){const n=ft(i);if(wm(n),my(n),!0===e&&!0!==n.Ca){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield py(n,o.toArray());n.Ca=!0,yield ny(n.remoteStore,!0);for(const l of u)Ph(n.remoteStore,l)}else if(!1===e&&!1!==n.Ca){const o=[];let u=Promise.resolve();n.fa.forEach((l,g)=>{n.sharedClientState.isLocalQueryTarget(g)?o.push(g):u=u.then(()=>(ml(n,g),Th(n.localStore,g,!0))),Mh(n.remoteStore,g)}),yield u,yield py(n,o),function(g){const S=ft(g);S.ya.forEach((N,U)=>{Mh(S.remoteStore,U)}),S.wa.Vr(),S.ya=new Map,S.pa=new $r(bt.comparator)}(n),n.Ca=!1,yield ny(n.remoteStore,!1)}}),ym.apply(this,arguments)}function py(i,e,n){return vm.apply(this,arguments)}function vm(){return vm=(0,Te.Z)(function*(i,e,n){const o=ft(i),u=[],l=[];for(const g of e){let S;const N=o.fa.get(g);if(N&&0!==N.length){S=yield Ih(o.localStore,mo(N[0]));for(const U of N){const H=o.ma.get(U),ee=yield fy(o,H);ee.snapshot&&l.push(ee.snapshot)}}else{const U=yield Qf(o.localStore,g);S=yield Ih(o.localStore,U),yield dm(o,Em(U),g,!1,S.resumeToken)}u.push(S)}return o.Va.a_(l),u}),vm.apply(this,arguments)}function Em(i){return Wd(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function gy(i){return n=ft(i).localStore,ft(ft(n).persistence).Bi();var n}function cE(i,e,n,o){return Im.apply(this,arguments)}function Im(){return Im=(0,Te.Z)(function*(i,e,n,o){const u=ft(i);if(u.Ca)return void Ke("SyncEngine","Ignoring unexpected query state notification.");const l=u.fa.get(e);if(l&&l.length>0)switch(n){case"current":case"not-current":{const g=yield Yf(u.localStore,Kc(l[0])),S=Pa.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Bi.EMPTY_BYTE_STRING);yield ma(u,g,S);break}case"rejected":yield Th(u.localStore,e,!0),ml(u,e,o);break;default:Ut()}}),Im.apply(this,arguments)}function _a(i,e,n){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,Te.Z)(function*(i,e,n){const o=wm(i);if(o.Ca){for(const u of e){if(o.fa.has(u)){Ke("SyncEngine","Adding an already active target "+u);continue}const l=yield Qf(o.localStore,u),g=yield Ih(o.localStore,l);yield dm(o,Em(l),g.targetId,!1,g.resumeToken),Ph(o.remoteStore,g)}for(const u of n)o.fa.has(u)&&(yield Th(o.localStore,u,!1).then(()=>{Mh(o.remoteStore,u),ml(o,u)}).catch($a))}}),Tm.apply(this,arguments)}function wm(i){const e=ft(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=fm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pp.bind(null,e),e.Va.a_=iy.bind(null,e.eventManager),e.Va.Fa=pd.bind(null,e.eventManager),e}function my(i){const e=ft(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ly.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dy.bind(null,e),e}class yd{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Te.Z)(function*(){n.serializer=dd(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Ug(this.persistence,new G_,e.initialUser,this.serializer)}createPersistence(e){return new od(ad.jr,this.serializer)}createSharedClientState(e){return new K_}terminate(){var e=this;return(0,Te.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Am extends yd{constructor(e,n,o){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,Te.Z)(function*(){yield n().call(o,e),yield o.xa.initialize(o,e),yield my(o.xa.syncEngine),yield xh(o.xa.remoteStore),yield o.persistence.mi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Ug(this.persistence,new G_,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new $_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new Le(n,this.persistence);return new te(e.asyncQueue,o)}createPersistence(e){const n=Ec(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Oo.withCacheSize(this.cacheSizeBytes):Oo.DEFAULT;return new Lg(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,rp(),ip(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new K_}}class _y extends Am{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,Te.Z)(function*(){yield n().call(o,e);const u=o.xa.syncEngine;o.sharedClientState instanceof ep&&(o.sharedClientState.syncEngine={Ys:aE.bind(null,u),Zs:cE.bind(null,u),Xs:_a.bind(null,u),Bi:gy.bind(null,u),Js:oE.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.mi(function(){var l=(0,Te.Z)(function*(g){yield function uE(i,e){return ym.apply(this,arguments)}(o.xa.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start():g||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(g&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():g||o.indexBackfillerScheduler.stop())});return function(g){return l.apply(this,arguments)}}())})()}createSharedClientState(e){const n=rp();if(!ep.D(n))throw new et(ke.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Ec(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ep(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class _l{initialize(e,n){var o=this;return(0,Te.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>sE(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=gm.bind(null,o.syncEngine),yield ny(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ry}createDatastore(e){const n=dd(e.databaseInfo.databaseId),o=new np(e.databaseInfo);return new Qv(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return o=this.localStore,u=this.datastore,l=e.asyncQueue,g=n=>sE(this.syncEngine,n,0),S=tp.D()?new tp:new qv,new sp(o,u,l,g,S);var o,u,l,g,S}createSyncEngine(e,n){return function(u,l,g,S,N,U,H){const ee=new rE(u,l,g,S,N,U);return H&&(ee.Ca=!0),ee}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,Te.Z)(function*(o){const u=ft(o);Ke("RemoteStore","RemoteStore shutting down."),u.C_.add(5),yield Iu(u),u.F_.shutdown(),u.M_.set("Unknown")}),function n(o){return e.apply(this,arguments)})(this.remoteStore);var e}}function yy(i,e=10240){let n=0;return{read:()=>(0,Te.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,Te.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Ip{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class Cm{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new is,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(o=>{o&&o.Z_()?this.metadata.resolve(o.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.Y_)}`))},o=>this.metadata.reject(o))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,Te.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,Te.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,Te.Z)(function*(){const n=yield e.qa();if(null===n)return null;const o=e.La.decode(n),u=Number(o);isNaN(u)&&e.Qa(`length string (${o}) is not valid number`);const l=yield e.Ka(u);return new nE(JSON.parse(l),n.length+u)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,Te.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}Ka(e){var n=this;return(0,Te.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const o=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,Te.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class dE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Te.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new et(ke.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,Te.Z)(function*(g,S){const N=ft(g),U=Ma(N.serializer)+"/documents",H={documents:S.map(gt=>ju(N.serializer,gt))},ee=yield N.Co("BatchGetDocuments",U,H,S.length),pe=new Map;ee.forEach(gt=>{const Tt=function kf(i,e){return"found"in e?function(o,u){St(!!u.found);const l=Qo(o,u.found.name),g=Di(u.found.updateTime),S=u.found.createTime?Di(u.found.createTime):qt.min(),N=new Ps({mapValue:{fields:u.found.fields}});return Pn.newFoundDocument(l,g,S,N)}(i,e):"missing"in e?function(o,u){St(!!u.missing),St(!!u.readTime);const l=Qo(o,u.missing),g=Di(u.readTime);return Pn.newNoDocument(l,g)}(i,e):Ut()}(N.serializer,gt);pe.set(Tt.key.toString(),Tt)});const Oe=[];return S.forEach(gt=>{const Tt=pe.get(gt.toString());St(!!Tt),Oe.push(Tt)}),Oe}),function l(g,S){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new xo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Te.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const l=bt.fromPath(u);e.mutations.push(new zl(l,e.precondition(l)))}),yield(o=(0,Te.Z)(function*(l,g){const S=ft(l),N=Ma(S.serializer)+"/documents",U={writes:g.map(H=>Yl(S.serializer,H))};yield S.wo("Commit",N,U)}),function u(l,g){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ut();n=qt.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new et(ke.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(qt.min())?li.exists(!1):li.updateTime(n):li.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(qt.min()))throw new et(ke.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return li.updateTime(n)}return li.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class hE{constructor(e,n,o,u,l){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=l,this.Wa=o.maxAttempts,this.zo=new Sh(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,Te.Z)(function*(){const n=new dE(e.datastore),o=e.za(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(l=>{e.ja(l)}))}).catch(u=>{e.ja(u)})}))}za(e){try{const n=this.updateFunction(e);return!Rt(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!ql(n)}return!1}}class fE{constructor(e,n,o,u){var l=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=Dt.UNAUTHENTICATED,this.clientId=ci.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var g=(0,Te.Z)(function*(S){Ke("FirestoreClient","Received user=",S.uid),yield l.authCredentialListener(S),l.user=S});return function(S){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(o,g=>(Ke("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}getConfiguration(){var e=this;return(0,Te.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new et(ke.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=fd(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function Tp(i,e){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,Te.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const n=yield i.getConfiguration();yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,Te.Z)(function*(l){o.isEqual(l)||(yield W_(e.localStore,l),o=l)});return function(l){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),Sm.apply(this,arguments)}function ka(i,e){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,Te.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield wp(i);Ke("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(n,o),i.setCredentialChangeListener(u=>nm(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,l)=>nm(e.remoteStore,l)),i._onlineComponents=e}),Vh.apply(this,arguments)}function vy(i){return"FirebaseError"===i.name?i.code===ke.FAILED_PRECONDITION||i.code===ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function wp(i){return bm.apply(this,arguments)}function bm(){return bm=(0,Te.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ke("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Tp(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!vy(n))throw n;pn("Error using user provided cache. Falling back to memory cache: "+n),yield Tp(i,new yd)}}else Ke("FirestoreClient","Using default OfflineComponentProvider"),yield Tp(i,new yd);return i._offlineComponents}),bm.apply(this,arguments)}function Uh(i){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,Te.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ke("FirestoreClient","Using user provided OnlineComponentProvider"),yield ka(i,i._uninitializedComponentsProvider._online)):(Ke("FirestoreClient","Using default OnlineComponentProvider"),yield ka(i,new _l))),i._onlineComponents}),Dp.apply(this,arguments)}function Bh(i){return wp(i).then(e=>e.persistence)}function Ac(i){return wp(i).then(e=>e.localStore)}function pE(i){return Uh(i).then(e=>e.remoteStore)}function Ap(i){return Uh(i).then(e=>e.syncEngine)}function yl(i){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,Te.Z)(function*(i){const e=yield Uh(i),n=e.eventManager;return n.onListen=iE.bind(null,e.syncEngine),n.onUnlisten=zI.bind(null,e.syncEngine),n}),Cp.apply(this,arguments)}function Ey(i,e,n={}){const o=new is;return i.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(l,g,S,N,U){const H=new Ip({next:pe=>{g.enqueueAndForget(()=>am(l,ee));const Oe=pe.docs.has(S);!Oe&&pe.fromCache?U.reject(new et(ke.UNAVAILABLE,"Failed to get document because the client is offline.")):Oe&&pe.fromCache&&N&&"server"===N.source?U.reject(new et(ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):U.resolve(pe)},error:pe=>U.reject(pe)}),ee=new wc(Lu(S.path),H,{includeMetadataChanges:!0,J_:!0});return lp(l,ee)}(yield yl(i),i.asyncQueue,e,n,o)})),o.promise}function Iy(i,e,n={}){const o=new is;return i.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(l,g,S,N,U){const H=new Ip({next:pe=>{g.enqueueAndForget(()=>am(l,ee)),pe.fromCache&&"server"===N.source?U.reject(new et(ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):U.resolve(pe)},error:pe=>U.reject(pe)}),ee=new wc(S,H,{includeMetadataChanges:!0,J_:!0});return lp(l,ee)}(yield yl(i),i.asyncQueue,e,n,o)})),o.promise}function _E(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const Dy=new Map;function Rp(i,e,n){if(!n)throw new et(ke.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Nm(i,e,n,o){if(!0===e&&!0===o)throw new et(ke.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Ay(i){if(!bt.isDocumentKey(i))throw new et(ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Cy(i){if(bt.isDocumentKey(i))throw new et(ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function $h(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(o=i).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof i?"a function":Ut()}function er(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new et(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$h(i);throw new et(ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function vd(i,e){if(e<=0)throw new et(ke.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Sy{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new et(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new et(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Nm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=_E(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(l){if(void 0!==l.timeoutSeconds){if(isNaN(l.timeoutSeconds))throw new et(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new et(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new et(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ed{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new et(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new et(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sy(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new Yu;switch(o.type){case"firstParty":return new Es(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new et(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=Dy.get(n);o&&(Ke("ComponentProvider","Removing Datastore"),Dy.delete(n),o.terminate())}(this),Promise.resolve()}}class Eo{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Eo(this.firestore,e,this._query)}}class Mi{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mi(this.firestore,e,this._key)}}class sa extends Eo{constructor(e,n,o){super(e,n,Lu(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mi(this.firestore,null,new bt(e))}withConverter(e){return new sa(this.firestore,e,this._path)}}function by(i,e,...n){if(i=(0,Ve.m9)(i),Rp("collection","path",e),i instanceof Ed){const o=$n.fromString(e,...n);return Cy(o),new sa(i,null,o)}{if(!(i instanceof Mi||i instanceof sa))throw new et(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child($n.fromString(e,...n));return Cy(o),new sa(i.firestore,null,o)}}function Pp(i,e,...n){if(i=(0,Ve.m9)(i),1===arguments.length&&(e=ci.newId()),Rp("doc","path",e),i instanceof Ed){const o=$n.fromString(e,...n);return Ay(o),new Mi(i,null,new bt(o))}{if(!(i instanceof Mi||i instanceof sa))throw new et(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child($n.fromString(e,...n));return Ay(o),new Mi(i.firestore,i instanceof sa?i.converter:null,new bt(o))}}function Ry(i,e){return i=(0,Ve.m9)(i),e=(0,Ve.m9)(e),(i instanceof Mi||i instanceof sa)&&(e instanceof Mi||e instanceof sa)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Om(i,e){return i=(0,Ve.m9)(i),e=(0,Ve.m9)(e),i instanceof Eo&&e instanceof Eo&&i.firestore===e.firestore&&cc(i._query,e._query)&&i.converter===e.converter}class vE{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Sh(this,"async_queue_retry"),this.iu=()=>{const n=ip();n&&Ke("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=ip();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=ip();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new is;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,Te.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!b(n))throw n;Ke("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(o=>{throw this.eu=o,this.tu=!1,yr("INTERNAL UNHANDLED ERROR: ",function(g){let S=g.message||"";return g.stack&&(S=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),S}(o)),o}).then(o=>(this.tu=!1,o))));return this.Ja=n,n}enqueueAfterDelay(e,n,o){this.su(),this.ru.indexOf(e)>-1&&(n=0);const u=im.createAndSchedule(this,e,n,o,l=>this.au(l));return this.Xa.push(u),u}su(){this.eu&&Ut()}verifyOperationInProgress(){}uu(){var e=this;return(0,Te.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function km(i){return function(n,o){if("object"!=typeof n||null===n)return!1;const u=n;for(const l of["next","error","complete"])if(l in u&&"function"==typeof u[l])return!0;return!1}(i)}class EE{constructor(){this._progressObserver={},this._taskCompletionResolver=new is,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class di extends Ed{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new vE,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||My(this),this._firestoreClient.terminate()}}function ss(i){return i._firestoreClient||My(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function My(i){var e,n,o;const u=i._freezeSettings(),l=(N=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new xu(i._databaseId,N,i._persistenceKey,(H=u).host,H.ssl,H.experimentalForceLongPolling,H.experimentalAutoDetectLongPolling,_E(H.experimentalLongPollingOptions),H.useFetchStreams));var N,H;i._firestoreClient=new fE(i._authCredentials,i._appCheckCredentials,i._queue,l),null!==(n=u.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Ny(i,e,n){const o=new is;return i.asyncQueue.enqueue((0,Te.Z)(function*(){try{yield Tp(i,n),yield ka(i,e),o.resolve()}catch(u){const l=u;if(!vy(l))throw l;pn("Error enabling indexeddb cache. Falling back to memory cache: "+l),o.reject(l)}})).then(()=>o.promise)}function Fm(i){if(i._initialized||i._terminated)throw new et(ke.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Au{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Au(Bi.fromBase64String(e))}catch(n){throw new et(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Au(Bi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wu{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new et(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vl{constructor(e){this._methodName=e}}class ya{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new et(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new et(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return vn(this._lat,e._lat)||vn(this._long,e._long)}}const Hh=/^__.*__$/;class Lo{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new Zo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ya(e,this.data,n,this.fieldTransforms)}}class Cc{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new Zo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zh(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ut()}}class Yo{constructor(e,n,o,u,l,g){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===l&&this.Pu(),this.fieldTransforms=l||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Yo(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Au(e),u}Ru(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Pu(),u}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Ad(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(zh(this.Iu)&&Hh.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class Vm{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||dd(e)}pu(e,n,o,u=!1){return new Yo({Iu:e,methodName:n,gu:o,path:jr.emptyPath(),du:!1,fu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function La(i){const e=i._freezeSettings(),n=dd(i._databaseId);return new Vm(i._databaseId,!!e.ignoreUndefinedProperties,n)}function qu(i,e,n,o,u,l={}){const g=i.pu(l.merge||l.mergeFields?2:0,e,n,u);Op("Data must be an object, but it was:",g,o);const S=Bm(o,g);let N,U;if(l.merge)N=new fo(g.fieldMask),U=g.fieldTransforms;else if(l.mergeFields){const H=[];for(const ee of l.mergeFields){const pe=Dd(e,ee,n);if(!g.contains(pe))throw new et(ke.INVALID_ARGUMENT,`Field '${pe}' is specified in your field mask but missing from your input data.`);Vy(H,pe)||H.push(pe)}N=new fo(H),U=g.fieldTransforms.filter(ee=>N.covers(ee.field))}else N=null,U=g.fieldTransforms;return new Lo(new Ps(S),N,U)}class Cu extends vl{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cu}}function El(i,e,n){return new Yo({Iu:3,gu:e.settings.gu,methodName:i._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Sc extends vl{_toFieldTransform(e){return new dc(e.path,new pa)}isEqual(e){return e instanceof Sc}}class Id extends vl{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=El(this,e,!0),o=this.yu.map(l=>Rc(l,n)),u=new na(o);return new dc(e.path,u)}isEqual(e){return this===e}}class Td extends vl{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=El(this,e,!0),o=this.yu.map(l=>Rc(l,n)),u=new ga(o);return new dc(e.path,u)}isEqual(e){return this===e}}class wd extends vl{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new Za(e.serializer,Jc(e.serializer,this.wu));return new dc(e.path,n)}isEqual(e){return this===e}}function bc(i,e,n,o){const u=i.pu(1,e,n);Op("Data must be an object, but it was:",u,o);const l=[],g=Ps.empty();hu(o,(N,U)=>{const H=Gh(e,N,n);U=(0,Ve.m9)(U);const ee=u.Ru(H);if(U instanceof Cu)l.push(H);else{const pe=Rc(U,ee);null!=pe&&(l.push(H),g.set(H,pe))}});const S=new fo(l);return new Cc(g,S,u.fieldTransforms)}function xp(i,e,n,o,u,l){const g=i.pu(1,e,n),S=[Dd(e,o,n)],N=[u];if(l.length%2!=0)throw new et(ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let pe=0;pe<l.length;pe+=2)S.push(Dd(e,l[pe])),N.push(l[pe+1]);const U=[],H=Ps.empty();for(let pe=S.length-1;pe>=0;--pe)if(!Vy(U,S[pe])){const Oe=S[pe];let gt=N[pe];gt=(0,Ve.m9)(gt);const Tt=g.Ru(Oe);if(gt instanceof Cu)U.push(Oe);else{const At=Rc(gt,Tt);null!=At&&(U.push(Oe),H.set(Oe,At))}}const ee=new fo(U);return new Cc(H,ee,g.fieldTransforms)}function Um(i,e,n,o=!1){return Rc(n,i.pu(o?4:3,e))}function Rc(i,e){if(jm(i=(0,Ve.m9)(i)))return Op("Unsupported field value:",e,i),Bm(i,e);if(i instanceof vl)return function(o,u){if(!zh(u.Iu))throw u.mu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.mu(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(u);l&&u.fieldTransforms.push(l)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(o,u){const l=[];let g=0;for(const S of o){let N=Rc(S,u.Vu(g));null==N&&(N={nullValue:"NULL_VALUE"}),l.push(N),g++}return{arrayValue:{values:l}}}(i,e)}return function(o,u){if(null===(o=(0,Ve.m9)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return Jc(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const l=vr.fromDate(o);return{timestampValue:br(u.serializer,l)}}if(o instanceof vr){const l=new vr(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:br(u.serializer,l)}}if(o instanceof ya)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Au)return{bytesValue:ia(u.serializer,o._byteString)};if(o instanceof Mi){const l=u.databaseId,g=o.firestore._databaseId;if(!g.isEqual(l))throw u.mu(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:pc(o.firestore._databaseId||u.databaseId,o._key.path)}}throw u.mu(`Unsupported field value: ${$h(o)}`)}(i,e)}function Bm(i,e){const n={};return ca(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hu(i,(o,u)=>{const l=Rc(u,e.Eu(o));null!=l&&(n[o]=l)}),{mapValue:{fields:n}}}function jm(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof vr||i instanceof ya||i instanceof Au||i instanceof Mi||i instanceof vl)}function Op(i,e,n){if(!jm(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=$h(n);throw e.mu("an object"===o?i+" a custom object":i+" "+o)}var u}function Dd(i,e,n){if((e=(0,Ve.m9)(e))instanceof Wu)return e._internalPath;if("string"==typeof e)return Gh(i,e);throw Ad("Field path arguments must be of type string or ",i,!1,void 0,n)}const Fy=new RegExp("[~\\*/\\[\\]]");function Gh(i,e,n){if(e.search(Fy)>=0)throw Ad(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Wu(...e.split("."))._internalPath}catch{throw Ad(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Ad(i,e,n,o,u){const l=o&&!o.isEmpty(),g=void 0!==u;let S=`Function ${e}() called with invalid data`;n&&(S+=" (via `toFirestore()`)"),S+=". ";let N="";return(l||g)&&(N+=" (found",l&&(N+=` in field ${o}`),g&&(N+=` in document ${u}`),N+=")"),new et(ke.INVALID_ARGUMENT,S+i+N)}function Vy(i,e){return i.some(n=>n.isEqual(e))}class kp{constructor(e,n,o,u,l){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Mi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ZI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class ZI extends kp{data(){return super.data()}}function Lp(i,e){return"string"==typeof e?Gh(i,e):e instanceof Wu?e._internalPath:e._delegate._internalPath}function Uy(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new et(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class By{}class Wh extends By{}function Il(i,e,...n){let o=[];e instanceof By&&o.push(e),o=o.concat(n),function(l){const g=l.filter(N=>N instanceof Cd).length,S=l.filter(N=>N instanceof qh).length;if(g>1||g>0&&S>0)throw new et(ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class qh extends Wh{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new qh(e,n,o)}_apply(e){const n=this._parse(e);return RE(e._query,n),new Eo(e.firestore,e.converter,uc(e._query,n))}_parse(e){const n=La(e.firestore);return function(l,g,S,N,U,H,ee){let pe;if(U.isKeyField()){if("array-contains"===H||"array-contains-any"===H)throw new et(ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${H}' queries on documentId().`);if("in"===H||"not-in"===H){Xh(ee,H);const Oe=[];for(const gt of ee)Oe.push(Jh(N,l,gt));pe={arrayValue:{values:Oe}}}else pe=Jh(N,l,ee)}else"in"!==H&&"not-in"!==H&&"array-contains-any"!==H||Xh(ee,H),pe=Um(S,"where",ee,"in"===H||"not-in"===H);return Hn.create(U,H,pe)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Cd extends By{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Cd(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:gr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,l){let g=u;const S=l.getFlattenedFilters();for(const N of S)RE(g,N),g=uc(g,N)}(e._query,n),new Eo(e.firestore,e.converter,uc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Kh extends Wh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Kh(e,n)}_apply(e){const n=function(u,l,g){if(null!==u.startAt)throw new et(ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new et(ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qs(l,g)}(e._query,this._field,this._direction);return new Eo(e.firestore,e.converter,function(u,l){const g=u.explicitOrderBy.concat([l]);return new ta(u.path,u.collectionGroup,g,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}class Zh extends Wh{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new Zh(e,n,o)}_apply(e){return new Eo(e.firestore,e.converter,Ul(e._query,this._limit,this._limitType))}}class Up extends Wh{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new Up(e,n,o)}_apply(e){const n=jp(e,this.type,this._docOrFields,this._inclusive);return new Eo(e.firestore,e.converter,(l=n,new ta((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,l,u.endAt)));var u,l}}class Bp extends Wh{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new Bp(e,n,o)}_apply(e){const n=jp(e,this.type,this._docOrFields,this._inclusive);return new Eo(e.firestore,e.converter,(l=n,new ta((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,l)));var u,l}}function jp(i,e,n,o){if(n[0]=(0,Ve.m9)(n[0]),n[0]instanceof kp)return function(l,g,S,N,U){if(!N)throw new et(ke.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${S}().`);const H=[];for(const ee of Ys(l))if(ee.field.isKeyField())H.push(pu(g,N.key));else{const pe=N.data.field(ee.field);if(Nl(pe))throw new et(ke.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ee.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===pe){const Oe=ee.field.canonicalString();throw new et(ke.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Oe}' (used as the orderBy) does not exist.`)}H.push(pe)}return new gu(H,U)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=La(i.firestore);return function(g,S,N,U,H,ee){const pe=g.explicitOrderBy;if(H.length>pe.length)throw new et(ke.INVALID_ARGUMENT,`Too many arguments provided to ${U}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Oe=[];for(let gt=0;gt<H.length;gt++){const Tt=H[gt];if(pe[gt].field.isKeyField()){if("string"!=typeof Tt)throw new et(ke.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${U}(), but got a ${typeof Tt}`);if(!Fu(g)&&-1!==Tt.indexOf("/"))throw new et(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${U}() must be a plain document ID, but '${Tt}' contains a slash.`);const At=g.path.child($n.fromString(Tt));if(!bt.isDocumentKey(At))throw new et(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${U}() must result in a valid document path, but '${At}' is not because it contains an odd number of segments.`);const hn=new bt(At);Oe.push(pu(S,hn))}else{const At=Um(N,U,Tt);Oe.push(At)}}return new gu(Oe,ee)}(i._query,i.firestore._databaseId,u,e,n,o)}}function Jh(i,e,n){if("string"==typeof(n=(0,Ve.m9)(n))){if(""===n)throw new et(ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fu(e)&&-1!==n.indexOf("/"))throw new et(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child($n.fromString(n));if(!bt.isDocumentKey(o))throw new et(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return pu(i,new bt(o))}if(n instanceof Mi)return pu(i,n._key);throw new et(ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$h(n)}.`)}function Xh(i,e){if(!Array.isArray(i)||0===i.length)throw new et(ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RE(i,e){const n=function(u,l){for(const g of u)for(const S of g.getFlattenedFilters())if(l.indexOf(S.op)>=0)return S.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new et(ke.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $m{convertValue(e,n="none"){switch(da(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(po(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ut()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return hu(e,(u,l)=>{o[u]=this.convertValue(l,n)}),o}convertGeoPoint(e){return new ya(Gr(e.latitude),Gr(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Nu(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(nc(e));default:return null}}convertTimestamp(e){const n=fu(e);return new vr(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=$n.fromString(e);St(vg(o));const u=new la(o.get(1),o.get(3)),l=new bt(o.popFirst(5));return u.isEqual(n)||yr(`Document ${l} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}function Sd(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class PE extends $m{constructor(e){super(),this.firestore=e}convertBytes(e){return new Au(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mi(this.firestore,null,n)}}class Pc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ku extends kp{constructor(e,n,o,u,l,g){super(e,n,o,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ef(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(Lp("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class ef extends Ku{data(e={}){return super.data(e)}}class Mc{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new Pc(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new ef(this._firestore,this._userDataWriter,o.key,o,new Pc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new et(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,l){if(u._snapshot.oldDocs.isEmpty()){let g=0;return u._snapshot.docChanges.map(S=>({type:"added",doc:new ef(u._firestore,u._userDataWriter,S.doc.key,S.doc,new Pc(u._snapshot.mutatedKeys.has(S.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:g++}))}{let g=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(S=>l||3!==S.type).map(S=>{const N=new ef(u._firestore,u._userDataWriter,S.doc.key,S.doc,new Pc(u._snapshot.mutatedKeys.has(S.doc.key),u._snapshot.fromCache),u.query.converter);let U=-1,H=-1;return 0!==S.type&&(U=g.indexOf(S.doc.key),g=g.delete(S.doc.key)),1!==S.type&&(g=g.add(S.doc),H=g.indexOf(S.doc.key)),{type:zy(S.type),doc:N,oldIndex:U,newIndex:H}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function zy(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ut()}}function $p(i,e){return i instanceof Ku&&e instanceof Ku?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Mc&&e instanceof Mc&&i._firestore===e._firestore&&Om(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Nc extends $m{constructor(e){super(),this.firestore=e}convertBytes(e){return new Au(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mi(this.firestore,null,n)}}function Wy(i,e,n){i=er(i,Mi);const o=er(i.firestore,di),u=Sd(i.converter,e,n);return bd(o,[qu(La(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,li.none())])}function qy(i,e,n,...o){i=er(i,Mi);const u=er(i.firestore,di),l=La(u);let g;return g="string"==typeof(e=(0,Ve.m9)(e))||e instanceof Wu?xp(l,"updateDoc",i._key,e,n,o):bc(l,"updateDoc",i._key,e),bd(u,[g.toMutation(i._key,li.exists(!0))])}function qm(i,...e){var n,o,u;i=(0,Ve.m9)(i);let l={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||km(e[g])||(l=e[g],g++);const S={includeMetadataChanges:l.includeMetadataChanges};if(km(e[g])){const ee=e[g];e[g]=null===(n=ee.next)||void 0===n?void 0:n.bind(ee),e[g+1]=null===(o=ee.error)||void 0===o?void 0:o.bind(ee),e[g+2]=null===(u=ee.complete)||void 0===u?void 0:u.bind(ee)}let N,U,H;if(i instanceof Mi)U=er(i.firestore,di),H=Lu(i._key.path),N={next:ee=>{e[g]&&e[g](Km(U,i,ee))},error:e[g+1],complete:e[g+2]};else{const ee=er(i,Eo);U=er(ee.firestore,di),H=ee._query;const pe=new Nc(U);N={next:Oe=>{e[g]&&e[g](new Mc(U,pe,ee,Oe))},error:e[g+1],complete:e[g+2]},Uy(i._query)}return function(pe,Oe,gt,Tt){const At=new Ip(Tt),hn=new wc(Oe,At,gt);return pe.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return lp(yield yl(pe),hn)})),()=>{At.Na(),pe.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return am(yield yl(pe),hn)}))}}(ss(U),H,S,N)}function bd(i,e){return function(o,u){const l=new is;return o.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function GI(i,e,n){return cy.apply(this,arguments)}(yield Ap(o),u,l)})),l.promise}(ss(i),e)}function Km(i,e,n){const o=n.docs.get(e._key),u=new Nc(i);return new Ku(i,u,e._key,o,new Pc(n.hasPendingWrites,n.fromCache),e.converter)}const Ym={maxAttempts:5};class Jm{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=La(e)}set(e,n,o){this._verifyNotCommitted();const u=Zu(e,this._firestore),l=Sd(u.converter,n,o),g=qu(this._dataReader,"WriteBatch.set",u._key,l,null!==u.converter,o);return this._mutations.push(g.toMutation(u._key,li.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const l=Zu(e,this._firestore);let g;return g="string"==typeof(n=(0,Ve.m9)(n))||n instanceof Wu?xp(this._dataReader,"WriteBatch.update",l._key,n,o,u):bc(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(g.toMutation(l._key,li.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Zu(e,this._firestore);return this._mutations=this._mutations.concat(new xo(n._key,li.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new et(ke.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zu(i,e){if((i=(0,Ve.m9)(i)).firestore!==e)throw new et(ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Yy extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=La(n)}get(n){const o=Zu(n,this._firestore),u=new PE(this._firestore);return this._transaction.lookup([o._key]).then(l=>{if(!l||1!==l.length)return Ut();const g=l[0];if(g.isFoundDocument())return new kp(this._firestore,u,g.key,g,o.converter);if(g.isNoDocument())return new kp(this._firestore,u,o._key,null,o.converter);throw Ut()})}set(n,o,u){const l=Zu(n,this._firestore),g=Sd(l.converter,o,u),S=qu(this._dataReader,"Transaction.set",l._key,g,null!==l.converter,u);return this._transaction.set(l._key,S),this}update(n,o,u,...l){const g=Zu(n,this._firestore);let S;return S="string"==typeof(o=(0,Ve.m9)(o))||o instanceof Wu?xp(this._dataReader,"Transaction.update",g._key,o,u,l):bc(this._dataReader,"Transaction.update",g._key,o),this._transaction.update(g._key,S),this}delete(n){const o=Zu(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Zu(e,this._firestore),o=new Nc(this._firestore);return super.get(e).then(u=>new Ku(this._firestore,o,n._key,u._document,new Pc(!1,!1),n.converter))}}function Wp(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new et("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function ov(){if(typeof Uint8Array>"u")throw new et("unimplemented","Uint8Arrays are not available in this environment.")}function av(){if(!function mf(){return typeof atob<"u"}())throw new et("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Jt=we.SDK_VERSION,(0,we._registerComponent)(new je.wA("firestore",(o,{instanceIdentifier:u,options:l})=>{const g=o.getProvider("app").getImmediate(),S=new di(new Lc(o.getProvider("auth-internal")),new ff(o.getProvider("app-check-internal")),function(U,H){if(!Object.prototype.hasOwnProperty.apply(U.options,["projectId"]))throw new et(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new la(U.options.projectId,H)}(g,u),g);return l=Object.assign({useFetchStreams:n},l),S._setSettings(l),S},"PUBLIC").setMultipleInstances(!0)),(0,we.registerVersion)(zt,"4.3.2",e),(0,we.registerVersion)(zt,"4.3.2","esm2017")}();class Pd{constructor(e){this._delegate=e}static fromBase64String(e){return av(),new Pd(Au.fromBase64String(e))}static fromUint8Array(e){return ov(),new Pd(Au.fromUint8Array(e))}toBase64(){return av(),this._delegate.toBase64()}toUint8Array(){return ov(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function t_(i){return function uv(i,e){if("object"!=typeof i||null===i)return!1;const n=i;for(const o of e)if(o in n&&"function"==typeof n[o])return!0;return!1}(i,["next","error","complete"])}class cv{enableIndexedDbPersistence(e,n){return function IE(i,e){Fm(i=er(i,di));const n=ss(i);if(n._uninitializedComponentsProvider)throw new et(ke.FAILED_PRECONDITION,"SDK cache is already specified.");pn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),u=new _l;return Ny(n,u,new Am(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function TE(i){Fm(i=er(i,di));const e=ss(i);if(e._uninitializedComponentsProvider)throw new et(ke.FAILED_PRECONDITION,"SDK cache is already specified.");pn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),o=new _l;return Ny(e,o,new _y(o,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function wE(i){if(i._initialized&&!i._terminated)throw new et(ke.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new is;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{yield(n=(0,Te.Z)(function*(u){if(!Wo.D())return Promise.resolve();const l=u+"main";yield Wo.delete(l)}),function o(u){return n.apply(this,arguments)})(Ec(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class wl{constructor(e,n,o){this._delegate=n,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof la||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&pn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,o={}){!function xm(i,e,n,o={}){var u;const l=(i=er(i,Ed))._getSettings(),g=`${e}:${n}`;if("firestore.googleapis.com"!==l.host&&l.host!==g&&pn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},l),{host:g,ssl:!1})),o.mockUserToken){let S,N;if("string"==typeof o.mockUserToken)S=o.mockUserToken,N=Dt.MOCK_USER;else{S=(0,Ve.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const U=o.mockUserToken.sub||o.mockUserToken.user_id;if(!U)throw new et(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new Dt(U)}i._authCredentials=new uu(new Sl(S,N))}}(this._delegate,e,n,o)}enableNetwork(){return function xy(i){return function Pm(i){return i.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield Bh(i),n=yield pE(i);return e.setNetworkEnabled(!0),function(u){const l=ft(u);return l.C_.delete(0),Rh(l)}(n)}))}(ss(i=er(i,di)))}(this._delegate)}disableNetwork(){return function Oy(i){return function Gu(i){return i.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield Bh(i),n=yield pE(i);return e.setNetworkEnabled(!1),(o=(0,Te.Z)(function*(l){const g=ft(l);g.C_.add(0),yield Iu(g),g.M_.set("Offline")}),function u(l){return o.apply(this,arguments)})(n);var o}))}(ss(i=er(i,di)))}(this._delegate)}enablePersistence(e){let n=!1,o=!1;return e&&(n=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Nm("synchronizeTabs",n,"experimentalForceOwningTab",o)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function DE(i){return function(n){const o=new is;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function xn(i,e){return _p.apply(this,arguments)}(yield Ap(n),o)})),o.promise}(ss(i=er(i,di)))}(this._delegate)}onSnapshotsInSync(e){return function Ky(i,e){return function Ty(i,e){const n=new Ip(e);return i.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return u=yield yl(i),l=n,ft(u).q_.add(l),void l.next();var u,l})),()=>{n.Na(),i.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return u=yield yl(i),l=n,void ft(u).q_.delete(l);var u,l}))}}(ss(i=er(i,di)),km(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new et("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Dl(this,by(this._delegate,e))}catch(n){throw Fo(n,"collection()","Firestore.collection()")}}doc(e){try{return new nu(this,Pp(this._delegate,e))}catch(n){throw Fo(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $i(this,function yE(i,e){if(i=er(i,Ed),Rp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new et(ke.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Eo(i,null,(o=e,new ta($n.emptyPath(),o)));var o}(this._delegate,e))}catch(n){throw Fo(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Jy(i,e,n){i=er(i,di);const o=Object.assign(Object.assign({},Ym),n);return function(l){if(l.maxAttempts<1)throw new et(ke.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(l,g,S){const N=new is;return l.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){const U=yield function Rm(i){return Uh(i).then(e=>e.datastore)}(l);new hE(l.asyncQueue,U,S,g,N).run()})),N.promise}(ss(i),u=>e(new Yy(i,u)),o)}(this._delegate,n=>e(new n_(this,n)))}batch(){return ss(this._delegate),new lv(new Jm(this._delegate,e=>bd(this._delegate,e)))}loadBundle(e){return function KI(i,e){const n=ss(i=er(i,di)),o=new EE;return function mE(i,e,n,o){const u=function(g,S){let N;return N="string"==typeof g?Bu().encode(g):g,H=function(H,ee){if(H instanceof Uint8Array)return yy(H,void 0);if(H instanceof ArrayBuffer)return yy(new Uint8Array(H),void 0);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(N),new Cm(H,S);var H}(n,dd(e));i.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){!function Dm(i,e,n){const o=ft(i);var u;(u=(0,Te.Z)(function*(g,S,N){try{const U=yield S.getMetadata();if(yield function(gt,Tt){const At=ft(gt),hn=Di(Tt.createTime);return At.persistence.runTransaction("hasNewerBundle","readonly",In=>At.Kr.getBundleMetadata(In,Tt.id)).then(In=>!!In&&In.createTime.compareTo(hn)>=0)}(g.localStore,U))return yield S.close(),N._completeWith({taskState:"Success",documentsLoaded:(gt=U).totalDocuments,bytesLoaded:gt.totalBytes,totalDocuments:gt.totalDocuments,totalBytes:gt.totalBytes}),Promise.resolve(new Set);N._updateProgress(cm(U));const H=new oy(U,g.localStore,S.serializer);let ee=yield S.Ma();for(;ee;){const Oe=yield H.ea(ee);Oe&&N._updateProgress(Oe),ee=yield S.Ma()}const pe=yield H.complete();return yield ma(g,pe.ra,void 0),yield function(gt,Tt){const At=ft(gt);return At.persistence.runTransaction("Save bundle","readwrite",hn=>At.Kr.saveBundleMetadata(hn,Tt))}(g.localStore,U),N._completeWith(pe.progress),Promise.resolve(pe.na)}catch(U){return pn("SyncEngine",`Loading bundle failed with ${U}`),N._failWith(U),Promise.resolve(new Set)}var gt}),function l(g,S,N){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Ap(i),u,o)}))}(n,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function ky(i,e){return function Sp(i,e){return i.asyncQueue.enqueue((0,Te.Z)(function*(){return function(o,u){const l=ft(o);return l.persistence.runTransaction("Get named query","readonly",g=>l.Kr.getNamedQuery(g,u))}(yield Ac(i),e)}))}(ss(i=er(i,di)),e).then(n=>n?new Eo(i,null,n.query):null)}(this._delegate,e).then(n=>n?new $i(this,n):null)}}class qp extends $m{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pd(new Au(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return nu.forKey(n,this.firestore,null)}}class n_{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new qp(e)}get(e){const n=Oc(e);return this._delegate.get(n).then(o=>new nf(this._firestore,new Ku(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,n.converter)))}set(e,n,o){const u=Oc(e);return o?(Wp("Transaction.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const l=Oc(e);return 2===arguments.length?this._delegate.update(l,n):this._delegate.update(l,n,o,...u),this}delete(e){const n=Oc(e);return this._delegate.delete(n),this}}class lv{constructor(e){this._delegate=e}set(e,n,o){const u=Oc(e);return o?(Wp("WriteBatch.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const l=Oc(e);return 2===arguments.length?this._delegate.update(l,n):this._delegate.update(l,n,o,...u),this}delete(e){const n=Oc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class xc{constructor(e,n,o){this._firestore=e,this._userDataWriter=n,this._delegate=o}fromFirestore(e,n){const o=new ef(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new rf(this._firestore,o),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const o=xc.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let l=u.get(n);return l||(l=new xc(e,new qp(e),n),u.set(n,l)),l}}xc.INSTANCES=new WeakMap;class nu{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new qp(e)}static forPath(e,n,o){if(e.length%2!=0)throw new et("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new nu(n,new Mi(n._delegate,o,new bt(e)))}static forKey(e,n,o){return new nu(n,new Mi(n._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Dl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Dl(this.firestore,by(this._delegate,e))}catch(n){throw Fo(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ve.m9)(e))instanceof Mi&&Ry(this._delegate,e)}set(e,n){n=Wp("DocumentReference.set",n);try{return n?Wy(this._delegate,e,n):Wy(this._delegate,e)}catch(o){throw Fo(o,"setDoc()","DocumentReference.set()")}}update(e,n,...o){try{return 1===arguments.length?qy(this._delegate,e):qy(this._delegate,e,n,...o)}catch(u){throw Fo(u,"updateDoc()","DocumentReference.update()")}}delete(){return function Gm(i){return bd(er(i.firestore,di),[new xo(i._key,li.none())])}(this._delegate)}onSnapshot(...e){const n=r_(e),o=ru(e,u=>new nf(this.firestore,new Ku(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return qm(this._delegate,n,o)}get(e){let n;return n="cache"===e?.source?function Hp(i){i=er(i,Mi);const e=er(i.firestore,di),n=ss(e),o=new Nc(e);return function gE(i,e){const n=new is;return i.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(o=(0,Te.Z)(function*(l,g,S){try{const N=yield function(H,ee){const pe=ft(H);return pe.persistence.runTransaction("read document","readonly",Oe=>pe.localDocuments.getDocument(Oe,ee))}(l,g);N.isFoundDocument()?S.resolve(N):N.isNoDocument()?S.resolve(null):S.reject(new et(ke.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(N){const U=fd(N,`Failed to get document '${g} from cache`);S.reject(U)}}),function u(l,g,S){return o.apply(this,arguments)})(yield Ac(i),e,n);var o})),n.promise}(n,i._key).then(u=>new Ku(e,o,i._key,u,new Pc(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function zp(i){i=er(i,Mi);const e=er(i.firestore,di);return Ey(ss(e),i._key,{source:"server"}).then(n=>Km(e,i,n))}(this._delegate):function Hm(i){i=er(i,Mi);const e=er(i.firestore,di);return Ey(ss(e),i._key).then(n=>Km(e,i,n))}(this._delegate),n.then(o=>new nf(this.firestore,new Ku(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new nu(this.firestore,this._delegate.withConverter(e?xc.getInstance(this.firestore,e):null))}}function Fo(i,e,n){return i.message=i.message.replace(e,n),i}function r_(i){for(const e of i)if("object"==typeof e&&!t_(e))return e;return{}}function ru(i,e){var n,o;let u;return u=t_(i[0])?i[0]:t_(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:l=>{u.next&&u.next(e(l))},error:null===(n=u.error)||void 0===n?void 0:n.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class nf{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new nu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return $p(this._delegate,e._delegate)}}class rf extends nf{data(e){const n=this._delegate.data(e);return this._delegate._converter||function nn(i,e){i||Ut()}(void 0!==n),n}}class $i{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new qp(e)}where(e,n,o){try{return new $i(this.firestore,Il(this._delegate,function AE(i,e,n){const o=e,u=Lp("where",i);return qh._create(u,o,n)}(e,n,o)))}catch(u){throw Fo(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new $i(this.firestore,Il(this._delegate,function Vp(i,e="asc"){const n=e,o=Lp("orderBy",i);return Kh._create(o,n)}(e,n)))}catch(o){throw Fo(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $i(this.firestore,Il(this._delegate,function Qh(i){return vd("limit",i),Zh._create("limit",i,"F")}(e)))}catch(n){throw Fo(n,"limit()","Query.limit()")}}limitToLast(e){try{return new $i(this.firestore,Il(this._delegate,function $y(i){return vd("limitToLast",i),Zh._create("limitToLast",i,"L")}(e)))}catch(n){throw Fo(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $i(this.firestore,Il(this._delegate,function Yh(...i){return Up._create("startAt",i,!0)}(...e)))}catch(n){throw Fo(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $i(this.firestore,Il(this._delegate,function CE(...i){return Up._create("startAfter",i,!1)}(...e)))}catch(n){throw Fo(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $i(this.firestore,Il(this._delegate,function SE(...i){return Bp._create("endBefore",i,!1)}(...e)))}catch(n){throw Fo(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $i(this.firestore,Il(this._delegate,function bE(...i){return Bp._create("endAt",i,!0)}(...e)))}catch(n){throw Fo(n,"endAt()","Query.endAt()")}}isEqual(e){return Om(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function Gy(i){i=er(i,Eo);const e=er(i.firestore,di),n=ss(e),o=new Nc(e);return function Mm(i,e){const n=new is;return i.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(o=(0,Te.Z)(function*(l,g,S){try{const N=yield Zf(l,g,!0),U=new Oh(g,N.ls),H=U.ca(N.documents),ee=U.applyChanges(H,!1);S.resolve(ee.snapshot)}catch(N){const U=fd(N,`Failed to execute query '${g} against cache`);S.reject(U)}}),function u(l,g,S){return o.apply(this,arguments)})(yield Ac(i),e,n);var o})),n.promise}(n,i._query).then(u=>new Mc(e,o,i,u))}(this._delegate):"server"===e?.source?function kE(i){i=er(i,Eo);const e=er(i.firestore,di),n=ss(e),o=new Nc(e);return Iy(n,i._query,{source:"server"}).then(u=>new Mc(e,o,i,u))}(this._delegate):function zm(i){i=er(i,Eo);const e=er(i.firestore,di),n=ss(e),o=new Nc(e);return Uy(i._query),Iy(n,i._query).then(u=>new Mc(e,o,i,u))}(this._delegate),n.then(o=>new va(this.firestore,new Mc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const n=r_(e),o=ru(e,u=>new va(this.firestore,new Mc(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return qm(this._delegate,n,o)}withConverter(e){return new $i(this.firestore,this._delegate.withConverter(e?xc.getInstance(this.firestore,e):null))}}class iu{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new rf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class va{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new $i(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new rf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new iu(this._firestore,n))}forEach(e,n){this._delegate.forEach(o=>{e.call(n,new rf(this._firestore,o))})}isEqual(e){return $p(this._delegate,e._delegate)}}class Dl extends $i{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new nu(this.firestore,e):null}doc(e){try{return new nu(this.firestore,void 0===e?Pp(this._delegate):Pp(this._delegate,e))}catch(n){throw Fo(n,"doc()","CollectionReference.doc()")}}add(e){return function Wm(i,e){const n=er(i.firestore,di),o=Pp(i),u=Sd(i.converter,e);return bd(n,[qu(La(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,li.exists(!1))]).then(()=>o)}(this._delegate,e).then(n=>new nu(this.firestore,n))}isEqual(e){return Ry(this._delegate,e._delegate)}withConverter(e){return new Dl(this.firestore,this._delegate.withConverter(e?xc.getInstance(this.firestore,e):null))}}function Oc(i){return er(i,Mi)}class i_{constructor(...e){this._delegate=new Wu(...e)}static documentId(){return new i_(jr.keyField().canonicalString())}isEqual(e){return(e=(0,Ve.m9)(e))instanceof Wu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Al{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ev(){return new Sc("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Al(e)}static delete(){const e=function Xy(){return new Cu("deleteField")}();return e._methodName="FieldValue.delete",new Al(e)}static arrayUnion(...e){const n=function tv(...i){return new Id("arrayUnion",i)}(...e);return n._methodName="FieldValue.arrayUnion",new Al(n)}static arrayRemove(...e){const n=function nv(...i){return new Td("arrayRemove",i)}(...e);return n._methodName="FieldValue.arrayRemove",new Al(n)}static increment(e){const n=function Gp(i){return new wd("increment",i)}(e);return n._methodName="FieldValue.increment",new Al(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const QE={Firestore:wl,GeoPoint:ya,Timestamp:vr,Blob:Pd,Transaction:n_,WriteBatch:lv,DocumentReference:nu,DocumentSnapshot:nf,Query:$i,QueryDocumentSnapshot:rf,QuerySnapshot:va,CollectionReference:Dl,FieldPath:i_,FieldValue:Al,setLogLevel:function ZE(i){!function Zi(i){mn.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function s_(i){(function YE(i,e){i.INTERNAL.registerComponent(new je.wA("firestore-compat",n=>{const o=n.getProvider("app-compat").getImmediate(),u=n.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},QE)))})(i,(e,n)=>new wl(e,n,new cv)),i.registerVersion("@firebase/firestore-compat","0.3.22")}(Lt.Z);var sf=$(7142);function o_(i,e){return function JE(i,e=me.z){return new Ce.y(n=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},n)}):o=i.onSnapshot({includeMetadataChanges:!0},n),()=>{o?.()}})}(i,e)}function a_(i,e){return o_(i,e).pipe((0,ze.U)(n=>({payload:n,type:"query"})))}class u_{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const o=this.ref.collection(e),{ref:u,query:l}=l_(o,n);return new hv(u,l,this.afs)}snapshotChanges(){return function XE(i,e){return o_(i,e).pipe((0,re.O)(void 0),Qe(),(0,ze.U)(n=>{const[o,u]=n;return u.exists?o?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(x.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ze.U)(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return(0,He.D)(this.ref.get(e)).pipe(x.iC)}}function af(i,e){return a_(i,e).pipe((0,re.O)(void 0),Qe(),(0,ze.U)(n=>{const[o,u]=n,l=u.payload.docChanges(),g=l.map(S=>({type:S.type,payload:S}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((S,N)=>{const U=l.find(ee=>ee.doc.ref.isEqual(S.ref)),H=o?.payload.docs.find(ee=>ee.ref.isEqual(S.ref));U&&JSON.stringify(U.doc.metadata)===JSON.stringify(S.metadata)||!U&&H&&JSON.stringify(H.metadata)===JSON.stringify(S.metadata)||g.push({type:"modified",payload:{oldIndex:N,newIndex:N,type:"modified",doc:S}})}),g}))}function uf(i,e,n){return af(i,n).pipe((0,We.R)((o,u)=>function eI(i,e,n){return e.forEach(o=>{n.indexOf(o.type)>-1&&(i=function dv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Kp(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=i.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Kp(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Kp(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(l=>l.payload),e),[]),(0,Je.x)(),(0,ze.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function Kp(i,e,n,...o){const u=i.slice();return u.splice(e,n,...o),u}function c_(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class hv{ref;query;afs;constructor(e,n,o){this.ref=e,this.query=n,this.afs=o}stateChanges(e){let n=af(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,ze.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),n.pipe((0,re.O)(void 0),Qe(),(0,ht.h)(([o,u])=>u.length>0||!o),(0,ze.U)(([,o])=>o),x.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,We.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=c_(e);return uf(this.query,n,this.afs.schedulers.outsideAngular).pipe(x.iC)}valueChanges(e={}){return a_(this.query,this.afs.schedulers.outsideAngular).pipe((0,ze.U)(n=>n.payload.docs.map(o=>e.idField?{...o.data(),[e.idField]:o.id}:o.data())),x.iC)}get(e){return(0,He.D)(this.query.get(e)).pipe(x.iC)}add(e){return this.ref.add(e)}doc(e){return new u_(this.ref.doc(e),this.afs)}}class tI{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?af(this.query,this.afs.schedulers.outsideAngular).pipe((0,ze.U)(n=>n.filter(o=>e.indexOf(o.type)>-1)),(0,ht.h)(n=>n.length>0),x.iC):af(this.query,this.afs.schedulers.outsideAngular).pipe(x.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,We.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=c_(e);return uf(this.query,n,this.afs.schedulers.outsideAngular).pipe(x.iC)}valueChanges(e={}){return a_(this.query,this.afs.schedulers.outsideAngular).pipe((0,ze.U)(o=>o.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),x.iC)}get(e){return(0,He.D)(this.query.get(e)).pipe(x.iC)}}const Zp=new oe.OlP("angularfire2.enableFirestorePersistence"),cf=new oe.OlP("angularfire2.firestore.persistenceSettings"),fv=new oe.OlP("angularfire2.firestore.settings"),pv=new oe.OlP("angularfire2.firestore.use-emulator");function l_(i,e=(n=>n)){return{query:e(i),ref:i}}let d_=(()=>{class i{schedulers;firestore;persistenceEnabled$;constructor(n,o,u,l,g,S,N,U,H,ee,pe,Oe,gt,Tt,At,hn,In){this.schedulers=N;const cn=(0,Ie.on)(n,S,o),Gn=H;ee&&(0,ye.nw)(cn,S,pe,gt,Tt,At,Oe,hn),[this.firestore,this.persistenceEnabled$]=(0,Ie.cc)(`${cn.name}.firestore`,"AngularFirestore",cn.name,()=>{const Er=S.runOutsideAngular(()=>cn.firestore());if(l&&Er.settings(l),Gn&&Er.useEmulator(...Gn),u&&!(0,D.PM)(g)){const wr=()=>{try{return(0,He.D)(Er.enablePersistence(U||void 0).then(()=>!0,()=>!1))}catch(ds){return typeof console<"u"&&console.warn(ds),(0,Ne.of)(!1)}};return[Er,S.runOutsideAngular(wr)]}return[Er,(0,Ne.of)(!1)]},[l,Gn,u])}collection(n,o){let u;u="string"==typeof n?this.firestore.collection(n):n;const{ref:l,query:g}=l_(u,o),S=this.schedulers.ngZone.run(()=>l);return new hv(S,g,this)}collectionGroup(n,o){const u=o||(g=>g),l=this.firestore.collectionGroup(n);return new tI(u(l),this)}doc(n){let o;o="string"==typeof n?this.firestore.doc(n):n;const u=this.schedulers.ngZone.run(()=>o);return new u_(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||i)(oe.LFG(Ie.Dh),oe.LFG(Ie.xv,8),oe.LFG(Zp,8),oe.LFG(fv,8),oe.LFG(oe.Lbi),oe.LFG(oe.R0b),oe.LFG(x.HU),oe.LFG(cf,8),oe.LFG(pv,8),oe.LFG(ye.zQ,8),oe.LFG(ye.Qv,8),oe.LFG(ye.L6,8),oe.LFG(ye._Q,8),oe.LFG(ye.rT,8),oe.LFG(ye.lh,8),oe.LFG(ye.f7,8),oe.LFG(x.Rf,8))};static \u0275prov=oe.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})(),gv=(()=>{class i{constructor(){sf.Z.registerVersion("angularfire",x.q4.full,"fst-compat")}static enablePersistence(n){return{ngModule:i,providers:[{provide:Zp,useValue:!0},{provide:cf,useValue:n}]}}static \u0275fac=function(o){return new(o||i)};static \u0275mod=oe.oAB({type:i});static \u0275inj=oe.cJS({providers:[d_]})}return i})()},7217:(Ht,Fe,$)=>{$.d(Fe,{Dh:()=>He,GT:()=>me,cc:()=>ze,hO:()=>Qe,on:()=>re,pX:()=>ye,xv:()=>Ne});var D=$(5879),oe=$(8326),x=$(7142);const Ie=["ngOnDestroy"],ye=(at,Lt,Te,we={})=>new Proxy(at,{get:(je,De)=>Te.runOutsideAngular(()=>{if(at[De])return we?.spy?.get&&we.spy.get(De,at[De]),at[De];if(Ie.indexOf(De)>-1)return()=>{};const Ve=Lt.toPromise().then(Ye=>{const ot=Ye?.[De];return"function"==typeof ot?ot.bind(Ye):ot?.then?ot.then(ae=>Te.run(()=>ae)):Te.run(()=>ot)});return new Proxy(()=>{},{get:(Ye,ot)=>Ve[ot],apply:(Ye,ot,ae)=>Ve.then(Zt=>{const ct=Zt?.(...ae);return we?.spy?.apply&&we.spy.apply(De,ae,ct),ct})})})}),me=(at,Lt)=>{Lt.forEach(Te=>{Object.getOwnPropertyNames(Te.prototype||Te).forEach(we=>{Object.defineProperty(at.prototype,we,Object.getOwnPropertyDescriptor(Te.prototype||Te,we))})})};class Ce{constructor(Lt){return Lt}}const He=new D.OlP("angularfire2.app.options"),Ne=new D.OlP("angularfire2.app.name");function re(at,Lt,Te){const je="object"==typeof Te&&Te||{};je.name=je.name||"string"==typeof Te&&Te||"[DEFAULT]";const Ve=x.Z.apps.filter(Ye=>Ye&&Ye.name===je.name)[0]||Lt.runOutsideAngular(()=>x.Z.initializeApp(at,je));try{if(JSON.stringify(at)!==JSON.stringify(Ve.options)){const Ye=!!module.hot;ie("error",`${Ve.name} Firebase App already initialized with different options${Ye?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Ce(Ve)}const ie=(at,...Lt)=>{(0,D.X6Q)()&&typeof console<"u"&&console[at](...Lt)},ge={provide:Ce,useFactory:re,deps:[He,D.R0b,[new D.FiY,Ne]]};let Qe=(()=>{class at{static initializeApp(Te,we){return{ngModule:at,providers:[{provide:He,useValue:Te},{provide:Ne,useValue:we}]}}constructor(Te){x.Z.registerVersion("angularfire",oe.q4.full,"core"),x.Z.registerVersion("angularfire",oe.q4.full,"app-compat"),x.Z.registerVersion("angular",D.q4F.full,Te.toString())}static \u0275fac=function(we){return new(we||at)(D.LFG(D.Lbi))};static \u0275mod=D.oAB({type:at});static \u0275inj=D.cJS({providers:[ge]})}return at})();function ze(at,Lt,Te,we,je){const[,De,Ve]=globalThis.\u0275AngularfireInstanceCache.find(Ye=>Ye[0]===at)||[];if(De)return function We(at,Lt){try{return at.toString()===Lt.toString()}catch{return at===Lt}}(je,Ve)||(ht("error",`${Lt} was already initialized on the ${Te} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),ht("warn",{is:je,was:Ve})),De;{const Ye=we();return globalThis.\u0275AngularfireInstanceCache.push([at,Ye,je]),Ye}}const Je=typeof module<"u"&&!!module.hot,ht=(at,...Lt)=>{(0,D.X6Q)()&&typeof console<"u"&&console[at](...Lt)};globalThis.\u0275AngularfireInstanceCache||=[]},8326:(Ht,Fe,$)=>{$.d(Fe,{q4:()=>We,iC:()=>nr,fc:()=>Zt,HU:()=>Ve,Rf:()=>Lt});var D=$(5879),oe=$(534);(0,oe.registerVersion)("firebase","10.6.0","app");var ye=$(1954),Ce=$(2631);const Ne=new class He extends Ce.v{}(class me extends ye.o{constructor(Nt,he){super(Nt,he),this.scheduler=Nt,this.work=he}schedule(Nt,he=0){return he>0?super.schedule(Nt,he):(this.delay=he,this.state=Nt,this.scheduler.flush(this),this)}execute(Nt,he){return he>0||this.closed?super.execute(Nt,he):this._execute(Nt,he)}requestAsyncId(Nt,he,de=0){return null!=de&&de>0||null==de&&this.delay>0?super.requestAsyncId(Nt,he,de):(Nt.flush(this),0)}});var ie=$(6321),ge=$(9397),Qe=$(3093),ze=$(5137);const We=new D.GfV("ANGULARFIRE2_VERSION");class Lt{constructor(){return((It,Nt)=>{const he=(0,oe.getApps)(),de=[];return he.forEach(ve=>{ve.container.getProvider(It).instances.forEach(be=>{de.includes(be)||de.push(be)})}),de})(Te)}}const Te="app-check";function we(){}class je{zone;delegate;constructor(Nt,he=Ne){this.zone=Nt,this.delegate=he}now(){return this.delegate.now()}schedule(Nt,he,de){const ve=this.zone;return this.delegate.schedule(function(be){ve.runGuarded(()=>{Nt.apply(this,[be])})},he,de)}}class De{zone;task=null;constructor(Nt){this.zone=Nt}call(Nt,he){const de=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",we,{},we,we)),he.pipe((0,ge.b)({next:de,complete:de,error:de})).subscribe(Nt).add(de)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ve=(()=>{class It{ngZone;outsideAngular;insideAngular;constructor(he){this.ngZone=he,this.outsideAngular=he.runOutsideAngular(()=>new je(Zone.current)),this.insideAngular=he.run(()=>new je(Zone.current,ie.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(de){return new(de||It)(D.LFG(D.R0b))};static \u0275prov=D.Yz7({token:It,factory:It.\u0275fac,providedIn:"root"})}return It})();function Ye(){const It=globalThis.\u0275AngularFireScheduler;if(!It)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return It}function Zt(It){return It.pipe((0,Qe.Q)(Ye().outsideAngular))}function nr(It){return function Cn(It){return function(he){return(he=he.lift(new De(It.ngZone))).pipe((0,ze.R)(It.outsideAngular),(0,Qe.Q)(It.insideAngular))}}(Ye())(It)}},6593:(Ht,Fe,$)=>{$.d(Fe,{Dx:()=>Wr,b2:()=>Bn,q6:()=>Yt,se:()=>ot});var D=$(5879),oe=$(6814);class x extends oe.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ie extends x{static makeCurrent(){(0,oe.HT)(new Ie)}onAndCancel(Y,Z,K){return Y.addEventListener(Z,K),()=>{Y.removeEventListener(Z,K)}}dispatchEvent(Y,Z){Y.dispatchEvent(Z)}remove(Y){Y.parentNode&&Y.parentNode.removeChild(Y)}createElement(Y,Z){return(Z=Z||this.getDefaultDocument()).createElement(Y)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Y){return Y.nodeType===Node.ELEMENT_NODE}isShadowRoot(Y){return Y instanceof DocumentFragment}getGlobalEventTarget(Y,Z){return"window"===Z?window:"document"===Z?Y:"body"===Z?Y.body:null}getBaseHref(Y){const Z=function me(){return ye=ye||document.querySelector("base"),ye?ye.getAttribute("href"):null}();return null==Z?null:function He(q){Ce=Ce||document.createElement("a"),Ce.setAttribute("href",q);const Y=Ce.pathname;return"/"===Y.charAt(0)?Y:`/${Y}`}(Z)}resetBaseElement(){ye=null}getUserAgent(){return window.navigator.userAgent}getCookie(Y){return(0,oe.Mx)(document.cookie,Y)}}let Ce,ye=null,re=(()=>{class q{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(K){return new(K||q)};static#t=this.\u0275prov=D.Yz7({token:q,factory:q.\u0275fac})}return q})();const ie=new D.OlP("EventManagerPlugins");let ge=(()=>{class q{constructor(Z,K){this._zone=K,this._eventNameToPlugin=new Map,Z.forEach(Ee=>{Ee.manager=this}),this._plugins=Z.slice().reverse()}addEventListener(Z,K,Ee){return this._findPluginFor(K).addEventListener(Z,K,Ee)}getZone(){return this._zone}_findPluginFor(Z){let K=this._eventNameToPlugin.get(Z);if(K)return K;if(K=this._plugins.find(Ge=>Ge.supports(Z)),!K)throw new D.vHH(5101,!1);return this._eventNameToPlugin.set(Z,K),K}static#e=this.\u0275fac=function(K){return new(K||q)(D.LFG(ie),D.LFG(D.R0b))};static#t=this.\u0275prov=D.Yz7({token:q,factory:q.\u0275fac})}return q})();class Qe{constructor(Y){this._doc=Y}}const ze="ng-app-id";let We=(()=>{class q{constructor(Z,K,Ee,Ge={}){this.doc=Z,this.appId=K,this.nonce=Ee,this.platformId=Ge,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,oe.PM)(Ge),this.resetHostNodes()}addStyles(Z){for(const K of Z)1===this.changeUsageCount(K,1)&&this.onStyleAdded(K)}removeStyles(Z){for(const K of Z)this.changeUsageCount(K,-1)<=0&&this.onStyleRemoved(K)}ngOnDestroy(){const Z=this.styleNodesInDOM;Z&&(Z.forEach(K=>K.remove()),Z.clear());for(const K of this.getAllStyles())this.onStyleRemoved(K);this.resetHostNodes()}addHost(Z){this.hostNodes.add(Z);for(const K of this.getAllStyles())this.addStyleToHost(Z,K)}removeHost(Z){this.hostNodes.delete(Z)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(Z){for(const K of this.hostNodes)this.addStyleToHost(K,Z)}onStyleRemoved(Z){const K=this.styleRef;K.get(Z)?.elements?.forEach(Ee=>Ee.remove()),K.delete(Z)}collectServerRenderedStyles(){const Z=this.doc.head?.querySelectorAll(`style[${ze}="${this.appId}"]`);if(Z?.length){const K=new Map;return Z.forEach(Ee=>{null!=Ee.textContent&&K.set(Ee.textContent,Ee)}),K}return null}changeUsageCount(Z,K){const Ee=this.styleRef;if(Ee.has(Z)){const Ge=Ee.get(Z);return Ge.usage+=K,Ge.usage}return Ee.set(Z,{usage:K,elements:[]}),K}getStyleElement(Z,K){const Ee=this.styleNodesInDOM,Ge=Ee?.get(K);if(Ge?.parentNode===Z)return Ee.delete(K),Ge.removeAttribute(ze),Ge;{const lt=this.doc.createElement("style");return this.nonce&&lt.setAttribute("nonce",this.nonce),lt.textContent=K,this.platformIsServer&&lt.setAttribute(ze,this.appId),lt}}addStyleToHost(Z,K){const Ee=this.getStyleElement(Z,K);Z.appendChild(Ee);const Ge=this.styleRef,lt=Ge.get(K)?.elements;lt?lt.push(Ee):Ge.set(K,{elements:[Ee],usage:1})}resetHostNodes(){const Z=this.hostNodes;Z.clear(),Z.add(this.doc.head)}static#e=this.\u0275fac=function(K){return new(K||q)(D.LFG(oe.K0),D.LFG(D.AFp),D.LFG(D.Ojb,8),D.LFG(D.Lbi))};static#t=this.\u0275prov=D.Yz7({token:q,factory:q.\u0275fac})}return q})();const Je={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ht=/%COMP%/g,je=new D.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Ye(q,Y){return Y.map(Z=>Z.replace(ht,q))}let ot=(()=>{class q{constructor(Z,K,Ee,Ge,lt,Qt,Xt,_t=null){this.eventManager=Z,this.sharedStylesHost=K,this.appId=Ee,this.removeStylesOnCompDestroy=Ge,this.doc=lt,this.platformId=Qt,this.ngZone=Xt,this.nonce=_t,this.rendererByCompId=new Map,this.platformIsServer=(0,oe.PM)(Qt),this.defaultRenderer=new ae(Z,lt,Xt,this.platformIsServer)}createRenderer(Z,K){if(!Z||!K)return this.defaultRenderer;this.platformIsServer&&K.encapsulation===D.ifc.ShadowDom&&(K={...K,encapsulation:D.ifc.Emulated});const Ee=this.getOrCreateRenderer(Z,K);return Ee instanceof Wn?Ee.applyToHost(Z):Ee instanceof dr&&Ee.applyStyles(),Ee}getOrCreateRenderer(Z,K){const Ee=this.rendererByCompId;let Ge=Ee.get(K.id);if(!Ge){const lt=this.doc,Qt=this.ngZone,Xt=this.eventManager,_t=this.sharedStylesHost,Ft=this.removeStylesOnCompDestroy,qn=this.platformIsServer;switch(K.encapsulation){case D.ifc.Emulated:Ge=new Wn(Xt,_t,K,this.appId,Ft,lt,Qt,qn);break;case D.ifc.ShadowDom:return new Cn(Xt,_t,Z,K,lt,Qt,this.nonce,qn);default:Ge=new dr(Xt,_t,K,Ft,lt,Qt,qn)}Ee.set(K.id,Ge)}return Ge}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(K){return new(K||q)(D.LFG(ge),D.LFG(We),D.LFG(D.AFp),D.LFG(je),D.LFG(oe.K0),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(D.Ojb))};static#t=this.\u0275prov=D.Yz7({token:q,factory:q.\u0275fac})}return q})();class ae{constructor(Y,Z,K,Ee){this.eventManager=Y,this.doc=Z,this.ngZone=K,this.platformIsServer=Ee,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Y,Z){return Z?this.doc.createElementNS(Je[Z]||Z,Y):this.doc.createElement(Y)}createComment(Y){return this.doc.createComment(Y)}createText(Y){return this.doc.createTextNode(Y)}appendChild(Y,Z){(nr(Y)?Y.content:Y).appendChild(Z)}insertBefore(Y,Z,K){Y&&(nr(Y)?Y.content:Y).insertBefore(Z,K)}removeChild(Y,Z){Y&&Y.removeChild(Z)}selectRootElement(Y,Z){let K="string"==typeof Y?this.doc.querySelector(Y):Y;if(!K)throw new D.vHH(-5104,!1);return Z||(K.textContent=""),K}parentNode(Y){return Y.parentNode}nextSibling(Y){return Y.nextSibling}setAttribute(Y,Z,K,Ee){if(Ee){Z=Ee+":"+Z;const Ge=Je[Ee];Ge?Y.setAttributeNS(Ge,Z,K):Y.setAttribute(Z,K)}else Y.setAttribute(Z,K)}removeAttribute(Y,Z,K){if(K){const Ee=Je[K];Ee?Y.removeAttributeNS(Ee,Z):Y.removeAttribute(`${K}:${Z}`)}else Y.removeAttribute(Z)}addClass(Y,Z){Y.classList.add(Z)}removeClass(Y,Z){Y.classList.remove(Z)}setStyle(Y,Z,K,Ee){Ee&(D.JOm.DashCase|D.JOm.Important)?Y.style.setProperty(Z,K,Ee&D.JOm.Important?"important":""):Y.style[Z]=K}removeStyle(Y,Z,K){K&D.JOm.DashCase?Y.style.removeProperty(Z):Y.style[Z]=""}setProperty(Y,Z,K){Y[Z]=K}setValue(Y,Z){Y.nodeValue=Z}listen(Y,Z,K){if("string"==typeof Y&&!(Y=(0,oe.q)().getGlobalEventTarget(this.doc,Y)))throw new Error(`Unsupported event target ${Y} for event ${Z}`);return this.eventManager.addEventListener(Y,Z,this.decoratePreventDefault(K))}decoratePreventDefault(Y){return Z=>{if("__ngUnwrap__"===Z)return Y;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>Y(Z)):Y(Z))&&Z.preventDefault()}}}function nr(q){return"TEMPLATE"===q.tagName&&void 0!==q.content}class Cn extends ae{constructor(Y,Z,K,Ee,Ge,lt,Qt,Xt){super(Y,Ge,lt,Xt),this.sharedStylesHost=Z,this.hostEl=K,this.shadowRoot=K.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _t=Ye(Ee.id,Ee.styles);for(const Ft of _t){const qn=document.createElement("style");Qt&&qn.setAttribute("nonce",Qt),qn.textContent=Ft,this.shadowRoot.appendChild(qn)}}nodeOrShadowRoot(Y){return Y===this.hostEl?this.shadowRoot:Y}appendChild(Y,Z){return super.appendChild(this.nodeOrShadowRoot(Y),Z)}insertBefore(Y,Z,K){return super.insertBefore(this.nodeOrShadowRoot(Y),Z,K)}removeChild(Y,Z){return super.removeChild(this.nodeOrShadowRoot(Y),Z)}parentNode(Y){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Y)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class dr extends ae{constructor(Y,Z,K,Ee,Ge,lt,Qt,Xt){super(Y,Ge,lt,Qt),this.sharedStylesHost=Z,this.removeStylesOnCompDestroy=Ee,this.styles=Xt?Ye(Xt,K.styles):K.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Wn extends dr{constructor(Y,Z,K,Ee,Ge,lt,Qt,Xt){const _t=Ee+"-"+K.id;super(Y,Z,K,Ge,lt,Qt,Xt,_t),this.contentAttr=function De(q){return"_ngcontent-%COMP%".replace(ht,q)}(_t),this.hostAttr=function Ve(q){return"_nghost-%COMP%".replace(ht,q)}(_t)}applyToHost(Y){this.applyStyles(),this.setAttribute(Y,this.hostAttr,"")}createElement(Y,Z){const K=super.createElement(Y,Z);return super.setAttribute(K,this.contentAttr,""),K}}let It=(()=>{class q extends Qe{constructor(Z){super(Z)}supports(Z){return!0}addEventListener(Z,K,Ee){return Z.addEventListener(K,Ee,!1),()=>this.removeEventListener(Z,K,Ee)}removeEventListener(Z,K,Ee){return Z.removeEventListener(K,Ee)}static#e=this.\u0275fac=function(K){return new(K||q)(D.LFG(oe.K0))};static#t=this.\u0275prov=D.Yz7({token:q,factory:q.\u0275fac})}return q})();const Nt=["alt","control","meta","shift"],he={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},de={alt:q=>q.altKey,control:q=>q.ctrlKey,meta:q=>q.metaKey,shift:q=>q.shiftKey};let ve=(()=>{class q extends Qe{constructor(Z){super(Z)}supports(Z){return null!=q.parseEventName(Z)}addEventListener(Z,K,Ee){const Ge=q.parseEventName(K),lt=q.eventCallback(Ge.fullKey,Ee,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,oe.q)().onAndCancel(Z,Ge.domEventName,lt))}static parseEventName(Z){const K=Z.toLowerCase().split("."),Ee=K.shift();if(0===K.length||"keydown"!==Ee&&"keyup"!==Ee)return null;const Ge=q._normalizeKey(K.pop());let lt="",Qt=K.indexOf("code");if(Qt>-1&&(K.splice(Qt,1),lt="code."),Nt.forEach(_t=>{const Ft=K.indexOf(_t);Ft>-1&&(K.splice(Ft,1),lt+=_t+".")}),lt+=Ge,0!=K.length||0===Ge.length)return null;const Xt={};return Xt.domEventName=Ee,Xt.fullKey=lt,Xt}static matchEventFullKeyCode(Z,K){let Ee=he[Z.key]||Z.key,Ge="";return K.indexOf("code.")>-1&&(Ee=Z.code,Ge="code."),!(null==Ee||!Ee)&&(Ee=Ee.toLowerCase()," "===Ee?Ee="space":"."===Ee&&(Ee="dot"),Nt.forEach(lt=>{lt!==Ee&&(0,de[lt])(Z)&&(Ge+=lt+".")}),Ge+=Ee,Ge===K)}static eventCallback(Z,K,Ee){return Ge=>{q.matchEventFullKeyCode(Ge,Z)&&Ee.runGuarded(()=>K(Ge))}}static _normalizeKey(Z){return"esc"===Z?"escape":Z}static#e=this.\u0275fac=function(K){return new(K||q)(D.LFG(oe.K0))};static#t=this.\u0275prov=D.Yz7({token:q,factory:q.\u0275fac})}return q})();const Yt=(0,D.eFA)(D._c5,"browser",[{provide:D.Lbi,useValue:oe.bD},{provide:D.g9A,useValue:function it(){Ie.makeCurrent()},multi:!0},{provide:oe.K0,useFactory:function wt(){return(0,D.RDi)(document),document},deps:[]}]),Ln=new D.OlP(""),Dn=[{provide:D.rWj,useClass:class Ne{addToWindow(Y){D.dqk.getAngularTestability=(K,Ee=!0)=>{const Ge=Y.findTestabilityInTree(K,Ee);if(null==Ge)throw new D.vHH(5103,!1);return Ge},D.dqk.getAllAngularTestabilities=()=>Y.getAllTestabilities(),D.dqk.getAllAngularRootElements=()=>Y.getAllRootElements(),D.dqk.frameworkStabilizers||(D.dqk.frameworkStabilizers=[]),D.dqk.frameworkStabilizers.push(K=>{const Ee=D.dqk.getAllAngularTestabilities();let Ge=Ee.length,lt=!1;const Qt=function(Xt){lt=lt||Xt,Ge--,0==Ge&&K(lt)};Ee.forEach(Xt=>{Xt.whenStable(Qt)})})}findTestabilityInTree(Y,Z,K){return null==Z?null:Y.getTestability(Z)??(K?(0,oe.q)().isShadowRoot(Z)?this.findTestabilityInTree(Y,Z.host,!0):this.findTestabilityInTree(Y,Z.parentElement,!0):null)}},deps:[]},{provide:D.lri,useClass:D.dDg,deps:[D.R0b,D.eoX,D.rWj]},{provide:D.dDg,useClass:D.dDg,deps:[D.R0b,D.eoX,D.rWj]}],Rn=[{provide:D.zSh,useValue:"root"},{provide:D.qLn,useFactory:function kn(){return new D.qLn},deps:[]},{provide:ie,useClass:It,multi:!0,deps:[oe.K0,D.R0b,D.Lbi]},{provide:ie,useClass:ve,multi:!0,deps:[oe.K0]},ot,We,ge,{provide:D.FYo,useExisting:ot},{provide:oe.JF,useClass:re,deps:[]},[]];let Bn=(()=>{class q{constructor(Z){}static withServerTransition(Z){return{ngModule:q,providers:[{provide:D.AFp,useValue:Z.appId}]}}static#e=this.\u0275fac=function(K){return new(K||q)(D.LFG(Ln,12))};static#t=this.\u0275mod=D.oAB({type:q});static#n=this.\u0275inj=D.cJS({providers:[...Rn,...Dn],imports:[oe.ez,D.hGG]})}return q})(),Wr=(()=>{class q{constructor(Z){this._doc=Z}getTitle(){return this._doc.title}setTitle(Z){this._doc.title=Z||""}static#e=this.\u0275fac=function(K){return new(K||q)(D.LFG(oe.K0))};static#t=this.\u0275prov=D.Yz7({token:q,factory:function(K){let Ee=null;return Ee=K?new K:function Ir(){return new Wr((0,D.LFG)(oe.K0))}(),Ee},providedIn:"root"})}return q})();typeof window<"u"&&window},3228:(Ht,Fe,$)=>{$.d(Fe,{gz:()=>vi,F0:()=>pn,Bz:()=>Vc,lC:()=>gs});var D=$(5879),oe=$(5592),x=$(4674),ye=$(2459),me=$(2096),Ce=$(5619);const{isArray:He}=Array,{getPrototypeOf:Ne,prototype:re,keys:ie}=Object;var ze=$(2737),We=$(7398);const{isArray:Je}=Array;var Lt=$(4564),we=$(8251),je=$(7103);function De(...w){const b=(0,Lt.yG)(w),I=(0,Lt.jO)(w),{args:P,keys:k}=function ge(w){if(1===w.length){const b=w[0];if(He(b))return{args:b,keys:null};if(function Qe(w){return w&&"object"==typeof w&&Ne(w)===re}(b)){const I=ie(b);return{args:I.map(P=>b[P]),keys:I}}}return{args:w,keys:null}}(w);if(0===P.length)return(0,ye.D)([],b);const W=new oe.y(function Ve(w,b,I=ze.y){return P=>{Ye(b,()=>{const{length:k}=w,W=new Array(k);let te=k,Le=k;for(let Pe=0;Pe<k;Pe++)Ye(b,()=>{const Rt=(0,ye.D)(w[Pe],b);let En=!1;Rt.subscribe((0,we.x)(P,Sr=>{W[Pe]=Sr,En||(En=!0,Le--),Le||P.next(I(W.slice()))},()=>{--te||P.complete()}))},P)},P)}}(P,b,k?te=>function Te(w,b){return w.reduce((I,P,k)=>(I[P]=b[k],I),{})}(k,te):ze.y));return I?W.pipe(function at(w){return(0,We.U)(b=>function ht(w,b){return Je(b)?w(...b):w(b)}(w,b))}(I)):W}function Ye(w,b,I){w?(0,je.f)(I,w,b):b()}var ot=$(6973),ae=$(5211),Zt=$(4829);function ct(w){return new oe.y(b=>{(0,Zt.Xf)(w()).subscribe(b)})}var nr=$(8407);function Cn(w,b){const I=(0,x.m)(w)?w:()=>w,P=k=>k.error(I());return new oe.y(b?k=>b.schedule(P,0,k):P)}var dr=$(6232),Wn=$(7394),It=$(9360);function Nt(){return(0,It.e)((w,b)=>{let I=null;w._refCount++;const P=(0,we.x)(b,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(I=null);const k=w._connection,W=I;I=null,k&&(!W||k===W)&&k.unsubscribe(),b.unsubscribe()});w.subscribe(P),P.closed||(I=w.connect())})}class he extends oe.y{constructor(b,I){super(),this.source=b,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,It.A)(b)&&(this.lift=b.lift)}_subscribe(b){return this.getSubject().subscribe(b)}getSubject(){const b=this._subject;return(!b||b.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:b}=this;this._subject=this._connection=null,b?.unsubscribe()}connect(){let b=this._connection;if(!b){b=this._connection=new Wn.w0;const I=this.getSubject();b.add(this.source.subscribe((0,we.x)(I,void 0,()=>{this._teardown(),I.complete()},P=>{this._teardown(),I.error(P)},()=>this._teardown()))),b.closed&&(this._connection=null,b=Wn.w0.EMPTY)}return b}refCount(){return Nt()(this)}}var de=$(8645),ve=$(6814),fe=$(4664),be=$(8180),$e=$(7921),mt=$(2181),it=$(1631),kn=$(1374);function wt(w,b){return(0,x.m)(b)?(0,it.z)(w,b,1):(0,it.z)(w,1)}var rn=$(9397);function Yt(w){return(0,It.e)((b,I)=>{let W,P=null,k=!1;P=b.subscribe((0,we.x)(I,void 0,void 0,te=>{W=(0,Zt.Xf)(w(te,Yt(w)(b))),P?(P.unsubscribe(),P=null,W.subscribe(I)):k=!0})),k&&(P.unsubscribe(),P=null,W.subscribe(I))})}var Ln=$(6699),Dn=$(3572);function Rn(w){return w<=0?()=>dr.E:(0,It.e)((b,I)=>{let P=[];b.subscribe((0,we.x)(I,k=>{P.push(k),w<P.length&&P.shift()},()=>{for(const k of P)I.next(k);I.complete()},void 0,()=>{P=null}))})}var Bn=$(3026);function Rr(w){return(0,It.e)((b,I)=>{try{b.subscribe(I)}finally{I.add(w)}})}var Ir=$(2420),qr=$(7537),fi=$(6593);const st="primary",on=Symbol("RouteTitle");class jt{constructor(b){this.params=b||{}}has(b){return Object.prototype.hasOwnProperty.call(this.params,b)}get(b){if(this.has(b)){const I=this.params[b];return Array.isArray(I)?I[0]:I}return null}getAll(b){if(this.has(b)){const I=this.params[b];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function Fn(w){return new jt(w)}function Ai(w,b,I){const P=I.path.split("/");if(P.length>w.length||"full"===I.pathMatch&&(b.hasChildren()||P.length<w.length))return null;const k={};for(let W=0;W<P.length;W++){const te=P[W],Le=w[W];if(te.startsWith(":"))k[te.substring(1)]=Le;else if(te!==Le.path)return null}return{consumed:w.slice(0,P.length),posParams:k}}function Tn(w,b){const I=w?Object.keys(w):void 0,P=b?Object.keys(b):void 0;if(!I||!P||I.length!=P.length)return!1;let k;for(let W=0;W<I.length;W++)if(k=I[W],!mr(w[k],b[k]))return!1;return!0}function mr(w,b){if(Array.isArray(w)&&Array.isArray(b)){if(w.length!==b.length)return!1;const I=[...w].sort(),P=[...b].sort();return I.every((k,W)=>P[W]===k)}return w===b}function Js(w){return w.length>0?w[w.length-1]:null}function Ct(w){return function Ie(w){return!!w&&(w instanceof oe.y||(0,x.m)(w.lift)&&(0,x.m)(w.subscribe))}(w)?w:(0,D.QGY)(w)?(0,ye.D)(Promise.resolve(w)):(0,me.of)(w)}const os={exact:function Os(w,b,I){if(!Zr(w.segments,b.segments)||!Lr(w.segments,b.segments,I)||w.numberOfChildren!==b.numberOfChildren)return!1;for(const P in b.children)if(!w.children[P]||!Os(w.children[P],b.children[P],I))return!1;return!0},subset:hs},gn={exact:function Ar(w,b){return Tn(w,b)},subset:function pi(w,b){return Object.keys(b).length<=Object.keys(w).length&&Object.keys(b).every(I=>mr(w[I],b[I]))},ignored:()=>!0};function kr(w,b,I){return os[I.paths](w.root,b.root,I.matrixParams)&&gn[I.queryParams](w.queryParams,b.queryParams)&&!("exact"===I.fragment&&w.fragment!==b.fragment)}function hs(w,b,I){return Hi(w,b,b.segments,I)}function Hi(w,b,I,P){if(w.segments.length>I.length){const k=w.segments.slice(0,I.length);return!(!Zr(k,I)||b.hasChildren()||!Lr(k,I,P))}if(w.segments.length===I.length){if(!Zr(w.segments,I)||!Lr(w.segments,I,P))return!1;for(const k in b.children)if(!w.children[k]||!hs(w.children[k],b.children[k],P))return!1;return!0}{const k=I.slice(0,w.segments.length),W=I.slice(w.segments.length);return!!(Zr(w.segments,k)&&Lr(w.segments,k,P)&&w.children[st])&&Hi(w.children[st],b,W,P)}}function Lr(w,b,I){return b.every((P,k)=>gn[I](w[k].parameters,P.parameters))}class Kr{constructor(b=new ln([],{}),I={},P=null){this.root=b,this.queryParams=I,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fn(this.queryParams)),this._queryParamMap}toString(){return Z.serialize(this)}}class ln{constructor(b,I){this.segments=b,this.children=I,this.parent=null,Object.values(I).forEach(P=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return K(this)}}class gi{constructor(b,I){this.path=b,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=Fn(this.parameters)),this._parameterMap}toString(){return qn(this)}}function Zr(w,b){return w.length===b.length&&w.every((I,P)=>I.path===b[P].path)}let q=(()=>{class w{static#e=this.\u0275fac=function(P){return new(P||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:function(){return new Y},providedIn:"root"})}return w})();class Y{parse(b){const I=new rr(b);return new Kr(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(b){const I=`/${Ee(b.root,!0)}`,P=function Qr(w){const b=Object.keys(w).map(I=>{const P=w[I];return Array.isArray(P)?P.map(k=>`${lt(I)}=${lt(k)}`).join("&"):`${lt(I)}=${lt(P)}`}).filter(I=>!!I);return b.length?`?${b.join("&")}`:""}(b.queryParams);return`${I}${P}${"string"==typeof b.fragment?`#${function Qt(w){return encodeURI(w)}(b.fragment)}`:""}`}}const Z=new Y;function K(w){return w.segments.map(b=>qn(b)).join("/")}function Ee(w,b){if(!w.hasChildren())return K(w);if(b){const I=w.children[st]?Ee(w.children[st],!1):"",P=[];return Object.entries(w.children).forEach(([k,W])=>{k!==st&&P.push(`${k}:${Ee(W,!1)}`)}),P.length>0?`${I}(${P.join("//")})`:I}{const I=function ce(w,b){let I=[];return Object.entries(w.children).forEach(([P,k])=>{P===st&&(I=I.concat(b(k,P)))}),Object.entries(w.children).forEach(([P,k])=>{P!==st&&(I=I.concat(b(k,P)))}),I}(w,(P,k)=>k===st?[Ee(w.children[st],!1)]:[`${k}:${Ee(P,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[st]?`${K(w)}/${I[0]}`:`${K(w)}/(${I.join("//")})`}}function Ge(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lt(w){return Ge(w).replace(/%3B/gi,";")}function Xt(w){return Ge(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _t(w){return decodeURIComponent(w)}function Ft(w){return _t(w.replace(/\+/g,"%20"))}function qn(w){return`${Xt(w.path)}${function mi(w){return Object.keys(w).map(b=>`;${Xt(b)}=${Xt(w[b])}`).join("")}(w.parameters)}`}const ks=/^[^\/()?;#]+/;function Be(w){const b=w.match(ks);return b?b[0]:""}const Ae=/^[^\/()?;=#]+/,Bt=/^[^=?&#]+/,vt=/^[^&#]+/;class rr{constructor(b){this.url=b,this.remaining=b}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ln([],{}):new ln([],this.parseChildren())}parseQueryParams(){const b={};if(this.consumeOptional("?"))do{this.parseQueryParam(b)}while(this.consumeOptional("&"));return b}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const b=[];for(this.peekStartsWith("(")||b.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),b.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(b.length>0||Object.keys(I).length>0)&&(P[st]=new ln(b,I)),P}parseSegment(){const b=Be(this.remaining);if(""===b&&this.peekStartsWith(";"))throw new D.vHH(4009,!1);return this.capture(b),new gi(_t(b),this.parseMatrixParams())}parseMatrixParams(){const b={};for(;this.consumeOptional(";");)this.parseParam(b);return b}parseParam(b){const I=function tt(w){const b=w.match(Ae);return b?b[0]:""}(this.remaining);if(!I)return;this.capture(I);let P="";if(this.consumeOptional("=")){const k=Be(this.remaining);k&&(P=k,this.capture(P))}b[_t(I)]=_t(P)}parseQueryParam(b){const I=function Pt(w){const b=w.match(Bt);return b?b[0]:""}(this.remaining);if(!I)return;this.capture(I);let P="";if(this.consumeOptional("=")){const te=function fn(w){const b=w.match(vt);return b?b[0]:""}(this.remaining);te&&(P=te,this.capture(P))}const k=Ft(I),W=Ft(P);if(b.hasOwnProperty(k)){let te=b[k];Array.isArray(te)||(te=[te],b[k]=te),te.push(W)}else b[k]=W}parseParens(b){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=Be(this.remaining),k=this.remaining[P.length];if("/"!==k&&")"!==k&&";"!==k)throw new D.vHH(4010,!1);let W;P.indexOf(":")>-1?(W=P.slice(0,P.indexOf(":")),this.capture(W),this.capture(":")):b&&(W=st);const te=this.parseChildren();I[W]=1===Object.keys(te).length?te[st]:new ln([],te),this.consumeOptional("//")}return I}peekStartsWith(b){return this.remaining.startsWith(b)}consumeOptional(b){return!!this.peekStartsWith(b)&&(this.remaining=this.remaining.substring(b.length),!0)}capture(b){if(!this.consumeOptional(b))throw new D.vHH(4011,!1)}}function ir(w){return w.segments.length>0?new ln([],{[st]:w}):w}function si(w){const b={};for(const P of Object.keys(w.children)){const W=si(w.children[P]);if(P===st&&0===W.segments.length&&W.hasChildren())for(const[te,Le]of Object.entries(W.children))b[te]=Le;else(W.segments.length>0||W.hasChildren())&&(b[P]=W)}return function Fr(w){if(1===w.numberOfChildren&&w.children[st]){const b=w.children[st];return new ln(w.segments.concat(b.segments),b.children)}return w}(new ln(w.segments,b))}function Yr(w){return w instanceof Kr}function Yi(w){let b;const k=ir(function I(W){const te={};for(const Pe of W.children){const Rt=I(Pe);te[Pe.outlet]=Rt}const Le=new ln(W.url,te);return W===w&&(b=Le),Le}(w.root));return b??k}function Io(w,b,I,P){let k=w;for(;k.parent;)k=k.parent;if(0===b.length)return an(k,k,k,I,P);const W=function Fs(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new Ni(!0,0,w);let b=0,I=!1;const P=w.reduce((k,W,te)=>{if("object"==typeof W&&null!=W){if(W.outlets){const Le={};return Object.entries(W.outlets).forEach(([Pe,Rt])=>{Le[Pe]="string"==typeof Rt?Rt.split("/"):Rt}),[...k,{outlets:Le}]}if(W.segmentPath)return[...k,W.segmentPath]}return"string"!=typeof W?[...k,W]:0===te?(W.split("/").forEach((Le,Pe)=>{0==Pe&&"."===Le||(0==Pe&&""===Le?I=!0:".."===Le?b++:""!=Le&&k.push(Le))}),k):[...k,W]},[]);return new Ni(I,b,P)}(b);if(W.toRoot())return an(k,k,new ln([],{}),I,P);const te=function xi(w,b,I){if(w.isAbsolute)return new To(b,!0,0);if(!I)return new To(b,!1,NaN);if(null===I.parent)return new To(I,!0,0);const P=fs(w.commands[0])?0:1;return function Vs(w,b,I){let P=w,k=b,W=I;for(;W>k;){if(W-=k,P=P.parent,!P)throw new D.vHH(4005,!1);k=P.segments.length}return new To(P,!1,k-W)}(I,I.segments.length-1+P,w.numberOfDoubleDots)}(W,k,w),Le=te.processChildren?Ds(te.segmentGroup,te.index,W.commands):Ji(te.segmentGroup,te.index,W.commands);return an(k,te.segmentGroup,Le,I,P)}function fs(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function Ls(w){return"object"==typeof w&&null!=w&&w.outlets}function an(w,b,I,P,k){let te,W={};P&&Object.entries(P).forEach(([Pe,Rt])=>{W[Pe]=Array.isArray(Rt)?Rt.map(En=>`${En}`):`${Rt}`}),te=w===b?I:_r(w,b,I);const Le=ir(si(te));return new Kr(Le,W,k)}function _r(w,b,I){const P={};return Object.entries(w.children).forEach(([k,W])=>{P[k]=W===b?I:_r(W,b,I)}),new ln(w.segments,P)}class Ni{constructor(b,I,P){if(this.isAbsolute=b,this.numberOfDoubleDots=I,this.commands=P,b&&P.length>0&&fs(P[0]))throw new D.vHH(4003,!1);const k=P.find(Ls);if(k&&k!==Js(P))throw new D.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class To{constructor(b,I,P){this.segmentGroup=b,this.processChildren=I,this.index=P}}function Ji(w,b,I){if(w||(w=new ln([],{})),0===w.segments.length&&w.hasChildren())return Ds(w,b,I);const P=function eo(w,b,I){let P=0,k=b;const W={match:!1,pathIndex:0,commandIndex:0};for(;k<w.segments.length;){if(P>=I.length)return W;const te=w.segments[k],Le=I[P];if(Ls(Le))break;const Pe=`${Le}`,Rt=P<I.length-1?I[P+1]:null;if(k>0&&void 0===Pe)break;if(Pe&&Rt&&"object"==typeof Rt&&void 0===Rt.outlets){if(!jn(Pe,Rt,te))return W;P+=2}else{if(!jn(Pe,{},te))return W;P++}k++}return{match:!0,pathIndex:k,commandIndex:P}}(w,b,I),k=I.slice(P.commandIndex);if(P.match&&P.pathIndex<w.segments.length){const W=new ln(w.segments.slice(0,P.pathIndex),{});return W.children[st]=new ln(w.segments.slice(P.pathIndex),w.children),Ds(W,0,k)}return P.match&&0===k.length?new ln(w.segments,{}):P.match&&!w.hasChildren()?Us(w,b,I):P.match?Ds(w,0,k):Us(w,b,I)}function Ds(w,b,I){if(0===I.length)return new ln(w.segments,{});{const P=function Jr(w){return Ls(w[0])?w[0].outlets:{[st]:w}}(I),k={};if(Object.keys(P).some(W=>W!==st)&&w.children[st]&&1===w.numberOfChildren&&0===w.children[st].segments.length){const W=Ds(w.children[st],b,I);return new ln(w.segments,W.children)}return Object.entries(P).forEach(([W,te])=>{"string"==typeof te&&(te=[te]),null!==te&&(k[W]=Ji(w.children[W],b,te))}),Object.entries(w.children).forEach(([W,te])=>{void 0===P[W]&&(k[W]=te)}),new ln(w.segments,k)}}function Us(w,b,I){const P=w.segments.slice(0,b);let k=0;for(;k<I.length;){const W=I[k];if(Ls(W)){const Pe=wo(W.outlets);return new ln(P,Pe)}if(0===k&&fs(I[0])){P.push(new gi(w.segments[b].path,Ia(I[0]))),k++;continue}const te=Ls(W)?W.outlets[st]:`${W}`,Le=k<I.length-1?I[k+1]:null;te&&Le&&fs(Le)?(P.push(new gi(te,Ia(Le))),k+=2):(P.push(new gi(te,{})),k++)}return new ln(P,{})}function wo(w){const b={};return Object.entries(w).forEach(([I,P])=>{"string"==typeof P&&(P=[P]),null!==P&&(b[I]=Us(new ln([],{}),0,P))}),b}function Ia(w){const b={};return Object.entries(w).forEach(([I,P])=>b[I]=`${P}`),b}function jn(w,b,I){return w==I.path&&Tn(b,I.parameters)}const to="imperative";class ar{constructor(b,I){this.id=b,this.url=I}}class As extends ar{constructor(b,I,P="imperative",k=null){super(b,I),this.type=0,this.navigationTrigger=P,this.restoredState=k}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ps extends ar{constructor(b,I,P){super(b,I),this.urlAfterRedirects=P,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Do extends ar{constructor(b,I,P,k){super(b,I),this.reason=P,this.code=k,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bs extends ar{constructor(b,I,P,k){super(b,I),this.reason=P,this.code=k,this.type=16}}class Vo extends ar{constructor(b,I,P,k){super(b,I),this.error=P,this.target=k,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _i extends ar{constructor(b,I,P,k){super(b,I),this.urlAfterRedirects=P,this.state=k,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xr extends ar{constructor(b,I,P,k){super(b,I),this.urlAfterRedirects=P,this.state=k,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class js extends ar{constructor(b,I,P,k,W){super(b,I),this.urlAfterRedirects=P,this.state=k,this.shouldActivate=W,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Jo extends ar{constructor(b,I,P,k){super(b,I),this.urlAfterRedirects=P,this.state=k,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ci extends ar{constructor(b,I,P,k){super(b,I),this.urlAfterRedirects=P,this.state=k,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yn{constructor(b){this.route=b,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pr{constructor(b){this.route=b,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yi{constructor(b){this.snapshot=b,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vr{constructor(b){this.snapshot=b,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ei{constructor(b){this.snapshot=b,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class no{constructor(b){this.snapshot=b,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ro{constructor(b,I,P){this.routerEvent=b,this.position=I,this.anchor=P,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Cs{}class Uo{constructor(b){this.url=b}}class ur{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Et,this.attachRef=null}}let Et=(()=>{class w{constructor(){this.contexts=new Map}onChildOutletCreated(I,P){const k=this.getOrCreateContext(I);k.outlet=P,this.contexts.set(I,k)}onChildOutletDestroyed(I){const P=this.getContext(I);P&&(P.outlet=null,P.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let P=this.getContext(I);return P||(P=new ur,this.contexts.set(I,P)),P}getContext(I){return this.contexts.get(I)||null}static#e=this.\u0275fac=function(P){return new(P||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();class en{constructor(b){this._root=b}get root(){return this._root.value}parent(b){const I=this.pathFromRoot(b);return I.length>1?I[I.length-2]:null}children(b){const I=bn(b,this._root);return I?I.children.map(P=>P.value):[]}firstChild(b){const I=bn(b,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(b){const I=Tr(b,this._root);return I.length<2?[]:I[I.length-2].children.map(k=>k.value).filter(k=>k!==b)}pathFromRoot(b){return Tr(b,this._root).map(I=>I.value)}}function bn(w,b){if(w===b.value)return b;for(const I of b.children){const P=bn(w,I);if(P)return P}return null}function Tr(w,b){if(w===b.value)return[b];for(const I of b.children){const P=Tr(w,I);if(P.length)return P.unshift(b),P}return[]}class Hr{constructor(b,I){this.value=b,this.children=I}toString(){return`TreeNode(${this.value})`}}function Mr(w){const b={};return w&&w.children.forEach(I=>b[I.value.outlet]=I),b}class as extends en{constructor(b,I){super(b),this.snapshot=I,cr(this,b)}toString(){return this.snapshot.toString()}}function hr(w,b){const I=function us(w,b){const te=new Xi([],{},{},"",{},st,b,null,{});return new Ur("",new Hr(te,[]))}(0,b),P=new Ce.X([new gi("",{})]),k=new Ce.X({}),W=new Ce.X({}),te=new Ce.X({}),Le=new Ce.X(""),Pe=new vi(P,k,te,Le,W,st,b,I.root);return Pe.snapshot=I.root,new as(new Hr(Pe,[]),I)}class vi{constructor(b,I,P,k,W,te,Le,Pe){this.urlSubject=b,this.paramsSubject=I,this.queryParamsSubject=P,this.fragmentSubject=k,this.dataSubject=W,this.outlet=te,this.component=Le,this._futureSnapshot=Pe,this.title=this.dataSubject?.pipe((0,We.U)(Rt=>Rt[on]))??(0,me.of)(void 0),this.url=b,this.params=I,this.queryParams=P,this.fragment=k,this.data=W}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,We.U)(b=>Fn(b)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,We.U)(b=>Fn(b)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Gt(w,b="emptyOnly"){const I=w.pathFromRoot;let P=0;if("always"!==b)for(P=I.length-1;P>=1;){const k=I[P],W=I[P-1];if(k.routeConfig&&""===k.routeConfig.path)P--;else{if(W.component)break;P--}}return function Oi(w){return w.reduce((b,I)=>({params:{...b.params,...I.params},data:{...b.data,...I.data},resolve:{...I.data,...b.resolve,...I.routeConfig?.data,...I._resolvedData}}),{params:{},data:{},resolve:{}})}(I.slice(P))}class Xi{get title(){return this.data?.[on]}constructor(b,I,P,k,W,te,Le,Pe,Rt){this.url=b,this.params=I,this.queryParams=P,this.fragment=k,this.data=W,this.outlet=te,this.component=Le,this.routeConfig=Pe,this._resolve=Rt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ur extends en{constructor(b,I){super(I),this.url=b,cr(this,I)}toString(){return Vn(this._root)}}function cr(w,b){b.value._routerState=w,b.children.forEach(I=>cr(w,I))}function Vn(w){const b=w.children.length>0?` { ${w.children.map(Vn).join(", ")} } `:"";return`${w.value}${b}`}function es(w){if(w.snapshot){const b=w.snapshot,I=w._futureSnapshot;w.snapshot=I,Tn(b.queryParams,I.queryParams)||w.queryParamsSubject.next(I.queryParams),b.fragment!==I.fragment&&w.fragmentSubject.next(I.fragment),Tn(b.params,I.params)||w.paramsSubject.next(I.params),function ii(w,b){if(w.length!==b.length)return!1;for(let I=0;I<w.length;++I)if(!Tn(w[I],b[I]))return!1;return!0}(b.url,I.url)||w.urlSubject.next(I.url),Tn(b.data,I.data)||w.dataSubject.next(I.data)}else w.snapshot=w._futureSnapshot,w.dataSubject.next(w._futureSnapshot.data)}function zr(w,b){const I=Tn(w.params,b.params)&&function zi(w,b){return Zr(w,b)&&w.every((I,P)=>Tn(I.parameters,b[P].parameters))}(w.url,b.url);return I&&!(!w.parent!=!b.parent)&&(!w.parent||zr(w.parent,b.parent))}let gs=(()=>{class w{constructor(){this.activated=null,this._activatedRoute=null,this.name=st,this.activateEvents=new D.vpe,this.deactivateEvents=new D.vpe,this.attachEvents=new D.vpe,this.detachEvents=new D.vpe,this.parentContexts=(0,D.f3M)(Et),this.location=(0,D.f3M)(D.s_b),this.changeDetector=(0,D.f3M)(D.sBO),this.environmentInjector=(0,D.f3M)(D.lqb),this.inputBinder=(0,D.f3M)(ts,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(I){if(I.name){const{firstChange:P,previousValue:k}=I.name;if(P)return;this.isTrackedInParentContexts(k)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(k)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(I){return this.parentContexts.getContext(I)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const I=this.parentContexts.getContext(this.name);I?.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new D.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new D.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new D.vHH(4012,!1);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,P){this.activated=I,this._activatedRoute=P,this.location.insert(I.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,P){if(this.isActivated)throw new D.vHH(4013,!1);this._activatedRoute=I;const k=this.location,te=I.snapshot.component,Le=this.parentContexts.getOrCreateContext(this.name).children,Pe=new io(I,Le,k.injector);this.activated=k.createComponent(te,{index:k.length,injector:Pe,environmentInjector:P??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(P){return new(P||w)};static#t=this.\u0275dir=D.lG2({type:w,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[D.TTD]})}return w})();class io{constructor(b,I,P){this.route=b,this.childContexts=I,this.parent=P}get(b,I){return b===vi?this.route:b===Et?this.childContexts:this.parent.get(b,I)}}const ts=new D.OlP("");let ms=(()=>{class w{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(I){this.unsubscribeFromRouteData(I),this.subscribeToRouteData(I)}unsubscribeFromRouteData(I){this.outletDataSubscriptions.get(I)?.unsubscribe(),this.outletDataSubscriptions.delete(I)}subscribeToRouteData(I){const{activatedRoute:P}=I,k=De([P.queryParams,P.params,P.data]).pipe((0,fe.w)(([W,te,Le],Pe)=>(Le={...W,...te,...Le},0===Pe?(0,me.of)(Le):Promise.resolve(Le)))).subscribe(W=>{if(!I.isActivated||!I.activatedComponentRef||I.activatedRoute!==P||null===P.component)return void this.unsubscribeFromRouteData(I);const te=(0,D.qFp)(P.component);if(te)for(const{templateName:Le}of te.inputs)I.activatedComponentRef.setInput(Le,W[Le]);else this.unsubscribeFromRouteData(I)});this.outletDataSubscriptions.set(I,k)}static#e=this.\u0275fac=function(P){return new(P||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac})}return w})();function ki(w,b,I){if(I&&w.shouldReuseRoute(b.value,I.value.snapshot)){const P=I.value;P._futureSnapshot=b.value;const k=function An(w,b,I){return b.children.map(P=>{for(const k of I.children)if(w.shouldReuseRoute(P.value,k.value.snapshot))return ki(w,P,k);return ki(w,P)})}(w,b,I);return new Hr(P,k)}{if(w.shouldAttach(b.value)){const W=w.retrieve(b.value);if(null!==W){const te=W.route;return te.value._futureSnapshot=b.value,te.children=b.children.map(Le=>ki(w,Le)),te}}const P=function Xo(w){return new vi(new Ce.X(w.url),new Ce.X(w.params),new Ce.X(w.queryParams),new Ce.X(w.fragment),new Ce.X(w.data),w.outlet,w.component,w)}(b.value),k=b.children.map(W=>ki(w,W));return new Hr(P,k)}}const Si="ngNavigationCancelingError";function Ao(w,b){const{redirectTo:I,navigationBehaviorOptions:P}=Yr(b)?{redirectTo:b,navigationBehaviorOptions:void 0}:b,k=Li(!1,0,b);return k.url=I,k.navigationBehaviorOptions=P,k}function Li(w,b,I){const P=new Error("NavigationCancelingError: "+(w||""));return P[Si]=!0,P.cancellationCode=b,I&&(P.url=I),P}function oi(w){return w&&w[Si]}let cs=(()=>{class w{static#e=this.\u0275fac=function(P){return new(P||w)};static#t=this.\u0275cmp=D.Xpm({type:w,selectors:[["ng-component"]],standalone:!0,features:[D.jDz],decls:1,vars:0,template:function(P,k){1&P&&D._UZ(0,"router-outlet")},dependencies:[gs],encapsulation:2})}return w})();function Hs(w){const b=w.children&&w.children.map(Hs),I=b?{...w,children:b}:{...w};return!I.component&&!I.loadComponent&&(b||I.loadChildren)&&I.outlet&&I.outlet!==st&&(I.component=cs),I}function Cr(w){return w.outlet||st}function Wi(w){if(!w)return null;if(w.routeConfig?._injector)return w.routeConfig._injector;for(let b=w.parent;b;b=b.parent){const I=b.routeConfig;if(I?._loadedInjector)return I._loadedInjector;if(I?._injector)return I._injector}return null}class oo{constructor(b,I,P,k,W){this.routeReuseStrategy=b,this.futureState=I,this.currState=P,this.forwardEvent=k,this.inputBindingEnabled=W}activate(b){const I=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,P,b),es(this.futureState.root),this.activateChildRoutes(I,P,b)}deactivateChildRoutes(b,I,P){const k=Mr(I);b.children.forEach(W=>{const te=W.value.outlet;this.deactivateRoutes(W,k[te],P),delete k[te]}),Object.values(k).forEach(W=>{this.deactivateRouteAndItsChildren(W,P)})}deactivateRoutes(b,I,P){const k=b.value,W=I?I.value:null;if(k===W)if(k.component){const te=P.getContext(k.outlet);te&&this.deactivateChildRoutes(b,I,te.children)}else this.deactivateChildRoutes(b,I,P);else W&&this.deactivateRouteAndItsChildren(I,P)}deactivateRouteAndItsChildren(b,I){b.value.component&&this.routeReuseStrategy.shouldDetach(b.value.snapshot)?this.detachAndStoreRouteSubtree(b,I):this.deactivateRouteAndOutlet(b,I)}detachAndStoreRouteSubtree(b,I){const P=I.getContext(b.value.outlet),k=P&&b.value.component?P.children:I,W=Mr(b);for(const te of Object.keys(W))this.deactivateRouteAndItsChildren(W[te],k);if(P&&P.outlet){const te=P.outlet.detach(),Le=P.children.onOutletDeactivated();this.routeReuseStrategy.store(b.value.snapshot,{componentRef:te,route:b,contexts:Le})}}deactivateRouteAndOutlet(b,I){const P=I.getContext(b.value.outlet),k=P&&b.value.component?P.children:I,W=Mr(b);for(const te of Object.keys(W))this.deactivateRouteAndItsChildren(W[te],k);P&&(P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated()),P.attachRef=null,P.route=null)}activateChildRoutes(b,I,P){const k=Mr(I);b.children.forEach(W=>{this.activateRoutes(W,k[W.value.outlet],P),this.forwardEvent(new no(W.value.snapshot))}),b.children.length&&this.forwardEvent(new Vr(b.value.snapshot))}activateRoutes(b,I,P){const k=b.value,W=I?I.value:null;if(es(k),k===W)if(k.component){const te=P.getOrCreateContext(k.outlet);this.activateChildRoutes(b,I,te.children)}else this.activateChildRoutes(b,I,P);else if(k.component){const te=P.getOrCreateContext(k.outlet);if(this.routeReuseStrategy.shouldAttach(k.snapshot)){const Le=this.routeReuseStrategy.retrieve(k.snapshot);this.routeReuseStrategy.store(k.snapshot,null),te.children.onOutletReAttached(Le.contexts),te.attachRef=Le.componentRef,te.route=Le.route.value,te.outlet&&te.outlet.attach(Le.componentRef,Le.route.value),es(Le.route.value),this.activateChildRoutes(b,null,te.children)}else{const Le=Wi(k.snapshot);te.attachRef=null,te.route=k,te.injector=Le,te.outlet&&te.outlet.activateWith(k,te.injector),this.activateChildRoutes(b,null,te.children)}}else this.activateChildRoutes(b,null,P)}}class jo{constructor(b){this.path=b,this.route=this.path[this.path.length-1]}}class fr{constructor(b,I){this.component=b,this.route=I}}function $o(w,b,I){const P=w._root;return Qn(P,b?b._root:null,I,[P.value])}function Co(w,b){const I=Symbol(),P=b.get(w,I);return P===I?"function"!=typeof w||(0,D.Z0I)(w)?b.get(w):w:P}function Qn(w,b,I,P,k={canDeactivateChecks:[],canActivateChecks:[]}){const W=Mr(b);return w.children.forEach(te=>{(function zs(w,b,I,P,k={canDeactivateChecks:[],canActivateChecks:[]}){const W=w.value,te=b?b.value:null,Le=I?I.getContext(w.value.outlet):null;if(te&&W.routeConfig===te.routeConfig){const Pe=function ou(w,b,I){if("function"==typeof I)return I(w,b);switch(I){case"pathParamsChange":return!Zr(w.url,b.url);case"pathParamsOrQueryParamsChange":return!Zr(w.url,b.url)||!Tn(w.queryParams,b.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zr(w,b)||!Tn(w.queryParams,b.queryParams);default:return!zr(w,b)}}(te,W,W.routeConfig.runGuardsAndResolvers);Pe?k.canActivateChecks.push(new jo(P)):(W.data=te.data,W._resolvedData=te._resolvedData),Qn(w,b,W.component?Le?Le.children:null:I,P,k),Pe&&Le&&Le.outlet&&Le.outlet.isActivated&&k.canDeactivateChecks.push(new fr(Le.outlet.component,te))}else te&&So(b,Le,k),k.canActivateChecks.push(new jo(P)),Qn(w,null,W.component?Le?Le.children:null:I,P,k)})(te,W[te.value.outlet],I,P.concat([te.value]),k),delete W[te.value.outlet]}),Object.entries(W).forEach(([te,Le])=>So(Le,I.getContext(te),k)),k}function So(w,b,I){const P=Mr(w),k=w.value;Object.entries(P).forEach(([W,te])=>{So(te,k.component?b?b.children.getContext(W):null:b,I)}),I.canDeactivateChecks.push(new fr(k.component&&b&&b.outlet&&b.outlet.isActivated?b.outlet.component:null,k))}function bo(w){return"function"==typeof w}function O(w){return w instanceof ot.K||"EmptyError"===w?.name}const L=Symbol("INITIAL_VALUE");function Q(){return(0,fe.w)(w=>De(w.map(b=>b.pipe((0,be.q)(1),(0,$e.O)(L)))).pipe((0,We.U)(b=>{for(const I of b)if(!0!==I){if(I===L)return L;if(!1===I||I instanceof Kr)return I}return!0}),(0,mt.h)(b=>b!==L),(0,be.q)(1)))}function Yn(w){return(0,nr.z)((0,rn.b)(b=>{if(Yr(b))throw Ao(0,b)}),(0,We.U)(b=>!0===b))}class Kn{constructor(b){this.segmentGroup=b||null}}class ui{constructor(b){this.urlTree=b}}function Nn(w){return Cn(new Kn(w))}function bi(w){return Cn(new ui(w))}class ni{constructor(b,I){this.urlSerializer=b,this.urlTree=I}noMatchError(b){return new D.vHH(4002,!1)}lineralizeSegments(b,I){let P=[],k=I.root;for(;;){if(P=P.concat(k.segments),0===k.numberOfChildren)return(0,me.of)(P);if(k.numberOfChildren>1||!k.children[st])return Cn(new D.vHH(4e3,!1));k=k.children[st]}}applyRedirectCommands(b,I,P){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),b,P)}applyRedirectCreateUrlTree(b,I,P,k){const W=this.createSegmentGroup(b,I.root,P,k);return new Kr(W,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(b,I){const P={};return Object.entries(b).forEach(([k,W])=>{if("string"==typeof W&&W.startsWith(":")){const Le=W.substring(1);P[k]=I[Le]}else P[k]=W}),P}createSegmentGroup(b,I,P,k){const W=this.createSegments(b,I.segments,P,k);let te={};return Object.entries(I.children).forEach(([Le,Pe])=>{te[Le]=this.createSegmentGroup(b,Pe,P,k)}),new ln(W,te)}createSegments(b,I,P,k){return I.map(W=>W.path.startsWith(":")?this.findPosParam(b,W,k):this.findOrReturn(W,P))}findPosParam(b,I,P){const k=P[I.path.substring(1)];if(!k)throw new D.vHH(4001,!1);return k}findOrReturn(b,I){let P=0;for(const k of I){if(k.path===b.path)return I.splice(P),k;P++}return b}}const Gs={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ws(w,b,I,P,k){const W=qs(w,b,I);return W.matched?(P=function ai(w,b){return w.providers&&!w._injector&&(w._injector=(0,D.MMx)(w.providers,b,`Route: ${w.path}`)),w._injector??b}(b,P),function pr(w,b,I,P){const k=b.canMatch;if(!k||0===k.length)return(0,me.of)(!0);const W=k.map(te=>{const Le=Co(te,w);return Ct(function ti(w){return w&&bo(w.canMatch)}(Le)?Le.canMatch(b,I):w.runInContext(()=>Le(b,I)))});return(0,me.of)(W).pipe(Q(),Yn())}(P,b,I).pipe((0,We.U)(te=>!0===te?W:{...Gs}))):(0,me.of)(W)}function qs(w,b,I){if(""===b.path)return"full"===b.pathMatch&&(w.hasChildren()||I.length>0)?{...Gs}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const k=(b.matcher||Ai)(I,w,b);if(!k)return{...Gs};const W={};Object.entries(k.posParams??{}).forEach(([Le,Pe])=>{W[Le]=Pe.path});const te=k.consumed.length>0?{...W,...k.consumed[k.consumed.length-1].parameters}:W;return{matched:!0,consumedSegments:k.consumed,remainingSegments:I.slice(k.consumed.length),parameters:te,positionalParamSegments:k.posParams??{}}}function uo(w,b,I,P){return I.length>0&&function Qu(w,b,I){return I.some(P=>j(w,b,P)&&Cr(P)!==st)}(w,I,P)?{segmentGroup:new ln(b,Da(P,new ln(I,w.children))),slicedSegments:[]}:0===I.length&&function co(w,b,I){return I.some(P=>j(w,b,P))}(w,I,P)?{segmentGroup:new ln(w.segments,Ui(w,0,I,P,w.children)),slicedSegments:I}:{segmentGroup:new ln(w.segments,w.children),slicedSegments:I}}function Ui(w,b,I,P,k){const W={};for(const te of P)if(j(w,I,te)&&!k[Cr(te)]){const Le=new ln([],{});W[Cr(te)]=Le}return{...k,...W}}function Da(w,b){const I={};I[st]=b;for(const P of w)if(""===P.path&&Cr(P)!==st){const k=new ln([],{});I[Cr(P)]=k}return I}function j(w,b,I){return(!(w.hasChildren()||b.length>0)||"full"!==I.pathMatch)&&""===I.path}class A{constructor(b,I,P,k,W,te,Le){this.injector=b,this.configLoader=I,this.rootComponentType=P,this.config=k,this.urlTree=W,this.paramsInheritanceStrategy=te,this.urlSerializer=Le,this.allowRedirects=!0,this.applyRedirects=new ni(this.urlSerializer,this.urlTree)}noMatchError(b){return new D.vHH(4002,!1)}recognize(){const b=uo(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,b,st).pipe(Yt(I=>{if(I instanceof ui)return this.allowRedirects=!1,this.urlTree=I.urlTree,this.match(I.urlTree);throw I instanceof Kn?this.noMatchError(I):I}),(0,We.U)(I=>{const P=new Xi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},st,this.rootComponentType,null,{}),k=new Hr(P,I),W=new Ur("",k),te=function Xs(w,b,I=null,P=null){return Io(Yi(w),b,I,P)}(P,[],this.urlTree.queryParams,this.urlTree.fragment);return te.queryParams=this.urlTree.queryParams,W.url=this.urlSerializer.serialize(te),this.inheritParamsAndData(W._root),{state:W,tree:te}}))}match(b){return this.processSegmentGroup(this.injector,this.config,b.root,st).pipe(Yt(P=>{throw P instanceof Kn?this.noMatchError(P):P}))}inheritParamsAndData(b){const I=b.value,P=Gt(I,this.paramsInheritanceStrategy);I.params=Object.freeze(P.params),I.data=Object.freeze(P.data),b.children.forEach(k=>this.inheritParamsAndData(k))}processSegmentGroup(b,I,P,k){return 0===P.segments.length&&P.hasChildren()?this.processChildren(b,I,P):this.processSegment(b,I,P,P.segments,k,!0)}processChildren(b,I,P){const k=[];for(const W of Object.keys(P.children))"primary"===W?k.unshift(W):k.push(W);return(0,ye.D)(k).pipe(wt(W=>{const te=P.children[W],Le=function wa(w,b){const I=w.filter(P=>Cr(P)===b);return I.push(...w.filter(P=>Cr(P)!==b)),I}(I,W);return this.processSegmentGroup(b,Le,te,W)}),(0,Ln.R)((W,te)=>(W.push(...te),W)),(0,Dn.d)(null),function Dr(w,b){const I=arguments.length>=2;return P=>P.pipe(w?(0,mt.h)((k,W)=>w(k,W,P)):ze.y,Rn(1),I?(0,Dn.d)(b):(0,Bn.T)(()=>new ot.K))}(),(0,it.z)(W=>{if(null===W)return Nn(P);const te=B(W);return function v(w){w.sort((b,I)=>b.value.outlet===st?-1:I.value.outlet===st?1:b.value.outlet.localeCompare(I.value.outlet))}(te),(0,me.of)(te)}))}processSegment(b,I,P,k,W,te){return(0,ye.D)(I).pipe(wt(Le=>this.processSegmentAgainstRoute(Le._injector??b,I,Le,P,k,W,te).pipe(Yt(Pe=>{if(Pe instanceof Kn)return(0,me.of)(null);throw Pe}))),(0,kn.P)(Le=>!!Le),Yt(Le=>{if(O(Le))return function T(w,b,I){return 0===b.length&&!w.children[I]}(P,k,W)?(0,me.of)([]):Nn(P);throw Le}))}processSegmentAgainstRoute(b,I,P,k,W,te,Le){return function y(w,b,I,P){return!!(Cr(w)===P||P!==st&&j(b,I,w))&&("**"===w.path||qs(b,w,I).matched)}(P,k,W,te)?void 0===P.redirectTo?this.matchSegmentAgainstRoute(b,k,P,W,te,Le):Le&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(b,k,I,P,W,te):Nn(k):Nn(k)}expandSegmentAgainstRouteUsingRedirect(b,I,P,k,W,te){return"**"===k.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(b,P,k,te):this.expandRegularSegmentAgainstRouteUsingRedirect(b,I,P,k,W,te)}expandWildCardWithParamsAgainstRouteUsingRedirect(b,I,P,k){const W=this.applyRedirects.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?bi(W):this.applyRedirects.lineralizeSegments(P,W).pipe((0,it.z)(te=>{const Le=new ln(te,{});return this.processSegment(b,I,Le,te,k,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(b,I,P,k,W,te){const{matched:Le,consumedSegments:Pe,remainingSegments:Rt,positionalParamSegments:En}=qs(I,k,W);if(!Le)return Nn(I);const Sr=this.applyRedirects.applyRedirectCommands(Pe,k.redirectTo,En);return k.redirectTo.startsWith("/")?bi(Sr):this.applyRedirects.lineralizeSegments(k,Sr).pipe((0,it.z)(_n=>this.processSegment(b,P,I,_n.concat(Rt),te,!1)))}matchSegmentAgainstRoute(b,I,P,k,W,te){let Le;if("**"===P.path){const Pe=k.length>0?Js(k).parameters:{},Rt=new Xi(k,Pe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,se(P),Cr(P),P.component??P._loadedComponent??null,P,Ue(P));Le=(0,me.of)({snapshot:Rt,consumedSegments:[],remainingSegments:[]}),I.children={}}else Le=Ws(I,P,k,b).pipe((0,We.U)(({matched:Pe,consumedSegments:Rt,remainingSegments:En,parameters:Sr})=>Pe?{snapshot:new Xi(Rt,Sr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,se(P),Cr(P),P.component??P._loadedComponent??null,P,Ue(P)),consumedSegments:Rt,remainingSegments:En}:null));return Le.pipe((0,fe.w)(Pe=>null===Pe?Nn(I):this.getChildConfig(b=P._injector??b,P,k).pipe((0,fe.w)(({routes:Rt})=>{const En=P._loadedInjector??b,{snapshot:Sr,consumedSegments:_n,remainingSegments:Ks}=Pe,{segmentGroup:ho,slicedSegments:Ts}=uo(I,_n,Ks,Rt);if(0===Ts.length&&ho.hasChildren())return this.processChildren(En,Rt,ho).pipe((0,We.U)(Zs=>null===Zs?null:[new Hr(Sr,Zs)]));if(0===Rt.length&&0===Ts.length)return(0,me.of)([new Hr(Sr,[])]);const Ha=Cr(P)===W;return this.processSegment(En,Rt,ho,Ts,Ha?st:W,!0).pipe((0,We.U)(Zs=>[new Hr(Sr,Zs)]))}))))}getChildConfig(b,I,P){return I.children?(0,me.of)({routes:I.children,injector:b}):I.loadChildren?void 0!==I._loadedRoutes?(0,me.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function lr(w,b,I,P){const k=b.canLoad;if(void 0===k||0===k.length)return(0,me.of)(!0);const W=k.map(te=>{const Le=Co(te,w);return Ct(function Ii(w){return w&&bo(w.canLoad)}(Le)?Le.canLoad(b,I):w.runInContext(()=>Le(b,I)))});return(0,me.of)(W).pipe(Q(),Yn())}(b,I,P).pipe((0,it.z)(k=>k?this.configLoader.loadChildren(b,I).pipe((0,rn.b)(W=>{I._loadedRoutes=W.routes,I._loadedInjector=W.injector})):function Nr(w){return Cn(Li(!1,3))}())):(0,me.of)({routes:[],injector:b})}}function M(w){const b=w.value.routeConfig;return b&&""===b.path}function B(w){const b=[],I=new Set;for(const P of w){if(!M(P)){b.push(P);continue}const k=b.find(W=>P.value.routeConfig===W.value.routeConfig);void 0!==k?(k.children.push(...P.children),I.add(k)):b.push(P)}for(const P of I){const k=B(P.children);b.push(new Hr(P.value,k))}return b.filter(P=>!I.has(P))}function se(w){return w.data||{}}function Ue(w){return w.resolve||{}}function wn(w){return"string"==typeof w.title||null===w.title}function Zn(w){return(0,fe.w)(b=>{const I=w(b);return I?(0,ye.D)(I).pipe((0,We.U)(()=>b)):(0,me.of)(b)})}const Jn=new D.OlP("ROUTES");let sr=(()=>{class w{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,D.f3M)(D.Sil)}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,me.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const P=Ct(I.loadComponent()).pipe((0,We.U)(zn),(0,rn.b)(W=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=W}),Rr(()=>{this.componentLoaders.delete(I)})),k=new he(P,()=>new de.x).pipe(Nt());return this.componentLoaders.set(I,k),k}loadChildren(I,P){if(this.childrenLoaders.get(P))return this.childrenLoaders.get(P);if(P._loadedRoutes)return(0,me.of)({routes:P._loadedRoutes,injector:P._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(P);const W=function Ti(w,b,I,P){return Ct(w.loadChildren()).pipe((0,We.U)(zn),(0,it.z)(k=>k instanceof D.YKP||Array.isArray(k)?(0,me.of)(k):(0,ye.D)(b.compileModuleAsync(k))),(0,We.U)(k=>{P&&P(w);let W,te,Le=!1;return Array.isArray(k)?(te=k,!0):(W=k.create(I).injector,te=W.get(Jn,[],{optional:!0,self:!0}).flat()),{routes:te.map(Hs),injector:W}}))}(P,this.compiler,I,this.onLoadEndListener).pipe(Rr(()=>{this.childrenLoaders.delete(P)})),te=new he(W,()=>new de.x).pipe(Nt());return this.childrenLoaders.set(P,te),te}static#e=this.\u0275fac=function(P){return new(P||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function zn(w){return function Ki(w){return w&&"object"==typeof w&&"default"in w}(w)?w.default:w}let Ri=(()=>{class w{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new de.x,this.transitionAbortSubject=new de.x,this.configLoader=(0,D.f3M)(sr),this.environmentInjector=(0,D.f3M)(D.lqb),this.urlSerializer=(0,D.f3M)(q),this.rootContexts=(0,D.f3M)(Et),this.inputBindingEnabled=null!==(0,D.f3M)(ts,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,me.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=k=>this.events.next(new Pr(k)),this.configLoader.onLoadStartListener=k=>this.events.next(new yn(k))}complete(){this.transitions?.complete()}handleNavigationRequest(I){const P=++this.navigationId;this.transitions?.next({...this.transitions.value,...I,id:P})}setupNavigations(I,P,k){return this.transitions=new Ce.X({id:0,currentUrlTree:P,currentRawUrl:P,currentBrowserUrl:P,extractedUrl:I.urlHandlingStrategy.extract(P),urlAfterRedirects:I.urlHandlingStrategy.extract(P),rawUrl:P,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:to,restoredState:null,currentSnapshot:k.snapshot,targetSnapshot:null,currentRouterState:k,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,mt.h)(W=>0!==W.id),(0,We.U)(W=>({...W,extractedUrl:I.urlHandlingStrategy.extract(W.rawUrl)})),(0,fe.w)(W=>{this.currentTransition=W;let te=!1,Le=!1;return(0,me.of)(W).pipe((0,rn.b)(Pe=>{this.currentNavigation={id:Pe.id,initialUrl:Pe.rawUrl,extractedUrl:Pe.extractedUrl,trigger:Pe.source,extras:Pe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,fe.w)(Pe=>{const Rt=Pe.currentBrowserUrl.toString(),En=!I.navigated||Pe.extractedUrl.toString()!==Rt||Rt!==Pe.currentUrlTree.toString();if(!En&&"reload"!==(Pe.extras.onSameUrlNavigation??I.onSameUrlNavigation)){const _n="";return this.events.next(new Bs(Pe.id,this.urlSerializer.serialize(Pe.rawUrl),_n,0)),Pe.resolve(null),dr.E}if(I.urlHandlingStrategy.shouldProcessUrl(Pe.rawUrl))return(0,me.of)(Pe).pipe((0,fe.w)(_n=>{const Ks=this.transitions?.getValue();return this.events.next(new As(_n.id,this.urlSerializer.serialize(_n.extractedUrl),_n.source,_n.restoredState)),Ks!==this.transitions?.getValue()?dr.E:Promise.resolve(_n)}),function dt(w,b,I,P,k,W){return(0,it.z)(te=>function h(w,b,I,P,k,W,te="emptyOnly"){return new A(w,b,I,P,k,te,W).recognize()}(w,b,I,P,te.extractedUrl,k,W).pipe((0,We.U)(({state:Le,tree:Pe})=>({...te,targetSnapshot:Le,urlAfterRedirects:Pe}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,I.config,this.urlSerializer,I.paramsInheritanceStrategy),(0,rn.b)(_n=>{W.targetSnapshot=_n.targetSnapshot,W.urlAfterRedirects=_n.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_n.urlAfterRedirects};const Ks=new _i(_n.id,this.urlSerializer.serialize(_n.extractedUrl),this.urlSerializer.serialize(_n.urlAfterRedirects),_n.targetSnapshot);this.events.next(Ks)}));if(En&&I.urlHandlingStrategy.shouldProcessUrl(Pe.currentRawUrl)){const{id:_n,extractedUrl:Ks,source:ho,restoredState:Ts,extras:Ha}=Pe,Zs=new As(_n,this.urlSerializer.serialize(Ks),ho,Ts);this.events.next(Zs);const bu=hr(0,this.rootComponentType).snapshot;return this.currentTransition=W={...Pe,targetSnapshot:bu,urlAfterRedirects:Ks,extras:{...Ha,skipLocationChange:!1,replaceUrl:!1}},(0,me.of)(W)}{const _n="";return this.events.next(new Bs(Pe.id,this.urlSerializer.serialize(Pe.extractedUrl),_n,1)),Pe.resolve(null),dr.E}}),(0,rn.b)(Pe=>{const Rt=new Xr(Pe.id,this.urlSerializer.serialize(Pe.extractedUrl),this.urlSerializer.serialize(Pe.urlAfterRedirects),Pe.targetSnapshot);this.events.next(Rt)}),(0,We.U)(Pe=>(this.currentTransition=W={...Pe,guards:$o(Pe.targetSnapshot,Pe.currentSnapshot,this.rootContexts)},W)),function J(w,b){return(0,it.z)(I=>{const{targetSnapshot:P,currentSnapshot:k,guards:{canActivateChecks:W,canDeactivateChecks:te}}=I;return 0===te.length&&0===W.length?(0,me.of)({...I,guardsResult:!0}):function le(w,b,I,P){return(0,ye.D)(w).pipe((0,it.z)(k=>function dn(w,b,I,P,k){const W=b&&b.routeConfig?b.routeConfig.canDeactivate:null;if(!W||0===W.length)return(0,me.of)(!0);const te=W.map(Le=>{const Pe=Wi(b)??k,Rt=Co(Le,Pe);return Ct(function oa(w){return w&&bo(w.canDeactivate)}(Rt)?Rt.canDeactivate(w,b,I,P):Pe.runInContext(()=>Rt(w,b,I,P))).pipe((0,kn.P)())});return(0,me.of)(te).pipe(Q())}(k.component,k.route,I,b,P)),(0,kn.P)(k=>!0!==k,!0))}(te,P,k,w).pipe((0,it.z)(Le=>Le&&function Ho(w){return"boolean"==typeof w}(Le)?function xe(w,b,I,P){return(0,ye.D)(b).pipe(wt(k=>(0,ae.z)(function kt(w,b){return null!==w&&b&&b(new yi(w)),(0,me.of)(!0)}(k.route.parent,P),function Xe(w,b){return null!==w&&b&&b(new ei(w)),(0,me.of)(!0)}(k.route,P),function tn(w,b,I){const P=b[b.length-1],W=b.slice(0,b.length-1).reverse().map(te=>function ao(w){const b=w.routeConfig?w.routeConfig.canActivateChild:null;return b&&0!==b.length?{node:w,guards:b}:null}(te)).filter(te=>null!==te).map(te=>ct(()=>{const Le=te.guards.map(Pe=>{const Rt=Wi(te.node)??I,En=Co(Pe,Rt);return Ct(function zo(w){return w&&bo(w.canActivateChild)}(En)?En.canActivateChild(P,w):Rt.runInContext(()=>En(P,w))).pipe((0,kn.P)())});return(0,me.of)(Le).pipe(Q())}));return(0,me.of)(W).pipe(Q())}(w,k.path,I),function Ot(w,b,I){const P=b.routeConfig?b.routeConfig.canActivate:null;if(!P||0===P.length)return(0,me.of)(!0);const k=P.map(W=>ct(()=>{const te=Wi(b)??I,Le=Co(W,te);return Ct(function Ro(w){return w&&bo(w.canActivate)}(Le)?Le.canActivate(b,w):te.runInContext(()=>Le(b,w))).pipe((0,kn.P)())}));return(0,me.of)(k).pipe(Q())}(w,k.route,I))),(0,kn.P)(k=>!0!==k,!0))}(P,W,w,b):(0,me.of)(Le)),(0,We.U)(Le=>({...I,guardsResult:Le})))})}(this.environmentInjector,Pe=>this.events.next(Pe)),(0,rn.b)(Pe=>{if(W.guardsResult=Pe.guardsResult,Yr(Pe.guardsResult))throw Ao(0,Pe.guardsResult);const Rt=new js(Pe.id,this.urlSerializer.serialize(Pe.extractedUrl),this.urlSerializer.serialize(Pe.urlAfterRedirects),Pe.targetSnapshot,!!Pe.guardsResult);this.events.next(Rt)}),(0,mt.h)(Pe=>!!Pe.guardsResult||(this.cancelNavigationTransition(Pe,"",3),!1)),Zn(Pe=>{if(Pe.guards.canActivateChecks.length)return(0,me.of)(Pe).pipe((0,rn.b)(Rt=>{const En=new Jo(Rt.id,this.urlSerializer.serialize(Rt.extractedUrl),this.urlSerializer.serialize(Rt.urlAfterRedirects),Rt.targetSnapshot);this.events.next(En)}),(0,fe.w)(Rt=>{let En=!1;return(0,me.of)(Rt).pipe(function Vt(w,b){return(0,it.z)(I=>{const{targetSnapshot:P,guards:{canActivateChecks:k}}=I;if(!k.length)return(0,me.of)(I);let W=0;return(0,ye.D)(k).pipe(wt(te=>function yt(w,b,I,P){const k=w.routeConfig,W=w._resolve;return void 0!==k?.title&&!wn(k)&&(W[on]=k.title),function nt(w,b,I,P){const k=function Mt(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}(w);if(0===k.length)return(0,me.of)({});const W={};return(0,ye.D)(k).pipe((0,it.z)(te=>function sn(w,b,I,P){const k=Wi(b)??P,W=Co(w,k);return Ct(W.resolve?W.resolve(b,I):k.runInContext(()=>W(b,I)))}(w[te],b,I,P).pipe((0,kn.P)(),(0,rn.b)(Le=>{W[te]=Le}))),Rn(1),function Sn(w){return(0,We.U)(()=>w)}(W),Yt(te=>O(te)?dr.E:Cn(te)))}(W,w,b,P).pipe((0,We.U)(te=>(w._resolvedData=te,w.data=Gt(w,I).resolve,k&&wn(k)&&(w.data[on]=k.title),null)))}(te.route,P,w,b)),(0,rn.b)(()=>W++),Rn(1),(0,it.z)(te=>W===k.length?(0,me.of)(I):dr.E))})}(I.paramsInheritanceStrategy,this.environmentInjector),(0,rn.b)({next:()=>En=!0,complete:()=>{En||this.cancelNavigationTransition(Rt,"",2)}}))}),(0,rn.b)(Rt=>{const En=new Ci(Rt.id,this.urlSerializer.serialize(Rt.extractedUrl),this.urlSerializer.serialize(Rt.urlAfterRedirects),Rt.targetSnapshot);this.events.next(En)}))}),Zn(Pe=>{const Rt=En=>{const Sr=[];En.routeConfig?.loadComponent&&!En.routeConfig._loadedComponent&&Sr.push(this.configLoader.loadComponent(En.routeConfig).pipe((0,rn.b)(_n=>{En.component=_n}),(0,We.U)(()=>{})));for(const _n of En.children)Sr.push(...Rt(_n));return Sr};return De(Rt(Pe.targetSnapshot.root)).pipe((0,Dn.d)(),(0,be.q)(1))}),Zn(()=>this.afterPreactivation()),(0,We.U)(Pe=>{const Rt=function _s(w,b,I){const P=ki(w,b._root,I?I._root:void 0);return new as(P,b)}(I.routeReuseStrategy,Pe.targetSnapshot,Pe.currentRouterState);return this.currentTransition=W={...Pe,targetRouterState:Rt},W}),(0,rn.b)(()=>{this.events.next(new Cs)}),((w,b,I,P)=>(0,We.U)(k=>(new oo(b,k.targetRouterState,k.currentRouterState,I,P).activate(w),k)))(this.rootContexts,I.routeReuseStrategy,Pe=>this.events.next(Pe),this.inputBindingEnabled),(0,be.q)(1),(0,rn.b)({next:Pe=>{te=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ps(Pe.id,this.urlSerializer.serialize(Pe.extractedUrl),this.urlSerializer.serialize(Pe.urlAfterRedirects))),I.titleStrategy?.updateTitle(Pe.targetRouterState.snapshot),Pe.resolve(!0)},complete:()=>{te=!0}}),function Wr(w){return(0,It.e)((b,I)=>{(0,Zt.Xf)(w).subscribe((0,we.x)(I,()=>I.complete(),Ir.Z)),!I.closed&&b.subscribe(I)})}(this.transitionAbortSubject.pipe((0,rn.b)(Pe=>{throw Pe}))),Rr(()=>{te||Le||this.cancelNavigationTransition(W,"",1),this.currentNavigation?.id===W.id&&(this.currentNavigation=null)}),Yt(Pe=>{if(Le=!0,oi(Pe))this.events.next(new Do(W.id,this.urlSerializer.serialize(W.extractedUrl),Pe.message,Pe.cancellationCode)),function ns(w){return oi(w)&&Yr(w.url)}(Pe)?this.events.next(new Uo(Pe.url)):W.resolve(!1);else{this.events.next(new Vo(W.id,this.urlSerializer.serialize(W.extractedUrl),Pe,W.targetSnapshot??void 0));try{W.resolve(I.errorHandler(Pe))}catch(Rt){W.reject(Rt)}}return dr.E}))}))}cancelNavigationTransition(I,P,k){const W=new Do(I.id,this.urlSerializer.serialize(I.extractedUrl),P,k);this.events.next(W),I.resolve(!1)}static#e=this.\u0275fac=function(P){return new(P||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function bs(w){return w!==to}let Un=(()=>{class w{buildTitle(I){let P,k=I.root;for(;void 0!==k;)P=this.getResolvedTitleForRoute(k)??P,k=k.children.find(W=>W.outlet===st);return P}getResolvedTitleForRoute(I){return I.data[on]}static#e=this.\u0275fac=function(P){return new(P||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:function(){return(0,D.f3M)(au)},providedIn:"root"})}return w})(),au=(()=>{class w extends Un{constructor(I){super(),this.title=I}updateTitle(I){const P=this.buildTitle(I);void 0!==P&&this.title.setTitle(P)}static#e=this.\u0275fac=function(P){return new(P||w)(D.LFG(fi.Dx))};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})(),Po=(()=>{class w{static#e=this.\u0275fac=function(P){return new(P||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:function(){return(0,D.f3M)(kc)},providedIn:"root"})}return w})();class Pi{shouldDetach(b){return!1}store(b,I){}shouldAttach(b){return!1}retrieve(b){return null}shouldReuseRoute(b,I){return b.routeConfig===I.routeConfig}}let kc=(()=>{class w extends Pi{static#e=this.\u0275fac=function(){let I;return function(k){return(I||(I=D.n5z(w)))(k||w)}}();static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const Mo=new D.OlP("",{providedIn:"root",factory:()=>({})});let zt=(()=>{class w{static#e=this.\u0275fac=function(P){return new(P||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:function(){return(0,D.f3M)(Dt)},providedIn:"root"})}return w})(),Dt=(()=>{class w{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,P){return I}static#e=this.\u0275fac=function(P){return new(P||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();var Jt=function(w){return w[w.COMPLETE=0]="COMPLETE",w[w.FAILED=1]="FAILED",w[w.REDIRECTING=2]="REDIRECTING",w}(Jt||{});function mn(w,b){w.events.pipe((0,mt.h)(I=>I instanceof ps||I instanceof Do||I instanceof Vo||I instanceof Bs),(0,We.U)(I=>I instanceof ps||I instanceof Bs?Jt.COMPLETE:I instanceof Do&&(0===I.code||1===I.code)?Jt.REDIRECTING:Jt.FAILED),(0,mt.h)(I=>I!==Jt.REDIRECTING),(0,be.q)(1)).subscribe(()=>{b()})}function xr(w){throw w}function Zi(w,b,I){return b.parse("/")}const Ke={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let pn=(()=>{class w{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,D.f3M)(D.c2e),this.isNgZoneEnabled=!1,this._events=new de.x,this.options=(0,D.f3M)(Mo,{optional:!0})||{},this.pendingTasks=(0,D.f3M)(D.HDt),this.errorHandler=this.options.errorHandler||xr,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Zi,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,D.f3M)(zt),this.routeReuseStrategy=(0,D.f3M)(Po),this.titleStrategy=(0,D.f3M)(Un),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,D.f3M)(Jn,{optional:!0})?.flat()??[],this.navigationTransitions=(0,D.f3M)(Ri),this.urlSerializer=(0,D.f3M)(q),this.location=(0,D.f3M)(ve.Ye),this.componentInputBindingEnabled=!!(0,D.f3M)(ts,{optional:!0}),this.eventsSubscription=new Wn.w0,this.isNgZoneEnabled=(0,D.f3M)(D.R0b)instanceof D.R0b&&D.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Kr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=hr(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(I=>{this.lastSuccessfulId=I.id,this.currentPageId=this.browserPageId},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const I=this.navigationTransitions.events.subscribe(P=>{try{const{currentTransition:k}=this.navigationTransitions;if(null===k)return void(Ut(P)&&this._events.next(P));if(P instanceof As)bs(k.source)&&(this.browserUrlTree=k.extractedUrl);else if(P instanceof Bs)this.rawUrlTree=k.rawUrl;else if(P instanceof _i){if("eager"===this.urlUpdateStrategy){if(!k.extras.skipLocationChange){const W=this.urlHandlingStrategy.merge(k.urlAfterRedirects,k.rawUrl);this.setBrowserUrl(W,k)}this.browserUrlTree=k.urlAfterRedirects}}else if(P instanceof Cs)this.currentUrlTree=k.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(k.urlAfterRedirects,k.rawUrl),this.routerState=k.targetRouterState,"deferred"===this.urlUpdateStrategy&&(k.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,k),this.browserUrlTree=k.urlAfterRedirects);else if(P instanceof Do)0!==P.code&&1!==P.code&&(this.navigated=!0),(3===P.code||2===P.code)&&this.restoreHistory(k);else if(P instanceof Uo){const W=this.urlHandlingStrategy.merge(P.url,k.currentRawUrl),te={skipLocationChange:k.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||bs(k.source)};this.scheduleNavigation(W,to,null,te,{resolve:k.resolve,reject:k.reject,promise:k.promise})}P instanceof Vo&&this.restoreHistory(k,!0),P instanceof ps&&(this.navigated=!0),Ut(P)&&this._events.next(P)}catch(k){this.navigationTransitions.transitionAbortSubject.next(k)}});this.eventsSubscription.add(I)}resetRootComponentType(I){this.routerState.root.component=I,this.navigationTransitions.rootComponentType=I}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const I=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),to,I)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const P="popstate"===I.type?"popstate":"hashchange";"popstate"===P&&setTimeout(()=>{this.navigateToSyncWithBrowser(I.url,P,I.state)},0)}))}navigateToSyncWithBrowser(I,P,k){const W={replaceUrl:!0},te=k?.navigationId?k:null;if(k){const Pe={...k};delete Pe.navigationId,delete Pe.\u0275routerPageId,0!==Object.keys(Pe).length&&(W.state=Pe)}const Le=this.parseUrl(I);this.scheduleNavigation(Le,P,te,W)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(I){this.config=I.map(Hs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(I,P={}){const{relativeTo:k,queryParams:W,fragment:te,queryParamsHandling:Le,preserveFragment:Pe}=P,Rt=Pe?this.currentUrlTree.fragment:te;let Sr,En=null;switch(Le){case"merge":En={...this.currentUrlTree.queryParams,...W};break;case"preserve":En=this.currentUrlTree.queryParams;break;default:En=W||null}null!==En&&(En=this.removeEmptyProps(En));try{Sr=Yi(k?k.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof I[0]||!I[0].startsWith("/"))&&(I=[]),Sr=this.currentUrlTree.root}return Io(Sr,I,En,Rt??null)}navigateByUrl(I,P={skipLocationChange:!1}){const k=Yr(I)?I:this.parseUrl(I),W=this.urlHandlingStrategy.merge(k,this.rawUrlTree);return this.scheduleNavigation(W,to,null,P)}navigate(I,P={skipLocationChange:!1}){return function Ba(w){for(let b=0;b<w.length;b++)if(null==w[b])throw new D.vHH(4008,!1)}(I),this.navigateByUrl(this.createUrlTree(I,P),P)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let P;try{P=this.urlSerializer.parse(I)}catch(k){P=this.malformedUriErrorHandler(k,this.urlSerializer,I)}return P}isActive(I,P){let k;if(k=!0===P?{...Ke}:!1===P?{...yr}:P,Yr(I))return kr(this.currentUrlTree,I,k);const W=this.parseUrl(I);return kr(this.currentUrlTree,W,k)}removeEmptyProps(I){return Object.keys(I).reduce((P,k)=>{const W=I[k];return null!=W&&(P[k]=W),P},{})}scheduleNavigation(I,P,k,W,te){if(this.disposed)return Promise.resolve(!1);let Le,Pe,Rt;te?(Le=te.resolve,Pe=te.reject,Rt=te.promise):Rt=new Promise((Sr,_n)=>{Le=Sr,Pe=_n});const En=this.pendingTasks.add();return mn(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(En))}),this.navigationTransitions.handleNavigationRequest({source:P,restoredState:k,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:I,extras:W,resolve:Le,reject:Pe,promise:Rt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Rt.catch(Sr=>Promise.reject(Sr))}setBrowserUrl(I,P){const k=this.urlSerializer.serialize(I);if(this.location.isCurrentPathEqualTo(k)||P.extras.replaceUrl){const te={...P.extras.state,...this.generateNgRouterState(P.id,this.browserPageId)};this.location.replaceState(k,"",te)}else{const W={...P.extras.state,...this.generateNgRouterState(P.id,this.browserPageId+1)};this.location.go(k,"",W)}}restoreHistory(I,P=!1){if("computed"===this.canceledNavigationResolution){const W=this.currentPageId-this.browserPageId;0!==W?this.location.historyGo(W):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===W&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(I,P){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:P}:{navigationId:I}}static#e=this.\u0275fac=function(P){return new(P||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function Ut(w){return!(w instanceof Cs||w instanceof Uo)}class ke{}let Sl=(()=>{class w{constructor(I,P,k,W,te){this.router=I,this.injector=k,this.preloadingStrategy=W,this.loader=te}setUpPreloading(){this.subscription=this.router.events.pipe((0,mt.h)(I=>I instanceof ps),wt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,P){const k=[];for(const W of P){W.providers&&!W._injector&&(W._injector=(0,D.MMx)(W.providers,I,`Route: ${W.path}`));const te=W._injector??I,Le=W._loadedInjector??te;(W.loadChildren&&!W._loadedRoutes&&void 0===W.canLoad||W.loadComponent&&!W._loadedComponent)&&k.push(this.preloadConfig(te,W)),(W.children||W._loadedRoutes)&&k.push(this.processRoutes(Le,W.children??W._loadedRoutes))}return(0,ye.D)(k).pipe((0,qr.J)())}preloadConfig(I,P){return this.preloadingStrategy.preload(P,()=>{let k;k=P.loadChildren&&void 0===P.canLoad?this.loader.loadChildren(I,P):(0,me.of)(null);const W=k.pipe((0,it.z)(te=>null===te?(0,me.of)(void 0):(P._loadedRoutes=te.routes,P._loadedInjector=te.injector,this.processRoutes(te.injector??I,te.routes))));if(P.loadComponent&&!P._loadedComponent){const te=this.loader.loadComponent(P);return(0,ye.D)([W,te]).pipe((0,qr.J)())}return W})}static#e=this.\u0275fac=function(P){return new(P||w)(D.LFG(pn),D.LFG(D.Sil),D.LFG(D.lqb),D.LFG(ke),D.LFG(sr))};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const Yu=new D.OlP("");let uu=(()=>{class w{constructor(I,P,k,W,te={}){this.urlSerializer=I,this.transitions=P,this.viewportScroller=k,this.zone=W,this.options=te,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},te.scrollPositionRestoration=te.scrollPositionRestoration||"disabled",te.anchorScrolling=te.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof As?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof ps?(this.lastId=I.id,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.urlAfterRedirects).fragment)):I instanceof Bs&&0===I.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof ro&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,P){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ro(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(P){D.$Z()};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac})}return w})();function Es(w,b){return{\u0275kind:w,\u0275providers:b}}function ci(){const w=(0,D.f3M)(D.zs3);return b=>{const I=w.get(D.z2F);if(b!==I.components[0])return;const P=w.get(pn),k=w.get(vn);1===w.get(Br)&&P.initialNavigation(),w.get(Aa,null,D.XFs.Optional)?.setUpPreloading(),w.get(Yu,null,D.XFs.Optional)?.init(),P.resetRootComponentType(I.componentTypes[0]),k.closed||(k.next(),k.complete(),k.unsubscribe())}}const vn=new D.OlP("",{factory:()=>new de.x}),Br=new D.OlP("",{providedIn:"root",factory:()=>1}),Aa=new D.OlP("");function $n(w){return Es(0,[{provide:Aa,useExisting:Sl},{provide:ke,useExisting:w}])}const aa=new D.OlP("ROUTER_FORROOT_GUARD"),Ca=[ve.Ye,{provide:q,useClass:Y},pn,Et,{provide:vi,useFactory:function Nd(w){return w.routerState.root},deps:[pn]},sr,[]];function Is(){return new D.PXZ("Router",pn)}let Vc=(()=>{class w{constructor(I){}static forRoot(I,P){return{ngModule:w,providers:[Ca,[],{provide:Jn,multi:!0,useValue:I},{provide:aa,useFactory:Rs,deps:[[pn,new D.FiY,new D.tp0]]},{provide:Mo,useValue:P||{}},P?.useHash?{provide:ve.S$,useClass:ve.Do}:{provide:ve.S$,useClass:ve.b0},{provide:Yu,useFactory:()=>{const w=(0,D.f3M)(ve.EM),b=(0,D.f3M)(D.R0b),I=(0,D.f3M)(Mo),P=(0,D.f3M)(Ri),k=(0,D.f3M)(q);return I.scrollOffset&&w.setOffset(I.scrollOffset),new uu(k,P,w,b,I)}},P?.preloadingStrategy?$n(P.preloadingStrategy).\u0275providers:[],{provide:D.PXZ,multi:!0,useFactory:Is},P?.initialNavigation?Su(P):[],P?.bindToComponentInputs?Es(8,[ms,{provide:ts,useExisting:ms}]).\u0275providers:[],[{provide:Bc,useFactory:ci},{provide:D.tb,multi:!0,useExisting:Bc}]]}}static forChild(I){return{ngModule:w,providers:[{provide:Jn,multi:!0,useValue:I}]}}static#e=this.\u0275fac=function(P){return new(P||w)(D.LFG(aa,8))};static#t=this.\u0275mod=D.oAB({type:w});static#n=this.\u0275inj=D.cJS({})}return w})();function Rs(w){return"guarded"}function Su(w){return["disabled"===w.initialNavigation?Es(3,[{provide:D.ip1,multi:!0,useFactory:()=>{const b=(0,D.f3M)(pn);return()=>{b.setUpLocationChangeListener()}}},{provide:Br,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?Es(2,[{provide:Br,useValue:0},{provide:D.ip1,multi:!0,deps:[D.zs3],useFactory:b=>{const I=b.get(ve.V_,Promise.resolve());return()=>I.then(()=>new Promise(P=>{const k=b.get(pn),W=b.get(vn);mn(k,()=>{P(!0)}),b.get(Ri).afterPreactivation=()=>(P(!0),W.closed?(0,me.of)(void 0):W),k.initialNavigation()}))}}]).\u0275providers:[]]}const Bc=new D.OlP("")},3106:(Ht,Fe,$)=>{$.d(Fe,{Z:()=>We});var D=$(9058),oe=$(4537),x=$(534),Ie=$(7879);class ye{constructor(ht,at){this._delegate=ht,this.firebase=at,(0,x._addComponent)(ht,new oe.wA("app-compat",()=>this,"PUBLIC")),this.container=ht.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ht){this._delegate.automaticDataCollectionEnabled=ht}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ht=>{this._delegate.checkDestroyed(),ht()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,x.deleteApp)(this._delegate)))}_getService(ht,at=x._DEFAULT_ENTRY_NAME){var Lt;this._delegate.checkDestroyed();const Te=this._delegate.container.getProvider(ht);return!Te.isInitialized()&&"EXPLICIT"===(null===(Lt=Te.getComponent())||void 0===Lt?void 0:Lt.instantiationMode)&&Te.initialize(),Te.getImmediate({identifier:at})}_removeServiceInstance(ht,at=x._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ht).clearInstance(at)}_addComponent(ht){(0,x._addComponent)(this._delegate,ht)}_addOrOverwriteComponent(ht){(0,x._addOrOverwriteComponent)(this._delegate,ht)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new D.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),re=function Ne(){const Je=function He(Je){const ht={},at={__esModule:!0,initializeApp:function we(Ye,ot={}){const ae=x.initializeApp(Ye,ot);if((0,D.r3)(ht,ae.name))return ht[ae.name];const Zt=new Je(ae,at);return ht[ae.name]=Zt,Zt},app:Te,registerVersion:x.registerVersion,setLogLevel:x.setLogLevel,onLog:x.onLog,apps:null,SDK_VERSION:x.SDK_VERSION,INTERNAL:{registerComponent:function De(Ye){const ot=Ye.name,ae=ot.replace("-compat","");if(x._registerComponent(Ye)&&"PUBLIC"===Ye.type){const Zt=(ct=Te())=>{if("function"!=typeof ct[ae])throw Ce.create("invalid-app-argument",{appName:ot});return ct[ae]()};void 0!==Ye.serviceProps&&(0,D.ZB)(Zt,Ye.serviceProps),at[ae]=Zt,Je.prototype[ae]=function(...ct){return this._getService.bind(this,ot).apply(this,Ye.multipleInstances?ct:[])}}return"PUBLIC"===Ye.type?at[ae]:null},removeApp:function Lt(Ye){delete ht[Ye]},useAsService:function Ve(Ye,ot){return"serverAuth"===ot?null:ot},modularAPIs:x}};function Te(Ye){if(!(0,D.r3)(ht,Ye=Ye||x._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:Ye});return ht[Ye]}return at.default=at,Object.defineProperty(at,"apps",{get:function je(){return Object.keys(ht).map(Ye=>ht[Ye])}}),Te.App=Je,at}(ye);return Je.INTERNAL=Object.assign(Object.assign({},Je.INTERNAL),{createFirebaseNamespace:Ne,extendNamespace:function ht(at){(0,D.ZB)(Je,at)},createSubscribe:D.ne,ErrorFactory:D.LL,deepExtend:D.ZB}),Je}(),ie=new Ie.Yd("@firebase/app-compat");if((0,D.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Je=self.firebase.SDK_VERSION;Je&&Je.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=re;!function ze(Je){(0,x.registerVersion)("@firebase/app-compat","0.2.23",Je)}()},534:(Ht,Fe,$)=>{$.r(Fe),$.d(Fe,{FirebaseError:()=>Ie.ZR,SDK_VERSION:()=>Ar,_DEFAULT_ENTRY_NAME:()=>st,_addComponent:()=>Ai,_addOrOverwriteComponent:()=>ii,_apps:()=>jt,_clearComponents:()=>Ct,_components:()=>Fn,_getProvider:()=>mr,_registerComponent:()=>Tn,_removeServiceInstance:()=>Js,deleteApp:()=>Hi,getApp:()=>pi,getApps:()=>hs,initializeApp:()=>Os,onLog:()=>ln,registerVersion:()=>Kr,setLogLevel:()=>gi});var D=$(5861),oe=$(4537),x=$(7879),Ie=$(9058);const ye=(Be,Ae)=>Ae.some(tt=>Be instanceof tt);let me,Ce;const re=new WeakMap,ie=new WeakMap,ge=new WeakMap,Qe=new WeakMap,ze=new WeakMap;let ht={get(Be,Ae,tt){if(Be instanceof IDBTransaction){if("done"===Ae)return ie.get(Be);if("objectStoreNames"===Ae)return Be.objectStoreNames||ge.get(Be);if("store"===Ae)return tt.objectStoreNames[1]?void 0:tt.objectStore(tt.objectStoreNames[0])}return we(Be[Ae])},set:(Be,Ae,tt)=>(Be[Ae]=tt,!0),has:(Be,Ae)=>Be instanceof IDBTransaction&&("done"===Ae||"store"===Ae)||Ae in Be};function Te(Be){return"function"==typeof Be?function Lt(Be){return Be!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ne(){return Ce||(Ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Be)?function(...Ae){return Be.apply(je(this),Ae),we(re.get(this))}:function(...Ae){return we(Be.apply(je(this),Ae))}:function(Ae,...tt){const Bt=Be.call(je(this),Ae,...tt);return ge.set(Bt,Ae.sort?Ae.sort():[Ae]),we(Bt)}}(Be):(Be instanceof IDBTransaction&&function Je(Be){if(ie.has(Be))return;const Ae=new Promise((tt,Bt)=>{const Pt=()=>{Be.removeEventListener("complete",vt),Be.removeEventListener("error",fn),Be.removeEventListener("abort",fn)},vt=()=>{tt(),Pt()},fn=()=>{Bt(Be.error||new DOMException("AbortError","AbortError")),Pt()};Be.addEventListener("complete",vt),Be.addEventListener("error",fn),Be.addEventListener("abort",fn)});ie.set(Be,Ae)}(Be),ye(Be,function He(){return me||(me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Be,ht):Be)}function we(Be){if(Be instanceof IDBRequest)return function We(Be){const Ae=new Promise((tt,Bt)=>{const Pt=()=>{Be.removeEventListener("success",vt),Be.removeEventListener("error",fn)},vt=()=>{tt(we(Be.result)),Pt()},fn=()=>{Bt(Be.error),Pt()};Be.addEventListener("success",vt),Be.addEventListener("error",fn)});return Ae.then(tt=>{tt instanceof IDBCursor&&re.set(tt,Be)}).catch(()=>{}),ze.set(Ae,Be),Ae}(Be);if(Qe.has(Be))return Qe.get(Be);const Ae=Te(Be);return Ae!==Be&&(Qe.set(Be,Ae),ze.set(Ae,Be)),Ae}const je=Be=>ze.get(Be),Ye=["get","getKey","getAll","getAllKeys","count"],ot=["put","add","delete","clear"],ae=new Map;function Zt(Be,Ae){if(!(Be instanceof IDBDatabase)||Ae in Be||"string"!=typeof Ae)return;if(ae.get(Ae))return ae.get(Ae);const tt=Ae.replace(/FromIndex$/,""),Bt=Ae!==tt,Pt=ot.includes(tt);if(!(tt in(Bt?IDBIndex:IDBObjectStore).prototype)||!Pt&&!Ye.includes(tt))return;const vt=function(){var fn=(0,D.Z)(function*(rr,...ir){const si=this.transaction(rr,Pt?"readwrite":"readonly");let Fr=si.store;return Bt&&(Fr=Fr.index(ir.shift())),(yield Promise.all([Fr[tt](...ir),Pt&&si.done]))[0]});return function(ir){return fn.apply(this,arguments)}}();return ae.set(Ae,vt),vt}!function at(Be){ht=Be(ht)}(Be=>({...Be,get:(Ae,tt,Bt)=>Zt(Ae,tt)||Be.get(Ae,tt,Bt),has:(Ae,tt)=>!!Zt(Ae,tt)||Be.has(Ae,tt)}));class ct{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(function nr(Be){const Ae=Be.getComponent();return"VERSION"===Ae?.type}(tt)){const Bt=tt.getImmediate();return`${Bt.library}/${Bt.version}`}return null}).filter(tt=>tt).join(" ")}}const Cn="@firebase/app",Wn=new x.Yd("@firebase/app"),st="[DEFAULT]",on={[Cn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},jt=new Map,Fn=new Map;function Ai(Be,Ae){try{Be.container.addComponent(Ae)}catch(tt){Wn.debug(`Component ${Ae.name} failed to register with FirebaseApp ${Be.name}`,tt)}}function ii(Be,Ae){Be.container.addOrOverwriteComponent(Ae)}function Tn(Be){const Ae=Be.name;if(Fn.has(Ae))return Wn.debug(`There were multiple attempts to register component ${Ae}.`),!1;Fn.set(Ae,Be);for(const tt of jt.values())Ai(tt,Be);return!0}function mr(Be,Ae){const tt=Be.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),Be.container.getProvider(Ae)}function Js(Be,Ae,tt=st){mr(Be,Ae).clearInstance(tt)}function Ct(){Fn.clear()}const gn=new Ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class kr{constructor(Ae,tt,Bt){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=Bt,this.container.addComponent(new oe.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw gn.create("app-deleted",{appName:this._name})}}const Ar="10.6.0";function Os(Be,Ae={}){let tt=Be;"object"!=typeof Ae&&(Ae={name:Ae});const Bt=Object.assign({name:st,automaticDataCollectionEnabled:!1},Ae),Pt=Bt.name;if("string"!=typeof Pt||!Pt)throw gn.create("bad-app-name",{appName:String(Pt)});if(tt||(tt=(0,Ie.aH)()),!tt)throw gn.create("no-options");const vt=jt.get(Pt);if(vt){if((0,Ie.vZ)(tt,vt.options)&&(0,Ie.vZ)(Bt,vt.config))return vt;throw gn.create("duplicate-app",{appName:Pt})}const fn=new oe.H0(Pt);for(const ir of Fn.values())fn.addComponent(ir);const rr=new kr(tt,Bt,fn);return jt.set(Pt,rr),rr}function pi(Be=st){const Ae=jt.get(Be);if(!Ae&&Be===st&&(0,Ie.aH)())return Os();if(!Ae)throw gn.create("no-app",{appName:Be});return Ae}function hs(){return Array.from(jt.values())}function Hi(Be){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,D.Z)(function*(Be){const Ae=Be.name;jt.has(Ae)&&(jt.delete(Ae),yield Promise.all(Be.container.getProviders().map(tt=>tt.delete())),Be.isDeleted=!0)})).apply(this,arguments)}function Kr(Be,Ae,tt){var Bt;let Pt=null!==(Bt=on[Be])&&void 0!==Bt?Bt:Be;tt&&(Pt+=`-${tt}`);const vt=Pt.match(/\s|\//),fn=Ae.match(/\s|\//);if(vt||fn){const rr=[`Unable to register library "${Pt}" with version "${Ae}":`];return vt&&rr.push(`library name "${Pt}" contains illegal characters (whitespace or "/")`),vt&&fn&&rr.push("and"),fn&&rr.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void Wn.warn(rr.join(" "))}Tn(new oe.wA(`${Pt}-version`,()=>({library:Pt,version:Ae}),"VERSION"))}function ln(Be,Ae){if(null!==Be&&"function"!=typeof Be)throw gn.create("invalid-log-argument");(0,x.Am)(Be,Ae)}function gi(Be){(0,x.Ub)(Be)}const zi="firebase-heartbeat-database",Zr=1,ce="firebase-heartbeat-store";let q=null;function Y(){return q||(q=function De(Be,Ae,{blocked:tt,upgrade:Bt,blocking:Pt,terminated:vt}={}){const fn=indexedDB.open(Be,Ae),rr=we(fn);return Bt&&fn.addEventListener("upgradeneeded",ir=>{Bt(we(fn.result),ir.oldVersion,ir.newVersion,we(fn.transaction),ir)}),tt&&fn.addEventListener("blocked",ir=>tt(ir.oldVersion,ir.newVersion,ir)),rr.then(ir=>{vt&&ir.addEventListener("close",()=>vt()),Pt&&ir.addEventListener("versionchange",si=>Pt(si.oldVersion,si.newVersion,si))}).catch(()=>{}),rr}(zi,Zr,{upgrade:(Be,Ae)=>{0===Ae&&Be.createObjectStore(ce)}}).catch(Be=>{throw gn.create("idb-open",{originalErrorMessage:Be.message})})),q}function K(){return(K=(0,D.Z)(function*(Be){try{return yield(yield Y()).transaction(ce).objectStore(ce).get(lt(Be))}catch(Ae){if(Ae instanceof Ie.ZR)Wn.warn(Ae.message);else{const tt=gn.create("idb-get",{originalErrorMessage:Ae?.message});Wn.warn(tt.message)}}})).apply(this,arguments)}function Ee(Be,Ae){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,D.Z)(function*(Be,Ae){try{const Bt=(yield Y()).transaction(ce,"readwrite");yield Bt.objectStore(ce).put(Ae,lt(Be)),yield Bt.done}catch(tt){if(tt instanceof Ie.ZR)Wn.warn(tt.message);else{const Bt=gn.create("idb-set",{originalErrorMessage:tt?.message});Wn.warn(Bt.message)}}})).apply(this,arguments)}function lt(Be){return`${Be.name}!${Be.options.appId}`}class _t{constructor(Ae){this.container=Ae,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new mi(tt),this._heartbeatsCachePromise=this._storage.read().then(Bt=>(this._heartbeatsCache=Bt,Bt))}triggerHeartbeat(){var Ae=this;return(0,D.Z)(function*(){var tt;const Pt=Ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),vt=Ft();if(null==(null===(tt=Ae._heartbeatsCache)||void 0===tt?void 0:tt.heartbeats)&&(Ae._heartbeatsCache=yield Ae._heartbeatsCachePromise),Ae._heartbeatsCache.lastSentHeartbeatDate!==vt&&!Ae._heartbeatsCache.heartbeats.some(fn=>fn.date===vt))return Ae._heartbeatsCache.heartbeats.push({date:vt,agent:Pt}),Ae._heartbeatsCache.heartbeats=Ae._heartbeatsCache.heartbeats.filter(fn=>{const rr=new Date(fn.date).valueOf();return Date.now()-rr<=2592e6}),Ae._storage.overwrite(Ae._heartbeatsCache)})()}getHeartbeatsHeader(){var Ae=this;return(0,D.Z)(function*(){var tt;if(null===Ae._heartbeatsCache&&(yield Ae._heartbeatsCachePromise),null==(null===(tt=Ae._heartbeatsCache)||void 0===tt?void 0:tt.heartbeats)||0===Ae._heartbeatsCache.heartbeats.length)return"";const Bt=Ft(),{heartbeatsToSend:Pt,unsentEntries:vt}=function qn(Be,Ae=1024){const tt=[];let Bt=Be.slice();for(const Pt of Be){const vt=tt.find(fn=>fn.agent===Pt.agent);if(vt){if(vt.dates.push(Pt.date),Qr(tt)>Ae){vt.dates.pop();break}}else if(tt.push({agent:Pt.agent,dates:[Pt.date]}),Qr(tt)>Ae){tt.pop();break}Bt=Bt.slice(1)}return{heartbeatsToSend:tt,unsentEntries:Bt}}(Ae._heartbeatsCache.heartbeats),fn=(0,Ie.L)(JSON.stringify({version:2,heartbeats:Pt}));return Ae._heartbeatsCache.lastSentHeartbeatDate=Bt,vt.length>0?(Ae._heartbeatsCache.heartbeats=vt,yield Ae._storage.overwrite(Ae._heartbeatsCache)):(Ae._heartbeatsCache.heartbeats=[],Ae._storage.overwrite(Ae._heartbeatsCache)),fn})()}}function Ft(){return(new Date).toISOString().substring(0,10)}class mi{constructor(Ae){this.app=Ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.Z)(function*(){return!!(0,Ie.hl)()&&(0,Ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ae=this;return(0,D.Z)(function*(){return(yield Ae._canUseIndexedDBPromise)&&(yield function Z(Be){return K.apply(this,arguments)}(Ae.app))||{heartbeats:[]}})()}overwrite(Ae){var tt=this;return(0,D.Z)(function*(){var Bt;if(yield tt._canUseIndexedDBPromise){const vt=yield tt.read();return Ee(tt.app,{lastSentHeartbeatDate:null!==(Bt=Ae.lastSentHeartbeatDate)&&void 0!==Bt?Bt:vt.lastSentHeartbeatDate,heartbeats:Ae.heartbeats})}})()}add(Ae){var tt=this;return(0,D.Z)(function*(){var Bt;if(yield tt._canUseIndexedDBPromise){const vt=yield tt.read();return Ee(tt.app,{lastSentHeartbeatDate:null!==(Bt=Ae.lastSentHeartbeatDate)&&void 0!==Bt?Bt:vt.lastSentHeartbeatDate,heartbeats:[...vt.heartbeats,...Ae.heartbeats]})}})()}}function Qr(Be){return(0,Ie.L)(JSON.stringify({version:2,heartbeats:Be})).length}!function ks(Be){Tn(new oe.wA("platform-logger",Ae=>new ct(Ae),"PRIVATE")),Tn(new oe.wA("heartbeat",Ae=>new _t(Ae),"PRIVATE")),Kr(Cn,"0.9.23",Be),Kr(Cn,"0.9.23","esm2017"),Kr("fire-js","")}("")},4537:(Ht,Fe,$)=>{$.d(Fe,{H0:()=>He,wA:()=>x});var D=$(5861),oe=$(9058);class x{constructor(re,ie,ge){this.name=re,this.instanceFactory=ie,this.type=ge,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(re){return this.instantiationMode=re,this}setMultipleInstances(re){return this.multipleInstances=re,this}setServiceProps(re){return this.serviceProps=re,this}setInstanceCreatedCallback(re){return this.onInstanceCreated=re,this}}const Ie="[DEFAULT]";class ye{constructor(re,ie){this.name=re,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(re){const ie=this.normalizeInstanceIdentifier(re);if(!this.instancesDeferred.has(ie)){const ge=new oe.BH;if(this.instancesDeferred.set(ie,ge),this.isInitialized(ie)||this.shouldAutoInitialize())try{const Qe=this.getOrInitializeService({instanceIdentifier:ie});Qe&&ge.resolve(Qe)}catch{}}return this.instancesDeferred.get(ie).promise}getImmediate(re){var ie;const ge=this.normalizeInstanceIdentifier(re?.identifier),Qe=null!==(ie=re?.optional)&&void 0!==ie&&ie;if(!this.isInitialized(ge)&&!this.shouldAutoInitialize()){if(Qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ge})}catch(ze){if(Qe)return null;throw ze}}getComponent(){return this.component}setComponent(re){if(re.name!==this.name)throw Error(`Mismatching Component ${re.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=re,this.shouldAutoInitialize()){if(function Ce(Ne){return"EAGER"===Ne.instantiationMode}(re))try{this.getOrInitializeService({instanceIdentifier:Ie})}catch{}for(const[ie,ge]of this.instancesDeferred.entries()){const Qe=this.normalizeInstanceIdentifier(ie);try{const ze=this.getOrInitializeService({instanceIdentifier:Qe});ge.resolve(ze)}catch{}}}}clearInstance(re=Ie){this.instancesDeferred.delete(re),this.instancesOptions.delete(re),this.instances.delete(re)}delete(){var re=this;return(0,D.Z)(function*(){const ie=Array.from(re.instances.values());yield Promise.all([...ie.filter(ge=>"INTERNAL"in ge).map(ge=>ge.INTERNAL.delete()),...ie.filter(ge=>"_delete"in ge).map(ge=>ge._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(re=Ie){return this.instances.has(re)}getOptions(re=Ie){return this.instancesOptions.get(re)||{}}initialize(re={}){const{options:ie={}}=re,ge=this.normalizeInstanceIdentifier(re.instanceIdentifier);if(this.isInitialized(ge))throw Error(`${this.name}(${ge}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Qe=this.getOrInitializeService({instanceIdentifier:ge,options:ie});for(const[ze,We]of this.instancesDeferred.entries())ge===this.normalizeInstanceIdentifier(ze)&&We.resolve(Qe);return Qe}onInit(re,ie){var ge;const Qe=this.normalizeInstanceIdentifier(ie),ze=null!==(ge=this.onInitCallbacks.get(Qe))&&void 0!==ge?ge:new Set;ze.add(re),this.onInitCallbacks.set(Qe,ze);const We=this.instances.get(Qe);return We&&re(We,Qe),()=>{ze.delete(re)}}invokeOnInitCallbacks(re,ie){const ge=this.onInitCallbacks.get(ie);if(ge)for(const Qe of ge)try{Qe(re,ie)}catch{}}getOrInitializeService({instanceIdentifier:re,options:ie={}}){let ge=this.instances.get(re);if(!ge&&this.component&&(ge=this.component.instanceFactory(this.container,{instanceIdentifier:(Ne=re,Ne===Ie?void 0:Ne),options:ie}),this.instances.set(re,ge),this.instancesOptions.set(re,ie),this.invokeOnInitCallbacks(ge,re),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,re,ge)}catch{}var Ne;return ge||null}normalizeInstanceIdentifier(re=Ie){return this.component?this.component.multipleInstances?re:Ie:re}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class He{constructor(re){this.name=re,this.providers=new Map}addComponent(re){const ie=this.getProvider(re.name);if(ie.isComponentSet())throw new Error(`Component ${re.name} has already been registered with ${this.name}`);ie.setComponent(re)}addOrOverwriteComponent(re){this.getProvider(re.name).isComponentSet()&&this.providers.delete(re.name),this.addComponent(re)}getProvider(re){if(this.providers.has(re))return this.providers.get(re);const ie=new ye(re,this);return this.providers.set(re,ie),ie}getProviders(){return Array.from(this.providers.values())}}},7879:(Ht,Fe,$)=>{$.d(Fe,{Am:()=>Ne,Ub:()=>He,Yd:()=>Ce,in:()=>oe});const D=[];var oe=function(re){return re[re.DEBUG=0]="DEBUG",re[re.VERBOSE=1]="VERBOSE",re[re.INFO=2]="INFO",re[re.WARN=3]="WARN",re[re.ERROR=4]="ERROR",re[re.SILENT=5]="SILENT",re}(oe||{});const x={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},Ie=oe.INFO,ye={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},me=(re,ie,...ge)=>{if(ie<re.logLevel)return;const Qe=(new Date).toISOString(),ze=ye[ie];if(!ze)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[ze](`[${Qe}]  ${re.name}:`,...ge)};class Ce{constructor(ie){this.name=ie,this._logLevel=Ie,this._logHandler=me,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in oe))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?x[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...ie),this._logHandler(this,oe.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...ie),this._logHandler(this,oe.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...ie),this._logHandler(this,oe.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...ie),this._logHandler(this,oe.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...ie),this._logHandler(this,oe.ERROR,...ie)}}function He(re){D.forEach(ie=>{ie.setLogLevel(re)})}function Ne(re,ie){for(const ge of D){let Qe=null;ie&&ie.level&&(Qe=x[ie.level]),ge.userLogHandler=null===re?null:(ze,We,...Je)=>{const ht=Je.map(at=>{if(null==at)return null;if("string"==typeof at)return at;if("number"==typeof at||"boolean"==typeof at)return at.toString();if(at instanceof Error)return at.message;try{return JSON.stringify(at)}catch{return null}}).filter(at=>at).join(" ");We>=(Qe??ze.logLevel)&&re({level:oe[We].toLowerCase(),message:ht,args:Je,type:ze.name})}}}},7142:(Ht,Fe,$)=>{$.d(Fe,{Z:()=>D.Z});var D=$(3106);D.Z.registerVersion("firebase","10.6.0","app-compat")},3956:(Ht,Fe,$)=>{$.r(Fe);var D=$(5861),oe=$(3106),x=$(9058),Ie=$(534),ye=$(7879),me=$(7582),Ce=$(4537);const Ne={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const We=function Qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Je=function ze(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ht=new x.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Lt=new ye.Yd("@firebase/auth");function we(m,...d){Lt.logLevel<=ye.in.ERROR&&Lt.error(`Auth (${Ie.SDK_VERSION}): ${m}`,...d)}function je(m,...d){throw ot(m,...d)}function De(m,...d){return ot(m,...d)}function Ve(m,d,p){const E=Object.assign(Object.assign({},Je()),{[d]:p});return new x.LL("auth","Firebase",E).create(d,{appName:m.name})}function Ye(m,d,p){if(!(d instanceof p))throw p.name!==d.constructor.name&&je(m,"argument-error"),Ve(m,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ot(m,...d){if("string"!=typeof m){const p=d[0],E=[...d.slice(1)];return E[0]&&(E[0].appName=m.name),m._errorFactory.create(p,...E)}return ht.create(m,...d)}function ae(m,d,...p){if(!m)throw ot(d,...p)}function Zt(m){const d="INTERNAL ASSERTION FAILED: "+m;throw we(d),new Error(d)}function ct(m,d){m||Zt(d)}function nr(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function Cn(){return"http:"===dr()||"https:"===dr()}function dr(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class Nt{constructor(d,p){this.shortDelay=d,this.longDelay=p,ct(p>d,"Short delay should be less than long delay!"),this.isMobile=(0,x.uI)()||(0,x.b$)()}get(){return function Wn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Cn()||(0,x.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function he(m,d){ct(m.emulator,"Emulator should always be set here");const{url:p}=m.emulator;return d?`${p}${d.startsWith("/")?d.slice(1):d}`:p}class de{static initialize(d,p,E){this.fetchImpl=d,p&&(this.headersImpl=p),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Zt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Zt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Zt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ve={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},fe=new Nt(3e4,6e4);function be(m,d){return m.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:m.tenantId}):d}function $e(m,d,p,E){return mt.apply(this,arguments)}function mt(){return(mt=(0,D.Z)(function*(m,d,p,E,F={}){return it(m,F,(0,D.Z)(function*(){let z={},ue={};E&&("GET"===d?ue=E:z={body:JSON.stringify(E)});const Re=(0,x.xO)(Object.assign({key:m.config.apiKey},ue)).slice(1),Ze=yield m._getAdditionalHeaders();return Ze["Content-Type"]="application/json",m.languageCode&&(Ze["X-Firebase-Locale"]=m.languageCode),de.fetch()(Yt(m,m.config.apiHost,p,Re),Object.assign({method:d,headers:Ze,referrerPolicy:"no-referrer"},z))}))})).apply(this,arguments)}function it(m,d,p){return kn.apply(this,arguments)}function kn(){return(kn=(0,D.Z)(function*(m,d,p){m._canInitEmulator=!1;const E=Object.assign(Object.assign({},ve),d);try{const F=new Dn(m),z=yield Promise.race([p(),F.promise]);F.clearNetworkTimeout();const ue=yield z.json();if("needConfirmation"in ue)throw Rn(m,"account-exists-with-different-credential",ue);if(z.ok&&!("errorMessage"in ue))return ue;{const Re=z.ok?ue.errorMessage:ue.error.message,[Ze,xt]=Re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ze)throw Rn(m,"credential-already-in-use",ue);if("EMAIL_EXISTS"===Ze)throw Rn(m,"email-already-in-use",ue);if("USER_DISABLED"===Ze)throw Rn(m,"user-disabled",ue);const Kt=E[Ze]||Ze.toLowerCase().replace(/[_\s]+/g,"-");if(xt)throw Ve(m,Kt,xt);je(m,Kt)}}catch(F){if(F instanceof x.ZR)throw F;je(m,"network-request-failed",{message:String(F)})}})).apply(this,arguments)}function wt(m,d,p,E){return rn.apply(this,arguments)}function rn(){return(rn=(0,D.Z)(function*(m,d,p,E,F={}){const z=yield $e(m,d,p,E,F);return"mfaPendingCredential"in z&&je(m,"multi-factor-auth-required",{_serverResponse:z}),z})).apply(this,arguments)}function Yt(m,d,p,E){const F=`${d}${p}?${E}`;return m.config.emulator?he(m.config,F):`${m.config.apiScheme}://${F}`}function Ln(m){switch(m){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Dn{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((p,E)=>{this.timer=setTimeout(()=>E(De(this.auth,"network-request-failed")),fe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rn(m,d,p){const E={appName:m.name};p.email&&(E.email=p.email),p.phoneNumber&&(E.phoneNumber=p.phoneNumber);const F=De(m,d,E);return F.customData._tokenResponse=p,F}function Bn(m){return void 0!==m&&void 0!==m.getResponse}function Dr(m){return void 0!==m&&void 0!==m.enterprise}class Sn{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const p of this.recaptchaEnforcementState)if(p.provider&&p.provider===d)return Ln(p.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function Ir(){return(Ir=(0,D.Z)(function*(m){return(yield $e(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Wr(m,d){return qr.apply(this,arguments)}function qr(){return(qr=(0,D.Z)(function*(m,d){return $e(m,"GET","/v2/recaptchaConfig",be(m,d))})).apply(this,arguments)}function st(){return(st=(0,D.Z)(function*(m,d){return $e(m,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function jt(){return(jt=(0,D.Z)(function*(m,d){return $e(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ai(){return(Ai=(0,D.Z)(function*(m,d){return $e(m,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function ii(m){if(m)try{const d=new Date(Number(m));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function Js(){return(Js=(0,D.Z)(function*(m,d=!1){const p=(0,x.m9)(m),E=yield p.getIdToken(d),F=os(E);ae(F&&F.exp&&F.auth_time&&F.iat,p.auth,"internal-error");const z="object"==typeof F.firebase?F.firebase:void 0,ue=z?.sign_in_provider;return{claims:F,token:E,authTime:ii(Ct(F.auth_time)),issuedAtTime:ii(Ct(F.iat)),expirationTime:ii(Ct(F.exp)),signInProvider:ue||null,signInSecondFactor:z?.sign_in_second_factor||null}})).apply(this,arguments)}function Ct(m){return 1e3*Number(m)}function os(m){const[d,p,E]=m.split(".");if(void 0===d||void 0===p||void 0===E)return we("JWT malformed, contained fewer than 3 sections"),null;try{const F=(0,x.tV)(p);return F?JSON.parse(F):(we("Failed to decode base64 JWT payload"),null)}catch(F){return we("Caught error parsing JWT payload as JSON",F?.toString()),null}}function kr(m,d){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,D.Z)(function*(m,d,p=!1){if(p)return d;try{return yield d}catch(E){throw E instanceof x.ZR&&function Os({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}(E)&&m.auth.currentUser===m&&(yield m.auth.signOut()),E}})).apply(this,arguments)}class pi{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var p;if(d){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const F=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,F)}}schedule(d=!1){var p=this;if(!this.isRunning)return;const E=this.getInterval(d);this.timerId=setTimeout((0,D.Z)(function*(){yield p.iteration()}),E)}iteration(){var d=this;return(0,D.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&d.schedule(!0))}d.schedule()})()}}class hs{constructor(d,p){this.createdAt=d,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=ii(this.lastLoginAt),this.creationTime=ii(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Hi(m){return Lr.apply(this,arguments)}function Lr(){return Lr=(0,D.Z)(function*(m){var d;const p=m.auth,E=yield m.getIdToken(),F=yield kr(m,function Fn(m,d){return Ai.apply(this,arguments)}(p,{idToken:E}));ae(F?.users.length,p,"internal-error");const z=F.users[0];m._notifyReloadListener(z);const ue=null!==(d=z.providerUserInfo)&&void 0!==d&&d.length?function zi(m){return m.map(d=>{var{providerId:p}=d,E=(0,me._T)(d,["providerId"]);return{providerId:p,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(z.providerUserInfo):[],Re=function gi(m,d){return[...m.filter(E=>!d.some(F=>F.providerId===E.providerId)),...d]}(m.providerData,ue),Kt=!!m.isAnonymous&&!(m.email&&z.passwordHash||Re?.length),Wt={uid:z.localId,displayName:z.displayName||null,photoURL:z.photoUrl||null,email:z.email||null,emailVerified:z.emailVerified||!1,phoneNumber:z.phoneNumber||null,tenantId:z.tenantId||null,providerData:Re,metadata:new hs(z.createdAt,z.lastLoginAt),isAnonymous:Kt};Object.assign(m,Wt)}),Lr.apply(this,arguments)}function ln(){return(ln=(0,D.Z)(function*(m){const d=(0,x.m9)(m);yield Hi(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function ce(){return(ce=(0,D.Z)(function*(m,d){const p=yield it(m,{},(0,D.Z)(function*(){const E=(0,x.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:F,apiKey:z}=m.config,ue=Yt(m,F,"/v1/token",`key=${z}`),Re=yield m._getAdditionalHeaders();return Re["Content-Type"]="application/x-www-form-urlencoded",de.fetch()(ue,{method:"POST",headers:Re,body:E})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}function Y(){return(Y=(0,D.Z)(function*(m,d){return $e(m,"POST","/v2/accounts:revokeToken",be(m,d))})).apply(this,arguments)}class Z{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){ae(d.idToken,"internal-error"),ae(typeof d.idToken<"u","internal-error"),ae(typeof d.refreshToken<"u","internal-error");const p="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function gn(m){const d=os(m);return ae(d,"internal-error"),ae(typeof d.exp<"u","internal-error"),ae(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,p)}getToken(d,p=!1){var E=this;return(0,D.Z)(function*(){return ae(!E.accessToken||E.refreshToken,d,"user-token-expired"),p||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(d,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,p){var E=this;return(0,D.Z)(function*(){const{accessToken:F,refreshToken:z,expiresIn:ue}=yield function Zr(m,d){return ce.apply(this,arguments)}(d,p);E.updateTokensAndExpiration(F,z,Number(ue))})()}updateTokensAndExpiration(d,p,E){this.refreshToken=p||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(d,p){const{refreshToken:E,accessToken:F,expirationTime:z}=p,ue=new Z;return E&&(ae("string"==typeof E,"internal-error",{appName:d}),ue.refreshToken=E),F&&(ae("string"==typeof F,"internal-error",{appName:d}),ue.accessToken=F),z&&(ae("number"==typeof z,"internal-error",{appName:d}),ue.expirationTime=z),ue}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Z,this.toJSON())}_performRefresh(){return Zt("not implemented")}}function K(m,d){ae("string"==typeof m||typeof m>"u","internal-error",{appName:d})}class Ee{constructor(d){var{uid:p,auth:E,stsTokenManager:F}=d,z=(0,me._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=E,this.stsTokenManager=F,this.accessToken=F.accessToken,this.displayName=z.displayName||null,this.email=z.email||null,this.emailVerified=z.emailVerified||!1,this.phoneNumber=z.phoneNumber||null,this.photoURL=z.photoURL||null,this.isAnonymous=z.isAnonymous||!1,this.tenantId=z.tenantId||null,this.providerData=z.providerData?[...z.providerData]:[],this.metadata=new hs(z.createdAt||void 0,z.lastLoginAt||void 0)}getIdToken(d){var p=this;return(0,D.Z)(function*(){const E=yield kr(p,p.stsTokenManager.getToken(p.auth,d));return ae(E,p.auth,"internal-error"),p.accessToken!==E&&(p.accessToken=E,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),E})()}getIdTokenResult(d){return function mr(m){return Js.apply(this,arguments)}(this,d)}reload(){return function Kr(m){return ln.apply(this,arguments)}(this)}_assign(d){this!==d&&(ae(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(p=>Object.assign({},p)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const p=new Ee(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(d){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,p=!1){var E=this;return(0,D.Z)(function*(){let F=!1;d.idToken&&d.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(d),F=!0),p&&(yield Hi(E)),yield E.auth._persistUserIfCurrent(E),F&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var d=this;return(0,D.Z)(function*(){const p=yield d.getIdToken();return yield kr(d,function fi(m,d){return st.apply(this,arguments)}(d.auth,{idToken:p})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,p){var E,F,z,ue,Re,Ze,xt,Kt;const Wt=null!==(E=p.displayName)&&void 0!==E?E:void 0,br=null!==(F=p.email)&&void 0!==F?F:void 0,ia=null!==(z=p.phoneNumber)&&void 0!==z?z:void 0,Zl=null!==(ue=p.photoURL)&&void 0!==ue?ue:void 0,Di=null!==(Re=p.tenantId)&&void 0!==Re?Re:void 0,pc=null!==(Ze=p._redirectEventId)&&void 0!==Ze?Ze:void 0,Ja=null!==(xt=p.createdAt)&&void 0!==xt?xt:void 0,ju=null!==(Kt=p.lastLoginAt)&&void 0!==Kt?Kt:void 0,{uid:Qo,emailVerified:Ql,isAnonymous:Of,providerData:Ma,stsTokenManager:th}=p;ae(Qo&&th,d,"internal-error");const nh=Z.fromJSON(this.name,th);ae("string"==typeof Qo,d,"internal-error"),K(Wt,d.name),K(br,d.name),ae("boolean"==typeof Ql,d,"internal-error"),ae("boolean"==typeof Of,d,"internal-error"),K(ia,d.name),K(Zl,d.name),K(Di,d.name),K(pc,d.name),K(Ja,d.name),K(ju,d.name);const nl=new Ee({uid:Qo,auth:d,email:br,emailVerified:Ql,displayName:Wt,isAnonymous:Of,photoURL:Zl,phoneNumber:ia,tenantId:Di,stsTokenManager:nh,createdAt:Ja,lastLoginAt:ju});return Ma&&Array.isArray(Ma)&&(nl.providerData=Ma.map(kf=>Object.assign({},kf))),pc&&(nl._redirectEventId=pc),nl}static _fromIdTokenResponse(d,p,E=!1){return(0,D.Z)(function*(){const F=new Z;F.updateFromServerResponse(p);const z=new Ee({uid:p.localId,auth:d,stsTokenManager:F,isAnonymous:E});return yield Hi(z),z})()}}const Ge=new Map;function lt(m){ct(m instanceof Function,"Expected a class definition");let d=Ge.get(m);return d?(ct(d instanceof m,"Instance stored in cache mismatched with class"),d):(d=new m,Ge.set(m,d),d)}const Xt=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.Z)(function*(){return!0})()}_set(p,E){var F=this;return(0,D.Z)(function*(){F.storage[p]=E})()}_get(p){var E=this;return(0,D.Z)(function*(){const F=E.storage[p];return void 0===F?null:F})()}_remove(p){var E=this;return(0,D.Z)(function*(){delete E.storage[p]})()}_addListener(p,E){}_removeListener(p,E){}}return m.type="NONE",m})();function _t(m,d,p){return`firebase:${m}:${d}:${p}`}class Ft{constructor(d,p,E){this.persistence=d,this.auth=p,this.userKey=E;const{config:F,name:z}=this.auth;this.fullUserKey=_t(this.userKey,F.apiKey,z),this.fullPersistenceKey=_t("persistence",F.apiKey,z),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,D.Z)(function*(){const p=yield d.persistence._get(d.fullUserKey);return p?Ee._fromJSON(d.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var p=this;return(0,D.Z)(function*(){if(p.persistence===d)return;const E=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=d,E?p.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,p,E="authUser"){return(0,D.Z)(function*(){if(!p.length)return new Ft(lt(Xt),d,E);const F=(yield Promise.all(p.map(function(){var xt=(0,D.Z)(function*(Kt){if(yield Kt._isAvailable())return Kt});return function(Kt){return xt.apply(this,arguments)}}()))).filter(xt=>xt);let z=F[0]||lt(Xt);const ue=_t(E,d.config.apiKey,d.name);let Re=null;for(const xt of p)try{const Kt=yield xt._get(ue);if(Kt){const Wt=Ee._fromJSON(d,Kt);xt!==z&&(Re=Wt),z=xt;break}}catch{}const Ze=F.filter(xt=>xt._shouldAllowMigration);return z._shouldAllowMigration&&Ze.length?(z=Ze[0],Re&&(yield z._set(ue,Re.toJSON())),yield Promise.all(p.map(function(){var xt=(0,D.Z)(function*(Kt){if(Kt!==z)try{yield Kt._remove(ue)}catch{}});return function(Kt){return xt.apply(this,arguments)}}())),new Ft(z,d,E)):new Ft(z,d,E)})()}}function qn(m){const d=m.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Be(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(mi(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(tt(d))return"Blackberry";if(Bt(d))return"Webos";if(Qr(d))return"Safari";if((d.includes("chrome/")||ks(d))&&!d.includes("edge/"))return"Chrome";if(Ae(d))return"Android";{const E=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function mi(m=(0,x.z$)()){return/firefox\//i.test(m)}function Qr(m=(0,x.z$)()){const d=m.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function ks(m=(0,x.z$)()){return/crios\//i.test(m)}function Be(m=(0,x.z$)()){return/iemobile/i.test(m)}function Ae(m=(0,x.z$)()){return/android/i.test(m)}function tt(m=(0,x.z$)()){return/blackberry/i.test(m)}function Bt(m=(0,x.z$)()){return/webos/i.test(m)}function Pt(m=(0,x.z$)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function ir(m=(0,x.z$)()){return Pt(m)||Ae(m)||Bt(m)||tt(m)||/windows phone/i.test(m)||Be(m)}function Fr(m,d=[]){let p;switch(m){case"Browser":p=qn((0,x.z$)());break;case"Worker":p=`${qn((0,x.z$)())}-${m}`;break;default:p=m}const E=d.length?d.join(","):"FirebaseCore-web";return`${p}/JsCore/${Ie.SDK_VERSION}/${E}`}class Yr{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,p){const E=z=>new Promise((ue,Re)=>{try{ue(d(z))}catch(Ze){Re(Ze)}});E.onAbort=p,this.queue.push(E);const F=this.queue.length-1;return()=>{this.queue[F]=()=>Promise.resolve()}}runMiddleware(d){var p=this;return(0,D.Z)(function*(){if(p.auth.currentUser===d)return;const E=[];try{for(const F of p.queue)yield F(d),F.onAbort&&E.push(F.onAbort)}catch(F){E.reverse();for(const z of E)try{z()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:F?.message})}})()}}function Yi(){return(Yi=(0,D.Z)(function*(m,d={}){return $e(m,"GET","/v2/passwordPolicy",be(m,d))})).apply(this,arguments)}class fs{constructor(d){var p,E,F,z;const ue=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(p=ue.minPasswordLength)&&void 0!==p?p:6,ue.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ue.maxPasswordLength),void 0!==ue.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ue.containsLowercaseCharacter),void 0!==ue.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ue.containsUppercaseCharacter),void 0!==ue.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ue.containsNumericCharacter),void 0!==ue.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ue.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(F=null===(E=d.allowedNonAlphanumericCharacters)||void 0===E?void 0:E.join(""))&&void 0!==F?F:"",this.forceUpgradeOnSignin=null!==(z=d.forceUpgradeOnSignin)&&void 0!==z&&z,this.schemaVersion=d.schemaVersion}validatePassword(d){var p,E,F,z,ue,Re;const Ze={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,Ze),this.validatePasswordCharacterOptions(d,Ze),Ze.isValid&&(Ze.isValid=null===(p=Ze.meetsMinPasswordLength)||void 0===p||p),Ze.isValid&&(Ze.isValid=null===(E=Ze.meetsMaxPasswordLength)||void 0===E||E),Ze.isValid&&(Ze.isValid=null===(F=Ze.containsLowercaseLetter)||void 0===F||F),Ze.isValid&&(Ze.isValid=null===(z=Ze.containsUppercaseLetter)||void 0===z||z),Ze.isValid&&(Ze.isValid=null===(ue=Ze.containsNumericCharacter)||void 0===ue||ue),Ze.isValid&&(Ze.isValid=null===(Re=Ze.containsNonAlphanumericCharacter)||void 0===Re||Re),Ze}validatePasswordLengthOptions(d,p){const E=this.customStrengthOptions.minPasswordLength,F=this.customStrengthOptions.maxPasswordLength;E&&(p.meetsMinPasswordLength=d.length>=E),F&&(p.meetsMaxPasswordLength=d.length<=F)}validatePasswordCharacterOptions(d,p){let E;this.updatePasswordCharacterOptionsStatuses(p,!1,!1,!1,!1);for(let F=0;F<d.length;F++)E=d.charAt(F),this.updatePasswordCharacterOptionsStatuses(p,E>="a"&&E<="z",E>="A"&&E<="Z",E>="0"&&E<="9",this.allowedNonAlphanumericCharacters.includes(E))}updatePasswordCharacterOptionsStatuses(d,p,E,F,z){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=p)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=E)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=F)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=z))}}class Ls{constructor(d,p,E,F){this.app=d,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=E,this.config=F,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _r(this),this.idTokenSubscription=new _r(this),this.beforeStateQueue=new Yr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ht,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=F.sdkClientVersion}_initializeWithPersistence(d,p){var E=this;return p&&(this._popupRedirectResolver=lt(p)),this._initializationPromise=this.queue((0,D.Z)(function*(){var F,z;if(!E._deleted&&(E.persistenceManager=yield Ft.create(E,d),!E._deleted)){if(null!==(F=E._popupRedirectResolver)&&void 0!==F&&F._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(p),E.lastNotifiedUid=(null===(z=E.currentUser)||void 0===z?void 0:z.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,D.Z)(function*(){if(d._deleted)return;const p=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||p){if(d.currentUser&&p&&d.currentUser.uid===p.uid)return d._currentUser._assign(p),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(p,!0)}})()}initializeCurrentUser(d){var p=this;return(0,D.Z)(function*(){var E;const F=yield p.assertedPersistence.getCurrentUser();let z=F,ue=!1;if(d&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Re=null===(E=p.redirectUser)||void 0===E?void 0:E._redirectEventId,Ze=z?._redirectEventId,xt=yield p.tryRedirectSignIn(d);(!Re||Re===Ze)&&xt?.user&&(z=xt.user,ue=!0)}if(!z)return p.directlySetCurrentUser(null);if(!z._redirectEventId){if(ue)try{yield p.beforeStateQueue.runMiddleware(z)}catch(Re){z=F,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Re))}return z?p.reloadAndSetCurrentUserOrClear(z):p.directlySetCurrentUser(null)}return ae(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===z._redirectEventId?p.directlySetCurrentUser(z):p.reloadAndSetCurrentUserOrClear(z)})()}tryRedirectSignIn(d){var p=this;return(0,D.Z)(function*(){let E=null;try{E=yield p._popupRedirectResolver._completeRedirectFn(p,d,!0)}catch{yield p._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(d){var p=this;return(0,D.Z)(function*(){try{yield Hi(d)}catch(E){if("auth/network-request-failed"!==E?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function It(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var d=this;return(0,D.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var p=this;return(0,D.Z)(function*(){const E=d?(0,x.m9)(d):null;return E&&ae(E.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(E&&E._clone(p))})()}_updateCurrentUser(d,p=!1){var E=this;return(0,D.Z)(function*(){if(!E._deleted)return d&&ae(E.tenantId===d.tenantId,E,"tenant-id-mismatch"),p||(yield E.beforeStateQueue.runMiddleware(d)),E.queue((0,D.Z)(function*(){yield E.directlySetCurrentUser(d),E.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,D.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var p=this;return this.queue((0,D.Z)(function*(){yield p.assertedPersistence.setPersistence(lt(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var p=this;return(0,D.Z)(function*(){p._getPasswordPolicyInternal()||(yield p._updatePasswordPolicy());const E=p._getPasswordPolicyInternal();return E.schemaVersion!==p.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(p._errorFactory.create("unsupported-password-policy-schema-version",{})):E.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,D.Z)(function*(){const p=yield function Xs(m){return Yi.apply(this,arguments)}(d),E=new fs(p);null===d.tenantId?d._projectPasswordPolicy=E:d._tenantPasswordPolicies[d.tenantId]=E})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new x.LL("auth","Firebase",d())}onAuthStateChanged(d,p,E){return this.registerStateListener(this.authStateSubscription,d,p,E)}beforeAuthStateChanged(d,p){return this.beforeStateQueue.pushCallback(d,p)}onIdTokenChanged(d,p,E){return this.registerStateListener(this.idTokenSubscription,d,p,E)}authStateReady(){return new Promise((d,p)=>{if(this.currentUser)d();else{const E=this.onAuthStateChanged(()=>{E(),d()},p)}})}revokeAccessToken(d){var p=this;return(0,D.Z)(function*(){if(p.currentUser){const E=yield p.currentUser.getIdToken(),F={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:E};null!=p.tenantId&&(F.tenantId=p.tenantId),yield function q(m,d){return Y.apply(this,arguments)}(p,F)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,p){var E=this;return(0,D.Z)(function*(){const F=yield E.getOrInitRedirectPersistenceManager(p);return null===d?F.removeCurrentUser():F.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var p=this;return(0,D.Z)(function*(){if(!p.redirectPersistenceManager){const E=d&&lt(d)||p._popupRedirectResolver;ae(E,p,"argument-error"),p.redirectPersistenceManager=yield Ft.create(p,[lt(E._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(d){var p=this;return(0,D.Z)(function*(){var E,F;return p._isInitialized&&(yield p.queue((0,D.Z)(function*(){}))),(null===(E=p._currentUser)||void 0===E?void 0:E._redirectEventId)===d?p._currentUser:(null===(F=p.redirectUser)||void 0===F?void 0:F._redirectEventId)===d?p.redirectUser:null})()}_persistUserIfCurrent(d){var p=this;return(0,D.Z)(function*(){if(d===p.currentUser)return p.queue((0,D.Z)(function*(){return p.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(p=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,p,E,F){if(this._deleted)return()=>{};const z="function"==typeof p?p:p.next.bind(p);let ue=!1;const Re=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(Re,this,"internal-error"),Re.then(()=>{ue||z(this.currentUser)}),"function"==typeof p){const Ze=d.addObserver(p,E,F);return()=>{ue=!0,Ze()}}{const Ze=d.addObserver(p);return()=>{ue=!0,Ze()}}}directlySetCurrentUser(d){var p=this;return(0,D.Z)(function*(){p.currentUser&&p.currentUser!==d&&p._currentUser._stopProactiveRefresh(),d&&p.isProactiveRefreshEnabled&&d._startProactiveRefresh(),p.currentUser=d,d?yield p.assertedPersistence.setCurrentUser(d):yield p.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Fr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,D.Z)(function*(){var p;const E={"X-Client-Version":d.clientVersion};d.app.options.appId&&(E["X-Firebase-gmpid"]=d.app.options.appId);const F=yield null===(p=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();F&&(E["X-Firebase-Client"]=F);const z=yield d._getAppCheckToken();return z&&(E["X-Firebase-AppCheck"]=z),E})()}_getAppCheckToken(){var d=this;return(0,D.Z)(function*(){var p;const E=yield null===(p=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return E?.error&&function Te(m,...d){Lt.logLevel<=ye.in.WARN&&Lt.warn(`Auth (${Ie.SDK_VERSION}): ${m}`,...d)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function an(m){return(0,x.m9)(m)}class _r{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,x.ne)(p=>this.observer=p)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Fs(m){return new Promise((d,p)=>{const E=document.createElement("script");E.setAttribute("src",m),E.onload=d,E.onerror=F=>{const z=De("internal-error");z.customData=F,p(z)},E.type="text/javascript",E.charset="UTF-8",function Ni(){var m,d;return null!==(d=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==d?d:document}().appendChild(E)})}function To(m){return`__${m}${Math.floor(1e6*Math.random())}`}class Ji{constructor(d){this.type="recaptcha-enterprise",this.auth=an(d)}verify(d="verify",p=!1){var E=this;return(0,D.Z)(function*(){function z(){return z=(0,D.Z)(function*(Re){if(!p){if(null==Re.tenantId&&null!=Re._agentRecaptchaConfig)return Re._agentRecaptchaConfig.siteKey;if(null!=Re.tenantId&&void 0!==Re._tenantRecaptchaConfigs[Re.tenantId])return Re._tenantRecaptchaConfigs[Re.tenantId].siteKey}return new Promise(function(){var Ze=(0,D.Z)(function*(xt,Kt){Wr(Re,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Wt=>{if(void 0!==Wt.recaptchaKey){const br=new Sn(Wt);return null==Re.tenantId?Re._agentRecaptchaConfig=br:Re._tenantRecaptchaConfigs[Re.tenantId]=br,xt(br.siteKey)}Kt(new Error("recaptcha Enterprise site key undefined"))}).catch(Wt=>{Kt(Wt)})});return function(xt,Kt){return Ze.apply(this,arguments)}}())}),z.apply(this,arguments)}function ue(Re,Ze,xt){const Kt=window.grecaptcha;Dr(Kt)?Kt.enterprise.ready(()=>{Kt.enterprise.execute(Re,{action:d}).then(Wt=>{Ze(Wt)}).catch(()=>{Ze("NO_RECAPTCHA")})}):xt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Re,Ze)=>{(function F(Re){return z.apply(this,arguments)})(E.auth).then(xt=>{if(!p&&Dr(window.grecaptcha))ue(xt,Re,Ze);else{if(typeof window>"u")return void Ze(new Error("RecaptchaVerifier is only supported in browser"));Fs("https://www.google.com/recaptcha/enterprise.js?render="+xt).then(()=>{ue(xt,Re,Ze)}).catch(Kt=>{Ze(Kt)})}}).catch(xt=>{Ze(xt)})})})()}}function Ds(m,d,p){return eo.apply(this,arguments)}function eo(){return(eo=(0,D.Z)(function*(m,d,p,E=!1){const F=new Ji(m);let z;try{z=yield F.verify(p)}catch{z=yield F.verify(p,!0)}const ue=Object.assign({},d);return Object.assign(ue,E?{captchaResp:z}:{captchaResponse:z}),Object.assign(ue,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ue,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ue})).apply(this,arguments)}function Us(m,d,p,E){return wo.apply(this,arguments)}function wo(){return wo=(0,D.Z)(function*(m,d,p,E){var F;if(null!==(F=m._getRecaptchaConfig())&&void 0!==F&&F.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const z=yield Ds(m,d,p,"getOobCode"===p);return E(m,z)}return E(m,d).catch(function(){var z=(0,D.Z)(function*(ue){if("auth/missing-recaptcha-token"===ue.code){console.log(`${p} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Re=yield Ds(m,d,p,"getOobCode"===p);return E(m,Re)}return Promise.reject(ue)});return function(ue){return z.apply(this,arguments)}}())}),wo.apply(this,arguments)}function ps(m){const d=m.indexOf(":");return d<0?"":m.substr(0,d+1)}function Bs(m){if(!m)return null;const d=Number(m);return isNaN(d)?null:d}class _i{constructor(d,p){this.providerId=d,this.signInMethod=p}toJSON(){return Zt("not implemented")}_getIdTokenResponse(d){return Zt("not implemented")}_linkToIdToken(d,p){return Zt("not implemented")}_getReauthenticationResolver(d){return Zt("not implemented")}}function Xr(m,d){return js.apply(this,arguments)}function js(){return(js=(0,D.Z)(function*(m,d){return $e(m,"POST","/v1/accounts:resetPassword",be(m,d))})).apply(this,arguments)}function Ci(){return(Ci=(0,D.Z)(function*(m,d){return $e(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function yn(m,d){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,D.Z)(function*(m,d){return $e(m,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function Vr(){return(Vr=(0,D.Z)(function*(m,d){return $e(m,"POST","/v1/accounts:update",be(m,d))})).apply(this,arguments)}function ei(m,d){return no.apply(this,arguments)}function no(){return(no=(0,D.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:signInWithPassword",be(m,d))})).apply(this,arguments)}function ro(m,d){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,D.Z)(function*(m,d){return $e(m,"POST","/v1/accounts:sendOobCode",be(m,d))})).apply(this,arguments)}function Ss(){return(Ss=(0,D.Z)(function*(m,d){return ro(m,d)})).apply(this,arguments)}function ur(m,d){return Et.apply(this,arguments)}function Et(){return(Et=(0,D.Z)(function*(m,d){return ro(m,d)})).apply(this,arguments)}function en(m,d){return bn.apply(this,arguments)}function bn(){return(bn=(0,D.Z)(function*(m,d){return ro(m,d)})).apply(this,arguments)}function Hr(){return(Hr=(0,D.Z)(function*(m,d){return ro(m,d)})).apply(this,arguments)}function as(){return(as=(0,D.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:signInWithEmailLink",be(m,d))})).apply(this,arguments)}function us(){return(us=(0,D.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:signInWithEmailLink",be(m,d))})).apply(this,arguments)}class vi extends _i{constructor(d,p,E,F=null){super("password",E),this._email=d,this._password=p,this._tenantId=F}static _fromEmailAndPassword(d,p){return new vi(d,p,"password")}static _fromEmailAndCode(d,p,E=null){return new vi(d,p,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(d){var p=this;return(0,D.Z)(function*(){switch(p.signInMethod){case"password":return Us(d,{returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ei);case"emailLink":return function Mr(m,d){return as.apply(this,arguments)}(d,{email:p._email,oobCode:p._password});default:je(d,"internal-error")}})()}_linkToIdToken(d,p){var E=this;return(0,D.Z)(function*(){switch(E.signInMethod){case"password":return Us(d,{idToken:p,returnSecureToken:!0,email:E._email,password:E._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yn);case"emailLink":return function hr(m,d){return us.apply(this,arguments)}(d,{idToken:p,email:E._email,oobCode:E._password});default:je(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Gt(m,d){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,D.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:signInWithIdp",be(m,d))})).apply(this,arguments)}class Ur extends _i{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const p=new Ur(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(p.idToken=d.idToken),d.accessToken&&(p.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(p.nonce=d.nonce),d.pendingToken&&(p.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(p.accessToken=d.oauthToken,p.secret=d.oauthTokenSecret):je("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:E,signInMethod:F}=p,z=(0,me._T)(p,["providerId","signInMethod"]);if(!E||!F)return null;const ue=new Ur(E,F);return ue.idToken=z.idToken||void 0,ue.accessToken=z.accessToken||void 0,ue.secret=z.secret,ue.nonce=z.nonce,ue.pendingToken=z.pendingToken||null,ue}_getIdTokenResponse(d){return Gt(d,this.buildRequest())}_linkToIdToken(d,p){const E=this.buildRequest();return E.idToken=p,Gt(d,E)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,Gt(d,p)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),d.postBody=(0,x.xO)(p)}return d}}function Vn(){return(Vn=(0,D.Z)(function*(m,d){return $e(m,"POST","/v1/accounts:sendVerificationCode",be(m,d))})).apply(this,arguments)}function zr(){return(zr=(0,D.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:signInWithPhoneNumber",be(m,d))})).apply(this,arguments)}function io(){return(io=(0,D.Z)(function*(m,d){const p=yield wt(m,"POST","/v1/accounts:signInWithPhoneNumber",be(m,d));if(p.temporaryProof)throw Rn(m,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const ts={USER_NOT_FOUND:"user-not-found"};function _s(){return(_s=(0,D.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:signInWithPhoneNumber",be(m,Object.assign(Object.assign({},d),{operation:"REAUTH"})),ts)})).apply(this,arguments)}class ki extends _i{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,p){return new ki({verificationId:d,verificationCode:p})}static _fromTokenResponse(d,p){return new ki({phoneNumber:d,temporaryProof:p})}_getIdTokenResponse(d){return function es(m,d){return zr.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,p){return function gs(m,d){return io.apply(this,arguments)}(d,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function ms(m,d){return _s.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:p,verificationId:E,verificationCode:F}=this.params;return d&&p?{temporaryProof:d,phoneNumber:p}:{sessionInfo:E,code:F}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:p,verificationCode:E,phoneNumber:F,temporaryProof:z}=d;return E||p||F||z?new ki({verificationId:p,verificationCode:E,phoneNumber:F,temporaryProof:z}):null}}class Si{constructor(d){var p,E,F,z,ue,Re;const Ze=(0,x.zd)((0,x.pd)(d)),xt=null!==(p=Ze.apiKey)&&void 0!==p?p:null,Kt=null!==(E=Ze.oobCode)&&void 0!==E?E:null,Wt=function An(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(F=Ze.mode)&&void 0!==F?F:null);ae(xt&&Kt&&Wt,"argument-error"),this.apiKey=xt,this.operation=Wt,this.code=Kt,this.continueUrl=null!==(z=Ze.continueUrl)&&void 0!==z?z:null,this.languageCode=null!==(ue=Ze.languageCode)&&void 0!==ue?ue:null,this.tenantId=null!==(Re=Ze.tenantId)&&void 0!==Re?Re:null}static parseLink(d){const p=function Xo(m){const d=(0,x.zd)((0,x.pd)(m)).link,p=d?(0,x.zd)((0,x.pd)(d)).deep_link_id:null,E=(0,x.zd)((0,x.pd)(m)).deep_link_id;return(E?(0,x.zd)((0,x.pd)(E)).link:null)||E||p||d||m}(d);try{return new Si(p)}catch{return null}}}let Li=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(p,E){return vi._fromEmailAndPassword(p,E)}static credentialWithLink(p,E){const F=Si.parseLink(E);return ae(F,"argument-error"),vi._fromEmailAndCode(p,F.code,F.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class ns{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class oi extends ns{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class cs extends oi{static credentialFromJSON(d){const p="string"==typeof d?JSON.parse(d):d;return ae("providerId"in p&&"signInMethod"in p,"argument-error"),Ur._fromParams(p)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return ae(d.idToken||d.accessToken,"argument-error"),Ur._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return cs.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return cs.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:E,oauthTokenSecret:F,pendingToken:z,nonce:ue,providerId:Re}=d;if(!E&&!F&&!p&&!z||!Re)return null;try{return new cs(Re)._credential({idToken:p,accessToken:E,nonce:ue,pendingToken:z})}catch{return null}}}let ai=(()=>{class m extends oi{constructor(){super("facebook.com")}static credential(p){return Ur._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return m.credential(p.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Ta=(()=>{class m extends oi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,E){return Ur._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:E})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:E,oauthAccessToken:F}=p;if(!E&&!F)return null;try{return m.credential(E,F)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Fi=(()=>{class m extends oi{constructor(){super("github.com")}static credential(p){return Ur._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return m.credential(p.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class ys extends _i{constructor(d,p){super(d,d),this.pendingToken=p}_getIdTokenResponse(d){return Gt(d,this.buildRequest())}_linkToIdToken(d,p){const E=this.buildRequest();return E.idToken=p,Gt(d,E)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,Gt(d,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:E,signInMethod:F,pendingToken:z}=p;return E&&F&&z&&E===F?new ys(E,z):null}static _create(d,p){return new ys(d,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class $s extends ns{constructor(d){ae(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return $s.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return $s.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const p=ys.fromJSON(d);return ae(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:p,providerId:E}=d;if(!p||!E)return null;try{return ys._create(E,p)}catch{return null}}}let Gi=(()=>{class m extends oi{constructor(){super("twitter.com")}static credential(p,E){return Ur._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:E})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:E,oauthTokenSecret:F}=p;if(!E||!F)return null;try{return m.credential(E,F)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function Bo(m,d){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,D.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:signUp",be(m,d))})).apply(this,arguments)}class Cr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,p,E,F=!1){return(0,D.Z)(function*(){const z=yield Ee._fromIdTokenResponse(d,E,F),ue=wa(E);return new Cr({user:z,providerId:ue,_tokenResponse:E,operationType:p})})()}static _forOperation(d,p,E){return(0,D.Z)(function*(){yield d._updateTokensIfNecessary(E,!0);const F=wa(E);return new Cr({user:d,providerId:F,_tokenResponse:E,operationType:p})})()}}function wa(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function Ei(){return(Ei=(0,D.Z)(function*(m){var d;const p=an(m);if(yield p._initializationPromise,null!==(d=p.currentUser)&&void 0!==d&&d.isAnonymous)return new Cr({user:p.currentUser,providerId:null,operationType:"signIn"});const E=yield Bo(p,{returnSecureToken:!0}),F=yield Cr._fromIdTokenResponse(p,"signIn",E,!0);return yield p._updateCurrentUser(F.user),F})).apply(this,arguments)}class vs extends x.ZR{constructor(d,p,E,F){var z;super(p.code,p.message),this.operationType=E,this.user=F,Object.setPrototypeOf(this,vs.prototype),this.customData={appName:d.name,tenantId:null!==(z=d.tenantId)&&void 0!==z?z:void 0,_serverResponse:p.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(d,p,E,F){return new vs(d,p,E,F)}}function oo(m,d,p,E){return("reauthenticate"===d?p._getReauthenticationResolver(m):p._getIdTokenResponse(m)).catch(z=>{throw"auth/multi-factor-auth-required"===z.code?vs._fromErrorAndOperation(m,z,d,E):z})}function jo(m){return new Set(m.map(({providerId:d})=>d).filter(d=>!!d))}function $o(){return $o=(0,D.Z)(function*(m,d){const p=(0,x.m9)(m);yield Qn(!0,p,d);const{providerUserInfo:E}=yield function on(m,d){return jt.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[d]}),F=jo(E||[]);return p.providerData=p.providerData.filter(z=>F.has(z.providerId)),F.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),$o.apply(this,arguments)}function ao(m,d){return Co.apply(this,arguments)}function Co(){return(Co=(0,D.Z)(function*(m,d,p=!1){const E=yield kr(m,d._linkToIdToken(m.auth,yield m.getIdToken()),p);return Cr._forOperation(m,"link",E)})).apply(this,arguments)}function Qn(m,d,p){return zs.apply(this,arguments)}function zs(){return(zs=(0,D.Z)(function*(m,d,p){yield Hi(d);const F=!1===m?"provider-already-linked":"no-such-provider";ae(jo(d.providerData).has(p)===m,d.auth,F)})).apply(this,arguments)}function ou(m,d){return So.apply(this,arguments)}function So(){return(So=(0,D.Z)(function*(m,d,p=!1){const{auth:E}=m,F="reauthenticate";try{const z=yield kr(m,oo(E,F,d,m),p);ae(z.idToken,E,"internal-error");const ue=os(z.idToken);ae(ue,E,"internal-error");const{sub:Re}=ue;return ae(m.uid===Re,E,"user-mismatch"),Cr._forOperation(m,F,z)}catch(z){throw"auth/user-not-found"===z?.code&&je(E,"user-mismatch"),z}})).apply(this,arguments)}function bo(m,d){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,D.Z)(function*(m,d,p=!1){const E="signIn",F=yield oo(m,E,d),z=yield Cr._fromIdTokenResponse(m,E,F);return p||(yield m._updateCurrentUser(z.user)),z})).apply(this,arguments)}function Ii(m,d){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,D.Z)(function*(m,d){return bo(an(m),d)})).apply(this,arguments)}function zo(m,d){return oa.apply(this,arguments)}function oa(){return(oa=(0,D.Z)(function*(m,d){const p=(0,x.m9)(m);return yield Qn(!1,p,d.providerId),ao(p,d)})).apply(this,arguments)}function ti(m,d){return rs.apply(this,arguments)}function rs(){return(rs=(0,D.Z)(function*(m,d){return ou((0,x.m9)(m),d)})).apply(this,arguments)}function O(){return(O=(0,D.Z)(function*(m,d){return wt(m,"POST","/v1/accounts:signInWithCustomToken",be(m,d))})).apply(this,arguments)}function Q(){return Q=(0,D.Z)(function*(m,d){const p=an(m),E=yield function Go(m,d){return O.apply(this,arguments)}(p,{token:d,returnSecureToken:!0}),F=yield Cr._fromIdTokenResponse(p,"signIn",E);return yield p._updateCurrentUser(F.user),F}),Q.apply(this,arguments)}class J{constructor(d,p){this.factorId=d,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(d,p){return"phoneInfo"in p?le._fromServerResponse(d,p):"totpInfo"in p?xe._fromServerResponse(d,p):je(d,"internal-error")}}class le extends J{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,p){return new le(p)}}class xe extends J{constructor(d){super("totp",d)}static _fromServerResponse(d,p){return new xe(p)}}function Xe(m,d,p){var E;ae((null===(E=p.url)||void 0===E?void 0:E.length)>0,m,"invalid-continue-uri"),ae(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),d.continueUrl=p.url,d.dynamicLinkDomain=p.dynamicLinkDomain,d.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ae(p.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),d.iOSBundleId=p.iOS.bundleId),p.android&&(ae(p.android.packageName.length>0,m,"missing-android-pkg-name"),d.androidInstallApp=p.android.installApp,d.androidMinimumVersionCode=p.android.minimumVersion,d.androidPackageName=p.android.packageName)}function kt(m){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,D.Z)(function*(m){const d=an(m);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function dn(){return(dn=(0,D.Z)(function*(m,d,p){const E=an(m),F={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};p&&Xe(E,F,p),yield Us(E,F,"getOobCode",ur)})).apply(this,arguments)}function Yn(){return Yn=(0,D.Z)(function*(m,d,p){yield Xr((0,x.m9)(m),{oobCode:d,newPassword:p}).catch(function(){var E=(0,D.Z)(function*(F){throw"auth/password-does-not-meet-requirements"===F.code&&kt(m),F});return function(F){return E.apply(this,arguments)}}())}),Yn.apply(this,arguments)}function Kn(){return Kn=(0,D.Z)(function*(m,d){yield function yi(m,d){return Vr.apply(this,arguments)}((0,x.m9)(m),{oobCode:d})}),Kn.apply(this,arguments)}function ui(m,d){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,D.Z)(function*(m,d){const p=(0,x.m9)(m),E=yield Xr(p,{oobCode:d}),F=E.requestType;switch(ae(F,p,"internal-error"),F){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(E.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(E.mfaInfo,p,"internal-error");default:ae(E.email,p,"internal-error")}let z=null;return E.mfaInfo&&(z=J._fromServerResponse(an(p),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:z},operation:F}})).apply(this,arguments)}function qi(){return(qi=(0,D.Z)(function*(m,d){const{data:p}=yield ui((0,x.m9)(m),d);return p.email})).apply(this,arguments)}function ni(){return(ni=(0,D.Z)(function*(m,d,p){const E=an(m),ue=yield Us(E,{returnSecureToken:!0,email:d,password:p,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bo).catch(Ze=>{throw"auth/password-does-not-meet-requirements"===Ze.code&&kt(m),Ze}),Re=yield Cr._fromIdTokenResponse(E,"signIn",ue);return yield E._updateCurrentUser(Re.user),Re})).apply(this,arguments)}function qs(){return(qs=(0,D.Z)(function*(m,d,p){const E=an(m),F={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function z(ue,Re){ae(Re.handleCodeInApp,E,"argument-error"),Re&&Xe(E,ue,Re)})(F,p),yield Us(E,F,"getOobCode",en)})).apply(this,arguments)}function Da(){return(Da=(0,D.Z)(function*(m,d,p){const E=(0,x.m9)(m),F=Li.credentialWithLink(d,p||nr());return ae(F._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Ii(E,F)})).apply(this,arguments)}function co(){return(co=(0,D.Z)(function*(m,d){return $e(m,"POST","/v1/accounts:createAuthUri",be(m,d))})).apply(this,arguments)}function y(){return y=(0,D.Z)(function*(m,d){const E={identifier:d,continueUri:Cn()?nr():"http://localhost"},{signinMethods:F}=yield function Qu(m,d){return co.apply(this,arguments)}((0,x.m9)(m),E);return F||[]}),y.apply(this,arguments)}function h(){return h=(0,D.Z)(function*(m,d){const p=(0,x.m9)(m),F={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};d&&Xe(p.auth,F,d);const{email:z}=yield function Uo(m,d){return Ss.apply(this,arguments)}(p.auth,F);z!==m.email&&(yield m.reload())}),h.apply(this,arguments)}function v(){return v=(0,D.Z)(function*(m,d,p){const E=(0,x.m9)(m),z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:d};p&&Xe(E.auth,z,p);const{email:ue}=yield function Tr(m,d){return Hr.apply(this,arguments)}(E.auth,z);ue!==m.email&&(yield m.reload())}),v.apply(this,arguments)}function B(){return(B=(0,D.Z)(function*(m,d){return $e(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function se(){return se=(0,D.Z)(function*(m,{displayName:d,photoURL:p}){if(void 0===d&&void 0===p)return;const E=(0,x.m9)(m),z={idToken:yield E.getIdToken(),displayName:d,photoUrl:p,returnSecureToken:!0},ue=yield kr(E,function M(m,d){return B.apply(this,arguments)}(E.auth,z));E.displayName=ue.displayName||null,E.photoURL=ue.photoUrl||null;const Re=E.providerData.find(({providerId:Ze})=>"password"===Ze);Re&&(Re.displayName=E.displayName,Re.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ue)}),se.apply(this,arguments)}function Vt(m,d,p){return yt.apply(this,arguments)}function yt(){return yt=(0,D.Z)(function*(m,d,p){const{auth:E}=m,z={idToken:yield m.getIdToken(),returnSecureToken:!0};d&&(z.email=d),p&&(z.password=p);const ue=yield kr(m,function Jo(m,d){return Ci.apply(this,arguments)}(E,z));yield m._updateTokensIfNecessary(ue,!0)}),yt.apply(this,arguments)}class Mt{constructor(d,p,E={}){this.isNewUser=d,this.providerId=p,this.profile=E}}class sn extends Mt{constructor(d,p,E,F){super(d,p,E),this.username=F}}class wn extends Mt{constructor(d,p){super(d,"facebook.com",p)}}class Zn extends sn{constructor(d,p){super(d,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Jn extends Mt{constructor(d,p){super(d,"google.com",p)}}class sr extends sn{constructor(d,p,E){super(d,"twitter.com",p,E)}}function Ti(m){const{user:d,_tokenResponse:p}=m;return d.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function nt(m){var d,p;if(!m)return null;const{providerId:E}=m,F=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},z=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!E&&m?.idToken){const ue=null===(p=null===(d=os(m.idToken))||void 0===d?void 0:d.firebase)||void 0===p?void 0:p.sign_in_provider;if(ue)return new Mt(z,"anonymous"!==ue&&"custom"!==ue?ue:null)}if(!E)return null;switch(E){case"facebook.com":return new wn(z,F);case"github.com":return new Zn(z,F);case"google.com":return new Jn(z,F);case"twitter.com":return new sr(z,F,m.screenName||null);case"custom":case"anonymous":return new Mt(z,null);default:return new Mt(z,E,F)}}(p)}class mn{constructor(d,p,E){this.type=d,this.credential=p,this.user=E}static _fromIdtoken(d,p){return new mn("enroll",d,p)}static _fromMfaPendingCredential(d){return new mn("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var p,E;if(d?.multiFactorSession){if(null!==(p=d.multiFactorSession)&&void 0!==p&&p.pendingCredential)return mn._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(E=d.multiFactorSession)&&void 0!==E&&E.idToken)return mn._fromIdtoken(d.multiFactorSession.idToken)}return null}}class xr{constructor(d,p,E){this.session=d,this.hints=p,this.signInResolver=E}static _fromError(d,p){const E=an(d),F=p.customData._serverResponse,z=(F.mfaInfo||[]).map(Re=>J._fromServerResponse(E,Re));ae(F.mfaPendingCredential,E,"internal-error");const ue=mn._fromMfaPendingCredential(F.mfaPendingCredential);return new xr(ue,z,function(){var Re=(0,D.Z)(function*(Ze){const xt=yield Ze._process(E,ue);delete F.mfaInfo,delete F.mfaPendingCredential;const Kt=Object.assign(Object.assign({},F),{idToken:xt.idToken,refreshToken:xt.refreshToken});switch(p.operationType){case"signIn":const Wt=yield Cr._fromIdTokenResponse(E,p.operationType,Kt);return yield E._updateCurrentUser(Wt.user),Wt;case"reauthenticate":return ae(p.user,E,"internal-error"),Cr._forOperation(p.user,p.operationType,Kt);default:je(E,"internal-error")}});return function(Ze){return Re.apply(this,arguments)}}())}resolveSignIn(d){var p=this;return(0,D.Z)(function*(){return p.signInResolver(d)})()}}class St{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(E=>J._fromServerResponse(d.auth,E)))})}static _fromUser(d){return new St(d)}getSession(){var d=this;return(0,D.Z)(function*(){return mn._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,p){var E=this;return(0,D.Z)(function*(){const F=d,z=yield E.getSession(),ue=yield kr(E.user,F._process(E.user.auth,z,p));return yield E.user._updateTokensIfNecessary(ue),E.user.reload()})()}unenroll(d){var p=this;return(0,D.Z)(function*(){const E="string"==typeof d?d:d.uid,F=yield p.user.getIdToken();try{const z=yield kr(p.user,function Ut(m,d){return $e(m,"POST","/v2/accounts/mfaEnrollment:withdraw",be(m,d))}(p.user.auth,{idToken:F,mfaEnrollmentId:E}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ue})=>ue!==E),yield p.user._updateTokensIfNecessary(z),yield p.user.reload()}catch(z){throw z}})()}}const nn=new WeakMap,ke="__sak";class et{constructor(d,p){this.storageRetriever=d,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(ke,"1"),this.storage.removeItem(ke),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,p){return this.storage.setItem(d,JSON.stringify(p)),Promise.resolve()}_get(d){const p=this.storage.getItem(d);return Promise.resolve(p?JSON.parse(p):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const Lc=(()=>{class m extends et{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,E)=>this.onStorageEvent(p,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function is(){const m=(0,x.z$)();return Qr(m)||Pt(m)}()&&function si(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ir(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const E of Object.keys(this.listeners)){const F=this.storage.getItem(E),z=this.localCache[E];F!==z&&p(E,z,F)}}onStorageEvent(p,E=!1){if(!p.key)return void this.forAllChangedKeys((Re,Ze,xt)=>{this.notifyListeners(Re,xt)});const F=p.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Re=this.storage.getItem(F);if(p.newValue!==Re)null!==p.newValue?this.storage.setItem(F,p.newValue):this.storage.removeItem(F);else if(this.localCache[F]===p.newValue&&!E)return}const z=()=>{const Re=this.storage.getItem(F);!E&&this.localCache[F]===Re||this.notifyListeners(F,Re)},ue=this.storage.getItem(F);!function rr(){return(0,x.w1)()&&10===document.documentMode}()||ue===p.newValue||p.newValue===p.oldValue?z():setTimeout(z,10)}notifyListeners(p,E){this.localCache[p]=E;const F=this.listeners[p];if(F)for(const z of Array.from(F))z(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,E,F)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:E,newValue:F}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,E){var F=()=>super._set,z=this;return(0,D.Z)(function*(){yield F().call(z,p,E),z.localCache[p]=JSON.stringify(E)})()}_get(p){var E=()=>super._get,F=this;return(0,D.Z)(function*(){const z=yield E().call(F,p);return F.localCache[p]=JSON.stringify(z),z})()}_remove(p){var E=()=>super._remove,F=this;return(0,D.Z)(function*(){yield E().call(F,p),delete F.localCache[p]})()}}return m.type="LOCAL",m})(),Es=(()=>{class m extends et{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,E){}_removeListener(p,E){}}return m.type="SESSION",m})();let ff=(()=>{class m{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const E=this.receivers.find(z=>z.isListeningto(p));if(E)return E;const F=new m(p);return this.receivers.push(F),F}isListeningto(p){return this.eventTarget===p}handleEvent(p){var E=this;return(0,D.Z)(function*(){const F=p,{eventId:z,eventType:ue,data:Re}=F.data,Ze=E.handlersMap[ue];if(!Ze?.size)return;F.ports[0].postMessage({status:"ack",eventId:z,eventType:ue});const xt=Array.from(Ze).map(function(){var Wt=(0,D.Z)(function*(br){return br(F.origin,Re)});return function(br){return Wt.apply(this,arguments)}}()),Kt=yield function bl(m){return Promise.all(m.map(function(){var d=(0,D.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(E){return{fulfilled:!1,reason:E}}});return function(p){return d.apply(this,arguments)}}()))}(xt);F.ports[0].postMessage({status:"done",eventId:z,eventType:ue,response:Kt})})()}_subscribe(p,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(E)}_unsubscribe(p,E){this.handlersMap[p]&&E&&this.handlersMap[p].delete(E),(!E||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function rt(m="",d=10){let p="";for(let E=0;E<d;E++)p+=Math.floor(10*Math.random());return m+p}class or{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,p,E=50){var F=this;return(0,D.Z)(function*(){const z=typeof MessageChannel<"u"?new MessageChannel:null;if(!z)throw new Error("connection_unavailable");let ue,Re;return new Promise((Ze,xt)=>{const Kt=rt("",20);z.port1.start();const Wt=setTimeout(()=>{xt(new Error("unsupported_event"))},E);Re={messageChannel:z,onMessage(br){const ia=br;if(ia.data.eventId===Kt)switch(ia.data.status){case"ack":clearTimeout(Wt),ue=setTimeout(()=>{xt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ue),Ze(ia.data.response);break;default:clearTimeout(Wt),clearTimeout(ue),xt(new Error("invalid_response"))}}},F.handlers.add(Re),z.port1.addEventListener("message",Re.onMessage),F.target.postMessage({eventType:d,eventId:Kt,data:p},[z.port2])}).finally(()=>{Re&&F.removeMessageHandler(Re)})})()}}function ci(){return window}function Br(){return typeof ci().WorkerGlobalScope<"u"&&"function"==typeof ci().importScripts}function vr(){return(vr=(0,D.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const $n="firebaseLocalStorageDb",jr="firebaseLocalStorage",bt="fbase_key";class ri{constructor(d){this.request=d}toPromise(){return new Promise((d,p)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function lo(m,d){return m.transaction([jr],d?"readwrite":"readonly").objectStore(jr)}function Ca(){const m=indexedDB.open($n,1);return new Promise((d,p)=>{m.addEventListener("error",()=>{p(m.error)}),m.addEventListener("upgradeneeded",()=>{const E=m.result;try{E.createObjectStore(jr,{keyPath:bt})}catch(F){p(F)}}),m.addEventListener("success",(0,D.Z)(function*(){const E=m.result;E.objectStoreNames.contains(jr)?d(E):(E.close(),yield function aa(){const m=indexedDB.deleteDatabase($n);return new ri(m).toPromise()}(),d(yield Ca()))}))})}function Is(m,d,p){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,D.Z)(function*(m,d,p){const E=lo(m,!0).put({[bt]:d,value:p});return new ri(E).toPromise()})).apply(this,arguments)}function Ju(){return(Ju=(0,D.Z)(function*(m,d){const p=lo(m,!1).get(d),E=yield new ri(p).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Uc(m,d){const p=lo(m,!0).delete(d);return new ri(p).toPromise()}const ua=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,D.Z)(function*(){return p.db||(p.db=yield Ca()),p.db})()}_withRetries(p){var E=this;return(0,D.Z)(function*(){let F=0;for(;;)try{const z=yield E._openDb();return yield p(z)}catch(z){if(F++>3)throw z;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,D.Z)(function*(){return Br()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,D.Z)(function*(){p.receiver=ff._getInstance(function Aa(){return Br()?self:null}()),p.receiver._subscribe("keyChanged",function(){var E=(0,D.Z)(function*(F,z){return{keyProcessed:(yield p._poll()).includes(z.key)}});return function(F,z){return E.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var E=(0,D.Z)(function*(F,z){return["keyChanged"]});return function(F,z){return E.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,D.Z)(function*(){var E,F;if(p.activeServiceWorker=yield function Fc(){return vr.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new or(p.activeServiceWorker);const z=yield p.sender._send("ping",{},800);z&&null!==(E=z[0])&&void 0!==E&&E.fulfilled&&null!==(F=z[0])&&void 0!==F&&F.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var E=this;return(0,D.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function qt(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:p},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Ca();return yield Is(p,ke,"1"),yield Uc(p,ke),!0}catch{}return!1})()}_withPendingWrite(p){var E=this;return(0,D.Z)(function*(){E.pendingWrites++;try{yield p()}finally{E.pendingWrites--}})()}_set(p,E){var F=this;return(0,D.Z)(function*(){return F._withPendingWrite((0,D.Z)(function*(){return yield F._withRetries(z=>Is(z,p,E)),F.localCache[p]=E,F.notifyServiceWorker(p)}))})()}_get(p){var E=this;return(0,D.Z)(function*(){const F=yield E._withRetries(z=>function ja(m,d){return Ju.apply(this,arguments)}(z,p));return E.localCache[p]=F,F})()}_remove(p){var E=this;return(0,D.Z)(function*(){return E._withPendingWrite((0,D.Z)(function*(){return yield E._withRetries(F=>Uc(F,p)),delete E.localCache[p],E.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,D.Z)(function*(){const E=yield p._withRetries(ue=>{const Re=lo(ue,!1).getAll();return new ri(Re).toPromise()});if(!E)return[];if(0!==p.pendingWrites)return[];const F=[],z=new Set;for(const{fbase_key:ue,value:Re}of E)z.add(ue),JSON.stringify(p.localCache[ue])!==JSON.stringify(Re)&&(p.notifyListeners(ue,Re),F.push(ue));for(const ue of Object.keys(p.localCache))p.localCache[ue]&&!z.has(ue)&&(p.notifyListeners(ue,null),F.push(ue));return F})()}notifyListeners(p,E){this.localCache[p]=E;const F=this.listeners[p];if(F)for(const z of Array.from(F))z(E)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,D.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})(),ec=1e12;class w{constructor(d){this.auth=d,this.counter=ec,this._widgets=new Map}render(d,p){const E=this.counter;return this._widgets.set(E,new b(d,this.auth.name,p||{})),this.counter++,E}reset(d){var p;const E=d||ec;null===(p=this._widgets.get(E))||void 0===p||p.delete(),this._widgets.delete(E)}getResponse(d){var p;return(null===(p=this._widgets.get(d||ec))||void 0===p?void 0:p.getResponse())||""}execute(d){var p=this;return(0,D.Z)(function*(){var E;return null===(E=p._widgets.get(d||ec))||void 0===E||E.execute(),""})()}}class b{constructor(d,p,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const F="string"==typeof d?document.getElementById(d):d;ae(F,"argument-error",{appName:p}),this.container=F,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function I(m){const d=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<m;E++)d.push(p.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":p}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const P=To("rcb"),k=new Nt(3e4,6e4);class te{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=ci().grecaptcha)||void 0===d||!d.render)}load(d,p=""){return ae(function Le(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(p),d,"argument-error"),this.shouldResolveImmediately(p)&&Bn(ci().grecaptcha)?Promise.resolve(ci().grecaptcha):new Promise((E,F)=>{const z=ci().setTimeout(()=>{F(De(d,"network-request-failed"))},k.get());ci()[P]=()=>{ci().clearTimeout(z),delete ci()[P];const Re=ci().grecaptcha;if(!Re||!Bn(Re))return void F(De(d,"internal-error"));const Ze=Re.render;Re.render=(xt,Kt)=>{const Wt=Ze(xt,Kt);return this.counter++,Wt},this.hostLanguage=p,E(Re)},Fs(`https://www.google.com/recaptcha/api.js??${(0,x.xO)({onload:P,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(z),F(De(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var p;return!(null===(p=ci().grecaptcha)||void 0===p||!p.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Pe{load(d){return(0,D.Z)(function*(){return new w(d)})()}clearedOneInstance(){}}const Rt="recaptcha",En={theme:"light",type:"image"};class Sr{constructor(d,p,E=Object.assign({},En)){this.parameters=E,this.type=Rt,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=an(d),this.isInvisible="invisible"===this.parameters.size,ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const F="string"==typeof p?document.getElementById(p):p;ae(F,this.auth,"argument-error"),this.container=F,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Pe:new te,this.validateStartingState()}verify(){var d=this;return(0,D.Z)(function*(){d.assertNotDestroyed();const p=yield d.render(),E=d.getAssertedRecaptcha();return E.getResponse(p)||new Promise(z=>{const ue=Re=>{Re&&(d.tokenChangeListeners.delete(ue),z(Re))};d.tokenChangeListeners.add(ue),d.isInvisible&&E.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return p=>{if(this.tokenChangeListeners.forEach(E=>E(p)),"function"==typeof d)d(p);else if("string"==typeof d){const E=ci()[d];"function"==typeof E&&E(p)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,D.Z)(function*(){if(yield d.init(),!d.widgetId){let p=d.container;if(!d.isInvisible){const E=document.createElement("div");p.appendChild(E),p=E}d.widgetId=d.getAssertedRecaptcha().render(p,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,D.Z)(function*(){ae(Cn()&&!Br(),d.auth,"internal-error"),yield function _n(){let m=null;return new Promise(d=>{"complete"!==document.readyState?(m=()=>d(),window.addEventListener("load",m)):d()}).catch(d=>{throw m&&window.removeEventListener("load",m),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const p=yield function Rr(m){return Ir.apply(this,arguments)}(d.auth);ae(p,d.auth,"internal-error"),d.parameters.sitekey=p})()}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ks{constructor(d,p){this.verificationId=d,this.onConfirmation=p}confirm(d){const p=ki._fromVerification(this.verificationId,d);return this.onConfirmation(p)}}function Ts(){return(Ts=(0,D.Z)(function*(m,d,p){const E=an(m),F=yield Hc(E,d,(0,x.m9)(p));return new Ks(F,z=>Ii(E,z))})).apply(this,arguments)}function Zs(){return(Zs=(0,D.Z)(function*(m,d,p){const E=(0,x.m9)(m);yield Qn(!1,E,"phone");const F=yield Hc(E.auth,d,(0,x.m9)(p));return new Ks(F,z=>zo(E,z))})).apply(this,arguments)}function $c(){return($c=(0,D.Z)(function*(m,d,p){const E=(0,x.m9)(m),F=yield Hc(E.auth,d,(0,x.m9)(p));return new Ks(F,z=>ti(E,z))})).apply(this,arguments)}function Hc(m,d,p){return Rl.apply(this,arguments)}function Rl(){return Rl=(0,D.Z)(function*(m,d,p){var E;const F=yield p.verify();try{let z;if(ae("string"==typeof F,m,"argument-error"),ae(p.type===Rt,m,"argument-error"),z="string"==typeof d?{phoneNumber:d}:d,"session"in z){const ue=z.session;if("phoneNumber"in z)return ae("enroll"===ue.type,m,"internal-error"),(yield function Ke(m,d){return $e(m,"POST","/v2/accounts/mfaEnrollment:start",be(m,d))}(m,{idToken:ue.credential,phoneEnrollmentInfo:{phoneNumber:z.phoneNumber,recaptchaToken:F}})).phoneSessionInfo.sessionInfo;{ae("signin"===ue.type,m,"internal-error");const Re=(null===(E=z.multiFactorHint)||void 0===E?void 0:E.uid)||z.multiFactorUid;return ae(Re,m,"missing-multi-factor-info"),(yield function $a(m,d){return $e(m,"POST","/v2/accounts/mfaSignIn:start",be(m,d))}(m,{mfaPendingCredential:ue.credential,mfaEnrollmentId:Re,phoneSignInInfo:{recaptchaToken:F}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ue}=yield function cr(m,d){return Vn.apply(this,arguments)}(m,{phoneNumber:z.phoneNumber,recaptchaToken:F});return ue}}finally{p._reset()}}),Rl.apply(this,arguments)}function cu(){return(cu=(0,D.Z)(function*(m,d){yield ao((0,x.m9)(m),d)})).apply(this,arguments)}let za=(()=>{class m{constructor(p){this.providerId=m.PROVIDER_ID,this.auth=an(p)}verifyPhoneNumber(p,E){return Hc(this.auth,p,(0,x.m9)(E))}static credential(p,E){return ki._fromVerification(p,E)}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:E,temporaryProof:F}=p;return E&&F?ki._fromTokenResponse(E,F):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function Ru(m,d){return d?lt(d):(ae(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class gf extends _i{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Gt(d,this._buildIdpRequest())}_linkToIdToken(d,p){return Gt(d,this._buildIdpRequest(p))}_getReauthenticationResolver(d){return Gt(d,this._buildIdpRequest())}_buildIdpRequest(d){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(p.idToken=d),p}}function xd(m){return bo(m.auth,new gf(m),m.bypassAuthState)}function w_(m){const{auth:d,user:p}=m;return ae(p,d,"internal-error"),ou(p,new gf(m),m.bypassAuthState)}function ig(m){return Od.apply(this,arguments)}function Od(){return(Od=(0,D.Z)(function*(m){const{auth:d,user:p}=m;return ae(p,d,"internal-error"),ao(p,new gf(m),m.bypassAuthState)})).apply(this,arguments)}class sg{constructor(d,p,E,F,z=!1){this.auth=d,this.resolver=E,this.user=F,this.bypassAuthState=z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var d=this;return new Promise(function(){var p=(0,D.Z)(function*(E,F){d.pendingPromise={resolve:E,reject:F};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(z){d.reject(z)}});return function(E,F){return p.apply(this,arguments)}}())}onAuthEvent(d){var p=this;return(0,D.Z)(function*(){const{urlResponse:E,sessionId:F,postBody:z,tenantId:ue,error:Re,type:Ze}=d;if(Re)return void p.reject(Re);const xt={auth:p.auth,requestUri:E,sessionId:F,tenantId:ue||void 0,postBody:z||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ze)(xt))}catch(Kt){p.reject(Kt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return xd;case"linkViaPopup":case"linkViaRedirect":return ig;case"reauthViaPopup":case"reauthViaRedirect":return w_;default:je(this.auth,"internal-error")}}resolve(d){ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const D_=new Nt(2e3,1e4);function lu(){return(lu=(0,D.Z)(function*(m,d,p){const E=an(m);Ye(m,d,ns);const F=Ru(E,p);return new Ml(E,"signInViaPopup",d,F).executeNotNull()})).apply(this,arguments)}function du(){return(du=(0,D.Z)(function*(m,d,p){const E=(0,x.m9)(m);Ye(E.auth,d,ns);const F=Ru(E.auth,p);return new Ml(E.auth,"reauthViaPopup",d,F,E).executeNotNull()})).apply(this,arguments)}function tc(){return(tc=(0,D.Z)(function*(m,d,p){const E=(0,x.m9)(m);Ye(E.auth,d,ns);const F=Ru(E.auth,p);return new Ml(E.auth,"linkViaPopup",d,F,E).executeNotNull()})).apply(this,arguments)}let Ml=(()=>{class m extends sg{constructor(p,E,F,z,ue){super(p,E,z,ue),this.provider=F,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var p=this;return(0,D.Z)(function*(){const E=yield p.execute();return ae(E,p.auth,"internal-error"),E})()}onExecution(){var p=this;return(0,D.Z)(function*(){ct(1===p.filter.length,"Popup operations only handle one event");const E=rt();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],E),p.authWindow.associatedEvent=E,p.resolver._originValidation(p.auth).catch(F=>{p.reject(F)}),p.resolver._isIframeWebStorageSupported(p.auth,F=>{F||p.reject(De(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(De(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const p=()=>{var E,F;this.pollId=null!==(F=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==F&&F.closed?window.setTimeout(()=>{this.pollId=null,this.reject(De(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,D_.get())};p()}}return m.currentPopupAction=null,m})();const ls="pendingRedirect",Pu=new Map;class hu extends sg{constructor(d,p,E=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,E),this.eventId=null}execute(){var d=()=>super.execute,p=this;return(0,D.Z)(function*(){let E=Pu.get(p.auth._key());if(!E){try{const z=(yield function ca(m,d){return $r.apply(this,arguments)}(p.resolver,p.auth))?yield d().call(p):null;E=()=>Promise.resolve(z)}catch(F){E=()=>Promise.reject(F)}Pu.set(p.auth._key(),E)}return p.bypassAuthState||Pu.set(p.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(d){var p=()=>super.onAuthEvent,E=this;return(0,D.Z)(function*(){if("signInViaRedirect"===d.type)return p().call(E,d);if("unknown"!==d.type){if(d.eventId){const F=yield E.auth._redirectUserForId(d.eventId);if(F)return E.user=F,p().call(E,d);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,D.Z)(function*(){})()}cleanUp(){}}function $r(){return($r=(0,D.Z)(function*(m,d){const p=fo(d),E=Wa(m);if(!(yield E._isAvailable()))return!1;const F="true"===(yield E._get(p));return yield E._remove(p),F})).apply(this,arguments)}function Ga(m,d){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,D.Z)(function*(m,d){return Wa(m)._set(fo(d),"true")})).apply(this,arguments)}function Mu(m,d){Pu.set(m._key(),d)}function Wa(m){return lt(m._redirectPersistence)}function fo(m){return _t(ls,m.config.apiKey,m.name)}function Ld(m,d,p){return function mf(m,d,p){return Bi.apply(this,arguments)}(m,d,p)}function Bi(){return(Bi=(0,D.Z)(function*(m,d,p){const E=an(m);Ye(m,d,ns),yield E._initializationPromise;const F=Ru(E,p);return yield Ga(F,E),F._openRedirect(E,d,"signInViaRedirect")})).apply(this,arguments)}function _f(m,d,p){return function fu(m,d,p){return Gr.apply(this,arguments)}(m,d,p)}function Gr(){return(Gr=(0,D.Z)(function*(m,d,p){const E=(0,x.m9)(m);Ye(E.auth,d,ns),yield E.auth._initializationPromise;const F=Ru(E.auth,p);yield Ga(F,E.auth);const z=yield zc(E);return F._openRedirect(E.auth,d,"reauthViaRedirect",z)})).apply(this,arguments)}function po(m,d,p){return function Nl(m,d,p){return Nu.apply(this,arguments)}(m,d,p)}function Nu(){return(Nu=(0,D.Z)(function*(m,d,p){const E=(0,x.m9)(m);Ye(E.auth,d,ns),yield E.auth._initializationPromise;const F=Ru(E.auth,p);yield Qn(!1,E,d.providerId),yield Ga(F,E.auth);const z=yield zc(E);return F._openRedirect(E.auth,d,"linkViaRedirect",z)})).apply(this,arguments)}function xu(){return(xu=(0,D.Z)(function*(m,d){return yield an(m)._initializationPromise,la(m,d,!1)})).apply(this,arguments)}function la(m,d){return wi.apply(this,arguments)}function wi(){return(wi=(0,D.Z)(function*(m,d,p=!1){const E=an(m),F=Ru(E,d),ue=yield new hu(E,F,p).execute();return ue&&!p&&(delete ue.user._redirectEventId,yield E._persistUserIfCurrent(ue.user),yield E._setRedirectUser(null,d)),ue})).apply(this,arguments)}function zc(m){return da.apply(this,arguments)}function da(){return(da=(0,D.Z)(function*(m){const d=rt(`${m.uid}:::`);return m._redirectEventId=d,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),d})).apply(this,arguments)}class rc{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let p=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(d,E)&&(p=!0,this.sendToConsumer(d,E),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function ha(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gc(m);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=d,p=!0)),p}sendToConsumer(d,p){var E;if(d.error&&!Gc(d)){const F=(null===(E=d.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";p.onError(De(this.auth,F))}else p.onAuthEvent(d)}isEventForConsumer(d,p){const E=null===p.eventId||!!d.eventId&&d.eventId===p.eventId;return p.filter.includes(d.type)&&E}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sa(d))}saveEventToCache(d){this.cachedEventUids.add(Sa(d)),this.lastProcessedEventTime=Date.now()}}function Sa(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(d=>d).join("-")}function Gc({type:m,error:d}){return"unknown"===m&&"auth/no-auth-event"===d?.code}function qa(m){return fa.apply(this,arguments)}function fa(){return(fa=(0,D.Z)(function*(m,d={}){return $e(m,"GET","/v1/projects",d)})).apply(this,arguments)}const pu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wc=/^https?/;function Fd(){return(Fd=(0,D.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:d}=yield qa(m);for(const p of d)try{if(yf(p))return}catch{}je(m,"unauthorized-domain")})).apply(this,arguments)}function yf(m){const d=nr(),{protocol:p,hostname:E}=new URL(d);if(m.startsWith("chrome-extension://")){const ue=new URL(m);return""===ue.hostname&&""===E?"chrome-extension:"===p&&m.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===p&&ue.hostname===E}if(!Wc.test(p))return!1;if(pu.test(m))return E===m;const F=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+F+"|"+F+")$","i").test(E)}const Vd=new Nt(3e4,6e4);function qc(){const m=ci().___jsl;if(m?.H)for(const d of Object.keys(m.H))if(m.H[d].r=m.H[d].r||[],m.H[d].L=m.H[d].L||[],m.H[d].r=[...m.H[d].L],m.CP)for(let p=0;p<m.CP.length;p++)m.CP[p]=null}let Ud=null;const ug=new Nt(5e3,15e3),Ou="__/auth/iframe",Ps="emulator/auth/iframe",vf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gu(m){const d=m.config;ae(d.authDomain,m,"auth-domain-config-required");const p=d.emulator?he(d,Ps):`https://${m.config.authDomain}/${Ou}`,E={apiKey:d.apiKey,appName:m.name,v:Ie.SDK_VERSION},F=Pn.get(m.config.apiHost);F&&(E.eid=F);const z=m._getFrameworks();return z.length&&(E.fw=z.join(",")),`${p}?${(0,x.xO)(E).slice(1)}`}function xl(){return xl=(0,D.Z)(function*(m){const d=yield function A_(m){return Ud=Ud||function ag(m){return new Promise((d,p)=>{var E,F,z;function ue(){qc(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{qc(),p(De(m,"network-request-failed"))},timeout:Vd.get()})}if(null!==(F=null===(E=ci().gapi)||void 0===E?void 0:E.iframes)&&void 0!==F&&F.Iframe)d(gapi.iframes.getContext());else{if(null===(z=ci().gapi)||void 0===z||!z.load){const Re=To("iframefcb");return ci()[Re]=()=>{gapi.load?ue():p(De(m,"network-request-failed"))},Fs(`https://apis.google.com/js/api.js?onload=${Re}`).catch(Ze=>p(Ze))}ue()}}).catch(d=>{throw Ud=null,d})}(m),Ud}(m),p=ci().gapi;return ae(p,m,"internal-error"),d.open({where:document.body,url:gu(m),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vf,dontclear:!0},E=>new Promise(function(){var F=(0,D.Z)(function*(z,ue){yield E.restyle({setHideOnLeave:!1});const Re=De(m,"network-request-failed"),Ze=ci().setTimeout(()=>{ue(Re)},ug.get());function xt(){ci().clearTimeout(Ze),z(E)}E.ping(xt).then(xt,()=>{ue(Re)})});return function(z,ue){return F.apply(this,arguments)}}()))}),xl.apply(this,arguments)}const Qs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ku{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const cg="__/auth/handler",go="emulator/auth/handler",Ol=encodeURIComponent("fac");function Ka(m,d,p,E,F,z){return $d.apply(this,arguments)}function $d(){return($d=(0,D.Z)(function*(m,d,p,E,F,z){ae(m.config.authDomain,m,"auth-domain-config-required"),ae(m.config.apiKey,m,"invalid-api-key");const ue={apiKey:m.config.apiKey,appName:m.name,authType:p,redirectUrl:E,v:Ie.SDK_VERSION,eventId:F};if(d instanceof ns){d.setDefaultLanguage(m.languageCode),ue.providerId=d.providerId||"",(0,x.xb)(d.getCustomParameters())||(ue.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Kt,Wt]of Object.entries(z||{}))ue[Kt]=Wt}if(d instanceof oi){const Kt=d.getScopes().filter(Wt=>""!==Wt);Kt.length>0&&(ue.scopes=Kt.join(","))}m.tenantId&&(ue.tid=m.tenantId);const Re=ue;for(const Kt of Object.keys(Re))void 0===Re[Kt]&&delete Re[Kt];const Ze=yield m._getAppCheckToken(),xt=Ze?`#${Ol}=${encodeURIComponent(Ze)}`:"";return`${function If({config:m}){return m.emulator?he(m,go):`https://${m.authDomain}/${cg}`}(m)}?${(0,x.xO)(Re).slice(1)}${xt}`})).apply(this,arguments)}const Hd="webStorageSupport",zd=class lg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Es,this._completeRedirectFn=la,this._overrideRedirectResult=Mu}_openPopup(d,p,E,F){var z=this;return(0,D.Z)(function*(){var ue;ct(null===(ue=z.eventManagers[d._key()])||void 0===ue?void 0:ue.manager,"_initialize() not called before _openPopup()");const Re=yield Ka(d,p,E,nr(),F);return function Ef(m,d,p,E=500,F=600){const z=Math.max((window.screen.availHeight-F)/2,0).toString(),ue=Math.max((window.screen.availWidth-E)/2,0).toString();let Re="";const Ze=Object.assign(Object.assign({},Qs),{width:E.toString(),height:F.toString(),top:z,left:ue}),xt=(0,x.z$)().toLowerCase();p&&(Re=ks(xt)?"_blank":p),mi(xt)&&(d=d||"http://localhost",Ze.scrollbars="yes");const Kt=Object.entries(Ze).reduce((br,[ia,Zl])=>`${br}${ia}=${Zl},`,"");if(function fn(m=(0,x.z$)()){var d;return Pt(m)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(xt)&&"_self"!==Re)return function jd(m,d){const p=document.createElement("a");p.href=m,p.target=d;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(E)}(d||"",Re),new ku(null);const Wt=window.open(d||"",Re,Kt);ae(Wt,m,"popup-blocked");try{Wt.focus()}catch{}return new ku(Wt)}(d,Re,rt())})()}_openRedirect(d,p,E,F){var z=this;return(0,D.Z)(function*(){return yield z._originValidation(d),function vn(m){ci().location.href=m}(yield Ka(d,p,E,nr(),F)),new Promise(()=>{})})()}_initialize(d){const p=d._key();if(this.eventManagers[p]){const{manager:F,promise:z}=this.eventManagers[p];return F?Promise.resolve(F):(ct(z,"If manager is not set, promise should be"),z)}const E=this.initAndGetManager(d);return this.eventManagers[p]={promise:E},E.catch(()=>{delete this.eventManagers[p]}),E}initAndGetManager(d){var p=this;return(0,D.Z)(function*(){const E=yield function ic(m){return xl.apply(this,arguments)}(d),F=new rc(d);return E.register("authEvent",z=>(ae(z?.authEvent,d,"invalid-auth-event"),{status:F.onEvent(z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[d._key()]={manager:F},p.iframes[d._key()]=E,F})()}_isIframeWebStorageSupported(d,p){this.iframes[d._key()].send(Hd,{type:Hd},F=>{var z;const ue=null===(z=F?.[0])||void 0===z?void 0:z[Hd];void 0!==ue&&p(!!ue),je(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function ba(m){return Fd.apply(this,arguments)}(d)),this.originValidationPromises[p]}get _shouldInitProactively(){return ir()||Qr()||Pt()}};class dg{constructor(d){this.factorId=d}_process(d,p,E){switch(p.type){case"enroll":return this._finalizeEnroll(d,p.credential,E);case"signin":return this._finalizeSignIn(d,p.credential);default:return Zt("unexpected MultiFactorSessionType")}}}class kl extends dg{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new kl(d)}_finalizeEnroll(d,p,E){return function yr(m,d){return $e(m,"POST","/v2/accounts/mfaEnrollment:finalize",be(m,d))}(d,{idToken:p,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,p){return function jc(m,d){return $e(m,"POST","/v2/accounts/mfaSignIn:finalize",be(m,d))}(d,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let hg=(()=>{class m{constructor(){}static assertion(p){return kl._fromCredential(p)}}return m.FACTOR_ID="phone",m})();var ac="@firebase/auth";class Fl{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var p=this;return(0,D.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const p=this.auth.onIdTokenChanged(E=>{d(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,p),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const p=this.internalListeners.get(d);p&&(this.internalListeners.delete(d),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ys(){return window}(0,x.Pz)("authIdTokenMaxAge"),function Vl(m){(0,Ie._registerComponent)(new Ce.wA("auth",(d,{options:p})=>{const E=d.getProvider("app").getImmediate(),F=d.getProvider("heartbeat"),z=d.getProvider("app-check-internal"),{apiKey:ue,authDomain:Re}=E.options;ae(ue&&!ue.includes(":"),"invalid-api-key",{appName:E.name});const Ze={apiKey:ue,authDomain:Re,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fr(m)},xt=new Ls(E,F,z,Ze);return function ar(m,d){const p=d?.persistence||[],E=(Array.isArray(p)?p:[p]).map(lt);d?.errorMap&&m._updateErrorMap(d.errorMap),m._initializeWithPersistence(E,d?.popupRedirectResolver)}(xt,p),xt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,p,E)=>{d.getProvider("auth-internal").initialize()})),(0,Ie._registerComponent)(new Ce.wA("auth-internal",d=>{const p=an(d.getProvider("auth").getImmediate());return new Fl(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ie.registerVersion)(ac,"1.4.0",function Gd(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(m)),(0,Ie.registerVersion)(ac,"1.4.0","esm2017")}("Browser");function uc(){return uc=(0,D.Z)(function*(m,d,p){var E;const{BuildInfo:F}=Ys();ct(d.sessionId,"AuthEvent did not contain a session ID");const z=yield function qd(m){return Kd.apply(this,arguments)}(d.sessionId),ue={};return Pt()?ue.ibi=F.packageName:Ae()?ue.apn=F.packageName:je(m,"operation-not-supported-in-this-environment"),F.displayName&&(ue.appDisplayName=F.displayName),ue.sessionId=z,Ka(m,p,d.type,void 0,null!==(E=d.eventId)&&void 0!==E?E:void 0,ue)}),uc.apply(this,arguments)}function cc(){return(cc=(0,D.Z)(function*(m){const{BuildInfo:d}=Ys(),p={};Pt()?p.iosBundleId=d.packageName:Ae()?p.androidPackageName=d.packageName:je(m,"operation-not-supported-in-this-environment"),yield qa(m,p)})).apply(this,arguments)}function Vu(){return(Vu=(0,D.Z)(function*(m,d,p){const{cordova:E}=Ys();let F=()=>{};try{yield new Promise((z,ue)=>{let Re=null;function Ze(){var Wt;z();const br=null===(Wt=E.plugins.browsertab)||void 0===Wt?void 0:Wt.close;"function"==typeof br&&br(),"function"==typeof p?.close&&p.close()}function xt(){Re||(Re=window.setTimeout(()=>{ue(De(m,"redirect-cancelled-by-user"))},2e3))}function Kt(){"visible"===document?.visibilityState&&xt()}d.addPassiveListener(Ze),document.addEventListener("resume",xt,!1),Ae()&&document.addEventListener("visibilitychange",Kt,!1),F=()=>{d.removePassiveListener(Ze),document.removeEventListener("resume",xt,!1),document.removeEventListener("visibilitychange",Kt,!1),Re&&window.clearTimeout(Re)}})}finally{F()}})).apply(this,arguments)}function Kd(){return(Kd=(0,D.Z)(function*(m){const d=function Ra(m){if(ct(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const d=new ArrayBuffer(m.length),p=new Uint8Array(d);for(let E=0;E<m.length;E++)p[E]=m.charCodeAt(E);return p}(m),p=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(p)).map(F=>F.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class _o extends rc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(d)),super.onEvent(d)}initialized(){var d=this;return(0,D.Z)(function*(){yield d.initPromise})()}}function Zd(m){return No.apply(this,arguments)}function No(){return(No=(0,D.Z)(function*(m){const d=yield Qc()._get(Af(m));return d&&(yield Qc()._remove(Af(m))),d})).apply(this,arguments)}function Bl(){const m=[];for(let p=0;p<20;p++){const E=Math.floor(62*Math.random());m.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(E))}return m.join("")}function Qc(){return lt(Lc)}function Af(m){return _t("authEvent",m.config.apiKey,m.name)}function Yc(m){if(!m?.includes("?"))return{};const[d,...p]=m.split("?");return(0,x.zd)(p.join("?"))}const Jc=class Cf{constructor(){this._redirectPersistence=Es,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=la,this._overrideRedirectResult=Mu}_initialize(d){var p=this;return(0,D.Z)(function*(){const E=d._key();let F=p.eventManagers.get(E);return F||(F=new _o(d),p.eventManagers.set(E,F),p.attachCallbackListeners(d,F)),F})()}_openPopup(d){je(d,"operation-not-supported-in-this-environment")}_openRedirect(d,p,E,F){var z=this;return(0,D.Z)(function*(){!function Kc(m){var d,p,E,F,z,ue,Re,Ze,xt,Kt;const Wt=Ys();ae("function"==typeof(null===(d=Wt?.universalLinks)||void 0===d?void 0:d.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ae(typeof(null===(p=Wt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ae("function"==typeof(null===(z=null===(F=null===(E=Wt?.cordova)||void 0===E?void 0:E.plugins)||void 0===F?void 0:F.browsertab)||void 0===z?void 0:z.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae("function"==typeof(null===(Ze=null===(Re=null===(ue=Wt?.cordova)||void 0===ue?void 0:ue.plugins)||void 0===Re?void 0:Re.browsertab)||void 0===Ze?void 0:Ze.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae("function"==typeof(null===(Kt=null===(xt=Wt?.cordova)||void 0===xt?void 0:xt.InAppBrowser)||void 0===Kt?void 0:Kt.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const ue=yield z._initialize(d);yield ue.initialized(),ue.resetRedirect(),function Or(){Pu.clear()}(),yield z._originValidation(d);const Re=function pg(m,d,p=null){return{type:d,eventId:p,urlResponse:null,sessionId:Bl(),postBody:null,tenantId:m.tenantId,error:De(m,"no-auth-event")}}(d,E,F);yield function Zc(m,d){return Qc()._set(Af(m),d)}(d,Re);const Ze=yield function fg(m,d,p){return uc.apply(this,arguments)}(d,Re,p),xt=yield function Df(m){const{cordova:d}=Ys();return new Promise(p=>{d.plugins.browsertab.isAvailable(E=>{let F=null;E?d.plugins.browsertab.openUrl(m):F=d.InAppBrowser.open(m,function vt(m=(0,x.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),p(F)})})}(Ze);return function lc(m,d,p){return Vu.apply(this,arguments)}(d,ue,xt)})()}_isIframeWebStorageSupported(d,p){throw new Error("Method not implemented.")}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Ul(m){return cc.apply(this,arguments)}(d)),this.originValidationPromises[p]}attachCallbackListeners(d,p){const{universalLinks:E,handleOpenURL:F,BuildInfo:z}=Ys(),ue=setTimeout((0,D.Z)(function*(){yield Zd(d),p.onEvent(_u())}),500),Re=function(){var Kt=(0,D.Z)(function*(Wt){clearTimeout(ue);const br=yield Zd(d);let ia=null;br&&Wt?.url&&(ia=function gg(m,d){var p,E;const F=function S_(m){const d=Yc(m),p=d.link?decodeURIComponent(d.link):void 0,E=Yc(p).link,F=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return Yc(F).link||F||E||p||m}(d);if(F.includes("/__/auth/callback")){const z=Yc(F),ue=z.firebaseError?function On(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(z.firebaseError)):null,Re=null===(E=null===(p=ue?.code)||void 0===p?void 0:p.split("auth/"))||void 0===E?void 0:E[1],Ze=Re?De(Re):null;return Ze?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:Ze,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:F,postBody:null}}return null}(br,Wt.url)),p.onEvent(ia||_u())});return function(br){return Kt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,Re);const Ze=F,xt=`${z.packageName.toLowerCase()}://`;Ys().handleOpenURL=function(){var Kt=(0,D.Z)(function*(Wt){if(Wt.toLowerCase().startsWith(xt)&&Re({url:Wt}),"function"==typeof Ze)try{Ze(Wt)}catch(br){console.error(br)}});return function(Wt){return Kt.apply(this,arguments)}}()}};function _u(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:De("no-auth-event")}}function na(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function ga(m=(0,x.z$)()){return!("file:"!==na()&&"ionic:"!==na()&&"capacitor:"!==na()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function dc(){try{const m=self.localStorage,d=rt();if(m)return m.setItem(d,"1"),m.removeItem(d),!function Pf(m=(0,x.z$)()){return function Za(){return(0,x.w1)()&&11===document?.documentMode}()||function Rf(m=(0,x.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,x.hl)()}catch{return jl()&&(0,x.hl)()}return!1}function jl(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function el(){return(function Yd(){return"http:"===na()||"https:"===na()}()||(0,x.ru)()||ga())&&!function Xc(){return(0,x.b$)()||(0,x.UG)()}()&&dc()&&!jl()}function li(){return ga()&&typeof document<"u"}function hc(){return(hc=(0,D.Z)(function*(){return!!li()&&new Promise(m=>{const d=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),m(!0)})})})).apply(this,arguments)}const Ko={LOCAL:"local",NONE:"none",SESSION:"session"},Qa=ae,yo="persistence";function Ya(m){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,D.Z)(function*(m){yield m._initializationPromise;const d=Uu(),p=_t(yo,m.config.apiKey,m.name);d&&d.setItem(p,m._getPersistence())})).apply(this,arguments)}function Uu(){var m;try{return(null===(m=function Jd(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const Xd=ae;class xo{constructor(){this.browserResolver=lt(zd),this.cordovaResolver=lt(Jc),this.underlyingResolver=null,this._redirectPersistence=Es,this._completeRedirectFn=la,this._overrideRedirectResult=Mu}_initialize(d){var p=this;return(0,D.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,p,E,F){var z=this;return(0,D.Z)(function*(){return yield z.selectUnderlyingResolver(),z.assertedUnderlyingResolver._openPopup(d,p,E,F)})()}_openRedirect(d,p,E,F){var z=this;return(0,D.Z)(function*(){return yield z.selectUnderlyingResolver(),z.assertedUnderlyingResolver._openRedirect(d,p,E,F)})()}_isIframeWebStorageSupported(d,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,p)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return li()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Xd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,D.Z)(function*(){if(d.underlyingResolver)return;const p=yield function $l(){return hc.apply(this,arguments)}();d.underlyingResolver=p?d.cordovaResolver:d.browserResolver})()}}function zl(m){return m.unwrap()}function eh(m){return Mf(m)}function Mf(m){const{_tokenResponse:d}=m instanceof x.ZR?m.customData:m;if(!d)return null;if(!(m instanceof x.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return za.credentialFromResult(m);const p=d.providerId;if(!p||p===Ne.PASSWORD)return null;let E;switch(p){case Ne.GOOGLE:E=Ta;break;case Ne.FACEBOOK:E=ai;break;case Ne.GITHUB:E=Fi;break;case Ne.TWITTER:E=Gi;break;default:const{oauthIdToken:F,oauthAccessToken:z,oauthTokenSecret:ue,pendingToken:Re,nonce:Ze}=d;return z||ue||F||Re?Re?p.startsWith("saml.")?ys._create(p,Re):Ur._fromParams({providerId:p,signInMethod:p,pendingToken:Re,idToken:F,accessToken:z}):new cs(p).credential({idToken:F,accessToken:z,rawNonce:Ze}):null}return m instanceof x.ZR?E.credentialFromError(m):E.credentialFromResult(m)}function vo(m,d){return d.catch(p=>{throw p instanceof x.ZR&&function Wl(m,d){var p;const E=null===(p=d.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new ql(m,function Zi(m,d){var p;const E=(0,x.m9)(m),F=d;return ae(d.customData.operationType,E,"argument-error"),ae(null===(p=F.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,E,"argument-error"),xr._fromError(E,F)}(m,d));else if(E){const F=Mf(d),z=d;F&&(z.credential=F,z.tenantId=E.tenantId||void 0,z.email=E.email||void 0,z.phoneNumber=E.phoneNumber||void 0)}}(m,p),p}).then(p=>{const F=p.user;return{operationType:p.operationType,credential:eh(p),additionalUserInfo:Ti(p),user:ra.getOrCreate(F)}})}function ji(m,d){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,D.Z)(function*(m,d){const p=yield d;return{verificationId:p.verificationId,confirm:E=>vo(m,p.confirm(E))}})).apply(this,arguments)}class ql{constructor(d,p){this.resolver=p,this.auth=function Gl(m){return m.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return vo(zl(this.auth),this.resolver.resolveSignIn(d))}}class ra{constructor(d){this._delegate=d,this.multiFactor=function ft(m){const d=(0,x.m9)(m);return nn.has(d)||nn.set(d,St._fromUser(d)),nn.get(d)}(d)}static getOrCreate(d){return ra.USER_MAP.has(d)||ra.USER_MAP.set(d,new ra(d)),ra.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var p=this;return(0,D.Z)(function*(){return vo(p.auth,zo(p._delegate,d))})()}linkWithPhoneNumber(d,p){var E=this;return(0,D.Z)(function*(){return ji(E.auth,function Ha(m,d,p){return Zs.apply(this,arguments)}(E._delegate,d,p))})()}linkWithPopup(d){var p=this;return(0,D.Z)(function*(){return vo(p.auth,function Pl(m,d,p){return tc.apply(this,arguments)}(p._delegate,d,xo))})()}linkWithRedirect(d){var p=this;return(0,D.Z)(function*(){return yield Ya(an(p.auth)),po(p._delegate,d,xo)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var p=this;return(0,D.Z)(function*(){return vo(p.auth,ti(p._delegate,d))})()}reauthenticateWithPhoneNumber(d,p){return ji(this.auth,function bu(m,d,p){return $c.apply(this,arguments)}(this._delegate,d,p))}reauthenticateWithPopup(d){return vo(this.auth,function og(m,d,p){return du.apply(this,arguments)}(this._delegate,d,xo))}reauthenticateWithRedirect(d){var p=this;return(0,D.Z)(function*(){return yield Ya(an(p.auth)),_f(p._delegate,d,xo)})()}sendEmailVerification(d){return function T(m,d){return h.apply(this,arguments)}(this._delegate,d)}unlink(d){var p=this;return(0,D.Z)(function*(){return yield function fr(m,d){return $o.apply(this,arguments)}(p._delegate,d),p})()}updateEmail(d){return function Ue(m,d){return Vt((0,x.m9)(m),d,null)}(this._delegate,d)}updatePassword(d){return function dt(m,d){return Vt((0,x.m9)(m),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function rg(m,d){return cu.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function X(m,d){return se.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,p){return function A(m,d,p){return v.apply(this,arguments)}(this._delegate,d,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ra.USER_MAP=new WeakMap;const yu=ae;let Bu=(()=>{class m{constructor(p,E){if(this.app=p,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:F}=p.options;yu(F,"invalid-api-key",{appName:p.name}),yu(F,"invalid-api-key",{appName:p.name});const z=typeof window<"u"?xo:void 0;this._delegate=E.initialize({options:{persistence:xf(F,p.name),popupRedirectResolver:z}}),this._delegate._updateErrorMap(We),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ra.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,E){!function As(m,d,p){const E=an(m);ae(E._canInitEmulator,E,"emulator-config-failed"),ae(/^https?:\/\//.test(d),E,"invalid-emulator-scheme");const F=!!p?.disableWarnings,z=ps(d),{host:ue,port:Re}=function Do(m){const d=ps(m),p=/(\/\/)?([^?#/]+)/.exec(m.substr(d.length));if(!p)return{host:"",port:null};const E=p[2].split("@").pop()||"",F=/^(\[[^\]]+\])(:|$)/.exec(E);if(F){const z=F[1];return{host:z,port:Bs(E.substr(z.length+1))}}{const[z,ue]=E.split(":");return{host:z,port:Bs(ue)}}}(d);E.config.emulator={url:`${z}//${ue}${null===Re?"":`:${Re}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ue,port:Re,protocol:z.replace(":",""),options:Object.freeze({disableWarnings:F})}),F||function Vo(){function m(){const d=document.createElement("p"),p=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,p,E)}applyActionCode(p){return function pr(m,d){return Kn.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return ui(this._delegate,p)}confirmPasswordReset(p,E){return function lr(m,d,p){return Yn.apply(this,arguments)}(this._delegate,p,E)}createUserWithEmailAndPassword(p,E){var F=this;return(0,D.Z)(function*(){return vo(F._delegate,function Nr(m,d,p){return ni.apply(this,arguments)}(F._delegate,p,E))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function j(m,d){return y.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function uo(m,d){const p=Si.parseLink(d);return"EMAIL_SIGNIN"===p?.operation}(0,p)}getRedirectResult(){var p=this;return(0,D.Z)(function*(){yu(el(),p._delegate,"operation-not-supported-in-this-environment");const E=yield function nc(m,d){return xu.apply(this,arguments)}(p._delegate,xo);return E?vo(p._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Sf(m,d){an(m)._logFramework(d)}(this._delegate,p)}onAuthStateChanged(p,E,F){const{next:z,error:ue,complete:Re}=Nf(p,E,F);return this._delegate.onAuthStateChanged(z,ue,Re)}onIdTokenChanged(p,E,F){const{next:z,error:ue,complete:Re}=Nf(p,E,F);return this._delegate.onIdTokenChanged(z,ue,Re)}sendSignInLinkToEmail(p,E){return function Ws(m,d,p){return qs.apply(this,arguments)}(this._delegate,p,E)}sendPasswordResetEmail(p,E){return function tn(m,d,p){return dn.apply(this,arguments)}(this._delegate,p,E||void 0)}setPersistence(p){var E=this;return(0,D.Z)(function*(){let F;switch(function Hl(m,d){Qa(Object.values(Ko).includes(d),m,"invalid-persistence-type"),(0,x.b$)()?Qa(d!==Ko.SESSION,m,"unsupported-persistence-type"):(0,x.UG)()?Qa(d===Ko.NONE,m,"unsupported-persistence-type"):jl()?Qa(d===Ko.NONE||d===Ko.LOCAL&&(0,x.hl)(),m,"unsupported-persistence-type"):Qa(d===Ko.NONE||dc(),m,"unsupported-persistence-type")}(E._delegate,p),p){case Ko.SESSION:F=Es;break;case Ko.LOCAL:F=(yield lt(ua)._isAvailable())?ua:Lc;break;case Ko.NONE:F=Xt;break;default:return je("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(F)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return vo(this._delegate,function Wi(m){return Ei.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return vo(this._delegate,Ii(this._delegate,p))}signInWithCustomToken(p){return vo(this._delegate,function L(m,d){return Q.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,E){return vo(this._delegate,function Gs(m,d,p){return Ii((0,x.m9)(m),Li.credential(d,p)).catch(function(){var E=(0,D.Z)(function*(F){throw"auth/password-does-not-meet-requirements"===F.code&&kt(m),F});return function(F){return E.apply(this,arguments)}}())}(this._delegate,p,E))}signInWithEmailLink(p,E){return vo(this._delegate,function Ui(m,d,p){return Da.apply(this,arguments)}(this._delegate,p,E))}signInWithPhoneNumber(p,E){return ji(this._delegate,function ho(m,d,p){return Ts.apply(this,arguments)}(this._delegate,p,E))}signInWithPopup(p){var E=this;return(0,D.Z)(function*(){return yu(el(),E._delegate,"operation-not-supported-in-this-environment"),vo(E._delegate,function kd(m,d,p){return lu.apply(this,arguments)}(E._delegate,p,xo))})()}signInWithRedirect(p){var E=this;return(0,D.Z)(function*(){return yu(el(),E._delegate,"operation-not-supported-in-this-environment"),yield Ya(E._delegate),Ld(E._delegate,p,xo)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function bi(m,d){return qi.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=Ko,m})();function Nf(m,d,p){let E=m;"function"!=typeof m&&({next:E,error:d,complete:p}=m);const F=E;return{next:ue=>F(ue&&ra.getOrCreate(ue)),error:d,complete:p}}function xf(m,d){const p=function Ms(m,d){const p=Uu();if(!p)return[];const E=_t(yo,m,d);switch(p.getItem(E)){case Ko.NONE:return[Xt];case Ko.LOCAL:return[ua,Es];case Ko.SESSION:return[Es];default:return[]}}(m,d);if(typeof self<"u"&&!p.includes(ua)&&p.push(ua),typeof window<"u")for(const E of[Lc,Es])p.includes(E)||p.push(E);return p.includes(Xt)||p.push(Xt),p}class tl{constructor(){this.providerId="phone",this._delegate=new za(zl(oe.Z.auth()))}static credential(d,p){return za.credential(d,p)}verifyPhoneNumber(d,p){return this._delegate.verifyPhoneNumber(d,p)}unwrap(){return this._delegate}}tl.PHONE_SIGN_IN_METHOD=za.PHONE_SIGN_IN_METHOD,tl.PROVIDER_ID=za.PROVIDER_ID;const Kl=ae;class fc{constructor(d,p,E=oe.Z.app()){var F;Kl(null===(F=E.options)||void 0===F?void 0:F.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Sr(E.auth(),d,p),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function vu(m){m.INTERNAL.registerComponent(new Ce.wA("auth-compat",d=>{const p=d.getProvider("app-compat").getImmediate(),E=d.getProvider("auth");return new Bu(p,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Li,FacebookAuthProvider:ai,GithubAuthProvider:Fi,GoogleAuthProvider:Ta,OAuthProvider:cs,SAMLAuthProvider:$s,PhoneAuthProvider:tl,PhoneMultiFactorGenerator:hg,RecaptchaVerifier:fc,TwitterAuthProvider:Gi,Auth:Bu,AuthCredential:_i,Error:x.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.4.9")}(oe.Z)},5861:(Ht,Fe,$)=>{function D(x,Ie,ye,me,Ce,He,Ne){try{var re=x[He](Ne),ie=re.value}catch(ge){return void ye(ge)}re.done?Ie(ie):Promise.resolve(ie).then(me,Ce)}function oe(x){return function(){var Ie=this,ye=arguments;return new Promise(function(me,Ce){var He=x.apply(Ie,ye);function Ne(ie){D(He,me,Ce,Ne,re,"next",ie)}function re(ie){D(He,me,Ce,Ne,re,"throw",ie)}Ne(void 0)})}}$.d(Fe,{Z:()=>oe})},7582:(Ht,Fe,$)=>{function Ie(he,de){var ve={};for(var fe in he)Object.prototype.hasOwnProperty.call(he,fe)&&de.indexOf(fe)<0&&(ve[fe]=he[fe]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var be=0;for(fe=Object.getOwnPropertySymbols(he);be<fe.length;be++)de.indexOf(fe[be])<0&&Object.prototype.propertyIsEnumerable.call(he,fe[be])&&(ve[fe[be]]=he[fe[be]])}return ve}function ge(he,de,ve,fe){return new(ve||(ve=Promise))(function($e,mt){function it(rn){try{wt(fe.next(rn))}catch(Yt){mt(Yt)}}function kn(rn){try{wt(fe.throw(rn))}catch(Yt){mt(Yt)}}function wt(rn){rn.done?$e(rn.value):function be($e){return $e instanceof ve?$e:new ve(function(mt){mt($e)})}(rn.value).then(it,kn)}wt((fe=fe.apply(he,de||[])).next())})}function we(he){return this instanceof we?(this.v=he,this):new we(he)}function je(he,de,ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,fe=ve.apply(he,de||[]),$e=[];return be={},mt("next"),mt("throw"),mt("return"),be[Symbol.asyncIterator]=function(){return this},be;function mt(Ln){fe[Ln]&&(be[Ln]=function(Dn){return new Promise(function(Rn,Bn){$e.push([Ln,Dn,Rn,Bn])>1||it(Ln,Dn)})})}function it(Ln,Dn){try{!function kn(Ln){Ln.value instanceof we?Promise.resolve(Ln.value.v).then(wt,rn):Yt($e[0][2],Ln)}(fe[Ln](Dn))}catch(Rn){Yt($e[0][3],Rn)}}function wt(Ln){it("next",Ln)}function rn(Ln){it("throw",Ln)}function Yt(Ln,Dn){Ln(Dn),$e.shift(),$e.length&&it($e[0][0],$e[0][1])}}function Ve(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,de=he[Symbol.asyncIterator];return de?de.call(he):(he=function Je(he){var de="function"==typeof Symbol&&Symbol.iterator,ve=de&&he[de],fe=0;if(ve)return ve.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&fe>=he.length&&(he=void 0),{value:he&&he[fe++],done:!he}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),ve={},fe("next"),fe("throw"),fe("return"),ve[Symbol.asyncIterator]=function(){return this},ve);function fe($e){ve[$e]=he[$e]&&function(mt){return new Promise(function(it,kn){!function be($e,mt,it,kn){Promise.resolve(kn).then(function(wt){$e({value:wt,done:it})},mt)}(it,kn,(mt=he[$e](mt)).done,mt.value)})}}}$.d(Fe,{FC:()=>je,KL:()=>Ve,_T:()=>Ie,mG:()=>ge,qq:()=>we}),"function"==typeof SuppressedError&&SuppressedError}},Ht=>{Ht(Ht.s=1383)}]);