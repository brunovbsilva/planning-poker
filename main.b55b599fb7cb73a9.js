"use strict";(self.webpackChunkplanning_poker=self.webpackChunkplanning_poker||[]).push([[179],{9058:(Ft,He,$)=>{$.d(He,{BH:()=>Ee,G6:()=>It,L:()=>ke,LL:()=>Le,Pz:()=>Fe,Sg:()=>Ue,UG:()=>ue,ZB:()=>ve,ZR:()=>De,aH:()=>re,b$:()=>_r,eu:()=>he,hl:()=>ge,jU:()=>Gt,m9:()=>wi,ne:()=>Nn,pd:()=>en,r3:()=>Hn,ru:()=>gt,tV:()=>ie,uI:()=>ot,vZ:()=>fe,w1:()=>An,xO:()=>cn,xb:()=>Oe,z$:()=>Ze,zd:()=>Je});const Te=function(de){const K=[];let Q=0;for(let Z=0;Z<de.length;Z++){let Y=de.charCodeAt(Z);Y<128?K[Q++]=Y:Y<2048?(K[Q++]=Y>>6|192,K[Q++]=63&Y|128):55296==(64512&Y)&&Z+1<de.length&&56320==(64512&de.charCodeAt(Z+1))?(Y=65536+((1023&Y)<<10)+(1023&de.charCodeAt(++Z)),K[Q++]=Y>>18|240,K[Q++]=Y>>12&63|128,K[Q++]=Y>>6&63|128,K[Q++]=63&Y|128):(K[Q++]=Y>>12|224,K[Q++]=Y>>6&63|128,K[Q++]=63&Y|128)}return K},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(de,K){if(!Array.isArray(de))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=K?this.byteToCharMapWebSafe_:this.byteToCharMap_,Z=[];for(let Y=0;Y<de.length;Y+=3){const Ce=de[Y],qe=Y+1<de.length,ft=qe?de[Y+1]:0,Qt=Y+2<de.length,rn=Qt?de[Y+2]:0;let nr=(15&ft)<<2|rn>>6,li=63&rn;Qt||(li=64,qe||(nr=64)),Z.push(Q[Ce>>2],Q[(3&Ce)<<4|ft>>4],Q[nr],Q[li])}return Z.join("")},encodeString(de,K){return this.HAS_NATIVE_SUPPORT&&!K?btoa(de):this.encodeByteArray(Te(de),K)},decodeString(de,K){return this.HAS_NATIVE_SUPPORT&&!K?atob(de):function(de){const K=[];let Q=0,Z=0;for(;Q<de.length;){const Y=de[Q++];if(Y<128)K[Z++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Ce=de[Q++];K[Z++]=String.fromCharCode((31&Y)<<6|63&Ce)}else if(Y>239&&Y<365){const Qt=((7&Y)<<18|(63&de[Q++])<<12|(63&de[Q++])<<6|63&de[Q++])-65536;K[Z++]=String.fromCharCode(55296+(Qt>>10)),K[Z++]=String.fromCharCode(56320+(1023&Qt))}else{const Ce=de[Q++],qe=de[Q++];K[Z++]=String.fromCharCode((15&Y)<<12|(63&Ce)<<6|63&qe)}}return K.join("")}(this.decodeStringToByteArray(de,K))},decodeStringToByteArray(de,K){this.init_();const Q=K?this.charToByteMapWebSafe_:this.charToByteMap_,Z=[];for(let Y=0;Y<de.length;){const Ce=Q[de.charAt(Y++)],ft=Y<de.length?Q[de.charAt(Y)]:0;++Y;const rn=Y<de.length?Q[de.charAt(Y)]:64;++Y;const Ut=Y<de.length?Q[de.charAt(Y)]:64;if(++Y,null==Ce||null==ft||null==rn||null==Ut)throw new Se;Z.push(Ce<<2|ft>>4),64!==rn&&(Z.push(ft<<4&240|rn>>2),64!==Ut&&Z.push(rn<<6&192|Ut))}return Z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let de=0;de<this.ENCODED_VALS.length;de++)this.byteToCharMap_[de]=this.ENCODED_VALS.charAt(de),this.charToByteMap_[this.byteToCharMap_[de]]=de,this.byteToCharMapWebSafe_[de]=this.ENCODED_VALS_WEBSAFE.charAt(de),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[de]]=de,de>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(de)]=de,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(de)]=de)}}};class Se extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ke=function(de){return function(de){const K=Te(de);return ye.encodeByteArray(K,!0)}(de).replace(/\./g,"")},ie=function(de){try{return ye.decodeString(de,!0)}catch(K){console.error("base64Decode failed: ",K)}return null};function ve(de,K){if(!(K instanceof Object))return K;switch(K.constructor){case Date:return new Date(K.getTime());case Object:void 0===de&&(de={});break;case Array:de=[];break;default:return K}for(const Q in K)!K.hasOwnProperty(Q)||!rt(Q)||(de[Q]=ve(de[Q],K[Q]));return de}function rt(de){return"__proto__"!==de}const ct=()=>{try{return function Ge(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const de=process.env.__FIREBASE_DEFAULTS__;return de?JSON.parse(de):void 0})()||(()=>{if(typeof document>"u")return;let de;try{de=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const K=de&&ie(de[1]);return K&&JSON.parse(K)})()}catch(de){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${de}`)}},re=()=>{var de;return null===(de=ct())||void 0===de?void 0:de.config},Fe=de=>{var K;return null===(K=ct())||void 0===K?void 0:K[`_${de}`]};class Ee{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((K,Q)=>{this.resolve=K,this.reject=Q})}wrapCallback(K){return(Q,Z)=>{Q?this.reject(Q):this.resolve(Z),"function"==typeof K&&(this.promise.catch(()=>{}),1===K.length?K(Q):K(Q,Z))}}}function Ue(de,K){if(de.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Z=K||"demo-project",Y=de.iat||0,Ce=de.sub||de.user_id;if(!Ce)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const qe=Object.assign({iss:`https://securetoken.google.com/${Z}`,aud:Z,iat:Y,exp:Y+3600,auth_time:Y,sub:Ce,user_id:Ce,firebase:{sign_in_provider:"custom",identities:{}}},de);return[ke(JSON.stringify({alg:"none",type:"JWT"})),ke(JSON.stringify(qe)),""].join(".")}function Ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ot(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function ue(){var de;const K=null===(de=ct())||void 0===de?void 0:de.forceEnvironment;if("node"===K)return!0;if("browser"===K)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Gt(){return"object"==typeof self&&self.self===self}function gt(){const de="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof de&&void 0!==de.id}function _r(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function An(){const de=Ze();return de.indexOf("MSIE ")>=0||de.indexOf("Trident/")>=0}function It(){return!ue()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ge(){try{return"object"==typeof indexedDB}catch{return!1}}function he(){return new Promise((de,K)=>{try{let Q=!0;const Z="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(Z);Y.onsuccess=()=>{Y.result.close(),Q||self.indexedDB.deleteDatabase(Z),de(!0)},Y.onupgradeneeded=()=>{Q=!1},Y.onerror=()=>{var Ce;K((null===(Ce=Y.error)||void 0===Ce?void 0:Ce.message)||"")}}catch(Q){K(Q)}})}class De extends Error{constructor(K,Q,Z){super(Q),this.code=K,this.customData=Z,this.name="FirebaseError",Object.setPrototypeOf(this,De.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Le.prototype.create)}}class Le{constructor(K,Q,Z){this.service=K,this.serviceName=Q,this.errors=Z}create(K,...Q){const Z=Q[0]||{},Y=`${this.service}/${K}`,Ce=this.errors[K],qe=Ce?function _t(de,K){return de.replace(at,(Q,Z)=>{const Y=K[Z];return null!=Y?String(Y):`<${Z}?>`})}(Ce,Z):"Error";return new De(Y,`${this.serviceName}: ${qe} (${Y}).`,Z)}}const at=/\{\$([^}]+)}/g;function Hn(de,K){return Object.prototype.hasOwnProperty.call(de,K)}function Oe(de){for(const K in de)if(Object.prototype.hasOwnProperty.call(de,K))return!1;return!0}function fe(de,K){if(de===K)return!0;const Q=Object.keys(de),Z=Object.keys(K);for(const Y of Q){if(!Z.includes(Y))return!1;const Ce=de[Y],qe=K[Y];if(We(Ce)&&We(qe)){if(!fe(Ce,qe))return!1}else if(Ce!==qe)return!1}for(const Y of Z)if(!Q.includes(Y))return!1;return!0}function We(de){return null!==de&&"object"==typeof de}function cn(de){const K=[];for(const[Q,Z]of Object.entries(de))Array.isArray(Z)?Z.forEach(Y=>{K.push(encodeURIComponent(Q)+"="+encodeURIComponent(Y))}):K.push(encodeURIComponent(Q)+"="+encodeURIComponent(Z));return K.length?"&"+K.join("&"):""}function Je(de){const K={};return de.replace(/^\?/,"").split("&").forEach(Z=>{if(Z){const[Y,Ce]=Z.split("=");K[decodeURIComponent(Y)]=decodeURIComponent(Ce)}}),K}function en(de){const K=de.indexOf("?");if(!K)return"";const Q=de.indexOf("#",K);return de.substring(K,Q>0?Q:void 0)}function Nn(de,K){const Q=new Yn(de,K);return Q.subscribe.bind(Q)}class Yn{constructor(K,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{K(this)}).catch(Z=>{this.error(Z)})}next(K){this.forEachObserver(Q=>{Q.next(K)})}error(K){this.forEachObserver(Q=>{Q.error(K)}),this.close(K)}complete(){this.forEachObserver(K=>{K.complete()}),this.close()}subscribe(K,Q,Z){let Y;if(void 0===K&&void 0===Q&&void 0===Z)throw new Error("Missing Observer.");Y=function Sn(de,K){if("object"!=typeof de||null===de)return!1;for(const Q of K)if(Q in de&&"function"==typeof de[Q])return!0;return!1}(K,["next","error","complete"])?K:{next:K,error:Q,complete:Z},void 0===Y.next&&(Y.next=Rr),void 0===Y.error&&(Y.error=Rr),void 0===Y.complete&&(Y.complete=Rr);const Ce=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch{}}),this.observers.push(Y),Ce}unsubscribeOne(K){void 0===this.observers||void 0===this.observers[K]||(delete this.observers[K],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(K){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,K)}sendOne(K,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[K])try{Q(this.observers[K])}catch(Z){typeof console<"u"&&console.error&&console.error(Z)}})}close(K){this.finalized||(this.finalized=!0,void 0!==K&&(this.finalError=K),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rr(){}function wi(de){return de&&de._delegate?de._delegate:de}},1409:(Ft,He,$)=>{$.r(He),$.d(He,{PagesModule:()=>xr});var D=$(6814),se=$(3228),j=$(7398);class Te{constructor(Qe,fe,We,dt){this.id=Qe,this.name=fe,this.roomService=We,this.router=dt}delete(){this.roomService.deleteRoom(this.id)}join(){this.router.navigate(["room",this.id])}}class me{constructor(Qe,fe,We,dt=!0){this.userId=Qe,this.userName=fe,this.value=We,this.hidden=dt}updateVote(Qe){this.value=Qe}showVote(){this.hidden=!1}updateValues(Qe){this.updateCurrentVote(Qe.value),this.updateHidden(Qe.hidden)}updateHidden(Qe){this.hidden!==Qe&&(this.hidden=Qe)}updateCurrentVote(Qe){this.value!==Qe&&(this.value=Qe)}}class ye{constructor(Qe,fe=[]){this.name=Qe,this.votes=fe}vote(Qe){this.votes=this.votes.filter(fe=>fe.userId!==Qe.userId),this.votes.push(Qe)}deleteVote(Qe){this.votes=this.votes.filter(fe=>fe!==Qe)}showVotes(){this.votes.forEach(Qe=>Qe.showVote())}revote(){this.votes=[]}getResult(){const Qe=this.votes.length;return Math.round(this.votes.reduce((fe,We)=>fe+We.value/Qe,0))}updateValues(Qe){this.updateName(Qe.name),this.updateVotes(Qe.votes)}updateName(Qe){this.name===Qe||!Qe||(this.name=Qe)}updateVotes(Qe){this.votes!==Qe&&(0===Qe.length?this.votes=[]:Qe.forEach(fe=>{const We=this.votes.find(dt=>dt.userId===fe.userId);We?We.updateValues(fe):this.pushVote(fe),this.votes=this.votes.filter(dt=>Qe.map(cn=>cn.userId).includes(dt.userId))}))}pushVote(Qe){this.votes.push(new me(Qe.userId,Qe.userName,Qe.value,Qe.hidden))}}class Se{get name(){return this._name}get creator(){return this._creator}constructor(Qe,fe,We=[],dt=0,cn){this.tasks=We,this.currentTask=dt,this.id=cn,this._name=Qe,this._creator=fe}createTask(Qe){this.tasks.push(new ye(Qe))}nextTask(){this.currentTask==this.tasks.length-1||this.currentTask++}previousTask(){0==this.currentTask||this.currentTask--}deleteTask(Qe){this.tasks=this.tasks.filter(fe=>fe!==Qe),this.setTaskIndex(0)}setTaskIndex(Qe){this.currentTask=Qe}updateValues(Qe){this.updateName(Qe.name),this.updateCreator(Qe.creator),this.updateTasks(Qe.tasks),this.updateCurrentTask(Qe.currentTask)}updateName(Qe){this._name===Qe||!Qe||(this._name=Qe)}updateCreator(Qe){this._creator===Qe||!Qe||(this._creator=Qe)}updateTasks(Qe){this.tasks!==Qe&&(0===Qe.length?this.tasks=[]:Qe.forEach(fe=>{const We=this.tasks.find(dt=>dt.name===fe.name);We?We.updateValues(fe):this.pushTask(fe),this.tasks=this.tasks.filter(dt=>Qe.map(cn=>cn.name).includes(dt.name))}))}pushTask(Qe){this.tasks.push(new ye(Qe.name,Qe.votes.map(fe=>new me(fe.userId,fe.userName,fe.value,fe.hidden))))}updateCurrentTask(Qe){this.currentTask!==Qe&&(this.currentTask=Qe)}}var V=$(5879);let ke=(()=>{class Oe{constructor(){this.objectsForDestruction=[]}toDestroy(fe){this.objectsForDestruction.push(fe)}ngOnDestroy(){this.objectsForDestruction.forEach(fe=>fe.unsubscribe())}static#e=this.\u0275fac=function(We){return new(We||Oe)};static#t=this.\u0275cmp=V.Xpm({type:Oe,selectors:[["app-base"]],decls:0,vars:0,template:function(We,dt){},encapsulation:2})}return Oe})();var ie=$(9027);let ae=(()=>{class Oe{constructor(fe){this.firestore=fe}createRoom(fe){this.firestore.collection("rooms").add(this.roomObjectModel(fe))}updateRoom(fe){this.firestore.doc("rooms/"+fe.id).update(this.roomObjectModel(fe))}deleteRoom(fe){this.firestore.doc("rooms/"+fe).delete()}listenerRoom(fe){return this.firestore.doc("rooms/"+fe).valueChanges().pipe((0,j.U)(We=>Object.assign({id:fe},We)))}getRooms(){return this.firestore.collection("rooms").snapshotChanges().pipe((0,j.U)(fe=>fe.map(this.actionToRoomModel)))}actionToRoomModel(fe){const We=fe.payload.doc.data();return Object.assign({id:fe.payload.doc.id},We)}roomObjectModel(fe){return Object.assign({name:fe.name,creator:fe.creator,tasks:fe.tasks.map(We=>this.taskObjectModel(We)),currentTask:fe.currentTask})}taskObjectModel(fe){return Object.assign({name:fe.name,votes:fe.votes.map(We=>this.voteObjectModel(We))})}voteObjectModel(fe){return Object.assign({userId:fe.userId,userName:fe.userName,value:fe.value,hidden:fe.hidden})}static#e=this.\u0275fac=function(We){return new(We||Oe)(V.LFG(ie.ST))};static#t=this.\u0275prov=V.Yz7({token:Oe,factory:Oe.\u0275fac,providedIn:"root"})}return Oe})();var ve=$(7213);const rt=["button"];function Ge(Oe,Qe){if(1&Oe){const fe=V.EpF();V.TgZ(0,"div",2),V.NdJ("click",function(){V.CHM(fe);const dt=V.oxw();return V.KtG(dt.close())}),V.qZA()}}function et(Oe,Qe){if(1&Oe&&(V.TgZ(0,"div",3)(1,"div",4)(2,"h1"),V._uU(3),V.qZA()(),V.TgZ(4,"div",5),V.Hsn(5),V.qZA(),V.TgZ(6,"div",6),V.Hsn(7,1),V.qZA()()),2&Oe){const fe=V.oxw();V.xp6(3),V.Oqu(fe.modalTitle)}}const nt=["*",[["button"]]],pt=["*","button"];let ct=(()=>{class Oe{constructor(){this.buttons=[],this.modalTitle="",this.isOpen=!1}open(){this.isOpen=!0}close(){this.isOpen=!1}static#e=this.\u0275fac=function(We){return new(We||Oe)};static#t=this.\u0275cmp=V.Xpm({type:Oe,selectors:[["app-modal"]],viewQuery:function(We,dt){if(1&We&&V.Gf(rt,5),2&We){let cn;V.iGM(cn=V.CRH())&&(dt.buttons=cn)}},inputs:{modalTitle:"modalTitle"},ngContentSelectors:pt,decls:2,vars:2,consts:[["class","background",3,"click",4,"ngIf"],["class","modal",4,"ngIf"],[1,"background",3,"click"],[1,"modal"],[1,"modal__header"],[1,"modal__body"],[1,"modal__footer"]],template:function(We,dt){1&We&&(V.F$t(nt),V.YNc(0,Ge,1,0,"div",0),V.YNc(1,et,8,1,"div",1)),2&We&&(V.Q6J("ngIf",dt.isOpen),V.xp6(1),V.Q6J("ngIf",dt.isOpen))},dependencies:[D.O5],styles:[".background[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000;opacity:.5;z-index:99}.modal[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fff;padding:20px;border-radius:8px;box-shadow:0 0 10px #00000080;z-index:100}"]})}return Oe})();var Nt=$(4176);let pe=(()=>{class Oe{constructor(fe){this.element=fe}ngOnInit(){this.setStyle()}setStyle(){this.element.nativeElement.classList.add("main-input")}static#e=this.\u0275fac=function(We){return new(We||Oe)(V.Y36(V.SBq))};static#t=this.\u0275dir=V.lG2({type:Oe,selectors:[["","main-input",""]]})}return Oe})(),re=(()=>{class Oe{static#e=this.\u0275fac=function(We){return new(We||Oe)};static#t=this.\u0275cmp=V.Xpm({type:Oe,selectors:[["app-room-item"]],inputs:{room:"room"},decls:8,vars:1,consts:[[1,"room"],[1,"room__name"],[1,"buttons"],["main-button","",3,"click"],["main-button","","theme","error",3,"click"]],template:function(We,dt){1&We&&(V.TgZ(0,"div",0)(1,"h2",1),V._uU(2),V.qZA(),V.TgZ(3,"div",2)(4,"button",3),V.NdJ("click",function(){return dt.room.join()}),V._uU(5,"Entrar"),V.qZA(),V.TgZ(6,"button",4),V.NdJ("click",function(){return dt.room.delete()}),V._uU(7,"Deletar"),V.qZA()()()),2&We&&(V.xp6(2),V.Oqu(dt.room.name))},dependencies:[Nt.j],styles:[".room[_ngcontent-%COMP%]{background:transparent;display:flex;justify-content:space-between}.room[_ngcontent-%COMP%]   .room__name[_ngcontent-%COMP%]{padding:0 16px}.room[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;gap:10px;margin-right:10px}"]})}return Oe})();const Fe=["modal"];function Ee(Oe,Qe){1&Oe&&V._UZ(0,"app-room-item",13),2&Oe&&V.Q6J("room",Qe.$implicit)}function Ue(Oe,Qe){1&Oe&&(V.TgZ(0,"h3",14),V._uU(1,"N\xe3o h\xe1 salas no momento!"),V.qZA())}let Ze=(()=>{class Oe extends ke{constructor(fe,We,dt){super(),this.roomService=fe,this.userAuth=We,this.router=dt,this.rooms=[]}ngOnInit(){this.toDestroy(this.roomService.getRooms().pipe((0,j.U)(fe=>fe.map(We=>new Te(We.id,We.name,this.roomService,this.router)))).subscribe({next:fe=>this.rooms=fe,error:fe=>{throw fe}}))}createRoom(fe){this.isNullOrEmpty(fe)||this.userAuth.currentUser.then(We=>this.roomService.createRoom(new Se(fe,We?.uid))).finally(()=>this.modal.close())}isNullOrEmpty(fe){return null==fe||""===fe}static#e=this.\u0275fac=function(We){return new(We||Oe)(V.Y36(ae),V.Y36(ve.zQ),V.Y36(se.F0))};static#t=this.\u0275cmp=V.Xpm({type:Oe,selectors:[["app-rooms"]],viewQuery:function(We,dt){if(1&We&&V.Gf(Fe,5),2&We){let cn;V.iGM(cn=V.CRH())&&(dt.modal=cn.first)}},features:[V.qOj],decls:17,vars:2,consts:[[1,"actions"],[1,"rooms__header"],["main-button","","theme","primary",3,"click"],[1,"rooms"],[1,"rooms__list"],[3,"room",4,"ngFor","ngForOf"],["class","no-room",4,"ngIf"],["modalTitle","Criar sala"],["modal",""],["main-input","","type","text","placeholder","Digite o nome da sala",1,"input"],["name",""],["main-button","",3,"click"],["main-button","","theme","error",3,"click"],[3,"room"],[1,"no-room"]],template:function(We,dt){if(1&We){const cn=V.EpF();V.TgZ(0,"div",0)(1,"h2",1),V._uU(2,"Escolha ou crie uma sala"),V.qZA(),V.TgZ(3,"button",2),V.NdJ("click",function(){V.CHM(cn);const en=V.MAs(10);return V.KtG(en.open())}),V._uU(4,"Criar sala"),V.qZA()(),V.TgZ(5,"div",3)(6,"div",4),V.YNc(7,Ee,1,1,"app-room-item",5),V.YNc(8,Ue,2,0,"h3",6),V.qZA()(),V.TgZ(9,"app-modal",7,8),V._UZ(11,"input",9,10),V.TgZ(13,"button",11),V.NdJ("click",function(){V.CHM(cn);const en=V.MAs(12);return V.KtG(dt.createRoom(en.value))}),V._uU(14,"Criar"),V.qZA(),V.TgZ(15,"button",12),V.NdJ("click",function(){V.CHM(cn);const en=V.MAs(10);return V.KtG(en.close())}),V._uU(16,"Cancelar"),V.qZA()()}2&We&&(V.xp6(7),V.Q6J("ngForOf",dt.rooms),V.xp6(1),V.Q6J("ngIf",0==dt.rooms.length))},dependencies:[D.sg,D.O5,ct,Nt.j,pe,re],styles:[".actions[_ngcontent-%COMP%]{max-width:1260px;margin:16px auto;display:flex;justify-content:space-between}.rooms[_ngcontent-%COMP%]{max-width:1260px;display:block;margin:0 auto}.rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]{border:1px solid gray;border-radius:4px;width:100%}.rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   app-room-item[_ngcontent-%COMP%]{display:block;padding:10px 0}.rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   .no-room[_ngcontent-%COMP%]{line-height:3.25rem;text-align:center}.rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2n){background-color:#f5f5f5}.rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{border-radius:4px 4px 0 0}.rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:last-child{border-radius:0 0 4px 4px}"]})}return Oe})();const ot=["modal"];function ue(Oe,Qe){if(1&Oe){const fe=V.EpF();V.TgZ(0,"div",10)(1,"div",11)(2,"button",9),V.NdJ("click",function(){V.CHM(fe);const dt=V.oxw();return V.KtG(dt.setTask(0))}),V._uU(3),V.qZA(),V.TgZ(4,"button",9),V.NdJ("click",function(){V.CHM(fe);const dt=V.oxw();return V.KtG(dt.previousTask())}),V._uU(5),V.qZA()(),V.TgZ(6,"h3"),V._uU(7),V.qZA(),V.TgZ(8,"div",12)(9,"button",9),V.NdJ("click",function(){V.CHM(fe);const dt=V.oxw();return V.KtG(dt.nextTask())}),V._uU(10),V.qZA(),V.TgZ(11,"button",9),V.NdJ("click",function(){V.CHM(fe);const dt=V.oxw();return V.KtG(dt.setTask(dt.room.tasks.length-1))}),V._uU(12),V.qZA()()()}if(2&Oe){const fe=V.oxw();V.xp6(2),V.Q6J("disabled",0==fe.room.currentTask),V.xp6(1),V.Oqu("<<"),V.xp6(1),V.Q6J("disabled",0==fe.room.currentTask),V.xp6(1),V.Oqu("<"),V.xp6(2),V.Oqu(fe.room.tasks[fe.room.currentTask].name),V.xp6(2),V.Q6J("disabled",fe.room.currentTask==fe.room.tasks.length-1),V.xp6(1),V.Oqu(">"),V.xp6(1),V.Q6J("disabled",fe.room.currentTask==fe.room.tasks.length-1),V.xp6(1),V.Oqu(">>")}}function Gt(Oe,Qe){if(1&Oe){const fe=V.EpF();V.TgZ(0,"div",14)(1,"span",15),V._uU(2),V.qZA(),V.TgZ(3,"button",16),V.NdJ("click",function(){const cn=V.CHM(fe).$implicit,Je=V.oxw(2);return V.KtG(Je.deleteTask(cn))}),V._uU(4,"delete"),V.qZA()()}if(2&Oe){const fe=Qe.$implicit;V.xp6(2),V.Oqu(fe.name)}}function gt(Oe,Qe){if(1&Oe&&(V.ynx(0),V.YNc(1,Gt,5,1,"div",13),V.BQk()),2&Oe){const fe=V.oxw();V.xp6(1),V.Q6J("ngForOf",fe.room.tasks)}}function _r(Oe,Qe){1&Oe&&(V.TgZ(0,"span",17),V._uU(1,"N\xe3o h\xe1 tasks no momento"),V.qZA())}let Qn=(()=>{class Oe{constructor(fe){this.roomService=fe}ngOnInit(){}nextTask(){this.room.nextTask(),this.roomService.updateRoom(this.room)}previousTask(){this.room.previousTask(),this.roomService.updateRoom(this.room)}setTask(fe){this.room.setTaskIndex(fe),this.roomService.updateRoom(this.room)}createTask(fe){this.room.createTask(fe),this.roomService.updateRoom(this.room)}deleteTask(fe){this.room.deleteTask(fe),this.roomService.updateRoom(this.room)}static#e=this.\u0275fac=function(We){return new(We||Oe)(V.Y36(ae))};static#t=this.\u0275cmp=V.Xpm({type:Oe,selectors:[["app-tasks"]],viewQuery:function(We,dt){if(1&We&&V.Gf(ot,5),2&We){let cn;V.iGM(cn=V.CRH())&&(dt.modal=cn.first)}},inputs:{room:"room"},decls:13,vars:4,consts:[["main-button","",1,"update-tasks-btn",3,"click"],["class","tasks-control",4,"ngIf"],["modalTitle","Tasks"],["modal",""],[4,"ngIf","ngIfElse"],["noTasks",""],[1,"create-task"],["main-input","","type","text","placeholder","Digite o nome da task",3,"keyup"],["name",""],["main-button","",3,"disabled","click"],[1,"tasks-control"],[1,"tasks-control__previous"],[1,"tasks-control__next"],["class","task",4,"ngFor","ngForOf"],[1,"task"],[1,"task__name"],["main-button","","theme","error",3,"click"],[1,"no-tasks"]],template:function(We,dt){if(1&We){const cn=V.EpF();V.TgZ(0,"button",0),V.NdJ("click",function(){V.CHM(cn);const en=V.MAs(4);return V.KtG(en.open())}),V._uU(1,"Atualizar tasks"),V.qZA(),V.YNc(2,ue,13,9,"div",1),V.TgZ(3,"app-modal",2,3),V.YNc(5,gt,2,1,"ng-container",4),V.YNc(6,_r,2,0,"ng-template",null,5,V.W1O),V.TgZ(8,"div",6)(9,"input",7,8),V.NdJ("keyup",function(){return 0}),V.qZA(),V.TgZ(11,"button",9),V.NdJ("click",function(){V.CHM(cn);const en=V.MAs(10);return V.KtG(dt.createTask(en.value))}),V._uU(12,"Criar"),V.qZA()()()}if(2&We){const cn=V.MAs(7),Je=V.MAs(10);V.xp6(2),V.Q6J("ngIf",dt.room.tasks[dt.room.currentTask]),V.xp6(3),V.Q6J("ngIf",dt.room.tasks.length>0)("ngIfElse",cn),V.xp6(6),V.Q6J("disabled",!Je.value)}},dependencies:[D.sg,D.O5,ct,Nt.j,pe],styles:[".update-tasks-btn[_ngcontent-%COMP%]{float:right;margin-bottom:10px}.tasks-control[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;background-color:transparent;border:2px solid #9e9e9e;color:#2e2e2e;border-radius:4px}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%], .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%]{display:flex;gap:5px}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background:transparent}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled), .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled){color:#2e2e2e}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled):hover, .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled):hover{background:#bdbdbd;color:#2e2e2e}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled):active, .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled):active{background:#424242;color:#c2c2c2}.task[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 1rem;border-bottom:1px solid #ccc;margin-bottom:1rem}"]})}return Oe})();class An{constructor(Qe,fe,We=!1,dt){this.type=Qe,this.value=fe,this.isFliped=We,this.creator=dt}toggleFlip(){this.isFliped=!this.isFliped}}var nn=$(6825);const Tt=[(0,nn.X$)("hover",[(0,nn.SB)("true",(0,nn.oB)({transform:"translateY(-20%)"})),(0,nn.SB)("false",(0,nn.oB)({transform:"translateY(0)"})),(0,nn.eR)("true <=> false",(0,nn.jt)("200ms ease-in-out"))])];var It=function(Oe){return Oe[Oe.DIAMONDS=1]="DIAMONDS",Oe[Oe.SPADES=2]="SPADES",Oe[Oe.HEARTS=3]="HEARTS",Oe[Oe.CLUBS=4]="CLUBS",Oe}(It||{});const ge=[(0,nn.X$)("flipAnimation",[(0,nn.SB)("true",(0,nn.oB)({transform:"rotateY(179deg)"})),(0,nn.SB)("false",(0,nn.oB)({transform:"rotateY(0)"})),(0,nn.eR)("true => false",(0,nn.jt)("500ms ease-out")),(0,nn.eR)("false => true",(0,nn.jt)("500ms ease-in"))])];function he(Oe,Qe){if(1&Oe&&(V.TgZ(0,"span",10),V._uU(1),V.qZA()),2&Oe){const fe=V.oxw();V.xp6(1),V.Oqu(fe.card.creator)}}function Me(Oe,Qe){if(1&Oe&&(V.TgZ(0,"span",10),V._uU(1),V.qZA()),2&Oe){const fe=V.oxw();V.xp6(1),V.Oqu(fe.card.creator)}}let we=(()=>{class Oe{constructor(){this.isHovered=!1}getCardType(){switch(this.card.type){case It.HEARTS:return"\u2665";case It.DIAMONDS:return"\u2666";case It.SPADES:return"\u2660";case It.CLUBS:return"\u2663"}}getCardValue(){switch(this.card.value){case 1:return"A";case 11:return"J";case 12:return"Q";case 13:return"K";default:return this.card.value}}getClasses(){return{"card-front--red":[It.HEARTS,It.DIAMONDS].includes(this.card.type),"card-front--black":[It.SPADES,It.CLUBS].includes(this.card.type)}}changeIsHovered(fe){this.isHovered="mouseenter"===fe.type}static#e=this.\u0275fac=function(We){return new(We||Oe)};static#t=this.\u0275cmp=V.Xpm({type:Oe,selectors:[["app-card"]],hostBindings:function(We,dt){1&We&&V.NdJ("mouseenter",function(Je){return dt.changeIsHovered(Je)})("mouseleave",function(Je){return dt.changeIsHovered(Je)})},inputs:{card:"card"},decls:14,vars:7,consts:[[1,"card"],[1,"card-side","card-front",3,"ngClass"],["class","creator-name",4,"ngIf"],[1,"retangle"],[1,"card-type"],[1,"card-value"],[1,"number"],[1,"type"],[1,"card-side","card-back"],["src","assets/images/back-card.png","alt","card back",1,"back-image"],[1,"creator-name"]],template:function(We,dt){1&We&&(V.TgZ(0,"div",0)(1,"div",1),V.YNc(2,he,2,1,"span",2),V.TgZ(3,"div",3)(4,"span",4),V._uU(5),V.qZA()(),V.TgZ(6,"div",5)(7,"span",6),V._uU(8),V.qZA(),V.TgZ(9,"span",7),V._uU(10),V.qZA()()(),V.TgZ(11,"div",8),V.YNc(12,Me,2,1,"span",2),V._UZ(13,"img",9),V.qZA()()),2&We&&(V.Q6J("@flipAnimation",dt.card.isFliped),V.xp6(1),V.Q6J("ngClass",dt.getClasses()),V.xp6(1),V.Q6J("ngIf",dt.card.creator),V.xp6(3),V.Oqu(dt.getCardType()),V.xp6(3),V.Oqu(dt.getCardValue()),V.xp6(2),V.Oqu(dt.getCardType()),V.xp6(2),V.Q6J("ngIf",dt.card.creator))},dependencies:[D.mk,D.O5],styles:[".card[_ngcontent-%COMP%]{position:relative;width:6rem;height:8rem;background-color:#f8f9fa;border-radius:8px;box-shadow:0 0 10px #00000026;transform-style:preserve-3d;transform:transform 1s}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;transform:rotateY(0)}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .retangle[_ngcontent-%COMP%]{width:60%;height:65%;border-radius:6px;display:flex;align-items:center;justify-content:center}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .retangle[_ngcontent-%COMP%]   .card-type[_ngcontent-%COMP%]{font-size:2rem}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{position:absolute;top:0;left:.5rem}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{font-size:.75rem}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .creator-name[_ngcontent-%COMP%]{position:absolute;top:0;right:.5rem;font-size:.75rem;max-width:3.25rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:700}.card[_ngcontent-%COMP%]   .card-front--red[_ngcontent-%COMP%]{color:red}.card[_ngcontent-%COMP%]   .card-front--red[_ngcontent-%COMP%]   .retangle[_ngcontent-%COMP%]{border:2px solid red}.card[_ngcontent-%COMP%]   .card-front--black[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]   .card-front--black[_ngcontent-%COMP%]   .retangle[_ngcontent-%COMP%]{border:2px solid black}.card[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]{transform:rotateY(-180deg)}.card[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]   .back-image[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:8px;background-size:cover;background-position:center}.card[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]   .creator-name[_ngcontent-%COMP%]{position:absolute;display:block;top:.25rem;right:.25rem;max-width:5rem;padding:0 .5rem;font-size:.75rem;line-height:1.5rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:700;background:black;color:#fff;border:2px solid white;border-radius:6px}.card[_ngcontent-%COMP%]   .card-side[_ngcontent-%COMP%]{backface-visibility:hidden;width:100%;height:100%;border-radius:8px;position:absolute;-webkit-user-select:none;user-select:none}"],data:{animation:ge}})}return Oe})();function De(Oe,Qe){if(1&Oe){const fe=V.EpF();V.TgZ(0,"div",5)(1,"button",6),V.NdJ("click",function(){V.CHM(fe);const dt=V.oxw();return V.KtG(dt.showVotes())}),V._uU(2,"Virar cartas"),V.qZA(),V.TgZ(3,"button",7),V.NdJ("click",function(){V.CHM(fe);const dt=V.oxw();return V.KtG(dt.revote())}),V._uU(4,"Revotar"),V.qZA()()}if(2&Oe){const fe=V.oxw();V.xp6(1),V.Q6J("disabled",fe.flippedVotes),V.xp6(2),V.Q6J("disabled",!fe.flippedVotes)}}function Le(Oe,Qe){if(1&Oe&&V._UZ(0,"app-card",8),2&Oe){const fe=Qe.$implicit,We=V.oxw();V.Q6J("card",We.mapVote(fe))}}function _t(Oe,Qe){if(1&Oe){const fe=V.EpF();V.TgZ(0,"app-card",11,12),V.NdJ("click",function(){const cn=V.CHM(fe).$implicit,Je=V.oxw(2);return V.KtG(Je.vote(cn.value))}),V.qZA()}if(2&Oe){const fe=Qe.$implicit,We=V.MAs(1);V.Q6J("@hover",We.isHovered)("card",fe)}}function at(Oe,Qe){if(1&Oe&&(V.TgZ(0,"div",9),V.YNc(1,_t,2,2,"app-card",10),V.qZA()),2&Oe){const fe=V.oxw();V.xp6(1),V.Q6J("ngForOf",fe.cards)}}let Vn=(()=>{class Oe{get task(){return this.room.tasks[this.room.currentTask]}get flippedVotes(){return this.task.votes.some(fe=>!fe.hidden)}constructor(fe,We){this.userAuth=fe,this.roomService=We,this.cards=[new An(1,1),new An(2,2),new An(3,3),new An(4,5),new An(1,8),new An(2,13),new An(3,21),new An(4,34),new An(1,55),new An(2,89)]}mapVote(fe){return new An(It.HEARTS,fe.value,fe.hidden,fe.userName)}vote(fe){this.flippedVotes||this.userAuth.currentUser.then(We=>this.task.vote(new me(We?.uid,We?.displayName,fe))).finally(()=>this.roomService.updateRoom(this.room))}showVotes(){this.flippedVotes||(this.task.showVotes(),this.roomService.updateRoom(this.room))}revote(){this.task.revote(),this.roomService.updateRoom(this.room)}getResult(){return this.task.getResult()}static#e=this.\u0275fac=function(We){return new(We||Oe)(V.Y36(ve.zQ),V.Y36(ae))};static#t=this.\u0275cmp=V.Xpm({type:Oe,selectors:[["app-votes"]],inputs:{room:"room"},decls:7,vars:4,consts:[["class","actions",4,"ngIf"],[1,"votes-result"],[1,"current-votes-list"],[3,"card",4,"ngFor","ngForOf"],["class","votes",4,"ngIf"],[1,"actions"],["main-button","",1,"current-votes__btn-flip",3,"disabled","click"],["main-button","","theme","accent",1,"current-votes__btn-revote",3,"disabled","click"],[3,"card"],[1,"votes"],["class","card",3,"card","click",4,"ngFor","ngForOf"],[1,"card",3,"card","click"],["cardComponent",""]],template:function(We,dt){1&We&&(V.YNc(0,De,5,2,"div",0),V.TgZ(1,"div",1)(2,"h1"),V._uU(3),V.qZA()(),V.TgZ(4,"div",2),V.YNc(5,Le,1,1,"app-card",3),V.qZA(),V.YNc(6,at,2,1,"div",4)),2&We&&(V.Q6J("ngIf",dt.task.votes.length>0),V.xp6(3),V.Oqu(dt.flippedVotes?dt.getResult():"-"),V.xp6(2),V.Q6J("ngForOf",dt.task.votes),V.xp6(1),V.Q6J("ngIf",!dt.flippedVotes))},dependencies:[D.sg,D.O5,we,Nt.j],styles:[".actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem;margin-bottom:.5rem}.votes-result[_ngcontent-%COMP%]{border:3px solid #9e9e9e;color:#2e2e2e;border-radius:4px;text-align:center;font-size:3rem;line-height:8rem}.current-votes-list[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:.5rem 0;overflow-y:hidden;overflow-x:auto}.votes[_ngcontent-%COMP%]{display:flex;position:absolute;bottom:0;left:50%;transform:translate(calc(-50% - 2rem));overflow-x:show}.votes[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:2rem;height:3rem;cursor:pointer}"],data:{animation:[Tt]}})}return Oe})();function St(Oe,Qe){if(1&Oe&&V._UZ(0,"app-votes",3),2&Oe){const fe=V.oxw(2);V.Q6J("room",fe.room)}}function un(Oe,Qe){if(1&Oe&&(V.TgZ(0,"div",1)(1,"h1",2),V._uU(2),V.qZA(),V._UZ(3,"app-tasks",3),V.YNc(4,St,1,1,"app-votes",4),V.qZA()),2&Oe){const fe=V.oxw();V.xp6(2),V.Oqu(fe.room.name),V.xp6(1),V.Q6J("room",fe.room),V.xp6(1),V.Q6J("ngIf",fe.room.tasks[fe.room.currentTask])}}const Dn=[{path:"rooms",component:Ze,title:"Salas"},{path:"room/:id",component:(()=>{class Oe extends ke{constructor(fe,We){super(),this.activatedRoute=fe,this.roomService=We,this.roomId=this.activatedRoute.snapshot.paramMap.get("id")}ngOnInit(){this.startListenerRoom()}startListenerRoom(){this.toDestroy(this.roomService.listenerRoom(this.roomId).subscribe(fe=>{this.room?this.room?.updateValues(fe):this.startRoom(fe)}))}startRoom(fe){this.room=new Se(fe.name,fe.creator,fe.tasks.map(We=>new ye(We.name,We.votes.map(dt=>new me(dt.userId,dt.userName,dt.value,dt.hidden)))),fe.currentTask,fe.id)}static#e=this.\u0275fac=function(We){return new(We||Oe)(V.Y36(se.gz),V.Y36(ae))};static#t=this.\u0275cmp=V.Xpm({type:Oe,selectors:[["app-room"]],features:[V.qOj],decls:1,vars:1,consts:[["class","current-room",4,"ngIf"],[1,"current-room"],[1,"room-name"],[3,"room"],[3,"room",4,"ngIf"]],template:function(We,dt){1&We&&V.YNc(0,un,5,3,"div",0),2&We&&V.Q6J("ngIf",dt.room)},dependencies:[D.O5,Qn,Vn],styles:[".current-room[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin:16px auto;padding:0 16px;max-width:1260px;width:100%}.current-room[_ngcontent-%COMP%]   .room-name[_ngcontent-%COMP%]{font-size:3rem;text-align:center}"]})}return Oe})(),title:(()=>{class Oe{constructor(fe){this.roomService=fe}resolve(fe){const We=fe.paramMap.get("id");return this.roomService.listenerRoom(We).pipe((0,j.U)(dt=>dt.name))}static#e=this.\u0275fac=function(We){return new(We||Oe)(V.LFG(ae))};static#t=this.\u0275prov=V.Yz7({token:Oe,factory:Oe.\u0275fac,providedIn:"root"})}return Oe})()},{path:"**",redirectTo:"rooms"}];let bn=(()=>{class Oe{static#e=this.\u0275fac=function(We){return new(We||Oe)};static#t=this.\u0275mod=V.oAB({type:Oe});static#n=this.\u0275inj=V.cJS({imports:[se.Bz.forChild(Dn),se.Bz]})}return Oe})();var Hn=$(6208);let xr=(()=>{class Oe{static#e=this.\u0275fac=function(We){return new(We||Oe)};static#t=this.\u0275mod=V.oAB({type:Oe});static#n=this.\u0275inj=V.cJS({imports:[bn,D.ez,Hn.m]})}return Oe})()},4176:(Ft,He,$)=>{$.d(He,{j:()=>se});var D=$(5879);let se=(()=>{class j{constructor(me){this.element=me,this.theme="primary"}ngOnInit(){this.setStyle()}setStyle(){this.element.nativeElement.classList.add("main-button"),this.element.nativeElement.classList.add(`main-button--${this.theme}`)}static#e=this.\u0275fac=function(ye){return new(ye||j)(D.Y36(D.SBq))};static#t=this.\u0275dir=D.lG2({type:j,selectors:[["button","main-button",""]],inputs:{theme:"theme"}})}return j})()},6208:(Ft,He,$)=>{$.d(He,{m:()=>j});var D=$(6814),se=$(5879);let j=(()=>{class Te{static#e=this.\u0275fac=function(Se){return new(Se||Te)};static#t=this.\u0275mod=se.oAB({type:Te});static#n=this.\u0275inj=se.cJS({imports:[D.ez]})}return Te})()},6662:(Ft,He,$)=>{var D=$(6593),se=$(3228),j=$(5879),Te=$(7213),me=$(6814),ye=$(4176);function Se(v,h){if(1&v){const m=j.EpF();j.TgZ(0,"div",3)(1,"div",4),j._UZ(2,"img",5),j.TgZ(3,"span",6),j._uU(4),j.qZA()(),j.TgZ(5,"div",7)(6,"button",8),j.NdJ("click",function(){j.CHM(m);const x=j.oxw();return j.KtG(x.logout())}),j._uU(7,"Sair"),j.qZA()()()}if(2&v){const m=h.ngIf;j.xp6(2),j.Q6J("src",m.photoURL,j.LSH),j.xp6(2),j.Oqu(m.displayName)}}let V=(()=>{class v{constructor(m,T,x){this.auth=m,this.router=T,this.ngZone=x}ngOnInit(){}logout(){this.auth.signOut().then(()=>this.ngZone.run(()=>this.router.navigate([""])))}static#e=this.\u0275fac=function(T){return new(T||v)(j.Y36(Te.zQ),j.Y36(se.F0),j.Y36(j.R0b))};static#t=this.\u0275cmp=j.Xpm({type:v,selectors:[["app-header"]],decls:5,vars:4,consts:[[1,"header"],[1,"header-title",3,"routerLink"],["class","user-content",4,"ngIf"],[1,"user-content"],[1,"user"],["alt","user image",1,"user-image",3,"src"],[1,"user-name"],[1,"logout"],["main-button","","theme","error",1,"logout-btn",3,"click"]],template:function(T,x){1&T&&(j.TgZ(0,"div",0)(1,"h4",1),j._uU(2,"Planning Poker"),j.qZA(),j.YNc(3,Se,8,2,"div",2),j.ALo(4,"async"),j.qZA()),2&T&&(j.xp6(1),j.Q6J("routerLink",""),j.xp6(2),j.Q6J("ngIf",j.lcZ(4,2,x.auth.user)))},dependencies:[me.O5,se.rH,ye.j,me.Ov],styles:[".header[_ngcontent-%COMP%]{background:#ff1a40;width:100vw;height:120px;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;padding:0 2rem}.header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{color:#fff;flex-basis:100%;text-align:center;cursor:pointer}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;flex-basis:100%}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{flex-basis:100%;width:100%;display:flex;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{margin:0 .5rem;color:#fff}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]{width:3rem;height:3rem;border-radius:50%}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{flex-basis:100%;display:flex;justify-content:center}@media (min-width: 641px){.header[_ngcontent-%COMP%]{height:100px}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{flex-basis:content}}@media (min-width: 961px){.header[_ngcontent-%COMP%]{height:80px}.header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]{flex-basis:content}}"]})}return v})(),ke=(()=>{class v{static#e=this.\u0275fac=function(T){return new(T||v)};static#t=this.\u0275cmp=j.Xpm({type:v,selectors:[["app-layout"]],decls:3,vars:0,consts:[[1,"page"]],template:function(T,x){1&T&&(j._UZ(0,"app-header"),j.TgZ(1,"div",0),j._UZ(2,"router-outlet"),j.qZA())},dependencies:[se.lC,V],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .page[_ngcontent-%COMP%]{overflow:hidden;flex:1 1 auto;height:calc(100vh - 120px);position:relative}@media (min-width: 641px){[_nghost-%COMP%]   .page[_ngcontent-%COMP%]{height:calc(100vh - 100px)}}@media (min-width: 961px){[_nghost-%COMP%]   .page[_ngcontent-%COMP%]{height:calc(100vh - 80px)}}"]})}return v})();var ie=$(7142);let ae=(()=>{class v{constructor(m,T,x){this.auth=m,this.router=T,this.ngZone=x}login(){this.auth.signInWithPopup(this.googleAuthProvider()).then(()=>this.ngZone.run(()=>this.router.navigate(["rooms"])))}googleAuthProvider(){return new ie.Z.auth.GoogleAuthProvider}static#e=this.\u0275fac=function(T){return new(T||v)(j.Y36(Te.zQ),j.Y36(se.F0),j.Y36(j.R0b))};static#t=this.\u0275cmp=j.Xpm({type:v,selectors:[["app-login"]],decls:2,vars:0,consts:[["main-button","","theme","error",1,"login-btn","login-btn--google",3,"click"]],template:function(T,x){1&T&&(j.TgZ(0,"button",0),j.NdJ("click",function(){return x.login()}),j._uU(1,"Entrar pelo google"),j.qZA())},dependencies:[ye.j],styles:[".login-btn[_ngcontent-%COMP%]{position:fixed;height:60px;width:320px;font-size:1.5rem;line-height:1.75rem;top:50%;left:50%;transform:translate(-50%,-50%)}"]})}return v})();var ve=$(7398);const Ge=[{path:"",component:ke,canMatch:[(v,h)=>(0,j.f3M)(Te.zQ).user.pipe((0,ve.U)(m=>null!=m))],children:[{path:"",loadChildren:()=>Promise.resolve().then($.bind($,1409)).then(v=>v.PagesModule)}]},{path:"",component:ae},{path:"**",redirectTo:""}];let et=(()=>{class v{static#e=this.\u0275fac=function(T){return new(T||v)};static#t=this.\u0275mod=j.oAB({type:v});static#n=this.\u0275inj=j.cJS({imports:[se.Bz.forRoot(Ge,{preloadingStrategy:se.wm,useHash:!0,anchorScrolling:"enabled"}),se.Bz]})}return v})(),nt=(()=>{class v{static#e=this.\u0275fac=function(T){return new(T||v)};static#t=this.\u0275cmp=j.Xpm({type:v,selectors:[["app-root"]],decls:1,vars:0,template:function(T,x){1&T&&j._UZ(0,"router-outlet")},dependencies:[se.lC]})}return v})();var pt=$(6208);let ct=(()=>{class v{static#e=this.\u0275fac=function(T){return new(T||v)};static#t=this.\u0275mod=j.oAB({type:v});static#n=this.\u0275inj=j.cJS({imports:[me.ez,se.Bz,pt.m]})}return v})();var Nt=$(7217),pe=$(9027),re=$(8326),Fe=$(5592),Ee=$(2096),Ue=$(2459),Ze=$(6321),ot=$(9360),ue=$(8251),gt=$(4664),_r=$(3106),Qn=$(5861),An=$(534),nn=$(9058),Tt=$(4537);const It="firebasestorage.googleapis.com",ge="storageBucket";class De extends nn.ZR{constructor(h,m,T=0){super(_t(h),`Firebase Storage: ${m} (${_t(h)})`),this.status_=T,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,De.prototype)}get status(){return this.status_}set status(h){this.status_=h}_codeEquals(h){return _t(h)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(h){this.customData.serverResponse=h,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Le=function(v){return v.UNKNOWN="unknown",v.OBJECT_NOT_FOUND="object-not-found",v.BUCKET_NOT_FOUND="bucket-not-found",v.PROJECT_NOT_FOUND="project-not-found",v.QUOTA_EXCEEDED="quota-exceeded",v.UNAUTHENTICATED="unauthenticated",v.UNAUTHORIZED="unauthorized",v.UNAUTHORIZED_APP="unauthorized-app",v.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",v.INVALID_CHECKSUM="invalid-checksum",v.CANCELED="canceled",v.INVALID_EVENT_NAME="invalid-event-name",v.INVALID_URL="invalid-url",v.INVALID_DEFAULT_BUCKET="invalid-default-bucket",v.NO_DEFAULT_BUCKET="no-default-bucket",v.CANNOT_SLICE_BLOB="cannot-slice-blob",v.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",v.NO_DOWNLOAD_URL="no-download-url",v.INVALID_ARGUMENT="invalid-argument",v.INVALID_ARGUMENT_COUNT="invalid-argument-count",v.APP_DELETED="app-deleted",v.INVALID_ROOT_OPERATION="invalid-root-operation",v.INVALID_FORMAT="invalid-format",v.INTERNAL_ERROR="internal-error",v.UNSUPPORTED_ENVIRONMENT="unsupported-environment",v}(Le||{});function _t(v){return"storage/"+v}function at(){return new De(Le.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Dn(){return new De(Le.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bn(){return new De(Le.CANCELED,"User canceled the upload/download.")}function Qe(){return new De(Le.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function cn(v){return new De(Le.INVALID_ARGUMENT,v)}function Je(){return new De(Le.APP_DELETED,"The Firebase app was deleted.")}function en(v){return new De(Le.INVALID_ROOT_OPERATION,"The operation '"+v+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function on(v,h){return new De(Le.INVALID_FORMAT,"String does not match format '"+v+"': "+h)}function Nn(v){throw new De(Le.INTERNAL_ERROR,"Internal error: "+v)}class Yn{constructor(h,m){this.bucket=h,this.path_=m}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const h=encodeURIComponent;return"/b/"+h(this.bucket)+"/o/"+h(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(h,m){let T;try{T=Yn.makeFromUrl(h,m)}catch{return new Yn(h,"")}if(""===T.path)return T;throw function xr(v){return new De(Le.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+v+"'.")}(h)}static makeFromUrl(h,m){let T=null;const x="([A-Za-z0-9.\\-_]+)",ee=new RegExp("^gs://"+x+"(/(.*))?$","i");function Ae(jn){jn.path_=decodeURIComponent(jn.path)}const vt=m.replace(/[.]/g,"\\."),Gn=[{regex:ee,indices:{bucket:1,path:3},postModify:function U(jn){"/"===jn.path.charAt(jn.path.length-1)&&(jn.path_=jn.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${vt}/v[A-Za-z0-9_]+/b/${x}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Ae},{regex:new RegExp(`^https?://${m===It?"(?:storage.googleapis.com|storage.cloud.google.com)":m}/${x}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Ae}];for(let jn=0;jn<Gn.length;jn++){const Br=Gn[jn],ai=Br.regex.exec(h);if(ai){let es=ai[Br.indices.path];es||(es=""),T=new Yn(ai[Br.indices.bucket],es),Br.postModify(T);break}}if(null==T)throw function Hn(v){return new De(Le.INVALID_URL,"Invalid URL '"+v+"'.")}(h);return T}}class ci{constructor(h){this.promise_=Promise.reject(h)}getPromise(){return this.promise_}cancel(h=!1){}}function En(v){return"string"==typeof v||v instanceof String}function Gr(v){return Ti()&&v instanceof Blob}function Ti(){return typeof Blob<"u"&&!(0,nn.UG)()}function Gs(v,h,m,T){if(T<h)throw cn(`Invalid value for '${v}'. Expected ${h} or greater.`);if(T>m)throw cn(`Invalid value for '${v}'. Expected ${m} or less.`)}function Wr(v,h,m){let T=h;return null==m&&(T=`https://${h}`),`${m}://${T}/v0${v}`}function Vs(v){const h=encodeURIComponent;let m="?";for(const T in v)v.hasOwnProperty(T)&&(m=m+(h(T)+"=")+h(v[T])+"&");return m=m.slice(0,-1),m}var qr=function(v){return v[v.NO_ERROR=0]="NO_ERROR",v[v.NETWORK_ERROR=1]="NETWORK_ERROR",v[v.ABORT=2]="ABORT",v}(qr||{});function Xr(v,h){const m=v>=500&&v<600,x=-1!==[408,429].indexOf(v),U=-1!==h.indexOf(v);return m||x||U}class ei{constructor(h,m,T,x,U,J,ee,le,Ae,st,vt,Jt=!0){this.url_=h,this.method_=m,this.headers_=T,this.body_=x,this.successCodes_=U,this.additionalRetryCodes_=J,this.callback_=ee,this.errorCallback_=le,this.timeout_=Ae,this.progressCallback_=st,this.connectionFactory_=vt,this.retry=Jt,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Kt,Mt)=>{this.resolve_=Kt,this.reject_=Mt,this.start_()})}start_(){const m=(T,x)=>{const U=this.resolve_,J=this.reject_,ee=x.connection;if(x.wasSuccessCode)try{const le=this.callback_(ee,ee.getResponse());!function xo(v){return void 0!==v}(le)?U():U(le)}catch(le){J(le)}else if(null!==ee){const le=at();le.serverResponse=ee.getErrorText(),J(this.errorCallback_?this.errorCallback_(ee,le):le)}else J(x.canceled?this.appDelete_?Je():bn():Dn())};this.canceled_?m(0,new Cn(!1,null,!0)):this.backoffId_=function Sn(v,h,m){let T=1,x=null,U=null,J=!1,ee=0;function le(){return 2===ee}let Ae=!1;function st(...In){Ae||(Ae=!0,h.apply(null,In))}function vt(In){x=setTimeout(()=>{x=null,v(Kt,le())},In)}function Jt(){U&&clearTimeout(U)}function Kt(In,...Cr){if(Ae)return void Jt();if(In)return Jt(),void st.call(null,In,...Cr);if(le()||J)return Jt(),void st.call(null,In,...Cr);let Gn;T<64&&(T*=2),1===ee?(ee=2,Gn=0):Gn=1e3*(T+Math.random()),vt(Gn)}let Mt=!1;function an(In){Mt||(Mt=!0,Jt(),!Ae&&(null!==x?(In||(ee=2),clearTimeout(x),vt(0)):In||(ee=1)))}return vt(0),U=setTimeout(()=>{J=!0,an(!0)},m),an}((T,x)=>{if(x)return void T(!1,new Cn(!1,null,!0));const U=this.connectionFactory_();this.pendingConnection_=U;const J=ee=>{null!==this.progressCallback_&&this.progressCallback_(ee.loaded,ee.lengthComputable?ee.total:-1)};null!==this.progressCallback_&&U.addUploadProgressListener(J),U.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&U.removeUploadProgressListener(J),this.pendingConnection_=null;const ee=U.getErrorCode()===qr.NO_ERROR,le=U.getStatus();if(!ee||Xr(le,this.additionalRetryCodes_)&&this.retry){const st=U.getErrorCode()===qr.ABORT;return void T(!1,new Cn(!1,null,st))}const Ae=-1!==this.successCodes_.indexOf(le);T(!0,new Cn(Ae,U))})},m,this.timeout_)}getPromise(){return this.promise_}cancel(h){this.canceled_=!0,this.appDelete_=h||!1,null!==this.backoffId_&&function Rr(v){v(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Cn{constructor(h,m,T){this.wasSuccessCode=h,this.connection=m,this.canceled=!!T}}function Z(...v){const h=function Q(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==h){const m=new h;for(let T=0;T<v.length;T++)m.append(v[T]);return m.getBlob()}if(Ti())return new Blob(v);throw new De(Le.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const qe={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ft{constructor(h,m){this.data=h,this.contentType=m||null}}function Qt(v,h){switch(v){case qe.RAW:return new ft(rn(h));case qe.BASE64:case qe.BASE64URL:return new ft(Ut(v,h));case qe.DATA_URL:return new ft(function li(v){const h=new nr(v);return h.base64?Ut(qe.BASE64,h.rest):function wt(v){let h;try{h=decodeURIComponent(v)}catch{throw on(qe.DATA_URL,"Malformed data URL.")}return rn(h)}(h.rest)}(h),function lo(v){return new nr(v).contentType}(h))}throw at()}function rn(v){const h=[];for(let m=0;m<v.length;m++){let T=v.charCodeAt(m);T<=127?h.push(T):T<=2047?h.push(192|T>>6,128|63&T):55296==(64512&T)?m<v.length-1&&56320==(64512&v.charCodeAt(m+1))?(T=65536|(1023&T)<<10|1023&v.charCodeAt(++m),h.push(240|T>>18,128|T>>12&63,128|T>>6&63,128|63&T)):h.push(239,191,189):56320==(64512&T)?h.push(239,191,189):h.push(224|T>>12,128|T>>6&63,128|63&T)}return new Uint8Array(h)}function Ut(v,h){switch(v){case qe.BASE64:{const x=-1!==h.indexOf("-"),U=-1!==h.indexOf("_");if(x||U)throw on(v,"Invalid character '"+(x?"-":"_")+"' found: is it base64url encoded?");break}case qe.BASE64URL:{const x=-1!==h.indexOf("+"),U=-1!==h.indexOf("/");if(x||U)throw on(v,"Invalid character '"+(x?"+":"/")+"' found: is it base64 encoded?");h=h.replace(/-/g,"+").replace(/_/g,"/");break}}let m;try{m=function Ce(v){if(typeof atob>"u")throw function dt(v){return new De(Le.UNSUPPORTED_ENVIRONMENT,`${v} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(v)}(h)}catch(x){throw x.message.includes("polyfill")?x:on(v,"Invalid character found")}const T=new Uint8Array(m.length);for(let x=0;x<m.length;x++)T[x]=m.charCodeAt(x);return T}class nr{constructor(h){this.base64=!1,this.contentType=null;const m=h.match(/^data:([^,]+)?,/);if(null===m)throw on(qe.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const T=m[1]||null;null!=T&&(this.base64=function Za(v,h){return v.length>=h.length&&v.substring(v.length-h.length)===h}(T,";base64"),this.contentType=this.base64?T.substring(0,T.length-7):T),this.rest=h.substring(h.indexOf(",")+1)}}class ze{constructor(h,m){let T=0,x="";Gr(h)?(this.data_=h,T=h.size,x=h.type):h instanceof ArrayBuffer?(m?this.data_=new Uint8Array(h):(this.data_=new Uint8Array(h.byteLength),this.data_.set(new Uint8Array(h))),T=this.data_.length):h instanceof Uint8Array&&(m?this.data_=h:(this.data_=new Uint8Array(h.length),this.data_.set(h)),T=h.length),this.size_=T,this.type_=x}size(){return this.size_}type(){return this.type_}slice(h,m){if(Gr(this.data_)){const x=function Y(v,h,m){return v.webkitSlice?v.webkitSlice(h,m):v.mozSlice?v.mozSlice(h,m):v.slice?v.slice(h,m):null}(this.data_,h,m);return null===x?null:new ze(x)}{const T=new Uint8Array(this.data_.buffer,h,m-h);return new ze(T,!0)}}static getBlob(...h){if(Ti()){const m=h.map(T=>T instanceof ze?T.data_:T);return new ze(Z.apply(null,m))}{const m=h.map(J=>En(J)?Qt(qe.RAW,J).data:J.data_);let T=0;m.forEach(J=>{T+=J.byteLength});const x=new Uint8Array(T);let U=0;return m.forEach(J=>{for(let ee=0;ee<J.length;ee++)x[U++]=J[ee]}),new ze(x,!0)}}uploadData(){return this.data_}}function be(v){let h;try{h=JSON.parse(v)}catch{return null}return function Fs(v){return"object"==typeof v&&!Array.isArray(v)}(h)?h:null}function tn(v){const h=v.lastIndexOf("/",v.length-2);return-1===h?v:v.slice(h+1)}function Pt(v,h){return h}class sn{constructor(h,m,T,x){this.server=h,this.local=m||h,this.writable=!!T,this.xform=x||Pt}}let yr=null;function is(){if(yr)return yr;const v=[];v.push(new sn("bucket")),v.push(new sn("generation")),v.push(new sn("metageneration")),v.push(new sn("name","fullPath",!0));const m=new sn("name");m.xform=function h(U,J){return function vr(v){return!En(v)||v.length<2?v:tn(v)}(J)},v.push(m);const x=new sn("size");return x.xform=function T(U,J){return void 0!==J?Number(J):J},v.push(x),v.push(new sn("timeCreated")),v.push(new sn("updated")),v.push(new sn("md5Hash",null,!0)),v.push(new sn("cacheControl",null,!0)),v.push(new sn("contentDisposition",null,!0)),v.push(new sn("contentEncoding",null,!0)),v.push(new sn("contentLanguage",null,!0)),v.push(new sn("contentType",null,!0)),v.push(new sn("metadata","customMetadata",!0)),yr=v,yr}function Ko(v,h,m){const T=be(h);return null===T?null:function Li(v,h,m){const T={type:"file"},x=m.length;for(let U=0;U<x;U++){const J=m[U];T[J.local]=J.xform(T,h[J.server])}return function di(v,h){Object.defineProperty(v,"ref",{get:function m(){const U=new Yn(v.bucket,v.fullPath);return h._makeStorageReference(U)}})}(T,v),T}(v,T,m)}function Zo(v,h){const m={},T=h.length;for(let x=0;x<T;x++){const U=h[x];U.writable&&(m[U.server]=v[U.local])}return JSON.stringify(m)}const ws="prefixes",ho="items";class zi{constructor(h,m,T,x){this.url=h,this.method=m,this.handler=T,this.timeout=x,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ss(v){if(!v)throw at()}function Ws(v,h){return function m(T,x){const U=Ko(v,x,h);return ss(null!==U),U}}function ti(v){return function h(m,T){let x;return x=401===m.getStatus()?m.getErrorText().includes("Firebase App Check token is invalid")?function Xt(){return new De(Le.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function un(){return new De(Le.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===m.getStatus()?function St(v){return new De(Le.QUOTA_EXCEEDED,"Quota for bucket '"+v+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(v.bucket):403===m.getStatus()?function Wn(v){return new De(Le.UNAUTHORIZED,"User does not have permission to access '"+v+"'.")}(v.path):T,x.status=m.getStatus(),x.serverResponse=T.serverResponse,x}}function os(v){const h=ti(v);return function m(T,x){let U=h(T,x);return 404===T.getStatus()&&(U=function Vn(v){return new De(Le.OBJECT_NOT_FOUND,"Object '"+v+"' does not exist.")}(v.path)),U.serverResponse=x.serverResponse,U}}function qs(v,h,m){const x=Wr(h.fullServerUrl(),v.host,v._protocol),J=v.maxOperationRetryTime,ee=new zi(x,"GET",Ws(v,m),J);return ee.errorHandler=os(h),ee}function va(v,h,m,T,x){const U={};U.prefix=h.isRoot?"":h.path+"/",m&&m.length>0&&(U.delimiter=m),T&&(U.pageToken=T),x&&(U.maxResults=x);const ee=Wr(h.bucketOnlyServerUrl(),v.host,v._protocol),Ae=v.maxOperationRetryTime,st=new zi(ee,"GET",function No(v,h){return function m(T,x){const U=function Qo(v,h,m){const T=be(m);return null===T?null:function zn(v,h,m){const T={prefixes:[],items:[],nextPageToken:m.nextPageToken};if(m[ws])for(const x of m[ws]){const U=x.replace(/\/$/,""),J=v._makeStorageReference(new Yn(h,U));T.prefixes.push(J)}if(m[ho])for(const x of m[ho]){const U=v._makeStorageReference(new Yn(h,x.name));T.items.push(U)}return T}(v,h,T)}(v,h,x);return ss(null!==U),U}}(v,h.bucket),Ae);return st.urlParams=U,st.errorHandler=ti(h),st}function Er(v,h,m){const T=Object.assign({},m);return T.fullPath=v.path,T.size=h.size(),T.contentType||(T.contentType=function Ea(v,h){return v&&v.contentType||h&&h.type()||"application/octet-stream"}(null,h)),T}class Gi{constructor(h,m,T,x){this.current=h,this.total=m,this.finalized=!!T,this.metadata=x||null}}function Zs(v,h){let m=null;try{m=v.getResponseHeader("X-Goog-Upload-Status")}catch{ss(!1)}return ss(!!m&&-1!==(h||["active"]).indexOf(m)),m}const Xo={STATE_CHANGED:"state_changed"},ri={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Qs(v){switch(v){case"running":case"pausing":case"canceling":return ri.RUNNING;case"paused":return ri.PAUSED;case"success":return ri.SUCCESS;case"canceled":return ri.CANCELED;default:return ri.ERROR}}class Rn{constructor(h,m,T){if(function kt(v){return"function"==typeof v}(h)||null!=m||null!=T)this.next=h,this.error=m??void 0,this.complete=T??void 0;else{const U=h;this.next=U.next,this.error=U.error,this.complete=U.complete}}}function Ir(v){return(...h)=>{Promise.resolve().then(()=>v(...h))}}let Di=null;class Bs{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qr.NO_ERROR,this.sendPromise_=new Promise(h=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qr.ABORT,h()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qr.NETWORK_ERROR,h()}),this.xhr_.addEventListener("load",()=>{h()})})}send(h,m,T,x){if(this.sent_)throw Nn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(m,h,!0),void 0!==x)for(const U in x)x.hasOwnProperty(U)&&this.xhr_.setRequestHeader(U,x[U].toString());return void 0!==T?this.xhr_.send(T):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Nn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Nn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Nn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Nn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(h){return this.xhr_.getResponseHeader(h)}addUploadProgressListener(h){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",h)}removeUploadProgressListener(h){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",h)}}class Ci extends Bs{initXhr(){this.xhr_.responseType="text"}}function Ai(){return Di?Di():new Ci}class ur{constructor(h,m,T=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=h,this._blob=m,this._metadata=T,this._mappings=is(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=x=>{if(this._request=void 0,this._chunkMultiplier=1,x._codeEquals(Le.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const U=this.isExponentialBackoffExpired();if(Xr(x.status,[])){if(!U)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();x=Dn()}this._error=x,this._transition("error")}},this._metadataErrorHandler=x=>{this._request=void 0,x._codeEquals(Le.CANCELED)?this.completeTransitions_():(this._error=x,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((x,U)=>{this._resolve=x,this._reject=U,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const h=this._transferred;return m=>this._updateProgress(h+m)}_shouldDoResumable(h){return h.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(h){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([m,T])=>{switch(this._state){case"running":h(m,T);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((h,m)=>{const T=function fo(v,h,m,T,x){const U=h.bucketOnlyServerUrl(),J=Er(h,T,x),ee={name:J.fullPath},le=Wr(U,v.host,v._protocol),st={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${T.size()}`,"X-Goog-Upload-Header-Content-Type":J.contentType,"Content-Type":"application/json; charset=utf-8"},vt=Zo(J,m),Mt=new zi(le,"POST",function Kt(an){let In;Zs(an);try{In=an.getResponseHeader("X-Goog-Upload-URL")}catch{ss(!1)}return ss(En(In)),In},v.maxUploadRetryTime);return Mt.urlParams=ee,Mt.headers=st,Mt.body=vt,Mt.errorHandler=ti(h),Mt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),x=this._ref.storage._makeRequest(T,Ai,h,m);this._request=x,x.getPromise().then(U=>{this._request=void 0,this._uploadUrl=U,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const h=this._uploadUrl;this._resolveToken((m,T)=>{const x=function Jo(v,h,m,T){const le=new zi(m,"POST",function U(Ae){const st=Zs(Ae,["active","final"]);let vt=null;try{vt=Ae.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ss(!1)}vt||ss(!1);const Jt=Number(vt);return ss(!isNaN(Jt)),new Gi(Jt,T.size(),"final"===st)},v.maxUploadRetryTime);return le.headers={"X-Goog-Upload-Command":"query"},le.errorHandler=ti(h),le}(this._ref.storage,this._ref._location,h,this._blob),U=this._ref.storage._makeRequest(x,Ai,m,T);this._request=U,U.getPromise().then(J=>{this._request=void 0,this._updateProgress(J.current),this._needToFetchStatus=!1,J.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const h=262144*this._chunkMultiplier,m=new Gi(this._transferred,this._blob.size()),T=this._uploadUrl;this._resolveToken((x,U)=>{let J;try{J=function Qa(v,h,m,T,x,U,J,ee){const le=new Gi(0,0);if(J?(le.current=J.current,le.total=J.total):(le.current=0,le.total=T.size()),T.size()!==le.total)throw function fe(){return new De(Le.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const Ae=le.total-le.current;let st=Ae;x>0&&(st=Math.min(st,x));const vt=le.current;let Kt="";Kt=0===st?"finalize":Ae===st?"upload, finalize":"upload";const Mt={"X-Goog-Upload-Command":Kt,"X-Goog-Upload-Offset":`${le.current}`},an=T.slice(vt,vt+st);if(null===an)throw Qe();const Gn=new zi(m,"POST",function In(jn,Br){const ai=Zs(jn,["active","final"]),Fr=le.current+st,es=T.size();let xs;return xs="final"===ai?Ws(h,U)(jn,Br):null,new Gi(Fr,es,"final"===ai,xs)},h.maxUploadRetryTime);return Gn.headers=Mt,Gn.body=an.uploadData(),Gn.progressCallback=ee||null,Gn.errorHandler=ti(v),Gn}(this._ref._location,this._ref.storage,T,this._blob,h,this._mappings,m,this._makeProgressCallback())}catch(le){return this._error=le,void this._transition("error")}const ee=this._ref.storage._makeRequest(J,Ai,x,U,!1);this._request=ee,ee.getPromise().then(le=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(le.current),le.finalized?(this._metadata=le.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((h,m)=>{const T=qs(this._ref.storage,this._ref._location,this._mappings),x=this._ref.storage._makeRequest(T,Ai,h,m);this._request=x,x.getPromise().then(U=>{this._request=void 0,this._metadata=U,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((h,m)=>{const T=function Ks(v,h,m,T,x){const U=h.bucketOnlyServerUrl(),J={"X-Goog-Upload-Protocol":"multipart"},le=function ee(){let Gn="";for(let jn=0;jn<2;jn++)Gn+=Math.random().toString().slice(2);return Gn}();J["Content-Type"]="multipart/related; boundary="+le;const Ae=Er(h,T,x),st=Zo(Ae,m),Kt=ze.getBlob("--"+le+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+st+"\r\n--"+le+"\r\nContent-Type: "+Ae.contentType+"\r\n\r\n",T,"\r\n--"+le+"--");if(null===Kt)throw Qe();const Mt={name:Ae.fullPath},an=Wr(U,v.host,v._protocol),Cr=v.maxUploadRetryTime,Ar=new zi(an,"POST",Ws(v,m),Cr);return Ar.urlParams=Mt,Ar.headers=J,Ar.body=Kt.uploadData(),Ar.errorHandler=ti(h),Ar}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),x=this._ref.storage._makeRequest(T,Ai,h,m);this._request=x,x.getPromise().then(U=>{this._request=void 0,this._metadata=U,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(h){const m=this._transferred;this._transferred=h,this._transferred!==m&&this._notifyObservers()}_transition(h){if(this._state!==h)switch(h){case"canceling":case"pausing":this._state=h,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const m="paused"===this._state;this._state=h,m&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=h,this._notifyObservers();break;case"canceled":this._error=bn(),this._state=h,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const h=Qs(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:h,metadata:this._metadata,task:this,ref:this._ref}}on(h,m,T,x){const U=new Rn(m||void 0,T||void 0,x||void 0);return this._addObserver(U),()=>{this._removeObserver(U)}}then(h,m){return this._promise.then(h,m)}catch(h){return this.then(null,h)}_addObserver(h){this._observers.push(h),this._notifyObserver(h)}_removeObserver(h){const m=this._observers.indexOf(h);-1!==m&&this._observers.splice(m,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(m=>{this._notifyObserver(m)})}_finishPromise(){if(void 0!==this._resolve){let h=!0;switch(Qs(this._state)){case ri.SUCCESS:Ir(this._resolve.bind(null,this.snapshot))();break;case ri.CANCELED:case ri.ERROR:Ir(this._reject.bind(null,this._error))();break;default:h=!1}h&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(h){switch(Qs(this._state)){case ri.RUNNING:case ri.PAUSED:h.next&&Ir(h.next.bind(h,this.snapshot))();break;case ri.SUCCESS:h.complete&&Ir(h.complete.bind(h))();break;default:h.error&&Ir(h.error.bind(h,this._error))()}}resume(){const h="paused"===this._state||"pausing"===this._state;return h&&this._transition("running"),h}pause(){const h="running"===this._state;return h&&this._transition("pausing"),h}cancel(){const h="running"===this._state||"pausing"===this._state;return h&&this._transition("canceling"),h}}class Et{constructor(h,m){this._service=h,this._location=m instanceof Yn?m:Yn.makeFromUrl(m,h.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(h,m){return new Et(h,m)}get root(){const h=new Yn(this._location.bucket,"");return this._newRef(this._service,h)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tn(this._location.path)}get storage(){return this._service}get parent(){const h=function lt(v){if(0===v.length)return null;const h=v.lastIndexOf("/");return-1===h?"":v.slice(0,h)}(this._location.path);if(null===h)return null;const m=new Yn(this._location.bucket,h);return new Et(this._service,m)}_throwIfRoot(h){if(""===this._location.path)throw en(h)}}function Tr(v,h,m){return as.apply(this,arguments)}function as(){return(as=(0,Qn.Z)(function*(v,h,m){const x=yield hi(v,{pageToken:m});h.prefixes.push(...x.prefixes),h.items.push(...x.items),null!=x.nextPageToken&&(yield Tr(v,h,x.nextPageToken))})).apply(this,arguments)}function hi(v,h){null!=h&&"number"==typeof h.maxResults&&Gs("options.maxResults",1,1e3,h.maxResults);const m=h||{},T=va(v.storage,v._location,"/",m.pageToken,m.maxResults);return v.storage.makeRequestWithTokens(T,Ai)}function po(v){v._throwIfRoot("getDownloadURL");const h=function Yo(v,h,m){const x=Wr(h.fullServerUrl(),v.host,v._protocol),J=v.maxOperationRetryTime,ee=new zi(x,"GET",function Cu(v,h){return function m(T,x){const U=Ko(v,x,h);return ss(null!==U),function Oo(v,h,m,T){const x=be(h);if(null===x||!En(x.downloadTokens))return null;const U=x.downloadTokens;if(0===U.length)return null;const J=encodeURIComponent;return U.split(",").map(Ae=>{const vt=v.fullPath;return Wr("/b/"+J(v.bucket)+"/o/"+J(vt),m,T)+Vs({alt:"media",token:Ae})})[0]}(U,x,v.host,v._protocol)}}(v,m),J);return ee.errorHandler=os(h),ee}(v.storage,v._location,is());return v.storage.makeRequestWithTokens(h,Ai).then(m=>{if(null===m)throw function We(){return new De(Le.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return m})}function Pr(v,h){const m=function $t(v,h){const m=h.split("/").filter(T=>T.length>0).join("/");return 0===v.length?m:v+"/"+m}(v._location.path,h),T=new Yn(v._location.bucket,m);return new Et(v.storage,T)}function Kr(v,h){if(v instanceof As){const m=v;if(null==m._bucket)throw function Oe(){return new De(Le.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ge+"' property when initializing the app?")}();const T=new Et(m,m._bucket);return null!=h?Kr(T,h):T}return void 0!==h?Pr(v,h):v}function Cs(v,h){if(h&&function Kn(v){return/^[A-Za-z]+:\/\//.test(v)}(h)){if(v instanceof As)return function Ds(v,h){return new Et(v,h)}(v,h);throw cn("To use ref(service, url), the first argument must be a Storage instance.")}return Kr(v,h)}function Ja(v,h){const m=h?.[ge];return null==m?null:Yn.makeFromBucketSpec(m,v)}class As{constructor(h,m,T,x,U){this.app=h,this._authProvider=m,this._appCheckProvider=T,this._url=x,this._firebaseVersion=U,this._bucket=null,this._host=It,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=x?Yn.makeFromBucketSpec(x,this._host):Ja(this._host,this.app.options)}get host(){return this._host}set host(h){this._host=h,this._bucket=null!=this._url?Yn.makeFromBucketSpec(this._url,h):Ja(h,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(h){Gs("time",0,Number.POSITIVE_INFINITY,h),this._maxUploadRetryTime=h}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(h){Gs("time",0,Number.POSITIVE_INFINITY,h),this._maxOperationRetryTime=h}_getAuthToken(){var h=this;return(0,Qn.Z)(function*(){if(h._overrideAuthToken)return h._overrideAuthToken;const m=h._authProvider.getImmediate({optional:!0});if(m){const T=yield m.getToken();if(null!==T)return T.accessToken}return null})()}_getAppCheckToken(){var h=this;return(0,Qn.Z)(function*(){const m=h._appCheckProvider.getImmediate({optional:!0});return m?(yield m.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(h=>h.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(h){return new Et(this,h)}_makeRequest(h,m,T,x,U=!0){if(this._deleted)return new ci(Je());{const J=function K(v,h,m,T,x,U,J=!0){const ee=Vs(v.urlParams),le=v.url+ee,Ae=Object.assign({},v.headers);return function wi(v,h){h&&(v["X-Firebase-GMPID"]=h)}(Ae,h),function ki(v,h){null!==h&&h.length>0&&(v.Authorization="Firebase "+h)}(Ae,m),function Ts(v,h){v["X-Firebase-Storage-Version"]="webjs/"+(h??"AppManager")}(Ae,U),function de(v,h){null!==h&&(v["X-Firebase-AppCheck"]=h)}(Ae,T),new ei(le,v.method,Ae,v.body,v.successCodes,v.additionalRetryCodes,v.handler,v.errorHandler,v.timeout,v.progressCallback,x,J)}(h,this._appId,T,x,m,this._firebaseVersion,U);return this._requests.add(J),J.getPromise().then(()=>this._requests.delete(J),()=>this._requests.delete(J)),J}}makeRequestWithTokens(h,m){var T=this;return(0,Qn.Z)(function*(){const[x,U]=yield Promise.all([T._getAuthToken(),T._getAppCheckToken()]);return T._makeRequest(h,m,x,U).getPromise()})()}}const js="@firebase/storage";function bi(v,h){return Cs(v=(0,nn.m9)(v),h)}function Ta(v,{instanceIdentifier:h}){const m=v.getProvider("app").getImmediate(),T=v.getProvider("auth-internal"),x=v.getProvider("app-check-internal");return new As(m,T,x,h,An.SDK_VERSION)}!function Vr(){(0,An._registerComponent)(new Tt.wA("storage",Ta,"PUBLIC").setMultipleInstances(!0)),(0,An.registerVersion)(js,"0.11.2",""),(0,An.registerVersion)(js,"0.11.2","esm2017")}();class bu{constructor(h,m,T){this._delegate=h,this.task=m,this.ref=T}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class ea{constructor(h,m){this._delegate=h,this._ref=m,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new bu(this._delegate.snapshot,this,this._ref)}then(h,m){return this._delegate.then(T=>{if(h)return h(new bu(T,this,this._ref))},m)}on(h,m,T,x){let U;return m&&(U="function"==typeof m?J=>m(new bu(J,this,this._ref)):{next:m.next?J=>m.next(new bu(J,this,this._ref)):void 0,complete:m.complete||void 0,error:m.error||void 0}),this._delegate.on(h,U,T||void 0,x||void 0)}}class ta{constructor(h,m){this._delegate=h,this._service=m}get prefixes(){return this._delegate.prefixes.map(h=>new Ui(h,this._service))}get items(){return this._delegate.items.map(h=>new Ui(h,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ui{constructor(h,m){this._delegate=h,this.storage=m}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(h){const m=function go(v,h){return Pr(v,h)}(this._delegate,h);return new Ui(m,this.storage)}get root(){return new Ui(this._delegate.root,this.storage)}get parent(){const h=this._delegate.parent;return null==h?null:new Ui(h,this.storage)}put(h,m){return this._throwIfRoot("put"),new ea(function Ki(v,h,m){return function Si(v,h,m){return v._throwIfRoot("uploadBytesResumable"),new ur(v,new ze(h),m)}(v=(0,nn.m9)(v),h,m)}(this._delegate,h,m),this)}putString(h,m=qe.RAW,T){this._throwIfRoot("putString");const x=Qt(m,h),U=Object.assign({},T);return null==U.contentType&&null!=x.contentType&&(U.contentType=x.contentType),new ea(new ur(this._delegate,new ze(x.data,!0),U),this)}listAll(){return function pi(v){return function Js(v){const h={prefixes:[],items:[]};return Tr(v,h).then(()=>h)}(v=(0,nn.m9)(v))}(this._delegate).then(h=>new ta(h,this.storage))}list(h){return function Ss(v,h){return hi(v=(0,nn.m9)(v),h)}(this._delegate,h||void 0).then(m=>new ta(m,this.storage))}getMetadata(){return function ps(v){return function Zt(v){v._throwIfRoot("getMetadata");const h=qs(v.storage,v._location,is());return v.storage.makeRequestWithTokens(h,Ai)}(v=(0,nn.m9)(v))}(this._delegate)}updateMetadata(h){return function fi(v,h){return function qi(v,h){v._throwIfRoot("updateMetadata");const m=function Xu(v,h,m,T){const U=Wr(h.fullServerUrl(),v.host,v._protocol),ee=Zo(m,T),Ae=v.maxOperationRetryTime,st=new zi(U,"PATCH",Ws(v,T),Ae);return st.headers={"Content-Type":"application/json; charset=utf-8"},st.body=ee,st.errorHandler=os(h),st}(v.storage,v._location,h,is());return v.storage.makeRequestWithTokens(m,Ai)}(v=(0,nn.m9)(v),h)}(this._delegate,h)}getDownloadURL(){return function Qc(v){return po(v=(0,nn.m9)(v))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Zi(v){return function ii(v){v._throwIfRoot("deleteObject");const h=function ni(v,h){const T=Wr(h.fullServerUrl(),v.host,v._protocol),ee=new zi(T,"DELETE",function J(le,Ae){},v.maxOperationRetryTime);return ee.successCodes=[200,204],ee.errorHandler=os(h),ee}(v.storage,v._location);return v.storage.makeRequestWithTokens(h,Ai)}(v=(0,nn.m9)(v))}(this._delegate)}_throwIfRoot(h){if(""===this._delegate._location.path)throw en(h)}}class eu{constructor(h,m){this.app=h,this._delegate=m}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(h){if(tu(h))throw cn("ref() expected a child path but got a URL, use refFromURL instead.");return new Ui(bi(this._delegate,h),this)}refFromURL(h){if(!tu(h))throw cn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Yn.makeFromUrl(h,this._delegate.host)}catch{throw cn("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ui(bi(this._delegate,h),this)}setMaxUploadRetryTime(h){this._delegate.maxUploadRetryTime=h}setMaxOperationRetryTime(h){this._delegate.maxOperationRetryTime=h}useEmulator(h,m,T={}){!function mo(v,h,m,T={}){!function fs(v,h,m,T={}){v.host=`${h}:${m}`,v._protocol="http";const{mockUserToken:x}=T;x&&(v._overrideAuthToken="string"==typeof x?x:(0,nn.Sg)(x,v.app.options.projectId))}(v,h,m,T)}(this._delegate,h,m,T)}}function tu(v){return/^[A-Za-z]+:\/\//.test(v)}function na(v,{instanceIdentifier:h}){const m=v.getProvider("app-compat").getImmediate(),T=v.getProvider("storage").getImmediate({identifier:h});return new eu(m,T)}function bc(v){const h=function ec(v){return new Fe.y(h=>{const m=J=>h.next(J);m(v.snapshot);const U=v.on("state_changed",m);return v.then(J=>{m(J),h.complete()},J=>{m(v.snapshot),(J=>{h.error(J)})(J)}),function(){U()}}).pipe(function Gt(v,h=Ze.z){return(0,ot.e)((m,T)=>{let x=null,U=null,J=null;const ee=()=>{if(x){x.unsubscribe(),x=null;const Ae=U;U=null,T.next(Ae)}};function le(){const Ae=J+v,st=h.now();if(st<Ae)return x=this.schedule(void 0,Ae-st),void T.add(x);ee()}m.subscribe((0,ue.x)(T,Ae=>{U=Ae,J=h.now(),x||(x=h.schedule(le,v),T.add(x))},()=>{ee(),T.complete()},void 0,()=>{U=x=null}))})}(0))}(v);return{task:v,then:v.then.bind(v),catch:v.catch.bind(v),pause:v.pause.bind(v),cancel:v.cancel.bind(v),resume:v.resume.bind(v),snapshotChanges:()=>h,percentageChanges:()=>h.pipe((0,ve.U)(m=>m.bytesTransferred/m.totalBytes*100))}}function _o(v){return{getDownloadURL:()=>(0,Ee.of)(void 0).pipe(re.fc,(0,gt.w)(()=>v.getDownloadURL()),re.iC),getMetadata:()=>(0,Ee.of)(void 0).pipe(re.fc,(0,gt.w)(()=>v.getMetadata()),re.iC),delete:()=>(0,Ue.D)(v.delete()),child:h=>_o(v.child(h)),updateMetadata:h=>(0,Ue.D)(v.updateMetadata(h)),put:(h,m)=>bc(v.put(h,m)),putString:(h,m,T)=>bc(v.putString(h,m,T)),list:h=>(0,Ue.D)(v.list(h)),listAll:()=>(0,Ue.D)(v.listAll())}}!function cr(v){const h={TaskState:ri,TaskEvent:Xo,StringFormat:qe,Storage:eu,Reference:Ui};v.INTERNAL.registerComponent(new Tt.wA("storage-compat",na,"PUBLIC").setServiceProps(h).setMultipleInstances(!0)),v.registerVersion("@firebase/storage-compat","0.3.2")}(_r.Z);const Ca=new j.OlP("angularfire2.storageBucket"),nu=new j.OlP("angularfire2.storage.maxUploadRetryTime"),Aa=new j.OlP("angularfire2.storage.maxOperationRetryTime"),tc=new j.OlP("angularfire2.storage.use-emulator");let Sa=(()=>{class v{storage;constructor(m,T,x,U,J,ee,le,Ae,st,vt){const Jt=(0,Nt.on)(m,J,T);this.storage=(0,Nt.cc)(`${Jt.name}.storage.${x}`,"AngularFireStorage",Jt.name,()=>{const Kt=J.runOutsideAngular(()=>Jt.storage(x||void 0)),Mt=st;return Mt&&Kt.useEmulator(...Mt),le&&Kt.setMaxUploadRetryTime(le),Ae&&Kt.setMaxOperationRetryTime(Ae),Kt},[le,Ae])}ref(m){return _o(this.storage.ref(m))}refFromURL(m){return _o(this.storage.refFromURL(m))}upload(m,T,x){return _o(this.storage.ref(m)).put(T,x)}static \u0275fac=function(T){return new(T||v)(j.LFG(Nt.Dh),j.LFG(Nt.xv,8),j.LFG(Ca,8),j.LFG(j.Lbi),j.LFG(j.R0b),j.LFG(re.HU),j.LFG(nu,8),j.LFG(Aa,8),j.LFG(tc,8),j.LFG(re.Rf,8))};static \u0275prov=j.Yz7({token:v,factory:v.\u0275fac,providedIn:"any"})}return v})(),gi=(()=>{class v{static \u0275fac=function(T){return new(T||v)};static \u0275mod=j.oAB({type:v});static \u0275inj=j.cJS({})}return v})(),ms=(()=>{class v{constructor(){ie.Z.registerVersion("angularfire",re.q4.full,"gcs-compat")}static \u0275fac=function(T){return new(T||v)};static \u0275mod=j.oAB({type:v});static \u0275inj=j.cJS({providers:[Sa],imports:[gi]})}return v})();var ru=$(1409),sr=$(6825);function mi(v){return new j.vHH(3e3,!1)}function Lt(v){switch(v.length){case 0:return new sr.ZN;case 1:return v[0];default:return new sr.ZE(v)}}function rr(v,h,m=new Map,T=new Map){const x=[],U=[];let J=-1,ee=null;if(h.forEach(le=>{const Ae=le.get("offset"),st=Ae==J,vt=st&&ee||new Map;le.forEach((Jt,Kt)=>{let Mt=Kt,an=Jt;if("offset"!==Kt)switch(Mt=v.normalizePropertyName(Mt,x),an){case sr.k1:an=m.get(Kt);break;case sr.l3:an=T.get(Kt);break;default:an=v.normalizeStyleValue(Kt,Mt,an,x)}vt.set(Mt,an)}),st||U.push(vt),ee=vt,J=Ae}),x.length)throw function xa(v){return new j.vHH(3502,!1)}();return U}function xn(v,h,m,T){switch(h){case"start":v.onStart(()=>T(m&&yn(m,"start",v)));break;case"done":v.onDone(()=>T(m&&yn(m,"done",v)));break;case"destroy":v.onDestroy(()=>T(m&&yn(m,"destroy",v)))}}function yn(v,h,m){const U=Yt(v.element,v.triggerName,v.fromState,v.toState,h||v.phaseName,m.totalTime??v.totalTime,!!m.disabled),J=v._data;return null!=J&&(U._data=J),U}function Yt(v,h,m,T,x="",U=0,J){return{element:v,triggerName:h,fromState:m,toState:T,phaseName:x,totalTime:U,disabled:!!J}}function Tn(v,h,m){let T=v.get(h);return T||v.set(h,T=m),T}function Zn(v){const h=v.indexOf(":");return[v.substring(1,h),v.slice(h+1)]}const Or=(()=>typeof document>"u"?null:document.documentElement)();function Ri(v){const h=v.parentNode||v.host||null;return h===Or?null:h}let Zr=null,Qi=!1;function su(v,h){for(;h;){if(h===v)return!0;h=Ri(h)}return!1}function or(v,h,m){if(m)return Array.from(v.querySelectorAll(h));const T=v.querySelector(h);return T?[T]:[]}let Oa=(()=>{class v{validateStyleProperty(m){return function aa(v){Zr||(Zr=function eo(){return typeof document<"u"?document.body:null}()||{},Qi=!!Zr.style&&"WebkitAppearance"in Zr.style);let h=!0;return Zr.style&&!function Pi(v){return"ebkit"==v.substring(1,6)}(v)&&(h=v in Zr.style,!h&&Qi&&(h="Webkit"+v.charAt(0).toUpperCase()+v.slice(1)in Zr.style)),h}(m)}matchesElement(m,T){return!1}containsElement(m,T){return su(m,T)}getParentElement(m){return Ri(m)}query(m,T,x){return or(m,T,x)}computeStyle(m,T,x){return x||""}animate(m,T,x,U,J,ee=[],le){return new sr.ZN(x,U)}static#e=this.\u0275fac=function(T){return new(T||v)};static#t=this.\u0275prov=j.Yz7({token:v,factory:v.\u0275fac})}return v})(),cs=(()=>{class v{static#e=this.NOOP=new Oa}return v})();const md=1e3,ir="ng-enter",ls="ng-leave",Mi="ng-trigger",to=".ng-trigger",Vo="ng-animating",ut=".ng-animating";function lr(v){if("number"==typeof v)return v;const h=v.match(/^(-?[\.\d]+)(m?s)/);return!h||h.length<2?0:fr(parseFloat(h[1]),h[2])}function fr(v,h){return"s"===h?v*md:v}function Na(v,h,m){return v.hasOwnProperty("duration")?v:function Vt(v,h,m){let x,U=0,J="";if("string"==typeof v){const ee=v.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===ee)return h.push(mi()),{duration:0,delay:0,easing:""};x=fr(parseFloat(ee[1]),ee[2]);const le=ee[3];null!=le&&(U=fr(parseFloat(le),ee[4]));const Ae=ee[5];Ae&&(J=Ae)}else x=v;if(!m){let ee=!1,le=h.length;x<0&&(h.push(function si(){return new j.vHH(3100,!1)}()),ee=!0),U<0&&(h.push(function ba(){return new j.vHH(3101,!1)}()),ee=!0),ee&&h.splice(le,0,mi())}return{duration:x,delay:U,easing:J}}(v,h,m)}function Bt(v,h={}){return Object.keys(v).forEach(m=>{h[m]=v[m]}),h}function ln(v){const h=new Map;return Object.keys(v).forEach(m=>{h.set(m,v[m])}),h}function Xe(v,h=new Map,m){if(m)for(let[T,x]of m)h.set(T,x);for(let[T,x]of v)h.set(T,x);return h}function Dr(v,h,m){h.forEach((T,x)=>{const U=it(x);m&&!m.has(x)&&m.set(x,v.style[U]),v.style[U]=T})}function ua(v,h){h.forEach((m,T)=>{const x=it(T);v.style[x]=""})}function ca(v){return Array.isArray(v)?1==v.length?v[0]:(0,sr.vP)(v):v}const Mu=new RegExp("{{\\s*(.+?)\\s*}}","g");function Jc(v){let h=[];if("string"==typeof v){let m;for(;m=Mu.exec(v);)h.push(m[1]);Mu.lastIndex=0}return h}function oi(v,h,m){const T=v.toString(),x=T.replace(Mu,(U,J)=>{let ee=h[J];return null==ee&&(m.push(function ia(v){return new j.vHH(3003,!1)}()),ee=""),ee.toString()});return x==T?v:x}function xu(v){const h=[];let m=v.next();for(;!m.done;)h.push(m.value),m=v.next();return h}const _d=/-+([a-z0-9])/g;function it(v){return v.replace(_d,(...h)=>h[1].toUpperCase())}function kn(v,h,m){switch(h.type){case 7:return v.visitTrigger(h,m);case 0:return v.visitState(h,m);case 1:return v.visitTransition(h,m);case 2:return v.visitSequence(h,m);case 3:return v.visitGroup(h,m);case 4:return v.visitAnimate(h,m);case 5:return v.visitKeyframes(h,m);case 6:return v.visitStyle(h,m);case 8:return v.visitReference(h,m);case 9:return v.visitAnimateChild(h,m);case 10:return v.visitAnimateRef(h,m);case 11:return v.visitQuery(h,m);case 12:return v.visitStagger(h,m);default:throw function yo(v){return new j.vHH(3004,!1)}()}}function cc(v,h){return window.getComputedStyle(v)[h]}const Dt="*";function Lr(v,h){const m=[];return"string"==typeof v?v.split(/\s*,\s*/).forEach(T=>function bs(v,h,m){if(":"==v[0]){const le=function Uo(v,h){switch(v){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(m,T)=>parseFloat(T)>parseFloat(m);case":decrement":return(m,T)=>parseFloat(T)<parseFloat(m);default:return h.push(function Rc(v){return new j.vHH(3016,!1)}()),"* => *"}}(v,m);if("function"==typeof le)return void h.push(le);v=le}const T=v.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==T||T.length<4)return m.push(function oc(v){return new j.vHH(3015,!1)}()),h;const x=T[1],U=T[2],J=T[3];h.push(lc(x,J));"<"==U[0]&&!(x==Dt&&J==Dt)&&h.push(lc(J,x))}(T,m,h)):m.push(v),m}const no=new Set(["true","1"]),yi=new Set(["false","0"]);function lc(v,h){const m=no.has(v)||yi.has(v),T=no.has(h)||yi.has(h);return(x,U)=>{let J=v==Dt||v==x,ee=h==Dt||h==U;return!J&&m&&"boolean"==typeof x&&(J=x?no.has(v):yi.has(v)),!ee&&T&&"boolean"==typeof U&&(ee=U?no.has(h):yi.has(h)),J&&ee}}const dc=new RegExp("s*:selfs*,?","g");function Ou(v,h,m,T){return new Nu(v).build(h,m,T)}class Nu{constructor(h){this._driver=h}build(h,m,T){const x=new La(m);return this._resetContextStyleTimingState(x),kn(this,ca(h),x)}_resetContextStyleTimingState(h){h.currentQuerySelector="",h.collectedStyles=new Map,h.collectedStyles.set("",new Map),h.currentTime=0}visitTrigger(h,m){let T=m.queryCount=0,x=m.depCount=0;const U=[],J=[];return"@"==h.name.charAt(0)&&m.errors.push(function rc(){return new j.vHH(3006,!1)}()),h.definitions.forEach(ee=>{if(this._resetContextStyleTimingState(m),0==ee.type){const le=ee,Ae=le.name;Ae.toString().split(/\s*,\s*/).forEach(st=>{le.name=st,U.push(this.visitState(le,m))}),le.name=Ae}else if(1==ee.type){const le=this.visitTransition(ee,m);T+=le.queryCount,x+=le.depCount,J.push(le)}else m.errors.push(function vo(){return new j.vHH(3007,!1)}())}),{type:7,name:h.name,states:U,transitions:J,queryCount:T,depCount:x,options:null}}visitState(h,m){const T=this.visitStyle(h.styles,m),x=h.options&&h.options.params||null;if(T.containsDynamicStyles){const U=new Set,J=x||{};T.styles.forEach(ee=>{ee instanceof Map&&ee.forEach(le=>{Jc(le).forEach(Ae=>{J.hasOwnProperty(Ae)||U.add(Ae)})})}),U.size&&(xu(U.values()),m.errors.push(function Ru(v,h){return new j.vHH(3008,!1)}()))}return{type:0,name:h.name,style:T,options:x?{params:x}:null}}visitTransition(h,m){m.queryCount=0,m.depCount=0;const T=kn(this,ca(h.animation),m);return{type:1,matchers:Lr(h.expr,m.errors),animation:T,queryCount:m.queryCount,depCount:m.depCount,options:To(h.options)}}visitSequence(h,m){return{type:2,steps:h.steps.map(T=>kn(this,T,m)),options:To(h.options)}}visitGroup(h,m){const T=m.currentTime;let x=0;const U=h.steps.map(J=>{m.currentTime=T;const ee=kn(this,J,m);return x=Math.max(x,m.currentTime),ee});return m.currentTime=x,{type:3,steps:U,options:To(h.options)}}visitAnimate(h,m){const T=function Ne(v,h){if(v.hasOwnProperty("duration"))return v;if("number"==typeof v)return Rs(Na(v,h).duration,0,"");const m=v;if(m.split(/\s+/).some(U=>"{"==U.charAt(0)&&"{"==U.charAt(1))){const U=Rs(0,0,"");return U.dynamic=!0,U.strValue=m,U}const x=Na(m,h);return Rs(x.duration,x.delay,x.easing)}(h.timings,m.errors);m.currentAnimateTimings=T;let x,U=h.styles?h.styles:(0,sr.oB)({});if(5==U.type)x=this.visitKeyframes(U,m);else{let J=h.styles,ee=!1;if(!J){ee=!0;const Ae={};T.easing&&(Ae.easing=T.easing),J=(0,sr.oB)(Ae)}m.currentTime+=T.duration+T.delay;const le=this.visitStyle(J,m);le.isEmptyStep=ee,x=le}return m.currentAnimateTimings=null,{type:4,timings:T,style:x,options:null}}visitStyle(h,m){const T=this._makeStyleAst(h,m);return this._validateStyleAst(T,m),T}_makeStyleAst(h,m){const T=[],x=Array.isArray(h.styles)?h.styles:[h.styles];for(let ee of x)"string"==typeof ee?ee===sr.l3?T.push(ee):m.errors.push(new j.vHH(3002,!1)):T.push(ln(ee));let U=!1,J=null;return T.forEach(ee=>{if(ee instanceof Map&&(ee.has("easing")&&(J=ee.get("easing"),ee.delete("easing")),!U))for(let le of ee.values())if(le.toString().indexOf("{{")>=0){U=!0;break}}),{type:6,styles:T,easing:J,offset:h.offset,containsDynamicStyles:U,options:null}}_validateStyleAst(h,m){const T=m.currentAnimateTimings;let x=m.currentTime,U=m.currentTime;T&&U>0&&(U-=T.duration+T.delay),h.styles.forEach(J=>{"string"!=typeof J&&J.forEach((ee,le)=>{const Ae=m.collectedStyles.get(m.currentQuerySelector),st=Ae.get(le);let vt=!0;st&&(U!=x&&U>=st.startTime&&x<=st.endTime&&(m.errors.push(function Eo(v,h,m,T,x){return new j.vHH(3010,!1)}()),vt=!1),U=st.startTime),vt&&Ae.set(le,{startTime:U,endTime:x}),m.options&&function au(v,h,m){const T=h.params||{},x=Jc(v);x.length&&x.forEach(U=>{T.hasOwnProperty(U)||m.push(function ra(v){return new j.vHH(3001,!1)}())})}(ee,m.options,m.errors)})})}visitKeyframes(h,m){const T={type:5,styles:[],options:null};if(!m.currentAnimateTimings)return m.errors.push(function sa(){return new j.vHH(3011,!1)}()),T;let U=0;const J=[];let ee=!1,le=!1,Ae=0;const st=h.steps.map(Cr=>{const Ar=this._makeStyleAst(Cr,m);let Gn=null!=Ar.offset?Ar.offset:function xc(v){if("string"==typeof v)return null;let h=null;if(Array.isArray(v))v.forEach(m=>{if(m instanceof Map&&m.has("offset")){const T=m;h=parseFloat(T.get("offset")),T.delete("offset")}});else if(v instanceof Map&&v.has("offset")){const m=v;h=parseFloat(m.get("offset")),m.delete("offset")}return h}(Ar.styles),jn=0;return null!=Gn&&(U++,jn=Ar.offset=Gn),le=le||jn<0||jn>1,ee=ee||jn<Ae,Ae=jn,J.push(jn),Ar});le&&m.errors.push(function Bi(){return new j.vHH(3012,!1)}()),ee&&m.errors.push(function Fo(){return new j.vHH(3200,!1)}());const vt=h.steps.length;let Jt=0;U>0&&U<vt?m.errors.push(function Pa(){return new j.vHH(3202,!1)}()):0==U&&(Jt=1/(vt-1));const Kt=vt-1,Mt=m.currentTime,an=m.currentAnimateTimings,In=an.duration;return st.forEach((Cr,Ar)=>{const Gn=Jt>0?Ar==Kt?1:Jt*Ar:J[Ar],jn=Gn*In;m.currentTime=Mt+an.delay+jn,an.duration=jn,this._validateStyleAst(Cr,m),Cr.offset=Gn,T.styles.push(Cr)}),T}visitReference(h,m){return{type:8,animation:kn(this,ca(h.animation),m),options:To(h.options)}}visitAnimateChild(h,m){return m.depCount++,{type:9,options:To(h.options)}}visitAnimateRef(h,m){return{type:10,animation:this.visitReference(h.animation,m),options:To(h.options)}}visitQuery(h,m){const T=m.currentQuerySelector,x=h.options||{};m.queryCount++,m.currentQuery=h;const[U,J]=function Mc(v){const h=!!v.split(/\s*,\s*/).find(m=>":self"==m);return h&&(v=v.replace(dc,"")),v=v.replace(/@\*/g,to).replace(/@\w+/g,m=>to+"-"+m.slice(1)).replace(/:animating/g,ut),[v,h]}(h.selector);m.currentQuerySelector=T.length?T+" "+U:U,Tn(m.collectedStyles,m.currentQuerySelector,new Map);const ee=kn(this,ca(h.animation),m);return m.currentQuery=null,m.currentQuerySelector=T,{type:11,selector:U,limit:x.limit||0,optional:!!x.optional,includeSelf:J,animation:ee,originalSelector:h.selector,options:To(h.options)}}visitStagger(h,m){m.currentQuery||m.errors.push(function oa(){return new j.vHH(3013,!1)}());const T="full"===h.timings?{duration:0,delay:0,easing:"full"}:Na(h.timings,m.errors,!0);return{type:12,animation:kn(this,ca(h.animation),m),timings:T,options:null}}}class La{constructor(h){this.errors=h,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function To(v){return v?(v=Bt(v)).params&&(v.params=function Bo(v){return v?Bt(v):null}(v.params)):v={},v}function Rs(v,h,m){return{duration:v,delay:h,easing:m}}function uu(v,h,m,T,x,U,J=null,ee=!1){return{type:1,element:v,keyframes:h,preStyleProps:m,postStyleProps:T,duration:x,delay:U,totalTime:x+U,easing:J,subTimeline:ee}}class w{constructor(){this._map=new Map}get(h){return this._map.get(h)||[]}append(h,m){let T=this._map.get(h);T||this._map.set(h,T=[]),T.push(...m)}has(h){return this._map.has(h)}clear(){this._map.clear()}}const R=new RegExp(":enter","g"),q=new RegExp(":leave","g");function te(v,h,m,T,x,U=new Map,J=new Map,ee,le,Ae=[]){return(new je).buildKeyframes(v,h,m,T,x,U,J,ee,le,Ae)}class je{buildKeyframes(h,m,T,x,U,J,ee,le,Ae,st=[]){Ae=Ae||new w;const vt=new Ct(h,m,Ae,x,U,st,[]);vt.options=le;const Jt=le.delay?lr(le.delay):0;vt.currentTimeline.delayNextStep(Jt),vt.currentTimeline.setStyles([J],null,vt.errors,le),kn(this,T,vt);const Kt=vt.timelines.filter(Mt=>Mt.containsAnimation());if(Kt.length&&ee.size){let Mt;for(let an=Kt.length-1;an>=0;an--){const In=Kt[an];if(In.element===m){Mt=In;break}}Mt&&!Mt.allowOnlyTimelineStyles()&&Mt.setStyles([ee],null,vt.errors,le)}return Kt.length?Kt.map(Mt=>Mt.buildKeyframes()):[uu(m,[],[],[],0,Jt,"",!1)]}visitTrigger(h,m){}visitState(h,m){}visitTransition(h,m){}visitAnimateChild(h,m){const T=m.subInstructions.get(m.element);if(T){const x=m.createSubContext(h.options),U=m.currentTimeline.currentTime,J=this._visitSubInstructions(T,x,x.options);U!=J&&m.transformIntoNewTimeline(J)}m.previousNode=h}visitAnimateRef(h,m){const T=m.createSubContext(h.options);T.transformIntoNewTimeline(),this._applyAnimationRefDelays([h.options,h.animation.options],m,T),this.visitReference(h.animation,T),m.transformIntoNewTimeline(T.currentTimeline.currentTime),m.previousNode=h}_applyAnimationRefDelays(h,m,T){for(const x of h){const U=x?.delay;if(U){const J="number"==typeof U?U:lr(oi(U,x?.params??{},m.errors));T.delayNextStep(J)}}}_visitSubInstructions(h,m,T){let U=m.currentTimeline.currentTime;const J=null!=T.duration?lr(T.duration):null,ee=null!=T.delay?lr(T.delay):null;return 0!==J&&h.forEach(le=>{const Ae=m.appendInstructionToTimeline(le,J,ee);U=Math.max(U,Ae.duration+Ae.delay)}),U}visitReference(h,m){m.updateOptions(h.options,!0),kn(this,h.animation,m),m.previousNode=h}visitSequence(h,m){const T=m.subContextCount;let x=m;const U=h.options;if(U&&(U.params||U.delay)&&(x=m.createSubContext(U),x.transformIntoNewTimeline(),null!=U.delay)){6==x.previousNode.type&&(x.currentTimeline.snapshotCurrentStyles(),x.previousNode=Re);const J=lr(U.delay);x.delayNextStep(J)}h.steps.length&&(h.steps.forEach(J=>kn(this,J,x)),x.currentTimeline.applyStylesToKeyframe(),x.subContextCount>T&&x.transformIntoNewTimeline()),m.previousNode=h}visitGroup(h,m){const T=[];let x=m.currentTimeline.currentTime;const U=h.options&&h.options.delay?lr(h.options.delay):0;h.steps.forEach(J=>{const ee=m.createSubContext(h.options);U&&ee.delayNextStep(U),kn(this,J,ee),x=Math.max(x,ee.currentTimeline.currentTime),T.push(ee.currentTimeline)}),T.forEach(J=>m.currentTimeline.mergeTimelineCollectedStyles(J)),m.transformIntoNewTimeline(x),m.previousNode=h}_visitTiming(h,m){if(h.dynamic){const T=h.strValue;return Na(m.params?oi(T,m.params,m.errors):T,m.errors)}return{duration:h.duration,delay:h.delay,easing:h.easing}}visitAnimate(h,m){const T=m.currentAnimateTimings=this._visitTiming(h.timings,m),x=m.currentTimeline;T.delay&&(m.incrementTime(T.delay),x.snapshotCurrentStyles());const U=h.style;5==U.type?this.visitKeyframes(U,m):(m.incrementTime(T.duration),this.visitStyle(U,m),x.applyStylesToKeyframe()),m.currentAnimateTimings=null,m.previousNode=h}visitStyle(h,m){const T=m.currentTimeline,x=m.currentAnimateTimings;!x&&T.hasCurrentStyleProperties()&&T.forwardFrame();const U=x&&x.easing||h.easing;h.isEmptyStep?T.applyEmptyStep(U):T.setStyles(h.styles,U,m.errors,m.options),m.previousNode=h}visitKeyframes(h,m){const T=m.currentAnimateTimings,x=m.currentTimeline.duration,U=T.duration,ee=m.createSubContext().currentTimeline;ee.easing=T.easing,h.styles.forEach(le=>{ee.forwardTime((le.offset||0)*U),ee.setStyles(le.styles,le.easing,m.errors,m.options),ee.applyStylesToKeyframe()}),m.currentTimeline.mergeTimelineCollectedStyles(ee),m.transformIntoNewTimeline(x+U),m.previousNode=h}visitQuery(h,m){const T=m.currentTimeline.currentTime,x=h.options||{},U=x.delay?lr(x.delay):0;U&&(6===m.previousNode.type||0==T&&m.currentTimeline.hasCurrentStyleProperties())&&(m.currentTimeline.snapshotCurrentStyles(),m.previousNode=Re);let J=T;const ee=m.invokeQuery(h.selector,h.originalSelector,h.limit,h.includeSelf,!!x.optional,m.errors);m.currentQueryTotal=ee.length;let le=null;ee.forEach((Ae,st)=>{m.currentQueryIndex=st;const vt=m.createSubContext(h.options,Ae);U&&vt.delayNextStep(U),Ae===m.element&&(le=vt.currentTimeline),kn(this,h.animation,vt),vt.currentTimeline.applyStylesToKeyframe(),J=Math.max(J,vt.currentTimeline.currentTime)}),m.currentQueryIndex=0,m.currentQueryTotal=0,m.transformIntoNewTimeline(J),le&&(m.currentTimeline.mergeTimelineCollectedStyles(le),m.currentTimeline.snapshotCurrentStyles()),m.previousNode=h}visitStagger(h,m){const T=m.parentContext,x=m.currentTimeline,U=h.timings,J=Math.abs(U.duration),ee=J*(m.currentQueryTotal-1);let le=J*m.currentQueryIndex;switch(U.duration<0?"reverse":U.easing){case"reverse":le=ee-le;break;case"full":le=T.currentStaggerTime}const st=m.currentTimeline;le&&st.delayNextStep(le);const vt=st.currentTime;kn(this,h.animation,m),m.previousNode=h,T.currentStaggerTime=x.currentTime-vt+(x.startTime-T.currentTimeline.startTime)}}const Re={};class Ct{constructor(h,m,T,x,U,J,ee,le){this._driver=h,this.element=m,this.subInstructions=T,this._enterClassName=x,this._leaveClassName=U,this.errors=J,this.timelines=ee,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Re,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=le||new hn(this._driver,m,0),ee.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(h,m){if(!h)return;const T=h;let x=this.options;null!=T.duration&&(x.duration=lr(T.duration)),null!=T.delay&&(x.delay=lr(T.delay));const U=T.params;if(U){let J=x.params;J||(J=this.options.params={}),Object.keys(U).forEach(ee=>{(!m||!J.hasOwnProperty(ee))&&(J[ee]=oi(U[ee],J,this.errors))})}}_copyOptions(){const h={};if(this.options){const m=this.options.params;if(m){const T=h.params={};Object.keys(m).forEach(x=>{T[x]=m[x]})}}return h}createSubContext(h=null,m,T){const x=m||this.element,U=new Ct(this._driver,x,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(x,T||0));return U.previousNode=this.previousNode,U.currentAnimateTimings=this.currentAnimateTimings,U.options=this._copyOptions(),U.updateOptions(h),U.currentQueryIndex=this.currentQueryIndex,U.currentQueryTotal=this.currentQueryTotal,U.parentContext=this,this.subContextCount++,U}transformIntoNewTimeline(h){return this.previousNode=Re,this.currentTimeline=this.currentTimeline.fork(this.element,h),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(h,m,T){const x={duration:m??h.duration,delay:this.currentTimeline.currentTime+(T??0)+h.delay,easing:""},U=new pr(this._driver,h.element,h.keyframes,h.preStyleProps,h.postStyleProps,x,h.stretchStartingKeyframe);return this.timelines.push(U),x}incrementTime(h){this.currentTimeline.forwardTime(this.currentTimeline.duration+h)}delayNextStep(h){h>0&&this.currentTimeline.delayNextStep(h)}invokeQuery(h,m,T,x,U,J){let ee=[];if(x&&ee.push(this.element),h.length>0){h=(h=h.replace(R,"."+this._enterClassName)).replace(q,"."+this._leaveClassName);let Ae=this._driver.query(this.element,h,1!=T);0!==T&&(Ae=T<0?Ae.slice(Ae.length+T,Ae.length):Ae.slice(0,T)),ee.push(...Ae)}return!U&&0==ee.length&&J.push(function sc(v){return new j.vHH(3014,!1)}()),ee}}class hn{constructor(h,m,T,x){this._driver=h,this.element=m,this.startTime=T,this._elementTimelineStylesLookup=x,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(m),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(m,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(h){const m=1===this._keyframes.size&&this._pendingStyles.size;this.duration||m?(this.forwardTime(this.currentTime+h),m&&this.snapshotCurrentStyles()):this.startTime+=h}fork(h,m){return this.applyStylesToKeyframe(),new hn(this._driver,h,m||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(h){this.applyStylesToKeyframe(),this.duration=h,this._loadKeyframe()}_updateStyle(h,m){this._localTimelineStyles.set(h,m),this._globalTimelineStyles.set(h,m),this._styleSummary.set(h,{time:this.currentTime,value:m})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(h){h&&this._previousKeyframe.set("easing",h);for(let[m,T]of this._globalTimelineStyles)this._backFill.set(m,T||sr.l3),this._currentKeyframe.set(m,sr.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(h,m,T,x){m&&this._previousKeyframe.set("easing",m);const U=x&&x.params||{},J=function _s(v,h){const m=new Map;let T;return v.forEach(x=>{if("*"===x){T=T||h.keys();for(let U of T)m.set(U,sr.l3)}else Xe(x,m)}),m}(h,this._globalTimelineStyles);for(let[ee,le]of J){const Ae=oi(le,U,T);this._pendingStyles.set(ee,Ae),this._localTimelineStyles.has(ee)||this._backFill.set(ee,this._globalTimelineStyles.get(ee)??sr.l3),this._updateStyle(ee,Ae)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((h,m)=>{this._currentKeyframe.set(m,h)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((h,m)=>{this._currentKeyframe.has(m)||this._currentKeyframe.set(m,h)}))}snapshotCurrentStyles(){for(let[h,m]of this._localTimelineStyles)this._pendingStyles.set(h,m),this._updateStyle(h,m)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const h=[];for(let m in this._currentKeyframe)h.push(m);return h}mergeTimelineCollectedStyles(h){h._styleSummary.forEach((m,T)=>{const x=this._styleSummary.get(T);(!x||m.time>x.time)&&this._updateStyle(T,m.value)})}buildKeyframes(){this.applyStylesToKeyframe();const h=new Set,m=new Set,T=1===this._keyframes.size&&0===this.duration;let x=[];this._keyframes.forEach((ee,le)=>{const Ae=Xe(ee,new Map,this._backFill);Ae.forEach((st,vt)=>{st===sr.k1?h.add(vt):st===sr.l3&&m.add(vt)}),T||Ae.set("offset",le/this.duration),x.push(Ae)});const U=h.size?xu(h.values()):[],J=m.size?xu(m.values()):[];if(T){const ee=x[0],le=new Map(ee);ee.set("offset",0),le.set("offset",1),x=[ee,le]}return uu(this.element,x,U,J,this.duration,this.startTime,this.easing,!1)}}class pr extends hn{constructor(h,m,T,x,U,J,ee=!1){super(h,m,J.delay),this.keyframes=T,this.preStyleProps=x,this.postStyleProps=U,this._stretchStartingKeyframe=ee,this.timings={duration:J.duration,delay:J.delay,easing:J.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let h=this.keyframes,{delay:m,duration:T,easing:x}=this.timings;if(this._stretchStartingKeyframe&&m){const U=[],J=T+m,ee=m/J,le=Xe(h[0]);le.set("offset",0),U.push(le);const Ae=Xe(h[0]);Ae.set("offset",fn(ee)),U.push(Ae);const st=h.length-1;for(let vt=1;vt<=st;vt++){let Jt=Xe(h[vt]);const Kt=Jt.get("offset");Jt.set("offset",fn((m+Kt*T)/J)),U.push(Jt)}T=J,m=0,x="",h=U}return uu(this.element,h,this.preStyleProps,this.postStyleProps,T,m,x,!0)}}function fn(v,h=3){const m=Math.pow(10,h-1);return Math.round(v*m)/m}class xi{}const ys=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class ku extends xi{normalizePropertyName(h,m){return it(h)}normalizeStyleValue(h,m,T,x){let U="";const J=T.toString().trim();if(ys.has(m)&&0!==T&&"0"!==T)if("number"==typeof T)U="px";else{const ee=T.match(/^[+-]?[\d\.]+([a-z]*)$/);ee&&0==ee[1].length&&x.push(function iu(v,h){return new j.vHH(3005,!1)}())}return J+U}}function hc(v,h,m,T,x,U,J,ee,le,Ae,st,vt,Jt){return{type:0,element:v,triggerName:h,isRemovalTransition:x,fromState:m,fromStyles:U,toState:T,toStyles:J,timelines:ee,queriedElements:le,preStyleProps:Ae,postStyleProps:st,totalTime:vt,errors:Jt}}const Lu={};class Oc{constructor(h,m,T){this._triggerName=h,this.ast=m,this._stateStyles=T}match(h,m,T,x){return function lu(v,h,m,T,x){return v.some(U=>U(h,m,T,x))}(this.ast.matchers,h,m,T,x)}buildStyles(h,m,T){let x=this._stateStyles.get("*");return void 0!==h&&(x=this._stateStyles.get(h?.toString())||x),x?x.buildStyles(m,T):new Map}build(h,m,T,x,U,J,ee,le,Ae,st){const vt=[],Jt=this.ast.options&&this.ast.options.params||Lu,Mt=this.buildStyles(T,ee&&ee.params||Lu,vt),an=le&&le.params||Lu,In=this.buildStyles(x,an,vt),Cr=new Set,Ar=new Map,Gn=new Map,jn="void"===x,Br={params:Fa(an,Jt),delay:this.ast.options?.delay},ai=st?[]:te(h,m,this.ast.animation,U,J,Mt,In,Br,Ae,vt);let Fr=0;if(ai.forEach(xs=>{Fr=Math.max(xs.duration+xs.delay,Fr)}),vt.length)return hc(m,this._triggerName,T,x,jn,Mt,In,[],[],Ar,Gn,Fr,vt);ai.forEach(xs=>{const Co=xs.element,io=Tn(Ar,Co,new Set);xs.preStyleProps.forEach(so=>io.add(so));const ju=Tn(Gn,Co,new Set);xs.postStyleProps.forEach(so=>ju.add(so)),Co!==m&&Cr.add(Co)});const es=xu(Cr.values());return hc(m,this._triggerName,T,x,jn,Mt,In,ai,es,Ar,Gn,Fr)}}function Fa(v,h){const m=Bt(h);for(const T in v)v.hasOwnProperty(T)&&null!=v[T]&&(m[T]=v[T]);return m}class Fu{constructor(h,m,T){this.styles=h,this.defaultParams=m,this.normalizer=T}buildStyles(h,m){const T=new Map,x=Bt(this.defaultParams);return Object.keys(h).forEach(U=>{const J=h[U];null!==J&&(x[U]=J)}),this.styles.styles.forEach(U=>{"string"!=typeof U&&U.forEach((J,ee)=>{J&&(J=oi(J,x,m));const le=this.normalizer.normalizePropertyName(ee,m);J=this.normalizer.normalizeStyleValue(ee,le,J,m),T.set(ee,J)})}),T}}class Sl{constructor(h,m,T){this.name=h,this.ast=m,this._normalizer=T,this.transitionFactories=[],this.states=new Map,m.states.forEach(x=>{this.states.set(x.name,new Fu(x.style,x.options&&x.options.params||{},T))}),vd(this.states,"true","1"),vd(this.states,"false","0"),m.transitions.forEach(x=>{this.transitionFactories.push(new Oc(h,x,this.states))}),this.fallbackTransition=function Vf(v,h,m){return new Oc(v,{type:1,animation:{type:2,steps:[],options:null},matchers:[(J,ee)=>!0],options:null,queryCount:0,depCount:0},h)}(h,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(h,m,T,x){return this.transitionFactories.find(J=>J.match(h,m,T,x))||null}matchStyles(h,m,T){return this.fallbackTransition.buildStyles(h,m,T)}}function vd(v,h,m){v.has(h)?v.has(m)||v.set(m,v.get(h)):v.has(m)&&v.set(h,v.get(m))}const bl=new w;class mh{constructor(h,m,T){this.bodyNode=h,this._driver=m,this._normalizer=T,this._animations=new Map,this._playersById=new Map,this.players=[]}register(h,m){const T=[],U=Ou(this._driver,m,T,[]);if(T.length)throw function Pc(v){return new j.vHH(3503,!1)}();this._animations.set(h,U)}_buildPlayer(h,m,T){const x=h.element,U=rr(this._normalizer,h.keyframes,m,T);return this._driver.animate(x,U,h.duration,h.delay,h.easing,[],!0)}create(h,m,T={}){const x=[],U=this._animations.get(h);let J;const ee=new Map;if(U?(J=te(this._driver,m,U,ir,ls,new Map,new Map,T,bl,x),J.forEach(st=>{const vt=Tn(ee,st.element,new Map);st.postStyleProps.forEach(Jt=>vt.set(Jt,null))})):(x.push(function Xs(){return new j.vHH(3300,!1)}()),J=[]),x.length)throw function ac(v){return new j.vHH(3504,!1)}();ee.forEach((st,vt)=>{st.forEach((Jt,Kt)=>{st.set(Kt,this._driver.computeStyle(vt,Kt,sr.l3))})});const Ae=Lt(J.map(st=>{const vt=ee.get(st.element);return this._buildPlayer(st,new Map,vt)}));return this._playersById.set(h,Ae),Ae.onDestroy(()=>this.destroy(h)),this.players.push(Ae),Ae}destroy(h){const m=this._getPlayer(h);m.destroy(),this._playersById.delete(h);const T=this.players.indexOf(m);T>=0&&this.players.splice(T,1)}_getPlayer(h){const m=this._playersById.get(h);if(!m)throw function ji(v){return new j.vHH(3301,!1)}();return m}listen(h,m,T,x){const U=Yt(m,"","","");return xn(this._getPlayer(h),T,U,x),()=>{}}command(h,m,T,x){if("register"==T)return void this.register(h,x[0]);if("create"==T)return void this.create(h,m,x[0]||{});const U=this._getPlayer(h);switch(T){case"play":U.play();break;case"pause":U.pause();break;case"reset":U.reset();break;case"restart":U.restart();break;case"finish":U.finish();break;case"init":U.init();break;case"setPosition":U.setPosition(parseFloat(x[0]));break;case"destroy":this.destroy(h)}}}const _h="ng-animate-queued",da="ng-animate-disabled",fc=[],Nc={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},$i={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ds="__ng_removed";class ha{get params(){return this.options.params}constructor(h,m=""){this.namespaceId=m;const T=h&&h.hasOwnProperty("value");if(this.value=function Ua(v){return v??null}(T?h.value:h),T){const U=Bt(h);delete U.value,this.options=U}else this.options={};this.options.params||(this.options.params={})}absorbOptions(h){const m=h.params;if(m){const T=this.options.params;Object.keys(m).forEach(x=>{null==T[x]&&(T[x]=m[x])})}}}const Ps="void",gr=new ha(Ps);class Va{constructor(h,m,T){this.id=h,this.hostElement=m,this._engine=T,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+h,Hi(m,this._hostClassName)}listen(h,m,T,x){if(!this._triggers.has(m))throw function uc(v,h){return new j.vHH(3302,!1)}();if(null==T||0==T.length)throw function A(v){return new j.vHH(3303,!1)}();if(!function Pl(v){return"start"==v||"done"==v}(T))throw function H(v,h){return new j.vHH(3400,!1)}();const U=Tn(this._elementListeners,h,[]),J={name:m,phase:T,callback:x};U.push(J);const ee=Tn(this._engine.statesByElement,h,new Map);return ee.has(m)||(Hi(h,Mi),Hi(h,Mi+"-"+m),ee.set(m,gr)),()=>{this._engine.afterFlush(()=>{const le=U.indexOf(J);le>=0&&U.splice(le,1),this._triggers.has(m)||ee.delete(m)})}}register(h,m){return!this._triggers.has(h)&&(this._triggers.set(h,m),!0)}_getTrigger(h){const m=this._triggers.get(h);if(!m)throw function O(v){return new j.vHH(3401,!1)}();return m}trigger(h,m,T,x=!0){const U=this._getTrigger(m),J=new hr(this.id,m,h);let ee=this._engine.statesByElement.get(h);ee||(Hi(h,Mi),Hi(h,Mi+"-"+m),this._engine.statesByElement.set(h,ee=new Map));let le=ee.get(m);const Ae=new ha(T,this.id);if(!(T&&T.hasOwnProperty("value"))&&le&&Ae.absorbOptions(le.options),ee.set(m,Ae),le||(le=gr),Ae.value!==Ps&&le.value===Ae.value){if(!function pc(v,h){const m=Object.keys(v),T=Object.keys(h);if(m.length!=T.length)return!1;for(let x=0;x<m.length;x++){const U=m[x];if(!h.hasOwnProperty(U)||v[U]!==h[U])return!1}return!0}(le.params,Ae.params)){const an=[],In=U.matchStyles(le.value,le.params,an),Cr=U.matchStyles(Ae.value,Ae.params,an);an.length?this._engine.reportError(an):this._engine.afterFlush(()=>{ua(h,In),Dr(h,Cr)})}return}const Jt=Tn(this._engine.playersByElement,h,[]);Jt.forEach(an=>{an.namespaceId==this.id&&an.triggerName==m&&an.queued&&an.destroy()});let Kt=U.matchTransition(le.value,Ae.value,h,Ae.params),Mt=!1;if(!Kt){if(!x)return;Kt=U.fallbackTransition,Mt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:m,transition:Kt,fromState:le,toState:Ae,player:J,isFallbackTransition:Mt}),Mt||(Hi(h,_h),J.onStart(()=>{ar(h,_h)})),J.onDone(()=>{let an=this.players.indexOf(J);an>=0&&this.players.splice(an,1);const In=this._engine.playersByElement.get(h);if(In){let Cr=In.indexOf(J);Cr>=0&&In.splice(Cr,1)}}),this.players.push(J),Jt.push(J),J}deregister(h){this._triggers.delete(h),this._engine.statesByElement.forEach(m=>m.delete(h)),this._elementListeners.forEach((m,T)=>{this._elementListeners.set(T,m.filter(x=>x.name!=h))})}clearElementCache(h){this._engine.statesByElement.delete(h),this._elementListeners.delete(h);const m=this._engine.playersByElement.get(h);m&&(m.forEach(T=>T.destroy()),this._engine.playersByElement.delete(h))}_signalRemovalForInnerTriggers(h,m){const T=this._engine.driver.query(h,to,!0);T.forEach(x=>{if(x[ds])return;const U=this._engine.fetchNamespacesByElement(x);U.size?U.forEach(J=>J.triggerLeaveAnimation(x,m,!1,!0)):this.clearElementCache(x)}),this._engine.afterFlushAnimationsDone(()=>T.forEach(x=>this.clearElementCache(x)))}triggerLeaveAnimation(h,m,T,x){const U=this._engine.statesByElement.get(h),J=new Map;if(U){const ee=[];if(U.forEach((le,Ae)=>{if(J.set(Ae,le.value),this._triggers.has(Ae)){const st=this.trigger(h,Ae,Ps,x);st&&ee.push(st)}}),ee.length)return this._engine.markElementAsRemoved(this.id,h,!0,m,J),T&&Lt(ee).onDone(()=>this._engine.processLeaveNode(h)),!0}return!1}prepareLeaveAnimationListeners(h){const m=this._elementListeners.get(h),T=this._engine.statesByElement.get(h);if(m&&T){const x=new Set;m.forEach(U=>{const J=U.name;if(x.has(J))return;x.add(J);const le=this._triggers.get(J).fallbackTransition,Ae=T.get(J)||gr,st=new ha(Ps),vt=new hr(this.id,J,h);this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:J,transition:le,fromState:Ae,toState:st,player:vt,isFallbackTransition:!0})})}}removeNode(h,m){const T=this._engine;if(h.childElementCount&&this._signalRemovalForInnerTriggers(h,m),this.triggerLeaveAnimation(h,m,!0))return;let x=!1;if(T.totalAnimations){const U=T.players.length?T.playersByQueriedElement.get(h):[];if(U&&U.length)x=!0;else{let J=h;for(;J=J.parentNode;)if(T.statesByElement.get(J)){x=!0;break}}}if(this.prepareLeaveAnimationListeners(h),x)T.markElementAsRemoved(this.id,h,!1,m);else{const U=h[ds];(!U||U===Nc)&&(T.afterFlush(()=>this.clearElementCache(h)),T.destroyInnerAnimations(h),T._onRemovalComplete(h,m))}}insertNode(h,m){Hi(h,this._hostClassName)}drainQueuedTransitions(h){const m=[];return this._queue.forEach(T=>{const x=T.player;if(x.destroyed)return;const U=T.element,J=this._elementListeners.get(U);J&&J.forEach(ee=>{if(ee.name==T.triggerName){const le=Yt(U,T.triggerName,T.fromState.value,T.toState.value);le._data=h,xn(T.player,ee.phase,le,ee.callback)}}),x.markedForDestroy?this._engine.afterFlush(()=>{x.destroy()}):m.push(T)}),this._queue=[],m.sort((T,x)=>{const U=T.transition.ast.depCount,J=x.transition.ast.depCount;return 0==U||0==J?U-J:this._engine.driver.containsElement(T.element,x.element)?1:-1})}destroy(h){this.players.forEach(m=>m.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,h)}}class vi{_onRemovalComplete(h,m){this.onRemovalComplete(h,m)}constructor(h,m,T){this.bodyNode=h,this.driver=m,this._normalizer=T,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(x,U)=>{}}get queuedPlayers(){const h=[];return this._namespaceList.forEach(m=>{m.players.forEach(T=>{T.queued&&h.push(T)})}),h}createNamespace(h,m){const T=new Va(h,m,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,m)?this._balanceNamespaceList(T,m):(this.newHostElements.set(m,T),this.collectEnterElement(m)),this._namespaceLookup[h]=T}_balanceNamespaceList(h,m){const T=this._namespaceList,x=this.namespacesByHostElement;if(T.length-1>=0){let J=!1,ee=this.driver.getParentElement(m);for(;ee;){const le=x.get(ee);if(le){const Ae=T.indexOf(le);T.splice(Ae+1,0,h),J=!0;break}ee=this.driver.getParentElement(ee)}J||T.unshift(h)}else T.push(h);return x.set(m,h),h}register(h,m){let T=this._namespaceLookup[h];return T||(T=this.createNamespace(h,m)),T}registerTrigger(h,m,T){let x=this._namespaceLookup[h];x&&x.register(m,T)&&this.totalAnimations++}destroy(h,m){h&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const T=this._fetchNamespace(h);this.namespacesByHostElement.delete(T.hostElement);const x=this._namespaceList.indexOf(T);x>=0&&this._namespaceList.splice(x,1),T.destroy(m),delete this._namespaceLookup[h]}))}_fetchNamespace(h){return this._namespaceLookup[h]}fetchNamespacesByElement(h){const m=new Set,T=this.statesByElement.get(h);if(T)for(let x of T.values())if(x.namespaceId){const U=this._fetchNamespace(x.namespaceId);U&&m.add(U)}return m}trigger(h,m,T,x){if(Ji(m)){const U=this._fetchNamespace(h);if(U)return U.trigger(m,T,x),!0}return!1}insertNode(h,m,T,x){if(!Ji(m))return;const U=m[ds];if(U&&U.setForRemoval){U.setForRemoval=!1,U.setForMove=!0;const J=this.collectedLeaveElements.indexOf(m);J>=0&&this.collectedLeaveElements.splice(J,1)}if(h){const J=this._fetchNamespace(h);J&&J.insertNode(m,T)}x&&this.collectEnterElement(m)}collectEnterElement(h){this.collectedEnterElements.push(h)}markElementAsDisabled(h,m){m?this.disabledNodes.has(h)||(this.disabledNodes.add(h),Hi(h,da)):this.disabledNodes.has(h)&&(this.disabledNodes.delete(h),ar(h,da))}removeNode(h,m,T){if(Ji(m)){const x=h?this._fetchNamespace(h):null;x?x.removeNode(m,T):this.markElementAsRemoved(h,m,!1,T);const U=this.namespacesByHostElement.get(m);U&&U.id!==h&&U.removeNode(m,T)}else this._onRemovalComplete(m,T)}markElementAsRemoved(h,m,T,x,U){this.collectedLeaveElements.push(m),m[ds]={namespaceId:h,setForRemoval:x,hasAnimation:T,removedBeforeQueried:!1,previousTriggersValues:U}}listen(h,m,T,x,U){return Ji(m)?this._fetchNamespace(h).listen(m,T,x,U):()=>{}}_buildInstruction(h,m,T,x,U){return h.transition.build(this.driver,h.element,h.fromState.value,h.toState.value,T,x,h.fromState.options,h.toState.options,m,U)}destroyInnerAnimations(h){let m=this.driver.query(h,to,!0);m.forEach(T=>this.destroyActiveAnimationsForElement(T)),0!=this.playersByQueriedElement.size&&(m=this.driver.query(h,ut,!0),m.forEach(T=>this.finishActiveQueriedAnimationOnElement(T)))}destroyActiveAnimationsForElement(h){const m=this.playersByElement.get(h);m&&m.forEach(T=>{T.queued?T.markedForDestroy=!0:T.destroy()})}finishActiveQueriedAnimationOnElement(h){const m=this.playersByQueriedElement.get(h);m&&m.forEach(T=>T.finish())}whenRenderingDone(){return new Promise(h=>{if(this.players.length)return Lt(this.players).onDone(()=>h());h()})}processLeaveNode(h){const m=h[ds];if(m&&m.setForRemoval){if(h[ds]=Nc,m.namespaceId){this.destroyInnerAnimations(h);const T=this._fetchNamespace(m.namespaceId);T&&T.clearElementCache(h)}this._onRemovalComplete(h,m.setForRemoval)}h.classList?.contains(da)&&this.markElementAsDisabled(h,!1),this.driver.query(h,".ng-animate-disabled",!0).forEach(T=>{this.markElementAsDisabled(T,!1)})}flush(h=-1){let m=[];if(this.newHostElements.size&&(this.newHostElements.forEach((T,x)=>this._balanceNamespaceList(T,x)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let T=0;T<this.collectedEnterElements.length;T++)Hi(this.collectedEnterElements[T],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const T=[];try{m=this._flushAnimations(T,h)}finally{for(let x=0;x<T.length;x++)T[x]()}}else for(let T=0;T<this.collectedLeaveElements.length;T++)this.processLeaveNode(this.collectedLeaveElements[T]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(T=>T()),this._flushFns=[],this._whenQuietFns.length){const T=this._whenQuietFns;this._whenQuietFns=[],m.length?Lt(m).onDone(()=>{T.forEach(x=>x())}):T.forEach(x=>x())}}reportError(h){throw function B(v){return new j.vHH(3402,!1)}()}_flushAnimations(h,m){const T=new w,x=[],U=new Map,J=[],ee=new Map,le=new Map,Ae=new Map,st=new Set;this.disabledNodes.forEach(xt=>{st.add(xt);const Wt=this.driver.query(xt,".ng-animate-queued",!0);for(let vn=0;vn<Wt.length;vn++)st.add(Wt[vn])});const vt=this.bodyNode,Jt=Array.from(this.statesByElement.keys()),Kt=xl(Jt,this.collectedEnterElements),Mt=new Map;let an=0;Kt.forEach((xt,Wt)=>{const vn=ir+an++;Mt.set(Wt,vn),xt.forEach($n=>Hi($n,vn))});const In=[],Cr=new Set,Ar=new Set;for(let xt=0;xt<this.collectedLeaveElements.length;xt++){const Wt=this.collectedLeaveElements[xt],vn=Wt[ds];vn&&vn.setForRemoval&&(In.push(Wt),Cr.add(Wt),vn.hasAnimation?this.driver.query(Wt,".ng-star-inserted",!0).forEach($n=>Cr.add($n)):Ar.add(Wt))}const Gn=new Map,jn=xl(Jt,Array.from(Cr));jn.forEach((xt,Wt)=>{const vn=ls+an++;Gn.set(Wt,vn),xt.forEach($n=>Hi($n,vn))}),h.push(()=>{Kt.forEach((xt,Wt)=>{const vn=Mt.get(Wt);xt.forEach($n=>ar($n,vn))}),jn.forEach((xt,Wt)=>{const vn=Gn.get(Wt);xt.forEach($n=>ar($n,vn))}),In.forEach(xt=>{this.processLeaveNode(xt)})});const Br=[],ai=[];for(let xt=this._namespaceList.length-1;xt>=0;xt--)this._namespaceList[xt].drainQueuedTransitions(m).forEach(vn=>{const $n=vn.player,Ei=vn.element;if(Br.push($n),this.collectedEnterElements.length){const ts=Ei[ds];if(ts&&ts.setForMove){if(ts.previousTriggersValues&&ts.previousTriggersValues.has(vn.triggerName)){const Es=ts.previousTriggersValues.get(vn.triggerName),Ho=this.statesByElement.get(vn.element);if(Ho&&Ho.has(vn.triggerName)){const ns=Ho.get(vn.triggerName);ns.value=Es,Ho.set(vn.triggerName,ns)}}return void $n.destroy()}}const Os=!vt||!this.driver.containsElement(vt,Ei),zs=Gn.get(Ei),oo=Mt.get(Ei),Sr=this._buildInstruction(vn,T,oo,zs,Os);if(Sr.errors&&Sr.errors.length)return void ai.push(Sr);if(Os)return $n.onStart(()=>ua(Ei,Sr.fromStyles)),$n.onDestroy(()=>Dr(Ei,Sr.toStyles)),void x.push($n);if(vn.isFallbackTransition)return $n.onStart(()=>ua(Ei,Sr.fromStyles)),$n.onDestroy(()=>Dr(Ei,Sr.toStyles)),void x.push($n);const _c=[];Sr.timelines.forEach(ts=>{ts.stretchStartingKeyframe=!0,this.disabledNodes.has(ts.element)||_c.push(ts)}),Sr.timelines=_c,T.append(Ei,Sr.timelines),J.push({instruction:Sr,player:$n,element:Ei}),Sr.queriedElements.forEach(ts=>Tn(ee,ts,[]).push($n)),Sr.preStyleProps.forEach((ts,Es)=>{if(ts.size){let Ho=le.get(Es);Ho||le.set(Es,Ho=new Set),ts.forEach((ns,Fl)=>Ho.add(Fl))}}),Sr.postStyleProps.forEach((ts,Es)=>{let Ho=Ae.get(Es);Ho||Ae.set(Es,Ho=new Set),ts.forEach((ns,Fl)=>Ho.add(Fl))})});if(ai.length){const xt=[];ai.forEach(Wt=>{xt.push(function Be(v,h){return new j.vHH(3505,!1)}())}),Br.forEach(Wt=>Wt.destroy()),this.reportError(xt)}const Fr=new Map,es=new Map;J.forEach(xt=>{const Wt=xt.element;T.has(Wt)&&(es.set(Wt,Wt),this._beforeAnimationBuild(xt.player.namespaceId,xt.instruction,Fr))}),x.forEach(xt=>{const Wt=xt.element;this._getPreviousPlayers(Wt,!1,xt.namespaceId,xt.triggerName,null).forEach($n=>{Tn(Fr,Wt,[]).push($n),$n.destroy()})});const xs=In.filter(xt=>fu(xt,le,Ae)),Co=new Map;Qr(Co,this.driver,Ar,Ae,sr.l3).forEach(xt=>{fu(xt,le,Ae)&&xs.push(xt)});const ju=new Map;Kt.forEach((xt,Wt)=>{Qr(ju,this.driver,new Set(xt),le,sr.k1)}),xs.forEach(xt=>{const Wt=Co.get(xt),vn=ju.get(xt);Co.set(xt,new Map([...Wt?.entries()??[],...vn?.entries()??[]]))});const so=[],kl=[],pu={};J.forEach(xt=>{const{element:Wt,player:vn,instruction:$n}=xt;if(T.has(Wt)){if(st.has(Wt))return vn.onDestroy(()=>Dr(Wt,$n.toStyles)),vn.disabled=!0,vn.overrideTotalTime($n.totalTime),void x.push(vn);let Ei=pu;if(es.size>1){let zs=Wt;const oo=[];for(;zs=zs.parentNode;){const Sr=es.get(zs);if(Sr){Ei=Sr;break}oo.push(zs)}oo.forEach(Sr=>es.set(Sr,Ei))}const Os=this._buildAnimation(vn.namespaceId,$n,Fr,U,ju,Co);if(vn.setRealPlayer(Os),Ei===pu)so.push(vn);else{const zs=this.playersByElement.get(Ei);zs&&zs.length&&(vn.parentPlayer=Lt(zs)),x.push(vn)}}else ua(Wt,$n.fromStyles),vn.onDestroy(()=>Dr(Wt,$n.toStyles)),kl.push(vn),st.has(Wt)&&x.push(vn)}),kl.forEach(xt=>{const Wt=U.get(xt.element);if(Wt&&Wt.length){const vn=Lt(Wt);xt.setRealPlayer(vn)}}),x.forEach(xt=>{xt.parentPlayer?xt.syncPlayerEvents(xt.parentPlayer):xt.destroy()});for(let xt=0;xt<In.length;xt++){const Wt=In[xt],vn=Wt[ds];if(ar(Wt,ls),vn&&vn.hasAnimation)continue;let $n=[];if(ee.size){let Os=ee.get(Wt);Os&&Os.length&&$n.push(...Os);let zs=this.driver.query(Wt,ut,!0);for(let oo=0;oo<zs.length;oo++){let Sr=ee.get(zs[oo]);Sr&&Sr.length&&$n.push(...Sr)}}const Ei=$n.filter(Os=>!Os.destroyed);Ei.length?Ms(this,Wt,Ei):this.processLeaveNode(Wt)}return In.length=0,so.forEach(xt=>{this.players.push(xt),xt.onDone(()=>{xt.destroy();const Wt=this.players.indexOf(xt);this.players.splice(Wt,1)}),xt.play()}),so}afterFlush(h){this._flushFns.push(h)}afterFlushAnimationsDone(h){this._whenQuietFns.push(h)}_getPreviousPlayers(h,m,T,x,U){let J=[];if(m){const ee=this.playersByQueriedElement.get(h);ee&&(J=ee)}else{const ee=this.playersByElement.get(h);if(ee){const le=!U||U==Ps;ee.forEach(Ae=>{Ae.queued||!le&&Ae.triggerName!=x||J.push(Ae)})}}return(T||x)&&(J=J.filter(ee=>!(T&&T!=ee.namespaceId||x&&x!=ee.triggerName))),J}_beforeAnimationBuild(h,m,T){const U=m.element,J=m.isRemovalTransition?void 0:h,ee=m.isRemovalTransition?void 0:m.triggerName;for(const le of m.timelines){const Ae=le.element,st=Ae!==U,vt=Tn(T,Ae,[]);this._getPreviousPlayers(Ae,st,J,ee,m.toState).forEach(Kt=>{const Mt=Kt.getRealPlayer();Mt.beforeDestroy&&Mt.beforeDestroy(),Kt.destroy(),vt.push(Kt)})}ua(U,m.fromStyles)}_buildAnimation(h,m,T,x,U,J){const ee=m.triggerName,le=m.element,Ae=[],st=new Set,vt=new Set,Jt=m.timelines.map(Mt=>{const an=Mt.element;st.add(an);const In=an[ds];if(In&&In.removedBeforeQueried)return new sr.ZN(Mt.duration,Mt.delay);const Cr=an!==le,Ar=function el(v){const h=[];return hu(v,h),h}((T.get(an)||fc).map(Fr=>Fr.getRealPlayer())).filter(Fr=>!!Fr.element&&Fr.element===an),Gn=U.get(an),jn=J.get(an),Br=rr(this._normalizer,Mt.keyframes,Gn,jn),ai=this._buildPlayer(Mt,Br,Ar);if(Mt.subTimeline&&x&&vt.add(an),Cr){const Fr=new hr(h,ee,an);Fr.setRealPlayer(ai),Ae.push(Fr)}return ai});Ae.forEach(Mt=>{Tn(this.playersByQueriedElement,Mt.element,[]).push(Mt),Mt.onDone(()=>function Vu(v,h,m){let T=v.get(h);if(T){if(T.length){const x=T.indexOf(m);T.splice(x,1)}0==T.length&&v.delete(h)}return T}(this.playersByQueriedElement,Mt.element,Mt))}),st.forEach(Mt=>Hi(Mt,Vo));const Kt=Lt(Jt);return Kt.onDestroy(()=>{st.forEach(Mt=>ar(Mt,Vo)),Dr(le,m.toStyles)}),vt.forEach(Mt=>{Tn(x,Mt,[]).push(Kt)}),Kt}_buildPlayer(h,m,T){return m.length>0?this.driver.animate(h.element,m,h.duration,h.delay,h.easing,T):new sr.ZN(h.duration,h.delay)}}class hr{constructor(h,m,T){this.namespaceId=h,this.triggerName=m,this.element=T,this._player=new sr.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(h){this._containsRealPlayer||(this._player=h,this._queuedCallbacks.forEach((m,T)=>{m.forEach(x=>xn(h,T,void 0,x))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(h.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(h){this.totalTime=h}syncPlayerEvents(h){const m=this._player;m.triggerCallback&&h.onStart(()=>m.triggerCallback("start")),h.onDone(()=>this.finish()),h.onDestroy(()=>this.destroy())}_queueEvent(h,m){Tn(this._queuedCallbacks,h,[]).push(m)}onDone(h){this.queued&&this._queueEvent("done",h),this._player.onDone(h)}onStart(h){this.queued&&this._queueEvent("start",h),this._player.onStart(h)}onDestroy(h){this.queued&&this._queueEvent("destroy",h),this._player.onDestroy(h)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(h){this.queued||this._player.setPosition(h)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(h){const m=this._player;m.triggerCallback&&m.triggerCallback(h)}}function Ji(v){return v&&1===v.nodeType}function Ml(v,h){const m=v.style.display;return v.style.display=h??"none",m}function Qr(v,h,m,T,x){const U=[];m.forEach(le=>U.push(Ml(le)));const J=[];T.forEach((le,Ae)=>{const st=new Map;le.forEach(vt=>{const Jt=h.computeStyle(Ae,vt,x);st.set(vt,Jt),(!Jt||0==Jt.length)&&(Ae[ds]=$i,J.push(Ae))}),v.set(Ae,st)});let ee=0;return m.forEach(le=>Ml(le,U[ee++])),J}function xl(v,h){const m=new Map;if(v.forEach(ee=>m.set(ee,[])),0==h.length)return m;const x=new Set(h),U=new Map;function J(ee){if(!ee)return 1;let le=U.get(ee);if(le)return le;const Ae=ee.parentNode;return le=m.has(Ae)?Ae:x.has(Ae)?1:J(Ae),U.set(ee,le),le}return h.forEach(ee=>{const le=J(ee);1!==le&&m.get(le).push(ee)}),m}function Hi(v,h){v.classList?.add(h)}function ar(v,h){v.classList?.remove(h)}function Ms(v,h,m){Lt(m).onDone(()=>v.processLeaveNode(h))}function hu(v,h){for(let m=0;m<v.length;m++){const T=v[m];T instanceof sr.ZE?hu(T.players,h):h.push(T)}}function fu(v,h,m){const T=m.get(v);if(!T)return!1;let x=h.get(v);return x?T.forEach(U=>x.add(U)):h.set(v,T),m.delete(v),!0}class Hs{constructor(h,m,T){this.bodyNode=h,this._driver=m,this._normalizer=T,this._triggerCache={},this.onRemovalComplete=(x,U)=>{},this._transitionEngine=new vi(h,m,T),this._timelineEngine=new mh(h,m,T),this._transitionEngine.onRemovalComplete=(x,U)=>this.onRemovalComplete(x,U)}registerTrigger(h,m,T,x,U){const J=h+"-"+x;let ee=this._triggerCache[J];if(!ee){const le=[],st=Ou(this._driver,U,le,[]);if(le.length)throw function us(v,h){return new j.vHH(3404,!1)}();ee=function yd(v,h,m){return new Sl(v,h,m)}(x,st,this._normalizer),this._triggerCache[J]=ee}this._transitionEngine.registerTrigger(m,x,ee)}register(h,m){this._transitionEngine.register(h,m)}destroy(h,m){this._transitionEngine.destroy(h,m)}onInsert(h,m,T,x){this._transitionEngine.insertNode(h,m,T,x)}onRemove(h,m,T){this._transitionEngine.removeNode(h,m,T)}disableAnimations(h,m){this._transitionEngine.markElementAsDisabled(h,m)}process(h,m,T,x){if("@"==T.charAt(0)){const[U,J]=Zn(T);this._timelineEngine.command(U,m,J,x)}else this._transitionEngine.trigger(h,m,T,x)}listen(h,m,T,x,U){if("@"==T.charAt(0)){const[J,ee]=Zn(T);return this._timelineEngine.listen(J,m,ee,U)}return this._transitionEngine.listen(h,m,T,x,U)}flush(h=-1){this._transitionEngine.flush(h)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(h){this._transitionEngine.afterFlushAnimationsDone(h)}}let kc=(()=>{class v{static#e=this.initialStylesByElement=new WeakMap;constructor(m,T,x){this._element=m,this._startStyles=T,this._endStyles=x,this._state=0;let U=v.initialStylesByElement.get(m);U||v.initialStylesByElement.set(m,U=new Map),this._initialStyles=U}start(){this._state<1&&(this._startStyles&&Dr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Dr(this._element,this._initialStyles),this._endStyles&&(Dr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(v.initialStylesByElement.delete(this._element),this._startStyles&&(ua(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ua(this._element,this._endStyles),this._endStyles=null),Dr(this._element,this._initialStyles),this._state=3)}}return v})();function ro(v){let h=null;return v.forEach((m,T)=>{(function wo(v){return"display"===v||"position"===v})(T)&&(h=h||new Map,h.set(T,m))}),h}class Uu{constructor(h,m,T,x){this.element=h,this.keyframes=m,this.options=T,this._specialStyles=x,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=T.duration,this._delay=T.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(h=>h()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const h=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,h,this.options),this._finalKeyframe=h.length?h[h.length-1]:new Map;const m=()=>this._onFinish();this.domPlayer.addEventListener("finish",m),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",m)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(h){const m=[];return h.forEach(T=>{m.push(Object.fromEntries(T))}),m}_triggerWebAnimation(h,m,T){return h.animate(this._convertKeyframesToObject(m),T)}onStart(h){this._originalOnStartFns.push(h),this._onStartFns.push(h)}onDone(h){this._originalOnDoneFns.push(h),this._onDoneFns.push(h)}onDestroy(h){this._onDestroyFns.push(h)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(h=>h()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(h=>h()),this._onDestroyFns=[])}setPosition(h){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=h*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const h=new Map;this.hasStarted()&&this._finalKeyframe.forEach((T,x)=>{"offset"!==x&&h.set(x,this._finished?T:cc(this.element,x))}),this.currentSnapshot=h}triggerCallback(h){const m="start"===h?this._onStartFns:this._onDoneFns;m.forEach(T=>T()),m.length=0}}class fa{validateStyleProperty(h){return!0}validateAnimatableStyleProperty(h){return!0}matchesElement(h,m){return!1}containsElement(h,m){return su(h,m)}getParentElement(h){return Ri(h)}query(h,m,T){return or(h,m,T)}computeStyle(h,m,T){return window.getComputedStyle(h)[m]}animate(h,m,T,x,U,J=[]){const le={duration:T,delay:x,fill:0==x?"both":"forwards"};U&&(le.easing=U);const Ae=new Map,st=J.filter(Kt=>Kt instanceof Uu);(function Ur(v,h){return 0===v||0===h})(T,x)&&st.forEach(Kt=>{Kt.currentSnapshot.forEach((Mt,an)=>Ae.set(an,Mt))});let vt=function bt(v){return v.length?v[0]instanceof Map?v:v.map(h=>ln(h)):[]}(m).map(Kt=>Xe(Kt));vt=function _n(v,h,m){if(m.size&&h.length){let T=h[0],x=[];if(m.forEach((U,J)=>{T.has(J)||x.push(J),T.set(J,U)}),x.length)for(let U=1;U<h.length;U++){let J=h[U];x.forEach(ee=>J.set(ee,cc(v,ee)))}}return h}(h,vt,Ae);const Jt=function Hr(v,h){let m=null,T=null;return Array.isArray(h)&&h.length?(m=ro(h[0]),h.length>1&&(T=ro(h[h.length-1]))):h instanceof Map&&(m=ro(h)),m||T?new kc(v,m,T):null}(h,vt);return new Uu(h,vt,le,Jt)}}let Lc=(()=>{class v extends sr._j{constructor(m,T){super(),this._nextAnimationId=0,this._renderer=m.createRenderer(T.body,{id:"0",encapsulation:j.ifc.None,styles:[],data:{animation:[]}})}build(m){const T=this._nextAnimationId.toString();this._nextAnimationId++;const x=Array.isArray(m)?(0,sr.vP)(m):m;return Do(this._renderer,null,T,"register",[x]),new jo(T,this._renderer)}static#e=this.\u0275fac=function(T){return new(T||v)(j.LFG(j.FYo),j.LFG(me.K0))};static#t=this.\u0275prov=j.Yz7({token:v,factory:v.\u0275fac})}return v})();class jo extends sr.LC{constructor(h,m){super(),this._id=h,this._renderer=m}create(h,m){return new Ba(this._id,h,m||{},this._renderer)}}class Ba{constructor(h,m,T,x){this.id=h,this.element=m,this._renderer=x,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",T)}_listen(h,m){return this._renderer.listen(this.element,`@@${this.id}:${h}`,m)}_command(h,...m){return Do(this._renderer,this.element,this.id,h,m)}onDone(h){this._listen("done",h)}onStart(h){this._listen("start",h)}onDestroy(h){this._listen("destroy",h)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(h){this._command("setPosition",h)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Do(v,h,m,T,x){return v.setProperty(h,`@@${m}:${T}`,x)}const gc="@.disabled";let pa=(()=>{class v{constructor(m,T,x){this.delegate=m,this.engine=T,this._zone=x,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,T.onRemovalComplete=(U,J)=>{const ee=J?.parentNode(U);ee&&J.removeChild(ee,U)}}createRenderer(m,T){const U=this.delegate.createRenderer(m,T);if(!(m&&T&&T.data&&T.data.animation)){let st=this._rendererCache.get(U);return st||(st=new tl("",U,this.engine,()=>this._rendererCache.delete(U)),this._rendererCache.set(U,st)),st}const J=T.id,ee=T.id+"-"+this._currentId;this._currentId++,this.engine.register(ee,m);const le=st=>{Array.isArray(st)?st.forEach(le):this.engine.registerTrigger(J,ee,m,st.name,st)};return T.data.animation.forEach(le),new Ed(this,ee,U,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(m,T,x){m>=0&&m<this._microtaskId?this._zone.run(()=>T(x)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(U=>{const[J,ee]=U;J(ee)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([T,x]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(T){return new(T||v)(j.LFG(j.FYo),j.LFG(Hs),j.LFG(j.R0b))};static#t=this.\u0275prov=j.Yz7({token:v,factory:v.\u0275fac})}return v})();class tl{constructor(h,m,T,x){this.namespaceId=h,this.delegate=m,this.engine=T,this._onDestroy=x}get data(){return this.delegate.data}destroyNode(h){this.delegate.destroyNode?.(h)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(h,m){return this.delegate.createElement(h,m)}createComment(h){return this.delegate.createComment(h)}createText(h){return this.delegate.createText(h)}appendChild(h,m){this.delegate.appendChild(h,m),this.engine.onInsert(this.namespaceId,m,h,!1)}insertBefore(h,m,T,x=!0){this.delegate.insertBefore(h,m,T),this.engine.onInsert(this.namespaceId,m,h,x)}removeChild(h,m,T){this.engine.onRemove(this.namespaceId,m,this.delegate)}selectRootElement(h,m){return this.delegate.selectRootElement(h,m)}parentNode(h){return this.delegate.parentNode(h)}nextSibling(h){return this.delegate.nextSibling(h)}setAttribute(h,m,T,x){this.delegate.setAttribute(h,m,T,x)}removeAttribute(h,m,T){this.delegate.removeAttribute(h,m,T)}addClass(h,m){this.delegate.addClass(h,m)}removeClass(h,m){this.delegate.removeClass(h,m)}setStyle(h,m,T,x){this.delegate.setStyle(h,m,T,x)}removeStyle(h,m,T){this.delegate.removeStyle(h,m,T)}setProperty(h,m,T){"@"==m.charAt(0)&&m==gc?this.disableAnimations(h,!!T):this.delegate.setProperty(h,m,T)}setValue(h,m){this.delegate.setValue(h,m)}listen(h,m,T){return this.delegate.listen(h,m,T)}disableAnimations(h,m){this.engine.disableAnimations(h,m)}}class Ed extends tl{constructor(h,m,T,x,U){super(m,T,x,U),this.factory=h,this.namespaceId=m}setProperty(h,m,T){"@"==m.charAt(0)?"."==m.charAt(1)&&m==gc?this.disableAnimations(h,T=void 0===T||!!T):this.engine.process(this.namespaceId,h,m.slice(1),T):this.delegate.setProperty(h,m,T)}listen(h,m,T){if("@"==m.charAt(0)){const x=function Ol(v){switch(v){case"body":return document.body;case"document":return document;case"window":return window;default:return v}}(h);let U=m.slice(1),J="";return"@"!=U.charAt(0)&&([U,J]=function Fc(v){const h=v.indexOf(".");return[v.substring(0,h),v.slice(h+1)]}(U)),this.engine.listen(this.namespaceId,x,U,J,ee=>{this.factory.scheduleListenerCallback(ee._data||-1,T,ee)})}return this.delegate.listen(h,m,T)}}const Id=[{provide:sr._j,useClass:Lc},{provide:xi,useFactory:function Nl(){return new ku}},{provide:Hs,useClass:(()=>{class v extends Hs{constructor(m,T,x,U){super(m.body,T,x)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(T){return new(T||v)(j.LFG(me.K0),j.LFG(cs),j.LFG(xi),j.LFG(j.z2F))};static#t=this.\u0275prov=j.Yz7({token:v,factory:v.\u0275fac})}return v})()},{provide:j.FYo,useFactory:function Uf(v,h,m){return new pa(v,h,m)},deps:[D.se,Hs,j.R0b]}],ja=[{provide:cs,useFactory:()=>new fa},{provide:j.QbO,useValue:"BrowserAnimations"},...Id],Xi=[{provide:cs,useClass:Oa},{provide:j.QbO,useValue:"NoopAnimations"},...Id];let Td=(()=>{class v{static withConfig(m){return{ngModule:v,providers:m.disableAnimations?Xi:ja}}static#e=this.\u0275fac=function(T){return new(T||v)};static#t=this.\u0275mod=j.oAB({type:v});static#n=this.\u0275inj=j.cJS({providers:ja,imports:[D.b2]})}return v})(),nl=(()=>{class v extends se.eV{constructor(m){super(),this.title=m}updateTitle(m){const T=this.buildTitle(m);this.title.setTitle(T?`PlanningPoker - ${T}`:"PlanningPoker")}static#e=this.\u0275fac=function(T){return new(T||v)(j.LFG(D.Dx))};static#t=this.\u0275prov=j.Yz7({token:v,factory:v.\u0275fac})}return v})();const vs={apiKey:"AIzaSyBxcb1o6HFEHy-RwZevt909OKSOqEpvW-g",authDomain:"planning-poker-cd302.firebaseapp.com",projectId:"planning-poker-cd302",storageBucket:"planning-poker-cd302.appspot.com",messagingSenderId:"903421093759",appId:"1:903421093759:web:79ee181c62d36ca5d09c4a"};let mc=(()=>{class v{static#e=this.\u0275fac=function(T){return new(T||v)};static#t=this.\u0275mod=j.oAB({type:v,bootstrap:[nt]});static#n=this.\u0275inj=j.cJS({providers:[{provide:se.eV,useClass:nl}],imports:[D.b2,Td,me.ez,et,ct,ru.PagesModule,pt.m,Nt.hO.initializeApp(vs),pe.yb,Te.ww,ms,pt.m]})}return v})();D.q6().bootstrapModule(mc).catch(v=>console.error(v))},5619:(Ft,He,$)=>{$.d(He,{X:()=>se});var D=$(8645);class se extends D.x{constructor(Te){super(),this._value=Te}get value(){return this.getValue()}_subscribe(Te){const me=super._subscribe(Te);return!me.closed&&Te.next(this._value),me}getValue(){const{hasError:Te,thrownError:me,_value:ye}=this;if(Te)throw me;return this._throwIfClosed(),ye}next(Te){super.next(this._value=Te)}}},5592:(Ft,He,$)=>{$.d(He,{y:()=>V});var D=$(305),se=$(7394),j=$(4850),Te=$(8407),me=$(2653),ye=$(4674),Se=$(1441);let V=(()=>{class ve{constructor(Ge){Ge&&(this._subscribe=Ge)}lift(Ge){const et=new ve;return et.source=this,et.operator=Ge,et}subscribe(Ge,et,nt){const pt=function ae(ve){return ve&&ve instanceof D.Lv||function ie(ve){return ve&&(0,ye.m)(ve.next)&&(0,ye.m)(ve.error)&&(0,ye.m)(ve.complete)}(ve)&&(0,se.Nn)(ve)}(Ge)?Ge:new D.Hp(Ge,et,nt);return(0,Se.x)(()=>{const{operator:ct,source:Nt}=this;pt.add(ct?ct.call(pt,Nt):Nt?this._subscribe(pt):this._trySubscribe(pt))}),pt}_trySubscribe(Ge){try{return this._subscribe(Ge)}catch(et){Ge.error(et)}}forEach(Ge,et){return new(et=ke(et))((nt,pt)=>{const ct=new D.Hp({next:Nt=>{try{Ge(Nt)}catch(pe){pt(pe),ct.unsubscribe()}},error:pt,complete:nt});this.subscribe(ct)})}_subscribe(Ge){var et;return null===(et=this.source)||void 0===et?void 0:et.subscribe(Ge)}[j.L](){return this}pipe(...Ge){return(0,Te.U)(Ge)(this)}toPromise(Ge){return new(Ge=ke(Ge))((et,nt)=>{let pt;this.subscribe(ct=>pt=ct,ct=>nt(ct),()=>et(pt))})}}return ve.create=rt=>new ve(rt),ve})();function ke(ve){var rt;return null!==(rt=ve??me.config.Promise)&&void 0!==rt?rt:Promise}},8645:(Ft,He,$)=>{$.d(He,{x:()=>Se});var D=$(5592),se=$(7394);const Te=(0,$(2306).d)(ke=>function(){ke(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var me=$(9039),ye=$(1441);let Se=(()=>{class ke extends D.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ae){const ve=new V(this,this);return ve.operator=ae,ve}_throwIfClosed(){if(this.closed)throw new Te}next(ae){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ve of this.currentObservers)ve.next(ae)}})}error(ae){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ae;const{observers:ve}=this;for(;ve.length;)ve.shift().error(ae)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ae}=this;for(;ae.length;)ae.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ae;return(null===(ae=this.observers)||void 0===ae?void 0:ae.length)>0}_trySubscribe(ae){return this._throwIfClosed(),super._trySubscribe(ae)}_subscribe(ae){return this._throwIfClosed(),this._checkFinalizedStatuses(ae),this._innerSubscribe(ae)}_innerSubscribe(ae){const{hasError:ve,isStopped:rt,observers:Ge}=this;return ve||rt?se.Lc:(this.currentObservers=null,Ge.push(ae),new se.w0(()=>{this.currentObservers=null,(0,me.P)(Ge,ae)}))}_checkFinalizedStatuses(ae){const{hasError:ve,thrownError:rt,isStopped:Ge}=this;ve?ae.error(rt):Ge&&ae.complete()}asObservable(){const ae=new D.y;return ae.source=this,ae}}return ke.create=(ie,ae)=>new V(ie,ae),ke})();class V extends Se{constructor(ie,ae){super(),this.destination=ie,this.source=ae}next(ie){var ae,ve;null===(ve=null===(ae=this.destination)||void 0===ae?void 0:ae.next)||void 0===ve||ve.call(ae,ie)}error(ie){var ae,ve;null===(ve=null===(ae=this.destination)||void 0===ae?void 0:ae.error)||void 0===ve||ve.call(ae,ie)}complete(){var ie,ae;null===(ae=null===(ie=this.destination)||void 0===ie?void 0:ie.complete)||void 0===ae||ae.call(ie)}_subscribe(ie){var ae,ve;return null!==(ve=null===(ae=this.source)||void 0===ae?void 0:ae.subscribe(ie))&&void 0!==ve?ve:se.Lc}}},305:(Ft,He,$)=>{$.d(He,{Hp:()=>nt,Lv:()=>ve});var D=$(4674),se=$(7394),j=$(2653),Te=$(3894),me=$(2420);const ye=ke("C",void 0,void 0);function ke(re,Fe,Ee){return{kind:re,value:Fe,error:Ee}}var ie=$(7599),ae=$(1441);class ve extends se.w0{constructor(Fe){super(),this.isStopped=!1,Fe?(this.destination=Fe,(0,se.Nn)(Fe)&&Fe.add(this)):this.destination=pe}static create(Fe,Ee,Ue){return new nt(Fe,Ee,Ue)}next(Fe){this.isStopped?Nt(function V(re){return ke("N",re,void 0)}(Fe),this):this._next(Fe)}error(Fe){this.isStopped?Nt(function Se(re){return ke("E",void 0,re)}(Fe),this):(this.isStopped=!0,this._error(Fe))}complete(){this.isStopped?Nt(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Fe){this.destination.next(Fe)}_error(Fe){try{this.destination.error(Fe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const rt=Function.prototype.bind;function Ge(re,Fe){return rt.call(re,Fe)}class et{constructor(Fe){this.partialObserver=Fe}next(Fe){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(Fe)}catch(Ue){pt(Ue)}}error(Fe){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(Fe)}catch(Ue){pt(Ue)}else pt(Fe)}complete(){const{partialObserver:Fe}=this;if(Fe.complete)try{Fe.complete()}catch(Ee){pt(Ee)}}}class nt extends ve{constructor(Fe,Ee,Ue){let Ze;if(super(),(0,D.m)(Fe)||!Fe)Ze={next:Fe??void 0,error:Ee??void 0,complete:Ue??void 0};else{let ot;this&&j.config.useDeprecatedNextContext?(ot=Object.create(Fe),ot.unsubscribe=()=>this.unsubscribe(),Ze={next:Fe.next&&Ge(Fe.next,ot),error:Fe.error&&Ge(Fe.error,ot),complete:Fe.complete&&Ge(Fe.complete,ot)}):Ze=Fe}this.destination=new et(Ze)}}function pt(re){j.config.useDeprecatedSynchronousErrorHandling?(0,ae.O)(re):(0,Te.h)(re)}function Nt(re,Fe){const{onStoppedNotification:Ee}=j.config;Ee&&ie.z.setTimeout(()=>Ee(re,Fe))}const pe={closed:!0,next:me.Z,error:function ct(re){throw re},complete:me.Z}},7394:(Ft,He,$)=>{$.d(He,{Lc:()=>ye,w0:()=>me,Nn:()=>Se});var D=$(4674);const j=(0,$(2306).d)(ke=>function(ae){ke(this),this.message=ae?`${ae.length} errors occurred during unsubscription:\n${ae.map((ve,rt)=>`${rt+1}) ${ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ae});var Te=$(9039);class me{constructor(ie){this.initialTeardown=ie,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ie;if(!this.closed){this.closed=!0;const{_parentage:ae}=this;if(ae)if(this._parentage=null,Array.isArray(ae))for(const Ge of ae)Ge.remove(this);else ae.remove(this);const{initialTeardown:ve}=this;if((0,D.m)(ve))try{ve()}catch(Ge){ie=Ge instanceof j?Ge.errors:[Ge]}const{_finalizers:rt}=this;if(rt){this._finalizers=null;for(const Ge of rt)try{V(Ge)}catch(et){ie=ie??[],et instanceof j?ie=[...ie,...et.errors]:ie.push(et)}}if(ie)throw new j(ie)}}add(ie){var ae;if(ie&&ie!==this)if(this.closed)V(ie);else{if(ie instanceof me){if(ie.closed||ie._hasParent(this))return;ie._addParent(this)}(this._finalizers=null!==(ae=this._finalizers)&&void 0!==ae?ae:[]).push(ie)}}_hasParent(ie){const{_parentage:ae}=this;return ae===ie||Array.isArray(ae)&&ae.includes(ie)}_addParent(ie){const{_parentage:ae}=this;this._parentage=Array.isArray(ae)?(ae.push(ie),ae):ae?[ae,ie]:ie}_removeParent(ie){const{_parentage:ae}=this;ae===ie?this._parentage=null:Array.isArray(ae)&&(0,Te.P)(ae,ie)}remove(ie){const{_finalizers:ae}=this;ae&&(0,Te.P)(ae,ie),ie instanceof me&&ie._removeParent(this)}}me.EMPTY=(()=>{const ke=new me;return ke.closed=!0,ke})();const ye=me.EMPTY;function Se(ke){return ke instanceof me||ke&&"closed"in ke&&(0,D.m)(ke.remove)&&(0,D.m)(ke.add)&&(0,D.m)(ke.unsubscribe)}function V(ke){(0,D.m)(ke)?ke():ke.unsubscribe()}},2653:(Ft,He,$)=>{$.d(He,{config:()=>D});const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(Ft,He,$)=>{$.d(He,{z:()=>me});var D=$(7537),j=$(4564),Te=$(2459);function me(...ye){return function se(){return(0,D.J)(1)}()((0,Te.D)(ye,(0,j.yG)(ye)))}},6232:(Ft,He,$)=>{$.d(He,{E:()=>se});const se=new($(5592).y)(me=>me.complete())},2459:(Ft,He,$)=>{$.d(He,{D:()=>Fe});var D=$(4829),se=$(3093),j=$(5137),ye=$(5592),V=$(4971),ke=$(4674),ie=$(7103);function ve(Ee,Ue){if(!Ee)throw new Error("Iterable cannot be null");return new ye.y(Ze=>{(0,ie.f)(Ze,Ue,()=>{const ot=Ee[Symbol.asyncIterator]();(0,ie.f)(Ze,Ue,()=>{ot.next().then(ue=>{ue.done?Ze.complete():Ze.next(ue.value)})},0,!0)})})}var rt=$(8382),Ge=$(4026),et=$(4266),nt=$(3664),pt=$(5726),ct=$(9853),Nt=$(541);function Fe(Ee,Ue){return Ue?function re(Ee,Ue){if(null!=Ee){if((0,rt.c)(Ee))return function Te(Ee,Ue){return(0,D.Xf)(Ee).pipe((0,j.R)(Ue),(0,se.Q)(Ue))}(Ee,Ue);if((0,et.z)(Ee))return function Se(Ee,Ue){return new ye.y(Ze=>{let ot=0;return Ue.schedule(function(){ot===Ee.length?Ze.complete():(Ze.next(Ee[ot++]),Ze.closed||this.schedule())})})}(Ee,Ue);if((0,Ge.t)(Ee))return function me(Ee,Ue){return(0,D.Xf)(Ee).pipe((0,j.R)(Ue),(0,se.Q)(Ue))}(Ee,Ue);if((0,pt.D)(Ee))return ve(Ee,Ue);if((0,nt.T)(Ee))return function ae(Ee,Ue){return new ye.y(Ze=>{let ot;return(0,ie.f)(Ze,Ue,()=>{ot=Ee[V.h](),(0,ie.f)(Ze,Ue,()=>{let ue,Gt;try{({value:ue,done:Gt}=ot.next())}catch(gt){return void Ze.error(gt)}Gt?Ze.complete():Ze.next(ue)},0,!0)}),()=>(0,ke.m)(ot?.return)&&ot.return()})}(Ee,Ue);if((0,Nt.L)(Ee))return function pe(Ee,Ue){return ve((0,Nt.Q)(Ee),Ue)}(Ee,Ue)}throw(0,ct.z)(Ee)}(Ee,Ue):(0,D.Xf)(Ee)}},4829:(Ft,He,$)=>{$.d(He,{Xf:()=>rt});var D=$(7582),se=$(4266),j=$(4026),Te=$(5592),me=$(8382),ye=$(5726),Se=$(9853),V=$(3664),ke=$(541),ie=$(4674),ae=$(3894),ve=$(4850);function rt(re){if(re instanceof Te.y)return re;if(null!=re){if((0,me.c)(re))return function Ge(re){return new Te.y(Fe=>{const Ee=re[ve.L]();if((0,ie.m)(Ee.subscribe))return Ee.subscribe(Fe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(re);if((0,se.z)(re))return function et(re){return new Te.y(Fe=>{for(let Ee=0;Ee<re.length&&!Fe.closed;Ee++)Fe.next(re[Ee]);Fe.complete()})}(re);if((0,j.t)(re))return function nt(re){return new Te.y(Fe=>{re.then(Ee=>{Fe.closed||(Fe.next(Ee),Fe.complete())},Ee=>Fe.error(Ee)).then(null,ae.h)})}(re);if((0,ye.D)(re))return ct(re);if((0,V.T)(re))return function pt(re){return new Te.y(Fe=>{for(const Ee of re)if(Fe.next(Ee),Fe.closed)return;Fe.complete()})}(re);if((0,ke.L)(re))return function Nt(re){return ct((0,ke.Q)(re))}(re)}throw(0,Se.z)(re)}function ct(re){return new Te.y(Fe=>{(function pe(re,Fe){var Ee,Ue,Ze,ot;return(0,D.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,D.KL)(re);!(Ue=yield Ee.next()).done;)if(Fe.next(Ue.value),Fe.closed)return}catch(ue){Ze={error:ue}}finally{try{Ue&&!Ue.done&&(ot=Ee.return)&&(yield ot.call(Ee))}finally{if(Ze)throw Ze.error}}Fe.complete()})})(re,Fe).catch(Ee=>Fe.error(Ee))})}},3019:(Ft,He,$)=>{$.d(He,{T:()=>ye});var D=$(7537),se=$(4829),j=$(6232),Te=$(4564),me=$(2459);function ye(...Se){const V=(0,Te.yG)(Se),ke=(0,Te._6)(Se,1/0),ie=Se;return ie.length?1===ie.length?(0,se.Xf)(ie[0]):(0,D.J)(ke)((0,me.D)(ie,V)):j.E}},2096:(Ft,He,$)=>{$.d(He,{of:()=>j});var D=$(4564),se=$(2459);function j(...Te){const me=(0,D.yG)(Te);return(0,se.D)(Te,me)}},8251:(Ft,He,$)=>{$.d(He,{x:()=>se});var D=$(305);function se(Te,me,ye,Se,V){return new j(Te,me,ye,Se,V)}class j extends D.Lv{constructor(me,ye,Se,V,ke,ie){super(me),this.onFinalize=ke,this.shouldUnsubscribe=ie,this._next=ye?function(ae){try{ye(ae)}catch(ve){me.error(ve)}}:super._next,this._error=V?function(ae){try{V(ae)}catch(ve){me.error(ve)}finally{this.unsubscribe()}}:super._error,this._complete=Se?function(){try{Se()}catch(ae){me.error(ae)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var me;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(me=this.onFinalize)||void 0===me||me.call(this))}}}},3572:(Ft,He,$)=>{$.d(He,{d:()=>j});var D=$(9360),se=$(8251);function j(Te){return(0,D.e)((me,ye)=>{let Se=!1;me.subscribe((0,se.x)(ye,V=>{Se=!0,ye.next(V)},()=>{Se||ye.next(Te),ye.complete()}))})}},3997:(Ft,He,$)=>{$.d(He,{x:()=>Te});var D=$(2737),se=$(9360),j=$(8251);function Te(ye,Se=D.y){return ye=ye??me,(0,se.e)((V,ke)=>{let ie,ae=!0;V.subscribe((0,j.x)(ke,ve=>{const rt=Se(ve);(ae||!ye(ie,rt))&&(ae=!1,ie=rt,ke.next(ve))}))})}function me(ye,Se){return ye===Se}},2181:(Ft,He,$)=>{$.d(He,{h:()=>j});var D=$(9360),se=$(8251);function j(Te,me){return(0,D.e)((ye,Se)=>{let V=0;ye.subscribe((0,se.x)(Se,ke=>Te.call(me,ke,V++)&&Se.next(ke)))})}},1374:(Ft,He,$)=>{$.d(He,{P:()=>Se});var D=$(6973),se=$(2181),j=$(8180),Te=$(3572),me=$(3026),ye=$(2737);function Se(V,ke){const ie=arguments.length>=2;return ae=>ae.pipe(V?(0,se.h)((ve,rt)=>V(ve,rt,ae)):ye.y,(0,j.q)(1),ie?(0,Te.d)(ke):(0,me.T)(()=>new D.K))}},7398:(Ft,He,$)=>{$.d(He,{U:()=>j});var D=$(9360),se=$(8251);function j(Te,me){return(0,D.e)((ye,Se)=>{let V=0;ye.subscribe((0,se.x)(Se,ke=>{Se.next(Te.call(me,ke,V++))}))})}},7537:(Ft,He,$)=>{$.d(He,{J:()=>j});var D=$(1631),se=$(2737);function j(Te=1/0){return(0,D.z)(se.y,Te)}},1631:(Ft,He,$)=>{$.d(He,{z:()=>V});var D=$(7398),se=$(4829),j=$(9360),Te=$(7103),me=$(8251),Se=$(4674);function V(ke,ie,ae=1/0){return(0,Se.m)(ie)?V((ve,rt)=>(0,D.U)((Ge,et)=>ie(ve,Ge,rt,et))((0,se.Xf)(ke(ve,rt))),ae):("number"==typeof ie&&(ae=ie),(0,j.e)((ve,rt)=>function ye(ke,ie,ae,ve,rt,Ge,et,nt){const pt=[];let ct=0,Nt=0,pe=!1;const re=()=>{pe&&!pt.length&&!ct&&ie.complete()},Fe=Ue=>ct<ve?Ee(Ue):pt.push(Ue),Ee=Ue=>{Ge&&ie.next(Ue),ct++;let Ze=!1;(0,se.Xf)(ae(Ue,Nt++)).subscribe((0,me.x)(ie,ot=>{rt?.(ot),Ge?Fe(ot):ie.next(ot)},()=>{Ze=!0},void 0,()=>{if(Ze)try{for(ct--;pt.length&&ct<ve;){const ot=pt.shift();et?(0,Te.f)(ie,et,()=>Ee(ot)):Ee(ot)}re()}catch(ot){ie.error(ot)}}))};return ke.subscribe((0,me.x)(ie,Fe,()=>{pe=!0,re()})),()=>{nt?.()}}(ve,rt,ke,ae)))}},3093:(Ft,He,$)=>{$.d(He,{Q:()=>Te});var D=$(7103),se=$(9360),j=$(8251);function Te(me,ye=0){return(0,se.e)((Se,V)=>{Se.subscribe((0,j.x)(V,ke=>(0,D.f)(V,me,()=>V.next(ke),ye),()=>(0,D.f)(V,me,()=>V.complete(),ye),ke=>(0,D.f)(V,me,()=>V.error(ke),ye)))})}},6699:(Ft,He,$)=>{$.d(He,{R:()=>Te});var D=$(9360),se=$(8251);function Te(me,ye){return(0,D.e)(function j(me,ye,Se,V,ke){return(ie,ae)=>{let ve=Se,rt=ye,Ge=0;ie.subscribe((0,se.x)(ae,et=>{const nt=Ge++;rt=ve?me(rt,et,nt):(ve=!0,et),V&&ae.next(rt)},ke&&(()=>{ve&&ae.next(rt),ae.complete()})))}}(me,ye,arguments.length>=2,!0))}},3020:(Ft,He,$)=>{$.d(He,{B:()=>me});var D=$(4829),se=$(8645),j=$(305),Te=$(9360);function me(Se={}){const{connector:V=(()=>new se.x),resetOnError:ke=!0,resetOnComplete:ie=!0,resetOnRefCountZero:ae=!0}=Se;return ve=>{let rt,Ge,et,nt=0,pt=!1,ct=!1;const Nt=()=>{Ge?.unsubscribe(),Ge=void 0},pe=()=>{Nt(),rt=et=void 0,pt=ct=!1},re=()=>{const Fe=rt;pe(),Fe?.unsubscribe()};return(0,Te.e)((Fe,Ee)=>{nt++,!ct&&!pt&&Nt();const Ue=et=et??V();Ee.add(()=>{nt--,0===nt&&!ct&&!pt&&(Ge=ye(re,ae))}),Ue.subscribe(Ee),!rt&&nt>0&&(rt=new j.Hp({next:Ze=>Ue.next(Ze),error:Ze=>{ct=!0,Nt(),Ge=ye(pe,ke,Ze),Ue.error(Ze)},complete:()=>{pt=!0,Nt(),Ge=ye(pe,ie),Ue.complete()}}),(0,D.Xf)(Fe).subscribe(rt))})(ve)}}function ye(Se,V,...ke){if(!0===V)return void Se();if(!1===V)return;const ie=new j.Hp({next:()=>{ie.unsubscribe(),Se()}});return(0,D.Xf)(V(...ke)).subscribe(ie)}},7921:(Ft,He,$)=>{$.d(He,{O:()=>Te});var D=$(5211),se=$(4564),j=$(9360);function Te(...me){const ye=(0,se.yG)(me);return(0,j.e)((Se,V)=>{(ye?(0,D.z)(me,Se,ye):(0,D.z)(me,Se)).subscribe(V)})}},5137:(Ft,He,$)=>{$.d(He,{R:()=>se});var D=$(9360);function se(j,Te=0){return(0,D.e)((me,ye)=>{ye.add(j.schedule(()=>me.subscribe(ye),Te))})}},4664:(Ft,He,$)=>{$.d(He,{w:()=>Te});var D=$(4829),se=$(9360),j=$(8251);function Te(me,ye){return(0,se.e)((Se,V)=>{let ke=null,ie=0,ae=!1;const ve=()=>ae&&!ke&&V.complete();Se.subscribe((0,j.x)(V,rt=>{ke?.unsubscribe();let Ge=0;const et=ie++;(0,D.Xf)(me(rt,et)).subscribe(ke=(0,j.x)(V,nt=>V.next(ye?ye(rt,nt,et,Ge++):nt),()=>{ke=null,ve()}))},()=>{ae=!0,ve()}))})}},8180:(Ft,He,$)=>{$.d(He,{q:()=>Te});var D=$(6232),se=$(9360),j=$(8251);function Te(me){return me<=0?()=>D.E:(0,se.e)((ye,Se)=>{let V=0;ye.subscribe((0,j.x)(Se,ke=>{++V<=me&&(Se.next(ke),me<=V&&Se.complete())}))})}},9397:(Ft,He,$)=>{$.d(He,{b:()=>me});var D=$(4674),se=$(9360),j=$(8251),Te=$(2737);function me(ye,Se,V){const ke=(0,D.m)(ye)||Se||V?{next:ye,error:Se,complete:V}:ye;return ke?(0,se.e)((ie,ae)=>{var ve;null===(ve=ke.subscribe)||void 0===ve||ve.call(ke);let rt=!0;ie.subscribe((0,j.x)(ae,Ge=>{var et;null===(et=ke.next)||void 0===et||et.call(ke,Ge),ae.next(Ge)},()=>{var Ge;rt=!1,null===(Ge=ke.complete)||void 0===Ge||Ge.call(ke),ae.complete()},Ge=>{var et;rt=!1,null===(et=ke.error)||void 0===et||et.call(ke,Ge),ae.error(Ge)},()=>{var Ge,et;rt&&(null===(Ge=ke.unsubscribe)||void 0===Ge||Ge.call(ke)),null===(et=ke.finalize)||void 0===et||et.call(ke)}))}):Te.y}},3026:(Ft,He,$)=>{$.d(He,{T:()=>Te});var D=$(6973),se=$(9360),j=$(8251);function Te(ye=me){return(0,se.e)((Se,V)=>{let ke=!1;Se.subscribe((0,j.x)(V,ie=>{ke=!0,V.next(ie)},()=>ke?V.complete():V.error(ye())))})}function me(){return new D.K}},1954:(Ft,He,$)=>{$.d(He,{o:()=>me});var D=$(7394);class se extends D.w0{constructor(Se,V){super()}schedule(Se,V=0){return this}}const j={setInterval(ye,Se,...V){const{delegate:ke}=j;return ke?.setInterval?ke.setInterval(ye,Se,...V):setInterval(ye,Se,...V)},clearInterval(ye){const{delegate:Se}=j;return(Se?.clearInterval||clearInterval)(ye)},delegate:void 0};var Te=$(9039);class me extends se{constructor(Se,V){super(Se,V),this.scheduler=Se,this.work=V,this.pending=!1}schedule(Se,V=0){var ke;if(this.closed)return this;this.state=Se;const ie=this.id,ae=this.scheduler;return null!=ie&&(this.id=this.recycleAsyncId(ae,ie,V)),this.pending=!0,this.delay=V,this.id=null!==(ke=this.id)&&void 0!==ke?ke:this.requestAsyncId(ae,this.id,V),this}requestAsyncId(Se,V,ke=0){return j.setInterval(Se.flush.bind(Se,this),ke)}recycleAsyncId(Se,V,ke=0){if(null!=ke&&this.delay===ke&&!1===this.pending)return V;null!=V&&j.clearInterval(V)}execute(Se,V){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ke=this._execute(Se,V);if(ke)return ke;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Se,V){let ie,ke=!1;try{this.work(Se)}catch(ae){ke=!0,ie=ae||new Error("Scheduled action threw falsy error")}if(ke)return this.unsubscribe(),ie}unsubscribe(){if(!this.closed){const{id:Se,scheduler:V}=this,{actions:ke}=V;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Te.P)(ke,this),null!=Se&&(this.id=this.recycleAsyncId(V,Se,null)),this.delay=null,super.unsubscribe()}}}},2631:(Ft,He,$)=>{$.d(He,{v:()=>j});var D=$(4552);class se{constructor(me,ye=se.now){this.schedulerActionCtor=me,this.now=ye}schedule(me,ye=0,Se){return new this.schedulerActionCtor(this,me).schedule(Se,ye)}}se.now=D.l.now;class j extends se{constructor(me,ye=se.now){super(me,ye),this.actions=[],this._active=!1}flush(me){const{actions:ye}=this;if(this._active)return void ye.push(me);let Se;this._active=!0;do{if(Se=me.execute(me.state,me.delay))break}while(me=ye.shift());if(this._active=!1,Se){for(;me=ye.shift();)me.unsubscribe();throw Se}}}},6321:(Ft,He,$)=>{$.d(He,{z:()=>j});var D=$(1954);const j=new($(2631).v)(D.o)},4552:(Ft,He,$)=>{$.d(He,{l:()=>D});const D={now:()=>(D.delegate||Date).now(),delegate:void 0}},7599:(Ft,He,$)=>{$.d(He,{z:()=>D});const D={setTimeout(se,j,...Te){const{delegate:me}=D;return me?.setTimeout?me.setTimeout(se,j,...Te):setTimeout(se,j,...Te)},clearTimeout(se){const{delegate:j}=D;return(j?.clearTimeout||clearTimeout)(se)},delegate:void 0}},4971:(Ft,He,$)=>{$.d(He,{h:()=>se});const se=function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Ft,He,$)=>{$.d(He,{L:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(Ft,He,$)=>{$.d(He,{K:()=>se});const se=(0,$(2306).d)(j=>function(){j(this),this.name="EmptyError",this.message="no elements in sequence"})},4564:(Ft,He,$)=>{$.d(He,{_6:()=>ye,jO:()=>Te,yG:()=>me});var D=$(4674);function j(Se){return Se[Se.length-1]}function Te(Se){return(0,D.m)(j(Se))?Se.pop():void 0}function me(Se){return function se(Se){return Se&&(0,D.m)(Se.schedule)}(j(Se))?Se.pop():void 0}function ye(Se,V){return"number"==typeof j(Se)?Se.pop():V}},9039:(Ft,He,$)=>{function D(se,j){if(se){const Te=se.indexOf(j);0<=Te&&se.splice(Te,1)}}$.d(He,{P:()=>D})},2306:(Ft,He,$)=>{function D(se){const Te=se(me=>{Error.call(me),me.stack=(new Error).stack});return Te.prototype=Object.create(Error.prototype),Te.prototype.constructor=Te,Te}$.d(He,{d:()=>D})},1441:(Ft,He,$)=>{$.d(He,{O:()=>Te,x:()=>j});var D=$(2653);let se=null;function j(me){if(D.config.useDeprecatedSynchronousErrorHandling){const ye=!se;if(ye&&(se={errorThrown:!1,error:null}),me(),ye){const{errorThrown:Se,error:V}=se;if(se=null,Se)throw V}}else me()}function Te(me){D.config.useDeprecatedSynchronousErrorHandling&&se&&(se.errorThrown=!0,se.error=me)}},7103:(Ft,He,$)=>{function D(se,j,Te,me=0,ye=!1){const Se=j.schedule(function(){Te(),ye?se.add(this.schedule(null,me)):this.unsubscribe()},me);if(se.add(Se),!ye)return Se}$.d(He,{f:()=>D})},2737:(Ft,He,$)=>{function D(se){return se}$.d(He,{y:()=>D})},4266:(Ft,He,$)=>{$.d(He,{z:()=>D});const D=se=>se&&"number"==typeof se.length&&"function"!=typeof se},5726:(Ft,He,$)=>{$.d(He,{D:()=>se});var D=$(4674);function se(j){return Symbol.asyncIterator&&(0,D.m)(j?.[Symbol.asyncIterator])}},4674:(Ft,He,$)=>{function D(se){return"function"==typeof se}$.d(He,{m:()=>D})},8382:(Ft,He,$)=>{$.d(He,{c:()=>j});var D=$(4850),se=$(4674);function j(Te){return(0,se.m)(Te[D.L])}},3664:(Ft,He,$)=>{$.d(He,{T:()=>j});var D=$(4971),se=$(4674);function j(Te){return(0,se.m)(Te?.[D.h])}},4026:(Ft,He,$)=>{$.d(He,{t:()=>se});var D=$(4674);function se(j){return(0,D.m)(j?.then)}},541:(Ft,He,$)=>{$.d(He,{L:()=>Te,Q:()=>j});var D=$(7582),se=$(4674);function j(me){return(0,D.FC)(this,arguments,function*(){const Se=me.getReader();try{for(;;){const{value:V,done:ke}=yield(0,D.qq)(Se.read());if(ke)return yield(0,D.qq)(void 0);yield yield(0,D.qq)(V)}}finally{Se.releaseLock()}})}function Te(me){return(0,se.m)(me?.getReader)}},9360:(Ft,He,$)=>{$.d(He,{A:()=>se,e:()=>j});var D=$(4674);function se(Te){return(0,D.m)(Te?.lift)}function j(Te){return me=>{if(se(me))return me.lift(function(ye){try{return Te(ye,this)}catch(Se){this.error(Se)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(Ft,He,$)=>{function D(){}$.d(He,{Z:()=>D})},8407:(Ft,He,$)=>{$.d(He,{U:()=>j,z:()=>se});var D=$(2737);function se(...Te){return j(Te)}function j(Te){return 0===Te.length?D.y:1===Te.length?Te[0]:function(ye){return Te.reduce((Se,V)=>V(Se),ye)}}},3894:(Ft,He,$)=>{$.d(He,{h:()=>j});var D=$(2653),se=$(7599);function j(Te){se.z.setTimeout(()=>{const{onUnhandledError:me}=D.config;if(!me)throw Te;me(Te)})}},9853:(Ft,He,$)=>{function D(se){return new TypeError(`You provided ${null!==se&&"object"==typeof se?"an invalid object":`'${se}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}$.d(He,{z:()=>D})},6825:(Ft,He,$)=>{$.d(He,{LC:()=>se,SB:()=>ke,X$:()=>Te,ZE:()=>ct,ZN:()=>pt,_j:()=>D,eR:()=>ae,jt:()=>me,k1:()=>Nt,l3:()=>j,oB:()=>V,vP:()=>Se});class D{}class se{}const j="*";function Te(pe,re){return{type:7,name:pe,definitions:re,options:{}}}function me(pe,re=null){return{type:4,styles:re,timings:pe}}function Se(pe,re=null){return{type:2,steps:pe,options:re}}function V(pe){return{type:6,styles:pe,offset:null}}function ke(pe,re,Fe){return{type:0,name:pe,styles:re,options:Fe}}function ae(pe,re,Fe=null){return{type:1,expr:pe,animation:re,options:Fe}}class pt{constructor(re=0,Fe=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=re+Fe}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(re=>re()),this._onDoneFns=[])}onStart(re){this._originalOnStartFns.push(re),this._onStartFns.push(re)}onDone(re){this._originalOnDoneFns.push(re),this._onDoneFns.push(re)}onDestroy(re){this._onDestroyFns.push(re)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(re=>re()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(re=>re()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(re){this._position=this.totalTime?re*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(re){const Fe="start"==re?this._onStartFns:this._onDoneFns;Fe.forEach(Ee=>Ee()),Fe.length=0}}class ct{constructor(re){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=re;let Fe=0,Ee=0,Ue=0;const Ze=this.players.length;0==Ze?queueMicrotask(()=>this._onFinish()):this.players.forEach(ot=>{ot.onDone(()=>{++Fe==Ze&&this._onFinish()}),ot.onDestroy(()=>{++Ee==Ze&&this._onDestroy()}),ot.onStart(()=>{++Ue==Ze&&this._onStart()})}),this.totalTime=this.players.reduce((ot,ue)=>Math.max(ot,ue.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(re=>re()),this._onDoneFns=[])}init(){this.players.forEach(re=>re.init())}onStart(re){this._onStartFns.push(re)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(re=>re()),this._onStartFns=[])}onDone(re){this._onDoneFns.push(re)}onDestroy(re){this._onDestroyFns.push(re)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(re=>re.play())}pause(){this.players.forEach(re=>re.pause())}restart(){this.players.forEach(re=>re.restart())}finish(){this._onFinish(),this.players.forEach(re=>re.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(re=>re.destroy()),this._onDestroyFns.forEach(re=>re()),this._onDestroyFns=[])}reset(){this.players.forEach(re=>re.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(re){const Fe=re*this.totalTime;this.players.forEach(Ee=>{const Ue=Ee.totalTime?Math.min(1,Fe/Ee.totalTime):1;Ee.setPosition(Ue)})}getPosition(){const re=this.players.reduce((Fe,Ee)=>null===Fe||Ee.totalTime>Fe.totalTime?Ee:Fe,null);return null!=re?re.getPosition():0}beforeDestroy(){this.players.forEach(re=>{re.beforeDestroy&&re.beforeDestroy()})}triggerCallback(re){const Fe="start"==re?this._onStartFns:this._onDoneFns;Fe.forEach(Ee=>Ee()),Fe.length=0}}const Nt="!"},6814:(Ft,He,$)=>{$.d(He,{Do:()=>nt,EM:()=>Ds,HT:()=>Te,JF:()=>fs,K0:()=>ye,Mx:()=>di,O5:()=>ss,Ov:()=>Jo,PM:()=>po,S$:()=>rt,V_:()=>V,Ye:()=>pt,b0:()=>et,bD:()=>Tr,ez:()=>Js,mk:()=>Oo,q:()=>j,sg:()=>zn,w_:()=>me});var D=$(5879);let se=null;function j(){return se}function Te(A){se||(se=A)}class me{}const ye=new D.OlP("DocumentToken");let Se=(()=>{class A{historyGo(O){throw new Error("Not implemented")}static#e=this.\u0275fac=function(B){return new(B||A)};static#t=this.\u0275prov=D.Yz7({token:A,factory:function(){return(0,D.f3M)(ke)},providedIn:"platform"})}return A})();const V=new D.OlP("Location Initialized");let ke=(()=>{class A extends Se{constructor(){super(),this._doc=(0,D.f3M)(ye),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return j().getBaseHref(this._doc)}onPopState(O){const B=j().getGlobalEventTarget(this._doc,"window");return B.addEventListener("popstate",O,!1),()=>B.removeEventListener("popstate",O)}onHashChange(O){const B=j().getGlobalEventTarget(this._doc,"window");return B.addEventListener("hashchange",O,!1),()=>B.removeEventListener("hashchange",O)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(O){this._location.pathname=O}pushState(O,B,oe){this._history.pushState(O,B,oe)}replaceState(O,B,oe){this._history.replaceState(O,B,oe)}forward(){this._history.forward()}back(){this._history.back()}historyGo(O=0){this._history.go(O)}getState(){return this._history.state}static#e=this.\u0275fac=function(B){return new(B||A)};static#t=this.\u0275prov=D.Yz7({token:A,factory:function(){return new A},providedIn:"platform"})}return A})();function ie(A,H){if(0==A.length)return H;if(0==H.length)return A;let O=0;return A.endsWith("/")&&O++,H.startsWith("/")&&O++,2==O?A+H.substring(1):1==O?A+H:A+"/"+H}function ae(A){const H=A.match(/#|\?|$/),O=H&&H.index||A.length;return A.slice(0,O-("/"===A[O-1]?1:0))+A.slice(O)}function ve(A){return A&&"?"!==A[0]?"?"+A:A}let rt=(()=>{class A{historyGo(O){throw new Error("Not implemented")}static#e=this.\u0275fac=function(B){return new(B||A)};static#t=this.\u0275prov=D.Yz7({token:A,factory:function(){return(0,D.f3M)(et)},providedIn:"root"})}return A})();const Ge=new D.OlP("appBaseHref");let et=(()=>{class A extends rt{constructor(O,B){super(),this._platformLocation=O,this._removeListenerFns=[],this._baseHref=B??this._platformLocation.getBaseHrefFromDOM()??(0,D.f3M)(ye).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(O){this._removeListenerFns.push(this._platformLocation.onPopState(O),this._platformLocation.onHashChange(O))}getBaseHref(){return this._baseHref}prepareExternalUrl(O){return ie(this._baseHref,O)}path(O=!1){const B=this._platformLocation.pathname+ve(this._platformLocation.search),oe=this._platformLocation.hash;return oe&&O?`${B}${oe}`:B}pushState(O,B,oe,Be){const Ke=this.prepareExternalUrl(oe+ve(Be));this._platformLocation.pushState(O,B,Ke)}replaceState(O,B,oe,Be){const Ke=this.prepareExternalUrl(oe+ve(Be));this._platformLocation.replaceState(O,B,Ke)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(O=0){this._platformLocation.historyGo?.(O)}static#e=this.\u0275fac=function(B){return new(B||A)(D.LFG(Se),D.LFG(Ge,8))};static#t=this.\u0275prov=D.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})(),nt=(()=>{class A extends rt{constructor(O,B){super(),this._platformLocation=O,this._baseHref="",this._removeListenerFns=[],null!=B&&(this._baseHref=B)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(O){this._removeListenerFns.push(this._platformLocation.onPopState(O),this._platformLocation.onHashChange(O))}getBaseHref(){return this._baseHref}path(O=!1){let B=this._platformLocation.hash;return null==B&&(B="#"),B.length>0?B.substring(1):B}prepareExternalUrl(O){const B=ie(this._baseHref,O);return B.length>0?"#"+B:B}pushState(O,B,oe,Be){let Ke=this.prepareExternalUrl(oe+ve(Be));0==Ke.length&&(Ke=this._platformLocation.pathname),this._platformLocation.pushState(O,B,Ke)}replaceState(O,B,oe,Be){let Ke=this.prepareExternalUrl(oe+ve(Be));0==Ke.length&&(Ke=this._platformLocation.pathname),this._platformLocation.replaceState(O,B,Ke)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(O=0){this._platformLocation.historyGo?.(O)}static#e=this.\u0275fac=function(B){return new(B||A)(D.LFG(Se),D.LFG(Ge,8))};static#t=this.\u0275prov=D.Yz7({token:A,factory:A.\u0275fac})}return A})(),pt=(()=>{class A{constructor(O){this._subject=new D.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=O;const B=this._locationStrategy.getBaseHref();this._basePath=function re(A){if(new RegExp("^(https?:)?//").test(A)){const[,O]=A.split(/\/\/[^\/]+/);return O}return A}(ae(pe(B))),this._locationStrategy.onPopState(oe=>{this._subject.emit({url:this.path(!0),pop:!0,state:oe.state,type:oe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(O=!1){return this.normalize(this._locationStrategy.path(O))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(O,B=""){return this.path()==this.normalize(O+ve(B))}normalize(O){return A.stripTrailingSlash(function Nt(A,H){if(!A||!H.startsWith(A))return H;const O=H.substring(A.length);return""===O||["/",";","?","#"].includes(O[0])?O:H}(this._basePath,pe(O)))}prepareExternalUrl(O){return O&&"/"!==O[0]&&(O="/"+O),this._locationStrategy.prepareExternalUrl(O)}go(O,B="",oe=null){this._locationStrategy.pushState(oe,"",O,B),this._notifyUrlChangeListeners(this.prepareExternalUrl(O+ve(B)),oe)}replaceState(O,B="",oe=null){this._locationStrategy.replaceState(oe,"",O,B),this._notifyUrlChangeListeners(this.prepareExternalUrl(O+ve(B)),oe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(O=0){this._locationStrategy.historyGo?.(O)}onUrlChange(O){return this._urlChangeListeners.push(O),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(B=>{this._notifyUrlChangeListeners(B.url,B.state)})),()=>{const B=this._urlChangeListeners.indexOf(O);this._urlChangeListeners.splice(B,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(O="",B){this._urlChangeListeners.forEach(oe=>oe(O,B))}subscribe(O,B,oe){return this._subject.subscribe({next:O,error:B,complete:oe})}static#e=this.normalizeQueryParams=ve;static#t=this.joinWithSlash=ie;static#n=this.stripTrailingSlash=ae;static#r=this.\u0275fac=function(B){return new(B||A)(D.LFG(rt))};static#i=this.\u0275prov=D.Yz7({token:A,factory:function(){return function ct(){return new pt((0,D.LFG)(rt))}()},providedIn:"root"})}return A})();function pe(A){return A.replace(/\/index.html$/,"")}function di(A,H){H=encodeURIComponent(H);for(const O of A.split(";")){const B=O.indexOf("="),[oe,Be]=-1==B?[O,""]:[O.slice(0,B),O.slice(B+1)];if(oe.trim()===H)return decodeURIComponent(Be)}return null}const Li=/\s+/,Ko=[];let Oo=(()=>{class A{constructor(O,B,oe,Be){this._iterableDiffers=O,this._keyValueDiffers=B,this._ngEl=oe,this._renderer=Be,this.initialClasses=Ko,this.stateMap=new Map}set klass(O){this.initialClasses=null!=O?O.trim().split(Li):Ko}set ngClass(O){this.rawClass="string"==typeof O?O.trim().split(Li):O}ngDoCheck(){for(const B of this.initialClasses)this._updateState(B,!0);const O=this.rawClass;if(Array.isArray(O)||O instanceof Set)for(const B of O)this._updateState(B,!0);else if(null!=O)for(const B of Object.keys(O))this._updateState(B,!!O[B]);this._applyStateDiff()}_updateState(O,B){const oe=this.stateMap.get(O);void 0!==oe?(oe.enabled!==B&&(oe.changed=!0,oe.enabled=B),oe.touched=!0):this.stateMap.set(O,{enabled:B,changed:!0,touched:!0})}_applyStateDiff(){for(const O of this.stateMap){const B=O[0],oe=O[1];oe.changed?(this._toggleClass(B,oe.enabled),oe.changed=!1):oe.touched||(oe.enabled&&this._toggleClass(B,!1),this.stateMap.delete(B)),oe.touched=!1}}_toggleClass(O,B){(O=O.trim()).length>0&&O.split(Li).forEach(oe=>{B?this._renderer.addClass(this._ngEl.nativeElement,oe):this._renderer.removeClass(this._ngEl.nativeElement,oe)})}static#e=this.\u0275fac=function(B){return new(B||A)(D.Y36(D.ZZ4),D.Y36(D.aQg),D.Y36(D.SBq),D.Y36(D.Qsj))};static#t=this.\u0275dir=D.lG2({type:A,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return A})();class ho{constructor(H,O,B,oe){this.$implicit=H,this.ngForOf=O,this.index=B,this.count=oe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zn=(()=>{class A{set ngForOf(O){this._ngForOf=O,this._ngForOfDirty=!0}set ngForTrackBy(O){this._trackByFn=O}get ngForTrackBy(){return this._trackByFn}constructor(O,B,oe){this._viewContainer=O,this._template=B,this._differs=oe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(O){O&&(this._template=O)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const O=this._ngForOf;!this._differ&&O&&(this._differ=this._differs.find(O).create(this.ngForTrackBy))}if(this._differ){const O=this._differ.diff(this._ngForOf);O&&this._applyChanges(O)}}_applyChanges(O){const B=this._viewContainer;O.forEachOperation((oe,Be,Ke)=>{if(null==oe.previousIndex)B.createEmbeddedView(this._template,new ho(oe.item,this._ngForOf,-1,-1),null===Ke?void 0:Ke);else if(null==Ke)B.remove(null===Be?void 0:Be);else if(null!==Be){const Lt=B.get(Be);B.move(Lt,Ke),Qo(Lt,oe)}});for(let oe=0,Be=B.length;oe<Be;oe++){const Lt=B.get(oe).context;Lt.index=oe,Lt.count=Be,Lt.ngForOf=this._ngForOf}O.forEachIdentityChange(oe=>{Qo(B.get(oe.currentIndex),oe)})}static ngTemplateContextGuard(O,B){return!0}static#e=this.\u0275fac=function(B){return new(B||A)(D.Y36(D.s_b),D.Y36(D.Rgc),D.Y36(D.ZZ4))};static#t=this.\u0275dir=D.lG2({type:A,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return A})();function Qo(A,H){A.context.$implicit=H.item}let ss=(()=>{class A{constructor(O,B){this._viewContainer=O,this._context=new Ws,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=B}set ngIf(O){this._context.$implicit=this._context.ngIf=O,this._updateView()}set ngIfThen(O){No("ngIfThen",O),this._thenTemplateRef=O,this._thenViewRef=null,this._updateView()}set ngIfElse(O){No("ngIfElse",O),this._elseTemplateRef=O,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(O,B){return!0}static#e=this.\u0275fac=function(B){return new(B||A)(D.Y36(D.s_b),D.Y36(D.Rgc))};static#t=this.\u0275dir=D.lG2({type:A,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return A})();class Ws{constructor(){this.$implicit=null,this.ngIf=null}}function No(A,H){if(H&&!H.createEmbeddedView)throw new Error(`${A} must be a TemplateRef, but received '${(0,D.AaK)(H)}'.`)}class Ks{createSubscription(H,O){return(0,D.rg0)(()=>H.subscribe({next:O,error:B=>{throw B}}))}dispose(H){(0,D.rg0)(()=>H.unsubscribe())}}class Gi{createSubscription(H,O){return H.then(O,B=>{throw B})}dispose(H){}}const Zs=new Gi,fo=new Ks;let Jo=(()=>{class A{constructor(O){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=O}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(O){return this._obj?O!==this._obj?(this._dispose(),this.transform(O)):this._latestValue:(O&&this._subscribe(O),this._latestValue)}_subscribe(O){this._obj=O,this._strategy=this._selectStrategy(O),this._subscription=this._strategy.createSubscription(O,B=>this._updateLatestValue(O,B))}_selectStrategy(O){if((0,D.QGY)(O))return Zs;if((0,D.F4k)(O))return fo;throw function Er(A,H){return new D.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(O,B){O===this._obj&&(this._latestValue=B,this._ref.markForCheck())}static#e=this.\u0275fac=function(B){return new(B||A)(D.Y36(D.sBO,16))};static#t=this.\u0275pipe=D.Yjl({name:"async",type:A,pure:!1,standalone:!0})}return A})(),Js=(()=>{class A{static#e=this.\u0275fac=function(B){return new(B||A)};static#t=this.\u0275mod=D.oAB({type:A});static#n=this.\u0275inj=D.cJS({})}return A})();const Tr="browser",as="server";function po(A){return A===as}let Ds=(()=>{class A{static#e=this.\u0275prov=(0,D.Yz7)({token:A,providedIn:"root",factory:()=>new Kr((0,D.LFG)(ye),window)})}return A})();class Kr{constructor(H,O){this.document=H,this.window=O,this.offset=()=>[0,0]}setOffset(H){this.offset=Array.isArray(H)?()=>H:H}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(H){this.supportsScrolling()&&this.window.scrollTo(H[0],H[1])}scrollToAnchor(H){if(!this.supportsScrolling())return;const O=function Cs(A,H){const O=A.getElementById(H)||A.getElementsByName(H)[0];if(O)return O;if("function"==typeof A.createTreeWalker&&A.body&&"function"==typeof A.body.attachShadow){const B=A.createTreeWalker(A.body,NodeFilter.SHOW_ELEMENT);let oe=B.currentNode;for(;oe;){const Be=oe.shadowRoot;if(Be){const Ke=Be.getElementById(H)||Be.querySelector(`[name="${H}"]`);if(Ke)return Ke}oe=B.nextNode()}}return null}(this.document,H);O&&(this.scrollToElement(O),O.focus())}setHistoryScrollRestoration(H){this.supportsScrolling()&&(this.window.history.scrollRestoration=H)}scrollToElement(H){const O=H.getBoundingClientRect(),B=O.left+this.window.pageXOffset,oe=O.top+this.window.pageYOffset,Be=this.offset();this.window.scrollTo(B-Be[0],oe-Be[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class fs{}},5879:(Ft,He,$)=>{$.d(He,{$8M:()=>Lc,$WT:()=>Bs,$Z:()=>sd,AFp:()=>Gg,ALo:()=>KT,AaK:()=>ve,BQk:()=>ag,CHM:()=>Ur,CRH:()=>d0,EJc:()=>OC,EpF:()=>VE,F$t:()=>Yy,F4k:()=>Zy,FYo:()=>tf,FiY:()=>Br,Gf:()=>c0,GfV:()=>Ip,HDt:()=>N0,Hsn:()=>Jy,JOm:()=>$u,KtG:()=>_n,LFG:()=>Qt,LSH:()=>op,Lbi:()=>Wg,Lck:()=>yD,MAs:()=>zy,MMx:()=>kT,NdJ:()=>e_,Ojb:()=>q_,OlP:()=>kt,Oqu:()=>hg,P3R:()=>kg,PXZ:()=>uA,Q6J:()=>rg,QGY:()=>Xm,QbO:()=>qv,Qsj:()=>nf,R0b:()=>Is,RDi:()=>xh,Rgc:()=>D_,SBq:()=>Tc,Sil:()=>LC,Suo:()=>l0,TTD:()=>Yt,TgZ:()=>ig,VuI:()=>zA,W1O:()=>g0,X6Q:()=>mA,XFs:()=>Je,Xpm:()=>Gi,Xq5:()=>Hm,Xts:()=>Bh,Y36:()=>ml,YKP:()=>OT,YNc:()=>kE,Yjl:()=>Qs,Yz7:()=>Xt,Z0I:()=>Hn,ZZ4:()=>kI,_UZ:()=>Qm,_c5:()=>xA,_uU:()=>fv,aQg:()=>LI,c2e:()=>O0,cJS:()=>Dn,cg1:()=>nI,dDg:()=>iA,dqk:()=>Sn,eFA:()=>z0,eJc:()=>vI,eoX:()=>B0,f3M:()=>wt,g9A:()=>cp,h0i:()=>kf,hGG:()=>OA,iGM:()=>u0,ifc:()=>$t,ip1:()=>x0,jDz:()=>LT,kL8:()=>sT,lG2:()=>ri,lcZ:()=>ZT,lqb:()=>Ic,lri:()=>V0,n5z:()=>ro,oAB:()=>Wi,oxw:()=>HE,q4F:()=>Tp,qFp:()=>WA,qLn:()=>Dc,qOj:()=>zr,qZA:()=>sg,rWj:()=>U0,rg0:()=>Be,sBO:()=>_A,s_b:()=>Cv,soG:()=>Sv,tb:()=>RI,tp0:()=>Fr,uIk:()=>zm,vHH:()=>re,vpe:()=>vu,wAp:()=>gg,xp6:()=>xp,ynx:()=>og,z2F:()=>vg,zSh:()=>jg,zs3:()=>qu});var D=$(8645),se=$(7394),j=$(5592),Te=$(3019),me=$(5619),ye=$(2096),Se=$(3020),V=$(4664),ke=$(3997);function ie(t){for(let r in t)if(t[r]===ie)return r;throw Error("Could not find renamed property on target object.")}function ae(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function ve(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ve).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function rt(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const Ge=ie({__forward_ref__:ie});function et(t){return t.__forward_ref__=et,t.toString=function(){return ve(this())},t}function nt(t){return pt(t)?t():t}function pt(t){return"function"==typeof t&&t.hasOwnProperty(Ge)&&t.__forward_ref__===et}function ct(t){return t&&!!t.\u0275providers}const pe="https://g.co/ng/security#xss";class re extends Error{constructor(r,s){super(function Fe(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,s)),this.code=r}}function Ee(t){return"string"==typeof t?t:null==t?"":String(t)}function Gt(t,r){throw new re(-201,!1)}function _t(t,r){null==t&&function at(t,r,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function Xt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Dn(t){return{providers:t.providers||[],imports:t.imports||[]}}function bn(t){return xr(t,fe)||xr(t,dt)}function Hn(t){return null!==bn(t)}function xr(t,r){return t.hasOwnProperty(r)?t[r]:null}function Qe(t){return t&&(t.hasOwnProperty(We)||t.hasOwnProperty(cn))?t[We]:null}const fe=ie({\u0275prov:ie}),We=ie({\u0275inj:ie}),dt=ie({ngInjectableDef:ie}),cn=ie({ngInjectorDef:ie});var Je=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Je||{});let en;function Nn(t){const r=en;return en=t,r}function Yn(t,r,s){const a=bn(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Je.Optional?null:void 0!==r?r:void Gt(ve(t))}const Sn=globalThis;class kt{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Xt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ki={},Ts="__NG_DI_FLAG__",wi="ngTempTokenPath",K=/\n/gm,Z="__source";let Y;function qe(t){const r=Y;return Y=t,r}function ft(t,r=Je.Default){if(void 0===Y)throw new re(-203,!1);return null===Y?Yn(t,void 0,r):Y.get(t,r&Je.Optional?null:void 0,r)}function Qt(t,r=Je.Default){return(function on(){return en}()||ft)(nt(t),r)}function wt(t,r=Je.Default){return Qt(t,Ut(r))}function Ut(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function nr(t){const r=[];for(let s=0;s<t.length;s++){const a=nt(t[s]);if(Array.isArray(a)){if(0===a.length)throw new re(900,!1);let c,f=Je.Default;for(let y=0;y<a.length;y++){const C=a[y],P=lo(C);"number"==typeof P?-1===P?c=C.token:f|=P:c=C}r.push(Qt(c,f))}else r.push(Qt(a))}return r}function li(t,r){return t[Ts]=r,t.prototype[Ts]=r,t}function lo(t){return t[Ts]}function be(t){return{toString:t}.toString()}var lt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(lt||{}),$t=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}($t||{});const tn={},Pt=[],sn=ie({\u0275cmp:ie}),yr=ie({\u0275dir:ie}),vr=ie({\u0275pipe:ie}),is=ie({\u0275mod:ie}),di=ie({\u0275fac:ie}),Li=ie({__NG_ELEMENT_ID__:ie}),Ko=ie({__NG_ENV_ID__:ie});function Oo(t,r,s){let a=t.length;for(;;){const c=t.indexOf(r,s);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const f=r.length;if(c+f===a||t.charCodeAt(c+f)<=32)return c}s=c+1}}function Zo(t,r,s){let a=0;for(;a<s.length;){const c=s[a];if("number"==typeof c){if(0!==c)break;a++;const f=s[a++],y=s[a++],C=s[a++];t.setAttribute(r,y,C,f)}else{const f=c,y=s[++a];ho(f)?t.setProperty(r,f,y):t.setAttribute(r,f,y),a++}}return a}function ws(t){return 3===t||4===t||6===t}function ho(t){return 64===t.charCodeAt(0)}function zn(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const c=r[a];"number"==typeof c?s=c:0===s||Qo(t,s,c,null,-1===s||2===s?r[++a]:null)}}return t}function Qo(t,r,s,a,c){let f=0,y=t.length;if(-1===r)y=-1;else for(;f<t.length;){const C=t[f++];if("number"==typeof C){if(C===r){y=-1;break}if(C>r){y=f-1;break}}}for(;f<t.length;){const C=t[f];if("number"==typeof C)break;if(C===s){if(null===a)return void(null!==c&&(t[f+1]=c));if(a===t[f+1])return void(t[f+2]=c)}f++,null!==a&&f++,null!==c&&f++}-1!==y&&(t.splice(y,0,r),f=y+1),t.splice(f++,0,s),null!==a&&t.splice(f++,0,a),null!==c&&t.splice(f++,0,c)}const zi="ng-template";function ss(t,r,s){let a=0,c=!0;for(;a<t.length;){let f=t[a++];if("string"==typeof f&&c){const y=t[a++];if(s&&"class"===f&&-1!==Oo(y.toLowerCase(),r,0))return!0}else{if(1===f){for(;a<t.length&&"string"==typeof(f=t[a++]);)if(f.toLowerCase()===r)return!0;return!1}"number"==typeof f&&(c=!1)}}return!1}function Ws(t){return 4===t.type&&t.value!==zi}function No(t,r,s){return r===(4!==t.type||s?t.value:zi)}function Cu(t,r,s){let a=4;const c=t.attrs||[],f=function Us(t){for(let r=0;r<t.length;r++)if(ws(t[r]))return r;return t.length}(c);let y=!1;for(let C=0;C<r.length;C++){const P=r[C];if("number"!=typeof P){if(!y)if(4&a){if(a=2|1&a,""!==P&&!No(t,P,s)||""===P&&1===r.length){if(ti(a))return!1;y=!0}}else{const L=8&a?P:r[++C];if(8&a&&null!==t.attrs){if(!ss(t.attrs,L,s)){if(ti(a))return!1;y=!0}continue}const ne=os(8&a?"class":P,c,Ws(t),s);if(-1===ne){if(ti(a))return!1;y=!0;continue}if(""!==L){let Ie;Ie=ne>f?"":c[ne+1].toLowerCase();const Pe=8&a?Ie:null;if(Pe&&-1!==Oo(Pe,L,0)||2&a&&L!==Ie){if(ti(a))return!1;y=!0}}}}else{if(!y&&!ti(a)&&!ti(P))return!1;if(y&&ti(P))continue;y=!1,a=P|1&a}}return ti(a)||y}function ti(t){return 0==(1&t)}function os(t,r,s,a){if(null===r)return-1;let c=0;if(a||!s){let f=!1;for(;c<r.length;){const y=r[c];if(y===t)return c;if(3===y||6===y)f=!0;else{if(1===y||2===y){let C=r[++c];for(;"string"==typeof C;)C=r[++c];continue}if(4===y)break;if(0===y){c+=4;continue}}c+=f?1:2}return-1}return function Yo(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function qs(t,r,s=!1){for(let a=0;a<r.length;a++)if(Cu(t,r[a],s))return!0;return!1}function Xu(t,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(t.length===a.length){for(let c=0;c<t.length;c++)if(t[c]!==a[c])continue e;return!0}}return!1}function ni(t,r){return t?":not("+r.trim()+")":r}function Ea(t){let r=t[0],s=1,a=2,c="",f=!1;for(;s<t.length;){let y=t[s];if("string"==typeof y)if(2&a){const C=t[++s];c+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&a?c+="."+y:4&a&&(c+=" "+y);else""!==c&&!ti(y)&&(r+=ni(f,c),c=""),a=y,f=f||!ti(a);s++}return""!==c&&(r+=ni(f,c)),r}function Gi(t){return be(()=>{const r=Ai(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===lt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||$t.Emulated,styles:t.styles||Pt,_:null,schemas:t.schemas||null,tView:null,id:""};ko(s);const a=t.dependencies;return s.directiveDefs=Ys(a,!1),s.pipeDefs=Ys(a,!0),s.id=function Au(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const c of s)r=Math.imul(31,r)+c.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(s),s})}function fo(t){return Rn(t)||Ir(t)}function Jo(t){return null!==t}function Wi(t){return be(()=>({type:t.type,bootstrap:t.bootstrap||Pt,declarations:t.declarations||Pt,imports:t.imports||Pt,exports:t.exports||Pt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Xo(t,r){if(null==t)return tn;const s={};for(const a in t)if(t.hasOwnProperty(a)){let c=t[a],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),s[c]=a,r&&(r[c]=f)}return s}function ri(t){return be(()=>{const r=Ai(t);return ko(r),r})}function Qs(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Rn(t){return t[sn]||null}function Ir(t){return t[yr]||null}function Di(t){return t[vr]||null}function Bs(t){const r=Rn(t)||Ir(t)||Di(t);return null!==r&&r.standalone}function Ci(t,r){const s=t[is]||null;if(!s&&!0===r)throw new Error(`Type ${ve(t)} does not have '\u0275mod' property.`);return s}function Ai(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||tn,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Pt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Xo(t.inputs,r),outputs:Xo(t.outputs)}}function ko(t){t.features?.forEach(r=>r(t))}function Ys(t,r){if(!t)return null;const s=r?Di:fo;return()=>("function"==typeof t?t():t).map(a=>s(a)).filter(Jo)}const ur=0,Et=1,gn=2,Un=3,kr=4,Si=5,jr=6,Js=7,Tr=8,as=9,hi=10,Zt=11,qi=12,po=13,ii=14,Pr=15,Kn=16,Ds=17,Kr=18,Cs=19,Ja=20,fs=21,As=22,js=23,Fi=24,Pn=25,Vi=1,Ia=2,Ki=7,fi=9,pi=11;function Zi(t){return Array.isArray(t)&&"object"==typeof t[Vi]}function bi(t){return Array.isArray(t)&&!0===t[Vi]}function go(t){return 0!=(4&t.flags)}function Lo(t){return t.componentOffset>-1}function mo(t){return 1==(1&t.flags)}function gs(t){return!!t.template}function Xa(t){return 0!=(512&t[gn])}function gi(t,r){return t.hasOwnProperty(di)?t[di]:null}let $r=null,mi=!1;function si(t){const r=$r;return $r=t,r}const ba={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ia(t){if(!Bi(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Ra(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function rc(t){t.dirty=!0,function yo(t){if(void 0===t.liveConsumerNode)return;const r=mi;mi=!0;try{for(const s of t.liveConsumerNode)s.dirty||rc(s)}finally{mi=r}}(t),t.consumerMarkedDirty?.(t)}function vo(t){return t&&(t.nextProducerIndex=0),si(t)}function Ru(t,r){if(si(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Bi(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)sa(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ra(t){Fo(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==s.version||(ia(s),a!==s.version))return!0}return!1}function ic(t){if(Fo(t),Bi(t))for(let r=0;r<t.producerNode.length;r++)sa(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function sa(t,r){if(function Pa(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Fo(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)sa(t.producerNode[a],t.producerIndexOfThis[a]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],c=t.liveConsumerNode[r];Fo(c),c.producerIndexOfThis[a]=r}}function Bi(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Fo(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let us=null;function Be(t){const r=si(null);try{return t()}finally{si(r)}}const Lt=()=>{},rr=(()=>({...ba,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Lt}))();class yn{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function Yt(){return Tn}function Tn(t){return t.type.prototype.ngOnChanges&&(t.setInput=Or),Zn}function Zn(){const t=Pi(this),r=t?.current;if(r){const s=t.previous;if(s===tn)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function Or(t,r,s,a){const c=this.declaredInputs[s],f=Pi(t)||function Zr(t,r){return t[Ri]=r}(t,{previous:tn,current:null}),y=f.current||(f.current={}),C=f.previous,P=C[c];y[c]=new yn(P&&P.currentValue,r,C===tn),t[a]=r}Yt.ngInherit=!0;const Ri="__ngSimpleChanges__";function Pi(t){return t[Ri]||null}const _i=function(t,r,s){};function or(t){for(;Array.isArray(t);)t=t[ur];return t}function cs(t,r){return or(r[t.index])}function Io(t,r){return t.data[r]}function ou(t,r){return t[r]}function ir(t,r){const s=r[t];return Zi(s)?s:s[ur]}function Vo(t,r){return null==r?null:t[r]}function ut(t){t[Ds]=0}function lr(t){1024&t[gn]||(t[gn]|=1024,Na(t,1))}function fr(t){1024&t[gn]&&(t[gn]&=-1025,Na(t,-1))}function Na(t,r){let s=t[Un];if(null===s)return;s[Si]+=r;let a=s;for(s=s[Un];null!==s&&(1===r&&1===a[Si]||-1===r&&0===a[Si]);)s[Si]+=r,a=s,s=s[Un]}const ln={lFrame:Rs(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ca(){return ln.bindingsEnabled}function au(){return null!==ln.skipHydrationRootTNode}function it(){return ln.lFrame.lView}function Jn(){return ln.lFrame.tView}function Ur(t){return ln.lFrame.contextLView=t,t[Tr]}function _n(t){return ln.lFrame.contextLView=null,t}function kn(){let t=cc();for(;null!==t&&64===t.type;)t=t.parent;return t}function cc(){return ln.lFrame.currentTNode}function Ht(t,r){const s=ln.lFrame;s.currentTNode=t,s.isParent=r}function ka(){return ln.lFrame.isParent}function Bn(){ln.lFrame.isParent=!1}function no(){return ln.lFrame.bindingIndex++}function dc(t,r){const s=ln.lFrame;s.bindingIndex=s.bindingRootIndex=t,Yi(r)}function Yi(t){ln.lFrame.currentDirectiveIndex=t}function Mc(){return ln.lFrame.currentQueryIndex}function Bo(t){ln.lFrame.currentQueryIndex=t}function La(t){const r=t[Et];return 2===r.type?r.declTNode:1===r.type?t[jr]:null}function xc(t,r,s){if(s&Je.SkipSelf){let c=r,f=t;for(;!(c=c.parent,null!==c||s&Je.Host||(c=La(f),null===c||(f=f[ii],10&c.type))););if(null===c)return!1;r=c,t=f}const a=ln.lFrame=To();return a.currentTNode=r,a.lView=t,!0}function Ne(t){const r=To(),s=t[Et];ln.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function To(){const t=ln.lFrame,r=null===t?null:t.child;return null===r?Rs(t):r}function Rs(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function uu(){const t=ln.lFrame;return ln.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const w=uu;function b(){const t=uu();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function N(){return ln.lFrame.selectedIndex}function q(t){ln.lFrame.selectedIndex=t}function te(){const t=ln.lFrame;return Io(t.tView,t.selectedIndex)}let fn=!0;function _s(){return fn}function $s(t){fn=t}function cu(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const f=t.data[s].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:P,ngAfterViewChecked:L,ngOnDestroy:W}=f;y&&(t.contentHooks??=[]).push(-s,y),C&&((t.contentHooks??=[]).push(s,C),(t.contentCheckHooks??=[]).push(s,C)),P&&(t.viewHooks??=[]).push(-s,P),L&&((t.viewHooks??=[]).push(s,L),(t.viewCheckHooks??=[]).push(s,L)),null!=W&&(t.destroyHooks??=[]).push(s,W)}}function ys(t,r,s){Lu(t,r,3,s)}function ku(t,r,s,a){(3&t[gn])===s&&Lu(t,r,s,a)}function hc(t,r){let s=t[gn];(3&s)===r&&(s&=8191,s+=1,t[gn]=s)}function Lu(t,r,s,a){const f=a??-1,y=r.length-1;let C=0;for(let P=void 0!==a?65535&t[Ds]:0;P<y;P++)if("number"==typeof r[P+1]){if(C=r[P],null!=a&&C>=a)break}else r[P]<0&&(t[Ds]+=65536),(C<f||-1==f)&&(Ff(t,s,r,P),t[Ds]=(4294901760&t[Ds])+P+2),P++}function Oc(t,r){_i(4,t,r);const s=si(null);try{r.call(t)}finally{si(s),_i(5,t,r)}}function Ff(t,r,s,a){const c=s[a]<0,f=s[a+1],C=t[c?-s[a]:s[a]];c?t[gn]>>13<t[Ds]>>16&&(3&t[gn])===r&&(t[gn]+=8192,Oc(C,f)):Oc(C,f)}const lu=-1;class Fa{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Rl(t){return t!==lu}function da(t){return 32767&t}function du(t,r){let s=function yh(t){return t>>16}(t),a=r;for(;s>0;)a=a[ii],s--;return a}let Xc=!0;function fc(t){const r=Xc;return Xc=t,r}const $i=255,ds=5;let ha=0;const Ps={};function Va(t,r){const s=hr(t,r);if(-1!==s)return s;const a=r[Et];a.firstCreatePass&&(t.injectorIndex=r.length,vi(a.data,t),vi(r,null),vi(a.blueprint,null));const c=Vu(t,r),f=t.injectorIndex;if(Rl(c)){const y=da(c),C=du(c,r),P=C[Et].data;for(let L=0;L<8;L++)r[f+L]=C[y+L]|P[y+L]}return r[f+8]=c,f}function vi(t,r){t.push(0,0,0,0,0,0,0,0,r)}function hr(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Vu(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,c=r;for(;null!==c;){if(a=fa(c),null===a)return lu;if(s++,c=c[ii],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return lu}function Ua(t,r,s){!function gr(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Li)&&(a=s[Li]),null==a&&(a=s[Li]=ha++);const c=a&$i;r.data[t+(c>>ds)]|=1<<c}(t,r,s)}function Pl(t,r,s){if(s&Je.Optional||void 0!==t)return t;Gt()}function Ml(t,r,s,a){if(s&Je.Optional&&void 0===a&&(a=null),!(s&(Je.Self|Je.Host))){const c=t[as],f=Nn(void 0);try{return c?c.get(r,a,s&Je.Optional):Yn(r,a,s&Je.Optional)}finally{Nn(f)}}return Pl(a,0,s)}function Qr(t,r,s,a=Je.Default,c){if(null!==t){if(2048&r[gn]&&!(a&Je.Self)){const y=function Uu(t,r,s,a,c){let f=t,y=r;for(;null!==f&&null!==y&&2048&y[gn]&&!(512&y[gn]);){const C=xl(f,y,s,a|Je.Self,Ps);if(C!==Ps)return C;let P=f.parent;if(!P){const L=y[Ja];if(L){const W=L.get(s,Ps,a);if(W!==Ps)return W}P=fa(y),y=y[ii]}f=P}return c}(t,r,s,a,Ps);if(y!==Ps)return y}const f=xl(t,r,s,a,Ps);if(f!==Ps)return f}return Ml(r,s,a,c)}function xl(t,r,s,a,c){const f=function el(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(Li)?t[Li]:void 0;return"number"==typeof r?r>=0?r&$i:kc:r}(s);if("function"==typeof f){if(!xc(r,t,a))return a&Je.Host?Pl(c,0,a):Ml(r,s,a,c);try{let y;if(y=f(a),null!=y||a&Je.Optional)return y;Gt()}finally{w()}}else if("number"==typeof f){let y=null,C=hr(t,r),P=lu,L=a&Je.Host?r[Pr][jr]:null;for((-1===C||a&Je.SkipSelf)&&(P=-1===C?Vu(t,r):r[C+8],P!==lu&&pc(a,!1)?(y=r[Et],C=da(P),r=du(P,r)):C=-1);-1!==C;){const W=r[Et];if(hu(f,C,W.data)){const ne=Hi(C,r,s,y,a,L);if(ne!==Ps)return ne}P=r[C+8],P!==lu&&pc(a,r[Et].data[C+8]===L)&&hu(f,C,r)?(y=W,C=da(P),r=du(P,r)):C=-1}}return c}function Hi(t,r,s,a,c,f){const y=r[Et],C=y.data[t+8],W=ar(C,y,s,null==a?Lo(C)&&Xc:a!=y&&0!=(3&C.type),c&Je.Host&&f===C);return null!==W?Ms(r,y,W,C):Ps}function ar(t,r,s,a,c){const f=t.providerIndexes,y=r.data,C=1048575&f,P=t.directiveStart,W=f>>20,Ie=c?C+W:t.directiveEnd;for(let Pe=a?C:C+W;Pe<Ie;Pe++){const Ye=y[Pe];if(Pe<P&&s===Ye||Pe>=P&&Ye.type===s)return Pe}if(c){const Pe=y[P];if(Pe&&gs(Pe)&&Pe.type===s)return P}return null}function Ms(t,r,s,a){let c=t[s];const f=r.data;if(function Fu(t){return t instanceof Fa}(c)){const y=c;y.resolving&&function Ze(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new re(-200,`Circular dependency in DI detected for ${t}${s}`)}(function Ue(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ee(t)}(f[s]));const C=fc(y.canSeeViewProviders);y.resolving=!0;const L=y.injectImpl?Nn(y.injectImpl):null;xc(t,a,Je.Default);try{c=t[s]=y.factory(void 0,f,t,a),r.firstCreatePass&&s>=a.directiveStart&&function xi(t,r,s){const{ngOnChanges:a,ngOnInit:c,ngDoCheck:f}=r.type.prototype;if(a){const y=Tn(r);(s.preOrderHooks??=[]).push(t,y),(s.preOrderCheckHooks??=[]).push(t,y)}c&&(s.preOrderHooks??=[]).push(0-t,c),f&&((s.preOrderHooks??=[]).push(t,f),(s.preOrderCheckHooks??=[]).push(t,f))}(s,f[s],r)}finally{null!==L&&Nn(L),fc(C),y.resolving=!1,w()}}return c}function hu(t,r,s){return!!(s[r+(t>>ds)]&1<<t)}function pc(t,r){return!(t&Je.Self||t&Je.Host&&r)}class Hr{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return Qr(this._tNode,this._lView,r,Ut(a),s)}}function kc(){return new Hr(kn(),it())}function ro(t){return be(()=>{const r=t.prototype.constructor,s=r[di]||wo(r),a=Object.prototype;let c=Object.getPrototypeOf(t.prototype).constructor;for(;c&&c!==a;){const f=c[di]||wo(c);if(f&&f!==s)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function wo(t){return pt(t)?()=>{const r=wo(nt(t));return r&&r()}:gi(t)}function fa(t){const r=t[Et],s=r.type;return 2===s?r.declTNode:1===s?t[jr]:null}function Lc(t){return function Ji(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let c=0;for(;c<a;){const f=s[c];if(ws(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<a&&"string"==typeof s[c];)c++;else{if(f===r)return s[c+1];c+=2}}}return null}(kn(),t)}const Ba="__parameters__";function pa(t,r,s){return be(()=>{const a=function gc(t){return function(...s){if(t){const a=t(...s);for(const c in a)this[c]=a[c]}}}(r);function c(...f){if(this instanceof c)return a.apply(this,f),this;const y=new c(...f);return C.annotation=y,C;function C(P,L,W){const ne=P.hasOwnProperty(Ba)?P[Ba]:Object.defineProperty(P,Ba,{value:[]})[Ba];for(;ne.length<=W;)ne.push(null);return(ne[W]=ne[W]||[]).push(y),P}}return s&&(c.prototype=Object.create(s.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}function mc(t,r){t.forEach(s=>Array.isArray(s)?mc(s,r):r(s))}function v(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function h(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function m(t,r){const s=[];for(let a=0;a<t;a++)s.push(r);return s}const Br=li(pa("Optional"),8),Fr=li(pa("SkipSelf"),4);function Ha(t){return 128==(128&t.flags)}var $u=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}($u||{});const zf=/^>|^->|<!--|-->|--!>|<!-$/g,Gf=/(<|>)/g,rl="\u200b$1\u200b";const Hl=new Map;let Yr=0;const Go="__ngContext__";function Ns(t,r){Zi(r)?(t[Go]=r[Cs],function il(t){Hl.set(t[Cs],t)}(r)):t[Go]=r}let Pd;function ma(t,r){return Pd(t,r)}function Bc(t){const r=t[Un];return bi(r)?r[Un]:r}function zl(t){return sl(t[qi])}function Md(t){return sl(t[kr])}function sl(t){for(;null!==t&&!bi(t);)t=t[kr];return t}function gu(t,r,s,a,c){if(null!=a){let f,y=!1;bi(a)?f=a:Zi(a)&&(y=!0,a=a[ur]);const C=or(a);0===t&&null!==s?null==c?jc(r,s,C):Gu(r,s,C,c||null,!0):1===t&&null!==s?Gu(r,s,C,c||null,!0):2===t?function Ph(t,r,s){const a=mu(t,r);a&&function Od(t,r,s,a){t.removeChild(r,s,a)}(t,a,r,s)}(r,C,y):3===t&&r.destroyNode(C),null!=f&&function al(t,r,s,a,c){const f=s[Ki];f!==or(s)&&gu(r,t,a,f,c);for(let C=pi;C<s.length;C++){const P=s[C];Mh(P[Et],P,t,r,a,f)}}(r,t,f,s,c)}}function d(t,r){return t.createComment(function Dd(t){return t.replace(zf,r=>r.replace(Gf,rl))}(r))}function p(t,r,s){return t.createElement(r,s)}function Ot(t,r){const s=t[fi],a=s.indexOf(r);fr(r),s.splice(a,1)}function qt(t,r){if(t.length<=pi)return;const s=pi+r,a=t[s];if(a){const c=a[Kn];null!==c&&c!==t&&Ot(c,a),r>0&&(t[s-1][kr]=a[kr]);const f=h(t,pi+r);!function E(t,r){Mh(t,r,r[Zt],2,null,null),r[ur]=null,r[jr]=null}(a[Et],a);const y=f[Kr];null!==y&&y.detachView(f[Et]),a[Un]=null,a[kr]=null,a[gn]&=-129}return a}function zt(t,r){if(!(256&r[gn])){const s=r[Zt];r[js]&&ic(r[js]),r[Fi]&&ic(r[Fi]),s.destroyNode&&Mh(t,r,s,3,null,null),function ce(t){let r=t[qi];if(!r)return Mr(t[Et],t);for(;r;){let s=null;if(Zi(r))s=r[qi];else{const a=r[pi];a&&(s=a)}if(!s){for(;r&&!r[kr]&&r!==t;)Zi(r)&&Mr(r[Et],r),r=r[Un];null===r&&(r=t),Zi(r)&&Mr(r[Et],r),s=r&&r[kr]}r=s}}(r)}}function Mr(t,r){if(!(256&r[gn])){r[gn]&=-129,r[gn]|=256,function xd(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const c=r[s[a]];if(!(c instanceof Fa)){const f=s[a+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const C=c[f[y]],P=f[y+1];_i(4,C,P);try{P.call(C)}finally{_i(5,C,P)}}else{_i(4,c,f);try{f.call(c)}finally{_i(5,c,f)}}}}}(t,r),function _a(t,r){const s=t.cleanup,a=r[Js];if(null!==s)for(let f=0;f<s.length-1;f+=2)if("string"==typeof s[f]){const y=s[f+3];y>=0?a[y]():a[-y].unsubscribe(),f+=2}else s[f].call(a[s[f+1]]);null!==a&&(r[Js]=null);const c=r[fs];if(null!==c){r[fs]=null;for(let f=0;f<c.length;f++)(0,c[f])()}}(t,r),1===r[Et].type&&r[Zt].destroy();const s=r[Kn];if(null!==s&&bi(r[Un])){s!==r[Un]&&Ot(s,r);const a=r[Kr];null!==a&&a.detachView(t)}!function zo(t){Hl.delete(t[Cs])}(r)}}function ui(t,r,s){return function ol(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[ur];{const{componentOffset:c}=a;if(c>-1){const{encapsulation:f}=t.data[a.directiveStart+c];if(f===$t.None||f===$t.Emulated)return null}return cs(a,s)}}(t,r.parent,s)}function Gu(t,r,s,a,c){t.insertBefore(r,s,a,c)}function jc(t,r,s){t.appendChild(r,s)}function Wo(t,r,s,a,c){null!==a?Gu(t,r,s,a,c):jc(t,r,s)}function mu(t,r){return t.parentNode(r)}function Sh(t,r,s){return Qf(t,r,s)}let wg,$c,Ud,Qf=function Gl(t,r,s){return 40&t.type?cs(t,s):null};function kd(t,r,s,a){const c=ui(t,a,r),f=r[Zt],C=Sh(a.parent||r[jr],a,r);if(null!=c)if(Array.isArray(s))for(let P=0;P<s.length;P++)Wo(f,c,s[P],C,!1);else Wo(f,c,s,C,!1);void 0!==wg&&wg(f,a,r,s,c)}function bh(t,r){if(null!==r){const s=r.type;if(3&s)return cs(r,t);if(4&s)return Rh(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return bh(t,a);{const c=t[r.index];return bi(c)?Rh(-1,c):or(c)}}if(32&s)return ma(r,t)()||or(t[r.index]);{const a=Dg(t,r);return null!==a?Array.isArray(a)?a[0]:bh(Bc(t[Pr]),a):bh(t,r.next)}}return null}function Dg(t,r){return null!==r?t[Pr][jr].projection[r.projection]:null}function Rh(t,r){const s=pi+t+1;if(s<r.length){const a=r[s],c=a[Et].firstChild;if(null!==c)return bh(a,c)}return r[Ki]}function Yf(t,r,s,a,c,f,y){for(;null!=s;){const C=a[s.index],P=s.type;if(y&&0===r&&(C&&Ns(or(C),a),s.flags|=2),32!=(32&s.flags))if(8&P)Yf(t,r,s.child,a,c,f,!1),gu(r,t,c,C,f);else if(32&P){const L=ma(s,a);let W;for(;W=L();)gu(r,t,c,W,f);gu(r,t,c,C,f)}else 16&P?R_(t,r,a,s,c,f):gu(r,t,c,C,f);s=y?s.projectionNext:s.next}}function Mh(t,r,s,a,c,f){Yf(s,a,t.firstChild,r,c,f,!1)}function R_(t,r,s,a,c,f){const y=s[Pr],P=y[jr].projection[a.projection];if(Array.isArray(P))for(let L=0;L<P.length;L++)gu(r,t,c,P[L],f);else{let L=P;const W=y[Un];Ha(a)&&(L.flags|=128),Yf(t,r,L,W,c,f,!0)}}function M_(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function Cg(t,r,s){const{mergedAttrs:a,classes:c,styles:f}=s;null!==a&&Zo(t,r,a),null!==c&&M_(t,r,c),null!==f&&function P_(t,r,s){t.setAttribute(r,"style",s)}(t,r,f)}function xh(t){$c=t}function O_(t){return function Oh(){if(void 0===Ud&&(Ud=null,Sn.trustedTypes))try{Ud=Sn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ud}()?.createScriptURL(t)||t}class bg{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pe})`}}function Hc(t){return t instanceof bg?t.changingThisBreaksApplicationSecurity:t}function kh(t,r){const s=function kv(t){return t instanceof bg&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${pe})`)}return s===r}const Mg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var yu=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(yu||{});function op(t){const r=$d();return r?r.sanitize(yu.URL,t)||"":kh(t,"URL")?Hc(t):function np(t){return(t=String(t)).match(Mg)?t:"unsafe:"+t}(Ee(t))}function zc(t){const r=$d();if(r)return O_(r.sanitize(yu.RESOURCE_URL,t)||"");if(kh(t,"ResourceURL"))return O_(Hc(t));throw new re(904,!1)}function kg(t,r,s){return function Bv(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?zc:op}(r,s)(t)}function $d(){const t=it();return t&&t[hi].sanitizer}const Bh=new kt("ENVIRONMENT_INITIALIZER"),Fg=new kt("INJECTOR",-1),H_=new kt("INJECTOR_DEF_TYPES");class ap{get(r,s=ki){if(s===ki){const a=new Error(`NullInjectorError: No provider for ${ve(r)}!`);throw a.name="NullInjectorError",a}return s}}function jh(...t){return{\u0275providers:Vg(0,t),\u0275fromNgModule:!0}}function Vg(t,...r){const s=[],a=new Set;let c;const f=y=>{s.push(y)};return mc(r,y=>{const C=y;up(C,f,[],a)&&(c||=[],c.push(C))}),void 0!==c&&Ug(c,f),s}function Ug(t,r){for(let s=0;s<t.length;s++){const{ngModule:a,providers:c}=t[s];Bg(c,f=>{r(f,a)})}}function up(t,r,s,a){if(!(t=nt(t)))return!1;let c=null,f=Qe(t);const y=!f&&Rn(t);if(f||y){if(y&&!y.standalone)return!1;c=t}else{const P=t.ngModule;if(f=Qe(P),!f)return!1;c=P}const C=a.has(c);if(y){if(C)return!1;if(a.add(c),y.dependencies){const P="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const L of P)up(L,r,s,a)}}else{if(!f)return!1;{if(null!=f.imports&&!C){let L;a.add(c);try{mc(f.imports,W=>{up(W,r,s,a)&&(L||=[],L.push(W))})}finally{}void 0!==L&&Ug(L,r)}if(!C){const L=gi(c)||(()=>new c);r({provide:c,useFactory:L,deps:Pt},c),r({provide:H_,useValue:c,multi:!0},c),r({provide:Bh,useValue:()=>Qt(c),multi:!0},c)}const P=f.providers;if(null!=P&&!C){const L=t;Bg(P,W=>{r(W,L)})}}}return c!==t&&void 0!==t.providers}function Bg(t,r){for(let s of t)ct(s)&&(s=s.\u0275providers),Array.isArray(s)?Bg(s,r):r(s)}const $v=ie({provide:String,useValue:ie});function $h(t){return null!==t&&"object"==typeof t&&$v in t}function Yl(t){return"function"==typeof t}const jg=new kt("Set Injector scope."),Hd={},zv={};let zd;function Jl(){return void 0===zd&&(zd=new ap),zd}class Ic{}class Xl extends Ic{get destroyed(){return this._destroyed}constructor(r,s,a,c){super(),this.parent=s,this.source=a,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zg(r,y=>this.processProvider(y)),this.records.set(Fg,hl(void 0,this)),c.has("environment")&&this.records.set(Ic,hl(void 0,this));const f=this.records.get(jg);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(H_.multi,Pt,Je.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=qe(this),a=Nn(void 0);try{return r()}finally{qe(s),Nn(a)}}get(r,s=ki,a=Je.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(Ko))return r[Ko](this);a=Ut(a);const f=qe(this),y=Nn(void 0);try{if(!(a&Je.SkipSelf)){let P=this.records.get(r);if(void 0===P){const L=function G_(t){return"function"==typeof t||"object"==typeof t&&t instanceof kt}(r)&&bn(r);P=L&&this.injectableDefInScope(L)?hl(Hh(r),Hd):null,this.records.set(r,P)}if(null!=P)return this.hydrate(r,P)}return(a&Je.Self?Jl():this.parent).get(r,s=a&Je.Optional&&s===ki?null:s)}catch(C){if("NullInjectorError"===C.name){if((C[wi]=C[wi]||[]).unshift(ve(r)),f)throw C;return function Za(t,r,s,a){const c=t[wi];throw r[Z]&&c.unshift(r[Z]),t.message=function ze(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let c=ve(r);if(Array.isArray(r))c=r.map(ve).join(" -> ");else if("object"==typeof r){let f=[];for(let y in r)if(r.hasOwnProperty(y)){let C=r[y];f.push(y+":"+("string"==typeof C?JSON.stringify(C):ve(C)))}c=`{${f.join(", ")}}`}return`${s}${a?"("+a+")":""}[${c}]: ${t.replace(K,"\n  ")}`}("\n"+t.message,c,s,a),t.ngTokenPath=c,t[wi]=null,t}(C,r,"R3InjectorError",this.source)}throw C}finally{Nn(y),qe(f)}}resolveInjectorInitializers(){const r=qe(this),s=Nn(void 0);try{const c=this.get(Bh.multi,Pt,Je.Self);for(const f of c)f()}finally{qe(r),Nn(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(ve(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(r){let s=Yl(r=nt(r))?r:nt(r&&r.provide);const a=function zh(t){return $h(t)?hl(void 0,t.useValue):hl(function Gh(t,r,s){let a;if(Yl(t)){const c=nt(t);return gi(c)||Hh(c)}if($h(t))a=()=>nt(t.useValue);else if(function z_(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...nr(t.deps||[]));else if(function ks(t){return!(!t||!t.useExisting)}(t))a=()=>Qt(nt(t.useExisting));else{const c=nt(t&&(t.useClass||t.provide));if(!function Hg(t){return!!t.deps}(t))return gi(c)||Hh(c);a=()=>new c(...nr(t.deps))}return a}(t),Hd)}(r);if(Yl(r)||!0!==r.multi)this.records.get(s);else{let c=this.records.get(s);c||(c=hl(void 0,Hd,!0),c.factory=()=>nr(c.multi),this.records.set(s,c)),s=r,c.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===Hd&&(s.value=zv,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Gv(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=nt(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function Hh(t){const r=bn(t),s=null!==r?r.factory:gi(t);if(null!==s)return s;if(t instanceof kt)throw new re(204,!1);if(t instanceof Function)return function $g(t){const r=t.length;if(r>0)throw m(r,"?"),new re(204,!1);const s=function Oe(t){return t&&(t[fe]||t[dt])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new re(204,!1)}function hl(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function zg(t,r){for(const s of t)Array.isArray(s)?zg(s,r):s&&ct(s)?zg(s.\u0275providers,r):r(s)}const Gg=new kt("AppId",{providedIn:"root",factory:()=>W_}),W_="ng",cp=new kt("Platform Initializer"),Wg=new kt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),qv=new kt("AnimationModuleType"),q_=new kt("CSP nonce",{providedIn:"root",factory:()=>function ql(){if(void 0!==$c)return $c;if(typeof document<"u")return document;throw new re(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let gp=(t,r,s)=>null;function mp(t,r,s=!1){return gp(t,r,s)}class Yv{}class Z_{}class Xv{resolveComponentFactory(r){throw function Jv(t){const r=Error(`No component factory found for ${ve(t)}.`);return r.ngComponent=t,r}(r)}}let Ep=(()=>{class t{static#e=this.NULL=new Xv}return t})();function ef(){return fl(kn(),it())}function fl(t,r){return new Tc(cs(t,r))}let Tc=(()=>{class t{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=ef}return t})();function Qg(t){return t instanceof Tc?t.nativeElement:t}class tf{}let nf=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Yg(){const t=it(),s=ir(kn().index,t);return(Zi(s)?s:t)[Zt]}()}return t})(),J_=(()=>{class t{static#e=this.\u0275prov=Xt({token:t,providedIn:"root",factory:()=>null})}return t})();class Ip{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Tp=new Ip("16.2.12"),wc={};function Dp(t,r=null,s=null,a){const c=ty(t,r,s,a);return c.resolveInjectorInitializers(),c}function ty(t,r=null,s=null,a,c=new Set){const f=[s||Pt,jh(t)];return a=a||("object"==typeof t?void 0:ve(t)),new Xl(f,r||Jl(),a||null,c)}let qu=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=ki;static#t=this.NULL=new ap;static create(s,a){if(Array.isArray(s))return Dp({name:""},a,s,"");{const c=s.name??"";return Dp({name:c},s.parent,s.providers,c)}}static#n=this.\u0275prov=Xt({token:t,providedIn:"any",factory:()=>Qt(Fg)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function rm(t){return t.ngOriginalError}class Dc{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&rm(r);for(;s&&rm(s);)s=rm(s);return s||null}}function am(t){return r=>{setTimeout(t,void 0,r)}}const vu=class om extends D.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let c=r,f=s||(()=>null),y=a;if(r&&"object"==typeof r){const P=r;c=P.next?.bind(P),f=P.error?.bind(P),y=P.complete?.bind(P)}this.__isAsync&&(f=am(f),c&&(c=am(c)),y&&(y=am(y)));const C=super.subscribe({next:c,error:f,complete:y});return r instanceof se.w0&&r.add(C),C}};function um(...t){}class Is{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vu(!1),this.onMicrotaskEmpty=new vu(!1),this.onStable=new vu(!1),this.onError=new vu(!1),typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!a&&s,c.shouldCoalesceRunChangeDetection=a,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function cm(){const t="function"==typeof Sn.requestAnimationFrame;let r=Sn[t?"requestAnimationFrame":"setTimeout"],s=Sn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&s){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Qd(t){const r=()=>{!function lm(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Sn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,pl(t),t.isCheckStableRunning=!0,Cc(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),pl(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,c,f,y,C)=>{if(function hm(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(C))return s.invokeTask(c,f,y,C);try{return dm(t),s.invokeTask(c,f,y,C)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&r(),id(t)}},onInvoke:(s,a,c,f,y,C,P)=>{try{return dm(t),s.invoke(c,f,y,C,P)}finally{t.shouldCoalesceRunChangeDetection&&r(),id(t)}},onHasTask:(s,a,c,f)=>{s.hasTask(c,f),a===c&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,pl(t),Cc(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(s,a,c,f)=>(s.handleError(c,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Is.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(Is.isInAngularZone())throw new re(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,c){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+c,r,Zd,um,um);try{return f.runTask(y,s,a)}finally{f.cancelTask(y)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const Zd={};function Cc(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function pl(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function dm(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function id(t){t._nesting--,Cc(t)}class rE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vu,this.onMicrotaskEmpty=new vu,this.onStable=new vu,this.onError=new vu}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,c){return r.apply(s,a)}}const ry=new kt("",{providedIn:"root",factory:Cp});function Cp(){const t=wt(Is);let r=!0;const s=new j.y(c=>{r=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{c.next(r),c.complete()})}),a=new j.y(c=>{let f;t.runOutsideAngular(()=>{f=t.onStable.subscribe(()=>{Is.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(r=!0,c.next(!0))})})});const y=t.onUnstable.subscribe(()=>{Is.assertInAngularZone(),r&&(r=!1,t.runOutsideAngular(()=>{c.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,Te.T)(s,a.pipe((0,Se.B)()))}function Ku(t){return t instanceof Function?t():t}let Ap=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Xt({token:t,providedIn:"root",factory:()=>new t})}return t})();function Jd(t){for(;t;){t[gn]|=64;const r=Bc(t);if(Xa(t)&&!r)return t;t=r}return null}const uy=new kt("",{providedIn:"root",factory:()=>!1});let Rp=null;function Pp(t,r){return t[r]??Mp()}function ly(t,r){const s=Mp();s.producerNode?.length&&(t[r]=Rp,s.lView=t,Rp=dy())}const Em={...ba,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Jd(t.lView)},lView:null};function dy(){return Object.create(Em)}function Mp(){return Rp??=dy(),Rp}const Ln={};function xp(t){Op(Jn(),it(),N()+t,!1)}function Op(t,r,s,a){if(!a)if(3==(3&r[gn])){const f=t.preOrderCheckHooks;null!==f&&ys(r,f,s)}else{const f=t.preOrderHooks;null!==f&&ku(r,f,0,s)}q(s)}function ml(t,r=Je.Default){const s=it();return null===s?Qt(t,r):Qr(kn(),s,nt(t),r)}function sd(){throw new Error("invalid")}function Xd(t,r,s,a,c,f,y,C,P,L,W){const ne=r.blueprint.slice();return ne[ur]=c,ne[gn]=140|a,(null!==L||t&&2048&t[gn])&&(ne[gn]|=2048),ut(ne),ne[Un]=ne[ii]=t,ne[Tr]=s,ne[hi]=y||t&&t[hi],ne[Zt]=C||t&&t[Zt],ne[as]=P||t&&t[as]||null,ne[jr]=f,ne[Cs]=function Cd(){return Yr++}(),ne[As]=W,ne[Ja]=L,ne[Pr]=2==r.type?t[Pr]:ne,ne}function eh(t,r,s,a,c){let f=t.data[r];if(null===f)f=function uf(t,r,s,a,c){const f=cc(),y=ka(),P=t.data[r]=function Cm(t,r,s,a,c,f){let y=r?r.injectorIndex:-1,C=0;return au()&&(C|=128),{type:s,index:a,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,s,r,a,c);return null===t.firstChild&&(t.firstChild=P),null!==f&&(y?null==f.child&&null!==P.parent&&(f.child=P):null===f.next&&(f.next=P,P.prev=f)),P}(t,r,s,a,c),function lc(){return ln.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=s,f.value=a,f.attrs=c;const y=function dr(){const t=ln.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Ht(f,!0),f}function za(t,r,s,a){if(0===s)return-1;const c=r.length;for(let f=0;f<s;f++)r.push(a),t.blueprint.push(a),t.data.push(null);return c}function Np(t,r,s,a,c){const f=Pp(r,js),y=N(),C=2&a;try{q(-1),C&&r.length>Pn&&Op(t,r,Pn,!1),_i(C?2:0,c);const L=C?f:null,W=vo(L);try{null!==L&&(L.dirty=!1),s(a,c)}finally{Ru(L,W)}}finally{C&&null===r[js]&&ly(r,js),q(y),_i(C?3:1,c)}}function Im(t,r,s){if(go(r)){const a=si(null);try{const f=r.directiveEnd;for(let y=r.directiveStart;y<f;y++){const C=t.data[y];C.contentQueries&&C.contentQueries(1,s[y],y)}}finally{si(a)}}}function cf(t,r,s){ca()&&(function _y(t,r,s,a){const c=s.directiveStart,f=s.directiveEnd;Lo(s)&&function Om(t,r,s){const a=cs(r,t),c=fy(s);let y=16;s.signals?y=4096:s.onPush&&(y=64);const C=ff(t,Xd(t,c,null,y,a,r,null,t[hi].rendererFactory.createRenderer(a,s),null,null,null));t[r.index]=C}(r,s,t.data[c+s.componentOffset]),t.firstCreatePass||Va(s,r),Ns(a,r);const y=s.initialInputs;for(let C=c;C<f;C++){const P=t.data[C],L=Ms(r,t,C,s);Ns(L,r),null!==y&&vy(0,C-c,L,P,0,y),gs(P)&&(ir(s.index,r)[Tr]=Ms(r,t,C,s))}}(t,r,s,cs(s,r)),64==(64&s.flags)&&od(t,r,s))}function Tm(t,r,s=cs){const a=r.localNames;if(null!==a){let c=r.index+1;for(let f=0;f<a.length;f+=2){const y=a[f+1],C=-1===y?s(r,t):t[y];t[c++]=C}}}function fy(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=lf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function lf(t,r,s,a,c,f,y,C,P,L,W){const ne=Pn+a,Ie=ne+c,Pe=function uE(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:Ln);return s}(ne,Ie),Ye="function"==typeof L?L():L;return Pe[Et]={type:t,blueprint:Pe,template:s,queries:null,viewQuery:C,declTNode:r,data:Pe.slice().fill(null,ne),bindingStartIndex:ne,expandoStartIndex:Ie,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:P,consts:Ye,incompleteFirstPass:!1,ssrId:W}}let kp=t=>null;function Am(t,r,s,a){for(let c in t)if(t.hasOwnProperty(c)){s=null===s?{}:s;const f=t[c];null===a?gy(s,r,c,f):a.hasOwnProperty(c)&&gy(s,r,a[c],f)}return s}function gy(t,r,s,a){t.hasOwnProperty(s)?t[s].push(r,a):t[s]=[r,a]}function Pm(t,r,s,a){if(ca()){const c=null===a?null:{"":-1},f=function Lp(t,r){const s=t.directiveRegistry;let a=null,c=null;if(s)for(let f=0;f<s.length;f++){const y=s[f];if(qs(r,y.selectors,!1))if(a||(a=[]),gs(y))if(null!==y.findHostDirectiveDefs){const C=[];c=c||new Map,y.findHostDirectiveDefs(y,C,c),a.unshift(...C,y),xm(t,r,C.length)}else a.unshift(y),xm(t,r,0);else c=c||new Map,y.findHostDirectiveDefs?.(y,a,c),a.push(y)}return null===a?null:[a,c]}(t,s);let y,C;null===f?y=C=null:[y,C]=f,null!==y&&th(t,r,s,y,c,C),c&&function fE(t,r,s){if(r){const a=t.localNames=[];for(let c=0;c<r.length;c+=2){const f=s[r[c+1]];if(null==f)throw new re(-301,!1);a.push(r[c],f)}}}(s,a,c)}s.mergedAttrs=zn(s.mergedAttrs,s.attrs)}function th(t,r,s,a,c,f){for(let L=0;L<a.length;L++)Ua(Va(s,r),t,a[L].type);!function gE(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,a.length);for(let L=0;L<a.length;L++){const W=a[L];W.providersResolver&&W.providersResolver(W)}let y=!1,C=!1,P=za(t,r,a.length,null);for(let L=0;L<a.length;L++){const W=a[L];s.mergedAttrs=zn(s.mergedAttrs,W.hostAttrs),Fp(t,s,r,P,W),pE(P,W,c),null!==W.contentQueries&&(s.flags|=4),(null!==W.hostBindings||null!==W.hostAttrs||0!==W.hostVars)&&(s.flags|=64);const ne=W.type.prototype;!y&&(ne.ngOnChanges||ne.ngOnInit||ne.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),y=!0),!C&&(ne.ngOnChanges||ne.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),C=!0),P++}!function dE(t,r,s){const c=r.directiveEnd,f=t.data,y=r.attrs,C=[];let P=null,L=null;for(let W=r.directiveStart;W<c;W++){const ne=f[W],Ie=s?s.get(ne):null,Ye=Ie?Ie.outputs:null;P=Am(ne.inputs,W,P,Ie?Ie.inputs:null),L=Am(ne.outputs,W,L,Ye);const mt=null===P||null===y||Ws(r)?null:Nm(P,W,y);C.push(mt)}null!==P&&(P.hasOwnProperty("class")&&(r.flags|=8),P.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=C,r.inputs=P,r.outputs=L}(t,s,f)}function od(t,r,s){const a=s.directiveStart,c=s.directiveEnd,f=s.index,y=function Ou(){return ln.lFrame.currentDirectiveIndex}();try{q(f);for(let C=a;C<c;C++){const P=t.data[C],L=r[C];Yi(C),(null!==P.hostBindings||0!==P.hostVars||null!==P.hostAttrs)&&yy(P,L)}}finally{q(-1),Yi(y)}}function yy(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function xm(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function pE(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;gs(r)&&(s[""]=t)}}function Fp(t,r,s,a,c){t.data[a]=c;const f=c.factory||(c.factory=gi(c.type)),y=new Fa(f,gs(c),ml);t.blueprint[a]=y,s[a]=y,function hE(t,r,s,a,c){const f=c.hostBindings;if(f){let y=t.hostBindingOpCodes;null===y&&(y=t.hostBindingOpCodes=[]);const C=~r.index;(function Mm(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(y)!=C&&y.push(C),y.push(s,a,f)}}(t,r,a,za(t,s,c.hostVars,Ln),c)}function Eu(t,r,s,a,c,f){const y=cs(t,r);!function df(t,r,s,a,c,f,y){if(null==f)t.removeAttribute(r,c,s);else{const C=null==y?Ee(f):y(f,a||"",c);t.setAttribute(r,c,C,s)}}(r[Zt],y,f,t.value,s,a,c)}function vy(t,r,s,a,c,f){const y=f[r];if(null!==y)for(let C=0;C<y.length;)Vp(a,s,y[C++],y[C++],y[C++])}function Vp(t,r,s,a,c){const f=si(null);try{const y=t.inputTransforms;null!==y&&y.hasOwnProperty(a)&&(c=y[a].call(r,c)),null!==t.setInput?t.setInput(r,c,s,a):r[a]=c}finally{si(f)}}function Nm(t,r,s){let a=null,c=0;for(;c<s.length;){const f=s[c];if(0!==f)if(5!==f){if("number"==typeof f)break;if(t.hasOwnProperty(f)){null===a&&(a=[]);const y=t[f];for(let C=0;C<y.length;C+=2)if(y[C]===r){a.push(f,y[C+1],s[c+1]);break}}c+=2}else c+=2;else c+=4}return a}function hf(t,r,s,a){return[t,!0,!1,r,null,0,a,s,null,null,null]}function Up(t,r){const s=t.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const f=s[a+1];if(-1!==f){const y=t.data[f];Bo(s[a]),y.contentQueries(2,r[f],f)}}}function ff(t,r){return t[qi]?t[po][kr]=r:t[qi]=r,t[po]=r,r}function _l(t,r,s){Bo(0);const a=si(null);try{r(t,s)}finally{si(a)}}function Bp(t){return t[Js]||(t[Js]=[])}function km(t){return t.cleanup||(t.cleanup=[])}function jp(t,r){const s=t[as],a=s?s.get(Dc,null):null;a&&a.handleError(r)}function Lm(t,r,s,a,c){for(let f=0;f<s.length;){const y=s[f++],C=s[f++];Vp(t.data[y],r[y],a,C,c)}}function Gc(t,r,s){const a=function Oa(t,r){return or(r[t])}(r,t);!function _(t,r,s){t.setValue(r,s)}(t[Zt],a,s)}function _E(t,r){const s=ir(r,t),a=s[Et];!function Ey(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(a,s);const c=s[ur];null!==c&&null===s[As]&&(s[As]=mp(c,s[as])),Fm(a,s,s[Tr])}function Fm(t,r,s){Ne(r);try{const a=t.viewQuery;null!==a&&_l(1,a,s);const c=t.template;null!==c&&Np(t,r,c,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Up(t,r),t.staticViewQueries&&_l(2,t.viewQuery,s);const f=t.components;null!==f&&function Iy(t,r){for(let s=0;s<r.length;s++)_E(t,r[s])}(r,f)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[gn]&=-5,b()}}let Ty=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(s,a,c){const f=typeof Zone>"u"?null:Zone.current,y=function Ke(t,r,s){const a=Object.create(rr);s&&(a.consumerAllowSignalWrites=!0),a.fn=t,a.schedule=r;const c=y=>{a.cleanupFn=y};return a.ref={notify:()=>rc(a),run:()=>{if(a.dirty=!1,a.hasRun&&!Ra(a))return;a.hasRun=!0;const y=vo(a);try{a.cleanupFn(),a.cleanupFn=Lt,a.fn(c)}finally{Ru(a,y)}},cleanup:()=>a.cleanupFn()},a.ref}(s,L=>{this.all.has(L)&&this.queue.set(L,f)},c);let C;this.all.add(y),y.notify();const P=()=>{y.cleanup(),C?.(),this.all.delete(y),this.queue.delete(y)};return C=a?.onDestroy(P),{destroy:P}}flush(){if(0!==this.queue.size)for(const[s,a]of this.queue)this.queue.delete(s),a?a.run(()=>s.run()):s.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Xt({token:t,providedIn:"root",factory:()=>new t})}return t})();function $p(t,r,s){let a=s?t.styles:null,c=s?t.classes:null,f=0;if(null!==r)for(let y=0;y<r.length;y++){const C=r[y];"number"==typeof C?f=C:1==f?c=rt(c,C):2==f&&(a=rt(a,C+": "+r[++y]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=c:t.classesWithoutHost=c}function pf(t,r,s,a,c=!1){for(;null!==s;){const f=r[s.index];null!==f&&a.push(or(f)),bi(f)&&wy(f,a);const y=s.type;if(8&y)pf(t,r,s.child,a);else if(32&y){const C=ma(s,r);let P;for(;P=C();)a.push(P)}else if(16&y){const C=Dg(r,s);if(Array.isArray(C))a.push(...C);else{const P=Bc(r[Pr]);pf(P[Et],P,C,a,!0)}}s=c?s.projectionNext:s.next}return a}function wy(t,r){for(let s=pi;s<t.length;s++){const a=t[s],c=a[Et].firstChild;null!==c&&pf(a[Et],a,c,r)}t[Ki]!==t[ur]&&r.push(t[Ki])}function Hp(t,r,s,a=!0){const c=r[hi],f=c.rendererFactory,y=c.afterRenderEventManager;f.begin?.(),y?.begin();try{zp(t,r,t.template,s)}catch(P){throw a&&jp(r,P),P}finally{f.end?.(),c.effectManager?.flush(),y?.end()}}function zp(t,r,s,a){const c=r[gn];if(256!=(256&c)){r[hi].effectManager?.flush(),Ne(r);try{ut(r),function Uo(t){return ln.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&Np(t,r,s,2,a);const y=3==(3&c);if(y){const L=t.preOrderCheckHooks;null!==L&&ys(r,L,null)}else{const L=t.preOrderHooks;null!==L&&ku(r,L,0,null),hc(r,0)}if(function Cy(t){for(let r=zl(t);null!==r;r=Md(r)){if(!r[Ia])continue;const s=r[fi];for(let a=0;a<s.length;a++){lr(s[a])}}}(r),Vm(r,2),null!==t.contentQueries&&Up(t,r),y){const L=t.contentCheckHooks;null!==L&&ys(r,L)}else{const L=t.contentHooks;null!==L&&ku(r,L,1),hc(r,1)}!function hy(t,r){const s=t.hostBindingOpCodes;if(null===s)return;const a=Pp(r,Fi);try{for(let c=0;c<s.length;c++){const f=s[c];if(f<0)q(~f);else{const y=f,C=s[++c],P=s[++c];dc(C,y),a.dirty=!1;const L=vo(a);try{P(2,r[y])}finally{Ru(a,L)}}}}finally{null===r[Fi]&&ly(r,Fi),q(-1)}}(t,r);const C=t.components;null!==C&&er(r,C,0);const P=t.viewQuery;if(null!==P&&_l(2,P,a),y){const L=t.viewCheckHooks;null!==L&&ys(r,L)}else{const L=t.viewHooks;null!==L&&ku(r,L,2),hc(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[gn]&=-73,fr(r)}finally{b()}}}function Vm(t,r){for(let s=zl(t);null!==s;s=Md(s))for(let a=pi;a<s.length;a++)gf(s[a],r)}function Ay(t,r,s){gf(ir(r,t),s)}function gf(t,r){if(!function Mi(t){return 128==(128&t[gn])}(t))return;const s=t[Et],a=t[gn];if(80&a&&0===r||1024&a||2===r)zp(s,t,s.template,t[Tr]);else if(t[Si]>0){Vm(t,1);const c=s.components;null!==c&&er(t,c,1)}}function er(t,r,s){for(let a=0;a<r.length;a++)Ay(t,r[a],s)}class nh{get rootNodes(){const r=this._lView,s=r[Et];return pf(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Tr]}set context(r){this._lView[Tr]=r}get destroyed(){return 256==(256&this._lView[gn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Un];if(bi(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(qt(r,a),h(s,a))}this._attachedToViewContainer=!1}zt(this._lView[Et],this._lView)}onDestroy(r){!function Vt(t,r){if(256==(256&t[gn]))throw new re(911,!1);null===t[fs]&&(t[fs]=[]),t[fs].push(r)}(this._lView,r)}markForCheck(){Jd(this._cdRefInjectingView||this._lView)}detach(){this._lView[gn]&=-129}reattach(){this._lView[gn]|=128}detectChanges(){Hp(this._lView[Et],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function G(t,r){Mh(t,r,r[Zt],2,null,null)}(this._lView[Et],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=r}}class Sy extends nh{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Hp(r[Et],r,r[Tr],!1)}checkNoChanges(){}get context(){return null}}class rh extends Ep{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Rn(r);return new ya(s,this.ngModule)}}function Um(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class Ii{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){a=Ut(a);const c=this.injector.get(r,wc,a);return c!==wc||s===wc?c:this.parentInjector.get(r,s,a)}}class ya extends Z_{get inputs(){const r=this.componentDef,s=r.inputTransforms,a=Um(r.inputs);if(null!==s)for(const c of a)s.hasOwnProperty(c.propName)&&(c.transform=s[c.propName]);return a}get outputs(){return Um(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Er(t){return t.map(Ea).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,a,c){let f=(c=c||this.ngModule)instanceof Ic?c:c?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new Ii(r,f):r,C=y.get(tf,null);if(null===C)throw new re(407,!1);const ne={rendererFactory:C,sanitizer:y.get(J_,null),effectManager:y.get(Ty,null),afterRenderEventManager:y.get(Ap,null)},Ie=C.createRenderer(null,this.componentDef),Pe=this.componentDef.selectors[0][0]||"div",Ye=a?function wm(t,r,s,a){const f=a.get(uy,!1)||s===$t.ShadowDom,y=t.selectRootElement(r,f);return function cE(t){kp(t)}(y),y}(Ie,a,this.componentDef.encapsulation,y):p(Ie,Pe,function co(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Pe)),dn=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let ht=null;null!==Ye&&(ht=mp(Ye,y,!0));const On=lf(0,null,null,1,0,null,null,null,null,null,null),tr=Xd(null,On,null,dn,null,null,ne,Ie,y,null,ht);let Jr,Du;Ne(tr);try{const gd=this.componentDef;let Eg,VI=null;gd.findHostDirectiveDefs?(Eg=[],VI=new Map,gd.findHostDirectiveDefs(gd,Eg,VI),Eg.push(gd)):Eg=[gd];const qA=function EE(t,r){const s=t[Et],a=Pn;return t[a]=r,eh(s,a,2,"#host",null)}(tr,Ye),KA=function Gp(t,r,s,a,c,f,y){const C=c[Et];!function Ry(t,r,s,a){for(const c of t)r.mergedAttrs=zn(r.mergedAttrs,c.hostAttrs);null!==r.mergedAttrs&&($p(r,r.mergedAttrs,!0),null!==s&&Cg(a,s,r))}(a,t,r,y);let P=null;null!==r&&(P=mp(r,c[as]));const L=f.rendererFactory.createRenderer(r,s);let W=16;s.signals?W=4096:s.onPush&&(W=64);const ne=Xd(c,fy(s),null,W,c[t.index],t,f,L,null,null,P);return C.firstCreatePass&&xm(C,t,a.length-1),ff(c,ne),c[t.index]=ne}(qA,Ye,gd,Eg,tr,ne,Ie);Du=Io(On,Pn),Ye&&function IE(t,r,s,a){if(a)Zo(t,s,["ng-version",Tp.full]);else{const{attrs:c,classes:f}=function Ks(t){const r=[],s=[];let a=1,c=2;for(;a<t.length;){let f=t[a];if("string"==typeof f)2===c?""!==f&&r.push(f,t[++a]):8===c&&s.push(f);else{if(!ti(c))break;c=f}a++}return{attrs:r,classes:s}}(r.selectors[0]);c&&Zo(t,s,c),f&&f.length>0&&M_(t,s,f.join(" "))}}(Ie,gd,Ye,a),void 0!==s&&function jm(t,r,s){const a=t.projection=[];for(let c=0;c<r.length;c++){const f=s[c];a.push(null!=f?Array.from(f):null)}}(Du,this.ngContentSelectors,s),Jr=function Bm(t,r,s,a,c,f){const y=kn(),C=c[Et],P=cs(y,c);th(C,c,y,s,null,a);for(let W=0;W<s.length;W++)Ns(Ms(c,C,y.directiveStart+W,y),c);od(C,c,y),P&&Ns(P,c);const L=Ms(c,C,y.directiveStart+y.componentOffset,y);if(t[Tr]=c[Tr]=L,null!==f)for(const W of f)W(L,r);return Im(C,y,t),L}(KA,gd,Eg,VI,tr,[TE]),Fm(On,tr,null)}finally{b()}return new by(this.componentType,Jr,fl(Du,tr),tr,Du)}}class by extends Yv{constructor(r,s,a,c,f){super(),this.location=a,this._rootLView=c,this._tNode=f,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new Sy(c),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let c;if(null!==a&&(c=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const f=this._rootLView;Lm(f[Et],f,c,r,s),this.previousInputValues.set(r,s),Jd(ir(this._tNode.index,f))}}get injector(){return new Hr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function TE(){const t=kn();cu(it()[Et],t)}function zr(t){let r=function Py(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;r;){let c;if(gs(t))c=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new re(903,!1);c=r.\u0275dir}if(c){if(s){a.push(c);const y=t;y.inputs=$m(t.inputs),y.inputTransforms=$m(t.inputTransforms),y.declaredInputs=$m(t.declaredInputs),y.outputs=$m(t.outputs);const C=c.hostBindings;C&&wE(t,C);const P=c.viewQuery,L=c.contentQueries;if(P&&rs(t,P),L&&My(t,L),ae(t.inputs,c.inputs),ae(t.declaredInputs,c.declaredInputs),ae(t.outputs,c.outputs),null!==c.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),ae(y.inputTransforms,c.inputTransforms)),gs(c)&&c.data.animation){const W=t.data;W.animation=(W.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let y=0;y<f.length;y++){const C=f[y];C&&C.ngInherit&&C(t),C===zr&&(s=!1)}}r=Object.getPrototypeOf(r)}!function WI(t){let r=0,s=null;for(let a=t.length-1;a>=0;a--){const c=t[a];c.hostVars=r+=c.hostVars,c.hostAttrs=zn(c.hostAttrs,s=zn(s,c.hostAttrs))}}(a)}function $m(t){return t===tn?{}:t===Pt?[]:t}function rs(t,r){const s=t.viewQuery;t.viewQuery=s?(a,c)=>{r(a,c),s(a,c)}:r}function My(t,r){const s=t.contentQueries;t.contentQueries=s?(a,c,f)=>{r(a,c,f),s(a,c,f)}:r}function wE(t,r){const s=t.hostBindings;t.hostBindings=s?(a,c)=>{r(a,c),s(a,c)}:r}function Hm(t){const r=t.inputConfig,s={};for(const a in r)if(r.hasOwnProperty(a)){const c=r[a];Array.isArray(c)&&c[2]&&(s[a]=c[2])}t.inputTransforms=s}function qp(t){return!!Ly(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Ly(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Po(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function zm(t,r,s,a){const c=it();return Po(c,no(),r)&&(Jn(),Eu(te(),c,t,r,s,a)),zm}function kE(t,r,s,a,c,f,y,C){const P=it(),L=Jn(),W=t+Pn,ne=L.firstCreatePass?function NE(t,r,s,a,c,f,y,C,P){const L=r.consts,W=eh(r,t,4,y||null,Vo(L,C));Pm(r,s,W,Vo(L,P)),cu(r,W);const ne=W.tView=lf(2,W,a,c,f,r.directiveRegistry,r.pipeRegistry,null,r.schemas,L,null);return null!==r.queries&&(r.queries.template(r,W),ne.queries=r.queries.embeddedTView(W)),W}(W,L,P,r,s,a,c,f,y):L.data[W];Ht(ne,!1);const Ie=LE(L,P,ne,t);_s()&&kd(L,P,Ie,ne),Ns(Ie,P),ff(P,P[W]=hf(Ie,P,Ie,ne)),mo(ne)&&cf(L,P,ne),null!=y&&Tm(P,ne,C)}let LE=function Tl(t,r,s,a){return $s(!0),r[Zt].createComment("")};function zy(t){return ou(function gh(){return ln.lFrame.contextLView}(),Pn+t)}function rg(t,r,s){const a=it();return Po(a,no(),r)&&function Ga(t,r,s,a,c,f,y,C){const P=cs(r,s);let W,L=r.inputs;!C&&null!=L&&(W=L[a])?(Lm(t,s,W,a,c),Lo(r)&&function bm(t,r){const s=ir(r,t);16&s[gn]||(s[gn]|=64)}(s,r.index)):3&r.type&&(a=function Sm(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),c=null!=y?y(c,r.value||"",a):c,f.setProperty(P,a,c))}(Jn(),te(),a,t,r,a[Zt],s,!1),rg}function Zm(t,r,s,a,c){const y=c?"class":"style";Lm(t,s,r.inputs[y],y,a)}function ig(t,r,s,a){const c=it(),f=Jn(),y=Pn+t,C=c[Zt],P=f.firstCreatePass?function Dl(t,r,s,a,c,f){const y=r.consts,P=eh(r,t,2,a,Vo(y,c));return Pm(r,s,P,Vo(y,f)),null!==P.attrs&&$p(P,P.attrs,!1),null!==P.mergedAttrs&&$p(P,P.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,P),P}(y,f,c,r,s,a):f.data[y],L=Gy(f,c,P,C,r,t);c[y]=L;const W=mo(P);return Ht(P,!0),Cg(C,L,P),32!=(32&P.flags)&&_s()&&kd(f,c,L,P),0===function Xe(){return ln.lFrame.elementDepthCount}()&&Ns(L,c),function Dr(){ln.lFrame.elementDepthCount++}(),W&&(cf(f,c,P),Im(f,P,c)),null!==a&&Tm(c,P),ig}function sg(){let t=kn();ka()?Bn():(t=t.parent,Ht(t,!1));const r=t;(function Mu(t){return ln.skipHydrationRootTNode===t})(r)&&function _d(){ln.skipHydrationRootTNode=null}(),function ua(){ln.lFrame.elementDepthCount--}();const s=Jn();return s.firstCreatePass&&(cu(s,t),go(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function vd(t){return 0!=(8&t.flags)}(r)&&Zm(s,r,it(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function bl(t){return 0!=(16&t.flags)}(r)&&Zm(s,r,it(),r.stylesWithoutHost,!1),sg}function Qm(t,r,s,a){return ig(t,r,s,a),sg(),Qm}let Gy=(t,r,s,a,c,f)=>($s(!0),p(a,c,function pr(){return ln.lFrame.currentNamespace}()));function og(t,r,s){const a=it(),c=Jn(),f=t+Pn,y=c.firstCreatePass?function qy(t,r,s,a,c){const f=r.consts,y=Vo(f,a),C=eh(r,t,8,"ng-container",y);return null!==y&&$p(C,y,!0),Pm(r,s,C,Vo(f,c)),null!==r.queries&&r.queries.elementStart(r,C),C}(f,c,a,r,s):c.data[f];Ht(y,!0);const C=Ky(c,a,y,t);return a[f]=C,_s()&&kd(c,a,C,y),Ns(C,a),mo(y)&&(cf(c,a,y),Im(c,y,a)),null!=s&&Tm(a,y),og}function ag(){let t=kn();const r=Jn();return ka()?Bn():(t=t.parent,Ht(t,!1)),r.firstCreatePass&&(cu(r,t),go(t)&&r.queries.elementEnd(t)),ag}let Ky=(t,r,s,a)=>($s(!0),d(r[Zt],""));function VE(){return it()}function Xm(t){return!!t&&"function"==typeof t.then}function Zy(t){return!!t&&"function"==typeof t.subscribe}function e_(t,r,s,a){const c=it(),f=Jn(),y=kn();return function BE(t,r,s,a,c,f,y){const C=mo(a),L=t.firstCreatePass&&km(t),W=r[Tr],ne=Bp(r);let Ie=!0;if(3&a.type||y){const mt=cs(a,r),jt=y?y(mt):mt,dn=ne.length,ht=y?tr=>y(or(tr[a.index])):a.index;let On=null;if(!y&&C&&(On=function UE(t,r,s,a){const c=t.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const y=c[f];if(y===s&&c[f+1]===a){const C=r[Js],P=c[f+2];return C.length>P?C[P]:null}"string"==typeof y&&(f+=2)}return null}(t,r,c,a.index)),null!==On)(On.__ngLastListenerFn__||On).__ngNextListenerFn__=f,On.__ngLastListenerFn__=f,Ie=!1;else{f=$E(a,r,W,f,!1);const tr=s.listen(jt,c,f);ne.push(f,tr),L&&L.push(c,ht,dn,dn+1)}}else f=$E(a,r,W,f,!1);const Pe=a.outputs;let Ye;if(Ie&&null!==Pe&&(Ye=Pe[c])){const mt=Ye.length;if(mt)for(let jt=0;jt<mt;jt+=2){const Jr=r[Ye[jt]][Ye[jt+1]].subscribe(f),Du=ne.length;ne.push(f,Jr),L&&L.push(c,a.index,Du,-(Du+1))}}}(f,c,c[Zt],y,t,r,a),e_}function jE(t,r,s,a){try{return _i(6,r,s),!1!==s(a)}catch(c){return jp(t,c),!1}finally{_i(7,r,s)}}function $E(t,r,s,a,c){return function f(y){if(y===Function)return a;Jd(t.componentOffset>-1?ir(t.index,r):r);let P=jE(r,s,a,y),L=f.__ngNextListenerFn__;for(;L;)P=jE(r,s,L,y)&&P,L=L.__ngNextListenerFn__;return c&&!1===P&&y.preventDefault(),P}}function HE(t=1){return function I(t){return(ln.lFrame.contextLView=function R(t,r){for(;t>0;)r=r[ii],t--;return r}(t,ln.lFrame.contextLView))[Tr]}(t)}function zE(t,r){let s=null;const a=function va(t){const r=t.attrs;if(null!=r){const s=r.indexOf(5);if(!(1&s))return r[s+1]}return null}(t);for(let c=0;c<r.length;c++){const f=r[c];if("*"!==f){if(null===a?qs(t,f,!0):Xu(a,f))return c}else s=c}return s}function Yy(t){const r=it()[Pr][jr];if(!r.projection){const a=r.projection=m(t?t.length:1,null),c=a.slice();let f=r.child;for(;null!==f;){const y=t?zE(f,t):0;null!==y&&(c[y]?c[y].projectionNext=f:a[y]=f,c[y]=f),f=f.next}}}function Jy(t,r=0,s){const a=it(),c=Jn(),f=eh(c,Pn+t,16,null,s||null);null===f.projection&&(f.projection=r),Bn(),(!a[As]||au())&&32!=(32&f.flags)&&function Ov(t,r,s){R_(r[Zt],0,r,s,ui(t,s,r),Sh(s.parent||r[jr],s,r))}(c,a,f)}function fv(t,r=""){const s=it(),a=Jn(),c=t+Pn,f=a.firstCreatePass?eh(a,c,1,r,null):a.data[c],y=f_(a,s,f,r,t);s[c]=y,_s()&&kd(a,s,y,f),Ht(f,!1)}let f_=(t,r,s,a,c)=>($s(!0),function Ec(t,r){return t.createText(r)}(r[Zt],a));function hg(t){return fg("",t,""),hg}function fg(t,r,s){const a=it(),c=function qc(t,r,s,a){return Po(t,no(),s)?r+Ee(s)+a:Ln}(a,t,r,s);return c!==Ln&&Gc(a,N(),c),fg}const Nf=void 0;var _w=["en",[["a","p"],["AM","PM"],Nf],[["AM","PM"],Nf,Nf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nf,"{1} 'at' {0}",Nf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function mw(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let pg={};function nI(t){const r=function yw(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=oT(r);if(s)return s;const a=r.split("-")[0];if(s=oT(a),s)return s;if("en"===a)return _w;throw new re(701,!1)}function sT(t){return nI(t)[gg.PluralCase]}function oT(t){return t in pg||(pg[t]=Sn.ng&&Sn.ng.common&&Sn.ng.common.locales&&Sn.ng.common.locales[t]),pg[t]}var gg=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(gg||{});const mg="en-US";let aT=mg;class kf{}class OT{}function yD(t,r){return new cI(t,r??null,[])}class cI extends kf{constructor(r,s,a){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new rh(this);const c=Ci(r);this._bootstrapComponents=Ku(c.bootstrap),this._r3Injector=ty(r,s,[{provide:kf,useValue:this},{provide:Ep,useValue:this.componentFactoryResolver},...a],ve(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class lI extends OT{constructor(r){super(),this.moduleType=r}create(r){return new cI(this.moduleType,r,[])}}class NT extends kf{constructor(r){super(),this.componentFactoryResolver=new rh(this),this.instance=null;const s=new Xl([...r.providers,{provide:kf,useValue:this},{provide:Ep,useValue:this.componentFactoryResolver}],r.parent||Jl(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function kT(t,r,s=null){return new NT({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let ED=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const a=Vg(0,s.type),c=a.length>0?kT([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,c)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Xt({token:t,providedIn:"environment",factory:()=>new t(Qt(Ic))})}return t})();function LT(t){t.getStandaloneInjector=r=>r.get(ED).getOrCreateStandaloneInjector(t)}function HT(t,r,s,a,c,f){const y=r+s;return Po(t,y,c)?function Wa(t,r,s){return t[r]=s}(t,y+1,f?a.call(f,c):a(c)):function T_(t,r){const s=t[r];return s===Ln?void 0:s}(t,y+1)}function KT(t,r){const s=Jn();let a;const c=t+Pn;s.firstCreatePass?(a=function UD(t,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(t===a.name)return a}}(r,s.pipeRegistry),s.data[c]=a,a.onDestroy&&(s.destroyHooks??=[]).push(c,a.onDestroy)):a=s.data[c];const f=a.factory||(a.factory=gi(a.type)),C=Nn(ml);try{const P=fc(!1),L=f();return fc(P),function wl(t,r,s,a){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=a}(s,it(),c,L),L}finally{Nn(C)}}function ZT(t,r,s){const a=t+Pn,c=it(),f=ou(c,a);return function w_(t,r){return t[Et].data[r].pure}(c,a)?HT(c,function Lr(){const t=ln.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}(),r,f.transform,s,f):f.transform(s)}function zD(){return this._results[Symbol.iterator]()}class hI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new vu)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=hI.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=zD)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const c=function vs(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function nl(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let c=t[a],f=r[a];if(s&&(c=s(c),f=s(f)),f!==c)return!1}return!0}(a._results,c,s))&&(a._results=c,a.length=c.length,a.last=c[this.length-1],a.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function WD(t,r,s,a=!0){const c=r[Et];if(function xe(t,r,s,a){const c=pi+a,f=s.length;a>0&&(s[c-1][kr]=r),a<f-pi?(r[kr]=s[c],v(s,pi+a,r)):(s.push(r),r[kr]=null),r[Un]=s;const y=r[Kn];null!==y&&s!==y&&function tt(t,r){const s=t[fi];r[Pr]!==r[Un][Un][Pr]&&(t[Ia]=!0),null===s?t[fi]=[r]:s.push(r)}(y,r);const C=r[Kr];null!==C&&C.insertView(t),r[gn]|=128}(c,r,t,s),a){const f=Rh(s,t),y=r[Zt],C=mu(y,t[Ki]);null!==C&&function k(t,r,s,a,c,f){a[ur]=c,a[jr]=r,Mh(t,a,s,1,c,f)}(c,t[jr],y,r,C,f)}}let D_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=ZD}return t})();const qD=D_,KD=class extends qD{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,a){const c=function GD(t,r,s,a){const c=r.tView,C=Xd(t,c,s,4096&t[gn]?4096:16,null,r,null,null,null,a?.injector??null,a?.hydrationInfo??null);C[Kn]=t[r.index];const L=t[Kr];return null!==L&&(C[Kr]=L.createEmbeddedView(c)),Fm(c,C,s),C}(this._declarationLView,this._declarationTContainer,r,{injector:s,hydrationInfo:a});return new nh(c)}};function ZD(){return wv(kn(),it())}function wv(t,r){return 4&t.type?new KD(r,t,fl(t,r)):null}let Cv=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=tC}return t})();function tC(){return n0(kn(),it())}const nC=Cv,e0=class extends nC{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return fl(this._hostTNode,this._hostLView)}get injector(){return new Hr(this._hostTNode,this._hostLView)}get parentInjector(){const r=Vu(this._hostTNode,this._hostLView);if(Rl(r)){const s=du(r,this._hostLView),a=da(r);return new Hr(s[Et].data[a+8],s)}return new Hr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=t0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-pi}createEmbeddedView(r,s,a){let c,f;"number"==typeof a?c=a:null!=a&&(c=a.index,f=a.injector);const C=r.createEmbeddedViewImpl(s||{},f,null);return this.insertImpl(C,c,false),C}createComponent(r,s,a,c,f){const y=r&&!function Vc(t){return"function"==typeof t}(r);let C;if(y)C=s;else{const mt=s||{};C=mt.index,a=mt.injector,c=mt.projectableNodes,f=mt.environmentInjector||mt.ngModuleRef}const P=y?r:new ya(Rn(r)),L=a||this.parentInjector;if(!f&&null==P.ngModule){const jt=(y?L:this.parentInjector).get(Ic,null);jt&&(f=jt)}Rn(P.componentType??{});const Pe=P.create(L,c,null,f);return this.insertImpl(Pe.hostView,C,false),Pe}insert(r,s){return this.insertImpl(r,s,!1)}insertImpl(r,s,a){const c=r._lView;if(function to(t){return bi(t[Un])}(c)){const P=this.indexOf(r);if(-1!==P)this.detach(P);else{const L=c[Un],W=new e0(L,L[jr],L[Un]);W.detach(W.indexOf(r))}}const y=this._adjustIndex(s),C=this._lContainer;return WD(C,c,y,!a),r.attachToViewContainerRef(),v(fI(C),y,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=t0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=qt(this._lContainer,s);a&&(h(fI(this._lContainer),s),zt(a[Et],a))}detach(r){const s=this._adjustIndex(r,-1),a=qt(this._lContainer,s);return a&&null!=h(fI(this._lContainer),s)?new nh(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function t0(t){return t[8]}function fI(t){return t[8]||(t[8]=[])}function n0(t,r){let s;const a=r[t.index];return bi(a)?s=a:(s=hf(a,r,null,t),r[t.index]=s,ff(r,s)),r0(s,r,t,a),new e0(s,t,r)}let r0=function s0(t,r,s,a){if(t[Ki])return;let c;c=8&s.type?or(a):function rC(t,r){const s=t[Zt],a=s.createComment(""),c=cs(r,t);return Gu(s,mu(s,c),a,function Ah(t,r){return t.nextSibling(r)}(s,c),!1),a}(r,s),t[Ki]=c};class pI{constructor(r){this.queryList=r,this.matches=null}clone(){return new pI(this.queryList)}setDirty(){this.queryList.setDirty()}}class gI{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,c=[];for(let f=0;f<a;f++){const y=s.getByIndex(f);c.push(this.queries[y.indexInDeclarationView].clone())}return new gI(c)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==p0(r,s).matches&&this.queries[s].setDirty()}}class o0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class mI{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const c=null!==s?s.length:0,f=this.getByIndex(a).embeddedTView(r,c);f&&(f.indexInDeclarationView=a,null!==s?s.push(f):s=[f])}return null!==s?new mI(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class _I{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new _I(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let c=0;c<a.length;c++){const f=a[c];this.matchTNodeWithReadOption(r,s,oC(s,f)),this.matchTNodeWithReadOption(r,s,ar(s,r,f,!1,!1))}else a===D_?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,ar(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const c=this.metadata.read;if(null!==c)if(c===Tc||c===Cv||c===D_&&4&s.type)this.addMatch(s.index,-2);else{const f=ar(s,r,c,!1,!1);null!==f&&this.addMatch(s.index,f)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function oC(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function uC(t,r,s,a){return-1===s?function aC(t,r){return 11&t.type?fl(t,r):4&t.type?wv(t,r):null}(r,t):-2===s?function cC(t,r,s){return s===Tc?fl(r,t):s===D_?wv(r,t):s===Cv?n0(r,t):void 0}(t,r,a):Ms(t,t[Et],s,r)}function a0(t,r,s,a){const c=r[Kr].queries[a];if(null===c.matches){const f=t.data,y=s.matches,C=[];for(let P=0;P<y.length;P+=2){const L=y[P];C.push(L<0?null:uC(r,f[L],y[P+1],s.metadata.read))}c.matches=C}return c.matches}function yI(t,r,s,a){const c=t.queries.getByIndex(s),f=c.matches;if(null!==f){const y=a0(t,r,c,s);for(let C=0;C<f.length;C+=2){const P=f[C];if(P>0)a.push(y[C/2]);else{const L=f[C+1],W=r[-P];for(let ne=pi;ne<W.length;ne++){const Ie=W[ne];Ie[Kn]===Ie[Un]&&yI(Ie[Et],Ie,L,a)}if(null!==W[fi]){const ne=W[fi];for(let Ie=0;Ie<ne.length;Ie++){const Pe=ne[Ie];yI(Pe[Et],Pe,L,a)}}}}}return a}function u0(t){const r=it(),s=Jn(),a=Mc();Bo(a+1);const c=p0(s,a);if(t.dirty&&function ls(t){return 4==(4&t[gn])}(r)===(2==(2&c.metadata.flags))){if(null===c.matches)t.reset([]);else{const f=c.crossesNgTemplate?yI(s,r,a,[]):a0(s,r,c,a);t.reset(f,Qg),t.notifyOnChanges()}return!0}return!1}function c0(t,r,s){const a=Jn();a.firstCreatePass&&(f0(a,new o0(t,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),h0(a,it(),r)}function l0(t,r,s,a){const c=Jn();if(c.firstCreatePass){const f=kn();f0(c,new o0(r,s,a),f.index),function dC(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(c,t),2==(2&s)&&(c.staticContentQueries=!0)}h0(c,it(),s)}function d0(){return function lC(t,r){return t[Kr].queries[r].queryList}(it(),Mc())}function h0(t,r,s){const a=new hI(4==(4&s));(function py(t,r,s,a){const c=Bp(r);c.push(s),t.firstCreatePass&&km(t).push(a,c.length-1)})(t,r,a,a.destroy),null===r[Kr]&&(r[Kr]=new gI),r[Kr].queries.push(new pI(a))}function f0(t,r,s){null===t.queries&&(t.queries=new mI),t.queries.track(new _I(r,s))}function p0(t,r){return t.queries.getByIndex(r)}function g0(t,r){return wv(t,r)}function vI(t){return!!Ci(t)}const x0=new kt("Application Initializer");let DI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,a)=>{this.resolve=s,this.reject=a}),this.appInits=wt(x0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const c of this.appInits){const f=c();if(Xm(f))s.push(f);else if(Zy(f)){const y=new Promise((C,P)=>{f.subscribe({complete:C,error:P})});s.push(y)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{a()}).catch(c=>{this.reject(c)}),0===s.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Xt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),O0=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Xt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Sv=new kt("LocaleId",{providedIn:"root",factory:()=>wt(Sv,Je.Optional|Je.SkipSelf)||function xC(){return typeof $localize<"u"&&$localize.locale||mg}()}),OC=new kt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let N0=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new me.X(!1)}add(){this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Xt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class kC{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let LC=(()=>{class t{compileModuleSync(s){return new lI(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),f=Ku(Ci(s).declarations).reduce((y,C)=>{const P=Rn(C);return P&&y.push(new ya(P)),y},[]);return new kC(a,f)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Xt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const V0=new kt(""),U0=new kt("");let SI,iA=(()=>{class t{constructor(s,a,c){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,SI||(function sA(t){SI=t}(c),c.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Is.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,c){let f=-1;a&&a>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:f,updateCb:c})}whenStable(s,a,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,c){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(Qt(Is),Qt(B0),Qt(U0))};static#t=this.\u0275prov=Xt({token:t,factory:t.\u0275fac})}return t})(),B0=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return SI?.findTestabilityInTree(this,s,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Xt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),ph=null;const j0=new kt("AllowMultipleToken"),bI=new kt("PlatformDestroyListeners"),RI=new kt("appBootstrapListener");class uA{constructor(r,s){this.name=r,this.token=s}}function z0(t,r,s=[]){const a=`Platform: ${r}`,c=new kt(a);return(f=[])=>{let y=PI();if(!y||y.injector.get(j0,!1)){const C=[...s,...f,{provide:c,useValue:!0}];t?t(C):function cA(t){if(ph&&!ph.get(j0,!1))throw new re(400,!1);(function $0(){!function Pc(t){us=t}(()=>{throw new re(600,!1)})})(),ph=t;const r=t.get(W0);(function H0(t){t.get(cp,null)?.forEach(s=>s())})(t)}(function G0(t=[],r){return qu.create({name:r,providers:[{provide:jg,useValue:"platform"},{provide:bI,useValue:new Set([()=>ph=null])},...t]})}(C,a))}return function dA(t){const r=PI();if(!r)throw new re(401,!1);return r}()}}function PI(){return ph?.get(W0)??null}let W0=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const c=function hA(t="zone.js",r){return"noop"===t?new rE:"zone.js"===t?new Is(r):t}(a?.ngZone,function q0(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return c.run(()=>{const f=function vD(t,r,s){return new cI(t,r,s)}(s.moduleType,this.injector,function J0(t){return[{provide:Is,useFactory:t},{provide:Bh,multi:!0,useFactory:()=>{const r=wt(pA,{optional:!0});return()=>r.initialize()}},{provide:Y0,useFactory:fA},{provide:ry,useFactory:Cp}]}(()=>c)),y=f.injector.get(Dc,null);return c.runOutsideAngular(()=>{const C=c.onError.subscribe({next:P=>{y.handleError(P)}});f.onDestroy(()=>{Rv(this._modules,f),C.unsubscribe()})}),function K0(t,r,s){try{const a=s();return Xm(a)?a.catch(c=>{throw r.runOutsideAngular(()=>t.handleError(c)),c}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(y,c,()=>{const C=f.injector.get(DI);return C.runInitializers(),C.donePromise.then(()=>(function uT(t){_t(t,"Expected localeId to be defined"),"string"==typeof t&&(aT=t.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Sv,mg)||mg),this._moduleDoBootstrap(f),f))})})}bootstrapModule(s,a=[]){const c=Z0({},a);return function oA(t,r,s){const a=new lI(s);return Promise.resolve(a)}(0,0,s).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(s){const a=s.injector.get(vg);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(c=>a.bootstrap(c));else{if(!s.instance.ngDoBootstrap)throw new re(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new re(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(bI,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||t)(Qt(qu))};static#t=this.\u0275prov=Xt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Z0(t,r){return Array.isArray(r)?r.reduce(Z0,t):{...t,...r}}let vg=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=wt(Y0),this.zoneIsStable=wt(ry),this.componentTypes=[],this.components=[],this.isStable=wt(N0).hasPendingTasks.pipe((0,V.w)(s=>s?(0,ye.of)(!1):this.zoneIsStable),(0,ke.x)(),(0,Se.B)()),this._injector=wt(Ic)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const c=s instanceof Z_;if(!this._injector.get(DI).done)throw!c&&Bs(s),new re(405,!1);let y;y=c?s:this._injector.get(Ep).resolveComponentFactory(s),this.componentTypes.push(y.componentType);const C=function aA(t){return t.isBoundToModule}(y)?void 0:this._injector.get(kf),L=y.create(qu.NULL,[],a||y.selector,C),W=L.location.nativeElement,ne=L.injector.get(V0,null);return ne?.registerApplication(W),L.onDestroy(()=>{this.detachView(L.hostView),Rv(this.components,L),ne?.unregisterApplication(W)}),this._loadComponent(L),L}tick(){if(this._runningTick)throw new re(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Rv(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(RI,[]);a.push(...this._bootstrapListeners),a.forEach(c=>c(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Rv(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new re(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Xt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Rv(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}const Y0=new kt("",{providedIn:"root",factory:()=>wt(Dc).handleError.bind(void 0)});function fA(){const t=wt(Is),r=wt(Dc);return s=>t.runOutsideAngular(()=>r.handleError(s))}let pA=(()=>{class t{constructor(){this.zone=wt(Is),this.applicationRef=wt(vg)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Xt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mA(){return!1}let _A=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=yA}return t})();function yA(t){return function vA(t,r,s){if(Lo(t)&&!s){const a=ir(t.index,r);return new nh(a,a)}return 47&t.type?new nh(r[Pr],r):null}(kn(),it(),16==(16&t))}class nw{constructor(){}supports(r){return qp(r)}create(r){return new CA(r)}}const DA=(t,r)=>r;class CA{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||DA}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,c=0,f=null;for(;s||a;){const y=!a||s&&s.currentIndex<iw(a,c,f)?s:a,C=iw(y,c,f),P=y.currentIndex;if(y===a)c--,a=a._nextRemoved;else if(s=s._next,null==y.previousIndex)c++;else{f||(f=[]);const L=C-c,W=P-c;if(L!=W){for(let Ie=0;Ie<L;Ie++){const Pe=Ie<f.length?f[Ie]:f[Ie]=0,Ye=Pe+Ie;W<=Ye&&Ye<L&&(f[Ie]=Pe+1)}f[y.previousIndex]=W-L}}C!==P&&r(y,C,P)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!qp(r))throw new re(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let c,f,y,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let C=0;C<this.length;C++)f=r[C],y=this._trackByFn(C,f),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,f,y,C)),Object.is(s.item,f)||this._addIdentityChange(s,f)):(s=this._mismatch(s,f,y,C),a=!0),s=s._next}else c=0,function Wc(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,C=>{y=this._trackByFn(c,C),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,C,y,c)),Object.is(s.item,C)||this._addIdentityChange(s,C)):(s=this._mismatch(s,C,y,c),a=!0),s=s._next,c++}),this.length=c;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,c){let f;return null===r?f=this._itTail:(f=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,f,c)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,c))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,f,c)):r=this._addAfter(new AA(s,a),f,c),r}_verifyReinsertion(r,s,a,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==f?r=this._reinsertAfter(f,r._prev,c):r.currentIndex!=c&&(r.currentIndex=c,this._addToMoves(r,c)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const c=r._prevRemoved,f=r._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const c=null===s?this._itHead:s._next;return r._next=c,r._prev=s,null===c?this._itTail=r:c._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new rw),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class AA{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class SA{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class rw{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new SA,this.map.set(s,a)),a.add(r)}get(r,s){const c=this.map.get(r);return c?c.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function iw(t,r,s){const a=t.previousIndex;if(null===a)return a;let c=0;return s&&a<s.length&&(c=s[a]),a+r+c}class sw{constructor(){}supports(r){return r instanceof Map||Ly(r)}create(){return new bA}}class bA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Ly(r)))throw new re(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,c)=>{if(s&&s.key===c)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const f=this._getOrCreateRecordForKey(c,a);s=this._insertBeforeOrAppend(s,f)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const c=this._records.get(r);this._maybeAddToChanges(c,s);const f=c._prev,y=c._next;return f&&(f._next=y),y&&(y._prev=f),c._next=null,c._prev=null,c}const a=new RA(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class RA{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ow(){return new kI([new nw])}let kI=(()=>{class t{static#e=this.\u0275prov=Xt({token:t,providedIn:"root",factory:ow});constructor(s){this.factories=s}static create(s,a){if(null!=a){const c=a.factories.slice();s=s.concat(c)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||ow()),deps:[[t,new Fr,new Br]]}}find(s){const a=this.factories.find(c=>c.supports(s));if(null!=a)return a;throw new re(901,!1)}}return t})();function aw(){return new LI([new sw])}let LI=(()=>{class t{static#e=this.\u0275prov=Xt({token:t,providedIn:"root",factory:aw});constructor(s){this.factories=s}static create(s,a){if(a){const c=a.factories.slice();s=s.concat(c)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||aw()),deps:[[t,new Fr,new Br]]}}find(s){const a=this.factories.find(c=>c.supports(s));if(a)return a;throw new re(901,!1)}}return t})();const xA=z0(null,"core",[]);let OA=(()=>{class t{constructor(s){}static#e=this.\u0275fac=function(a){return new(a||t)(Qt(vg))};static#t=this.\u0275mod=Wi({type:t});static#n=this.\u0275inj=Dn({})}return t})();function zA(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WA(t){const r=Rn(t);if(!r)return null;const s=new ya(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},7213:(Ft,He,$)=>{$.d(He,{zQ:()=>An,ww:()=>nn,rT:()=>Gt,f7:()=>_r,L6:()=>ot,_Q:()=>ue,lh:()=>gt,Qv:()=>Ze,nw:()=>Qn}),$(3956);var se=$(6814),j=$(5879),Te=$(8326),me=$(7217),ye=$(8645),Se=$(2096),V=$(5592),ke=$(2459),ie=$(3019),ae=$(3093),ve=$(4664),rt=$(7398),Ge=$(4552);class et extends ye.x{constructor(It=1/0,ge=1/0,he=Ge.l){super(),this._bufferSize=It,this._windowTime=ge,this._timestampProvider=he,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ge===1/0,this._bufferSize=Math.max(1,It),this._windowTime=Math.max(1,ge)}next(It){const{isStopped:ge,_buffer:he,_infiniteTimeWindow:Me,_timestampProvider:we,_windowTime:De}=this;ge||(he.push(It),!Me&&he.push(we.now()+De)),this._trimBuffer(),super.next(It)}_subscribe(It){this._throwIfClosed(),this._trimBuffer();const ge=this._innerSubscribe(It),{_infiniteTimeWindow:he,_buffer:Me}=this,we=Me.slice();for(let De=0;De<we.length&&!It.closed;De+=he?1:2)It.next(we[De]);return this._checkFinalizedStatuses(It),ge}_trimBuffer(){const{_bufferSize:It,_timestampProvider:ge,_buffer:he,_infiniteTimeWindow:Me}=this,we=(Me?1:2)*It;if(It<1/0&&we<he.length&&he.splice(0,he.length-we),!Me){const De=ge.now();let Le=0;for(let _t=1;_t<he.length&&he[_t]<=De;_t+=2)Le=_t;Le&&he.splice(0,Le+1)}}}var nt=$(3020);function pt(Tt,It,ge){let he,Me=!1;return Tt&&"object"==typeof Tt?({bufferSize:he=1/0,windowTime:It=1/0,refCount:Me=!1,scheduler:ge}=Tt):he=Tt??1/0,(0,nt.B)({connector:()=>new et(he,It,ge),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Me})}var ct=$(1374),Nt=$(4674);function pe(Tt,It){return(0,Nt.m)(It)?(0,ve.w)(()=>Tt,It):(0,ve.w)(()=>Tt)}var re=$(5137),Fe=$(2181),Ee=$(7142);const Ze=new j.OlP("angularfire2.auth.use-emulator"),ot=new j.OlP("angularfire2.auth.settings"),ue=new j.OlP("angularfire2.auth.tenant-id"),Gt=new j.OlP("angularfire2.auth.langugage-code"),gt=new j.OlP("angularfire2.auth.use-device-language"),_r=new j.OlP("angularfire.auth.persistence"),Qn=(Tt,It,ge,he,Me,we,De,Le)=>(0,me.cc)(`${Tt.name}.auth`,"AngularFireAuth",Tt.name,()=>{const _t=It.runOutsideAngular(()=>Tt.auth());if(ge&&_t.useEmulator(...ge),he&&(_t.tenantId=he),_t.languageCode=Me,we&&_t.useDeviceLanguage(),De)for(const[at,Vn]of Object.entries(De))_t.settings[at]=Vn;return Le&&_t.setPersistence(Le),_t},[ge,he,Me,we,De,Le]);let An=(()=>{class Tt{authState;idToken;user;idTokenResult;credential;constructor(ge,he,Me,we,De,Le,_t,at,Vn,St,un,Xt){const Wn=new ye.x,Dn=(0,Se.of)(void 0).pipe((0,ae.Q)(De.outsideAngular),(0,ve.w)(()=>we.runOutsideAngular(()=>Promise.resolve().then($.bind($,3956)))),(0,rt.U)(()=>(0,me.on)(ge,we,he)),(0,rt.U)(bn=>Qn(bn,we,Le,at,Vn,St,_t,un)),pt({bufferSize:1,refCount:!1}));if((0,se.PM)(Me))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Se.of)(null);else{Dn.pipe((0,ct.P)()).subscribe();const bn=Dn.pipe((0,ve.w)(Oe=>Oe.getRedirectResult().then(Qe=>Qe,()=>null)),Te.iC,pt({bufferSize:1,refCount:!1})),Hn=Dn.pipe((0,ve.w)(Oe=>new V.y(Qe=>({unsubscribe:we.runOutsideAngular(()=>Oe.onAuthStateChanged(fe=>Qe.next(fe),fe=>Qe.error(fe),()=>Qe.complete()))})))),xr=Dn.pipe((0,ve.w)(Oe=>new V.y(Qe=>({unsubscribe:we.runOutsideAngular(()=>Oe.onIdTokenChanged(fe=>Qe.next(fe),fe=>Qe.error(fe),()=>Qe.complete()))}))));this.authState=bn.pipe(pe(Hn),(0,re.R)(De.outsideAngular),(0,ae.Q)(De.insideAngular)),this.user=bn.pipe(pe(xr),(0,re.R)(De.outsideAngular),(0,ae.Q)(De.insideAngular)),this.idToken=this.user.pipe((0,ve.w)(Oe=>Oe?(0,ke.D)(Oe.getIdToken()):(0,Se.of)(null))),this.idTokenResult=this.user.pipe((0,ve.w)(Oe=>Oe?(0,ke.D)(Oe.getIdTokenResult()):(0,Se.of)(null))),this.credential=(0,ie.T)(bn,Wn,this.authState.pipe((0,Fe.h)(Oe=>!Oe))).pipe((0,rt.U)(Oe=>Oe?.user?Oe:null),(0,re.R)(De.outsideAngular),(0,ae.Q)(De.insideAngular))}return(0,me.pX)(this,Dn,we,{spy:{apply:(bn,Hn,xr)=>{(bn.startsWith("signIn")||bn.startsWith("createUser"))&&xr.then(Oe=>Wn.next(Oe))}}})}static \u0275fac=function(he){return new(he||Tt)(j.LFG(me.Dh),j.LFG(me.xv,8),j.LFG(j.Lbi),j.LFG(j.R0b),j.LFG(Te.HU),j.LFG(Ze,8),j.LFG(ot,8),j.LFG(ue,8),j.LFG(Gt,8),j.LFG(gt,8),j.LFG(_r,8),j.LFG(Te.Rf,8))};static \u0275prov=j.Yz7({token:Tt,factory:Tt.\u0275fac,providedIn:"any"})}return Tt})(),nn=(()=>{class Tt{constructor(){Ee.Z.registerVersion("angularfire",Te.q4.full,"auth-compat")}static \u0275fac=function(he){return new(he||Tt)};static \u0275mod=j.oAB({type:Tt});static \u0275inj=j.cJS({providers:[An]})}return Tt})()},9027:(Ft,He,$)=>{$.d(He,{ST:()=>g_,yb:()=>_v});var D=$(6814),se=$(5879),j=$(8326),Te=$(7217),me=$(7213),ye=$(6321),Se=$(5592),V=$(2459),ke=$(2096),ie=$(7921),ae=$(9360),ve=$(8251);function rt(){return(0,ae.e)((i,e)=>{let n,o=!1;i.subscribe((0,ve.x)(e,u=>{const l=n;n=u,o&&e.next([l,u]),o=!0}))})}var ue,Ge=$(7398),et=$(6699),nt=$(3997),pt=$(2181),Nt=($(3956),$(3106)),pe=$(5861),re=$(534),Fe=$(4537),Ee=$(7879),Ue=$(9058),Ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ot={},Gt=Gt||{},gt=Ze||self;function _r(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Qn(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var nn="closure_uid_"+(1e9*Math.random()>>>0),Tt=0;function It(i,e,n){return i.call.apply(i.bind,arguments)}function ge(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function he(i,e,n){return(he=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?It:ge).apply(null,arguments)}function Me(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function we(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(o,u,l){for(var g=Array(arguments.length-2),S=2;S<arguments.length;S++)g[S-2]=arguments[S];return e.prototype[u].apply(o,g)}}function De(){this.s=this.s,this.o=this.o}De.prototype.s=!1,De.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function An(i){Object.prototype.hasOwnProperty.call(i,nn)&&i[nn]||(i[nn]=++Tt)}(this)},De.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const _t=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function at(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function Vn(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(_r(o)){const u=i.length||0,l=o.length||0;i.length=u+l;for(let g=0;g<l;g++)i[u+g]=o[g]}else i.push(o)}}function St(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}St.prototype.h=function(){this.defaultPrevented=!0};var un=function(){if(!gt.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{gt.addEventListener("test",()=>{},e),gt.removeEventListener("test",()=>{},e)}catch{}return i}();function Xt(i){return/^[\s\xa0]*$/.test(i)}function Wn(){var i=gt.navigator;return i&&(i=i.userAgent)?i:""}function Dn(i){return-1!=Wn().indexOf(i)}function bn(i){return bn[" "](i),i}bn[" "]=function(){};var Je,i,xr=Dn("Opera"),Oe=Dn("Trident")||Dn("MSIE"),Qe=Dn("Edge"),fe=Qe||Oe,We=Dn("Gecko")&&!(-1!=Wn().toLowerCase().indexOf("webkit")&&!Dn("Edge"))&&!(Dn("Trident")||Dn("MSIE"))&&!Dn("Edge"),dt=-1!=Wn().toLowerCase().indexOf("webkit")&&!Dn("Edge");function cn(){var i=gt.document;return i?i.documentMode:void 0}e:{var en="",on=(i=Wn(),We?/rv:([^\);]+)(\)|;)/.exec(i):Qe?/Edge\/([\d\.]+)/.exec(i):Oe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):dt?/WebKit\/(\S+)/.exec(i):xr?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(on&&(en=on?on[1]:""),Oe){var Nn=cn();if(null!=Nn&&Nn>parseFloat(en)){Je=String(Nn);break e}}Je=en}var Sn=gt.document&&Oe&&(cn()||parseInt(Je,10))||void 0;function Rr(i,e){if(St.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(We){e:{try{bn(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:xo[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Rr.$.h.call(this)}}we(Rr,St);var xo={2:"touch",3:"pen",4:"mouse"};Rr.prototype.h=function(){Rr.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var kt="closure_listenable_"+(1e6*Math.random()|0),Fs=0;function En(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=u,this.key=++Fs,this.fa=this.ia=!1}function Gr(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function Ti(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function Wr(i){const e={};for(const n in i)e[n]=i[n];return e}const Vs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qr(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let l=0;l<Vs.length;l++)n=Vs[l],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function Xr(i){this.src=i,this.g={},this.h=0}function ei(i,e){var n=e.type;if(n in i.g){var l,o=i.g[n],u=_t(o,e);(l=0<=u)&&Array.prototype.splice.call(o,u,1),l&&(Gr(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function Cn(i,e,n,o){for(var u=0;u<i.length;++u){var l=i[u];if(!l.fa&&l.listener==e&&l.capture==!!n&&l.la==o)return u}return-1}Xr.prototype.add=function(i,e,n,o,u){var l=i.toString();(i=this.g[l])||(i=this.g[l]=[],this.h++);var g=Cn(i,e,o,u);return-1<g?(e=i[g],n||(e.ia=!1)):((e=new En(e,this.src,l,!!o,u)).ia=n,i.push(e)),e};var ki="closure_lm_"+(1e6*Math.random()|0),Ts={};function wi(i,e,n,o,u){if(o&&o.once)return Q(i,e,n,o,u);if(Array.isArray(e)){for(var l=0;l<e.length;l++)wi(i,e[l],n,o,u);return null}return n=rn(n),i&&i[kt]?i.O(e,n,Qn(o)?!!o.capture:!!o,u):de(i,e,n,!1,o,u)}function de(i,e,n,o,u,l){if(!e)throw Error("Invalid event type");var g=Qn(u)?!!u.capture:!!u,S=ft(i);if(S||(i[ki]=S=new Xr(i)),(n=S.add(e,n,o,g,l)).proxy)return n;if(o=function K(){const e=qe;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)un||(u=g),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Ce(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function Q(i,e,n,o,u){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Q(i,e[l],n,o,u);return null}return n=rn(n),i&&i[kt]?i.P(e,n,Qn(o)?!!o.capture:!!o,u):de(i,e,n,!0,o,u)}function Z(i,e,n,o,u){if(Array.isArray(e))for(var l=0;l<e.length;l++)Z(i,e[l],n,o,u);else o=Qn(o)?!!o.capture:!!o,n=rn(n),i&&i[kt]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=Cn(l=i.g[e],n,o,u))&&(Gr(l[n]),Array.prototype.splice.call(l,n,1),0==l.length&&(delete i.g[e],i.h--))):i&&(i=ft(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Cn(e,n,o,u)),(n=-1<i?e[i]:null)&&Y(n))}function Y(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[kt])ei(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(Ce(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=ft(e))?(ei(n,i),0==n.h&&(n.src=null,e[ki]=null)):Gr(i)}}}function Ce(i){return i in Ts?Ts[i]:Ts[i]="on"+i}function qe(i,e){if(i.fa)i=!0;else{e=new Rr(e,this);var n=i.listener,o=i.la||i.src;i.ia&&Y(i),i=n.call(o,e)}return i}function ft(i){return(i=i[ki])instanceof Xr?i:null}var Qt="__closure_events_fn_"+(1e9*Math.random()>>>0);function rn(i){return"function"==typeof i?i:(i[Qt]||(i[Qt]=function(e){return i.handleEvent(e)}),i[Qt])}function wt(){De.call(this),this.i=new Xr(this),this.S=this,this.J=null}function Ut(i,e){var n,o=i.J;if(o)for(n=[];o;o=o.J)n.push(o);if(i=i.S,o=e.type||e,"string"==typeof e)e=new St(e,i);else if(e instanceof St)e.target=e.target||i;else{var u=e;qr(e=new St(o,i),u)}if(u=!0,n)for(var l=n.length-1;0<=l;l--){var g=e.g=n[l];u=nr(g,o,!0,e)&&u}if(u=nr(g=e.g=i,o,!0,e)&&u,u=nr(g,o,!1,e)&&u,n)for(l=0;l<n.length;l++)u=nr(g=e.g=n[l],o,!1,e)&&u}function nr(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,l=0;l<e.length;++l){var g=e[l];if(g&&!g.fa&&g.capture==n){var S=g.listener,M=g.la||g.src;g.ia&&ei(i.i,g),u=!1!==S.call(M,o)&&u}}return u&&!o.defaultPrevented}we(wt,De),wt.prototype[kt]=!0,wt.prototype.removeEventListener=function(i,e,n,o){Z(this,i,e,n,o)},wt.prototype.N=function(){if(wt.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)Gr(n[o]);delete i.g[e],i.h--}}this.J=null},wt.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},wt.prototype.P=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var li=gt.JSON.stringify;function Za(){var i=yr;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var be=new class lo{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new lt,i=>i.reset());class lt{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function $t(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function tn(i){gt.setTimeout(()=>{throw i},0)}let Pt,sn=!1,yr=new class ze{constructor(){this.h=this.g=null}add(e,n){const o=be.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},vr=()=>{const i=gt.Promise.resolve(void 0);Pt=()=>{i.then(is)}};var is=()=>{for(var i;i=Za();){try{i.h.call(i.g)}catch(n){tn(n)}var e=be;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}sn=!1};function di(i,e){wt.call(this),this.h=i||1,this.g=e||gt,this.j=he(this.qb,this),this.l=Date.now()}function Li(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function Ko(i,e,n){if("function"==typeof i)n&&(i=he(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=he(i.handleEvent,i)}return 2147483647<Number(e)?-1:gt.setTimeout(i,e||0)}function Oo(i){i.g=Ko(()=>{i.g=null,i.i&&(i.i=!1,Oo(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}we(di,wt),(ue=di.prototype).ga=!1,ue.T=null,ue.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ut(this,"tick"),this.ga&&(Li(this),this.start()))}},ue.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ue.N=function(){di.$.N.call(this),Li(this),delete this.g};class Zo extends De{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Oo(this)}N(){super.N(),this.g&&(gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ws(i){De.call(this),this.h=i,this.g={}}we(ws,De);var ho=[];function zn(i,e,n,o){Array.isArray(n)||(n&&(ho[0]=n.toString()),n=ho);for(var u=0;u<n.length;u++){var l=wi(e,n[u],o||i.handleEvent,!1,i.h||i);if(!l)break;i.g[l.key]=l}}function Qo(i){Ti(i.g,function(e,n){this.g.hasOwnProperty(n)&&Y(e)},i),i.g={}}function zi(){this.g=!0}function No(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ti(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var l=u[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var g=1;g<u.length;g++)u[g]=""}}}return li(n)}catch{return e}}(i,n)+(o?" "+o:"")})}ws.prototype.N=function(){ws.$.N.call(this),Qo(this)},ws.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zi.prototype.Ea=function(){this.g=!1},zi.prototype.info=function(){};var os={},qs=null;function va(){return qs=qs||new wt}function Us(i){St.call(this,os.Ta,i)}function Yo(i){const e=va();Ut(e,new Us(e))}function Xu(i,e){St.call(this,os.STAT_EVENT,i),this.stat=e}function ni(i){const e=va();Ut(e,new Xu(e,i))}function Ea(i,e){St.call(this,os.Ua,i),this.size=e}function Er(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return gt.setTimeout(function(){i()},e)}os.Ta="serverreachability",we(Us,St),os.STAT_EVENT="statevent",we(Xu,St),os.Ua="timingevent",we(Ea,St);var Ks={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Gi={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Zs(){}function Jo(){}Zs.prototype.h=null;var ri,Wi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Qa(){St.call(this,"d")}function Xo(){St.call(this,"c")}function Qs(){}function Rn(i,e,n,o){this.l=i,this.j=e,this.m=n,this.W=o||1,this.U=new ws(this),this.P=Di,this.V=new di(i=fe?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ir}function Ir(){this.i=null,this.g="",this.h=!1}we(Qa,St),we(Xo,St),we(Qs,Zs),Qs.prototype.g=function(){return new XMLHttpRequest},Qs.prototype.i=function(){return{}},ri=new Qs;var Di=45e3,Bs={},Ci={};function Ai(i,e,n){i.L=1,i.v=Ds(qi(e)),i.s=n,i.S=!0,ko(i,null)}function ko(i,e){i.G=Date.now(),ur(i),i.A=qi(i.v);var n=i.A,o=i.W;Array.isArray(o)||(o=[String(o)]),ps(n.i,"t",o),i.C=0,n=i.l.J,i.h=new Ir,i.g=Rc(i.l,n?e:null,!i.s),0<i.O&&(i.M=new Zo(he(i.Pa,i,i.g),i.O)),zn(i.U,i.g,"readystatechange",i.nb),e=i.I?Wr(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),Yo(),function ss(i,e,n,o,u,l){i.info(function(){if(i.g)if(l)for(var g="",S=l.split("&"),M=0;M<S.length;M++){var F=S[M].split("=");if(1<F.length){var z=F[0];F=F[1];var X=z.split("_");g=2<=X.length&&"type"==X[1]?g+(z+"=")+F+"&":g+(z+"=redacted&")}}else g=null;else g=l;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+g})}(i.j,i.u,i.A,i.m,i.W,i.s)}function Ys(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function Ya(i,e,n){let u,o=!0;for(;!i.J&&i.C<n.length;){if(u=Au(i,n),u==Ci){4==e&&(i.o=4,ni(14),o=!1),No(i.j,i.m,null,"[Incomplete Response]");break}if(u==Bs){i.o=4,ni(15),No(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}No(i.j,i.m,u,null),Si(i,u)}Ys(i)&&u!=Ci&&u!=Bs&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,ni(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Eo(e),e.M=!0,ni(11))):(No(i.j,i.m,n,"[Invalid Chunked Response]"),kr(i),Un(i))}function Au(i,e){var n=i.C,o=e.indexOf("\n",n);return-1==o?Ci:(n=Number(e.substring(n,o)),isNaN(n)?Bs:(o+=1)+n>e.length?Ci:(e=e.slice(o,o+n),i.C=o+n,e))}function ur(i){i.Y=Date.now()+i.P,Et(i,i.P)}function Et(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Er(he(i.lb,i),e)}function gn(i){i.B&&(gt.clearTimeout(i.B),i.B=null)}function Un(i){0==i.l.H||i.J||Fo(i.l,i)}function kr(i){gn(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,Li(i.V),Qo(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Si(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||Lo(n.i,i)))if(!i.K&&Lo(n.i,i)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;Bi(n),ra(n)}ic(n),ni(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=Er(he(n.ib,n),6e3));if(1>=go(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else oa(n,11)}else if((i.K||n.g==i)&&Bi(n),!Xt(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let F=u[e];if(n.V=F[0],F=F[1],2==n.H)if("c"==F[0]){n.K=F[1],n.pa=F[2];const z=F[3];null!=z&&(n.ra=z,n.l.info("VER="+n.ra));const X=F[4];null!=X&&(n.Ga=X,n.l.info("SVER="+n.Ga));const _e=F[5];null!=_e&&"number"==typeof _e&&0<_e&&(n.L=o=1.5*_e,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const Ve=i.g;if(Ve){const yt=Ve.g?Ve.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yt){var l=o.i;l.g||-1==yt.indexOf("spdy")&&-1==yt.indexOf("quic")&&-1==yt.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(mo(l,l.h),l.h=null))}if(o.F){const At=Ve.g?Ve.g.getResponseHeader("X-HTTP-Session-Id"):null;At&&(o.Da=At,Kn(o.I,o.F,At))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var g=i;if((o=n).wa=oc(o,o.J?o.pa:null,o.Y),g.K){gs(o.i,g);var S=g,M=o.L;M&&S.setTimeout(M),S.B&&(gn(S),ur(S)),o.g=g}else Ra(o);0<n.j.length&&yo(n)}else"stop"!=F[0]&&"close"!=F[0]||oa(n,7);else 3==n.H&&("stop"==F[0]||"close"==F[0]?"stop"==F[0]?oa(n,7):ba(n):"noop"!=F[0]&&n.h&&n.h.Aa(F),n.A=0)}Yo()}catch{}}function Tr(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(_r(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function Js(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(_r(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function jr(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(_r(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length,l=0;l<u;l++)e.call(void 0,o[l],n&&n[l],i)}(ue=Rn.prototype).setTimeout=function(i){this.P=i},ue.nb=function(i){i=i.target;const e=this.M;e&&3==gi(i)?e.l():this.Pa(i)},ue.Pa=function(i){try{if(i==this.g)e:{const z=gi(this.g);var e=this.g.Ia();if(this.g.da(),!(3>z)&&(3!=z||fe||this.g&&(this.h.h||this.g.ja()||ms(this.g)))){this.J||4!=z||7==e||Yo(),gn(this);var n=this.g.da();this.ca=n;t:if(Ys(this)){var o=ms(this.g);i="";var u=o.length,l=4==gi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){kr(this),Un(this);var g="";break t}this.h.i=new gt.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:l&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,g=this.h.g}else g=this.g.ja();if(this.i=200==n,function Ws(i,e,n,o,u,l,g){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+l+" "+g})}(this.j,this.u,this.A,this.m,this.W,z,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var S,M=this.g;if((S=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xt(S)){var F=S;break t}}F=null}if(!(n=F)){this.i=!1,this.o=3,ni(12),kr(this),Un(this);break e}No(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Si(this,n)}this.S?(Ya(this,z,g),fe&&this.i&&3==z&&(zn(this.U,this.V,"tick",this.mb),this.V.start())):(No(this.j,this.m,g,null),Si(this,g)),4==z&&kr(this),this.i&&!this.J&&(4==z?Fo(this.l,this):(this.i=!1,ur(this)))}else(function ru(i){const e={};i=(i.g&&2<=gi(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<i.length;o++){if(Xt(i[o]))continue;var n=$t(i[o]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const l=e[u]||[];e[u]=l,l.push(n)}!function Gs(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<g.indexOf("Unknown SID")?(this.o=3,ni(12)):(this.o=0,ni(13)),kr(this),Un(this)}}}catch{}},ue.mb=function(){if(this.g){var i=gi(this.g),e=this.g.ja();this.C<e.length&&(gn(this),Ya(this,i,e),this.i&&4!=i&&ur(this))}},ue.cancel=function(){this.J=!0,kr(this)},ue.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Cu(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Yo(),ni(17)),kr(this),this.o=2,Un(this)):Et(this,this.Y-i)};var as=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zt(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Zt){this.h=i.h,po(this,i.j),this.s=i.s,this.g=i.g,ii(this,i.m),this.l=i.l;var e=i.i,n=new Su;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Pr(this,n),this.o=i.o}else i&&(e=String(i).match(as))?(this.h=!1,po(this,e[1]||"",!0),this.s=Kr(e[2]||""),this.g=Kr(e[3]||"",!0),ii(this,e[4]),this.l=Kr(e[5]||"",!0),Pr(this,e[6]||"",!0),this.o=Kr(e[7]||"")):(this.h=!1,this.i=new Su(null,this.h))}function qi(i){return new Zt(i)}function po(i,e,n){i.j=n?Kr(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function ii(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Pr(i,e,n){e instanceof Su?(i.i=e,function Ss(i,e){e&&!i.j&&(Vi(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(Ia(this,o),ps(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=Cs(e,Fi)),i.i=new Su(e,i.h))}function Kn(i,e,n){i.i.set(e,n)}function Ds(i){return Kn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Kr(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Cs(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,Ja),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Ja(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Zt.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Cs(e,fs,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Cs(e,fs,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(Cs(n,"/"==n.charAt(0)?js:As,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Cs(n,Pn)),i.join("")};var fs=/[#\/\?@]/g,As=/[#\?:]/g,js=/[#\?]/g,Fi=/[#\?@]/g,Pn=/#/g;function Su(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Vi(i){i.g||(i.g=new Map,i.h=0,i.i&&function hi(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var l=i[n].substring(0,o);u=i[n].substring(o+1)}else l=i[n];e(l,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ia(i,e){Vi(i),e=fi(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Ki(i,e){return Vi(i),e=fi(i,e),i.g.has(e)}function ps(i,e,n){Ia(i,e),0<n.length&&(i.i=null,i.g.set(fi(i,e),at(n)),i.h+=n.length)}function fi(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Qc(i){this.l=i||Zi,i=gt.PerformanceNavigationTiming?0<(i=gt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(gt.g&&gt.g.Ka&&gt.g.Ka()&&gt.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ue=Su.prototype).add=function(i,e){Vi(this),this.i=null,i=fi(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},ue.forEach=function(i,e){Vi(this),this.g.forEach(function(n,o){n.forEach(function(u){i.call(e,u,o,this)},this)},this)},ue.ta=function(){Vi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=i[o];for(let l=0;l<u.length;l++)n.push(e[o])}return n},ue.Z=function(i){Vi(this);let e=[];if("string"==typeof i)Ki(this,i)&&(e=e.concat(this.g.get(fi(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},ue.set=function(i,e){return Vi(this),this.i=null,Ki(this,i=fi(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ue.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},ue.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const l=encodeURIComponent(String(o)),g=this.Z(o);for(o=0;o<g.length;o++){var u=l;""!==g[o]&&(u+="="+encodeURIComponent(String(g[o]))),i.push(u)}}return this.i=i.join("&")};var Zi=10;function bi(i){return!!i.h||!!i.g&&i.g.size>=i.j}function go(i){return i.h?1:i.g?i.g.size:0}function Lo(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function mo(i,e){i.g?i.g.add(e):i.h=e}function gs(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Xa(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return at(i.i)}Qc.prototype.cancel=function(){if(this.i=Xa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var Ta=class{stringify(i){return gt.JSON.stringify(i,void 0)}parse(i){return gt.JSON.parse(i,void 0)}};function Vr(){this.g=new Ta}function bu(i,e,n){const o=n||"";try{Tr(i,function(u,l){let g=u;Qn(u)&&(g=li(u)),e.push(o+l+"="+encodeURIComponent(g))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function ta(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function Ui(i){this.l=i.ec||null,this.j=i.ob||!1}function eu(i,e){wt.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=tu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}we(Ui,Zs),Ui.prototype.g=function(){return new eu(this.l,this.j)},Ui.prototype.i=function(i){return function(){return i}}({}),we(eu,wt);var tu=0;function wr(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function wa(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Da(i)}function Da(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ue=eu.prototype).open=function(i,e){if(this.readyState!=tu)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Da(this)},ue.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||gt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ue.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,wa(this)),this.readyState=tu},ue.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Da(this)),this.g&&(this.readyState=3,Da(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof gt.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wr(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},ue.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?wa(this):Da(this),3==this.readyState&&wr(this)}},ue.Za=function(i){this.g&&(this.response=this.responseText=i,wa(this))},ue.Ya=function(i){this.g&&(this.response=i,wa(this))},ue.ka=function(){this.g&&wa(this)},ue.setRequestHeader=function(i,e){this.v.append(i,e)},ue.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ue.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(eu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var na=gt.JSON.parse;function cr(i){wt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ec,this.L=this.M=!1}we(cr,wt);var ec="",bc=/^https?$/i,_o=["POST","PUT"];function nu(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Aa(i),Sa(i)}function Aa(i){i.F||(i.F=!0,Ut(i,"complete"),Ut(i,"error"))}function tc(i){if(i.h&&typeof Gt<"u"&&(!i.C[1]||4!=gi(i)||2!=i.da()))if(i.v&&4==gi(i))Ko(i.La,0,i);else if(Ut(i,"readystatechange"),4==gi(i)){i.h=!1;try{const g=i.da();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===g){var u=String(i.I).match(as)[1]||null;!u&&gt.self&&gt.self.location&&(u=gt.self.location.protocol.slice(0,-1)),o=!bc.test(u?u.toLowerCase():"")}n=o}if(n)Ut(i,"complete"),Ut(i,"success");else{i.m=6;try{var l=2<gi(i)?i.g.statusText:""}catch{l=""}i.j=l+" ["+i.da()+"]",Aa(i)}}finally{Sa(i)}}}function Sa(i,e){if(i.g){nc(i);const n=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||Ut(i,"ready");try{n.onreadystatechange=o}catch{}}}function nc(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(gt.clearTimeout(i.A),i.A=null)}function gi(i){return i.g?i.g.readyState:0}function ms(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case ec:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function sr(i){let e="";return Ti(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function $r(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=sr(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):Kn(i,e,n))}function mi(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function si(i){this.Ga=0,this.j=[],this.l=new zi,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=mi("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=mi("baseRetryDelayMs",5e3,i),this.hb=mi("retryDelaySeedMs",1e4,i),this.eb=mi("forwardChannelMaxRetries",2,i),this.xa=mi("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new Qc(i&&i.concurrentRequestLimit),this.Ja=new Vr,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ba(i){if(ia(i),3==i.H){var e=i.W++,n=qi(i.I);if(Kn(n,"SID",i.K),Kn(n,"RID",e),Kn(n,"TYPE","terminate"),vo(i,n),(e=new Rn(i,i.l,e)).L=2,e.v=Ds(qi(n)),n=!1,gt.navigator&&gt.navigator.sendBeacon)try{n=gt.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&gt.Image&&((new Image).src=e.v,n=!0),n||(e.g=Rc(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ur(e)}sc(i)}function ra(i){i.g&&(Eo(i),i.g.cancel(),i.g=null)}function ia(i){ra(i),i.u&&(gt.clearTimeout(i.u),i.u=null),Bi(i),i.i.cancel(),i.m&&("number"==typeof i.m&&gt.clearTimeout(i.m),i.m=null)}function yo(i){if(!bi(i.i)&&!i.m){i.m=!0;var e=i.Na;Pt||vr(),sn||(Pt(),sn=!0),yr.add(e,i),i.C=0}}function rc(i,e){var n;n=e?e.m:i.W++;const o=qi(i.I);Kn(o,"SID",i.K),Kn(o,"RID",n),Kn(o,"AID",i.V),vo(i,o),i.o&&i.s&&$r(o,i.o,i.s),n=new Rn(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=Ru(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),mo(i.i,n),Ai(n,o,e)}function vo(i,e){i.na&&Ti(i.na,function(n,o){Kn(e,o,n)}),i.h&&Tr({},function(n,o){Kn(e,o,n)})}function Ru(i,e,n){n=Math.min(i.j.length,n);var o=i.h?he(i.h.Va,i.h,i):null;e:{var u=i.j;let l=-1;for(;;){const g=["count="+n];-1==l?0<n?(l=u[0].g,g.push("ofs="+l)):l=0:g.push("ofs="+l);let S=!0;for(let M=0;M<n;M++){let F=u[M].g;const z=u[M].map;if(F-=l,0>F)l=Math.max(0,u[M].g-100),S=!1;else try{bu(z,g,"req"+F+"_")}catch{o&&o(z)}}if(S){o=g.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,o}function Ra(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;Pt||vr(),sn||(Pt(),sn=!0),yr.add(e,i),i.A=0}}function ic(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=Er(he(i.Ma,i),Pa(i,i.A)),i.A++,0))}function Eo(i){null!=i.B&&(gt.clearTimeout(i.B),i.B=null)}function sa(i){i.g=new Rn(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=qi(i.wa);Kn(e,"RID","rpc"),Kn(e,"SID",i.K),Kn(e,"AID",i.V),Kn(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&Kn(e,"TO",i.qa),Kn(e,"TYPE","xmlhttp"),vo(i,e),i.o&&i.s&&$r(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.v=Ds(qi(e)),n.s=null,n.S=!0,ko(n,i)}function Bi(i){null!=i.v&&(gt.clearTimeout(i.v),i.v=null)}function Fo(i,e){var n=null;if(i.g==e){Bi(i),Eo(i),i.g=null;var o=2}else{if(!Lo(i.i,e))return;n=e.F,gs(i.i,e),o=1}if(0!=i.H)if(e.i)if(1==o){n=e.s?e.s.length:0,e=Date.now()-e.G;var u=i.C;Ut(o=va(),new Ea(o,n)),yo(i)}else Ra(i);else if(3==(u=e.o)||0==u&&0<e.ca||!(1==o&&function iu(i,e){return!(go(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=Er(he(i.Na,i,e),Pa(i,i.C)),i.C++,0)))}(i,e)||2==o&&ic(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:oa(i,5);break;case 4:oa(i,10);break;case 3:oa(i,6);break;default:oa(i,2)}}function Pa(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function oa(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var o=he(i.pb,i);n||(n=new Zt("//www.google.com/images/cleardot.gif"),gt.location&&"http"==gt.location.protocol||po(n,"https"),Ds(n)),function ea(i,e){const n=new zi;if(gt.Image){const o=new Image;o.onload=Me(ta,n,o,"TestLoadImage: loaded",!0,e),o.onerror=Me(ta,n,o,"TestLoadImage: error",!1,e),o.onabort=Me(ta,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=Me(ta,n,o,"TestLoadImage: timeout",!1,e),gt.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else ni(2);i.H=0,i.h&&i.h.za(e),sc(i),ia(i)}function sc(i){if(i.H=0,i.ma=[],i.h){const e=Xa(i.i);(0!=e.length||0!=i.j.length)&&(Vn(i.ma,e),Vn(i.ma,i.j),i.i.i.length=0,at(i.j),i.j.length=0),i.h.ya()}}function oc(i,e,n){var o=n instanceof Zt?qi(n):new Zt(n);if(""!=o.g)e&&(o.g=e+"."+o.g),ii(o,o.m);else{var u=gt.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var l=new Zt(null);o&&po(l,o),e&&(l.g=e),u&&ii(l,u),n&&(l.l=n),o=l}return e=i.Da,(n=i.F)&&e&&Kn(o,n,e),Kn(o,"VER",i.ra),vo(i,o),o}function Rc(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new cr(n&&i.Ha&&!i.va?new Ui({ob:!0}):i.va)).Oa(i.J),e}function Ma(){}function Pu(){if(Oe&&!(10<=Number(Sn)))throw Error("Environmental error: no available transport.")}function us(i,e){wt.call(this),this.g=new si(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!Xt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Xt(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Xs(this)}function xa(i){Qa.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Pc(){Xo.call(this),this.status=1}function Xs(i){this.g=i}function ji(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function uc(i,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)o[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)o[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var l=i.g[3],g=(e=i.g[0])+(l^(n=i.g[1])&((u=i.g[2])^l))+o[0]+3614090360&4294967295;g=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=n+(g<<7&4294967295|g>>>25))+((g=l+(u^e&(n^u))+o[1]+3905402710&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^l&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(l^e))+o[3]+3250441966&4294967295)<<22&4294967295|g>>>10))+((g=e+(l^n&(u^l))+o[4]+4118548399&4294967295)<<7&4294967295|g>>>25))+((g=l+(u^e&(n^u))+o[5]+1200080426&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^l&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(l^e))+o[7]+4249261313&4294967295)<<22&4294967295|g>>>10))+((g=e+(l^n&(u^l))+o[8]+1770035416&4294967295)<<7&4294967295|g>>>25))+((g=l+(u^e&(n^u))+o[9]+2336552879&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^l&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(l^e))+o[11]+2304563134&4294967295)<<22&4294967295|g>>>10))+((g=e+(l^n&(u^l))+o[12]+1804603682&4294967295)<<7&4294967295|g>>>25))+((g=l+(u^e&(n^u))+o[13]+4254626195&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^l&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(l^e))+o[15]+1236535329&4294967295)<<22&4294967295|g>>>10))+((g=e+(u^l&(n^u))+o[1]+4129170786&4294967295)<<5&4294967295|g>>>27))+((g=l+(n^u&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(l^e))+o[11]+643717713&4294967295)<<14&4294967295|g>>>18))+((g=n+(l^e&(u^l))+o[0]+3921069994&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^l&(n^u))+o[5]+3593408605&4294967295)<<5&4294967295|g>>>27))+((g=l+(n^u&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(l^e))+o[15]+3634488961&4294967295)<<14&4294967295|g>>>18))+((g=n+(l^e&(u^l))+o[4]+3889429448&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^l&(n^u))+o[9]+568446438&4294967295)<<5&4294967295|g>>>27))+((g=l+(n^u&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(l^e))+o[3]+4107603335&4294967295)<<14&4294967295|g>>>18))+((g=n+(l^e&(u^l))+o[8]+1163531501&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^l&(n^u))+o[13]+2850285829&4294967295)<<5&4294967295|g>>>27))+((g=l+(n^u&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(l^e))+o[7]+1735328473&4294967295)<<14&4294967295|g>>>18))+((g=n+(l^e&(u^l))+o[12]+2368359562&4294967295)<<20&4294967295|g>>>12))+((g=e+(n^u^l)+o[5]+4294588738&4294967295)<<4&4294967295|g>>>28))+((g=l+(e^n^u)+o[8]+2272392833&4294967295)<<11&4294967295|g>>>21))+((g=u+(l^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^l^e)+o[14]+4259657740&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^l)+o[1]+2763975236&4294967295)<<4&4294967295|g>>>28))+((g=l+(e^n^u)+o[4]+1272893353&4294967295)<<11&4294967295|g>>>21))+((g=u+(l^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^l^e)+o[10]+3200236656&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^l)+o[13]+681279174&4294967295)<<4&4294967295|g>>>28))+((g=l+(e^n^u)+o[0]+3936430074&4294967295)<<11&4294967295|g>>>21))+((g=u+(l^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^l^e)+o[6]+76029189&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^l)+o[9]+3654602809&4294967295)<<4&4294967295|g>>>28))+((g=l+(e^n^u)+o[12]+3873151461&4294967295)<<11&4294967295|g>>>21))+((g=u+(l^e^n)+o[15]+530742520&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^l^e)+o[2]+3299628645&4294967295)<<23&4294967295|g>>>9))+((g=e+(u^(n|~l))+o[0]+4096336452&4294967295)<<6&4294967295|g>>>26))+((g=l+(n^(e|~u))+o[7]+1126891415&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(l|~n))+o[14]+2878612391&4294967295)<<15&4294967295|g>>>17))+((g=n+(l^(u|~e))+o[5]+4237533241&4294967295)<<21&4294967295|g>>>11))+((g=e+(u^(n|~l))+o[12]+1700485571&4294967295)<<6&4294967295|g>>>26))+((g=l+(n^(e|~u))+o[3]+2399980690&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(l|~n))+o[10]+4293915773&4294967295)<<15&4294967295|g>>>17))+((g=n+(l^(u|~e))+o[1]+2240044497&4294967295)<<21&4294967295|g>>>11))+((g=e+(u^(n|~l))+o[8]+1873313359&4294967295)<<6&4294967295|g>>>26))+((g=l+(n^(e|~u))+o[15]+4264355552&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(l|~n))+o[6]+2734768916&4294967295)<<15&4294967295|g>>>17))+((g=n+(l^(u|~e))+o[13]+1309151649&4294967295)<<21&4294967295|g>>>11))+((l=(e=n+((g=e+(u^(n|~l))+o[4]+4149444226&4294967295)<<6&4294967295|g>>>26))+((g=l+(n^(e|~u))+o[11]+3174756917&4294967295)<<10&4294967295|g>>>22))^((u=l+((g=u+(e^(l|~n))+o[2]+718787259&4294967295)<<15&4294967295|g>>>17))|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(g<<21&4294967295|g>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+l&4294967295}function A(i,e){this.h=e;for(var n=[],o=!0,u=i.length-1;0<=u;u--){var l=0|i[u];o&&l==e||(n[u]=l,o=!1)}this.g=n}(ue=cr.prototype).Oa=function(i){this.M=i},ue.ha=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ri.g(),this.C=function fo(i){return i.h||(i.h=i.i())}(this.u?this.u:ri),this.g.onreadystatechange=he(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(l){return void nu(this,l)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const l of o.keys())n.set(l,o.get(l))}o=Array.from(n.keys()).find(l=>"content-type"==l.toLowerCase()),u=gt.FormData&&i instanceof gt.FormData,!(0<=_t(_o,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,g]of n)this.g.setRequestHeader(l,g);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{nc(this),0<this.B&&((this.L=function Ca(i){return Oe&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=he(this.ua,this)):this.A=Ko(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(l){nu(this,l)}},ue.ua=function(){typeof Gt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ut(this,"timeout"),this.abort(8))},ue.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Ut(this,"complete"),Ut(this,"abort"),Sa(this))},ue.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sa(this,!0)),cr.$.N.call(this)},ue.La=function(){this.s||(this.G||this.v||this.l?tc(this):this.kb())},ue.kb=function(){tc(this)},ue.isActive=function(){return!!this.g},ue.da=function(){try{return 2<gi(this)?this.g.status:-1}catch{return-1}},ue.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ue.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),na(e)}},ue.Ia=function(){return this.m},ue.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ue=si.prototype).ra=8,ue.H=1,ue.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new Rn(this,this.l,i);let l=this.s;if(this.U&&(l?(l=Wr(l),qr(l,this.U)):l=this.U),null!==this.o||this.O||(u.I=l,l=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Ru(this,u,e),Kn(n=qi(this.I),"RID",i),Kn(n,"CVER",22),this.F&&Kn(n,"X-HTTP-Session-Id",this.F),vo(this,n),l&&(this.O?e="headers="+encodeURIComponent(String(sr(l)))+"&"+e:this.o&&$r(n,this.o,l)),mo(this.i,u),this.bb&&Kn(n,"TYPE","init"),this.P?(Kn(n,"$req",e),Kn(n,"SID","null"),u.aa=!0,Ai(u,n,null)):Ai(u,n,e),this.H=2}}else 3==this.H&&(i?rc(this,i):0==this.j.length||bi(this.i)||rc(this))},ue.Ma=function(){if(this.u=null,sa(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=Er(he(this.jb,this),i)}},ue.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ni(10),ra(this),sa(this))},ue.ib=function(){null!=this.v&&(this.v=null,ra(this),ic(this),ni(19))},ue.pb=function(i){i?(this.l.info("Successfully pinged google.com"),ni(2)):(this.l.info("Failed to ping google.com"),ni(1))},ue.isActive=function(){return!!this.h&&this.h.isActive(this)},(ue=Ma.prototype).Ba=function(){},ue.Aa=function(){},ue.za=function(){},ue.ya=function(){},ue.isActive=function(){return!0},ue.Va=function(){},Pu.prototype.g=function(i,e){return new us(i,e)},we(us,wt),us.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;ni(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=oc(i,null,i.Y),yo(i)},us.prototype.close=function(){ba(this.g)},us.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=li(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&yo(e)},us.prototype.N=function(){this.g.h=null,delete this.j,ba(this.g),delete this.g,us.$.N.call(this)},we(xa,Qa),we(Pc,Xo),we(Xs,Ma),Xs.prototype.Ba=function(){Ut(this.g,"a")},Xs.prototype.Aa=function(i){Ut(this.g,new xa(i))},Xs.prototype.za=function(i){Ut(this.g,new Pc)},Xs.prototype.ya=function(){Ut(this.g,"b")},we(ji,function ac(){this.blockSize=-1}),ji.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ji.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,o=this.m,u=this.h,l=0;l<e;){if(0==u)for(;l<=n;)uc(this,i,l),l+=this.blockSize;if("string"==typeof i){for(;l<e;)if(o[u++]=i.charCodeAt(l++),u==this.blockSize){uc(this,o),u=0;break}}else for(;l<e;)if(o[u++]=i[l++],u==this.blockSize){uc(this,o),u=0;break}}this.h=u,this.i+=e},ji.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)i[n++]=this.g[e]>>>o&255;return i};var H={};function O(i){return-128<=i&&128>i?function Hn(i,e){var n=H;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new A([0|e],0>e?-1:0)}):new A([0|i],0>i?-1:0)}function B(i){if(isNaN(i)||!isFinite(i))return Ke;if(0>i)return Yt(B(-i));for(var e=[],n=1,o=0;i>=n;o++)e[o]=i/n|0,n*=Be;return new A(e,0)}var Be=4294967296,Ke=O(0),Lt=O(1),rr=O(16777216);function xn(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function yn(i){return-1==i.h}function Yt(i){for(var e=i.g.length,n=[],o=0;o<e;o++)n[o]=~i.g[o];return new A(n,~i.h).add(Lt)}function Tn(i,e){return i.add(Yt(e))}function Zn(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Or(i,e){this.g=i,this.h=e}function Ri(i,e){if(xn(e))throw Error("division by zero");if(xn(i))return new Or(Ke,Ke);if(yn(i))return e=Ri(Yt(i),e),new Or(Yt(e.g),Yt(e.h));if(yn(e))return e=Ri(i,Yt(e)),new Or(Yt(e.g),e.h);if(30<i.g.length){if(yn(i)||yn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Lt,o=e;0>=o.X(i);)n=Pi(n),o=Pi(o);var u=Zr(n,1),l=Zr(o,1);for(o=Zr(o,2),n=Zr(n,2);!xn(o);){var g=l.add(o);0>=g.X(i)&&(u=u.add(n),l=g),o=Zr(o,1),n=Zr(n,1)}return e=Tn(i,u.R(e)),new Or(u,e)}for(u=Ke;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),g=(l=B(n)).R(e);yn(g)||0<g.X(i);)g=(l=B(n-=o)).R(e);xn(l)&&(l=Lt),u=u.add(l),i=Tn(i,g)}return new Or(u,i)}function Pi(i){for(var e=i.g.length+1,n=[],o=0;o<e;o++)n[o]=i.D(o)<<1|i.D(o-1)>>>31;return new A(n,i.h)}function Zr(i,e){var n=e>>5;e%=32;for(var o=i.g.length-n,u=[],l=0;l<o;l++)u[l]=0<e?i.D(l+n)>>>e|i.D(l+n+1)<<32-e:i.D(l+n);return new A(u,i.h)}(ue=A.prototype).ea=function(){if(yn(this))return-Yt(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);i+=(0<=o?o:Be+o)*e,e*=Be}return i},ue.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(xn(this))return"0";if(yn(this))return"-"+Yt(this).toString(i);for(var e=B(Math.pow(i,6)),n=this,o="";;){var u=Ri(n,e).g,l=((0<(n=Tn(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(xn(n=u))return l+o;for(;6>l.length;)l="0"+l;o=l+o}},ue.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},ue.X=function(i){return yn(i=Tn(this,i))?-1:xn(i)?0:1},ue.abs=function(){return yn(this)?Yt(this):this},ue.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0,u=0;u<=e;u++){var l=o+(65535&this.D(u))+(65535&i.D(u)),g=(l>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);o=g>>>16,n[u]=(g&=65535)<<16|(l&=65535)}return new A(n,-2147483648&n[n.length-1]?-1:0)},ue.R=function(i){if(xn(this)||xn(i))return Ke;if(yn(this))return yn(i)?Yt(this).R(Yt(i)):Yt(Yt(this).R(i));if(yn(i))return Yt(this.R(Yt(i)));if(0>this.X(rr)&&0>i.X(rr))return B(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var u=0;u<i.g.length;u++){var l=this.D(o)>>>16,g=65535&this.D(o),S=i.D(u)>>>16,M=65535&i.D(u);n[2*o+2*u]+=g*M,Zn(n,2*o+2*u),n[2*o+2*u+1]+=l*M,Zn(n,2*o+2*u+1),n[2*o+2*u+1]+=g*S,Zn(n,2*o+2*u+1),n[2*o+2*u+2]+=l*S,Zn(n,2*o+2*u+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new A(n,0)},ue.gb=function(i){return Ri(this,i).h},ue.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&i.D(o);return new A(n,this.h&i.h)},ue.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|i.D(o);return new A(n,this.h|i.h)},ue.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^i.D(o);return new A(n,this.h^i.h)},Pu.prototype.createWebChannel=Pu.prototype.g,us.prototype.send=us.prototype.u,us.prototype.open=us.prototype.m,us.prototype.close=us.prototype.close,Ks.NO_ERROR=0,Ks.TIMEOUT=8,Ks.HTTP_ERROR=6,Gi.COMPLETE="complete",Jo.EventType=Wi,Wi.OPEN="a",Wi.CLOSE="b",Wi.ERROR="c",Wi.MESSAGE="d",wt.prototype.listen=wt.prototype.O,cr.prototype.listenOnce=cr.prototype.P,cr.prototype.getLastError=cr.prototype.Sa,cr.prototype.getLastErrorCode=cr.prototype.Ia,cr.prototype.getStatus=cr.prototype.da,cr.prototype.getResponseJson=cr.prototype.Wa,cr.prototype.getResponseText=cr.prototype.ja,cr.prototype.send=cr.prototype.ha,cr.prototype.setWithCredentials=cr.prototype.Oa,ji.prototype.digest=ji.prototype.l,ji.prototype.reset=ji.prototype.reset,ji.prototype.update=ji.prototype.j,A.prototype.add=A.prototype.add,A.prototype.multiply=A.prototype.R,A.prototype.modulo=A.prototype.gb,A.prototype.compare=A.prototype.X,A.prototype.toNumber=A.prototype.ea,A.prototype.toString=A.prototype.toString,A.prototype.getBits=A.prototype.D,A.fromNumber=B,A.fromString=function oe(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return Yt(oe(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=B(Math.pow(e,8)),o=Ke,u=0;u<i.length;u+=8){var l=Math.min(8,i.length-u),g=parseInt(i.substring(u,u+l),e);8>l?(l=B(Math.pow(e,l)),o=o.R(l).add(B(g))):o=(o=o.R(n)).add(B(g))}return o};var Qi=ot.createWebChannelTransport=function(){return new Pu},aa=ot.getStatEventTarget=function(){return va()},_i=ot.ErrorCode=Ks,eo=ot.EventType=Gi,su=ot.Event=os,or=ot.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Yc=ot.FetchXmlHttpFactory=Ui,Oa=ot.WebChannel=Jo,cs=ot.XhrIo=cr,md=ot.Md5=ji,Io=ot.Integer=A;const ou="@firebase/firestore";class ir{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ir.UNAUTHENTICATED=new ir(null),ir.GOOGLE_CREDENTIALS=new ir("google-credentials-uid"),ir.FIRST_PARTY=new ir("first-party-uid"),ir.MOCK_USER=new ir("mock-user");let ls="10.5.2";const Mi=new Ee.Yd("@firebase/firestore");function to(){return Mi.logLevel}function ut(i,...e){if(Mi.logLevel<=Ee.in.DEBUG){const n=e.map(Na);Mi.debug(`Firestore (${ls}): ${i}`,...n)}}function lr(i,...e){if(Mi.logLevel<=Ee.in.ERROR){const n=e.map(Na);Mi.error(`Firestore (${ls}): ${i}`,...n)}}function fr(i,...e){if(Mi.logLevel<=Ee.in.WARN){const n=e.map(Na);Mi.warn(`Firestore (${ls}): ${i}`,...n)}}function Na(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Vt(i="Unexpected state"){const e=`FIRESTORE (${ls}) INTERNAL ASSERTION FAILED: `+i;throw lr(e),new Error(e)}function Bt(i,e){i||Vt()}function bt(i,e){return i}const $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xe extends Ue.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Dr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class ua{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ca{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ir.UNAUTHENTICATED))}shutdown(){}}class au{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Mu{constructor(e){this.t=e,this.currentUser=ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const l=F=>this.i!==u?(u=this.i,n(F)):Promise.resolve();let g=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Dr,e.enqueueRetryable(()=>l(this.currentUser))};const S=()=>{const F=g;e.enqueueRetryable((0,pe.Z)(function*(){yield F.promise,yield l(o.currentUser)}))},M=F=>{ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=F,this.auth.addAuthTokenListener(this.o),S()};this.t.onInit(F=>M(F)),setTimeout(()=>{if(!this.auth){const F=this.t.getImmediate({optional:!0});F?M(F):(ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Dr)}},0),S()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Bt("string"==typeof o.accessToken),new ua(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Bt(null===e||"string"==typeof e),new ir(e)}}class Jc{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class oi{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new Jc(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _d{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const o=l=>{null!=l.error&&ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const g=l.token!==this.R;return this.R=l.token,ut("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>o(l))};const u=l=>{ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>u(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?u(l):ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Bt("string"==typeof n.token),this.R=n.token,new xu(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Jn(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class Ur{static newId(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=Jn(40);for(let l=0;l<u.length;++l)o.length<20&&u[l]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[l]%62))}return o}}function _n(i,e){return i<e?-1:i>e?1:0}function kn(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function cc(i){return i+"\0"}class dr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Xe($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Xe($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Xe($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xe($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dr.fromMillis(Date.now())}static fromDate(e){return dr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new dr(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_n(this.nanoseconds,e.nanoseconds):_n(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ht{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ht(e)}static min(){return new Ht(new dr(0,0))}static max(){return new Ht(new dr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ka{constructor(e,n,o){void 0===n?n=0:n>e.length&&Vt(),void 0===o?o=e.length-n:o>e.length-n&&Vt(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===ka.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ka?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const l=e.get(u),g=n.get(u);if(l<g)return-1;if(l>g)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Bn extends ka{construct(e,n,o){return new Bn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new Xe($e.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new Bn(n)}static emptyPath(){return new Bn([])}}const gh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nr extends ka{construct(e,n,o){return new Nr(e,n,o)}static isValidIdentifier(e){return gh.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Nr(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const l=()=>{if(0===o.length)throw new Xe($e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let g=!1;for(;u<e.length;){const S=e[u];if("\\"===S){if(u+1===e.length)throw new Xe($e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const M=e[u+1];if("\\"!==M&&"."!==M&&"`"!==M)throw new Xe($e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=M,u+=2}else"`"===S?(g=!g,u++):"."!==S||g?(o+=S,u++):(l(),u++)}if(l(),g)throw new Xe($e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nr(n)}static emptyPath(){return new Nr([])}}class Dt{constructor(e){this.path=e}static fromPath(e){return new Dt(Bn.fromString(e))}static fromName(e){return new Dt(Bn.fromString(e).popFirst(5))}static empty(){return new Dt(Bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Bn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Bn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Dt(new Bn(e.slice()))}}class Lr{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function bs(i){return i.fields.find(e=>2===e.kind)}function Uo(i){return i.fields.filter(e=>2!==e.kind)}Lr.UNKNOWN_ID=-1;class yi{constructor(e,n){this.fieldPath=e,this.kind=n}}class la{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new la(0,Yi.min())}}function dc(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=Ht.fromTimestamp(1e9===o?new dr(n+1,0):new dr(n,o));return new Yi(u,Dt.empty(),e)}function Ou(i){return new Yi(i.readTime,i.key,-1)}class Yi{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new Yi(Ht.min(),Dt.empty(),-1)}static max(){return new Yi(Ht.max(),Dt.empty(),-1)}}function Nu(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=Dt.comparator(i.documentKey,e.documentKey),0!==n?n:_n(i.largestBatchId,e.largestBatchId))}const Mc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function La(i){return xc.apply(this,arguments)}function xc(){return xc=(0,pe.Z)(function*(i){if(i.code!==$e.FAILED_PRECONDITION||i.message!==Mc)throw i;ut("LocalStore","Unexpectedly lost primary lease")}),xc.apply(this,arguments)}class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ne((o,u)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,u)},this.catchCallback=l=>{this.wrapFailure(n,l).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ne?n:Ne.resolve(n)}catch(n){return Ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ne.reject(n)}static resolve(e){return new Ne((n,o)=>{n(e)})}static reject(e){return new Ne((n,o)=>{o(e)})}static waitFor(e){return new Ne((n,o)=>{let u=0,l=0,g=!1;e.forEach(S=>{++u,S.next(()=>{++l,g&&l===u&&n()},M=>o(M))}),g=!0,l===u&&n()})}static or(e){let n=Ne.resolve(!1);for(const o of e)n=n.next(u=>u?Ne.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,l)=>{o.push(n.call(this,u,l))}),this.waitFor(o)}static mapArray(e,n){return new Ne((o,u)=>{const l=e.length,g=new Array(l);let S=0;for(let M=0;M<l;M++){const F=M;n(e[F]).next(z=>{g[F]=z,++S,S===l&&o(g)},z=>u(z))}})}static doWhile(e,n){return new Ne((o,u)=>{const l=()=>{!0===e()?n().next(()=>{l()},u):o()};l()})}}class To{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Dr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new w(e,n.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=q(o.target.error);this.V.reject(new w(e,u))}}static open(e,n,o,u){try{return new To(n,e.transaction(u,o))}catch(l){throw new w(n,l)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ut("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new I(n)}}class Rs{constructor(e,n,o){this.name=e,this.version=n,this.p=o,12.2===Rs.S((0,Ue.z$)())&&lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ut("SimpleDb","Removing database:",e),R(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ue.hl)())return!1;if(Rs.C())return!0;const e=(0,Ue.z$)(),n=Rs.S(e),o=0<n&&n<10,u=Rs.v(e),l=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||l)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var n=this;return(0,pe.Z)(function*(){return n.db||(ut("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const l=indexedDB.open(n.name,n.version);l.onsuccess=g=>{o(g.target.result)},l.onblocked=()=>{u(new w(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=g=>{const S=g.target.error;u("VersionError"===S.name?new Xe($e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===S.name?new Xe($e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+S):new w(e,S))},l.onupgradeneeded=g=>{ut("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',g.oldVersion),n.p.N(g.target.result,l.transaction,g.oldVersion,n.version).next(()=>{ut("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=o=>n.B(o)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var l=this;return(0,pe.Z)(function*(){const g="readonly"===n;let S=0;for(;;){++S;try{l.db=yield l.O(e);const M=To.open(l.db,e,g?"readonly":"readwrite",o),F=u(M).next(z=>(M.g(),z)).catch(z=>(M.abort(z),Ne.reject(z))).toPromise();return F.catch(()=>{}),yield M.m,F}catch(M){const F=M,z="FirebaseError"!==F.name&&S<3;if(ut("SimpleDb","Transaction failed with error:",F.message,"Retrying:",z),l.close(),!z)return Promise.reject(F)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class uu{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return R(this.k.delete())}}class w extends Xe{constructor(e,n){super($e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function b(i){return"IndexedDbTransactionError"===i.name}class I{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(ut("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(ut("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),R(o)}add(e){return ut("SimpleDb","ADD",this.store.name,e,e),R(this.store.add(e))}get(e){return R(this.store.get(e)).next(n=>(void 0===n&&(n=null),ut("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ut("SimpleDb","DELETE",this.store.name,e),R(this.store.delete(e))}count(){return ut("SimpleDb","COUNT",this.store.name),R(this.store.count())}W(e,n){const o=this.options(e,n);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),l=[];return this.G(u,(g,S)=>{l.push(S)}).next(()=>l)}{const u=this.store.getAll(o.range);return new Ne((l,g)=>{u.onerror=S=>{g(S.target.error)},u.onsuccess=S=>{l(S.target.result)}})}}j(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new Ne((u,l)=>{o.onerror=g=>{l(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}H(e,n){ut("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.J=!1;const u=this.cursor(o);return this.G(u,(l,g,S)=>S.delete())}Y(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.G(u,n)}Z(e){const n=this.cursor({});return new Ne((o,u)=>{n.onerror=l=>{const g=q(l.target.error);u(g)},n.onsuccess=l=>{const g=l.target.result;g?e(g.primaryKey,g.value).next(S=>{S?g.continue():o()}):o()}})}G(e,n){const o=[];return new Ne((u,l)=>{e.onerror=g=>{l(g.target.error)},e.onsuccess=g=>{const S=g.target.result;if(!S)return void u();const M=new uu(S),F=n(S.primaryKey,S.value,M);if(F instanceof Ne){const z=F.catch(X=>(M.done(),Ne.reject(X)));o.push(z)}M.isDone?u():null===M.$?S.continue():S.continue(M.$)}}).next(()=>Ne.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function R(i){return new Ne((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=q(o.target.error);n(u)}})}let N=!1;function q(i){const e=Rs.S((0,Ue.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new Xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return N||(N=!0,setTimeout(()=>{throw o},0)),o}}return i}class te{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;ut("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,pe.Z)(function*(){n.task=null;try{ut("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(o){b(o)?ut("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield La(o)}yield n.ee(6e4)}))}}class je{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,pe.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.ne(o,e))})()}ne(e,n){const o=new Set;let u=n,l=!0;return Ne.doWhile(()=>!0===l&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!o.has(g))return ut("IndexBackiller",`Processing collection: ${g}`),this.re(e,g,u).next(S=>{u-=S,o.add(g)});l=!1})).next(()=>n-u)}re(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(l=>{const g=l.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.ie(u,l)).next(S=>(ut("IndexBackiller",`Updating offset: ${S}`),this.localStore.indexManager.updateCollectionGroup(e,n,S))).next(()=>g.size)}))}ie(e,n){let o=e;return n.changes.forEach((u,l)=>{const g=Ou(l);Nu(g,o)>0&&(o=g)}),new Yi(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Re=(()=>{class i{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=u=>this.se(u),this.oe=u=>o.writeSequenceNumber(u))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function Ct(i){return null==i}function hn(i){return 0===i&&1/i==-1/0}function pr(i){return"number"==typeof i&&Number.isInteger(i)&&!hn(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function fn(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=$s(e)),e=_s(i.get(n),e);return $s(e)}function _s(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const l=i.charAt(u);switch(l){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=l}}return n}function $s(i){return i+"\x01\x01"}function xi(i){const e=i.length;if(Bt(e>=2),2===e)return Bt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Bn.emptyPath();const n=e-2,o=[];let u="";for(let l=0;l<e;){const g=i.indexOf("\x01",l);switch((g<0||g>n)&&Vt(),i.charAt(g+1)){case"\x01":const S=i.substring(l,g);let M;0===u.length?M=S:(u+=S,M=u,u=""),o.push(M);break;case"\x10":u+=i.substring(l,g),u+="\0";break;case"\x11":u+=i.substring(l,g+1);break;default:Vt()}l=g+2}return new Bn(o)}const cu=["userId","batchId"];function ys(i,e){return[i,fn(e)]}function ku(i,e,n){return[i,fn(e),n]}const hc={},Lu=["prefixPath","collectionGroup","readTime","documentId"],Oc=["prefixPath","collectionGroup","documentId"],Ff=["collectionGroup","readTime","prefixPath","documentId"],lu=["canonicalId","targetId"],Fa=["targetId","path"],Fu=["path","targetId"],yd=["collectionId","parent"],Sl=["indexId","uid"],Vf=["uid","sequenceNumber"],vd=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bl=["indexId","uid","orderedDocumentKey"],mh=["userId","collectionPath","documentId"],_h=["userId","collectionPath","largestBatchId"],Rl=["userId","collectionGroup","largestBatchId"],da=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yh=[...da,"documentOverlays"],du=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xc=du,fc=[...Xc,"indexConfiguration","indexState","indexEntries"];class Nc extends Bo{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function $i(i,e){const n=bt(i);return Rs.M(n.ae,e)}function ds(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function ha(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Ps(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class gr{constructor(e,n){this.comparator=e,this.root=n||vi.EMPTY}insert(e,n){return new gr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vi.BLACK,null,null))}remove(e){return new gr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Va(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Va(this.root,e,this.comparator,!1)}getReverseIterator(){return new Va(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Va(this.root,e,this.comparator,!0)}}class Va{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?o(e.key,n):1,n&&u&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vi{constructor(e,n,o,u,l){this.key=e,this.value=n,this.color=o??vi.RED,this.left=u??vi.EMPTY,this.right=l??vi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,l){return new vi(e??this.key,n??this.value,o??this.color,u??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const l=o(e,u.key);return u=l<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===l?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return vi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return vi.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Vt();const e=this.left.check();if(e!==this.right.check())throw Vt();return e+(this.isRed()?0:1)}}vi.EMPTY=null,vi.RED=!0,vi.BLACK=!1,vi.EMPTY=new class{constructor(){this.size=0}get key(){throw Vt()}get value(){throw Vt()}get color(){throw Vt()}get left(){throw Vt()}get right(){throw Vt()}copy(e,n,o,u,l){return this}insert(e,n,o){return new vi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hr{constructor(e){this.comparator=e,this.data=new gr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vu(this.data.getIterator())}getIteratorFrom(e){return new Vu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof hr)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,l=o.getNext().key;if(0!==this.comparator(u,l))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new hr(this.comparator);return n.data=e,n}}class Vu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ua(i){return i.hasNext()?i.getNext():void 0}class Ji{constructor(e){this.fields=e,e.sort(Nr.comparator)}static empty(){return new Ji([])}unionWith(e){let n=new hr(Nr.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Ji(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return kn(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class Pl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Pl("Invalid base64 string: "+l):l}}(e);return new Qr(n)}static fromUint8Array(e){const n=function(u){let l="";for(let g=0;g<u.length;++g)l+=String.fromCharCode(u[g]);return l}(e);return new Qr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _n(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qr.EMPTY_BYTE_STRING=new Qr("");const xl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hi(i){if(Bt(!!i),"string"==typeof i){let e=0;const n=xl.exec(i);if(Bt(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:ar(i.seconds),nanos:ar(i.nanos)}}function ar(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ms(i){return"string"==typeof i?Qr.fromBase64String(i):Qr.fromUint8Array(i)}function el(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function hu(i){const e=i.mapValue.fields.__previous_value__;return el(e)?hu(e):e}function pc(i){const e=Hi(i.mapValue.fields.__local_write_time__.timestampValue);return new dr(e.seconds,e.nanos)}class fu{constructor(e,n,o,u,l,g,S,M,F){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=l,this.forceLongPolling=g,this.autoDetectLongPolling=S,this.longPollingOptions=M,this.useFetchStreams=F}}class Hs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Hs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Hs&&e.projectId===this.projectId&&e.database===this.database}}const Hr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},kc={nullValue:"NULL_VALUE"};function ro(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?el(i)?4:vh(i)?9007199254740991:10:Vt()}function wo(i,e){if(i===e)return!0;const n=ro(i);if(n!==ro(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return pc(i).isEqual(pc(e));case 3:return function(u,l){if("string"==typeof u.timestampValue&&"string"==typeof l.timestampValue&&u.timestampValue.length===l.timestampValue.length)return u.timestampValue===l.timestampValue;const g=Hi(u.timestampValue),S=Hi(l.timestampValue);return g.seconds===S.seconds&&g.nanos===S.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return l=e,Ms(i.bytesValue).isEqual(Ms(l.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,l){return ar(u.geoPointValue.latitude)===ar(l.geoPointValue.latitude)&&ar(u.geoPointValue.longitude)===ar(l.geoPointValue.longitude)}(i,e);case 2:return function(u,l){if("integerValue"in u&&"integerValue"in l)return ar(u.integerValue)===ar(l.integerValue);if("doubleValue"in u&&"doubleValue"in l){const g=ar(u.doubleValue),S=ar(l.doubleValue);return g===S?hn(g)===hn(S):isNaN(g)&&isNaN(S)}return!1}(i,e);case 9:return kn(i.arrayValue.values||[],e.arrayValue.values||[],wo);case 10:return function(u,l){const g=u.mapValue.fields||{},S=l.mapValue.fields||{};if(ds(g)!==ds(S))return!1;for(const M in g)if(g.hasOwnProperty(M)&&(void 0===S[M]||!wo(g[M],S[M])))return!1;return!0}(i,e);default:return Vt()}var l}function Uu(i,e){return void 0!==(i.values||[]).find(n=>wo(n,e))}function fa(i,e){if(i===e)return 0;const n=ro(i),o=ro(e);if(n!==o)return _n(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return _n(i.booleanValue,e.booleanValue);case 2:return function(l,g){const S=ar(l.integerValue||l.doubleValue),M=ar(g.integerValue||g.doubleValue);return S<M?-1:S>M?1:S===M?0:isNaN(S)?isNaN(M)?0:-1:1}(i,e);case 3:return Lc(i.timestampValue,e.timestampValue);case 4:return Lc(pc(i),pc(e));case 5:return _n(i.stringValue,e.stringValue);case 6:return function(l,g){const S=Ms(l),M=Ms(g);return S.compareTo(M)}(i.bytesValue,e.bytesValue);case 7:return function(l,g){const S=l.split("/"),M=g.split("/");for(let F=0;F<S.length&&F<M.length;F++){const z=_n(S[F],M[F]);if(0!==z)return z}return _n(S.length,M.length)}(i.referenceValue,e.referenceValue);case 8:return function(l,g){const S=_n(ar(l.latitude),ar(g.latitude));return 0!==S?S:_n(ar(l.longitude),ar(g.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(l,g){const S=l.values||[],M=g.values||[];for(let F=0;F<S.length&&F<M.length;++F){const z=fa(S[F],M[F]);if(z)return z}return _n(S.length,M.length)}(i.arrayValue,e.arrayValue);case 10:return function(l,g){if(l===Hr.mapValue&&g===Hr.mapValue)return 0;if(l===Hr.mapValue)return 1;if(g===Hr.mapValue)return-1;const S=l.fields||{},M=Object.keys(S),F=g.fields||{},z=Object.keys(F);M.sort(),z.sort();for(let X=0;X<M.length&&X<z.length;++X){const _e=_n(M[X],z[X]);if(0!==_e)return _e;const Ve=fa(S[M[X]],F[z[X]]);if(0!==Ve)return Ve}return _n(M.length,z.length)}(i.mapValue,e.mapValue);default:throw Vt()}}function Lc(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return _n(i,e);const n=Hi(i),o=Hi(e),u=_n(n.seconds,o.seconds);return 0!==u?u:_n(n.nanos,o.nanos)}function jo(i){return Ba(i)}function Ba(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=Hi(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ms(i.bytesValue).toBase64():"referenceValue"in i?Dt.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",u=!0;for(const l of n.values||[])u?u=!1:o+=",",o+=Ba(l);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let u="{",l=!0;for(const g of o)l?l=!1:u+=",",u+=`${g}:${Ba(n.fields[g])}`;return u+"}"}(i.mapValue):Vt()}function $o(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function gc(i){return!!i&&"integerValue"in i}function pa(i){return!!i&&"arrayValue"in i}function tl(i){return!!i&&"nullValue"in i}function Ed(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ol(i){return!!i&&"mapValue"in i}function Fc(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ha(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=Fc(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fc(i.arrayValue.values[n]);return e}return Object.assign({},i)}function vh(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Nl(i){return"nullValue"in i?kc:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?$o(Hs.empty(),Dt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Vt()}function Uf(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?$o(Hs.empty(),Dt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Hr:Vt()}function Id(i,e){const n=fa(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function ja(i,e){const n=fa(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Xi{constructor(e){this.value=e}static empty(){return new Xi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Ol(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fc(n)}setAll(e){let n=Nr.emptyPath(),o={},u=[];e.forEach((g,S)=>{if(!n.isImmediateParentOf(S)){const M=this.getFieldsMap(n);this.applyChanges(M,o,u),o={},u=[],n=S.popLast()}g?o[S.lastSegment()]=Fc(g):u.push(S.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,o,u)}delete(e){const n=this.field(e.popLast());Ol(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];Ol(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){ha(n,(u,l)=>e[u]=l);for(const u of o)delete e[u]}clone(){return new Xi(Fc(this.value))}}function Td(i){const e=[];return ha(i.fields,(n,o)=>{const u=new Nr([n]);if(Ol(o)){const l=Td(o.mapValue).fields;if(0===l.length)e.push(u);else for(const g of l)e.push(u.child(g))}else e.push(u)}),new Ji(e)}class Mn{constructor(e,n,o,u,l,g,S){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=l,this.data=g,this.documentState=S}static newInvalidDocument(e){return new Mn(e,0,Ht.min(),Ht.min(),Ht.min(),Xi.empty(),0)}static newFoundDocument(e,n,o,u){return new Mn(e,1,n,Ht.min(),o,u,0)}static newNoDocument(e,n){return new Mn(e,2,n,Ht.min(),Ht.min(),Xi.empty(),0)}static newUnknownDocument(e,n){return new Mn(e,3,n,Ht.min(),Ht.min(),Xi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ht.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Bu{constructor(e,n){this.position=e,this.inclusive=n}}function Vc(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const l=e[u],g=i.position[u];if(o=l.field.isKeyField()?Dt.comparator(Dt.fromName(g.referenceValue),n.key):fa(g,n.data.field(l.field)),"desc"===l.dir&&(o*=-1),0!==o)break}return o}function nl(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!wo(i.position[n],e.position[n]))return!1;return!0}class vs{constructor(e,n="asc"){this.field=e,this.dir=n}}function mc(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class v{}class h extends v{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new vt(e,n,o):"array-contains"===n?new an(e,o):"in"===n?new In(e,o):"not-in"===n?new Cr(e,o):"array-contains-any"===n?new Ar(e,o):new h(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new Jt(e,o):new Kt(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(fa(n,this.value)):null!==n&&ro(this.value)===ro(n)&&this.matchesComparison(fa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class m extends v{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new m(e,n)}matches(e){return T(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function T(i){return"and"===i.op}function x(i){return"or"===i.op}function U(i){return J(i)&&T(i)}function J(i){for(const e of i.filters)if(e instanceof m)return!1;return!0}function ee(i){if(i instanceof h)return i.field.canonicalString()+i.op.toString()+jo(i.value);if(U(i))return i.filters.map(e=>ee(e)).join(",");{const e=i.filters.map(n=>ee(n)).join(",");return`${i.op}(${e})`}}function le(i,e){return i instanceof h?(o=i,(u=e)instanceof h&&o.op===u.op&&o.field.isEqual(u.field)&&wo(o.value,u.value)):i instanceof m?function(o,u){return u instanceof m&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((l,g,S)=>l&&le(g,u.filters[S]),!0)}(i,e):void Vt();var o,u}function Ae(i,e){const n=i.filters.concat(e);return m.create(n,i.op)}function st(i){return i instanceof h?`${(n=i).field.canonicalString()} ${n.op} ${jo(n.value)}`:i instanceof m?function(n){return n.op.toString()+" {"+n.getFilters().map(st).join(" ,")+"}"}(i):"Filter";var n}class vt extends h{constructor(e,n,o){super(e,n,o),this.key=Dt.fromName(o.referenceValue)}matches(e){const n=Dt.comparator(e.key,this.key);return this.matchesComparison(n)}}class Jt extends h{constructor(e,n){super(e,"in",n),this.keys=Mt(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Kt extends h{constructor(e,n){super(e,"not-in",n),this.keys=Mt(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Mt(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>Dt.fromName(o.referenceValue))}class an extends h{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pa(n)&&Uu(n.arrayValue,this.value)}}class In extends h{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Uu(this.value.arrayValue,n)}}class Cr extends h{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Uu(this.value.arrayValue,n)}}class Ar extends h{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pa(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>Uu(this.value.arrayValue,o))}}class Gn{constructor(e,n=null,o=[],u=[],l=null,g=null,S=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=l,this.startAt=g,this.endAt=S,this.ce=null}}function jn(i,e=null,n=[],o=[],u=null,l=null,g=null){return new Gn(i,e,n,o,u,l,g)}function Br(i){const e=bt(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>ee(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(l=o).field.canonicalString()+l.dir;var l}).join(","),Ct(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>jo(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>jo(o)).join(",")),e.ce=n}return e.ce}function ai(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!mc(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!le(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!nl(i.startAt,e.startAt)&&nl(i.endAt,e.endAt)}function Fr(i){return Dt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function es(i,e){return i.filters.filter(n=>n instanceof h&&n.field.isEqual(e))}function xs(i,e,n){let o=kc,u=!0;for(const l of es(i,e)){let g=kc,S=!0;switch(l.op){case"<":case"<=":g=Nl(l.value);break;case"==":case"in":case">=":g=l.value;break;case">":g=l.value,S=!1;break;case"!=":case"not-in":g=kc}Id({value:o,inclusive:u},{value:g,inclusive:S})<0&&(o=g,u=S)}if(null!==n)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const g=n.position[l];Id({value:o,inclusive:u},{value:g,inclusive:n.inclusive})<0&&(o=g,u=n.inclusive);break}return{value:o,inclusive:u}}function Co(i,e,n){let o=Hr,u=!0;for(const l of es(i,e)){let g=Hr,S=!0;switch(l.op){case">=":case">":g=Uf(l.value),S=!1;break;case"==":case"in":case"<=":g=l.value;break;case"<":g=l.value,S=!1;break;case"!=":case"not-in":g=Hr}ja({value:o,inclusive:u},{value:g,inclusive:S})>0&&(o=g,u=S)}if(null!==n)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const g=n.position[l];ja({value:o,inclusive:u},{value:g,inclusive:n.inclusive})>0&&(o=g,u=n.inclusive);break}return{value:o,inclusive:u}}class io{constructor(e,n=null,o=[],u=[],l=null,g="F",S=null,M=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=l,this.limitType=g,this.startAt=S,this.endAt=M,this.le=null,this.he=null,this.Pe=null}}function ju(i,e,n,o,u,l,g,S){return new io(i,e,n,o,u,l,g,S)}function so(i){return new io(i)}function kl(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function pu(i){return null!==i.collectionGroup}function xt(i){const e=bt(i);if(null===e.le){e.le=[];const n=new Set;for(const l of e.explicitOrderBy)e.le.push(l),n.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(g){let S=new hr(Nr.comparator);return g.filters.forEach(M=>{M.getFlattenedFilters().forEach(F=>{F.isInequality()&&(S=S.add(F.field))})}),S})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.le.push(new vs(l,o))}),n.has(Nr.keyField().canonicalString())||e.le.push(new vs(Nr.keyField(),o))}return e.le}function Wt(i){const e=bt(i);return e.he||(e.he=function vn(i,e){if("F"===i.limitType)return jn(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(u=>new vs(u.field,"desc"===u.dir?"asc":"desc"));const n=i.endAt?new Bu(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new Bu(i.startAt.position,i.startAt.inclusive):null;return jn(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}(e,xt(i))),e.he}function $n(i,e){const n=i.filters.concat([e]);return new io(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Ei(i,e,n){return new io(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Os(i,e){return ai(Wt(i),Wt(e))&&i.limitType===e.limitType}function zs(i){return`${Br(Wt(i))}|lt:${i.limitType}`}function oo(i){return`Query(target=${function(n){let o=n.path.canonicalString();return null!==n.collectionGroup&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(u=>st(u)).join(", ")}]`),Ct(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(u=>{return`${(g=u).field.canonicalString()} (${g.dir})`;var g}).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(u=>jo(u)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(u=>jo(u)).join(",")),`Target(${o})`}(Wt(i))}; limitType=${i.limitType})`}function Sr(i,e){return e.isFoundDocument()&&function(o,u){const l=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):Dt.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)}(i,e)&&function(o,u){for(const l of xt(o))if(!l.field.isKeyField()&&null===u.data.field(l.field))return!1;return!0}(i,e)&&function(o,u){for(const l of o.filters)if(!l.matches(u))return!1;return!0}(i,e)&&(u=e,!((o=i).startAt&&!function(g,S,M){const F=Vc(g,S,M);return g.inclusive?F<=0:F<0}(o.startAt,xt(o),u)||o.endAt&&!function(g,S,M){const F=Vc(g,S,M);return g.inclusive?F>=0:F>0}(o.endAt,xt(o),u)));var o,u}function _c(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Ll(i){return(e,n)=>{let o=!1;for(const u of xt(i)){const l=ts(u,e,n);if(0!==l)return l;o=o||u.field.isKeyField()}return 0}}function ts(i,e,n){const o=i.field.isKeyField()?Dt.comparator(e.key,n.key):function(l,g,S){const M=g.data.field(l),F=S.data.field(l);return null!==M&&null!==F?fa(M,F):Vt()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Vt()}}class Es{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,l]of o)if(this.equalsFn(u,e))return l}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let l=0;l<u.length;l++)if(this.equalsFn(u[l][0],e))return void(u[l]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,(n,o)=>{for(const[u,l]of o)e(u,l)})}isEmpty(){return Ps(this.inner)}size(){return this.innerSize}}const Ho=new gr(Dt.comparator);function ns(){return Ho}const Fl=new gr(Dt.comparator);function Vl(...i){let e=Fl;for(const n of i)e=e.insert(n.key,n);return e}function Eh(i){let e=Fl;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function Ao(){return wd()}function Ig(){return wd()}function wd(){return new Es(i=>i.toString(),(i,e)=>i.isEqual(e))}const Ul=new gr(Dt.comparator),Bf=new hr(Dt.comparator);function Fn(...i){let e=Bf;for(const n of i)e=e.add(n);return e}const S_=new hr(_n);function Bl(){return S_}function Tg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hn(e)?"-0":e}}function jf(i){return{integerValue:""+i}}function jl(i,e){return pr(e)?jf(e):Tg(i,e)}class yc{constructor(){this._=void 0}}function $f(i,e,n){return i instanceof $a?function(u,l){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return l&&el(l)&&(l=hu(l)),l&&(g.fields.__previous_value__=l),{mapValue:g}}(n,e):i instanceof ga?Th(i,e):i instanceof Ha?$l(i,e):function(u,l){const g=Ih(u,l),S=zf(g)+zf(u.Ie);return gc(g)&&gc(u.Ie)?jf(S):Tg(u.serializer,S)}(i,e)}function Hf(i,e,n){return i instanceof ga?Th(i,e):i instanceof Ha?$l(i,e):n}function Ih(i,e){return i instanceof $u?gc(o=e)||(l=o)&&"doubleValue"in l?e:{integerValue:0}:null;var o,l}class $a extends yc{}class ga extends yc{constructor(e){super(),this.elements=e}}function Th(i,e){const n=Gf(e);for(const o of i.elements)n.some(u=>wo(u,o))||n.push(o);return{arrayValue:{values:n}}}class Ha extends yc{constructor(e){super(),this.elements=e}}function $l(i,e){let n=Gf(e);for(const o of i.elements)n=n.filter(u=>!wo(u,o));return{arrayValue:{values:n}}}class $u extends yc{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function zf(i){return ar(i.integerValue||i.doubleValue)}function Gf(i){return pa(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class rl{constructor(e,n){this.field=e,this.transform=n}}class Hl{constructor(e,n){this.version=e,this.transformResults=n}}class Yr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yr}static exists(e){return new Yr(void 0,e)}static updateTime(e){return new Yr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cd(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class il{}function wh(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new So(i.key,Yr.none()):new zu(i.key,i.data,Yr.none());{const n=i.data,o=Xi.empty();let u=new hr(Nr.comparator);for(let l of e.fields)if(!u.has(l)){let g=n.field(l);null===g&&l.length>1&&(l=l.popLast(),g=n.field(l)),null===g?o.delete(l):o.set(l,g),u=u.add(l)}return new Go(i.key,o,new Ji(u.toArray()),Yr.none())}}function zo(i,e,n){i instanceof zu?function(u,l,g){const S=u.value.clone(),M=Uc(u.fieldTransforms,l,g.transformResults);S.setAll(M),l.convertToFoundDocument(g.version,S).setHasCommittedMutations()}(i,e,n):i instanceof Go?function(u,l,g){if(!Cd(u.precondition,l))return void l.convertToUnknownDocument(g.version);const S=Uc(u.fieldTransforms,l,g.transformResults),M=l.data;M.setAll(Ns(u)),M.setAll(S),l.convertToFoundDocument(g.version,M).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Hu(i,e,n,o){return i instanceof zu?function(l,g,S,M){if(!Cd(l.precondition,g))return S;const F=l.value.clone(),z=Dh(l.fieldTransforms,M,g);return F.setAll(z),g.convertToFoundDocument(g.version,F).setHasLocalMutations(),null}(i,e,n,o):i instanceof Go?function(l,g,S,M){if(!Cd(l.precondition,g))return S;const F=Dh(l.fieldTransforms,M,g),z=g.data;return z.setAll(Ns(l)),z.setAll(F),g.convertToFoundDocument(g.version,z).setHasLocalMutations(),null===S?null:S.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(X=>X.field))}(i,e,n,o):(S=n,Cd(i.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):S);var g,S}function ao(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),l=Ih(o.transform,u||null);null!=l&&(null===n&&(n=Xi.empty()),n.set(o.field,l))}return n||null}function Ad(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(o=i.fieldTransforms)&&void 0===u||o&&u&&kn(o,u,(l,g)=>function Dd(i,e){return i.field.isEqual(e.field)&&(u=e.transform,(o=i.transform)instanceof ga&&u instanceof ga||o instanceof Ha&&u instanceof Ha?kn(o.elements,u.elements,wo):o instanceof $u&&u instanceof $u?wo(o.Ie,u.Ie):o instanceof $a&&u instanceof $a);var o,u}(l,g))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var o,u}class zu extends il{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Go extends il{constructor(e,n,o,u,l=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Ns(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function Uc(i,e,n){const o=new Map;Bt(i.length===n.length);for(let u=0;u<n.length;u++){const l=i[u],g=l.transform,S=e.data.field(l.field);o.set(l.field,Hf(g,S,n[u]))}return o}function Dh(i,e,n){const o=new Map;for(const u of i){const l=u.transform,g=n.data.field(u.field);o.set(u.field,$f(l,g,e))}return o}class So extends il{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sd extends il{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bd{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const l=this.mutations[u];l.key.isEqual(e.key)&&zo(l,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=Hu(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=Hu(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=Ig();return this.mutations.forEach(u=>{const l=e.get(u.key),g=l.overlayedDocument;let S=this.applyToLocalView(g,l.mutatedFields);S=n.has(u.key)?null:S;const M=wh(g,S);null!==M&&o.set(u.key,M),g.isValidDocument()||g.convertToNoDocument(Ht.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Fn())}isEqual(e){return this.batchId===e.batchId&&kn(this.mutations,e.mutations,(n,o)=>Ad(n,o))&&kn(this.baseMutations,e.baseMutations,(n,o)=>Ad(n,o))}}class Ch{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){Bt(e.mutations.length===o.length);let u=Ul;const l=e.mutations;for(let g=0;g<l.length;g++)u=u.insert(l[g].key,o[g].version);return new Ch(e,n,o,u)}}class Rd{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class uo{constructor(e,n){this.count=e,this.unchangedNames=n}}var Oi,Xn;function Pd(i){switch(i){default:return Vt();case $e.CANCELLED:case $e.UNKNOWN:case $e.DEADLINE_EXCEEDED:case $e.RESOURCE_EXHAUSTED:case $e.INTERNAL:case $e.UNAVAILABLE:case $e.UNAUTHENTICATED:return!1;case $e.INVALID_ARGUMENT:case $e.NOT_FOUND:case $e.ALREADY_EXISTS:case $e.PERMISSION_DENIED:case $e.FAILED_PRECONDITION:case $e.ABORTED:case $e.OUT_OF_RANGE:case $e.UNIMPLEMENTED:case $e.DATA_LOSS:return!0}}function ma(i){if(void 0===i)return lr("GRPC error has no .code"),$e.UNKNOWN;switch(i){case Oi.OK:return $e.OK;case Oi.CANCELLED:return $e.CANCELLED;case Oi.UNKNOWN:return $e.UNKNOWN;case Oi.DEADLINE_EXCEEDED:return $e.DEADLINE_EXCEEDED;case Oi.RESOURCE_EXHAUSTED:return $e.RESOURCE_EXHAUSTED;case Oi.INTERNAL:return $e.INTERNAL;case Oi.UNAVAILABLE:return $e.UNAVAILABLE;case Oi.UNAUTHENTICATED:return $e.UNAUTHENTICATED;case Oi.INVALID_ARGUMENT:return $e.INVALID_ARGUMENT;case Oi.NOT_FOUND:return $e.NOT_FOUND;case Oi.ALREADY_EXISTS:return $e.ALREADY_EXISTS;case Oi.PERMISSION_DENIED:return $e.PERMISSION_DENIED;case Oi.FAILED_PRECONDITION:return $e.FAILED_PRECONDITION;case Oi.ABORTED:return $e.ABORTED;case Oi.OUT_OF_RANGE:return $e.OUT_OF_RANGE;case Oi.UNIMPLEMENTED:return $e.UNIMPLEMENTED;case Oi.DATA_LOSS:return $e.DATA_LOSS;default:return Vt()}}(Xn=Oi||(Oi={}))[Xn.OK=0]="OK",Xn[Xn.CANCELLED=1]="CANCELLED",Xn[Xn.UNKNOWN=2]="UNKNOWN",Xn[Xn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xn[Xn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xn[Xn.NOT_FOUND=5]="NOT_FOUND",Xn[Xn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xn[Xn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xn[Xn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xn[Xn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xn[Xn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xn[Xn.ABORTED=10]="ABORTED",Xn[Xn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xn[Xn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xn[Xn.INTERNAL=13]="INTERNAL",Xn[Xn.UNAVAILABLE=14]="UNAVAILABLE",Xn[Xn.DATA_LOSS=15]="DATA_LOSS";function Bc(){return new TextEncoder}const qf=new Io([4294967295,4294967295],0);function Kf(i){const e=Bc().encode(i),n=new md;return n.update(e),new Uint8Array(n.digest())}function zl(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Io([n,o],0),new Io([u,l],0)]}class Md{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new sl(`Invalid padding: ${n}`);if(o<0)throw new sl(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new sl(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new sl(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Io.fromNumber(this.Te)}de(e,n,o){let u=e.add(n.multiply(Io.fromNumber(o)));return 1===u.compare(qf)&&(u=new Io([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=Kf(e),[o,u]=zl(n);for(let l=0;l<this.hashCount;l++){const g=this.de(o,u,l);if(!this.Ae(g))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),g=new Md(l,u,n);return o.forEach(S=>g.insert(S)),g}insert(e){if(0===this.Te)return;const n=Kf(e),[o,u]=zl(n);for(let l=0;l<this.hashCount;l++){const g=this.de(o,u,l);this.Re(g)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class gu{constructor(e,n,o,u,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,Ec.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new gu(Ht.min(),u,new gr(_n),ns(),Fn())}}class Ec{constructor(e,n,o,u,l){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Ec(o,n,Fn(),Fn(),Fn())}}class _{constructor(e,n,o,u){this.Ve=e,this.removedTargetIds=n,this.key=o,this.me=u}}class d{constructor(e,n){this.targetId=e,this.fe=n}}class p{constructor(e,n,o=Qr.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class E{constructor(){this.ge=0,this.pe=ce(),this.ye=Qr.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Fn(),n=Fn(),o=Fn();return this.pe.forEach((u,l)=>{switch(l){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:Vt()}}),new Ec(this.ye,this.we,e,n,o)}Fe(){this.Se=!1,this.pe=ce()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class k{constructor(e){this.Le=e,this.ke=new Map,this.qe=ns(),this.Qe=G(),this.Ke=new gr(_n)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(n);break;case 3:this.je(n)&&(o.Be(),o.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.Ce(e.resumeToken));break;default:Vt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((o,u)=>{this.je(u)&&n(u)})}Je(e){const n=e.targetId,o=e.fe.count,u=this.Ye(n);if(u){const l=u.target;if(Fr(l))if(0===o){const g=new Dt(l.path);this.We(n,g,Mn.newNoDocument(g,Ht.min()))}else Bt(1===o);else{const g=this.Ze(n);if(g!==o){const S=this.Xe(e),M=S?this.et(S,e,g):1;0!==M&&(this.He(n),this.Ke=this.Ke.insert(n,2===M?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:l=0}=n;let g,S;try{g=Ms(o).toUint8Array()}catch(M){if(M instanceof Pl)return fr("Decoding the base64 bloom filter in existence filter failed ("+M.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw M}try{S=new Md(g,u,l)}catch(M){return fr(M instanceof sl?"BloomFilter error: ":"Applying bloom filter failed: ",M),null}return 0===S.Te?null:S}et(e,n,o){return n.fe.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Le.getRemoteKeysForTarget(n);let u=0;return o.forEach(l=>{const g=this.Le.nt(),S=`projects/${g.projectId}/databases/${g.database}/documents/${l.path.canonicalString()}`;e.mightContain(S)||(this.We(n,l,null),u++)}),u}it(e){const n=new Map;this.ke.forEach((l,g)=>{const S=this.Ye(g);if(S){if(l.current&&Fr(S.target)){const M=new Dt(S.target.path);null!==this.qe.get(M)||this.st(g,M)||this.We(g,M,Mn.newNoDocument(M,e))}l.De&&(n.set(g,l.ve()),l.Fe())}});let o=Fn();this.Qe.forEach((l,g)=>{let S=!0;g.forEachWhile(M=>{const F=this.Ye(M);return!F||"TargetPurposeLimboResolution"===F.purpose||(S=!1,!1)}),S&&(o=o.add(l))}),this.qe.forEach((l,g)=>g.setReadTime(e));const u=new gu(e,n,this.Ke,this.qe,o);return this.qe=ns(),this.Qe=G(),this.Ke=new gr(_n),u}Ue(e,n){if(!this.je(e))return;const o=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,o),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const u=this.ze(e);this.st(e,n)?u.Me(n,1):u.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),o&&(this.qe=this.qe.insert(n,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new E,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new hr(_n),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||ut("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new E),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function G(){return new gr(Dt.comparator)}function ce(){return new gr(Dt.comparator)}const xe={asc:"ASCENDING",desc:"DESCENDING"},tt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ot={and:"AND",or:"OR"};class qt{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zt(i,e){return i.useProto3Json||Ct(e)?e:{value:e}}function Mr(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _a(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function xd(i,e){return Mr(i,e.toTimestamp())}function ui(i){return Bt(!!i),Ht.fromTimestamp(function(n){const o=Hi(n);return new dr(o.seconds,o.nanos)}(i))}function ol(i,e){return(o=i,new Bn(["projects",o.projectId,"databases",o.database])).child("documents").child(e).canonicalString();var o}function Gu(i){const e=Bn.fromString(i);return Bt(Cg(e)),e}function jc(i,e){return ol(i.databaseId,e.path)}function Wo(i,e){const n=Gu(e);if(n.get(1)!==i.databaseId.projectId)throw new Xe($e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Xe($e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Dt(Ah(n))}function Od(i,e){return ol(i.databaseId,e)}function Zf(i){const e=Gu(i);return 4===e.length?Bn.emptyPath():Ah(e)}function mu(i){return new Bn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ah(i){return Bt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Sh(i,e,n){return{name:jc(i,e),fields:n.value.mapValue.fields}}function Gl(i,e,n){const o=Wo(i,e.name),u=ui(e.updateTime),l=e.createTime?ui(e.createTime):Ht.min(),g=new Xi({mapValue:{fields:e.fields}}),S=Mn.newFoundDocument(o,u,l,g);return n&&S.setHasCommittedMutations(),n?S.setHasCommittedMutations():S}function Nd(i,e){let n;if(e instanceof zu)n={update:Sh(i,e.key,e.value)};else if(e instanceof So)n={delete:jc(i,e.key)};else if(e instanceof Go)n={update:Sh(i,e.key,e.data),updateMask:M_(e.fieldMask)};else{if(!(e instanceof Sd))return Vt();n={verify:jc(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(l,g){const S=g.transform;if(S instanceof $a)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(S instanceof ga)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:S.elements}};if(S instanceof Ha)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:S.elements}};if(S instanceof $u)return{fieldPath:g.field.canonicalString(),increment:S.Ie};throw Vt()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(l=e.precondition).updateTime?{updateTime:xd(i,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:Vt()),n;var l}function kd(i,e){const n=e.currentDocument?void 0!==(l=e.currentDocument).updateTime?Yr.updateTime(ui(l.updateTime)):void 0!==l.exists?Yr.exists(l.exists):Yr.none():Yr.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(g,S){let M=null;"setToServerValue"in S?(Bt("REQUEST_TIME"===S.setToServerValue),M=new $a):"appendMissingElements"in S?M=new ga(S.appendMissingElements.values||[]):"removeAllFromArray"in S?M=new Ha(S.removeAllFromArray.values||[]):"increment"in S?M=new $u(g,S.increment):Vt();const F=Nr.fromServerFormat(S.fieldPath);return new rl(F,M)}(i,u)):[];var l;if(e.update){const u=Wo(i,e.update.name),l=new Xi({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new Ji((e.updateMask.fieldPaths||[]).map(z=>Nr.fromServerFormat(z)));return new Go(u,l,g,n,o)}return new zu(u,l,n,o)}if(e.delete){const u=Wo(i,e.delete);return new So(u,n)}if(e.verify){const u=Wo(i,e.verify);return new Sd(u,n)}return Vt()}function Dg(i,e){return{documents:[Od(i,e.path)]}}function Rh(i,e){const n={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(n.parent=Od(i,o),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Od(i,o.popLast()),n.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(M){if(0!==M.length)return P_(m.create(M,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const l=function(M){if(0!==M.length)return M.map(F=>{return{field:al((X=F).field),direction:Mh(X.dir)};var X})}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const g=zt(i,e.limit);return null!==g&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt={before:(M=e.startAt).inclusive,values:M.position}),e.endAt&&(n.structuredQuery.endAt=function(M){return{before:!M.inclusive,values:M.position}}(e.endAt)),n;var M}function Ph(i){let e=Zf(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){Bt(1===o);const z=n.from[0];z.allDescendants?u=z.collectionId:e=e.child(z.collectionId)}let l=[];n.where&&(l=function(X){const _e=Yf(X);return _e instanceof m&&U(_e)?_e.getFilters():[_e]}(n.where));let g=[];n.orderBy&&(g=n.orderBy.map(_e=>{return new vs(Ld((yt=_e).field),function(Rt){switch(Rt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(yt.direction));var yt}));let S=null;n.limit&&(S=function(X){let _e;return _e="object"==typeof X?X.value:X,Ct(_e)?null:_e}(n.limit));let M=null;var X;n.startAt&&(M=new Bu((X=n.startAt).values||[],!!X.before));let F=null;return n.endAt&&(F=function(X){return new Bu(X.values||[],!X.before)}(n.endAt)),ju(e,u,g,l,S,"F",M,F)}function Yf(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Ld(n.unaryFilter.field);return h.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=Ld(n.unaryFilter.field);return h.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ld(n.unaryFilter.field);return h.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=Ld(n.unaryFilter.field);return h.create(g,"!=",{nullValue:"NULL_VALUE"});default:return Vt()}}(i):void 0!==i.fieldFilter?h.create(Ld((n=i).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Vt()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return m.create(n.compositeFilter.filters.map(o=>Yf(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return Vt()}}(n.compositeFilter.op))}(i):Vt();var n}function Mh(i){return xe[i]}function Ov(i){return tt[i]}function R_(i){return Ot[i]}function al(i){return{fieldPath:i.canonicalString()}}function Ld(i){return Nr.fromServerFormat(i.fieldPath)}function P_(i){return i instanceof h?function(n){if("=="===n.op){if(Ed(n.value))return{unaryFilter:{field:al(n.field),op:"IS_NAN"}};if(tl(n.value))return{unaryFilter:{field:al(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(Ed(n.value))return{unaryFilter:{field:al(n.field),op:"IS_NOT_NAN"}};if(tl(n.value))return{unaryFilter:{field:al(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:al(n.field),op:Ov(n.op),value:n.value}}}(i):i instanceof m?function(n){const o=n.getFilters().map(u=>P_(u));return 1===o.length?o[0]:{compositeFilter:{op:R_(n.op),filters:o}}}(i):Vt()}function M_(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Cg(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class _u{constructor(e,n,o,u,l=Ht.min(),g=Ht.min(),S=Qr.EMPTY_BYTE_STRING,M=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=S,this.expectedCount=M}withSequenceNumber(e){return new _u(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _u(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _u(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _u(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Jf{constructor(e){this.ut=e}}function x_(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Xf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:jc(l=i.ut,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:Mr(l,g.version.toTimestamp()),createTime:Mr(l,g.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:Vd(e.version)};else{if(!e.isUnknownDocument())return Vt();o.unknownDocument={path:n.path.toArray(),version:Vd(e.version)}}var l,g;return o}function Xf(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Vd(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wl(i){const e=new dr(i.seconds,i.nanoseconds);return Ht.fromTimestamp(e)}function $c(i,e){const n=(e.baseMutations||[]).map(l=>kd(i.ut,l));for(let l=0;l<e.mutations.length-1;++l)l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(e.mutations[l].updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l);const o=e.mutations.map(l=>kd(i.ut,l)),u=dr.fromMillis(e.localWriteTimeMs);return new bd(e.batchId,u,n,o)}function xh(i){const e=Wl(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?Wl(i.lastLimboFreeSnapshotVersion):Ht.min();let o;return o=void 0!==i.query.documents?(Bt(1===(l=i.query).documents.length),Wt(so(Zf(l.documents[0])))):function(l){return Wt(Ph(l))}(i.query),new _u(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,Qr.fromBase64String(i.resumeToken));var l}function ql(i,e){const n=Vd(e.snapshotVersion),o=Vd(e.lastLimboFreeSnapshotVersion);let u;u=Fr(e.target)?Dg(i.ut,e.target):Rh(i.ut,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Br(e.target),readTime:n,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Ud(i){const e=Ph({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Ei(e,e.limit,"L"):e}function Oh(i,e){return new Rd(e.largestBatchId,kd(i.ut,e.overlayMutation))}function Ag(i,e){const n=e.path.lastSegment();return[i,fn(e.path.popLast()),n]}function Sg(i,e,n,o){return{indexId:i,uid:e.uid||"",sequenceNumber:n,readTime:Vd(o.readTime),documentKey:fn(o.documentKey.path),largestBatchId:o.largestBatchId}}class O_{getBundleMetadata(e,n){return bg(e).get(n).next(o=>{if(o)return{id:(l=o).bundleId,createTime:Wl(l.createTime),version:l.version};var l})}saveBundleMetadata(e,n){return bg(e).put({bundleId:(u=n).id,createTime:Vd(ui(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return N_(e).get(n).next(o=>{if(o)return{name:(l=o).name,query:Ud(l.bundledQuery),readTime:Wl(l.readTime)};var l})}saveNamedQuery(e,n){return N_(e).put({name:(u=n).name,readTime:Vd(ui(u.readTime)),bundledQuery:u.bundledQuery});var u}}function bg(i){return $i(i,"bundles")}function N_(i){return $i(i,"namedQueries")}class ep{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new ep(e,n.uid||"")}getOverlay(e,n){return Nh(e).get(Ag(this.userId,n)).next(o=>o?Oh(this.serializer,o):null)}getOverlays(e,n){const o=Ao();return Ne.forEach(n,u=>this.getOverlay(e,u).next(l=>{null!==l&&o.set(u,l)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((l,g)=>{const S=new Rd(n,g);u.push(this.lt(e,S))}),Ne.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(g=>u.add(fn(g.getCollectionPath())));const l=[];return u.forEach(g=>{const S=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,o+1],!1,!0);l.push(Nh(e).H("collectionPathOverlayIndex",S))}),Ne.waitFor(l)}getOverlaysForCollection(e,n,o){const u=Ao(),l=fn(n),g=IDBKeyRange.bound([this.userId,l,o],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Nh(e).W("collectionPathOverlayIndex",g).next(S=>{for(const M of S){const F=Oh(this.serializer,M);u.set(F.getKey(),F)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const l=Ao();let g;const S=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Nh(e).Y({index:"collectionGroupOverlayIndex",range:S},(M,F,z)=>{const X=Oh(this.serializer,F);l.size()<u||X.largestBatchId===g?(l.set(X.getKey(),X),g=X.largestBatchId):z.done()}).next(()=>l)}lt(e,n){return Nh(e).put(function(u,l,g){const[S,M,F]=Ag(l,g.mutation.key);return{userId:l,collectionPath:M,documentId:F,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:Nd(u.ut,g.mutation)}}(this.serializer,this.userId,n))}}function Nh(i){return $i(i,"documentOverlays")}class Kl{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(ar(e.integerValue));else if("doubleValue"in e){const o=ar(e.doubleValue);isNaN(o)?this.Tt(n,13):(this.Tt(n,15),hn(o)?n.Et(0):n.Et(o))}else if("timestampValue"in e){const o=e.timestampValue;this.Tt(n,20),"string"==typeof o?n.dt(o):(n.dt(`${o.seconds||""}`),n.Et(o.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Ms(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.Tt(n,45),n.Et(o.latitude||0),n.Et(o.longitude||0)}else"mapValue"in e?vh(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):Vt()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const o=e.fields||{};this.Tt(n,55);for(const u of Object.keys(o))this.At(u,n),this.Pt(o[u],n)}yt(e,n){const o=e.values||[];this.Tt(n,50);for(const u of o)this.Pt(u,n)}ft(e,n){this.Tt(n,37),Dt.fromName(e).path.forEach(o=>{this.Tt(n,60),this.wt(o,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function Nv(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function Hc(i){const e=64-function(o){let u=0;for(let l=0;l<8;++l){const g=Nv(255&o[l]);if(u+=g,8!==g)break}return u}(i);return Math.ceil(e/8)}Kl.St=new Kl;class kh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Dt(o.value),o=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ft(o.value),o=n.next();this.Mt()}xt(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Dt(o);else if(o<2048)this.Dt(960|o>>>6),this.Dt(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|o>>>12),this.Dt(128|63&o>>>6),this.Dt(128|63&o);else{const u=n.codePointAt(0);this.Dt(240|u>>>18),this.Dt(128|63&u>>>12),this.Dt(128|63&u>>>6),this.Dt(128|63&u)}}this.Ct()}Ot(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const u=n.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Nt(e){const n=this.Bt(e),o=Hc(n);this.Lt(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}kt(e){const n=this.Bt(e),o=Hc(n);this.Lt(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(l){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,l,!1),new Uint8Array(g.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class kv{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class UI{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class tp{constructor(){this.Wt=new kh,this.Gt=new kv(this.Wt),this.zt=new UI(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Bd{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Bd(this.indexId,this.documentKey,this.arrayValue,o)}}function Zl(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=Lv(i.arrayValue,e.arrayValue),0!==n?n:(n=Lv(i.directionalValue,e.directionalValue),0!==n?n:Dt.comparator(i.documentKey,e.documentKey)))}function Lv(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class Rg{constructor(e){this.Jt=new hr((n,o)=>Nr.comparator(n.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const o=n;o.isInequality()?this.Jt=this.Jt.add(o):this.Zt.push(o)}}get Xt(){return this.Jt.size>1}en(e){if(Bt(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=bs(e);if(void 0!==n&&!this.tn(n))return!1;const o=Uo(e);let u=new Set,l=0,g=0;for(;l<o.length&&this.tn(o[l]);++l)u=u.add(o[l].fieldPath.canonicalString());if(l===o.length)return!0;if(this.Jt.size>0){const S=this.Jt.getIterator().getNext();if(!u.has(S.field.canonicalString())){const M=o[l];if(!this.nn(S,M)||!this.rn(this.Yt[g++],M))return!1}++l}for(;l<o.length;++l)if(g>=this.Yt.length||!this.rn(this.Yt[g++],o[l]))return!1;return!0}sn(){if(this.Xt)return null;let e=new hr(Nr.comparator);const n=[];for(const o of this.Zt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)n.push(new yi(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),n.push(new yi(o.field,0))}for(const o of this.Yt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),n.push(new yi(o.field,"asc"===o.dir?0:1)));return new Lr(Lr.UNKNOWN_ID,this.collectionId,n,la.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function k_(i){var e,n;if(Bt(i instanceof h||i instanceof m),i instanceof h){if(i instanceof In){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(l=>h.create(i.field,"==",l)))||[];return m.create(u,"or")}return i}const o=i.filters.map(u=>k_(u));return m.create(o,i.op)}function Fv(i){if(0===i.getFilters().length)return[];const e=Wu(k_(i));return Bt(np(e)),Pg(e)||Mg(e)?[e]:e.getFilters()}function Pg(i){return i instanceof h}function Mg(i){return i instanceof m&&U(i)}function np(i){return Pg(i)||Mg(i)||function(n){if(n instanceof m&&x(n)){for(const o of n.getFilters())if(!Pg(o)&&!Mg(o))return!1;return!0}return!1}(i)}function Wu(i){if(Bt(i instanceof h||i instanceof m),i instanceof h)return i;if(1===i.filters.length)return Wu(i.filters[0]);const e=i.filters.map(o=>Wu(o));let n=m.create(e,i.op);return n=Lh(n),np(n)?n:(Bt(n instanceof m),Bt(T(n)),Bt(n.filters.length>1),n.filters.reduce((o,u)=>Ql(o,u)))}function Ql(i,e){let n;return Bt(i instanceof h||i instanceof m),Bt(e instanceof h||e instanceof m),n=i instanceof h?e instanceof h?m.create([i,e],"and"):xg(i,e):e instanceof h?xg(e,i):function(u,l){if(Bt(u.filters.length>0&&l.filters.length>0),T(u)&&T(l))return Ae(u,l.getFilters());const g=x(u)?u:l,S=x(u)?l:u,M=g.filters.map(F=>Ql(F,S));return m.create(M,"or")}(i,e),Lh(n)}function xg(i,e){if(T(e))return Ae(e,i.getFilters());{const n=e.filters.map(o=>Ql(i,o));return m.create(n,"or")}}function Lh(i){if(Bt(i instanceof h||i instanceof m),i instanceof h)return i;const e=i.getFilters();if(1===e.length)return Lh(e[0]);if(J(i))return i;const n=e.map(u=>Lh(u)),o=[];return n.forEach(u=>{u instanceof h?o.push(u):u instanceof m&&(u.op===i.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:m.create(o,i.op)}class L_{constructor(){this.on=new F_}addToCollectionParentIndex(e,n){return this.on.add(n),Ne.resolve()}getCollectionParents(e,n){return Ne.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return Ne.resolve()}deleteFieldIndex(e,n){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,n){return Ne.resolve()}getDocumentsMatchingTarget(e,n){return Ne.resolve(null)}getIndexType(e,n){return Ne.resolve(0)}getFieldIndexes(e,n){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,n){return Ne.resolve(Yi.min())}getMinOffsetFromCollectionGroup(e,n){return Ne.resolve(Yi.min())}updateCollectionGroup(e,n,o){return Ne.resolve()}updateIndexEntries(e,n){return Ne.resolve()}}class F_{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new hr(Bn.comparator),l=!u.has(o);return this.index[n]=u.add(o),l}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new hr(Bn.comparator)).toArray()}}const Og=new Uint8Array(0);class BI{constructor(e,n){this.user=e,this.databaseId=n,this._n=new F_,this.an=new Es(o=>Br(o),(o,u)=>ai(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const l={collectionId:o,parent:fn(u)};return rp(e).put(l)}return Ne.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[cc(n),""],!1,!0);return rp(e).W(u).next(l=>{for(const g of l){if(g.collectionId!==n)break;o.push(xi(g.parent))}return o})}addFieldIndex(e,n){const o=ip(e),u={indexId:(S=n).indexId,collectionGroup:S.collectionGroup,fields:S.fields.map(M=>[M.fieldPath.canonicalString(),M.kind])};var S;delete u.indexId;const l=o.add(u);if(n.indexState){const g=Fh(e);return l.next(S=>{g.put(Sg(S,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return l.next()}deleteFieldIndex(e,n){const o=ip(e),u=Fh(e),l=ul(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=ip(e),o=ul(e),u=Fh(e);return n.H().next(()=>o.H()).next(()=>u.H())}createTargetIndexes(e,n){return Ne.forEach(this.un(n),o=>this.getIndexType(e,o).next(u=>{if(0===u||1===u){const l=new Rg(o).sn();if(null!=l)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,n){const o=ul(e);let u=!0;const l=new Map;return Ne.forEach(this.un(n),g=>this.cn(e,g).next(S=>{u&&(u=!!S),l.set(g,S)})).next(()=>{if(u){let g=Fn();const S=[];return Ne.forEach(l,(M,F)=>{var pn;ut("IndexedDbIndexManager",`Using index ${pn=M,`id=${pn.indexId}|cg=${pn.collectionGroup}|f=${pn.fields.map(qn=>`${qn.fieldPath}:${qn.kind}`).join(",")}`} to execute ${Br(n)}`);const z=function(pn,qn){const mr=bs(qn);if(void 0===mr)return null;for(const br of es(pn,mr.fieldPath))switch(br.op){case"array-contains-any":return br.value.arrayValue.values||[];case"array-contains":return[br.value]}return null}(F,M),X=function(pn,qn){const mr=new Map;for(const br of Uo(qn))for(const hs of es(pn,br.fieldPath))switch(hs.op){case"==":case"in":mr.set(br.fieldPath.canonicalString(),hs.value);break;case"not-in":case"!=":return mr.set(br.fieldPath.canonicalString(),hs.value),Array.from(mr.values())}return null}(F,M),_e=function(pn,qn){const mr=[];let br=!0;for(const hs of Uo(qn)){const Ju=0===hs.kind?xs(pn,hs.fieldPath,pn.startAt):Co(pn,hs.fieldPath,pn.startAt);mr.push(Ju.value),br&&(br=Ju.inclusive)}return new Bu(mr,br)}(F,M),Ve=function(pn,qn){const mr=[];let br=!0;for(const hs of Uo(qn)){const Ju=0===hs.kind?Co(pn,hs.fieldPath,pn.endAt):xs(pn,hs.fieldPath,pn.endAt);mr.push(Ju.value),br&&(br=Ju.inclusive)}return new Bu(mr,br)}(F,M),yt=this.ln(M,F,_e),At=this.ln(M,F,Ve),Rt=this.hn(M,F,X),mn=this.Pn(M.indexId,z,yt,_e.inclusive,At,Ve.inclusive,Rt);return Ne.forEach(mn,wn=>o.j(wn,n.limit).next(pn=>{pn.forEach(qn=>{const mr=Dt.fromSegments(qn.documentKey);g.has(mr)||(g=g.add(mr),S.push(mr))})}))}).next(()=>S)}return Ne.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:Fv(m.create(e.filters,"and")).map(o=>jn(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,o,u,l,g,S){const M=(null!=n?n.length:1)*Math.max(o.length,l.length),F=M/(null!=n?n.length:1),z=[];for(let X=0;X<M;++X){const _e=n?this.In(n[X/F]):Og,Ve=this.Tn(e,_e,o[X%F],u),yt=this.En(e,_e,l[X%F],g),At=S.map(Rt=>this.Tn(e,_e,Rt,!0));z.push(...this.createRange(Ve,yt,At))}return z}Tn(e,n,o,u){const l=new Bd(e,Dt.empty(),n,o);return u?l:l.Ht()}En(e,n,o,u){const l=new Bd(e,Dt.empty(),n,o);return u?l.Ht():l}cn(e,n){const o=new Rg(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(l=>{let g=null;for(const S of l)o.en(S)&&(!g||S.fields.length>g.fields.length)&&(g=S);return g})}getIndexType(e,n){let o=2;const u=this.un(n);return Ne.forEach(u,l=>this.cn(e,l).next(g=>{g?0!==o&&g.fields.length<function(M){let F=new hr(Nr.comparator),z=!1;for(const X of M.filters)for(const _e of X.getFlattenedFilters())_e.field.isKeyField()||("array-contains"===_e.op||"array-contains-any"===_e.op?z=!0:F=F.add(_e.field));for(const X of M.orderBy)X.field.isKeyField()||(F=F.add(X.field));return F.size+(z?1:0)}(l)&&(o=1):o=0})).next(()=>null!==n.limit&&u.length>1&&2===o?1:o)}dn(e,n){const o=new tp;for(const u of Uo(e)){const l=n.data.field(u.fieldPath);if(null==l)return null;const g=o.jt(u.kind);Kl.St.ht(l,g)}return o.Ut()}In(e){const n=new tp;return Kl.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const o=new tp;return Kl.St.ht($o(this.databaseId,n),o.jt(function(l){const g=Uo(l);return 0===g.length?0:g[g.length-1].kind}(e))),o.Ut()}hn(e,n,o){if(null===o)return[];let u=[];u.push(new tp);let l=0;for(const g of Uo(e)){const S=o[l++];for(const M of u)if(this.Rn(n,g.fieldPath)&&pa(S))u=this.Vn(u,g,S);else{const F=M.jt(g.kind);Kl.St.ht(S,F)}}return this.mn(u)}ln(e,n,o){return this.hn(e,n,o.position)}mn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Ut();return n}Vn(e,n,o){const u=[...e],l=[];for(const g of o.arrayValue.values||[])for(const S of u){const M=new tp;M.seed(S.Ut()),Kl.St.ht(g,M.jt(n.kind)),l.push(M)}return l}Rn(e,n){return!!e.filters.find(o=>o instanceof h&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=ip(e),u=Fh(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(l=>{const g=[];return Ne.forEach(l,S=>u.get([S.indexId,this.uid]).next(M=>{g.push(function(z,X){const _e=X?new la(X.sequenceNumber,new Yi(Wl(X.readTime),new Dt(xi(X.documentKey)),X.largestBatchId)):la.empty(),Ve=z.fields.map(([yt,At])=>new yi(Nr.fromServerFormat(yt),At));return new Lr(z.indexId,z.collectionGroup,Ve,_e)}(S,M))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const l=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==l?l:_n(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=ip(e),l=Fh(e);return this.fn(e).next(g=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(S=>Ne.forEach(S,M=>l.put(Sg(M.indexId,this.user,g,o)))))}updateIndexEntries(e,n){const o=new Map;return Ne.forEach(n,(u,l)=>{const g=o.get(u.collectionGroup);return(g?Ne.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(S=>(o.set(u.collectionGroup,S),Ne.forEach(S,M=>this.gn(e,u,M).next(F=>{const z=this.pn(l,M);return F.isEqual(z)?Ne.resolve():this.yn(e,l,M,F,z)}))))})}wn(e,n,o,u){return ul(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.An(o,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,o,u){return ul(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.An(o,n.key),n.key.path.toArray()])}gn(e,n,o){const u=ul(e);let l=new hr(Zl);return u.Y({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.An(o,n)])},(g,S)=>{l=l.add(new Bd(o.indexId,n,S.arrayValue,S.directionalValue))}).next(()=>l)}pn(e,n){let o=new hr(Zl);const u=this.dn(n,e);if(null==u)return o;const l=bs(n);if(null!=l){const g=e.data.field(l.fieldPath);if(pa(g))for(const S of g.arrayValue.values||[])o=o.add(new Bd(n.indexId,e.key,this.In(S),u))}else o=o.add(new Bd(n.indexId,e.key,Og,u));return o}yn(e,n,o,u,l){ut("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const g=[];return function(M,F,z,X,_e){const Ve=M.getIterator(),yt=F.getIterator();let At=Ua(Ve),Rt=Ua(yt);for(;At||Rt;){let mn=!1,wn=!1;if(At&&Rt){const pn=z(At,Rt);pn<0?wn=!0:pn>0&&(mn=!0)}else null!=At?wn=!0:mn=!0;mn?(X(Rt),Rt=Ua(yt)):wn?(_e(At),At=Ua(Ve)):(At=Ua(Ve),Rt=Ua(yt))}}(u,l,Zl,S=>{g.push(this.wn(e,n,o,S))},S=>{g.push(this.Sn(e,n,o,S))}),Ne.waitFor(g)}fn(e){let n=1;return Fh(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,l)=>{l.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((g,S)=>Zl(g,S)).filter((g,S,M)=>!S||0!==Zl(g,M[S-1]));const u=[];u.push(e);for(const g of o){const S=Zl(g,e),M=Zl(g,n);if(0===S)u[0]=e.Ht();else if(S>0&&M<0)u.push(g),u.push(g.Ht());else if(M>0)break}u.push(n);const l=[];for(let g=0;g<u.length;g+=2){if(this.bn(u[g],u[g+1]))return[];l.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,Og,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,Og,[]]))}return l}bn(e,n){return Zl(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Ng)}getMinOffset(e,n){return Ne.mapArray(this.un(n),o=>this.cn(e,o).next(u=>u||Vt())).next(Ng)}}function rp(i){return $i(i,"collectionParents")}function ul(i){return $i(i,"indexEntries")}function ip(i){return $i(i,"indexConfiguration")}function Fh(i){return $i(i,"indexState")}function Ng(i){Bt(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;Nu(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new Yi(e.readTime,e.documentKey,n)}const V_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bo{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new bo(e,bo.DEFAULT_COLLECTION_PERCENTILE,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function U_(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),l=[],g=IDBKeyRange.only(n.batchId);let S=0;const M=o.Y({range:g},(z,X,_e)=>(S++,_e.delete()));l.push(M.next(()=>{Bt(1===S)}));const F=[];for(const z of n.mutations){const X=ku(e,z.key.path,n.batchId);l.push(u.delete(X)),F.push(z.key)}return Ne.waitFor(l).next(()=>F)}function sp(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Vt();e=i.noDocument}return JSON.stringify(e).length}bo.DEFAULT_COLLECTION_PERCENTILE=10,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bo.DEFAULT=new bo(41943040,bo.DEFAULT_COLLECTION_PERCENTILE,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bo.DISABLED=new bo(-1,0,0);class Vh{constructor(e,n,o,u){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=u,this.Dn={}}static ct(e,n,o,u){Bt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new Vh(l,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cl(e).Y({index:"userMutationsIndex",range:o},(u,l,g)=>{n=!1,g.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const l=ll(e),g=cl(e);return g.add({}).next(S=>{Bt("number"==typeof S);const M=new bd(S,n,o,u),F=function(Ve,yt,At){const Rt=At.baseMutations.map(wn=>Nd(Ve.ut,wn)),mn=At.mutations.map(wn=>Nd(Ve.ut,wn));return{userId:yt,batchId:At.batchId,localWriteTimeMs:At.localWriteTime.toMillis(),baseMutations:Rt,mutations:mn}}(this.serializer,this.userId,M),z=[];let X=new hr((_e,Ve)=>_n(_e.canonicalString(),Ve.canonicalString()));for(const _e of u){const Ve=ku(this.userId,_e.key.path,S);X=X.add(_e.key.path.popLast()),z.push(g.put(F)),z.push(l.put(Ve,hc))}return X.forEach(_e=>{z.push(this.indexManager.addToCollectionParentIndex(e,_e))}),e.addOnCommittedListener(()=>{this.Dn[S]=M.keys()}),Ne.waitFor(z).next(()=>M)})}lookupMutationBatch(e,n){return cl(e).get(n).next(o=>o?(Bt(o.userId===this.userId),$c(this.serializer,o)):null)}Cn(e,n){return this.Dn[n]?Ne.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.Dn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let l=null;return cl(e).Y({index:"userMutationsIndex",range:u},(g,S,M)=>{S.userId===this.userId&&(Bt(S.batchId>=o),l=$c(this.serializer,S)),M.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return cl(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(u,l,g)=>{o=l.batchId,g.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cl(e).W("userMutationsIndex",n).next(o=>o.map(u=>$c(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=ys(this.userId,n.path),u=IDBKeyRange.lowerBound(o),l=[];return ll(e).Y({range:u},(g,S,M)=>{const[F,z,X]=g,_e=xi(z);if(F===this.userId&&n.path.isEqual(_e))return cl(e).get(X).next(Ve=>{if(!Ve)throw Vt();Bt(Ve.userId===this.userId),l.push($c(this.serializer,Ve))});M.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new hr(_n);const u=[];return n.forEach(l=>{const g=ys(this.userId,l.path),S=IDBKeyRange.lowerBound(g),M=ll(e).Y({range:S},(F,z,X)=>{const[_e,Ve,yt]=F,At=xi(Ve);_e===this.userId&&l.path.isEqual(At)?o=o.add(yt):X.done()});u.push(M)}),Ne.waitFor(u).next(()=>this.vn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,l=ys(this.userId,o),g=IDBKeyRange.lowerBound(l);let S=new hr(_n);return ll(e).Y({range:g},(M,F,z)=>{const[X,_e,Ve]=M,yt=xi(_e);X===this.userId&&o.isPrefixOf(yt)?yt.length===u&&(S=S.add(Ve)):z.done()}).next(()=>this.vn(e,S))}vn(e,n){const o=[],u=[];return n.forEach(l=>{u.push(cl(e).get(l).next(g=>{if(null===g)throw Vt();Bt(g.userId===this.userId),o.push($c(this.serializer,g))}))}),Ne.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return U_(e.ae,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),Ne.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Ne.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return ll(e).Y({range:o},(l,g,S)=>{if(l[0]===this.userId){const M=xi(l[1]);u.push(M)}else S.done()}).next(()=>{Bt(0===u.length)})})}containsKey(e,n){return Uh(e,this.userId,n)}Mn(e){return B_(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Uh(i,e,n){const o=ys(e,n.path),u=o[1],l=IDBKeyRange.lowerBound(o);let g=!1;return ll(i).Y({range:l,J:!0},(S,M,F)=>{const[z,X,_e]=S;z===e&&X===u&&(g=!0),F.done()}).next(()=>g)}function cl(i){return $i(i,"mutations")}function ll(i){return $i(i,"documentMutations")}function B_(i){return $i(i,"mutationQueues")}class yu{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new yu(0)}static Nn(){return new yu(-1)}}class Vv{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const o=new yu(n.highestTargetId);return n.highestTargetId=o.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Ht.fromTimestamp(new dr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Bn(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.Ln(e,u)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(o=>(o.targetCount+=1,this.qn(n,o),this.Ln(e,o))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>jd(e).delete(n.targetId)).next(()=>this.Bn(e)).next(o=>(Bt(o.targetCount>0),o.targetCount-=1,this.Ln(e,o)))}removeTargets(e,n,o){let u=0;const l=[];return jd(e).Y((g,S)=>{const M=xh(S);M.sequenceNumber<=n&&null===o.get(M.targetId)&&(u++,l.push(this.removeTargetData(e,M)))}).next(()=>Ne.waitFor(l)).next(()=>u)}forEachTarget(e,n){return jd(e).Y((o,u)=>{const l=xh(u);n(l)})}Bn(e){return op(e).get("targetGlobalKey").next(n=>(Bt(null!==n),n))}Ln(e,n){return op(e).put("targetGlobalKey",n)}kn(e,n){return jd(e).put(ql(this.serializer,n))}qn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=Br(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let l=null;return jd(e).Y({range:u,index:"queryTargetsIndex"},(g,S,M)=>{const F=xh(S);ai(n,F.target)&&(l=F,M.done())}).next(()=>l)}addMatchingKeys(e,n,o){const u=[],l=zc(e);return n.forEach(g=>{const S=fn(g.path);u.push(l.put({targetId:o,path:S})),u.push(this.referenceDelegate.addReference(e,o,g))}),Ne.waitFor(u)}removeMatchingKeys(e,n,o){const u=zc(e);return Ne.forEach(n,l=>{const g=fn(l.path);return Ne.waitFor([u.delete([o,g]),this.referenceDelegate.removeReference(e,o,l)])})}removeMatchingKeysForTargetId(e,n){const o=zc(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=zc(e);let l=Fn();return u.Y({range:o,J:!0},(g,S,M)=>{const F=xi(g[1]),z=new Dt(F);l=l.add(z)}).next(()=>l)}containsKey(e,n){const o=fn(n.path),u=IDBKeyRange.bound([o],[cc(o)],!1,!0);let l=0;return zc(e).Y({index:"documentTargetsIndex",J:!0,range:u},([g,S],M,F)=>{0!==g&&(l++,F.done())}).next(()=>l>0)}_t(e,n){return jd(e).get(n).next(o=>o?xh(o):null)}}function jd(i){return $i(i,"targets")}function op(i){return $i(i,"targetGlobal")}function zc(i){return $i(i,"targetDocuments")}function j_([i,e],[n,o]){const u=_n(i,n);return 0===u?_n(e,o):u}class Uv{constructor(e){this.Qn=e,this.buffer=new hr(j_),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();j_(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $_{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;ut("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,pe.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){b(o)?ut("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield La(o)}yield n.Gn(3e5)}))}}class Bv{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return Ne.resolve(Re._e);const o=new Uv(n);return this.zn.forEachTarget(e,u=>o.Un(u.sequenceNumber)).next(()=>this.zn.Hn(e,u=>o.Un(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.zn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(ut("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(V_)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(ut("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),V_):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let o,u,l,g,S,M,F;const z=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(X=>(X>this.params.maximumSequenceNumbersToCollect?(ut("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${X}`),u=this.params.maximumSequenceNumbersToCollect):u=X,g=Date.now(),this.nthSequenceNumber(e,u))).next(X=>(o=X,S=Date.now(),this.removeTargets(e,o,n))).next(X=>(l=X,M=Date.now(),this.removeOrphanedDocuments(e,o))).next(X=>(F=Date.now(),to()<=Ee.in.DEBUG&&ut("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-z}ms\n\tDetermined least recently used ${u} in `+(S-g)+`ms\n\tRemoved ${l} targets in `+(M-S)+`ms\n\tRemoved ${X} documents in `+(F-M)+`ms\nTotal Duration: ${F-z}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:l,documentsRemoved:X})))}}class jI{constructor(e,n){this.db=e,this.garbageCollector=function kg(i,e){return new Bv(i,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}Yn(e){let n=0;return this.Hn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(o,u)=>n(u))}addReference(e,n,o){return Lg(e,o)}removeReference(e,n,o){return Lg(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return Lg(e,n)}Xn(e,n){return function(u,l){let g=!1;return B_(u).Z(S=>Uh(u,S,l).next(M=>(M&&(g=!0),Ne.resolve(!M)))).next(()=>g)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let l=0;return this.Zn(e,(g,S)=>{if(S<=n){const M=this.Xn(e,g).next(F=>{if(!F)return l++,o.getEntry(e,g).next(()=>(o.removeEntry(g,Ht.min()),zc(e).delete([0,fn(g.path)])))});u.push(M)}}).next(()=>Ne.waitFor(u)).next(()=>o.apply(e)).next(()=>l)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return Lg(e,n)}Zn(e,n){const o=zc(e);let u,l=Re._e;return o.Y({index:"documentTargetsIndex"},([g,S],{path:M,sequenceNumber:F})=>{0===g?(l!==Re._e&&n(new Dt(xi(u)),l),l=F,u=M):l=Re._e}).next(()=>{l!==Re._e&&n(new Dt(xi(u)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lg(i,e){return zc(i).put((u=i.currentSequenceNumber,{targetId:0,path:fn(e.path),sequenceNumber:u}));var u}class $d{constructor(){this.changes=new Es(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?Ne.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Bh{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return dl(e).put(o)}removeEntry(e,n,o){return dl(e).delete(function(l,g){const S=l.path.toArray();return[S.slice(0,S.length-2),S[S.length-2],Xf(g),S[S.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.er(e,o)))}getEntry(e,n){let o=Mn.newInvalidDocument(n);return dl(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(jh(n))},(u,l)=>{o=this.tr(n,l)}).next(()=>o)}nr(e,n){let o={size:0,document:Mn.newInvalidDocument(n)};return dl(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(jh(n))},(u,l)=>{o={document:this.tr(n,l),size:sp(l)}}).next(()=>o)}getEntries(e,n){let o=ns();return this.rr(e,n,(u,l)=>{const g=this.tr(u,l);o=o.insert(u,g)}).next(()=>o)}ir(e,n){let o=ns(),u=new gr(Dt.comparator);return this.rr(e,n,(l,g)=>{const S=this.tr(l,g);o=o.insert(l,S),u=u.insert(l,sp(g))}).next(()=>({documents:o,sr:u}))}rr(e,n,o){if(n.isEmpty())return Ne.resolve();let u=new hr(Ug);n.forEach(M=>u=u.add(M));const l=IDBKeyRange.bound(jh(u.first()),jh(u.last())),g=u.getIterator();let S=g.getNext();return dl(e).Y({index:"documentKeyIndex",range:l},(M,F,z)=>{const X=Dt.fromSegments([...F.prefixPath,F.collectionGroup,F.documentId]);for(;S&&Ug(S,X)<0;)o(S,null),S=g.getNext();S&&S.isEqual(X)&&(o(S,F),S=g.hasNext()?g.getNext():null),S?z.U(jh(S)):z.done()}).next(()=>{for(;S;)o(S,null),S=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,n,o,u,l){const g=n.path,S=[g.popLast().toArray(),g.lastSegment(),Xf(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],M=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return dl(e).W(IDBKeyRange.bound(S,M,!0)).next(F=>{l?.incrementDocumentReadCount(F.length);let z=ns();for(const X of F){const _e=this.tr(Dt.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);_e.isFoundDocument()&&(Sr(n,_e)||u.has(_e.key))&&(z=z.insert(_e.key,_e))}return z})}getAllFromCollectionGroup(e,n,o,u){let l=ns();const g=Vg(n,o),S=Vg(n,Yi.max());return dl(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,S,!0)},(M,F,z)=>{const X=this.tr(Dt.fromSegments(F.prefixPath.concat(F.collectionGroup,F.documentId)),F);l=l.insert(X.key,X),l.size===u&&z.done()}).next(()=>l)}newChangeBuffer(e){return new H_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return ap(e).get("remoteDocumentGlobalKey").next(n=>(Bt(!!n),n))}er(e,n){return ap(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const o=function Fd(i,e){let n;if(e.document)n=Gl(i.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Dt.fromSegments(e.noDocument.path),u=Wl(e.noDocument.readTime);n=Mn.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Vt();{const o=Dt.fromSegments(e.unknownDocument.path),u=Wl(e.unknownDocument.version);n=Mn.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(u){const l=new dr(u[0],u[1]);return Ht.fromTimestamp(l)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual(Ht.min()))return o}return Mn.newInvalidDocument(e)}}function Fg(i){return new Bh(i)}class H_ extends $d{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Es(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new hr((l,g)=>_n(l.canonicalString(),g.canonicalString()));return this.changes.forEach((l,g)=>{const S=this.ar.get(l);if(n.push(this._r.removeEntry(e,l,S.readTime)),g.isValidDocument()){const M=x_(this._r.serializer,g);u=u.add(l.path.popLast());const F=sp(M);o+=F-S.size,n.push(this._r.addEntry(e,l,M))}else if(o-=S.size,this.trackRemovals){const M=x_(this._r.serializer,g.convertToNoDocument(Ht.min()));n.push(this._r.addEntry(e,l,M))}}),u.forEach(l=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,l))}),n.push(this._r.updateMetadata(e,o)),Ne.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(o=>(this.ar.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:o,sr:u})=>(u.forEach((l,g)=>{this.ar.set(l,{size:g,readTime:o.get(l).readTime})}),o))}}function ap(i){return $i(i,"remoteDocumentGlobal")}function dl(i){return $i(i,"remoteDocumentsV14")}function jh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Vg(i,e){const n=e.documentKey.path.toArray();return[i,Xf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ug(i,e){const n=i.path.toArray(),o=e.path.toArray();let u=0;for(let l=0;l<n.length-2&&l<o.length-2;++l)if(u=_n(n[l],o[l]),u)return u;return u=_n(n.length,o.length),u||(u=_n(n[n.length-2],o[o.length-2]),u||_n(n[n.length-1],o[o.length-1]))}class up{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class jv{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==o&&Hu(o.mutation,u,Ji.empty(),dr.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,Fn()).next(()=>o))}getLocalViewOfDocuments(e,n,o=Fn()){const u=Ao();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(l=>{let g=Vl();return l.forEach((S,M)=>{g=g.insert(S,M.overlayedDocument)}),g}))}getOverlayedDocuments(e,n){const o=Ao();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,Fn()))}populateOverlays(e,n,o){const u=[];return o.forEach(l=>{n.has(l)||u.push(l)}),this.documentOverlayCache.getOverlays(e,u).next(l=>{l.forEach((g,S)=>{n.set(g,S)})})}computeViews(e,n,o,u){let l=ns();const g=wd(),S=wd();return n.forEach((M,F)=>{const z=o.get(F.key);u.has(F.key)&&(void 0===z||z.mutation instanceof Go)?l=l.insert(F.key,F):void 0!==z?(g.set(F.key,z.mutation.getFieldMask()),Hu(z.mutation,F,z.mutation.getFieldMask(),dr.now())):g.set(F.key,Ji.empty())}),this.recalculateAndSaveOverlays(e,l).next(M=>(M.forEach((F,z)=>g.set(F,z)),n.forEach((F,z)=>{var X;return S.set(F,new up(z,null!==(X=g.get(F))&&void 0!==X?X:null))}),S))}recalculateAndSaveOverlays(e,n){const o=wd();let u=new gr((g,S)=>g-S),l=Fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(g=>{for(const S of g)S.keys().forEach(M=>{const F=n.get(M);if(null===F)return;let z=o.get(M)||Ji.empty();z=S.applyToLocalView(F,z),o.set(M,z);const X=(u.get(S.batchId)||Fn()).add(M);u=u.insert(S.batchId,X)})}).next(()=>{const g=[],S=u.getReverseIterator();for(;S.hasNext();){const M=S.getNext(),F=M.key,z=M.value,X=Ig();z.forEach(_e=>{if(!l.has(_e)){const Ve=wh(n.get(_e),o.get(_e));null!==Ve&&X.set(_e,Ve),l=l.add(_e)}}),g.push(this.documentOverlayCache.saveOverlays(e,F,X))}return Ne.waitFor(g)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,u){return Dt.isDocumentKey((g=n).path)&&null===g.collectionGroup&&0===g.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):pu(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u);var g}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(l=>{const g=u-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-l.size):Ne.resolve(Ao());let S=-1,M=l;return g.next(F=>Ne.forEach(F,(z,X)=>(S<X.largestBatchId&&(S=X.largestBatchId),l.get(z)?Ne.resolve():this.remoteDocumentCache.getEntry(e,z).next(_e=>{M=M.insert(z,_e)}))).next(()=>this.populateOverlays(e,F,l)).next(()=>this.computeViews(e,M,F,Fn())).next(z=>({batchId:S,changes:Eh(z)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Dt(n)).next(o=>{let u=Vl();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const l=n.collectionGroup;let g=Vl();return this.indexManager.getCollectionParents(e,l).next(S=>Ne.forEach(S,M=>{const F=(X=n,_e=M.child(l),new io(_e,null,X.explicitOrderBy.slice(),X.filters.slice(),X.limit,X.limitType,X.startAt,X.endAt));var X,_e;return this.getDocumentsMatchingCollectionQuery(e,F,o,u).next(z=>{z.forEach((X,_e)=>{g=g.insert(X,_e)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,n,o,u){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(g=>(l=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,l,u))).next(g=>{l.forEach((M,F)=>{const z=F.getKey();null===g.get(z)&&(g=g.insert(z,Mn.newInvalidDocument(z)))});let S=Vl();return g.forEach((M,F)=>{const z=l.get(M);void 0!==z&&Hu(z.mutation,F,Ji.empty(),dr.now()),Sr(n,F)&&(S=S.insert(M,F))}),S})}}class Bg{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return Ne.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(u=n).id,version:u.version,createTime:ui(u.createTime)}),Ne.resolve();var u}getNamedQuery(e,n){return Ne.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(u=n).name,query:Ud(u.bundledQuery),readTime:ui(u.readTime)}),Ne.resolve();var u}}class $v{constructor(){this.overlays=new gr(Dt.comparator),this.lr=new Map}getOverlay(e,n){return Ne.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Ao();return Ne.forEach(n,u=>this.getOverlay(e,u).next(l=>{null!==l&&o.set(u,l)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,l)=>{this.lt(e,n,l)}),Ne.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.lr.get(o);return void 0!==u&&(u.forEach(l=>this.overlays=this.overlays.remove(l)),this.lr.delete(o)),Ne.resolve()}getOverlaysForCollection(e,n,o){const u=Ao(),l=n.length+1,g=new Dt(n.child("")),S=this.overlays.getIteratorFrom(g);for(;S.hasNext();){const M=S.getNext().value,F=M.getKey();if(!n.isPrefixOf(F.path))break;F.path.length===l&&M.largestBatchId>o&&u.set(M.getKey(),M)}return Ne.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let l=new gr((F,z)=>F-z);const g=this.overlays.getIterator();for(;g.hasNext();){const F=g.getNext().value;if(F.getKey().getCollectionGroup()===n&&F.largestBatchId>o){let z=l.get(F.largestBatchId);null===z&&(z=Ao(),l=l.insert(F.largestBatchId,z)),z.set(F.getKey(),F)}}const S=Ao(),M=l.getIterator();for(;M.hasNext()&&(M.getNext().value.forEach((F,z)=>S.set(F,z)),!(S.size()>=u)););return Ne.resolve(S)}lt(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const g=this.lr.get(u.largestBatchId).delete(o.key);this.lr.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(o.key,new Rd(n,o));let l=this.lr.get(n);void 0===l&&(l=Fn(),this.lr.set(n,l)),this.lr.set(n,l.add(o.key))}}class $h{constructor(){this.hr=new hr(ks.Pr),this.Ir=new hr(ks.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const o=new ks(e,n);this.hr=this.hr.add(o),this.Ir=this.Ir.add(o)}Er(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.dr(new ks(e,n))}Ar(e,n){e.forEach(o=>this.removeReference(o,n))}Rr(e){const n=new Dt(new Bn([])),o=new ks(n,e),u=new ks(n,e+1),l=[];return this.Ir.forEachInRange([o,u],g=>{this.dr(g),l.push(g.key)}),l}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new Dt(new Bn([])),o=new ks(n,e),u=new ks(n,e+1);let l=Fn();return this.Ir.forEachInRange([o,u],g=>{l=l.add(g.key)}),l}containsKey(e){const n=new ks(e,0),o=this.hr.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class ks{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return Dt.comparator(e.key,n.key)||_n(e.gr,n.gr)}static Tr(e,n){return _n(e.gr,n.gr)||Dt.comparator(e.key,n.key)}}class z_{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new hr(ks.Pr)}checkEmpty(e){return Ne.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const l=this.pr;this.pr++;const g=new bd(l,n,o,u);this.mutationQueue.push(g);for(const S of u)this.yr=this.yr.add(new ks(S.key,l)),this.indexManager.addToCollectionParentIndex(e,S.key.path.popLast());return Ne.resolve(g)}lookupMutationBatch(e,n){return Ne.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.Sr(n+1),l=u<0?0:u;return Ne.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new ks(n,0),u=new ks(n,Number.POSITIVE_INFINITY),l=[];return this.yr.forEachInRange([o,u],g=>{const S=this.wr(g.gr);l.push(S)}),Ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new hr(_n);return n.forEach(u=>{const l=new ks(u,0),g=new ks(u,Number.POSITIVE_INFINITY);this.yr.forEachInRange([l,g],S=>{o=o.add(S.gr)})}),Ne.resolve(this.br(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let l=o;Dt.isDocumentKey(l)||(l=l.child(""));const g=new ks(new Dt(l),0);let S=new hr(_n);return this.yr.forEachWhile(M=>{const F=M.key.path;return!!o.isPrefixOf(F)&&(F.length===u&&(S=S.add(M.gr)),!0)},g),Ne.resolve(this.br(S))}br(e){const n=[];return e.forEach(o=>{const u=this.wr(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){Bt(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let o=this.yr;return Ne.forEach(n.mutations,u=>{const l=new ks(u.key,n.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.yr=o})}Fn(e){}containsKey(e,n){const o=new ks(n,0),u=this.yr.firstAfterOrEqual(o);return Ne.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return Ne.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Yl{constructor(e){this.Cr=e,this.docs=new gr(Dt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),l=u?u.size:0,g=this.Cr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:g}),this.size+=g-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Ne.resolve(o?o.document.mutableCopy():Mn.newInvalidDocument(n))}getEntries(e,n){let o=ns();return n.forEach(u=>{const l=this.docs.get(u);o=o.insert(u,l?l.document.mutableCopy():Mn.newInvalidDocument(u))}),Ne.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let l=ns();const g=n.path,S=new Dt(g.child("")),M=this.docs.getIteratorFrom(S);for(;M.hasNext();){const{key:F,value:{document:z}}=M.getNext();if(!g.isPrefixOf(F.path))break;F.path.length>g.length+1||Nu(Ou(z),o)<=0||(u.has(z.key)||Sr(n,z))&&(l=l.insert(z.key,z.mutableCopy()))}return Ne.resolve(l)}getAllFromCollectionGroup(e,n,o,u){Vt()}vr(e,n){return Ne.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new Hv(this)}getSize(e){return Ne.resolve(this.size)}}class Hv extends $d{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this._r.addEntry(e,u)):this._r.removeEntry(o)}),Ne.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class jg{constructor(e){this.persistence=e,this.Fr=new Es(n=>Br(n),ai),this.lastRemoteSnapshotVersion=Ht.min(),this.highestTargetId=0,this.Mr=0,this.Or=new $h,this.targetCount=0,this.Nr=yu.On()}forEachTarget(e,n){return this.Fr.forEach((o,u)=>n(u)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Mr&&(this.Mr=n),Ne.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new yu(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,Ne.resolve()}updateTargetData(e,n){return this.kn(n),Ne.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,n,o){let u=0;const l=[];return this.Fr.forEach((g,S)=>{S.sequenceNumber<=n&&null===o.get(S.targetId)&&(this.Fr.delete(g),l.push(this.removeMatchingKeysForTargetId(e,S.targetId)),u++)}),Ne.waitFor(l).next(()=>u)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,n){const o=this.Fr.get(n)||null;return Ne.resolve(o)}addMatchingKeys(e,n,o){return this.Or.Er(n,o),Ne.resolve()}removeMatchingKeys(e,n,o){this.Or.Ar(n,o);const u=this.persistence.referenceDelegate,l=[];return u&&n.forEach(g=>{l.push(u.markPotentiallyOrphaned(e,g))}),Ne.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),Ne.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Or.mr(n);return Ne.resolve(o)}containsKey(e,n){return Ne.resolve(this.Or.containsKey(n))}}class Hd{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Re(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new jg(this),this.indexManager=new L_,this.remoteDocumentCache=new Yl(o=>this.referenceDelegate.Qr(o)),this.serializer=new Jf(n),this.Kr=new Bg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $v,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Br[e.toKey()];return o||(o=new z_(n,this.referenceDelegate),this.Br[e.toKey()]=o),o}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,o){ut("MemoryPersistence","Starting transaction:",e);const u=new zv(this.Lr.next());return this.referenceDelegate.$r(),o(u).next(l=>this.referenceDelegate.Ur(u).next(()=>l)).toPromise().then(l=>(u.raiseOnCommittedEvent(),l))}Wr(e,n){return Ne.or(Object.values(this.Br).map(o=>()=>o.containsKey(e,n)))}}class zv extends Bo{constructor(e){super(),this.currentSequenceNumber=e}}class zd{constructor(e){this.persistence=e,this.Gr=new $h,this.zr=null}static jr(e){return new zd(e)}get Hr(){if(this.zr)return this.zr;throw Vt()}addReference(e,n,o){return this.Gr.addReference(o,n),this.Hr.delete(o.toString()),Ne.resolve()}removeReference(e,n,o){return this.Gr.removeReference(o,n),this.Hr.add(o.toString()),Ne.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),Ne.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(u=>this.Hr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(l=>this.Hr.add(l.toString()))}).next(()=>o.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.Hr,o=>{const u=Dt.fromPath(o);return this.Jr(e,u).next(l=>{l||n.removeEntry(u,Ht.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(o=>{o?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return Ne.or([()=>Ne.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class Ic{constructor(e){this.serializer=e}N(e,n,o,u){const l=new To("createOrUpgrade",n);var M;o<1&&u>=1&&(e.createObjectStore("owner"),(M=e).createObjectStore("mutationQueues",{keyPath:"userId"}),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cu,{unique:!0}),M.createObjectStore("documentMutations"),Xl(e),function(M){M.createObjectStore("remoteDocuments")}(e));let g=Ne.resolve();return o<3&&u>=3&&(0!==o&&(function(M){M.deleteObjectStore("targetDocuments"),M.deleteObjectStore("targets"),M.deleteObjectStore("targetGlobal")}(e),Xl(e)),g=g.next(()=>function(M){const F=M.store("targetGlobal"),z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ht.min().toTimestamp(),targetCount:0};return F.put("targetGlobalKey",z)}(l))),o<4&&u>=4&&(0!==o&&(g=g.next(()=>function(M,F){return F.store("mutations").W().next(z=>{M.deleteObjectStore("mutations"),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cu,{unique:!0});const X=F.store("mutations"),_e=z.map(Ve=>X.put(Ve));return Ne.waitFor(_e)})}(e,l))),g=g.next(()=>{!function(M){M.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(g=g.next(()=>this.Zr(l))),o<6&&u>=6&&(g=g.next(()=>(function(M){M.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(l)))),o<7&&u>=7&&(g=g.next(()=>this.ei(l))),o<8&&u>=8&&(g=g.next(()=>this.ti(e,l))),o<9&&u>=9&&(g=g.next(()=>{!function(M){M.objectStoreNames.contains("remoteDocumentChanges")&&M.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(g=g.next(()=>this.ni(l))),o<11&&u>=11&&(g=g.next(()=>{(function(M){M.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(M){M.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(g=g.next(()=>{!function(M){const F=M.createObjectStore("documentOverlays",{keyPath:mh});F.createIndex("collectionPathOverlayIndex",_h,{unique:!1}),F.createIndex("collectionGroupOverlayIndex",Rl,{unique:!1})}(e)})),o<13&&u>=13&&(g=g.next(()=>function(M){const F=M.createObjectStore("remoteDocumentsV14",{keyPath:Lu});F.createIndex("documentKeyIndex",Oc),F.createIndex("collectionGroupIndex",Ff)}(e)).next(()=>this.ri(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(g=g.next(()=>this.ii(e,l))),o<15&&u>=15&&(g=g.next(()=>function(M){M.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),M.createObjectStore("indexState",{keyPath:Sl}).createIndex("sequenceNumberIndex",Vf,{unique:!1}),M.createObjectStore("indexEntries",{keyPath:vd}).createIndex("documentKeyIndex",bl,{unique:!1})}(e))),g}Xr(e){let n=0;return e.store("remoteDocuments").Y((o,u)=>{n+=sp(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Zr(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(u=>Ne.forEach(u,l=>{const g=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",g).next(S=>Ne.forEach(S,M=>{Bt(M.userId===l.userId);const F=$c(this.serializer,M);return U_(e,l.userId,F).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const l=[];return o.Y((g,S)=>{const M=new Bn(g),F=[0,fn(M)];l.push(n.get(F).next(z=>z?Ne.resolve():n.put({targetId:0,path:fn(M),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Ne.waitFor(l))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:yd});const o=n.store("collectionParents"),u=new F_,l=g=>{if(u.add(g)){const S=g.lastSegment(),M=g.popLast();return o.put({collectionId:S,parent:fn(M)})}};return n.store("remoteDocuments").Y({J:!0},(g,S)=>{const M=new Bn(g);return l(M.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([g,S,M],F)=>{const z=xi(S);return l(z.popLast())}))}ni(e){const n=e.store("targets");return n.Y((o,u)=>{const l=xh(u),g=ql(this.serializer,l);return n.put(g)})}ri(e,n){const o=n.store("remoteDocuments"),u=[];return o.Y((l,g)=>{const S=n.store("remoteDocumentsV14"),M=(X=g,X.document?new Dt(Bn.fromString(X.document.name).popFirst(5)):X.noDocument?Dt.fromSegments(X.noDocument.path):X.unknownDocument?Dt.fromSegments(X.unknownDocument.path):Vt()).path.toArray(),F={prefixPath:M.slice(0,M.length-2),collectionGroup:M[M.length-2],documentId:M[M.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};var X;u.push(S.put(F))}).next(()=>Ne.waitFor(u))}ii(e,n){const o=n.store("mutations"),u=Fg(this.serializer),l=new Hd(zd.jr,this.serializer.ut);return o.W().next(g=>{const S=new Map;return g.forEach(M=>{var F;let z=null!==(F=S.get(M.userId))&&void 0!==F?F:Fn();$c(this.serializer,M).keys().forEach(X=>z=z.add(X)),S.set(M.userId,z)}),Ne.forEach(S,(M,F)=>{const z=new ir(F),X=ep.ct(this.serializer,z),_e=l.getIndexManager(z),Ve=Vh.ct(z,this.serializer,_e,l.referenceDelegate);return new jv(u,Ve,X,_e).recalculateAndSaveOverlaysForDocumentKeys(new Nc(n,Re._e),M).next()})})}}function Xl(i){i.createObjectStore("targetDocuments",{keyPath:Fa}).createIndex("documentTargetsIndex",Fu,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lu,{unique:!0}),i.createObjectStore("targetGlobal")}const Hh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $g{constructor(e,n,o,u,l,g,S,M,F,z,X=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.si=l,this.window=g,this.document=S,this.oi=F,this._i=z,this.ai=X,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=_e=>Promise.resolve(),!$g.D())throw new Xe($e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jI(this,u),this.Ii=n+"main",this.serializer=new Jf(M),this.Ti=new Rs(this.Ii,this.ai,new Ic(this.serializer)),this.qr=new Vv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Fg(this.serializer),this.Kr=new O_,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===z&&lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Xe($e.FAILED_PRECONDITION,Hh);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Re(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var o=(0,pe.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,pe.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,pe.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Gh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(b(e))return ut("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ut("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return zh(e).get("owner").next(n=>Ne.resolve(this.wi(n)))}Si(e){return Gh(e).delete(this.clientId)}bi(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=$i(o,"clientMetadata");return u.W().next(l=>{const g=e.Ci(l,18e5),S=l.filter(M=>-1===g.indexOf(M));return Ne.forEach(S,M=>u.delete(M.clientId)).next(()=>S)})}).catch(()=>[]);if(e.Ei)for(const o of n)e.Ei.removeItem(e.vi(o.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?Ne.resolve(!0):zh(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new Xe($e.FAILED_PRECONDITION,Hh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gh(e).W().next(o=>void 0===this.Ci(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&ut("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new Nc(n,Re._e);return e.pi(o).next(()=>e.Si(o))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(o=>this.Di(o.updateTimeMs,n)&&!this.Fi(o.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Gh(e).W().next(n=>this.Ci(n,18e5).map(o=>o.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Vh.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new BI(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return ep.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,o){ut("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",l=15===(M=this.ai)?fc:14===M?Xc:13===M?du:12===M?yh:11===M?da:void Vt();var M;let g;return this.Ti.runTransaction(e,u,l,S=>(g=new Nc(S,this.Lr?this.Lr.next():Re._e),"readwrite-primary"===n?this.fi(g).next(M=>!!M||this.gi(g)).next(M=>{if(!M)throw lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new Xe($e.FAILED_PRECONDITION,Mc);return o(g)}).next(M=>this.yi(g).next(()=>M)):this.Li(g).next(()=>o(g)))).then(S=>(g.raiseOnCommittedEvent(),S))}Li(e){return zh(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Xe($e.FAILED_PRECONDITION,Hh)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zh(e).put("owner",n)}static D(){return Rs.D()}pi(e){const n=zh(e);return n.get("owner").next(o=>this.wi(o)?(ut("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ne.resolve())}Di(e,n){const o=Date.now();return!(e<o-n||e>o&&(lr(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,Ue.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const o=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return ut("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return lr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){lr("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zh(i){return $i(i,"owner")}function Gh(i){return $i(i,"clientMetadata")}function hl(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class Hg{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.ki=o,this.qi=u}static Qi(e,n){let o=Fn(),u=Fn();for(const l of n.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:u=u.add(l.doc.key)}return new Hg(e,n.fromCache,o,u)}}class Gv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class G_{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,o,u){const l={result:null};return this.zi(e,n).next(g=>{l.result=g}).next(()=>{if(!l.result)return this.ji(e,n,u,o).next(g=>{l.result=g})}).next(()=>{if(l.result)return;const g=new Gv;return this.Hi(e,n,g).next(S=>{if(l.result=S,this.$i)return this.Ji(e,n,g,S.size)})}).next(()=>l.result)}Ji(e,n,o,u){return o.documentReadCount<this.Ui?(to()<=Ee.in.DEBUG&&ut("QueryEngine","SDK will not create cache indexes for query:",oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Ne.resolve()):(to()<=Ee.in.DEBUG&&ut("QueryEngine","Query:",oo(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Wi*u?(to()<=Ee.in.DEBUG&&ut("QueryEngine","The SDK decides to create cache indexes for query:",oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wt(n))):Ne.resolve())}zi(e,n){if(kl(n))return Ne.resolve(null);let o=Wt(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=Ei(n,null,"F"),o=Wt(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(l=>{const g=Fn(...l);return this.Gi.getDocuments(e,g).next(S=>this.indexManager.getMinOffset(e,o).next(M=>{const F=this.Yi(n,S);return this.Zi(n,F,g,M.readTime)?this.zi(e,Ei(n,null,"F")):this.Xi(e,F,n,M)}))})))}ji(e,n,o,u){return kl(n)||u.isEqual(Ht.min())?Ne.resolve(null):this.Gi.getDocuments(e,o).next(l=>{const g=this.Yi(n,l);return this.Zi(n,g,o,u)?Ne.resolve(null):(to()<=Ee.in.DEBUG&&ut("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),oo(n)),this.Xi(e,g,n,dc(u,-1)).next(S=>S))})}Yi(e,n){let o=new hr(Ll(e));return n.forEach((u,l)=>{Sr(e,l)&&(o=o.add(l))}),o}Zi(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const l="F"===e.limitType?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(u)>0)}Hi(e,n,o){return to()<=Ee.in.DEBUG&&ut("QueryEngine","Using full collection scan to execute query:",oo(n)),this.Gi.getDocumentsMatchingQuery(e,n,Yi.min(),o)}Xi(e,n,o,u){return this.Gi.getDocumentsMatchingQuery(e,o,u).next(l=>(n.forEach(g=>{l=l.insert(g.key,g)}),l))}}class zg{constructor(e,n,o,u){this.persistence=e,this.es=n,this.serializer=u,this.ts=new gr(_n),this.ns=new Es(l=>Br(l),ai),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(o)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jv(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function Gg(i,e,n,o){return new zg(i,e,n,o)}function W_(i,e){return cp.apply(this,arguments)}function cp(){return cp=(0,pe.Z)(function*(i,e){const n=bt(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(l=>(u=l,n.os(e),n.mutationQueue.getAllMutationBatches(o))).next(l=>{const g=[],S=[];let M=Fn();for(const F of u){g.push(F.batchId);for(const z of F.mutations)M=M.add(z.key)}for(const F of l){S.push(F.batchId);for(const z of F.mutations)M=M.add(z.key)}return n.localDocuments.getDocuments(o,M).next(F=>({_s:F,removedBatchIds:g,addedBatchIds:S}))})})}),cp.apply(this,arguments)}function Wv(i){const e=bt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function q_(i,e,n){let o=Fn(),u=Fn();return n.forEach(l=>o=o.add(l)),e.getEntries(i,o).next(l=>{let g=ns();return n.forEach((S,M)=>{const F=l.get(S);M.isFoundDocument()!==F.isFoundDocument()&&(u=u.add(S)),M.isNoDocument()&&M.version.isEqual(Ht.min())?(e.removeEntry(S,M.readTime),g=g.insert(S,M)):!F.isValidDocument()||M.version.compareTo(F.version)>0||0===M.version.compareTo(F.version)&&F.hasPendingWrites?(e.addEntry(M),g=g.insert(S,M)):ut("LocalStore","Ignoring outdated watch update for ",S,". Current version:",F.version," Watch version:",M.version)}),{us:g,cs:u}})}function Kv(i,e){const n=bt(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Wh(i,e){const n=bt(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.qr.getTargetData(o,e).next(l=>l?(u=l,Ne.resolve(u)):n.qr.allocateTargetId(o).next(g=>(u=new _u(e,g,"TargetPurposeListen",o.currentSequenceNumber),n.qr.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.ts.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.ts=n.ts.insert(o.targetId,o),n.ns.set(e,o.targetId)),o})}function qh(i,e,n){return Gd.apply(this,arguments)}function Gd(){return Gd=(0,pe.Z)(function*(i,e,n){const o=bt(i),u=o.ts.get(e),l=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",l,g=>o.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!b(g))throw g;ut("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}o.ts=o.ts.remove(e),o.ns.delete(u.target)}),Gd.apply(this,arguments)}function lp(i,e,n){const o=bt(i);let u=Ht.min(),l=Fn();return o.persistence.runTransaction("Execute query","readwrite",g=>function(M,F,z){const X=bt(M),_e=X.ns.get(z);return void 0!==_e?Ne.resolve(X.ts.get(_e)):X.qr.getTargetData(F,z)}(o,g,Wt(e)).next(S=>{if(S)return u=S.lastLimboFreeSnapshotVersion,o.qr.getMatchingKeysForTargetId(g,S.targetId).next(M=>{l=M})}).next(()=>o.es.getDocumentsMatchingQuery(g,e,n?u:Ht.min(),n?l:Fn())).next(S=>(ed(o,_c(e),S),{documents:S,ls:l})))}function dp(i,e){const n=bt(i),o=bt(n.qr),u=n.ts.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",l=>o._t(l,e).next(g=>g?g.target:null))}function hp(i,e){const n=bt(i),o=n.rs.get(e)||Ht.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.ss.getAllFromCollectionGroup(u,e,dc(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(ed(n,e,u),u))}function ed(i,e,n){let o=i.rs.get(e)||Ht.min();n.forEach((u,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)}),i.rs.set(e,o)}function Kh(){return Kh=(0,pe.Z)(function*(i,e,n,o){const u=bt(i);let l=Fn(),g=ns();for(const F of n){const z=e.hs(F.metadata.name);F.document&&(l=l.add(z));const X=e.Ps(F);X.setReadTime(e.Is(F.metadata.readTime)),g=g.insert(z,X)}const S=u.ss.newChangeBuffer({trackRemovals:!0}),M=yield Wh(u,(z=o,Wt(so(Bn.fromString(`__bundle__/docs/${z}`)))));var z;return u.persistence.runTransaction("Apply bundle documents","readwrite",F=>q_(F,S,g).next(z=>(S.apply(F),z)).next(z=>u.qr.removeMatchingKeysForTargetId(F,M.targetId).next(()=>u.qr.addMatchingKeys(F,l,M.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(F,z.us,z.cs)).next(()=>z.us)))}),Kh.apply(this,arguments)}function Zh(i,e){return Wd.apply(this,arguments)}function Wd(){return Wd=(0,pe.Z)(function*(i,e,n=Fn()){const o=yield Wh(i,Wt(Ud(e.bundledQuery))),u=bt(i);return u.persistence.runTransaction("Save named query","readwrite",l=>{const g=ui(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return u.Kr.saveNamedQuery(l,e);const S=o.withResumeToken(Qr.EMPTY_BYTE_STRING,g);return u.ts=u.ts.insert(S.targetId,S),u.qr.updateTargetData(l,S).next(()=>u.qr.removeMatchingKeysForTargetId(l,o.targetId)).next(()=>u.qr.addMatchingKeys(l,n,o.targetId)).next(()=>u.Kr.saveNamedQuery(l,e))})}),Wd.apply(this,arguments)}function td(i,e){return`firestore_clients_${i}_${e}`}function fp(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Qh(i,e){return`firestore_targets_${i}_${e}`}class nd{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Ts(e,n,o){const u=JSON.parse(o);let l,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(l=new Xe(u.error.code,u.error.message))),g?new nd(e,n,u.state,l):(lr("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pp{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Ts(e,n){const o=JSON.parse(n);let u,l="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new Xe(o.error.code,o.error.message))),l?new pp(e,o.state,u):(lr("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qd{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,l=Bl();for(let g=0;u&&g<o.activeTargetIds.length;++g)u=pr(o.activeTargetIds[g]),l=l.add(o.activeTargetIds[g]);return u?new qd(e,l):(lr("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class rd{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new rd(n.clientId,n.onlineState):(lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Kg{constructor(){this.activeTargetIds=Bl()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gp{constructor(e,n,o,u,l){this.window=e,this.si=n,this.persistenceKey=o,this.Rs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new gr(_n),this.started=!1,this.ps=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ys=td(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new Kg),this.Ss=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(M){return`firestore_bundle_loaded_v2_${M}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const n=yield e.syncEngine.Bi();for(const u of n){if(u===e.Rs)continue;const l=e.getItem(td(e.persistenceKey,u));if(l){const g=qd.Ts(u,l);g&&(e.gs=e.gs.insert(g.clientId,g))}}e.Fs();const o=e.storage.getItem(e.Cs);if(o){const u=e.Ms(o);u&&e.xs(u)}for(const u of e.ps)e.fs(u);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,o){this.Ns(e,n,o),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Qh(this.persistenceKey,e));if(o){const u=pp.Ts(e,o);u&&(n=u.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qh(this.persistenceKey,e))}updateQueryState(e,n,o){this.ks(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Bs(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ut("SharedClientState","READ",e,n),n}setItem(e,n){ut("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ut("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const o=e;if(o.storageArea===this.storage){if(ut("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ys)return void lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,pe.Z)(function*(){if(n.started){if(null!==o.key)if(n.Ss.test(o.key)){if(null==o.newValue){const u=n.Ks(o.key);return n.$s(u,null)}{const u=n.Us(o.key,o.newValue);if(u)return n.$s(u.clientId,u)}}else if(n.bs.test(o.key)){if(null!==o.newValue){const u=n.Ws(o.key,o.newValue);if(u)return n.Gs(u)}}else if(n.Ds.test(o.key)){if(null!==o.newValue){const u=n.zs(o.key,o.newValue);if(u)return n.js(u)}}else if(o.key===n.Cs){if(null!==o.newValue){const u=n.Ms(o.newValue);if(u)return n.xs(u)}}else if(o.key===n.ws){const u=function(g){let S=Re._e;if(null!=g)try{const M=JSON.parse(g);Bt("number"==typeof M),S=M}catch(M){lr("SharedClientState","Failed to read sequence number from WebStorage",M)}return S}(o.newValue);u!==Re._e&&n.sequenceNumberHandler(u)}else if(o.key===n.vs){const u=n.Hs(o.newValue);yield Promise.all(u.map(l=>n.syncEngine.Js(l)))}}else n.ps.push(o)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,o){const u=new nd(this.currentUser,e,n,o),l=fp(this.persistenceKey,this.currentUser,e);this.setItem(l,u.Es())}Bs(e){const n=fp(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,o){const u=Qh(this.persistenceKey,e),l=new pp(e,n,o);this.setItem(u,l.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const o=this.Ks(e);return qd.Ts(o,n)}Ws(e,n){const o=this.bs.exec(e),u=Number(o[1]);return nd.Ts(new ir(void 0!==o[2]?o[2]:null),u,n)}zs(e,n){const o=this.Ds.exec(e),u=Number(o[1]);return pp.Ts(u,n)}Ms(e){return rd.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,pe.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);ut("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const o=n?this.gs.insert(e,n):this.gs.remove(e),u=this.Os(this.gs),l=this.Os(o),g=[],S=[];return l.forEach(M=>{u.has(M)||g.push(M)}),u.forEach(M=>{l.has(M)||S.push(M)}),this.syncEngine.Xs(g,S).then(()=>{this.gs=o})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=Bl();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class K_{constructor(){this.eo=new Kg,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,o){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Kg,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Zv{ro(e){}shutdown(){}}class mp{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){ut("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){ut("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Yh=null;function Zg(){return null===Yh?Yh=268435456+Math.round(2147483648*Math.random()):Yh++,"0x"+Yh.toString(16)}const Qv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $I{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Ro="WebChannelConnection";class _p extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.mo=o+"://"+n.host,this.fo=`projects/${u}/databases/${l}`,this.po="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${l}`}get yo(){return!1}wo(n,o,u,l,g){const S=Zg(),M=this.So(n,o);ut("RestConnection",`Sending RPC '${n}' ${S}:`,M,u);const F={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(F,l,g),this.Do(n,M,F,u).then(z=>(ut("RestConnection",`Received RPC '${n}' ${S}: `,z),z),z=>{throw fr("RestConnection",`RPC '${n}' ${S} failed with error: `,z,"url: ",M,"request:",u),z})}Co(n,o,u,l,g,S){return this.wo(n,o,u,l,g)}bo(n,o,u){n["X-Goog-Api-Client"]="gl-js/ fire/"+ls,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((l,g)=>n[g]=l),u&&u.headers.forEach((l,g)=>n[g]=l)}So(n,o){return`${this.mo}/v1/${o}:${Qv[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,o,u){const l=Zg();return new Promise((g,S)=>{const M=new cs;M.setWithCredentials(!0),M.listenOnce(eo.COMPLETE,()=>{try{switch(M.getLastErrorCode()){case _i.NO_ERROR:const z=M.getResponseJson();ut(Ro,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(z)),g(z);break;case _i.TIMEOUT:ut(Ro,`RPC '${e}' ${l} timed out`),S(new Xe($e.DEADLINE_EXCEEDED,"Request time out"));break;case _i.HTTP_ERROR:const X=M.getStatus();if(ut(Ro,`RPC '${e}' ${l} failed with status:`,X,"response text:",M.getResponseText()),X>0){let _e=M.getResponseJson();Array.isArray(_e)&&(_e=_e[0]);const Ve=_e?.error;if(Ve&&Ve.status&&Ve.message){const yt=function(Rt){const mn=Rt.toLowerCase().replace(/_/g,"-");return Object.values($e).indexOf(mn)>=0?mn:$e.UNKNOWN}(Ve.status);S(new Xe(yt,Ve.message))}else S(new Xe($e.UNKNOWN,"Server responded with status "+M.getStatus()))}else S(new Xe($e.UNAVAILABLE,"Connection failed."));break;default:Vt()}}finally{ut(Ro,`RPC '${e}' ${l} completed.`)}});const F=JSON.stringify(u);ut(Ro,`RPC '${e}' ${l} sending request:`,u),M.send(n,"POST",F,o,15)})}vo(e,n,o){const u=Zg(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=Qi(),S=aa(),M={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},F=this.longPollingOptions.timeoutSeconds;void 0!==F&&(M.longPollingTimeout=Math.round(1e3*F)),this.useFetchStreams&&(M.xmlHttpFactory=new Yc({})),this.bo(M.initMessageHeaders,n,o),M.encodeInitMessageHeaders=!0;const z=l.join("");ut(Ro,`Creating RPC '${e}' stream ${u}: ${z}`,M);const X=g.createWebChannel(z,M);let _e=!1,Ve=!1;const yt=new $I({co:Rt=>{Ve?ut(Ro,`Not sending because RPC '${e}' stream ${u} is closed:`,Rt):(_e||(ut(Ro,`Opening RPC '${e}' stream ${u} transport.`),X.open(),_e=!0),ut(Ro,`RPC '${e}' stream ${u} sending:`,Rt),X.send(Rt))},lo:()=>X.close()}),At=(Rt,mn,wn)=>{Rt.listen(mn,pn=>{try{wn(pn)}catch(qn){setTimeout(()=>{throw qn},0)}})};return At(X,Oa.EventType.OPEN,()=>{Ve||ut(Ro,`RPC '${e}' stream ${u} transport opened.`)}),At(X,Oa.EventType.CLOSE,()=>{Ve||(Ve=!0,ut(Ro,`RPC '${e}' stream ${u} transport closed`),yt.Ro())}),At(X,Oa.EventType.ERROR,Rt=>{Ve||(Ve=!0,fr(Ro,`RPC '${e}' stream ${u} transport errored:`,Rt),yt.Ro(new Xe($e.UNAVAILABLE,"The operation could not be completed")))}),At(X,Oa.EventType.MESSAGE,Rt=>{var mn;if(!Ve){const wn=Rt.data[0];Bt(!!wn);const qn=wn.error||(null===(mn=wn[0])||void 0===mn?void 0:mn.error);if(qn){ut(Ro,`RPC '${e}' stream ${u} received error:`,qn);const mr=qn.status;let br=function(yv){const m_=Oi[yv];if(void 0!==m_)return ma(m_)}(mr),hs=qn.message;void 0===br&&(br=$e.INTERNAL,hs="Unknown error status: "+mr+" with message "+qn.message),Ve=!0,yt.Ro(new Xe(br,hs)),X.close()}else ut(Ro,`RPC '${e}' stream ${u} received:`,wn),yt.Vo(wn)}}),At(S,su.STAT_EVENT,Rt=>{Rt.stat===or.PROXY?ut(Ro,`RPC '${e}' stream ${u} detected buffering proxy`):Rt.stat===or.NOPROXY&&ut(Ro,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{yt.Ao()},0),yt}}function yp(){return typeof window<"u"?window:null}function vp(){return typeof document<"u"?document:null}function Kd(i){return new qt(i,!0)}class Jh{constructor(e,n,o=1e3,u=1.5,l=6e4){this.si=e,this.timerId=n,this.Fo=o,this.Mo=u,this.xo=l,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),o=Math.max(0,Date.now()-this.Bo),u=Math.max(0,n-o);u>0&&ut("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,u,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class Xh{constructor(e,n,o,u,l,g,S,M){this.si=e,this.Ko=o,this.$o=u,this.connection=l,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=S,this.listener=M,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Jh(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,pe.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,pe.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var o=this;return(0,pe.Z)(function*(){o.t_(),o.n_(),o.zo.cancel(),o.Uo++,4!==e?o.zo.reset():n&&n.code===$e.RESOURCE_EXHAUSTED?(lr(n.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),o.zo.Lo()):n&&n.code===$e.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.r_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Uo===n&&this.s_(o,u)},o=>{e(()=>{const u=new Xe($e.UNKNOWN,"Fetching auth token failed: "+o.message);return this.o_(u)})})}s_(e,n){const o=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{o(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(u=>{o(()=>this.o_(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Jo(){var e=this;this.state=5,this.zo.ko((0,pe.Z)(function*(){e.state=0,e.start()}))}o_(e){return ut("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(ut("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Yv extends Xh{constructor(e,n,o,u,l,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,g),this.serializer=l}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function wg(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(F=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===F?1:"REMOVE"===F?2:"CURRENT"===F?3:"RESET"===F?4:Vt(),u=e.targetChange.targetIds||[],l=function(F,z){return F.useProto3Json?(Bt(void 0===z||"string"==typeof z),Qr.fromBase64String(z||"")):(Bt(void 0===z||z instanceof Uint8Array),Qr.fromUint8Array(z||new Uint8Array))}(i,e.targetChange.resumeToken),g=e.targetChange.cause,S=g&&function(F){const z=void 0===F.code?$e.UNKNOWN:ma(F.code);return new Xe(z,F.message||"")}(g);n=new p(o,u,l,S||null)}else if("documentChange"in e){const o=e.documentChange,u=Wo(i,o.document.name),l=ui(o.document.updateTime),g=o.document.createTime?ui(o.document.createTime):Ht.min(),S=new Xi({mapValue:{fields:o.document.fields}}),M=Mn.newFoundDocument(u,l,g,S);n=new _(o.targetIds||[],o.removedTargetIds||[],M.key,M)}else if("documentDelete"in e){const o=e.documentDelete,u=Wo(i,o.document),l=o.readTime?ui(o.readTime):Ht.min(),g=Mn.newNoDocument(u,l);n=new _([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const o=e.documentRemove,u=Wo(i,o.document);n=new _([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Vt();{const o=e.filter,{count:u=0,unchangedNames:l}=o,g=new uo(u,l);n=new d(o.targetId,g)}}var F;return n}(this.serializer,e),o=function(l){if(!("targetChange"in l))return Ht.min();const g=l.targetChange;return g.targetIds&&g.targetIds.length?Ht.min():g.readTime?ui(g.readTime):Ht.min()}(e);return this.listener.a_(n,o)}u_(e){const n={};n.database=mu(this.serializer),n.addTarget=function(l,g){let S;const M=g.target;if(S=Fr(M)?{documents:Dg(l,M)}:{query:Rh(l,M)},S.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){S.resumeToken=_a(l,g.resumeToken);const F=zt(l,g.expectedCount);null!==F&&(S.expectedCount=F)}else if(g.snapshotVersion.compareTo(Ht.min())>0){S.readTime=Mr(l,g.snapshotVersion.toTimestamp());const F=zt(l,g.expectedCount);null!==F&&(S.expectedCount=F)}return S}(this.serializer,e);const o=function b_(i,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Vt()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.e_(n)}c_(e){const n={};n.database=mu(this.serializer),n.removeTarget=e,this.e_(n)}}class Z_ extends Xh{constructor(e,n,o,u,l,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,g),this.serializer=l,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function bh(i,e){return i&&i.length>0?(Bt(void 0!==e),i.map(n=>function(u,l){let g=ui(u.updateTime?u.updateTime:l);return g.isEqual(Ht.min())&&(g=ui(l)),new Hl(g,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=ui(e.commitTime);return this.listener.I_(o,n)}return Bt(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=mu(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>Nd(this.serializer,o))};this.e_(n)}}class Jv extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.d_=!1}A_(){if(this.d_)throw new Xe($e.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,o){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.wo(e,n,o,u,l)).catch(u=>{throw"FirebaseError"===u.name?(u.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Xe($e.UNKNOWN,u.toString())})}Co(e,n,o,u){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,g])=>this.connection.Co(e,n,o,l,g,u)).catch(l=>{throw"FirebaseError"===l.name?(l.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Xe($e.UNKNOWN,l.toString())})}terminate(){this.d_=!0}}class Xv{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(lr(n),this.f_=!1):ut("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Ep{constructor(e,n,o,u,l){var g=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=l,this.F_.ro(S=>{o.enqueueAndForget((0,pe.Z)(function*(){var M;wc(g)&&(ut("RemoteStore","Restarting streams for network reachability change."),yield(M=(0,pe.Z)(function*(z){const X=bt(z);X.C_.add(4),yield Tc(X),X.M_.set("Unknown"),X.C_.delete(4),yield ef(X)}),function F(z){return M.apply(this,arguments)})(g))}))}),this.M_=new Xv(o,u)}}function ef(i){return fl.apply(this,arguments)}function fl(){return fl=(0,pe.Z)(function*(i){if(wc(i))for(const e of i.v_)yield e(!0)}),fl.apply(this,arguments)}function Tc(i){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,pe.Z)(function*(i){for(const e of i.v_)yield e(!1)}),Qg.apply(this,arguments)}function tf(i,e){const n=bt(i);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),Tp(n)?Ip(n):Zd(n).Ho()&&Yg(n,e))}function nf(i,e){const n=bt(i),o=Zd(n);n.D_.delete(e),o.Ho()&&J_(n,e),0===n.D_.size&&(o.Ho()?o.Zo():wc(n)&&n.M_.set("Unknown"))}function Yg(i,e){if(i.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ht.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zd(i).u_(e)}function J_(i,e){i.x_.Oe(e),Zd(i).c_(e)}function Ip(i){i.x_=new k({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.D_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),Zd(i).start(),i.M_.g_()}function Tp(i){return wc(i)&&!Zd(i).jo()&&i.D_.size>0}function wc(i){return 0===bt(i).C_.size}function eE(i){i.x_=void 0}function Jg(i){return wp.apply(this,arguments)}function wp(){return wp=(0,pe.Z)(function*(i){i.D_.forEach((e,n)=>{Yg(i,e)})}),wp.apply(this,arguments)}function tE(i,e){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,pe.Z)(function*(i,e){eE(i),Tp(i)?(i.M_.w_(e),Ip(i)):i.M_.set("Unknown")}),Xg.apply(this,arguments)}function X_(i,e,n){return em.apply(this,arguments)}function em(){return em=(0,pe.Z)(function*(i,e,n){if(i.M_.set("Online"),e instanceof p&&2===e.state&&e.cause)try{yield(o=(0,pe.Z)(function*(l,g){const S=g.cause;for(const M of g.targetIds)l.D_.has(M)&&(yield l.remoteSyncer.rejectListen(M,S),l.D_.delete(M),l.x_.removeTarget(M))}),function u(l,g){return o.apply(this,arguments)})(i,e)}catch(o){ut("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield rf(i,o)}else if(e instanceof _?i.x_.$e(e):e instanceof d?i.x_.Je(e):i.x_.Ge(e),!n.isEqual(Ht.min()))try{const o=yield Wv(i.localStore);n.compareTo(o)>=0&&(yield function(l,g){const S=l.x_.it(g);return S.targetChanges.forEach((M,F)=>{if(M.resumeToken.approximateByteSize()>0){const z=l.D_.get(F);z&&l.D_.set(F,z.withResumeToken(M.resumeToken,g))}}),S.targetMismatches.forEach((M,F)=>{const z=l.D_.get(M);if(!z)return;l.D_.set(M,z.withResumeToken(Qr.EMPTY_BYTE_STRING,z.snapshotVersion)),J_(l,M);const X=new _u(z.target,M,F,z.sequenceNumber);Yg(l,X)}),l.remoteSyncer.applyRemoteEvent(S)}(i,n))}catch(o){ut("RemoteStore","Failed to raise snapshot:",o),yield rf(i,o)}var o}),em.apply(this,arguments)}function rf(i,e,n){return tm.apply(this,arguments)}function tm(){return tm=(0,pe.Z)(function*(i,e,n){if(!b(e))throw e;i.C_.add(1),yield Tc(i),i.M_.set("Offline"),n||(n=()=>Wv(i.localStore)),i.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){ut("RemoteStore","Retrying IndexedDB access"),yield n(),i.C_.delete(1),yield ef(i)}))}),tm.apply(this,arguments)}function ey(i,e){return e().catch(n=>rf(i,n,e))}function sf(i){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,pe.Z)(function*(i){const e=bt(i),n=Cc(e);let o=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;ty(e);)try{const u=yield Kv(e.localStore,o);if(null===u){0===e.b_.length&&n.Zo();break}o=u.batchId,qu(e,u)}catch(u){yield rf(e,u)}nm(e)&&nE(e)}),Dp.apply(this,arguments)}function ty(i){return wc(i)&&i.b_.length<10}function qu(i,e){i.b_.push(e);const n=Cc(i);n.Ho()&&n.h_&&n.P_(e.mutations)}function nm(i){return wc(i)&&!Cc(i).jo()&&i.b_.length>0}function nE(i){Cc(i).start()}function rm(i){return Dc.apply(this,arguments)}function Dc(){return Dc=(0,pe.Z)(function*(i){Cc(i).E_()}),Dc.apply(this,arguments)}function im(i){return sm.apply(this,arguments)}function sm(){return sm=(0,pe.Z)(function*(i){const e=Cc(i);for(const n of i.b_)e.P_(n.mutations)}),sm.apply(this,arguments)}function HI(i,e,n){return om.apply(this,arguments)}function om(){return om=(0,pe.Z)(function*(i,e,n){const o=i.b_.shift(),u=Ch.from(o,e,n);yield ey(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield sf(i)}),om.apply(this,arguments)}function am(i,e){return vu.apply(this,arguments)}function vu(){return vu=(0,pe.Z)(function*(i,e){var n;e&&Cc(i).h_&&(yield(n=(0,pe.Z)(function*(u,l){if(Pd(S=l.code)&&S!==$e.ABORTED){const g=u.b_.shift();Cc(u).Yo(),yield ey(u,()=>u.remoteSyncer.rejectFailedWrite(g.batchId,l)),yield sf(u)}var S}),function o(u,l){return n.apply(this,arguments)})(i,e)),nm(i)&&nE(i)}),vu.apply(this,arguments)}function um(i,e){return cm.apply(this,arguments)}function cm(){return cm=(0,pe.Z)(function*(i,e){const n=bt(i);n.asyncQueue.verifyOperationInProgress(),ut("RemoteStore","RemoteStore received new credentials");const o=wc(n);n.C_.add(3),yield Tc(n),o&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield ef(n)}),cm.apply(this,arguments)}function ny(i,e){return Is.apply(this,arguments)}function Is(){return Is=(0,pe.Z)(function*(i,e){const n=bt(i);e?(n.C_.delete(2),yield ef(n)):e||(n.C_.add(2),yield Tc(n),n.M_.set("Unknown"))}),Is.apply(this,arguments)}function Zd(i){return i.O_||(i.O_=function(n,o,u){const l=bt(n);return l.A_(),new Yv(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,u)}(i.datastore,i.asyncQueue,{ho:Jg.bind(null,i),Io:tE.bind(null,i),a_:X_.bind(null,i)}),i.v_.push(function(){var e=(0,pe.Z)(function*(n){n?(i.O_.Yo(),Tp(i)?Ip(i):i.M_.set("Unknown")):(yield i.O_.stop(),eE(i))});return function(n){return e.apply(this,arguments)}}())),i.O_}function Cc(i){return i.N_||(i.N_=function(n,o,u){const l=bt(n);return l.A_(),new Z_(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,u)}(i.datastore,i.asyncQueue,{ho:rm.bind(null,i),Io:am.bind(null,i),T_:im.bind(null,i),I_:HI.bind(null,i)}),i.v_.push(function(){var e=(0,pe.Z)(function*(n){n?(i.N_.Yo(),yield sf(i)):(yield i.N_.stop(),i.b_.length>0&&(ut("RemoteStore",`Stopping write stream with ${i.b_.length} pending writes`),i.b_=[]))});return function(n){return e.apply(this,arguments)}}())),i.N_}class lm{constructor(e,n,o,u,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=l,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,l){const g=Date.now()+o,S=new lm(e,n,g,u,l);return S.start(o),S}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xe($e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qd(i,e){if(lr("AsyncQueue",`${e}: ${i}`),b(i))return new Xe($e.UNAVAILABLE,`${e}: ${i}`);throw i}class pl{constructor(e){this.comparator=e?(n,o)=>e(n,o)||Dt.comparator(n.key,o.key):(n,o)=>Dt.comparator(n.key,o.key),this.keyedMap=Vl(),this.sortedSet=new gr(this.comparator)}static emptySet(e){return new pl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,l=o.getNext().key;if(!u.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new pl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class dm{constructor(){this.B_=new gr(Dt.comparator)}track(e){const n=e.doc.key,o=this.B_.get(n);o?0!==e.type&&3===o.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==o.type?this.B_=this.B_.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.B_=this.B_.remove(n):1===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Vt():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,o)=>{e.push(o)}),e}}class id{constructor(e,n,o,u,l,g,S,M,F){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=l,this.fromCache=g,this.syncStateChanged=S,this.excludesMetadataChanges=M,this.hasCachedResults=F}static fromInitialDocuments(e,n,o,u,l){const g=[];return n.forEach(S=>{g.push({type:0,doc:S})}),new id(e,n,pl.emptySet(n),g,o,u,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Os(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class rE{constructor(){this.k_=void 0,this.listeners=[]}}class ry{constructor(){this.queries=new Es(e=>zs(e),Os),this.onlineState="Unknown",this.q_=new Set}}function Cp(i,e){return hm.apply(this,arguments)}function hm(){return hm=(0,pe.Z)(function*(i,e){const n=bt(i),o=e.query;let u=!1,l=n.queries.get(o);if(l||(u=!0,l=new rE),u)try{l.k_=yield n.onListen(o)}catch(g){const S=Qd(g,`Initialization of query '${oo(e.query)}' failed`);return void e.onError(S)}n.queries.set(o,l),l.listeners.push(e),e.Q_(n.onlineState),l.k_&&e.K_(l.k_)&&Ku(n)}),hm.apply(this,arguments)}function fm(i,e){return pm.apply(this,arguments)}function pm(){return pm=(0,pe.Z)(function*(i,e){const n=bt(i),o=e.query;let u=!1;const l=n.queries.get(o);if(l){const g=l.listeners.indexOf(e);g>=0&&(l.listeners.splice(g,1),u=0===l.listeners.length)}if(u)return n.queries.delete(o),n.onUnlisten(o)}),pm.apply(this,arguments)}function iy(i,e){const n=bt(i);let o=!1;for(const u of e){const g=n.queries.get(u.query);if(g){for(const S of g.listeners)S.K_(u)&&(o=!0);g.k_=u}}o&&Ku(n)}function Yd(i,e,n){const o=bt(i),u=o.queries.get(e);if(u)for(const l of u.listeners)l.onError(n);o.queries.delete(e)}function Ku(i){i.q_.forEach(e=>{e.next()})}class gl{constructor(e,n,o){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=o||{}}K_(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new id(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=id.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class iE{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class sy{constructor(e){this.serializer=e}hs(e){return Wo(this.serializer,e)}Ps(e){return e.metadata.exists?Gl(this.serializer,e.document,!1):Mn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return ui(e)}}class oy{constructor(e,n,o){this.X_=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gm(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const o=Bn.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,o=new sy(this.serializer);for(const u of e)if(u.metadata.queries){const l=o.hs(u.metadata.name);for(const g of u.metadata.queries){const S=(n.get(g)||Fn()).add(l);n.set(g,S)}}return n}complete(){var e=this;return(0,pe.Z)(function*(){const n=yield function qg(i,e,n,o){return Kh.apply(this,arguments)}(e.localStore,new sy(e.serializer),e.documents,e.X_.id),o=e.ta(e.documents);for(const u of e.queries)yield Zh(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function gm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Ap{constructor(e){this.key=e}}class Jd{constructor(e){this.key=e}}class af{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Fn(),this.mutatedKeys=Fn(),this._a=Ll(e),this.aa=new pl(this._a)}get ua(){return this.ia}ca(e,n){const o=n?n.la:new dm,u=n?n.aa:this.aa;let l=n?n.mutatedKeys:this.mutatedKeys,g=u,S=!1;const M="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,F="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((z,X)=>{const _e=u.get(z),Ve=Sr(this.query,X)?X:null,yt=!!_e&&this.mutatedKeys.has(_e.key),At=!!Ve&&(Ve.hasLocalMutations||this.mutatedKeys.has(Ve.key)&&Ve.hasCommittedMutations);let Rt=!1;_e&&Ve?_e.data.isEqual(Ve.data)?yt!==At&&(o.track({type:3,doc:Ve}),Rt=!0):this.ha(_e,Ve)||(o.track({type:2,doc:Ve}),Rt=!0,(M&&this._a(Ve,M)>0||F&&this._a(Ve,F)<0)&&(S=!0)):!_e&&Ve?(o.track({type:0,doc:Ve}),Rt=!0):_e&&!Ve&&(o.track({type:1,doc:_e}),Rt=!0,(M||F)&&(S=!0)),Rt&&(Ve?(g=g.add(Ve),l=At?l.add(z):l.delete(z)):(g=g.delete(z),l=l.delete(z)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const z="F"===this.query.limitType?g.last():g.first();g=g.delete(z.key),l=l.delete(z.key),o.track({type:1,doc:z})}return{aa:g,la:o,Zi:S,mutatedKeys:l}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o){const u=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const l=e.la.L_();l.sort((F,z)=>function(_e,Ve){const yt=At=>{switch(At){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vt()}};return yt(_e)-yt(Ve)}(F.type,z.type)||this._a(F.doc,z.doc)),this.Pa(o);const g=n?this.Ia():[],S=0===this.oa.size&&this.current?1:0,M=S!==this.sa;return this.sa=S,0!==l.length||M?{snapshot:new id(this.query,e.aa,u,l,e.mutatedKeys,0===S,M,!1,!!o&&o.resumeToken.approximateByteSize()>0),Ta:g}:{Ta:g}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new dm,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Fn(),this.aa.forEach(o=>{this.Ea(o.key)&&(this.oa=this.oa.add(o.key))});const n=[];return e.forEach(o=>{this.oa.has(o)||n.push(new Jd(o))}),this.oa.forEach(o=>{e.has(o)||n.push(new Ap(o))}),n}da(e){this.ia=e.ls,this.oa=Fn();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return id.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class ay{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class uy{constructor(e){this.key=e,this.Ra=!1}}class sE{constructor(e,n,o,u,l,g){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=l,this.maxConcurrentLimboResolutions=g,this.Va={},this.ma=new Es(S=>zs(S),Os),this.fa=new Map,this.ga=new Set,this.pa=new gr(Dt.comparator),this.ya=new Map,this.wa=new $h,this.Sa={},this.ba=new Map,this.Da=yu.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function oE(i,e){return mm.apply(this,arguments)}function mm(){return mm=(0,pe.Z)(function*(i,e){const n=Rm(i);let o,u;const l=n.ma.get(e);if(l)o=l.targetId,n.sharedClientState.addLocalQueryTarget(o),u=l.view.Aa();else{const g=yield Wh(n.localStore,Wt(e)),S=n.sharedClientState.addLocalQueryTarget(g.targetId);o=g.targetId,u=yield _m(n,e,o,"current"===S,g.resumeToken),n.isPrimaryClient&&tf(n.remoteStore,g)}return u}),mm.apply(this,arguments)}function _m(i,e,n,o,u){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,pe.Z)(function*(i,e,n,o,u){i.va=(X,_e,Ve)=>{return(yt=(0,pe.Z)(function*(Rt,mn,wn,pn){let qn=mn.view.ca(wn);qn.Zi&&(qn=yield lp(Rt.localStore,mn.query,!1).then(({documents:hs})=>mn.view.ca(hs,qn)));const mr=pn&&pn.targetChanges.get(mn.targetId),br=mn.view.applyChanges(qn,Rt.isPrimaryClient,mr);return Xd(Rt,mn.targetId,br.Ta),br.snapshot}),function At(Rt,mn,wn,pn){return yt.apply(this,arguments)})(i,X,_e,Ve);var yt};const l=yield lp(i.localStore,e,!0),g=new af(e,l.ls),S=g.ca(l.documents),M=Ec.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,u),F=g.applyChanges(S,i.isPrimaryClient,M);Xd(i,n,F.Ta);const z=new ay(e,n,g);return i.ma.set(e,z),i.fa.has(n)?i.fa.get(n).push(e):i.fa.set(n,[e]),F.snapshot}),Sp.apply(this,arguments)}function zI(i,e){return ym.apply(this,arguments)}function ym(){return ym=(0,pe.Z)(function*(i,e){const n=bt(i),o=n.ma.get(e),u=n.fa.get(o.targetId);if(u.length>1)return n.fa.set(o.targetId,u.filter(l=>!Os(l,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield qh(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),nf(n.remoteStore,o.targetId),sd(n,o.targetId)}).catch(La))):(sd(n,o.targetId),yield qh(n.localStore,o.targetId,!0))}),ym.apply(this,arguments)}function cy(){return cy=(0,pe.Z)(function*(i,e,n){const o=my(i);try{const u=yield function(g,S){const M=bt(g),F=dr.now(),z=S.reduce((Ve,yt)=>Ve.add(yt.key),Fn());let X,_e;return M.persistence.runTransaction("Locally write mutations","readwrite",Ve=>{let yt=ns(),At=Fn();return M.ss.getEntries(Ve,z).next(Rt=>{yt=Rt,yt.forEach((mn,wn)=>{wn.isValidDocument()||(At=At.add(mn))})}).next(()=>M.localDocuments.getOverlayedDocuments(Ve,yt)).next(Rt=>{X=Rt;const mn=[];for(const wn of S){const pn=ao(wn,X.get(wn.key).overlayedDocument);null!=pn&&mn.push(new Go(wn.key,pn,Td(pn.value.mapValue),Yr.exists(!0)))}return M.mutationQueue.addMutationBatch(Ve,F,mn,S)}).next(Rt=>{_e=Rt;const mn=Rt.applyToLocalDocumentSet(X,At);return M.documentOverlayCache.saveOverlays(Ve,Rt.batchId,mn)})}).then(()=>({batchId:_e.batchId,changes:Eh(X)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(g,S,M){let F=g.Sa[g.currentUser.toKey()];F||(F=new gr(_n)),F=F.insert(S,M),g.Sa[g.currentUser.toKey()]=F}(o,u.batchId,n),yield za(o,u.changes),yield sf(o.remoteStore)}catch(u){const l=Qd(u,"Failed to persist write");n.reject(l)}}),cy.apply(this,arguments)}function vm(i,e){return bp.apply(this,arguments)}function bp(){return bp=(0,pe.Z)(function*(i,e){const n=bt(i);try{const o=yield function qv(i,e){const n=bt(i),o=e.snapshotVersion;let u=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const g=n.ss.newChangeBuffer({trackRemovals:!0});u=n.ts;const S=[];e.targetChanges.forEach((z,X)=>{const _e=u.get(X);if(!_e)return;S.push(n.qr.removeMatchingKeys(l,z.removedDocuments,X).next(()=>n.qr.addMatchingKeys(l,z.addedDocuments,X)));let Ve=_e.withSequenceNumber(l.currentSequenceNumber);var At,Rt,mn;null!==e.targetMismatches.get(X)?Ve=Ve.withResumeToken(Qr.EMPTY_BYTE_STRING,Ht.min()).withLastLimboFreeSnapshotVersion(Ht.min()):z.resumeToken.approximateByteSize()>0&&(Ve=Ve.withResumeToken(z.resumeToken,o)),u=u.insert(X,Ve),Rt=Ve,mn=z,(0===(At=_e).resumeToken.approximateByteSize()||Rt.snapshotVersion.toMicroseconds()-At.snapshotVersion.toMicroseconds()>=3e8||mn.addedDocuments.size+mn.modifiedDocuments.size+mn.removedDocuments.size>0)&&S.push(n.qr.updateTargetData(l,Ve))});let M=ns(),F=Fn();if(e.documentUpdates.forEach(z=>{e.resolvedLimboDocuments.has(z)&&S.push(n.persistence.referenceDelegate.updateLimboDocument(l,z))}),S.push(q_(l,g,e.documentUpdates).next(z=>{M=z.us,F=z.cs})),!o.isEqual(Ht.min())){const z=n.qr.getLastRemoteSnapshotVersion(l).next(X=>n.qr.setTargetsMetadata(l,l.currentSequenceNumber,o));S.push(z)}return Ne.waitFor(S).next(()=>g.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,M,F)).next(()=>M)}).then(l=>(n.ts=u,l))}(n.localStore,e);e.targetChanges.forEach((u,l)=>{const g=n.ya.get(l);g&&(Bt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.Ra=!0:u.modifiedDocuments.size>0?Bt(g.Ra):u.removedDocuments.size>0&&(Bt(g.Ra),g.Ra=!1))}),yield za(n,o,e)}catch(o){yield La(o)}}),bp.apply(this,arguments)}function aE(i,e,n){const o=bt(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.ma.forEach((l,g)=>{const S=g.view.Q_(e);S.snapshot&&u.push(S.snapshot)}),function(g,S){const M=bt(g);M.onlineState=S;let F=!1;M.queries.forEach((z,X)=>{for(const _e of X.listeners)_e.Q_(S)&&(F=!0)}),F&&Ku(M)}(o.eventManager,e),u.length&&o.Va.a_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Rp(i,e,n){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,pe.Z)(function*(i,e,n){const o=bt(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.ya.get(e),l=u&&u.key;if(l){let g=new gr(Dt.comparator);g=g.insert(l,Mn.newNoDocument(l,Ht.min()));const S=Fn().add(l),M=new gu(Ht.min(),new Map,new gr(_n),g,S);yield vm(o,M),o.pa=o.pa.remove(l),o.ya.delete(e),uf(o)}else yield qh(o.localStore,e,!1).then(()=>sd(o,e,n)).catch(La)}),Pp.apply(this,arguments)}function ly(i,e){return Em.apply(this,arguments)}function Em(){return Em=(0,pe.Z)(function*(i,e){const n=bt(i),o=e.batch.batchId;try{const u=yield function Wg(i,e){const n=bt(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),l=n.ss.newChangeBuffer({trackRemovals:!0});return function(S,M,F,z){const X=F.batch,_e=X.keys();let Ve=Ne.resolve();return _e.forEach(yt=>{Ve=Ve.next(()=>z.getEntry(M,yt)).next(At=>{const Rt=F.docVersions.get(yt);Bt(null!==Rt),At.version.compareTo(Rt)<0&&(X.applyToRemoteDocument(At,F),At.isValidDocument()&&(At.setReadTime(F.commitVersion),z.addEntry(At)))})}),Ve.next(()=>S.mutationQueue.removeMutationBatch(M,X))}(n,o,e,l).next(()=>l.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(S){let M=Fn();for(let F=0;F<S.mutationResults.length;++F)S.mutationResults[F].transformResults.length>0&&(M=M.add(S.batch.mutations[F].key));return M}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}(n.localStore,e);ml(n,o,null),Op(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield za(n,u)}catch(u){yield La(u)}}),Em.apply(this,arguments)}function dy(i,e,n){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,pe.Z)(function*(i,e,n){const o=bt(i);try{const u=yield function(g,S){const M=bt(g);return M.persistence.runTransaction("Reject batch","readwrite-primary",F=>{let z;return M.mutationQueue.lookupMutationBatch(F,S).next(X=>(Bt(null!==X),z=X.keys(),M.mutationQueue.removeMutationBatch(F,X))).next(()=>M.mutationQueue.performConsistencyCheck(F)).next(()=>M.documentOverlayCache.removeOverlaysForBatchId(F,z,S)).next(()=>M.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(F,z)).next(()=>M.localDocuments.getDocuments(F,z))})}(o.localStore,e);ml(o,e,n),Op(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield za(o,u)}catch(u){yield La(u)}}),Mp.apply(this,arguments)}function xp(){return xp=(0,pe.Z)(function*(i,e){const n=bt(i);wc(n.remoteStore)||ut("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(g){const S=bt(g);return S.persistence.runTransaction("Get highest unacknowledged batch id","readonly",M=>S.mutationQueue.getHighestUnacknowledgedBatchId(M))}(n.localStore);if(-1===o)return void e.resolve();const u=n.ba.get(o)||[];u.push(e),n.ba.set(o,u)}catch(o){const u=Qd(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),xp.apply(this,arguments)}function Op(i,e){(i.ba.get(e)||[]).forEach(n=>{n.resolve()}),i.ba.delete(e)}function ml(i,e,n){const o=bt(i);let u=o.Sa[o.currentUser.toKey()];if(u){const l=u.get(e);l&&(n?l.reject(n):l.resolve(),u=u.remove(e)),o.Sa[o.currentUser.toKey()]=u}}function sd(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.fa.get(e))i.ma.delete(o),n&&i.Va.Fa(o,n);i.fa.delete(e),i.isPrimaryClient&&i.wa.Rr(e).forEach(o=>{i.wa.containsKey(o)||hy(i,o)})}function hy(i,e){i.ga.delete(e.path.canonicalString());const n=i.pa.get(e);null!==n&&(nf(i.remoteStore,n),i.pa=i.pa.remove(e),i.ya.delete(n),uf(i))}function Xd(i,e,n){for(const o of n)o instanceof Ap?(i.wa.addReference(o.key,e),eh(i,o)):o instanceof Jd?(ut("SyncEngine","Document no longer in limbo: "+o.key),i.wa.removeReference(o.key,e),i.wa.containsKey(o.key)||hy(i,o.key)):Vt()}function eh(i,e){const n=e.key,o=n.path.canonicalString();i.pa.get(n)||i.ga.has(o)||(ut("SyncEngine","New document in limbo: "+n),i.ga.add(o),uf(i))}function uf(i){for(;i.ga.size>0&&i.pa.size<i.maxConcurrentLimboResolutions;){const e=i.ga.values().next().value;i.ga.delete(e);const n=new Dt(Bn.fromString(e)),o=i.Da.next();i.ya.set(o,new uy(n)),i.pa=i.pa.insert(n,o),tf(i.remoteStore,new _u(Wt(so(n.path)),o,"TargetPurposeLimboResolution",Re._e))}}function za(i,e,n){return Np.apply(this,arguments)}function Np(){return Np=(0,pe.Z)(function*(i,e,n){const o=bt(i),u=[],l=[],g=[];var S;o.ma.isEmpty()||(o.ma.forEach((S,M)=>{g.push(o.va(M,e,n).then(F=>{if((F||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(M.targetId,F?.fromCache?"not-current":"current"),F){u.push(F);const z=Hg.Qi(M.targetId,F);l.push(z)}}))}),yield Promise.all(g),o.Va.a_(u),yield(S=(0,pe.Z)(function*(F,z){const X=bt(F);try{yield X.persistence.runTransaction("notifyLocalViewChanges","readwrite",_e=>Ne.forEach(z,Ve=>Ne.forEach(Ve.ki,yt=>X.persistence.referenceDelegate.addReference(_e,Ve.targetId,yt)).next(()=>Ne.forEach(Ve.qi,yt=>X.persistence.referenceDelegate.removeReference(_e,Ve.targetId,yt)))))}catch(_e){if(!b(_e))throw _e;ut("LocalStore","Failed to update sequence numbers: "+_e)}for(const _e of z){const Ve=_e.targetId;if(!_e.fromCache){const yt=X.ts.get(Ve),Rt=yt.withLastLimboFreeSnapshotVersion(yt.snapshotVersion);X.ts=X.ts.insert(Ve,Rt)}}}),function M(F,z){return S.apply(this,arguments)})(o.localStore,l))}),Np.apply(this,arguments)}function Im(i,e){return cf.apply(this,arguments)}function cf(){return cf=(0,pe.Z)(function*(i,e){const n=bt(i);if(!n.currentUser.isEqual(e)){ut("SyncEngine","User change. New user:",e.toKey());const o=yield W_(n.localStore,e);n.currentUser=e,(l=n).ba.forEach(S=>{S.forEach(M=>{M.reject(new Xe($e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.ba.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield za(n,o._s)}var l}),cf.apply(this,arguments)}function Tm(i,e){const n=bt(i),o=n.ya.get(e);if(o&&o.Ra)return Fn().add(o.key);{let u=Fn();const l=n.fa.get(e);if(!l)return u;for(const g of l){const S=n.ma.get(g);u=u.unionWith(S.view.ua)}return u}}function fy(i,e){return lf.apply(this,arguments)}function lf(){return lf=(0,pe.Z)(function*(i,e){const n=bt(i),o=yield lp(n.localStore,e.query,!0),u=e.view.da(o);return n.isPrimaryClient&&Xd(n,e.targetId,u.Ta),u}),lf.apply(this,arguments)}function uE(i,e){return wm.apply(this,arguments)}function wm(){return wm=(0,pe.Z)(function*(i,e){const n=bt(i);return hp(n.localStore,e).then(o=>za(n,o))}),wm.apply(this,arguments)}function cE(i,e,n,o){return kp.apply(this,arguments)}function kp(){return kp=(0,pe.Z)(function*(i,e,n,o){const u=bt(i),l=yield function(S,M){const F=bt(S),z=bt(F.mutationQueue);return F.persistence.runTransaction("Lookup mutation documents","readonly",X=>z.Cn(X,M).next(_e=>_e?F.localDocuments.getDocuments(X,_e):Ne.resolve(null)))}(u.localStore,e);var M;null!==l?("pending"===n?yield sf(u.remoteStore):"acknowledged"===n||"rejected"===n?(ml(u,e,o||null),Op(u,e),M=e,bt(bt(u.localStore).mutationQueue).Fn(M)):Vt(),yield za(u,l)):ut("SyncEngine","Cannot apply mutation batch with id: "+e)}),kp.apply(this,arguments)}function Dm(){return Dm=(0,pe.Z)(function*(i,e){const n=bt(i);if(Rm(n),my(n),!0===e&&!0!==n.Ca){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield py(n,o.toArray());n.Ca=!0,yield ny(n.remoteStore,!0);for(const l of u)tf(n.remoteStore,l)}else if(!1===e&&!1!==n.Ca){const o=[];let u=Promise.resolve();n.fa.forEach((l,g)=>{n.sharedClientState.isLocalQueryTarget(g)?o.push(g):u=u.then(()=>(sd(n,g),qh(n.localStore,g,!0))),nf(n.remoteStore,g)}),yield u,yield py(n,o),function(g){const S=bt(g);S.ya.forEach((M,F)=>{nf(S.remoteStore,F)}),S.wa.Vr(),S.ya=new Map,S.pa=new gr(Dt.comparator)}(n),n.Ca=!1,yield ny(n.remoteStore,!1)}}),Dm.apply(this,arguments)}function py(i,e,n){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,pe.Z)(function*(i,e,n){const o=bt(i),u=[],l=[];for(const g of e){let S;const M=o.fa.get(g);if(M&&0!==M.length){S=yield Wh(o.localStore,Wt(M[0]));for(const F of M){const z=o.ma.get(F),X=yield fy(o,z);X.snapshot&&l.push(X.snapshot)}}else{const F=yield dp(o.localStore,g);S=yield Wh(o.localStore,F),yield _m(o,Am(F),g,!1,S.resumeToken)}u.push(S)}return o.Va.a_(l),u}),Cm.apply(this,arguments)}function Am(i){return ju(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function gy(i){return n=bt(i).localStore,bt(bt(n).persistence).Bi();var n}function dE(i,e,n,o){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,pe.Z)(function*(i,e,n,o){const u=bt(i);if(u.Ca)return void ut("SyncEngine","Ignoring unexpected query state notification.");const l=u.fa.get(e);if(l&&l.length>0)switch(n){case"current":case"not-current":{const g=yield hp(u.localStore,_c(l[0])),S=gu.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Qr.EMPTY_BYTE_STRING);yield za(u,g,S);break}case"rejected":yield qh(u.localStore,e,!0),sd(u,e,o);break;default:Vt()}}),Sm.apply(this,arguments)}function Ga(i,e,n){return bm.apply(this,arguments)}function bm(){return bm=(0,pe.Z)(function*(i,e,n){const o=Rm(i);if(o.Ca){for(const u of e){if(o.fa.has(u)){ut("SyncEngine","Adding an already active target "+u);continue}const l=yield dp(o.localStore,u),g=yield Wh(o.localStore,l);yield _m(o,Am(l),g.targetId,!1,g.resumeToken),tf(o.remoteStore,g)}for(const u of n)o.fa.has(u)&&(yield qh(o.localStore,u,!1).then(()=>{nf(o.remoteStore,u),sd(o,u)}).catch(La))}}),bm.apply(this,arguments)}function Rm(i){const e=bt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=vm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Rp.bind(null,e),e.Va.a_=iy.bind(null,e.eventManager),e.Va.Fa=Yd.bind(null,e.eventManager),e}function my(i){const e=bt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ly.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dy.bind(null,e),e}class th{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,pe.Z)(function*(){n.serializer=Kd(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Gg(this.persistence,new G_,e.initialUser,this.serializer)}createPersistence(e){return new Hd(zd.jr,this.serializer)}createSharedClientState(e){return new K_}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Mm extends th{constructor(e,n,o){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,pe.Z)(function*(){yield n().call(o,e),yield o.xa.initialize(o,e),yield my(o.xa.syncEngine),yield sf(o.xa.remoteStore),yield o.persistence.mi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Gg(this.persistence,new G_,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new $_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new je(n,this.persistence);return new te(e.asyncQueue,o)}createPersistence(e){const n=hl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?bo.withCacheSize(this.cacheSizeBytes):bo.DEFAULT;return new $g(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,yp(),vp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new K_}}class _y extends Mm{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,pe.Z)(function*(){yield n().call(o,e);const u=o.xa.syncEngine;o.sharedClientState instanceof gp&&(o.sharedClientState.syncEngine={Ys:cE.bind(null,u),Zs:dE.bind(null,u),Xs:Ga.bind(null,u),Bi:gy.bind(null,u),Js:uE.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.mi(function(){var l=(0,pe.Z)(function*(g){yield function lE(i,e){return Dm.apply(this,arguments)}(o.xa.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start():g||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(g&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():g||o.indexBackfillerScheduler.stop())});return function(g){return l.apply(this,arguments)}}())})()}createSharedClientState(e){const n=yp();if(!gp.D(n))throw new Xe($e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=hl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gp(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class od{initialize(e,n){var o=this;return(0,pe.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>aE(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Im.bind(null,o.syncEngine),yield ny(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ry}createDatastore(e){const n=Kd(e.databaseInfo.databaseId),o=new _p(e.databaseInfo);return new Jv(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return o=this.localStore,u=this.datastore,l=e.asyncQueue,g=n=>aE(this.syncEngine,n,0),S=mp.D()?new mp:new Zv,new Ep(o,u,l,g,S);var o,u,l,g,S}createSyncEngine(e,n){return function(u,l,g,S,M,F,z){const X=new sE(u,l,g,S,M,F);return z&&(X.Ca=!0),X}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,pe.Z)(function*(o){const u=bt(o);ut("RemoteStore","RemoteStore shutting down."),u.C_.add(5),yield Tc(u),u.F_.shutdown(),u.M_.set("Unknown")}),function n(o){return e.apply(this,arguments)})(this.remoteStore);var e}}function yy(i,e=10240){let n=0;return{read:()=>(0,pe.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Lp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class xm{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Dr,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(o=>{o&&o.Z_()?this.metadata.resolve(o.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.Y_)}`))},o=>this.metadata.reject(o))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,pe.Z)(function*(){const n=yield e.qa();if(null===n)return null;const o=e.La.decode(n),u=Number(o);isNaN(u)&&e.Qa(`length string (${o}) is not valid number`);const l=yield e.Ka(u);return new iE(JSON.parse(l),n.length+u)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,pe.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}Ka(e){var n=this;return(0,pe.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const o=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,pe.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class fE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,pe.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new Xe($e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,pe.Z)(function*(g,S){const M=bt(g),F=mu(M.serializer)+"/documents",z={documents:S.map(yt=>jc(M.serializer,yt))},X=yield M.Co("BatchGetDocuments",F,z,S.length),_e=new Map;X.forEach(yt=>{const At=function Qf(i,e){return"found"in e?function(o,u){Bt(!!u.found);const l=Wo(o,u.found.name),g=ui(u.found.updateTime),S=u.found.createTime?ui(u.found.createTime):Ht.min(),M=new Xi({mapValue:{fields:u.found.fields}});return Mn.newFoundDocument(l,g,S,M)}(i,e):"missing"in e?function(o,u){Bt(!!u.missing),Bt(!!u.readTime);const l=Wo(o,u.missing),g=ui(u.readTime);return Mn.newNoDocument(l,g)}(i,e):Vt()}(M.serializer,yt);_e.set(At.key.toString(),At)});const Ve=[];return S.forEach(yt=>{const At=_e.get(yt.toString());Bt(!!At),Ve.push(At)}),Ve}),function l(g,S){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new So(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const l=Dt.fromPath(u);e.mutations.push(new Sd(l,e.precondition(l)))}),yield(o=(0,pe.Z)(function*(l,g){const S=bt(l),M=mu(S.serializer)+"/documents",F={writes:g.map(z=>Nd(S.serializer,z))};yield S.wo("Commit",M,F)}),function u(l,g){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Vt();n=Ht.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new Xe($e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ht.min())?Yr.exists(!1):Yr.updateTime(n):Yr.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ht.min()))throw new Xe($e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yr.updateTime(n)}return Yr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pE{constructor(e,n,o,u,l){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=l,this.Wa=o.maxAttempts,this.zo=new Jh(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,pe.Z)(function*(){const n=new fE(e.datastore),o=e.za(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(l=>{e.ja(l)}))}).catch(u=>{e.ja(u)})}))}za(e){try{const n=this.updateFunction(e);return!Ct(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!Pd(n)}return!1}}class gE{constructor(e,n,o,u){var l=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=ir.UNAUTHENTICATED,this.clientId=Ur.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var g=(0,pe.Z)(function*(S){ut("FirestoreClient","Received user=",S.uid),yield l.authCredentialListener(S),l.user=S});return function(S){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(o,g=>(ut("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Xe($e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=Qd(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function Fp(i,e){return Om.apply(this,arguments)}function Om(){return Om=(0,pe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),ut("FirestoreClient","Initializing OfflineComponentProvider");const n=yield i.getConfiguration();yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,pe.Z)(function*(l){o.isEqual(l)||(yield W_(e.localStore,l),o=l)});return function(l){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),Om.apply(this,arguments)}function Eu(i,e){return df.apply(this,arguments)}function df(){return df=(0,pe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield Vp(i);ut("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(n,o),i.setCredentialChangeListener(u=>um(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,l)=>um(e.remoteStore,l)),i._onlineComponents=e}),df.apply(this,arguments)}function vy(i){return"FirebaseError"===i.name?i.code===$e.FAILED_PRECONDITION||i.code===$e.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function Vp(i){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,pe.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ut("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Fp(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!vy(n))throw n;fr("Error using user provided cache. Falling back to memory cache: "+n),yield Fp(i,new th)}}else ut("FirestoreClient","Using default OfflineComponentProvider"),yield Fp(i,new th);return i._offlineComponents}),Nm.apply(this,arguments)}function hf(i){return Up.apply(this,arguments)}function Up(){return Up=(0,pe.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ut("FirestoreClient","Using user provided OnlineComponentProvider"),yield Eu(i,i._uninitializedComponentsProvider._online)):(ut("FirestoreClient","Using default OnlineComponentProvider"),yield Eu(i,new od))),i._onlineComponents}),Up.apply(this,arguments)}function ff(i){return Vp(i).then(e=>e.persistence)}function _l(i){return Vp(i).then(e=>e.localStore)}function mE(i){return hf(i).then(e=>e.remoteStore)}function Bp(i){return hf(i).then(e=>e.syncEngine)}function ad(i){return jp.apply(this,arguments)}function jp(){return jp=(0,pe.Z)(function*(i){const e=yield hf(i),n=e.eventManager;return n.onListen=oE.bind(null,e.syncEngine),n.onUnlisten=zI.bind(null,e.syncEngine),n}),jp.apply(this,arguments)}function Ey(i,e,n={}){const o=new Dr;return i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(l,g,S,M,F){const z=new Lp({next:_e=>{g.enqueueAndForget(()=>fm(l,X));const Ve=_e.docs.has(S);!Ve&&_e.fromCache?F.reject(new Xe($e.UNAVAILABLE,"Failed to get document because the client is offline.")):Ve&&_e.fromCache&&M&&"server"===M.source?F.reject(new Xe($e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):F.resolve(_e)},error:_e=>F.reject(_e)}),X=new gl(so(S.path),z,{includeMetadataChanges:!0,J_:!0});return Cp(l,X)}(yield ad(i),i.asyncQueue,e,n,o)})),o.promise}function Iy(i,e,n={}){const o=new Dr;return i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(l,g,S,M,F){const z=new Lp({next:_e=>{g.enqueueAndForget(()=>fm(l,X)),_e.fromCache&&"server"===M.source?F.reject(new Xe($e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):F.resolve(_e)},error:_e=>F.reject(_e)}),X=new gl(S,z,{includeMetadataChanges:!0,J_:!0});return Cp(l,X)}(yield ad(i),i.asyncQueue,e,n,o)})),o.promise}function vE(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const Dy=new Map;function zp(i,e,n){if(!n)throw new Xe($e.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Vm(i,e,n,o){if(!0===e&&!0===o)throw new Xe($e.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Cy(i){if(!Dt.isDocumentKey(i))throw new Xe($e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Ay(i){if(Dt.isDocumentKey(i))throw new Xe($e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function gf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(o=i).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof i?"a function":Vt()}function er(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Xe($e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gf(i);throw new Xe($e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function nh(i,e){if(e<=0)throw new Xe($e.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Sy{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new Xe($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Xe($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Vm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=vE(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(l){if(void 0!==l.timeoutSeconds){if(isNaN(l.timeoutSeconds))throw new Xe($e.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Xe($e.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Xe($e.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rh{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Xe($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Xe($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sy(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new ca;switch(o.type){case"firstParty":return new oi(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Xe($e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=Dy.get(n);o&&(ut("ComponentProvider","Removing Datastore"),Dy.delete(n),o.terminate())}(this),Promise.resolve()}}class co{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new co(this.firestore,e,this._query)}}class Ii{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ya(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ii(this.firestore,e,this._key)}}class ya extends co{constructor(e,n,o){super(e,n,so(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ii(this.firestore,null,new Dt(e))}withConverter(e){return new ya(this.firestore,e,this._path)}}function by(i,e,...n){if(i=(0,Ue.m9)(i),zp("collection","path",e),i instanceof rh){const o=Bn.fromString(e,...n);return Ay(o),new ya(i,null,o)}{if(!(i instanceof Ii||i instanceof ya))throw new Xe($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Bn.fromString(e,...n));return Ay(o),new ya(i.firestore,null,o)}}function Gp(i,e,...n){if(i=(0,Ue.m9)(i),1===arguments.length&&(e=Ur.newId()),zp("doc","path",e),i instanceof rh){const o=Bn.fromString(e,...n);return Cy(o),new Ii(i,null,new Dt(o))}{if(!(i instanceof Ii||i instanceof ya))throw new Xe($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Bn.fromString(e,...n));return Cy(o),new Ii(i.firestore,i instanceof ya?i.converter:null,new Dt(o))}}function Ry(i,e){return i=(0,Ue.m9)(i),e=(0,Ue.m9)(e),(i instanceof Ii||i instanceof ya)&&(e instanceof Ii||e instanceof ya)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Bm(i,e){return i=(0,Ue.m9)(i),e=(0,Ue.m9)(e),i instanceof co&&e instanceof co&&i.firestore===e.firestore&&Os(i._query,e._query)&&i.converter===e.converter}class IE{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Jh(this,"async_queue_retry"),this.iu=()=>{const n=vp();n&&ut("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=vp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=vp();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Dr;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,pe.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!b(n))throw n;ut("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(o=>{throw this.eu=o,this.tu=!1,lr("INTERNAL UNHANDLED ERROR: ",function(g){let S=g.message||"";return g.stack&&(S=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),S}(o)),o}).then(o=>(this.tu=!1,o))));return this.Ja=n,n}enqueueAfterDelay(e,n,o){this.su(),this.ru.indexOf(e)>-1&&(n=0);const u=lm.createAndSchedule(this,e,n,o,l=>this.au(l));return this.Xa.push(u),u}su(){this.eu&&Vt()}verifyOperationInProgress(){}uu(){var e=this;return(0,pe.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function jm(i){return function(n,o){if("object"!=typeof n||null===n)return!1;const u=n;for(const l of["next","error","complete"])if(l in u&&"function"==typeof u[l])return!0;return!1}(i)}class TE{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class zr extends rh{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new IE,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||My(this),this._firestoreClient.terminate()}}function rs(i){return i._firestoreClient||My(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function My(i){var e,n,o;const u=i._freezeSettings(),l=(M=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new fu(i._databaseId,M,i._persistenceKey,(z=u).host,z.ssl,z.experimentalForceLongPolling,z.experimentalAutoDetectLongPolling,vE(z.experimentalLongPollingOptions),z.useFetchStreams));var M,z;i._firestoreClient=new gE(i._authCredentials,i._appCheckCredentials,i._queue,l),null!==(n=u.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function xy(i,e,n){const o=new Dr;return i.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield Fp(i,n),yield Eu(i,e),o.resolve()}catch(u){const l=u;if(!vy(l))throw l;fr("Error enabling indexeddb cache. Falling back to memory cache: "+l),o.reject(l)}})).then(()=>o.promise)}function Hm(i){if(i._initialized||i._terminated)throw new Xe($e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ac{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ac(Qr.fromBase64String(e))}catch(n){throw new Xe($e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ac(Qr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wc{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Xe($e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ud{constructor(e){this._methodName=e}}class Wa{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Xe($e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Xe($e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _n(this._lat,e._lat)||_n(this._long,e._long)}}const mf=/^__.*__$/;class Po{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new Go(e,this.data,this.fieldMask,n,this.fieldTransforms):new zu(e,this.data,n,this.fieldTransforms)}}class yl{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new Go(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _f(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vt()}}class qo{constructor(e,n,o,u,l,g){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===l&&this.Pu(),this.fieldTransforms=l||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new qo(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Au(e),u}Ru(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Pu(),u}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return uh(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(_f(this.Iu)&&mf.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class zm{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Kd(e)}pu(e,n,o,u=!1){return new qo({Iu:e,methodName:n,gu:o,path:Nr.emptyPath(),du:!1,fu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Iu(i){const e=i._freezeSettings(),n=Kd(i._databaseId);return new zm(i._databaseId,!!e.ignoreUndefinedProperties,n)}function qc(i,e,n,o,u,l={}){const g=i.pu(l.merge||l.mergeFields?2:0,e,n,u);Zp("Data must be an object, but it was:",g,o);const S=Wm(o,g);let M,F;if(l.merge)M=new Ji(g.fieldMask),F=g.fieldTransforms;else if(l.mergeFields){const z=[];for(const X of l.mergeFields){const _e=ah(e,X,n);if(!g.contains(_e))throw new Xe($e.INVALID_ARGUMENT,`Field '${_e}' is specified in your field mask but missing from your input data.`);Vy(z,_e)||z.push(_e)}M=new Ji(z),F=g.fieldTransforms.filter(X=>M.covers(X.field))}else M=null,F=g.fieldTransforms;return new Po(new Xi(S),M,F)}class Sc extends ud{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sc}}function cd(i,e,n){return new qo({Iu:3,gu:e.settings.gu,methodName:i._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class vl extends ud{_toFieldTransform(e){return new rl(e.path,new $a)}isEqual(e){return e instanceof vl}}class ih extends ud{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=cd(this,e,!0),o=this.yu.map(l=>Il(l,n)),u=new ga(o);return new rl(e.path,u)}isEqual(e){return this===e}}class sh extends ud{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=cd(this,e,!0),o=this.yu.map(l=>Il(l,n)),u=new Ha(o);return new rl(e.path,u)}isEqual(e){return this===e}}class oh extends ud{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new $u(e.serializer,jl(e.serializer,this.wu));return new rl(e.path,n)}isEqual(e){return this===e}}function El(i,e,n,o){const u=i.pu(1,e,n);Zp("Data must be an object, but it was:",u,o);const l=[],g=Xi.empty();ha(o,(M,F)=>{const z=yf(e,M,n);F=(0,Ue.m9)(F);const X=u.Ru(z);if(F instanceof Sc)l.push(z);else{const _e=Il(F,X);null!=_e&&(l.push(z),g.set(z,_e))}});const S=new Ji(l);return new yl(g,S,u.fieldTransforms)}function Kp(i,e,n,o,u,l){const g=i.pu(1,e,n),S=[ah(e,o,n)],M=[u];if(l.length%2!=0)throw new Xe($e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _e=0;_e<l.length;_e+=2)S.push(ah(e,l[_e])),M.push(l[_e+1]);const F=[],z=Xi.empty();for(let _e=S.length-1;_e>=0;--_e)if(!Vy(F,S[_e])){const Ve=S[_e];let yt=M[_e];yt=(0,Ue.m9)(yt);const At=g.Ru(Ve);if(yt instanceof Sc)F.push(Ve);else{const Rt=Il(yt,At);null!=Rt&&(F.push(Ve),z.set(Ve,Rt))}}const X=new Ji(F);return new yl(z,X,g.fieldTransforms)}function Gm(i,e,n,o=!1){return Il(n,i.pu(o?4:3,e))}function Il(i,e){if(qm(i=(0,Ue.m9)(i)))return Zp("Unsupported field value:",e,i),Wm(i,e);if(i instanceof ud)return function(o,u){if(!_f(u.Iu))throw u.mu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.mu(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(u);l&&u.fieldTransforms.push(l)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(o,u){const l=[];let g=0;for(const S of o){let M=Il(S,u.Vu(g));null==M&&(M={nullValue:"NULL_VALUE"}),l.push(M),g++}return{arrayValue:{values:l}}}(i,e)}return function(o,u){if(null===(o=(0,Ue.m9)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return jl(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const l=dr.fromDate(o);return{timestampValue:Mr(u.serializer,l)}}if(o instanceof dr){const l=new dr(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Mr(u.serializer,l)}}if(o instanceof Wa)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Ac)return{bytesValue:_a(u.serializer,o._byteString)};if(o instanceof Ii){const l=u.databaseId,g=o.firestore._databaseId;if(!g.isEqual(l))throw u.mu(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ol(o.firestore._databaseId||u.databaseId,o._key.path)}}throw u.mu(`Unsupported field value: ${gf(o)}`)}(i,e)}function Wm(i,e){const n={};return Ps(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(i,(o,u)=>{const l=Il(u,e.Eu(o));null!=l&&(n[o]=l)}),{mapValue:{fields:n}}}function qm(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof dr||i instanceof Wa||i instanceof Ac||i instanceof Ii||i instanceof ud)}function Zp(i,e,n){if(!qm(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=gf(n);throw e.mu("an object"===o?i+" a custom object":i+" "+o)}var u}function ah(i,e,n){if((e=(0,Ue.m9)(e))instanceof Wc)return e._internalPath;if("string"==typeof e)return yf(i,e);throw uh("Field path arguments must be of type string or ",i,!1,void 0,n)}const Fy=new RegExp("[~\\*/\\[\\]]");function yf(i,e,n){if(e.search(Fy)>=0)throw uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Wc(...e.split("."))._internalPath}catch{throw uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function uh(i,e,n,o,u){const l=o&&!o.isEmpty(),g=void 0!==u;let S=`Function ${e}() called with invalid data`;n&&(S+=" (via `toFirestore()`)"),S+=". ";let M="";return(l||g)&&(M+=" (found",l&&(M+=` in field ${o}`),g&&(M+=` in document ${u}`),M+=")"),new Xe($e.INVALID_ARGUMENT,S+i+M)}function Vy(i,e){return i.some(n=>n.isEqual(e))}class Qp{constructor(e,n,o,u,l){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ii(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ZI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class ZI extends Qp{data(){return super.data()}}function Yp(i,e){return"string"==typeof e?yf(i,e):e instanceof Wc?e._internalPath:e._delegate._internalPath}function Uy(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Xe($e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class By{}class vf extends By{}function ld(i,e,...n){let o=[];e instanceof By&&o.push(e),o=o.concat(n),function(l){const g=l.filter(M=>M instanceof ch).length,S=l.filter(M=>M instanceof Ef).length;if(g>1||g>0&&S>0)throw new Xe($e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class Ef extends vf{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Ef(e,n,o)}_apply(e){const n=this._parse(e);return ME(e._query,n),new co(e.firestore,e.converter,$n(e._query,n))}_parse(e){const n=Iu(e.firestore);return function(l,g,S,M,F,z,X){let _e;if(F.isKeyField()){if("array-contains"===z||"array-contains-any"===z)throw new Xe($e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${z}' queries on documentId().`);if("in"===z||"not-in"===z){Af(X,z);const Ve=[];for(const yt of X)Ve.push(Cf(M,l,yt));_e={arrayValue:{values:Ve}}}else _e=Cf(M,l,X)}else"in"!==z&&"not-in"!==z&&"array-contains-any"!==z||Af(X,z),_e=Gm(S,"where",X,"in"===z||"not-in"===z);return h.create(F,z,_e)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class ch extends By{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ch(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:m.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,l){let g=u;const S=l.getFlattenedFilters();for(const M of S)ME(g,M),g=$n(g,M)}(e._query,n),new co(e.firestore,e.converter,$n(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class If extends vf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new If(e,n)}_apply(e){const n=function(u,l,g){if(null!==u.startAt)throw new Xe($e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new Xe($e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vs(l,g)}(e._query,this._field,this._direction);return new co(e.firestore,e.converter,function(u,l){const g=u.explicitOrderBy.concat([l]);return new io(u.path,u.collectionGroup,g,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}class Tf extends vf{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new Tf(e,n,o)}_apply(e){return new co(e.firestore,e.converter,Ei(e._query,this._limit,this._limitType))}}class eg extends vf{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new eg(e,n,o)}_apply(e){const n=ng(e,this.type,this._docOrFields,this._inclusive);return new co(e.firestore,e.converter,(l=n,new io((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,l,u.endAt)));var u,l}}class tg extends vf{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new tg(e,n,o)}_apply(e){const n=ng(e,this.type,this._docOrFields,this._inclusive);return new co(e.firestore,e.converter,(l=n,new io((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,l)));var u,l}}function ng(i,e,n,o){if(n[0]=(0,Ue.m9)(n[0]),n[0]instanceof Qp)return function(l,g,S,M,F){if(!M)throw new Xe($e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${S}().`);const z=[];for(const X of xt(l))if(X.field.isKeyField())z.push($o(g,M.key));else{const _e=M.data.field(X.field);if(el(_e))throw new Xe($e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+X.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_e){const Ve=X.field.canonicalString();throw new Xe($e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ve}' (used as the orderBy) does not exist.`)}z.push(_e)}return new Bu(z,F)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=Iu(i.firestore);return function(g,S,M,F,z,X){const _e=g.explicitOrderBy;if(z.length>_e.length)throw new Xe($e.INVALID_ARGUMENT,`Too many arguments provided to ${F}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ve=[];for(let yt=0;yt<z.length;yt++){const At=z[yt];if(_e[yt].field.isKeyField()){if("string"!=typeof At)throw new Xe($e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${F}(), but got a ${typeof At}`);if(!pu(g)&&-1!==At.indexOf("/"))throw new Xe($e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${F}() must be a plain document ID, but '${At}' contains a slash.`);const Rt=g.path.child(Bn.fromString(At));if(!Dt.isDocumentKey(Rt))throw new Xe($e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${F}() must result in a valid document path, but '${Rt}' is not because it contains an odd number of segments.`);const mn=new Dt(Rt);Ve.push($o(S,mn))}else{const Rt=Gm(M,F,At);Ve.push(Rt)}}return new Bu(Ve,X)}(i._query,i.firestore._databaseId,u,e,n,o)}}function Cf(i,e,n){if("string"==typeof(n=(0,Ue.m9)(n))){if(""===n)throw new Xe($e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pu(e)&&-1!==n.indexOf("/"))throw new Xe($e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(Bn.fromString(n));if(!Dt.isDocumentKey(o))throw new Xe($e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return $o(i,new Dt(o))}if(n instanceof Ii)return $o(i,n._key);throw new Xe($e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gf(n)}.`)}function Af(i,e){if(!Array.isArray(i)||0===i.length)throw new Xe($e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ME(i,e){const n=function(u,l){for(const g of u)for(const S of g.getFlattenedFilters())if(l.indexOf(S.op)>=0)return S.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Xe($e.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Km{convertValue(e,n="none"){switch(ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Vt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return ha(e,(u,l)=>{o[u]=this.convertValue(l,n)}),o}convertGeoPoint(e){return new Wa(ar(e.latitude),ar(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=hu(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(pc(e));default:return null}}convertTimestamp(e){const n=Hi(e);return new dr(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Bn.fromString(e);Bt(Cg(o));const u=new Hs(o.get(1),o.get(3)),l=new Dt(o.popFirst(5));return u.isEqual(n)||lr(`Document ${l} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}function lh(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class xE extends Km{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ac(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ii(this.firestore,null,n)}}class Tl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kc extends Qp{constructor(e,n,o,u,l,g){super(e,n,o,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Sf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(Yp("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Sf extends Kc{data(e={}){return super.data(e)}}class wl{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new Tl(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new Sf(this._firestore,this._userDataWriter,o.key,o,new Tl(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Xe($e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,l){if(u._snapshot.oldDocs.isEmpty()){let g=0;return u._snapshot.docChanges.map(S=>({type:"added",doc:new Sf(u._firestore,u._userDataWriter,S.doc.key,S.doc,new Tl(u._snapshot.mutatedKeys.has(S.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:g++}))}{let g=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(S=>l||3!==S.type).map(S=>{const M=new Sf(u._firestore,u._userDataWriter,S.doc.key,S.doc,new Tl(u._snapshot.mutatedKeys.has(S.doc.key),u._snapshot.fromCache),u.query.converter);let F=-1,z=-1;return 0!==S.type&&(F=g.indexOf(S.doc.key),g=g.delete(S.doc.key)),1!==S.type&&(g=g.add(S.doc),z=g.indexOf(S.doc.key)),{type:zy(S.type),doc:M,oldIndex:F,newIndex:z}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function zy(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vt()}}function rg(i,e){return i instanceof Kc&&e instanceof Kc?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof wl&&e instanceof wl&&i._firestore===e._firestore&&Bm(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Dl extends Km{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ac(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ii(this.firestore,null,n)}}function Wy(i,e,n){i=er(i,Ii);const o=er(i.firestore,zr),u=lh(i.converter,e,n);return dh(o,[qc(Iu(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,Yr.none())])}function qy(i,e,n,...o){i=er(i,Ii);const u=er(i.firestore,zr),l=Iu(u);let g;return g="string"==typeof(e=(0,Ue.m9)(e))||e instanceof Wc?Kp(l,"updateDoc",i._key,e,n,o):El(l,"updateDoc",i._key,e),dh(u,[g.toMutation(i._key,Yr.exists(!0))])}function Ym(i,...e){var n,o,u;i=(0,Ue.m9)(i);let l={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||jm(e[g])||(l=e[g],g++);const S={includeMetadataChanges:l.includeMetadataChanges};if(jm(e[g])){const X=e[g];e[g]=null===(n=X.next)||void 0===n?void 0:n.bind(X),e[g+1]=null===(o=X.error)||void 0===o?void 0:o.bind(X),e[g+2]=null===(u=X.complete)||void 0===u?void 0:u.bind(X)}let M,F,z;if(i instanceof Ii)F=er(i.firestore,zr),z=so(i._key.path),M={next:X=>{e[g]&&e[g](Jm(F,i,X))},error:e[g+1],complete:e[g+2]};else{const X=er(i,co);F=er(X.firestore,zr),z=X._query;const _e=new Dl(F);M={next:Ve=>{e[g]&&e[g](new wl(F,_e,X,Ve))},error:e[g+1],complete:e[g+2]},Uy(i._query)}return function(_e,Ve,yt,At){const Rt=new Lp(At),mn=new gl(Ve,Rt,yt);return _e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return Cp(yield ad(_e),mn)})),()=>{Rt.Na(),_e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return fm(yield ad(_e),mn)}))}}(rs(F),z,S,M)}function dh(i,e){return function(o,u){const l=new Dr;return o.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function GI(i,e,n){return cy.apply(this,arguments)}(yield Bp(o),u,l)})),l.promise}(rs(i),e)}function Jm(i,e,n){const o=n.docs.get(e._key),u=new Dl(i);return new Kc(i,u,e._key,o,new Tl(n.hasPendingWrites,n.fromCache),e.converter)}const t_={maxAttempts:5};class n_{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Iu(e)}set(e,n,o){this._verifyNotCommitted();const u=Zc(e,this._firestore),l=lh(u.converter,n,o),g=qc(this._dataReader,"WriteBatch.set",u._key,l,null!==u.converter,o);return this._mutations.push(g.toMutation(u._key,Yr.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const l=Zc(e,this._firestore);let g;return g="string"==typeof(n=(0,Ue.m9)(n))||n instanceof Wc?Kp(this._dataReader,"WriteBatch.update",l._key,n,o,u):El(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(g.toMutation(l._key,Yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Zc(e,this._firestore);return this._mutations=this._mutations.concat(new So(n._key,Yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xe($e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zc(i,e){if((i=(0,Ue.m9)(i)).firestore!==e)throw new Xe($e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Xy extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=Iu(n)}get(n){const o=Zc(n,this._firestore),u=new xE(this._firestore);return this._transaction.lookup([o._key]).then(l=>{if(!l||1!==l.length)return Vt();const g=l[0];if(g.isFoundDocument())return new Qp(this._firestore,u,g.key,g,o.converter);if(g.isNoDocument())return new Qp(this._firestore,u,o._key,null,o.converter);throw Vt()})}set(n,o,u){const l=Zc(n,this._firestore),g=lh(l.converter,o,u),S=qc(this._dataReader,"Transaction.set",l._key,g,null!==l.converter,u);return this._transaction.set(l._key,S),this}update(n,o,u,...l){const g=Zc(n,this._firestore);let S;return S="string"==typeof(o=(0,Ue.m9)(o))||o instanceof Wc?Kp(this._dataReader,"Transaction.update",g._key,o,u,l):El(this._dataReader,"Transaction.update",g._key,o),this._transaction.update(g._key,S),this}delete(n){const o=Zc(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Zc(e,this._firestore),o=new Dl(this._firestore);return super.get(e).then(u=>new Kc(this._firestore,o,n._key,u._document,new Tl(!1,!1),n.converter))}}function cg(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Xe("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function uv(){if(typeof Uint8Array>"u")throw new Xe("unimplemented","Uint8Arrays are not available in this environment.")}function cv(){if(!function Ml(){return typeof atob<"u"}())throw new Xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){ls=re.SDK_VERSION,(0,re._registerComponent)(new Fe.wA("firestore",(o,{instanceIdentifier:u,options:l})=>{const g=o.getProvider("app").getImmediate(),S=new zr(new Mu(o.getProvider("auth-internal")),new _d(o.getProvider("app-check-internal")),function(F,z){if(!Object.prototype.hasOwnProperty.apply(F.options,["projectId"]))throw new Xe($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hs(F.options.projectId,z)}(g,u),g);return l=Object.assign({useFetchStreams:n},l),S._setSettings(l),S},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(ou,"4.3.2",e),(0,re.registerVersion)(ou,"4.3.2","esm2017")}();class fh{constructor(e){this._delegate=e}static fromBase64String(e){return cv(),new fh(Ac.fromBase64String(e))}static fromUint8Array(e){return uv(),new fh(Ac.fromUint8Array(e))}toBase64(){return cv(),this._delegate.toBase64()}toUint8Array(){return uv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function s_(i){return function lv(i,e){if("object"!=typeof i||null===i)return!1;const n=i;for(const o of e)if(o in n&&"function"==typeof n[o])return!0;return!1}(i,["next","error","complete"])}class dv{enableIndexedDbPersistence(e,n){return function wE(i,e){Hm(i=er(i,zr));const n=rs(i);if(n._uninitializedComponentsProvider)throw new Xe($e.FAILED_PRECONDITION,"SDK cache is already specified.");fr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),u=new od;return xy(n,u,new Mm(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function DE(i){Hm(i=er(i,zr));const e=rs(i);if(e._uninitializedComponentsProvider)throw new Xe($e.FAILED_PRECONDITION,"SDK cache is already specified.");fr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),o=new od;return xy(e,o,new _y(o,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function CE(i){if(i._initialized&&!i._terminated)throw new Xe($e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Dr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(n=(0,pe.Z)(function*(u){if(!Rs.D())return Promise.resolve();const l=u+"main";yield Rs.delete(l)}),function o(u){return n.apply(this,arguments)})(hl(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class hd{constructor(e,n,o){this._delegate=n,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Hs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&fr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,o={}){!function Um(i,e,n,o={}){var u;const l=(i=er(i,rh))._getSettings(),g=`${e}:${n}`;if("firestore.googleapis.com"!==l.host&&l.host!==g&&fr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},l),{host:g,ssl:!1})),o.mockUserToken){let S,M;if("string"==typeof o.mockUserToken)S=o.mockUserToken,M=ir.MOCK_USER;else{S=(0,Ue.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const F=o.mockUserToken.sub||o.mockUserToken.user_id;if(!F)throw new Xe($e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");M=new ir(F)}i._authCredentials=new au(new ua(S,M))}}(this._delegate,e,n,o)}enableNetwork(){return function Oy(i){return function Lm(i){return i.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield ff(i),n=yield mE(i);return e.setNetworkEnabled(!0),function(u){const l=bt(u);return l.C_.delete(0),ef(l)}(n)}))}(rs(i=er(i,zr)))}(this._delegate)}disableNetwork(){return function Ny(i){return function Gc(i){return i.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield ff(i),n=yield mE(i);return e.setNetworkEnabled(!1),(o=(0,pe.Z)(function*(l){const g=bt(l);g.C_.add(0),yield Tc(g),g.M_.set("Offline")}),function u(l){return o.apply(this,arguments)})(n);var o}))}(rs(i=er(i,zr)))}(this._delegate)}enablePersistence(e){let n=!1,o=!1;return e&&(n=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Vm("synchronizeTabs",n,"experimentalForceOwningTab",o)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function AE(i){return function(n){const o=new Dr;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function Ln(i,e){return xp.apply(this,arguments)}(yield Bp(n),o)})),o.promise}(rs(i=er(i,zr)))}(this._delegate)}onSnapshotsInSync(e){return function Ky(i,e){return function Ty(i,e){const n=new Lp(e);return i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return u=yield ad(i),l=n,bt(u).q_.add(l),void l.next();var u,l})),()=>{n.Na(),i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return u=yield ad(i),l=n,void bt(u).q_.delete(l);var u,l}))}}(rs(i=er(i,zr)),jm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new fd(this,by(this._delegate,e))}catch(n){throw Mo(n,"collection()","Firestore.collection()")}}doc(e){try{return new Zu(this,Gp(this._delegate,e))}catch(n){throw Mo(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ni(this,function EE(i,e){if(i=er(i,rh),zp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Xe($e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new co(i,null,(o=e,new io(Bn.emptyPath(),o)));var o}(this._delegate,e))}catch(n){throw Mo(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ev(i,e,n){i=er(i,zr);const o=Object.assign(Object.assign({},t_),n);return function(l){if(l.maxAttempts<1)throw new Xe($e.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(l,g,S){const M=new Dr;return l.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const F=yield function km(i){return hf(i).then(e=>e.datastore)}(l);new pE(l.asyncQueue,F,S,g,M).run()})),M.promise}(rs(i),u=>e(new Xy(i,u)),o)}(this._delegate,n=>e(new o_(this,n)))}batch(){return rs(this._delegate),new hv(new n_(this._delegate,e=>dh(this._delegate,e)))}loadBundle(e){return function KI(i,e){const n=rs(i=er(i,zr)),o=new TE;return function yE(i,e,n,o){const u=function(g,S){let M;return M="string"==typeof g?Bc().encode(g):g,z=function(z,X){if(z instanceof Uint8Array)return yy(z,X);if(z instanceof ArrayBuffer)return yy(new Uint8Array(z),X);if(z instanceof ReadableStream)return z.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(M),new xm(z,S);var z}(n,Kd(e));i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function Pm(i,e,n){const o=bt(i);var u;(u=(0,pe.Z)(function*(g,S,M){try{const F=yield S.getMetadata();if(yield function(yt,At){const Rt=bt(yt),mn=ui(At.createTime);return Rt.persistence.runTransaction("hasNewerBundle","readonly",wn=>Rt.Kr.getBundleMetadata(wn,At.id)).then(wn=>!!wn&&wn.createTime.compareTo(mn)>=0)}(g.localStore,F))return yield S.close(),M._completeWith({taskState:"Success",documentsLoaded:(yt=F).totalDocuments,bytesLoaded:yt.totalBytes,totalDocuments:yt.totalDocuments,totalBytes:yt.totalBytes}),Promise.resolve(new Set);M._updateProgress(gm(F));const z=new oy(F,g.localStore,S.serializer);let X=yield S.Ma();for(;X;){const Ve=yield z.ea(X);Ve&&M._updateProgress(Ve),X=yield S.Ma()}const _e=yield z.complete();return yield za(g,_e.ra,void 0),yield function(yt,At){const Rt=bt(yt);return Rt.persistence.runTransaction("Save bundle","readwrite",mn=>Rt.Kr.saveBundleMetadata(mn,At))}(g.localStore,F),M._completeWith(_e.progress),Promise.resolve(_e.na)}catch(F){return fr("SyncEngine",`Loading bundle failed with ${F}`),M._failWith(F),Promise.resolve(new Set)}var yt}),function l(g,S,M){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Bp(i),u,o)}))}(n,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function ky(i,e){return function $p(i,e){return i.asyncQueue.enqueue((0,pe.Z)(function*(){return function(o,u){const l=bt(o);return l.persistence.runTransaction("Get named query","readonly",g=>l.Kr.getNamedQuery(g,u))}(yield _l(i),e)}))}(rs(i=er(i,zr)),e).then(n=>n?new co(i,null,n.query):null)}(this._delegate,e).then(n=>n?new Ni(this,n):null)}}class lg extends Km{constructor(e){super(),this.firestore=e}convertBytes(e){return new fh(new Ac(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Zu.forKey(n,this.firestore,null)}}class o_{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new lg(e)}get(e){const n=Al(e);return this._delegate.get(n).then(o=>new Rf(this._firestore,new Kc(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,n.converter)))}set(e,n,o){const u=Al(e);return o?(cg("Transaction.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const l=Al(e);return 2===arguments.length?this._delegate.update(l,n):this._delegate.update(l,n,o,...u),this}delete(e){const n=Al(e);return this._delegate.delete(n),this}}class hv{constructor(e){this._delegate=e}set(e,n,o){const u=Al(e);return o?(cg("WriteBatch.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const l=Al(e);return 2===arguments.length?this._delegate.update(l,n):this._delegate.update(l,n,o,...u),this}delete(e){const n=Al(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Cl{constructor(e,n,o){this._firestore=e,this._userDataWriter=n,this._delegate=o}fromFirestore(e,n){const o=new Sf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Pf(this._firestore,o),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const o=Cl.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let l=u.get(n);return l||(l=new Cl(e,new lg(e),n),u.set(n,l)),l}}Cl.INSTANCES=new WeakMap;class Zu{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new lg(e)}static forPath(e,n,o){if(e.length%2!=0)throw new Xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Zu(n,new Ii(n._delegate,o,new Dt(e)))}static forKey(e,n,o){return new Zu(n,new Ii(n._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new fd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new fd(this.firestore,by(this._delegate,e))}catch(n){throw Mo(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ue.m9)(e))instanceof Ii&&Ry(this._delegate,e)}set(e,n){n=cg("DocumentReference.set",n);try{return n?Wy(this._delegate,e,n):Wy(this._delegate,e)}catch(o){throw Mo(o,"setDoc()","DocumentReference.set()")}}update(e,n,...o){try{return 1===arguments.length?qy(this._delegate,e):qy(this._delegate,e,n,...o)}catch(u){throw Mo(u,"updateDoc()","DocumentReference.update()")}}delete(){return function og(i){return dh(er(i.firestore,zr),[new So(i._key,Yr.none())])}(this._delegate)}onSnapshot(...e){const n=a_(e),o=Qu(e,u=>new Rf(this.firestore,new Kc(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Ym(this._delegate,n,o)}get(e){let n;return n="cache"===e?.source?function ig(i){i=er(i,Ii);const e=er(i.firestore,zr),n=rs(e),o=new Dl(e);return function _E(i,e){const n=new Dr;return i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(o=(0,pe.Z)(function*(l,g,S){try{const M=yield function(z,X){const _e=bt(z);return _e.persistence.runTransaction("read document","readonly",Ve=>_e.localDocuments.getDocument(Ve,X))}(l,g);M.isFoundDocument()?S.resolve(M):M.isNoDocument()?S.resolve(null):S.reject(new Xe($e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(M){const F=Qd(M,`Failed to get document '${g} from cache`);S.reject(F)}}),function u(l,g,S){return o.apply(this,arguments)})(yield _l(i),e,n);var o})),n.promise}(n,i._key).then(u=>new Kc(e,o,i._key,u,new Tl(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function sg(i){i=er(i,Ii);const e=er(i.firestore,zr);return Ey(rs(e),i._key,{source:"server"}).then(n=>Jm(e,i,n))}(this._delegate):function Zm(i){i=er(i,Ii);const e=er(i.firestore,zr);return Ey(rs(e),i._key).then(n=>Jm(e,i,n))}(this._delegate),n.then(o=>new Rf(this.firestore,new Kc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Zu(this.firestore,this._delegate.withConverter(e?Cl.getInstance(this.firestore,e):null))}}function Mo(i,e,n){return i.message=i.message.replace(e,n),i}function a_(i){for(const e of i)if("object"==typeof e&&!s_(e))return e;return{}}function Qu(i,e){var n,o;let u;return u=s_(i[0])?i[0]:s_(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:l=>{u.next&&u.next(e(l))},error:null===(n=u.error)||void 0===n?void 0:n.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Rf{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Zu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return rg(this._delegate,e._delegate)}}class Pf extends Rf{data(e){const n=this._delegate.data(e);return this._delegate._converter||function ln(i,e){i||Vt()}(void 0!==n),n}}class Ni{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new lg(e)}where(e,n,o){try{return new Ni(this.firestore,ld(this._delegate,function SE(i,e,n){const o=e,u=Yp("where",i);return Ef._create(u,o,n)}(e,n,o)))}catch(u){throw Mo(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ni(this.firestore,ld(this._delegate,function Xp(i,e="asc"){const n=e,o=Yp("orderBy",i);return If._create(o,n)}(e,n)))}catch(o){throw Mo(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ni(this.firestore,ld(this._delegate,function wf(i){return nh("limit",i),Tf._create("limit",i,"F")}(e)))}catch(n){throw Mo(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ni(this.firestore,ld(this._delegate,function $y(i){return nh("limitToLast",i),Tf._create("limitToLast",i,"L")}(e)))}catch(n){throw Mo(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ni(this.firestore,ld(this._delegate,function Df(...i){return eg._create("startAt",i,!0)}(...e)))}catch(n){throw Mo(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ni(this.firestore,ld(this._delegate,function bE(...i){return eg._create("startAfter",i,!1)}(...e)))}catch(n){throw Mo(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ni(this.firestore,ld(this._delegate,function RE(...i){return tg._create("endBefore",i,!1)}(...e)))}catch(n){throw Mo(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ni(this.firestore,ld(this._delegate,function PE(...i){return tg._create("endAt",i,!0)}(...e)))}catch(n){throw Mo(n,"endAt()","Query.endAt()")}}isEqual(e){return Bm(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function Gy(i){i=er(i,co);const e=er(i.firestore,zr),n=rs(e),o=new Dl(e);return function Fm(i,e){const n=new Dr;return i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(o=(0,pe.Z)(function*(l,g,S){try{const M=yield lp(l,g,!0),F=new af(g,M.ls),z=F.ca(M.documents),X=F.applyChanges(z,!1);S.resolve(X.snapshot)}catch(M){const F=Qd(M,`Failed to execute query '${g} against cache`);S.reject(F)}}),function u(l,g,S){return o.apply(this,arguments)})(yield _l(i),e,n);var o})),n.promise}(n,i._query).then(u=>new wl(e,o,i,u))}(this._delegate):"server"===e?.source?function FE(i){i=er(i,co);const e=er(i.firestore,zr),n=rs(e),o=new Dl(e);return Iy(n,i._query,{source:"server"}).then(u=>new wl(e,o,i,u))}(this._delegate):function Qm(i){i=er(i,co);const e=er(i.firestore,zr),n=rs(e),o=new Dl(e);return Uy(i._query),Iy(n,i._query).then(u=>new wl(e,o,i,u))}(this._delegate),n.then(o=>new qa(this.firestore,new wl(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const n=a_(e),o=Qu(e,u=>new qa(this.firestore,new wl(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Ym(this._delegate,n,o)}withConverter(e){return new Ni(this.firestore,this._delegate.withConverter(e?Cl.getInstance(this.firestore,e):null))}}class Yu{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Pf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class qa{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ni(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Pf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Yu(this._firestore,n))}forEach(e,n){this._delegate.forEach(o=>{e.call(n,new Pf(this._firestore,o))})}isEqual(e){return rg(this._delegate,e._delegate)}}class fd extends Ni{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Zu(this.firestore,e):null}doc(e){try{return new Zu(this.firestore,void 0===e?Gp(this._delegate):Gp(this._delegate,e))}catch(n){throw Mo(n,"doc()","CollectionReference.doc()")}}add(e){return function ag(i,e){const n=er(i.firestore,zr),o=Gp(i),u=lh(i.converter,e);return dh(n,[qc(Iu(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,Yr.exists(!1))]).then(()=>o)}(this._delegate,e).then(n=>new Zu(this.firestore,n))}isEqual(e){return Ry(this._delegate,e._delegate)}withConverter(e){return new fd(this.firestore,this._delegate.withConverter(e?Cl.getInstance(this.firestore,e):null))}}function Al(i){return er(i,Ii)}class u_{constructor(...e){this._delegate=new Wc(...e)}static documentId(){return new u_(Nr.keyField().canonicalString())}isEqual(e){return(e=(0,Ue.m9)(e))instanceof Wc&&this._delegate._internalPath.isEqual(e._internalPath)}}class pd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function nv(){return new vl("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new pd(e)}static delete(){const e=function tv(){return new Sc("deleteField")}();return e._methodName="FieldValue.delete",new pd(e)}static arrayUnion(...e){const n=function rv(...i){return new ih("arrayUnion",i)}(...e);return n._methodName="FieldValue.arrayUnion",new pd(n)}static arrayRemove(...e){const n=function iv(...i){return new sh("arrayRemove",i)}(...e);return n._methodName="FieldValue.arrayRemove",new pd(n)}static increment(e){const n=function ug(i){return new oh("increment",i)}(e);return n._methodName="FieldValue.increment",new pd(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const QE={Firestore:hd,GeoPoint:Wa,Timestamp:dr,Blob:fh,Transaction:o_,WriteBatch:hv,DocumentReference:Zu,DocumentSnapshot:Rf,Query:Ni,QueryDocumentSnapshot:Pf,QuerySnapshot:qa,CollectionReference:fd,FieldPath:u_,FieldValue:pd,setLogLevel:function ZE(i){!function Vo(i){Mi.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function c_(i){(function YE(i,e){i.INTERNAL.registerComponent(new Fe.wA("firestore-compat",n=>{const o=n.getProvider("app-compat").getImmediate(),u=n.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},QE)))})(i,(e,n)=>new hd(e,n,new dv)),i.registerVersion("@firebase/firestore-compat","0.3.22")}(Nt.Z);var Mf=$(7142);function l_(i,e){return function JE(i,e=ye.z){return new Se.y(n=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},n)}):o=i.onSnapshot({includeMetadataChanges:!0},n),()=>{o?.()}})}(i,e)}function d_(i,e){return l_(i,e).pipe((0,Ge.U)(n=>({payload:n,type:"query"})))}class h_{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const o=this.ref.collection(e),{ref:u,query:l}=p_(o,n);return new pv(u,l,this.afs)}snapshotChanges(){return function XE(i,e){return l_(i,e).pipe((0,ie.O)(void 0),rt(),(0,Ge.U)(n=>{const[o,u]=n;return u.exists?o?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(j.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ge.U)(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return(0,V.D)(this.ref.get(e)).pipe(j.iC)}}function xf(i,e){return d_(i,e).pipe((0,ie.O)(void 0),rt(),(0,Ge.U)(n=>{const[o,u]=n,l=u.payload.docChanges(),g=l.map(S=>({type:S.type,payload:S}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((S,M)=>{const F=l.find(X=>X.doc.ref.isEqual(S.ref)),z=o?.payload.docs.find(X=>X.ref.isEqual(S.ref));F&&JSON.stringify(F.doc.metadata)===JSON.stringify(S.metadata)||!F&&z&&JSON.stringify(z.metadata)===JSON.stringify(S.metadata)||g.push({type:"modified",payload:{oldIndex:M,newIndex:M,type:"modified",doc:S}})}),g}))}function Of(i,e,n){return xf(i,n).pipe((0,et.R)((o,u)=>function eI(i,e,n){return e.forEach(o=>{n.indexOf(o.type)>-1&&(i=function fv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return dg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=i.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return dg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(l=>l.payload),e),[]),(0,nt.x)(),(0,Ge.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function dg(i,e,n,...o){const u=i.slice();return u.splice(e,n,...o),u}function f_(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class pv{ref;query;afs;constructor(e,n,o){this.ref=e,this.query=n,this.afs=o}stateChanges(e){let n=xf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,Ge.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),n.pipe((0,ie.O)(void 0),rt(),(0,pt.h)(([o,u])=>u.length>0||!o),(0,Ge.U)(([,o])=>o),j.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,et.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=f_(e);return Of(this.query,n,this.afs.schedulers.outsideAngular).pipe(j.iC)}valueChanges(e={}){return d_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ge.U)(n=>n.payload.docs.map(o=>e.idField?{...o.data(),[e.idField]:o.id}:o.data())),j.iC)}get(e){return(0,V.D)(this.query.get(e)).pipe(j.iC)}add(e){return this.ref.add(e)}doc(e){return new h_(this.ref.doc(e),this.afs)}}class tI{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?xf(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ge.U)(n=>n.filter(o=>e.indexOf(o.type)>-1)),(0,pt.h)(n=>n.length>0),j.iC):xf(this.query,this.afs.schedulers.outsideAngular).pipe(j.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,et.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=f_(e);return Of(this.query,n,this.afs.schedulers.outsideAngular).pipe(j.iC)}valueChanges(e={}){return d_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ge.U)(o=>o.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),j.iC)}get(e){return(0,V.D)(this.query.get(e)).pipe(j.iC)}}const hg=new se.OlP("angularfire2.enableFirestorePersistence"),fg=new se.OlP("angularfire2.firestore.persistenceSettings"),gv=new se.OlP("angularfire2.firestore.settings"),mv=new se.OlP("angularfire2.firestore.use-emulator");function p_(i,e=(n=>n)){return{query:e(i),ref:i}}let g_=(()=>{class i{schedulers;firestore;persistenceEnabled$;constructor(n,o,u,l,g,S,M,F,z,X,_e,Ve,yt,At,Rt,mn,wn){this.schedulers=M;const pn=(0,Te.on)(n,S,o),qn=z;X&&(0,me.nw)(pn,S,_e,yt,At,Rt,Ve,mn),[this.firestore,this.persistenceEnabled$]=(0,Te.cc)(`${pn.name}.firestore`,"AngularFirestore",pn.name,()=>{const mr=S.runOutsideAngular(()=>pn.firestore());if(l&&mr.settings(l),qn&&mr.useEmulator(...qn),u&&!(0,D.PM)(g)){const br=()=>{try{return(0,V.D)(mr.enablePersistence(F||void 0).then(()=>!0,()=>!1))}catch(hs){return typeof console<"u"&&console.warn(hs),(0,ke.of)(!1)}};return[mr,S.runOutsideAngular(br)]}return[mr,(0,ke.of)(!1)]},[l,qn,u])}collection(n,o){let u;u="string"==typeof n?this.firestore.collection(n):n;const{ref:l,query:g}=p_(u,o),S=this.schedulers.ngZone.run(()=>l);return new pv(S,g,this)}collectionGroup(n,o){const u=o||(g=>g),l=this.firestore.collectionGroup(n);return new tI(u(l),this)}doc(n){let o;o="string"==typeof n?this.firestore.doc(n):n;const u=this.schedulers.ngZone.run(()=>o);return new h_(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||i)(se.LFG(Te.Dh),se.LFG(Te.xv,8),se.LFG(hg,8),se.LFG(gv,8),se.LFG(se.Lbi),se.LFG(se.R0b),se.LFG(j.HU),se.LFG(fg,8),se.LFG(mv,8),se.LFG(me.zQ,8),se.LFG(me.Qv,8),se.LFG(me.L6,8),se.LFG(me._Q,8),se.LFG(me.rT,8),se.LFG(me.lh,8),se.LFG(me.f7,8),se.LFG(j.Rf,8))};static \u0275prov=se.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})(),_v=(()=>{class i{constructor(){Mf.Z.registerVersion("angularfire",j.q4.full,"fst-compat")}static enablePersistence(n){return{ngModule:i,providers:[{provide:hg,useValue:!0},{provide:fg,useValue:n}]}}static \u0275fac=function(o){return new(o||i)};static \u0275mod=se.oAB({type:i});static \u0275inj=se.cJS({providers:[g_]})}return i})()},7217:(Ft,He,$)=>{$.d(He,{Dh:()=>V,GT:()=>ye,cc:()=>Ge,hO:()=>rt,on:()=>ie,pX:()=>me,xv:()=>ke});var D=$(5879),se=$(8326),j=$(7142);const Te=["ngOnDestroy"],me=(ct,Nt,pe,re={})=>new Proxy(ct,{get:(Fe,Ee)=>pe.runOutsideAngular(()=>{if(ct[Ee])return re?.spy?.get&&re.spy.get(Ee,ct[Ee]),ct[Ee];if(Te.indexOf(Ee)>-1)return()=>{};const Ue=Nt.toPromise().then(Ze=>{const ot=Ze?.[Ee];return"function"==typeof ot?ot.bind(Ze):ot?.then?ot.then(ue=>pe.run(()=>ue)):pe.run(()=>ot)});return new Proxy(()=>{},{get:(Ze,ot)=>Ue[ot],apply:(Ze,ot,ue)=>Ue.then(Gt=>{const gt=Gt?.(...ue);return re?.spy?.apply&&re.spy.apply(Ee,ue,gt),gt})})})}),ye=(ct,Nt)=>{Nt.forEach(pe=>{Object.getOwnPropertyNames(pe.prototype||pe).forEach(re=>{Object.defineProperty(ct.prototype,re,Object.getOwnPropertyDescriptor(pe.prototype||pe,re))})})};class Se{constructor(Nt){return Nt}}const V=new D.OlP("angularfire2.app.options"),ke=new D.OlP("angularfire2.app.name");function ie(ct,Nt,pe){const Fe="object"==typeof pe&&pe||{};Fe.name=Fe.name||"string"==typeof pe&&pe||"[DEFAULT]";const Ue=j.Z.apps.filter(Ze=>Ze&&Ze.name===Fe.name)[0]||Nt.runOutsideAngular(()=>j.Z.initializeApp(ct,Fe));try{if(JSON.stringify(ct)!==JSON.stringify(Ue.options)){const Ze=!!module.hot;ae("error",`${Ue.name} Firebase App already initialized with different options${Ze?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Se(Ue)}const ae=(ct,...Nt)=>{(0,D.X6Q)()&&typeof console<"u"&&console[ct](...Nt)},ve={provide:Se,useFactory:ie,deps:[V,D.R0b,[new D.FiY,ke]]};let rt=(()=>{class ct{static initializeApp(pe,re){return{ngModule:ct,providers:[{provide:V,useValue:pe},{provide:ke,useValue:re}]}}constructor(pe){j.Z.registerVersion("angularfire",se.q4.full,"core"),j.Z.registerVersion("angularfire",se.q4.full,"app-compat"),j.Z.registerVersion("angular",D.q4F.full,pe.toString())}static \u0275fac=function(re){return new(re||ct)(D.LFG(D.Lbi))};static \u0275mod=D.oAB({type:ct});static \u0275inj=D.cJS({providers:[ve]})}return ct})();function Ge(ct,Nt,pe,re,Fe){const[,Ee,Ue]=globalThis.\u0275AngularfireInstanceCache.find(Ze=>Ze[0]===ct)||[];if(Ee)return function et(ct,Nt){try{return ct.toString()===Nt.toString()}catch{return ct===Nt}}(Fe,Ue)||(pt("error",`${Nt} was already initialized on the ${pe} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),pt("warn",{is:Fe,was:Ue})),Ee;{const Ze=re();return globalThis.\u0275AngularfireInstanceCache.push([ct,Ze,Fe]),Ze}}const nt=typeof module<"u"&&!!module.hot,pt=(ct,...Nt)=>{(0,D.X6Q)()&&typeof console<"u"&&console[ct](...Nt)};globalThis.\u0275AngularfireInstanceCache||=[]},8326:(Ft,He,$)=>{$.d(He,{q4:()=>et,iC:()=>_r,fc:()=>Gt,HU:()=>Ue,Rf:()=>Nt});var D=$(5879),se=$(534);(0,se.registerVersion)("firebase","10.6.0","app");var me=$(1954),Se=$(2631);const ke=new class V extends Se.v{}(class ye extends me.o{constructor(It,ge){super(It,ge),this.scheduler=It,this.work=ge}schedule(It,ge=0){return ge>0?super.schedule(It,ge):(this.delay=ge,this.state=It,this.scheduler.flush(this),this)}execute(It,ge){return ge>0||this.closed?super.execute(It,ge):this._execute(It,ge)}requestAsyncId(It,ge,he=0){return null!=he&&he>0||null==he&&this.delay>0?super.requestAsyncId(It,ge,he):(It.flush(this),0)}});var ae=$(6321),ve=$(9397),rt=$(3093),Ge=$(5137);const et=new D.GfV("ANGULARFIRE2_VERSION");class Nt{constructor(){return((Tt,It)=>{const ge=(0,se.getApps)(),he=[];return ge.forEach(Me=>{Me.container.getProvider(Tt).instances.forEach(De=>{he.includes(De)||he.push(De)})}),he})(pe)}}const pe="app-check";function re(){}class Fe{zone;delegate;constructor(It,ge=ke){this.zone=It,this.delegate=ge}now(){return this.delegate.now()}schedule(It,ge,he){const Me=this.zone;return this.delegate.schedule(function(De){Me.runGuarded(()=>{It.apply(this,[De])})},ge,he)}}class Ee{zone;task=null;constructor(It){this.zone=It}call(It,ge){const he=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",re,{},re,re)),ge.pipe((0,ve.b)({next:he,complete:he,error:he})).subscribe(It).add(he)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ue=(()=>{class Tt{ngZone;outsideAngular;insideAngular;constructor(ge){this.ngZone=ge,this.outsideAngular=ge.runOutsideAngular(()=>new Fe(Zone.current)),this.insideAngular=ge.run(()=>new Fe(Zone.current,ae.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(he){return new(he||Tt)(D.LFG(D.R0b))};static \u0275prov=D.Yz7({token:Tt,factory:Tt.\u0275fac,providedIn:"root"})}return Tt})();function Ze(){const Tt=globalThis.\u0275AngularFireScheduler;if(!Tt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Tt}function Gt(Tt){return Tt.pipe((0,rt.Q)(Ze().outsideAngular))}function _r(Tt){return function Qn(Tt){return function(ge){return(ge=ge.lift(new Ee(Tt.ngZone))).pipe((0,Ge.R)(Tt.outsideAngular),(0,rt.Q)(Tt.insideAngular))}}(Ze())(Tt)}},6593:(Ft,He,$)=>{$.d(He,{Dx:()=>We,b2:()=>Hn,q6:()=>Xt,se:()=>ot});var D=$(5879),se=$(6814);class j extends se.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Te extends j{static makeCurrent(){(0,se.HT)(new Te)}onAndCancel(Q,Z,Y){return Q.addEventListener(Z,Y),()=>{Q.removeEventListener(Z,Y)}}dispatchEvent(Q,Z){Q.dispatchEvent(Z)}remove(Q){Q.parentNode&&Q.parentNode.removeChild(Q)}createElement(Q,Z){return(Z=Z||this.getDefaultDocument()).createElement(Q)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Q){return Q.nodeType===Node.ELEMENT_NODE}isShadowRoot(Q){return Q instanceof DocumentFragment}getGlobalEventTarget(Q,Z){return"window"===Z?window:"document"===Z?Q:"body"===Z?Q.body:null}getBaseHref(Q){const Z=function ye(){return me=me||document.querySelector("base"),me?me.getAttribute("href"):null}();return null==Z?null:function V(K){Se=Se||document.createElement("a"),Se.setAttribute("href",K);const Q=Se.pathname;return"/"===Q.charAt(0)?Q:`/${Q}`}(Z)}resetBaseElement(){me=null}getUserAgent(){return window.navigator.userAgent}getCookie(Q){return(0,se.Mx)(document.cookie,Q)}}let Se,me=null,ie=(()=>{class K{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(Y){return new(Y||K)};static#t=this.\u0275prov=D.Yz7({token:K,factory:K.\u0275fac})}return K})();const ae=new D.OlP("EventManagerPlugins");let ve=(()=>{class K{constructor(Z,Y){this._zone=Y,this._eventNameToPlugin=new Map,Z.forEach(Ce=>{Ce.manager=this}),this._plugins=Z.slice().reverse()}addEventListener(Z,Y,Ce){return this._findPluginFor(Y).addEventListener(Z,Y,Ce)}getZone(){return this._zone}_findPluginFor(Z){let Y=this._eventNameToPlugin.get(Z);if(Y)return Y;if(Y=this._plugins.find(qe=>qe.supports(Z)),!Y)throw new D.vHH(5101,!1);return this._eventNameToPlugin.set(Z,Y),Y}static#e=this.\u0275fac=function(Y){return new(Y||K)(D.LFG(ae),D.LFG(D.R0b))};static#t=this.\u0275prov=D.Yz7({token:K,factory:K.\u0275fac})}return K})();class rt{constructor(Q){this._doc=Q}}const Ge="ng-app-id";let et=(()=>{class K{constructor(Z,Y,Ce,qe={}){this.doc=Z,this.appId=Y,this.nonce=Ce,this.platformId=qe,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,se.PM)(qe),this.resetHostNodes()}addStyles(Z){for(const Y of Z)1===this.changeUsageCount(Y,1)&&this.onStyleAdded(Y)}removeStyles(Z){for(const Y of Z)this.changeUsageCount(Y,-1)<=0&&this.onStyleRemoved(Y)}ngOnDestroy(){const Z=this.styleNodesInDOM;Z&&(Z.forEach(Y=>Y.remove()),Z.clear());for(const Y of this.getAllStyles())this.onStyleRemoved(Y);this.resetHostNodes()}addHost(Z){this.hostNodes.add(Z);for(const Y of this.getAllStyles())this.addStyleToHost(Z,Y)}removeHost(Z){this.hostNodes.delete(Z)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(Z){for(const Y of this.hostNodes)this.addStyleToHost(Y,Z)}onStyleRemoved(Z){const Y=this.styleRef;Y.get(Z)?.elements?.forEach(Ce=>Ce.remove()),Y.delete(Z)}collectServerRenderedStyles(){const Z=this.doc.head?.querySelectorAll(`style[${Ge}="${this.appId}"]`);if(Z?.length){const Y=new Map;return Z.forEach(Ce=>{null!=Ce.textContent&&Y.set(Ce.textContent,Ce)}),Y}return null}changeUsageCount(Z,Y){const Ce=this.styleRef;if(Ce.has(Z)){const qe=Ce.get(Z);return qe.usage+=Y,qe.usage}return Ce.set(Z,{usage:Y,elements:[]}),Y}getStyleElement(Z,Y){const Ce=this.styleNodesInDOM,qe=Ce?.get(Y);if(qe?.parentNode===Z)return Ce.delete(Y),qe.removeAttribute(Ge),qe;{const ft=this.doc.createElement("style");return this.nonce&&ft.setAttribute("nonce",this.nonce),ft.textContent=Y,this.platformIsServer&&ft.setAttribute(Ge,this.appId),ft}}addStyleToHost(Z,Y){const Ce=this.getStyleElement(Z,Y);Z.appendChild(Ce);const qe=this.styleRef,ft=qe.get(Y)?.elements;ft?ft.push(Ce):qe.set(Y,{elements:[Ce],usage:1})}resetHostNodes(){const Z=this.hostNodes;Z.clear(),Z.add(this.doc.head)}static#e=this.\u0275fac=function(Y){return new(Y||K)(D.LFG(se.K0),D.LFG(D.AFp),D.LFG(D.Ojb,8),D.LFG(D.Lbi))};static#t=this.\u0275prov=D.Yz7({token:K,factory:K.\u0275fac})}return K})();const nt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pt=/%COMP%/g,Fe=new D.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Ze(K,Q){return Q.map(Z=>Z.replace(pt,K))}let ot=(()=>{class K{constructor(Z,Y,Ce,qe,ft,Qt,rn,wt=null){this.eventManager=Z,this.sharedStylesHost=Y,this.appId=Ce,this.removeStylesOnCompDestroy=qe,this.doc=ft,this.platformId=Qt,this.ngZone=rn,this.nonce=wt,this.rendererByCompId=new Map,this.platformIsServer=(0,se.PM)(Qt),this.defaultRenderer=new ue(Z,ft,rn,this.platformIsServer)}createRenderer(Z,Y){if(!Z||!Y)return this.defaultRenderer;this.platformIsServer&&Y.encapsulation===D.ifc.ShadowDom&&(Y={...Y,encapsulation:D.ifc.Emulated});const Ce=this.getOrCreateRenderer(Z,Y);return Ce instanceof nn?Ce.applyToHost(Z):Ce instanceof An&&Ce.applyStyles(),Ce}getOrCreateRenderer(Z,Y){const Ce=this.rendererByCompId;let qe=Ce.get(Y.id);if(!qe){const ft=this.doc,Qt=this.ngZone,rn=this.eventManager,wt=this.sharedStylesHost,Ut=this.removeStylesOnCompDestroy,nr=this.platformIsServer;switch(Y.encapsulation){case D.ifc.Emulated:qe=new nn(rn,wt,Y,this.appId,Ut,ft,Qt,nr);break;case D.ifc.ShadowDom:return new Qn(rn,wt,Z,Y,ft,Qt,this.nonce,nr);default:qe=new An(rn,wt,Y,Ut,ft,Qt,nr)}Ce.set(Y.id,qe)}return qe}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(Y){return new(Y||K)(D.LFG(ve),D.LFG(et),D.LFG(D.AFp),D.LFG(Fe),D.LFG(se.K0),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(D.Ojb))};static#t=this.\u0275prov=D.Yz7({token:K,factory:K.\u0275fac})}return K})();class ue{constructor(Q,Z,Y,Ce){this.eventManager=Q,this.doc=Z,this.ngZone=Y,this.platformIsServer=Ce,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Q,Z){return Z?this.doc.createElementNS(nt[Z]||Z,Q):this.doc.createElement(Q)}createComment(Q){return this.doc.createComment(Q)}createText(Q){return this.doc.createTextNode(Q)}appendChild(Q,Z){(_r(Q)?Q.content:Q).appendChild(Z)}insertBefore(Q,Z,Y){Q&&(_r(Q)?Q.content:Q).insertBefore(Z,Y)}removeChild(Q,Z){Q&&Q.removeChild(Z)}selectRootElement(Q,Z){let Y="string"==typeof Q?this.doc.querySelector(Q):Q;if(!Y)throw new D.vHH(-5104,!1);return Z||(Y.textContent=""),Y}parentNode(Q){return Q.parentNode}nextSibling(Q){return Q.nextSibling}setAttribute(Q,Z,Y,Ce){if(Ce){Z=Ce+":"+Z;const qe=nt[Ce];qe?Q.setAttributeNS(qe,Z,Y):Q.setAttribute(Z,Y)}else Q.setAttribute(Z,Y)}removeAttribute(Q,Z,Y){if(Y){const Ce=nt[Y];Ce?Q.removeAttributeNS(Ce,Z):Q.removeAttribute(`${Y}:${Z}`)}else Q.removeAttribute(Z)}addClass(Q,Z){Q.classList.add(Z)}removeClass(Q,Z){Q.classList.remove(Z)}setStyle(Q,Z,Y,Ce){Ce&(D.JOm.DashCase|D.JOm.Important)?Q.style.setProperty(Z,Y,Ce&D.JOm.Important?"important":""):Q.style[Z]=Y}removeStyle(Q,Z,Y){Y&D.JOm.DashCase?Q.style.removeProperty(Z):Q.style[Z]=""}setProperty(Q,Z,Y){Q[Z]=Y}setValue(Q,Z){Q.nodeValue=Z}listen(Q,Z,Y){if("string"==typeof Q&&!(Q=(0,se.q)().getGlobalEventTarget(this.doc,Q)))throw new Error(`Unsupported event target ${Q} for event ${Z}`);return this.eventManager.addEventListener(Q,Z,this.decoratePreventDefault(Y))}decoratePreventDefault(Q){return Z=>{if("__ngUnwrap__"===Z)return Q;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>Q(Z)):Q(Z))&&Z.preventDefault()}}}function _r(K){return"TEMPLATE"===K.tagName&&void 0!==K.content}class Qn extends ue{constructor(Q,Z,Y,Ce,qe,ft,Qt,rn){super(Q,qe,ft,rn),this.sharedStylesHost=Z,this.hostEl=Y,this.shadowRoot=Y.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const wt=Ze(Ce.id,Ce.styles);for(const Ut of wt){const nr=document.createElement("style");Qt&&nr.setAttribute("nonce",Qt),nr.textContent=Ut,this.shadowRoot.appendChild(nr)}}nodeOrShadowRoot(Q){return Q===this.hostEl?this.shadowRoot:Q}appendChild(Q,Z){return super.appendChild(this.nodeOrShadowRoot(Q),Z)}insertBefore(Q,Z,Y){return super.insertBefore(this.nodeOrShadowRoot(Q),Z,Y)}removeChild(Q,Z){return super.removeChild(this.nodeOrShadowRoot(Q),Z)}parentNode(Q){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Q)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class An extends ue{constructor(Q,Z,Y,Ce,qe,ft,Qt,rn){super(Q,qe,ft,Qt),this.sharedStylesHost=Z,this.removeStylesOnCompDestroy=Ce,this.styles=rn?Ze(rn,Y.styles):Y.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class nn extends An{constructor(Q,Z,Y,Ce,qe,ft,Qt,rn){const wt=Ce+"-"+Y.id;super(Q,Z,Y,qe,ft,Qt,rn,wt),this.contentAttr=function Ee(K){return"_ngcontent-%COMP%".replace(pt,K)}(wt),this.hostAttr=function Ue(K){return"_nghost-%COMP%".replace(pt,K)}(wt)}applyToHost(Q){this.applyStyles(),this.setAttribute(Q,this.hostAttr,"")}createElement(Q,Z){const Y=super.createElement(Q,Z);return super.setAttribute(Y,this.contentAttr,""),Y}}let Tt=(()=>{class K extends rt{constructor(Z){super(Z)}supports(Z){return!0}addEventListener(Z,Y,Ce){return Z.addEventListener(Y,Ce,!1),()=>this.removeEventListener(Z,Y,Ce)}removeEventListener(Z,Y,Ce){return Z.removeEventListener(Y,Ce)}static#e=this.\u0275fac=function(Y){return new(Y||K)(D.LFG(se.K0))};static#t=this.\u0275prov=D.Yz7({token:K,factory:K.\u0275fac})}return K})();const It=["alt","control","meta","shift"],ge={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},he={alt:K=>K.altKey,control:K=>K.ctrlKey,meta:K=>K.metaKey,shift:K=>K.shiftKey};let Me=(()=>{class K extends rt{constructor(Z){super(Z)}supports(Z){return null!=K.parseEventName(Z)}addEventListener(Z,Y,Ce){const qe=K.parseEventName(Y),ft=K.eventCallback(qe.fullKey,Ce,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,se.q)().onAndCancel(Z,qe.domEventName,ft))}static parseEventName(Z){const Y=Z.toLowerCase().split("."),Ce=Y.shift();if(0===Y.length||"keydown"!==Ce&&"keyup"!==Ce)return null;const qe=K._normalizeKey(Y.pop());let ft="",Qt=Y.indexOf("code");if(Qt>-1&&(Y.splice(Qt,1),ft="code."),It.forEach(wt=>{const Ut=Y.indexOf(wt);Ut>-1&&(Y.splice(Ut,1),ft+=wt+".")}),ft+=qe,0!=Y.length||0===qe.length)return null;const rn={};return rn.domEventName=Ce,rn.fullKey=ft,rn}static matchEventFullKeyCode(Z,Y){let Ce=ge[Z.key]||Z.key,qe="";return Y.indexOf("code.")>-1&&(Ce=Z.code,qe="code."),!(null==Ce||!Ce)&&(Ce=Ce.toLowerCase()," "===Ce?Ce="space":"."===Ce&&(Ce="dot"),It.forEach(ft=>{ft!==Ce&&(0,he[ft])(Z)&&(qe+=ft+".")}),qe+=Ce,qe===Y)}static eventCallback(Z,Y,Ce){return qe=>{K.matchEventFullKeyCode(qe,Z)&&Ce.runGuarded(()=>Y(qe))}}static _normalizeKey(Z){return"esc"===Z?"escape":Z}static#e=this.\u0275fac=function(Y){return new(Y||K)(D.LFG(se.K0))};static#t=this.\u0275prov=D.Yz7({token:K,factory:K.\u0275fac})}return K})();const Xt=(0,D.eFA)(D._c5,"browser",[{provide:D.Lbi,useValue:se.bD},{provide:D.g9A,useValue:function at(){Te.makeCurrent()},multi:!0},{provide:se.K0,useFactory:function St(){return(0,D.RDi)(document),document},deps:[]}]),Wn=new D.OlP(""),Dn=[{provide:D.rWj,useClass:class ke{addToWindow(Q){D.dqk.getAngularTestability=(Y,Ce=!0)=>{const qe=Q.findTestabilityInTree(Y,Ce);if(null==qe)throw new D.vHH(5103,!1);return qe},D.dqk.getAllAngularTestabilities=()=>Q.getAllTestabilities(),D.dqk.getAllAngularRootElements=()=>Q.getAllRootElements(),D.dqk.frameworkStabilizers||(D.dqk.frameworkStabilizers=[]),D.dqk.frameworkStabilizers.push(Y=>{const Ce=D.dqk.getAllAngularTestabilities();let qe=Ce.length,ft=!1;const Qt=function(rn){ft=ft||rn,qe--,0==qe&&Y(ft)};Ce.forEach(rn=>{rn.whenStable(Qt)})})}findTestabilityInTree(Q,Z,Y){return null==Z?null:Q.getTestability(Z)??(Y?(0,se.q)().isShadowRoot(Z)?this.findTestabilityInTree(Q,Z.host,!0):this.findTestabilityInTree(Q,Z.parentElement,!0):null)}},deps:[]},{provide:D.lri,useClass:D.dDg,deps:[D.R0b,D.eoX,D.rWj]},{provide:D.dDg,useClass:D.dDg,deps:[D.R0b,D.eoX,D.rWj]}],bn=[{provide:D.zSh,useValue:"root"},{provide:D.qLn,useFactory:function Vn(){return new D.qLn},deps:[]},{provide:ae,useClass:Tt,multi:!0,deps:[se.K0,D.R0b,D.Lbi]},{provide:ae,useClass:Me,multi:!0,deps:[se.K0]},ot,et,ve,{provide:D.FYo,useExisting:ot},{provide:se.JF,useClass:ie,deps:[]},[]];let Hn=(()=>{class K{constructor(Z){}static withServerTransition(Z){return{ngModule:K,providers:[{provide:D.AFp,useValue:Z.appId}]}}static#e=this.\u0275fac=function(Y){return new(Y||K)(D.LFG(Wn,12))};static#t=this.\u0275mod=D.oAB({type:K});static#n=this.\u0275inj=D.cJS({providers:[...bn,...Dn],imports:[se.ez,D.hGG]})}return K})(),We=(()=>{class K{constructor(Z){this._doc=Z}getTitle(){return this._doc.title}setTitle(Z){this._doc.title=Z||""}static#e=this.\u0275fac=function(Y){return new(Y||K)(D.LFG(se.K0))};static#t=this.\u0275prov=D.Yz7({token:K,factory:function(Y){let Ce=null;return Ce=Y?new Y:function fe(){return new We((0,D.LFG)(se.K0))}(),Ce},providedIn:"root"})}return K})();typeof window<"u"&&window},3228:(Ft,He,$)=>{$.d(He,{gz:()=>hi,wm:()=>Xe,F0:()=>fr,rH:()=>Bt,Bz:()=>lc,lC:()=>Cs,eV:()=>or});var D=$(5879),se=$(5592),j=$(4674),me=$(2459),ye=$(2096),Se=$(5619);const{isArray:V}=Array,{getPrototypeOf:ke,prototype:ie,keys:ae}=Object;var Ge=$(2737),et=$(7398);const{isArray:nt}=Array;var Nt=$(4564),re=$(8251),Fe=$(7103);function Ee(...w){const b=(0,Nt.yG)(w),I=(0,Nt.jO)(w),{args:R,keys:N}=function ve(w){if(1===w.length){const b=w[0];if(V(b))return{args:b,keys:null};if(function rt(w){return w&&"object"==typeof w&&ke(w)===ie}(b)){const I=ae(b);return{args:I.map(R=>b[R]),keys:I}}}return{args:w,keys:null}}(w);if(0===R.length)return(0,me.D)([],b);const q=new se.y(function Ue(w,b,I=Ge.y){return R=>{Ze(b,()=>{const{length:N}=w,q=new Array(N);let te=N,je=N;for(let Re=0;Re<N;Re++)Ze(b,()=>{const Ct=(0,me.D)(w[Re],b);let hn=!1;Ct.subscribe((0,re.x)(R,pr=>{q[Re]=pr,hn||(hn=!0,je--),je||R.next(I(q.slice()))},()=>{--te||R.complete()}))},R)},R)}}(R,b,N?te=>function pe(w,b){return w.reduce((I,R,N)=>(I[R]=b[N],I),{})}(N,te):Ge.y));return I?q.pipe(function ct(w){return(0,et.U)(b=>function pt(w,b){return nt(b)?w(...b):w(b)}(w,b))}(I)):q}function Ze(w,b,I){w?(0,Fe.f)(I,w,b):b()}var ot=$(6973),ue=$(5211),Gt=$(4829);function gt(w){return new se.y(b=>{(0,Gt.Xf)(w()).subscribe(b)})}var _r=$(8407);function Qn(w,b){const I=(0,j.m)(w)?w:()=>w,R=N=>N.error(I());return new se.y(b?N=>b.schedule(R,0,N):R)}var An=$(6232),nn=$(7394),Tt=$(9360);function It(){return(0,Tt.e)((w,b)=>{let I=null;w._refCount++;const R=(0,re.x)(b,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(I=null);const N=w._connection,q=I;I=null,N&&(!q||N===q)&&N.unsubscribe(),b.unsubscribe()});w.subscribe(R),R.closed||(I=w.connect())})}class ge extends se.y{constructor(b,I){super(),this.source=b,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,Tt.A)(b)&&(this.lift=b.lift)}_subscribe(b){return this.getSubject().subscribe(b)}getSubject(){const b=this._subject;return(!b||b.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:b}=this;this._subject=this._connection=null,b?.unsubscribe()}connect(){let b=this._connection;if(!b){b=this._connection=new nn.w0;const I=this.getSubject();b.add(this.source.subscribe((0,re.x)(I,void 0,()=>{this._teardown(),I.complete()},R=>{this._teardown(),I.error(R)},()=>this._teardown()))),b.closed&&(this._connection=null,b=nn.w0.EMPTY)}return b}refCount(){return It()(this)}}var he=$(8645),Me=$(6814),we=$(4664),De=$(8180),Le=$(7921),_t=$(2181),at=$(1631),Vn=$(1374);function St(w,b){return(0,j.m)(b)?(0,at.z)(w,b,1):(0,at.z)(w,1)}var un=$(9397);function Xt(w){return(0,Tt.e)((b,I)=>{let q,R=null,N=!1;R=b.subscribe((0,re.x)(I,void 0,void 0,te=>{q=(0,Gt.Xf)(w(te,Xt(w)(b))),R?(R.unsubscribe(),R=null,q.subscribe(I)):N=!0})),N&&(R.unsubscribe(),R=null,q.subscribe(I))})}var Wn=$(6699),Dn=$(3572);function bn(w){return w<=0?()=>An.E:(0,Tt.e)((b,I)=>{let R=[];b.subscribe((0,re.x)(I,N=>{R.push(N),w<R.length&&R.shift()},()=>{for(const N of R)I.next(N);I.complete()},void 0,()=>{R=null}))})}var Hn=$(3026);function Qe(w){return(0,Tt.e)((b,I)=>{try{b.subscribe(I)}finally{I.add(w)}})}var fe=$(2420),dt=$(7537),cn=$(6593);const Je="primary",en=Symbol("RouteTitle");class on{constructor(b){this.params=b||{}}has(b){return Object.prototype.hasOwnProperty.call(this.params,b)}get(b){if(this.has(b)){const I=this.params[b];return Array.isArray(I)?I[0]:I}return null}getAll(b){if(this.has(b)){const I=this.params[b];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function Nn(w){return new on(w)}function Yn(w,b,I){const R=I.path.split("/");if(R.length>w.length||"full"===I.pathMatch&&(b.hasChildren()||R.length<w.length))return null;const N={};for(let q=0;q<R.length;q++){const te=R[q],je=w[q];if(te.startsWith(":"))N[te.substring(1)]=je;else if(te!==je.path)return null}return{consumed:w.slice(0,R.length),posParams:N}}function Sn(w,b){const I=w?Object.keys(w):void 0,R=b?Object.keys(b):void 0;if(!I||!R||I.length!=R.length)return!1;let N;for(let q=0;q<I.length;q++)if(N=I[q],!Rr(w[N],b[N]))return!1;return!0}function Rr(w,b){if(Array.isArray(w)&&Array.isArray(b)){if(w.length!==b.length)return!1;const I=[...w].sort(),R=[...b].sort();return I.every((N,q)=>R[q]===N)}return w===b}function xo(w){return w.length>0?w[w.length-1]:null}function kt(w){return function Te(w){return!!w&&(w instanceof se.y||(0,j.m)(w.lift)&&(0,j.m)(w.subscribe))}(w)?w:(0,D.QGY)(w)?(0,me.D)(Promise.resolve(w)):(0,ye.of)(w)}const Fs={exact:function Gs(w,b,I){if(!wi(w.segments,b.segments)||!Xr(w.segments,b.segments,I)||w.numberOfChildren!==b.numberOfChildren)return!1;for(const R in b.children)if(!w.children[R]||!Gs(w.children[R],b.children[R],I))return!1;return!0},subset:Vs},En={exact:function Ti(w,b){return Sn(w,b)},subset:function Wr(w,b){return Object.keys(b).length<=Object.keys(w).length&&Object.keys(b).every(I=>Rr(w[I],b[I]))},ignored:()=>!0};function Gr(w,b,I){return Fs[I.paths](w.root,b.root,I.matrixParams)&&En[I.queryParams](w.queryParams,b.queryParams)&&!("exact"===I.fragment&&w.fragment!==b.fragment)}function Vs(w,b,I){return qr(w,b,b.segments,I)}function qr(w,b,I,R){if(w.segments.length>I.length){const N=w.segments.slice(0,I.length);return!(!wi(N,I)||b.hasChildren()||!Xr(N,I,R))}if(w.segments.length===I.length){if(!wi(w.segments,I)||!Xr(w.segments,I,R))return!1;for(const N in b.children)if(!w.children[N]||!Vs(w.children[N],b.children[N],R))return!1;return!0}{const N=I.slice(0,w.segments.length),q=I.slice(w.segments.length);return!!(wi(w.segments,N)&&Xr(w.segments,N,R)&&w.children[Je])&&qr(w.children[Je],b,q,R)}}function Xr(w,b,I){return b.every((R,N)=>En[I](w[N].parameters,R.parameters))}class ei{constructor(b=new Cn([],{}),I={},R=null){this.root=b,this.queryParams=I,this.fragment=R}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nn(this.queryParams)),this._queryParamMap}toString(){return Z.serialize(this)}}class Cn{constructor(b,I){this.segments=b,this.children=I,this.parent=null,Object.values(I).forEach(R=>R.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Y(this)}}class ki{constructor(b,I){this.path=b,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=Nn(this.parameters)),this._parameterMap}toString(){return nr(this)}}function wi(w,b){return w.length===b.length&&w.every((I,R)=>I.path===b[R].path)}let K=(()=>{class w{static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:function(){return new Q},providedIn:"root"})}return w})();class Q{parse(b){const I=new yr(b);return new ei(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(b){const I=`/${Ce(b.root,!0)}`,R=function lo(w){const b=Object.keys(w).map(I=>{const R=w[I];return Array.isArray(R)?R.map(N=>`${ft(I)}=${ft(N)}`).join("&"):`${ft(I)}=${ft(R)}`}).filter(I=>!!I);return b.length?`?${b.join("&")}`:""}(b.queryParams);return`${I}${R}${"string"==typeof b.fragment?`#${function Qt(w){return encodeURI(w)}(b.fragment)}`:""}`}}const Z=new Q;function Y(w){return w.segments.map(b=>nr(b)).join("/")}function Ce(w,b){if(!w.hasChildren())return Y(w);if(b){const I=w.children[Je]?Ce(w.children[Je],!1):"",R=[];return Object.entries(w.children).forEach(([N,q])=>{N!==Je&&R.push(`${N}:${Ce(q,!1)}`)}),R.length>0?`${I}(${R.join("//")})`:I}{const I=function de(w,b){let I=[];return Object.entries(w.children).forEach(([R,N])=>{R===Je&&(I=I.concat(b(N,R)))}),Object.entries(w.children).forEach(([R,N])=>{R!==Je&&(I=I.concat(b(N,R)))}),I}(w,(R,N)=>N===Je?[Ce(w.children[Je],!1)]:[`${N}:${Ce(R,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[Je]?`${Y(w)}/${I[0]}`:`${Y(w)}/(${I.join("//")})`}}function qe(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ft(w){return qe(w).replace(/%3B/gi,";")}function rn(w){return qe(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wt(w){return decodeURIComponent(w)}function Ut(w){return wt(w.replace(/\+/g,"%20"))}function nr(w){return`${rn(w.path)}${function li(w){return Object.keys(w).map(b=>`;${rn(b)}=${rn(w[b])}`).join("")}(w.parameters)}`}const Za=/^[^\/()?;#]+/;function ze(w){const b=w.match(Za);return b?b[0]:""}const be=/^[^\/()?;=#]+/,$t=/^[^=?&#]+/,Pt=/^[^&#]+/;class yr{constructor(b){this.url=b,this.remaining=b}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Cn([],{}):new Cn([],this.parseChildren())}parseQueryParams(){const b={};if(this.consumeOptional("?"))do{this.parseQueryParam(b)}while(this.consumeOptional("&"));return b}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const b=[];for(this.peekStartsWith("(")||b.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),b.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let R={};return this.peekStartsWith("(")&&(R=this.parseParens(!1)),(b.length>0||Object.keys(I).length>0)&&(R[Je]=new Cn(b,I)),R}parseSegment(){const b=ze(this.remaining);if(""===b&&this.peekStartsWith(";"))throw new D.vHH(4009,!1);return this.capture(b),new ki(wt(b),this.parseMatrixParams())}parseMatrixParams(){const b={};for(;this.consumeOptional(";");)this.parseParam(b);return b}parseParam(b){const I=function lt(w){const b=w.match(be);return b?b[0]:""}(this.remaining);if(!I)return;this.capture(I);let R="";if(this.consumeOptional("=")){const N=ze(this.remaining);N&&(R=N,this.capture(R))}b[wt(I)]=wt(R)}parseQueryParam(b){const I=function tn(w){const b=w.match($t);return b?b[0]:""}(this.remaining);if(!I)return;this.capture(I);let R="";if(this.consumeOptional("=")){const te=function sn(w){const b=w.match(Pt);return b?b[0]:""}(this.remaining);te&&(R=te,this.capture(R))}const N=Ut(I),q=Ut(R);if(b.hasOwnProperty(N)){let te=b[N];Array.isArray(te)||(te=[te],b[N]=te),te.push(q)}else b[N]=q}parseParens(b){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const R=ze(this.remaining),N=this.remaining[R.length];if("/"!==N&&")"!==N&&";"!==N)throw new D.vHH(4010,!1);let q;R.indexOf(":")>-1?(q=R.slice(0,R.indexOf(":")),this.capture(q),this.capture(":")):b&&(q=Je);const te=this.parseChildren();I[q]=1===Object.keys(te).length?te[Je]:new Cn([],te),this.consumeOptional("//")}return I}peekStartsWith(b){return this.remaining.startsWith(b)}consumeOptional(b){return!!this.peekStartsWith(b)&&(this.remaining=this.remaining.substring(b.length),!0)}capture(b){if(!this.consumeOptional(b))throw new D.vHH(4011,!1)}}function vr(w){return w.segments.length>0?new Cn([],{[Je]:w}):w}function is(w){const b={};for(const R of Object.keys(w.children)){const q=is(w.children[R]);if(R===Je&&0===q.segments.length&&q.hasChildren())for(const[te,je]of Object.entries(q.children))b[te]=je;else(q.segments.length>0||q.hasChildren())&&(b[R]=q)}return function di(w){if(1===w.numberOfChildren&&w.children[Je]){const b=w.children[Je];return new Cn(w.segments.concat(b.segments),b.children)}return w}(new Cn(w.segments,b))}function Li(w){return w instanceof ei}function Oo(w){let b;const N=vr(function I(q){const te={};for(const Re of q.children){const Ct=I(Re);te[Re.outlet]=Ct}const je=new Cn(q.url,te);return q===w&&(b=je),je}(w.root));return b??N}function Zo(w,b,I,R){let N=w;for(;N.parent;)N=N.parent;if(0===b.length)return zn(N,N,N,I,R);const q=function ss(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new zi(!0,0,w);let b=0,I=!1;const R=w.reduce((N,q,te)=>{if("object"==typeof q&&null!=q){if(q.outlets){const je={};return Object.entries(q.outlets).forEach(([Re,Ct])=>{je[Re]="string"==typeof Ct?Ct.split("/"):Ct}),[...N,{outlets:je}]}if(q.segmentPath)return[...N,q.segmentPath]}return"string"!=typeof q?[...N,q]:0===te?(q.split("/").forEach((je,Re)=>{0==Re&&"."===je||(0==Re&&""===je?I=!0:".."===je?b++:""!=je&&N.push(je))}),N):[...N,q]},[]);return new zi(I,b,R)}(b);if(q.toRoot())return zn(N,N,new Cn([],{}),I,R);const te=function No(w,b,I){if(w.isAbsolute)return new Ws(b,!0,0);if(!I)return new Ws(b,!1,NaN);if(null===I.parent)return new Ws(I,!0,0);const R=ws(w.commands[0])?0:1;return function Cu(w,b,I){let R=w,N=b,q=I;for(;q>N;){if(q-=N,R=R.parent,!R)throw new D.vHH(4005,!1);N=R.segments.length}return new Ws(R,!1,N-q)}(I,I.segments.length-1+R,w.numberOfDoubleDots)}(q,N,w),je=te.processChildren?qs(te.segmentGroup,te.index,q.commands):os(te.segmentGroup,te.index,q.commands);return zn(N,te.segmentGroup,je,I,R)}function ws(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function ho(w){return"object"==typeof w&&null!=w&&w.outlets}function zn(w,b,I,R,N){let te,q={};R&&Object.entries(R).forEach(([Re,Ct])=>{q[Re]=Array.isArray(Ct)?Ct.map(hn=>`${hn}`):`${Ct}`}),te=w===b?I:Qo(w,b,I);const je=vr(is(te));return new ei(je,q,N)}function Qo(w,b,I){const R={};return Object.entries(w.children).forEach(([N,q])=>{R[N]=q===b?I:Qo(q,b,I)}),new Cn(w.segments,R)}class zi{constructor(b,I,R){if(this.isAbsolute=b,this.numberOfDoubleDots=I,this.commands=R,b&&R.length>0&&ws(R[0]))throw new D.vHH(4003,!1);const N=R.find(ho);if(N&&N!==xo(R))throw new D.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ws{constructor(b,I,R){this.segmentGroup=b,this.processChildren=I,this.index=R}}function os(w,b,I){if(w||(w=new Cn([],{})),0===w.segments.length&&w.hasChildren())return qs(w,b,I);const R=function va(w,b,I){let R=0,N=b;const q={match:!1,pathIndex:0,commandIndex:0};for(;N<w.segments.length;){if(R>=I.length)return q;const te=w.segments[N],je=I[R];if(ho(je))break;const Re=`${je}`,Ct=R<I.length-1?I[R+1]:null;if(N>0&&void 0===Re)break;if(Re&&Ct&&"object"==typeof Ct&&void 0===Ct.outlets){if(!ni(Re,Ct,te))return q;R+=2}else{if(!ni(Re,{},te))return q;R++}N++}return{match:!0,pathIndex:N,commandIndex:R}}(w,b,I),N=I.slice(R.commandIndex);if(R.match&&R.pathIndex<w.segments.length){const q=new Cn(w.segments.slice(0,R.pathIndex),{});return q.children[Je]=new Cn(w.segments.slice(R.pathIndex),w.children),qs(q,0,N)}return R.match&&0===N.length?new Cn(w.segments,{}):R.match&&!w.hasChildren()?Us(w,b,I):R.match?qs(w,0,N):Us(w,b,I)}function qs(w,b,I){if(0===I.length)return new Cn(w.segments,{});{const R=function ti(w){return ho(w[0])?w[0].outlets:{[Je]:w}}(I),N={};if(Object.keys(R).some(q=>q!==Je)&&w.children[Je]&&1===w.numberOfChildren&&0===w.children[Je].segments.length){const q=qs(w.children[Je],b,I);return new Cn(w.segments,q.children)}return Object.entries(R).forEach(([q,te])=>{"string"==typeof te&&(te=[te]),null!==te&&(N[q]=os(w.children[q],b,te))}),Object.entries(w.children).forEach(([q,te])=>{void 0===R[q]&&(N[q]=te)}),new Cn(w.segments,N)}}function Us(w,b,I){const R=w.segments.slice(0,b);let N=0;for(;N<I.length;){const q=I[N];if(ho(q)){const Re=Yo(q.outlets);return new Cn(R,Re)}if(0===N&&ws(I[0])){R.push(new ki(w.segments[b].path,Xu(I[0]))),N++;continue}const te=ho(q)?q.outlets[Je]:`${q}`,je=N<I.length-1?I[N+1]:null;te&&je&&ws(je)?(R.push(new ki(te,Xu(je))),N+=2):(R.push(new ki(te,{})),N++)}return new Cn(R,{})}function Yo(w){const b={};return Object.entries(w).forEach(([I,R])=>{"string"==typeof R&&(R=[R]),null!==R&&(b[I]=Us(new Cn([],{}),0,R))}),b}function Xu(w){const b={};return Object.entries(w).forEach(([I,R])=>b[I]=`${R}`),b}function ni(w,b,I){return w==I.path&&Sn(b,I.parameters)}const Ea="imperative";class Er{constructor(b,I){this.id=b,this.url=I}}class Ks extends Er{constructor(b,I,R="imperative",N=null){super(b,I),this.type=0,this.navigationTrigger=R,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Gi extends Er{constructor(b,I,R){super(b,I),this.urlAfterRedirects=R,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Zs extends Er{constructor(b,I,R,N){super(b,I),this.reason=R,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fo extends Er{constructor(b,I,R,N){super(b,I),this.reason=R,this.code=N,this.type=16}}class Jo extends Er{constructor(b,I,R,N){super(b,I),this.error=R,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Wi extends Er{constructor(b,I,R,N){super(b,I),this.urlAfterRedirects=R,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qa extends Er{constructor(b,I,R,N){super(b,I),this.urlAfterRedirects=R,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xo extends Er{constructor(b,I,R,N,q){super(b,I),this.urlAfterRedirects=R,this.state=N,this.shouldActivate=q,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ri extends Er{constructor(b,I,R,N){super(b,I),this.urlAfterRedirects=R,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qs extends Er{constructor(b,I,R,N){super(b,I),this.urlAfterRedirects=R,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rn{constructor(b){this.route=b,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ir{constructor(b){this.route=b,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Di{constructor(b){this.snapshot=b,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bs{constructor(b){this.snapshot=b,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ci{constructor(b){this.snapshot=b,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ai{constructor(b){this.snapshot=b,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ko{constructor(b,I,R){this.routerEvent=b,this.position=I,this.anchor=R,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ys{}class Ya{constructor(b){this.url=b}}class ur{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Et,this.attachRef=null}}let Et=(()=>{class w{constructor(){this.contexts=new Map}onChildOutletCreated(I,R){const N=this.getOrCreateContext(I);N.outlet=R,this.contexts.set(I,N)}onChildOutletDestroyed(I){const R=this.getContext(I);R&&(R.outlet=null,R.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let R=this.getContext(I);return R||(R=new ur,this.contexts.set(I,R)),R}getContext(I){return this.contexts.get(I)||null}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();class gn{constructor(b){this._root=b}get root(){return this._root.value}parent(b){const I=this.pathFromRoot(b);return I.length>1?I[I.length-2]:null}children(b){const I=Un(b,this._root);return I?I.children.map(R=>R.value):[]}firstChild(b){const I=Un(b,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(b){const I=kr(b,this._root);return I.length<2?[]:I[I.length-2].children.map(N=>N.value).filter(N=>N!==b)}pathFromRoot(b){return kr(b,this._root).map(I=>I.value)}}function Un(w,b){if(w===b.value)return b;for(const I of b.children){const R=Un(w,I);if(R)return R}return null}function kr(w,b){if(w===b.value)return[b];for(const I of b.children){const R=kr(w,I);if(R.length)return R.unshift(b),R}return[]}class Si{constructor(b,I){this.value=b,this.children=I}toString(){return`TreeNode(${this.value})`}}function jr(w){const b={};return w&&w.children.forEach(I=>b[I.value.outlet]=I),b}class Js extends gn{constructor(b,I){super(b),this.snapshot=I,Pr(this,b)}toString(){return this.snapshot.toString()}}function Tr(w,b){const I=function as(w,b){const te=new po([],{},{},"",{},Je,b,null,{});return new ii("",new Si(te,[]))}(0,b),R=new Se.X([new ki("",{})]),N=new Se.X({}),q=new Se.X({}),te=new Se.X({}),je=new Se.X(""),Re=new hi(R,N,te,je,q,Je,b,I.root);return Re.snapshot=I.root,new Js(new Si(Re,[]),I)}class hi{constructor(b,I,R,N,q,te,je,Re){this.urlSubject=b,this.paramsSubject=I,this.queryParamsSubject=R,this.fragmentSubject=N,this.dataSubject=q,this.outlet=te,this.component=je,this._futureSnapshot=Re,this.title=this.dataSubject?.pipe((0,et.U)(Ct=>Ct[en]))??(0,ye.of)(void 0),this.url=b,this.params=I,this.queryParams=R,this.fragment=N,this.data=q}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,et.U)(b=>Nn(b)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,et.U)(b=>Nn(b)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Zt(w,b="emptyOnly"){const I=w.pathFromRoot;let R=0;if("always"!==b)for(R=I.length-1;R>=1;){const N=I[R],q=I[R-1];if(N.routeConfig&&""===N.routeConfig.path)R--;else{if(q.component)break;R--}}return function qi(w){return w.reduce((b,I)=>({params:{...b.params,...I.params},data:{...b.data,...I.data},resolve:{...I.data,...b.resolve,...I.routeConfig?.data,...I._resolvedData}}),{params:{},data:{},resolve:{}})}(I.slice(R))}class po{get title(){return this.data?.[en]}constructor(b,I,R,N,q,te,je,Re,Ct){this.url=b,this.params=I,this.queryParams=R,this.fragment=N,this.data=q,this.outlet=te,this.component=je,this.routeConfig=Re,this._resolve=Ct}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Nn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(R=>R.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ii extends gn{constructor(b,I){super(I),this.url=b,Pr(this,I)}toString(){return Kn(this._root)}}function Pr(w,b){b.value._routerState=w,b.children.forEach(I=>Pr(w,I))}function Kn(w){const b=w.children.length>0?` { ${w.children.map(Kn).join(", ")} } `:"";return`${w.value}${b}`}function Ds(w){if(w.snapshot){const b=w.snapshot,I=w._futureSnapshot;w.snapshot=I,Sn(b.queryParams,I.queryParams)||w.queryParamsSubject.next(I.queryParams),b.fragment!==I.fragment&&w.fragmentSubject.next(I.fragment),Sn(b.params,I.params)||w.paramsSubject.next(I.params),function ci(w,b){if(w.length!==b.length)return!1;for(let I=0;I<w.length;++I)if(!Sn(w[I],b[I]))return!1;return!0}(b.url,I.url)||w.urlSubject.next(I.url),Sn(b.data,I.data)||w.dataSubject.next(I.data)}else w.snapshot=w._futureSnapshot,w.dataSubject.next(w._futureSnapshot.data)}function Kr(w,b){const I=Sn(w.params,b.params)&&function Ts(w,b){return wi(w,b)&&w.every((I,R)=>Sn(I.parameters,b[R].parameters))}(w.url,b.url);return I&&!(!w.parent!=!b.parent)&&(!w.parent||Kr(w.parent,b.parent))}let Cs=(()=>{class w{constructor(){this.activated=null,this._activatedRoute=null,this.name=Je,this.activateEvents=new D.vpe,this.deactivateEvents=new D.vpe,this.attachEvents=new D.vpe,this.detachEvents=new D.vpe,this.parentContexts=(0,D.f3M)(Et),this.location=(0,D.f3M)(D.s_b),this.changeDetector=(0,D.f3M)(D.sBO),this.environmentInjector=(0,D.f3M)(D.lqb),this.inputBinder=(0,D.f3M)(fs,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(I){if(I.name){const{firstChange:R,previousValue:N}=I.name;if(R)return;this.isTrackedInParentContexts(N)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(N)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(I){return this.parentContexts.getContext(I)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const I=this.parentContexts.getContext(this.name);I?.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new D.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new D.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new D.vHH(4012,!1);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,R){this.activated=I,this._activatedRoute=R,this.location.insert(I.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,R){if(this.isActivated)throw new D.vHH(4013,!1);this._activatedRoute=I;const N=this.location,te=I.snapshot.component,je=this.parentContexts.getOrCreateContext(this.name).children,Re=new Ja(I,je,N.injector);this.activated=N.createComponent(te,{index:N.length,injector:Re,environmentInjector:R??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275dir=D.lG2({type:w,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[D.TTD]})}return w})();class Ja{constructor(b,I,R){this.route=b,this.childContexts=I,this.parent=R}get(b,I){return b===hi?this.route:b===Et?this.childContexts:this.parent.get(b,I)}}const fs=new D.OlP("");let As=(()=>{class w{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(I){this.unsubscribeFromRouteData(I),this.subscribeToRouteData(I)}unsubscribeFromRouteData(I){this.outletDataSubscriptions.get(I)?.unsubscribe(),this.outletDataSubscriptions.delete(I)}subscribeToRouteData(I){const{activatedRoute:R}=I,N=Ee([R.queryParams,R.params,R.data]).pipe((0,we.w)(([q,te,je],Re)=>(je={...q,...te,...je},0===Re?(0,ye.of)(je):Promise.resolve(je)))).subscribe(q=>{if(!I.isActivated||!I.activatedComponentRef||I.activatedRoute!==R||null===R.component)return void this.unsubscribeFromRouteData(I);const te=(0,D.qFp)(R.component);if(te)for(const{templateName:je}of te.inputs)I.activatedComponentRef.setInput(je,q[je]);else this.unsubscribeFromRouteData(I)});this.outletDataSubscriptions.set(I,N)}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac})}return w})();function Fi(w,b,I){if(I&&w.shouldReuseRoute(b.value,I.value.snapshot)){const R=I.value;R._futureSnapshot=b.value;const N=function Pn(w,b,I){return b.children.map(R=>{for(const N of I.children)if(w.shouldReuseRoute(R.value,N.value.snapshot))return Fi(w,R,N);return Fi(w,R)})}(w,b,I);return new Si(R,N)}{if(w.shouldAttach(b.value)){const q=w.retrieve(b.value);if(null!==q){const te=q.route;return te.value._futureSnapshot=b.value,te.children=b.children.map(je=>Fi(w,je)),te}}const R=function Su(w){return new hi(new Se.X(w.url),new Se.X(w.params),new Se.X(w.queryParams),new Se.X(w.fragment),new Se.X(w.data),w.outlet,w.component,w)}(b.value),N=b.children.map(q=>Fi(w,q));return new Si(R,N)}}const Vi="ngNavigationCancelingError";function Ia(w,b){const{redirectTo:I,navigationBehaviorOptions:R}=Li(b)?{redirectTo:b,navigationBehaviorOptions:void 0}:b,N=Ki(!1,0,b);return N.url=I,N.navigationBehaviorOptions=R,N}function Ki(w,b,I){const R=new Error("NavigationCancelingError: "+(w||""));return R[Vi]=!0,R.cancellationCode=b,I&&(R.url=I),R}function fi(w){return w&&w[Vi]}let Ss=(()=>{class w{static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275cmp=D.Xpm({type:w,selectors:[["ng-component"]],standalone:!0,features:[D.jDz],decls:1,vars:0,template:function(R,N){1&R&&D._UZ(0,"router-outlet")},dependencies:[Cs],encapsulation:2})}return w})();function Ta(w){const b=w.children&&w.children.map(Ta),I=b?{...w,children:b}:{...w};return!I.component&&!I.loadComponent&&(b||I.loadChildren)&&I.outlet&&I.outlet!==Je&&(I.component=Ss),I}function Vr(w){return w.outlet||Je}function ea(w){if(!w)return null;if(w.routeConfig?._injector)return w.routeConfig._injector;for(let b=w.parent;b;b=b.parent){const I=b.routeConfig;if(I?._loadedInjector)return I._loadedInjector;if(I?._injector)return I._injector}return null}class eu{constructor(b,I,R,N,q){this.routeReuseStrategy=b,this.futureState=I,this.currState=R,this.forwardEvent=N,this.inputBindingEnabled=q}activate(b){const I=this.futureState._root,R=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,R,b),Ds(this.futureState.root),this.activateChildRoutes(I,R,b)}deactivateChildRoutes(b,I,R){const N=jr(I);b.children.forEach(q=>{const te=q.value.outlet;this.deactivateRoutes(q,N[te],R),delete N[te]}),Object.values(N).forEach(q=>{this.deactivateRouteAndItsChildren(q,R)})}deactivateRoutes(b,I,R){const N=b.value,q=I?I.value:null;if(N===q)if(N.component){const te=R.getContext(N.outlet);te&&this.deactivateChildRoutes(b,I,te.children)}else this.deactivateChildRoutes(b,I,R);else q&&this.deactivateRouteAndItsChildren(I,R)}deactivateRouteAndItsChildren(b,I){b.value.component&&this.routeReuseStrategy.shouldDetach(b.value.snapshot)?this.detachAndStoreRouteSubtree(b,I):this.deactivateRouteAndOutlet(b,I)}detachAndStoreRouteSubtree(b,I){const R=I.getContext(b.value.outlet),N=R&&b.value.component?R.children:I,q=jr(b);for(const te of Object.keys(q))this.deactivateRouteAndItsChildren(q[te],N);if(R&&R.outlet){const te=R.outlet.detach(),je=R.children.onOutletDeactivated();this.routeReuseStrategy.store(b.value.snapshot,{componentRef:te,route:b,contexts:je})}}deactivateRouteAndOutlet(b,I){const R=I.getContext(b.value.outlet),N=R&&b.value.component?R.children:I,q=jr(b);for(const te of Object.keys(q))this.deactivateRouteAndItsChildren(q[te],N);R&&(R.outlet&&(R.outlet.deactivate(),R.children.onOutletDeactivated()),R.attachRef=null,R.route=null)}activateChildRoutes(b,I,R){const N=jr(I);b.children.forEach(q=>{this.activateRoutes(q,N[q.value.outlet],R),this.forwardEvent(new Ai(q.value.snapshot))}),b.children.length&&this.forwardEvent(new Bs(b.value.snapshot))}activateRoutes(b,I,R){const N=b.value,q=I?I.value:null;if(Ds(N),N===q)if(N.component){const te=R.getOrCreateContext(N.outlet);this.activateChildRoutes(b,I,te.children)}else this.activateChildRoutes(b,I,R);else if(N.component){const te=R.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const je=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),te.children.onOutletReAttached(je.contexts),te.attachRef=je.componentRef,te.route=je.route.value,te.outlet&&te.outlet.attach(je.componentRef,je.route.value),Ds(je.route.value),this.activateChildRoutes(b,null,te.children)}else{const je=ea(N.snapshot);te.attachRef=null,te.route=N,te.injector=je,te.outlet&&te.outlet.activateWith(N,te.injector),this.activateChildRoutes(b,null,te.children)}}else this.activateChildRoutes(b,null,R)}}class tu{constructor(b){this.path=b,this.route=this.path[this.path.length-1]}}class wr{constructor(b,I){this.component=b,this.route=I}}function wa(w,b,I){const R=w._root;return cr(R,b?b._root:null,I,[R.value])}function na(w,b){const I=Symbol(),R=b.get(w,I);return R===I?"function"!=typeof w||(0,D.Z0I)(w)?b.get(w):w:R}function cr(w,b,I,R,N={canDeactivateChecks:[],canActivateChecks:[]}){const q=jr(b);return w.children.forEach(te=>{(function ec(w,b,I,R,N={canDeactivateChecks:[],canActivateChecks:[]}){const q=w.value,te=b?b.value:null,je=I?I.getContext(w.value.outlet):null;if(te&&q.routeConfig===te.routeConfig){const Re=function bc(w,b,I){if("function"==typeof I)return I(w,b);switch(I){case"pathParamsChange":return!wi(w.url,b.url);case"pathParamsOrQueryParamsChange":return!wi(w.url,b.url)||!Sn(w.queryParams,b.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kr(w,b)||!Sn(w.queryParams,b.queryParams);default:return!Kr(w,b)}}(te,q,q.routeConfig.runGuardsAndResolvers);Re?N.canActivateChecks.push(new tu(R)):(q.data=te.data,q._resolvedData=te._resolvedData),cr(w,b,q.component?je?je.children:null:I,R,N),Re&&je&&je.outlet&&je.outlet.isActivated&&N.canDeactivateChecks.push(new wr(je.outlet.component,te))}else te&&_o(b,je,N),N.canActivateChecks.push(new tu(R)),cr(w,null,q.component?je?je.children:null:I,R,N)})(te,q[te.value.outlet],I,R.concat([te.value]),N),delete q[te.value.outlet]}),Object.entries(q).forEach(([te,je])=>_o(je,I.getContext(te),N)),N}function _o(w,b,I){const R=jr(w),N=w.value;Object.entries(R).forEach(([q,te])=>{_o(te,N.component?b?b.children.getContext(q):null:b,I)}),I.canDeactivateChecks.push(new wr(N.component&&b&&b.outlet&&b.outlet.isActivated?b.outlet.component:null,N))}function Ca(w){return"function"==typeof w}function sr(w){return w instanceof ot.K||"EmptyError"===w?.name}const $r=Symbol("INITIAL_VALUE");function mi(){return(0,we.w)(w=>Ee(w.map(b=>b.pipe((0,De.q)(1),(0,Le.O)($r)))).pipe((0,et.U)(b=>{for(const I of b)if(!0!==I){if(I===$r)return $r;if(!1===I||I instanceof ei)return I}return!0}),(0,_t.h)(b=>b!==$r),(0,De.q)(1)))}function Ra(w){return(0,_r.z)((0,un.b)(b=>{if(Li(b))throw Ia(0,b)}),(0,et.U)(b=>!0===b))}class Eo{constructor(b){this.segmentGroup=b||null}}class sa{constructor(b){this.urlTree=b}}function Bi(w){return Qn(new Eo(w))}function Fo(w){return Qn(new sa(w))}class sc{constructor(b,I){this.urlSerializer=b,this.urlTree=I}noMatchError(b){return new D.vHH(4002,!1)}lineralizeSegments(b,I){let R=[],N=I.root;for(;;){if(R=R.concat(N.segments),0===N.numberOfChildren)return(0,ye.of)(R);if(N.numberOfChildren>1||!N.children[Je])return Qn(new D.vHH(4e3,!1));N=N.children[Je]}}applyRedirectCommands(b,I,R){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),b,R)}applyRedirectCreateUrlTree(b,I,R,N){const q=this.createSegmentGroup(b,I.root,R,N);return new ei(q,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(b,I){const R={};return Object.entries(b).forEach(([N,q])=>{if("string"==typeof q&&q.startsWith(":")){const je=q.substring(1);R[N]=I[je]}else R[N]=q}),R}createSegmentGroup(b,I,R,N){const q=this.createSegments(b,I.segments,R,N);let te={};return Object.entries(I.children).forEach(([je,Re])=>{te[je]=this.createSegmentGroup(b,Re,R,N)}),new Cn(q,te)}createSegments(b,I,R,N){return I.map(q=>q.path.startsWith(":")?this.findPosParam(b,q,N):this.findOrReturn(q,R))}findPosParam(b,I,R){const N=R[I.path.substring(1)];if(!N)throw new D.vHH(4001,!1);return N}findOrReturn(b,I){let R=0;for(const N of I){if(N.path===b.path)return I.splice(R),N;R++}return b}}const oc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Rc(w,b,I,R,N){const q=Ma(w,b,I);return q.matched?(R=function pi(w,b){return w.providers&&!w._injector&&(w._injector=(0,D.MMx)(w.providers,b,`Route: ${w.path}`)),w._injector??b}(b,R),function ic(w,b,I,R){const N=b.canMatch;if(!N||0===N.length)return(0,ye.of)(!0);const q=N.map(te=>{const je=na(te,w);return kt(function gi(w){return w&&Ca(w.canMatch)}(je)?je.canMatch(b,I):w.runInContext(()=>je(b,I)))});return(0,ye.of)(q).pipe(mi(),Ra())}(R,b,I).pipe((0,et.U)(te=>!0===te?q:{...oc}))):(0,ye.of)(q)}function Ma(w,b,I){if(""===b.path)return"full"===b.pathMatch&&(w.hasChildren()||I.length>0)?{...oc}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const N=(b.matcher||Yn)(I,w,b);if(!N)return{...oc};const q={};Object.entries(N.posParams??{}).forEach(([je,Re])=>{q[je]=Re.path});const te=N.consumed.length>0?{...q,...N.consumed[N.consumed.length-1].parameters}:q;return{matched:!0,consumedSegments:N.consumed,remainingSegments:I.slice(N.consumed.length),parameters:te,positionalParamSegments:N.posParams??{}}}function Pu(w,b,I,R){return I.length>0&&function Pc(w,b,I){return I.some(R=>ac(w,b,R)&&Vr(R)!==Je)}(w,I,R)?{segmentGroup:new Cn(b,xa(R,new Cn(I,w.children))),slicedSegments:[]}:0===I.length&&function Xs(w,b,I){return I.some(R=>ac(w,b,R))}(w,I,R)?{segmentGroup:new Cn(w.segments,us(w,0,I,R,w.children)),slicedSegments:I}:{segmentGroup:new Cn(w.segments,w.children),slicedSegments:I}}function us(w,b,I,R,N){const q={};for(const te of R)if(ac(w,I,te)&&!N[Vr(te)]){const je=new Cn([],{});q[Vr(te)]=je}return{...N,...q}}function xa(w,b){const I={};I[Je]=b;for(const R of w)if(""===R.path&&Vr(R)!==Je){const N=new Cn([],{});I[Vr(R)]=N}return I}function ac(w,b,I){return(!(w.hasChildren()||b.length>0)||"full"!==I.pathMatch)&&""===I.path}class H{constructor(b,I,R,N,q,te,je){this.injector=b,this.configLoader=I,this.rootComponentType=R,this.config=N,this.urlTree=q,this.paramsInheritanceStrategy=te,this.urlSerializer=je,this.allowRedirects=!0,this.applyRedirects=new sc(this.urlSerializer,this.urlTree)}noMatchError(b){return new D.vHH(4002,!1)}recognize(){const b=Pu(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,b,Je).pipe(Xt(I=>{if(I instanceof sa)return this.allowRedirects=!1,this.urlTree=I.urlTree,this.match(I.urlTree);throw I instanceof Eo?this.noMatchError(I):I}),(0,et.U)(I=>{const R=new po([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Je,this.rootComponentType,null,{}),N=new Si(R,I),q=new ii("",N),te=function Ko(w,b,I=null,R=null){return Zo(Oo(w),b,I,R)}(R,[],this.urlTree.queryParams,this.urlTree.fragment);return te.queryParams=this.urlTree.queryParams,q.url=this.urlSerializer.serialize(te),this.inheritParamsAndData(q._root),{state:q,tree:te}}))}match(b){return this.processSegmentGroup(this.injector,this.config,b.root,Je).pipe(Xt(R=>{throw R instanceof Eo?this.noMatchError(R):R}))}inheritParamsAndData(b){const I=b.value,R=Zt(I,this.paramsInheritanceStrategy);I.params=Object.freeze(R.params),I.data=Object.freeze(R.data),b.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(b,I,R,N){return 0===R.segments.length&&R.hasChildren()?this.processChildren(b,I,R):this.processSegment(b,I,R,R.segments,N,!0)}processChildren(b,I,R){const N=[];for(const q of Object.keys(R.children))"primary"===q?N.unshift(q):N.push(q);return(0,me.D)(N).pipe(St(q=>{const te=R.children[q],je=function bu(w,b){const I=w.filter(R=>Vr(R)===b);return I.push(...w.filter(R=>Vr(R)!==b)),I}(I,q);return this.processSegmentGroup(b,je,te,q)}),(0,Wn.R)((q,te)=>(q.push(...te),q)),(0,Dn.d)(null),function xr(w,b){const I=arguments.length>=2;return R=>R.pipe(w?(0,_t.h)((N,q)=>w(N,q,R)):Ge.y,bn(1),I?(0,Dn.d)(b):(0,Hn.T)(()=>new ot.K))}(),(0,at.z)(q=>{if(null===q)return Bi(R);const te=oe(q);return function O(w){w.sort((b,I)=>b.value.outlet===Je?-1:I.value.outlet===Je?1:b.value.outlet.localeCompare(I.value.outlet))}(te),(0,ye.of)(te)}))}processSegment(b,I,R,N,q,te){return(0,me.D)(I).pipe(St(je=>this.processSegmentAgainstRoute(je._injector??b,I,je,R,N,q,te).pipe(Xt(Re=>{if(Re instanceof Eo)return(0,ye.of)(null);throw Re}))),(0,Vn.P)(je=>!!je),Xt(je=>{if(sr(je))return function uc(w,b,I){return 0===b.length&&!w.children[I]}(R,N,q)?(0,ye.of)([]):Bi(R);throw je}))}processSegmentAgainstRoute(b,I,R,N,q,te,je){return function ji(w,b,I,R){return!!(Vr(w)===R||R!==Je&&ac(b,I,w))&&("**"===w.path||Ma(b,w,I).matched)}(R,N,q,te)?void 0===R.redirectTo?this.matchSegmentAgainstRoute(b,N,R,q,te,je):je&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(b,N,I,R,q,te):Bi(N):Bi(N)}expandSegmentAgainstRouteUsingRedirect(b,I,R,N,q,te){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(b,R,N,te):this.expandRegularSegmentAgainstRouteUsingRedirect(b,I,R,N,q,te)}expandWildCardWithParamsAgainstRouteUsingRedirect(b,I,R,N){const q=this.applyRedirects.applyRedirectCommands([],R.redirectTo,{});return R.redirectTo.startsWith("/")?Fo(q):this.applyRedirects.lineralizeSegments(R,q).pipe((0,at.z)(te=>{const je=new Cn(te,{});return this.processSegment(b,I,je,te,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(b,I,R,N,q,te){const{matched:je,consumedSegments:Re,remainingSegments:Ct,positionalParamSegments:hn}=Ma(I,N,q);if(!je)return Bi(I);const pr=this.applyRedirects.applyRedirectCommands(Re,N.redirectTo,hn);return N.redirectTo.startsWith("/")?Fo(pr):this.applyRedirects.lineralizeSegments(N,pr).pipe((0,at.z)(fn=>this.processSegment(b,R,I,fn.concat(Ct),te,!1)))}matchSegmentAgainstRoute(b,I,R,N,q,te){let je;if("**"===R.path){const Re=N.length>0?xo(N).parameters:{},Ct=new po(N,Re,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ke(R),Vr(R),R.component??R._loadedComponent??null,R,Lt(R));je=(0,ye.of)({snapshot:Ct,consumedSegments:[],remainingSegments:[]}),I.children={}}else je=Rc(I,R,N,b).pipe((0,et.U)(({matched:Re,consumedSegments:Ct,remainingSegments:hn,parameters:pr})=>Re?{snapshot:new po(Ct,pr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ke(R),Vr(R),R.component??R._loadedComponent??null,R,Lt(R)),consumedSegments:Ct,remainingSegments:hn}:null));return je.pipe((0,we.w)(Re=>null===Re?Bi(I):this.getChildConfig(b=R._injector??b,R,N).pipe((0,we.w)(({routes:Ct})=>{const hn=R._loadedInjector??b,{snapshot:pr,consumedSegments:fn,remainingSegments:_s}=Re,{segmentGroup:$s,slicedSegments:xi}=Pu(I,fn,_s,Ct);if(0===xi.length&&$s.hasChildren())return this.processChildren(hn,Ct,$s).pipe((0,et.U)(ys=>null===ys?null:[new Si(pr,ys)]));if(0===Ct.length&&0===xi.length)return(0,ye.of)([new Si(pr,[])]);const cu=Vr(R)===q;return this.processSegment(hn,Ct,$s,xi,cu?Je:q,!0).pipe((0,et.U)(ys=>[new Si(pr,ys)]))}))))}getChildConfig(b,I,R){return I.children?(0,ye.of)({routes:I.children,injector:b}):I.loadChildren?void 0!==I._loadedRoutes?(0,ye.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function Ru(w,b,I,R){const N=b.canLoad;if(void 0===N||0===N.length)return(0,ye.of)(!0);const q=N.map(te=>{const je=na(te,w);return kt(function Aa(w){return w&&Ca(w.canLoad)}(je)?je.canLoad(b,I):w.runInContext(()=>je(b,I)))});return(0,ye.of)(q).pipe(mi(),Ra())}(b,I,R).pipe((0,at.z)(N=>N?this.configLoader.loadChildren(b,I).pipe((0,un.b)(q=>{I._loadedRoutes=q.routes,I._loadedInjector=q.injector})):function oa(w){return Qn(Ki(!1,3))}())):(0,ye.of)({routes:[],injector:b})}}function B(w){const b=w.value.routeConfig;return b&&""===b.path}function oe(w){const b=[],I=new Set;for(const R of w){if(!B(R)){b.push(R);continue}const N=b.find(q=>R.value.routeConfig===q.value.routeConfig);void 0!==N?(N.children.push(...R.children),I.add(N)):b.push(R)}for(const R of I){const N=oe(R.children);b.push(new Si(R.value,N))}return b.filter(R=>!I.has(R))}function Ke(w){return w.data||{}}function Lt(w){return w.resolve||{}}function Or(w){return"string"==typeof w.title||null===w.title}function Ri(w){return(0,we.w)(b=>{const I=w(b);return I?(0,me.D)(I).pipe((0,et.U)(()=>b)):(0,ye.of)(b)})}const Pi=new D.OlP("ROUTES");let Zr=(()=>{class w{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,D.f3M)(D.Sil)}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,ye.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const R=kt(I.loadComponent()).pipe((0,et.U)(_i),(0,un.b)(q=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=q}),Qe(()=>{this.componentLoaders.delete(I)})),N=new ge(R,()=>new he.x).pipe(It());return this.componentLoaders.set(I,N),N}loadChildren(I,R){if(this.childrenLoaders.get(R))return this.childrenLoaders.get(R);if(R._loadedRoutes)return(0,ye.of)({routes:R._loadedRoutes,injector:R._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(R);const q=function Qi(w,b,I,R){return kt(w.loadChildren()).pipe((0,et.U)(_i),(0,at.z)(N=>N instanceof D.YKP||Array.isArray(N)?(0,ye.of)(N):(0,me.D)(b.compileModuleAsync(N))),(0,et.U)(N=>{R&&R(w);let q,te,je=!1;return Array.isArray(N)?(te=N,!0):(q=N.create(I).injector,te=q.get(Pi,[],{optional:!0,self:!0}).flat()),{routes:te.map(Ta),injector:q}}))}(R,this.compiler,I,this.onLoadEndListener).pipe(Qe(()=>{this.childrenLoaders.delete(R)})),te=new ge(q,()=>new he.x).pipe(It());return this.childrenLoaders.set(R,te),te}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function _i(w){return function aa(w){return w&&"object"==typeof w&&"default"in w}(w)?w.default:w}let eo=(()=>{class w{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new he.x,this.transitionAbortSubject=new he.x,this.configLoader=(0,D.f3M)(Zr),this.environmentInjector=(0,D.f3M)(D.lqb),this.urlSerializer=(0,D.f3M)(K),this.rootContexts=(0,D.f3M)(Et),this.inputBindingEnabled=null!==(0,D.f3M)(fs,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ye.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=N=>this.events.next(new Ir(N)),this.configLoader.onLoadStartListener=N=>this.events.next(new Rn(N))}complete(){this.transitions?.complete()}handleNavigationRequest(I){const R=++this.navigationId;this.transitions?.next({...this.transitions.value,...I,id:R})}setupNavigations(I,R,N){return this.transitions=new Se.X({id:0,currentUrlTree:R,currentRawUrl:R,currentBrowserUrl:R,extractedUrl:I.urlHandlingStrategy.extract(R),urlAfterRedirects:I.urlHandlingStrategy.extract(R),rawUrl:R,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ea,restoredState:null,currentSnapshot:N.snapshot,targetSnapshot:null,currentRouterState:N,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,_t.h)(q=>0!==q.id),(0,et.U)(q=>({...q,extractedUrl:I.urlHandlingStrategy.extract(q.rawUrl)})),(0,we.w)(q=>{this.currentTransition=q;let te=!1,je=!1;return(0,ye.of)(q).pipe((0,un.b)(Re=>{this.currentNavigation={id:Re.id,initialUrl:Re.rawUrl,extractedUrl:Re.extractedUrl,trigger:Re.source,extras:Re.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,we.w)(Re=>{const Ct=Re.currentBrowserUrl.toString(),hn=!I.navigated||Re.extractedUrl.toString()!==Ct||Ct!==Re.currentUrlTree.toString();if(!hn&&"reload"!==(Re.extras.onSameUrlNavigation??I.onSameUrlNavigation)){const fn="";return this.events.next(new fo(Re.id,this.urlSerializer.serialize(Re.rawUrl),fn,0)),Re.resolve(null),An.E}if(I.urlHandlingStrategy.shouldProcessUrl(Re.rawUrl))return(0,ye.of)(Re).pipe((0,we.w)(fn=>{const _s=this.transitions?.getValue();return this.events.next(new Ks(fn.id,this.urlSerializer.serialize(fn.extractedUrl),fn.source,fn.restoredState)),_s!==this.transitions?.getValue()?An.E:Promise.resolve(fn)}),function rr(w,b,I,R,N,q){return(0,at.z)(te=>function A(w,b,I,R,N,q,te="emptyOnly"){return new H(w,b,I,R,N,te,q).recognize()}(w,b,I,R,te.extractedUrl,N,q).pipe((0,et.U)(({state:je,tree:Re})=>({...te,targetSnapshot:je,urlAfterRedirects:Re}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,I.config,this.urlSerializer,I.paramsInheritanceStrategy),(0,un.b)(fn=>{q.targetSnapshot=fn.targetSnapshot,q.urlAfterRedirects=fn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:fn.urlAfterRedirects};const _s=new Wi(fn.id,this.urlSerializer.serialize(fn.extractedUrl),this.urlSerializer.serialize(fn.urlAfterRedirects),fn.targetSnapshot);this.events.next(_s)}));if(hn&&I.urlHandlingStrategy.shouldProcessUrl(Re.currentRawUrl)){const{id:fn,extractedUrl:_s,source:$s,restoredState:xi,extras:cu}=Re,ys=new Ks(fn,this.urlSerializer.serialize(_s),$s,xi);this.events.next(ys);const ku=Tr(0,this.rootComponentType).snapshot;return this.currentTransition=q={...Re,targetSnapshot:ku,urlAfterRedirects:_s,extras:{...cu,skipLocationChange:!1,replaceUrl:!1}},(0,ye.of)(q)}{const fn="";return this.events.next(new fo(Re.id,this.urlSerializer.serialize(Re.extractedUrl),fn,1)),Re.resolve(null),An.E}}),(0,un.b)(Re=>{const Ct=new Qa(Re.id,this.urlSerializer.serialize(Re.extractedUrl),this.urlSerializer.serialize(Re.urlAfterRedirects),Re.targetSnapshot);this.events.next(Ct)}),(0,et.U)(Re=>(this.currentTransition=q={...Re,guards:wa(Re.targetSnapshot,Re.currentSnapshot,this.rootContexts)},q)),function si(w,b){return(0,at.z)(I=>{const{targetSnapshot:R,currentSnapshot:N,guards:{canActivateChecks:q,canDeactivateChecks:te}}=I;return 0===te.length&&0===q.length?(0,ye.of)({...I,guardsResult:!0}):function ba(w,b,I,R){return(0,me.D)(w).pipe((0,at.z)(N=>function vo(w,b,I,R,N){const q=b&&b.routeConfig?b.routeConfig.canDeactivate:null;if(!q||0===q.length)return(0,ye.of)(!0);const te=q.map(je=>{const Re=ea(b)??N,Ct=na(je,Re);return kt(function nc(w){return w&&Ca(w.canDeactivate)}(Ct)?Ct.canDeactivate(w,b,I,R):Re.runInContext(()=>Ct(w,b,I,R))).pipe((0,Vn.P)())});return(0,ye.of)(te).pipe(mi())}(N.component,N.route,I,b,R)),(0,Vn.P)(N=>!0!==N,!0))}(te,R,N,w).pipe((0,at.z)(je=>je&&function nu(w){return"boolean"==typeof w}(je)?function ra(w,b,I,R){return(0,me.D)(b).pipe(St(N=>(0,ue.z)(function yo(w,b){return null!==w&&b&&b(new Di(w)),(0,ye.of)(!0)}(N.route.parent,R),function ia(w,b){return null!==w&&b&&b(new Ci(w)),(0,ye.of)(!0)}(N.route,R),function rc(w,b,I){const R=b[b.length-1],q=b.slice(0,b.length-1).reverse().map(te=>function Da(w){const b=w.routeConfig?w.routeConfig.canActivateChild:null;return b&&0!==b.length?{node:w,guards:b}:null}(te)).filter(te=>null!==te).map(te=>gt(()=>{const je=te.guards.map(Re=>{const Ct=ea(te.node)??I,hn=na(Re,Ct);return kt(function Sa(w){return w&&Ca(w.canActivateChild)}(hn)?hn.canActivateChild(R,w):Ct.runInContext(()=>hn(R,w))).pipe((0,Vn.P)())});return(0,ye.of)(je).pipe(mi())}));return(0,ye.of)(q).pipe(mi())}(w,N.path,I),function iu(w,b,I){const R=b.routeConfig?b.routeConfig.canActivate:null;if(!R||0===R.length)return(0,ye.of)(!0);const N=R.map(q=>gt(()=>{const te=ea(b)??I,je=na(q,te);return kt(function tc(w){return w&&Ca(w.canActivate)}(je)?je.canActivate(b,w):te.runInContext(()=>je(b,w))).pipe((0,Vn.P)())}));return(0,ye.of)(N).pipe(mi())}(w,N.route,I))),(0,Vn.P)(N=>!0!==N,!0))}(R,q,w,b):(0,ye.of)(je)),(0,et.U)(je=>({...I,guardsResult:je})))})}(this.environmentInjector,Re=>this.events.next(Re)),(0,un.b)(Re=>{if(q.guardsResult=Re.guardsResult,Li(Re.guardsResult))throw Ia(0,Re.guardsResult);const Ct=new Xo(Re.id,this.urlSerializer.serialize(Re.extractedUrl),this.urlSerializer.serialize(Re.urlAfterRedirects),Re.targetSnapshot,!!Re.guardsResult);this.events.next(Ct)}),(0,_t.h)(Re=>!!Re.guardsResult||(this.cancelNavigationTransition(Re,"",3),!1)),Ri(Re=>{if(Re.guards.canActivateChecks.length)return(0,ye.of)(Re).pipe((0,un.b)(Ct=>{const hn=new ri(Ct.id,this.urlSerializer.serialize(Ct.extractedUrl),this.urlSerializer.serialize(Ct.urlAfterRedirects),Ct.targetSnapshot);this.events.next(hn)}),(0,we.w)(Ct=>{let hn=!1;return(0,ye.of)(Ct).pipe(function xn(w,b){return(0,at.z)(I=>{const{targetSnapshot:R,guards:{canActivateChecks:N}}=I;if(!N.length)return(0,ye.of)(I);let q=0;return(0,me.D)(N).pipe(St(te=>function yn(w,b,I,R){const N=w.routeConfig,q=w._resolve;return void 0!==N?.title&&!Or(N)&&(q[en]=N.title),function Yt(w,b,I,R){const N=function Tn(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}(w);if(0===N.length)return(0,ye.of)({});const q={};return(0,me.D)(N).pipe((0,at.z)(te=>function Zn(w,b,I,R){const N=ea(b)??R,q=na(w,N);return kt(q.resolve?q.resolve(b,I):N.runInContext(()=>q(b,I)))}(w[te],b,I,R).pipe((0,Vn.P)(),(0,un.b)(je=>{q[te]=je}))),bn(1),function Oe(w){return(0,et.U)(()=>w)}(q),Xt(te=>sr(te)?An.E:Qn(te)))}(q,w,b,R).pipe((0,et.U)(te=>(w._resolvedData=te,w.data=Zt(w,I).resolve,N&&Or(N)&&(w.data[en]=N.title),null)))}(te.route,R,w,b)),(0,un.b)(()=>q++),bn(1),(0,at.z)(te=>q===N.length?(0,ye.of)(I):An.E))})}(I.paramsInheritanceStrategy,this.environmentInjector),(0,un.b)({next:()=>hn=!0,complete:()=>{hn||this.cancelNavigationTransition(Ct,"",2)}}))}),(0,un.b)(Ct=>{const hn=new Qs(Ct.id,this.urlSerializer.serialize(Ct.extractedUrl),this.urlSerializer.serialize(Ct.urlAfterRedirects),Ct.targetSnapshot);this.events.next(hn)}))}),Ri(Re=>{const Ct=hn=>{const pr=[];hn.routeConfig?.loadComponent&&!hn.routeConfig._loadedComponent&&pr.push(this.configLoader.loadComponent(hn.routeConfig).pipe((0,un.b)(fn=>{hn.component=fn}),(0,et.U)(()=>{})));for(const fn of hn.children)pr.push(...Ct(fn));return pr};return Ee(Ct(Re.targetSnapshot.root)).pipe((0,Dn.d)(),(0,De.q)(1))}),Ri(()=>this.afterPreactivation()),(0,et.U)(Re=>{const Ct=function js(w,b,I){const R=Fi(w,b._root,I?I._root:void 0);return new Js(R,b)}(I.routeReuseStrategy,Re.targetSnapshot,Re.currentRouterState);return this.currentTransition=q={...Re,targetRouterState:Ct},q}),(0,un.b)(()=>{this.events.next(new Ys)}),((w,b,I,R)=>(0,et.U)(N=>(new eu(b,N.targetRouterState,N.currentRouterState,I,R).activate(w),N)))(this.rootContexts,I.routeReuseStrategy,Re=>this.events.next(Re),this.inputBindingEnabled),(0,De.q)(1),(0,un.b)({next:Re=>{te=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Gi(Re.id,this.urlSerializer.serialize(Re.extractedUrl),this.urlSerializer.serialize(Re.urlAfterRedirects))),I.titleStrategy?.updateTitle(Re.targetRouterState.snapshot),Re.resolve(!0)},complete:()=>{te=!0}}),function We(w){return(0,Tt.e)((b,I)=>{(0,Gt.Xf)(w).subscribe((0,re.x)(I,()=>I.complete(),fe.Z)),!I.closed&&b.subscribe(I)})}(this.transitionAbortSubject.pipe((0,un.b)(Re=>{throw Re}))),Qe(()=>{te||je||this.cancelNavigationTransition(q,"",1),this.currentNavigation?.id===q.id&&(this.currentNavigation=null)}),Xt(Re=>{if(je=!0,fi(Re))this.events.next(new Zs(q.id,this.urlSerializer.serialize(q.extractedUrl),Re.message,Re.cancellationCode)),function ps(w){return fi(w)&&Li(w.url)}(Re)?this.events.next(new Ya(Re.url)):q.resolve(!1);else{this.events.next(new Jo(q.id,this.urlSerializer.serialize(q.extractedUrl),Re,q.targetSnapshot??void 0));try{q.resolve(I.errorHandler(Re))}catch(Ct){q.reject(Ct)}}return An.E}))}))}cancelNavigationTransition(I,R,N){const q=new Zs(I.id,this.urlSerializer.serialize(I.extractedUrl),R,N);this.events.next(q),I.resolve(!1)}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function su(w){return w!==Ea}let or=(()=>{class w{buildTitle(I){let R,N=I.root;for(;void 0!==N;)R=this.getResolvedTitleForRoute(N)??R,N=N.children.find(q=>q.outlet===Je);return R}getResolvedTitleForRoute(I){return I.data[en]}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:function(){return(0,D.f3M)(Yc)},providedIn:"root"})}return w})(),Yc=(()=>{class w extends or{constructor(I){super(),this.title=I}updateTitle(I){const R=this.buildTitle(I);void 0!==R&&this.title.setTitle(R)}static#e=this.\u0275fac=function(R){return new(R||w)(D.LFG(cn.Dx))};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})(),Oa=(()=>{class w{static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:function(){return(0,D.f3M)(md)},providedIn:"root"})}return w})();class cs{shouldDetach(b){return!1}store(b,I){}shouldAttach(b){return!1}retrieve(b){return null}shouldReuseRoute(b,I){return b.routeConfig===I.routeConfig}}let md=(()=>{class w extends cs{static#e=this.\u0275fac=function(){let I;return function(N){return(I||(I=D.n5z(w)))(N||w)}}();static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const Io=new D.OlP("",{providedIn:"root",factory:()=>({})});let ou=(()=>{class w{static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:function(){return(0,D.f3M)(ir)},providedIn:"root"})}return w})(),ir=(()=>{class w{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,R){return I}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();var ls=function(w){return w[w.COMPLETE=0]="COMPLETE",w[w.FAILED=1]="FAILED",w[w.REDIRECTING=2]="REDIRECTING",w}(ls||{});function Mi(w,b){w.events.pipe((0,_t.h)(I=>I instanceof Gi||I instanceof Zs||I instanceof Jo||I instanceof fo),(0,et.U)(I=>I instanceof Gi||I instanceof fo?ls.COMPLETE:I instanceof Zs&&(0===I.code||1===I.code)?ls.REDIRECTING:ls.FAILED),(0,_t.h)(I=>I!==ls.REDIRECTING),(0,De.q)(1)).subscribe(()=>{b()})}function to(w){throw w}function Vo(w,b,I){return b.parse("/")}const ut={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let fr=(()=>{class w{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,D.f3M)(D.c2e),this.isNgZoneEnabled=!1,this._events=new he.x,this.options=(0,D.f3M)(Io,{optional:!0})||{},this.pendingTasks=(0,D.f3M)(D.HDt),this.errorHandler=this.options.errorHandler||to,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Vo,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,D.f3M)(ou),this.routeReuseStrategy=(0,D.f3M)(Oa),this.titleStrategy=(0,D.f3M)(or),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,D.f3M)(Pi,{optional:!0})?.flat()??[],this.navigationTransitions=(0,D.f3M)(eo),this.urlSerializer=(0,D.f3M)(K),this.location=(0,D.f3M)(Me.Ye),this.componentInputBindingEnabled=!!(0,D.f3M)(fs,{optional:!0}),this.eventsSubscription=new nn.w0,this.isNgZoneEnabled=(0,D.f3M)(D.R0b)instanceof D.R0b&&D.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ei,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Tr(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(I=>{this.lastSuccessfulId=I.id,this.currentPageId=this.browserPageId},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const I=this.navigationTransitions.events.subscribe(R=>{try{const{currentTransition:N}=this.navigationTransitions;if(null===N)return void(Vt(R)&&this._events.next(R));if(R instanceof Ks)su(N.source)&&(this.browserUrlTree=N.extractedUrl);else if(R instanceof fo)this.rawUrlTree=N.rawUrl;else if(R instanceof Wi){if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const q=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(q,N)}this.browserUrlTree=N.urlAfterRedirects}}else if(R instanceof Ys)this.currentUrlTree=N.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl),this.routerState=N.targetRouterState,"deferred"===this.urlUpdateStrategy&&(N.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,N),this.browserUrlTree=N.urlAfterRedirects);else if(R instanceof Zs)0!==R.code&&1!==R.code&&(this.navigated=!0),(3===R.code||2===R.code)&&this.restoreHistory(N);else if(R instanceof Ya){const q=this.urlHandlingStrategy.merge(R.url,N.currentRawUrl),te={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||su(N.source)};this.scheduleNavigation(q,Ea,null,te,{resolve:N.resolve,reject:N.reject,promise:N.promise})}R instanceof Jo&&this.restoreHistory(N,!0),R instanceof Gi&&(this.navigated=!0),Vt(R)&&this._events.next(R)}catch(N){this.navigationTransitions.transitionAbortSubject.next(N)}});this.eventsSubscription.add(I)}resetRootComponentType(I){this.routerState.root.component=I,this.navigationTransitions.rootComponentType=I}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const I=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ea,I)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const R="popstate"===I.type?"popstate":"hashchange";"popstate"===R&&setTimeout(()=>{this.navigateToSyncWithBrowser(I.url,R,I.state)},0)}))}navigateToSyncWithBrowser(I,R,N){const q={replaceUrl:!0},te=N?.navigationId?N:null;if(N){const Re={...N};delete Re.navigationId,delete Re.\u0275routerPageId,0!==Object.keys(Re).length&&(q.state=Re)}const je=this.parseUrl(I);this.scheduleNavigation(je,R,te,q)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(I){this.config=I.map(Ta),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(I,R={}){const{relativeTo:N,queryParams:q,fragment:te,queryParamsHandling:je,preserveFragment:Re}=R,Ct=Re?this.currentUrlTree.fragment:te;let pr,hn=null;switch(je){case"merge":hn={...this.currentUrlTree.queryParams,...q};break;case"preserve":hn=this.currentUrlTree.queryParams;break;default:hn=q||null}null!==hn&&(hn=this.removeEmptyProps(hn));try{pr=Oo(N?N.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof I[0]||!I[0].startsWith("/"))&&(I=[]),pr=this.currentUrlTree.root}return Zo(pr,I,hn,Ct??null)}navigateByUrl(I,R={skipLocationChange:!1}){const N=Li(I)?I:this.parseUrl(I),q=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(q,Ea,null,R)}navigate(I,R={skipLocationChange:!1}){return function Na(w){for(let b=0;b<w.length;b++)if(null==w[b])throw new D.vHH(4008,!1)}(I),this.navigateByUrl(this.createUrlTree(I,R),R)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let R;try{R=this.urlSerializer.parse(I)}catch(N){R=this.malformedUriErrorHandler(N,this.urlSerializer,I)}return R}isActive(I,R){let N;if(N=!0===R?{...ut}:!1===R?{...lr}:R,Li(I))return Gr(this.currentUrlTree,I,N);const q=this.parseUrl(I);return Gr(this.currentUrlTree,q,N)}removeEmptyProps(I){return Object.keys(I).reduce((R,N)=>{const q=I[N];return null!=q&&(R[N]=q),R},{})}scheduleNavigation(I,R,N,q,te){if(this.disposed)return Promise.resolve(!1);let je,Re,Ct;te?(je=te.resolve,Re=te.reject,Ct=te.promise):Ct=new Promise((pr,fn)=>{je=pr,Re=fn});const hn=this.pendingTasks.add();return Mi(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(hn))}),this.navigationTransitions.handleNavigationRequest({source:R,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:I,extras:q,resolve:je,reject:Re,promise:Ct,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ct.catch(pr=>Promise.reject(pr))}setBrowserUrl(I,R){const N=this.urlSerializer.serialize(I);if(this.location.isCurrentPathEqualTo(N)||R.extras.replaceUrl){const te={...R.extras.state,...this.generateNgRouterState(R.id,this.browserPageId)};this.location.replaceState(N,"",te)}else{const q={...R.extras.state,...this.generateNgRouterState(R.id,this.browserPageId+1)};this.location.go(N,"",q)}}restoreHistory(I,R=!1){if("computed"===this.canceledNavigationResolution){const q=this.currentPageId-this.browserPageId;0!==q?this.location.historyGo(q):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===q&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(R&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(I,R){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:R}:{navigationId:I}}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function Vt(w){return!(w instanceof Ys||w instanceof Ya)}let Bt=(()=>{class w{constructor(I,R,N,q,te,je){this.router=I,this.route=R,this.tabIndexAttribute=N,this.renderer=q,this.el=te,this.locationStrategy=je,this.href=null,this.commands=null,this.onChanges=new he.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Re=te.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Re||"area"===Re,this.isAnchorElement?this.subscription=I.events.subscribe(Ct=>{Ct instanceof Gi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(I){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",I)}ngOnChanges(I){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(I,R,N,q,te){return!!(null===this.urlTree||this.isAnchorElement&&(0!==I||R||N||q||te||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const I=null===this.href?null:(0,D.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",I)}applyAttributeValue(I,R){const N=this.renderer,q=this.el.nativeElement;null!==R?N.setAttribute(q,I,R):N.removeAttribute(q,I)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(R){return new(R||w)(D.Y36(fr),D.Y36(hi),D.$8M("tabindex"),D.Y36(D.Qsj),D.Y36(D.SBq),D.Y36(Me.S$))};static#t=this.\u0275dir=D.lG2({type:w,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(R,N){1&R&&D.NdJ("click",function(te){return N.onClick(te.button,te.ctrlKey,te.shiftKey,te.altKey,te.metaKey)}),2&R&&D.uIk("target",N.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",D.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",D.VuI],replaceUrl:["replaceUrl","replaceUrl",D.VuI],routerLink:"routerLink"},standalone:!0,features:[D.Xq5,D.TTD]})}return w})();class $e{}let Xe=(()=>{class w{preload(I,R){return R().pipe(Xt(()=>(0,ye.of)(null)))}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})(),ua=(()=>{class w{constructor(I,R,N,q,te){this.router=I,this.injector=N,this.preloadingStrategy=q,this.loader=te}setUpPreloading(){this.subscription=this.router.events.pipe((0,_t.h)(I=>I instanceof Gi),St(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,R){const N=[];for(const q of R){q.providers&&!q._injector&&(q._injector=(0,D.MMx)(q.providers,I,`Route: ${q.path}`));const te=q._injector??I,je=q._loadedInjector??te;(q.loadChildren&&!q._loadedRoutes&&void 0===q.canLoad||q.loadComponent&&!q._loadedComponent)&&N.push(this.preloadConfig(te,q)),(q.children||q._loadedRoutes)&&N.push(this.processRoutes(je,q.children??q._loadedRoutes))}return(0,me.D)(N).pipe((0,dt.J)())}preloadConfig(I,R){return this.preloadingStrategy.preload(R,()=>{let N;N=R.loadChildren&&void 0===R.canLoad?this.loader.loadChildren(I,R):(0,ye.of)(null);const q=N.pipe((0,at.z)(te=>null===te?(0,ye.of)(void 0):(R._loadedRoutes=te.routes,R._loadedInjector=te.injector,this.processRoutes(te.injector??I,te.routes))));if(R.loadComponent&&!R._loadedComponent){const te=this.loader.loadComponent(R);return(0,me.D)([q,te]).pipe((0,dt.J)())}return q})}static#e=this.\u0275fac=function(R){return new(R||w)(D.LFG(fr),D.LFG(D.Sil),D.LFG(D.lqb),D.LFG($e),D.LFG(Zr))};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const ca=new D.OlP("");let au=(()=>{class w{constructor(I,R,N,q,te={}){this.urlSerializer=I,this.transitions=R,this.viewportScroller=N,this.zone=q,this.options=te,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},te.scrollPositionRestoration=te.scrollPositionRestoration||"disabled",te.anchorScrolling=te.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof Ks?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof Gi?(this.lastId=I.id,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.urlAfterRedirects).fragment)):I instanceof fo&&0===I.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof ko&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,R){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ko(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,R))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(R){D.$Z()};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac})}return w})();function oi(w,b){return{\u0275kind:w,\u0275providers:b}}function Ur(){const w=(0,D.f3M)(D.zs3);return b=>{const I=w.get(D.z2F);if(b!==I.components[0])return;const R=w.get(fr),N=w.get(_n);1===w.get(kn)&&R.initialNavigation(),w.get(ka,null,D.XFs.Optional)?.setUpPreloading(),w.get(ca,null,D.XFs.Optional)?.init(),R.resetRootComponentType(I.componentTypes[0]),N.closed||(N.next(),N.complete(),N.unsubscribe())}}const _n=new D.OlP("",{factory:()=>new he.x}),kn=new D.OlP("",{providedIn:"root",factory:()=>1}),ka=new D.OlP("");function Bn(w){return oi(0,[{provide:ka,useExisting:ua},{provide:$e,useExisting:w}])}const Uo=new D.OlP("ROUTER_FORROOT_GUARD"),no=[Me.Ye,{provide:K,useClass:Q},fr,Et,{provide:hi,useFactory:function Jc(w){return w.routerState.root},deps:[fr]},Zr,[]];function yi(){return new D.PXZ("Router",fr)}let lc=(()=>{class w{constructor(I){}static forRoot(I,R){return{ngModule:w,providers:[no,[],{provide:Pi,multi:!0,useValue:I},{provide:Uo,useFactory:Yi,deps:[[fr,new D.FiY,new D.tp0]]},{provide:Io,useValue:R||{}},R?.useHash?{provide:Me.S$,useClass:Me.Do}:{provide:Me.S$,useClass:Me.b0},{provide:ca,useFactory:()=>{const w=(0,D.f3M)(Me.EM),b=(0,D.f3M)(D.R0b),I=(0,D.f3M)(Io),R=(0,D.f3M)(eo),N=(0,D.f3M)(K);return I.scrollOffset&&w.setOffset(I.scrollOffset),new au(N,R,w,b,I)}},R?.preloadingStrategy?Bn(R.preloadingStrategy).\u0275providers:[],{provide:D.PXZ,multi:!0,useFactory:yi},R?.initialNavigation?Nu(R):[],R?.bindToComponentInputs?oi(8,[As,{provide:fs,useExisting:As}]).\u0275providers:[],[{provide:Mc,useFactory:Ur},{provide:D.tb,multi:!0,useExisting:Mc}]]}}static forChild(I){return{ngModule:w,providers:[{provide:Pi,multi:!0,useValue:I}]}}static#e=this.\u0275fac=function(R){return new(R||w)(D.LFG(Uo,8))};static#t=this.\u0275mod=D.oAB({type:w});static#n=this.\u0275inj=D.cJS({})}return w})();function Yi(w){return"guarded"}function Nu(w){return["disabled"===w.initialNavigation?oi(3,[{provide:D.ip1,multi:!0,useFactory:()=>{const b=(0,D.f3M)(fr);return()=>{b.setUpLocationChangeListener()}}},{provide:kn,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?oi(2,[{provide:kn,useValue:0},{provide:D.ip1,multi:!0,deps:[D.zs3],useFactory:b=>{const I=b.get(Me.V_,Promise.resolve());return()=>I.then(()=>new Promise(R=>{const N=b.get(fr),q=b.get(_n);Mi(N,()=>{R(!0)}),b.get(eo).afterPreactivation=()=>(R(!0),q.closed?(0,ye.of)(void 0):q),N.initialNavigation()}))}}]).\u0275providers:[]]}const Mc=new D.OlP("")},3106:(Ft,He,$)=>{$.d(He,{Z:()=>et});var D=$(9058),se=$(4537),j=$(534),Te=$(7879);class me{constructor(pt,ct){this._delegate=pt,this.firebase=ct,(0,j._addComponent)(pt,new se.wA("app-compat",()=>this,"PUBLIC")),this.container=pt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pt){this._delegate.automaticDataCollectionEnabled=pt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pt=>{this._delegate.checkDestroyed(),pt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(pt,ct=j._DEFAULT_ENTRY_NAME){var Nt;this._delegate.checkDestroyed();const pe=this._delegate.container.getProvider(pt);return!pe.isInitialized()&&"EXPLICIT"===(null===(Nt=pe.getComponent())||void 0===Nt?void 0:Nt.instantiationMode)&&pe.initialize(),pe.getImmediate({identifier:ct})}_removeServiceInstance(pt,ct=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pt).clearInstance(ct)}_addComponent(pt){(0,j._addComponent)(this._delegate,pt)}_addOrOverwriteComponent(pt){(0,j._addOrOverwriteComponent)(this._delegate,pt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Se=new D.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ie=function ke(){const nt=function V(nt){const pt={},ct={__esModule:!0,initializeApp:function re(Ze,ot={}){const ue=j.initializeApp(Ze,ot);if((0,D.r3)(pt,ue.name))return pt[ue.name];const Gt=new nt(ue,ct);return pt[ue.name]=Gt,Gt},app:pe,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function Ee(Ze){const ot=Ze.name,ue=ot.replace("-compat","");if(j._registerComponent(Ze)&&"PUBLIC"===Ze.type){const Gt=(gt=pe())=>{if("function"!=typeof gt[ue])throw Se.create("invalid-app-argument",{appName:ot});return gt[ue]()};void 0!==Ze.serviceProps&&(0,D.ZB)(Gt,Ze.serviceProps),ct[ue]=Gt,nt.prototype[ue]=function(...gt){return this._getService.bind(this,ot).apply(this,Ze.multipleInstances?gt:[])}}return"PUBLIC"===Ze.type?ct[ue]:null},removeApp:function Nt(Ze){delete pt[Ze]},useAsService:function Ue(Ze,ot){return"serverAuth"===ot?null:ot},modularAPIs:j}};function pe(Ze){if(!(0,D.r3)(pt,Ze=Ze||j._DEFAULT_ENTRY_NAME))throw Se.create("no-app",{appName:Ze});return pt[Ze]}return ct.default=ct,Object.defineProperty(ct,"apps",{get:function Fe(){return Object.keys(pt).map(Ze=>pt[Ze])}}),pe.App=nt,ct}(me);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:ke,extendNamespace:function pt(ct){(0,D.ZB)(nt,ct)},createSubscribe:D.ne,ErrorFactory:D.LL,deepExtend:D.ZB}),nt}(),ae=new Te.Yd("@firebase/app-compat");if((0,D.jU)()&&void 0!==self.firebase){ae.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&ae.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const et=ie;!function Ge(nt){(0,j.registerVersion)("@firebase/app-compat","0.2.23",nt)}()},534:(Ft,He,$)=>{$.r(He),$.d(He,{FirebaseError:()=>Te.ZR,SDK_VERSION:()=>Ti,_DEFAULT_ENTRY_NAME:()=>Je,_addComponent:()=>Yn,_addOrOverwriteComponent:()=>ci,_apps:()=>on,_clearComponents:()=>kt,_components:()=>Nn,_getProvider:()=>Rr,_registerComponent:()=>Sn,_removeServiceInstance:()=>xo,deleteApp:()=>qr,getApp:()=>Wr,getApps:()=>Vs,initializeApp:()=>Gs,onLog:()=>Cn,registerVersion:()=>ei,setLogLevel:()=>ki});var D=$(5861),se=$(4537),j=$(7879),Te=$(9058);const me=(ze,be)=>be.some(lt=>ze instanceof lt);let ye,Se;const ie=new WeakMap,ae=new WeakMap,ve=new WeakMap,rt=new WeakMap,Ge=new WeakMap;let pt={get(ze,be,lt){if(ze instanceof IDBTransaction){if("done"===be)return ae.get(ze);if("objectStoreNames"===be)return ze.objectStoreNames||ve.get(ze);if("store"===be)return lt.objectStoreNames[1]?void 0:lt.objectStore(lt.objectStoreNames[0])}return re(ze[be])},set:(ze,be,lt)=>(ze[be]=lt,!0),has:(ze,be)=>ze instanceof IDBTransaction&&("done"===be||"store"===be)||be in ze};function pe(ze){return"function"==typeof ze?function Nt(ze){return ze!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ke(){return Se||(Se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ze)?function(...be){return ze.apply(Fe(this),be),re(ie.get(this))}:function(...be){return re(ze.apply(Fe(this),be))}:function(be,...lt){const $t=ze.call(Fe(this),be,...lt);return ve.set($t,be.sort?be.sort():[be]),re($t)}}(ze):(ze instanceof IDBTransaction&&function nt(ze){if(ae.has(ze))return;const be=new Promise((lt,$t)=>{const tn=()=>{ze.removeEventListener("complete",Pt),ze.removeEventListener("error",sn),ze.removeEventListener("abort",sn)},Pt=()=>{lt(),tn()},sn=()=>{$t(ze.error||new DOMException("AbortError","AbortError")),tn()};ze.addEventListener("complete",Pt),ze.addEventListener("error",sn),ze.addEventListener("abort",sn)});ae.set(ze,be)}(ze),me(ze,function V(){return ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ze,pt):ze)}function re(ze){if(ze instanceof IDBRequest)return function et(ze){const be=new Promise((lt,$t)=>{const tn=()=>{ze.removeEventListener("success",Pt),ze.removeEventListener("error",sn)},Pt=()=>{lt(re(ze.result)),tn()},sn=()=>{$t(ze.error),tn()};ze.addEventListener("success",Pt),ze.addEventListener("error",sn)});return be.then(lt=>{lt instanceof IDBCursor&&ie.set(lt,ze)}).catch(()=>{}),Ge.set(be,ze),be}(ze);if(rt.has(ze))return rt.get(ze);const be=pe(ze);return be!==ze&&(rt.set(ze,be),Ge.set(be,ze)),be}const Fe=ze=>Ge.get(ze),Ze=["get","getKey","getAll","getAllKeys","count"],ot=["put","add","delete","clear"],ue=new Map;function Gt(ze,be){if(!(ze instanceof IDBDatabase)||be in ze||"string"!=typeof be)return;if(ue.get(be))return ue.get(be);const lt=be.replace(/FromIndex$/,""),$t=be!==lt,tn=ot.includes(lt);if(!(lt in($t?IDBIndex:IDBObjectStore).prototype)||!tn&&!Ze.includes(lt))return;const Pt=function(){var sn=(0,D.Z)(function*(yr,...vr){const is=this.transaction(yr,tn?"readwrite":"readonly");let di=is.store;return $t&&(di=di.index(vr.shift())),(yield Promise.all([di[lt](...vr),tn&&is.done]))[0]});return function(vr){return sn.apply(this,arguments)}}();return ue.set(be,Pt),Pt}!function ct(ze){pt=ze(pt)}(ze=>({...ze,get:(be,lt,$t)=>Gt(be,lt)||ze.get(be,lt,$t),has:(be,lt)=>!!Gt(be,lt)||ze.has(be,lt)}));class gt{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(lt=>{if(function _r(ze){const be=ze.getComponent();return"VERSION"===be?.type}(lt)){const $t=lt.getImmediate();return`${$t.library}/${$t.version}`}return null}).filter(lt=>lt).join(" ")}}const Qn="@firebase/app",nn=new j.Yd("@firebase/app"),Je="[DEFAULT]",en={[Qn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},on=new Map,Nn=new Map;function Yn(ze,be){try{ze.container.addComponent(be)}catch(lt){nn.debug(`Component ${be.name} failed to register with FirebaseApp ${ze.name}`,lt)}}function ci(ze,be){ze.container.addOrOverwriteComponent(be)}function Sn(ze){const be=ze.name;if(Nn.has(be))return nn.debug(`There were multiple attempts to register component ${be}.`),!1;Nn.set(be,ze);for(const lt of on.values())Yn(lt,ze);return!0}function Rr(ze,be){const lt=ze.container.getProvider("heartbeat").getImmediate({optional:!0});return lt&&lt.triggerHeartbeat(),ze.container.getProvider(be)}function xo(ze,be,lt=Je){Rr(ze,be).clearInstance(lt)}function kt(){Nn.clear()}const En=new Te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Gr{constructor(be,lt,$t){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},lt),this._name=lt.name,this._automaticDataCollectionEnabled=lt.automaticDataCollectionEnabled,this._container=$t,this.container.addComponent(new se.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw En.create("app-deleted",{appName:this._name})}}const Ti="10.6.0";function Gs(ze,be={}){let lt=ze;"object"!=typeof be&&(be={name:be});const $t=Object.assign({name:Je,automaticDataCollectionEnabled:!1},be),tn=$t.name;if("string"!=typeof tn||!tn)throw En.create("bad-app-name",{appName:String(tn)});if(lt||(lt=(0,Te.aH)()),!lt)throw En.create("no-options");const Pt=on.get(tn);if(Pt){if((0,Te.vZ)(lt,Pt.options)&&(0,Te.vZ)($t,Pt.config))return Pt;throw En.create("duplicate-app",{appName:tn})}const sn=new se.H0(tn);for(const vr of Nn.values())sn.addComponent(vr);const yr=new Gr(lt,$t,sn);return on.set(tn,yr),yr}function Wr(ze=Je){const be=on.get(ze);if(!be&&ze===Je&&(0,Te.aH)())return Gs();if(!be)throw En.create("no-app",{appName:ze});return be}function Vs(){return Array.from(on.values())}function qr(ze){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,D.Z)(function*(ze){const be=ze.name;on.has(be)&&(on.delete(be),yield Promise.all(ze.container.getProviders().map(lt=>lt.delete())),ze.isDeleted=!0)})).apply(this,arguments)}function ei(ze,be,lt){var $t;let tn=null!==($t=en[ze])&&void 0!==$t?$t:ze;lt&&(tn+=`-${lt}`);const Pt=tn.match(/\s|\//),sn=be.match(/\s|\//);if(Pt||sn){const yr=[`Unable to register library "${tn}" with version "${be}":`];return Pt&&yr.push(`library name "${tn}" contains illegal characters (whitespace or "/")`),Pt&&sn&&yr.push("and"),sn&&yr.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void nn.warn(yr.join(" "))}Sn(new se.wA(`${tn}-version`,()=>({library:tn,version:be}),"VERSION"))}function Cn(ze,be){if(null!==ze&&"function"!=typeof ze)throw En.create("invalid-log-argument");(0,j.Am)(ze,be)}function ki(ze){(0,j.Ub)(ze)}const Ts="firebase-heartbeat-database",wi=1,de="firebase-heartbeat-store";let K=null;function Q(){return K||(K=function Ee(ze,be,{blocked:lt,upgrade:$t,blocking:tn,terminated:Pt}={}){const sn=indexedDB.open(ze,be),yr=re(sn);return $t&&sn.addEventListener("upgradeneeded",vr=>{$t(re(sn.result),vr.oldVersion,vr.newVersion,re(sn.transaction),vr)}),lt&&sn.addEventListener("blocked",vr=>lt(vr.oldVersion,vr.newVersion,vr)),yr.then(vr=>{Pt&&vr.addEventListener("close",()=>Pt()),tn&&vr.addEventListener("versionchange",is=>tn(is.oldVersion,is.newVersion,is))}).catch(()=>{}),yr}(Ts,wi,{upgrade:(ze,be)=>{0===be&&ze.createObjectStore(de)}}).catch(ze=>{throw En.create("idb-open",{originalErrorMessage:ze.message})})),K}function Y(){return(Y=(0,D.Z)(function*(ze){try{return yield(yield Q()).transaction(de).objectStore(de).get(ft(ze))}catch(be){if(be instanceof Te.ZR)nn.warn(be.message);else{const lt=En.create("idb-get",{originalErrorMessage:be?.message});nn.warn(lt.message)}}})).apply(this,arguments)}function Ce(ze,be){return qe.apply(this,arguments)}function qe(){return(qe=(0,D.Z)(function*(ze,be){try{const $t=(yield Q()).transaction(de,"readwrite");yield $t.objectStore(de).put(be,ft(ze)),yield $t.done}catch(lt){if(lt instanceof Te.ZR)nn.warn(lt.message);else{const $t=En.create("idb-set",{originalErrorMessage:lt?.message});nn.warn($t.message)}}})).apply(this,arguments)}function ft(ze){return`${ze.name}!${ze.options.appId}`}class wt{constructor(be){this.container=be,this._heartbeatsCache=null;const lt=this.container.getProvider("app").getImmediate();this._storage=new li(lt),this._heartbeatsCachePromise=this._storage.read().then($t=>(this._heartbeatsCache=$t,$t))}triggerHeartbeat(){var be=this;return(0,D.Z)(function*(){var lt;const tn=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Pt=Ut();if(null==(null===(lt=be._heartbeatsCache)||void 0===lt?void 0:lt.heartbeats)&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==Pt&&!be._heartbeatsCache.heartbeats.some(sn=>sn.date===Pt))return be._heartbeatsCache.heartbeats.push({date:Pt,agent:tn}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(sn=>{const yr=new Date(sn.date).valueOf();return Date.now()-yr<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,D.Z)(function*(){var lt;if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null==(null===(lt=be._heartbeatsCache)||void 0===lt?void 0:lt.heartbeats)||0===be._heartbeatsCache.heartbeats.length)return"";const $t=Ut(),{heartbeatsToSend:tn,unsentEntries:Pt}=function nr(ze,be=1024){const lt=[];let $t=ze.slice();for(const tn of ze){const Pt=lt.find(sn=>sn.agent===tn.agent);if(Pt){if(Pt.dates.push(tn.date),lo(lt)>be){Pt.dates.pop();break}}else if(lt.push({agent:tn.agent,dates:[tn.date]}),lo(lt)>be){lt.pop();break}$t=$t.slice(1)}return{heartbeatsToSend:lt,unsentEntries:$t}}(be._heartbeatsCache.heartbeats),sn=(0,Te.L)(JSON.stringify({version:2,heartbeats:tn}));return be._heartbeatsCache.lastSentHeartbeatDate=$t,Pt.length>0?(be._heartbeatsCache.heartbeats=Pt,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),sn})()}}function Ut(){return(new Date).toISOString().substring(0,10)}class li{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.Z)(function*(){return!!(0,Te.hl)()&&(0,Te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,D.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function Z(ze){return Y.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var lt=this;return(0,D.Z)(function*(){var $t;if(yield lt._canUseIndexedDBPromise){const Pt=yield lt.read();return Ce(lt.app,{lastSentHeartbeatDate:null!==($t=be.lastSentHeartbeatDate)&&void 0!==$t?$t:Pt.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var lt=this;return(0,D.Z)(function*(){var $t;if(yield lt._canUseIndexedDBPromise){const Pt=yield lt.read();return Ce(lt.app,{lastSentHeartbeatDate:null!==($t=be.lastSentHeartbeatDate)&&void 0!==$t?$t:Pt.lastSentHeartbeatDate,heartbeats:[...Pt.heartbeats,...be.heartbeats]})}})()}}function lo(ze){return(0,Te.L)(JSON.stringify({version:2,heartbeats:ze})).length}!function Za(ze){Sn(new se.wA("platform-logger",be=>new gt(be),"PRIVATE")),Sn(new se.wA("heartbeat",be=>new wt(be),"PRIVATE")),ei(Qn,"0.9.23",ze),ei(Qn,"0.9.23","esm2017"),ei("fire-js","")}("")},4537:(Ft,He,$)=>{$.d(He,{H0:()=>V,wA:()=>j});var D=$(5861),se=$(9058);class j{constructor(ie,ae,ve){this.name=ie,this.instanceFactory=ae,this.type=ve,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ie){return this.instantiationMode=ie,this}setMultipleInstances(ie){return this.multipleInstances=ie,this}setServiceProps(ie){return this.serviceProps=ie,this}setInstanceCreatedCallback(ie){return this.onInstanceCreated=ie,this}}const Te="[DEFAULT]";class me{constructor(ie,ae){this.name=ie,this.container=ae,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ie){const ae=this.normalizeInstanceIdentifier(ie);if(!this.instancesDeferred.has(ae)){const ve=new se.BH;if(this.instancesDeferred.set(ae,ve),this.isInitialized(ae)||this.shouldAutoInitialize())try{const rt=this.getOrInitializeService({instanceIdentifier:ae});rt&&ve.resolve(rt)}catch{}}return this.instancesDeferred.get(ae).promise}getImmediate(ie){var ae;const ve=this.normalizeInstanceIdentifier(ie?.identifier),rt=null!==(ae=ie?.optional)&&void 0!==ae&&ae;if(!this.isInitialized(ve)&&!this.shouldAutoInitialize()){if(rt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ve})}catch(Ge){if(rt)return null;throw Ge}}getComponent(){return this.component}setComponent(ie){if(ie.name!==this.name)throw Error(`Mismatching Component ${ie.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ie,this.shouldAutoInitialize()){if(function Se(ke){return"EAGER"===ke.instantiationMode}(ie))try{this.getOrInitializeService({instanceIdentifier:Te})}catch{}for(const[ae,ve]of this.instancesDeferred.entries()){const rt=this.normalizeInstanceIdentifier(ae);try{const Ge=this.getOrInitializeService({instanceIdentifier:rt});ve.resolve(Ge)}catch{}}}}clearInstance(ie=Te){this.instancesDeferred.delete(ie),this.instancesOptions.delete(ie),this.instances.delete(ie)}delete(){var ie=this;return(0,D.Z)(function*(){const ae=Array.from(ie.instances.values());yield Promise.all([...ae.filter(ve=>"INTERNAL"in ve).map(ve=>ve.INTERNAL.delete()),...ae.filter(ve=>"_delete"in ve).map(ve=>ve._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ie=Te){return this.instances.has(ie)}getOptions(ie=Te){return this.instancesOptions.get(ie)||{}}initialize(ie={}){const{options:ae={}}=ie,ve=this.normalizeInstanceIdentifier(ie.instanceIdentifier);if(this.isInitialized(ve))throw Error(`${this.name}(${ve}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const rt=this.getOrInitializeService({instanceIdentifier:ve,options:ae});for(const[Ge,et]of this.instancesDeferred.entries())ve===this.normalizeInstanceIdentifier(Ge)&&et.resolve(rt);return rt}onInit(ie,ae){var ve;const rt=this.normalizeInstanceIdentifier(ae),Ge=null!==(ve=this.onInitCallbacks.get(rt))&&void 0!==ve?ve:new Set;Ge.add(ie),this.onInitCallbacks.set(rt,Ge);const et=this.instances.get(rt);return et&&ie(et,rt),()=>{Ge.delete(ie)}}invokeOnInitCallbacks(ie,ae){const ve=this.onInitCallbacks.get(ae);if(ve)for(const rt of ve)try{rt(ie,ae)}catch{}}getOrInitializeService({instanceIdentifier:ie,options:ae={}}){let ve=this.instances.get(ie);if(!ve&&this.component&&(ve=this.component.instanceFactory(this.container,{instanceIdentifier:(ke=ie,ke===Te?void 0:ke),options:ae}),this.instances.set(ie,ve),this.instancesOptions.set(ie,ae),this.invokeOnInitCallbacks(ve,ie),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ie,ve)}catch{}var ke;return ve||null}normalizeInstanceIdentifier(ie=Te){return this.component?this.component.multipleInstances?ie:Te:ie}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class V{constructor(ie){this.name=ie,this.providers=new Map}addComponent(ie){const ae=this.getProvider(ie.name);if(ae.isComponentSet())throw new Error(`Component ${ie.name} has already been registered with ${this.name}`);ae.setComponent(ie)}addOrOverwriteComponent(ie){this.getProvider(ie.name).isComponentSet()&&this.providers.delete(ie.name),this.addComponent(ie)}getProvider(ie){if(this.providers.has(ie))return this.providers.get(ie);const ae=new me(ie,this);return this.providers.set(ie,ae),ae}getProviders(){return Array.from(this.providers.values())}}},7879:(Ft,He,$)=>{$.d(He,{Am:()=>ke,Ub:()=>V,Yd:()=>Se,in:()=>se});const D=[];var se=function(ie){return ie[ie.DEBUG=0]="DEBUG",ie[ie.VERBOSE=1]="VERBOSE",ie[ie.INFO=2]="INFO",ie[ie.WARN=3]="WARN",ie[ie.ERROR=4]="ERROR",ie[ie.SILENT=5]="SILENT",ie}(se||{});const j={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},Te=se.INFO,me={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},ye=(ie,ae,...ve)=>{if(ae<ie.logLevel)return;const rt=(new Date).toISOString(),Ge=me[ae];if(!Ge)throw new Error(`Attempted to log a message with an invalid logType (value: ${ae})`);console[Ge](`[${rt}]  ${ie.name}:`,...ve)};class Se{constructor(ae){this.name=ae,this._logLevel=Te,this._logHandler=ye,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(ae){if(!(ae in se))throw new TypeError(`Invalid value "${ae}" assigned to \`logLevel\``);this._logLevel=ae}setLogLevel(ae){this._logLevel="string"==typeof ae?j[ae]:ae}get logHandler(){return this._logHandler}set logHandler(ae){if("function"!=typeof ae)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ae}get userLogHandler(){return this._userLogHandler}set userLogHandler(ae){this._userLogHandler=ae}debug(...ae){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...ae),this._logHandler(this,se.DEBUG,...ae)}log(...ae){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...ae),this._logHandler(this,se.VERBOSE,...ae)}info(...ae){this._userLogHandler&&this._userLogHandler(this,se.INFO,...ae),this._logHandler(this,se.INFO,...ae)}warn(...ae){this._userLogHandler&&this._userLogHandler(this,se.WARN,...ae),this._logHandler(this,se.WARN,...ae)}error(...ae){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...ae),this._logHandler(this,se.ERROR,...ae)}}function V(ie){D.forEach(ae=>{ae.setLogLevel(ie)})}function ke(ie,ae){for(const ve of D){let rt=null;ae&&ae.level&&(rt=j[ae.level]),ve.userLogHandler=null===ie?null:(Ge,et,...nt)=>{const pt=nt.map(ct=>{if(null==ct)return null;if("string"==typeof ct)return ct;if("number"==typeof ct||"boolean"==typeof ct)return ct.toString();if(ct instanceof Error)return ct.message;try{return JSON.stringify(ct)}catch{return null}}).filter(ct=>ct).join(" ");et>=(rt??Ge.logLevel)&&ie({level:se[et].toLowerCase(),message:pt,args:nt,type:Ge.name})}}}},7142:(Ft,He,$)=>{$.d(He,{Z:()=>D.Z});var D=$(3106);D.Z.registerVersion("firebase","10.6.0","app-compat")},3956:(Ft,He,$)=>{$.r(He);var D=$(5861),se=$(3106),j=$(9058),Te=$(534),me=$(7879),ye=$(7582),Se=$(4537);const ke={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const et=function rt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},nt=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pt=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Nt=new me.Yd("@firebase/auth");function re(_,...d){Nt.logLevel<=me.in.ERROR&&Nt.error(`Auth (${Te.SDK_VERSION}): ${_}`,...d)}function Fe(_,...d){throw ot(_,...d)}function Ee(_,...d){return ot(_,...d)}function Ue(_,d,p){const E=Object.assign(Object.assign({},nt()),{[d]:p});return new j.LL("auth","Firebase",E).create(d,{appName:_.name})}function Ze(_,d,p){if(!(d instanceof p))throw p.name!==d.constructor.name&&Fe(_,"argument-error"),Ue(_,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ot(_,...d){if("string"!=typeof _){const p=d[0],E=[...d.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(p,...E)}return pt.create(_,...d)}function ue(_,d,...p){if(!_)throw ot(d,...p)}function Gt(_){const d="INTERNAL ASSERTION FAILED: "+_;throw re(d),new Error(d)}function gt(_,d){_||Gt(d)}function _r(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Qn(){return"http:"===An()||"https:"===An()}function An(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class It{constructor(d,p){this.shortDelay=d,this.longDelay=p,gt(p>d,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function nn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Qn()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ge(_,d){gt(_.emulator,"Emulator should always be set here");const{url:p}=_.emulator;return d?`${p}${d.startsWith("/")?d.slice(1):d}`:p}class he{static initialize(d,p,E){this.fetchImpl=d,p&&(this.headersImpl=p),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Gt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Gt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Gt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Me={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},we=new It(3e4,6e4);function De(_,d){return _.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:_.tenantId}):d}function Le(_,d,p,E){return _t.apply(this,arguments)}function _t(){return(_t=(0,D.Z)(function*(_,d,p,E,k={}){return at(_,k,(0,D.Z)(function*(){let G={},ce={};E&&("GET"===d?ce=E:G={body:JSON.stringify(E)});const xe=(0,j.xO)(Object.assign({key:_.config.apiKey},ce)).slice(1),tt=yield _._getAdditionalHeaders();return tt["Content-Type"]="application/json",_.languageCode&&(tt["X-Firebase-Locale"]=_.languageCode),he.fetch()(Xt(_,_.config.apiHost,p,xe),Object.assign({method:d,headers:tt,referrerPolicy:"no-referrer"},G))}))})).apply(this,arguments)}function at(_,d,p){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,D.Z)(function*(_,d,p){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},Me),d);try{const k=new Dn(_),G=yield Promise.race([p(),k.promise]);k.clearNetworkTimeout();const ce=yield G.json();if("needConfirmation"in ce)throw bn(_,"account-exists-with-different-credential",ce);if(G.ok&&!("errorMessage"in ce))return ce;{const xe=G.ok?ce.errorMessage:ce.error.message,[tt,Ot]=xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===tt)throw bn(_,"credential-already-in-use",ce);if("EMAIL_EXISTS"===tt)throw bn(_,"email-already-in-use",ce);if("USER_DISABLED"===tt)throw bn(_,"user-disabled",ce);const qt=E[tt]||tt.toLowerCase().replace(/[_\s]+/g,"-");if(Ot)throw Ue(_,qt,Ot);Fe(_,qt)}}catch(k){if(k instanceof j.ZR)throw k;Fe(_,"network-request-failed",{message:String(k)})}})).apply(this,arguments)}function St(_,d,p,E){return un.apply(this,arguments)}function un(){return(un=(0,D.Z)(function*(_,d,p,E,k={}){const G=yield Le(_,d,p,E,k);return"mfaPendingCredential"in G&&Fe(_,"multi-factor-auth-required",{_serverResponse:G}),G})).apply(this,arguments)}function Xt(_,d,p,E){const k=`${d}${p}?${E}`;return _.config.emulator?ge(_.config,k):`${_.config.apiScheme}://${k}`}function Wn(_){switch(_){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Dn{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((p,E)=>{this.timer=setTimeout(()=>E(Ee(this.auth,"network-request-failed")),we.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bn(_,d,p){const E={appName:_.name};p.email&&(E.email=p.email),p.phoneNumber&&(E.phoneNumber=p.phoneNumber);const k=Ee(_,d,E);return k.customData._tokenResponse=p,k}function Hn(_){return void 0!==_&&void 0!==_.getResponse}function xr(_){return void 0!==_&&void 0!==_.enterprise}class Oe{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const p of this.recaptchaEnforcementState)if(p.provider&&p.provider===d)return Wn(p.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function fe(){return(fe=(0,D.Z)(function*(_){return(yield Le(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function We(_,d){return dt.apply(this,arguments)}function dt(){return(dt=(0,D.Z)(function*(_,d){return Le(_,"GET","/v2/recaptchaConfig",De(_,d))})).apply(this,arguments)}function Je(){return(Je=(0,D.Z)(function*(_,d){return Le(_,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function on(){return(on=(0,D.Z)(function*(_,d){return Le(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Yn(){return(Yn=(0,D.Z)(function*(_,d){return Le(_,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function ci(_){if(_)try{const d=new Date(Number(_));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function xo(){return(xo=(0,D.Z)(function*(_,d=!1){const p=(0,j.m9)(_),E=yield p.getIdToken(d),k=Fs(E);ue(k&&k.exp&&k.auth_time&&k.iat,p.auth,"internal-error");const G="object"==typeof k.firebase?k.firebase:void 0,ce=G?.sign_in_provider;return{claims:k,token:E,authTime:ci(kt(k.auth_time)),issuedAtTime:ci(kt(k.iat)),expirationTime:ci(kt(k.exp)),signInProvider:ce||null,signInSecondFactor:G?.sign_in_second_factor||null}})).apply(this,arguments)}function kt(_){return 1e3*Number(_)}function Fs(_){const[d,p,E]=_.split(".");if(void 0===d||void 0===p||void 0===E)return re("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,j.tV)(p);return k?JSON.parse(k):(re("Failed to decode base64 JWT payload"),null)}catch(k){return re("Caught error parsing JWT payload as JSON",k?.toString()),null}}function Gr(_,d){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,D.Z)(function*(_,d,p=!1){if(p)return d;try{return yield d}catch(E){throw E instanceof j.ZR&&function Gs({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}class Wr{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var p;if(d){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const k=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(d=!1){var p=this;if(!this.isRunning)return;const E=this.getInterval(d);this.timerId=setTimeout((0,D.Z)(function*(){yield p.iteration()}),E)}iteration(){var d=this;return(0,D.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&d.schedule(!0))}d.schedule()})()}}class Vs{constructor(d,p){this.createdAt=d,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=ci(this.lastLoginAt),this.creationTime=ci(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function qr(_){return Xr.apply(this,arguments)}function Xr(){return Xr=(0,D.Z)(function*(_){var d;const p=_.auth,E=yield _.getIdToken(),k=yield Gr(_,function Nn(_,d){return Yn.apply(this,arguments)}(p,{idToken:E}));ue(k?.users.length,p,"internal-error");const G=k.users[0];_._notifyReloadListener(G);const ce=null!==(d=G.providerUserInfo)&&void 0!==d&&d.length?function Ts(_){return _.map(d=>{var{providerId:p}=d,E=(0,ye._T)(d,["providerId"]);return{providerId:p,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(G.providerUserInfo):[],xe=function ki(_,d){return[..._.filter(E=>!d.some(k=>k.providerId===E.providerId)),...d]}(_.providerData,ce),qt=!!_.isAnonymous&&!(_.email&&G.passwordHash||xe?.length),zt={uid:G.localId,displayName:G.displayName||null,photoURL:G.photoUrl||null,email:G.email||null,emailVerified:G.emailVerified||!1,phoneNumber:G.phoneNumber||null,tenantId:G.tenantId||null,providerData:xe,metadata:new Vs(G.createdAt,G.lastLoginAt),isAnonymous:qt};Object.assign(_,zt)}),Xr.apply(this,arguments)}function Cn(){return(Cn=(0,D.Z)(function*(_){const d=(0,j.m9)(_);yield qr(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function de(){return(de=(0,D.Z)(function*(_,d){const p=yield at(_,{},(0,D.Z)(function*(){const E=(0,j.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:k,apiKey:G}=_.config,ce=Xt(_,k,"/v1/token",`key=${G}`),xe=yield _._getAdditionalHeaders();return xe["Content-Type"]="application/x-www-form-urlencoded",he.fetch()(ce,{method:"POST",headers:xe,body:E})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}function Q(){return(Q=(0,D.Z)(function*(_,d){return Le(_,"POST","/v2/accounts:revokeToken",De(_,d))})).apply(this,arguments)}class Z{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){ue(d.idToken,"internal-error"),ue(typeof d.idToken<"u","internal-error"),ue(typeof d.refreshToken<"u","internal-error");const p="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function En(_){const d=Fs(_);return ue(d,"internal-error"),ue(typeof d.exp<"u","internal-error"),ue(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,p)}getToken(d,p=!1){var E=this;return(0,D.Z)(function*(){return ue(!E.accessToken||E.refreshToken,d,"user-token-expired"),p||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(d,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,p){var E=this;return(0,D.Z)(function*(){const{accessToken:k,refreshToken:G,expiresIn:ce}=yield function wi(_,d){return de.apply(this,arguments)}(d,p);E.updateTokensAndExpiration(k,G,Number(ce))})()}updateTokensAndExpiration(d,p,E){this.refreshToken=p||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(d,p){const{refreshToken:E,accessToken:k,expirationTime:G}=p,ce=new Z;return E&&(ue("string"==typeof E,"internal-error",{appName:d}),ce.refreshToken=E),k&&(ue("string"==typeof k,"internal-error",{appName:d}),ce.accessToken=k),G&&(ue("number"==typeof G,"internal-error",{appName:d}),ce.expirationTime=G),ce}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Z,this.toJSON())}_performRefresh(){return Gt("not implemented")}}function Y(_,d){ue("string"==typeof _||typeof _>"u","internal-error",{appName:d})}class Ce{constructor(d){var{uid:p,auth:E,stsTokenManager:k}=d,G=(0,ye._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=E,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=G.displayName||null,this.email=G.email||null,this.emailVerified=G.emailVerified||!1,this.phoneNumber=G.phoneNumber||null,this.photoURL=G.photoURL||null,this.isAnonymous=G.isAnonymous||!1,this.tenantId=G.tenantId||null,this.providerData=G.providerData?[...G.providerData]:[],this.metadata=new Vs(G.createdAt||void 0,G.lastLoginAt||void 0)}getIdToken(d){var p=this;return(0,D.Z)(function*(){const E=yield Gr(p,p.stsTokenManager.getToken(p.auth,d));return ue(E,p.auth,"internal-error"),p.accessToken!==E&&(p.accessToken=E,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),E})()}getIdTokenResult(d){return function Rr(_){return xo.apply(this,arguments)}(this,d)}reload(){return function ei(_){return Cn.apply(this,arguments)}(this)}_assign(d){this!==d&&(ue(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(p=>Object.assign({},p)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const p=new Ce(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(d){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,p=!1){var E=this;return(0,D.Z)(function*(){let k=!1;d.idToken&&d.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(d),k=!0),p&&(yield qr(E)),yield E.auth._persistUserIfCurrent(E),k&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var d=this;return(0,D.Z)(function*(){const p=yield d.getIdToken();return yield Gr(d,function cn(_,d){return Je.apply(this,arguments)}(d.auth,{idToken:p})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,p){var E,k,G,ce,xe,tt,Ot,qt;const zt=null!==(E=p.displayName)&&void 0!==E?E:void 0,Mr=null!==(k=p.email)&&void 0!==k?k:void 0,_a=null!==(G=p.phoneNumber)&&void 0!==G?G:void 0,xd=null!==(ce=p.photoURL)&&void 0!==ce?ce:void 0,ui=null!==(xe=p.tenantId)&&void 0!==xe?xe:void 0,ol=null!==(tt=p._redirectEventId)&&void 0!==tt?tt:void 0,Gu=null!==(Ot=p.createdAt)&&void 0!==Ot?Ot:void 0,jc=null!==(qt=p.lastLoginAt)&&void 0!==qt?qt:void 0,{uid:Wo,emailVerified:Od,isAnonymous:Zf,providerData:mu,stsTokenManager:Ah}=p;ue(Wo&&Ah,d,"internal-error");const Sh=Z.fromJSON(this.name,Ah);ue("string"==typeof Wo,d,"internal-error"),Y(zt,d.name),Y(Mr,d.name),ue("boolean"==typeof Od,d,"internal-error"),ue("boolean"==typeof Zf,d,"internal-error"),Y(_a,d.name),Y(xd,d.name),Y(ui,d.name),Y(ol,d.name),Y(Gu,d.name),Y(jc,d.name);const Gl=new Ce({uid:Wo,auth:d,email:Mr,emailVerified:Od,displayName:zt,isAnonymous:Zf,photoURL:xd,phoneNumber:_a,tenantId:ui,stsTokenManager:Sh,createdAt:Gu,lastLoginAt:jc});return mu&&Array.isArray(mu)&&(Gl.providerData=mu.map(Qf=>Object.assign({},Qf))),ol&&(Gl._redirectEventId=ol),Gl}static _fromIdTokenResponse(d,p,E=!1){return(0,D.Z)(function*(){const k=new Z;k.updateFromServerResponse(p);const G=new Ce({uid:p.localId,auth:d,stsTokenManager:k,isAnonymous:E});return yield qr(G),G})()}}const qe=new Map;function ft(_){gt(_ instanceof Function,"Expected a class definition");let d=qe.get(_);return d?(gt(d instanceof _,"Instance stored in cache mismatched with class"),d):(d=new _,qe.set(_,d),d)}const rn=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.Z)(function*(){return!0})()}_set(p,E){var k=this;return(0,D.Z)(function*(){k.storage[p]=E})()}_get(p){var E=this;return(0,D.Z)(function*(){const k=E.storage[p];return void 0===k?null:k})()}_remove(p){var E=this;return(0,D.Z)(function*(){delete E.storage[p]})()}_addListener(p,E){}_removeListener(p,E){}}return _.type="NONE",_})();function wt(_,d,p){return`firebase:${_}:${d}:${p}`}class Ut{constructor(d,p,E){this.persistence=d,this.auth=p,this.userKey=E;const{config:k,name:G}=this.auth;this.fullUserKey=wt(this.userKey,k.apiKey,G),this.fullPersistenceKey=wt("persistence",k.apiKey,G),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,D.Z)(function*(){const p=yield d.persistence._get(d.fullUserKey);return p?Ce._fromJSON(d.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var p=this;return(0,D.Z)(function*(){if(p.persistence===d)return;const E=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=d,E?p.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,p,E="authUser"){return(0,D.Z)(function*(){if(!p.length)return new Ut(ft(rn),d,E);const k=(yield Promise.all(p.map(function(){var Ot=(0,D.Z)(function*(qt){if(yield qt._isAvailable())return qt});return function(qt){return Ot.apply(this,arguments)}}()))).filter(Ot=>Ot);let G=k[0]||ft(rn);const ce=wt(E,d.config.apiKey,d.name);let xe=null;for(const Ot of p)try{const qt=yield Ot._get(ce);if(qt){const zt=Ce._fromJSON(d,qt);Ot!==G&&(xe=zt),G=Ot;break}}catch{}const tt=k.filter(Ot=>Ot._shouldAllowMigration);return G._shouldAllowMigration&&tt.length?(G=tt[0],xe&&(yield G._set(ce,xe.toJSON())),yield Promise.all(p.map(function(){var Ot=(0,D.Z)(function*(qt){if(qt!==G)try{yield qt._remove(ce)}catch{}});return function(qt){return Ot.apply(this,arguments)}}())),new Ut(G,d,E)):new Ut(G,d,E)})()}}function nr(_){const d=_.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(ze(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(li(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(lt(d))return"Blackberry";if($t(d))return"Webos";if(lo(d))return"Safari";if((d.includes("chrome/")||Za(d))&&!d.includes("edge/"))return"Chrome";if(be(d))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function li(_=(0,j.z$)()){return/firefox\//i.test(_)}function lo(_=(0,j.z$)()){const d=_.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Za(_=(0,j.z$)()){return/crios\//i.test(_)}function ze(_=(0,j.z$)()){return/iemobile/i.test(_)}function be(_=(0,j.z$)()){return/android/i.test(_)}function lt(_=(0,j.z$)()){return/blackberry/i.test(_)}function $t(_=(0,j.z$)()){return/webos/i.test(_)}function tn(_=(0,j.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function vr(_=(0,j.z$)()){return tn(_)||be(_)||$t(_)||lt(_)||/windows phone/i.test(_)||ze(_)}function di(_,d=[]){let p;switch(_){case"Browser":p=nr((0,j.z$)());break;case"Worker":p=`${nr((0,j.z$)())}-${_}`;break;default:p=_}const E=d.length?d.join(","):"FirebaseCore-web";return`${p}/JsCore/${Te.SDK_VERSION}/${E}`}class Li{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,p){const E=G=>new Promise((ce,xe)=>{try{ce(d(G))}catch(tt){xe(tt)}});E.onAbort=p,this.queue.push(E);const k=this.queue.length-1;return()=>{this.queue[k]=()=>Promise.resolve()}}runMiddleware(d){var p=this;return(0,D.Z)(function*(){if(p.auth.currentUser===d)return;const E=[];try{for(const k of p.queue)yield k(d),k.onAbort&&E.push(k.onAbort)}catch(k){E.reverse();for(const G of E)try{G()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:k?.message})}})()}}function Oo(){return(Oo=(0,D.Z)(function*(_,d={}){return Le(_,"GET","/v2/passwordPolicy",De(_,d))})).apply(this,arguments)}class ws{constructor(d){var p,E,k,G;const ce=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(p=ce.minPasswordLength)&&void 0!==p?p:6,ce.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ce.maxPasswordLength),void 0!==ce.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ce.containsLowercaseCharacter),void 0!==ce.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ce.containsUppercaseCharacter),void 0!==ce.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ce.containsNumericCharacter),void 0!==ce.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ce.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(k=null===(E=d.allowedNonAlphanumericCharacters)||void 0===E?void 0:E.join(""))&&void 0!==k?k:"",this.forceUpgradeOnSignin=null!==(G=d.forceUpgradeOnSignin)&&void 0!==G&&G,this.schemaVersion=d.schemaVersion}validatePassword(d){var p,E,k,G,ce,xe;const tt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,tt),this.validatePasswordCharacterOptions(d,tt),tt.isValid&&(tt.isValid=null===(p=tt.meetsMinPasswordLength)||void 0===p||p),tt.isValid&&(tt.isValid=null===(E=tt.meetsMaxPasswordLength)||void 0===E||E),tt.isValid&&(tt.isValid=null===(k=tt.containsLowercaseLetter)||void 0===k||k),tt.isValid&&(tt.isValid=null===(G=tt.containsUppercaseLetter)||void 0===G||G),tt.isValid&&(tt.isValid=null===(ce=tt.containsNumericCharacter)||void 0===ce||ce),tt.isValid&&(tt.isValid=null===(xe=tt.containsNonAlphanumericCharacter)||void 0===xe||xe),tt}validatePasswordLengthOptions(d,p){const E=this.customStrengthOptions.minPasswordLength,k=this.customStrengthOptions.maxPasswordLength;E&&(p.meetsMinPasswordLength=d.length>=E),k&&(p.meetsMaxPasswordLength=d.length<=k)}validatePasswordCharacterOptions(d,p){let E;this.updatePasswordCharacterOptionsStatuses(p,!1,!1,!1,!1);for(let k=0;k<d.length;k++)E=d.charAt(k),this.updatePasswordCharacterOptionsStatuses(p,E>="a"&&E<="z",E>="A"&&E<="Z",E>="0"&&E<="9",this.allowedNonAlphanumericCharacters.includes(E))}updatePasswordCharacterOptionsStatuses(d,p,E,k,G){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=p)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=E)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=k)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=G))}}class ho{constructor(d,p,E,k){this.app=d,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=E,this.config=k,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qo(this),this.idTokenSubscription=new Qo(this),this.beforeStateQueue=new Li(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=k.sdkClientVersion}_initializeWithPersistence(d,p){var E=this;return p&&(this._popupRedirectResolver=ft(p)),this._initializationPromise=this.queue((0,D.Z)(function*(){var k,G;if(!E._deleted&&(E.persistenceManager=yield Ut.create(E,d),!E._deleted)){if(null!==(k=E._popupRedirectResolver)&&void 0!==k&&k._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(p),E.lastNotifiedUid=(null===(G=E.currentUser)||void 0===G?void 0:G.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,D.Z)(function*(){if(d._deleted)return;const p=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||p){if(d.currentUser&&p&&d.currentUser.uid===p.uid)return d._currentUser._assign(p),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(p,!0)}})()}initializeCurrentUser(d){var p=this;return(0,D.Z)(function*(){var E;const k=yield p.assertedPersistence.getCurrentUser();let G=k,ce=!1;if(d&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const xe=null===(E=p.redirectUser)||void 0===E?void 0:E._redirectEventId,tt=G?._redirectEventId,Ot=yield p.tryRedirectSignIn(d);(!xe||xe===tt)&&Ot?.user&&(G=Ot.user,ce=!0)}if(!G)return p.directlySetCurrentUser(null);if(!G._redirectEventId){if(ce)try{yield p.beforeStateQueue.runMiddleware(G)}catch(xe){G=k,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(xe))}return G?p.reloadAndSetCurrentUserOrClear(G):p.directlySetCurrentUser(null)}return ue(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===G._redirectEventId?p.directlySetCurrentUser(G):p.reloadAndSetCurrentUserOrClear(G)})()}tryRedirectSignIn(d){var p=this;return(0,D.Z)(function*(){let E=null;try{E=yield p._popupRedirectResolver._completeRedirectFn(p,d,!0)}catch{yield p._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(d){var p=this;return(0,D.Z)(function*(){try{yield qr(d)}catch(E){if("auth/network-request-failed"!==E?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Tt(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var d=this;return(0,D.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var p=this;return(0,D.Z)(function*(){const E=d?(0,j.m9)(d):null;return E&&ue(E.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(E&&E._clone(p))})()}_updateCurrentUser(d,p=!1){var E=this;return(0,D.Z)(function*(){if(!E._deleted)return d&&ue(E.tenantId===d.tenantId,E,"tenant-id-mismatch"),p||(yield E.beforeStateQueue.runMiddleware(d)),E.queue((0,D.Z)(function*(){yield E.directlySetCurrentUser(d),E.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,D.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var p=this;return this.queue((0,D.Z)(function*(){yield p.assertedPersistence.setPersistence(ft(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var p=this;return(0,D.Z)(function*(){p._getPasswordPolicyInternal()||(yield p._updatePasswordPolicy());const E=p._getPasswordPolicyInternal();return E.schemaVersion!==p.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(p._errorFactory.create("unsupported-password-policy-schema-version",{})):E.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,D.Z)(function*(){const p=yield function Ko(_){return Oo.apply(this,arguments)}(d),E=new ws(p);null===d.tenantId?d._projectPasswordPolicy=E:d._tenantPasswordPolicies[d.tenantId]=E})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new j.LL("auth","Firebase",d())}onAuthStateChanged(d,p,E){return this.registerStateListener(this.authStateSubscription,d,p,E)}beforeAuthStateChanged(d,p){return this.beforeStateQueue.pushCallback(d,p)}onIdTokenChanged(d,p,E){return this.registerStateListener(this.idTokenSubscription,d,p,E)}authStateReady(){return new Promise((d,p)=>{if(this.currentUser)d();else{const E=this.onAuthStateChanged(()=>{E(),d()},p)}})}revokeAccessToken(d){var p=this;return(0,D.Z)(function*(){if(p.currentUser){const E=yield p.currentUser.getIdToken(),k={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:E};null!=p.tenantId&&(k.tenantId=p.tenantId),yield function K(_,d){return Q.apply(this,arguments)}(p,k)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,p){var E=this;return(0,D.Z)(function*(){const k=yield E.getOrInitRedirectPersistenceManager(p);return null===d?k.removeCurrentUser():k.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var p=this;return(0,D.Z)(function*(){if(!p.redirectPersistenceManager){const E=d&&ft(d)||p._popupRedirectResolver;ue(E,p,"argument-error"),p.redirectPersistenceManager=yield Ut.create(p,[ft(E._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(d){var p=this;return(0,D.Z)(function*(){var E,k;return p._isInitialized&&(yield p.queue((0,D.Z)(function*(){}))),(null===(E=p._currentUser)||void 0===E?void 0:E._redirectEventId)===d?p._currentUser:(null===(k=p.redirectUser)||void 0===k?void 0:k._redirectEventId)===d?p.redirectUser:null})()}_persistUserIfCurrent(d){var p=this;return(0,D.Z)(function*(){if(d===p.currentUser)return p.queue((0,D.Z)(function*(){return p.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(p=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,p,E,k){if(this._deleted)return()=>{};const G="function"==typeof p?p:p.next.bind(p);let ce=!1;const xe=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(xe,this,"internal-error"),xe.then(()=>{ce||G(this.currentUser)}),"function"==typeof p){const tt=d.addObserver(p,E,k);return()=>{ce=!0,tt()}}{const tt=d.addObserver(p);return()=>{ce=!0,tt()}}}directlySetCurrentUser(d){var p=this;return(0,D.Z)(function*(){p.currentUser&&p.currentUser!==d&&p._currentUser._stopProactiveRefresh(),d&&p.isProactiveRefreshEnabled&&d._startProactiveRefresh(),p.currentUser=d,d?yield p.assertedPersistence.setCurrentUser(d):yield p.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=di(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,D.Z)(function*(){var p;const E={"X-Client-Version":d.clientVersion};d.app.options.appId&&(E["X-Firebase-gmpid"]=d.app.options.appId);const k=yield null===(p=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();k&&(E["X-Firebase-Client"]=k);const G=yield d._getAppCheckToken();return G&&(E["X-Firebase-AppCheck"]=G),E})()}_getAppCheckToken(){var d=this;return(0,D.Z)(function*(){var p;const E=yield null===(p=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return E?.error&&function pe(_,...d){Nt.logLevel<=me.in.WARN&&Nt.warn(`Auth (${Te.SDK_VERSION}): ${_}`,...d)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function zn(_){return(0,j.m9)(_)}class Qo{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,j.ne)(p=>this.observer=p)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ss(_){return new Promise((d,p)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=d,E.onerror=k=>{const G=Ee("internal-error");G.customData=k,p(G)},E.type="text/javascript",E.charset="UTF-8",function zi(){var _,d;return null!==(d=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==d?d:document}().appendChild(E)})}function Ws(_){return`__${_}${Math.floor(1e6*Math.random())}`}class os{constructor(d){this.type="recaptcha-enterprise",this.auth=zn(d)}verify(d="verify",p=!1){var E=this;return(0,D.Z)(function*(){function G(){return G=(0,D.Z)(function*(xe){if(!p){if(null==xe.tenantId&&null!=xe._agentRecaptchaConfig)return xe._agentRecaptchaConfig.siteKey;if(null!=xe.tenantId&&void 0!==xe._tenantRecaptchaConfigs[xe.tenantId])return xe._tenantRecaptchaConfigs[xe.tenantId].siteKey}return new Promise(function(){var tt=(0,D.Z)(function*(Ot,qt){We(xe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(zt=>{if(void 0!==zt.recaptchaKey){const Mr=new Oe(zt);return null==xe.tenantId?xe._agentRecaptchaConfig=Mr:xe._tenantRecaptchaConfigs[xe.tenantId]=Mr,Ot(Mr.siteKey)}qt(new Error("recaptcha Enterprise site key undefined"))}).catch(zt=>{qt(zt)})});return function(Ot,qt){return tt.apply(this,arguments)}}())}),G.apply(this,arguments)}function ce(xe,tt,Ot){const qt=window.grecaptcha;xr(qt)?qt.enterprise.ready(()=>{qt.enterprise.execute(xe,{action:d}).then(zt=>{tt(zt)}).catch(()=>{tt("NO_RECAPTCHA")})}):Ot(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((xe,tt)=>{(function k(xe){return G.apply(this,arguments)})(E.auth).then(Ot=>{if(!p&&xr(window.grecaptcha))ce(Ot,xe,tt);else{if(typeof window>"u")return void tt(new Error("RecaptchaVerifier is only supported in browser"));ss("https://www.google.com/recaptcha/enterprise.js?render="+Ot).then(()=>{ce(Ot,xe,tt)}).catch(qt=>{tt(qt)})}}).catch(Ot=>{tt(Ot)})})})()}}function qs(_,d,p){return va.apply(this,arguments)}function va(){return(va=(0,D.Z)(function*(_,d,p,E=!1){const k=new os(_);let G;try{G=yield k.verify(p)}catch{G=yield k.verify(p,!0)}const ce=Object.assign({},d);return Object.assign(ce,E?{captchaResp:G}:{captchaResponse:G}),Object.assign(ce,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ce,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ce})).apply(this,arguments)}function Us(_,d,p,E){return Yo.apply(this,arguments)}function Yo(){return Yo=(0,D.Z)(function*(_,d,p,E){var k;if(null!==(k=_._getRecaptchaConfig())&&void 0!==k&&k.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const G=yield qs(_,d,p,"getOobCode"===p);return E(_,G)}return E(_,d).catch(function(){var G=(0,D.Z)(function*(ce){if("auth/missing-recaptcha-token"===ce.code){console.log(`${p} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const xe=yield qs(_,d,p,"getOobCode"===p);return E(_,xe)}return Promise.reject(ce)});return function(ce){return G.apply(this,arguments)}}())}),Yo.apply(this,arguments)}function Gi(_){const d=_.indexOf(":");return d<0?"":_.substr(0,d+1)}function fo(_){if(!_)return null;const d=Number(_);return isNaN(d)?null:d}class Wi{constructor(d,p){this.providerId=d,this.signInMethod=p}toJSON(){return Gt("not implemented")}_getIdTokenResponse(d){return Gt("not implemented")}_linkToIdToken(d,p){return Gt("not implemented")}_getReauthenticationResolver(d){return Gt("not implemented")}}function Qa(_,d){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,D.Z)(function*(_,d){return Le(_,"POST","/v1/accounts:resetPassword",De(_,d))})).apply(this,arguments)}function Qs(){return(Qs=(0,D.Z)(function*(_,d){return Le(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Rn(_,d){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,D.Z)(function*(_,d){return Le(_,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function Bs(){return(Bs=(0,D.Z)(function*(_,d){return Le(_,"POST","/v1/accounts:update",De(_,d))})).apply(this,arguments)}function Ci(_,d){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,D.Z)(function*(_,d){return St(_,"POST","/v1/accounts:signInWithPassword",De(_,d))})).apply(this,arguments)}function ko(_,d){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,D.Z)(function*(_,d){return Le(_,"POST","/v1/accounts:sendOobCode",De(_,d))})).apply(this,arguments)}function Au(){return(Au=(0,D.Z)(function*(_,d){return ko(_,d)})).apply(this,arguments)}function ur(_,d){return Et.apply(this,arguments)}function Et(){return(Et=(0,D.Z)(function*(_,d){return ko(_,d)})).apply(this,arguments)}function gn(_,d){return Un.apply(this,arguments)}function Un(){return(Un=(0,D.Z)(function*(_,d){return ko(_,d)})).apply(this,arguments)}function Si(){return(Si=(0,D.Z)(function*(_,d){return ko(_,d)})).apply(this,arguments)}function Js(){return(Js=(0,D.Z)(function*(_,d){return St(_,"POST","/v1/accounts:signInWithEmailLink",De(_,d))})).apply(this,arguments)}function as(){return(as=(0,D.Z)(function*(_,d){return St(_,"POST","/v1/accounts:signInWithEmailLink",De(_,d))})).apply(this,arguments)}class hi extends Wi{constructor(d,p,E,k=null){super("password",E),this._email=d,this._password=p,this._tenantId=k}static _fromEmailAndPassword(d,p){return new hi(d,p,"password")}static _fromEmailAndCode(d,p,E=null){return new hi(d,p,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(d){var p=this;return(0,D.Z)(function*(){switch(p.signInMethod){case"password":return Us(d,{returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ci);case"emailLink":return function jr(_,d){return Js.apply(this,arguments)}(d,{email:p._email,oobCode:p._password});default:Fe(d,"internal-error")}})()}_linkToIdToken(d,p){var E=this;return(0,D.Z)(function*(){switch(E.signInMethod){case"password":return Us(d,{idToken:p,returnSecureToken:!0,email:E._email,password:E._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Rn);case"emailLink":return function Tr(_,d){return as.apply(this,arguments)}(d,{idToken:p,email:E._email,oobCode:E._password});default:Fe(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Zt(_,d){return qi.apply(this,arguments)}function qi(){return(qi=(0,D.Z)(function*(_,d){return St(_,"POST","/v1/accounts:signInWithIdp",De(_,d))})).apply(this,arguments)}class ii extends Wi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const p=new ii(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(p.idToken=d.idToken),d.accessToken&&(p.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(p.nonce=d.nonce),d.pendingToken&&(p.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(p.accessToken=d.oauthToken,p.secret=d.oauthTokenSecret):Fe("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:E,signInMethod:k}=p,G=(0,ye._T)(p,["providerId","signInMethod"]);if(!E||!k)return null;const ce=new ii(E,k);return ce.idToken=G.idToken||void 0,ce.accessToken=G.accessToken||void 0,ce.secret=G.secret,ce.nonce=G.nonce,ce.pendingToken=G.pendingToken||null,ce}_getIdTokenResponse(d){return Zt(d,this.buildRequest())}_linkToIdToken(d,p){const E=this.buildRequest();return E.idToken=p,Zt(d,E)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,Zt(d,p)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),d.postBody=(0,j.xO)(p)}return d}}function Kn(){return(Kn=(0,D.Z)(function*(_,d){return Le(_,"POST","/v1/accounts:sendVerificationCode",De(_,d))})).apply(this,arguments)}function Kr(){return(Kr=(0,D.Z)(function*(_,d){return St(_,"POST","/v1/accounts:signInWithPhoneNumber",De(_,d))})).apply(this,arguments)}function Ja(){return(Ja=(0,D.Z)(function*(_,d){const p=yield St(_,"POST","/v1/accounts:signInWithPhoneNumber",De(_,d));if(p.temporaryProof)throw bn(_,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const fs={USER_NOT_FOUND:"user-not-found"};function js(){return(js=(0,D.Z)(function*(_,d){return St(_,"POST","/v1/accounts:signInWithPhoneNumber",De(_,Object.assign(Object.assign({},d),{operation:"REAUTH"})),fs)})).apply(this,arguments)}class Fi extends Wi{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,p){return new Fi({verificationId:d,verificationCode:p})}static _fromTokenResponse(d,p){return new Fi({phoneNumber:d,temporaryProof:p})}_getIdTokenResponse(d){return function Ds(_,d){return Kr.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,p){return function Cs(_,d){return Ja.apply(this,arguments)}(d,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function As(_,d){return js.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:p,verificationId:E,verificationCode:k}=this.params;return d&&p?{temporaryProof:d,phoneNumber:p}:{sessionInfo:E,code:k}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:p,verificationCode:E,phoneNumber:k,temporaryProof:G}=d;return E||p||k||G?new Fi({verificationId:p,verificationCode:E,phoneNumber:k,temporaryProof:G}):null}}class Vi{constructor(d){var p,E,k,G,ce,xe;const tt=(0,j.zd)((0,j.pd)(d)),Ot=null!==(p=tt.apiKey)&&void 0!==p?p:null,qt=null!==(E=tt.oobCode)&&void 0!==E?E:null,zt=function Pn(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=tt.mode)&&void 0!==k?k:null);ue(Ot&&qt&&zt,"argument-error"),this.apiKey=Ot,this.operation=zt,this.code=qt,this.continueUrl=null!==(G=tt.continueUrl)&&void 0!==G?G:null,this.languageCode=null!==(ce=tt.languageCode)&&void 0!==ce?ce:null,this.tenantId=null!==(xe=tt.tenantId)&&void 0!==xe?xe:null}static parseLink(d){const p=function Su(_){const d=(0,j.zd)((0,j.pd)(_)).link,p=d?(0,j.zd)((0,j.pd)(d)).deep_link_id:null,E=(0,j.zd)((0,j.pd)(_)).deep_link_id;return(E?(0,j.zd)((0,j.pd)(E)).link:null)||E||p||d||_}(d);try{return new Vi(p)}catch{return null}}}let Ki=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(p,E){return hi._fromEmailAndPassword(p,E)}static credentialWithLink(p,E){const k=Vi.parseLink(E);return ue(k,"argument-error"),hi._fromEmailAndCode(p,k.code,k.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class ps{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class fi extends ps{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Ss extends fi{static credentialFromJSON(d){const p="string"==typeof d?JSON.parse(d):d;return ue("providerId"in p&&"signInMethod"in p,"argument-error"),ii._fromParams(p)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return ue(d.idToken||d.accessToken,"argument-error"),ii._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Ss.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Ss.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:E,oauthTokenSecret:k,pendingToken:G,nonce:ce,providerId:xe}=d;if(!E&&!k&&!p&&!G||!xe)return null;try{return new Ss(xe)._credential({idToken:p,accessToken:E,nonce:ce,pendingToken:G})}catch{return null}}}let pi=(()=>{class _ extends fi{constructor(){super("facebook.com")}static credential(p){return ii._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Qc=(()=>{class _ extends fi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,E){return ii._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:E})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:E,oauthAccessToken:k}=p;if(!E&&!k)return null;try{return _.credential(E,k)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Zi=(()=>{class _ extends fi{constructor(){super("github.com")}static credential(p){return ii._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class go extends Wi{constructor(d,p){super(d,d),this.pendingToken=p}_getIdTokenResponse(d){return Zt(d,this.buildRequest())}_linkToIdToken(d,p){const E=this.buildRequest();return E.idToken=p,Zt(d,E)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,Zt(d,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:E,signInMethod:k,pendingToken:G}=p;return E&&k&&G&&E===k?new go(E,G):null}static _create(d,p){return new go(d,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class mo extends ps{constructor(d){ue(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return mo.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return mo.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const p=go.fromJSON(d);return ue(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:p,providerId:E}=d;if(!p||!E)return null;try{return go._create(E,p)}catch{return null}}}let gs=(()=>{class _ extends fi{constructor(){super("twitter.com")}static credential(p,E){return ii._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:E})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:E,oauthTokenSecret:k}=p;if(!E||!k)return null;try{return _.credential(E,k)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Xa(_,d){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,D.Z)(function*(_,d){return St(_,"POST","/v1/accounts:signUp",De(_,d))})).apply(this,arguments)}class Vr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,p,E,k=!1){return(0,D.Z)(function*(){const G=yield Ce._fromIdTokenResponse(d,E,k),ce=bu(E);return new Vr({user:G,providerId:ce,_tokenResponse:E,operationType:p})})()}static _forOperation(d,p,E){return(0,D.Z)(function*(){yield d._updateTokensIfNecessary(E,!0);const k=bu(E);return new Vr({user:d,providerId:k,_tokenResponse:E,operationType:p})})()}}function bu(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function ta(){return(ta=(0,D.Z)(function*(_){var d;const p=zn(_);if(yield p._initializationPromise,null!==(d=p.currentUser)&&void 0!==d&&d.isAnonymous)return new Vr({user:p.currentUser,providerId:null,operationType:"signIn"});const E=yield Xa(p,{returnSecureToken:!0}),k=yield Vr._fromIdTokenResponse(p,"signIn",E,!0);return yield p._updateCurrentUser(k.user),k})).apply(this,arguments)}class Ui extends j.ZR{constructor(d,p,E,k){var G;super(p.code,p.message),this.operationType=E,this.user=k,Object.setPrototypeOf(this,Ui.prototype),this.customData={appName:d.name,tenantId:null!==(G=d.tenantId)&&void 0!==G?G:void 0,_serverResponse:p.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(d,p,E,k){return new Ui(d,p,E,k)}}function eu(_,d,p,E){return("reauthenticate"===d?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(G=>{throw"auth/multi-factor-auth-required"===G.code?Ui._fromErrorAndOperation(_,G,d,E):G})}function tu(_){return new Set(_.map(({providerId:d})=>d).filter(d=>!!d))}function wa(){return wa=(0,D.Z)(function*(_,d){const p=(0,j.m9)(_);yield cr(!0,p,d);const{providerUserInfo:E}=yield function en(_,d){return on.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[d]}),k=tu(E||[]);return p.providerData=p.providerData.filter(G=>k.has(G.providerId)),k.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),wa.apply(this,arguments)}function Da(_,d){return na.apply(this,arguments)}function na(){return(na=(0,D.Z)(function*(_,d,p=!1){const E=yield Gr(_,d._linkToIdToken(_.auth,yield _.getIdToken()),p);return Vr._forOperation(_,"link",E)})).apply(this,arguments)}function cr(_,d,p){return ec.apply(this,arguments)}function ec(){return(ec=(0,D.Z)(function*(_,d,p){yield qr(d);const k=!1===_?"provider-already-linked":"no-such-provider";ue(tu(d.providerData).has(p)===_,d.auth,k)})).apply(this,arguments)}function bc(_,d){return _o.apply(this,arguments)}function _o(){return(_o=(0,D.Z)(function*(_,d,p=!1){const{auth:E}=_,k="reauthenticate";try{const G=yield Gr(_,eu(E,k,d,_),p);ue(G.idToken,E,"internal-error");const ce=Fs(G.idToken);ue(ce,E,"internal-error");const{sub:xe}=ce;return ue(_.uid===xe,E,"user-mismatch"),Vr._forOperation(_,k,G)}catch(G){throw"auth/user-not-found"===G?.code&&Fe(E,"user-mismatch"),G}})).apply(this,arguments)}function Ca(_,d){return nu.apply(this,arguments)}function nu(){return(nu=(0,D.Z)(function*(_,d,p=!1){const E="signIn",k=yield eu(_,E,d),G=yield Vr._fromIdTokenResponse(_,E,k);return p||(yield _._updateCurrentUser(G.user)),G})).apply(this,arguments)}function Aa(_,d){return tc.apply(this,arguments)}function tc(){return(tc=(0,D.Z)(function*(_,d){return Ca(zn(_),d)})).apply(this,arguments)}function Sa(_,d){return nc.apply(this,arguments)}function nc(){return(nc=(0,D.Z)(function*(_,d){const p=(0,j.m9)(_);return yield cr(!1,p,d.providerId),Da(p,d)})).apply(this,arguments)}function gi(_,d){return ms.apply(this,arguments)}function ms(){return(ms=(0,D.Z)(function*(_,d){return bc((0,j.m9)(_),d)})).apply(this,arguments)}function sr(){return(sr=(0,D.Z)(function*(_,d){return St(_,"POST","/v1/accounts:signInWithCustomToken",De(_,d))})).apply(this,arguments)}function mi(){return mi=(0,D.Z)(function*(_,d){const p=zn(_),E=yield function ru(_,d){return sr.apply(this,arguments)}(p,{token:d,returnSecureToken:!0}),k=yield Vr._fromIdTokenResponse(p,"signIn",E);return yield p._updateCurrentUser(k.user),k}),mi.apply(this,arguments)}class si{constructor(d,p){this.factorId=d,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(d,p){return"phoneInfo"in p?ba._fromServerResponse(d,p):"totpInfo"in p?ra._fromServerResponse(d,p):Fe(d,"internal-error")}}class ba extends si{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,p){return new ba(p)}}class ra extends si{constructor(d){super("totp",d)}static _fromServerResponse(d,p){return new ra(p)}}function ia(_,d,p){var E;ue((null===(E=p.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),ue(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),d.continueUrl=p.url,d.dynamicLinkDomain=p.dynamicLinkDomain,d.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ue(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),d.iOSBundleId=p.iOS.bundleId),p.android&&(ue(p.android.packageName.length>0,_,"missing-android-pkg-name"),d.androidInstallApp=p.android.installApp,d.androidMinimumVersionCode=p.android.minimumVersion,d.androidPackageName=p.android.packageName)}function yo(_){return iu.apply(this,arguments)}function iu(){return(iu=(0,D.Z)(function*(_){const d=zn(_);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function vo(){return(vo=(0,D.Z)(function*(_,d,p){const E=zn(_),k={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};p&&ia(E,k,p),yield Us(E,k,"getOobCode",ur)})).apply(this,arguments)}function Ra(){return Ra=(0,D.Z)(function*(_,d,p){yield Qa((0,j.m9)(_),{oobCode:d,newPassword:p}).catch(function(){var E=(0,D.Z)(function*(k){throw"auth/password-does-not-meet-requirements"===k.code&&yo(_),k});return function(k){return E.apply(this,arguments)}}())}),Ra.apply(this,arguments)}function Eo(){return Eo=(0,D.Z)(function*(_,d){yield function Di(_,d){return Bs.apply(this,arguments)}((0,j.m9)(_),{oobCode:d})}),Eo.apply(this,arguments)}function sa(_,d){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,D.Z)(function*(_,d){const p=(0,j.m9)(_),E=yield Qa(p,{oobCode:d}),k=E.requestType;switch(ue(k,p,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(E.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(E.mfaInfo,p,"internal-error");default:ue(E.email,p,"internal-error")}let G=null;return E.mfaInfo&&(G=si._fromServerResponse(zn(p),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:G},operation:k}})).apply(this,arguments)}function Pa(){return(Pa=(0,D.Z)(function*(_,d){const{data:p}=yield sa((0,j.m9)(_),d);return p.email})).apply(this,arguments)}function sc(){return(sc=(0,D.Z)(function*(_,d,p){const E=zn(_),ce=yield Us(E,{returnSecureToken:!0,email:d,password:p,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xa).catch(tt=>{throw"auth/password-does-not-meet-requirements"===tt.code&&yo(_),tt}),xe=yield Vr._fromIdTokenResponse(E,"signIn",ce);return yield E._updateCurrentUser(xe.user),xe})).apply(this,arguments)}function Ma(){return(Ma=(0,D.Z)(function*(_,d,p){const E=zn(_),k={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function G(ce,xe){ue(xe.handleCodeInApp,E,"argument-error"),xe&&ia(E,ce,xe)})(k,p),yield Us(E,k,"getOobCode",gn)})).apply(this,arguments)}function xa(){return(xa=(0,D.Z)(function*(_,d,p){const E=(0,j.m9)(_),k=Ki.credentialWithLink(d,p||_r());return ue(k._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Aa(E,k)})).apply(this,arguments)}function Xs(){return(Xs=(0,D.Z)(function*(_,d){return Le(_,"POST","/v1/accounts:createAuthUri",De(_,d))})).apply(this,arguments)}function ji(){return ji=(0,D.Z)(function*(_,d){const E={identifier:d,continueUri:Qn()?_r():"http://localhost"},{signinMethods:k}=yield function Pc(_,d){return Xs.apply(this,arguments)}((0,j.m9)(_),E);return k||[]}),ji.apply(this,arguments)}function A(){return A=(0,D.Z)(function*(_,d){const p=(0,j.m9)(_),k={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};d&&ia(p.auth,k,d);const{email:G}=yield function Ya(_,d){return Au.apply(this,arguments)}(p.auth,k);G!==_.email&&(yield _.reload())}),A.apply(this,arguments)}function O(){return O=(0,D.Z)(function*(_,d,p){const E=(0,j.m9)(_),G={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:d};p&&ia(E.auth,G,p);const{email:ce}=yield function kr(_,d){return Si.apply(this,arguments)}(E.auth,G);ce!==_.email&&(yield _.reload())}),O.apply(this,arguments)}function oe(){return(oe=(0,D.Z)(function*(_,d){return Le(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ke(){return Ke=(0,D.Z)(function*(_,{displayName:d,photoURL:p}){if(void 0===d&&void 0===p)return;const E=(0,j.m9)(_),G={idToken:yield E.getIdToken(),displayName:d,photoUrl:p,returnSecureToken:!0},ce=yield Gr(E,function B(_,d){return oe.apply(this,arguments)}(E.auth,G));E.displayName=ce.displayName||null,E.photoURL=ce.photoUrl||null;const xe=E.providerData.find(({providerId:tt})=>"password"===tt);xe&&(xe.displayName=E.displayName,xe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ce)}),Ke.apply(this,arguments)}function xn(_,d,p){return yn.apply(this,arguments)}function yn(){return yn=(0,D.Z)(function*(_,d,p){const{auth:E}=_,G={idToken:yield _.getIdToken(),returnSecureToken:!0};d&&(G.email=d),p&&(G.password=p);const ce=yield Gr(_,function ri(_,d){return Qs.apply(this,arguments)}(E,G));yield _._updateTokensIfNecessary(ce,!0)}),yn.apply(this,arguments)}class Tn{constructor(d,p,E={}){this.isNewUser=d,this.providerId=p,this.profile=E}}class Zn extends Tn{constructor(d,p,E,k){super(d,p,E),this.username=k}}class Or extends Tn{constructor(d,p){super(d,"facebook.com",p)}}class Ri extends Zn{constructor(d,p){super(d,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Pi extends Tn{constructor(d,p){super(d,"google.com",p)}}class Zr extends Zn{constructor(d,p,E){super(d,"twitter.com",p,E)}}function Qi(_){const{user:d,_tokenResponse:p}=_;return d.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Yt(_){var d,p;if(!_)return null;const{providerId:E}=_,k=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},G=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&_?.idToken){const ce=null===(p=null===(d=Fs(_.idToken))||void 0===d?void 0:d.firebase)||void 0===p?void 0:p.sign_in_provider;if(ce)return new Tn(G,"anonymous"!==ce&&"custom"!==ce?ce:null)}if(!E)return null;switch(E){case"facebook.com":return new Or(G,k);case"github.com":return new Ri(G,k);case"google.com":return new Pi(G,k);case"twitter.com":return new Zr(G,k,_.screenName||null);case"custom":case"anonymous":return new Tn(G,null);default:return new Tn(G,E,k)}}(p)}class Mi{constructor(d,p,E){this.type=d,this.credential=p,this.user=E}static _fromIdtoken(d,p){return new Mi("enroll",d,p)}static _fromMfaPendingCredential(d){return new Mi("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var p,E;if(d?.multiFactorSession){if(null!==(p=d.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Mi._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(E=d.multiFactorSession)&&void 0!==E&&E.idToken)return Mi._fromIdtoken(d.multiFactorSession.idToken)}return null}}class to{constructor(d,p,E){this.session=d,this.hints=p,this.signInResolver=E}static _fromError(d,p){const E=zn(d),k=p.customData._serverResponse,G=(k.mfaInfo||[]).map(xe=>si._fromServerResponse(E,xe));ue(k.mfaPendingCredential,E,"internal-error");const ce=Mi._fromMfaPendingCredential(k.mfaPendingCredential);return new to(ce,G,function(){var xe=(0,D.Z)(function*(tt){const Ot=yield tt._process(E,ce);delete k.mfaInfo,delete k.mfaPendingCredential;const qt=Object.assign(Object.assign({},k),{idToken:Ot.idToken,refreshToken:Ot.refreshToken});switch(p.operationType){case"signIn":const zt=yield Vr._fromIdTokenResponse(E,p.operationType,qt);return yield E._updateCurrentUser(zt.user),zt;case"reauthenticate":return ue(p.user,E,"internal-error"),Vr._forOperation(p.user,p.operationType,qt);default:Fe(E,"internal-error")}});return function(tt){return xe.apply(this,arguments)}}())}resolveSignIn(d){var p=this;return(0,D.Z)(function*(){return p.signInResolver(d)})()}}class Bt{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(E=>si._fromServerResponse(d.auth,E)))})}static _fromUser(d){return new Bt(d)}getSession(){var d=this;return(0,D.Z)(function*(){return Mi._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,p){var E=this;return(0,D.Z)(function*(){const k=d,G=yield E.getSession(),ce=yield Gr(E.user,k._process(E.user.auth,G,p));return yield E.user._updateTokensIfNecessary(ce),E.user.reload()})()}unenroll(d){var p=this;return(0,D.Z)(function*(){const E="string"==typeof d?d:d.uid,k=yield p.user.getIdToken();try{const G=yield Gr(p.user,function Vt(_,d){return Le(_,"POST","/v2/accounts/mfaEnrollment:withdraw",De(_,d))}(p.user.auth,{idToken:k,mfaEnrollmentId:E}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ce})=>ce!==E),yield p.user._updateTokensIfNecessary(G),yield p.user.reload()}catch(G){throw G}})()}}const ln=new WeakMap,$e="__sak";class Xe{constructor(d,p){this.storageRetriever=d,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem($e,"1"),this.storage.removeItem($e),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,p){return this.storage.setItem(d,JSON.stringify(p)),Promise.resolve()}_get(d){const p=this.storage.getItem(d);return Promise.resolve(p?JSON.parse(p):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const Mu=(()=>{class _ extends Xe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,E)=>this.onStorageEvent(p,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Dr(){const _=(0,j.z$)();return lo(_)||tn(_)}()&&function is(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=vr(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const E of Object.keys(this.listeners)){const k=this.storage.getItem(E),G=this.localCache[E];k!==G&&p(E,G,k)}}onStorageEvent(p,E=!1){if(!p.key)return void this.forAllChangedKeys((xe,tt,Ot)=>{this.notifyListeners(xe,Ot)});const k=p.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xe=this.storage.getItem(k);if(p.newValue!==xe)null!==p.newValue?this.storage.setItem(k,p.newValue):this.storage.removeItem(k);else if(this.localCache[k]===p.newValue&&!E)return}const G=()=>{const xe=this.storage.getItem(k);!E&&this.localCache[k]===xe||this.notifyListeners(k,xe)},ce=this.storage.getItem(k);!function yr(){return(0,j.w1)()&&10===document.documentMode}()||ce===p.newValue||p.newValue===p.oldValue?G():setTimeout(G,10)}notifyListeners(p,E){this.localCache[p]=E;const k=this.listeners[p];if(k)for(const G of Array.from(k))G(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,E,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:E,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,E){var k=()=>super._set,G=this;return(0,D.Z)(function*(){yield k().call(G,p,E),G.localCache[p]=JSON.stringify(E)})()}_get(p){var E=()=>super._get,k=this;return(0,D.Z)(function*(){const G=yield E().call(k,p);return k.localCache[p]=JSON.stringify(G),G})()}_remove(p){var E=()=>super._remove,k=this;return(0,D.Z)(function*(){yield E().call(k,p),delete k.localCache[p]})()}}return _.type="LOCAL",_})(),oi=(()=>{class _ extends Xe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,E){}_removeListener(p,E){}}return _.type="SESSION",_})();let _d=(()=>{class _{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const E=this.receivers.find(G=>G.isListeningto(p));if(E)return E;const k=new _(p);return this.receivers.push(k),k}isListeningto(p){return this.eventTarget===p}handleEvent(p){var E=this;return(0,D.Z)(function*(){const k=p,{eventId:G,eventType:ce,data:xe}=k.data,tt=E.handlersMap[ce];if(!tt?.size)return;k.ports[0].postMessage({status:"ack",eventId:G,eventType:ce});const Ot=Array.from(tt).map(function(){var zt=(0,D.Z)(function*(Mr){return Mr(k.origin,xe)});return function(Mr){return zt.apply(this,arguments)}}()),qt=yield function xu(_){return Promise.all(_.map(function(){var d=(0,D.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(E){return{fulfilled:!1,reason:E}}});return function(p){return d.apply(this,arguments)}}()))}(Ot);k.ports[0].postMessage({status:"done",eventId:G,eventType:ce,response:qt})})()}_subscribe(p,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(E)}_unsubscribe(p,E){this.handlersMap[p]&&E&&this.handlersMap[p].delete(E),(!E||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function it(_="",d=10){let p="";for(let E=0;E<d;E++)p+=Math.floor(10*Math.random());return _+p}class Jn{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,p,E=50){var k=this;return(0,D.Z)(function*(){const G=typeof MessageChannel<"u"?new MessageChannel:null;if(!G)throw new Error("connection_unavailable");let ce,xe;return new Promise((tt,Ot)=>{const qt=it("",20);G.port1.start();const zt=setTimeout(()=>{Ot(new Error("unsupported_event"))},E);xe={messageChannel:G,onMessage(Mr){const _a=Mr;if(_a.data.eventId===qt)switch(_a.data.status){case"ack":clearTimeout(zt),ce=setTimeout(()=>{Ot(new Error("timeout"))},3e3);break;case"done":clearTimeout(ce),tt(_a.data.response);break;default:clearTimeout(zt),clearTimeout(ce),Ot(new Error("invalid_response"))}}},k.handlers.add(xe),G.port1.addEventListener("message",xe.onMessage),k.target.postMessage({eventType:d,eventId:qt,data:p},[G.port2])}).finally(()=>{xe&&k.removeMessageHandler(xe)})})()}}function Ur(){return window}function kn(){return typeof Ur().WorkerGlobalScope<"u"&&"function"==typeof Ur().importScripts}function dr(){return(dr=(0,D.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Bn="firebaseLocalStorageDb",Nr="firebaseLocalStorage",Dt="fbase_key";class Lr{constructor(d){this.request=d}toPromise(){return new Promise((d,p)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function bs(_,d){return _.transaction([Nr],d?"readwrite":"readonly").objectStore(Nr)}function no(){const _=indexedDB.open(Bn,1);return new Promise((d,p)=>{_.addEventListener("error",()=>{p(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(Nr,{keyPath:Dt})}catch(k){p(k)}}),_.addEventListener("success",(0,D.Z)(function*(){const E=_.result;E.objectStoreNames.contains(Nr)?d(E):(E.close(),yield function Uo(){const _=indexedDB.deleteDatabase(Bn);return new Lr(_).toPromise()}(),d(yield no()))}))})}function yi(_,d,p){return lc.apply(this,arguments)}function lc(){return(lc=(0,D.Z)(function*(_,d,p){const E=bs(_,!0).put({[Dt]:d,value:p});return new Lr(E).toPromise()})).apply(this,arguments)}function dc(){return(dc=(0,D.Z)(function*(_,d){const p=bs(_,!1).get(d),E=yield new Lr(p).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Ou(_,d){const p=bs(_,!0).delete(d);return new Lr(p).toPromise()}const Bo=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,D.Z)(function*(){return p.db||(p.db=yield no()),p.db})()}_withRetries(p){var E=this;return(0,D.Z)(function*(){let k=0;for(;;)try{const G=yield E._openDb();return yield p(G)}catch(G){if(k++>3)throw G;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,D.Z)(function*(){return kn()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,D.Z)(function*(){p.receiver=_d._getInstance(function ka(){return kn()?self:null}()),p.receiver._subscribe("keyChanged",function(){var E=(0,D.Z)(function*(k,G){return{keyProcessed:(yield p._poll()).includes(G.key)}});return function(k,G){return E.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var E=(0,D.Z)(function*(k,G){return["keyChanged"]});return function(k,G){return E.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,D.Z)(function*(){var E,k;if(p.activeServiceWorker=yield function cc(){return dr.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Jn(p.activeServiceWorker);const G=yield p.sender._send("ping",{},800);G&&null!==(E=G[0])&&void 0!==E&&E.fulfilled&&null!==(k=G[0])&&void 0!==k&&k.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var E=this;return(0,D.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Ht(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:p},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.Z)(function*(){try{if(!indexedDB)return!1;const p=yield no();return yield yi(p,$e,"1"),yield Ou(p,$e),!0}catch{}return!1})()}_withPendingWrite(p){var E=this;return(0,D.Z)(function*(){E.pendingWrites++;try{yield p()}finally{E.pendingWrites--}})()}_set(p,E){var k=this;return(0,D.Z)(function*(){return k._withPendingWrite((0,D.Z)(function*(){return yield k._withRetries(G=>yi(G,p,E)),k.localCache[p]=E,k.notifyServiceWorker(p)}))})()}_get(p){var E=this;return(0,D.Z)(function*(){const k=yield E._withRetries(G=>function la(_,d){return dc.apply(this,arguments)}(G,p));return E.localCache[p]=k,k})()}_remove(p){var E=this;return(0,D.Z)(function*(){return E._withPendingWrite((0,D.Z)(function*(){return yield E._withRetries(k=>Ou(k,p)),delete E.localCache[p],E.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,D.Z)(function*(){const E=yield p._withRetries(ce=>{const xe=bs(ce,!1).getAll();return new Lr(xe).toPromise()});if(!E)return[];if(0!==p.pendingWrites)return[];const k=[],G=new Set;for(const{fbase_key:ce,value:xe}of E)G.add(ce),JSON.stringify(p.localCache[ce])!==JSON.stringify(xe)&&(p.notifyListeners(ce,xe),k.push(ce));for(const ce of Object.keys(p.localCache))p.localCache[ce]&&!G.has(ce)&&(p.notifyListeners(ce,null),k.push(ce));return k})()}notifyListeners(p,E){this.localCache[p]=E;const k=this.listeners[p];if(k)for(const G of Array.from(k))G(E)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,D.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})(),uu=1e12;class w{constructor(d){this.auth=d,this.counter=uu,this._widgets=new Map}render(d,p){const E=this.counter;return this._widgets.set(E,new b(d,this.auth.name,p||{})),this.counter++,E}reset(d){var p;const E=d||uu;null===(p=this._widgets.get(E))||void 0===p||p.delete(),this._widgets.delete(E)}getResponse(d){var p;return(null===(p=this._widgets.get(d||uu))||void 0===p?void 0:p.getResponse())||""}execute(d){var p=this;return(0,D.Z)(function*(){var E;return null===(E=p._widgets.get(d||uu))||void 0===E||E.execute(),""})()}}class b{constructor(d,p,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof d?document.getElementById(d):d;ue(k,"argument-error",{appName:p}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function I(_){const d=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)d.push(p.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":p}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const R=Ws("rcb"),N=new It(3e4,6e4);class te{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Ur().grecaptcha)||void 0===d||!d.render)}load(d,p=""){return ue(function je(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(p),d,"argument-error"),this.shouldResolveImmediately(p)&&Hn(Ur().grecaptcha)?Promise.resolve(Ur().grecaptcha):new Promise((E,k)=>{const G=Ur().setTimeout(()=>{k(Ee(d,"network-request-failed"))},N.get());Ur()[R]=()=>{Ur().clearTimeout(G),delete Ur()[R];const xe=Ur().grecaptcha;if(!xe||!Hn(xe))return void k(Ee(d,"internal-error"));const tt=xe.render;xe.render=(Ot,qt)=>{const zt=tt(Ot,qt);return this.counter++,zt},this.hostLanguage=p,E(xe)},ss(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:R,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(G),k(Ee(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var p;return!(null===(p=Ur().grecaptcha)||void 0===p||!p.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Re{load(d){return(0,D.Z)(function*(){return new w(d)})()}clearedOneInstance(){}}const Ct="recaptcha",hn={theme:"light",type:"image"};class pr{constructor(d,p,E=Object.assign({},hn)){this.parameters=E,this.type=Ct,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=zn(d),this.isInvisible="invisible"===this.parameters.size,ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof p?document.getElementById(p):p;ue(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Re:new te,this.validateStartingState()}verify(){var d=this;return(0,D.Z)(function*(){d.assertNotDestroyed();const p=yield d.render(),E=d.getAssertedRecaptcha();return E.getResponse(p)||new Promise(G=>{const ce=xe=>{xe&&(d.tokenChangeListeners.delete(ce),G(xe))};d.tokenChangeListeners.add(ce),d.isInvisible&&E.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return p=>{if(this.tokenChangeListeners.forEach(E=>E(p)),"function"==typeof d)d(p);else if("string"==typeof d){const E=Ur()[d];"function"==typeof E&&E(p)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,D.Z)(function*(){if(yield d.init(),!d.widgetId){let p=d.container;if(!d.isInvisible){const E=document.createElement("div");p.appendChild(E),p=E}d.widgetId=d.getAssertedRecaptcha().render(p,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,D.Z)(function*(){ue(Qn()&&!kn(),d.auth,"internal-error"),yield function fn(){let _=null;return new Promise(d=>{"complete"!==document.readyState?(_=()=>d(),window.addEventListener("load",_)):d()}).catch(d=>{throw _&&window.removeEventListener("load",_),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const p=yield function Qe(_){return fe.apply(this,arguments)}(d.auth);ue(p,d.auth,"internal-error"),d.parameters.sitekey=p})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _s{constructor(d,p){this.verificationId=d,this.onConfirmation=p}confirm(d){const p=Fi._fromVerification(this.verificationId,d);return this.onConfirmation(p)}}function xi(){return(xi=(0,D.Z)(function*(_,d,p){const E=zn(_),k=yield Lu(E,d,(0,j.m9)(p));return new _s(k,G=>Aa(E,G))})).apply(this,arguments)}function ys(){return(ys=(0,D.Z)(function*(_,d,p){const E=(0,j.m9)(_);yield cr(!1,E,"phone");const k=yield Lu(E.auth,d,(0,j.m9)(p));return new _s(k,G=>Sa(E,G))})).apply(this,arguments)}function hc(){return(hc=(0,D.Z)(function*(_,d,p){const E=(0,j.m9)(_),k=yield Lu(E.auth,d,(0,j.m9)(p));return new _s(k,G=>gi(E,G))})).apply(this,arguments)}function Lu(_,d,p){return Oc.apply(this,arguments)}function Oc(){return Oc=(0,D.Z)(function*(_,d,p){var E;const k=yield p.verify();try{let G;if(ue("string"==typeof k,_,"argument-error"),ue(p.type===Ct,_,"argument-error"),G="string"==typeof d?{phoneNumber:d}:d,"session"in G){const ce=G.session;if("phoneNumber"in G)return ue("enroll"===ce.type,_,"internal-error"),(yield function ut(_,d){return Le(_,"POST","/v2/accounts/mfaEnrollment:start",De(_,d))}(_,{idToken:ce.credential,phoneEnrollmentInfo:{phoneNumber:G.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{ue("signin"===ce.type,_,"internal-error");const xe=(null===(E=G.multiFactorHint)||void 0===E?void 0:E.uid)||G.multiFactorUid;return ue(xe,_,"missing-multi-factor-info"),(yield function La(_,d){return Le(_,"POST","/v2/accounts/mfaSignIn:start",De(_,d))}(_,{mfaPendingCredential:ce.credential,mfaEnrollmentId:xe,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ce}=yield function Pr(_,d){return Kn.apply(this,arguments)}(_,{phoneNumber:G.phoneNumber,recaptchaToken:k});return ce}}finally{p._reset()}}),Oc.apply(this,arguments)}function lu(){return(lu=(0,D.Z)(function*(_,d){yield Da((0,j.m9)(_),d)})).apply(this,arguments)}let Fa=(()=>{class _{constructor(p){this.providerId=_.PROVIDER_ID,this.auth=zn(p)}verifyPhoneNumber(p,E){return Lu(this.auth,p,(0,j.m9)(E))}static credential(p,E){return Fi._fromVerification(p,E)}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:E,temporaryProof:k}=p;return E&&k?Fi._fromTokenResponse(E,k):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Fu(_,d){return d?ft(d):(ue(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class yd extends Wi{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Zt(d,this._buildIdpRequest())}_linkToIdToken(d,p){return Zt(d,this._buildIdpRequest(p))}_getReauthenticationResolver(d){return Zt(d,this._buildIdpRequest())}_buildIdpRequest(d){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(p.idToken=d),p}}function Sl(_){return Ca(_.auth,new yd(_),_.bypassAuthState)}function Vf(_){const{auth:d,user:p}=_;return ue(p,d,"internal-error"),bc(p,new yd(_),_.bypassAuthState)}function vd(_){return bl.apply(this,arguments)}function bl(){return(bl=(0,D.Z)(function*(_){const{auth:d,user:p}=_;return ue(p,d,"internal-error"),Da(p,new yd(_),_.bypassAuthState)})).apply(this,arguments)}class mh{constructor(d,p,E,k,G=!1){this.auth=d,this.resolver=E,this.user=k,this.bypassAuthState=G,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var d=this;return new Promise(function(){var p=(0,D.Z)(function*(E,k){d.pendingPromise={resolve:E,reject:k};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(G){d.reject(G)}});return function(E,k){return p.apply(this,arguments)}}())}onAuthEvent(d){var p=this;return(0,D.Z)(function*(){const{urlResponse:E,sessionId:k,postBody:G,tenantId:ce,error:xe,type:tt}=d;if(xe)return void p.reject(xe);const Ot={auth:p.auth,requestUri:E,sessionId:k,tenantId:ce||void 0,postBody:G||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(tt)(Ot))}catch(qt){p.reject(qt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Sl;case"linkViaPopup":case"linkViaRedirect":return vd;case"reauthViaPopup":case"reauthViaRedirect":return Vf;default:Fe(this.auth,"internal-error")}}resolve(d){gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _h=new It(2e3,1e4);function da(){return(da=(0,D.Z)(function*(_,d,p){const E=zn(_);Ze(_,d,ps);const k=Fu(E,p);return new Nc(E,"signInViaPopup",d,k).executeNotNull()})).apply(this,arguments)}function du(){return(du=(0,D.Z)(function*(_,d,p){const E=(0,j.m9)(_);Ze(E.auth,d,ps);const k=Fu(E.auth,p);return new Nc(E.auth,"reauthViaPopup",d,k,E).executeNotNull()})).apply(this,arguments)}function fc(){return(fc=(0,D.Z)(function*(_,d,p){const E=(0,j.m9)(_);Ze(E.auth,d,ps);const k=Fu(E.auth,p);return new Nc(E.auth,"linkViaPopup",d,k,E).executeNotNull()})).apply(this,arguments)}let Nc=(()=>{class _ extends mh{constructor(p,E,k,G,ce){super(p,E,G,ce),this.provider=k,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var p=this;return(0,D.Z)(function*(){const E=yield p.execute();return ue(E,p.auth,"internal-error"),E})()}onExecution(){var p=this;return(0,D.Z)(function*(){gt(1===p.filter.length,"Popup operations only handle one event");const E=it();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],E),p.authWindow.associatedEvent=E,p.resolver._originValidation(p.auth).catch(k=>{p.reject(k)}),p.resolver._isIframeWebStorageSupported(p.auth,k=>{k||p.reject(Ee(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const p=()=>{var E,k;this.pollId=null!==(k=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==k&&k.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,_h.get())};p()}}return _.currentPopupAction=null,_})();const $i="pendingRedirect",ds=new Map;class ha extends mh{constructor(d,p,E=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,E),this.eventId=null}execute(){var d=()=>super.execute,p=this;return(0,D.Z)(function*(){let E=ds.get(p.auth._key());if(!E){try{const G=(yield function Ps(_,d){return gr.apply(this,arguments)}(p.resolver,p.auth))?yield d().call(p):null;E=()=>Promise.resolve(G)}catch(k){E=()=>Promise.reject(k)}ds.set(p.auth._key(),E)}return p.bypassAuthState||ds.set(p.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(d){var p=()=>super.onAuthEvent,E=this;return(0,D.Z)(function*(){if("signInViaRedirect"===d.type)return p().call(E,d);if("unknown"!==d.type){if(d.eventId){const k=yield E.auth._redirectUserForId(d.eventId);if(k)return E.user=k,p().call(E,d);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,D.Z)(function*(){})()}cleanUp(){}}function gr(){return(gr=(0,D.Z)(function*(_,d){const p=Ji(d),E=Ua(_);if(!(yield E._isAvailable()))return!1;const k="true"===(yield E._get(p));return yield E._remove(p),k})).apply(this,arguments)}function Va(_,d){return vi.apply(this,arguments)}function vi(){return(vi=(0,D.Z)(function*(_,d){return Ua(_)._set(Ji(d),"true")})).apply(this,arguments)}function Vu(_,d){ds.set(_._key(),d)}function Ua(_){return ft(_._redirectPersistence)}function Ji(_){return wt($i,_.config.apiKey,_.name)}function Pl(_,d,p){return function Ml(_,d,p){return Qr.apply(this,arguments)}(_,d,p)}function Qr(){return(Qr=(0,D.Z)(function*(_,d,p){const E=zn(_);Ze(_,d,ps),yield E._initializationPromise;const k=Fu(E,p);return yield Va(k,E),k._openRedirect(E,d,"signInViaRedirect")})).apply(this,arguments)}function xl(_,d,p){return function Hi(_,d,p){return ar.apply(this,arguments)}(_,d,p)}function ar(){return(ar=(0,D.Z)(function*(_,d,p){const E=(0,j.m9)(_);Ze(E.auth,d,ps),yield E.auth._initializationPromise;const k=Fu(E.auth,p);yield Va(k,E.auth);const G=yield kc(E);return k._openRedirect(E.auth,d,"reauthViaRedirect",G)})).apply(this,arguments)}function Ms(_,d,p){return function el(_,d,p){return hu.apply(this,arguments)}(_,d,p)}function hu(){return(hu=(0,D.Z)(function*(_,d,p){const E=(0,j.m9)(_);Ze(E.auth,d,ps),yield E.auth._initializationPromise;const k=Fu(E.auth,p);yield cr(!1,E,d.providerId),yield Va(k,E.auth);const G=yield kc(E);return k._openRedirect(E.auth,d,"linkViaRedirect",G)})).apply(this,arguments)}function fu(){return(fu=(0,D.Z)(function*(_,d){return yield zn(_)._initializationPromise,Hs(_,d,!1)})).apply(this,arguments)}function Hs(_,d){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,D.Z)(function*(_,d,p=!1){const E=zn(_),k=Fu(E,d),ce=yield new ha(E,k,p).execute();return ce&&!p&&(delete ce.user._redirectEventId,yield E._persistUserIfCurrent(ce.user),yield E._setRedirectUser(null,d)),ce})).apply(this,arguments)}function kc(_){return ro.apply(this,arguments)}function ro(){return(ro=(0,D.Z)(function*(_){const d=it(`${_.uid}:::`);return _._redirectEventId=d,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),d})).apply(this,arguments)}class Uu{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let p=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(d,E)&&(p=!0,this.sendToConsumer(d,E),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function jo(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lc(_);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=d,p=!0)),p}sendToConsumer(d,p){var E;if(d.error&&!Lc(d)){const k=(null===(E=d.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";p.onError(Ee(this.auth,k))}else p.onAuthEvent(d)}isEventForConsumer(d,p){const E=null===p.eventId||!!d.eventId&&d.eventId===p.eventId;return p.filter.includes(d.type)&&E}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fa(d))}saveEventToCache(d){this.cachedEventUids.add(fa(d)),this.lastProcessedEventTime=Date.now()}}function fa(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(d=>d).join("-")}function Lc({type:_,error:d}){return"unknown"===_&&"auth/no-auth-event"===d?.code}function Ba(_){return Do.apply(this,arguments)}function Do(){return(Do=(0,D.Z)(function*(_,d={}){return Le(_,"GET","/v1/projects",d)})).apply(this,arguments)}const $o=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gc=/^https?/;function tl(){return(tl=(0,D.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:d}=yield Ba(_);for(const p of d)try{if(Ed(p))return}catch{}Fe(_,"unauthorized-domain")})).apply(this,arguments)}function Ed(_){const d=_r(),{protocol:p,hostname:E}=new URL(d);if(_.startsWith("chrome-extension://")){const ce=new URL(_);return""===ce.hostname&&""===E?"chrome-extension:"===p&&_.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===p&&ce.hostname===E}if(!gc.test(p))return!1;if($o.test(_))return E===_;const k=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(E)}const Ol=new It(3e4,6e4);function Fc(){const _=Ur().___jsl;if(_?.H)for(const d of Object.keys(_.H))if(_.H[d].r=_.H[d].r||[],_.H[d].L=_.H[d].L||[],_.H[d].r=[..._.H[d].L],_.CP)for(let p=0;p<_.CP.length;p++)_.CP[p]=null}let Nl=null;const Id=new It(5e3,15e3),ja="__/auth/iframe",Xi="emulator/auth/iframe",Td={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bu(_){const d=_.config;ue(d.authDomain,_,"auth-domain-config-required");const p=d.emulator?ge(d,Xi):`https://${_.config.authDomain}/${ja}`,E={apiKey:d.apiKey,appName:_.name,v:Te.SDK_VERSION},k=Mn.get(_.config.apiHost);k&&(E.eid=k);const G=_._getFrameworks();return G.length&&(E.fw=G.join(",")),`${p}?${(0,j.xO)(E).slice(1)}`}function nl(){return nl=(0,D.Z)(function*(_){const d=yield function Uf(_){return Nl=Nl||function vh(_){return new Promise((d,p)=>{var E,k,G;function ce(){Fc(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Fc(),p(Ee(_,"network-request-failed"))},timeout:Ol.get()})}if(null!==(k=null===(E=Ur().gapi)||void 0===E?void 0:E.iframes)&&void 0!==k&&k.Iframe)d(gapi.iframes.getContext());else{if(null===(G=Ur().gapi)||void 0===G||!G.load){const xe=Ws("iframefcb");return Ur()[xe]=()=>{gapi.load?ce():p(Ee(_,"network-request-failed"))},ss(`https://apis.google.com/js/api.js?onload=${xe}`).catch(tt=>p(tt))}ce()}}).catch(d=>{throw Nl=null,d})}(_),Nl}(_),p=Ur().gapi;return ue(p,_,"internal-error"),d.open({where:document.body,url:Bu(_),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Td,dontclear:!0},E=>new Promise(function(){var k=(0,D.Z)(function*(G,ce){yield E.restyle({setHideOnLeave:!1});const xe=Ee(_,"network-request-failed"),tt=Ur().setTimeout(()=>{ce(xe)},Id.get());function Ot(){Ur().clearTimeout(tt),G(E)}E.ping(Ot).then(Ot,()=>{ce(xe)})});return function(G,ce){return k.apply(this,arguments)}}()))}),nl.apply(this,arguments)}const vs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class T{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const J="__/auth/handler",ee="emulator/auth/handler",le=encodeURIComponent("fac");function Ae(_,d,p,E,k,G){return st.apply(this,arguments)}function st(){return(st=(0,D.Z)(function*(_,d,p,E,k,G){ue(_.config.authDomain,_,"auth-domain-config-required"),ue(_.config.apiKey,_,"invalid-api-key");const ce={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:E,v:Te.SDK_VERSION,eventId:k};if(d instanceof ps){d.setDefaultLanguage(_.languageCode),ce.providerId=d.providerId||"",(0,j.xb)(d.getCustomParameters())||(ce.customParameters=JSON.stringify(d.getCustomParameters()));for(const[qt,zt]of Object.entries(G||{}))ce[qt]=zt}if(d instanceof fi){const qt=d.getScopes().filter(zt=>""!==zt);qt.length>0&&(ce.scopes=qt.join(","))}_.tenantId&&(ce.tid=_.tenantId);const xe=ce;for(const qt of Object.keys(xe))void 0===xe[qt]&&delete xe[qt];const tt=yield _._getAppCheckToken(),Ot=tt?`#${le}=${encodeURIComponent(tt)}`:"";return`${function vt({config:_}){return _.emulator?ge(_,ee):`https://${_.authDomain}/${J}`}(_)}?${(0,j.xO)(xe).slice(1)}${Ot}`})).apply(this,arguments)}const Jt="webStorageSupport",Mt=class Kt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oi,this._completeRedirectFn=Hs,this._overrideRedirectResult=Vu}_openPopup(d,p,E,k){var G=this;return(0,D.Z)(function*(){var ce;gt(null===(ce=G.eventManagers[d._key()])||void 0===ce?void 0:ce.manager,"_initialize() not called before _openPopup()");const xe=yield Ae(d,p,E,_r(),k);return function x(_,d,p,E=500,k=600){const G=Math.max((window.screen.availHeight-k)/2,0).toString(),ce=Math.max((window.screen.availWidth-E)/2,0).toString();let xe="";const tt=Object.assign(Object.assign({},vs),{width:E.toString(),height:k.toString(),top:G,left:ce}),Ot=(0,j.z$)().toLowerCase();p&&(xe=Za(Ot)?"_blank":p),li(Ot)&&(d=d||"http://localhost",tt.scrollbars="yes");const qt=Object.entries(tt).reduce((Mr,[_a,xd])=>`${Mr}${_a}=${xd},`,"");if(function sn(_=(0,j.z$)()){var d;return tn(_)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Ot)&&"_self"!==xe)return function U(_,d){const p=document.createElement("a");p.href=_,p.target=d;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(E)}(d||"",xe),new T(null);const zt=window.open(d||"",xe,qt);ue(zt,_,"popup-blocked");try{zt.focus()}catch{}return new T(zt)}(d,xe,it())})()}_openRedirect(d,p,E,k){var G=this;return(0,D.Z)(function*(){return yield G._originValidation(d),function _n(_){Ur().location.href=_}(yield Ae(d,p,E,_r(),k)),new Promise(()=>{})})()}_initialize(d){const p=d._key();if(this.eventManagers[p]){const{manager:k,promise:G}=this.eventManagers[p];return k?Promise.resolve(k):(gt(G,"If manager is not set, promise should be"),G)}const E=this.initAndGetManager(d);return this.eventManagers[p]={promise:E},E.catch(()=>{delete this.eventManagers[p]}),E}initAndGetManager(d){var p=this;return(0,D.Z)(function*(){const E=yield function Vc(_){return nl.apply(this,arguments)}(d),k=new Uu(d);return E.register("authEvent",G=>(ue(G?.authEvent,d,"invalid-auth-event"),{status:k.onEvent(G.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[d._key()]={manager:k},p.iframes[d._key()]=E,k})()}_isIframeWebStorageSupported(d,p){this.iframes[d._key()].send(Jt,{type:Jt},k=>{var G;const ce=null===(G=k?.[0])||void 0===G?void 0:G[Jt];void 0!==ce&&p(!!ce),Fe(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function pa(_){return tl.apply(this,arguments)}(d)),this.originValidationPromises[p]}get _shouldInitProactively(){return vr()||lo()||tn()}};class an{constructor(d){this.factorId=d}_process(d,p,E){switch(p.type){case"enroll":return this._finalizeEnroll(d,p.credential,E);case"signin":return this._finalizeSignIn(d,p.credential);default:return Gt("unexpected MultiFactorSessionType")}}}class In extends an{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new In(d)}_finalizeEnroll(d,p,E){return function lr(_,d){return Le(_,"POST","/v2/accounts/mfaEnrollment:finalize",De(_,d))}(d,{idToken:p,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,p){return function xc(_,d){return Le(_,"POST","/v2/accounts/mfaSignIn:finalize",De(_,d))}(d,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Cr=(()=>{class _{constructor(){}static assertion(p){return In._fromCredential(p)}}return _.FACTOR_ID="phone",_})();var ai="@firebase/auth";class es{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var p=this;return(0,D.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const p=this.auth.onIdTokenChanged(E=>{d(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,p),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const p=this.internalListeners.get(d);p&&(this.internalListeners.delete(d),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xt(){return window}(0,j.Pz)("authIdTokenMaxAge"),function Co(_){(0,Te._registerComponent)(new Se.wA("auth",(d,{options:p})=>{const E=d.getProvider("app").getImmediate(),k=d.getProvider("heartbeat"),G=d.getProvider("app-check-internal"),{apiKey:ce,authDomain:xe}=E.options;ue(ce&&!ce.includes(":"),"invalid-api-key",{appName:E.name});const tt={apiKey:ce,authDomain:xe,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:di(_)},Ot=new ho(E,k,G,tt);return function Er(_,d){const p=d?.persistence||[],E=(Array.isArray(p)?p:[p]).map(ft);d?.errorMap&&_._updateErrorMap(d.errorMap),_._initializeWithPersistence(E,d?.popupRedirectResolver)}(Ot,p),Ot},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,p,E)=>{d.getProvider("auth-internal").initialize()})),(0,Te._registerComponent)(new Se.wA("auth-internal",d=>{const p=zn(d.getProvider("auth").getImmediate());return new es(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Te.registerVersion)(ai,"1.4.0",function xs(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,Te.registerVersion)(ai,"1.4.0","esm2017")}("Browser");function $n(){return $n=(0,D.Z)(function*(_,d,p){var E;const{BuildInfo:k}=xt();gt(d.sessionId,"AuthEvent did not contain a session ID");const G=yield function Ll(_){return ts.apply(this,arguments)}(d.sessionId),ce={};return tn()?ce.ibi=k.packageName:be()?ce.apn=k.packageName:Fe(_,"operation-not-supported-in-this-environment"),k.displayName&&(ce.appDisplayName=k.displayName),ce.sessionId=G,Ae(_,p,d.type,void 0,null!==(E=d.eventId)&&void 0!==E?E:void 0,ce)}),$n.apply(this,arguments)}function Os(){return(Os=(0,D.Z)(function*(_){const{BuildInfo:d}=xt(),p={};tn()?p.iosBundleId=d.packageName:be()?p.androidPackageName=d.packageName:Fe(_,"operation-not-supported-in-this-environment"),yield Ba(_,p)})).apply(this,arguments)}function Sr(){return(Sr=(0,D.Z)(function*(_,d,p){const{cordova:E}=xt();let k=()=>{};try{yield new Promise((G,ce)=>{let xe=null;function tt(){var zt;G();const Mr=null===(zt=E.plugins.browsertab)||void 0===zt?void 0:zt.close;"function"==typeof Mr&&Mr(),"function"==typeof p?.close&&p.close()}function Ot(){xe||(xe=window.setTimeout(()=>{ce(Ee(_,"redirect-cancelled-by-user"))},2e3))}function qt(){"visible"===document?.visibilityState&&Ot()}d.addPassiveListener(tt),document.addEventListener("resume",Ot,!1),be()&&document.addEventListener("visibilitychange",qt,!1),k=()=>{d.removePassiveListener(tt),document.removeEventListener("resume",Ot,!1),document.removeEventListener("visibilitychange",qt,!1),xe&&window.clearTimeout(xe)}})}finally{k()}})).apply(this,arguments)}function ts(){return(ts=(0,D.Z)(function*(_){const d=function Es(_){if(gt(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const d=new ArrayBuffer(_.length),p=new Uint8Array(d);for(let E=0;E<_.length;E++)p[E]=_.charCodeAt(E);return p}(_),p=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(p)).map(k=>k.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class ns extends Uu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(d)),super.onEvent(d)}initialized(){var d=this;return(0,D.Z)(function*(){yield d.initPromise})()}}function Eh(_){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,D.Z)(function*(_){const d=yield Ul()._get(Bf(_));return d&&(yield Ul()._remove(Bf(_))),d})).apply(this,arguments)}function wd(){const _=[];for(let p=0;p<20;p++){const E=Math.floor(62*Math.random());_.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(E))}return _.join("")}function Ul(){return ft(Mu)}function Bf(_){return wt("authEvent",_.config.apiKey,_.name)}function Bl(_){if(!_?.includes("?"))return{};const[d,...p]=_.split("?");return(0,j.zd)(p.join("?"))}const jl=class jf{constructor(){this._redirectPersistence=oi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Hs,this._overrideRedirectResult=Vu}_initialize(d){var p=this;return(0,D.Z)(function*(){const E=d._key();let k=p.eventManagers.get(E);return k||(k=new ns(d),p.eventManagers.set(E,k),p.attachCallbackListeners(d,k)),k})()}_openPopup(d){Fe(d,"operation-not-supported-in-this-environment")}_openRedirect(d,p,E,k){var G=this;return(0,D.Z)(function*(){!function _c(_){var d,p,E,k,G,ce,xe,tt,Ot,qt;const zt=xt();ue("function"==typeof(null===(d=zt?.universalLinks)||void 0===d?void 0:d.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ue(typeof(null===(p=zt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ue("function"==typeof(null===(G=null===(k=null===(E=zt?.cordova)||void 0===E?void 0:E.plugins)||void 0===k?void 0:k.browsertab)||void 0===G?void 0:G.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(tt=null===(xe=null===(ce=zt?.cordova)||void 0===ce?void 0:ce.plugins)||void 0===xe?void 0:xe.browsertab)||void 0===tt?void 0:tt.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(qt=null===(Ot=zt?.cordova)||void 0===Ot?void 0:Ot.InAppBrowser)||void 0===qt?void 0:qt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const ce=yield G._initialize(d);yield ce.initialized(),ce.resetRedirect(),function hr(){ds.clear()}(),yield G._originValidation(d);const xe=function Fl(_,d,p=null){return{type:d,eventId:p,urlResponse:null,sessionId:wd(),postBody:null,tenantId:_.tenantId,error:Ee(_,"no-auth-event")}}(d,E,k);yield function Vl(_,d){return Ul()._set(Bf(_),d)}(d,xe);const tt=yield function vn(_,d,p){return $n.apply(this,arguments)}(d,xe,p),Ot=yield function zs(_){const{cordova:d}=xt();return new Promise(p=>{d.plugins.browsertab.isAvailable(E=>{let k=null;E?d.plugins.browsertab.openUrl(_):k=d.InAppBrowser.open(_,function Pt(_=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),p(k)})})}(tt);return function oo(_,d,p){return Sr.apply(this,arguments)}(d,ce,Ot)})()}_isIframeWebStorageSupported(d,p){throw new Error("Method not implemented.")}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Ei(_){return Os.apply(this,arguments)}(d)),this.originValidationPromises[p]}attachCallbackListeners(d,p){const{universalLinks:E,handleOpenURL:k,BuildInfo:G}=xt(),ce=setTimeout((0,D.Z)(function*(){yield Eh(d),p.onEvent(yc())}),500),xe=function(){var qt=(0,D.Z)(function*(zt){clearTimeout(ce);const Mr=yield Eh(d);let _a=null;Mr&&zt?.url&&(_a=function Ig(_,d){var p,E;const k=function S_(_){const d=Bl(_),p=d.link?decodeURIComponent(d.link):void 0,E=Bl(p).link,k=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return Bl(k).link||k||E||p||_}(d);if(k.includes("/__/auth/callback")){const G=Bl(k),ce=G.firebaseError?function Fn(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(G.firebaseError)):null,xe=null===(E=null===(p=ce?.code)||void 0===p?void 0:p.split("auth/"))||void 0===E?void 0:E[1],tt=xe?Ee(xe):null;return tt?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:tt,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:k,postBody:null}}return null}(Mr,zt.url)),p.onEvent(_a||yc())});return function(Mr){return qt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,xe);const tt=k,Ot=`${G.packageName.toLowerCase()}://`;xt().handleOpenURL=function(){var qt=(0,D.Z)(function*(zt){if(zt.toLowerCase().startsWith(Ot)&&xe({url:zt}),"function"==typeof tt)try{tt(zt)}catch(Mr){console.error(Mr)}});return function(zt){return qt.apply(this,arguments)}}()}};function yc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function ga(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function Ha(_=(0,j.z$)()){return!("file:"!==ga()&&"ionic:"!==ga()&&"capacitor:"!==ga()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function rl(){try{const _=self.localStorage,d=it();if(_)return _.setItem(d,"1"),_.removeItem(d),!function Gf(_=(0,j.z$)()){return function $u(){return(0,j.w1)()&&11===document?.documentMode}()||function zf(_=(0,j.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,j.hl)()}catch{return Dd()&&(0,j.hl)()}return!1}function Dd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hl(){return(function Th(){return"http:"===ga()||"https:"===ga()}()||(0,j.ru)()||Ha())&&!function $l(){return(0,j.b$)()||(0,j.UG)()}()&&rl()&&!Dd()}function Yr(){return Ha()&&typeof document<"u"}function il(){return(il=(0,D.Z)(function*(){return!!Yr()&&new Promise(_=>{const d=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),_(!0)})})})).apply(this,arguments)}const zo={LOCAL:"local",NONE:"none",SESSION:"session"},Hu=ue,ao="persistence";function zu(_){return Go.apply(this,arguments)}function Go(){return(Go=(0,D.Z)(function*(_){yield _._initializationPromise;const d=Uc(),p=wt(ao,_.config.apiKey,_.name);d&&d.setItem(p,_._getPersistence())})).apply(this,arguments)}function Uc(){var _;try{return(null===(_=function wh(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const Dh=ue;class So{constructor(){this.browserResolver=ft(Mt),this.cordovaResolver=ft(jl),this.underlyingResolver=null,this._redirectPersistence=oi,this._completeRedirectFn=Hs,this._overrideRedirectResult=Vu}_initialize(d){var p=this;return(0,D.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,p,E,k){var G=this;return(0,D.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._openPopup(d,p,E,k)})()}_openRedirect(d,p,E,k){var G=this;return(0,D.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._openRedirect(d,p,E,k)})()}_isIframeWebStorageSupported(d,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,p)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return Yr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Dh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,D.Z)(function*(){if(d.underlyingResolver)return;const p=yield function Cd(){return il.apply(this,arguments)}();d.underlyingResolver=p?d.cordovaResolver:d.browserResolver})()}}function Sd(_){return _.unwrap()}function Ch(_){return Wf(_)}function Wf(_){const{_tokenResponse:d}=_ instanceof j.ZR?_.customData:_;if(!d)return null;if(!(_ instanceof j.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Fa.credentialFromResult(_);const p=d.providerId;if(!p||p===ke.PASSWORD)return null;let E;switch(p){case ke.GOOGLE:E=Qc;break;case ke.FACEBOOK:E=pi;break;case ke.GITHUB:E=Zi;break;case ke.TWITTER:E=gs;break;default:const{oauthIdToken:k,oauthAccessToken:G,oauthTokenSecret:ce,pendingToken:xe,nonce:tt}=d;return G||ce||k||xe?xe?p.startsWith("saml.")?go._create(p,xe):ii._fromParams({providerId:p,signInMethod:p,pendingToken:xe,idToken:k,accessToken:G}):new Ss(p).credential({idToken:k,accessToken:G,rawNonce:tt}):null}return _ instanceof j.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function uo(_,d){return d.catch(p=>{throw p instanceof j.ZR&&function Rd(_,d){var p;const E=null===(p=d.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new Pd(_,function Vo(_,d){var p;const E=(0,j.m9)(_),k=d;return ue(d.customData.operationType,E,"argument-error"),ue(null===(p=k.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,E,"argument-error"),to._fromError(E,k)}(_,d));else if(E){const k=Wf(d),G=d;k&&(G.credential=k,G.tenantId=E.tenantId||void 0,G.email=E.email||void 0,G.phoneNumber=E.phoneNumber||void 0)}}(_,p),p}).then(p=>{const k=p.user;return{operationType:p.operationType,credential:Ch(p),additionalUserInfo:Qi(p),user:ma.getOrCreate(k)}})}function Oi(_,d){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,D.Z)(function*(_,d){const p=yield d;return{verificationId:p.verificationId,confirm:E=>uo(_,p.confirm(E))}})).apply(this,arguments)}class Pd{constructor(d,p){this.resolver=p,this.auth=function bd(_){return _.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return uo(Sd(this.auth),this.resolver.resolveSignIn(d))}}class ma{constructor(d){this._delegate=d,this.multiFactor=function bt(_){const d=(0,j.m9)(_);return ln.has(d)||ln.set(d,Bt._fromUser(d)),ln.get(d)}(d)}static getOrCreate(d){return ma.USER_MAP.has(d)||ma.USER_MAP.set(d,new ma(d)),ma.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var p=this;return(0,D.Z)(function*(){return uo(p.auth,Sa(p._delegate,d))})()}linkWithPhoneNumber(d,p){var E=this;return(0,D.Z)(function*(){return Oi(E.auth,function cu(_,d,p){return ys.apply(this,arguments)}(E._delegate,d,p))})()}linkWithPopup(d){var p=this;return(0,D.Z)(function*(){return uo(p.auth,function Xc(_,d,p){return fc.apply(this,arguments)}(p._delegate,d,So))})()}linkWithRedirect(d){var p=this;return(0,D.Z)(function*(){return yield zu(zn(p.auth)),Ms(p._delegate,d,So)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var p=this;return(0,D.Z)(function*(){return uo(p.auth,gi(p._delegate,d))})()}reauthenticateWithPhoneNumber(d,p){return Oi(this.auth,function ku(_,d,p){return hc.apply(this,arguments)}(this._delegate,d,p))}reauthenticateWithPopup(d){return uo(this.auth,function yh(_,d,p){return du.apply(this,arguments)}(this._delegate,d,So))}reauthenticateWithRedirect(d){var p=this;return(0,D.Z)(function*(){return yield zu(zn(p.auth)),xl(p._delegate,d,So)})()}sendEmailVerification(d){return function uc(_,d){return A.apply(this,arguments)}(this._delegate,d)}unlink(d){var p=this;return(0,D.Z)(function*(){return yield function wr(_,d){return wa.apply(this,arguments)}(p._delegate,d),p})()}updateEmail(d){return function Lt(_,d){return xn((0,j.m9)(_),d,null)}(this._delegate,d)}updatePassword(d){return function rr(_,d){return xn((0,j.m9)(_),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function Ff(_,d){return lu.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Be(_,d){return Ke.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,p){return function H(_,d,p){return O.apply(this,arguments)}(this._delegate,d,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ma.USER_MAP=new WeakMap;const vc=ue;let Bc=(()=>{class _{constructor(p,E){if(this.app=p,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:k}=p.options;vc(k,"invalid-api-key",{appName:p.name}),vc(k,"invalid-api-key",{appName:p.name});const G=typeof window<"u"?So:void 0;this._delegate=E.initialize({options:{persistence:Kf(k,p.name),popupRedirectResolver:G}}),this._delegate._updateErrorMap(et),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ma.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,E){!function Ks(_,d,p){const E=zn(_);ue(E._canInitEmulator,E,"emulator-config-failed"),ue(/^https?:\/\//.test(d),E,"invalid-emulator-scheme");const k=!!p?.disableWarnings,G=Gi(d),{host:ce,port:xe}=function Zs(_){const d=Gi(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(d.length));if(!p)return{host:"",port:null};const E=p[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(E);if(k){const G=k[1];return{host:G,port:fo(E.substr(G.length+1))}}{const[G,ce]=E.split(":");return{host:G,port:fo(ce)}}}(d);E.config.emulator={url:`${G}//${ce}${null===xe?"":`:${xe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ce,port:xe,protocol:G.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function Jo(){function _(){const d=document.createElement("p"),p=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,p,E)}applyActionCode(p){return function ic(_,d){return Eo.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return sa(this._delegate,p)}confirmPasswordReset(p,E){return function Ru(_,d,p){return Ra.apply(this,arguments)}(this._delegate,p,E)}createUserWithEmailAndPassword(p,E){var k=this;return(0,D.Z)(function*(){return uo(k._delegate,function oa(_,d,p){return sc.apply(this,arguments)}(k._delegate,p,E))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function ac(_,d){return ji.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Pu(_,d){const p=Vi.parseLink(d);return"EMAIL_SIGNIN"===p?.operation}(0,p)}getRedirectResult(){var p=this;return(0,D.Z)(function*(){vc(Hl(),p._delegate,"operation-not-supported-in-this-environment");const E=yield function pc(_,d){return fu.apply(this,arguments)}(p._delegate,So);return E?uo(p._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function $f(_,d){zn(_)._logFramework(d)}(this._delegate,p)}onAuthStateChanged(p,E,k){const{next:G,error:ce,complete:xe}=qf(p,E,k);return this._delegate.onAuthStateChanged(G,ce,xe)}onIdTokenChanged(p,E,k){const{next:G,error:ce,complete:xe}=qf(p,E,k);return this._delegate.onIdTokenChanged(G,ce,xe)}sendSignInLinkToEmail(p,E){return function Rc(_,d,p){return Ma.apply(this,arguments)}(this._delegate,p,E)}sendPasswordResetEmail(p,E){return function rc(_,d,p){return vo.apply(this,arguments)}(this._delegate,p,E||void 0)}setPersistence(p){var E=this;return(0,D.Z)(function*(){let k;switch(function Ad(_,d){Hu(Object.values(zo).includes(d),_,"invalid-persistence-type"),(0,j.b$)()?Hu(d!==zo.SESSION,_,"unsupported-persistence-type"):(0,j.UG)()?Hu(d===zo.NONE,_,"unsupported-persistence-type"):Dd()?Hu(d===zo.NONE||d===zo.LOCAL&&(0,j.hl)(),_,"unsupported-persistence-type"):Hu(d===zo.NONE||rl(),_,"unsupported-persistence-type")}(E._delegate,p),p){case zo.SESSION:k=oi;break;case zo.LOCAL:k=(yield ft(Bo)._isAvailable())?Bo:Mu;break;case zo.NONE:k=rn;break;default:return Fe("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(k)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return uo(this._delegate,function ea(_){return ta.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return uo(this._delegate,Aa(this._delegate,p))}signInWithCustomToken(p){return uo(this._delegate,function $r(_,d){return mi.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,E){return uo(this._delegate,function oc(_,d,p){return Aa((0,j.m9)(_),Ki.credential(d,p)).catch(function(){var E=(0,D.Z)(function*(k){throw"auth/password-does-not-meet-requirements"===k.code&&yo(_),k});return function(k){return E.apply(this,arguments)}}())}(this._delegate,p,E))}signInWithEmailLink(p,E){return uo(this._delegate,function us(_,d,p){return xa.apply(this,arguments)}(this._delegate,p,E))}signInWithPhoneNumber(p,E){return Oi(this._delegate,function $s(_,d,p){return xi.apply(this,arguments)}(this._delegate,p,E))}signInWithPopup(p){var E=this;return(0,D.Z)(function*(){return vc(Hl(),E._delegate,"operation-not-supported-in-this-environment"),uo(E._delegate,function Rl(_,d,p){return da.apply(this,arguments)}(E._delegate,p,So))})()}signInWithRedirect(p){var E=this;return(0,D.Z)(function*(){return vc(Hl(),E._delegate,"operation-not-supported-in-this-environment"),yield zu(E._delegate),Pl(E._delegate,p,So)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Fo(_,d){return Pa.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=zo,_})();function qf(_,d,p){let E=_;"function"!=typeof _&&({next:E,error:d,complete:p}=_);const k=E;return{next:ce=>k(ce&&ma.getOrCreate(ce)),error:d,complete:p}}function Kf(_,d){const p=function Ns(_,d){const p=Uc();if(!p)return[];const E=wt(ao,_,d);switch(p.getItem(E)){case zo.NONE:return[rn];case zo.LOCAL:return[Bo,oi];case zo.SESSION:return[oi];default:return[]}}(_,d);if(typeof self<"u"&&!p.includes(Bo)&&p.push(Bo),typeof window<"u")for(const E of[Mu,oi])p.includes(E)||p.push(E);return p.includes(rn)||p.push(rn),p}class zl{constructor(){this.providerId="phone",this._delegate=new Fa(Sd(se.Z.auth()))}static credential(d,p){return Fa.credential(d,p)}verifyPhoneNumber(d,p){return this._delegate.verifyPhoneNumber(d,p)}unwrap(){return this._delegate}}zl.PHONE_SIGN_IN_METHOD=Fa.PHONE_SIGN_IN_METHOD,zl.PROVIDER_ID=Fa.PROVIDER_ID;const Md=ue;class sl{constructor(d,p,E=se.Z.app()){var k;Md(null===(k=E.options)||void 0===k?void 0:k.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new pr(E.auth(),d,p),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ec(_){_.INTERNAL.registerComponent(new Se.wA("auth-compat",d=>{const p=d.getProvider("app-compat").getImmediate(),E=d.getProvider("auth");return new Bc(p,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ki,FacebookAuthProvider:pi,GithubAuthProvider:Zi,GoogleAuthProvider:Qc,OAuthProvider:Ss,SAMLAuthProvider:mo,PhoneAuthProvider:zl,PhoneMultiFactorGenerator:Cr,RecaptchaVerifier:sl,TwitterAuthProvider:gs,Auth:Bc,AuthCredential:Wi,Error:j.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.4.9")}(se.Z)},5861:(Ft,He,$)=>{function D(j,Te,me,ye,Se,V,ke){try{var ie=j[V](ke),ae=ie.value}catch(ve){return void me(ve)}ie.done?Te(ae):Promise.resolve(ae).then(ye,Se)}function se(j){return function(){var Te=this,me=arguments;return new Promise(function(ye,Se){var V=j.apply(Te,me);function ke(ae){D(V,ye,Se,ke,ie,"next",ae)}function ie(ae){D(V,ye,Se,ke,ie,"throw",ae)}ke(void 0)})}}$.d(He,{Z:()=>se})},7582:(Ft,He,$)=>{function Te(ge,he){var Me={};for(var we in ge)Object.prototype.hasOwnProperty.call(ge,we)&&he.indexOf(we)<0&&(Me[we]=ge[we]);if(null!=ge&&"function"==typeof Object.getOwnPropertySymbols){var De=0;for(we=Object.getOwnPropertySymbols(ge);De<we.length;De++)he.indexOf(we[De])<0&&Object.prototype.propertyIsEnumerable.call(ge,we[De])&&(Me[we[De]]=ge[we[De]])}return Me}function ve(ge,he,Me,we){return new(Me||(Me=Promise))(function(Le,_t){function at(un){try{St(we.next(un))}catch(Xt){_t(Xt)}}function Vn(un){try{St(we.throw(un))}catch(Xt){_t(Xt)}}function St(un){un.done?Le(un.value):function De(Le){return Le instanceof Me?Le:new Me(function(_t){_t(Le)})}(un.value).then(at,Vn)}St((we=we.apply(ge,he||[])).next())})}function re(ge){return this instanceof re?(this.v=ge,this):new re(ge)}function Fe(ge,he,Me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De,we=Me.apply(ge,he||[]),Le=[];return De={},_t("next"),_t("throw"),_t("return"),De[Symbol.asyncIterator]=function(){return this},De;function _t(Wn){we[Wn]&&(De[Wn]=function(Dn){return new Promise(function(bn,Hn){Le.push([Wn,Dn,bn,Hn])>1||at(Wn,Dn)})})}function at(Wn,Dn){try{!function Vn(Wn){Wn.value instanceof re?Promise.resolve(Wn.value.v).then(St,un):Xt(Le[0][2],Wn)}(we[Wn](Dn))}catch(bn){Xt(Le[0][3],bn)}}function St(Wn){at("next",Wn)}function un(Wn){at("throw",Wn)}function Xt(Wn,Dn){Wn(Dn),Le.shift(),Le.length&&at(Le[0][0],Le[0][1])}}function Ue(ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,he=ge[Symbol.asyncIterator];return he?he.call(ge):(ge=function nt(ge){var he="function"==typeof Symbol&&Symbol.iterator,Me=he&&ge[he],we=0;if(Me)return Me.call(ge);if(ge&&"number"==typeof ge.length)return{next:function(){return ge&&we>=ge.length&&(ge=void 0),{value:ge&&ge[we++],done:!ge}}};throw new TypeError(he?"Object is not iterable.":"Symbol.iterator is not defined.")}(ge),Me={},we("next"),we("throw"),we("return"),Me[Symbol.asyncIterator]=function(){return this},Me);function we(Le){Me[Le]=ge[Le]&&function(_t){return new Promise(function(at,Vn){!function De(Le,_t,at,Vn){Promise.resolve(Vn).then(function(St){Le({value:St,done:at})},_t)}(at,Vn,(_t=ge[Le](_t)).done,_t.value)})}}}$.d(He,{FC:()=>Fe,KL:()=>Ue,_T:()=>Te,mG:()=>ve,qq:()=>re}),"function"==typeof SuppressedError&&SuppressedError}},Ft=>{Ft(Ft.s=6662)}]);