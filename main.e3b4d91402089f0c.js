"use strict";(self.webpackChunkplanning_poker=self.webpackChunkplanning_poker||[]).push([[179],{9058:(bt,Le,$)=>{$.d(Le,{BH:()=>Ce,G6:()=>Rt,L:()=>Ne,LL:()=>Be,Pz:()=>ke,Sg:()=>Ge,UG:()=>fe,ZB:()=>De,ZR:()=>Se,aH:()=>ce,b$:()=>ur,eu:()=>we,hl:()=>_e,jU:()=>Et,m9:()=>us,ne:()=>Vn,pd:()=>vn,r3:()=>$n,ru:()=>lt,tV:()=>ue,uI:()=>rt,vZ:()=>Xn,w1:()=>lr,xO:()=>Zn,xb:()=>En,z$:()=>Qe,zd:()=>Kt});const Ee=function(me){const ee=[];let te=0;for(let J=0;J<me.length;J++){let ne=me.charCodeAt(J);ne<128?ee[te++]=ne:ne<2048?(ee[te++]=ne>>6|192,ee[te++]=63&ne|128):55296==(64512&ne)&&J+1<me.length&&56320==(64512&me.charCodeAt(J+1))?(ne=65536+((1023&ne)<<10)+(1023&me.charCodeAt(++J)),ee[te++]=ne>>18|240,ee[te++]=ne>>12&63|128,ee[te++]=ne>>6&63|128,ee[te++]=63&ne|128):(ee[te++]=ne>>12|224,ee[te++]=ne>>6&63|128,ee[te++]=63&ne|128)}return ee},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(me,ee){if(!Array.isArray(me))throw Error("encodeByteArray takes an array as a parameter");this.init_();const te=ee?this.byteToCharMapWebSafe_:this.byteToCharMap_,J=[];for(let ne=0;ne<me.length;ne+=3){const Pe=me[ne],Ze=ne+1<me.length,dt=Ze?me[ne+1]:0,Jt=ne+2<me.length,rn=Jt?me[ne+2]:0;let cr=(15&dt)<<2|rn>>6,Ci=63&rn;Jt||(Ci=64,Ze||(cr=64)),J.push(te[Pe>>2],te[(3&Pe)<<4|dt>>4],te[cr],te[Ci])}return J.join("")},encodeString(me,ee){return this.HAS_NATIVE_SUPPORT&&!ee?btoa(me):this.encodeByteArray(Ee(me),ee)},decodeString(me,ee){return this.HAS_NATIVE_SUPPORT&&!ee?atob(me):function(me){const ee=[];let te=0,J=0;for(;te<me.length;){const ne=me[te++];if(ne<128)ee[J++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const Pe=me[te++];ee[J++]=String.fromCharCode((31&ne)<<6|63&Pe)}else if(ne>239&&ne<365){const Jt=((7&ne)<<18|(63&me[te++])<<12|(63&me[te++])<<6|63&me[te++])-65536;ee[J++]=String.fromCharCode(55296+(Jt>>10)),ee[J++]=String.fromCharCode(56320+(1023&Jt))}else{const Pe=me[te++],Ze=me[te++];ee[J++]=String.fromCharCode((15&ne)<<12|(63&Pe)<<6|63&Ze)}}return ee.join("")}(this.decodeStringToByteArray(me,ee))},decodeStringToByteArray(me,ee){this.init_();const te=ee?this.charToByteMapWebSafe_:this.charToByteMap_,J=[];for(let ne=0;ne<me.length;){const Pe=te[me.charAt(ne++)],dt=ne<me.length?te[me.charAt(ne)]:0;++ne;const rn=ne<me.length?te[me.charAt(ne)]:64;++ne;const Lt=ne<me.length?te[me.charAt(ne)]:64;if(++ne,null==Pe||null==dt||null==rn||null==Lt)throw new Re;J.push(Pe<<2|dt>>4),64!==rn&&(J.push(dt<<4&240|rn>>2),64!==Lt&&J.push(rn<<6&192|Lt))}return J},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let me=0;me<this.ENCODED_VALS.length;me++)this.byteToCharMap_[me]=this.ENCODED_VALS.charAt(me),this.charToByteMap_[this.byteToCharMap_[me]]=me,this.byteToCharMapWebSafe_[me]=this.ENCODED_VALS_WEBSAFE.charAt(me),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[me]]=me,me>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(me)]=me,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(me)]=me)}}};class Re extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ne=function(me){return function(me){const ee=Ee(me);return ve.encodeByteArray(ee,!0)}(me).replace(/\./g,"")},ue=function(me){try{return ve.decodeString(me,!0)}catch(ee){console.error("base64Decode failed: ",ee)}return null};function De(me,ee){if(!(ee instanceof Object))return ee;switch(ee.constructor){case Date:return new Date(ee.getTime());case Object:void 0===me&&(me={});break;case Array:me=[];break;default:return ee}for(const te in ee)!ee.hasOwnProperty(te)||!et(te)||(me[te]=De(me[te],ee[te]));return me}function et(me){return"__proto__"!==me}const ut=()=>{try{return function Ke(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const me=process.env.__FIREBASE_DEFAULTS__;return me?JSON.parse(me):void 0})()||(()=>{if(typeof document>"u")return;let me;try{me=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ee=me&&ue(me[1]);return ee&&JSON.parse(ee)})()}catch(me){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${me}`)}},ce=()=>{var me;return null===(me=ut())||void 0===me?void 0:me.config},ke=me=>{var ee;return null===(ee=ut())||void 0===ee?void 0:ee[`_${me}`]};class Ce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ee,te)=>{this.resolve=ee,this.reject=te})}wrapCallback(ee){return(te,J)=>{te?this.reject(te):this.resolve(J),"function"==typeof ee&&(this.promise.catch(()=>{}),1===ee.length?ee(te):ee(te,J))}}}function Ge(me,ee){if(me.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const J=ee||"demo-project",ne=me.iat||0,Pe=me.sub||me.user_id;if(!Pe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ze=Object.assign({iss:`https://securetoken.google.com/${J}`,aud:J,iat:ne,exp:ne+3600,auth_time:ne,sub:Pe,user_id:Pe,firebase:{sign_in_provider:"custom",identities:{}}},me);return[Ne(JSON.stringify({alg:"none",type:"JWT"})),Ne(JSON.stringify(Ze)),""].join(".")}function Qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function rt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function fe(){var me;const ee=null===(me=ut())||void 0===me?void 0:me.forceEnvironment;if("node"===ee)return!0;if("browser"===ee)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Et(){return"object"==typeof self&&self.self===self}function lt(){const me="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof me&&void 0!==me.id}function ur(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function lr(){const me=Qe();return me.indexOf("MSIE ")>=0||me.indexOf("Trident/")>=0}function Rt(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _e(){try{return"object"==typeof indexedDB}catch{return!1}}function we(){return new Promise((me,ee)=>{try{let te=!0;const J="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(J);ne.onsuccess=()=>{ne.result.close(),te||self.indexedDB.deleteDatabase(J),me(!0)},ne.onupgradeneeded=()=>{te=!1},ne.onerror=()=>{var Pe;ee((null===(Pe=ne.error)||void 0===Pe?void 0:Pe.message)||"")}}catch(te){ee(te)}})}class Se extends Error{constructor(ee,te,J){super(te),this.code=ee,this.customData=J,this.name="FirebaseError",Object.setPrototypeOf(this,Se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Be.prototype.create)}}class Be{constructor(ee,te,J){this.service=ee,this.serviceName=te,this.errors=J}create(ee,...te){const J=te[0]||{},ne=`${this.service}/${ee}`,Pe=this.errors[ee],Ze=Pe?function yt(me,ee){return me.replace(gt,(te,J)=>{const ne=ee[J];return null!=ne?String(ne):`<${J}?>`})}(Pe,J):"Error";return new Se(ne,`${this.serviceName}: ${Ze} (${ne}).`,J)}}const gt=/\{\$([^}]+)}/g;function $n(me,ee){return Object.prototype.hasOwnProperty.call(me,ee)}function En(me){for(const ee in me)if(Object.prototype.hasOwnProperty.call(me,ee))return!1;return!0}function Xn(me,ee){if(me===ee)return!0;const te=Object.keys(me),J=Object.keys(ee);for(const ne of te){if(!J.includes(ne))return!1;const Pe=me[ne],Ze=ee[ne];if(Ui(Pe)&&Ui(Ze)){if(!Xn(Pe,Ze))return!1}else if(Pe!==Ze)return!1}for(const ne of J)if(!te.includes(ne))return!1;return!0}function Ui(me){return null!==me&&"object"==typeof me}function Zn(me){const ee=[];for(const[te,J]of Object.entries(me))Array.isArray(J)?J.forEach(ne=>{ee.push(encodeURIComponent(te)+"="+encodeURIComponent(ne))}):ee.push(encodeURIComponent(te)+"="+encodeURIComponent(J));return ee.length?"&"+ee.join("&"):""}function Kt(me){const ee={};return me.replace(/^\?/,"").split("&").forEach(J=>{if(J){const[ne,Pe]=J.split("=");ee[decodeURIComponent(ne)]=decodeURIComponent(Pe)}}),ee}function vn(me){const ee=me.indexOf("?");if(!ee)return"";const te=me.indexOf("#",ee);return me.substring(ee,te>0?te:void 0)}function Vn(me,ee){const te=new Un(me,ee);return te.subscribe.bind(te)}class Un{constructor(ee,te){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=te,this.task.then(()=>{ee(this)}).catch(J=>{this.error(J)})}next(ee){this.forEachObserver(te=>{te.next(ee)})}error(ee){this.forEachObserver(te=>{te.error(ee)}),this.close(ee)}complete(){this.forEachObserver(ee=>{ee.complete()}),this.close()}subscribe(ee,te,J){let ne;if(void 0===ee&&void 0===te&&void 0===J)throw new Error("Missing Observer.");ne=function zn(me,ee){if("object"!=typeof me||null===me)return!1;for(const te of ee)if(te in me&&"function"==typeof me[te])return!0;return!1}(ee,["next","error","complete"])?ee:{next:ee,error:te,complete:J},void 0===ne.next&&(ne.next=br),void 0===ne.error&&(ne.error=br),void 0===ne.complete&&(ne.complete=br);const Pe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch{}}),this.observers.push(ne),Pe}unsubscribeOne(ee){void 0===this.observers||void 0===this.observers[ee]||(delete this.observers[ee],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ee){if(!this.finalized)for(let te=0;te<this.observers.length;te++)this.sendOne(te,ee)}sendOne(ee,te){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ee])try{te(this.observers[ee])}catch(J){typeof console<"u"&&console.error&&console.error(J)}})}close(ee){this.finalized||(this.finalized=!0,void 0!==ee&&(this.finalError=ee),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function br(){}function us(me){return me&&me._delegate?me._delegate:me}},1626:(bt,Le,$)=>{$.r(Le),$.d(Le,{PagesModule:()=>ze});var w=$(6814),W=$(8878),ie=$(7398);class Ee{constructor(F,A,j,X){this.id=F,this.name=A,this.roomService=j,this.router=X}delete(){this.roomService.deleteRoom(this.id)}join(){this.router.navigate(["room",this.id])}}class pe{constructor(F,A,j,X=!0){this.userId=F,this.userName=A,this.value=j,this.hidden=X}updateVote(F){this.value=F}showVote(){this.hidden=!1}updateValues(F){this.updateCurrentVote(F.value),this.updateHidden(F.hidden)}updateHidden(F){this.hidden!==F&&(this.hidden=F)}updateCurrentVote(F){this.value!==F&&(this.value=F)}}class ve{constructor(F,A=[]){this.name=F,this.votes=A}vote(F){this.votes=this.votes.filter(A=>A.userId!==F.userId),this.votes.push(F)}deleteVote(F){this.votes=this.votes.filter(A=>A!==F)}showVotes(){this.votes.forEach(F=>F.showVote())}revote(){this.votes=[]}getResult(){const F=this.votes.length;return Math.round(this.votes.reduce((A,j)=>A+j.value/F,0))}updateValues(F){this.updateName(F.name),this.updateVotes(F.votes)}updateName(F){this.name===F||!F||(this.name=F)}updateVotes(F){this.votes!==F&&(0===F.length?this.votes=[]:F.forEach(A=>{const j=this.votes.find(X=>X.userId===A.userId);j?j.updateValues(A):this.pushVote(A),this.votes=this.votes.filter(X=>F.map(He=>He.userId).includes(X.userId))}))}pushVote(F){this.votes.push(new pe(F.userId,F.userName,F.value,F.hidden))}}class Re{get name(){return this._name}get creator(){return this._creator}constructor(F,A,j=[],X=0,He){this.tasks=j,this.currentTask=X,this.id=He,this._name=F,this._creator=A}createTask(F){this.tasks.push(new ve(F))}nextTask(){this.currentTask==this.tasks.length-1||this.currentTask++}previousTask(){0==this.currentTask||this.currentTask--}deleteTask(F){this.tasks=this.tasks.filter(A=>A!==F),this.setTaskIndex(0)}setTaskIndex(F){this.currentTask=F}updateValues(F){this.updateName(F.name),this.updateCreator(F.creator),this.updateTasks(F.tasks),this.updateCurrentTask(F.currentTask)}updateName(F){this._name===F||!F||(this._name=F)}updateCreator(F){this._creator===F||!F||(this._creator=F)}updateTasks(F){this.tasks!==F&&(0===F.length?this.tasks=[]:F.forEach(A=>{const j=this.tasks.find(X=>X.name===A.name);j?j.updateValues(A):this.pushTask(A),this.tasks=this.tasks.filter(X=>F.map(He=>He.name).includes(X.name))}))}pushTask(F){this.tasks.push(new ve(F.name,F.votes.map(A=>new pe(A.userId,A.userName,A.value,A.hidden))))}updateCurrentTask(F){this.currentTask!==F&&(this.currentTask=F)}}var R=$(5879);let Ne=(()=>{class M{constructor(){this.objectsForDestruction=[]}toDestroy(A){this.objectsForDestruction.push(A)}ngOnDestroy(){this.objectsForDestruction.forEach(A=>A.unsubscribe())}static#e=this.\u0275fac=function(j){return new(j||M)};static#t=this.\u0275cmp=R.Xpm({type:M,selectors:[["ng-component"]],decls:0,vars:0,template:function(j,X){},encapsulation:2})}return M})();var ue=$(9027);let he=(()=>{class M{constructor(A){this.firestore=A}createRoom(A){this.firestore.collection("rooms").add(this.roomObjectModel(A))}updateRoom(A){this.firestore.doc("rooms/"+A.id).update(this.roomObjectModel(A))}deleteRoom(A){this.firestore.doc("rooms/"+A).delete()}listenerRoom(A){return this.firestore.doc("rooms/"+A).valueChanges().pipe((0,ie.U)(j=>Object.assign({id:A},j)))}getRooms(){return this.firestore.collection("rooms").snapshotChanges().pipe((0,ie.U)(A=>A.map(this.actionToRoomModel)))}actionToRoomModel(A){const j=A.payload.doc.data();return Object.assign({id:A.payload.doc.id},j)}roomObjectModel(A){return Object.assign({name:A.name,creator:A.creator,tasks:A.tasks.map(j=>this.taskObjectModel(j)),currentTask:A.currentTask})}taskObjectModel(A){return Object.assign({name:A.name,votes:A.votes.map(j=>this.voteObjectModel(j))})}voteObjectModel(A){return Object.assign({userId:A.userId,userName:A.userName,value:A.value,hidden:A.hidden})}static#e=this.\u0275fac=function(j){return new(j||M)(R.LFG(ue.ST))};static#t=this.\u0275prov=R.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"})}return M})();var De=$(7213),et=$(5619);let Ke=(()=>{class M{constructor(){this.toDestroy=[]}ngOnDestroy(){this.toDestroy.forEach(A=>A.unsubscribe())}pushToDestroy(A){this.toDestroy.push(A)}static#e=this.\u0275fac=function(j){return new(j||M)};static#t=this.\u0275cmp=R.Xpm({type:M,selectors:[["ng-component"]],decls:0,vars:0,template:function(j,X){},encapsulation:2})}return M})(),ht=(()=>{class M{constructor(){this.escapeKeydown=new R.vpe,this.enterKeydown=new R.vpe}onEscapeKeydown(A){this.escapeKeydown.emit()}onEnterKeydown(A){this.enterKeydown.emit()}static#e=this.\u0275fac=function(j){return new(j||M)};static#t=this.\u0275dir=R.lG2({type:M,selectors:[["","modalKeydowns",""]],hostBindings:function(j,X){1&j&&R.NdJ("keydown.escape",function(ot){return X.onEscapeKeydown(ot)},!1,R.evT)("keydown.enter",function(ot){return X.onEnterKeydown(ot)},!1,R.evT)},outputs:{escapeKeydown:"escapeKeydown",enterKeydown:"enterKeydown"}})}return M})();const nt=["button"];function pt(M,F){if(1&M){const A=R.EpF();R.TgZ(0,"div",2),R.NdJ("click",function(){R.CHM(A);const X=R.oxw();return R.KtG(X.close())}),R.qZA()}}function ut(M,F){if(1&M){const A=R.EpF();R.TgZ(0,"div",3),R.NdJ("escapeKeydown",function(){R.CHM(A);const X=R.oxw();return R.KtG(X.close())}),R.TgZ(1,"div",4)(2,"h1"),R._uU(3),R.qZA()(),R.TgZ(4,"div",5),R.Hsn(5),R.qZA(),R.TgZ(6,"div",6),R.Hsn(7,1),R.qZA()()}if(2&M){const A=R.oxw();R.xp6(3),R.Oqu(A.modalTitle)}}const Ft=["*",[["button"]]],Ie=["*","button"];let ce=(()=>{class M extends Ke{constructor(){super(),this.buttons=[],this.modalTitle="",this.isOpen=new et.X(!1),this.isOpen$=this.isOpen.asObservable(),this.pushToDestroy(this.isOpen)}open(){this.isOpen.next(!0)}close(){this.isOpen.next(!1)}static#e=this.\u0275fac=function(j){return new(j||M)};static#t=this.\u0275cmp=R.Xpm({type:M,selectors:[["app-modal"]],viewQuery:function(j,X){if(1&j&&R.Gf(nt,5),2&j){let He;R.iGM(He=R.CRH())&&(X.buttons=He)}},inputs:{modalTitle:"modalTitle"},features:[R.qOj],ngContentSelectors:Ie,decls:4,vars:6,consts:[["class","background",3,"click",4,"ngIf"],["class","modal","modalKeydowns","",3,"escapeKeydown",4,"ngIf"],[1,"background",3,"click"],["modalKeydowns","",1,"modal",3,"escapeKeydown"],[1,"modal__header"],[1,"modal__body"],[1,"modal__footer"]],template:function(j,X){1&j&&(R.F$t(Ft),R.YNc(0,pt,1,0,"div",0),R.ALo(1,"async"),R.YNc(2,ut,8,1,"div",1),R.ALo(3,"async")),2&j&&(R.Q6J("ngIf",R.lcZ(1,2,X.isOpen$)),R.xp6(2),R.Q6J("ngIf",R.lcZ(3,4,X.isOpen$)))},dependencies:[w.O5,ht,w.Ov],styles:[".background[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000;opacity:.5;z-index:99}.modal[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fff;padding:20px;border-radius:8px;box-shadow:0 0 10px #00000080;z-index:100}.modal[_ngcontent-%COMP%]   .modal__header[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%]   .modal__body[_ngcontent-%COMP%]{margin-bottom:10px}.modal[_ngcontent-%COMP%]   .modal__footer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row-reverse;gap:10px}"]})}return M})();var ke=$(4176);let Ce=(()=>{class M{constructor(A){this.element=A}ngOnInit(){this.setStyle()}setStyle(){this.element.nativeElement.classList.add("main-input")}static#e=this.\u0275fac=function(j){return new(j||M)(R.Y36(R.SBq))};static#t=this.\u0275dir=R.lG2({type:M,selectors:[["","main-input",""]]})}return M})(),Ge=(()=>{class M{static#e=this.\u0275fac=function(j){return new(j||M)};static#t=this.\u0275cmp=R.Xpm({type:M,selectors:[["app-room-item"]],inputs:{room:"room"},decls:8,vars:1,consts:[[1,"room"],[1,"room__name"],[1,"buttons"],["main-button","",3,"click"],["main-button","","theme","error",3,"click"]],template:function(j,X){1&j&&(R.TgZ(0,"div",0)(1,"h2",1),R._uU(2),R.qZA(),R.TgZ(3,"div",2)(4,"button",3),R.NdJ("click",function(){return X.room.join()}),R._uU(5,"Entrar"),R.qZA(),R.TgZ(6,"button",4),R.NdJ("click",function(){return X.room.delete()}),R._uU(7,"Deletar"),R.qZA()()()),2&j&&(R.xp6(2),R.Oqu(X.room.name))},dependencies:[ke.j],styles:[".room[_ngcontent-%COMP%]{background:transparent;display:flex;justify-content:space-between}.room[_ngcontent-%COMP%]   .room__name[_ngcontent-%COMP%]{padding:0 16px}.room[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;gap:10px;margin-right:10px}"]})}return M})();const Qe=["modal"];function rt(M,F){1&M&&R._UZ(0,"app-room-item",14),2&M&&R.Q6J("room",F.$implicit)}function fe(M,F){1&M&&(R.TgZ(0,"h3",15),R._uU(1,"N\xe3o h\xe1 salas no momento!"),R.qZA())}let Et=(()=>{class M extends Ne{constructor(A,j,X){super(),this.roomService=A,this.userAuth=j,this.router=X,this.rooms=[]}ngOnInit(){this.toDestroy(this.roomService.getRooms().pipe((0,ie.U)(A=>A.map(j=>new Ee(j.id,j.name,this.roomService,this.router)))).subscribe({next:A=>this.rooms=A,error:A=>{throw A}}))}createRoom(A){this.isNullOrEmpty(A)||this.userAuth.currentUser.then(j=>this.roomService.createRoom(new Re(A,j?.uid))).finally(()=>this.modal.close())}isNullOrEmpty(A){return null==A||""===A}static#e=this.\u0275fac=function(j){return new(j||M)(R.Y36(he),R.Y36(De.zQ),R.Y36(W.F0))};static#t=this.\u0275cmp=R.Xpm({type:M,selectors:[["app-rooms"]],viewQuery:function(j,X){if(1&j&&R.Gf(Qe,5),2&j){let He;R.iGM(He=R.CRH())&&(X.modal=He.first)}},features:[R.qOj],decls:18,vars:2,consts:[[1,"rooms-content"],[1,"actions"],[1,"rooms__header"],["main-button","","theme","primary",3,"click"],[1,"rooms"],[1,"rooms__list"],[3,"room",4,"ngFor","ngForOf"],["class","no-room",4,"ngIf"],["modalTitle","Criar sala"],["modal",""],["main-input","","type","text","placeholder","Digite o nome da sala",1,"input"],["name",""],["main-button","",3,"click"],["main-button","","theme","error",3,"click"],[3,"room"],[1,"no-room"]],template:function(j,X){if(1&j){const He=R.EpF();R.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),R._uU(3,"Escolha ou crie uma sala"),R.qZA(),R.TgZ(4,"button",3),R.NdJ("click",function(){R.CHM(He);const tn=R.MAs(11);return R.KtG(tn.open())}),R._uU(5,"Criar sala"),R.qZA()(),R.TgZ(6,"div",4)(7,"div",5),R.YNc(8,rt,1,1,"app-room-item",6),R.YNc(9,fe,2,0,"h3",7),R.qZA()()(),R.TgZ(10,"app-modal",8,9),R._UZ(12,"input",10,11),R.TgZ(14,"button",12),R.NdJ("click",function(){R.CHM(He);const tn=R.MAs(13);return R.KtG(X.createRoom(tn.value))}),R._uU(15,"Criar"),R.qZA(),R.TgZ(16,"button",13),R.NdJ("click",function(){R.CHM(He);const tn=R.MAs(11);return R.KtG(tn.close())}),R._uU(17,"Cancelar"),R.qZA()()}2&j&&(R.xp6(8),R.Q6J("ngForOf",X.rooms),R.xp6(1),R.Q6J("ngIf",0==X.rooms.length))},dependencies:[w.sg,w.O5,ce,ke.j,Ce,Ge],styles:[".rooms-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{max-width:1260px;margin:0 auto 16px;display:flex;justify-content:space-between}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]{max-width:1260px;display:block;margin:0 auto}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]{border:1px solid gray;border-radius:4px;width:100%}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   app-room-item[_ngcontent-%COMP%]{display:block;padding:10px 0}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   .no-room[_ngcontent-%COMP%]{line-height:3.25rem;text-align:center}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2n){background-color:#f5f5f5}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{border-radius:4px 4px 0 0}.rooms-content[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]   .rooms__list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:last-child{border-radius:0 0 4px 4px}"]})}return M})();var lt=$(2459),ur=$(5592),Ar=$(7453),lr=$(4829),an=$(9940),It=$(8251),Rt=$(7400),_e=$(2714);let Ve=(()=>{class M{constructor(A,j){this._renderer=A,this._elementRef=j,this.onChange=X=>{},this.onTouched=()=>{}}setProperty(A,j){this._renderer.setProperty(this._elementRef.nativeElement,A,j)}registerOnTouched(A){this.onTouched=A}registerOnChange(A){this.onChange=A}setDisabledState(A){this.setProperty("disabled",A)}static#e=this.\u0275fac=function(j){return new(j||M)(R.Y36(R.Qsj),R.Y36(R.SBq))};static#t=this.\u0275dir=R.lG2({type:M})}return M})(),be=(()=>{class M extends Ve{static#e=this.\u0275fac=function(){let A;return function(X){return(A||(A=R.n5z(M)))(X||M)}}();static#t=this.\u0275dir=R.lG2({type:M,features:[R.qOj]})}return M})();const Se=new R.OlP("NgValueAccessor"),gt={provide:Se,useExisting:(0,R.Gpc)(()=>wn),multi:!0},Pt=new R.OlP("CompositionEventMode");let wn=(()=>{class M extends Ve{constructor(A,j,X){super(A,j),this._compositionMode=X,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function mr(){const M=(0,w.q)()?(0,w.q)().getUserAgent():"";return/android (\d+)/.test(M.toLowerCase())}())}writeValue(A){this.setProperty("value",A??"")}_handleInput(A){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(A)}_compositionStart(){this._composing=!0}_compositionEnd(A){this._composing=!1,this._compositionMode&&this.onChange(A)}static#e=this.\u0275fac=function(j){return new(j||M)(R.Y36(R.Qsj),R.Y36(R.SBq),R.Y36(Pt,8))};static#t=this.\u0275dir=R.lG2({type:M,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(j,X){1&j&&R.NdJ("input",function(ot){return X._handleInput(ot.target.value)})("blur",function(){return X.onTouched()})("compositionstart",function(){return X._compositionStart()})("compositionend",function(ot){return X._compositionEnd(ot.target.value)})},features:[R._Bn([gt]),R.qOj]})}return M})();const sn=new R.OlP("NgValidators"),yn=new R.OlP("NgAsyncValidators");function Vn(M){return null!=M}function Un(M){return(0,R.QGY)(M)?(0,lt.D)(M):M}function ei(M){let F={};return M.forEach(A=>{F=null!=A?{...F,...A}:F}),0===Object.keys(F).length?null:F}function zn(M,F){return F.map(A=>A(M))}function To(M){return M.map(F=>function br(M){return!M.validate}(F)?F:A=>F.validate(A))}function Qi(M){return null!=M?function kt(M){if(!M)return null;const F=M.filter(Vn);return 0==F.length?null:function(A){return ei(zn(A,F))}}(To(M)):null}function Er(M){return null!=M?function dn(M){if(!M)return null;const F=M.filter(Vn);return 0==F.length?null:function(A){return function we(...M){const F=(0,an.jO)(M),{args:A,keys:j}=(0,Ar.D)(M),X=new ur.y(He=>{const{length:ot}=A;if(!ot)return void He.complete();const tn=new Array(ot);let qn=ot,Qr=ot;for(let Si=0;Si<ot;Si++){let ni=!1;(0,lr.Xf)(A[Si]).subscribe((0,It.x)(He,Wi=>{ni||(ni=!0,Qr--),tn[Si]=Wi},()=>qn--,void 0,()=>{(!qn||!ni)&&(Qr||He.next(j?(0,_e.n)(j,tn):tn),He.complete())}))}});return F?X.pipe((0,Rt.Z)(F)):X}(zn(A,F).map(Un)).pipe((0,ie.U)(ei))}}(To(M)):null}function mn(M,F){return null===M?[F]:Array.isArray(M)?[...M,F]:[M,F]}function Yi(M){return M._rawValidators}function Hr(M){return M._rawAsyncValidators}function di(M){return M?Array.isArray(M)?M:[M]:[]}function Ur(M,F){return Array.isArray(M)?M.includes(F):M===F}function $r(M,F){const A=di(F);return di(M).forEach(X=>{Ur(A,X)||A.push(X)}),A}function Ti(M,F){return di(F).filter(A=>!Ur(M,A))}class Bi{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(F){this._rawValidators=F||[],this._composedValidatorFn=Qi(this._rawValidators)}_setAsyncValidators(F){this._rawAsyncValidators=F||[],this._composedAsyncValidatorFn=Er(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(F){this._onDestroyCallbacks.push(F)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(F=>F()),this._onDestroyCallbacks=[]}reset(F=void 0){this.control&&this.control.reset(F)}hasError(F,A){return!!this.control&&this.control.hasError(F,A)}getError(F,A){return this.control?this.control.getError(F,A):null}}class xr extends Bi{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class us{constructor(F){this._cd=F}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let te=(()=>{class M extends us{constructor(A){super(A)}static#e=this.\u0275fac=function(j){return new(j||M)(R.Y36(xr,2))};static#t=this.\u0275dir=R.lG2({type:M,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(j,X){2&j&&R.ekj("ng-untouched",X.isUntouched)("ng-touched",X.isTouched)("ng-pristine",X.isPristine)("ng-dirty",X.isDirty)("ng-valid",X.isValid)("ng-invalid",X.isInvalid)("ng-pending",X.isPending)},features:[R.qOj]})}return M})();const Tt="VALID",Xt="INVALID",Gn="PENDING",Wn="DISABLED";function Qs(M){return null!=M&&!Array.isArray(M)&&"object"==typeof M}class Qo{constructor(F,A){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(F),this._assignAsyncValidators(A)}get validator(){return this._composedValidatorFn}set validator(F){this._rawValidators=this._composedValidatorFn=F}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(F){this._rawAsyncValidators=this._composedAsyncValidatorFn=F}get parent(){return this._parent}get valid(){return this.status===Tt}get invalid(){return this.status===Xt}get pending(){return this.status==Gn}get disabled(){return this.status===Wn}get enabled(){return this.status!==Wn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(F){this._assignValidators(F)}setAsyncValidators(F){this._assignAsyncValidators(F)}addValidators(F){this.setValidators($r(F,this._rawValidators))}addAsyncValidators(F){this.setAsyncValidators($r(F,this._rawAsyncValidators))}removeValidators(F){this.setValidators(Ti(F,this._rawValidators))}removeAsyncValidators(F){this.setAsyncValidators(Ti(F,this._rawAsyncValidators))}hasValidator(F){return Ur(this._rawValidators,F)}hasAsyncValidator(F){return Ur(this._rawAsyncValidators,F)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(F={}){this.touched=!0,this._parent&&!F.onlySelf&&this._parent.markAsTouched(F)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(F=>F.markAllAsTouched())}markAsUntouched(F={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(A=>{A.markAsUntouched({onlySelf:!0})}),this._parent&&!F.onlySelf&&this._parent._updateTouched(F)}markAsDirty(F={}){this.pristine=!1,this._parent&&!F.onlySelf&&this._parent.markAsDirty(F)}markAsPristine(F={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(A=>{A.markAsPristine({onlySelf:!0})}),this._parent&&!F.onlySelf&&this._parent._updatePristine(F)}markAsPending(F={}){this.status=Gn,!1!==F.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!F.onlySelf&&this._parent.markAsPending(F)}disable(F={}){const A=this._parentMarkedDirty(F.onlySelf);this.status=Wn,this.errors=null,this._forEachChild(j=>{j.disable({...F,onlySelf:!0})}),this._updateValue(),!1!==F.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...F,skipPristineCheck:A}),this._onDisabledChange.forEach(j=>j(!0))}enable(F={}){const A=this._parentMarkedDirty(F.onlySelf);this.status=Tt,this._forEachChild(j=>{j.enable({...F,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:F.emitEvent}),this._updateAncestors({...F,skipPristineCheck:A}),this._onDisabledChange.forEach(j=>j(!1))}_updateAncestors(F){this._parent&&!F.onlySelf&&(this._parent.updateValueAndValidity(F),F.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(F){this._parent=F}getRawValue(){return this.value}updateValueAndValidity(F={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tt||this.status===Gn)&&this._runAsyncValidator(F.emitEvent)),!1!==F.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!F.onlySelf&&this._parent.updateValueAndValidity(F)}_updateTreeValidity(F={emitEvent:!0}){this._forEachChild(A=>A._updateTreeValidity(F)),this.updateValueAndValidity({onlySelf:!0,emitEvent:F.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wn:Tt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(F){if(this.asyncValidator){this.status=Gn,this._hasOwnPendingAsyncValidator=!0;const A=Un(this.asyncValidator(this));this._asyncValidationSubscription=A.subscribe(j=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(j,{emitEvent:F})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(F,A={}){this.errors=F,this._updateControlsErrors(!1!==A.emitEvent)}get(F){let A=F;return null==A||(Array.isArray(A)||(A=A.split(".")),0===A.length)?null:A.reduce((j,X)=>j&&j._find(X),this)}getError(F,A){const j=A?this.get(A):this;return j&&j.errors?j.errors[F]:null}hasError(F,A){return!!this.getError(F,A)}get root(){let F=this;for(;F._parent;)F=F._parent;return F}_updateControlsErrors(F){this.status=this._calculateStatus(),F&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(F)}_initObservables(){this.valueChanges=new R.vpe,this.statusChanges=new R.vpe}_calculateStatus(){return this._allControlsDisabled()?Wn:this.errors?Xt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Gn)?Gn:this._anyControlsHaveStatus(Xt)?Xt:Tt}_anyControlsHaveStatus(F){return this._anyControls(A=>A.status===F)}_anyControlsDirty(){return this._anyControls(F=>F.dirty)}_anyControlsTouched(){return this._anyControls(F=>F.touched)}_updatePristine(F={}){this.pristine=!this._anyControlsDirty(),this._parent&&!F.onlySelf&&this._parent._updatePristine(F)}_updateTouched(F={}){this.touched=this._anyControlsTouched(),this._parent&&!F.onlySelf&&this._parent._updateTouched(F)}_registerOnCollectionChange(F){this._onCollectionChange=F}_setUpdateStrategy(F){Qs(F)&&null!=F.updateOn&&(this._updateOn=F.updateOn)}_parentMarkedDirty(F){return!F&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(F){return null}_assignValidators(F){this._rawValidators=Array.isArray(F)?F.slice():F,this._composedValidatorFn=function ti(M){return Array.isArray(M)?Qi(M):M||null}(this._rawValidators)}_assignAsyncValidators(F){this._rawAsyncValidators=Array.isArray(F)?F.slice():F,this._composedAsyncValidatorFn=function Do(M){return Array.isArray(M)?Er(M):M||null}(this._rawAsyncValidators)}}const Xi=new R.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>mo}),mo="always";function zr(M,F,A=mo){(function cs(M,F){const A=Yi(M);null!==F.validator?M.setValidators(mn(A,F.validator)):"function"==typeof A&&M.setValidators([A]);const j=Hr(M);null!==F.asyncValidator?M.setAsyncValidators(mn(j,F.asyncValidator)):"function"==typeof j&&M.setAsyncValidators([j]);const X=()=>M.updateValueAndValidity();ws(F._rawValidators,X),ws(F._rawAsyncValidators,X)})(M,F),F.valueAccessor.writeValue(M.value),(M.disabled||"always"===A)&&F.valueAccessor.setDisabledState?.(M.disabled),function Gr(M,F){F.valueAccessor.registerOnChange(A=>{M._pendingValue=A,M._pendingChange=!0,M._pendingDirty=!0,"change"===M.updateOn&&fi(M,F)})}(M,F),function Fo(M,F){const A=(j,X)=>{F.valueAccessor.writeValue(j),X&&F.viewToModelUpdate(j)};M.registerOnChange(A),F._registerOnDestroy(()=>{M._unregisterOnChange(A)})}(M,F),function mu(M,F){F.valueAccessor.registerOnTouched(()=>{M._pendingTouched=!0,"blur"===M.updateOn&&M._pendingChange&&fi(M,F),"submit"!==M.updateOn&&M.markAsTouched()})}(M,F),function Ni(M,F){if(F.valueAccessor.setDisabledState){const A=j=>{F.valueAccessor.setDisabledState(j)};M.registerOnDisabledChange(A),F._registerOnDestroy(()=>{M._unregisterOnDisabledChange(A)})}}(M,F)}function hi(M,F,A=!0){const j=()=>{};F.valueAccessor&&(F.valueAccessor.registerOnChange(j),F.valueAccessor.registerOnTouched(j)),function Xs(M,F){let A=!1;if(null!==M){if(null!==F.validator){const X=Yi(M);if(Array.isArray(X)&&X.length>0){const He=X.filter(ot=>ot!==F.validator);He.length!==X.length&&(A=!0,M.setValidators(He))}}if(null!==F.asyncValidator){const X=Hr(M);if(Array.isArray(X)&&X.length>0){const He=X.filter(ot=>ot!==F.asyncValidator);He.length!==X.length&&(A=!0,M.setAsyncValidators(He))}}}const j=()=>{};return ws(F._rawValidators,j),ws(F._rawAsyncValidators,j),A}(M,F),M&&(F._invokeOnDestroyCallbacks(),M._registerOnCollectionChange(()=>{}))}function ws(M,F){M.forEach(A=>{A.registerOnValidatorChange&&A.registerOnValidatorChange(F)})}function fi(M,F){M._pendingDirty&&M.markAsDirty(),M.setValue(M._pendingValue,{emitModelToViewChange:!1}),F.viewToModelUpdate(M._pendingValue),M._pendingChange=!1}function Vs(M,F){const A=M.indexOf(F);A>-1&&M.splice(A,1)}function Ts(M){return"object"==typeof M&&null!==M&&2===Object.keys(M).length&&"value"in M&&"disabled"in M}const Cs=class extends Qo{constructor(F=null,A,j){super(function ii(M){return(Qs(M)?M.validators:M)||null}(A),function ls(M,F){return(Qs(F)?F.asyncValidators:M)||null}(j,A)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(F),this._setUpdateStrategy(A),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qs(A)&&(A.nonNullable||A.initialValueIsDefault)&&(this.defaultValue=Ts(F)?F.value:F)}setValue(F,A={}){this.value=this._pendingValue=F,this._onChange.length&&!1!==A.emitModelToViewChange&&this._onChange.forEach(j=>j(this.value,!1!==A.emitViewToModelChange)),this.updateValueAndValidity(A)}patchValue(F,A={}){this.setValue(F,A)}reset(F=this.defaultValue,A={}){this._applyFormState(F),this.markAsPristine(A),this.markAsUntouched(A),this.setValue(this.value,A),this._pendingChange=!1}_updateValue(){}_anyControls(F){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(F){this._onChange.push(F)}_unregisterOnChange(F){Vs(this._onChange,F)}registerOnDisabledChange(F){this._onDisabledChange.push(F)}_unregisterOnDisabledChange(F){Vs(this._onDisabledChange,F)}_forEachChild(F){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(F){Ts(F)?(this.value=this._pendingValue=F.value,F.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=F}};let $i=(()=>{class M{static#e=this.\u0275fac=function(j){return new(j||M)};static#t=this.\u0275mod=R.oAB({type:M});static#n=this.\u0275inj=R.cJS({})}return M})();const es=new R.OlP("NgModelWithFormControlWarning"),Bs={provide:xr,useExisting:(0,R.Gpc)(()=>zi)};let zi=(()=>{class M extends xr{set isDisabled(A){}static#e=this._ngModelWarningSentOnce=!1;constructor(A,j,X,He,ot){super(),this._ngModelWarningConfig=He,this.callSetDisabledState=ot,this.update=new R.vpe,this._ngModelWarningSent=!1,this._setValidators(A),this._setAsyncValidators(j),this.valueAccessor=function er(M,F){if(!F)return null;let A,j,X;return Array.isArray(F),F.forEach(He=>{He.constructor===wn?A=He:function Fs(M){return Object.getPrototypeOf(M.constructor)===be}(He)?j=He:X=He}),X||j||A||null}(0,X)}ngOnChanges(A){if(this._isControlChanged(A)){const j=A.form.previousValue;j&&hi(j,this,!1),zr(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}(function Wr(M,F){if(!M.hasOwnProperty("model"))return!1;const A=M.model;return!!A.isFirstChange()||!Object.is(F,A.currentValue)})(A,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&hi(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}_isControlChanged(A){return A.hasOwnProperty("form")}static#t=this.\u0275fac=function(j){return new(j||M)(R.Y36(sn,10),R.Y36(yn,10),R.Y36(Se,10),R.Y36(es,8),R.Y36(Xi,8))};static#n=this.\u0275dir=R.lG2({type:M,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[R._Bn([Bs]),R.qOj,R.TTD]})}return M})(),ir=(()=>{class M{static#e=this.\u0275fac=function(j){return new(j||M)};static#t=this.\u0275mod=R.oAB({type:M});static#n=this.\u0275inj=R.cJS({imports:[$i]})}return M})(),So=(()=>{class M{static withConfig(A){return{ngModule:M,providers:[{provide:Xi,useValue:A.callSetDisabledState??mo}]}}static#e=this.\u0275fac=function(j){return new(j||M)};static#t=this.\u0275mod=R.oAB({type:M});static#n=this.\u0275inj=R.cJS({imports:[ir]})}return M})(),ro=(()=>{class M{static withConfig(A){return{ngModule:M,providers:[{provide:es,useValue:A.warnOnNgModelWithFormControl??"always"},{provide:Xi,useValue:A.callSetDisabledState??mo}]}}static#e=this.\u0275fac=function(j){return new(j||M)};static#t=this.\u0275mod=R.oAB({type:M});static#n=this.\u0275inj=R.cJS({imports:[ir]})}return M})();const Ka=["modal"];function wa(M,F){if(1&M){const A=R.EpF();R.TgZ(0,"div",13)(1,"div",14)(2,"button",9),R.NdJ("click",function(){R.CHM(A);const X=R.oxw();return R.KtG(X.setTask(0))}),R._uU(3),R.qZA(),R.TgZ(4,"button",9),R.NdJ("click",function(){R.CHM(A);const X=R.oxw();return R.KtG(X.previousTask())}),R._uU(5),R.qZA()(),R.TgZ(6,"h3"),R._uU(7),R.qZA(),R.TgZ(8,"div",15)(9,"button",9),R.NdJ("click",function(){R.CHM(A);const X=R.oxw();return R.KtG(X.nextTask())}),R._uU(10),R.qZA(),R.TgZ(11,"button",9),R.NdJ("click",function(){R.CHM(A);const X=R.oxw();return R.KtG(X.setTask(X.room.tasks.length-1))}),R._uU(12),R.qZA()()()}if(2&M){const A=R.oxw();R.xp6(2),R.Q6J("disabled",0==A.room.currentTask),R.xp6(1),R.Oqu("<<"),R.xp6(1),R.Q6J("disabled",0==A.room.currentTask),R.xp6(1),R.Oqu("<"),R.xp6(2),R.Oqu(A.room.tasks[A.room.currentTask].name),R.xp6(2),R.Q6J("disabled",A.room.currentTask==A.room.tasks.length-1),R.xp6(1),R.Oqu(">"),R.xp6(1),R.Q6J("disabled",A.room.currentTask==A.room.tasks.length-1),R.xp6(1),R.Oqu(">>")}}function yu(M,F){1&M&&(R.TgZ(0,"h3",16),R._uU(1,"N\xe3o h\xe1 tasks no momento"),R.qZA())}function Ro(M,F){if(1&M){const A=R.EpF();R.TgZ(0,"div",17)(1,"span",18),R._uU(2),R.qZA(),R.TgZ(3,"button",19),R.NdJ("click",function(){const He=R.CHM(A).$implicit,ot=R.oxw();return R.KtG(ot.deleteTask(He))}),R._uU(4,"delete"),R.qZA()()}if(2&M){const A=F.$implicit;R.xp6(2),R.Oqu(A.name)}}function aa(M,F){1&M&&(R.TgZ(0,"h3",20),R._uU(1,"N\xe3o h\xe1 tasks no momento"),R.qZA())}let ps=(()=>{class M{constructor(A){this.roomService=A,this.createTaskForm=new Cs("")}ngOnInit(){}nextTask(){this.room.nextTask(),this.roomService.updateRoom(this.room)}previousTask(){this.room.previousTask(),this.roomService.updateRoom(this.room)}setTask(A){this.room.setTaskIndex(A),this.roomService.updateRoom(this.room)}createTask(A){this.room.createTask(A),this.createTaskForm.reset(),this.roomService.updateRoom(this.room)}deleteTask(A){this.room.deleteTask(A),this.roomService.updateRoom(this.room)}static#e=this.\u0275fac=function(j){return new(j||M)(R.Y36(he))};static#t=this.\u0275cmp=R.Xpm({type:M,selectors:[["app-tasks"]],viewQuery:function(j,X){if(1&j&&R.Gf(Ka,5),2&j){let He;R.iGM(He=R.CRH())&&(X.modal=He.first)}},inputs:{room:"room"},decls:16,vars:6,consts:[[1,"update-tasks"],["main-button","",1,"update-tasks-btn",3,"click"],["class","tasks-control",4,"ngIf","ngIfElse"],["noTasks",""],["modalTitle","Tasks"],["modal",""],[1,"create-task"],["main-input","","type","text","placeholder","Digite o nome da task",3,"formControl","keyup"],["name",""],["main-button","",3,"disabled","click"],[1,"task__list"],["class","task",4,"ngFor","ngForOf"],["class","no-tasks-modal",4,"ngIf"],[1,"tasks-control"],[1,"tasks-control__previous"],[1,"tasks-control__next"],[1,"no-tasks"],[1,"task"],[1,"task__name"],["main-button","","theme","error",3,"click"],[1,"no-tasks-modal"]],template:function(j,X){if(1&j){const He=R.EpF();R.TgZ(0,"div",0)(1,"button",1),R.NdJ("click",function(){R.CHM(He);const tn=R.MAs(7);return R.KtG(tn.open())}),R._uU(2,"Atualizar tasks"),R.qZA()(),R.YNc(3,wa,13,9,"div",2),R.YNc(4,yu,2,0,"ng-template",null,3,R.W1O),R.TgZ(6,"app-modal",4,5)(8,"div",6)(9,"input",7,8),R.NdJ("keyup",function(){return 0}),R.qZA(),R.TgZ(11,"button",9),R.NdJ("click",function(){R.CHM(He);const tn=R.MAs(10);return X.createTask(tn.value),R.KtG(tn.focus())}),R._uU(12,"Criar"),R.qZA()(),R.TgZ(13,"div",10),R.YNc(14,Ro,5,1,"div",11),R.YNc(15,aa,2,0,"h3",12),R.qZA()()}if(2&j){const He=R.MAs(5),ot=R.MAs(10);R.xp6(3),R.Q6J("ngIf",X.room.tasks[X.room.currentTask])("ngIfElse",He),R.xp6(6),R.Q6J("formControl",X.createTaskForm),R.xp6(2),R.Q6J("disabled",!ot.value),R.xp6(3),R.Q6J("ngForOf",X.room.tasks),R.xp6(1),R.Q6J("ngIf",0==X.room.tasks.length)}},dependencies:[w.sg,w.O5,ce,ke.j,Ce,wn,te,zi],styles:[".update-tasks[_ngcontent-%COMP%]{margin-bottom:1rem;display:flex;flex-direction:row-reverse}.tasks-control[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;background-color:transparent;border:2px solid #9e9e9e;color:#2e2e2e;border-radius:4px}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%], .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%]{display:flex;gap:5px}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background:transparent}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled), .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled){color:#2e2e2e}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled):hover, .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled):hover{background:#bdbdbd;color:#2e2e2e}.tasks-control[_ngcontent-%COMP%]   .tasks-control__previous[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled):active, .tasks-control[_ngcontent-%COMP%]   .tasks-control__next[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled):active{background:#424242;color:#c2c2c2}.no-tasks[_ngcontent-%COMP%]{border:1px solid gray;border-radius:4px;line-height:3.25rem;text-align:center}app-modal[_ngcontent-%COMP%]   .create-task[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:16px}app-modal[_ngcontent-%COMP%]   .create-task[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]{border:1px solid gray;border-radius:4px}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2n){background-color:#f5f5f5}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-radius:4px 4px 0 0}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-radius:0 0 4px 4px}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   .no-tasks-modal[_ngcontent-%COMP%]{line-height:3.25rem;text-align:center}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem}app-modal[_ngcontent-%COMP%]   .task__list[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]   .task__name[_ngcontent-%COMP%]{max-width:50vw;min-width:180px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;margin-right:1rem}"]})}return M})();class Ei{constructor(F,A,j=!1,X){this.type=F,this.value=A,this.isFliped=j,this.creator=X}toggleFlip(){this.isFliped=!this.isFliped}}var Zr=$(6825);const jo=[(0,Zr.X$)("hover",[(0,Zr.SB)("true",(0,Zr.oB)({transform:"translateY(-20%)"})),(0,Zr.SB)("false",(0,Zr.oB)({transform:"translateY(0)"})),(0,Zr.eR)("true <=> false",(0,Zr.jt)("200ms ease-in-out"))])];var Rs=function(M){return M[M.DIAMONDS=1]="DIAMONDS",M[M.SPADES=2]="SPADES",M[M.HEARTS=3]="HEARTS",M[M.CLUBS=4]="CLUBS",M}(Rs||{});const hl=[(0,Zr.X$)("flipAnimation",[(0,Zr.SB)("true",(0,Zr.oB)({transform:"rotateY(179deg)"})),(0,Zr.SB)("false",(0,Zr.oB)({transform:"rotateY(0)"})),(0,Zr.eR)("true => false",(0,Zr.jt)("500ms ease-out")),(0,Zr.eR)("false => true",(0,Zr.jt)("500ms ease-in"))])];function Ta(M,F){if(1&M&&(R.TgZ(0,"span",10),R._uU(1),R.qZA()),2&M){const A=R.oxw();R.xp6(1),R.Oqu(A.card.creator)}}function Za(M,F){if(1&M&&(R.TgZ(0,"span",10),R._uU(1),R.qZA()),2&M){const A=R.oxw();R.xp6(1),R.Oqu(A.card.creator)}}let vu=(()=>{class M{constructor(){this.isHovered=!1}getCardType(){switch(this.card.type){case Rs.HEARTS:return"\u2665";case Rs.DIAMONDS:return"\u2666";case Rs.SPADES:return"\u2660";case Rs.CLUBS:return"\u2663"}}getCardValue(){switch(this.card.value){case 1:return"A";case 11:return"J";case 12:return"Q";case 13:return"K";default:return this.card.value}}getClasses(){return{"card-front--red":[Rs.HEARTS,Rs.DIAMONDS].includes(this.card.type),"card-front--black":[Rs.SPADES,Rs.CLUBS].includes(this.card.type)}}changeIsHovered(A){this.isHovered="mouseenter"===A.type}static#e=this.\u0275fac=function(j){return new(j||M)};static#t=this.\u0275cmp=R.Xpm({type:M,selectors:[["app-card"]],hostBindings:function(j,X){1&j&&R.NdJ("mouseenter",function(ot){return X.changeIsHovered(ot)})("mouseleave",function(ot){return X.changeIsHovered(ot)})},inputs:{card:"card"},decls:14,vars:7,consts:[[1,"card"],[1,"card-side","card-front",3,"ngClass"],["class","creator-name",4,"ngIf"],[1,"retangle"],[1,"card-type"],[1,"card-value"],[1,"number"],[1,"type"],[1,"card-side","card-back"],["src","assets/images/back-card.png","alt","card back",1,"back-image"],[1,"creator-name"]],template:function(j,X){1&j&&(R.TgZ(0,"div",0)(1,"div",1),R.YNc(2,Ta,2,1,"span",2),R.TgZ(3,"div",3)(4,"span",4),R._uU(5),R.qZA()(),R.TgZ(6,"div",5)(7,"span",6),R._uU(8),R.qZA(),R.TgZ(9,"span",7),R._uU(10),R.qZA()()(),R.TgZ(11,"div",8),R.YNc(12,Za,2,1,"span",2),R._UZ(13,"img",9),R.qZA()()),2&j&&(R.Q6J("@flipAnimation",X.card.isFliped),R.xp6(1),R.Q6J("ngClass",X.getClasses()),R.xp6(1),R.Q6J("ngIf",X.card.creator),R.xp6(3),R.Oqu(X.getCardType()),R.xp6(3),R.Oqu(X.getCardValue()),R.xp6(2),R.Oqu(X.getCardType()),R.xp6(2),R.Q6J("ngIf",X.card.creator))},dependencies:[w.mk,w.O5],styles:[".card[_ngcontent-%COMP%]{position:relative;width:6rem;height:8rem;background-color:#f8f9fa;border-radius:8px;box-shadow:0 0 10px #00000026;transform-style:preserve-3d;transform:transform 1s}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;transform:rotateY(0)}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .retangle[_ngcontent-%COMP%]{width:60%;height:65%;border-radius:6px;display:flex;align-items:center;justify-content:center}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .retangle[_ngcontent-%COMP%]   .card-type[_ngcontent-%COMP%]{font-size:2rem}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{position:absolute;top:0;left:.5rem}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{font-size:.75rem}.card[_ngcontent-%COMP%]   .card-front[_ngcontent-%COMP%]   .creator-name[_ngcontent-%COMP%]{position:absolute;top:0;right:.5rem;font-size:.75rem;max-width:3.25rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:700}.card[_ngcontent-%COMP%]   .card-front--red[_ngcontent-%COMP%]{color:red}.card[_ngcontent-%COMP%]   .card-front--red[_ngcontent-%COMP%]   .retangle[_ngcontent-%COMP%]{border:2px solid red}.card[_ngcontent-%COMP%]   .card-front--black[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]   .card-front--black[_ngcontent-%COMP%]   .retangle[_ngcontent-%COMP%]{border:2px solid black}.card[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]{transform:rotateY(-180deg)}.card[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]   .back-image[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:8px;background-size:cover;background-position:center}.card[_ngcontent-%COMP%]   .card-back[_ngcontent-%COMP%]   .creator-name[_ngcontent-%COMP%]{position:absolute;display:block;top:.25rem;right:.25rem;max-width:5rem;padding:0 .5rem;font-size:.75rem;line-height:1.5rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:700;background:black;color:#fff;border:2px solid white;border-radius:6px}.card[_ngcontent-%COMP%]   .card-side[_ngcontent-%COMP%]{backface-visibility:hidden;width:100%;height:100%;border-radius:8px;position:absolute;-webkit-user-select:none;user-select:none}"],data:{animation:hl}})}return M})();function is(M,F){if(1&M){const A=R.EpF();R.TgZ(0,"div",5)(1,"button",6),R.NdJ("click",function(){R.CHM(A);const X=R.oxw();return R.KtG(X.showVotes())}),R._uU(2,"Virar cartas"),R.qZA(),R.TgZ(3,"button",7),R.NdJ("click",function(){R.CHM(A);const X=R.oxw();return R.KtG(X.revote())}),R._uU(4,"Revotar"),R.qZA()()}if(2&M){const A=R.oxw();R.xp6(1),R.Q6J("disabled",A.flippedVotes),R.xp6(2),R.Q6J("disabled",!A.flippedVotes)}}function ua(M,F){if(1&M&&R._UZ(0,"app-card",8),2&M){const A=F.$implicit,j=R.oxw();R.Q6J("card",j.mapVote(A))}}function $u(M,F){if(1&M){const A=R.EpF();R.TgZ(0,"app-card",11,12),R.NdJ("click",function(){const He=R.CHM(A).$implicit,ot=R.oxw(2);return R.KtG(ot.vote(He.value))}),R.qZA()}if(2&M){const A=F.$implicit,j=R.MAs(1);R.Q6J("@hover",j.isHovered)("card",A)}}function io(M,F){if(1&M&&(R.TgZ(0,"div",9),R.YNc(1,$u,2,2,"app-card",10),R.qZA()),2&M){const A=R.oxw();R.xp6(1),R.Q6J("ngForOf",A.cards)}}let fl=(()=>{class M{get task(){return this.room.tasks[this.room.currentTask]}get flippedVotes(){return this.task.votes.some(A=>!A.hidden)}constructor(A,j){this.userAuth=A,this.roomService=j,this.cards=[new Ei(1,1),new Ei(2,2),new Ei(3,3),new Ei(4,5),new Ei(1,8),new Ei(2,13),new Ei(3,21),new Ei(4,34),new Ei(1,55),new Ei(2,89)]}mapVote(A){return new Ei(Rs.HEARTS,A.value,A.hidden,A.userName)}vote(A){this.flippedVotes||this.userAuth.currentUser.then(j=>this.task.vote(new pe(j?.uid,j?.displayName,A))).finally(()=>this.roomService.updateRoom(this.room))}showVotes(){this.flippedVotes||(this.task.showVotes(),this.roomService.updateRoom(this.room))}revote(){this.task.revote(),this.roomService.updateRoom(this.room)}getResult(){return this.task.getResult()}static#e=this.\u0275fac=function(j){return new(j||M)(R.Y36(De.zQ),R.Y36(he))};static#t=this.\u0275cmp=R.Xpm({type:M,selectors:[["app-votes"]],inputs:{room:"room"},decls:7,vars:4,consts:[["class","actions",4,"ngIf"],[1,"votes-result"],[1,"current-votes-list"],[3,"card",4,"ngFor","ngForOf"],["class","votes",4,"ngIf"],[1,"actions"],["main-button","",1,"current-votes__btn-flip",3,"disabled","click"],["main-button","","theme","accent",1,"current-votes__btn-revote",3,"disabled","click"],[3,"card"],[1,"votes"],["class","card",3,"card","click",4,"ngFor","ngForOf"],[1,"card",3,"card","click"],["cardComponent",""]],template:function(j,X){1&j&&(R.YNc(0,is,5,2,"div",0),R.TgZ(1,"div",1)(2,"h1"),R._uU(3),R.qZA()(),R.TgZ(4,"div",2),R.YNc(5,ua,1,1,"app-card",3),R.qZA(),R.YNc(6,io,2,1,"div",4)),2&j&&(R.Q6J("ngIf",X.task.votes.length>0),R.xp6(3),R.Oqu(X.flippedVotes?X.getResult():"-"),R.xp6(2),R.Q6J("ngForOf",X.task.votes),R.xp6(1),R.Q6J("ngIf",!X.flippedVotes))},dependencies:[w.sg,w.O5,vu,ke.j],styles:[".actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem;margin-bottom:.5rem}.votes-result[_ngcontent-%COMP%]{border:3px solid #9e9e9e;color:#2e2e2e;border-radius:4px;text-align:center;font-size:3rem;line-height:8rem}.current-votes-list[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:.5rem 0;overflow-y:hidden;overflow-x:auto}.votes[_ngcontent-%COMP%]{display:flex;position:absolute;bottom:0;left:50%;transform:translate(calc(-50% - 2rem));overflow-x:show}.votes[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:2rem;height:3rem;cursor:pointer}"],data:{animation:[jo]}})}return M})();function Gi(M,F){if(1&M&&R._UZ(0,"app-votes",3),2&M){const A=R.oxw(2);R.Q6J("room",A.room)}}function Qa(M,F){if(1&M&&(R.TgZ(0,"div",1)(1,"h1",2),R._uU(2),R.qZA(),R._UZ(3,"app-tasks",3),R.YNc(4,Gi,1,1,"app-votes",4),R.qZA()),2&M){const A=R.oxw();R.xp6(2),R.Oqu(A.room.name),R.xp6(1),R.Q6J("room",A.room),R.xp6(1),R.Q6J("ngIf",A.room.tasks[A.room.currentTask])}}const L=[{path:"rooms",component:Et,title:"Salas"},{path:"room/:id",component:(()=>{class M extends Ne{constructor(A,j){super(),this.activatedRoute=A,this.roomService=j,this.roomId=this.activatedRoute.snapshot.paramMap.get("id")}ngOnInit(){this.startListenerRoom()}startListenerRoom(){this.toDestroy(this.roomService.listenerRoom(this.roomId).subscribe(A=>{this.room?this.room?.updateValues(A):this.startRoom(A)}))}startRoom(A){this.room=new Re(A.name,A.creator,A.tasks.map(j=>new ve(j.name,j.votes.map(X=>new pe(X.userId,X.userName,X.value,X.hidden)))),A.currentTask,A.id)}static#e=this.\u0275fac=function(j){return new(j||M)(R.Y36(W.gz),R.Y36(he))};static#t=this.\u0275cmp=R.Xpm({type:M,selectors:[["app-room"]],features:[R.qOj],decls:1,vars:1,consts:[["class","current-room",4,"ngIf"],[1,"current-room"],[1,"room-name"],[3,"room"],[3,"room",4,"ngIf"]],template:function(j,X){1&j&&R.YNc(0,Qa,5,3,"div",0),2&j&&R.Q6J("ngIf",X.room)},dependencies:[w.O5,ps,fl],styles:[".current-room[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin:0 auto;max-width:1260px;width:100%}.current-room[_ngcontent-%COMP%]   .room-name[_ngcontent-%COMP%]{font-size:3rem;text-align:center}"]})}return M})(),title:(()=>{class M{constructor(A){this.roomService=A}resolve(A){const j=A.paramMap.get("id");return this.roomService.listenerRoom(j).pipe((0,ie.U)(X=>X.name))}static#e=this.\u0275fac=function(j){return new(j||M)(R.LFG(he))};static#t=this.\u0275prov=R.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"})}return M})()},{path:"**",redirectTo:"rooms"}];let G=(()=>{class M{static#e=this.\u0275fac=function(j){return new(j||M)};static#t=this.\u0275mod=R.oAB({type:M});static#n=this.\u0275inj=R.cJS({imports:[W.Bz.forChild(L),W.Bz]})}return M})();var de=$(6208);let ze=(()=>{class M{static#e=this.\u0275fac=function(j){return new(j||M)};static#t=this.\u0275mod=R.oAB({type:M});static#n=this.\u0275inj=R.cJS({imports:[G,w.ez,de.m,So,ro]})}return M})()},4176:(bt,Le,$)=>{$.d(Le,{j:()=>W});var w=$(5879);let W=(()=>{class ie{constructor(pe){this.element=pe,this.theme="primary"}ngOnInit(){this.setStyle()}setStyle(){this.element.nativeElement.classList.add("main-button"),this.element.nativeElement.classList.add(`main-button--${this.theme}`)}static#e=this.\u0275fac=function(ve){return new(ve||ie)(w.Y36(w.SBq))};static#t=this.\u0275dir=w.lG2({type:ie,selectors:[["button","main-button",""]],inputs:{theme:"theme"}})}return ie})()},6208:(bt,Le,$)=>{$.d(Le,{m:()=>ie});var w=$(6814),W=$(5879);let ie=(()=>{class Ee{static#e=this.\u0275fac=function(Re){return new(Re||Ee)};static#t=this.\u0275mod=W.oAB({type:Ee});static#n=this.\u0275inj=W.cJS({imports:[w.ez]})}return Ee})()},3757:(bt,Le,$)=>{var w=$(6593),W=$(5879),ie=$(8878),Ee=$(7213),pe=$(6814),ve=$(4176);function Re(v,h){if(1&v){const m=W.EpF();W.TgZ(0,"div",3)(1,"div",4),W._UZ(2,"img",5),W.TgZ(3,"span",6),W._uU(4),W.qZA()(),W.TgZ(5,"div",7)(6,"button",8),W.NdJ("click",function(){W.CHM(m);const x=W.oxw();return W.KtG(x.logout())}),W._uU(7,"Sair"),W.qZA()()()}if(2&v){const m=h.ngIf;W.xp6(2),W.Q6J("src",m.photoURL,W.LSH),W.xp6(2),W.Oqu(m.displayName)}}let R=(()=>{class v{constructor(m,E,x){this.auth=m,this.router=E,this.ngZone=x}ngOnInit(){}logout(){this.auth.signOut().then(()=>this.ngZone.run(()=>this.router.navigate([""])))}static#e=this.\u0275fac=function(E){return new(E||v)(W.Y36(Ee.zQ),W.Y36(ie.F0),W.Y36(W.R0b))};static#t=this.\u0275cmp=W.Xpm({type:v,selectors:[["app-header"]],decls:5,vars:4,consts:[[1,"header"],[1,"header-title",3,"routerLink"],["class","user-content",4,"ngIf"],[1,"user-content"],[1,"user"],["alt","user image",1,"user-image",3,"src"],[1,"user-name"],[1,"logout"],["main-button","","theme","error",1,"logout-btn",3,"click"]],template:function(E,x){1&E&&(W.TgZ(0,"div",0)(1,"h4",1),W._uU(2,"Planning Poker"),W.qZA(),W.YNc(3,Re,8,2,"div",2),W.ALo(4,"async"),W.qZA()),2&E&&(W.xp6(1),W.Q6J("routerLink",""),W.xp6(2),W.Q6J("ngIf",W.lcZ(4,2,x.auth.user)))},dependencies:[pe.O5,ie.rH,ve.j,pe.Ov],styles:[".header[_ngcontent-%COMP%]{background:#ff1a40;width:100vw;height:120px;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;padding:0 2rem}.header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{color:#fff;flex-basis:100%;text-align:center;cursor:pointer}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;flex-basis:100%}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{flex-basis:100%;width:100%;display:flex;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{margin:0 .5rem;color:#fff}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]{width:3rem;height:3rem;border-radius:50%}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{flex-basis:100%;display:flex;justify-content:center}@media (min-width: 641px){.header[_ngcontent-%COMP%]{height:100px}.header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{flex-basis:content}}@media (min-width: 961px){.header[_ngcontent-%COMP%]{height:80px}.header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]{flex-basis:content}}"]})}return v})(),Ne=(()=>{class v{static#e=this.\u0275fac=function(E){return new(E||v)};static#t=this.\u0275cmp=W.Xpm({type:v,selectors:[["app-layout"]],decls:3,vars:0,consts:[[1,"page"]],template:function(E,x){1&E&&(W._UZ(0,"app-header"),W.TgZ(1,"div",0),W._UZ(2,"router-outlet"),W.qZA())},dependencies:[ie.lC,R],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .page[_ngcontent-%COMP%]{overflow:hidden;flex:1 1 auto;padding:16px;height:calc(100vh - 120px);position:relative}@media (min-width: 641px){[_nghost-%COMP%]   .page[_ngcontent-%COMP%]{height:calc(100vh - 100px)}}@media (min-width: 961px){[_nghost-%COMP%]   .page[_ngcontent-%COMP%]{height:calc(100vh - 80px)}}"]})}return v})();var ue=$(7142);let he=(()=>{class v{constructor(m,E,x){this.auth=m,this.router=E,this.ngZone=x}login(){this.auth.signInWithPopup(this.googleAuthProvider()).then(()=>this.ngZone.run(()=>this.router.navigate(["rooms"])))}googleAuthProvider(){return new ue.Z.auth.GoogleAuthProvider}static#e=this.\u0275fac=function(E){return new(E||v)(W.Y36(Ee.zQ),W.Y36(ie.F0),W.Y36(W.R0b))};static#t=this.\u0275cmp=W.Xpm({type:v,selectors:[["app-login"]],decls:2,vars:0,consts:[["main-button","","theme","error",1,"login-btn","login-btn--google",3,"click"]],template:function(E,x){1&E&&(W.TgZ(0,"button",0),W.NdJ("click",function(){return x.login()}),W._uU(1,"Entrar pelo google"),W.qZA())},dependencies:[ve.j],styles:[".login-btn[_ngcontent-%COMP%]{position:fixed;height:60px;width:320px;font-size:1.5rem;line-height:1.75rem;top:50%;left:50%;transform:translate(-50%,-50%)}"]})}return v})();var De=$(7398);const Ke=[{path:"",component:Ne,canMatch:[(v,h)=>(0,W.f3M)(Ee.zQ).user.pipe((0,De.U)(m=>null!=m))],children:[{path:"",loadChildren:()=>Promise.resolve().then($.bind($,1626)).then(v=>v.PagesModule)}]},{path:"",component:he},{path:"**",redirectTo:""}];let ht=(()=>{class v{static#e=this.\u0275fac=function(E){return new(E||v)};static#t=this.\u0275mod=W.oAB({type:v});static#n=this.\u0275inj=W.cJS({imports:[ie.Bz.forRoot(Ke,{preloadingStrategy:ie.wm,useHash:!0,anchorScrolling:"enabled"}),ie.Bz]})}return v})(),nt=(()=>{class v{static#e=this.\u0275fac=function(E){return new(E||v)};static#t=this.\u0275cmp=W.Xpm({type:v,selectors:[["app-root"]],decls:1,vars:0,template:function(E,x){1&E&&W._UZ(0,"router-outlet")},dependencies:[ie.lC]})}return v})();var pt=$(6208);let ut=(()=>{class v{static#e=this.\u0275fac=function(E){return new(E||v)};static#t=this.\u0275mod=W.oAB({type:v});static#n=this.\u0275inj=W.cJS({imports:[pe.ez,ie.Bz,pt.m]})}return v})();var Ft=$(7217),Ie=$(9027),ce=$(8326),ke=$(5592),Ce=$(2096),Ge=$(2459),Qe=$(6321),rt=$(9360),fe=$(8251),lt=$(4664),ur=$(3106),Ar=$(5861),lr=$(534),an=$(9058),It=$(4537);const Rt="firebasestorage.googleapis.com",_e="storageBucket";class Se extends an.ZR{constructor(h,m,E=0){super(yt(h),`Firebase Storage: ${m} (${yt(h)})`),this.status_=E,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Se.prototype)}get status(){return this.status_}set status(h){this.status_=h}_codeEquals(h){return yt(h)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(h){this.customData.serverResponse=h,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Be=function(v){return v.UNKNOWN="unknown",v.OBJECT_NOT_FOUND="object-not-found",v.BUCKET_NOT_FOUND="bucket-not-found",v.PROJECT_NOT_FOUND="project-not-found",v.QUOTA_EXCEEDED="quota-exceeded",v.UNAUTHENTICATED="unauthenticated",v.UNAUTHORIZED="unauthorized",v.UNAUTHORIZED_APP="unauthorized-app",v.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",v.INVALID_CHECKSUM="invalid-checksum",v.CANCELED="canceled",v.INVALID_EVENT_NAME="invalid-event-name",v.INVALID_URL="invalid-url",v.INVALID_DEFAULT_BUCKET="invalid-default-bucket",v.NO_DEFAULT_BUCKET="no-default-bucket",v.CANNOT_SLICE_BLOB="cannot-slice-blob",v.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",v.NO_DOWNLOAD_URL="no-download-url",v.INVALID_ARGUMENT="invalid-argument",v.INVALID_ARGUMENT_COUNT="invalid-argument-count",v.APP_DELETED="app-deleted",v.INVALID_ROOT_OPERATION="invalid-root-operation",v.INVALID_FORMAT="invalid-format",v.INTERNAL_ERROR="internal-error",v.UNSUPPORTED_ENVIRONMENT="unsupported-environment",v}(Be||{});function yt(v){return"storage/"+v}function gt(){return new Se(Be.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function sn(){return new Se(Be.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yn(){return new Se(Be.CANCELED,"User canceled the upload/download.")}function Vr(){return new Se(Be.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Zn(v){return new Se(Be.INVALID_ARGUMENT,v)}function Kt(){return new Se(Be.APP_DELETED,"The Firebase app was deleted.")}function vn(v){return new Se(Be.INVALID_ROOT_OPERATION,"The operation '"+v+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bt(v,h){return new Se(Be.INVALID_FORMAT,"String does not match format '"+v+"': "+h)}function Vn(v){throw new Se(Be.INTERNAL_ERROR,"Internal error: "+v)}class Un{constructor(h,m){this.bucket=h,this.path_=m}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const h=encodeURIComponent;return"/b/"+h(this.bucket)+"/o/"+h(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(h,m){let E;try{E=Un.makeFromUrl(h,m)}catch{return new Un(h,"")}if(""===E.path)return E;throw function qt(v){return new Se(Be.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+v+"'.")}(h)}static makeFromUrl(h,m){let E=null;const x="([A-Za-z0-9.\\-_]+)",oe=new RegExp("^gs://"+x+"(/(.*))?$","i");function Me(Mn){Mn.path_=decodeURIComponent(Mn.path)}const ft=m.replace(/[.]/g,"\\."),Yn=[{regex:oe,indices:{bucket:1,path:3},postModify:function B(Mn){"/"===Mn.path.charAt(Mn.path.length-1)&&(Mn.path_=Mn.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${ft}/v[A-Za-z0-9_]+/b/${x}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Me},{regex:new RegExp(`^https?://${m===Rt?"(?:storage.googleapis.com|storage.cloud.google.com)":m}/${x}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Me}];for(let Mn=0;Mn<Yn.length;Mn++){const Io=Yn[Mn],vs=Io.regex.exec(h);if(vs){let Es=vs[Io.indices.path];Es||(Es=""),E=new Un(vs[Io.indices.bucket],Es),Io.postModify(E);break}}if(null==E)throw function $n(v){return new Se(Be.INVALID_URL,"Invalid URL '"+v+"'.")}(h);return E}}class ei{constructor(h){this.promise_=Promise.reject(h)}getPromise(){return this.promise_}cancel(h=!1){}}function dn(v){return"string"==typeof v||v instanceof String}function Er(v){return mn()&&v instanceof Blob}function mn(){return typeof Blob<"u"&&!(0,an.UG)()}function Yi(v,h,m,E){if(E<h)throw Zn(`Invalid value for '${v}'. Expected ${h} or greater.`);if(E>m)throw Zn(`Invalid value for '${v}'. Expected ${m} or less.`)}function Hr(v,h,m){let E=h;return null==m&&(E=`https://${h}`),`${m}://${E}/v0${v}`}function di(v){const h=encodeURIComponent;let m="?";for(const E in v)v.hasOwnProperty(E)&&(m=m+(h(E)+"=")+h(v[E])+"&");return m=m.slice(0,-1),m}var Ur=function(v){return v[v.NO_ERROR=0]="NO_ERROR",v[v.NETWORK_ERROR=1]="NETWORK_ERROR",v[v.ABORT=2]="ABORT",v}(Ur||{});function $r(v,h){const m=v>=500&&v<600,x=-1!==[408,429].indexOf(v),B=-1!==h.indexOf(v);return m||x||B}class Ti{constructor(h,m,E,x,B,re,oe,ye,Me,Je,ft,nn=!0){this.url_=h,this.method_=m,this.headers_=E,this.body_=x,this.successCodes_=B,this.additionalRetryCodes_=re,this.callback_=oe,this.errorCallback_=ye,this.timeout_=Me,this.progressCallback_=Je,this.connectionFactory_=ft,this.retry=nn,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Qt,Ot)=>{this.resolve_=Qt,this.reject_=Ot,this.start_()})}start_(){const m=(E,x)=>{const B=this.resolve_,re=this.reject_,oe=x.connection;if(x.wasSuccessCode)try{const ye=this.callback_(oe,oe.getResponse());!function To(v){return void 0!==v}(ye)?B():B(ye)}catch(ye){re(ye)}else if(null!==oe){const ye=gt();ye.serverResponse=oe.getErrorText(),re(this.errorCallback_?this.errorCallback_(oe,ye):ye)}else re(x.canceled?this.appDelete_?Kt():yn():sn())};this.canceled_?m(0,new Bi(!1,null,!0)):this.backoffId_=function zn(v,h,m){let E=1,x=null,B=null,re=!1,oe=0;function ye(){return 2===oe}let Me=!1;function Je(...un){Me||(Me=!0,h.apply(null,un))}function ft(un){x=setTimeout(()=>{x=null,v(Qt,ye())},un)}function nn(){B&&clearTimeout(B)}function Qt(un,...Dr){if(Me)return void nn();if(un)return nn(),void Je.call(null,un,...Dr);if(ye()||re)return nn(),void Je.call(null,un,...Dr);let Yn;E<64&&(E*=2),1===oe?(oe=2,Yn=0):Yn=1e3*(E+Math.random()),ft(Yn)}let Ot=!1;function Gt(un){Ot||(Ot=!0,nn(),!Me&&(null!==x?(un||(oe=2),clearTimeout(x),ft(0)):un||(oe=1)))}return ft(0),B=setTimeout(()=>{re=!0,Gt(!0)},m),Gt}((E,x)=>{if(x)return void E(!1,new Bi(!1,null,!0));const B=this.connectionFactory_();this.pendingConnection_=B;const re=oe=>{null!==this.progressCallback_&&this.progressCallback_(oe.loaded,oe.lengthComputable?oe.total:-1)};null!==this.progressCallback_&&B.addUploadProgressListener(re),B.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&B.removeUploadProgressListener(re),this.pendingConnection_=null;const oe=B.getErrorCode()===Ur.NO_ERROR,ye=B.getStatus();if(!oe||$r(ye,this.additionalRetryCodes_)&&this.retry){const Je=B.getErrorCode()===Ur.ABORT;return void E(!1,new Bi(!1,null,Je))}const Me=-1!==this.successCodes_.indexOf(ye);E(!0,new Bi(Me,B))})},m,this.timeout_)}getPromise(){return this.promise_}cancel(h){this.canceled_=!0,this.appDelete_=h||!1,null!==this.backoffId_&&function br(v){v(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Bi{constructor(h,m,E){this.wasSuccessCode=h,this.connection=m,this.canceled=!!E}}function J(...v){const h=function te(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==h){const m=new h;for(let E=0;E<v.length;E++)m.append(v[E]);return m.getBlob()}if(mn())return new Blob(v);throw new Se(Be.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ze={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dt{constructor(h,m){this.data=h,this.contentType=m||null}}function Jt(v,h){switch(v){case Ze.RAW:return new dt(rn(h));case Ze.BASE64:case Ze.BASE64URL:return new dt(Lt(v,h));case Ze.DATA_URL:return new dt(function Ci(v){const h=new cr(v);return h.base64?Lt(Ze.BASE64,h.rest):function Dt(v){let h;try{h=decodeURIComponent(v)}catch{throw Bt(Ze.DATA_URL,"Malformed data URL.")}return rn(h)}(h.rest)}(h),function Co(v){return new cr(v).contentType}(h))}throw gt()}function rn(v){const h=[];for(let m=0;m<v.length;m++){let E=v.charCodeAt(m);E<=127?h.push(E):E<=2047?h.push(192|E>>6,128|63&E):55296==(64512&E)?m<v.length-1&&56320==(64512&v.charCodeAt(m+1))?(E=65536|(1023&E)<<10|1023&v.charCodeAt(++m),h.push(240|E>>18,128|E>>12&63,128|E>>6&63,128|63&E)):h.push(239,191,189):56320==(64512&E)?h.push(239,191,189):h.push(224|E>>12,128|E>>6&63,128|63&E)}return new Uint8Array(h)}function Lt(v,h){switch(v){case Ze.BASE64:{const x=-1!==h.indexOf("-"),B=-1!==h.indexOf("_");if(x||B)throw Bt(v,"Invalid character '"+(x?"-":"_")+"' found: is it base64url encoded?");break}case Ze.BASE64URL:{const x=-1!==h.indexOf("+"),B=-1!==h.indexOf("/");if(x||B)throw Bt(v,"Invalid character '"+(x?"+":"/")+"' found: is it base64 encoded?");h=h.replace(/-/g,"+").replace(/_/g,"/");break}}let m;try{m=function Pe(v){if(typeof atob>"u")throw function Oi(v){return new Se(Be.UNSUPPORTED_ENVIRONMENT,`${v} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(v)}(h)}catch(x){throw x.message.includes("polyfill")?x:Bt(v,"Invalid character found")}const E=new Uint8Array(m.length);for(let x=0;x<m.length;x++)E[x]=m.charCodeAt(x);return E}class cr{constructor(h){this.base64=!1,this.contentType=null;const m=h.match(/^data:([^,]+)?,/);if(null===m)throw Bt(Ze.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const E=m[1]||null;null!=E&&(this.base64=function Ua(v,h){return v.length>=h.length&&v.substring(v.length-h.length)===h}(E,";base64"),this.contentType=this.base64?E.substring(0,E.length-7):E),this.rest=h.substring(h.indexOf(",")+1)}}class qe{constructor(h,m){let E=0,x="";Er(h)?(this.data_=h,E=h.size,x=h.type):h instanceof ArrayBuffer?(m?this.data_=new Uint8Array(h):(this.data_=new Uint8Array(h.byteLength),this.data_.set(new Uint8Array(h))),E=this.data_.length):h instanceof Uint8Array&&(m?this.data_=h:(this.data_=new Uint8Array(h.length),this.data_.set(h)),E=h.length),this.size_=E,this.type_=x}size(){return this.size_}type(){return this.type_}slice(h,m){if(Er(this.data_)){const x=function ne(v,h,m){return v.webkitSlice?v.webkitSlice(h,m):v.mozSlice?v.mozSlice(h,m):v.slice?v.slice(h,m):null}(this.data_,h,m);return null===x?null:new qe(x)}{const E=new Uint8Array(this.data_.buffer,h,m-h);return new qe(E,!0)}}static getBlob(...h){if(mn()){const m=h.map(E=>E instanceof qe?E.data_:E);return new qe(J.apply(null,m))}{const m=h.map(re=>dn(re)?Jt(Ze.RAW,re).data:re.data_);let E=0;m.forEach(re=>{E+=re.byteLength});const x=new Uint8Array(E);let B=0;return m.forEach(re=>{for(let oe=0;oe<re.length;oe++)x[B++]=re[oe]}),new qe(x,!0)}}uploadData(){return this.data_}}function Oe(v){let h;try{h=JSON.parse(v)}catch{return null}return function Qi(v){return"object"==typeof v&&!Array.isArray(v)}(h)?h:null}function Zt(v){const h=v.lastIndexOf("/",v.length-2);return-1===h?v:v.slice(h+1)}function Tt(v,h){return h}class Xt{constructor(h,m,E,x){this.server=h,this.local=m||h,this.writable=!!E,this.xform=x||Tt}}let Gn=null;function ii(){if(Gn)return Gn;const v=[];v.push(new Xt("bucket")),v.push(new Xt("generation")),v.push(new Xt("metageneration")),v.push(new Xt("name","fullPath",!0));const m=new Xt("name");m.xform=function h(B,re){return function Wn(v){return!dn(v)||v.length<2?v:Zt(v)}(re)},v.push(m);const x=new Xt("size");return x.xform=function E(B,re){return void 0!==re?Number(re):re},v.push(x),v.push(new Xt("timeCreated")),v.push(new Xt("updated")),v.push(new Xt("md5Hash",null,!0)),v.push(new Xt("cacheControl",null,!0)),v.push(new Xt("contentDisposition",null,!0)),v.push(new Xt("contentEncoding",null,!0)),v.push(new Xt("contentLanguage",null,!0)),v.push(new Xt("contentType",null,!0)),v.push(new Xt("metadata","customMetadata",!0)),Gn=v,Gn}function Do(v,h,m){const E=Oe(h);return null===E?null:function ls(v,h,m){const E={type:"file"},x=m.length;for(let B=0;B<x;B++){const re=m[B];E[re.local]=re.xform(E,h[re.server])}return function ti(v,h){Object.defineProperty(v,"ref",{get:function m(){const B=new Un(v.bucket,v.fullPath);return h._makeStorageReference(B)}})}(E,v),E}(v,E,m)}function Ys(v,h){const m={},E=h.length;for(let x=0;x<E;x++){const B=h[x];B.writable&&(m[B.server]=v[B.local])}return JSON.stringify(m)}const Js="prefixes",Qo="items";class Di{constructor(h,m,E,x){this.url=h,this.method=m,this.handler=E,this.timeout=x,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ji(v){if(!v)throw gt()}function Ao(v,h){return function m(E,x){const B=Do(v,x,h);return Ji(null!==B),B}}function kr(v){return function h(m,E){let x;return x=401===m.getStatus()?m.getErrorText().includes("Firebase App Check token is invalid")?function en(){return new Se(Be.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function wn(){return new Se(Be.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===m.getStatus()?function Pt(v){return new Se(Be.QUOTA_EXCEEDED,"Quota for bucket '"+v+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(v.bucket):403===m.getStatus()?function Ln(v){return new Se(Be.UNAUTHORIZED,"User does not have permission to access '"+v+"'.")}(v.path):E,x.status=m.getStatus(),x.serverResponse=E.serverResponse,x}}function zr(v){const h=kr(v);return function m(E,x){let B=h(E,x);return 404===E.getStatus()&&(B=function mr(v){return new Se(Be.OBJECT_NOT_FOUND,"Object '"+v+"' does not exist.")}(v.path)),B.serverResponse=x.serverResponse,B}}function hi(v,h,m){const x=Hr(h.fullServerUrl(),v.host,v._protocol),re=v.maxOperationRetryTime,oe=new Di(x,"GET",Ao(v,m),re);return oe.errorHandler=zr(h),oe}function ws(v,h,m,E,x){const B={};B.prefix=h.isRoot?"":h.path+"/",m&&m.length>0&&(B.delimiter=m),E&&(B.pageToken=E),x&&(B.maxResults=x);const oe=Hr(h.bucketOnlyServerUrl(),v.host,v._protocol),Me=v.maxOperationRetryTime,Je=new Di(oe,"GET",function Xi(v,h){return function m(E,x){const B=function Yo(v,h,m){const E=Oe(m);return null===E?null:function Fn(v,h,m){const E={prefixes:[],items:[],nextPageToken:m.nextPageToken};if(m[Js])for(const x of m[Js]){const B=x.replace(/\/$/,""),re=v._makeStorageReference(new Un(h,B));E.prefixes.push(re)}if(m[Qo])for(const x of m[Qo]){const B=v._makeStorageReference(new Un(h,x.name));E.items.push(B)}return E}(v,h,E)}(v,h,x);return Ji(null!==B),B}}(v,h.bucket),Me);return Je.urlParams=B,Je.errorHandler=kr(h),Je}function fi(v,h,m){const E=Object.assign({},m);return E.fullPath=v.path,E.size=h.size(),E.contentType||(E.contentType=function mu(v,h){return v&&v.contentType||h&&h.type()||"application/octet-stream"}(null,h)),E}class _o{constructor(h,m,E,x){this.current=h,this.total=m,this.finalized=!!E,this.metadata=x||null}}function Jo(v,h){let m=null;try{m=v.getResponseHeader("X-Goog-Upload-Status")}catch{Ji(!1)}return Ji(!!m&&-1!==(h||["active"]).indexOf(m)),m}const Xo={STATE_CHANGED:"state_changed"},Wr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Fs(v){switch(v){case"running":case"pausing":case"canceling":return Wr.RUNNING;case"paused":return Wr.PAUSED;case"success":return Wr.SUCCESS;case"canceled":return Wr.CANCELED;default:return Wr.ERROR}}class Tn{constructor(h,m,E){if(function kt(v){return"function"==typeof v}(h)||null!=m||null!=E)this.next=h,this.error=m??void 0,this.complete=E??void 0;else{const B=h;this.next=B.next,this.error=B.error,this.complete=B.complete}}}function er(v){return(...h)=>{Promise.resolve().then(()=>v(...h))}}let ki=null;class eo{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ur.NO_ERROR,this.sendPromise_=new Promise(h=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ur.ABORT,h()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ur.NETWORK_ERROR,h()}),this.xhr_.addEventListener("load",()=>{h()})})}send(h,m,E,x){if(this.sent_)throw Vn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(m,h,!0),void 0!==x)for(const B in x)x.hasOwnProperty(B)&&this.xhr_.setRequestHeader(B,x[B].toString());return void 0!==E?this.xhr_.send(E):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(h){return this.xhr_.getResponseHeader(h)}addUploadProgressListener(h){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",h)}removeUploadProgressListener(h){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",h)}}class qr extends eo{initXhr(){this.xhr_.responseType="text"}}function Br(){return ki?ki():new qr}class dr{constructor(h,m,E=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=h,this._blob=m,this._metadata=E,this._mappings=ii(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=x=>{if(this._request=void 0,this._chunkMultiplier=1,x._codeEquals(Be.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const B=this.isExponentialBackoffExpired();if($r(x.status,[])){if(!B)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();x=sn()}this._error=x,this._transition("error")}},this._metadataErrorHandler=x=>{this._request=void 0,x._codeEquals(Be.CANCELED)?this.completeTransitions_():(this._error=x,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((x,B)=>{this._resolve=x,this._reject=B,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const h=this._transferred;return m=>this._updateProgress(h+m)}_shouldDoResumable(h){return h.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(h){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([m,E])=>{switch(this._state){case"running":h(m,E);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((h,m)=>{const E=function _u(v,h,m,E,x){const B=h.bucketOnlyServerUrl(),re=fi(h,E,x),oe={name:re.fullPath},ye=Hr(B,v.host,v._protocol),Je={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${E.size()}`,"X-Goog-Upload-Header-Content-Type":re.contentType,"Content-Type":"application/json; charset=utf-8"},ft=Ys(re,m),Ot=new Di(ye,"POST",function Qt(Gt){let un;Jo(Gt);try{un=Gt.getResponseHeader("X-Goog-Upload-URL")}catch{Ji(!1)}return Ji(dn(un)),un},v.maxUploadRetryTime);return Ot.urlParams=oe,Ot.headers=Je,Ot.body=ft,Ot.errorHandler=kr(h),Ot}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),x=this._ref.storage._makeRequest(E,Br,h,m);this._request=x,x.getPromise().then(B=>{this._request=void 0,this._uploadUrl=B,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const h=this._uploadUrl;this._resolveToken((m,E)=>{const x=function Ba(v,h,m,E){const ye=new Di(m,"POST",function B(Me){const Je=Jo(Me,["active","final"]);let ft=null;try{ft=Me.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ji(!1)}ft||Ji(!1);const nn=Number(ft);return Ji(!isNaN(nn)),new _o(nn,E.size(),"final"===Je)},v.maxUploadRetryTime);return ye.headers={"X-Goog-Upload-Command":"query"},ye.errorHandler=kr(h),ye}(this._ref.storage,this._ref._location,h,this._blob),B=this._ref.storage._makeRequest(x,Br,m,E);this._request=B,B.getPromise().then(re=>{this._request=void 0,this._updateProgress(re.current),this._needToFetchStatus=!1,re.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const h=262144*this._chunkMultiplier,m=new _o(this._transferred,this._blob.size()),E=this._uploadUrl;this._resolveToken((x,B)=>{let re;try{re=function ja(v,h,m,E,x,B,re,oe){const ye=new _o(0,0);if(re?(ye.current=re.current,ye.total=re.total):(ye.current=0,ye.total=E.size()),E.size()!==ye.total)throw function Xn(){return new Se(Be.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const Me=ye.total-ye.current;let Je=Me;x>0&&(Je=Math.min(Je,x));const ft=ye.current;let Qt="";Qt=0===Je?"finalize":Me===Je?"upload, finalize":"upload";const Ot={"X-Goog-Upload-Command":Qt,"X-Goog-Upload-Offset":`${ye.current}`},Gt=E.slice(ft,ft+Je);if(null===Gt)throw Vr();const Yn=new Di(m,"POST",function un(Mn,Io){const vs=Jo(Mn,["active","final"]),li=ye.current+Je,Es=E.size();let xs;return xs="final"===vs?Ao(h,B)(Mn,Io):null,new _o(li,Es,"final"===vs,xs)},h.maxUploadRetryTime);return Yn.headers=Ot,Yn.body=Gt.uploadData(),Yn.progressCallback=oe||null,Yn.errorHandler=kr(v),Yn}(this._ref._location,this._ref.storage,E,this._blob,h,this._mappings,m,this._makeProgressCallback())}catch(ye){return this._error=ye,void this._transition("error")}const oe=this._ref.storage._makeRequest(re,Br,x,B,!1);this._request=oe,oe.getPromise().then(ye=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(ye.current),ye.finalized?(this._metadata=ye.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((h,m)=>{const E=hi(this._ref.storage,this._ref._location,this._mappings),x=this._ref.storage._makeRequest(E,Br,h,m);this._request=x,x.getPromise().then(B=>{this._request=void 0,this._metadata=B,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((h,m)=>{const E=function Fo(v,h,m,E,x){const B=h.bucketOnlyServerUrl(),re={"X-Goog-Upload-Protocol":"multipart"},ye=function oe(){let Yn="";for(let Mn=0;Mn<2;Mn++)Yn+=Math.random().toString().slice(2);return Yn}();re["Content-Type"]="multipart/related; boundary="+ye;const Me=fi(h,E,x),Je=Ys(Me,m),Qt=qe.getBlob("--"+ye+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Je+"\r\n--"+ye+"\r\nContent-Type: "+Me.contentType+"\r\n\r\n",E,"\r\n--"+ye+"--");if(null===Qt)throw Vr();const Ot={name:Me.fullPath},Gt=Hr(B,v.host,v._protocol),Dr=v.maxUploadRetryTime,jn=new Di(Gt,"POST",Ao(v,m),Dr);return jn.urlParams=Ot,jn.headers=re,jn.body=Qt.uploadData(),jn.errorHandler=kr(h),jn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),x=this._ref.storage._makeRequest(E,Br,h,m);this._request=x,x.getPromise().then(B=>{this._request=void 0,this._metadata=B,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(h){const m=this._transferred;this._transferred=h,this._transferred!==m&&this._notifyObservers()}_transition(h){if(this._state!==h)switch(h){case"canceling":case"pausing":this._state=h,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const m="paused"===this._state;this._state=h,m&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=h,this._notifyObservers();break;case"canceled":this._error=yn(),this._state=h,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const h=Fs(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:h,metadata:this._metadata,task:this,ref:this._ref}}on(h,m,E,x){const B=new Tn(m||void 0,E||void 0,x||void 0);return this._addObserver(B),()=>{this._removeObserver(B)}}then(h,m){return this._promise.then(h,m)}catch(h){return this.then(null,h)}_addObserver(h){this._observers.push(h),this._notifyObserver(h)}_removeObserver(h){const m=this._observers.indexOf(h);-1!==m&&this._observers.splice(m,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(m=>{this._notifyObserver(m)})}_finishPromise(){if(void 0!==this._resolve){let h=!0;switch(Fs(this._state)){case Wr.SUCCESS:er(this._resolve.bind(null,this.snapshot))();break;case Wr.CANCELED:case Wr.ERROR:er(this._reject.bind(null,this._error))();break;default:h=!1}h&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(h){switch(Fs(this._state)){case Wr.RUNNING:case Wr.PAUSED:h.next&&er(h.next.bind(h,this.snapshot))();break;case Wr.SUCCESS:h.complete&&er(h.complete.bind(h))();break;default:h.error&&er(h.error.bind(h,this._error))()}}resume(){const h="paused"===this._state||"pausing"===this._state;return h&&this._transition("running"),h}pause(){const h="running"===this._state;return h&&this._transition("pausing"),h}cancel(){const h="running"===this._state||"pausing"===this._state;return h&&this._transition("canceling"),h}}class vt{constructor(h,m){this._service=h,this._location=m instanceof Un?m:Un.makeFromUrl(m,h.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(h,m){return new vt(h,m)}get root(){const h=new Un(this._location.bucket,"");return this._newRef(this._service,h)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Zt(this._location.path)}get storage(){return this._service}get parent(){const h=function st(v){if(0===v.length)return null;const h=v.lastIndexOf("/");return-1===h?"":v.slice(0,h)}(this._location.path);if(null===h)return null;const m=new Un(this._location.bucket,h);return new vt(this._service,m)}_throwIfRoot(h){if(""===this._location.path)throw vn(h)}}function hr(v,h,m){return ji.apply(this,arguments)}function ji(){return(ji=(0,Ar.Z)(function*(v,h,m){const x=yield Hi(v,{pageToken:m});h.prefixes.push(...x.prefixes),h.items.push(...x.items),null!=x.nextPageToken&&(yield hr(v,h,x.nextPageToken))})).apply(this,arguments)}function Hi(v,h){null!=h&&"number"==typeof h.maxResults&&Yi("options.maxResults",1,1e3,h.maxResults);const m=h||{},E=ws(v.storage,v._location,"/",m.pageToken,m.maxResults);return v.storage.makeRequestWithTokens(E,Br)}function ea(v){v._throwIfRoot("getDownloadURL");const h=function cs(v,h,m){const x=Hr(h.fullServerUrl(),v.host,v._protocol),re=v.maxOperationRetryTime,oe=new Di(x,"GET",function mo(v,h){return function m(E,x){const B=Do(v,x,h);return Ji(null!==B),function Qs(v,h,m,E){const x=Oe(h);if(null===x||!dn(x.downloadTokens))return null;const B=x.downloadTokens;if(0===B.length)return null;const re=encodeURIComponent;return B.split(",").map(Me=>{const ft=v.fullPath;return Hr("/b/"+re(v.bucket)+"/o/"+re(ft),m,E)+di({alt:"media",token:Me})})[0]}(B,x,v.host,v._protocol)}}(v,m),re);return oe.errorHandler=zr(h),oe}(v.storage,v._location,ii());return v.storage.makeRequestWithTokens(h,Br).then(m=>{if(null===m)throw function Ui(){return new Se(Be.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return m})}function Or(v,h){const m=function Ht(v,h){const m=h.split("/").filter(E=>E.length>0).join("/");return 0===v.length?m:v+"/"+m}(v._location.path,h),E=new Un(v._location.bucket,m);return new vt(v.storage,E)}function mi(v,h){if(v instanceof es){const m=v;if(null==m._bucket)throw function En(){return new Se(Be.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_e+"' property when initializing the app?")}();const E=new vt(m,m._bucket);return null!=h?mi(E,h):E}return void 0!==h?Or(v,h):v}function Us(v,h){if(h&&function tr(v){return/^[A-Za-z]+:\/\//.test(v)}(h)){if(v instanceof es)return function $i(v,h){return new vt(v,h)}(v,h);throw Zn("To use ref(service, url), the first argument must be a Storage instance.")}return mi(v,h)}function Lo(v,h){const m=h?.[_e];return null==m?null:Un.makeFromBucketSpec(m,v)}class es{constructor(h,m,E,x,B){this.app=h,this._authProvider=m,this._appCheckProvider=E,this._url=x,this._firebaseVersion=B,this._bucket=null,this._host=Rt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=x?Un.makeFromBucketSpec(x,this._host):Lo(this._host,this.app.options)}get host(){return this._host}set host(h){this._host=h,this._bucket=null!=this._url?Un.makeFromBucketSpec(this._url,h):Lo(h,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(h){Yi("time",0,Number.POSITIVE_INFINITY,h),this._maxUploadRetryTime=h}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(h){Yi("time",0,Number.POSITIVE_INFINITY,h),this._maxOperationRetryTime=h}_getAuthToken(){var h=this;return(0,Ar.Z)(function*(){if(h._overrideAuthToken)return h._overrideAuthToken;const m=h._authProvider.getImmediate({optional:!0});if(m){const E=yield m.getToken();if(null!==E)return E.accessToken}return null})()}_getAppCheckToken(){var h=this;return(0,Ar.Z)(function*(){const m=h._appCheckProvider.getImmediate({optional:!0});return m?(yield m.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(h=>h.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(h){return new vt(this,h)}_makeRequest(h,m,E,x,B=!0){if(this._deleted)return new ei(Kt());{const re=function ee(v,h,m,E,x,B,re=!0){const oe=di(v.urlParams),ye=v.url+oe,Me=Object.assign({},v.headers);return function us(v,h){h&&(v["X-Firebase-GMPID"]=h)}(Me,h),function rr(v,h){null!==h&&h.length>0&&(v.Authorization="Firebase "+h)}(Me,m),function xr(v,h){v["X-Firebase-Storage-Version"]="webjs/"+(h??"AppManager")}(Me,B),function me(v,h){null!==h&&(v["X-Firebase-AppCheck"]=h)}(Me,E),new Ti(ye,v.method,Me,v.body,v.successCodes,v.additionalRetryCodes,v.handler,v.errorHandler,v.timeout,v.progressCallback,x,re)}(h,this._appId,E,x,m,this._firebaseVersion,B);return this._requests.add(re),re.getPromise().then(()=>this._requests.delete(re),()=>this._requests.delete(re)),re}}makeRequestWithTokens(h,m){var E=this;return(0,Ar.Z)(function*(){const[x,B]=yield Promise.all([E._getAuthToken(),E._getAppCheckToken()]);return E._makeRequest(h,m,x,B).getPromise()})()}}const Bs="@firebase/storage";function fr(v,h){return Us(v=(0,an.m9)(v),h)}function Ha(v,{instanceIdentifier:h}){const m=v.getProvider("app").getImmediate(),E=v.getProvider("auth-internal"),x=v.getProvider("app-check-internal");return new es(m,E,x,h,lr.SDK_VERSION)}!function Ai(){(0,lr._registerComponent)(new It.wA("storage",Ha,"PUBLIC").setMultipleInstances(!0)),(0,lr.registerVersion)(Bs,"0.11.2",""),(0,lr.registerVersion)(Bs,"0.11.2","esm2017")}();class $a{constructor(h,m,E){this._delegate=h,this.task=m,this.ref=E}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class za{constructor(h,m){this._delegate=h,this._ref=m,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new $a(this._delegate.snapshot,this,this._ref)}then(h,m){return this._delegate.then(E=>{if(h)return h(new $a(E,this,this._ref))},m)}on(h,m,E,x){let B;return m&&(B="function"==typeof m?re=>m(new $a(re,this,this._ref)):{next:m.next?re=>m.next(new $a(re,this,this._ref)):void 0,complete:m.complete||void 0,error:m.error||void 0}),this._delegate.on(h,B,E||void 0,x||void 0)}}class rs{constructor(h,m){this._delegate=h,this._service=m}get prefixes(){return this._delegate.prefixes.map(h=>new Ir(h,this._service))}get items(){return this._delegate.items.map(h=>new Ir(h,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ir{constructor(h,m){this._delegate=h,this.storage=m}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(h){const m=function As(v,h){return Or(v,h)}(this._delegate,h);return new Ir(m,this.storage)}get root(){return new Ir(this._delegate.root,this.storage)}get parent(){const h=this._delegate.parent;return null==h?null:new Ir(h,this.storage)}put(h,m){return this._throwIfRoot("put"),new za(function hs(v,h,m){return function bo(v,h,m){return v._throwIfRoot("uploadBytesResumable"),new dr(v,new qe(h),m)}(v=(0,an.m9)(v),h,m)}(this._delegate,h,m),this)}putString(h,m=Ze.RAW,E){this._throwIfRoot("putString");const x=Jt(m,h),B=Object.assign({},E);return null==B.contentType&&null!=x.contentType&&(B.contentType=x.contentType),new za(new dr(this._delegate,new qe(x.data,!0),B),this)}listAll(){return function si(v){return function to(v){const h={prefixes:[],items:[]};return hr(v,h).then(()=>h)}(v=(0,an.m9)(v))}(this._delegate).then(h=>new rs(h,this.storage))}list(h){return function no(v,h){return Hi(v=(0,an.m9)(v),h)}(this._delegate,h||void 0).then(m=>new rs(m,this.storage))}getMetadata(){return function ts(v){return function $t(v){v._throwIfRoot("getMetadata");const h=hi(v.storage,v._location,ii());return v.storage.makeRequestWithTokens(h,Br)}(v=(0,an.m9)(v))}(this._delegate)}updateMetadata(h){return function _i(v,h){return function gi(v,h){v._throwIfRoot("updateMetadata");const m=function Xs(v,h,m,E){const B=Hr(h.fullServerUrl(),v.host,v._protocol),oe=Ys(m,E),Me=v.maxOperationRetryTime,Je=new Di(B,"PATCH",Ao(v,E),Me);return Je.headers={"Content-Type":"application/json; charset=utf-8"},Je.body=oe,Je.errorHandler=zr(h),Je}(v.storage,v._location,h,ii());return v.storage.makeRequestWithTokens(m,Br)}(v=(0,an.m9)(v),h)}(this._delegate,h)}getDownloadURL(){return function Bu(v){return ea(v=(0,an.m9)(v))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function oi(v){return function jr(v){v._throwIfRoot("deleteObject");const h=function Gr(v,h){const E=Hr(h.fullServerUrl(),v.host,v._protocol),oe=new Di(E,"DELETE",function re(ye,Me){},v.maxOperationRetryTime);return oe.successCodes=[200,204],oe.errorHandler=zr(h),oe}(v.storage,v._location);return v.storage.makeRequestWithTokens(h,Br)}(v=(0,an.m9)(v))}(this._delegate)}_throwIfRoot(h){if(""===this._delegate._location.path)throw vn(h)}}class ya{constructor(h,m){this.app=h,this._delegate=m}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(h){if(va(h))throw Zn("ref() expected a child path but got a URL, use refFromURL instead.");return new Ir(fr(this._delegate,h),this)}refFromURL(h){if(!va(h))throw Zn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Un.makeFromUrl(h,this._delegate.host)}catch{throw Zn("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ir(fr(this._delegate,h),this)}setMaxUploadRetryTime(h){this._delegate.maxUploadRetryTime=h}setMaxOperationRetryTime(h){this._delegate.maxOperationRetryTime=h}useEmulator(h,m,E={}){!function yo(v,h,m,E={}){!function Ds(v,h,m,E={}){v.host=`${h}:${m}`,v._protocol="http";const{mockUserToken:x}=E;x&&(v._overrideAuthToken="string"==typeof x?x:(0,an.Sg)(x,v.app.options.projectId))}(v,h,m,E)}(this._delegate,h,m,E)}}function va(v){return/^[A-Za-z]+:\/\//.test(v)}function ju(v,{instanceIdentifier:h}){const m=v.getProvider("app-compat").getImmediate(),E=v.getProvider("storage").getImmediate({identifier:h});return new ya(m,E)}function Hu(v){const h=function Ga(v){return new ke.y(h=>{const m=re=>h.next(re);m(v.snapshot);const B=v.on("state_changed",m);return v.then(re=>{m(re),h.complete()},re=>{m(v.snapshot),(re=>{h.error(re)})(re)}),function(){B()}}).pipe(function Et(v,h=Qe.z){return(0,rt.e)((m,E)=>{let x=null,B=null,re=null;const oe=()=>{if(x){x.unsubscribe(),x=null;const Me=B;B=null,E.next(Me)}};function ye(){const Me=re+v,Je=h.now();if(Je<Me)return x=this.schedule(void 0,Me-Je),void E.add(x);oe()}m.subscribe((0,fe.x)(E,Me=>{B=Me,re=h.now(),x||(x=h.schedule(ye,v),E.add(x))},()=>{oe(),E.complete()},void 0,()=>{B=x=null}))})}(0))}(v);return{task:v,then:v.then.bind(v),catch:v.catch.bind(v),pause:v.pause.bind(v),cancel:v.cancel.bind(v),resume:v.resume.bind(v),snapshotChanges:()=>h,percentageChanges:()=>h.pipe((0,De.U)(m=>m.bytesTransferred/m.totalBytes*100))}}function ia(v){return{getDownloadURL:()=>(0,Ce.of)(void 0).pipe(ce.fc,(0,lt.w)(()=>v.getDownloadURL()),ce.iC),getMetadata:()=>(0,Ce.of)(void 0).pipe(ce.fc,(0,lt.w)(()=>v.getMetadata()),ce.iC),delete:()=>(0,Ge.D)(v.delete()),child:h=>ia(v.child(h)),updateMetadata:h=>(0,Ge.D)(v.updateMetadata(h)),put:(h,m)=>Hu(v.put(h,m)),putString:(h,m,E)=>Hu(v.putString(h,m,E)),list:h=>(0,Ge.D)(v.list(h)),listAll:()=>(0,Ge.D)(v.listAll())}}!function wr(v){const h={TaskState:Wr,TaskEvent:Xo,StringFormat:Ze,Storage:ya,Reference:Ir};v.INTERNAL.registerComponent(new It.wA("storage-compat",ju,"PUBLIC").setServiceProps(h).setMultipleInstances(!0)),v.registerVersion("@firebase/storage-compat","0.3.2")}(ur.Z);const dl=new W.OlP("angularfire2.storageBucket"),sa=new W.OlP("angularfire2.storage.maxUploadRetryTime"),Vo=new W.OlP("angularfire2.storage.maxOperationRetryTime"),Uo=new W.OlP("angularfire2.storage.use-emulator");let Hs=(()=>{class v{storage;constructor(m,E,x,B,re,oe,ye,Me,Je,ft){const nn=(0,Ft.on)(m,re,E);this.storage=(0,Ft.cc)(`${nn.name}.storage.${x}`,"AngularFireStorage",nn.name,()=>{const Qt=re.runOutsideAngular(()=>nn.storage(x||void 0)),Ot=Je;return Ot&&Qt.useEmulator(...Ot),ye&&Qt.setMaxUploadRetryTime(ye),Me&&Qt.setMaxOperationRetryTime(Me),Qt},[ye,Me])}ref(m){return ia(this.storage.ref(m))}refFromURL(m){return ia(this.storage.refFromURL(m))}upload(m,E,x){return ia(this.storage.ref(m)).put(E,x)}static \u0275fac=function(E){return new(E||v)(W.LFG(Ft.Dh),W.LFG(Ft.xv,8),W.LFG(dl,8),W.LFG(W.Lbi),W.LFG(W.R0b),W.LFG(ce.HU),W.LFG(sa,8),W.LFG(Vo,8),W.LFG(Uo,8),W.LFG(ce.Rf,8))};static \u0275prov=W.Yz7({token:v,factory:v.\u0275fac,providedIn:"any"})}return v})(),bi=(()=>{class v{static \u0275fac=function(E){return new(E||v)};static \u0275mod=W.oAB({type:v});static \u0275inj=W.cJS({})}return v})(),fs=(()=>{class v{constructor(){ue.Z.registerVersion("angularfire",ce.q4.full,"gcs-compat")}static \u0275fac=function(E){return new(E||v)};static \u0275mod=W.oAB({type:v});static \u0275inj=W.cJS({providers:[Hs],imports:[bi]})}return v})();var qa=$(1626),ir=$(6825);function Ss(v){return new W.vHH(3e3,!1)}function F(v){switch(v.length){case 0:return new ir.ZN;case 1:return v[0];default:return new ir.ZE(v)}}function A(v,h,m=new Map,E=new Map){const x=[],B=[];let re=-1,oe=null;if(h.forEach(ye=>{const Me=ye.get("offset"),Je=Me==re,ft=Je&&oe||new Map;ye.forEach((nn,Qt)=>{let Ot=Qt,Gt=nn;if("offset"!==Qt)switch(Ot=v.normalizePropertyName(Ot,x),Gt){case ir.k1:Gt=m.get(Qt);break;case ir.l3:Gt=E.get(Qt);break;default:Gt=v.normalizeStyleValue(Qt,Ot,Gt,x)}ft.set(Ot,Gt)}),Je||B.push(ft),oe=ft,re=Me}),x.length)throw function ua(v){return new W.vHH(3502,!1)}();return B}function j(v,h,m,E){switch(h){case"start":v.onStart(()=>E(m&&X(m,"start",v)));break;case"done":v.onDone(()=>E(m&&X(m,"done",v)));break;case"destroy":v.onDestroy(()=>E(m&&X(m,"destroy",v)))}}function X(v,h,m){const B=He(v.element,v.triggerName,v.fromState,v.toState,h||v.phaseName,m.totalTime??v.totalTime,!!m.disabled),re=v._data;return null!=re&&(B._data=re),B}function He(v,h,m,E,x="",B=0,re){return{element:v,triggerName:h,fromState:m,toState:E,phaseName:x,totalTime:B,disabled:!!re}}function ot(v,h,m){let E=v.get(h);return E||v.set(h,E=m),E}function tn(v){const h=v.indexOf(":");return[v.substring(1,h),v.slice(h+1)]}const qn=(()=>typeof document>"u"?null:document.documentElement)();function Qr(v){const h=v.parentNode||v.host||null;return h===qn?null:h}let ni=null,Wi=!1;function zu(v,h){for(;h;){if(h===v)return!0;h=Qr(h)}return!1}function Sr(v,h,m){if(m)return Array.from(v.querySelectorAll(h));const E=v.querySelector(h);return E?[E]:[]}let Da=(()=>{class v{validateStyleProperty(m){return function Ca(v){ni||(ni=function Po(){return typeof document<"u"?document.body:null}()||{},Wi=!!ni.style&&"WebkitAppearance"in ni.style);let h=!0;return ni.style&&!function Si(v){return"ebkit"==v.substring(1,6)}(v)&&(h=v in ni.style,!h&&Wi&&(h="Webkit"+v.charAt(0).toUpperCase()+v.slice(1)in ni.style)),h}(m)}matchesElement(m,E){return!1}containsElement(m,E){return zu(m,E)}getParentElement(m){return Qr(m)}query(m,E,x){return Sr(m,E,x)}computeStyle(m,E,x){return x||""}animate(m,E,x,B,re,oe=[],ye){return new ir.ZN(x,B)}static#e=this.\u0275fac=function(E){return new(E||v)};static#t=this.\u0275prov=W.Yz7({token:v,factory:v.\u0275fac})}return v})(),Ps=(()=>{class v{static#e=this.NOOP=new Da}return v})();const Md=1e3,An="ng-enter",Mo="ng-leave",Ki="ng-trigger",zs=".ng-trigger",la="ng-animating",at=".ng-animating";function yr(v){if("number"==typeof v)return v;const h=v.match(/^(-?[\.\d]+)(m?s)/);return!h||h.length<2?0:gs(parseFloat(h[1]),h[2])}function gs(v,h){return"s"===h?v*Md:v}function wu(v,h,m){return v.hasOwnProperty("duration")?v:function Vt(v,h,m){let x,B=0,re="";if("string"==typeof v){const oe=v.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===oe)return h.push(Ss()),{duration:0,delay:0,easing:""};x=gs(parseFloat(oe[1]),oe[2]);const ye=oe[3];null!=ye&&(B=gs(parseFloat(ye),oe[4]));const Me=oe[5];Me&&(re=Me)}else x=v;if(!m){let oe=!1,ye=h.length;x<0&&(h.push(function vi(){return new W.vHH(3100,!1)}()),oe=!0),B<0&&(h.push(function Ea(){return new W.vHH(3101,!1)}()),oe=!0),oe&&h.splice(ye,0,Ss())}return{duration:x,delay:B,easing:re}}(v,h,m)}function jt(v,h={}){return Object.keys(v).forEach(m=>{h[m]=v[m]}),h}function cn(v){const h=new Map;return Object.keys(v).forEach(m=>{h.set(m,v[m])}),h}function Ye(v,h=new Map,m){if(m)for(let[E,x]of m)h.set(E,x);for(let[E,x]of v)h.set(E,x);return h}function Rr(v,h,m){h.forEach((E,x)=>{const B=it(x);m&&!m.has(x)&&m.set(x,v.style[B]),v.style[B]=E})}function Ja(v,h){h.forEach((m,E)=>{const x=it(E);v.style[x]=""})}function Gu(v){return Array.isArray(v)?1==v.length?v[0]:(0,ir.vP)(v):v}const Xa=new RegExp("{{\\s*(.+?)\\s*}}","g");function ac(v){let h=[];if("string"==typeof v){let m;for(;m=Xa.exec(v);)h.push(m[1]);Xa.lastIndex=0}return h}function Gs(v,h,m){const E=v.toString(),x=E.replace(Xa,(B,re)=>{let oe=h[re];return null==oe&&(m.push(function oa(v){return new W.vHH(3003,!1)}()),oe=""),oe.toString()});return x==E?v:x}function Wu(v){const h=[];let m=v.next();for(;!m.done;)h.push(m.value),m=v.next();return h}const Uc=/-+([a-z0-9])/g;function it(v){return v.replace(Uc,(...h)=>h[1].toUpperCase())}function Kn(v,h,m){switch(h.type){case 7:return v.visitTrigger(h,m);case 0:return v.visitState(h,m);case 1:return v.visitTransition(h,m);case 2:return v.visitSequence(h,m);case 3:return v.visitGroup(h,m);case 4:return v.visitAnimate(h,m);case 5:return v.visitKeyframes(h,m);case 6:return v.visitStyle(h,m);case 8:return v.visitReference(h,m);case 9:return v.visitAnimateChild(h,m);case 10:return v.visitAnimateRef(h,m);case 11:return v.visitQuery(h,m);case 12:return v.visitStagger(h,m);default:throw function $s(v){return new W.vHH(3004,!1)}()}}function xl(v,h){return window.getComputedStyle(v)[h]}const wt="*";function Yr(v,h){const m=[];return"string"==typeof v?v.split(/\s*,\s*/).forEach(E=>function Ws(v,h,m){if(":"==v[0]){const ye=function Aa(v,h){switch(v){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(m,E)=>parseFloat(E)>parseFloat(m);case":decrement":return(m,E)=>parseFloat(E)<parseFloat(m);default:return h.push(function Ta(v){return new W.vHH(3016,!1)}()),"* => *"}}(v,m);if("function"==typeof ye)return void h.push(ye);v=ye}const E=v.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==E||E.length<4)return m.push(function hl(v){return new W.vHH(3015,!1)}()),h;const x=E[1],B=E[2],re=E[3];h.push(gl(x,re));"<"==B[0]&&!(x==wt&&re==wt)&&h.push(gl(re,x))}(E,m,h)):m.push(v),m}const Oo=new Set(["true","1"]),Ri=new Set(["false","0"]);function gl(v,h){const m=Oo.has(v)||Ri.has(v),E=Oo.has(h)||Ri.has(h);return(x,B)=>{let re=v==wt||v==x,oe=h==wt||h==B;return!re&&m&&"boolean"==typeof x&&(re=x?Oo.has(v):Ri.has(v)),!oe&&E&&"boolean"==typeof B&&(oe=B?Oo.has(h):Ri.has(h)),re&&oe}}const kl=new RegExp("s*:selfs*,?","g");function ml(v,h,m,E){return new _l(v).build(h,m,E)}class _l{constructor(h){this._driver=h}build(h,m,E){const x=new N(m);return this._resetContextStyleTimingState(x),Kn(this,Gu(h),x)}_resetContextStyleTimingState(h){h.currentQuerySelector="",h.collectedStyles=new Map,h.collectedStyles.set("",new Map),h.currentTime=0}visitTrigger(h,m){let E=m.queryCount=0,x=m.depCount=0;const B=[],re=[];return"@"==h.name.charAt(0)&&m.errors.push(function So(){return new W.vHH(3006,!1)}()),h.definitions.forEach(oe=>{if(this._resetContextStyleTimingState(m),0==oe.type){const ye=oe,Me=ye.name;Me.toString().split(/\s*,\s*/).forEach(Je=>{ye.name=Je,B.push(this.visitState(ye,m))}),ye.name=Me}else if(1==oe.type){const ye=this.visitTransition(oe,m);E+=ye.queryCount,x+=ye.depCount,re.push(ye)}else m.errors.push(function ro(){return new W.vHH(3007,!1)}())}),{type:7,name:h.name,states:B,transitions:re,queryCount:E,depCount:x,options:null}}visitState(h,m){const E=this.visitStyle(h.styles,m),x=h.options&&h.options.params||null;if(E.containsDynamicStyles){const B=new Set,re=x||{};E.styles.forEach(oe=>{oe instanceof Map&&oe.forEach(ye=>{ac(ye).forEach(Me=>{re.hasOwnProperty(Me)||B.add(Me)})})}),B.size&&(Wu(B.values()),m.errors.push(function Ka(v,h){return new W.vHH(3008,!1)}()))}return{type:0,name:h.name,style:E,options:x?{params:x}:null}}visitTransition(h,m){m.queryCount=0,m.depCount=0;const E=Kn(this,Gu(h.animation),m);return{type:1,matchers:Yr(h.expr,m.errors),animation:E,queryCount:m.queryCount,depCount:m.depCount,options:U(h.options)}}visitSequence(h,m){return{type:2,steps:h.steps.map(E=>Kn(this,E,m)),options:U(h.options)}}visitGroup(h,m){const E=m.currentTime;let x=0;const B=h.steps.map(re=>{m.currentTime=E;const oe=Kn(this,re,m);return x=Math.max(x,m.currentTime),oe});return m.currentTime=x,{type:3,steps:B,options:U(h.options)}}visitAnimate(h,m){const E=function C(v,h){if(v.hasOwnProperty("duration"))return v;if("number"==typeof v)return Y(wu(v,h).duration,0,"");const m=v;if(m.split(/\s+/).some(B=>"{"==B.charAt(0)&&"{"==B.charAt(1))){const B=Y(0,0,"");return B.dynamic=!0,B.strValue=m,B}const x=wu(m,h);return Y(x.duration,x.delay,x.easing)}(h.timings,m.errors);m.currentAnimateTimings=E;let x,B=h.styles?h.styles:(0,ir.oB)({});if(5==B.type)x=this.visitKeyframes(B,m);else{let re=h.styles,oe=!1;if(!re){oe=!0;const Me={};E.easing&&(Me.easing=E.easing),re=(0,ir.oB)(Me)}m.currentTime+=E.duration+E.delay;const ye=this.visitStyle(re,m);ye.isEmptyStep=oe,x=ye}return m.currentAnimateTimings=null,{type:4,timings:E,style:x,options:null}}visitStyle(h,m){const E=this._makeStyleAst(h,m);return this._validateStyleAst(E,m),E}_makeStyleAst(h,m){const E=[],x=Array.isArray(h.styles)?h.styles:[h.styles];for(let oe of x)"string"==typeof oe?oe===ir.l3?E.push(oe):m.errors.push(new W.vHH(3002,!1)):E.push(cn(oe));let B=!1,re=null;return E.forEach(oe=>{if(oe instanceof Map&&(oe.has("easing")&&(re=oe.get("easing"),oe.delete("easing")),!B))for(let ye of oe.values())if(ye.toString().indexOf("{{")>=0){B=!0;break}}),{type:6,styles:E,easing:re,offset:h.offset,containsDynamicStyles:B,options:null}}_validateStyleAst(h,m){const E=m.currentAnimateTimings;let x=m.currentTime,B=m.currentTime;E&&B>0&&(B-=E.duration+E.delay),h.styles.forEach(re=>{"string"!=typeof re&&re.forEach((oe,ye)=>{const Me=m.collectedStyles.get(m.currentQuerySelector),Je=Me.get(ye);let ft=!0;Je&&(B!=x&&B>=Je.startTime&&x<=Je.endTime&&(m.errors.push(function Ro(v,h,m,E,x){return new W.vHH(3010,!1)}()),ft=!1),B=Je.startTime),ft&&Me.set(ye,{startTime:B,endTime:x}),m.options&&function pl(v,h,m){const E=h.params||{},x=ac(v);x.length&&x.forEach(B=>{E.hasOwnProperty(B)||m.push(function Bo(v){return new W.vHH(3001,!1)}())})}(oe,m.options,m.errors)})})}visitKeyframes(h,m){const E={type:5,styles:[],options:null};if(!m.currentAnimateTimings)return m.errors.push(function aa(){return new W.vHH(3011,!1)}()),E;let B=0;const re=[];let oe=!1,ye=!1,Me=0;const Je=h.steps.map(Dr=>{const jn=this._makeStyleAst(Dr,m);let Yn=null!=jn.offset?jn.offset:function T(v){if("string"==typeof v)return null;let h=null;if(Array.isArray(v))v.forEach(m=>{if(m instanceof Map&&m.has("offset")){const E=m;h=parseFloat(E.get("offset")),E.delete("offset")}});else if(v instanceof Map&&v.has("offset")){const m=v;h=parseFloat(m.get("offset")),m.delete("offset")}return h}(jn.styles),Mn=0;return null!=Yn&&(B++,Mn=jn.offset=Yn),ye=ye||Mn<0||Mn>1,oe=oe||Mn<Me,Me=Mn,re.push(Mn),jn});ye&&m.errors.push(function ps(){return new W.vHH(3012,!1)}()),oe&&m.errors.push(function Ei(){return new W.vHH(3200,!1)}());const ft=h.steps.length;let nn=0;B>0&&B<ft?m.errors.push(function Zr(){return new W.vHH(3202,!1)}()):0==B&&(nn=1/(ft-1));const Qt=ft-1,Ot=m.currentTime,Gt=m.currentAnimateTimings,un=Gt.duration;return Je.forEach((Dr,jn)=>{const Yn=nn>0?jn==Qt?1:nn*jn:re[jn],Mn=Yn*un;m.currentTime=Ot+Gt.delay+Mn,Gt.duration=Mn,this._validateStyleAst(Dr,m),Dr.offset=Yn,E.styles.push(Dr)}),E}visitReference(h,m){return{type:8,animation:Kn(this,Gu(h.animation),m),options:U(h.options)}}visitAnimateChild(h,m){return m.depCount++,{type:9,options:U(h.options)}}visitAnimateRef(h,m){return{type:10,animation:this.visitReference(h.animation,m),options:U(h.options)}}visitQuery(h,m){const E=m.currentQuerySelector,x=h.options||{};m.queryCount++,m.currentQuery=h;const[B,re]=function Bc(v){const h=!!v.split(/\s*,\s*/).find(m=>":self"==m);return h&&(v=v.replace(kl,"")),v=v.replace(/@\*/g,zs).replace(/@\w+/g,m=>zs+"-"+m.slice(1)).replace(/:animating/g,at),[v,h]}(h.selector);m.currentQuerySelector=E.length?E+" "+B:B,ot(m.collectedStyles,m.currentQuerySelector,new Map);const oe=Kn(this,Gu(h.animation),m);return m.currentQuery=null,m.currentQuerySelector=E,{type:11,selector:B,limit:x.limit||0,optional:!!x.optional,includeSelf:re,animation:oe,originalSelector:h.selector,options:U(h.options)}}visitStagger(h,m){m.currentQuery||m.errors.push(function jo(){return new W.vHH(3013,!1)}());const E="full"===h.timings?{duration:0,delay:0,easing:"full"}:wu(h.timings,m.errors,!0);return{type:12,animation:Kn(this,Gu(h.animation),m),timings:E,options:null}}}class N{constructor(h){this.errors=h,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function U(v){return v?(v=jt(v)).params&&(v.params=function b(v){return v?jt(v):null}(v.params)):v={},v}function Y(v,h,m){return{duration:v,delay:h,easing:m}}function le(v,h,m,E,x,B,re=null,oe=!1){return{type:1,element:v,keyframes:h,preStyleProps:m,postStyleProps:E,duration:x,delay:B,totalTime:x+B,easing:re,subTimeline:oe}}class je{constructor(){this._map=new Map}get(h){return this._map.get(h)||[]}append(h,m){let E=this._map.get(h);E||this._map.set(h,E=[]),E.push(...m)}has(h){return this._map.has(h)}clear(){this._map.clear()}}const fn=new RegExp(":enter","g"),Pn=new RegExp(":leave","g");function nr(v,h,m,E,x,B=new Map,re=new Map,oe,ye,Me=[]){return(new qu).buildKeyframes(v,h,m,E,x,B,re,oe,ye,Me)}class qu{buildKeyframes(h,m,E,x,B,re,oe,ye,Me,Je=[]){Me=Me||new je;const ft=new Ho(h,m,Me,x,B,Je,[]);ft.options=ye;const nn=ye.delay?yr(ye.delay):0;ft.currentTimeline.delayNextStep(nn),ft.currentTimeline.setStyles([re],null,ft.errors,ye),Kn(this,E,ft);const Qt=ft.timelines.filter(Ot=>Ot.containsAnimation());if(Qt.length&&oe.size){let Ot;for(let Gt=Qt.length-1;Gt>=0;Gt--){const un=Qt[Gt];if(un.element===m){Ot=un;break}}Ot&&!Ot.allowOnlyTimelineStyles()&&Ot.setStyles([oe],null,ft.errors,ye)}return Qt.length?Qt.map(Ot=>Ot.buildKeyframes()):[le(m,[],[],[],0,nn,"",!1)]}visitTrigger(h,m){}visitState(h,m){}visitTransition(h,m){}visitAnimateChild(h,m){const E=m.subInstructions.get(m.element);if(E){const x=m.createSubContext(h.options),B=m.currentTimeline.currentTime,re=this._visitSubInstructions(E,x,x.options);B!=re&&m.transformIntoNewTimeline(re)}m.previousNode=h}visitAnimateRef(h,m){const E=m.createSubContext(h.options);E.transformIntoNewTimeline(),this._applyAnimationRefDelays([h.options,h.animation.options],m,E),this.visitReference(h.animation,E),m.transformIntoNewTimeline(E.currentTimeline.currentTime),m.previousNode=h}_applyAnimationRefDelays(h,m,E){for(const x of h){const B=x?.delay;if(B){const re="number"==typeof B?B:yr(Gs(B,x?.params??{},m.errors));E.delayNextStep(re)}}}_visitSubInstructions(h,m,E){let B=m.currentTimeline.currentTime;const re=null!=E.duration?yr(E.duration):null,oe=null!=E.delay?yr(E.delay):null;return 0!==re&&h.forEach(ye=>{const Me=m.appendInstructionToTimeline(ye,re,oe);B=Math.max(B,Me.duration+Me.delay)}),B}visitReference(h,m){m.updateOptions(h.options,!0),Kn(this,h.animation,m),m.previousNode=h}visitSequence(h,m){const E=m.subContextCount;let x=m;const B=h.options;if(B&&(B.params||B.delay)&&(x=m.createSubContext(B),x.transformIntoNewTimeline(),null!=B.delay)){6==x.previousNode.type&&(x.currentTimeline.snapshotCurrentStyles(),x.previousNode=Pi);const re=yr(B.delay);x.delayNextStep(re)}h.steps.length&&(h.steps.forEach(re=>Kn(this,re,x)),x.currentTimeline.applyStylesToKeyframe(),x.subContextCount>E&&x.transformIntoNewTimeline()),m.previousNode=h}visitGroup(h,m){const E=[];let x=m.currentTimeline.currentTime;const B=h.options&&h.options.delay?yr(h.options.delay):0;h.steps.forEach(re=>{const oe=m.createSubContext(h.options);B&&oe.delayNextStep(B),Kn(this,re,oe),x=Math.max(x,oe.currentTimeline.currentTime),E.push(oe.currentTimeline)}),E.forEach(re=>m.currentTimeline.mergeTimelineCollectedStyles(re)),m.transformIntoNewTimeline(x),m.previousNode=h}_visitTiming(h,m){if(h.dynamic){const E=h.strValue;return wu(m.params?Gs(E,m.params,m.errors):E,m.errors)}return{duration:h.duration,delay:h.delay,easing:h.easing}}visitAnimate(h,m){const E=m.currentAnimateTimings=this._visitTiming(h.timings,m),x=m.currentTimeline;E.delay&&(m.incrementTime(E.delay),x.snapshotCurrentStyles());const B=h.style;5==B.type?this.visitKeyframes(B,m):(m.incrementTime(E.duration),this.visitStyle(B,m),x.applyStylesToKeyframe()),m.currentAnimateTimings=null,m.previousNode=h}visitStyle(h,m){const E=m.currentTimeline,x=m.currentAnimateTimings;!x&&E.hasCurrentStyleProperties()&&E.forwardFrame();const B=x&&x.easing||h.easing;h.isEmptyStep?E.applyEmptyStep(B):E.setStyles(h.styles,B,m.errors,m.options),m.previousNode=h}visitKeyframes(h,m){const E=m.currentAnimateTimings,x=m.currentTimeline.duration,B=E.duration,oe=m.createSubContext().currentTimeline;oe.easing=E.easing,h.styles.forEach(ye=>{oe.forwardTime((ye.offset||0)*B),oe.setStyles(ye.styles,ye.easing,m.errors,m.options),oe.applyStylesToKeyframe()}),m.currentTimeline.mergeTimelineCollectedStyles(oe),m.transformIntoNewTimeline(x+B),m.previousNode=h}visitQuery(h,m){const E=m.currentTimeline.currentTime,x=h.options||{},B=x.delay?yr(x.delay):0;B&&(6===m.previousNode.type||0==E&&m.currentTimeline.hasCurrentStyleProperties())&&(m.currentTimeline.snapshotCurrentStyles(),m.previousNode=Pi);let re=E;const oe=m.invokeQuery(h.selector,h.originalSelector,h.limit,h.includeSelf,!!x.optional,m.errors);m.currentQueryTotal=oe.length;let ye=null;oe.forEach((Me,Je)=>{m.currentQueryIndex=Je;const ft=m.createSubContext(h.options,Me);B&&ft.delayNextStep(B),Me===m.element&&(ye=ft.currentTimeline),Kn(this,h.animation,ft),ft.currentTimeline.applyStylesToKeyframe(),re=Math.max(re,ft.currentTimeline.currentTime)}),m.currentQueryIndex=0,m.currentQueryTotal=0,m.transformIntoNewTimeline(re),ye&&(m.currentTimeline.mergeTimelineCollectedStyles(ye),m.currentTimeline.snapshotCurrentStyles()),m.previousNode=h}visitStagger(h,m){const E=m.parentContext,x=m.currentTimeline,B=h.timings,re=Math.abs(B.duration),oe=re*(m.currentQueryTotal-1);let ye=re*m.currentQueryIndex;switch(B.duration<0?"reverse":B.easing){case"reverse":ye=oe-ye;break;case"full":ye=E.currentStaggerTime}const Je=m.currentTimeline;ye&&Je.delayNextStep(ye);const ft=Je.currentTime;Kn(this,h.animation,m),m.previousNode=h,E.currentStaggerTime=x.currentTime-ft+(x.startTime-E.currentTimeline.startTime)}}const Pi={};class Ho{constructor(h,m,E,x,B,re,oe,ye){this._driver=h,this.element=m,this.subInstructions=E,this._enterClassName=x,this._leaveClassName=B,this.errors=re,this.timelines=oe,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Pi,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ye||new so(this._driver,m,0),oe.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(h,m){if(!h)return;const E=h;let x=this.options;null!=E.duration&&(x.duration=yr(E.duration)),null!=E.delay&&(x.delay=yr(E.delay));const B=E.params;if(B){let re=x.params;re||(re=this.options.params={}),Object.keys(B).forEach(oe=>{(!m||!re.hasOwnProperty(oe))&&(re[oe]=Gs(B[oe],re,this.errors))})}}_copyOptions(){const h={};if(this.options){const m=this.options.params;if(m){const E=h.params={};Object.keys(m).forEach(x=>{E[x]=m[x]})}}return h}createSubContext(h=null,m,E){const x=m||this.element,B=new Ho(this._driver,x,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(x,E||0));return B.previousNode=this.previousNode,B.currentAnimateTimings=this.currentAnimateTimings,B.options=this._copyOptions(),B.updateOptions(h),B.currentQueryIndex=this.currentQueryIndex,B.currentQueryTotal=this.currentQueryTotal,B.parentContext=this,this.subContextCount++,B}transformIntoNewTimeline(h){return this.previousNode=Pi,this.currentTimeline=this.currentTimeline.fork(this.element,h),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(h,m,E){const x={duration:m??h.duration,delay:this.currentTimeline.currentTime+(E??0)+h.delay,easing:""},B=new Fl(this._driver,h.element,h.keyframes,h.preStyleProps,h.postStyleProps,x,h.stretchStartingKeyframe);return this.timelines.push(B),x}incrementTime(h){this.currentTimeline.forwardTime(this.currentTimeline.duration+h)}delayNextStep(h){h>0&&this.currentTimeline.delayNextStep(h)}invokeQuery(h,m,E,x,B,re){let oe=[];if(x&&oe.push(this.element),h.length>0){h=(h=h.replace(fn,"."+this._enterClassName)).replace(Pn,"."+this._leaveClassName);let Me=this._driver.query(this.element,h,1!=E);0!==E&&(Me=E<0?Me.slice(Me.length+E,Me.length):Me.slice(0,E)),oe.push(...Me)}return!B&&0==oe.length&&re.push(function Rs(v){return new W.vHH(3014,!1)}()),oe}}class so{constructor(h,m,E,x){this._driver=h,this.element=m,this.startTime=E,this._elementTimelineStylesLookup=x,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(m),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(m,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(h){const m=1===this._keyframes.size&&this._pendingStyles.size;this.duration||m?(this.forwardTime(this.currentTime+h),m&&this.snapshotCurrentStyles()):this.startTime+=h}fork(h,m){return this.applyStylesToKeyframe(),new so(this._driver,h,m||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(h){this.applyStylesToKeyframe(),this.duration=h,this._loadKeyframe()}_updateStyle(h,m){this._localTimelineStyles.set(h,m),this._globalTimelineStyles.set(h,m),this._styleSummary.set(h,{time:this.currentTime,value:m})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(h){h&&this._previousKeyframe.set("easing",h);for(let[m,E]of this._globalTimelineStyles)this._backFill.set(m,E||ir.l3),this._currentKeyframe.set(m,ir.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(h,m,E,x){m&&this._previousKeyframe.set("easing",m);const B=x&&x.params||{},re=function yl(v,h){const m=new Map;let E;return v.forEach(x=>{if("*"===x){E=E||h.keys();for(let B of E)m.set(B,ir.l3)}else Ye(x,m)}),m}(h,this._globalTimelineStyles);for(let[oe,ye]of re){const Me=Gs(ye,B,E);this._pendingStyles.set(oe,Me),this._localTimelineStyles.has(oe)||this._backFill.set(oe,this._globalTimelineStyles.get(oe)??ir.l3),this._updateStyle(oe,Me)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((h,m)=>{this._currentKeyframe.set(m,h)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((h,m)=>{this._currentKeyframe.has(m)||this._currentKeyframe.set(m,h)}))}snapshotCurrentStyles(){for(let[h,m]of this._localTimelineStyles)this._pendingStyles.set(h,m),this._updateStyle(h,m)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const h=[];for(let m in this._currentKeyframe)h.push(m);return h}mergeTimelineCollectedStyles(h){h._styleSummary.forEach((m,E)=>{const x=this._styleSummary.get(E);(!x||m.time>x.time)&&this._updateStyle(E,m.value)})}buildKeyframes(){this.applyStylesToKeyframe();const h=new Set,m=new Set,E=1===this._keyframes.size&&0===this.duration;let x=[];this._keyframes.forEach((oe,ye)=>{const Me=Ye(oe,new Map,this._backFill);Me.forEach((Je,ft)=>{Je===ir.k1?h.add(ft):Je===ir.l3&&m.add(ft)}),E||Me.set("offset",ye/this.duration),x.push(Me)});const B=h.size?Wu(h.values()):[],re=m.size?Wu(m.values()):[];if(E){const oe=x[0],ye=new Map(oe);oe.set("offset",0),ye.set("offset",1),x=[oe,ye]}return le(this.element,x,B,re,this.duration,this.startTime,this.easing,!1)}}class Fl extends so{constructor(h,m,E,x,B,re,oe=!1){super(h,m,re.delay),this.keyframes=E,this.preStyleProps=x,this.postStyleProps=B,this._stretchStartingKeyframe=oe,this.timings={duration:re.duration,delay:re.delay,easing:re.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let h=this.keyframes,{delay:m,duration:E,easing:x}=this.timings;if(this._stretchStartingKeyframe&&m){const B=[],re=E+m,oe=m/re,ye=Ye(h[0]);ye.set("offset",0),B.push(ye);const Me=Ye(h[0]);Me.set("offset",ms(oe)),B.push(Me);const Je=h.length-1;for(let ft=1;ft<=Je;ft++){let nn=Ye(h[ft]);const Qt=nn.get("offset");nn.set("offset",ms((m+Qt*E)/re)),B.push(nn)}E=re,m=0,x="",h=B}return le(this.element,h,this.preStyleProps,this.postStyleProps,E,m,x,!0)}}function ms(v,h=3){const m=Math.pow(10,h-1);return Math.round(v*m)/m}class vo{}const nu=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Ll extends vo{normalizePropertyName(h,m){return it(h)}normalizeStyleValue(h,m,E,x){let B="";const re=E.toString().trim();if(nu.has(m)&&0!==E&&"0"!==E)if("number"==typeof E)B="px";else{const oe=E.match(/^[+-]?[\d\.]+([a-z]*)$/);oe&&0==oe[1].length&&x.push(function Ia(v,h){return new W.vHH(3005,!1)}())}return re+B}}function vl(v,h,m,E,x,B,re,oe,ye,Me,Je,ft,nn){return{type:0,element:v,triggerName:h,isRemovalTransition:x,fromState:m,fromStyles:B,toState:E,toStyles:re,timelines:oe,queriedElements:ye,preStyleProps:Me,postStyleProps:Je,totalTime:ft,errors:nn}}const Ku={};class Vl{constructor(h,m,E){this._triggerName=h,this.ast=m,this._stateStyles=E}match(h,m,E,x){return function Cu(v,h,m,E,x){return v.some(B=>B(h,m,E,x))}(this.ast.matchers,h,m,E,x)}buildStyles(h,m,E){let x=this._stateStyles.get("*");return void 0!==h&&(x=this._stateStyles.get(h?.toString())||x),x?x.buildStyles(m,E):new Map}build(h,m,E,x,B,re,oe,ye,Me,Je){const ft=[],nn=this.ast.options&&this.ast.options.params||Ku,Ot=this.buildStyles(E,oe&&oe.params||Ku,ft),Gt=ye&&ye.params||Ku,un=this.buildStyles(x,Gt,ft),Dr=new Set,jn=new Map,Yn=new Map,Mn="void"===x,Io={params:ru(Gt,nn),delay:this.ast.options?.delay},vs=Je?[]:nr(h,m,this.ast.animation,B,re,Ot,un,Io,Me,ft);let li=0;if(vs.forEach(xs=>{li=Math.max(xs.duration+xs.delay,li)}),ft.length)return vl(m,this._triggerName,E,x,Mn,Ot,un,[],[],jn,Yn,li,ft);vs.forEach(xs=>{const gr=xs.element,Kl=ot(jn,gr,new Set);xs.preStyleProps.forEach(cu=>Kl.add(cu));const xa=ot(Yn,gr,new Set);xs.postStyleProps.forEach(cu=>xa.add(cu)),gr!==m&&Dr.add(gr)});const Es=Wu(Dr.values());return vl(m,this._triggerName,E,x,Mn,Ot,un,vs,Es,jn,Yn,li)}}function ru(v,h){const m=jt(h);for(const E in v)v.hasOwnProperty(E)&&null!=v[E]&&(m[E]=v[E]);return m}class Zu{constructor(h,m,E){this.styles=h,this.defaultParams=m,this.normalizer=E}buildStyles(h,m){const E=new Map,x=jt(this.defaultParams);return Object.keys(h).forEach(B=>{const re=h[B];null!==re&&(x[B]=re)}),this.styles.styles.forEach(B=>{"string"!=typeof B&&B.forEach((re,oe)=>{re&&(re=Gs(re,x,m));const ye=this.normalizer.normalizePropertyName(oe,m);re=this.normalizer.normalizeStyleValue(oe,ye,re,m),E.set(oe,re)})}),E}}class jc{constructor(h,m,E){this.name=h,this.ast=m,this._normalizer=E,this.transitionFactories=[],this.states=new Map,m.states.forEach(x=>{this.states.set(x.name,new Zu(x.style,x.options&&x.options.params||{},E))}),xd(this.states,"true","1"),xd(this.states,"false","0"),m.transitions.forEach(x=>{this.transitionFactories.push(new Vl(h,x,this.states))}),this.fallbackTransition=function qf(v,h,m){return new Vl(v,{type:1,animation:{type:2,steps:[],options:null},matchers:[(re,oe)=>!0],options:null,queryCount:0,depCount:0},h)}(h,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(h,m,E,x){return this.transitionFactories.find(re=>re.match(h,m,E,x))||null}matchStyles(h,m,E){return this.fallbackTransition.buildStyles(h,m,E)}}function xd(v,h,m){v.has(h)?v.has(m)||v.set(m,v.get(h)):v.has(m)&&v.set(h,v.get(m))}const Hc=new je;class Sh{constructor(h,m,E){this.bodyNode=h,this._driver=m,this._normalizer=E,this._animations=new Map,this._playersById=new Map,this.players=[]}register(h,m){const E=[],B=ml(this._driver,m,E,[]);if(E.length)throw function $u(v){return new W.vHH(3503,!1)}();this._animations.set(h,B)}_buildPlayer(h,m,E){const x=h.element,B=A(this._normalizer,h.keyframes,m,E);return this._driver.animate(x,B,h.duration,h.delay,h.easing,[],!0)}create(h,m,E={}){const x=[],B=this._animations.get(h);let re;const oe=new Map;if(B?(re=nr(this._driver,m,B,An,Mo,new Map,new Map,E,Hc,x),re.forEach(Je=>{const ft=ot(oe,Je.element,new Map);Je.postStyleProps.forEach(nn=>ft.set(nn,null))})):(x.push(function io(){return new W.vHH(3300,!1)}()),re=[]),x.length)throw function fl(v){return new W.vHH(3504,!1)}();oe.forEach((Je,ft)=>{Je.forEach((nn,Qt)=>{Je.set(Qt,this._driver.computeStyle(ft,Qt,ir.l3))})});const Me=F(re.map(Je=>{const ft=oe.get(Je.element);return this._buildPlayer(Je,new Map,ft)}));return this._playersById.set(h,Me),Me.onDestroy(()=>this.destroy(h)),this.players.push(Me),Me}destroy(h){const m=this._getPlayer(h);m.destroy(),this._playersById.delete(h);const E=this.players.indexOf(m);E>=0&&this.players.splice(E,1)}_getPlayer(h){const m=this._playersById.get(h);if(!m)throw function Gi(v){return new W.vHH(3301,!1)}();return m}listen(h,m,E,x){const B=He(m,"","","");return j(this._getPlayer(h),E,B,x),()=>{}}command(h,m,E,x){if("register"==E)return void this.register(h,x[0]);if("create"==E)return void this.create(h,m,x[0]||{});const B=this._getPlayer(h);switch(E){case"play":B.play();break;case"pause":B.pause();break;case"reset":B.reset();break;case"restart":B.restart();break;case"finish":B.finish();break;case"init":B.init();break;case"setPosition":B.setPosition(parseFloat(x[0]));break;case"destroy":this.destroy(h)}}}const Rh="ng-animate-queued",ba="ng-animate-disabled",El=[],Ul={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ss={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Os="__ng_removed";class Sa{get params(){return this.options.params}constructor(h,m=""){this.namespaceId=m;const E=h&&h.hasOwnProperty("value");if(this.value=function su(v){return v??null}(E?h.value:h),E){const B=jt(h);delete B.value,this.options=B}else this.options={};this.options.params||(this.options.params={})}absorbOptions(h){const m=h.params;if(m){const E=this.options.params;Object.keys(m).forEach(x=>{null==E[x]&&(E[x]=m[x])})}}}const oo="void",Pr=new Sa(oo);class iu{constructor(h,m,E){this.id=h,this.hostElement=m,this._engine=E,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+h,os(m,this._hostClassName)}listen(h,m,E,x){if(!this._triggers.has(m))throw function Qa(v,h){return new W.vHH(3302,!1)}();if(null==E||0==E.length)throw function S(v){return new W.vHH(3303,!1)}();if(!function zc(v){return"start"==v||"done"==v}(E))throw function q(v,h){return new W.vHH(3400,!1)}();const B=ot(this._elementListeners,h,[]),re={name:m,phase:E,callback:x};B.push(re);const oe=ot(this._engine.statesByElement,h,new Map);return oe.has(m)||(os(h,Ki),os(h,Ki+"-"+m),oe.set(m,Pr)),()=>{this._engine.afterFlush(()=>{const ye=B.indexOf(re);ye>=0&&B.splice(ye,1),this._triggers.has(m)||oe.delete(m)})}}register(h,m){return!this._triggers.has(h)&&(this._triggers.set(h,m),!0)}_getTrigger(h){const m=this._triggers.get(h);if(!m)throw function L(v){return new W.vHH(3401,!1)}();return m}trigger(h,m,E,x=!0){const B=this._getTrigger(m),re=new Cr(this.id,m,h);let oe=this._engine.statesByElement.get(h);oe||(os(h,Ki),os(h,Ki+"-"+m),this._engine.statesByElement.set(h,oe=new Map));let ye=oe.get(m);const Me=new Sa(E,this.id);if(!(E&&E.hasOwnProperty("value"))&&ye&&Me.absorbOptions(ye.options),oe.set(m,Me),ye||(ye=Pr),Me.value!==oo&&ye.value===Me.value){if(!function Il(v,h){const m=Object.keys(v),E=Object.keys(h);if(m.length!=E.length)return!1;for(let x=0;x<m.length;x++){const B=m[x];if(!h.hasOwnProperty(B)||v[B]!==h[B])return!1}return!0}(ye.params,Me.params)){const Gt=[],un=B.matchStyles(ye.value,ye.params,Gt),Dr=B.matchStyles(Me.value,Me.params,Gt);Gt.length?this._engine.reportError(Gt):this._engine.afterFlush(()=>{Ja(h,un),Rr(h,Dr)})}return}const nn=ot(this._engine.playersByElement,h,[]);nn.forEach(Gt=>{Gt.namespaceId==this.id&&Gt.triggerName==m&&Gt.queued&&Gt.destroy()});let Qt=B.matchTransition(ye.value,Me.value,h,Me.params),Ot=!1;if(!Qt){if(!x)return;Qt=B.fallbackTransition,Ot=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:m,transition:Qt,fromState:ye,toState:Me,player:re,isFallbackTransition:Ot}),Ot||(os(h,Rh),re.onStart(()=>{vr(h,Rh)})),re.onDone(()=>{let Gt=this.players.indexOf(re);Gt>=0&&this.players.splice(Gt,1);const un=this._engine.playersByElement.get(h);if(un){let Dr=un.indexOf(re);Dr>=0&&un.splice(Dr,1)}}),this.players.push(re),nn.push(re),re}deregister(h){this._triggers.delete(h),this._engine.statesByElement.forEach(m=>m.delete(h)),this._elementListeners.forEach((m,E)=>{this._elementListeners.set(E,m.filter(x=>x.name!=h))})}clearElementCache(h){this._engine.statesByElement.delete(h),this._elementListeners.delete(h);const m=this._engine.playersByElement.get(h);m&&(m.forEach(E=>E.destroy()),this._engine.playersByElement.delete(h))}_signalRemovalForInnerTriggers(h,m){const E=this._engine.driver.query(h,zs,!0);E.forEach(x=>{if(x[Os])return;const B=this._engine.fetchNamespacesByElement(x);B.size?B.forEach(re=>re.triggerLeaveAnimation(x,m,!1,!0)):this.clearElementCache(x)}),this._engine.afterFlushAnimationsDone(()=>E.forEach(x=>this.clearElementCache(x)))}triggerLeaveAnimation(h,m,E,x){const B=this._engine.statesByElement.get(h),re=new Map;if(B){const oe=[];if(B.forEach((ye,Me)=>{if(re.set(Me,ye.value),this._triggers.has(Me)){const Je=this.trigger(h,Me,oo,x);Je&&oe.push(Je)}}),oe.length)return this._engine.markElementAsRemoved(this.id,h,!0,m,re),E&&F(oe).onDone(()=>this._engine.processLeaveNode(h)),!0}return!1}prepareLeaveAnimationListeners(h){const m=this._elementListeners.get(h),E=this._engine.statesByElement.get(h);if(m&&E){const x=new Set;m.forEach(B=>{const re=B.name;if(x.has(re))return;x.add(re);const ye=this._triggers.get(re).fallbackTransition,Me=E.get(re)||Pr,Je=new Sa(oo),ft=new Cr(this.id,re,h);this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:re,transition:ye,fromState:Me,toState:Je,player:ft,isFallbackTransition:!0})})}}removeNode(h,m){const E=this._engine;if(h.childElementCount&&this._signalRemovalForInnerTriggers(h,m),this.triggerLeaveAnimation(h,m,!0))return;let x=!1;if(E.totalAnimations){const B=E.players.length?E.playersByQueriedElement.get(h):[];if(B&&B.length)x=!0;else{let re=h;for(;re=re.parentNode;)if(E.statesByElement.get(re)){x=!0;break}}}if(this.prepareLeaveAnimationListeners(h),x)E.markElementAsRemoved(this.id,h,!1,m);else{const B=h[Os];(!B||B===Ul)&&(E.afterFlush(()=>this.clearElementCache(h)),E.destroyInnerAnimations(h),E._onRemovalComplete(h,m))}}insertNode(h,m){os(h,this._hostClassName)}drainQueuedTransitions(h){const m=[];return this._queue.forEach(E=>{const x=E.player;if(x.destroyed)return;const B=E.element,re=this._elementListeners.get(B);re&&re.forEach(oe=>{if(oe.name==E.triggerName){const ye=He(B,E.triggerName,E.fromState.value,E.toState.value);ye._data=h,j(E.player,oe.phase,ye,oe.callback)}}),x.markedForDestroy?this._engine.afterFlush(()=>{x.destroy()}):m.push(E)}),this._queue=[],m.sort((E,x)=>{const B=E.transition.ast.depCount,re=x.transition.ast.depCount;return 0==B||0==re?B-re:this._engine.driver.containsElement(E.element,x.element)?1:-1})}destroy(h){this.players.forEach(m=>m.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,h)}}class Fi{_onRemovalComplete(h,m){this.onRemovalComplete(h,m)}constructor(h,m,E){this.bodyNode=h,this.driver=m,this._normalizer=E,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(x,B)=>{}}get queuedPlayers(){const h=[];return this._namespaceList.forEach(m=>{m.players.forEach(E=>{E.queued&&h.push(E)})}),h}createNamespace(h,m){const E=new iu(h,m,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,m)?this._balanceNamespaceList(E,m):(this.newHostElements.set(m,E),this.collectEnterElement(m)),this._namespaceLookup[h]=E}_balanceNamespaceList(h,m){const E=this._namespaceList,x=this.namespacesByHostElement;if(E.length-1>=0){let re=!1,oe=this.driver.getParentElement(m);for(;oe;){const ye=x.get(oe);if(ye){const Me=E.indexOf(ye);E.splice(Me+1,0,h),re=!0;break}oe=this.driver.getParentElement(oe)}re||E.unshift(h)}else E.push(h);return x.set(m,h),h}register(h,m){let E=this._namespaceLookup[h];return E||(E=this.createNamespace(h,m)),E}registerTrigger(h,m,E){let x=this._namespaceLookup[h];x&&x.register(m,E)&&this.totalAnimations++}destroy(h,m){h&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const E=this._fetchNamespace(h);this.namespacesByHostElement.delete(E.hostElement);const x=this._namespaceList.indexOf(E);x>=0&&this._namespaceList.splice(x,1),E.destroy(m),delete this._namespaceLookup[h]}))}_fetchNamespace(h){return this._namespaceLookup[h]}fetchNamespacesByElement(h){const m=new Set,E=this.statesByElement.get(h);if(E)for(let x of E.values())if(x.namespaceId){const B=this._fetchNamespace(x.namespaceId);B&&m.add(B)}return m}trigger(h,m,E,x){if(_s(m)){const B=this._fetchNamespace(h);if(B)return B.trigger(m,E,x),!0}return!1}insertNode(h,m,E,x){if(!_s(m))return;const B=m[Os];if(B&&B.setForRemoval){B.setForRemoval=!1,B.setForMove=!0;const re=this.collectedLeaveElements.indexOf(m);re>=0&&this.collectedLeaveElements.splice(re,1)}if(h){const re=this._fetchNamespace(h);re&&re.insertNode(m,E)}x&&this.collectEnterElement(m)}collectEnterElement(h){this.collectedEnterElements.push(h)}markElementAsDisabled(h,m){m?this.disabledNodes.has(h)||(this.disabledNodes.add(h),os(h,ba)):this.disabledNodes.has(h)&&(this.disabledNodes.delete(h),vr(h,ba))}removeNode(h,m,E){if(_s(m)){const x=h?this._fetchNamespace(h):null;x?x.removeNode(m,E):this.markElementAsRemoved(h,m,!1,E);const B=this.namespacesByHostElement.get(m);B&&B.id!==h&&B.removeNode(m,E)}else this._onRemovalComplete(m,E)}markElementAsRemoved(h,m,E,x,B){this.collectedLeaveElements.push(m),m[Os]={namespaceId:h,setForRemoval:x,hasAnimation:E,removedBeforeQueried:!1,previousTriggersValues:B}}listen(h,m,E,x,B){return _s(m)?this._fetchNamespace(h).listen(m,E,x,B):()=>{}}_buildInstruction(h,m,E,x,B){return h.transition.build(this.driver,h.element,h.fromState.value,h.toState.value,E,x,h.fromState.options,h.toState.options,m,B)}destroyInnerAnimations(h){let m=this.driver.query(h,zs,!0);m.forEach(E=>this.destroyActiveAnimationsForElement(E)),0!=this.playersByQueriedElement.size&&(m=this.driver.query(h,at,!0),m.forEach(E=>this.finishActiveQueriedAnimationOnElement(E)))}destroyActiveAnimationsForElement(h){const m=this.playersByElement.get(h);m&&m.forEach(E=>{E.queued?E.markedForDestroy=!0:E.destroy()})}finishActiveQueriedAnimationOnElement(h){const m=this.playersByQueriedElement.get(h);m&&m.forEach(E=>E.finish())}whenRenderingDone(){return new Promise(h=>{if(this.players.length)return F(this.players).onDone(()=>h());h()})}processLeaveNode(h){const m=h[Os];if(m&&m.setForRemoval){if(h[Os]=Ul,m.namespaceId){this.destroyInnerAnimations(h);const E=this._fetchNamespace(m.namespaceId);E&&E.clearElementCache(h)}this._onRemovalComplete(h,m.setForRemoval)}h.classList?.contains(ba)&&this.markElementAsDisabled(h,!1),this.driver.query(h,".ng-animate-disabled",!0).forEach(E=>{this.markElementAsDisabled(E,!1)})}flush(h=-1){let m=[];if(this.newHostElements.size&&(this.newHostElements.forEach((E,x)=>this._balanceNamespaceList(E,x)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let E=0;E<this.collectedEnterElements.length;E++)os(this.collectedEnterElements[E],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const E=[];try{m=this._flushAnimations(E,h)}finally{for(let x=0;x<E.length;x++)E[x]()}}else for(let E=0;E<this.collectedLeaveElements.length;E++)this.processLeaveNode(this.collectedLeaveElements[E]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(E=>E()),this._flushFns=[],this._whenQuietFns.length){const E=this._whenQuietFns;this._whenQuietFns=[],m.length?F(m).onDone(()=>{E.forEach(x=>x())}):E.forEach(x=>x())}}reportError(h){throw function G(v){return new W.vHH(3402,!1)}()}_flushAnimations(h,m){const E=new je,x=[],B=new Map,re=[],oe=new Map,ye=new Map,Me=new Map,Je=new Set;this.disabledNodes.forEach(xt=>{Je.add(xt);const ln=this.driver.query(xt,".ng-animate-queued",!0);for(let on=0;on<ln.length;on++)Je.add(ln[on])});const ft=this.bodyNode,nn=Array.from(this.statesByElement.keys()),Qt=Wc(nn,this.collectedEnterElements),Ot=new Map;let Gt=0;Qt.forEach((xt,ln)=>{const on=An+Gt++;Ot.set(ln,on),xt.forEach(bn=>os(bn,on))});const un=[],Dr=new Set,jn=new Set;for(let xt=0;xt<this.collectedLeaveElements.length;xt++){const ln=this.collectedLeaveElements[xt],on=ln[Os];on&&on.setForRemoval&&(un.push(ln),Dr.add(ln),on.hasAnimation?this.driver.query(ln,".ng-star-inserted",!0).forEach(bn=>Dr.add(bn)):jn.add(ln))}const Yn=new Map,Mn=Wc(nn,Array.from(Dr));Mn.forEach((xt,ln)=>{const on=Mo+Gt++;Yn.set(ln,on),xt.forEach(bn=>os(bn,on))}),h.push(()=>{Qt.forEach((xt,ln)=>{const on=Ot.get(ln);xt.forEach(bn=>vr(bn,on))}),Mn.forEach((xt,ln)=>{const on=Yn.get(ln);xt.forEach(bn=>vr(bn,on))}),un.forEach(xt=>{this.processLeaveNode(xt)})});const Io=[],vs=[];for(let xt=this._namespaceList.length-1;xt>=0;xt--)this._namespaceList[xt].drainQueuedTransitions(m).forEach(on=>{const bn=on.player,sr=on.element;if(Io.push(bn),this.collectedEnterElements.length){const as=sr[Os];if(as&&as.setForMove){if(as.previousTriggersValues&&as.previousTriggersValues.has(on.triggerName)){const Ru=as.previousTriggersValues.get(on.triggerName),Xr=this.statesByElement.get(on.element);if(Xr&&Xr.has(on.triggerName)){const ri=Xr.get(on.triggerName);ri.value=Ru,Xr.set(on.triggerName,ri)}}return void bn.destroy()}}const Ks=!ft||!this.driver.containsElement(ft,sr),fo=Yn.get(sr),Li=Ot.get(sr),Jr=this._buildInstruction(on,E,Li,fo,Ks);if(Jr.errors&&Jr.errors.length)return void vs.push(Jr);if(Ks)return bn.onStart(()=>Ja(sr,Jr.fromStyles)),bn.onDestroy(()=>Rr(sr,Jr.toStyles)),void x.push(bn);if(on.isFallbackTransition)return bn.onStart(()=>Ja(sr,Jr.fromStyles)),bn.onDestroy(()=>Rr(sr,Jr.toStyles)),void x.push(bn);const Zl=[];Jr.timelines.forEach(as=>{as.stretchStartingKeyframe=!0,this.disabledNodes.has(as.element)||Zl.push(as)}),Jr.timelines=Zl,E.append(sr,Jr.timelines),re.push({instruction:Jr,player:bn,element:sr}),Jr.queriedElements.forEach(as=>ot(oe,as,[]).push(bn)),Jr.preStyleProps.forEach((as,Ru)=>{if(as.size){let Xr=ye.get(Ru);Xr||ye.set(Ru,Xr=new Set),as.forEach((ri,Hn)=>Xr.add(Hn))}}),Jr.postStyleProps.forEach((as,Ru)=>{let Xr=Me.get(Ru);Xr||Me.set(Ru,Xr=new Set),as.forEach((ri,Hn)=>Xr.add(Hn))})});if(vs.length){const xt=[];vs.forEach(ln=>{xt.push(function ze(v,h){return new W.vHH(3505,!1)}())}),Io.forEach(ln=>ln.destroy()),this.reportError(xt)}const li=new Map,Es=new Map;re.forEach(xt=>{const ln=xt.element;E.has(ln)&&(Es.set(ln,ln),this._beforeAnimationBuild(xt.player.namespaceId,xt.instruction,li))}),x.forEach(xt=>{const ln=xt.element;this._getPreviousPlayers(ln,!1,xt.namespaceId,xt.triggerName,null).forEach(bn=>{ot(li,ln,[]).push(bn),bn.destroy()})});const xs=un.filter(xt=>bu(xt,ye,Me)),gr=new Map;Ii(gr,this.driver,jn,Me,ir.l3).forEach(xt=>{bu(xt,ye,Me)&&xs.push(xt)});const xa=new Map;Qt.forEach((xt,ln)=>{Ii(xa,this.driver,new Set(xt),ye,ir.k1)}),xs.forEach(xt=>{const ln=gr.get(xt),on=xa.get(xt);gr.set(xt,new Map([...ln?.entries()??[],...on?.entries()??[]]))});const cu=[],wo=[],ka={};re.forEach(xt=>{const{element:ln,player:on,instruction:bn}=xt;if(E.has(ln)){if(Je.has(ln))return on.onDestroy(()=>Rr(ln,bn.toStyles)),on.disabled=!0,on.overrideTotalTime(bn.totalTime),void x.push(on);let sr=ka;if(Es.size>1){let fo=ln;const Li=[];for(;fo=fo.parentNode;){const Jr=Es.get(fo);if(Jr){sr=Jr;break}Li.push(fo)}Li.forEach(Jr=>Es.set(Jr,sr))}const Ks=this._buildAnimation(on.namespaceId,bn,li,B,xa,gr);if(on.setRealPlayer(Ks),sr===ka)cu.push(on);else{const fo=this.playersByElement.get(sr);fo&&fo.length&&(on.parentPlayer=F(fo)),x.push(on)}}else Ja(ln,bn.fromStyles),on.onDestroy(()=>Rr(ln,bn.toStyles)),wo.push(on),Je.has(ln)&&x.push(on)}),wo.forEach(xt=>{const ln=B.get(xt.element);if(ln&&ln.length){const on=F(ln);xt.setRealPlayer(on)}}),x.forEach(xt=>{xt.parentPlayer?xt.syncPlayerEvents(xt.parentPlayer):xt.destroy()});for(let xt=0;xt<un.length;xt++){const ln=un[xt],on=ln[Os];if(vr(ln,Mo),on&&on.hasAnimation)continue;let bn=[];if(oe.size){let Ks=oe.get(ln);Ks&&Ks.length&&bn.push(...Ks);let fo=this.driver.query(ln,at,!0);for(let Li=0;Li<fo.length;Li++){let Jr=oe.get(fo[Li]);Jr&&Jr.length&&bn.push(...Jr)}}const sr=bn.filter(Ks=>!Ks.destroyed);sr.length?ao(this,ln,sr):this.processLeaveNode(ln)}return un.length=0,cu.forEach(xt=>{this.players.push(xt),xt.onDone(()=>{xt.destroy();const ln=this.players.indexOf(xt);this.players.splice(ln,1)}),xt.play()}),cu}afterFlush(h){this._flushFns.push(h)}afterFlushAnimationsDone(h){this._whenQuietFns.push(h)}_getPreviousPlayers(h,m,E,x,B){let re=[];if(m){const oe=this.playersByQueriedElement.get(h);oe&&(re=oe)}else{const oe=this.playersByElement.get(h);if(oe){const ye=!B||B==oo;oe.forEach(Me=>{Me.queued||!ye&&Me.triggerName!=x||re.push(Me)})}}return(E||x)&&(re=re.filter(oe=>!(E&&E!=oe.namespaceId||x&&x!=oe.triggerName))),re}_beforeAnimationBuild(h,m,E){const B=m.element,re=m.isRemovalTransition?void 0:h,oe=m.isRemovalTransition?void 0:m.triggerName;for(const ye of m.timelines){const Me=ye.element,Je=Me!==B,ft=ot(E,Me,[]);this._getPreviousPlayers(Me,Je,re,oe,m.toState).forEach(Qt=>{const Ot=Qt.getRealPlayer();Ot.beforeDestroy&&Ot.beforeDestroy(),Qt.destroy(),ft.push(Qt)})}Ja(B,m.fromStyles)}_buildAnimation(h,m,E,x,B,re){const oe=m.triggerName,ye=m.element,Me=[],Je=new Set,ft=new Set,nn=m.timelines.map(Ot=>{const Gt=Ot.element;Je.add(Gt);const un=Gt[Os];if(un&&un.removedBeforeQueried)return new ir.ZN(Ot.duration,Ot.delay);const Dr=Gt!==ye,jn=function cc(v){const h=[];return Au(v,h),h}((E.get(Gt)||El).map(li=>li.getRealPlayer())).filter(li=>!!li.element&&li.element===Gt),Yn=B.get(Gt),Mn=re.get(Gt),Io=A(this._normalizer,Ot.keyframes,Yn,Mn),vs=this._buildPlayer(Ot,Io,jn);if(Ot.subTimeline&&x&&ft.add(Gt),Dr){const li=new Cr(h,oe,Gt);li.setRealPlayer(vs),Me.push(li)}return vs});Me.forEach(Ot=>{ot(this.playersByQueriedElement,Ot.element,[]).push(Ot),Ot.onDone(()=>function Qu(v,h,m){let E=v.get(h);if(E){if(E.length){const x=E.indexOf(m);E.splice(x,1)}0==E.length&&v.delete(h)}return E}(this.playersByQueriedElement,Ot.element,Ot))}),Je.forEach(Ot=>os(Ot,la));const Qt=F(nn);return Qt.onDestroy(()=>{Je.forEach(Ot=>vr(Ot,la)),Rr(ye,m.toStyles)}),ft.forEach(Ot=>{ot(x,Ot,[]).push(Qt)}),Qt}_buildPlayer(h,m,E){return m.length>0?this.driver.animate(h.element,m,h.duration,h.delay,h.easing,E):new ir.ZN(h.duration,h.delay)}}class Cr{constructor(h,m,E){this.namespaceId=h,this.triggerName=m,this.element=E,this._player=new ir.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(h){this._containsRealPlayer||(this._player=h,this._queuedCallbacks.forEach((m,E)=>{m.forEach(x=>j(h,E,void 0,x))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(h.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(h){this.totalTime=h}syncPlayerEvents(h){const m=this._player;m.triggerCallback&&h.onStart(()=>m.triggerCallback("start")),h.onDone(()=>this.finish()),h.onDestroy(()=>this.destroy())}_queueEvent(h,m){ot(this._queuedCallbacks,h,[]).push(m)}onDone(h){this.queued&&this._queueEvent("done",h),this._player.onDone(h)}onStart(h){this.queued&&this._queueEvent("start",h),this._player.onStart(h)}onDestroy(h){this.queued&&this._queueEvent("destroy",h),this._player.onDestroy(h)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(h){this.queued||this._player.setPosition(h)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(h){const m=this._player;m.triggerCallback&&m.triggerCallback(h)}}function _s(v){return v&&1===v.nodeType}function Gc(v,h){const m=v.style.display;return v.style.display=h??"none",m}function Ii(v,h,m,E,x){const B=[];m.forEach(ye=>B.push(Gc(ye)));const re=[];E.forEach((ye,Me)=>{const Je=new Map;ye.forEach(ft=>{const nn=h.computeStyle(Me,ft,x);Je.set(ft,nn),(!nn||0==nn.length)&&(Me[Os]=ss,re.push(Me))}),v.set(Me,Je)});let oe=0;return m.forEach(ye=>Gc(ye,B[oe++])),re}function Wc(v,h){const m=new Map;if(v.forEach(oe=>m.set(oe,[])),0==h.length)return m;const x=new Set(h),B=new Map;function re(oe){if(!oe)return 1;let ye=B.get(oe);if(ye)return ye;const Me=oe.parentNode;return ye=m.has(Me)?Me:x.has(Me)?1:re(Me),B.set(oe,ye),ye}return h.forEach(oe=>{const ye=re(oe);1!==ye&&m.get(ye).push(oe)}),m}function os(v,h){v.classList?.add(h)}function vr(v,h){v.classList?.remove(h)}function ao(v,h,m){F(m).onDone(()=>v.processLeaveNode(h))}function Au(v,h){for(let m=0;m<v.length;m++){const E=v[m];E instanceof ir.ZE?Au(E.players,h):h.push(E)}}function bu(v,h,m){const E=m.get(v);if(!E)return!1;let x=h.get(v);return x?E.forEach(B=>x.add(B)):h.set(v,E),m.delete(v),!0}class Eo{constructor(h,m,E){this.bodyNode=h,this._driver=m,this._normalizer=E,this._triggerCache={},this.onRemovalComplete=(x,B)=>{},this._transitionEngine=new Fi(h,m,E),this._timelineEngine=new Sh(h,m,E),this._transitionEngine.onRemovalComplete=(x,B)=>this.onRemovalComplete(x,B)}registerTrigger(h,m,E,x,B){const re=h+"-"+x;let oe=this._triggerCache[re];if(!oe){const ye=[],Je=ml(this._driver,B,ye,[]);if(ye.length)throw function is(v,h){return new W.vHH(3404,!1)}();oe=function Nd(v,h,m){return new jc(v,h,m)}(x,Je,this._normalizer),this._triggerCache[re]=oe}this._transitionEngine.registerTrigger(m,x,oe)}register(h,m){this._transitionEngine.register(h,m)}destroy(h,m){this._transitionEngine.destroy(h,m)}onInsert(h,m,E,x){this._transitionEngine.insertNode(h,m,E,x)}onRemove(h,m,E){this._transitionEngine.removeNode(h,m,E)}disableAnimations(h,m){this._transitionEngine.markElementAsDisabled(h,m)}process(h,m,E,x){if("@"==E.charAt(0)){const[B,re]=tn(E);this._timelineEngine.command(B,m,re,x)}else this._transitionEngine.trigger(h,m,E,x)}listen(h,m,E,x,B){if("@"==E.charAt(0)){const[re,oe]=tn(E);return this._timelineEngine.listen(re,m,oe,B)}return this._transitionEngine.listen(h,m,E,x,B)}flush(h=-1){this._transitionEngine.flush(h)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(h){this._transitionEngine.afterFlushAnimationsDone(h)}}let Bl=(()=>{class v{static#e=this.initialStylesByElement=new WeakMap;constructor(m,E,x){this._element=m,this._startStyles=E,this._endStyles=x,this._state=0;let B=v.initialStylesByElement.get(m);B||v.initialStylesByElement.set(m,B=new Map),this._initialStyles=B}start(){this._state<1&&(this._startStyles&&Rr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Rr(this._element,this._initialStyles),this._endStyles&&(Rr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(v.initialStylesByElement.delete(this._element),this._startStyles&&(Ja(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ja(this._element,this._endStyles),this._endStyles=null),Rr(this._element,this._initialStyles),this._state=3)}}return v})();function No(v){let h=null;return v.forEach((m,E)=>{(function $o(v){return"display"===v||"position"===v})(E)&&(h=h||new Map,h.set(E,m))}),h}class Yu{constructor(h,m,E,x){this.element=h,this.keyframes=m,this.options=E,this._specialStyles=x,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=E.duration,this._delay=E.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(h=>h()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const h=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,h,this.options),this._finalKeyframe=h.length?h[h.length-1]:new Map;const m=()=>this._onFinish();this.domPlayer.addEventListener("finish",m),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",m)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(h){const m=[];return h.forEach(E=>{m.push(Object.fromEntries(E))}),m}_triggerWebAnimation(h,m,E){return h.animate(this._convertKeyframesToObject(m),E)}onStart(h){this._originalOnStartFns.push(h),this._onStartFns.push(h)}onDone(h){this._originalOnDoneFns.push(h),this._onDoneFns.push(h)}onDestroy(h){this._onDestroyFns.push(h)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(h=>h()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(h=>h()),this._onDestroyFns=[])}setPosition(h){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=h*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const h=new Map;this.hasStarted()&&this._finalKeyframe.forEach((E,x)=>{"offset"!==x&&h.set(x,this._finished?E:xl(this.element,x))}),this.currentSnapshot=h}triggerCallback(h){const m="start"===h?this._onStartFns:this._onDoneFns;m.forEach(E=>E()),m.length=0}}class Ra{validateStyleProperty(h){return!0}validateAnimatableStyleProperty(h){return!0}matchesElement(h,m){return!1}containsElement(h,m){return zu(h,m)}getParentElement(h){return Qr(h)}query(h,m,E){return Sr(h,m,E)}computeStyle(h,m,E){return window.getComputedStyle(h)[m]}animate(h,m,E,x,B,re=[]){const ye={duration:E,delay:x,fill:0==x?"both":"forwards"};B&&(ye.easing=B);const Me=new Map,Je=re.filter(Qt=>Qt instanceof Yu);(function ai(v,h){return 0===v||0===h})(E,x)&&Je.forEach(Qt=>{Qt.currentSnapshot.forEach((Ot,Gt)=>Me.set(Gt,Ot))});let ft=function St(v){return v.length?v[0]instanceof Map?v:v.map(h=>cn(h)):[]}(m).map(Qt=>Ye(Qt));ft=function In(v,h,m){if(m.size&&h.length){let E=h[0],x=[];if(m.forEach((B,re)=>{E.has(re)||x.push(re),E.set(re,B)}),x.length)for(let B=1;B<h.length;B++){let re=h[B];x.forEach(oe=>re.set(oe,xl(v,oe)))}}return h}(h,ft,Me);const nn=function ui(v,h){let m=null,E=null;return Array.isArray(h)&&h.length?(m=No(h[0]),h.length>1&&(E=No(h[h.length-1]))):h instanceof Map&&(m=No(h)),m||E?new Bl(v,m,E):null}(h,ft);return new Yu(h,ft,ye,nn)}}let jl=(()=>{class v extends ir._j{constructor(m,E){super(),this._nextAnimationId=0,this._renderer=m.createRenderer(E.body,{id:"0",encapsulation:W.ifc.None,styles:[],data:{animation:[]}})}build(m){const E=this._nextAnimationId.toString();this._nextAnimationId++;const x=Array.isArray(m)?(0,ir.vP)(m):m;return zo(this._renderer,null,E,"register",[x]),new ca(E,this._renderer)}static#e=this.\u0275fac=function(E){return new(E||v)(W.LFG(W.FYo),W.LFG(pe.K0))};static#t=this.\u0275prov=W.Yz7({token:v,factory:v.\u0275fac})}return v})();class ca extends ir.LC{constructor(h,m){super(),this._id=h,this._renderer=m}create(h,m){return new ou(this._id,h,m||{},this._renderer)}}class ou{constructor(h,m,E,x){this.id=h,this.element=m,this._renderer=x,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",E)}_listen(h,m){return this._renderer.listen(this.element,`@@${this.id}:${h}`,m)}_command(h,...m){return zo(this._renderer,this.element,this.id,h,m)}onDone(h){this._listen("done",h)}onStart(h){this._listen("start",h)}onDestroy(h){this._listen("destroy",h)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(h){this._command("setPosition",h)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function zo(v,h,m,E,x){return v.setProperty(h,`@@${m}:${E}`,x)}const wl="@.disabled";let Pa=(()=>{class v{constructor(m,E,x){this.delegate=m,this.engine=E,this._zone=x,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,E.onRemovalComplete=(B,re)=>{const oe=re?.parentNode(B);oe&&re.removeChild(oe,B)}}createRenderer(m,E){const B=this.delegate.createRenderer(m,E);if(!(m&&E&&E.data&&E.data.animation)){let Je=this._rendererCache.get(B);return Je||(Je=new dc("",B,this.engine,()=>this._rendererCache.delete(B)),this._rendererCache.set(B,Je)),Je}const re=E.id,oe=E.id+"-"+this._currentId;this._currentId++,this.engine.register(oe,m);const ye=Je=>{Array.isArray(Je)?Je.forEach(ye):this.engine.registerTrigger(re,oe,m,Je.name,Je)};return E.data.animation.forEach(ye),new kd(this,oe,B,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(m,E,x){m>=0&&m<this._microtaskId?this._zone.run(()=>E(x)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(B=>{const[re,oe]=B;re(oe)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([E,x]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(E){return new(E||v)(W.LFG(W.FYo),W.LFG(Eo),W.LFG(W.R0b))};static#t=this.\u0275prov=W.Yz7({token:v,factory:v.\u0275fac})}return v})();class dc{constructor(h,m,E,x){this.namespaceId=h,this.delegate=m,this.engine=E,this._onDestroy=x}get data(){return this.delegate.data}destroyNode(h){this.delegate.destroyNode?.(h)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(h,m){return this.delegate.createElement(h,m)}createComment(h){return this.delegate.createComment(h)}createText(h){return this.delegate.createText(h)}appendChild(h,m){this.delegate.appendChild(h,m),this.engine.onInsert(this.namespaceId,m,h,!1)}insertBefore(h,m,E,x=!0){this.delegate.insertBefore(h,m,E),this.engine.onInsert(this.namespaceId,m,h,x)}removeChild(h,m,E){this.engine.onRemove(this.namespaceId,m,this.delegate)}selectRootElement(h,m){return this.delegate.selectRootElement(h,m)}parentNode(h){return this.delegate.parentNode(h)}nextSibling(h){return this.delegate.nextSibling(h)}setAttribute(h,m,E,x){this.delegate.setAttribute(h,m,E,x)}removeAttribute(h,m,E){this.delegate.removeAttribute(h,m,E)}addClass(h,m){this.delegate.addClass(h,m)}removeClass(h,m){this.delegate.removeClass(h,m)}setStyle(h,m,E,x){this.delegate.setStyle(h,m,E,x)}removeStyle(h,m,E){this.delegate.removeStyle(h,m,E)}setProperty(h,m,E){"@"==m.charAt(0)&&m==wl?this.disableAnimations(h,!!E):this.delegate.setProperty(h,m,E)}setValue(h,m){this.delegate.setValue(h,m)}listen(h,m,E){return this.delegate.listen(h,m,E)}disableAnimations(h,m){this.engine.disableAnimations(h,m)}}class kd extends dc{constructor(h,m,E,x,B){super(m,E,x,B),this.factory=h,this.namespaceId=m}setProperty(h,m,E){"@"==m.charAt(0)?"."==m.charAt(1)&&m==wl?this.disableAnimations(h,E=void 0===E||!!E):this.engine.process(this.namespaceId,h,m.slice(1),E):this.delegate.setProperty(h,m,E)}listen(h,m,E){if("@"==m.charAt(0)){const x=function qc(v){switch(v){case"body":return document.body;case"document":return document;case"window":return window;default:return v}}(h);let B=m.slice(1),re="";return"@"!=B.charAt(0)&&([B,re]=function Hl(v){const h=v.indexOf(".");return[v.substring(0,h),v.slice(h+1)]}(B)),this.engine.listen(this.namespaceId,x,B,re,oe=>{this.factory.scheduleListenerCallback(oe._data||-1,E,oe)})}return this.delegate.listen(h,m,E)}}const Fd=[{provide:ir._j,useClass:jl},{provide:vo,useFactory:function Kc(){return new Ll}},{provide:Eo,useClass:(()=>{class v extends Eo{constructor(m,E,x,B){super(m.body,E,x)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(E){return new(E||v)(W.LFG(pe.K0),W.LFG(Ps),W.LFG(vo),W.LFG(W.z2F))};static#t=this.\u0275prov=W.Yz7({token:v,factory:v.\u0275fac})}return v})()},{provide:W.FYo,useFactory:function Kf(v,h,m){return new Pa(v,h,m)},deps:[w.se,Eo,W.R0b]}],au=[{provide:Ps,useFactory:()=>new Ra},{provide:W.QbO,useValue:"BrowserAnimations"},...Fd],ys=[{provide:Ps,useClass:Da},{provide:W.QbO,useValue:"NoopAnimations"},...Fd];let Ld=(()=>{class v{static withConfig(m){return{ngModule:v,providers:m.disableAnimations?ys:au}}static#e=this.\u0275fac=function(E){return new(E||v)};static#t=this.\u0275mod=W.oAB({type:v});static#n=this.\u0275inj=W.cJS({providers:au,imports:[w.b2]})}return v})(),hc=(()=>{class v extends ie.eV{constructor(m){super(),this.title=m}updateTitle(m){const E=this.buildTitle(m);this.title.setTitle(E?`PlanningPoker - ${E}`:"PlanningPoker")}static#e=this.\u0275fac=function(E){return new(E||v)(W.LFG(w.Dx))};static#t=this.\u0275prov=W.Yz7({token:v,factory:v.\u0275fac})}return v})();var Ns=$(4911),Tl=$(8504),zl=$(4829),xn=$(1631),pr=$(4266),uo=$(4674),Vd=$(7400);const Zc=["addListener","removeListener"],Oh=["addEventListener","removeEventListener"],lo=["on","off"];function Xu(v,h,m,E){if((0,uo.m)(m)&&(E=m,m=void 0),E)return Xu(v,h,m).pipe((0,Vd.Z)(E));const[x,B]=function Yc(v){return(0,uo.m)(v.addEventListener)&&(0,uo.m)(v.removeEventListener)}(v)?Oh.map(re=>oe=>v[re](h,oe,m)):function Qc(v){return(0,uo.m)(v.addListener)&&(0,uo.m)(v.removeListener)}(v)?Zc.map(Ma(v,h)):function Ud(v){return(0,uo.m)(v.on)&&(0,uo.m)(v.off)}(v)?lo.map(Ma(v,h)):[];if(!x&&(0,pr.z)(v))return(0,xn.z)(re=>Xu(re,h,m))((0,zl.Xf)(v));if(!x)throw new TypeError("Invalid event target");return new ke.y(re=>{const oe=(...ye)=>re.next(1<ye.length?ye:ye[0]);return x(oe),()=>B(oe)})}function Ma(v,h){return m=>E=>v[m](h,E)}var Bd=$(5211),Gl=$(8645),jd=$(2420);const ha=new ke.y(jd.Z);var Jc=$(3019),fa=$(2181),fc=$(3168);const Cl={connector:()=>new Gl.x};function uu(v,h=Cl){const{connector:m}=h;return(0,rt.e)((E,x)=>{const B=m();(0,zl.Xf)(v(function xo(v){return new ke.y(h=>v.subscribe(h))}(B))).subscribe(x),x.add(E.subscribe(B))})}var pa=$(8180),Go=$(9397),el=$(975);function td(v,h){return h?m=>(0,Bd.z)(h.pipe((0,pa.q)(1),function ed(){return(0,rt.e)((v,h)=>{v.subscribe((0,fe.x)(h,jd.Z))})}()),m.pipe(td(v))):(0,xn.z)((m,E)=>(0,zl.Xf)(v(m,E)).pipe((0,pa.q)(1),(0,el.h)(m)))}var tl=$(671);const Oa="Service workers are disabled or not supported by this browser";class lu{constructor(h){if(this.serviceWorker=h,h){const E=Xu(h,"controllerchange").pipe((0,De.U)(()=>h.controller)),x=(0,Ns.P)(()=>(0,Ce.of)(h.controller)),B=(0,Bd.z)(x,E);this.worker=B.pipe((0,fa.h)(Je=>!!Je)),this.registration=this.worker.pipe((0,lt.w)(()=>h.getRegistration()));const Me=Xu(h,"message").pipe((0,De.U)(Je=>Je.data)).pipe((0,fa.h)(Je=>Je&&Je.type)).pipe(function Xc(v){return v?h=>uu(v)(h):h=>function pc(v,h){const m=(0,uo.m)(v)?v:()=>v;return(0,uo.m)(h)?uu(h,{connector:m}):E=>new fc.c(E,m)}(new Gl.x)(h)}());Me.connect(),this.events=Me}else this.worker=this.events=this.registration=function gc(v){return(0,Ns.P)(()=>(0,Tl._)(new Error(v)))}(Oa)}postMessage(h,m){return this.worker.pipe((0,pa.q)(1),(0,Go.b)(E=>{E.postMessage({action:h,...m})})).toPromise().then(()=>{})}postMessageWithOperation(h,m,E){const x=this.waitForOperationCompleted(E),B=this.postMessage(h,m);return Promise.all([B,x]).then(([,re])=>re)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(h){let m;return m="string"==typeof h?E=>E.type===h:E=>h.includes(E.type),this.events.pipe((0,fa.h)(m))}nextEventOfType(h){return this.eventsOfType(h).pipe((0,pa.q)(1))}waitForOperationCompleted(h){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,fa.h)(m=>m.nonce===h),(0,pa.q)(1),(0,De.U)(m=>{if(void 0!==m.result)return m.result;throw new Error(m.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let nd=(()=>{class v{get isEnabled(){return this.sw.isEnabled}constructor(m){if(this.sw=m,this.pushManager=null,this.subscriptionChanges=new Gl.x,!m.isEnabled)return this.messages=ha,this.notificationClicks=ha,void(this.subscription=ha);this.messages=this.sw.eventsOfType("PUSH").pipe((0,De.U)(x=>x.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,De.U)(x=>x.data)),this.pushManager=this.sw.registration.pipe((0,De.U)(x=>x.pushManager));const E=this.pushManager.pipe((0,lt.w)(x=>x.getSubscription()));this.subscription=(0,Jc.T)(E,this.subscriptionChanges)}requestSubscription(m){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(Oa));const E={userVisibleOnly:!0};let x=this.decodeBase64(m.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),B=new Uint8Array(new ArrayBuffer(x.length));for(let re=0;re<x.length;re++)B[re]=x.charCodeAt(re);return E.applicationServerKey=B,this.pushManager.pipe((0,lt.w)(re=>re.subscribe(E)),(0,pa.q)(1)).toPromise().then(re=>(this.subscriptionChanges.next(re),re))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,pa.q)(1),(0,lt.w)(E=>{if(null===E)throw new Error("Not subscribed to push notifications.");return E.unsubscribe().then(x=>{if(!x)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Oa))}decodeBase64(m){return atob(m)}static#e=this.\u0275fac=function(E){return new(E||v)(W.LFG(lu))};static#t=this.\u0275prov=W.Yz7({token:v,factory:v.\u0275fac})}return v})(),nl=(()=>{class v{get isEnabled(){return this.sw.isEnabled}constructor(m){if(this.sw=m,!m.isEnabled)return this.versionUpdates=ha,this.available=ha,this.activated=ha,void(this.unrecoverable=ha);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe((0,fa.h)(E=>"VERSION_READY"===E.type),(0,De.U)(E=>({type:"UPDATE_AVAILABLE",current:E.currentVersion,available:E.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Oa));const m=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:m},m)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Oa));const m=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:m},m)}static#e=this.\u0275fac=function(E){return new(E||v)(W.LFG(lu))};static#t=this.\u0275prov=W.Yz7({token:v,factory:v.\u0275fac})}return v})();const Su=new W.OlP("NGSW_REGISTER_SCRIPT");function Wl(v,h,m,E){return()=>{if(!(0,pe.NF)(E)||!("serviceWorker"in navigator)||!1===m.enabled)return;let x;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof m.registrationStrategy)x=m.registrationStrategy();else{const[re,...oe]=(m.registrationStrategy||"registerWhenStable:30000").split(":");switch(re){case"registerImmediately":x=(0,Ce.of)(null);break;case"registerWithDelay":x=mc(+oe[0]||0);break;case"registerWhenStable":x=oe[0]?(0,Jc.T)(_c(v),mc(+oe[0])):_c(v);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${m.registrationStrategy}`)}}v.get(W.R0b).runOutsideAngular(()=>x.pipe((0,pa.q)(1)).subscribe(()=>navigator.serviceWorker.register(h,{scope:m.scope}).catch(re=>console.error("Service worker registration failed with:",re))))}}function mc(v){return(0,Ce.of)(null).pipe(function Nh(v,h=Qe.z){const m=function co(v=0,h,m=Qe.P){let E=-1;return null!=h&&((0,tl.K)(h)?m=h:E=h),new ke.y(x=>{let B=function qs(v){return v instanceof Date&&!isNaN(v)}(v)?+v-m.now():v;B<0&&(B=0);let re=0;return m.schedule(function(){x.closed||(x.next(re++),0<=E?this.schedule(void 0,E):x.complete())},B)})}(v,h);return td(()=>m)}(v))}function _c(v){return v.get(W.z2F).isStable.pipe((0,fa.h)(m=>m))}function Na(v,h){return new lu((0,pe.NF)(h)&&!1!==v.enabled?navigator.serviceWorker:void 0)}class Hd{}function ho(v,h={}){return(0,W.MR2)([nd,nl,{provide:Su,useValue:v},{provide:Hd,useValue:h},{provide:lu,useFactory:Na,deps:[Hd,W.Lbi]},{provide:W.ip1,useFactory:Wl,deps:[W.zs3,Su,Hd,W.Lbi],multi:!0}])}let xh=(()=>{class v{static register(m,E={}){return{ngModule:v,providers:[ho(m,E)]}}static#e=this.\u0275fac=function(E){return new(E||v)};static#t=this.\u0275mod=W.oAB({type:v});static#n=this.\u0275inj=W.cJS({providers:[nd,nl]})}return v})();const ql={apiKey:"AIzaSyBxcb1o6HFEHy-RwZevt909OKSOqEpvW-g",authDomain:"planning-poker-cd302.firebaseapp.com",projectId:"planning-poker-cd302",storageBucket:"planning-poker-cd302.appspot.com",messagingSenderId:"903421093759",appId:"1:903421093759:web:79ee181c62d36ca5d09c4a"};let rd=(()=>{class v{static#e=this.\u0275fac=function(E){return new(E||v)};static#t=this.\u0275mod=W.oAB({type:v,bootstrap:[nt]});static#n=this.\u0275inj=W.cJS({providers:[{provide:ie.eV,useClass:hc}],imports:[w.b2,Ld,pe.ez,ht,ut,qa.PagesModule,pt.m,Ft.hO.initializeApp(ql),Ie.yb,Ee.ww,fs,xh.register("ngsw-worker.js",{enabled:!(0,W.X6Q)(),registrationStrategy:"registerWhenStable:30000"}),pt.m]})}return v})();w.q6().bootstrapModule(rd).catch(v=>console.error(v))},5619:(bt,Le,$)=>{$.d(Le,{X:()=>W});var w=$(8645);class W extends w.x{constructor(Ee){super(),this._value=Ee}get value(){return this.getValue()}_subscribe(Ee){const pe=super._subscribe(Ee);return!pe.closed&&Ee.next(this._value),pe}getValue(){const{hasError:Ee,thrownError:pe,_value:ve}=this;if(Ee)throw pe;return this._throwIfClosed(),ve}next(Ee){super.next(this._value=Ee)}}},5592:(bt,Le,$)=>{$.d(Le,{y:()=>R});var w=$(305),W=$(7394),ie=$(4850),Ee=$(8407),pe=$(2653),ve=$(4674),Re=$(1441);let R=(()=>{class De{constructor(Ke){Ke&&(this._subscribe=Ke)}lift(Ke){const ht=new De;return ht.source=this,ht.operator=Ke,ht}subscribe(Ke,ht,nt){const pt=function he(De){return De&&De instanceof w.Lv||function ue(De){return De&&(0,ve.m)(De.next)&&(0,ve.m)(De.error)&&(0,ve.m)(De.complete)}(De)&&(0,W.Nn)(De)}(Ke)?Ke:new w.Hp(Ke,ht,nt);return(0,Re.x)(()=>{const{operator:ut,source:Ft}=this;pt.add(ut?ut.call(pt,Ft):Ft?this._subscribe(pt):this._trySubscribe(pt))}),pt}_trySubscribe(Ke){try{return this._subscribe(Ke)}catch(ht){Ke.error(ht)}}forEach(Ke,ht){return new(ht=Ne(ht))((nt,pt)=>{const ut=new w.Hp({next:Ft=>{try{Ke(Ft)}catch(Ie){pt(Ie),ut.unsubscribe()}},error:pt,complete:nt});this.subscribe(ut)})}_subscribe(Ke){var ht;return null===(ht=this.source)||void 0===ht?void 0:ht.subscribe(Ke)}[ie.L](){return this}pipe(...Ke){return(0,Ee.U)(Ke)(this)}toPromise(Ke){return new(Ke=Ne(Ke))((ht,nt)=>{let pt;this.subscribe(ut=>pt=ut,ut=>nt(ut),()=>ht(pt))})}}return De.create=et=>new De(et),De})();function Ne(De){var et;return null!==(et=De??pe.config.Promise)&&void 0!==et?et:Promise}},8645:(bt,Le,$)=>{$.d(Le,{x:()=>Re});var w=$(5592),W=$(7394);const Ee=(0,$(2306).d)(Ne=>function(){Ne(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pe=$(9039),ve=$(1441);let Re=(()=>{class Ne extends w.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(he){const De=new R(this,this);return De.operator=he,De}_throwIfClosed(){if(this.closed)throw new Ee}next(he){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const De of this.currentObservers)De.next(he)}})}error(he){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=he;const{observers:De}=this;for(;De.length;)De.shift().error(he)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:he}=this;for(;he.length;)he.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var he;return(null===(he=this.observers)||void 0===he?void 0:he.length)>0}_trySubscribe(he){return this._throwIfClosed(),super._trySubscribe(he)}_subscribe(he){return this._throwIfClosed(),this._checkFinalizedStatuses(he),this._innerSubscribe(he)}_innerSubscribe(he){const{hasError:De,isStopped:et,observers:Ke}=this;return De||et?W.Lc:(this.currentObservers=null,Ke.push(he),new W.w0(()=>{this.currentObservers=null,(0,pe.P)(Ke,he)}))}_checkFinalizedStatuses(he){const{hasError:De,thrownError:et,isStopped:Ke}=this;De?he.error(et):Ke&&he.complete()}asObservable(){const he=new w.y;return he.source=this,he}}return Ne.create=(ue,he)=>new R(ue,he),Ne})();class R extends Re{constructor(ue,he){super(),this.destination=ue,this.source=he}next(ue){var he,De;null===(De=null===(he=this.destination)||void 0===he?void 0:he.next)||void 0===De||De.call(he,ue)}error(ue){var he,De;null===(De=null===(he=this.destination)||void 0===he?void 0:he.error)||void 0===De||De.call(he,ue)}complete(){var ue,he;null===(he=null===(ue=this.destination)||void 0===ue?void 0:ue.complete)||void 0===he||he.call(ue)}_subscribe(ue){var he,De;return null!==(De=null===(he=this.source)||void 0===he?void 0:he.subscribe(ue))&&void 0!==De?De:W.Lc}}},305:(bt,Le,$)=>{$.d(Le,{Hp:()=>nt,Lv:()=>De});var w=$(4674),W=$(7394),ie=$(2653),Ee=$(3894),pe=$(2420);const ve=Ne("C",void 0,void 0);function Ne(ce,ke,Ce){return{kind:ce,value:ke,error:Ce}}var ue=$(7599),he=$(1441);class De extends W.w0{constructor(ke){super(),this.isStopped=!1,ke?(this.destination=ke,(0,W.Nn)(ke)&&ke.add(this)):this.destination=Ie}static create(ke,Ce,Ge){return new nt(ke,Ce,Ge)}next(ke){this.isStopped?Ft(function R(ce){return Ne("N",ce,void 0)}(ke),this):this._next(ke)}error(ke){this.isStopped?Ft(function Re(ce){return Ne("E",void 0,ce)}(ke),this):(this.isStopped=!0,this._error(ke))}complete(){this.isStopped?Ft(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ke){this.destination.next(ke)}_error(ke){try{this.destination.error(ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const et=Function.prototype.bind;function Ke(ce,ke){return et.call(ce,ke)}class ht{constructor(ke){this.partialObserver=ke}next(ke){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(ke)}catch(Ge){pt(Ge)}}error(ke){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(ke)}catch(Ge){pt(Ge)}else pt(ke)}complete(){const{partialObserver:ke}=this;if(ke.complete)try{ke.complete()}catch(Ce){pt(Ce)}}}class nt extends De{constructor(ke,Ce,Ge){let Qe;if(super(),(0,w.m)(ke)||!ke)Qe={next:ke??void 0,error:Ce??void 0,complete:Ge??void 0};else{let rt;this&&ie.config.useDeprecatedNextContext?(rt=Object.create(ke),rt.unsubscribe=()=>this.unsubscribe(),Qe={next:ke.next&&Ke(ke.next,rt),error:ke.error&&Ke(ke.error,rt),complete:ke.complete&&Ke(ke.complete,rt)}):Qe=ke}this.destination=new ht(Qe)}}function pt(ce){ie.config.useDeprecatedSynchronousErrorHandling?(0,he.O)(ce):(0,Ee.h)(ce)}function Ft(ce,ke){const{onStoppedNotification:Ce}=ie.config;Ce&&ue.z.setTimeout(()=>Ce(ce,ke))}const Ie={closed:!0,next:pe.Z,error:function ut(ce){throw ce},complete:pe.Z}},7394:(bt,Le,$)=>{$.d(Le,{Lc:()=>ve,w0:()=>pe,Nn:()=>Re});var w=$(4674);const ie=(0,$(2306).d)(Ne=>function(he){Ne(this),this.message=he?`${he.length} errors occurred during unsubscription:\n${he.map((De,et)=>`${et+1}) ${De.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=he});var Ee=$(9039);class pe{constructor(ue){this.initialTeardown=ue,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ue;if(!this.closed){this.closed=!0;const{_parentage:he}=this;if(he)if(this._parentage=null,Array.isArray(he))for(const Ke of he)Ke.remove(this);else he.remove(this);const{initialTeardown:De}=this;if((0,w.m)(De))try{De()}catch(Ke){ue=Ke instanceof ie?Ke.errors:[Ke]}const{_finalizers:et}=this;if(et){this._finalizers=null;for(const Ke of et)try{R(Ke)}catch(ht){ue=ue??[],ht instanceof ie?ue=[...ue,...ht.errors]:ue.push(ht)}}if(ue)throw new ie(ue)}}add(ue){var he;if(ue&&ue!==this)if(this.closed)R(ue);else{if(ue instanceof pe){if(ue.closed||ue._hasParent(this))return;ue._addParent(this)}(this._finalizers=null!==(he=this._finalizers)&&void 0!==he?he:[]).push(ue)}}_hasParent(ue){const{_parentage:he}=this;return he===ue||Array.isArray(he)&&he.includes(ue)}_addParent(ue){const{_parentage:he}=this;this._parentage=Array.isArray(he)?(he.push(ue),he):he?[he,ue]:ue}_removeParent(ue){const{_parentage:he}=this;he===ue?this._parentage=null:Array.isArray(he)&&(0,Ee.P)(he,ue)}remove(ue){const{_finalizers:he}=this;he&&(0,Ee.P)(he,ue),ue instanceof pe&&ue._removeParent(this)}}pe.EMPTY=(()=>{const Ne=new pe;return Ne.closed=!0,Ne})();const ve=pe.EMPTY;function Re(Ne){return Ne instanceof pe||Ne&&"closed"in Ne&&(0,w.m)(Ne.remove)&&(0,w.m)(Ne.add)&&(0,w.m)(Ne.unsubscribe)}function R(Ne){(0,w.m)(Ne)?Ne():Ne.unsubscribe()}},2653:(bt,Le,$)=>{$.d(Le,{config:()=>w});const w={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},3168:(bt,Le,$)=>{$.d(Le,{c:()=>ve});var w=$(5592),W=$(7394),ie=$(6196),Ee=$(8251),pe=$(9360);class ve extends w.y{constructor(R,Ne){super(),this.source=R,this.subjectFactory=Ne,this._subject=null,this._refCount=0,this._connection=null,(0,pe.A)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,R?.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new W.w0;const Ne=this.getSubject();R.add(this.source.subscribe((0,Ee.x)(Ne,void 0,()=>{this._teardown(),Ne.complete()},ue=>{this._teardown(),Ne.error(ue)},()=>this._teardown()))),R.closed&&(this._connection=null,R=W.w0.EMPTY)}return R}refCount(){return(0,ie.x)()(this)}}},5211:(bt,Le,$)=>{$.d(Le,{z:()=>pe});var w=$(7537),ie=$(9940),Ee=$(2459);function pe(...ve){return function W(){return(0,w.J)(1)}()((0,Ee.D)(ve,(0,ie.yG)(ve)))}},4911:(bt,Le,$)=>{$.d(Le,{P:()=>ie});var w=$(5592),W=$(4829);function ie(Ee){return new w.y(pe=>{(0,W.Xf)(Ee()).subscribe(pe)})}},6232:(bt,Le,$)=>{$.d(Le,{E:()=>W});const W=new($(5592).y)(pe=>pe.complete())},2459:(bt,Le,$)=>{$.d(Le,{D:()=>ke});var w=$(4829),W=$(3093),ie=$(5137),ve=$(5592),R=$(4971),Ne=$(4674),ue=$(7103);function De(Ce,Ge){if(!Ce)throw new Error("Iterable cannot be null");return new ve.y(Qe=>{(0,ue.f)(Qe,Ge,()=>{const rt=Ce[Symbol.asyncIterator]();(0,ue.f)(Qe,Ge,()=>{rt.next().then(fe=>{fe.done?Qe.complete():Qe.next(fe.value)})},0,!0)})})}var et=$(8382),Ke=$(4026),ht=$(4266),nt=$(3664),pt=$(5726),ut=$(9853),Ft=$(541);function ke(Ce,Ge){return Ge?function ce(Ce,Ge){if(null!=Ce){if((0,et.c)(Ce))return function Ee(Ce,Ge){return(0,w.Xf)(Ce).pipe((0,ie.R)(Ge),(0,W.Q)(Ge))}(Ce,Ge);if((0,ht.z)(Ce))return function Re(Ce,Ge){return new ve.y(Qe=>{let rt=0;return Ge.schedule(function(){rt===Ce.length?Qe.complete():(Qe.next(Ce[rt++]),Qe.closed||this.schedule())})})}(Ce,Ge);if((0,Ke.t)(Ce))return function pe(Ce,Ge){return(0,w.Xf)(Ce).pipe((0,ie.R)(Ge),(0,W.Q)(Ge))}(Ce,Ge);if((0,pt.D)(Ce))return De(Ce,Ge);if((0,nt.T)(Ce))return function he(Ce,Ge){return new ve.y(Qe=>{let rt;return(0,ue.f)(Qe,Ge,()=>{rt=Ce[R.h](),(0,ue.f)(Qe,Ge,()=>{let fe,Et;try{({value:fe,done:Et}=rt.next())}catch(lt){return void Qe.error(lt)}Et?Qe.complete():Qe.next(fe)},0,!0)}),()=>(0,Ne.m)(rt?.return)&&rt.return()})}(Ce,Ge);if((0,Ft.L)(Ce))return function Ie(Ce,Ge){return De((0,Ft.Q)(Ce),Ge)}(Ce,Ge)}throw(0,ut.z)(Ce)}(Ce,Ge):(0,w.Xf)(Ce)}},4829:(bt,Le,$)=>{$.d(Le,{Xf:()=>et});var w=$(7582),W=$(4266),ie=$(4026),Ee=$(5592),pe=$(8382),ve=$(5726),Re=$(9853),R=$(3664),Ne=$(541),ue=$(4674),he=$(3894),De=$(4850);function et(ce){if(ce instanceof Ee.y)return ce;if(null!=ce){if((0,pe.c)(ce))return function Ke(ce){return new Ee.y(ke=>{const Ce=ce[De.L]();if((0,ue.m)(Ce.subscribe))return Ce.subscribe(ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ce);if((0,W.z)(ce))return function ht(ce){return new Ee.y(ke=>{for(let Ce=0;Ce<ce.length&&!ke.closed;Ce++)ke.next(ce[Ce]);ke.complete()})}(ce);if((0,ie.t)(ce))return function nt(ce){return new Ee.y(ke=>{ce.then(Ce=>{ke.closed||(ke.next(Ce),ke.complete())},Ce=>ke.error(Ce)).then(null,he.h)})}(ce);if((0,ve.D)(ce))return ut(ce);if((0,R.T)(ce))return function pt(ce){return new Ee.y(ke=>{for(const Ce of ce)if(ke.next(Ce),ke.closed)return;ke.complete()})}(ce);if((0,Ne.L)(ce))return function Ft(ce){return ut((0,Ne.Q)(ce))}(ce)}throw(0,Re.z)(ce)}function ut(ce){return new Ee.y(ke=>{(function Ie(ce,ke){var Ce,Ge,Qe,rt;return(0,w.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,w.KL)(ce);!(Ge=yield Ce.next()).done;)if(ke.next(Ge.value),ke.closed)return}catch(fe){Qe={error:fe}}finally{try{Ge&&!Ge.done&&(rt=Ce.return)&&(yield rt.call(Ce))}finally{if(Qe)throw Qe.error}}ke.complete()})})(ce,ke).catch(Ce=>ke.error(Ce))})}},3019:(bt,Le,$)=>{$.d(Le,{T:()=>ve});var w=$(7537),W=$(4829),ie=$(6232),Ee=$(9940),pe=$(2459);function ve(...Re){const R=(0,Ee.yG)(Re),Ne=(0,Ee._6)(Re,1/0),ue=Re;return ue.length?1===ue.length?(0,W.Xf)(ue[0]):(0,w.J)(Ne)((0,pe.D)(ue,R)):ie.E}},2096:(bt,Le,$)=>{$.d(Le,{of:()=>ie});var w=$(9940),W=$(2459);function ie(...Ee){const pe=(0,w.yG)(Ee);return(0,W.D)(Ee,pe)}},8504:(bt,Le,$)=>{$.d(Le,{_:()=>ie});var w=$(5592),W=$(4674);function ie(Ee,pe){const ve=(0,W.m)(Ee)?Ee:()=>Ee,Re=R=>R.error(ve());return new w.y(pe?R=>pe.schedule(Re,0,R):Re)}},8251:(bt,Le,$)=>{$.d(Le,{x:()=>W});var w=$(305);function W(Ee,pe,ve,Re,R){return new ie(Ee,pe,ve,Re,R)}class ie extends w.Lv{constructor(pe,ve,Re,R,Ne,ue){super(pe),this.onFinalize=Ne,this.shouldUnsubscribe=ue,this._next=ve?function(he){try{ve(he)}catch(De){pe.error(De)}}:super._next,this._error=R?function(he){try{R(he)}catch(De){pe.error(De)}finally{this.unsubscribe()}}:super._error,this._complete=Re?function(){try{Re()}catch(he){pe.error(he)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(pe=this.onFinalize)||void 0===pe||pe.call(this))}}}},3572:(bt,Le,$)=>{$.d(Le,{d:()=>ie});var w=$(9360),W=$(8251);function ie(Ee){return(0,w.e)((pe,ve)=>{let Re=!1;pe.subscribe((0,W.x)(ve,R=>{Re=!0,ve.next(R)},()=>{Re||ve.next(Ee),ve.complete()}))})}},3997:(bt,Le,$)=>{$.d(Le,{x:()=>Ee});var w=$(2737),W=$(9360),ie=$(8251);function Ee(ve,Re=w.y){return ve=ve??pe,(0,W.e)((R,Ne)=>{let ue,he=!0;R.subscribe((0,ie.x)(Ne,De=>{const et=Re(De);(he||!ve(ue,et))&&(he=!1,ue=et,Ne.next(De))}))})}function pe(ve,Re){return ve===Re}},2181:(bt,Le,$)=>{$.d(Le,{h:()=>ie});var w=$(9360),W=$(8251);function ie(Ee,pe){return(0,w.e)((ve,Re)=>{let R=0;ve.subscribe((0,W.x)(Re,Ne=>Ee.call(pe,Ne,R++)&&Re.next(Ne)))})}},1374:(bt,Le,$)=>{$.d(Le,{P:()=>Re});var w=$(6973),W=$(2181),ie=$(8180),Ee=$(3572),pe=$(3026),ve=$(2737);function Re(R,Ne){const ue=arguments.length>=2;return he=>he.pipe(R?(0,W.h)((De,et)=>R(De,et,he)):ve.y,(0,ie.q)(1),ue?(0,Ee.d)(Ne):(0,pe.T)(()=>new w.K))}},7398:(bt,Le,$)=>{$.d(Le,{U:()=>ie});var w=$(9360),W=$(8251);function ie(Ee,pe){return(0,w.e)((ve,Re)=>{let R=0;ve.subscribe((0,W.x)(Re,Ne=>{Re.next(Ee.call(pe,Ne,R++))}))})}},975:(bt,Le,$)=>{$.d(Le,{h:()=>W});var w=$(7398);function W(ie){return(0,w.U)(()=>ie)}},7537:(bt,Le,$)=>{$.d(Le,{J:()=>ie});var w=$(1631),W=$(2737);function ie(Ee=1/0){return(0,w.z)(W.y,Ee)}},1631:(bt,Le,$)=>{$.d(Le,{z:()=>R});var w=$(7398),W=$(4829),ie=$(9360),Ee=$(7103),pe=$(8251),Re=$(4674);function R(Ne,ue,he=1/0){return(0,Re.m)(ue)?R((De,et)=>(0,w.U)((Ke,ht)=>ue(De,Ke,et,ht))((0,W.Xf)(Ne(De,et))),he):("number"==typeof ue&&(he=ue),(0,ie.e)((De,et)=>function ve(Ne,ue,he,De,et,Ke,ht,nt){const pt=[];let ut=0,Ft=0,Ie=!1;const ce=()=>{Ie&&!pt.length&&!ut&&ue.complete()},ke=Ge=>ut<De?Ce(Ge):pt.push(Ge),Ce=Ge=>{Ke&&ue.next(Ge),ut++;let Qe=!1;(0,W.Xf)(he(Ge,Ft++)).subscribe((0,pe.x)(ue,rt=>{et?.(rt),Ke?ke(rt):ue.next(rt)},()=>{Qe=!0},void 0,()=>{if(Qe)try{for(ut--;pt.length&&ut<De;){const rt=pt.shift();ht?(0,Ee.f)(ue,ht,()=>Ce(rt)):Ce(rt)}ce()}catch(rt){ue.error(rt)}}))};return Ne.subscribe((0,pe.x)(ue,ke,()=>{Ie=!0,ce()})),()=>{nt?.()}}(De,et,Ne,he)))}},3093:(bt,Le,$)=>{$.d(Le,{Q:()=>Ee});var w=$(7103),W=$(9360),ie=$(8251);function Ee(pe,ve=0){return(0,W.e)((Re,R)=>{Re.subscribe((0,ie.x)(R,Ne=>(0,w.f)(R,pe,()=>R.next(Ne),ve),()=>(0,w.f)(R,pe,()=>R.complete(),ve),Ne=>(0,w.f)(R,pe,()=>R.error(Ne),ve)))})}},6196:(bt,Le,$)=>{$.d(Le,{x:()=>ie});var w=$(9360),W=$(8251);function ie(){return(0,w.e)((Ee,pe)=>{let ve=null;Ee._refCount++;const Re=(0,W.x)(pe,void 0,void 0,void 0,()=>{if(!Ee||Ee._refCount<=0||0<--Ee._refCount)return void(ve=null);const R=Ee._connection,Ne=ve;ve=null,R&&(!Ne||R===Ne)&&R.unsubscribe(),pe.unsubscribe()});Ee.subscribe(Re),Re.closed||(ve=Ee.connect())})}},6699:(bt,Le,$)=>{$.d(Le,{R:()=>Ee});var w=$(9360),W=$(8251);function Ee(pe,ve){return(0,w.e)(function ie(pe,ve,Re,R,Ne){return(ue,he)=>{let De=Re,et=ve,Ke=0;ue.subscribe((0,W.x)(he,ht=>{const nt=Ke++;et=De?pe(et,ht,nt):(De=!0,ht),R&&he.next(et)},Ne&&(()=>{De&&he.next(et),he.complete()})))}}(pe,ve,arguments.length>=2,!0))}},3020:(bt,Le,$)=>{$.d(Le,{B:()=>pe});var w=$(4829),W=$(8645),ie=$(305),Ee=$(9360);function pe(Re={}){const{connector:R=(()=>new W.x),resetOnError:Ne=!0,resetOnComplete:ue=!0,resetOnRefCountZero:he=!0}=Re;return De=>{let et,Ke,ht,nt=0,pt=!1,ut=!1;const Ft=()=>{Ke?.unsubscribe(),Ke=void 0},Ie=()=>{Ft(),et=ht=void 0,pt=ut=!1},ce=()=>{const ke=et;Ie(),ke?.unsubscribe()};return(0,Ee.e)((ke,Ce)=>{nt++,!ut&&!pt&&Ft();const Ge=ht=ht??R();Ce.add(()=>{nt--,0===nt&&!ut&&!pt&&(Ke=ve(ce,he))}),Ge.subscribe(Ce),!et&&nt>0&&(et=new ie.Hp({next:Qe=>Ge.next(Qe),error:Qe=>{ut=!0,Ft(),Ke=ve(Ie,Ne,Qe),Ge.error(Qe)},complete:()=>{pt=!0,Ft(),Ke=ve(Ie,ue),Ge.complete()}}),(0,w.Xf)(ke).subscribe(et))})(De)}}function ve(Re,R,...Ne){if(!0===R)return void Re();if(!1===R)return;const ue=new ie.Hp({next:()=>{ue.unsubscribe(),Re()}});return(0,w.Xf)(R(...Ne)).subscribe(ue)}},7921:(bt,Le,$)=>{$.d(Le,{O:()=>Ee});var w=$(5211),W=$(9940),ie=$(9360);function Ee(...pe){const ve=(0,W.yG)(pe);return(0,ie.e)((Re,R)=>{(ve?(0,w.z)(pe,Re,ve):(0,w.z)(pe,Re)).subscribe(R)})}},5137:(bt,Le,$)=>{$.d(Le,{R:()=>W});var w=$(9360);function W(ie,Ee=0){return(0,w.e)((pe,ve)=>{ve.add(ie.schedule(()=>pe.subscribe(ve),Ee))})}},4664:(bt,Le,$)=>{$.d(Le,{w:()=>Ee});var w=$(4829),W=$(9360),ie=$(8251);function Ee(pe,ve){return(0,W.e)((Re,R)=>{let Ne=null,ue=0,he=!1;const De=()=>he&&!Ne&&R.complete();Re.subscribe((0,ie.x)(R,et=>{Ne?.unsubscribe();let Ke=0;const ht=ue++;(0,w.Xf)(pe(et,ht)).subscribe(Ne=(0,ie.x)(R,nt=>R.next(ve?ve(et,nt,ht,Ke++):nt),()=>{Ne=null,De()}))},()=>{he=!0,De()}))})}},8180:(bt,Le,$)=>{$.d(Le,{q:()=>Ee});var w=$(6232),W=$(9360),ie=$(8251);function Ee(pe){return pe<=0?()=>w.E:(0,W.e)((ve,Re)=>{let R=0;ve.subscribe((0,ie.x)(Re,Ne=>{++R<=pe&&(Re.next(Ne),pe<=R&&Re.complete())}))})}},9397:(bt,Le,$)=>{$.d(Le,{b:()=>pe});var w=$(4674),W=$(9360),ie=$(8251),Ee=$(2737);function pe(ve,Re,R){const Ne=(0,w.m)(ve)||Re||R?{next:ve,error:Re,complete:R}:ve;return Ne?(0,W.e)((ue,he)=>{var De;null===(De=Ne.subscribe)||void 0===De||De.call(Ne);let et=!0;ue.subscribe((0,ie.x)(he,Ke=>{var ht;null===(ht=Ne.next)||void 0===ht||ht.call(Ne,Ke),he.next(Ke)},()=>{var Ke;et=!1,null===(Ke=Ne.complete)||void 0===Ke||Ke.call(Ne),he.complete()},Ke=>{var ht;et=!1,null===(ht=Ne.error)||void 0===ht||ht.call(Ne,Ke),he.error(Ke)},()=>{var Ke,ht;et&&(null===(Ke=Ne.unsubscribe)||void 0===Ke||Ke.call(Ne)),null===(ht=Ne.finalize)||void 0===ht||ht.call(Ne)}))}):Ee.y}},3026:(bt,Le,$)=>{$.d(Le,{T:()=>Ee});var w=$(6973),W=$(9360),ie=$(8251);function Ee(ve=pe){return(0,W.e)((Re,R)=>{let Ne=!1;Re.subscribe((0,ie.x)(R,ue=>{Ne=!0,R.next(ue)},()=>Ne?R.complete():R.error(ve())))})}function pe(){return new w.K}},1954:(bt,Le,$)=>{$.d(Le,{o:()=>pe});var w=$(7394);class W extends w.w0{constructor(Re,R){super()}schedule(Re,R=0){return this}}const ie={setInterval(ve,Re,...R){const{delegate:Ne}=ie;return Ne?.setInterval?Ne.setInterval(ve,Re,...R):setInterval(ve,Re,...R)},clearInterval(ve){const{delegate:Re}=ie;return(Re?.clearInterval||clearInterval)(ve)},delegate:void 0};var Ee=$(9039);class pe extends W{constructor(Re,R){super(Re,R),this.scheduler=Re,this.work=R,this.pending=!1}schedule(Re,R=0){var Ne;if(this.closed)return this;this.state=Re;const ue=this.id,he=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(he,ue,R)),this.pending=!0,this.delay=R,this.id=null!==(Ne=this.id)&&void 0!==Ne?Ne:this.requestAsyncId(he,this.id,R),this}requestAsyncId(Re,R,Ne=0){return ie.setInterval(Re.flush.bind(Re,this),Ne)}recycleAsyncId(Re,R,Ne=0){if(null!=Ne&&this.delay===Ne&&!1===this.pending)return R;null!=R&&ie.clearInterval(R)}execute(Re,R){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ne=this._execute(Re,R);if(Ne)return Ne;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Re,R){let ue,Ne=!1;try{this.work(Re)}catch(he){Ne=!0,ue=he||new Error("Scheduled action threw falsy error")}if(Ne)return this.unsubscribe(),ue}unsubscribe(){if(!this.closed){const{id:Re,scheduler:R}=this,{actions:Ne}=R;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ee.P)(Ne,this),null!=Re&&(this.id=this.recycleAsyncId(R,Re,null)),this.delay=null,super.unsubscribe()}}}},2631:(bt,Le,$)=>{$.d(Le,{v:()=>ie});var w=$(4552);class W{constructor(pe,ve=W.now){this.schedulerActionCtor=pe,this.now=ve}schedule(pe,ve=0,Re){return new this.schedulerActionCtor(this,pe).schedule(Re,ve)}}W.now=w.l.now;class ie extends W{constructor(pe,ve=W.now){super(pe,ve),this.actions=[],this._active=!1}flush(pe){const{actions:ve}=this;if(this._active)return void ve.push(pe);let Re;this._active=!0;do{if(Re=pe.execute(pe.state,pe.delay))break}while(pe=ve.shift());if(this._active=!1,Re){for(;pe=ve.shift();)pe.unsubscribe();throw Re}}}},6321:(bt,Le,$)=>{$.d(Le,{P:()=>Ee,z:()=>ie});var w=$(1954);const ie=new($(2631).v)(w.o),Ee=ie},4552:(bt,Le,$)=>{$.d(Le,{l:()=>w});const w={now:()=>(w.delegate||Date).now(),delegate:void 0}},7599:(bt,Le,$)=>{$.d(Le,{z:()=>w});const w={setTimeout(W,ie,...Ee){const{delegate:pe}=w;return pe?.setTimeout?pe.setTimeout(W,ie,...Ee):setTimeout(W,ie,...Ee)},clearTimeout(W){const{delegate:ie}=w;return(ie?.clearTimeout||clearTimeout)(W)},delegate:void 0}},4971:(bt,Le,$)=>{$.d(Le,{h:()=>W});const W=function w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(bt,Le,$)=>{$.d(Le,{L:()=>w});const w="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(bt,Le,$)=>{$.d(Le,{K:()=>W});const W=(0,$(2306).d)(ie=>function(){ie(this),this.name="EmptyError",this.message="no elements in sequence"})},9940:(bt,Le,$)=>{$.d(Le,{_6:()=>ve,jO:()=>Ee,yG:()=>pe});var w=$(4674),W=$(671);function ie(Re){return Re[Re.length-1]}function Ee(Re){return(0,w.m)(ie(Re))?Re.pop():void 0}function pe(Re){return(0,W.K)(ie(Re))?Re.pop():void 0}function ve(Re,R){return"number"==typeof ie(Re)?Re.pop():R}},7453:(bt,Le,$)=>{$.d(Le,{D:()=>pe});const{isArray:w}=Array,{getPrototypeOf:W,prototype:ie,keys:Ee}=Object;function pe(Re){if(1===Re.length){const R=Re[0];if(w(R))return{args:R,keys:null};if(function ve(Re){return Re&&"object"==typeof Re&&W(Re)===ie}(R)){const Ne=Ee(R);return{args:Ne.map(ue=>R[ue]),keys:Ne}}}return{args:Re,keys:null}}},9039:(bt,Le,$)=>{function w(W,ie){if(W){const Ee=W.indexOf(ie);0<=Ee&&W.splice(Ee,1)}}$.d(Le,{P:()=>w})},2306:(bt,Le,$)=>{function w(W){const Ee=W(pe=>{Error.call(pe),pe.stack=(new Error).stack});return Ee.prototype=Object.create(Error.prototype),Ee.prototype.constructor=Ee,Ee}$.d(Le,{d:()=>w})},2714:(bt,Le,$)=>{function w(W,ie){return W.reduce((Ee,pe,ve)=>(Ee[pe]=ie[ve],Ee),{})}$.d(Le,{n:()=>w})},1441:(bt,Le,$)=>{$.d(Le,{O:()=>Ee,x:()=>ie});var w=$(2653);let W=null;function ie(pe){if(w.config.useDeprecatedSynchronousErrorHandling){const ve=!W;if(ve&&(W={errorThrown:!1,error:null}),pe(),ve){const{errorThrown:Re,error:R}=W;if(W=null,Re)throw R}}else pe()}function Ee(pe){w.config.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=pe)}},7103:(bt,Le,$)=>{function w(W,ie,Ee,pe=0,ve=!1){const Re=ie.schedule(function(){Ee(),ve?W.add(this.schedule(null,pe)):this.unsubscribe()},pe);if(W.add(Re),!ve)return Re}$.d(Le,{f:()=>w})},2737:(bt,Le,$)=>{function w(W){return W}$.d(Le,{y:()=>w})},4266:(bt,Le,$)=>{$.d(Le,{z:()=>w});const w=W=>W&&"number"==typeof W.length&&"function"!=typeof W},5726:(bt,Le,$)=>{$.d(Le,{D:()=>W});var w=$(4674);function W(ie){return Symbol.asyncIterator&&(0,w.m)(ie?.[Symbol.asyncIterator])}},4674:(bt,Le,$)=>{function w(W){return"function"==typeof W}$.d(Le,{m:()=>w})},8382:(bt,Le,$)=>{$.d(Le,{c:()=>ie});var w=$(4850),W=$(4674);function ie(Ee){return(0,W.m)(Ee[w.L])}},3664:(bt,Le,$)=>{$.d(Le,{T:()=>ie});var w=$(4971),W=$(4674);function ie(Ee){return(0,W.m)(Ee?.[w.h])}},4026:(bt,Le,$)=>{$.d(Le,{t:()=>W});var w=$(4674);function W(ie){return(0,w.m)(ie?.then)}},541:(bt,Le,$)=>{$.d(Le,{L:()=>Ee,Q:()=>ie});var w=$(7582),W=$(4674);function ie(pe){return(0,w.FC)(this,arguments,function*(){const Re=pe.getReader();try{for(;;){const{value:R,done:Ne}=yield(0,w.qq)(Re.read());if(Ne)return yield(0,w.qq)(void 0);yield yield(0,w.qq)(R)}}finally{Re.releaseLock()}})}function Ee(pe){return(0,W.m)(pe?.getReader)}},671:(bt,Le,$)=>{$.d(Le,{K:()=>W});var w=$(4674);function W(ie){return ie&&(0,w.m)(ie.schedule)}},9360:(bt,Le,$)=>{$.d(Le,{A:()=>W,e:()=>ie});var w=$(4674);function W(Ee){return(0,w.m)(Ee?.lift)}function ie(Ee){return pe=>{if(W(pe))return pe.lift(function(ve){try{return Ee(ve,this)}catch(Re){this.error(Re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(bt,Le,$)=>{$.d(Le,{Z:()=>Ee});var w=$(7398);const{isArray:W}=Array;function Ee(pe){return(0,w.U)(ve=>function ie(pe,ve){return W(ve)?pe(...ve):pe(ve)}(pe,ve))}},2420:(bt,Le,$)=>{function w(){}$.d(Le,{Z:()=>w})},8407:(bt,Le,$)=>{$.d(Le,{U:()=>ie,z:()=>W});var w=$(2737);function W(...Ee){return ie(Ee)}function ie(Ee){return 0===Ee.length?w.y:1===Ee.length?Ee[0]:function(ve){return Ee.reduce((Re,R)=>R(Re),ve)}}},3894:(bt,Le,$)=>{$.d(Le,{h:()=>ie});var w=$(2653),W=$(7599);function ie(Ee){W.z.setTimeout(()=>{const{onUnhandledError:pe}=w.config;if(!pe)throw Ee;pe(Ee)})}},9853:(bt,Le,$)=>{function w(W){return new TypeError(`You provided ${null!==W&&"object"==typeof W?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}$.d(Le,{z:()=>w})},6825:(bt,Le,$)=>{$.d(Le,{LC:()=>W,SB:()=>Ne,X$:()=>Ee,ZE:()=>ut,ZN:()=>pt,_j:()=>w,eR:()=>he,jt:()=>pe,k1:()=>Ft,l3:()=>ie,oB:()=>R,vP:()=>Re});class w{}class W{}const ie="*";function Ee(Ie,ce){return{type:7,name:Ie,definitions:ce,options:{}}}function pe(Ie,ce=null){return{type:4,styles:ce,timings:Ie}}function Re(Ie,ce=null){return{type:2,steps:Ie,options:ce}}function R(Ie){return{type:6,styles:Ie,offset:null}}function Ne(Ie,ce,ke){return{type:0,name:Ie,styles:ce,options:ke}}function he(Ie,ce,ke=null){return{type:1,expr:Ie,animation:ce,options:ke}}class pt{constructor(ce=0,ke=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ce+ke}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ce=>ce()),this._onDoneFns=[])}onStart(ce){this._originalOnStartFns.push(ce),this._onStartFns.push(ce)}onDone(ce){this._originalOnDoneFns.push(ce),this._onDoneFns.push(ce)}onDestroy(ce){this._onDestroyFns.push(ce)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ce=>ce()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ce=>ce()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(ce){this._position=this.totalTime?ce*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ce){const ke="start"==ce?this._onStartFns:this._onDoneFns;ke.forEach(Ce=>Ce()),ke.length=0}}class ut{constructor(ce){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ce;let ke=0,Ce=0,Ge=0;const Qe=this.players.length;0==Qe?queueMicrotask(()=>this._onFinish()):this.players.forEach(rt=>{rt.onDone(()=>{++ke==Qe&&this._onFinish()}),rt.onDestroy(()=>{++Ce==Qe&&this._onDestroy()}),rt.onStart(()=>{++Ge==Qe&&this._onStart()})}),this.totalTime=this.players.reduce((rt,fe)=>Math.max(rt,fe.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ce=>ce()),this._onDoneFns=[])}init(){this.players.forEach(ce=>ce.init())}onStart(ce){this._onStartFns.push(ce)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ce=>ce()),this._onStartFns=[])}onDone(ce){this._onDoneFns.push(ce)}onDestroy(ce){this._onDestroyFns.push(ce)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ce=>ce.play())}pause(){this.players.forEach(ce=>ce.pause())}restart(){this.players.forEach(ce=>ce.restart())}finish(){this._onFinish(),this.players.forEach(ce=>ce.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ce=>ce.destroy()),this._onDestroyFns.forEach(ce=>ce()),this._onDestroyFns=[])}reset(){this.players.forEach(ce=>ce.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ce){const ke=ce*this.totalTime;this.players.forEach(Ce=>{const Ge=Ce.totalTime?Math.min(1,ke/Ce.totalTime):1;Ce.setPosition(Ge)})}getPosition(){const ce=this.players.reduce((ke,Ce)=>null===ke||Ce.totalTime>ke.totalTime?Ce:ke,null);return null!=ce?ce.getPosition():0}beforeDestroy(){this.players.forEach(ce=>{ce.beforeDestroy&&ce.beforeDestroy()})}triggerCallback(ce){const ke="start"==ce?this._onStartFns:this._onDoneFns;ke.forEach(Ce=>Ce()),ke.length=0}}const Ft="!"},6814:(bt,Le,$)=>{$.d(Le,{Do:()=>nt,EM:()=>$i,HT:()=>Ee,JF:()=>Ds,K0:()=>ve,Mx:()=>ti,NF:()=>gi,O5:()=>Ji,Ov:()=>Ba,PM:()=>ea,S$:()=>et,V_:()=>R,Ye:()=>pt,b0:()=>ht,bD:()=>hr,ez:()=>to,mk:()=>Qs,q:()=>ie,sg:()=>Fn,w_:()=>pe});var w=$(5879);let W=null;function ie(){return W}function Ee(S){W||(W=S)}class pe{}const ve=new w.OlP("DocumentToken");let Re=(()=>{class S{historyGo(L){throw new Error("Not implemented")}static#e=this.\u0275fac=function(G){return new(G||S)};static#t=this.\u0275prov=w.Yz7({token:S,factory:function(){return(0,w.f3M)(Ne)},providedIn:"platform"})}return S})();const R=new w.OlP("Location Initialized");let Ne=(()=>{class S extends Re{constructor(){super(),this._doc=(0,w.f3M)(ve),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ie().getBaseHref(this._doc)}onPopState(L){const G=ie().getGlobalEventTarget(this._doc,"window");return G.addEventListener("popstate",L,!1),()=>G.removeEventListener("popstate",L)}onHashChange(L){const G=ie().getGlobalEventTarget(this._doc,"window");return G.addEventListener("hashchange",L,!1),()=>G.removeEventListener("hashchange",L)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(L){this._location.pathname=L}pushState(L,G,de){this._history.pushState(L,G,de)}replaceState(L,G,de){this._history.replaceState(L,G,de)}forward(){this._history.forward()}back(){this._history.back()}historyGo(L=0){this._history.go(L)}getState(){return this._history.state}static#e=this.\u0275fac=function(G){return new(G||S)};static#t=this.\u0275prov=w.Yz7({token:S,factory:function(){return new S},providedIn:"platform"})}return S})();function ue(S,q){if(0==S.length)return q;if(0==q.length)return S;let L=0;return S.endsWith("/")&&L++,q.startsWith("/")&&L++,2==L?S+q.substring(1):1==L?S+q:S+"/"+q}function he(S){const q=S.match(/#|\?|$/),L=q&&q.index||S.length;return S.slice(0,L-("/"===S[L-1]?1:0))+S.slice(L)}function De(S){return S&&"?"!==S[0]?"?"+S:S}let et=(()=>{class S{historyGo(L){throw new Error("Not implemented")}static#e=this.\u0275fac=function(G){return new(G||S)};static#t=this.\u0275prov=w.Yz7({token:S,factory:function(){return(0,w.f3M)(ht)},providedIn:"root"})}return S})();const Ke=new w.OlP("appBaseHref");let ht=(()=>{class S extends et{constructor(L,G){super(),this._platformLocation=L,this._removeListenerFns=[],this._baseHref=G??this._platformLocation.getBaseHrefFromDOM()??(0,w.f3M)(ve).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}prepareExternalUrl(L){return ue(this._baseHref,L)}path(L=!1){const G=this._platformLocation.pathname+De(this._platformLocation.search),de=this._platformLocation.hash;return de&&L?`${G}${de}`:G}pushState(L,G,de,ze){const M=this.prepareExternalUrl(de+De(ze));this._platformLocation.pushState(L,G,M)}replaceState(L,G,de,ze){const M=this.prepareExternalUrl(de+De(ze));this._platformLocation.replaceState(L,G,M)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}static#e=this.\u0275fac=function(G){return new(G||S)(w.LFG(Re),w.LFG(Ke,8))};static#t=this.\u0275prov=w.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})(),nt=(()=>{class S extends et{constructor(L,G){super(),this._platformLocation=L,this._baseHref="",this._removeListenerFns=[],null!=G&&(this._baseHref=G)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}path(L=!1){let G=this._platformLocation.hash;return null==G&&(G="#"),G.length>0?G.substring(1):G}prepareExternalUrl(L){const G=ue(this._baseHref,L);return G.length>0?"#"+G:G}pushState(L,G,de,ze){let M=this.prepareExternalUrl(de+De(ze));0==M.length&&(M=this._platformLocation.pathname),this._platformLocation.pushState(L,G,M)}replaceState(L,G,de,ze){let M=this.prepareExternalUrl(de+De(ze));0==M.length&&(M=this._platformLocation.pathname),this._platformLocation.replaceState(L,G,M)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}static#e=this.\u0275fac=function(G){return new(G||S)(w.LFG(Re),w.LFG(Ke,8))};static#t=this.\u0275prov=w.Yz7({token:S,factory:S.\u0275fac})}return S})(),pt=(()=>{class S{constructor(L){this._subject=new w.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=L;const G=this._locationStrategy.getBaseHref();this._basePath=function ce(S){if(new RegExp("^(https?:)?//").test(S)){const[,L]=S.split(/\/\/[^\/]+/);return L}return S}(he(Ie(G))),this._locationStrategy.onPopState(de=>{this._subject.emit({url:this.path(!0),pop:!0,state:de.state,type:de.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(L=!1){return this.normalize(this._locationStrategy.path(L))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(L,G=""){return this.path()==this.normalize(L+De(G))}normalize(L){return S.stripTrailingSlash(function Ft(S,q){if(!S||!q.startsWith(S))return q;const L=q.substring(S.length);return""===L||["/",";","?","#"].includes(L[0])?L:q}(this._basePath,Ie(L)))}prepareExternalUrl(L){return L&&"/"!==L[0]&&(L="/"+L),this._locationStrategy.prepareExternalUrl(L)}go(L,G="",de=null){this._locationStrategy.pushState(de,"",L,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+De(G)),de)}replaceState(L,G="",de=null){this._locationStrategy.replaceState(de,"",L,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+De(G)),de)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(L=0){this._locationStrategy.historyGo?.(L)}onUrlChange(L){return this._urlChangeListeners.push(L),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(G=>{this._notifyUrlChangeListeners(G.url,G.state)})),()=>{const G=this._urlChangeListeners.indexOf(L);this._urlChangeListeners.splice(G,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(L="",G){this._urlChangeListeners.forEach(de=>de(L,G))}subscribe(L,G,de){return this._subject.subscribe({next:L,error:G,complete:de})}static#e=this.normalizeQueryParams=De;static#t=this.joinWithSlash=ue;static#n=this.stripTrailingSlash=he;static#r=this.\u0275fac=function(G){return new(G||S)(w.LFG(et))};static#i=this.\u0275prov=w.Yz7({token:S,factory:function(){return function ut(){return new pt((0,w.LFG)(et))}()},providedIn:"root"})}return S})();function Ie(S){return S.replace(/\/index.html$/,"")}function ti(S,q){q=encodeURIComponent(q);for(const L of S.split(";")){const G=L.indexOf("="),[de,ze]=-1==G?[L,""]:[L.slice(0,G),L.slice(G+1)];if(de.trim()===q)return decodeURIComponent(ze)}return null}const ls=/\s+/,Do=[];let Qs=(()=>{class S{constructor(L,G,de,ze){this._iterableDiffers=L,this._keyValueDiffers=G,this._ngEl=de,this._renderer=ze,this.initialClasses=Do,this.stateMap=new Map}set klass(L){this.initialClasses=null!=L?L.trim().split(ls):Do}set ngClass(L){this.rawClass="string"==typeof L?L.trim().split(ls):L}ngDoCheck(){for(const G of this.initialClasses)this._updateState(G,!0);const L=this.rawClass;if(Array.isArray(L)||L instanceof Set)for(const G of L)this._updateState(G,!0);else if(null!=L)for(const G of Object.keys(L))this._updateState(G,!!L[G]);this._applyStateDiff()}_updateState(L,G){const de=this.stateMap.get(L);void 0!==de?(de.enabled!==G&&(de.changed=!0,de.enabled=G),de.touched=!0):this.stateMap.set(L,{enabled:G,changed:!0,touched:!0})}_applyStateDiff(){for(const L of this.stateMap){const G=L[0],de=L[1];de.changed?(this._toggleClass(G,de.enabled),de.changed=!1):de.touched||(de.enabled&&this._toggleClass(G,!1),this.stateMap.delete(G)),de.touched=!1}}_toggleClass(L,G){(L=L.trim()).length>0&&L.split(ls).forEach(de=>{G?this._renderer.addClass(this._ngEl.nativeElement,de):this._renderer.removeClass(this._ngEl.nativeElement,de)})}static#e=this.\u0275fac=function(G){return new(G||S)(w.Y36(w.ZZ4),w.Y36(w.aQg),w.Y36(w.SBq),w.Y36(w.Qsj))};static#t=this.\u0275dir=w.lG2({type:S,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return S})();class Qo{constructor(q,L,G,de){this.$implicit=q,this.ngForOf=L,this.index=G,this.count=de}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Fn=(()=>{class S{set ngForOf(L){this._ngForOf=L,this._ngForOfDirty=!0}set ngForTrackBy(L){this._trackByFn=L}get ngForTrackBy(){return this._trackByFn}constructor(L,G,de){this._viewContainer=L,this._template=G,this._differs=de,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(L){L&&(this._template=L)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const L=this._ngForOf;!this._differ&&L&&(this._differ=this._differs.find(L).create(this.ngForTrackBy))}if(this._differ){const L=this._differ.diff(this._ngForOf);L&&this._applyChanges(L)}}_applyChanges(L){const G=this._viewContainer;L.forEachOperation((de,ze,M)=>{if(null==de.previousIndex)G.createEmbeddedView(this._template,new Qo(de.item,this._ngForOf,-1,-1),null===M?void 0:M);else if(null==M)G.remove(null===ze?void 0:ze);else if(null!==ze){const F=G.get(ze);G.move(F,M),Yo(F,de)}});for(let de=0,ze=G.length;de<ze;de++){const F=G.get(de).context;F.index=de,F.count=ze,F.ngForOf=this._ngForOf}L.forEachIdentityChange(de=>{Yo(G.get(de.currentIndex),de)})}static ngTemplateContextGuard(L,G){return!0}static#e=this.\u0275fac=function(G){return new(G||S)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(w.ZZ4))};static#t=this.\u0275dir=w.lG2({type:S,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return S})();function Yo(S,q){S.context.$implicit=q.item}let Ji=(()=>{class S{constructor(L,G){this._viewContainer=L,this._context=new Ao,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=G}set ngIf(L){this._context.$implicit=this._context.ngIf=L,this._updateView()}set ngIfThen(L){Xi("ngIfThen",L),this._thenTemplateRef=L,this._thenViewRef=null,this._updateView()}set ngIfElse(L){Xi("ngIfElse",L),this._elseTemplateRef=L,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(L,G){return!0}static#e=this.\u0275fac=function(G){return new(G||S)(w.Y36(w.s_b),w.Y36(w.Rgc))};static#t=this.\u0275dir=w.lG2({type:S,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return S})();class Ao{constructor(){this.$implicit=null,this.ngIf=null}}function Xi(S,q){if(q&&!q.createEmbeddedView)throw new Error(`${S} must be a TemplateRef, but received '${(0,w.AaK)(q)}'.`)}class Fo{createSubscription(q,L){return(0,w.rg0)(()=>q.subscribe({next:L,error:G=>{throw G}}))}dispose(q){(0,w.rg0)(()=>q.unsubscribe())}}class _o{createSubscription(q,L){return q.then(L,G=>{throw G})}dispose(q){}}const Jo=new _o,_u=new Fo;let Ba=(()=>{class S{constructor(L){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=L}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(L){return this._obj?L!==this._obj?(this._dispose(),this.transform(L)):this._latestValue:(L&&this._subscribe(L),this._latestValue)}_subscribe(L){this._obj=L,this._strategy=this._selectStrategy(L),this._subscription=this._strategy.createSubscription(L,G=>this._updateLatestValue(L,G))}_selectStrategy(L){if((0,w.QGY)(L))return Jo;if((0,w.F4k)(L))return _u;throw function fi(S,q){return new w.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(L,G){L===this._obj&&(this._latestValue=G,this._ref.markForCheck())}static#e=this.\u0275fac=function(G){return new(G||S)(w.Y36(w.sBO,16))};static#t=this.\u0275pipe=w.Yjl({name:"async",type:S,pure:!1,standalone:!0})}return S})(),to=(()=>{class S{static#e=this.\u0275fac=function(G){return new(G||S)};static#t=this.\u0275mod=w.oAB({type:S});static#n=this.\u0275inj=w.cJS({})}return S})();const hr="browser",ji="server";function gi(S){return S===hr}function ea(S){return S===ji}let $i=(()=>{class S{static#e=this.\u0275prov=(0,w.Yz7)({token:S,providedIn:"root",factory:()=>new mi((0,w.LFG)(ve),window)})}return S})();class mi{constructor(q,L){this.document=q,this.window=L,this.offset=()=>[0,0]}setOffset(q){this.offset=Array.isArray(q)?()=>q:q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(q){this.supportsScrolling()&&this.window.scrollTo(q[0],q[1])}scrollToAnchor(q){if(!this.supportsScrolling())return;const L=function Us(S,q){const L=S.getElementById(q)||S.getElementsByName(q)[0];if(L)return L;if("function"==typeof S.createTreeWalker&&S.body&&"function"==typeof S.body.attachShadow){const G=S.createTreeWalker(S.body,NodeFilter.SHOW_ELEMENT);let de=G.currentNode;for(;de;){const ze=de.shadowRoot;if(ze){const M=ze.getElementById(q)||ze.querySelector(`[name="${q}"]`);if(M)return M}de=G.nextNode()}}return null}(this.document,q);L&&(this.scrollToElement(L),L.focus())}setHistoryScrollRestoration(q){this.supportsScrolling()&&(this.window.history.scrollRestoration=q)}scrollToElement(q){const L=q.getBoundingClientRect(),G=L.left+this.window.pageXOffset,de=L.top+this.window.pageYOffset,ze=this.offset();this.window.scrollTo(G-ze[0],de-ze[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Ds{}},5879:(bt,Le,$)=>{$.d(Le,{$8M:()=>jl,$WT:()=>eo,$Z:()=>Ed,AFp:()=>Wg,ALo:()=>Q0,AaK:()=>De,CHM:()=>ai,CRH:()=>hw,EJc:()=>ND,EpF:()=>VE,F$t:()=>Yy,F4k:()=>Zy,FYo:()=>hf,FiY:()=>xo,Gf:()=>cw,GfV:()=>Cp,Gpc:()=>ht,HDt:()=>kw,Hsn:()=>Jy,JOm:()=>Mn,KtG:()=>In,LFG:()=>Jt,LSH:()=>lp,Lbi:()=>qg,Lck:()=>yC,MAs:()=>zy,MMx:()=>L0,MR2:()=>tc,NdJ:()=>n_,Ojb:()=>q_,OlP:()=>kt,Oqu:()=>gg,P3R:()=>Fg,PXZ:()=>uA,Q6J:()=>ag,QGY:()=>t_,QbO:()=>qv,Qsj:()=>ff,R0b:()=>Zs,RDi:()=>jh,Rgc:()=>D_,SBq:()=>Sl,Sil:()=>FD,Suo:()=>dw,TTD:()=>He,TgZ:()=>ug,VuI:()=>zA,W1O:()=>mw,X6Q:()=>mA,XFs:()=>Kt,Xpm:()=>_o,Xq5:()=>$m,Xts:()=>Zh,Y36:()=>Sc,YKP:()=>k0,YNc:()=>kE,Yjl:()=>Fs,Yz7:()=>en,Z0I:()=>$n,ZZ4:()=>kI,_Bn:()=>x0,_UZ:()=>Qm,_c5:()=>OA,_uU:()=>fv,aQg:()=>FI,c2e:()=>xw,cJS:()=>sn,cg1:()=>nI,dDg:()=>iA,dqk:()=>zn,eFA:()=>Gw,eJc:()=>vI,ekj:()=>fg,eoX:()=>jw,evT:()=>Rp,f3M:()=>Dt,g9A:()=>hp,h0i:()=>zf,hGG:()=>NA,iGM:()=>lw,ifc:()=>Ht,ip1:()=>Nw,jDz:()=>V0,kL8:()=>o0,lG2:()=>Wr,lcZ:()=>Y0,lqb:()=>bl,lri:()=>Uw,n5z:()=>No,oAB:()=>xi,oxw:()=>$E,q4F:()=>Dp,qFp:()=>WA,qLn:()=>Pl,qOj:()=>ci,qZA:()=>lg,rWj:()=>Bw,rg0:()=>ze,sBO:()=>_A,s_b:()=>Dv,soG:()=>bv,tb:()=>RI,tp0:()=>uu,uIk:()=>zm,vHH:()=>ce,vpe:()=>xu,wAp:()=>yg,xp6:()=>Fp,z2F:()=>wg,zSh:()=>Hg,zs3:()=>sl});var w=$(8645),W=$(7394),ie=$(5592),Ee=$(3019),pe=$(5619),ve=$(2096),Re=$(3020),R=$(4664),Ne=$(3997);function ue(t){for(let r in t)if(t[r]===ue)return r;throw Error("Could not find renamed property on target object.")}function he(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function De(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(De).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function et(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const Ke=ue({__forward_ref__:ue});function ht(t){return t.__forward_ref__=ht,t.toString=function(){return De(this())},t}function nt(t){return pt(t)?t():t}function pt(t){return"function"==typeof t&&t.hasOwnProperty(Ke)&&t.__forward_ref__===ht}function ut(t){return t&&!!t.\u0275providers}const Ie="https://g.co/ng/security#xss";class ce extends Error{constructor(r,s){super(function ke(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,s)),this.code=r}}function Ce(t){return"string"==typeof t?t:null==t?"":String(t)}function Et(t,r){throw new ce(-201,!1)}function yt(t,r){null==t&&function gt(t,r,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function en(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function sn(t){return{providers:t.providers||[],imports:t.imports||[]}}function yn(t){return qt(t,Xn)||qt(t,Oi)}function $n(t){return null!==yn(t)}function qt(t,r){return t.hasOwnProperty(r)?t[r]:null}function Vr(t){return t&&(t.hasOwnProperty(Ui)||t.hasOwnProperty(Zn))?t[Ui]:null}const Xn=ue({\u0275prov:ue}),Ui=ue({\u0275inj:ue}),Oi=ue({ngInjectableDef:ue}),Zn=ue({ngInjectorDef:ue});var Kt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Kt||{});let vn;function Vn(t){const r=vn;return vn=t,r}function Un(t,r,s){const a=yn(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Kt.Optional?null:void 0!==r?r:void Et(De(t))}const zn=globalThis;class kt{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=en({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const rr={},xr="__NG_DI_FLAG__",us="ngTempTokenPath",ee=/\n/gm,J="__source";let ne;function Ze(t){const r=ne;return ne=t,r}function dt(t,r=Kt.Default){if(void 0===ne)throw new ce(-203,!1);return null===ne?Un(t,void 0,r):ne.get(t,r&Kt.Optional?null:void 0,r)}function Jt(t,r=Kt.Default){return(function Bt(){return vn}()||dt)(nt(t),r)}function Dt(t,r=Kt.Default){return Jt(t,Lt(r))}function Lt(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function cr(t){const r=[];for(let s=0;s<t.length;s++){const a=nt(t[s]);if(Array.isArray(a)){if(0===a.length)throw new ce(900,!1);let l,f=Kt.Default;for(let y=0;y<a.length;y++){const D=a[y],O=Co(D);"number"==typeof O?-1===O?l=D.token:f|=O:l=D}r.push(Jt(l,f))}else r.push(Jt(a))}return r}function Ci(t,r){return t[xr]=r,t.prototype[xr]=r,t}function Co(t){return t[xr]}function Oe(t){return{toString:t}.toString()}var st=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(st||{}),Ht=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ht||{});const Zt={},Tt=[],Xt=ue({\u0275cmp:ue}),Gn=ue({\u0275dir:ue}),Wn=ue({\u0275pipe:ue}),ii=ue({\u0275mod:ue}),ti=ue({\u0275fac:ue}),ls=ue({__NG_ELEMENT_ID__:ue}),Do=ue({__NG_ENV_ID__:ue});function Qs(t,r,s){let a=t.length;for(;;){const l=t.indexOf(r,s);if(-1===l)return l;if(0===l||t.charCodeAt(l-1)<=32){const f=r.length;if(l+f===a||t.charCodeAt(l+f)<=32)return l}s=l+1}}function Ys(t,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const f=s[a++],y=s[a++],D=s[a++];t.setAttribute(r,y,D,f)}else{const f=l,y=s[++a];Qo(f)?t.setProperty(r,f,y):t.setAttribute(r,f,y),a++}}return a}function Js(t){return 3===t||4===t||6===t}function Qo(t){return 64===t.charCodeAt(0)}function Fn(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||Yo(t,s,l,null,-1===s||2===s?r[++a]:null)}}return t}function Yo(t,r,s,a,l){let f=0,y=t.length;if(-1===r)y=-1;else for(;f<t.length;){const D=t[f++];if("number"==typeof D){if(D===r){y=-1;break}if(D>r){y=f-1;break}}}for(;f<t.length;){const D=t[f];if("number"==typeof D)break;if(D===s){if(null===a)return void(null!==l&&(t[f+1]=l));if(a===t[f+1])return void(t[f+2]=l)}f++,null!==a&&f++,null!==l&&f++}-1!==y&&(t.splice(y,0,r),f=y+1),t.splice(f++,0,s),null!==a&&t.splice(f++,0,a),null!==l&&t.splice(f++,0,l)}const Di="ng-template";function Ji(t,r,s){let a=0,l=!0;for(;a<t.length;){let f=t[a++];if("string"==typeof f&&l){const y=t[a++];if(s&&"class"===f&&-1!==Qs(y.toLowerCase(),r,0))return!0}else{if(1===f){for(;a<t.length&&"string"==typeof(f=t[a++]);)if(f.toLowerCase()===r)return!0;return!1}"number"==typeof f&&(l=!1)}}return!1}function Ao(t){return 4===t.type&&t.value!==Di}function Xi(t,r,s){return r===(4!==t.type||s?t.value:Di)}function mo(t,r,s){let a=4;const l=t.attrs||[],f=function Ni(t){for(let r=0;r<t.length;r++)if(Js(t[r]))return r;return t.length}(l);let y=!1;for(let D=0;D<r.length;D++){const O=r[D];if("number"!=typeof O){if(!y)if(4&a){if(a=2|1&a,""!==O&&!Xi(t,O,s)||""===O&&1===r.length){if(kr(a))return!1;y=!0}}else{const H=8&a?O:r[++D];if(8&a&&null!==t.attrs){if(!Ji(t.attrs,H,s)){if(kr(a))return!1;y=!0}continue}const ae=zr(8&a?"class":O,l,Ao(t),s);if(-1===ae){if(kr(a))return!1;y=!0;continue}if(""!==H){let Ae;Ae=ae>f?"":l[ae+1].toLowerCase();const xe=8&a?Ae:null;if(xe&&-1!==Qs(xe,H,0)||2&a&&H!==Ae){if(kr(a))return!1;y=!0}}}}else{if(!y&&!kr(a)&&!kr(O))return!1;if(y&&kr(O))continue;y=!1,a=O|1&a}}return kr(a)||y}function kr(t){return 0==(1&t)}function zr(t,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let f=!1;for(;l<r.length;){const y=r[l];if(y===t)return l;if(3===y||6===y)f=!0;else{if(1===y||2===y){let D=r[++l];for(;"string"==typeof D;)D=r[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=f?1:2}return-1}return function cs(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function hi(t,r,s=!1){for(let a=0;a<r.length;a++)if(mo(t,r[a],s))return!0;return!1}function Xs(t,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(t.length===a.length){for(let l=0;l<t.length;l++)if(t[l]!==a[l])continue e;return!0}}return!1}function Gr(t,r){return t?":not("+r.trim()+")":r}function mu(t){let r=t[0],s=1,a=2,l="",f=!1;for(;s<t.length;){let y=t[s];if("string"==typeof y)if(2&a){const D=t[++s];l+="["+y+(D.length>0?'="'+D+'"':"")+"]"}else 8&a?l+="."+y:4&a&&(l+=" "+y);else""!==l&&!kr(y)&&(r+=Gr(f,l),l=""),a=y,f=f||!kr(a);s++}return""!==l&&(r+=Gr(f,l)),r}function _o(t){return Oe(()=>{const r=Br(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===st.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ht.Emulated,styles:t.styles||Tt,_:null,schemas:t.schemas||null,tView:null,id:""};Ls(s);const a=t.dependencies;return s.directiveDefs=Vs(a,!1),s.pipeDefs=Vs(a,!0),s.id=function Cs(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const l of s)r=Math.imul(31,r)+l.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(s),s})}function _u(t){return Tn(t)||er(t)}function Ba(t){return null!==t}function xi(t){return Oe(()=>({type:t.type,bootstrap:t.bootstrap||Tt,declarations:t.declarations||Tt,imports:t.imports||Tt,exports:t.exports||Tt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Xo(t,r){if(null==t)return Zt;const s={};for(const a in t)if(t.hasOwnProperty(a)){let l=t[a],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),s[l]=a,r&&(r[l]=f)}return s}function Wr(t){return Oe(()=>{const r=Br(t);return Ls(r),r})}function Fs(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Tn(t){return t[Xt]||null}function er(t){return t[Gn]||null}function ki(t){return t[Wn]||null}function eo(t){const r=Tn(t)||er(t)||ki(t);return null!==r&&r.standalone}function qr(t,r){const s=t[ii]||null;if(!s&&!0===r)throw new Error(`Type ${De(t)} does not have '\u0275mod' property.`);return s}function Br(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||Zt,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Tt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Xo(t.inputs,r),outputs:Xo(t.outputs)}}function Ls(t){t.features?.forEach(r=>r(t))}function Vs(t,r){if(!t)return null;const s=r?ki:_u;return()=>("function"==typeof t?t():t).map(a=>s(a)).filter(Ba)}const dr=0,vt=1,hn=2,Sn=3,Kr=4,bo=5,pi=6,to=7,hr=8,ji=9,Hi=10,$t=11,gi=12,ea=13,jr=14,Or=15,tr=16,$i=17,mi=18,Us=19,Lo=20,Ds=21,es=22,Bs=23,zi=24,Dn=25,ds=1,na=2,hs=7,_i=9,si=11;function oi(t){return Array.isArray(t)&&"object"==typeof t[ds]}function fr(t){return Array.isArray(t)&&!0===t[ds]}function As(t){return 0!=(4&t.flags)}function bs(t){return t.componentOffset>-1}function yo(t){return 1==(1&t.flags)}function ns(t){return!!t.template}function _a(t){return 0!=(512&t[hn])}function bi(t,r){return t.hasOwnProperty(ti)?t[ti]:null}let yi=null,Ss=!1;function vi(t){const r=yi;return yi=t,r}const Ea={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function oa(t){if(!ps(t)||t.dirty){if(!t.producerMustRecompute(t)&&!wa(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function So(t){t.dirty=!0,function $s(t){if(void 0===t.liveConsumerNode)return;const r=Ss;Ss=!0;try{for(const s of t.liveConsumerNode)s.dirty||So(s)}finally{Ss=r}}(t),t.consumerMarkedDirty?.(t)}function ro(t){return t&&(t.nextProducerIndex=0),vi(t)}function Ka(t,r){if(vi(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(ps(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)aa(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function wa(t){Ei(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==s.version||(oa(s),a!==s.version))return!0}return!1}function yu(t){if(Ei(t),ps(t))for(let r=0;r<t.producerNode.length;r++)aa(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function aa(t,r){if(function Zr(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Ei(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)aa(t.producerNode[a],t.producerIndexOfThis[a]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],l=t.liveConsumerNode[r];Ei(l),l.producerIndexOfThis[a]=r}}function ps(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ei(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let is=null;function ze(t){const r=vi(null);try{return t()}finally{vi(r)}}const F=()=>{},A=(()=>({...Ea,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:F}))();class X{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function He(){return ot}function ot(t){return t.type.prototype.ngOnChanges&&(t.setInput=qn),tn}function tn(){const t=Si(this),r=t?.current;if(r){const s=t.previous;if(s===Zt)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function qn(t,r,s,a){const l=this.declaredInputs[s],f=Si(t)||function ni(t,r){return t[Qr]=r}(t,{previous:Zt,current:null}),y=f.current||(f.current={}),D=f.previous,O=D[l];y[l]=new X(O&&O.currentValue,r,D===Zt),t[a]=r}He.ngInherit=!0;const Qr="__ngSimpleChanges__";function Si(t){return t[Qr]||null}const qi=function(t,r,s){};function Sr(t){for(;Array.isArray(t);)t=t[dr];return t}function Da(t,r){return Sr(r[t])}function Ps(t,r){return Sr(r[t.index])}function Ya(t,r){return t.data[r]}function Iu(t,r){return t[r]}function An(t,r){const s=r[t];return oi(s)?s:s[dr]}function la(t,r){return null==r?null:t[r]}function at(t){t[$i]=0}function yr(t){1024&t[hn]||(t[hn]|=1024,wu(t,1))}function gs(t){1024&t[hn]&&(t[hn]&=-1025,wu(t,-1))}function wu(t,r){let s=t[Sn];if(null===s)return;s[bo]+=r;let a=s;for(s=s[Sn];null!==s&&(1===r&&1===a[bo]||-1===r&&0===a[bo]);)s[bo]+=r,a=s,s=s[Sn]}const cn={lFrame:Y(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Gu(){return cn.bindingsEnabled}function pl(){return null!==cn.skipHydrationRootTNode}function it(){return cn.lFrame.lView}function Qn(){return cn.lFrame.tView}function ai(t){return cn.lFrame.contextLView=t,t[hr]}function In(t){return cn.lFrame.contextLView=null,t}function Kn(){let t=xl();for(;null!==t&&64===t.type;)t=t.parent;return t}function xl(){return cn.lFrame.currentTNode}function zt(t,r){const s=cn.lFrame;s.currentTNode=t,s.isParent=r}function eu(){return cn.lFrame.isParent}function Bn(){cn.lFrame.isParent=!1}function Oo(){return cn.lFrame.bindingIndex++}function kl(t,r){const s=cn.lFrame;s.bindingIndex=s.bindingRootIndex=t,Ms(r)}function Ms(t){cn.lFrame.currentDirectiveIndex=t}function Bc(){return cn.lFrame.currentQueryIndex}function b(t){cn.lFrame.currentQueryIndex=t}function N(t){const r=t[vt];return 2===r.type?r.declTNode:1===r.type?t[pi]:null}function T(t,r,s){if(s&Kt.SkipSelf){let l=r,f=t;for(;!(l=l.parent,null!==l||s&Kt.Host||(l=N(f),null===l||(f=f[jr],10&l.type))););if(null===l)return!1;r=l,t=f}const a=cn.lFrame=U();return a.currentTNode=r,a.lView=t,!0}function C(t){const r=U(),s=t[vt];cn.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function U(){const t=cn.lFrame,r=null===t?null:t.child;return null===r?Y(t):r}function Y(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function le(){const t=cn.lFrame;return cn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const je=le;function Ue(){const t=le();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Rn(){return cn.lFrame.selectedIndex}function Pn(t){cn.lFrame.selectedIndex=t}function nr(){const t=cn.lFrame;return Ya(t.tView,t.selectedIndex)}let ms=!0;function yl(){return ms}function Tu(t){ms=t}function uc(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const f=t.data[s].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:D,ngAfterViewInit:O,ngAfterViewChecked:H,ngOnDestroy:Q}=f;y&&(t.contentHooks??=[]).push(-s,y),D&&((t.contentHooks??=[]).push(s,D),(t.contentCheckHooks??=[]).push(s,D)),O&&(t.viewHooks??=[]).push(-s,O),H&&((t.viewHooks??=[]).push(s,H),(t.viewCheckHooks??=[]).push(s,H)),null!=Q&&(t.destroyHooks??=[]).push(s,Q)}}function nu(t,r,s){Ku(t,r,3,s)}function Ll(t,r,s,a){(3&t[hn])===s&&Ku(t,r,s,a)}function vl(t,r){let s=t[hn];(3&s)===r&&(s&=8191,s+=1,t[hn]=s)}function Ku(t,r,s,a){const f=a??-1,y=r.length-1;let D=0;for(let O=void 0!==a?65535&t[$i]:0;O<y;O++)if("number"==typeof r[O+1]){if(D=r[O],null!=a&&D>=a)break}else r[O]<0&&(t[$i]+=65536),(D<f||-1==f)&&(Wf(t,s,r,O),t[$i]=(4294901760&t[$i])+O+2),O++}function Vl(t,r){qi(4,t,r);const s=vi(null);try{r.call(t)}finally{vi(s),qi(5,t,r)}}function Wf(t,r,s,a){const l=s[a]<0,f=s[a+1],D=t[l?-s[a]:s[a]];l?t[hn]>>13<t[$i]>>16&&(3&t[hn])===r&&(t[hn]+=8192,Vl(D,f)):Vl(D,f)}const Cu=-1;class ru{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function $c(t){return t!==Cu}function ba(t){return 32767&t}function Du(t,r){let s=function Ph(t){return t>>16}(t),a=r;for(;s>0;)a=a[jr],s--;return a}let lc=!0;function El(t){const r=lc;return lc=t,r}const ss=255,Os=5;let Sa=0;const oo={};function iu(t,r){const s=Cr(t,r);if(-1!==s)return s;const a=r[vt];a.firstCreatePass&&(t.injectorIndex=r.length,Fi(a.data,t),Fi(r,null),Fi(a.blueprint,null));const l=Qu(t,r),f=t.injectorIndex;if($c(l)){const y=ba(l),D=Du(l,r),O=D[vt].data;for(let H=0;H<8;H++)r[f+H]=D[y+H]|O[y+H]}return r[f+8]=l,f}function Fi(t,r){t.push(0,0,0,0,0,0,0,0,r)}function Cr(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Qu(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=Ra(l),null===a)return Cu;if(s++,l=l[jr],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return Cu}function su(t,r,s){!function Pr(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(ls)&&(a=s[ls]),null==a&&(a=s[ls]=Sa++);const l=a&ss;r.data[t+(l>>Os)]|=1<<l}(t,r,s)}function zc(t,r,s){if(s&Kt.Optional||void 0!==t)return t;Et()}function Gc(t,r,s,a){if(s&Kt.Optional&&void 0===a&&(a=null),!(s&(Kt.Self|Kt.Host))){const l=t[ji],f=Vn(void 0);try{return l?l.get(r,a,s&Kt.Optional):Un(r,a,s&Kt.Optional)}finally{Vn(f)}}return zc(a,0,s)}function Ii(t,r,s,a=Kt.Default,l){if(null!==t){if(2048&r[hn]&&!(a&Kt.Self)){const y=function Yu(t,r,s,a,l){let f=t,y=r;for(;null!==f&&null!==y&&2048&y[hn]&&!(512&y[hn]);){const D=Wc(f,y,s,a|Kt.Self,oo);if(D!==oo)return D;let O=f.parent;if(!O){const H=y[Lo];if(H){const Q=H.get(s,oo,a);if(Q!==oo)return Q}O=Ra(y),y=y[jr]}f=O}return l}(t,r,s,a,oo);if(y!==oo)return y}const f=Wc(t,r,s,a,oo);if(f!==oo)return f}return Gc(r,s,a,l)}function Wc(t,r,s,a,l){const f=function cc(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(ls)?t[ls]:void 0;return"number"==typeof r?r>=0?r&ss:Bl:r}(s);if("function"==typeof f){if(!T(r,t,a))return a&Kt.Host?zc(l,0,a):Gc(r,s,a,l);try{let y;if(y=f(a),null!=y||a&Kt.Optional)return y;Et()}finally{je()}}else if("number"==typeof f){let y=null,D=Cr(t,r),O=Cu,H=a&Kt.Host?r[Or][pi]:null;for((-1===D||a&Kt.SkipSelf)&&(O=-1===D?Qu(t,r):r[D+8],O!==Cu&&Il(a,!1)?(y=r[vt],D=ba(O),r=Du(O,r)):D=-1);-1!==D;){const Q=r[vt];if(Au(f,D,Q.data)){const ae=os(D,r,s,y,a,H);if(ae!==oo)return ae}O=r[D+8],O!==Cu&&Il(a,r[vt].data[D+8]===H)&&Au(f,D,r)?(y=Q,D=ba(O),r=Du(O,r)):D=-1}}return l}function os(t,r,s,a,l,f){const y=r[vt],D=y.data[t+8],Q=vr(D,y,s,null==a?bs(D)&&lc:a!=y&&0!=(3&D.type),l&Kt.Host&&f===D);return null!==Q?ao(r,y,Q,D):oo}function vr(t,r,s,a,l){const f=t.providerIndexes,y=r.data,D=1048575&f,O=t.directiveStart,Q=f>>20,Ae=l?D+Q:t.directiveEnd;for(let xe=a?D:D+Q;xe<Ae;xe++){const Xe=y[xe];if(xe<O&&s===Xe||xe>=O&&Xe.type===s)return xe}if(l){const xe=y[O];if(xe&&ns(xe)&&xe.type===s)return O}return null}function ao(t,r,s,a){let l=t[s];const f=r.data;if(function Zu(t){return t instanceof ru}(l)){const y=l;y.resolving&&function Qe(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new ce(-200,`Circular dependency in DI detected for ${t}${s}`)}(function Ge(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ce(t)}(f[s]));const D=El(y.canSeeViewProviders);y.resolving=!0;const H=y.injectImpl?Vn(y.injectImpl):null;T(t,a,Kt.Default);try{l=t[s]=y.factory(void 0,f,t,a),r.firstCreatePass&&s>=a.directiveStart&&function vo(t,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:f}=r.type.prototype;if(a){const y=ot(r);(s.preOrderHooks??=[]).push(t,y),(s.preOrderCheckHooks??=[]).push(t,y)}l&&(s.preOrderHooks??=[]).push(0-t,l),f&&((s.preOrderHooks??=[]).push(t,f),(s.preOrderCheckHooks??=[]).push(t,f))}(s,f[s],r)}finally{null!==H&&Vn(H),El(D),y.resolving=!1,je()}}return l}function Au(t,r,s){return!!(s[r+(t>>Os)]&1<<t)}function Il(t,r){return!(t&Kt.Self||t&Kt.Host&&r)}class ui{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return Ii(this._tNode,this._lView,r,Lt(a),s)}}function Bl(){return new ui(Kn(),it())}function No(t){return Oe(()=>{const r=t.prototype.constructor,s=r[ti]||$o(r),a=Object.prototype;let l=Object.getPrototypeOf(t.prototype).constructor;for(;l&&l!==a;){const f=l[ti]||$o(l);if(f&&f!==s)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function $o(t){return pt(t)?()=>{const r=$o(nt(t));return r&&r()}:bi(t)}function Ra(t){const r=t[vt],s=r.type;return 2===s?r.declTNode:1===s?t[pi]:null}function jl(t){return function _s(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const f=s[l];if(Js(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(f===r)return s[l+1];l+=2}}}return null}(Kn(),t)}const ou="__parameters__";function Pa(t,r,s){return Oe(()=>{const a=function wl(t){return function(...s){if(t){const a=t(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...f){if(this instanceof l)return a.apply(this,f),this;const y=new l(...f);return D.annotation=y,D;function D(O,H,Q){const ae=O.hasOwnProperty(ou)?O[ou]:Object.defineProperty(O,ou,{value:[]})[ou];for(;ae.length<=Q;)ae.push(null);return(ae[Q]=ae[Q]||[]).push(y),O}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=t,l.annotationCls=l,l})}function Tl(t,r){t.forEach(s=>Array.isArray(s)?Tl(s,r):r(s))}function zl(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function xn(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function pr(t,r){const s=[];for(let a=0;a<t;a++)s.push(r);return s}function lo(t,r,s){let a=Ma(t,r);return a>=0?t[1|a]=s:(a=~a,function Zc(t,r,s,a){let l=t.length;if(l==r)t.push(s,a);else if(1===l)t.push(a,t[0]),t[0]=s;else{for(l--,t.push(t[l-1],t[l]);l>r;)t[l]=t[l-2],l--;t[r]=s,t[r+1]=a}}(t,a,r,s)),a}function Xu(t,r){const s=Ma(t,r);if(s>=0)return t[1|s]}function Ma(t,r){return function Ud(t,r,s){let a=0,l=t.length>>s;for(;l!==a;){const f=a+(l-a>>1),y=t[f<<s];if(r===y)return f<<s;y>r?l=f:a=f+1}return~(l<<s)}(t,r,1)}const xo=Ci(Pa("Optional"),8),uu=Ci(Pa("SkipSelf"),4);function jn(t){return 128==(128&t.flags)}var Mn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Mn||{});const xs=new Map;let gr=0;const bn="__ngContext__";function sr(t,r){oi(r)?(t[bn]=r[Us],function xa(t){xs.set(t[Us],t)}(r)):t[bn]=r}let $d;function Fa(t,r){return $d(t,r)}function Ql(t){const r=t[Sn];return fr(r)?r[Sn]:r}function sd(t){return yc(t[gi])}function zd(t){return yc(t[Kr])}function yc(t){for(;null!==t&&!fr(t);)t=t[Kr];return t}function Pu(t,r,s,a,l){if(null!=a){let f,y=!1;fr(a)?f=a:oi(a)&&(y=!0,a=a[dr]);const D=Sr(a);0===t&&null!==s?null==l?Yl(r,s,D):rl(r,s,D,l||null,!0):1===t&&null!==s?rl(r,s,D,l||null,!0):2===t?function Uh(t,r,s){const a=Mu(t,r);a&&function Wd(t,r,s,a){t.removeChild(r,s,a)}(t,a,r,s)}(r,D,y):3===t&&r.destroyNode(D),null!=f&&function Ec(t,r,s,a,l){const f=s[hs];f!==Sr(s)&&Pu(r,t,a,f,l);for(let D=si;D<s.length;D++){const O=s[D];Bh(O[vt],O,t,r,a,f)}}(r,t,f,s,l)}}function p(t,r,s){return t.createElement(r,s)}function Nt(t,r){const s=t[_i],a=s.indexOf(r);gs(r),s.splice(a,1)}function Yt(t,r){if(t.length<=si)return;const s=si+r,a=t[s];if(a){const l=a[tr];null!==l&&l!==t&&Nt(l,a),r>0&&(t[s-1][Kr]=a[Kr]);const f=xn(t,si+r);!function I(t,r){Bh(t,r,r[$t],2,null,null),r[dr]=null,r[pi]=null}(a[vt],a);const y=f[mi];null!==y&&y.detachView(f[vt]),a[Sn]=null,a[Kr]=null,a[hn]&=-129}return a}function Wt(t,r){if(!(256&r[hn])){const s=r[$t];r[Bs]&&yu(r[Bs]),r[zi]&&yu(r[zi]),s.destroyNode&&Bh(t,r,s,3,null,null),function ge(t){let r=t[gi];if(!r)return Lr(t[vt],t);for(;r;){let s=null;if(oi(r))s=r[gi];else{const a=r[si];a&&(s=a)}if(!s){for(;r&&!r[Kr]&&r!==t;)oi(r)&&Lr(r[vt],r),r=r[Sn];null===r&&(r=t),oi(r)&&Lr(r[vt],r),s=r&&r[Kr]}r=s}}(r)}}function Lr(t,r){if(!(256&r[hn])){r[hn]&=-129,r[hn]|=256,function Gd(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof ru)){const f=s[a+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const D=l[f[y]],O=f[y+1];qi(4,D,O);try{O.call(D)}finally{qi(5,D,O)}}else{qi(4,l,f);try{f.call(l)}finally{qi(5,l,f)}}}}}(t,r),function La(t,r){const s=t.cleanup,a=r[to];if(null!==s)for(let f=0;f<s.length-1;f+=2)if("string"==typeof s[f]){const y=s[f+3];y>=0?a[y]():a[-y].unsubscribe(),f+=2}else s[f].call(a[s[f+1]]);null!==a&&(r[to]=null);const l=r[Ds];if(null!==l){r[Ds]=null;for(let f=0;f<l.length;f++)(0,l[f])()}}(t,r),1===r[vt].type&&r[$t].destroy();const s=r[tr];if(null!==s&&fr(r[Sn])){s!==r[Sn]&&Nt(s,r);const a=r[mi];null!==a&&a.detachView(t)}!function wo(t){xs.delete(t[Us])}(r)}}function Mi(t,r,s){return function vc(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[dr];{const{componentOffset:l}=a;if(l>-1){const{encapsulation:f}=t.data[a.directiveStart+l];if(f===Ht.None||f===Ht.Emulated)return null}return Ps(a,s)}}(t,r.parent,s)}function rl(t,r,s,a,l){t.insertBefore(r,s,a,l)}function Yl(t,r,s){t.appendChild(r,s)}function ga(t,r,s,a,l){null!==a?rl(t,r,s,a,l):Yl(t,r,s)}function Mu(t,r){return t.parentNode(r)}function Fh(t,r,s){return Xf(t,r,s)}let Cg,Jl,Jd,Xf=function od(t,r,s){return 40&t.type?Ps(t,s):null};function Kd(t,r,s,a){const l=Mi(t,a,r),f=r[$t],D=Fh(a.parent||r[pi],a,r);if(null!=l)if(Array.isArray(s))for(let O=0;O<s.length;O++)ga(f,l,s[O],D,!1);else ga(f,l,s,D,!1);void 0!==Cg&&Cg(f,a,r,s,l)}function Lh(t,r){if(null!==r){const s=r.type;if(3&s)return Ps(r,t);if(4&s)return Vh(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return Lh(t,a);{const l=t[r.index];return fr(l)?Vh(-1,l):Sr(l)}}if(32&s)return Fa(r,t)()||Sr(t[r.index]);{const a=Dg(t,r);return null!==a?Array.isArray(a)?a[0]:Lh(Ql(t[Or]),a):Lh(t,r.next)}}return null}function Dg(t,r){return null!==r?t[Or][pi].projection[r.projection]:null}function Vh(t,r){const s=si+t+1;if(s<r.length){const a=r[s],l=a[vt].firstChild;if(null!==l)return Lh(a,l)}return r[hs]}function ep(t,r,s,a,l,f,y){for(;null!=s;){const D=a[s.index],O=s.type;if(y&&0===r&&(D&&sr(Sr(D),a),s.flags|=2),32!=(32&s.flags))if(8&O)ep(t,r,s.child,a,l,f,!1),Pu(r,t,l,D,f);else if(32&O){const H=Fa(s,a);let Q;for(;Q=H();)Pu(r,t,l,Q,f);Pu(r,t,l,D,f)}else 16&O?R_(t,r,a,s,l,f):Pu(r,t,l,D,f);s=y?s.projectionNext:s.next}}function Bh(t,r,s,a,l,f){ep(s,a,t.firstChild,r,l,f,!1)}function R_(t,r,s,a,l,f){const y=s[Or],O=y[pi].projection[a.projection];if(Array.isArray(O))for(let H=0;H<O.length;H++)Pu(r,t,l,O[H],f);else{let H=O;const Q=y[Sn];jn(a)&&(H.flags|=128),ep(t,r,H,Q,l,f,!0)}}function M_(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function Ag(t,r,s){const{mergedAttrs:a,classes:l,styles:f}=s;null!==a&&Ys(t,r,a),null!==l&&M_(t,r,l),null!==f&&function P_(t,r,s){t.setAttribute(r,"style",s)}(t,r,f)}function jh(t){Jl=t}function N_(t){return function Hh(){if(void 0===Jd&&(Jd=null,zn.trustedTypes))try{Jd=zn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Jd}()?.createScriptURL(t)||t}class Rg{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ie})`}}function Xl(t){return t instanceof Rg?t.changingThisBreaksApplicationSecurity:t}function zh(t,r){const s=function kv(t){return t instanceof Rg&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${Ie})`)}return s===r}const Og=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Nu=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Nu||{});function lp(t){const r=th();return r?r.sanitize(Nu.URL,t)||"":zh(t,"URL")?Xl(t):function sp(t){return(t=String(t)).match(Og)?t:"unsafe:"+t}(Ce(t))}function ec(t){const r=th();if(r)return N_(r.sanitize(Nu.RESOURCE_URL,t)||"");if(zh(t,"ResourceURL"))return N_(Xl(t));throw new ce(904,!1)}function Fg(t,r,s){return function Bv(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?ec:lp}(r,s)(t)}function th(){const t=it();return t&&t[Hi].sanitizer}const Zh=new kt("ENVIRONMENT_INITIALIZER"),Vg=new kt("INJECTOR",-1),$_=new kt("INJECTOR_DEF_TYPES");class cp{get(r,s=rr){if(s===rr){const a=new Error(`NullInjectorError: No provider for ${De(r)}!`);throw a.name="NullInjectorError",a}return s}}function tc(t){return{\u0275providers:t}}function Qh(...t){return{\u0275providers:Ug(0,t),\u0275fromNgModule:!0}}function Ug(t,...r){const s=[],a=new Set;let l;const f=y=>{s.push(y)};return Tl(r,y=>{const D=y;dp(D,f,[],a)&&(l||=[],l.push(D))}),void 0!==l&&Bg(l,f),s}function Bg(t,r){for(let s=0;s<t.length;s++){const{ngModule:a,providers:l}=t[s];jg(l,f=>{r(f,a)})}}function dp(t,r,s,a){if(!(t=nt(t)))return!1;let l=null,f=Vr(t);const y=!f&&Tn(t);if(f||y){if(y&&!y.standalone)return!1;l=t}else{const O=t.ngModule;if(f=Vr(O),!f)return!1;l=O}const D=a.has(l);if(y){if(D)return!1;if(a.add(l),y.dependencies){const O="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const H of O)dp(H,r,s,a)}}else{if(!f)return!1;{if(null!=f.imports&&!D){let H;a.add(l);try{Tl(f.imports,Q=>{dp(Q,r,s,a)&&(H||=[],H.push(Q))})}finally{}void 0!==H&&Bg(H,r)}if(!D){const H=bi(l)||(()=>new l);r({provide:l,useFactory:H,deps:Tt},l),r({provide:$_,useValue:l,multi:!0},l),r({provide:Zh,useValue:()=>Jt(l),multi:!0},l)}const O=f.providers;if(null!=O&&!D){const H=t;jg(O,Q=>{r(Q,H)})}}}return l!==t&&void 0!==t.providers}function jg(t,r){for(let s of t)ut(s)&&(s=s.\u0275providers),Array.isArray(s)?jg(s,r):r(s)}const Hv=ue({provide:String,useValue:ue});function Yh(t){return null!==t&&"object"==typeof t&&Hv in t}function hd(t){return"function"==typeof t}const Hg=new kt("Set Injector scope."),nh={},zv={};let rh;function fd(){return void 0===rh&&(rh=new cp),rh}class bl{}class pd extends bl{get destroyed(){return this._destroyed}constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gg(r,y=>this.processProvider(y)),this.records.set(Vg,Cc(void 0,this)),l.has("environment")&&this.records.set(bl,Cc(void 0,this));const f=this.records.get(Hg);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get($_.multi,Tt,Kt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=Ze(this),a=Vn(void 0);try{return r()}finally{Ze(s),Vn(a)}}get(r,s=rr,a=Kt.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(Do))return r[Do](this);a=Lt(a);const f=Ze(this),y=Vn(void 0);try{if(!(a&Kt.SkipSelf)){let O=this.records.get(r);if(void 0===O){const H=function G_(t){return"function"==typeof t||"object"==typeof t&&t instanceof kt}(r)&&yn(r);O=H&&this.injectableDefInScope(H)?Cc(Jh(r),nh):null,this.records.set(r,O)}if(null!=O)return this.hydrate(r,O)}return(a&Kt.Self?fd():this.parent).get(r,s=a&Kt.Optional&&s===rr?null:s)}catch(D){if("NullInjectorError"===D.name){if((D[us]=D[us]||[]).unshift(De(r)),f)throw D;return function Ua(t,r,s,a){const l=t[us];throw r[J]&&l.unshift(r[J]),t.message=function qe(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let l=De(r);if(Array.isArray(r))l=r.map(De).join(" -> ");else if("object"==typeof r){let f=[];for(let y in r)if(r.hasOwnProperty(y)){let D=r[y];f.push(y+":"+("string"==typeof D?JSON.stringify(D):De(D)))}l=`{${f.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${t.replace(ee,"\n  ")}`}("\n"+t.message,l,s,a),t.ngTokenPath=l,t[us]=null,t}(D,r,"R3InjectorError",this.source)}throw D}finally{Vn(y),Ze(f)}}resolveInjectorInitializers(){const r=Ze(this),s=Vn(void 0);try{const l=this.get(Zh.multi,Tt,Kt.Self);for(const f of l)f()}finally{Ze(r),Vn(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(De(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ce(205,!1)}processProvider(r){let s=hd(r=nt(r))?r:nt(r&&r.provide);const a=function Xh(t){return Yh(t)?Cc(void 0,t.useValue):Cc(ef(t),nh)}(r);if(hd(r)||!0!==r.multi)this.records.get(s);else{let l=this.records.get(s);l||(l=Cc(void 0,nh,!0),l.factory=()=>cr(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===nh&&(s.value=zv,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Gv(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=nt(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function Jh(t){const r=yn(t),s=null!==r?r.factory:bi(t);if(null!==s)return s;if(t instanceof kt)throw new ce(204,!1);if(t instanceof Function)return function $g(t){const r=t.length;if(r>0)throw pr(r,"?"),new ce(204,!1);const s=function En(t){return t&&(t[Xn]||t[Oi])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new ce(204,!1)}function ef(t,r,s){let a;if(hd(t)){const l=nt(t);return bi(l)||Jh(l)}if(Yh(t))a=()=>nt(t.useValue);else if(function z_(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...cr(t.deps||[]));else if(function po(t){return!(!t||!t.useExisting)}(t))a=()=>Jt(nt(t.useExisting));else{const l=nt(t&&(t.useClass||t.provide));if(!function zg(t){return!!t.deps}(t))return bi(l)||Jh(l);a=()=>new l(...cr(t.deps))}return a}function Cc(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function Gg(t,r){for(const s of t)Array.isArray(s)?Gg(s,r):s&&ut(s)?Gg(s.\u0275providers,r):r(s)}const Wg=new kt("AppId",{providedIn:"root",factory:()=>W_}),W_="ng",hp=new kt("Platform Initializer"),qg=new kt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),qv=new kt("AnimationModuleType"),q_=new kt("CSP nonce",{providedIn:"root",factory:()=>function ud(){if(void 0!==Jl)return Jl;if(typeof document<"u")return document;throw new ce(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let yp=(t,r,s)=>null;function vp(t,r,s=!1){return yp(t,r,s)}class Yv{}class Z_{}class Xv{resolveComponentFactory(r){throw function Jv(t){const r=Error(`No component factory found for ${De(t)}.`);return r.ngComponent=t,r}(r)}}let Tp=(()=>{class t{static#e=this.NULL=new Xv}return t})();function df(){return Dc(Kn(),it())}function Dc(t,r){return new Sl(Ps(t,r))}let Sl=(()=>{class t{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=df}return t})();function Yg(t){return t instanceof Sl?t.nativeElement:t}class hf{}let ff=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Jg(){const t=it(),s=An(Kn().index,t);return(oi(s)?s:t)[$t]}()}return t})(),J_=(()=>{class t{static#e=this.\u0275prov=en({token:t,providedIn:"root",factory:()=>null})}return t})();class Cp{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Dp=new Cp("16.2.12"),Rl={};function bp(t,r=null,s=null,a){const l=ty(t,r,s,a);return l.resolveInjectorInitializers(),l}function ty(t,r=null,s=null,a,l=new Set){const f=[s||Tt,Qh(t)];return a=a||("object"==typeof t?void 0:De(t)),new pd(f,r||fd(),a||null,l)}let sl=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=rr;static#t=this.NULL=new cp;static create(s,a){if(Array.isArray(s))return bp({name:""},a,s,"");{const l=s.name??"";return bp({name:l},s.parent,s.providers,l)}}static#n=this.\u0275prov=en({token:t,providedIn:"any",factory:()=>Jt(Vg)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function im(t){return t.ngOriginalError}class Pl{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&im(r);for(;s&&im(s);)s=im(s);return s||null}}function um(t){return r=>{setTimeout(t,void 0,r)}}const xu=class am extends w.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,f=s||(()=>null),y=a;if(r&&"object"==typeof r){const O=r;l=O.next?.bind(O),f=O.error?.bind(O),y=O.complete?.bind(O)}this.__isAsync&&(f=um(f),l&&(l=um(l)),y&&(y=um(y)));const D=super.subscribe({next:l,error:f,complete:y});return r instanceof W.w0&&r.add(D),D}};function lm(...t){}class Zs{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xu(!1),this.onMicrotaskEmpty=new xu(!1),this.onStable=new xu(!1),this.onError=new xu(!1),typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function cm(){const t="function"==typeof zn.requestAnimationFrame;let r=zn[t?"requestAnimationFrame":"setTimeout"],s=zn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&s){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function lh(t){const r=()=>{!function dm(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(zn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ac(t),t.isCheckStableRunning=!0,Ml(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ac(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,f,y,D)=>{if(function fm(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(D))return s.invokeTask(l,f,y,D);try{return hm(t),s.invokeTask(l,f,y,D)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&r(),vd(t)}},onInvoke:(s,a,l,f,y,D,O)=>{try{return hm(t),s.invoke(l,f,y,D,O)}finally{t.shouldCoalesceRunChangeDetection&&r(),vd(t)}},onHasTask:(s,a,l,f)=>{s.hasTask(l,f),a===l&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,Ac(t),Ml(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(s,a,l,f)=>(s.handleError(l,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zs.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(Zs.isInAngularZone())throw new ce(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+l,r,uh,lm,lm);try{return f.runTask(y,s,a)}finally{f.cancelTask(y)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const uh={};function Ml(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ac(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function hm(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function vd(t){t._nesting--,Ml(t)}class rE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xu,this.onMicrotaskEmpty=new xu,this.onStable=new xu,this.onError=new xu}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}const ry=new kt("",{providedIn:"root",factory:Sp});function Sp(){const t=Dt(Zs);let r=!0;const s=new ie.y(l=>{r=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{l.next(r),l.complete()})}),a=new ie.y(l=>{let f;t.runOutsideAngular(()=>{f=t.onStable.subscribe(()=>{Zs.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(r=!0,l.next(!0))})})});const y=t.onUnstable.subscribe(()=>{Zs.assertInAngularZone(),r&&(r=!1,t.runOutsideAngular(()=>{l.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,Ee.T)(s,a.pipe((0,Re.B)()))}function Rp(t){return t.ownerDocument}function ol(t){return t instanceof Function?t():t}let Pp=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=en({token:t,providedIn:"root",factory:()=>new t})}return t})();function dh(t){for(;t;){t[hn]|=64;const r=Ql(t);if(_a(t)&&!r)return t;t=r}return null}const uy=new kt("",{providedIn:"root",factory:()=>!1});let Np=null;function xp(t,r){return t[r]??kp()}function cy(t,r){const s=kp();s.producerNode?.length&&(t[r]=Np,s.lView=t,Np=dy())}const Em={...Ea,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{dh(t.lView)},lView:null};function dy(){return Object.create(Em)}function kp(){return Np??=dy(),Np}const kn={};function Fp(t){Lp(Qn(),it(),Rn()+t,!1)}function Lp(t,r,s,a){if(!a)if(3==(3&r[hn])){const f=t.preOrderCheckHooks;null!==f&&nu(r,f,s)}else{const f=t.preOrderHooks;null!==f&&Ll(r,f,0,s)}Pn(s)}function Sc(t,r=Kt.Default){const s=it();return null===s?Jt(t,r):Ii(Kn(),s,nt(t),r)}function Ed(){throw new Error("invalid")}function hh(t,r,s,a,l,f,y,D,O,H,Q){const ae=r.blueprint.slice();return ae[dr]=l,ae[hn]=140|a,(null!==H||t&&2048&t[hn])&&(ae[hn]|=2048),at(ae),ae[Sn]=ae[jr]=t,ae[hr]=s,ae[Hi]=y||t&&t[Hi],ae[$t]=D||t&&t[$t],ae[ji]=O||t&&t[ji]||null,ae[pi]=f,ae[Us]=function Kl(){return gr++}(),ae[es]=Q,ae[Lo]=H,ae[Or]=2==r.type?t[Or]:ae,ae}function fh(t,r,s,a,l){let f=t.data[r];if(null===f)f=function _f(t,r,s,a,l){const f=xl(),y=eu(),O=t.data[r]=function Dm(t,r,s,a,l,f){let y=r?r.injectorIndex:-1,D=0;return pl()&&(D|=128),{type:s,index:a,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:D,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,s,r,a,l);return null===t.firstChild&&(t.firstChild=O),null!==f&&(y?null==f.child&&null!==O.parent&&(f.child=O):null===f.next&&(f.next=O,O.prev=f)),O}(t,r,s,a,l),function gl(){return cn.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=s,f.value=a,f.attrs=l;const y=function Tr(){const t=cn.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return zt(f,!0),f}function du(t,r,s,a){if(0===s)return-1;const l=r.length;for(let f=0;f<s;f++)r.push(a),t.blueprint.push(a),t.data.push(null);return l}function Vp(t,r,s,a,l){const f=xp(r,Bs),y=Rn(),D=2&a;try{Pn(-1),D&&r.length>Dn&&Lp(t,r,Dn,!1),qi(D?2:0,l);const H=D?f:null,Q=ro(H);try{null!==H&&(H.dirty=!1),s(a,l)}finally{Ka(H,Q)}}finally{D&&null===r[Bs]&&cy(r,Bs),Pn(y),qi(D?3:1,l)}}function Im(t,r,s){if(As(r)){const a=vi(null);try{const f=r.directiveEnd;for(let y=r.directiveStart;y<f;y++){const D=t.data[y];D.contentQueries&&D.contentQueries(1,s[y],y)}}finally{vi(a)}}}function yf(t,r,s){Gu()&&(function _y(t,r,s,a){const l=s.directiveStart,f=s.directiveEnd;bs(s)&&function Nm(t,r,s){const a=Ps(r,t),l=fy(s);let y=16;s.signals?y=4096:s.onPush&&(y=64);const D=wf(t,hh(t,l,null,y,a,r,null,t[Hi].rendererFactory.createRenderer(a,s),null,null,null));t[r.index]=D}(r,s,t.data[l+s.componentOffset]),t.firstCreatePass||iu(s,r),sr(a,r);const y=s.initialInputs;for(let D=l;D<f;D++){const O=t.data[D],H=ao(r,t,D,s);sr(H,r),null!==y&&vy(0,D-l,H,O,0,y),ns(O)&&(An(s.index,r)[hr]=ao(r,t,D,s))}}(t,r,s,Ps(s,r)),64==(64&s.flags)&&Id(t,r,s))}function wm(t,r,s=Ps){const a=r.localNames;if(null!==a){let l=r.index+1;for(let f=0;f<a.length;f+=2){const y=a[f+1],D=-1===y?s(r,t):t[y];t[l++]=D}}}function fy(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=vf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function vf(t,r,s,a,l,f,y,D,O,H,Q){const ae=Dn+a,Ae=ae+l,xe=function uE(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:kn);return s}(ae,Ae),Xe="function"==typeof H?H():H;return xe[vt]={type:t,blueprint:xe,template:s,queries:null,viewQuery:D,declTNode:r,data:xe.slice().fill(null,ae),bindingStartIndex:ae,expandoStartIndex:Ae,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:O,consts:Xe,incompleteFirstPass:!1,ssrId:Q}}let Up=t=>null;function Am(t,r,s,a){for(let l in t)if(t.hasOwnProperty(l)){s=null===s?{}:s;const f=t[l];null===a?gy(s,r,l,f):a.hasOwnProperty(l)&&gy(s,r,a[l],f)}return s}function gy(t,r,s,a){t.hasOwnProperty(s)?t[s].push(r,a):t[s]=[r,a]}function Pm(t,r,s,a){if(Gu()){const l=null===a?null:{"":-1},f=function Bp(t,r){const s=t.directiveRegistry;let a=null,l=null;if(s)for(let f=0;f<s.length;f++){const y=s[f];if(hi(r,y.selectors,!1))if(a||(a=[]),ns(y))if(null!==y.findHostDirectiveDefs){const D=[];l=l||new Map,y.findHostDirectiveDefs(y,D,l),a.unshift(...D,y),Om(t,r,D.length)}else a.unshift(y),Om(t,r,0);else l=l||new Map,y.findHostDirectiveDefs?.(y,a,l),a.push(y)}return null===a?null:[a,l]}(t,s);let y,D;null===f?y=D=null:[y,D]=f,null!==y&&ph(t,r,s,y,l,D),l&&function fE(t,r,s){if(r){const a=t.localNames=[];for(let l=0;l<r.length;l+=2){const f=s[r[l+1]];if(null==f)throw new ce(-301,!1);a.push(r[l],f)}}}(s,a,l)}s.mergedAttrs=Fn(s.mergedAttrs,s.attrs)}function ph(t,r,s,a,l,f){for(let H=0;H<a.length;H++)su(iu(s,r),t,a[H].type);!function gE(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,a.length);for(let H=0;H<a.length;H++){const Q=a[H];Q.providersResolver&&Q.providersResolver(Q)}let y=!1,D=!1,O=du(t,r,a.length,null);for(let H=0;H<a.length;H++){const Q=a[H];s.mergedAttrs=Fn(s.mergedAttrs,Q.hostAttrs),jp(t,s,r,O,Q),pE(O,Q,l),null!==Q.contentQueries&&(s.flags|=4),(null!==Q.hostBindings||null!==Q.hostAttrs||0!==Q.hostVars)&&(s.flags|=64);const ae=Q.type.prototype;!y&&(ae.ngOnChanges||ae.ngOnInit||ae.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),y=!0),!D&&(ae.ngOnChanges||ae.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),D=!0),O++}!function dE(t,r,s){const l=r.directiveEnd,f=t.data,y=r.attrs,D=[];let O=null,H=null;for(let Q=r.directiveStart;Q<l;Q++){const ae=f[Q],Ae=s?s.get(ae):null,Xe=Ae?Ae.outputs:null;O=Am(ae.inputs,Q,O,Ae?Ae.inputs:null),H=Am(ae.outputs,Q,H,Xe);const mt=null===O||null===y||Ao(r)?null:xm(O,Q,y);D.push(mt)}null!==O&&(O.hasOwnProperty("class")&&(r.flags|=8),O.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=D,r.inputs=O,r.outputs=H}(t,s,f)}function Id(t,r,s){const a=s.directiveStart,l=s.directiveEnd,f=s.index,y=function ml(){return cn.lFrame.currentDirectiveIndex}();try{Pn(f);for(let D=a;D<l;D++){const O=t.data[D],H=r[D];Ms(D),(null!==O.hostBindings||0!==O.hostVars||null!==O.hostAttrs)&&yy(O,H)}}finally{Pn(-1),Ms(y)}}function yy(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function Om(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function pE(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;ns(r)&&(s[""]=t)}}function jp(t,r,s,a,l){t.data[a]=l;const f=l.factory||(l.factory=bi(l.type)),y=new ru(f,ns(l),Sc);t.blueprint[a]=y,s[a]=y,function hE(t,r,s,a,l){const f=l.hostBindings;if(f){let y=t.hostBindingOpCodes;null===y&&(y=t.hostBindingOpCodes=[]);const D=~r.index;(function Mm(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(y)!=D&&y.push(D),y.push(s,a,f)}}(t,r,a,du(t,s,l.hostVars,kn),l)}function ku(t,r,s,a,l,f){const y=Ps(t,r);!function Ef(t,r,s,a,l,f,y){if(null==f)t.removeAttribute(r,l,s);else{const D=null==y?Ce(f):y(f,a||"",l);t.setAttribute(r,l,D,s)}}(r[$t],y,f,t.value,s,a,l)}function vy(t,r,s,a,l,f){const y=f[r];if(null!==y)for(let D=0;D<y.length;)Hp(a,s,y[D++],y[D++],y[D++])}function Hp(t,r,s,a,l){const f=vi(null);try{const y=t.inputTransforms;null!==y&&y.hasOwnProperty(a)&&(l=y[a].call(r,l)),null!==t.setInput?t.setInput(r,l,s,a):r[a]=l}finally{vi(f)}}function xm(t,r,s){let a=null,l=0;for(;l<s.length;){const f=s[l];if(0!==f)if(5!==f){if("number"==typeof f)break;if(t.hasOwnProperty(f)){null===a&&(a=[]);const y=t[f];for(let D=0;D<y.length;D+=2)if(y[D]===r){a.push(f,y[D+1],s[l+1]);break}}l+=2}else l+=2;else l+=4}return a}function If(t,r,s,a){return[t,!0,!1,r,null,0,a,s,null,null,null]}function $p(t,r){const s=t.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const f=s[a+1];if(-1!==f){const y=t.data[f];b(s[a]),y.contentQueries(2,r[f],f)}}}function wf(t,r){return t[gi]?t[ea][Kr]=r:t[gi]=r,t[ea]=r,r}function Rc(t,r,s){b(0);const a=vi(null);try{r(t,s)}finally{vi(a)}}function zp(t){return t[to]||(t[to]=[])}function km(t){return t.cleanup||(t.cleanup=[])}function Gp(t,r){const s=t[ji],a=s?s.get(Pl,null):null;a&&a.handleError(r)}function Fm(t,r,s,a,l){for(let f=0;f<s.length;){const y=s[f++],D=s[f++];Hp(t.data[y],r[y],a,D,l)}}function _E(t,r){const s=An(r,t),a=s[vt];!function Ey(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(a,s);const l=s[dr];null!==l&&null===s[es]&&(s[es]=vp(l,s[ji])),Lm(a,s,s[hr])}function Lm(t,r,s){C(r);try{const a=t.viewQuery;null!==a&&Rc(1,a,s);const l=t.template;null!==l&&Vp(t,r,l,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&$p(t,r),t.staticViewQueries&&Rc(2,t.viewQuery,s);const f=t.components;null!==f&&function Iy(t,r){for(let s=0;s<r.length;s++)_E(t,r[s])}(r,f)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[hn]&=-5,Ue()}}let wy=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(s,a,l){const f=typeof Zone>"u"?null:Zone.current,y=function M(t,r,s){const a=Object.create(A);s&&(a.consumerAllowSignalWrites=!0),a.fn=t,a.schedule=r;const l=y=>{a.cleanupFn=y};return a.ref={notify:()=>So(a),run:()=>{if(a.dirty=!1,a.hasRun&&!wa(a))return;a.hasRun=!0;const y=ro(a);try{a.cleanupFn(),a.cleanupFn=F,a.fn(l)}finally{Ka(a,y)}},cleanup:()=>a.cleanupFn()},a.ref}(s,H=>{this.all.has(H)&&this.queue.set(H,f)},l);let D;this.all.add(y),y.notify();const O=()=>{y.cleanup(),D?.(),this.all.delete(y),this.queue.delete(y)};return D=a?.onDestroy(O),{destroy:O}}flush(){if(0!==this.queue.size)for(const[s,a]of this.queue)this.queue.delete(s),a?a.run(()=>s.run()):s.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=en({token:t,providedIn:"root",factory:()=>new t})}return t})();function Wp(t,r,s){let a=s?t.styles:null,l=s?t.classes:null,f=0;if(null!==r)for(let y=0;y<r.length;y++){const D=r[y];"number"==typeof D?f=D:1==f?l=et(l,D):2==f&&(a=et(a,D+": "+r[++y]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=l:t.classesWithoutHost=l}function Tf(t,r,s,a,l=!1){for(;null!==s;){const f=r[s.index];null!==f&&a.push(Sr(f)),fr(f)&&Ty(f,a);const y=s.type;if(8&y)Tf(t,r,s.child,a);else if(32&y){const D=Fa(s,r);let O;for(;O=D();)a.push(O)}else if(16&y){const D=Dg(r,s);if(Array.isArray(D))a.push(...D);else{const O=Ql(r[Or]);Tf(O[vt],O,D,a,!0)}}s=l?s.projectionNext:s.next}return a}function Ty(t,r){for(let s=si;s<t.length;s++){const a=t[s],l=a[vt].firstChild;null!==l&&Tf(a[vt],a,l,r)}t[hs]!==t[dr]&&r.push(t[hs])}function qp(t,r,s,a=!0){const l=r[Hi],f=l.rendererFactory,y=l.afterRenderEventManager;f.begin?.(),y?.begin();try{Kp(t,r,t.template,s)}catch(O){throw a&&Gp(r,O),O}finally{f.end?.(),l.effectManager?.flush(),y?.end()}}function Kp(t,r,s,a){const l=r[hn];if(256!=(256&l)){r[Hi].effectManager?.flush(),C(r);try{at(r),function Aa(t){return cn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&Vp(t,r,s,2,a);const y=3==(3&l);if(y){const H=t.preOrderCheckHooks;null!==H&&nu(r,H,null)}else{const H=t.preOrderHooks;null!==H&&Ll(r,H,0,null),vl(r,0)}if(function Dy(t){for(let r=sd(t);null!==r;r=zd(r)){if(!r[na])continue;const s=r[_i];for(let a=0;a<s.length;a++){yr(s[a])}}}(r),Vm(r,2),null!==t.contentQueries&&$p(t,r),y){const H=t.contentCheckHooks;null!==H&&nu(r,H)}else{const H=t.contentHooks;null!==H&&Ll(r,H,1),vl(r,1)}!function hy(t,r){const s=t.hostBindingOpCodes;if(null===s)return;const a=xp(r,zi);try{for(let l=0;l<s.length;l++){const f=s[l];if(f<0)Pn(~f);else{const y=f,D=s[++l],O=s[++l];kl(D,y),a.dirty=!1;const H=ro(a);try{O(2,r[y])}finally{Ka(a,H)}}}}finally{null===r[zi]&&cy(r,zi),Pn(-1)}}(t,r);const D=t.components;null!==D&&or(r,D,0);const O=t.viewQuery;if(null!==O&&Rc(2,O,a),y){const H=t.viewCheckHooks;null!==H&&nu(r,H)}else{const H=t.viewHooks;null!==H&&Ll(r,H,2),vl(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[hn]&=-73,gs(r)}finally{Ue()}}}function Vm(t,r){for(let s=sd(t);null!==s;s=zd(s))for(let a=si;a<s.length;a++)Cf(s[a],r)}function Ay(t,r,s){Cf(An(r,t),s)}function Cf(t,r){if(!function Ki(t){return 128==(128&t[hn])}(t))return;const s=t[vt],a=t[hn];if(80&a&&0===r||1024&a||2===r)Kp(s,t,s.template,t[hr]);else if(t[bo]>0){Vm(t,1);const l=s.components;null!==l&&or(t,l,1)}}function or(t,r,s){for(let a=0;a<r.length;a++)Ay(t,r[a],s)}class gh{get rootNodes(){const r=this._lView,s=r[vt];return Tf(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[hr]}set context(r){this._lView[hr]=r}get destroyed(){return 256==(256&this._lView[hn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Sn];if(fr(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Yt(r,a),xn(s,a))}this._attachedToViewContainer=!1}Wt(this._lView[vt],this._lView)}onDestroy(r){!function Vt(t,r){if(256==(256&t[hn]))throw new ce(911,!1);null===t[Ds]&&(t[Ds]=[]),t[Ds].push(r)}(this._lView,r)}markForCheck(){dh(this._cdRefInjectingView||this._lView)}detach(){this._lView[hn]&=-129}reattach(){this._lView[hn]|=128}detectChanges(){qp(this._lView[vt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Z(t,r){Bh(t,r,r[$t],2,null,null)}(this._lView[vt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=r}}class by extends gh{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;qp(r[vt],r,r[hr],!1)}checkNoChanges(){}get context(){return null}}class mh extends Tp{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Tn(r);return new Va(s,this.ngModule)}}function Um(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class Vi{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){a=Lt(a);const l=this.injector.get(r,Rl,a);return l!==Rl||s===Rl?l:this.parentInjector.get(r,s,a)}}class Va extends Z_{get inputs(){const r=this.componentDef,s=r.inputTransforms,a=Um(r.inputs);if(null!==s)for(const l of a)s.hasOwnProperty(l.propName)&&(l.transform=s[l.propName]);return a}get outputs(){return Um(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function fi(t){return t.map(mu).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,a,l){let f=(l=l||this.ngModule)instanceof bl?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new Vi(r,f):r,D=y.get(hf,null);if(null===D)throw new ce(407,!1);const ae={rendererFactory:D,sanitizer:y.get(J_,null),effectManager:y.get(wy,null),afterRenderEventManager:y.get(Pp,null)},Ae=D.createRenderer(null,this.componentDef),xe=this.componentDef.selectors[0][0]||"div",Xe=a?function Tm(t,r,s,a){const f=a.get(uy,!1)||s===Ht.ShadowDom,y=t.selectRootElement(r,f);return function lE(t){Up(t)}(y),y}(Ae,a,this.componentDef.encapsulation,y):p(Ae,xe,function ko(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(xe)),pn=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let ct=null;null!==Xe&&(ct=vp(Xe,y,!0));const Nn=vf(0,null,null,1,0,null,null,null,null,null,null),ar=hh(null,Nn,null,pn,null,null,ae,Ae,y,null,ct);let wi,Uu;C(ar);try{const Pd=this.componentDef;let Tg,VI=null;Pd.findHostDirectiveDefs?(Tg=[],VI=new Map,Pd.findHostDirectiveDefs(Pd,Tg,VI),Tg.push(Pd)):Tg=[Pd];const qA=function EE(t,r){const s=t[vt],a=Dn;return t[a]=r,fh(s,a,2,"#host",null)}(ar,Xe),KA=function Zp(t,r,s,a,l,f,y){const D=l[vt];!function Ry(t,r,s,a){for(const l of t)r.mergedAttrs=Fn(r.mergedAttrs,l.hostAttrs);null!==r.mergedAttrs&&(Wp(r,r.mergedAttrs,!0),null!==s&&Ag(a,s,r))}(a,t,r,y);let O=null;null!==r&&(O=vp(r,l[ji]));const H=f.rendererFactory.createRenderer(r,s);let Q=16;s.signals?Q=4096:s.onPush&&(Q=64);const ae=hh(l,fy(s),null,Q,l[t.index],t,f,H,null,null,O);return D.firstCreatePass&&Om(D,t,a.length-1),wf(l,ae),l[t.index]=ae}(qA,Xe,Pd,Tg,ar,ae,Ae);Uu=Ya(Nn,Dn),Xe&&function IE(t,r,s,a){if(a)Ys(t,s,["ng-version",Dp.full]);else{const{attrs:l,classes:f}=function Fo(t){const r=[],s=[];let a=1,l=2;for(;a<t.length;){let f=t[a];if("string"==typeof f)2===l?""!==f&&r.push(f,t[++a]):8===l&&s.push(f);else{if(!kr(l))break;l=f}a++}return{attrs:r,classes:s}}(r.selectors[0]);l&&Ys(t,s,l),f&&f.length>0&&M_(t,s,f.join(" "))}}(Ae,Pd,Xe,a),void 0!==s&&function jm(t,r,s){const a=t.projection=[];for(let l=0;l<r.length;l++){const f=s[l];a.push(null!=f?Array.from(f):null)}}(Uu,this.ngContentSelectors,s),wi=function Bm(t,r,s,a,l,f){const y=Kn(),D=l[vt],O=Ps(y,l);ph(D,l,y,s,null,a);for(let Q=0;Q<s.length;Q++)sr(ao(l,D,y.directiveStart+Q,y),l);Id(D,l,y),O&&sr(O,l);const H=ao(l,D,y.directiveStart+y.componentOffset,y);if(t[hr]=l[hr]=H,null!==f)for(const Q of f)Q(H,r);return Im(D,y,t),H}(KA,Pd,Tg,VI,ar,[wE]),Lm(Nn,ar,null)}finally{Ue()}return new Sy(this.componentType,wi,Dc(Uu,ar),ar,Uu)}}class Sy extends Yv{constructor(r,s,a,l,f){super(),this.location=a,this._rootLView=l,this._tNode=f,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new by(l),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const f=this._rootLView;Fm(f[vt],f,l,r,s),this.previousInputValues.set(r,s),dh(An(this._tNode.index,f))}}get injector(){return new ui(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function wE(){const t=Kn();uc(it()[vt],t)}function ci(t){let r=function Py(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;r;){let l;if(ns(t))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new ce(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const y=t;y.inputs=Hm(t.inputs),y.inputTransforms=Hm(t.inputTransforms),y.declaredInputs=Hm(t.declaredInputs),y.outputs=Hm(t.outputs);const D=l.hostBindings;D&&TE(t,D);const O=l.viewQuery,H=l.contentQueries;if(O&&Is(t,O),H&&My(t,H),he(t.inputs,l.inputs),he(t.declaredInputs,l.declaredInputs),he(t.outputs,l.outputs),null!==l.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),he(y.inputTransforms,l.inputTransforms)),ns(l)&&l.data.animation){const Q=t.data;Q.animation=(Q.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let y=0;y<f.length;y++){const D=f[y];D&&D.ngInherit&&D(t),D===ci&&(s=!1)}}r=Object.getPrototypeOf(r)}!function WI(t){let r=0,s=null;for(let a=t.length-1;a>=0;a--){const l=t[a];l.hostVars=r+=l.hostVars,l.hostAttrs=Fn(l.hostAttrs,s=Fn(s,l.hostAttrs))}}(a)}function Hm(t){return t===Zt?{}:t===Tt?[]:t}function Is(t,r){const s=t.viewQuery;t.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function My(t,r){const s=t.contentQueries;t.contentQueries=s?(a,l,f)=>{r(a,l,f),s(a,l,f)}:r}function TE(t,r){const s=t.hostBindings;t.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}function $m(t){const r=t.inputConfig,s={};for(const a in r)if(r.hasOwnProperty(a)){const l=r[a];Array.isArray(l)&&l[2]&&(s[a]=l[2])}t.inputTransforms=s}function Yp(t){return!!Fy(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Fy(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ko(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function zm(t,r,s,a){const l=it();return Ko(l,Oo(),r)&&(Qn(),ku(nr(),l,t,r,s,a)),zm}function kE(t,r,s,a,l,f,y,D){const O=it(),H=Qn(),Q=t+Dn,ae=H.firstCreatePass?function xE(t,r,s,a,l,f,y,D,O){const H=r.consts,Q=fh(r,t,4,y||null,la(H,D));Pm(r,s,Q,la(H,O)),uc(r,Q);const ae=Q.tView=vf(2,Q,a,l,f,r.directiveRegistry,r.pipeRegistry,null,r.schemas,H,null);return null!==r.queries&&(r.queries.template(r,Q),ae.queries=r.queries.embeddedTView(Q)),Q}(Q,H,O,r,s,a,l,f,y):H.data[Q];zt(ae,!1);const Ae=FE(H,O,ae,t);yl()&&Kd(H,O,Ae,ae),sr(Ae,O),wf(O,O[Q]=If(Ae,O,Ae,ae)),yo(ae)&&yf(H,O,ae),null!=y&&wm(O,ae,D)}let FE=function xc(t,r,s,a){return Tu(!0),r[$t].createComment("")};function zy(t){return Iu(function Od(){return cn.lFrame.contextLView}(),Dn+t)}function ag(t,r,s){const a=it();return Ko(a,Oo(),r)&&function hu(t,r,s,a,l,f,y,D){const O=Ps(r,s);let Q,H=r.inputs;!D&&null!=H&&(Q=H[a])?(Fm(t,s,Q,a,l),bs(r)&&function Sm(t,r){const s=An(r,t);16&s[hn]||(s[hn]|=64)}(s,r.index)):3&r.type&&(a=function bm(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),l=null!=y?y(l,r.value||"",a):l,f.setProperty(O,a,l))}(Qn(),nr(),a,t,r,a[$t],s,!1),ag}function Zm(t,r,s,a,l){const y=l?"class":"style";Fm(t,s,r.inputs[y],y,a)}function ug(t,r,s,a){const l=it(),f=Qn(),y=Dn+t,D=l[$t],O=f.firstCreatePass?function Fc(t,r,s,a,l,f){const y=r.consts,O=fh(r,t,2,a,la(y,l));return Pm(r,s,O,la(y,f)),null!==O.attrs&&Wp(O,O.attrs,!1),null!==O.mergedAttrs&&Wp(O,O.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,O),O}(y,f,l,r,s,a):f.data[y],H=Gy(f,l,O,D,r,t);l[y]=H;const Q=yo(O);return zt(O,!0),Ag(D,H,O),32!=(32&O.flags)&&yl()&&Kd(f,l,H,O),0===function Ye(){return cn.lFrame.elementDepthCount}()&&sr(H,l),function Rr(){cn.lFrame.elementDepthCount++}(),Q&&(yf(f,l,O),Im(f,O,l)),null!==a&&wm(l,O),ug}function lg(){let t=Kn();eu()?Bn():(t=t.parent,zt(t,!1));const r=t;(function Xa(t){return cn.skipHydrationRootTNode===t})(r)&&function Uc(){cn.skipHydrationRootTNode=null}(),function Ja(){cn.lFrame.elementDepthCount--}();const s=Qn();return s.firstCreatePass&&(uc(s,t),As(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function xd(t){return 0!=(8&t.flags)}(r)&&Zm(s,r,it(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Hc(t){return 0!=(16&t.flags)}(r)&&Zm(s,r,it(),r.stylesWithoutHost,!1),lg}function Qm(t,r,s,a){return ug(t,r,s,a),lg(),Qm}let Gy=(t,r,s,a,l,f)=>(Tu(!0),p(a,l,function Fl(){return cn.lFrame.currentNamespace}()));function VE(){return it()}function t_(t){return!!t&&"function"==typeof t.then}function Zy(t){return!!t&&"function"==typeof t.subscribe}function n_(t,r,s,a){const l=it(),f=Qn(),y=Kn();return function BE(t,r,s,a,l,f,y){const D=yo(a),H=t.firstCreatePass&&km(t),Q=r[hr],ae=zp(r);let Ae=!0;if(3&a.type||y){const mt=Ps(a,r),Ut=y?y(mt):mt,pn=ae.length,ct=y?ar=>y(Sr(ar[a.index])):a.index;let Nn=null;if(!y&&D&&(Nn=function UE(t,r,s,a){const l=t.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const y=l[f];if(y===s&&l[f+1]===a){const D=r[to],O=l[f+2];return D.length>O?D[O]:null}"string"==typeof y&&(f+=2)}return null}(t,r,l,a.index)),null!==Nn)(Nn.__ngLastListenerFn__||Nn).__ngNextListenerFn__=f,Nn.__ngLastListenerFn__=f,Ae=!1;else{f=HE(a,r,Q,f,!1);const ar=s.listen(Ut,l,f);ae.push(f,ar),H&&H.push(l,ct,pn,pn+1)}}else f=HE(a,r,Q,f,!1);const xe=a.outputs;let Xe;if(Ae&&null!==xe&&(Xe=xe[l])){const mt=Xe.length;if(mt)for(let Ut=0;Ut<mt;Ut+=2){const wi=r[Xe[Ut]][Xe[Ut+1]].subscribe(f),Uu=ae.length;ae.push(f,wi),H&&H.push(l,a.index,Uu,-(Uu+1))}}}(f,l,l[$t],y,t,r,a),n_}function jE(t,r,s,a){try{return qi(6,r,s),!1!==s(a)}catch(l){return Gp(t,l),!1}finally{qi(7,r,s)}}function HE(t,r,s,a,l){return function f(y){if(y===Function)return a;dh(t.componentOffset>-1?An(t.index,r):r);let O=jE(r,s,a,y),H=f.__ngNextListenerFn__;for(;H;)O=jE(r,s,H,y)&&O,H=H.__ngNextListenerFn__;return l&&!1===O&&y.preventDefault(),O}}function $E(t=1){return function Mt(t){return(cn.lFrame.contextLView=function fn(t,r){for(;t>0;)r=r[jr],t--;return r}(t,cn.lFrame.contextLView))[hr]}(t)}function zE(t,r){let s=null;const a=function ws(t){const r=t.attrs;if(null!=r){const s=r.indexOf(5);if(!(1&s))return r[s+1]}return null}(t);for(let l=0;l<r.length;l++){const f=r[l];if("*"!==f){if(null===a?hi(t,f,!0):Xs(a,f))return l}else s=l}return s}function Yy(t){const r=it()[Or][pi];if(!r.projection){const a=r.projection=pr(t?t.length:1,null),l=a.slice();let f=r.child;for(;null!==f;){const y=t?zE(f,t):0;null!==y&&(l[y]?l[y].projectionNext=f:a[y]=f,l[y]=f),f=f.next}}}function Jy(t,r=0,s){const a=it(),l=Qn(),f=fh(l,Dn+t,16,null,s||null);null===f.projection&&(f.projection=r),Bn(),(!a[es]||pl())&&32!=(32&f.flags)&&function Nv(t,r,s){R_(r[$t],0,r,s,Mi(t,s,r),Fh(s.parent||r[pi],s,r))}(l,a,f)}function cg(t,r){return t<<17|r<<2}function Ad(t){return t>>17&32767}function s_(t){return 2|t}function Dh(t){return(131068&t)>>2}function ov(t,r){return-131069&t|r<<2}function av(t){return 1|t}function Lf(t,r,s,a,l){const f=t[s+1],y=null===r;let D=a?Ad(f):Dh(f),O=!1;for(;0!==D&&(!1===O||y);){const Q=t[D+1];KE(t[D],r)&&(O=!0,t[D+1]=a?av(Q):s_(Q)),D=a?Ad(Q):Dh(Q)}O&&(t[s+1]=a?s_(f):av(f))}function KE(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&Ma(t,r)>=0}function fg(t,r){return function ll(t,r,s,a){const l=it(),f=Qn(),y=function Ri(t){const r=cn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}(2);f.firstUpdatePass&&function Vc(t,r,s,a){const l=t.data;if(null===l[s+1]){const f=l[Rn()],y=function Sd(t,r){return r>=t.expandoStartIndex}(t,s);(function pg(t,r){return 0!=(t.flags&(r?8:16))})(f,a)&&null===r&&!y&&(r=!1),r=function l_(t,r,s,a){const l=function _l(t){const r=cn.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let f=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Bf(s=c_(null,t,r,s,a),r.attrs,a),f=null);else{const y=r.directiveStylingLast;if(-1===y||t[y]!==l)if(s=c_(l,t,r,s,a),null===f){let O=function Rd(t,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Dh(a))return t[Ad(a)]}(t,r,a);void 0!==O&&Array.isArray(O)&&(O=c_(null,t,r,O[1],a),O=Bf(O,r.attrs,a),function QE(t,r,s,a){t[Ad(s?r.classBindings:r.styleBindings)]=a}(t,r,a,O))}else f=function YE(t,r,s){let a;const l=r.directiveEnd;for(let f=1+r.directiveStylingLast;f<l;f++)a=Bf(a,t[f].hostAttrs,s);return Bf(a,r.attrs,s)}(t,r,a)}return void 0!==f&&(a?r.residualClasses=f:r.residualStyles=f),s}(l,f,r,a),function XI(t,r,s,a,l,f){let y=f?r.classBindings:r.styleBindings,D=Ad(y),O=Dh(y);t[a]=s;let Q,H=!1;if(Array.isArray(s)?(Q=s[1],(null===Q||Ma(s,Q)>0)&&(H=!0)):Q=s,l)if(0!==O){const Ae=Ad(t[D+1]);t[a+1]=cg(Ae,D),0!==Ae&&(t[Ae+1]=ov(t[Ae+1],a)),t[D+1]=function sv(t,r){return 131071&t|r<<17}(t[D+1],a)}else t[a+1]=cg(D,0),0!==D&&(t[D+1]=ov(t[D+1],a)),D=a;else t[a+1]=cg(O,0),0===D?D=a:t[O+1]=ov(t[O+1],a),O=a;H&&(t[a+1]=s_(t[a+1])),Lf(t,Q,a,!0),Lf(t,Q,a,!1),function o_(t,r,s,a,l){const f=l?t.residualClasses:t.residualStyles;null!=f&&"string"==typeof r&&Ma(f,r)>=0&&(s[a+1]=av(s[a+1]))}(r,Q,t,a,f),y=cg(D,O),f?r.classBindings=y:r.styleBindings=y}(l,f,r,s,y,a)}}(f,t,y,a),r!==kn&&Ko(l,y,r)&&function f_(t,r,s,a,l,f,y,D){if(!(3&r.type))return;const O=t.data,H=O[D+1],Q=function JI(t){return 1==(1&t)}(H)?jf(O,r,s,l,Dh(H),y):void 0;Hf(Q)||(Hf(f)||function YI(t){return 2==(2&t)}(H)&&(f=jf(O,null,s,l,D,y)),function Zd(t,r,s,a,l){if(r)l?t.addClass(s,a):t.removeClass(s,a);else{let f=-1===a.indexOf("-")?void 0:Mn.DashCase;null==l?t.removeStyle(s,a,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=Mn.Important),t.setStyle(s,a,l,f))}}(a,y,Da(Rn(),s),l,f))}(f,f.data[Rn()],l,l[$t],t,l[y+1]=function eI(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=De(Xl(t)))),t}(r,s),a,y)}(t,r,null,!0),fg}function c_(t,r,s,a,l){let f=null;const y=s.directiveEnd;let D=s.directiveStylingLast;for(-1===D?D=s.directiveStart:D++;D<y&&(f=r[D],a=Bf(a,f.hostAttrs,l),f!==t);)D++;return null!==t&&(s.directiveStylingLast=D),a}function Bf(t,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let f=0;f<r.length;f++){const y=r[f];"number"==typeof y?l=y:l===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),lo(t,y,!!s||r[++f]))}return void 0===t?null:t}function jf(t,r,s,a,l,f){const y=null===r;let D;for(;l>0;){const O=t[l],H=Array.isArray(O),Q=H?O[1]:O,ae=null===Q;let Ae=s[l+1];Ae===kn&&(Ae=ae?Tt:void 0);let xe=ae?Xu(Ae,a):Q===a?Ae:void 0;if(H&&!Hf(xe)&&(xe=Xu(O,a)),Hf(xe)&&(D=xe,y))return D;const Xe=t[l+1];l=y?Ad(Xe):Dh(Xe)}if(null!==r){let O=f?r.residualClasses:r.residualStyles;null!=O&&(D=Xu(O,a))}return D}function Hf(t){return void 0!==t}function fv(t,r=""){const s=it(),a=Qn(),l=t+Dn,f=a.firstCreatePass?fh(a,l,1,r,null):a.data[l],y=p_(a,s,f,r,t);s[l]=y,yl()&&Kd(a,s,y,f),zt(f,!1)}let p_=(t,r,s,a,l)=>(Tu(!0),function Al(t,r){return t.createText(r)}(r[$t],a));function gg(t){return mg("",t,""),gg}function mg(t,r,s){const a=it(),l=function ic(t,r,s,a){return Ko(t,Oo(),s)?r+Ce(s)+a:kn}(a,t,r,s);return l!==kn&&function nc(t,r,s){const a=Da(r,t);!function _(t,r,s){t.setValue(r,s)}(t[$t],a,s)}(a,Rn(),l),mg}const $f=void 0;var yT=["en",[["a","p"],["AM","PM"],$f],[["AM","PM"],$f,$f],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$f,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$f,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$f,"{1} 'at' {0}",$f],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function _T(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let _g={};function nI(t){const r=function vT(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=a0(r);if(s)return s;const a=r.split("-")[0];if(s=a0(a),s)return s;if("en"===a)return yT;throw new ce(701,!1)}function o0(t){return nI(t)[yg.PluralCase]}function a0(t){return t in _g||(_g[t]=zn.ng&&zn.ng.common&&zn.ng.common.locales&&zn.ng.common.locales[t]),_g[t]}var yg=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(yg||{});const vg="en-US";let u0=vg;function sI(t,r,s,a,l){if(t=nt(t),Array.isArray(t))for(let f=0;f<t.length;f++)sI(t[f],r,s,a,l);else{const f=Qn(),y=it(),D=Kn();let O=hd(t)?t:nt(t.provide);const H=ef(t),Q=1048575&D.providerIndexes,ae=D.directiveStart,Ae=D.providerIndexes>>20;if(hd(t)||!t.multi){const xe=new ru(H,l,Sc),Xe=aI(O,r,l?Q:Q+Ae,ae);-1===Xe?(su(iu(D,y),f,O),oI(f,t,r.length),r.push(O),D.directiveStart++,D.directiveEnd++,l&&(D.providerIndexes+=1048576),s.push(xe),y.push(xe)):(s[Xe]=xe,y[Xe]=xe)}else{const xe=aI(O,r,Q+Ae,ae),Xe=aI(O,r,Q,Q+Ae),Ut=Xe>=0&&s[Xe];if(l&&!Ut||!l&&!(xe>=0&&s[xe])){su(iu(D,y),f,O);const pn=function _C(t,r,s,a,l){const f=new ru(t,s,Sc);return f.multi=[],f.index=r,f.componentProviders=0,N0(f,l,a&&!s),f}(l?mC:gC,s.length,l,a,H);!l&&Ut&&(s[Xe].providerFactory=pn),oI(f,t,r.length,0),r.push(O),D.directiveStart++,D.directiveEnd++,l&&(D.providerIndexes+=1048576),s.push(pn),y.push(pn)}else oI(f,t,xe>-1?xe:Xe,N0(s[l?Xe:xe],H,!l&&a));!l&&a&&Ut&&s[Xe].componentProviders++}}}function oI(t,r,s,a){const l=hd(r),f=function $v(t){return!!t.useClass}(r);if(l||f){const O=(f?nt(r.useClass):r).prototype.ngOnDestroy;if(O){const H=t.destroyHooks||(t.destroyHooks=[]);if(!l&&r.multi){const Q=H.indexOf(s);-1===Q?H.push(s,[a,O]):H[Q+1].push(a,O)}else H.push(s,O)}}}function N0(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function aI(t,r,s,a){for(let l=s;l<a;l++)if(r[l]===t)return l;return-1}function gC(t,r,s,a){return uI(this.multi,[])}function mC(t,r,s,a){const l=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,D=ao(s,s[vt],this.providerFactory.index,a);f=D.slice(0,y),uI(l,f);for(let O=y;O<D.length;O++)f.push(D[O])}else f=[],uI(l,f);return f}function uI(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function x0(t,r=[]){return s=>{s.providersResolver=(a,l)=>function pC(t,r,s){const a=Qn();if(a.firstCreatePass){const l=ns(t);sI(s,a.data,a.blueprint,l,!0),sI(r,a.data,a.blueprint,l,!1)}}(a,l?l(t):t,r)}}class zf{}class k0{}function yC(t,r){return new lI(t,r??null,[])}class lI extends zf{constructor(r,s,a){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new mh(this);const l=qr(r);this._bootstrapComponents=ol(l.bootstrap),this._r3Injector=ty(r,s,[{provide:zf,useValue:this},{provide:Tp,useValue:this.componentFactoryResolver},...a],De(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class cI extends k0{constructor(r){super(),this.moduleType=r}create(r){return new lI(this.moduleType,r,[])}}class F0 extends zf{constructor(r){super(),this.componentFactoryResolver=new mh(this),this.instance=null;const s=new pd([...r.providers,{provide:zf,useValue:this},{provide:Tp,useValue:this.componentFactoryResolver}],r.parent||fd(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function L0(t,r,s=null){return new F0({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let EC=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const a=Ug(0,s.type),l=a.length>0?L0([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,l)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=en({token:t,providedIn:"environment",factory:()=>new t(Jt(bl))})}return t})();function V0(t){t.getStandaloneInjector=r=>r.get(EC).getOrCreateStandaloneInjector(t)}function G0(t,r,s,a,l,f){const y=r+s;return Ko(t,y,l)?function fu(t,r,s){return t[r]=s}(t,y+1,f?a.call(f,l):a(l)):function T_(t,r){const s=t[r];return s===kn?void 0:s}(t,y+1)}function Q0(t,r){const s=Qn();let a;const l=t+Dn;s.firstCreatePass?(a=function UC(t,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(t===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks??=[]).push(l,a.onDestroy)):a=s.data[l];const f=a.factory||(a.factory=bi(a.type)),D=Vn(Sc);try{const O=El(!1),H=f();return El(O),function kc(t,r,s,a){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=a}(s,it(),l,H),H}finally{Vn(D)}}function Y0(t,r,s){const a=t+Dn,l=it(),f=Iu(l,a);return function C_(t,r){return t[vt].data[r].pure}(l,a)?G0(l,function Yr(){const t=cn.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}(),r,f.transform,s,f):f.transform(s)}function zC(){return this._results[Symbol.iterator]()}class hI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new xu)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=hI.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=zC)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=function Ns(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function hc(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let l=t[a],f=r[a];if(s&&(l=s(l),f=s(f)),f!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function WC(t,r,s,a=!0){const l=r[vt];if(function Fe(t,r,s,a){const l=si+a,f=s.length;a>0&&(s[l-1][Kr]=r),a<f-si?(r[Kr]=s[l],zl(s,si+a,r)):(s.push(r),r[Kr]=null),r[Sn]=s;const y=r[tr];null!==y&&s!==y&&function tt(t,r){const s=t[_i];r[Or]!==r[Sn][Sn][Or]&&(t[na]=!0),null===s?t[_i]=[r]:s.push(r)}(y,r);const D=r[mi];null!==D&&D.insertView(t),r[hn]|=128}(l,r,t,s),a){const f=Vh(s,t),y=r[$t],D=Mu(y,t[hs]);null!==D&&function V(t,r,s,a,l,f){a[dr]=l,a[pi]=r,Bh(t,a,s,1,l,f)}(l,t[pi],y,r,D,f)}}let D_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=ZC}return t})();const qC=D_,KC=class extends qC{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,a){const l=function GC(t,r,s,a){const l=r.tView,D=hh(t,l,s,4096&t[hn]?4096:16,null,r,null,null,null,a?.injector??null,a?.hydrationInfo??null);D[tr]=t[r.index];const H=t[mi];return null!==H&&(D[mi]=H.createEmbeddedView(l)),Lm(l,D,s),D}(this._declarationLView,this._declarationTContainer,r,{injector:s,hydrationInfo:a});return new gh(l)}};function ZC(){return Tv(Kn(),it())}function Tv(t,r){return 4&t.type?new KC(r,t,Dc(t,r)):null}let Dv=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=tD}return t})();function tD(){return iw(Kn(),it())}const nD=Dv,nw=class extends nD{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Dc(this._hostTNode,this._hostLView)}get injector(){return new ui(this._hostTNode,this._hostLView)}get parentInjector(){const r=Qu(this._hostTNode,this._hostLView);if($c(r)){const s=Du(r,this._hostLView),a=ba(r);return new ui(s[vt].data[a+8],s)}return new ui(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=rw(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-si}createEmbeddedView(r,s,a){let l,f;"number"==typeof a?l=a:null!=a&&(l=a.index,f=a.injector);const D=r.createEmbeddedViewImpl(s||{},f,null);return this.insertImpl(D,l,false),D}createComponent(r,s,a,l,f){const y=r&&!function $l(t){return"function"==typeof t}(r);let D;if(y)D=s;else{const mt=s||{};D=mt.index,a=mt.injector,l=mt.projectableNodes,f=mt.environmentInjector||mt.ngModuleRef}const O=y?r:new Va(Tn(r)),H=a||this.parentInjector;if(!f&&null==O.ngModule){const Ut=(y?H:this.parentInjector).get(bl,null);Ut&&(f=Ut)}Tn(O.componentType??{});const xe=O.create(H,l,null,f);return this.insertImpl(xe.hostView,D,false),xe}insert(r,s){return this.insertImpl(r,s,!1)}insertImpl(r,s,a){const l=r._lView;if(function zs(t){return fr(t[Sn])}(l)){const O=this.indexOf(r);if(-1!==O)this.detach(O);else{const H=l[Sn],Q=new nw(H,H[pi],H[Sn]);Q.detach(Q.indexOf(r))}}const y=this._adjustIndex(s),D=this._lContainer;return WC(D,l,y,!a),r.attachToViewContainerRef(),zl(fI(D),y,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=rw(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Yt(this._lContainer,s);a&&(xn(fI(this._lContainer),s),Wt(a[vt],a))}detach(r){const s=this._adjustIndex(r,-1),a=Yt(this._lContainer,s);return a&&null!=xn(fI(this._lContainer),s)?new gh(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function rw(t){return t[8]}function fI(t){return t[8]||(t[8]=[])}function iw(t,r){let s;const a=r[t.index];return fr(a)?s=a:(s=If(a,r,null,t),r[t.index]=s,wf(r,s)),sw(s,r,t,a),new nw(s,t,r)}let sw=function ow(t,r,s,a){if(t[hs])return;let l;l=8&s.type?Sr(a):function rD(t,r){const s=t[$t],a=s.createComment(""),l=Ps(r,t);return rl(s,Mu(s,l),a,function kh(t,r){return t.nextSibling(r)}(s,l),!1),a}(r,s),t[hs]=l};class pI{constructor(r){this.queryList=r,this.matches=null}clone(){return new pI(this.queryList)}setDirty(){this.queryList.setDirty()}}class gI{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let f=0;f<a;f++){const y=s.getByIndex(f);l.push(this.queries[y.indexInDeclarationView].clone())}return new gI(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==gw(r,s).matches&&this.queries[s].setDirty()}}class aw{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class mI{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,f=this.getByIndex(a).embeddedTView(r,l);f&&(f.indexInDeclarationView=a,null!==s?s.push(f):s=[f])}return null!==s?new mI(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class _I{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new _I(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const f=a[l];this.matchTNodeWithReadOption(r,s,oD(s,f)),this.matchTNodeWithReadOption(r,s,vr(s,r,f,!1,!1))}else a===D_?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,vr(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===Sl||l===Dv||l===D_&&4&s.type)this.addMatch(s.index,-2);else{const f=vr(s,r,l,!1,!1);null!==f&&this.addMatch(s.index,f)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function oD(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function uD(t,r,s,a){return-1===s?function aD(t,r){return 11&t.type?Dc(t,r):4&t.type?Tv(t,r):null}(r,t):-2===s?function lD(t,r,s){return s===Sl?Dc(r,t):s===D_?Tv(r,t):s===Dv?iw(r,t):void 0}(t,r,a):ao(t,t[vt],s,r)}function uw(t,r,s,a){const l=r[mi].queries[a];if(null===l.matches){const f=t.data,y=s.matches,D=[];for(let O=0;O<y.length;O+=2){const H=y[O];D.push(H<0?null:uD(r,f[H],y[O+1],s.metadata.read))}l.matches=D}return l.matches}function yI(t,r,s,a){const l=t.queries.getByIndex(s),f=l.matches;if(null!==f){const y=uw(t,r,l,s);for(let D=0;D<f.length;D+=2){const O=f[D];if(O>0)a.push(y[D/2]);else{const H=f[D+1],Q=r[-O];for(let ae=si;ae<Q.length;ae++){const Ae=Q[ae];Ae[tr]===Ae[Sn]&&yI(Ae[vt],Ae,H,a)}if(null!==Q[_i]){const ae=Q[_i];for(let Ae=0;Ae<ae.length;Ae++){const xe=ae[Ae];yI(xe[vt],xe,H,a)}}}}}return a}function lw(t){const r=it(),s=Qn(),a=Bc();b(a+1);const l=gw(s,a);if(t.dirty&&function Mo(t){return 4==(4&t[hn])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)t.reset([]);else{const f=l.crossesNgTemplate?yI(s,r,a,[]):uw(s,r,l,a);t.reset(f,Yg),t.notifyOnChanges()}return!0}return!1}function cw(t,r,s){const a=Qn();a.firstCreatePass&&(pw(a,new aw(t,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),fw(a,it(),r)}function dw(t,r,s,a){const l=Qn();if(l.firstCreatePass){const f=Kn();pw(l,new aw(r,s,a),f.index),function dD(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(l,t),2==(2&s)&&(l.staticContentQueries=!0)}fw(l,it(),s)}function hw(){return function cD(t,r){return t[mi].queries[r].queryList}(it(),Bc())}function fw(t,r,s){const a=new hI(4==(4&s));(function py(t,r,s,a){const l=zp(r);l.push(s),t.firstCreatePass&&km(t).push(a,l.length-1)})(t,r,a,a.destroy),null===r[mi]&&(r[mi]=new gI),r[mi].queries.push(new pI(a))}function pw(t,r,s){null===t.queries&&(t.queries=new mI),t.queries.track(new _I(r,s))}function gw(t,r){return t.queries.getByIndex(r)}function mw(t,r){return Tv(t,r)}function vI(t){return!!qr(t)}const Nw=new kt("Application Initializer");let CI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,a)=>{this.resolve=s,this.reject=a}),this.appInits=Dt(Nw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const l of this.appInits){const f=l();if(t_(f))s.push(f);else if(Zy(f)){const y=new Promise((D,O)=>{f.subscribe({complete:D,error:O})});s.push(y)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xw=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const bv=new kt("LocaleId",{providedIn:"root",factory:()=>Dt(bv,Kt.Optional|Kt.SkipSelf)||function OD(){return typeof $localize<"u"&&$localize.locale||vg}()}),ND=new kt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let kw=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new pe.X(!1)}add(){this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class kD{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let FD=(()=>{class t{compileModuleSync(s){return new cI(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),f=ol(qr(s).declarations).reduce((y,D)=>{const O=Tn(D);return O&&y.push(new Va(O)),y},[]);return new kD(a,f)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Uw=new kt(""),Bw=new kt("");let bI,iA=(()=>{class t{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,bI||(function sA(t){bI=t}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zs.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let f=-1;a&&a>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:f,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(Jt(Zs),Jt(jw),Jt(Bw))};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac})}return t})(),jw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return bI?.findTestabilityInTree(this,s,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),bh=null;const Hw=new kt("AllowMultipleToken"),SI=new kt("PlatformDestroyListeners"),RI=new kt("appBootstrapListener");class uA{constructor(r,s){this.name=r,this.token=s}}function Gw(t,r,s=[]){const a=`Platform: ${r}`,l=new kt(a);return(f=[])=>{let y=PI();if(!y||y.injector.get(Hw,!1)){const D=[...s,...f,{provide:l,useValue:!0}];t?t(D):function lA(t){if(bh&&!bh.get(Hw,!1))throw new ce(400,!1);(function $w(){!function $u(t){is=t}(()=>{throw new ce(600,!1)})})(),bh=t;const r=t.get(qw);(function zw(t){t.get(hp,null)?.forEach(s=>s())})(t)}(function Ww(t=[],r){return sl.create({name:r,providers:[{provide:Hg,useValue:"platform"},{provide:SI,useValue:new Set([()=>bh=null])},...t]})}(D,a))}return function dA(t){const r=PI();if(!r)throw new ce(401,!1);return r}()}}function PI(){return bh?.get(qw)??null}let qw=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function hA(t="zone.js",r){return"noop"===t?new rE:"zone.js"===t?new Zs(r):t}(a?.ngZone,function Kw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return l.run(()=>{const f=function vC(t,r,s){return new lI(t,r,s)}(s.moduleType,this.injector,function Xw(t){return[{provide:Zs,useFactory:t},{provide:Zh,multi:!0,useFactory:()=>{const r=Dt(pA,{optional:!0});return()=>r.initialize()}},{provide:Jw,useFactory:fA},{provide:ry,useFactory:Sp}]}(()=>l)),y=f.injector.get(Pl,null);return l.runOutsideAngular(()=>{const D=l.onError.subscribe({next:O=>{y.handleError(O)}});f.onDestroy(()=>{Rv(this._modules,f),D.unsubscribe()})}),function Zw(t,r,s){try{const a=s();return t_(a)?a.catch(l=>{throw r.runOutsideAngular(()=>t.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(y,l,()=>{const D=f.injector.get(CI);return D.runInitializers(),D.donePromise.then(()=>(function l0(t){yt(t,"Expected localeId to be defined"),"string"==typeof t&&(u0=t.toLowerCase().replace(/_/g,"-"))}(f.injector.get(bv,vg)||vg),this._moduleDoBootstrap(f),f))})})}bootstrapModule(s,a=[]){const l=Qw({},a);return function oA(t,r,s){const a=new cI(s);return Promise.resolve(a)}(0,0,s).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(s){const a=s.injector.get(wg);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new ce(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ce(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(SI,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||t)(Jt(sl))};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Qw(t,r){return Array.isArray(r)?r.reduce(Qw,t):{...t,...r}}let wg=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Dt(Jw),this.zoneIsStable=Dt(ry),this.componentTypes=[],this.components=[],this.isStable=Dt(kw).hasPendingTasks.pipe((0,R.w)(s=>s?(0,ve.of)(!1):this.zoneIsStable),(0,Ne.x)(),(0,Re.B)()),this._injector=Dt(bl)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const l=s instanceof Z_;if(!this._injector.get(CI).done)throw!l&&eo(s),new ce(405,!1);let y;y=l?s:this._injector.get(Tp).resolveComponentFactory(s),this.componentTypes.push(y.componentType);const D=function aA(t){return t.isBoundToModule}(y)?void 0:this._injector.get(zf),H=y.create(sl.NULL,[],a||y.selector,D),Q=H.location.nativeElement,ae=H.injector.get(Uw,null);return ae?.registerApplication(Q),H.onDestroy(()=>{this.detachView(H.hostView),Rv(this.components,H),ae?.unregisterApplication(Q)}),this._loadComponent(H),H}tick(){if(this._runningTick)throw new ce(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Rv(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(RI,[]);a.push(...this._bootstrapListeners),a.forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Rv(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new ce(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Rv(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}const Jw=new kt("",{providedIn:"root",factory:()=>Dt(Pl).handleError.bind(void 0)});function fA(){const t=Dt(Zs),r=Dt(Pl);return s=>t.runOutsideAngular(()=>r.handleError(s))}let pA=(()=>{class t{constructor(){this.zone=Dt(Zs),this.applicationRef=Dt(wg)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=en({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mA(){return!1}let _A=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=yA}return t})();function yA(t){return function vA(t,r,s){if(bs(t)&&!s){const a=An(t.index,r);return new gh(a,a)}return 47&t.type?new gh(r[Or],r):null}(Kn(),it(),16==(16&t))}class rT{constructor(){}supports(r){return Yp(r)}create(r){return new DA(r)}}const CA=(t,r)=>r;class DA{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||CA}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,f=null;for(;s||a;){const y=!a||s&&s.currentIndex<sT(a,l,f)?s:a,D=sT(y,l,f),O=y.currentIndex;if(y===a)l--,a=a._nextRemoved;else if(s=s._next,null==y.previousIndex)l++;else{f||(f=[]);const H=D-l,Q=O-l;if(H!=Q){for(let Ae=0;Ae<H;Ae++){const xe=Ae<f.length?f[Ae]:f[Ae]=0,Xe=xe+Ae;Q<=Xe&&Xe<H&&(f[Ae]=xe+1)}f[y.previousIndex]=Q-H}}D!==O&&r(y,D,O)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Yp(r))throw new ce(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,f,y,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let D=0;D<this.length;D++)f=r[D],y=this._trackByFn(D,f),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,f,y,D)),Object.is(s.item,f)||this._addIdentityChange(s,f)):(s=this._mismatch(s,f,y,D),a=!0),s=s._next}else l=0,function rc(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,D=>{y=this._trackByFn(l,D),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,D,y,l)),Object.is(s.item,D)||this._addIdentityChange(s,D)):(s=this._mismatch(s,D,y,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let f;return null===r?f=this._itTail:(f=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,f,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,f,l)):r=this._addAfter(new AA(s,a),f,l),r}_verifyReinsertion(r,s,a,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==f?r=this._reinsertAfter(f,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,f=r._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new iT),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new iT),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class AA{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bA{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class iT{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new bA,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function sT(t,r,s){const a=t.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class oT{constructor(){}supports(r){return r instanceof Map||Fy(r)}create(){return new SA}}class SA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Fy(r)))throw new ce(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const f=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,f)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const f=l._prev,y=l._next;return f&&(f._next=y),y&&(y._prev=f),l._next=null,l._prev=null,l}const a=new RA(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class RA{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function aT(){return new kI([new rT])}let kI=(()=>{class t{static#e=this.\u0275prov=en({token:t,providedIn:"root",factory:aT});constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||aT()),deps:[[t,new uu,new xo]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new ce(901,!1)}}return t})();function uT(){return new FI([new oT])}let FI=(()=>{class t{static#e=this.\u0275prov=en({token:t,providedIn:"root",factory:uT});constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||uT()),deps:[[t,new uu,new xo]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new ce(901,!1)}}return t})();const OA=Gw(null,"core",[]);let NA=(()=>{class t{constructor(s){}static#e=this.\u0275fac=function(a){return new(a||t)(Jt(wg))};static#t=this.\u0275mod=xi({type:t});static#n=this.\u0275inj=sn({})}return t})();function zA(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WA(t){const r=Tn(t);if(!r)return null;const s=new Va(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},7213:(bt,Le,$)=>{$.d(Le,{zQ:()=>lr,ww:()=>an,rT:()=>Et,f7:()=>ur,L6:()=>rt,_Q:()=>fe,lh:()=>lt,Qv:()=>Qe,nw:()=>Ar}),$(3956);var W=$(6814),ie=$(5879),Ee=$(8326),pe=$(7217),ve=$(8645),Re=$(2096),R=$(5592),Ne=$(2459),ue=$(3019),he=$(3093),De=$(4664),et=$(7398),Ke=$(4552);class ht extends ve.x{constructor(Rt=1/0,_e=1/0,we=Ke.l){super(),this._bufferSize=Rt,this._windowTime=_e,this._timestampProvider=we,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=_e===1/0,this._bufferSize=Math.max(1,Rt),this._windowTime=Math.max(1,_e)}next(Rt){const{isStopped:_e,_buffer:we,_infiniteTimeWindow:Ve,_timestampProvider:be,_windowTime:Se}=this;_e||(we.push(Rt),!Ve&&we.push(be.now()+Se)),this._trimBuffer(),super.next(Rt)}_subscribe(Rt){this._throwIfClosed(),this._trimBuffer();const _e=this._innerSubscribe(Rt),{_infiniteTimeWindow:we,_buffer:Ve}=this,be=Ve.slice();for(let Se=0;Se<be.length&&!Rt.closed;Se+=we?1:2)Rt.next(be[Se]);return this._checkFinalizedStatuses(Rt),_e}_trimBuffer(){const{_bufferSize:Rt,_timestampProvider:_e,_buffer:we,_infiniteTimeWindow:Ve}=this,be=(Ve?1:2)*Rt;if(Rt<1/0&&be<we.length&&we.splice(0,we.length-be),!Ve){const Se=_e.now();let Be=0;for(let yt=1;yt<we.length&&we[yt]<=Se;yt+=2)Be=yt;Be&&we.splice(0,Be+1)}}}var nt=$(3020);function pt(It,Rt,_e){let we,Ve=!1;return It&&"object"==typeof It?({bufferSize:we=1/0,windowTime:Rt=1/0,refCount:Ve=!1,scheduler:_e}=It):we=It??1/0,(0,nt.B)({connector:()=>new ht(we,Rt,_e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ve})}var ut=$(1374),Ft=$(4674);function Ie(It,Rt){return(0,Ft.m)(Rt)?(0,De.w)(()=>It,Rt):(0,De.w)(()=>It)}var ce=$(5137),ke=$(2181),Ce=$(7142);const Qe=new ie.OlP("angularfire2.auth.use-emulator"),rt=new ie.OlP("angularfire2.auth.settings"),fe=new ie.OlP("angularfire2.auth.tenant-id"),Et=new ie.OlP("angularfire2.auth.langugage-code"),lt=new ie.OlP("angularfire2.auth.use-device-language"),ur=new ie.OlP("angularfire.auth.persistence"),Ar=(It,Rt,_e,we,Ve,be,Se,Be)=>(0,pe.cc)(`${It.name}.auth`,"AngularFireAuth",It.name,()=>{const yt=Rt.runOutsideAngular(()=>It.auth());if(_e&&yt.useEmulator(..._e),we&&(yt.tenantId=we),yt.languageCode=Ve,be&&yt.useDeviceLanguage(),Se)for(const[gt,mr]of Object.entries(Se))yt.settings[gt]=mr;return Be&&yt.setPersistence(Be),yt},[_e,we,Ve,be,Se,Be]);let lr=(()=>{class It{authState;idToken;user;idTokenResult;credential;constructor(_e,we,Ve,be,Se,Be,yt,gt,mr,Pt,wn,en){const Ln=new ve.x,sn=(0,Re.of)(void 0).pipe((0,he.Q)(Se.outsideAngular),(0,De.w)(()=>be.runOutsideAngular(()=>Promise.resolve().then($.bind($,3956)))),(0,et.U)(()=>(0,pe.on)(_e,be,we)),(0,et.U)(yn=>Ar(yn,be,Be,gt,mr,Pt,yt,wn)),pt({bufferSize:1,refCount:!1}));if((0,W.PM)(Ve))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Re.of)(null);else{sn.pipe((0,ut.P)()).subscribe();const yn=sn.pipe((0,De.w)(En=>En.getRedirectResult().then(Vr=>Vr,()=>null)),Ee.iC,pt({bufferSize:1,refCount:!1})),$n=sn.pipe((0,De.w)(En=>new R.y(Vr=>({unsubscribe:be.runOutsideAngular(()=>En.onAuthStateChanged(Xn=>Vr.next(Xn),Xn=>Vr.error(Xn),()=>Vr.complete()))})))),qt=sn.pipe((0,De.w)(En=>new R.y(Vr=>({unsubscribe:be.runOutsideAngular(()=>En.onIdTokenChanged(Xn=>Vr.next(Xn),Xn=>Vr.error(Xn),()=>Vr.complete()))}))));this.authState=yn.pipe(Ie($n),(0,ce.R)(Se.outsideAngular),(0,he.Q)(Se.insideAngular)),this.user=yn.pipe(Ie(qt),(0,ce.R)(Se.outsideAngular),(0,he.Q)(Se.insideAngular)),this.idToken=this.user.pipe((0,De.w)(En=>En?(0,Ne.D)(En.getIdToken()):(0,Re.of)(null))),this.idTokenResult=this.user.pipe((0,De.w)(En=>En?(0,Ne.D)(En.getIdTokenResult()):(0,Re.of)(null))),this.credential=(0,ue.T)(yn,Ln,this.authState.pipe((0,ke.h)(En=>!En))).pipe((0,et.U)(En=>En?.user?En:null),(0,ce.R)(Se.outsideAngular),(0,he.Q)(Se.insideAngular))}return(0,pe.pX)(this,sn,be,{spy:{apply:(yn,$n,qt)=>{(yn.startsWith("signIn")||yn.startsWith("createUser"))&&qt.then(En=>Ln.next(En))}}})}static \u0275fac=function(we){return new(we||It)(ie.LFG(pe.Dh),ie.LFG(pe.xv,8),ie.LFG(ie.Lbi),ie.LFG(ie.R0b),ie.LFG(Ee.HU),ie.LFG(Qe,8),ie.LFG(rt,8),ie.LFG(fe,8),ie.LFG(Et,8),ie.LFG(lt,8),ie.LFG(ur,8),ie.LFG(Ee.Rf,8))};static \u0275prov=ie.Yz7({token:It,factory:It.\u0275fac,providedIn:"any"})}return It})(),an=(()=>{class It{constructor(){Ce.Z.registerVersion("angularfire",Ee.q4.full,"auth-compat")}static \u0275fac=function(we){return new(we||It)};static \u0275mod=ie.oAB({type:It});static \u0275inj=ie.cJS({providers:[lr]})}return It})()},9027:(bt,Le,$)=>{$.d(Le,{ST:()=>m_,yb:()=>_v});var w=$(6814),W=$(5879),ie=$(8326),Ee=$(7217),pe=$(7213),ve=$(6321),Re=$(5592),R=$(2459),Ne=$(2096),ue=$(7921),he=$(9360),De=$(8251);function et(){return(0,he.e)((i,e)=>{let n,o=!1;i.subscribe((0,De.x)(e,u=>{const c=n;n=u,o&&e.next([c,u]),o=!0}))})}var fe,Ke=$(7398),ht=$(6699),nt=$(3997),pt=$(2181),Ft=($(3956),$(3106)),Ie=$(5861),ce=$(534),ke=$(4537),Ce=$(7879),Ge=$(9058),Qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rt={},Et=Et||{},lt=Qe||self;function ur(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Ar(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var an="closure_uid_"+(1e9*Math.random()>>>0),It=0;function Rt(i,e,n){return i.call.apply(i.bind,arguments)}function _e(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function we(i,e,n){return(we=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Rt:_e).apply(null,arguments)}function Ve(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function be(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(o,u,c){for(var g=Array(arguments.length-2),P=2;P<arguments.length;P++)g[P-2]=arguments[P];return e.prototype[u].apply(o,g)}}function Se(){this.s=this.s,this.o=this.o}Se.prototype.s=!1,Se.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function lr(i){Object.prototype.hasOwnProperty.call(i,an)&&i[an]||(i[an]=++It)}(this)},Se.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const yt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function gt(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function mr(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(ur(o)){const u=i.length||0,c=o.length||0;i.length=u+c;for(let g=0;g<c;g++)i[u+g]=o[g]}else i.push(o)}}function Pt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Pt.prototype.h=function(){this.defaultPrevented=!0};var wn=function(){if(!lt.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{lt.addEventListener("test",()=>{},e),lt.removeEventListener("test",()=>{},e)}catch{}return i}();function en(i){return/^[\s\xa0]*$/.test(i)}function Ln(){var i=lt.navigator;return i&&(i=i.userAgent)?i:""}function sn(i){return-1!=Ln().indexOf(i)}function yn(i){return yn[" "](i),i}yn[" "]=function(){};var Kt,i,qt=sn("Opera"),En=sn("Trident")||sn("MSIE"),Vr=sn("Edge"),Xn=Vr||En,Ui=sn("Gecko")&&!(-1!=Ln().toLowerCase().indexOf("webkit")&&!sn("Edge"))&&!(sn("Trident")||sn("MSIE"))&&!sn("Edge"),Oi=-1!=Ln().toLowerCase().indexOf("webkit")&&!sn("Edge");function Zn(){var i=lt.document;return i?i.documentMode:void 0}e:{var vn="",Bt=(i=Ln(),Ui?/rv:([^\);]+)(\)|;)/.exec(i):Vr?/Edge\/([\d\.]+)/.exec(i):En?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Oi?/WebKit\/(\S+)/.exec(i):qt?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Bt&&(vn=Bt?Bt[1]:""),En){var Vn=Zn();if(null!=Vn&&Vn>parseFloat(vn)){Kt=String(Vn);break e}}Kt=vn}var zn=lt.document&&En&&(Zn()||parseInt(Kt,10))||void 0;function br(i,e){if(Pt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Ui){e:{try{yn(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:To[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&br.$.h.call(this)}}be(br,Pt);var To={2:"touch",3:"pen",4:"mouse"};br.prototype.h=function(){br.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var kt="closure_listenable_"+(1e6*Math.random()|0),Qi=0;function dn(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=u,this.key=++Qi,this.fa=this.ia=!1}function Er(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function mn(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function Hr(i){const e={};for(const n in i)e[n]=i[n];return e}const di="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ur(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let c=0;c<di.length;c++)n=di[c],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function $r(i){this.src=i,this.g={},this.h=0}function Ti(i,e){var n=e.type;if(n in i.g){var c,o=i.g[n],u=yt(o,e);(c=0<=u)&&Array.prototype.splice.call(o,u,1),c&&(Er(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function Bi(i,e,n,o){for(var u=0;u<i.length;++u){var c=i[u];if(!c.fa&&c.listener==e&&c.capture==!!n&&c.la==o)return u}return-1}$r.prototype.add=function(i,e,n,o,u){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var g=Bi(i,e,o,u);return-1<g?(e=i[g],n||(e.ia=!1)):((e=new dn(e,this.src,c,!!o,u)).ia=n,i.push(e)),e};var rr="closure_lm_"+(1e6*Math.random()|0),xr={};function us(i,e,n,o,u){if(o&&o.once)return te(i,e,n,o,u);if(Array.isArray(e)){for(var c=0;c<e.length;c++)us(i,e[c],n,o,u);return null}return n=rn(n),i&&i[kt]?i.O(e,n,Ar(o)?!!o.capture:!!o,u):me(i,e,n,!1,o,u)}function me(i,e,n,o,u,c){if(!e)throw Error("Invalid event type");var g=Ar(u)?!!u.capture:!!u,P=dt(i);if(P||(i[rr]=P=new $r(i)),(n=P.add(e,n,o,g,c)).proxy)return n;if(o=function ee(){const e=Ze;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)wn||(u=g),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Pe(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function te(i,e,n,o,u){if(Array.isArray(e)){for(var c=0;c<e.length;c++)te(i,e[c],n,o,u);return null}return n=rn(n),i&&i[kt]?i.P(e,n,Ar(o)?!!o.capture:!!o,u):me(i,e,n,!0,o,u)}function J(i,e,n,o,u){if(Array.isArray(e))for(var c=0;c<e.length;c++)J(i,e[c],n,o,u);else o=Ar(o)?!!o.capture:!!o,n=rn(n),i&&i[kt]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=Bi(c=i.g[e],n,o,u))&&(Er(c[n]),Array.prototype.splice.call(c,n,1),0==c.length&&(delete i.g[e],i.h--))):i&&(i=dt(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Bi(e,n,o,u)),(n=-1<i?e[i]:null)&&ne(n))}function ne(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[kt])Ti(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(Pe(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=dt(e))?(Ti(n,i),0==n.h&&(n.src=null,e[rr]=null)):Er(i)}}}function Pe(i){return i in xr?xr[i]:xr[i]="on"+i}function Ze(i,e){if(i.fa)i=!0;else{e=new br(e,this);var n=i.listener,o=i.la||i.src;i.ia&&ne(i),i=n.call(o,e)}return i}function dt(i){return(i=i[rr])instanceof $r?i:null}var Jt="__closure_events_fn_"+(1e9*Math.random()>>>0);function rn(i){return"function"==typeof i?i:(i[Jt]||(i[Jt]=function(e){return i.handleEvent(e)}),i[Jt])}function Dt(){Se.call(this),this.i=new $r(this),this.S=this,this.J=null}function Lt(i,e){var n,o=i.J;if(o)for(n=[];o;o=o.J)n.push(o);if(i=i.S,o=e.type||e,"string"==typeof e)e=new Pt(e,i);else if(e instanceof Pt)e.target=e.target||i;else{var u=e;Ur(e=new Pt(o,i),u)}if(u=!0,n)for(var c=n.length-1;0<=c;c--){var g=e.g=n[c];u=cr(g,o,!0,e)&&u}if(u=cr(g=e.g=i,o,!0,e)&&u,u=cr(g,o,!1,e)&&u,n)for(c=0;c<n.length;c++)u=cr(g=e.g=n[c],o,!1,e)&&u}function cr(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,c=0;c<e.length;++c){var g=e[c];if(g&&!g.fa&&g.capture==n){var P=g.listener,k=g.la||g.src;g.ia&&Ti(i.i,g),u=!1!==P.call(k,o)&&u}}return u&&!o.defaultPrevented}be(Dt,Se),Dt.prototype[kt]=!0,Dt.prototype.removeEventListener=function(i,e,n,o){J(this,i,e,n,o)},Dt.prototype.N=function(){if(Dt.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)Er(n[o]);delete i.g[e],i.h--}}this.J=null},Dt.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},Dt.prototype.P=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var Ci=lt.JSON.stringify;function Ua(){var i=Gn;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Oe=new class Co{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new st,i=>i.reset());class st{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Ht(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function Zt(i){lt.setTimeout(()=>{throw i},0)}let Tt,Xt=!1,Gn=new class qe{constructor(){this.h=this.g=null}add(e,n){const o=Oe.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},Wn=()=>{const i=lt.Promise.resolve(void 0);Tt=()=>{i.then(ii)}};var ii=()=>{for(var i;i=Ua();){try{i.h.call(i.g)}catch(n){Zt(n)}var e=Oe;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Xt=!1};function ti(i,e){Dt.call(this),this.h=i||1,this.g=e||lt,this.j=we(this.qb,this),this.l=Date.now()}function ls(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function Do(i,e,n){if("function"==typeof i)n&&(i=we(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=we(i.handleEvent,i)}return 2147483647<Number(e)?-1:lt.setTimeout(i,e||0)}function Qs(i){i.g=Do(()=>{i.g=null,i.i&&(i.i=!1,Qs(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}be(ti,Dt),(fe=ti.prototype).ga=!1,fe.T=null,fe.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Lt(this,"tick"),this.ga&&(ls(this),this.start()))}},fe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fe.N=function(){ti.$.N.call(this),ls(this),delete this.g};class Ys extends Se{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Qs(this)}N(){super.N(),this.g&&(lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Js(i){Se.call(this),this.h=i,this.g={}}be(Js,Se);var Qo=[];function Fn(i,e,n,o){Array.isArray(n)||(n&&(Qo[0]=n.toString()),n=Qo);for(var u=0;u<n.length;u++){var c=us(e,n[u],o||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function Yo(i){mn(i.g,function(e,n){this.g.hasOwnProperty(n)&&ne(e)},i),i.g={}}function Di(){this.g=!0}function Xi(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function kr(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var c=u[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var g=1;g<u.length;g++)u[g]=""}}}return Ci(n)}catch{return e}}(i,n)+(o?" "+o:"")})}Js.prototype.N=function(){Js.$.N.call(this),Yo(this)},Js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Di.prototype.Ea=function(){this.g=!1},Di.prototype.info=function(){};var zr={},hi=null;function ws(){return hi=hi||new Dt}function Ni(i){Pt.call(this,zr.Ta,i)}function cs(i){const e=ws();Lt(e,new Ni(e))}function Xs(i,e){Pt.call(this,zr.STAT_EVENT,i),this.stat=e}function Gr(i){const e=ws();Lt(e,new Xs(e,i))}function mu(i,e){Pt.call(this,zr.Ua,i),this.size=e}function fi(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return lt.setTimeout(function(){i()},e)}zr.Ta="serverreachability",be(Ni,Pt),zr.STAT_EVENT="statevent",be(Xs,Pt),zr.Ua="timingevent",be(mu,Pt);var Fo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},_o={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Jo(){}function Ba(){}Jo.prototype.h=null;var Wr,xi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ja(){Pt.call(this,"d")}function Xo(){Pt.call(this,"c")}function Fs(){}function Tn(i,e,n,o){this.l=i,this.j=e,this.m=n,this.W=o||1,this.U=new Js(this),this.P=ki,this.V=new ti(i=Xn?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new er}function er(){this.i=null,this.g="",this.h=!1}be(ja,Pt),be(Xo,Pt),be(Fs,Jo),Fs.prototype.g=function(){return new XMLHttpRequest},Fs.prototype.i=function(){return{}},Wr=new Fs;var ki=45e3,eo={},qr={};function Br(i,e,n){i.L=1,i.v=$i(gi(e)),i.s=n,i.S=!0,Ls(i,null)}function Ls(i,e){i.G=Date.now(),dr(i),i.A=gi(i.v);var n=i.A,o=i.W;Array.isArray(o)||(o=[String(o)]),ts(n.i,"t",o),i.C=0,n=i.l.J,i.h=new er,i.g=Ta(i.l,n?e:null,!i.s),0<i.O&&(i.M=new Ys(we(i.Pa,i,i.g),i.O)),Fn(i.U,i.g,"readystatechange",i.nb),e=i.I?Hr(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),cs(),function Ji(i,e,n,o,u,c){i.info(function(){if(i.g)if(c)for(var g="",P=c.split("&"),k=0;k<P.length;k++){var z=P[k].split("=");if(1<z.length){var K=z[0];z=z[1];var se=K.split("_");g=2<=se.length&&"type"==se[1]?g+(K+"=")+z+"&":g+(K+"=redacted&")}}else g=null;else g=c;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+g})}(i.j,i.u,i.A,i.m,i.W,i.s)}function Vs(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function Ts(i,e,n){let u,o=!0;for(;!i.J&&i.C<n.length;){if(u=Cs(i,n),u==qr){4==e&&(i.o=4,Gr(14),o=!1),Xi(i.j,i.m,null,"[Incomplete Response]");break}if(u==eo){i.o=4,Gr(15),Xi(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}Xi(i.j,i.m,u,null),bo(i,u)}Vs(i)&&u!=qr&&u!=eo&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,Gr(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ro(e),e.M=!0,Gr(11))):(Xi(i.j,i.m,n,"[Invalid Chunked Response]"),Kr(i),Sn(i))}function Cs(i,e){var n=i.C,o=e.indexOf("\n",n);return-1==o?qr:(n=Number(e.substring(n,o)),isNaN(n)?eo:(o+=1)+n>e.length?qr:(e=e.slice(o,o+n),i.C=o+n,e))}function dr(i){i.Y=Date.now()+i.P,vt(i,i.P)}function vt(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=fi(we(i.lb,i),e)}function hn(i){i.B&&(lt.clearTimeout(i.B),i.B=null)}function Sn(i){0==i.l.H||i.J||Ei(i.l,i)}function Kr(i){hn(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,ls(i.V),Yo(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function bo(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||bs(n.i,i)))if(!i.K&&bs(n.i,i)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;ps(n),Bo(n)}yu(n),Gr(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=fi(we(n.ib,n),6e3));if(1>=As(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else jo(n,11)}else if((i.K||n.g==i)&&ps(n),!en(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let z=u[e];if(n.V=z[0],z=z[1],2==n.H)if("c"==z[0]){n.K=z[1],n.pa=z[2];const K=z[3];null!=K&&(n.ra=K,n.l.info("VER="+n.ra));const se=z[4];null!=se&&(n.Ga=se,n.l.info("SVER="+n.Ga));const Te=z[5];null!=Te&&"number"==typeof Te&&0<Te&&(n.L=o=1.5*Te,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const $e=i.g;if($e){const _t=$e.g?$e.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_t){var c=o.i;c.g||-1==_t.indexOf("spdy")&&-1==_t.indexOf("quic")&&-1==_t.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(yo(c,c.h),c.h=null))}if(o.F){const Ct=$e.g?$e.g.getResponseHeader("X-HTTP-Session-Id"):null;Ct&&(o.Da=Ct,tr(o.I,o.F,Ct))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var g=i;if((o=n).wa=hl(o,o.J?o.pa:null,o.Y),g.K){ns(o.i,g);var P=g,k=o.L;k&&P.setTimeout(k),P.B&&(hn(P),dr(P)),o.g=g}else wa(o);0<n.j.length&&$s(n)}else"stop"!=z[0]&&"close"!=z[0]||jo(n,7);else 3==n.H&&("stop"==z[0]||"close"==z[0]?"stop"==z[0]?jo(n,7):Ea(n):"noop"!=z[0]&&n.h&&n.h.Aa(z),n.A=0)}cs()}catch{}}function hr(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(ur(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function to(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(ur(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function pi(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(ur(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length,c=0;c<u;c++)e.call(void 0,o[c],n&&n[c],i)}(fe=Tn.prototype).setTimeout=function(i){this.P=i},fe.nb=function(i){i=i.target;const e=this.M;e&&3==bi(i)?e.l():this.Pa(i)},fe.Pa=function(i){try{if(i==this.g)e:{const K=bi(this.g);var e=this.g.Ia();if(this.g.da(),!(3>K)&&(3!=K||Xn||this.g&&(this.h.h||this.g.ja()||fs(this.g)))){this.J||4!=K||7==e||cs(),hn(this);var n=this.g.da();this.ca=n;t:if(Vs(this)){var o=fs(this.g);i="";var u=o.length,c=4==bi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Kr(this),Sn(this);var g="";break t}this.h.i=new lt.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:c&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,g=this.h.g}else g=this.g.ja();if(this.i=200==n,function Ao(i,e,n,o,u,c,g){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+c+" "+g})}(this.j,this.u,this.A,this.m,this.W,K,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var P,k=this.g;if((P=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!en(P)){var z=P;break t}}z=null}if(!(n=z)){this.i=!1,this.o=3,Gr(12),Kr(this),Sn(this);break e}Xi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bo(this,n)}this.S?(Ts(this,K,g),Xn&&this.i&&3==K&&(Fn(this.U,this.V,"tick",this.mb),this.V.start())):(Xi(this.j,this.m,g,null),bo(this,g)),4==K&&Kr(this),this.i&&!this.J&&(4==K?Ei(this.l,this):(this.i=!1,dr(this)))}else(function qa(i){const e={};i=(i.g&&2<=bi(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<i.length;o++){if(en(i[o]))continue;var n=Ht(i[o]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const c=e[u]||[];e[u]=c,c.push(n)}!function Yi(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<g.indexOf("Unknown SID")?(this.o=3,Gr(12)):(this.o=0,Gr(13)),Kr(this),Sn(this)}}}catch{}},fe.mb=function(){if(this.g){var i=bi(this.g),e=this.g.ja();this.C<e.length&&(hn(this),Ts(this,i,e),this.i&&4!=i&&dr(this))}},fe.cancel=function(){this.J=!0,Kr(this)},fe.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function mo(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(cs(),Gr(17)),Kr(this),this.o=2,Sn(this)):vt(this,this.Y-i)};var ji=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $t(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof $t){this.h=i.h,ea(this,i.j),this.s=i.s,this.g=i.g,jr(this,i.m),this.l=i.l;var e=i.i,n=new ta;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Or(this,n),this.o=i.o}else i&&(e=String(i).match(ji))?(this.h=!1,ea(this,e[1]||"",!0),this.s=mi(e[2]||""),this.g=mi(e[3]||"",!0),jr(this,e[4]),this.l=mi(e[5]||"",!0),Or(this,e[6]||"",!0),this.o=mi(e[7]||"")):(this.h=!1,this.i=new ta(null,this.h))}function gi(i){return new $t(i)}function ea(i,e,n){i.j=n?mi(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function jr(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Or(i,e,n){e instanceof ta?(i.i=e,function no(i,e){e&&!i.j&&(ds(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(na(this,o),ts(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=Us(e,zi)),i.i=new ta(e,i.h))}function tr(i,e,n){i.i.set(e,n)}function $i(i){return tr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function mi(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Us(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,Lo),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Lo(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}$t.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Us(e,Ds,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Us(e,Ds,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(Us(n,"/"==n.charAt(0)?Bs:es,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Us(n,Dn)),i.join("")};var Ds=/[#\/\?@]/g,es=/[#\?:]/g,Bs=/[#\?]/g,zi=/[#\?@]/g,Dn=/#/g;function ta(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function ds(i){i.g||(i.g=new Map,i.h=0,i.i&&function Hi(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var c=i[n].substring(0,o);u=i[n].substring(o+1)}else c=i[n];e(c,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function na(i,e){ds(i),e=_i(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function hs(i,e){return ds(i),e=_i(i,e),i.g.has(e)}function ts(i,e,n){na(i,e),0<n.length&&(i.i=null,i.g.set(_i(i,e),gt(n)),i.h+=n.length)}function _i(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Bu(i){this.l=i||oi,i=lt.PerformanceNavigationTiming?0<(i=lt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(lt.g&&lt.g.Ka&&lt.g.Ka()&&lt.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(fe=ta.prototype).add=function(i,e){ds(this),this.i=null,i=_i(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},fe.forEach=function(i,e){ds(this),this.g.forEach(function(n,o){n.forEach(function(u){i.call(e,u,o,this)},this)},this)},fe.ta=function(){ds(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=i[o];for(let c=0;c<u.length;c++)n.push(e[o])}return n},fe.Z=function(i){ds(this);let e=[];if("string"==typeof i)hs(this,i)&&(e=e.concat(this.g.get(_i(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},fe.set=function(i,e){return ds(this),this.i=null,hs(this,i=_i(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},fe.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const c=encodeURIComponent(String(o)),g=this.Z(o);for(o=0;o<g.length;o++){var u=c;""!==g[o]&&(u+="="+encodeURIComponent(String(g[o]))),i.push(u)}}return this.i=i.join("&")};var oi=10;function fr(i){return!!i.h||!!i.g&&i.g.size>=i.j}function As(i){return i.h?1:i.g?i.g.size:0}function bs(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function yo(i,e){i.g?i.g.add(e):i.h=e}function ns(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function _a(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return gt(i.i)}Bu.prototype.cancel=function(){if(this.i=_a(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var Ha=class{stringify(i){return lt.JSON.stringify(i,void 0)}parse(i){return lt.JSON.parse(i,void 0)}};function Ai(){this.g=new Ha}function $a(i,e,n){const o=n||"";try{hr(i,function(u,c){let g=u;Ar(u)&&(g=Ci(u)),e.push(o+c+"="+encodeURIComponent(g))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function rs(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function Ir(i){this.l=i.ec||null,this.j=i.ob||!1}function ya(i,e){Dt.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=va,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}be(Ir,Jo),Ir.prototype.g=function(){return new ya(this.l,this.j)},Ir.prototype.i=function(i){return function(){return i}}({}),be(ya,Dt);var va=0;function _r(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function js(i){i.readyState=4,i.l=null,i.j=null,i.A=null,ra(i)}function ra(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(fe=ya.prototype).open=function(i,e){if(this.readyState!=va)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,ra(this)},fe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||lt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,js(this)),this.readyState=va},fe.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,ra(this)),this.g&&(this.readyState=3,ra(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof lt.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_r(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},fe.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?js(this):ra(this),3==this.readyState&&_r(this)}},fe.Za=function(i){this.g&&(this.response=this.responseText=i,js(this))},fe.Ya=function(i){this.g&&(this.response=i,js(this))},fe.ka=function(){this.g&&js(this)},fe.setRequestHeader=function(i,e){this.v.append(i,e)},fe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},fe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(ya.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var ju=lt.JSON.parse;function wr(i){Dt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ga,this.L=this.M=!1}be(wr,Dt);var Ga="",Hu=/^https?$/i,ia=["POST","PUT"];function sa(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Vo(i),Hs(i)}function Vo(i){i.F||(i.F=!0,Lt(i,"complete"),Lt(i,"error"))}function Uo(i){if(i.h&&typeof Et<"u"&&(!i.C[1]||4!=bi(i)||2!=i.da()))if(i.v&&4==bi(i))Do(i.La,0,i);else if(Lt(i,"readystatechange"),4==bi(i)){i.h=!1;try{const g=i.da();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===g){var u=String(i.I).match(ji)[1]||null;!u&&lt.self&&lt.self.location&&(u=lt.self.location.protocol.slice(0,-1)),o=!Hu.test(u?u.toLowerCase():"")}n=o}if(n)Lt(i,"complete"),Lt(i,"success");else{i.m=6;try{var c=2<bi(i)?i.g.statusText:""}catch{c=""}i.j=c+" ["+i.da()+"]",Vo(i)}}finally{Hs(i)}}}function Hs(i,e){if(i.g){Wa(i);const n=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||Lt(i,"ready");try{n.onreadystatechange=o}catch{}}}function Wa(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(lt.clearTimeout(i.A),i.A=null)}function bi(i){return i.g?i.g.readyState:0}function fs(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case Ga:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function ir(i){let e="";return mn(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function yi(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=ir(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):tr(i,e,n))}function Ss(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function vi(i){this.Ga=0,this.j=[],this.l=new Di,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ss("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ss("baseRetryDelayMs",5e3,i),this.hb=Ss("retryDelaySeedMs",1e4,i),this.eb=Ss("forwardChannelMaxRetries",2,i),this.xa=Ss("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new Bu(i&&i.concurrentRequestLimit),this.Ja=new Ai,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ea(i){if(oa(i),3==i.H){var e=i.W++,n=gi(i.I);if(tr(n,"SID",i.K),tr(n,"RID",e),tr(n,"TYPE","terminate"),ro(i,n),(e=new Tn(i,i.l,e)).L=2,e.v=$i(gi(n)),n=!1,lt.navigator&&lt.navigator.sendBeacon)try{n=lt.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&lt.Image&&((new Image).src=e.v,n=!0),n||(e.g=Ta(e.l,null),e.g.ha(e.v)),e.G=Date.now(),dr(e)}Rs(i)}function Bo(i){i.g&&(Ro(i),i.g.cancel(),i.g=null)}function oa(i){Bo(i),i.u&&(lt.clearTimeout(i.u),i.u=null),ps(i),i.i.cancel(),i.m&&("number"==typeof i.m&&lt.clearTimeout(i.m),i.m=null)}function $s(i){if(!fr(i.i)&&!i.m){i.m=!0;var e=i.Na;Tt||Wn(),Xt||(Tt(),Xt=!0),Gn.add(e,i),i.C=0}}function So(i,e){var n;n=e?e.m:i.W++;const o=gi(i.I);tr(o,"SID",i.K),tr(o,"RID",n),tr(o,"AID",i.V),ro(i,o),i.o&&i.s&&yi(o,i.o,i.s),n=new Tn(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=Ka(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),yo(i.i,n),Br(n,o,e)}function ro(i,e){i.na&&mn(i.na,function(n,o){tr(e,o,n)}),i.h&&hr({},function(n,o){tr(e,o,n)})}function Ka(i,e,n){n=Math.min(i.j.length,n);var o=i.h?we(i.h.Va,i.h,i):null;e:{var u=i.j;let c=-1;for(;;){const g=["count="+n];-1==c?0<n?(c=u[0].g,g.push("ofs="+c)):c=0:g.push("ofs="+c);let P=!0;for(let k=0;k<n;k++){let z=u[k].g;const K=u[k].map;if(z-=c,0>z)c=Math.max(0,u[k].g-100),P=!1;else try{$a(K,g,"req"+z+"_")}catch{o&&o(K)}}if(P){o=g.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,o}function wa(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;Tt||Wn(),Xt||(Tt(),Xt=!0),Gn.add(e,i),i.A=0}}function yu(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=fi(we(i.Ma,i),Zr(i,i.A)),i.A++,0))}function Ro(i){null!=i.B&&(lt.clearTimeout(i.B),i.B=null)}function aa(i){i.g=new Tn(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=gi(i.wa);tr(e,"RID","rpc"),tr(e,"SID",i.K),tr(e,"AID",i.V),tr(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&tr(e,"TO",i.qa),tr(e,"TYPE","xmlhttp"),ro(i,e),i.o&&i.s&&yi(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.v=$i(gi(e)),n.s=null,n.S=!0,Ls(n,i)}function ps(i){null!=i.v&&(lt.clearTimeout(i.v),i.v=null)}function Ei(i,e){var n=null;if(i.g==e){ps(i),Ro(i),i.g=null;var o=2}else{if(!bs(i.i,e))return;n=e.F,ns(i.i,e),o=1}if(0!=i.H)if(e.i)if(1==o){n=e.s?e.s.length:0,e=Date.now()-e.G;var u=i.C;Lt(o=ws(),new mu(o,n)),$s(i)}else wa(i);else if(3==(u=e.o)||0==u&&0<e.ca||!(1==o&&function Ia(i,e){return!(As(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=fi(we(i.Na,i,e),Zr(i,i.C)),i.C++,0)))}(i,e)||2==o&&yu(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:jo(i,5);break;case 4:jo(i,10);break;case 3:jo(i,6);break;default:jo(i,2)}}function Zr(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function jo(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var o=we(i.pb,i);n||(n=new $t("//www.google.com/images/cleardot.gif"),lt.location&&"http"==lt.location.protocol||ea(n,"https"),$i(n)),function za(i,e){const n=new Di;if(lt.Image){const o=new Image;o.onload=Ve(rs,n,o,"TestLoadImage: loaded",!0,e),o.onerror=Ve(rs,n,o,"TestLoadImage: error",!1,e),o.onabort=Ve(rs,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=Ve(rs,n,o,"TestLoadImage: timeout",!1,e),lt.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else Gr(2);i.H=0,i.h&&i.h.za(e),Rs(i),oa(i)}function Rs(i){if(i.H=0,i.ma=[],i.h){const e=_a(i.i);(0!=e.length||0!=i.j.length)&&(mr(i.ma,e),mr(i.ma,i.j),i.i.i.length=0,gt(i.j),i.j.length=0),i.h.ya()}}function hl(i,e,n){var o=n instanceof $t?gi(n):new $t(n);if(""!=o.g)e&&(o.g=e+"."+o.g),jr(o,o.m);else{var u=lt.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var c=new $t(null);o&&ea(c,o),e&&(c.g=e),u&&jr(c,u),n&&(c.l=n),o=c}return e=i.Da,(n=i.F)&&e&&tr(o,n,e),tr(o,"VER",i.ra),ro(i,o),o}function Ta(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wr(n&&i.Ha&&!i.va?new Ir({ob:!0}):i.va)).Oa(i.J),e}function Za(){}function vu(){if(En&&!(10<=Number(zn)))throw Error("Environmental error: no available transport.")}function is(i,e){Dt.call(this),this.g=new vi(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!en(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!en(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new io(this)}function ua(i){ja.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function $u(){Xo.call(this),this.status=1}function io(i){this.g=i}function Gi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Qa(i,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)o[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)o[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var c=i.g[3],g=(e=i.g[0])+(c^(n=i.g[1])&((u=i.g[2])^c))+o[0]+3614090360&4294967295;g=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=n+(g<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[1]+3905402710&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[3]+3250441966&4294967295)<<22&4294967295|g>>>10))+((g=e+(c^n&(u^c))+o[4]+4118548399&4294967295)<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[5]+1200080426&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[7]+4249261313&4294967295)<<22&4294967295|g>>>10))+((g=e+(c^n&(u^c))+o[8]+1770035416&4294967295)<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[9]+2336552879&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[11]+2304563134&4294967295)<<22&4294967295|g>>>10))+((g=e+(c^n&(u^c))+o[12]+1804603682&4294967295)<<7&4294967295|g>>>25))+((g=c+(u^e&(n^u))+o[13]+4254626195&4294967295)<<12&4294967295|g>>>20))+((g=u+(n^c&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^u&(c^e))+o[15]+1236535329&4294967295)<<22&4294967295|g>>>10))+((g=e+(u^c&(n^u))+o[1]+4129170786&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[11]+643717713&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[0]+3921069994&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^c&(n^u))+o[5]+3593408605&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[15]+3634488961&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[4]+3889429448&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^c&(n^u))+o[9]+568446438&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[3]+4107603335&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[8]+1163531501&4294967295)<<20&4294967295|g>>>12))+((g=e+(u^c&(n^u))+o[13]+2850285829&4294967295)<<5&4294967295|g>>>27))+((g=c+(n^u&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|g>>>23))+((g=u+(e^n&(c^e))+o[7]+1735328473&4294967295)<<14&4294967295|g>>>18))+((g=n+(c^e&(u^c))+o[12]+2368359562&4294967295)<<20&4294967295|g>>>12))+((g=e+(n^u^c)+o[5]+4294588738&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[8]+2272392833&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[14]+4259657740&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^c)+o[1]+2763975236&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[4]+1272893353&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[10]+3200236656&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^c)+o[13]+681279174&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[0]+3936430074&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[6]+76029189&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^u^c)+o[9]+3654602809&4294967295)<<4&4294967295|g>>>28))+((g=c+(e^n^u)+o[12]+3873151461&4294967295)<<11&4294967295|g>>>21))+((g=u+(c^e^n)+o[15]+530742520&4294967295)<<16&4294967295|g>>>16))+((g=n+(u^c^e)+o[2]+3299628645&4294967295)<<23&4294967295|g>>>9))+((g=e+(u^(n|~c))+o[0]+4096336452&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[7]+1126891415&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(c|~n))+o[14]+2878612391&4294967295)<<15&4294967295|g>>>17))+((g=n+(c^(u|~e))+o[5]+4237533241&4294967295)<<21&4294967295|g>>>11))+((g=e+(u^(n|~c))+o[12]+1700485571&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[3]+2399980690&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(c|~n))+o[10]+4293915773&4294967295)<<15&4294967295|g>>>17))+((g=n+(c^(u|~e))+o[1]+2240044497&4294967295)<<21&4294967295|g>>>11))+((g=e+(u^(n|~c))+o[8]+1873313359&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[15]+4264355552&4294967295)<<10&4294967295|g>>>22))+((g=u+(e^(c|~n))+o[6]+2734768916&4294967295)<<15&4294967295|g>>>17))+((g=n+(c^(u|~e))+o[13]+1309151649&4294967295)<<21&4294967295|g>>>11))+((c=(e=n+((g=e+(u^(n|~c))+o[4]+4149444226&4294967295)<<6&4294967295|g>>>26))+((g=c+(n^(e|~u))+o[11]+3174756917&4294967295)<<10&4294967295|g>>>22))^((u=c+((g=u+(e^(c|~n))+o[2]+718787259&4294967295)<<15&4294967295|g>>>17))|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(g<<21&4294967295|g>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+c&4294967295}function S(i,e){this.h=e;for(var n=[],o=!0,u=i.length-1;0<=u;u--){var c=0|i[u];o&&c==e||(n[u]=c,o=!1)}this.g=n}(fe=wr.prototype).Oa=function(i){this.M=i},fe.ha=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Wr.g(),this.C=function _u(i){return i.h||(i.h=i.i())}(this.u?this.u:Wr),this.g.onreadystatechange=we(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(c){return void sa(this,c)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const c of o.keys())n.set(c,o.get(c))}o=Array.from(n.keys()).find(c=>"content-type"==c.toLowerCase()),u=lt.FormData&&i instanceof lt.FormData,!(0<=yt(ia,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,g]of n)this.g.setRequestHeader(c,g);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Wa(this),0<this.B&&((this.L=function dl(i){return En&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=we(this.ua,this)):this.A=Do(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){sa(this,c)}},fe.ua=function(){typeof Et<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Lt(this,"timeout"),this.abort(8))},fe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Lt(this,"complete"),Lt(this,"abort"),Hs(this))},fe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hs(this,!0)),wr.$.N.call(this)},fe.La=function(){this.s||(this.G||this.v||this.l?Uo(this):this.kb())},fe.kb=function(){Uo(this)},fe.isActive=function(){return!!this.g},fe.da=function(){try{return 2<bi(this)?this.g.status:-1}catch{return-1}},fe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},fe.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),ju(e)}},fe.Ia=function(){return this.m},fe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(fe=vi.prototype).ra=8,fe.H=1,fe.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new Tn(this,this.l,i);let c=this.s;if(this.U&&(c?(c=Hr(c),Ur(c,this.U)):c=this.U),null!==this.o||this.O||(u.I=c,c=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Ka(this,u,e),tr(n=gi(this.I),"RID",i),tr(n,"CVER",22),this.F&&tr(n,"X-HTTP-Session-Id",this.F),ro(this,n),c&&(this.O?e="headers="+encodeURIComponent(String(ir(c)))+"&"+e:this.o&&yi(n,this.o,c)),yo(this.i,u),this.bb&&tr(n,"TYPE","init"),this.P?(tr(n,"$req",e),tr(n,"SID","null"),u.aa=!0,Br(u,n,null)):Br(u,n,e),this.H=2}}else 3==this.H&&(i?So(this,i):0==this.j.length||fr(this.i)||So(this))},fe.Ma=function(){if(this.u=null,aa(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=fi(we(this.jb,this),i)}},fe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Gr(10),Bo(this),aa(this))},fe.ib=function(){null!=this.v&&(this.v=null,Bo(this),yu(this),Gr(19))},fe.pb=function(i){i?(this.l.info("Successfully pinged google.com"),Gr(2)):(this.l.info("Failed to ping google.com"),Gr(1))},fe.isActive=function(){return!!this.h&&this.h.isActive(this)},(fe=Za.prototype).Ba=function(){},fe.Aa=function(){},fe.za=function(){},fe.ya=function(){},fe.isActive=function(){return!0},fe.Va=function(){},vu.prototype.g=function(i,e){return new is(i,e)},be(is,Dt),is.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;Gr(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=hl(i,null,i.Y),$s(i)},is.prototype.close=function(){Ea(this.g)},is.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=Ci(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&$s(e)},is.prototype.N=function(){this.g.h=null,delete this.j,Ea(this.g),delete this.g,is.$.N.call(this)},be(ua,ja),be($u,Xo),be(io,Za),io.prototype.Ba=function(){Lt(this.g,"a")},io.prototype.Aa=function(i){Lt(this.g,new ua(i))},io.prototype.za=function(i){Lt(this.g,new $u)},io.prototype.ya=function(){Lt(this.g,"b")},be(Gi,function fl(){this.blockSize=-1}),Gi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Gi.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,o=this.m,u=this.h,c=0;c<e;){if(0==u)for(;c<=n;)Qa(this,i,c),c+=this.blockSize;if("string"==typeof i){for(;c<e;)if(o[u++]=i.charCodeAt(c++),u==this.blockSize){Qa(this,o),u=0;break}}else for(;c<e;)if(o[u++]=i[c++],u==this.blockSize){Qa(this,o),u=0;break}}this.h=u,this.i+=e},Gi.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)i[n++]=this.g[e]>>>o&255;return i};var q={};function L(i){return-128<=i&&128>i?function $n(i,e){var n=q;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new S([0|e],0>e?-1:0)}):new S([0|i],0>i?-1:0)}function G(i){if(isNaN(i)||!isFinite(i))return M;if(0>i)return He(G(-i));for(var e=[],n=1,o=0;i>=n;o++)e[o]=i/n|0,n*=ze;return new S(e,0)}var ze=4294967296,M=L(0),F=L(1),A=L(16777216);function j(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function X(i){return-1==i.h}function He(i){for(var e=i.g.length,n=[],o=0;o<e;o++)n[o]=~i.g[o];return new S(n,~i.h).add(F)}function ot(i,e){return i.add(He(e))}function tn(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function qn(i,e){this.g=i,this.h=e}function Qr(i,e){if(j(e))throw Error("division by zero");if(j(i))return new qn(M,M);if(X(i))return e=Qr(He(i),e),new qn(He(e.g),He(e.h));if(X(e))return e=Qr(i,He(e)),new qn(He(e.g),e.h);if(30<i.g.length){if(X(i)||X(e))throw Error("slowDivide_ only works with positive integers.");for(var n=F,o=e;0>=o.X(i);)n=Si(n),o=Si(o);var u=ni(n,1),c=ni(o,1);for(o=ni(o,2),n=ni(n,2);!j(o);){var g=c.add(o);0>=g.X(i)&&(u=u.add(n),c=g),o=ni(o,1),n=ni(n,1)}return e=ot(i,u.R(e)),new qn(u,e)}for(u=M;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),g=(c=G(n)).R(e);X(g)||0<g.X(i);)g=(c=G(n-=o)).R(e);j(c)&&(c=F),u=u.add(c),i=ot(i,g)}return new qn(u,i)}function Si(i){for(var e=i.g.length+1,n=[],o=0;o<e;o++)n[o]=i.D(o)<<1|i.D(o-1)>>>31;return new S(n,i.h)}function ni(i,e){var n=e>>5;e%=32;for(var o=i.g.length-n,u=[],c=0;c<o;c++)u[c]=0<e?i.D(c+n)>>>e|i.D(c+n+1)<<32-e:i.D(c+n);return new S(u,i.h)}(fe=S.prototype).ea=function(){if(X(this))return-He(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);i+=(0<=o?o:ze+o)*e,e*=ze}return i},fe.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(j(this))return"0";if(X(this))return"-"+He(this).toString(i);for(var e=G(Math.pow(i,6)),n=this,o="";;){var u=Qr(n,e).g,c=((0<(n=ot(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(j(n=u))return c+o;for(;6>c.length;)c="0"+c;o=c+o}},fe.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},fe.X=function(i){return X(i=ot(this,i))?-1:j(i)?0:1},fe.abs=function(){return X(this)?He(this):this},fe.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0,u=0;u<=e;u++){var c=o+(65535&this.D(u))+(65535&i.D(u)),g=(c>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);o=g>>>16,n[u]=(g&=65535)<<16|(c&=65535)}return new S(n,-2147483648&n[n.length-1]?-1:0)},fe.R=function(i){if(j(this)||j(i))return M;if(X(this))return X(i)?He(this).R(He(i)):He(He(this).R(i));if(X(i))return He(this.R(He(i)));if(0>this.X(A)&&0>i.X(A))return G(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var u=0;u<i.g.length;u++){var c=this.D(o)>>>16,g=65535&this.D(o),P=i.D(u)>>>16,k=65535&i.D(u);n[2*o+2*u]+=g*k,tn(n,2*o+2*u),n[2*o+2*u+1]+=c*k,tn(n,2*o+2*u+1),n[2*o+2*u+1]+=g*P,tn(n,2*o+2*u+1),n[2*o+2*u+2]+=c*P,tn(n,2*o+2*u+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new S(n,0)},fe.gb=function(i){return Qr(this,i).h},fe.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&i.D(o);return new S(n,this.h&i.h)},fe.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|i.D(o);return new S(n,this.h|i.h)},fe.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^i.D(o);return new S(n,this.h^i.h)},vu.prototype.createWebChannel=vu.prototype.g,is.prototype.send=is.prototype.u,is.prototype.open=is.prototype.m,is.prototype.close=is.prototype.close,Fo.NO_ERROR=0,Fo.TIMEOUT=8,Fo.HTTP_ERROR=6,_o.COMPLETE="complete",Ba.EventType=xi,xi.OPEN="a",xi.CLOSE="b",xi.ERROR="c",xi.MESSAGE="d",Dt.prototype.listen=Dt.prototype.O,wr.prototype.listenOnce=wr.prototype.P,wr.prototype.getLastError=wr.prototype.Sa,wr.prototype.getLastErrorCode=wr.prototype.Ia,wr.prototype.getStatus=wr.prototype.da,wr.prototype.getResponseJson=wr.prototype.Wa,wr.prototype.getResponseText=wr.prototype.ja,wr.prototype.send=wr.prototype.ha,wr.prototype.setWithCredentials=wr.prototype.Oa,Gi.prototype.digest=Gi.prototype.l,Gi.prototype.reset=Gi.prototype.reset,Gi.prototype.update=Gi.prototype.j,S.prototype.add=S.prototype.add,S.prototype.multiply=S.prototype.R,S.prototype.modulo=S.prototype.gb,S.prototype.compare=S.prototype.X,S.prototype.toNumber=S.prototype.ea,S.prototype.toString=S.prototype.toString,S.prototype.getBits=S.prototype.D,S.fromNumber=G,S.fromString=function de(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return He(de(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=G(Math.pow(e,8)),o=M,u=0;u<i.length;u+=8){var c=Math.min(8,i.length-u),g=parseInt(i.substring(u,u+c),e);8>c?(c=G(Math.pow(e,c)),o=o.R(c).add(G(g))):o=(o=o.R(n)).add(G(g))}return o};var Wi=rt.createWebChannelTransport=function(){return new vu},Ca=rt.getStatEventTarget=function(){return ws()},qi=rt.ErrorCode=Fo,Po=rt.EventType=_o,zu=rt.Event=zr,Sr=rt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Eu=rt.FetchXmlHttpFactory=Ir,Da=rt.WebChannel=Ba,Ps=rt.XhrIo=wr,Md=rt.Md5=Gi,Ya=rt.Integer=S;const Iu="@firebase/firestore";class An{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");let Mo="10.5.2";const Ki=new Ce.Yd("@firebase/firestore");function zs(){return Ki.logLevel}function at(i,...e){if(Ki.logLevel<=Ce.in.DEBUG){const n=e.map(wu);Ki.debug(`Firestore (${Mo}): ${i}`,...n)}}function yr(i,...e){if(Ki.logLevel<=Ce.in.ERROR){const n=e.map(wu);Ki.error(`Firestore (${Mo}): ${i}`,...n)}}function gs(i,...e){if(Ki.logLevel<=Ce.in.WARN){const n=e.map(wu);Ki.warn(`Firestore (${Mo}): ${i}`,...n)}}function wu(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Vt(i="Unexpected state"){const e=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: `+i;throw yr(e),new Error(e)}function jt(i,e){i||Vt()}function St(i,e){return i}const We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ye extends Ge.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Ja{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Gu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(An.UNAUTHENTICATED))}shutdown(){}}class pl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Xa{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const c=z=>this.i!==u?(u=this.i,n(z)):Promise.resolve();let g=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Rr,e.enqueueRetryable(()=>c(this.currentUser))};const P=()=>{const z=g;e.enqueueRetryable((0,Ie.Z)(function*(){yield z.promise,yield c(o.currentUser)}))},k=z=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=z,this.auth.addAuthTokenListener(this.o),P()};this.t.onInit(z=>k(z)),setTimeout(()=>{if(!this.auth){const z=this.t.getImmediate({optional:!0});z?k(z):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Rr)}},0),P()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(jt("string"==typeof o.accessToken),new Ja(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return jt(null===e||"string"==typeof e),new An(e)}}class ac{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=An.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Gs{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new ac(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(An.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Uc{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const o=c=>{null!=c.error&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const g=c.token!==this.R;return this.R=c.token,at("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>o(c))};const u=c=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>u(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?u(c):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(jt("string"==typeof n.token),this.R=n.token,new Wu(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Qn(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class ai{static newId(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=Qn(40);for(let c=0;c<u.length;++c)o.length<20&&u[c]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[c]%62))}return o}}function In(i,e){return i<e?-1:i>e?1:0}function Kn(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function xl(i){return i+"\0"}class Tr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ye(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ye(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ye(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ye(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tr.fromMillis(Date.now())}static fromDate(e){return Tr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new Tr(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?In(this.nanoseconds,e.nanoseconds):In(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class zt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new zt(e)}static min(){return new zt(new Tr(0,0))}static max(){return new zt(new Tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class eu{constructor(e,n,o){void 0===n?n=0:n>e.length&&Vt(),void 0===o?o=e.length-n:o>e.length-n&&Vt(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===eu.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof eu?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const c=e.get(u),g=n.get(u);if(c<g)return-1;if(c>g)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Bn extends eu{construct(e,n,o){return new Bn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new Ye(We.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new Bn(n)}static emptyPath(){return new Bn([])}}const Od=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fr extends eu{construct(e,n,o){return new Fr(e,n,o)}static isValidIdentifier(e){return Od.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fr(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const c=()=>{if(0===o.length)throw new Ye(We.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let g=!1;for(;u<e.length;){const P=e[u];if("\\"===P){if(u+1===e.length)throw new Ye(We.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const k=e[u+1];if("\\"!==k&&"."!==k&&"`"!==k)throw new Ye(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=k,u+=2}else"`"===P?(g=!g,u++):"."!==P||g?(o+=P,u++):(c(),u++)}if(c(),g)throw new Ye(We.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fr(n)}static emptyPath(){return new Fr([])}}class wt{constructor(e){this.path=e}static fromPath(e){return new wt(Bn.fromString(e))}static fromName(e){return new wt(Bn.fromString(e).popFirst(5))}static empty(){return new wt(Bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Bn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Bn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wt(new Bn(e.slice()))}}class Yr{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function Ws(i){return i.fields.find(e=>2===e.kind)}function Aa(i){return i.fields.filter(e=>2!==e.kind)}Yr.UNKNOWN_ID=-1;class Ri{constructor(e,n){this.fieldPath=e,this.kind=n}}class tu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new tu(0,Ms.min())}}function kl(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=zt.fromTimestamp(1e9===o?new Tr(n+1,0):new Tr(n,o));return new Ms(u,wt.empty(),e)}function ml(i){return new Ms(i.readTime,i.key,-1)}class Ms{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new Ms(zt.min(),wt.empty(),-1)}static max(){return new Ms(zt.max(),wt.empty(),-1)}}function _l(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=wt.comparator(i.documentKey,e.documentKey),0!==n?n:In(i.largestBatchId,e.largestBatchId))}const Bc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function N(i){return T.apply(this,arguments)}function T(){return T=(0,Ie.Z)(function*(i){if(i.code!==We.FAILED_PRECONDITION||i.message!==Bc)throw i;at("LocalStore","Unexpectedly lost primary lease")}),T.apply(this,arguments)}class C{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new C((o,u)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(o,u)},this.catchCallback=c=>{this.wrapFailure(n,c).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof C?n:C.resolve(n)}catch(n){return C.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):C.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):C.reject(n)}static resolve(e){return new C((n,o)=>{n(e)})}static reject(e){return new C((n,o)=>{o(e)})}static waitFor(e){return new C((n,o)=>{let u=0,c=0,g=!1;e.forEach(P=>{++u,P.next(()=>{++c,g&&c===u&&n()},k=>o(k))}),g=!0,c===u&&n()})}static or(e){let n=C.resolve(!1);for(const o of e)n=n.next(u=>u?C.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,c)=>{o.push(n.call(this,u,c))}),this.waitFor(o)}static mapArray(e,n){return new C((o,u)=>{const c=e.length,g=new Array(c);let P=0;for(let k=0;k<c;k++){const z=k;n(e[z]).next(K=>{g[z]=K,++P,P===c&&o(g)},K=>u(K))}})}static doWhile(e,n){return new C((o,u)=>{const c=()=>{!0===e()?n().next(()=>{c()},u):o()};c()})}}class U{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Rr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new je(e,n.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=Pn(o.target.error);this.V.reject(new je(e,u))}}static open(e,n,o,u){try{return new U(n,e.transaction(u,o))}catch(c){throw new je(n,c)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(at("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Mt(n)}}class Y{constructor(e,n,o){this.name=e,this.version=n,this.p=o,12.2===Y.S((0,Ge.z$)())&&yr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return at("SimpleDb","Removing database:",e),fn(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ge.hl)())return!1;if(Y.C())return!0;const e=(0,Ge.z$)(),n=Y.S(e),o=0<n&&n<10,u=Y.v(e),c=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var n=this;return(0,Ie.Z)(function*(){return n.db||(at("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const c=indexedDB.open(n.name,n.version);c.onsuccess=g=>{o(g.target.result)},c.onblocked=()=>{u(new je(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=g=>{const P=g.target.error;u("VersionError"===P.name?new Ye(We.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===P.name?new Ye(We.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+P):new je(e,P))},c.onupgradeneeded=g=>{at("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',g.oldVersion),n.p.N(g.target.result,c.transaction,g.oldVersion,n.version).next(()=>{at("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=o=>n.B(o)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var c=this;return(0,Ie.Z)(function*(){const g="readonly"===n;let P=0;for(;;){++P;try{c.db=yield c.O(e);const k=U.open(c.db,e,g?"readonly":"readwrite",o),z=u(k).next(K=>(k.g(),K)).catch(K=>(k.abort(K),C.reject(K))).toPromise();return z.catch(()=>{}),yield k.m,z}catch(k){const z=k,K="FirebaseError"!==z.name&&P<3;if(at("SimpleDb","Transaction failed with error:",z.message,"Retrying:",K),c.close(),!K)return Promise.reject(z)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class le{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return fn(this.k.delete())}}class je extends Ye{constructor(e,n){super(We.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ue(i){return"IndexedDbTransactionError"===i.name}class Mt{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(at("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(at("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),fn(o)}add(e){return at("SimpleDb","ADD",this.store.name,e,e),fn(this.store.add(e))}get(e){return fn(this.store.get(e)).next(n=>(void 0===n&&(n=null),at("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return at("SimpleDb","DELETE",this.store.name,e),fn(this.store.delete(e))}count(){return at("SimpleDb","COUNT",this.store.name),fn(this.store.count())}W(e,n){const o=this.options(e,n);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),c=[];return this.G(u,(g,P)=>{c.push(P)}).next(()=>c)}{const u=this.store.getAll(o.range);return new C((c,g)=>{u.onerror=P=>{g(P.target.error)},u.onsuccess=P=>{c(P.target.result)}})}}j(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new C((u,c)=>{o.onerror=g=>{c(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}H(e,n){at("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.J=!1;const u=this.cursor(o);return this.G(u,(c,g,P)=>P.delete())}Y(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.G(u,n)}Z(e){const n=this.cursor({});return new C((o,u)=>{n.onerror=c=>{const g=Pn(c.target.error);u(g)},n.onsuccess=c=>{const g=c.target.result;g?e(g.primaryKey,g.value).next(P=>{P?g.continue():o()}):o()}})}G(e,n){const o=[];return new C((u,c)=>{e.onerror=g=>{c(g.target.error)},e.onsuccess=g=>{const P=g.target.result;if(!P)return void u();const k=new le(P),z=n(P.primaryKey,P.value,k);if(z instanceof C){const K=z.catch(se=>(k.done(),C.reject(se)));o.push(K)}k.isDone?u():null===k.$?P.continue():P.continue(k.$)}}).next(()=>C.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function fn(i){return new C((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=Pn(o.target.error);n(u)}})}let Rn=!1;function Pn(i){const e=Y.S((0,Ge.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new Ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Rn||(Rn=!0,setTimeout(()=>{throw o},0)),o}}return i}class nr{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;at("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ie.Z)(function*(){n.task=null;try{at("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(o){Ue(o)?at("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield N(o)}yield n.ee(6e4)}))}}class qu{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,Ie.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.ne(o,e))})()}ne(e,n){const o=new Set;let u=n,c=!0;return C.doWhile(()=>!0===c&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!o.has(g))return at("IndexBackiller",`Processing collection: ${g}`),this.re(e,g,u).next(P=>{u-=P,o.add(g)});c=!1})).next(()=>n-u)}re(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(c=>{const g=c.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.ie(u,c)).next(P=>(at("IndexBackiller",`Updating offset: ${P}`),this.localStore.indexManager.updateCollectionGroup(e,n,P))).next(()=>g.size)}))}ie(e,n){let o=e;return n.changes.forEach((u,c)=>{const g=ml(c);_l(g,o)>0&&(o=g)}),new Ms(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Pi=(()=>{class i{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=u=>this.se(u),this.oe=u=>o.writeSequenceNumber(u))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function Ho(i){return null==i}function so(i){return 0===i&&1/i==-1/0}function Fl(i){return"number"==typeof i&&Number.isInteger(i)&&!so(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function ms(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Tu(e)),e=yl(i.get(n),e);return Tu(e)}function yl(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const c=i.charAt(u);switch(c){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=c}}return n}function Tu(i){return i+"\x01\x01"}function vo(i){const e=i.length;if(jt(e>=2),2===e)return jt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Bn.emptyPath();const n=e-2,o=[];let u="";for(let c=0;c<e;){const g=i.indexOf("\x01",c);switch((g<0||g>n)&&Vt(),i.charAt(g+1)){case"\x01":const P=i.substring(c,g);let k;0===u.length?k=P:(u+=P,k=u,u=""),o.push(k);break;case"\x10":u+=i.substring(c,g),u+="\0";break;case"\x11":u+=i.substring(c,g+1);break;default:Vt()}c=g+2}return new Bn(o)}const uc=["userId","batchId"];function nu(i,e){return[i,ms(e)]}function Ll(i,e,n){return[i,ms(e),n]}const vl={},Ku=["prefixPath","collectionGroup","readTime","documentId"],Vl=["prefixPath","collectionGroup","documentId"],Wf=["collectionGroup","readTime","prefixPath","documentId"],Cu=["canonicalId","targetId"],ru=["targetId","path"],Zu=["path","targetId"],Nd=["collectionId","parent"],jc=["indexId","uid"],qf=["uid","sequenceNumber"],xd=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Hc=["indexId","uid","orderedDocumentKey"],Sh=["userId","collectionPath","documentId"],Rh=["userId","collectionPath","largestBatchId"],$c=["userId","collectionGroup","largestBatchId"],ba=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ph=[...ba,"documentOverlays"],Du=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],lc=Du,El=[...lc,"indexConfiguration","indexState","indexEntries"];class Ul extends b{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function ss(i,e){const n=St(i);return Y.M(n.ae,e)}function Os(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Sa(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function oo(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Pr{constructor(e,n){this.comparator=e,this.root=n||Fi.EMPTY}insert(e,n){return new Pr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fi.BLACK,null,null))}remove(e){return new Pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new iu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new iu(this.root,e,this.comparator,!1)}getReverseIterator(){return new iu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new iu(this.root,e,this.comparator,!0)}}class iu{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?o(e.key,n):1,n&&u&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fi{constructor(e,n,o,u,c){this.key=e,this.value=n,this.color=o??Fi.RED,this.left=u??Fi.EMPTY,this.right=c??Fi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,c){return new Fi(e??this.key,n??this.value,o??this.color,u??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const c=o(e,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===c?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Fi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return Fi.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Vt();const e=this.left.check();if(e!==this.right.check())throw Vt();return e+(this.isRed()?0:1)}}Fi.EMPTY=null,Fi.RED=!0,Fi.BLACK=!1,Fi.EMPTY=new class{constructor(){this.size=0}get key(){throw Vt()}get value(){throw Vt()}get color(){throw Vt()}get left(){throw Vt()}get right(){throw Vt()}copy(e,n,o,u,c){return this}insert(e,n,o){return new Fi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cr{constructor(e){this.comparator=e,this.data=new Pr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qu(this.data.getIterator())}getIteratorFrom(e){return new Qu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof Cr)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=o.getNext().key;if(0!==this.comparator(u,c))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Cr(this.comparator);return n.data=e,n}}class Qu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function su(i){return i.hasNext()?i.getNext():void 0}class _s{constructor(e){this.fields=e,e.sort(Fr.comparator)}static empty(){return new _s([])}unionWith(e){let n=new Cr(Fr.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new _s(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Kn(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class zc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ii{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new zc("Invalid base64 string: "+c):c}}(e);return new Ii(n)}static fromUint8Array(e){const n=function(u){let c="";for(let g=0;g<u.length;++g)c+=String.fromCharCode(u[g]);return c}(e);return new Ii(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return In(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ii.EMPTY_BYTE_STRING=new Ii("");const Wc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(i){if(jt(!!i),"string"==typeof i){let e=0;const n=Wc.exec(i);if(jt(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:vr(i.seconds),nanos:vr(i.nanos)}}function vr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function ao(i){return"string"==typeof i?Ii.fromBase64String(i):Ii.fromUint8Array(i)}function cc(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Au(i){const e=i.mapValue.fields.__previous_value__;return cc(e)?Au(e):e}function Il(i){const e=os(i.mapValue.fields.__local_write_time__.timestampValue);return new Tr(e.seconds,e.nanos)}class bu{constructor(e,n,o,u,c,g,P,k,z){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=c,this.forceLongPolling=g,this.autoDetectLongPolling=P,this.longPollingOptions=k,this.useFetchStreams=z}}class Eo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Eo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Eo&&e.projectId===this.projectId&&e.database===this.database}}const ui={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Bl={nullValue:"NULL_VALUE"};function No(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?cc(i)?4:Mh(i)?9007199254740991:10:Vt()}function $o(i,e){if(i===e)return!0;const n=No(i);if(n!==No(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Il(i).isEqual(Il(e));case 3:return function(u,c){if("string"==typeof u.timestampValue&&"string"==typeof c.timestampValue&&u.timestampValue.length===c.timestampValue.length)return u.timestampValue===c.timestampValue;const g=os(u.timestampValue),P=os(c.timestampValue);return g.seconds===P.seconds&&g.nanos===P.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return c=e,ao(i.bytesValue).isEqual(ao(c.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,c){return vr(u.geoPointValue.latitude)===vr(c.geoPointValue.latitude)&&vr(u.geoPointValue.longitude)===vr(c.geoPointValue.longitude)}(i,e);case 2:return function(u,c){if("integerValue"in u&&"integerValue"in c)return vr(u.integerValue)===vr(c.integerValue);if("doubleValue"in u&&"doubleValue"in c){const g=vr(u.doubleValue),P=vr(c.doubleValue);return g===P?so(g)===so(P):isNaN(g)&&isNaN(P)}return!1}(i,e);case 9:return Kn(i.arrayValue.values||[],e.arrayValue.values||[],$o);case 10:return function(u,c){const g=u.mapValue.fields||{},P=c.mapValue.fields||{};if(Os(g)!==Os(P))return!1;for(const k in g)if(g.hasOwnProperty(k)&&(void 0===P[k]||!$o(g[k],P[k])))return!1;return!0}(i,e);default:return Vt()}var c}function Yu(i,e){return void 0!==(i.values||[]).find(n=>$o(n,e))}function Ra(i,e){if(i===e)return 0;const n=No(i),o=No(e);if(n!==o)return In(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return In(i.booleanValue,e.booleanValue);case 2:return function(c,g){const P=vr(c.integerValue||c.doubleValue),k=vr(g.integerValue||g.doubleValue);return P<k?-1:P>k?1:P===k?0:isNaN(P)?isNaN(k)?0:-1:1}(i,e);case 3:return jl(i.timestampValue,e.timestampValue);case 4:return jl(Il(i),Il(e));case 5:return In(i.stringValue,e.stringValue);case 6:return function(c,g){const P=ao(c),k=ao(g);return P.compareTo(k)}(i.bytesValue,e.bytesValue);case 7:return function(c,g){const P=c.split("/"),k=g.split("/");for(let z=0;z<P.length&&z<k.length;z++){const K=In(P[z],k[z]);if(0!==K)return K}return In(P.length,k.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,g){const P=In(vr(c.latitude),vr(g.latitude));return 0!==P?P:In(vr(c.longitude),vr(g.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(c,g){const P=c.values||[],k=g.values||[];for(let z=0;z<P.length&&z<k.length;++z){const K=Ra(P[z],k[z]);if(K)return K}return In(P.length,k.length)}(i.arrayValue,e.arrayValue);case 10:return function(c,g){if(c===ui.mapValue&&g===ui.mapValue)return 0;if(c===ui.mapValue)return 1;if(g===ui.mapValue)return-1;const P=c.fields||{},k=Object.keys(P),z=g.fields||{},K=Object.keys(z);k.sort(),K.sort();for(let se=0;se<k.length&&se<K.length;++se){const Te=In(k[se],K[se]);if(0!==Te)return Te;const $e=Ra(P[k[se]],z[K[se]]);if(0!==$e)return $e}return In(k.length,K.length)}(i.mapValue,e.mapValue);default:throw Vt()}}function jl(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return In(i,e);const n=os(i),o=os(e),u=In(n.seconds,o.seconds);return 0!==u?u:In(n.nanos,o.nanos)}function ca(i){return ou(i)}function ou(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=os(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?ao(i.bytesValue).toBase64():"referenceValue"in i?wt.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",u=!0;for(const c of n.values||[])u?u=!1:o+=",",o+=ou(c);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let u="{",c=!0;for(const g of o)c?c=!1:u+=",",u+=`${g}:${ou(n.fields[g])}`;return u+"}"}(i.mapValue):Vt()}function da(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function wl(i){return!!i&&"integerValue"in i}function Pa(i){return!!i&&"arrayValue"in i}function dc(i){return!!i&&"nullValue"in i}function kd(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function qc(i){return!!i&&"mapValue"in i}function Hl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Sa(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=Hl(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hl(i.arrayValue.values[n]);return e}return Object.assign({},i)}function Mh(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Kc(i){return"nullValue"in i?Bl:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?da(Eo.empty(),wt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Vt()}function Kf(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?da(Eo.empty(),wt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?ui:Vt()}function Fd(i,e){const n=Ra(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function au(i,e){const n=Ra(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class ys{constructor(e){this.value=e}static empty(){return new ys({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!qc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hl(n)}setAll(e){let n=Fr.emptyPath(),o={},u=[];e.forEach((g,P)=>{if(!n.isImmediateParentOf(P)){const k=this.getFieldsMap(n);this.applyChanges(k,o,u),o={},u=[],n=P.popLast()}g?o[P.lastSegment()]=Hl(g):u.push(P.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,o,u)}delete(e){const n=this.field(e.popLast());qc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $o(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];qc(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){Sa(n,(u,c)=>e[u]=c);for(const u of o)delete e[u]}clone(){return new ys(Hl(this.value))}}function Ld(i){const e=[];return Sa(i.fields,(n,o)=>{const u=new Fr([n]);if(qc(o)){const c=Ld(o.mapValue).fields;if(0===c.length)e.push(u);else for(const g of c)e.push(u.child(g))}else e.push(u)}),new _s(e)}class On{constructor(e,n,o,u,c,g,P){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=c,this.data=g,this.documentState=P}static newInvalidDocument(e){return new On(e,0,zt.min(),zt.min(),zt.min(),ys.empty(),0)}static newFoundDocument(e,n,o,u){return new On(e,1,n,zt.min(),o,u,0)}static newNoDocument(e,n){return new On(e,2,n,zt.min(),zt.min(),ys.empty(),0)}static newUnknownDocument(e,n){return new On(e,3,n,zt.min(),zt.min(),ys.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(zt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ys.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ys.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=zt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof On&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new On(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ju{constructor(e,n){this.position=e,this.inclusive=n}}function $l(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const c=e[u],g=i.position[u];if(o=c.field.isKeyField()?wt.comparator(wt.fromName(g.referenceValue),n.key):Ra(g,n.data.field(c.field)),"desc"===c.dir&&(o*=-1),0!==o)break}return o}function hc(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!$o(i.position[n],e.position[n]))return!1;return!0}class Ns{constructor(e,n="asc"){this.field=e,this.dir=n}}function Tl(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class zl{}class xn extends zl{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new Ud(e,n,o):"array-contains"===n?new jd(e,o):"in"===n?new ha(e,o):"not-in"===n?new Zf(e,o):"array-contains-any"===n?new Jc(e,o):new xn(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new Yc(e,o):new Bd(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Ra(n,this.value)):null!==n&&No(this.value)===No(n)&&this.matchesComparison(Ra(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pr extends zl{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new pr(e,n)}matches(e){return uo(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function uo(i){return"and"===i.op}function Vd(i){return"or"===i.op}function Zc(i){return Oh(i)&&uo(i)}function Oh(i){for(const e of i.filters)if(e instanceof pr)return!1;return!0}function lo(i){if(i instanceof xn)return i.field.canonicalString()+i.op.toString()+ca(i.value);if(Zc(i))return i.filters.map(e=>lo(e)).join(",");{const e=i.filters.map(n=>lo(n)).join(",");return`${i.op}(${e})`}}function Xu(i,e){return i instanceof xn?(o=i,(u=e)instanceof xn&&o.op===u.op&&o.field.isEqual(u.field)&&$o(o.value,u.value)):i instanceof pr?function(o,u){return u instanceof pr&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((c,g,P)=>c&&Xu(g,u.filters[P]),!0)}(i,e):void Vt();var o,u}function Ma(i,e){const n=i.filters.concat(e);return pr.create(n,i.op)}function Qc(i){return i instanceof xn?`${(n=i).field.canonicalString()} ${n.op} ${ca(n.value)}`:i instanceof pr?function(n){return n.op.toString()+" {"+n.getFilters().map(Qc).join(" ,")+"}"}(i):"Filter";var n}class Ud extends xn{constructor(e,n,o){super(e,n,o),this.key=wt.fromName(o.referenceValue)}matches(e){const n=wt.comparator(e.key,this.key);return this.matchesComparison(n)}}class Yc extends xn{constructor(e,n){super(e,"in",n),this.keys=Gl(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Bd extends xn{constructor(e,n){super(e,"not-in",n),this.keys=Gl(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Gl(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>wt.fromName(o.referenceValue))}class jd extends xn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pa(n)&&Yu(n.arrayValue,this.value)}}class ha extends xn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Yu(this.value.arrayValue,n)}}class Zf extends xn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Yu(this.value.arrayValue,n)}}class Jc extends xn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pa(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>Yu(this.value.arrayValue,o))}}class fa{constructor(e,n=null,o=[],u=[],c=null,g=null,P=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=c,this.startAt=g,this.endAt=P,this.ce=null}}function fc(i,e=null,n=[],o=[],u=null,c=null,g=null){return new fa(i,e,n,o,u,c,g)}function xo(i){const e=St(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>lo(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(c=o).field.canonicalString()+c.dir;var c}).join(","),Ho(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>ca(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>ca(o)).join(",")),e.ce=n}return e.ce}function Cl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!Tl(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Xu(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!hc(i.startAt,e.startAt)&&hc(i.endAt,e.endAt)}function uu(i){return wt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function pc(i,e){return i.filters.filter(n=>n instanceof xn&&n.field.isEqual(e))}function Xc(i,e,n){let o=Bl,u=!0;for(const c of pc(i,e)){let g=Bl,P=!0;switch(c.op){case"<":case"<=":g=Kc(c.value);break;case"==":case"in":case">=":g=c.value;break;case">":g=c.value,P=!1;break;case"!=":case"not-in":g=Bl}Fd({value:o,inclusive:u},{value:g,inclusive:P})<0&&(o=g,u=P)}if(null!==n)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const g=n.position[c];Fd({value:o,inclusive:u},{value:g,inclusive:n.inclusive})<0&&(o=g,u=n.inclusive);break}return{value:o,inclusive:u}}function pa(i,e,n){let o=ui,u=!0;for(const c of pc(i,e)){let g=ui,P=!0;switch(c.op){case">=":case">":g=Kf(c.value),P=!1;break;case"==":case"in":case"<=":g=c.value;break;case"<":g=c.value,P=!1;break;case"!=":case"not-in":g=ui}au({value:o,inclusive:u},{value:g,inclusive:P})>0&&(o=g,u=P)}if(null!==n)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const g=n.position[c];au({value:o,inclusive:u},{value:g,inclusive:n.inclusive})>0&&(o=g,u=n.inclusive);break}return{value:o,inclusive:u}}class Go{constructor(e,n=null,o=[],u=[],c=null,g="F",P=null,k=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=c,this.limitType=g,this.startAt=P,this.endAt=k,this.le=null,this.he=null,this.Pe=null}}function ed(i,e,n,o,u,c,g,P){return new Go(i,e,n,o,u,c,g,P)}function el(i){return new Go(i)}function td(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function tl(i){return null!==i.collectionGroup}function qs(i){const e=St(i);if(null===e.le){e.le=[];const n=new Set;for(const c of e.explicitOrderBy)e.le.push(c),n.add(c.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(g){let P=new Cr(Fr.comparator);return g.filters.forEach(k=>{k.getFlattenedFilters().forEach(z=>{z.isInequality()&&(P=P.add(z.field))})}),P})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.le.push(new Ns(c,o))}),n.has(Fr.keyField().canonicalString())||e.le.push(new Ns(Fr.keyField(),o))}return e.le}function co(i){const e=St(i);return e.he||(e.he=function Nh(i,e){if("F"===i.limitType)return fc(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(u=>new Ns(u.field,"desc"===u.dir?"asc":"desc"));const n=i.endAt?new Ju(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new Ju(i.startAt.position,i.startAt.inclusive):null;return fc(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}(e,qs(i))),e.he}function Oa(i,e){const n=i.filters.concat([e]);return new Go(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function gc(i,e,n){return new Go(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function lu(i,e){return Cl(co(i),co(e))&&i.limitType===e.limitType}function nd(i){return`${xo(co(i))}|lt:${i.limitType}`}function nl(i){return`Query(target=${function(n){let o=n.path.canonicalString();return null!==n.collectionGroup&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(u=>Qc(u)).join(", ")}]`),Ho(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(u=>{return`${(g=u).field.canonicalString()} (${g.dir})`;var g}).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(u=>ca(u)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(u=>ca(u)).join(",")),`Target(${o})`}(co(i))}; limitType=${i.limitType})`}function Su(i,e){return e.isFoundDocument()&&function(o,u){const c=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(c):wt.isDocumentKey(o.path)?o.path.isEqual(c):o.path.isImmediateParentOf(c)}(i,e)&&function(o,u){for(const c of qs(o))if(!c.field.isKeyField()&&null===u.data.field(c.field))return!1;return!0}(i,e)&&function(o,u){for(const c of o.filters)if(!c.matches(u))return!1;return!0}(i,e)&&(u=e,!((o=i).startAt&&!function(g,P,k){const z=$l(g,P,k);return g.inclusive?z<=0:z<0}(o.startAt,qs(o),u)||o.endAt&&!function(g,P,k){const z=$l(g,P,k);return g.inclusive?z>=0:z>0}(o.endAt,qs(o),u)));var o,u}function Wl(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function mc(i){return(e,n)=>{let o=!1;for(const u of qs(i)){const c=_c(u,e,n);if(0!==c)return c;o=o||u.field.isKeyField()}return 0}}function _c(i,e,n){const o=i.field.isKeyField()?wt.comparator(e.key,n.key):function(c,g,P){const k=g.data.field(c),z=P.data.field(c);return null!==k&&null!==z?Ra(k,z):Vt()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Vt()}}class Na{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,c]of o)if(this.equalsFn(u,e))return c}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let c=0;c<u.length;c++)if(this.equalsFn(u[c][0],e))return void(u[c]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Sa(this.inner,(n,o)=>{for(const[u,c]of o)e(u,c)})}isEmpty(){return oo(this.inner)}size(){return this.innerSize}}const Hd=new Pr(wt.comparator);function ho(){return Hd}const xh=new Pr(wt.comparator);function ql(...i){let e=xh;for(const n of i)e=e.insert(n.key,n);return e}function rd(i){let e=xh;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function v(){return m()}function h(){return m()}function m(){return new Na(i=>i.toString(),(i,e)=>i.isEqual(e))}const E=new Pr(wt.comparator),x=new Cr(wt.comparator);function B(...i){let e=x;for(const n of i)e=e.add(n);return e}const re=new Cr(In);function oe(){return re}function ye(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:so(e)?"-0":e}}function Me(i){return{integerValue:""+i}}function Je(i,e){return Fl(e)?Me(e):ye(i,e)}class ft{constructor(){this._=void 0}}function nn(i,e,n){return i instanceof Gt?function(u,c){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return c&&cc(c)&&(c=Au(c)),c&&(g.fields.__previous_value__=c),{mapValue:g}}(n,e):i instanceof un?Dr(i,e):i instanceof jn?Yn(i,e):function(u,c){const g=Ot(u,c),P=Io(g)+Io(u.Ie);return wl(g)&&wl(u.Ie)?Me(P):ye(u.serializer,P)}(i,e)}function Qt(i,e,n){return i instanceof un?Dr(i,e):i instanceof jn?Yn(i,e):n}function Ot(i,e){return i instanceof Mn?wl(o=e)||(c=o)&&"doubleValue"in c?e:{integerValue:0}:null;var o,c}class Gt extends ft{}class un extends ft{constructor(e){super(),this.elements=e}}function Dr(i,e){const n=vs(e);for(const o of i.elements)n.some(u=>$o(u,o))||n.push(o);return{arrayValue:{values:n}}}class jn extends ft{constructor(e){super(),this.elements=e}}function Yn(i,e){let n=vs(e);for(const o of i.elements)n=n.filter(u=>!$o(u,o));return{arrayValue:{values:n}}}class Mn extends ft{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Io(i){return vr(i.integerValue||i.doubleValue)}function vs(i){return Pa(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class li{constructor(e,n){this.field=e,this.transform=n}}class xs{constructor(e,n){this.version=e,this.transformResults=n}}class gr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kl(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class xa{}function cu(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Li(i.key,gr.none()):new on(i.key,i.data,gr.none());{const n=i.data,o=ys.empty();let u=new Cr(Fr.comparator);for(let c of e.fields)if(!u.has(c)){let g=n.field(c);null===g&&c.length>1&&(c=c.popLast(),g=n.field(c)),null===g?o.delete(c):o.set(c,g),u=u.add(c)}return new bn(i.key,o,new _s(u.toArray()),gr.none())}}function wo(i,e,n){i instanceof on?function(u,c,g){const P=u.value.clone(),k=Ks(u.fieldTransforms,c,g.transformResults);P.setAll(k),c.convertToFoundDocument(g.version,P).setHasCommittedMutations()}(i,e,n):i instanceof bn?function(u,c,g){if(!Kl(u.precondition,c))return void c.convertToUnknownDocument(g.version);const P=Ks(u.fieldTransforms,c,g.transformResults),k=c.data;k.setAll(sr(u)),k.setAll(P),c.convertToFoundDocument(g.version,k).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function ka(i,e,n,o){return i instanceof on?function(c,g,P,k){if(!Kl(c.precondition,g))return P;const z=c.value.clone(),K=fo(c.fieldTransforms,k,g);return z.setAll(K),g.convertToFoundDocument(g.version,z).setHasLocalMutations(),null}(i,e,n,o):i instanceof bn?function(c,g,P,k){if(!Kl(c.precondition,g))return P;const z=fo(c.fieldTransforms,k,g),K=g.data;return K.setAll(sr(c)),K.setAll(z),g.convertToFoundDocument(g.version,K).setHasLocalMutations(),null===P?null:P.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(se=>se.field))}(i,e,n,o):(P=n,Kl(i.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):P);var g,P}function xt(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),c=Ot(o.transform,u||null);null!=c&&(null===n&&(n=ys.empty()),n.set(o.field,c))}return n||null}function ln(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(o=i.fieldTransforms)&&void 0===u||o&&u&&Kn(o,u,(c,g)=>function Es(i,e){return i.field.isEqual(e.field)&&(u=e.transform,(o=i.transform)instanceof un&&u instanceof un||o instanceof jn&&u instanceof jn?Kn(o.elements,u.elements,$o):o instanceof Mn&&u instanceof Mn?$o(o.Ie,u.Ie):o instanceof Gt&&u instanceof Gt);var o,u}(c,g))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var o,u}class on extends xa{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class bn extends xa{constructor(e,n,o,u,c=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function sr(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function Ks(i,e,n){const o=new Map;jt(i.length===n.length);for(let u=0;u<n.length;u++){const c=i[u],g=c.transform,P=e.data.field(c.field);o.set(c.field,Qt(g,P,n[u]))}return o}function fo(i,e,n){const o=new Map;for(const u of i){const c=u.transform,g=n.data.field(u.field);o.set(u.field,nn(c,g,e))}return o}class Li extends xa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jr extends xa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Zl{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const c=this.mutations[u];c.key.isEqual(e.key)&&wo(c,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=ka(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=ka(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=h();return this.mutations.forEach(u=>{const c=e.get(u.key),g=c.overlayedDocument;let P=this.applyToLocalView(g,c.mutatedFields);P=n.has(u.key)?null:P;const k=cu(g,P);null!==k&&o.set(u.key,k),g.isValidDocument()||g.convertToNoDocument(zt.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),B())}isEqual(e){return this.batchId===e.batchId&&Kn(this.mutations,e.mutations,(n,o)=>ln(n,o))&&Kn(this.baseMutations,e.baseMutations,(n,o)=>ln(n,o))}}class id{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){jt(e.mutations.length===o.length);let u=E;const c=e.mutations;for(let g=0;g<c.length;g++)u=u.insert(c[g].key,o[g].version);return new id(e,n,o,u)}}class as{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Xr{constructor(e,n){this.count=e,this.unchangedNames=n}}var ri,Hn;function $d(i){switch(i){default:return Vt();case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0}}function Fa(i){if(void 0===i)return yr("GRPC error has no .code"),We.UNKNOWN;switch(i){case ri.OK:return We.OK;case ri.CANCELLED:return We.CANCELLED;case ri.UNKNOWN:return We.UNKNOWN;case ri.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case ri.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case ri.INTERNAL:return We.INTERNAL;case ri.UNAVAILABLE:return We.UNAVAILABLE;case ri.UNAUTHENTICATED:return We.UNAUTHENTICATED;case ri.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case ri.NOT_FOUND:return We.NOT_FOUND;case ri.ALREADY_EXISTS:return We.ALREADY_EXISTS;case ri.PERMISSION_DENIED:return We.PERMISSION_DENIED;case ri.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case ri.ABORTED:return We.ABORTED;case ri.OUT_OF_RANGE:return We.OUT_OF_RANGE;case ri.UNIMPLEMENTED:return We.UNIMPLEMENTED;case ri.DATA_LOSS:return We.DATA_LOSS;default:return Vt()}}(Hn=ri||(ri={}))[Hn.OK=0]="OK",Hn[Hn.CANCELLED=1]="CANCELLED",Hn[Hn.UNKNOWN=2]="UNKNOWN",Hn[Hn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hn[Hn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hn[Hn.NOT_FOUND=5]="NOT_FOUND",Hn[Hn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hn[Hn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hn[Hn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hn[Hn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hn[Hn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hn[Hn.ABORTED=10]="ABORTED",Hn[Hn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hn[Hn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hn[Hn.INTERNAL=13]="INTERNAL",Hn[Hn.UNAVAILABLE=14]="UNAVAILABLE",Hn[Hn.DATA_LOSS=15]="DATA_LOSS";function Ql(){return new TextEncoder}const Qf=new Ya([4294967295,4294967295],0);function Yf(i){const e=Ql().encode(i),n=new Md;return n.update(e),new Uint8Array(n.digest())}function sd(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ya([n,o],0),new Ya([u,c],0)]}class zd{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new yc(`Invalid padding: ${n}`);if(o<0)throw new yc(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new yc(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new yc(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Ya.fromNumber(this.Te)}de(e,n,o){let u=e.add(n.multiply(Ya.fromNumber(o)));return 1===u.compare(Qf)&&(u=new Ya([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=Yf(e),[o,u]=sd(n);for(let c=0;c<this.hashCount;c++){const g=this.de(o,u,c);if(!this.Ae(g))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),g=new zd(c,u,n);return o.forEach(P=>g.insert(P)),g}insert(e){if(0===this.Te)return;const n=Yf(e),[o,u]=sd(n);for(let c=0;c<this.hashCount;c++){const g=this.de(o,u,c);this.Re(g)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class yc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Pu{constructor(e,n,o,u,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Pu(zt.min(),u,new Pr(In),ho(),B())}}class Al{constructor(e,n,o,u,c){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Al(o,n,B(),B(),B())}}class _{constructor(e,n,o,u){this.Ve=e,this.removedTargetIds=n,this.key=o,this.me=u}}class d{constructor(e,n){this.targetId=e,this.fe=n}}class p{constructor(e,n,o=Ii.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class I{constructor(){this.ge=0,this.pe=ge(),this.ye=Ii.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=B(),n=B(),o=B();return this.pe.forEach((u,c)=>{switch(c){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:Vt()}}),new Al(this.ye,this.we,e,n,o)}Fe(){this.Se=!1,this.pe=ge()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class V{constructor(e){this.Le=e,this.ke=new Map,this.qe=ho(),this.Qe=Z(),this.Ke=new Pr(In)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(n);break;case 3:this.je(n)&&(o.Be(),o.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.Ce(e.resumeToken));break;default:Vt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((o,u)=>{this.je(u)&&n(u)})}Je(e){const n=e.targetId,o=e.fe.count,u=this.Ye(n);if(u){const c=u.target;if(uu(c))if(0===o){const g=new wt(c.path);this.We(n,g,On.newNoDocument(g,zt.min()))}else jt(1===o);else{const g=this.Ze(n);if(g!==o){const P=this.Xe(e),k=P?this.et(P,e,g):1;0!==k&&(this.He(n),this.Ke=this.Ke.insert(n,2===k?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:c=0}=n;let g,P;try{g=ao(o).toUint8Array()}catch(k){if(k instanceof zc)return gs("Decoding the base64 bloom filter in existence filter failed ("+k.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw k}try{P=new zd(g,u,c)}catch(k){return gs(k instanceof yc?"BloomFilter error: ":"Applying bloom filter failed: ",k),null}return 0===P.Te?null:P}et(e,n,o){return n.fe.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Le.getRemoteKeysForTarget(n);let u=0;return o.forEach(c=>{const g=this.Le.nt(),P=`projects/${g.projectId}/databases/${g.database}/documents/${c.path.canonicalString()}`;e.mightContain(P)||(this.We(n,c,null),u++)}),u}it(e){const n=new Map;this.ke.forEach((c,g)=>{const P=this.Ye(g);if(P){if(c.current&&uu(P.target)){const k=new wt(P.target.path);null!==this.qe.get(k)||this.st(g,k)||this.We(g,k,On.newNoDocument(k,e))}c.De&&(n.set(g,c.ve()),c.Fe())}});let o=B();this.Qe.forEach((c,g)=>{let P=!0;g.forEachWhile(k=>{const z=this.Ye(k);return!z||"TargetPurposeLimboResolution"===z.purpose||(P=!1,!1)}),P&&(o=o.add(c))}),this.qe.forEach((c,g)=>g.setReadTime(e));const u=new Pu(e,n,this.Ke,this.qe,o);return this.qe=ho(),this.Qe=Z(),this.Ke=new Pr(In),u}Ue(e,n){if(!this.je(e))return;const o=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,o),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const u=this.ze(e);this.st(e,n)?u.Me(n,1):u.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),o&&(this.qe=this.qe.insert(n,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new I,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Cr(In),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||at("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new I),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Z(){return new Pr(wt.comparator)}function ge(){return new Pr(wt.comparator)}const Fe={asc:"ASCENDING",desc:"DESCENDING"},tt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nt={and:"AND",or:"OR"};class Yt{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wt(i,e){return i.useProto3Json||Ho(e)?e:{value:e}}function Lr(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function La(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Gd(i,e){return Lr(i,e.toTimestamp())}function Mi(i){return jt(!!i),zt.fromTimestamp(function(n){const o=os(n);return new Tr(o.seconds,o.nanos)}(i))}function vc(i,e){return(o=i,new Bn(["projects",o.projectId,"databases",o.database])).child("documents").child(e).canonicalString();var o}function rl(i){const e=Bn.fromString(i);return jt(Ag(e)),e}function Yl(i,e){return vc(i.databaseId,e.path)}function ga(i,e){const n=rl(e);if(n.get(1)!==i.databaseId.projectId)throw new Ye(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ye(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new wt(kh(n))}function Wd(i,e){return vc(i.databaseId,e)}function Jf(i){const e=rl(i);return 4===e.length?Bn.emptyPath():kh(e)}function Mu(i){return new Bn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function kh(i){return jt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Fh(i,e,n){return{name:Yl(i,e),fields:n.value.mapValue.fields}}function od(i,e,n){const o=ga(i,e.name),u=Mi(e.updateTime),c=e.createTime?Mi(e.createTime):zt.min(),g=new ys({mapValue:{fields:e.fields}}),P=On.newFoundDocument(o,u,c,g);return n&&P.setHasCommittedMutations(),n?P.setHasCommittedMutations():P}function qd(i,e){let n;if(e instanceof on)n={update:Fh(i,e.key,e.value)};else if(e instanceof Li)n={delete:Yl(i,e.key)};else if(e instanceof bn)n={update:Fh(i,e.key,e.data),updateMask:M_(e.fieldMask)};else{if(!(e instanceof Jr))return Vt();n={verify:Yl(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(c,g){const P=g.transform;if(P instanceof Gt)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(P instanceof un)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:P.elements}};if(P instanceof jn)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:P.elements}};if(P instanceof Mn)return{fieldPath:g.field.canonicalString(),increment:P.Ie};throw Vt()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:Gd(i,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:Vt()),n;var c}function Kd(i,e){const n=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?gr.updateTime(Mi(c.updateTime)):void 0!==c.exists?gr.exists(c.exists):gr.none():gr.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(g,P){let k=null;"setToServerValue"in P?(jt("REQUEST_TIME"===P.setToServerValue),k=new Gt):"appendMissingElements"in P?k=new un(P.appendMissingElements.values||[]):"removeAllFromArray"in P?k=new jn(P.removeAllFromArray.values||[]):"increment"in P?k=new Mn(g,P.increment):Vt();const z=Fr.fromServerFormat(P.fieldPath);return new li(z,k)}(i,u)):[];var c;if(e.update){const u=ga(i,e.update.name),c=new ys({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new _s((e.updateMask.fieldPaths||[]).map(K=>Fr.fromServerFormat(K)));return new bn(u,c,g,n,o)}return new on(u,c,n,o)}if(e.delete){const u=ga(i,e.delete);return new Li(u,n)}if(e.verify){const u=ga(i,e.verify);return new Jr(u,n)}return Vt()}function Dg(i,e){return{documents:[Wd(i,e.path)]}}function Vh(i,e){const n={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(n.parent=Wd(i,o),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Wd(i,o.popLast()),n.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(k){if(0!==k.length)return P_(pr.create(k,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const c=function(k){if(0!==k.length)return k.map(z=>{return{field:Ec((se=z).field),direction:Bh(se.dir)};var se})}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const g=Wt(i,e.limit);return null!==g&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt={before:(k=e.startAt).inclusive,values:k.position}),e.endAt&&(n.structuredQuery.endAt=function(k){return{before:!k.inclusive,values:k.position}}(e.endAt)),n;var k}function Uh(i){let e=Jf(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){jt(1===o);const K=n.from[0];K.allDescendants?u=K.collectionId:e=e.child(K.collectionId)}let c=[];n.where&&(c=function(se){const Te=ep(se);return Te instanceof pr&&Zc(Te)?Te.getFilters():[Te]}(n.where));let g=[];n.orderBy&&(g=n.orderBy.map(Te=>{return new Ns(Zd((_t=Te).field),function(At){switch(At){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_t.direction));var _t}));let P=null;n.limit&&(P=function(se){let Te;return Te="object"==typeof se?se.value:se,Ho(Te)?null:Te}(n.limit));let k=null;var se;n.startAt&&(k=new Ju((se=n.startAt).values||[],!!se.before));let z=null;return n.endAt&&(z=function(se){return new Ju(se.values||[],!se.before)}(n.endAt)),ed(e,u,g,c,P,"F",k,z)}function ep(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Zd(n.unaryFilter.field);return xn.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=Zd(n.unaryFilter.field);return xn.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Zd(n.unaryFilter.field);return xn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=Zd(n.unaryFilter.field);return xn.create(g,"!=",{nullValue:"NULL_VALUE"});default:return Vt()}}(i):void 0!==i.fieldFilter?xn.create(Zd((n=i).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Vt()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return pr.create(n.compositeFilter.filters.map(o=>ep(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return Vt()}}(n.compositeFilter.op))}(i):Vt();var n}function Bh(i){return Fe[i]}function Nv(i){return tt[i]}function R_(i){return Nt[i]}function Ec(i){return{fieldPath:i.canonicalString()}}function Zd(i){return Fr.fromServerFormat(i.fieldPath)}function P_(i){return i instanceof xn?function(n){if("=="===n.op){if(kd(n.value))return{unaryFilter:{field:Ec(n.field),op:"IS_NAN"}};if(dc(n.value))return{unaryFilter:{field:Ec(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(kd(n.value))return{unaryFilter:{field:Ec(n.field),op:"IS_NOT_NAN"}};if(dc(n.value))return{unaryFilter:{field:Ec(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ec(n.field),op:Nv(n.op),value:n.value}}}(i):i instanceof pr?function(n){const o=n.getFilters().map(u=>P_(u));return 1===o.length?o[0]:{compositeFilter:{op:R_(n.op),filters:o}}}(i):Vt()}function M_(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ag(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Ou{constructor(e,n,o,u,c=zt.min(),g=zt.min(),P=Ii.EMPTY_BYTE_STRING,k=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=P,this.expectedCount=k}withSequenceNumber(e){return new Ou(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ou(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ou(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ou(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tp{constructor(e){this.ut=e}}function O_(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:np(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Yl(c=i.ut,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:Lr(c,g.version.toTimestamp()),createTime:Lr(c,g.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:Yd(e.version)};else{if(!e.isUnknownDocument())return Vt();o.unknownDocument={path:n.path.toArray(),version:Yd(e.version)}}var c,g;return o}function np(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Yd(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ad(i){const e=new Tr(i.seconds,i.nanoseconds);return zt.fromTimestamp(e)}function Jl(i,e){const n=(e.baseMutations||[]).map(c=>Kd(i.ut,c));for(let c=0;c<e.mutations.length-1;++c)c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(e.mutations[c].updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c);const o=e.mutations.map(c=>Kd(i.ut,c)),u=Tr.fromMillis(e.localWriteTimeMs);return new Zl(e.batchId,u,n,o)}function jh(i){const e=ad(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?ad(i.lastLimboFreeSnapshotVersion):zt.min();let o;return o=void 0!==i.query.documents?(jt(1===(c=i.query).documents.length),co(el(Jf(c.documents[0])))):function(c){return co(Uh(c))}(i.query),new Ou(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,Ii.fromBase64String(i.resumeToken));var c}function ud(i,e){const n=Yd(e.snapshotVersion),o=Yd(e.lastLimboFreeSnapshotVersion);let u;u=uu(e.target)?Dg(i.ut,e.target):Vh(i.ut,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xo(e.target),readTime:n,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Jd(i){const e=Uh({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?gc(e,e.limit,"L"):e}function Hh(i,e){return new as(e.largestBatchId,Kd(i.ut,e.overlayMutation))}function bg(i,e){const n=e.path.lastSegment();return[i,ms(e.path.popLast()),n]}function Sg(i,e,n,o){return{indexId:i,uid:e.uid||"",sequenceNumber:n,readTime:Yd(o.readTime),documentKey:ms(o.documentKey.path),largestBatchId:o.largestBatchId}}class N_{getBundleMetadata(e,n){return Rg(e).get(n).next(o=>{if(o)return{id:(c=o).bundleId,createTime:ad(c.createTime),version:c.version};var c})}saveBundleMetadata(e,n){return Rg(e).put({bundleId:(u=n).id,createTime:Yd(Mi(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return x_(e).get(n).next(o=>{if(o)return{name:(c=o).name,query:Jd(c.bundledQuery),readTime:ad(c.readTime)};var c})}saveNamedQuery(e,n){return x_(e).put({name:(u=n).name,readTime:Yd(Mi(u.readTime)),bundledQuery:u.bundledQuery});var u}}function Rg(i){return ss(i,"bundles")}function x_(i){return ss(i,"namedQueries")}class rp{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new rp(e,n.uid||"")}getOverlay(e,n){return $h(e).get(bg(this.userId,n)).next(o=>o?Hh(this.serializer,o):null)}getOverlays(e,n){const o=v();return C.forEach(n,u=>this.getOverlay(e,u).next(c=>{null!==c&&o.set(u,c)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((c,g)=>{const P=new as(n,g);u.push(this.lt(e,P))}),C.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(g=>u.add(ms(g.getCollectionPath())));const c=[];return u.forEach(g=>{const P=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,o+1],!1,!0);c.push($h(e).H("collectionPathOverlayIndex",P))}),C.waitFor(c)}getOverlaysForCollection(e,n,o){const u=v(),c=ms(n),g=IDBKeyRange.bound([this.userId,c,o],[this.userId,c,Number.POSITIVE_INFINITY],!0);return $h(e).W("collectionPathOverlayIndex",g).next(P=>{for(const k of P){const z=Hh(this.serializer,k);u.set(z.getKey(),z)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const c=v();let g;const P=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return $h(e).Y({index:"collectionGroupOverlayIndex",range:P},(k,z,K)=>{const se=Hh(this.serializer,z);c.size()<u||se.largestBatchId===g?(c.set(se.getKey(),se),g=se.largestBatchId):K.done()}).next(()=>c)}lt(e,n){return $h(e).put(function(u,c,g){const[P,k,z]=bg(c,g.mutation.key);return{userId:c,collectionPath:k,documentId:z,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:qd(u.ut,g.mutation)}}(this.serializer,this.userId,n))}}function $h(i){return ss(i,"documentOverlays")}class ld{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(vr(e.integerValue));else if("doubleValue"in e){const o=vr(e.doubleValue);isNaN(o)?this.Tt(n,13):(this.Tt(n,15),so(o)?n.Et(0):n.Et(o))}else if("timestampValue"in e){const o=e.timestampValue;this.Tt(n,20),"string"==typeof o?n.dt(o):(n.dt(`${o.seconds||""}`),n.Et(o.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(ao(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.Tt(n,45),n.Et(o.latitude||0),n.Et(o.longitude||0)}else"mapValue"in e?Mh(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):Vt()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const o=e.fields||{};this.Tt(n,55);for(const u of Object.keys(o))this.At(u,n),this.Pt(o[u],n)}yt(e,n){const o=e.values||[];this.Tt(n,50);for(const u of o)this.Pt(u,n)}ft(e,n){this.Tt(n,37),wt.fromName(e).path.forEach(o=>{this.Tt(n,60),this.wt(o,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function xv(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function Xl(i){const e=64-function(o){let u=0;for(let c=0;c<8;++c){const g=xv(255&o[c]);if(u+=g,8!==g)break}return u}(i);return Math.ceil(e/8)}ld.St=new ld;class zh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Dt(o.value),o=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ft(o.value),o=n.next();this.Mt()}xt(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Dt(o);else if(o<2048)this.Dt(960|o>>>6),this.Dt(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|o>>>12),this.Dt(128|63&o>>>6),this.Dt(128|63&o);else{const u=n.codePointAt(0);this.Dt(240|u>>>18),this.Dt(128|63&u>>>12),this.Dt(128|63&u>>>6),this.Dt(128|63&u)}}this.Ct()}Ot(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const u=n.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Nt(e){const n=this.Bt(e),o=Xl(n);this.Lt(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}kt(e){const n=this.Bt(e),o=Xl(n);this.Lt(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(c){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,c,!1),new Uint8Array(g.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class kv{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class UI{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class ip{constructor(){this.Wt=new zh,this.Gt=new kv(this.Wt),this.zt=new UI(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Xd{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Xd(this.indexId,this.documentKey,this.arrayValue,o)}}function cd(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=Fv(i.arrayValue,e.arrayValue),0!==n?n:(n=Fv(i.directionalValue,e.directionalValue),0!==n?n:wt.comparator(i.documentKey,e.documentKey)))}function Fv(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class Pg{constructor(e){this.Jt=new Cr((n,o)=>Fr.comparator(n.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const o=n;o.isInequality()?this.Jt=this.Jt.add(o):this.Zt.push(o)}}get Xt(){return this.Jt.size>1}en(e){if(jt(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=Ws(e);if(void 0!==n&&!this.tn(n))return!1;const o=Aa(e);let u=new Set,c=0,g=0;for(;c<o.length&&this.tn(o[c]);++c)u=u.add(o[c].fieldPath.canonicalString());if(c===o.length)return!0;if(this.Jt.size>0){const P=this.Jt.getIterator().getNext();if(!u.has(P.field.canonicalString())){const k=o[c];if(!this.nn(P,k)||!this.rn(this.Yt[g++],k))return!1}++c}for(;c<o.length;++c)if(g>=this.Yt.length||!this.rn(this.Yt[g++],o[c]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Cr(Fr.comparator);const n=[];for(const o of this.Zt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)n.push(new Ri(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),n.push(new Ri(o.field,0))}for(const o of this.Yt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),n.push(new Ri(o.field,"asc"===o.dir?0:1)));return new Yr(Yr.UNKNOWN_ID,this.collectionId,n,tu.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function k_(i){var e,n;if(jt(i instanceof xn||i instanceof pr),i instanceof xn){if(i instanceof ha){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(c=>xn.create(i.field,"==",c)))||[];return pr.create(u,"or")}return i}const o=i.filters.map(u=>k_(u));return pr.create(o,i.op)}function Lv(i){if(0===i.getFilters().length)return[];const e=il(k_(i));return jt(sp(e)),Mg(e)||Og(e)?[e]:e.getFilters()}function Mg(i){return i instanceof xn}function Og(i){return i instanceof pr&&Zc(i)}function sp(i){return Mg(i)||Og(i)||function(n){if(n instanceof pr&&Vd(n)){for(const o of n.getFilters())if(!Mg(o)&&!Og(o))return!1;return!0}return!1}(i)}function il(i){if(jt(i instanceof xn||i instanceof pr),i instanceof xn)return i;if(1===i.filters.length)return il(i.filters[0]);const e=i.filters.map(o=>il(o));let n=pr.create(e,i.op);return n=Gh(n),sp(n)?n:(jt(n instanceof pr),jt(uo(n)),jt(n.filters.length>1),n.filters.reduce((o,u)=>dd(o,u)))}function dd(i,e){let n;return jt(i instanceof xn||i instanceof pr),jt(e instanceof xn||e instanceof pr),n=i instanceof xn?e instanceof xn?pr.create([i,e],"and"):Ng(i,e):e instanceof xn?Ng(e,i):function(u,c){if(jt(u.filters.length>0&&c.filters.length>0),uo(u)&&uo(c))return Ma(u,c.getFilters());const g=Vd(u)?u:c,P=Vd(u)?c:u,k=g.filters.map(z=>dd(z,P));return pr.create(k,"or")}(i,e),Gh(n)}function Ng(i,e){if(uo(e))return Ma(e,i.getFilters());{const n=e.filters.map(o=>dd(i,o));return pr.create(n,"or")}}function Gh(i){if(jt(i instanceof xn||i instanceof pr),i instanceof xn)return i;const e=i.getFilters();if(1===e.length)return Gh(e[0]);if(Oh(i))return i;const n=e.map(u=>Gh(u)),o=[];return n.forEach(u=>{u instanceof xn?o.push(u):u instanceof pr&&(u.op===i.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:pr.create(o,i.op)}class F_{constructor(){this.on=new L_}addToCollectionParentIndex(e,n){return this.on.add(n),C.resolve()}getCollectionParents(e,n){return C.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return C.resolve()}deleteFieldIndex(e,n){return C.resolve()}deleteAllFieldIndexes(e){return C.resolve()}createTargetIndexes(e,n){return C.resolve()}getDocumentsMatchingTarget(e,n){return C.resolve(null)}getIndexType(e,n){return C.resolve(0)}getFieldIndexes(e,n){return C.resolve([])}getNextCollectionGroupToUpdate(e){return C.resolve(null)}getMinOffset(e,n){return C.resolve(Ms.min())}getMinOffsetFromCollectionGroup(e,n){return C.resolve(Ms.min())}updateCollectionGroup(e,n,o){return C.resolve()}updateIndexEntries(e,n){return C.resolve()}}class L_{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new Cr(Bn.comparator),c=!u.has(o);return this.index[n]=u.add(o),c}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Cr(Bn.comparator)).toArray()}}const xg=new Uint8Array(0);class BI{constructor(e,n){this.user=e,this.databaseId=n,this._n=new L_,this.an=new Na(o=>xo(o),(o,u)=>Cl(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const c={collectionId:o,parent:ms(u)};return op(e).put(c)}return C.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[xl(n),""],!1,!0);return op(e).W(u).next(c=>{for(const g of c){if(g.collectionId!==n)break;o.push(vo(g.parent))}return o})}addFieldIndex(e,n){const o=ap(e),u={indexId:(P=n).indexId,collectionGroup:P.collectionGroup,fields:P.fields.map(k=>[k.fieldPath.canonicalString(),k.kind])};var P;delete u.indexId;const c=o.add(u);if(n.indexState){const g=Wh(e);return c.next(P=>{g.put(Sg(P,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return c.next()}deleteFieldIndex(e,n){const o=ap(e),u=Wh(e),c=Ic(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=ap(e),o=Ic(e),u=Wh(e);return n.H().next(()=>o.H()).next(()=>u.H())}createTargetIndexes(e,n){return C.forEach(this.un(n),o=>this.getIndexType(e,o).next(u=>{if(0===u||1===u){const c=new Pg(o).sn();if(null!=c)return this.addFieldIndex(e,c)}}))}getDocumentsMatchingTarget(e,n){const o=Ic(e);let u=!0;const c=new Map;return C.forEach(this.un(n),g=>this.cn(e,g).next(P=>{u&&(u=!!P),c.set(g,P)})).next(()=>{if(u){let g=B();const P=[];return C.forEach(c,(k,z)=>{var gn;at("IndexedDbIndexManager",`Using index ${gn=k,`id=${gn.indexId}|cg=${gn.collectionGroup}|f=${gn.fields.map(Jn=>`${Jn.fieldPath}:${Jn.kind}`).join(",")}`} to execute ${xo(n)}`);const K=function(gn,Jn){const Mr=Ws(Jn);if(void 0===Mr)return null;for(const Nr of pc(gn,Mr.fieldPath))switch(Nr.op){case"array-contains-any":return Nr.value.arrayValue.values||[];case"array-contains":return[Nr.value]}return null}(z,k),se=function(gn,Jn){const Mr=new Map;for(const Nr of Aa(Jn))for(const ks of pc(gn,Nr.fieldPath))switch(ks.op){case"==":case"in":Mr.set(Nr.fieldPath.canonicalString(),ks.value);break;case"not-in":case"!=":return Mr.set(Nr.fieldPath.canonicalString(),ks.value),Array.from(Mr.values())}return null}(z,k),Te=function(gn,Jn){const Mr=[];let Nr=!0;for(const ks of Aa(Jn)){const cl=0===ks.kind?Xc(gn,ks.fieldPath,gn.startAt):pa(gn,ks.fieldPath,gn.startAt);Mr.push(cl.value),Nr&&(Nr=cl.inclusive)}return new Ju(Mr,Nr)}(z,k),$e=function(gn,Jn){const Mr=[];let Nr=!0;for(const ks of Aa(Jn)){const cl=0===ks.kind?pa(gn,ks.fieldPath,gn.endAt):Xc(gn,ks.fieldPath,gn.endAt);Mr.push(cl.value),Nr&&(Nr=cl.inclusive)}return new Ju(Mr,Nr)}(z,k),_t=this.ln(k,z,Te),Ct=this.ln(k,z,$e),At=this.hn(k,z,se),_n=this.Pn(k.indexId,K,_t,Te.inclusive,Ct,$e.inclusive,At);return C.forEach(_n,Cn=>o.j(Cn,n.limit).next(gn=>{gn.forEach(Jn=>{const Mr=wt.fromSegments(Jn.documentKey);g.has(Mr)||(g=g.add(Mr),P.push(Mr))})}))}).next(()=>P)}return C.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:Lv(pr.create(e.filters,"and")).map(o=>fc(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,o,u,c,g,P){const k=(null!=n?n.length:1)*Math.max(o.length,c.length),z=k/(null!=n?n.length:1),K=[];for(let se=0;se<k;++se){const Te=n?this.In(n[se/z]):xg,$e=this.Tn(e,Te,o[se%z],u),_t=this.En(e,Te,c[se%z],g),Ct=P.map(At=>this.Tn(e,Te,At,!0));K.push(...this.createRange($e,_t,Ct))}return K}Tn(e,n,o,u){const c=new Xd(e,wt.empty(),n,o);return u?c:c.Ht()}En(e,n,o,u){const c=new Xd(e,wt.empty(),n,o);return u?c.Ht():c}cn(e,n){const o=new Pg(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(c=>{let g=null;for(const P of c)o.en(P)&&(!g||P.fields.length>g.fields.length)&&(g=P);return g})}getIndexType(e,n){let o=2;const u=this.un(n);return C.forEach(u,c=>this.cn(e,c).next(g=>{g?0!==o&&g.fields.length<function(k){let z=new Cr(Fr.comparator),K=!1;for(const se of k.filters)for(const Te of se.getFlattenedFilters())Te.field.isKeyField()||("array-contains"===Te.op||"array-contains-any"===Te.op?K=!0:z=z.add(Te.field));for(const se of k.orderBy)se.field.isKeyField()||(z=z.add(se.field));return z.size+(K?1:0)}(c)&&(o=1):o=0})).next(()=>null!==n.limit&&u.length>1&&2===o?1:o)}dn(e,n){const o=new ip;for(const u of Aa(e)){const c=n.data.field(u.fieldPath);if(null==c)return null;const g=o.jt(u.kind);ld.St.ht(c,g)}return o.Ut()}In(e){const n=new ip;return ld.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const o=new ip;return ld.St.ht(da(this.databaseId,n),o.jt(function(c){const g=Aa(c);return 0===g.length?0:g[g.length-1].kind}(e))),o.Ut()}hn(e,n,o){if(null===o)return[];let u=[];u.push(new ip);let c=0;for(const g of Aa(e)){const P=o[c++];for(const k of u)if(this.Rn(n,g.fieldPath)&&Pa(P))u=this.Vn(u,g,P);else{const z=k.jt(g.kind);ld.St.ht(P,z)}}return this.mn(u)}ln(e,n,o){return this.hn(e,n,o.position)}mn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Ut();return n}Vn(e,n,o){const u=[...e],c=[];for(const g of o.arrayValue.values||[])for(const P of u){const k=new ip;k.seed(P.Ut()),ld.St.ht(g,k.jt(n.kind)),c.push(k)}return c}Rn(e,n){return!!e.filters.find(o=>o instanceof xn&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=ap(e),u=Wh(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(c=>{const g=[];return C.forEach(c,P=>u.get([P.indexId,this.uid]).next(k=>{g.push(function(K,se){const Te=se?new tu(se.sequenceNumber,new Ms(ad(se.readTime),new wt(vo(se.documentKey)),se.largestBatchId)):tu.empty(),$e=K.fields.map(([_t,Ct])=>new Ri(Fr.fromServerFormat(_t),Ct));return new Yr(K.indexId,K.collectionGroup,$e,Te)}(P,k))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const c=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==c?c:In(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=ap(e),c=Wh(e);return this.fn(e).next(g=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(P=>C.forEach(P,k=>c.put(Sg(k.indexId,this.user,g,o)))))}updateIndexEntries(e,n){const o=new Map;return C.forEach(n,(u,c)=>{const g=o.get(u.collectionGroup);return(g?C.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(P=>(o.set(u.collectionGroup,P),C.forEach(P,k=>this.gn(e,u,k).next(z=>{const K=this.pn(c,k);return z.isEqual(K)?C.resolve():this.yn(e,c,k,z,K)}))))})}wn(e,n,o,u){return Ic(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.An(o,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,o,u){return Ic(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.An(o,n.key),n.key.path.toArray()])}gn(e,n,o){const u=Ic(e);let c=new Cr(cd);return u.Y({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.An(o,n)])},(g,P)=>{c=c.add(new Xd(o.indexId,n,P.arrayValue,P.directionalValue))}).next(()=>c)}pn(e,n){let o=new Cr(cd);const u=this.dn(n,e);if(null==u)return o;const c=Ws(n);if(null!=c){const g=e.data.field(c.fieldPath);if(Pa(g))for(const P of g.arrayValue.values||[])o=o.add(new Xd(n.indexId,e.key,this.In(P),u))}else o=o.add(new Xd(n.indexId,e.key,xg,u));return o}yn(e,n,o,u,c){at("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const g=[];return function(k,z,K,se,Te){const $e=k.getIterator(),_t=z.getIterator();let Ct=su($e),At=su(_t);for(;Ct||At;){let _n=!1,Cn=!1;if(Ct&&At){const gn=K(Ct,At);gn<0?Cn=!0:gn>0&&(_n=!0)}else null!=Ct?Cn=!0:_n=!0;_n?(se(At),At=su(_t)):Cn?(Te(Ct),Ct=su($e)):(Ct=su($e),At=su(_t))}}(u,c,cd,P=>{g.push(this.wn(e,n,o,P))},P=>{g.push(this.Sn(e,n,o,P))}),C.waitFor(g)}fn(e){let n=1;return Wh(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,c)=>{c.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((g,P)=>cd(g,P)).filter((g,P,k)=>!P||0!==cd(g,k[P-1]));const u=[];u.push(e);for(const g of o){const P=cd(g,e),k=cd(g,n);if(0===P)u[0]=e.Ht();else if(P>0&&k<0)u.push(g),u.push(g.Ht());else if(k>0)break}u.push(n);const c=[];for(let g=0;g<u.length;g+=2){if(this.bn(u[g],u[g+1]))return[];c.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,xg,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,xg,[]]))}return c}bn(e,n){return cd(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(kg)}getMinOffset(e,n){return C.mapArray(this.un(n),o=>this.cn(e,o).next(u=>u||Vt())).next(kg)}}function op(i){return ss(i,"collectionParents")}function Ic(i){return ss(i,"indexEntries")}function ap(i){return ss(i,"indexConfiguration")}function Wh(i){return ss(i,"indexState")}function kg(i){jt(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;_l(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new Ms(e.readTime,e.documentKey,n)}const V_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Wo{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Wo(e,Wo.DEFAULT_COLLECTION_PERCENTILE,Wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function U_(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),c=[],g=IDBKeyRange.only(n.batchId);let P=0;const k=o.Y({range:g},(K,se,Te)=>(P++,Te.delete()));c.push(k.next(()=>{jt(1===P)}));const z=[];for(const K of n.mutations){const se=Ll(e,K.key.path,n.batchId);c.push(u.delete(se)),z.push(K.key)}return C.waitFor(c).next(()=>z)}function up(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Vt();e=i.noDocument}return JSON.stringify(e).length}Wo.DEFAULT_COLLECTION_PERCENTILE=10,Wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wo.DEFAULT=new Wo(41943040,Wo.DEFAULT_COLLECTION_PERCENTILE,Wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wo.DISABLED=new Wo(-1,0,0);class qh{constructor(e,n,o,u){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=u,this.Dn={}}static ct(e,n,o,u){jt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new qh(c,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wc(e).Y({index:"userMutationsIndex",range:o},(u,c,g)=>{n=!1,g.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const c=Tc(e),g=wc(e);return g.add({}).next(P=>{jt("number"==typeof P);const k=new Zl(P,n,o,u),z=function($e,_t,Ct){const At=Ct.baseMutations.map(Cn=>qd($e.ut,Cn)),_n=Ct.mutations.map(Cn=>qd($e.ut,Cn));return{userId:_t,batchId:Ct.batchId,localWriteTimeMs:Ct.localWriteTime.toMillis(),baseMutations:At,mutations:_n}}(this.serializer,this.userId,k),K=[];let se=new Cr((Te,$e)=>In(Te.canonicalString(),$e.canonicalString()));for(const Te of u){const $e=Ll(this.userId,Te.key.path,P);se=se.add(Te.key.path.popLast()),K.push(g.put(z)),K.push(c.put($e,vl))}return se.forEach(Te=>{K.push(this.indexManager.addToCollectionParentIndex(e,Te))}),e.addOnCommittedListener(()=>{this.Dn[P]=k.keys()}),C.waitFor(K).next(()=>k)})}lookupMutationBatch(e,n){return wc(e).get(n).next(o=>o?(jt(o.userId===this.userId),Jl(this.serializer,o)):null)}Cn(e,n){return this.Dn[n]?C.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.Dn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let c=null;return wc(e).Y({index:"userMutationsIndex",range:u},(g,P,k)=>{P.userId===this.userId&&(jt(P.batchId>=o),c=Jl(this.serializer,P)),k.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return wc(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(u,c,g)=>{o=c.batchId,g.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wc(e).W("userMutationsIndex",n).next(o=>o.map(u=>Jl(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=nu(this.userId,n.path),u=IDBKeyRange.lowerBound(o),c=[];return Tc(e).Y({range:u},(g,P,k)=>{const[z,K,se]=g,Te=vo(K);if(z===this.userId&&n.path.isEqual(Te))return wc(e).get(se).next($e=>{if(!$e)throw Vt();jt($e.userId===this.userId),c.push(Jl(this.serializer,$e))});k.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Cr(In);const u=[];return n.forEach(c=>{const g=nu(this.userId,c.path),P=IDBKeyRange.lowerBound(g),k=Tc(e).Y({range:P},(z,K,se)=>{const[Te,$e,_t]=z,Ct=vo($e);Te===this.userId&&c.path.isEqual(Ct)?o=o.add(_t):se.done()});u.push(k)}),C.waitFor(u).next(()=>this.vn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,c=nu(this.userId,o),g=IDBKeyRange.lowerBound(c);let P=new Cr(In);return Tc(e).Y({range:g},(k,z,K)=>{const[se,Te,$e]=k,_t=vo(Te);se===this.userId&&o.isPrefixOf(_t)?_t.length===u&&(P=P.add($e)):K.done()}).next(()=>this.vn(e,P))}vn(e,n){const o=[],u=[];return n.forEach(c=>{u.push(wc(e).get(c).next(g=>{if(null===g)throw Vt();jt(g.userId===this.userId),o.push(Jl(this.serializer,g))}))}),C.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return U_(e.ae,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),C.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return C.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return Tc(e).Y({range:o},(c,g,P)=>{if(c[0]===this.userId){const k=vo(c[1]);u.push(k)}else P.done()}).next(()=>{jt(0===u.length)})})}containsKey(e,n){return Kh(e,this.userId,n)}Mn(e){return B_(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Kh(i,e,n){const o=nu(e,n.path),u=o[1],c=IDBKeyRange.lowerBound(o);let g=!1;return Tc(i).Y({range:c,J:!0},(P,k,z)=>{const[K,se,Te]=P;K===e&&se===u&&(g=!0),z.done()}).next(()=>g)}function wc(i){return ss(i,"mutations")}function Tc(i){return ss(i,"documentMutations")}function B_(i){return ss(i,"mutationQueues")}class Nu{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Nu(0)}static Nn(){return new Nu(-1)}}class Vv{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const o=new Nu(n.highestTargetId);return n.highestTargetId=o.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>zt.fromTimestamp(new Tr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Bn(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.Ln(e,u)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(o=>(o.targetCount+=1,this.qn(n,o),this.Ln(e,o))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>eh(e).delete(n.targetId)).next(()=>this.Bn(e)).next(o=>(jt(o.targetCount>0),o.targetCount-=1,this.Ln(e,o)))}removeTargets(e,n,o){let u=0;const c=[];return eh(e).Y((g,P)=>{const k=jh(P);k.sequenceNumber<=n&&null===o.get(k.targetId)&&(u++,c.push(this.removeTargetData(e,k)))}).next(()=>C.waitFor(c)).next(()=>u)}forEachTarget(e,n){return eh(e).Y((o,u)=>{const c=jh(u);n(c)})}Bn(e){return lp(e).get("targetGlobalKey").next(n=>(jt(null!==n),n))}Ln(e,n){return lp(e).put("targetGlobalKey",n)}kn(e,n){return eh(e).put(ud(this.serializer,n))}qn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=xo(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let c=null;return eh(e).Y({range:u,index:"queryTargetsIndex"},(g,P,k)=>{const z=jh(P);Cl(n,z.target)&&(c=z,k.done())}).next(()=>c)}addMatchingKeys(e,n,o){const u=[],c=ec(e);return n.forEach(g=>{const P=ms(g.path);u.push(c.put({targetId:o,path:P})),u.push(this.referenceDelegate.addReference(e,o,g))}),C.waitFor(u)}removeMatchingKeys(e,n,o){const u=ec(e);return C.forEach(n,c=>{const g=ms(c.path);return C.waitFor([u.delete([o,g]),this.referenceDelegate.removeReference(e,o,c)])})}removeMatchingKeysForTargetId(e,n){const o=ec(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=ec(e);let c=B();return u.Y({range:o,J:!0},(g,P,k)=>{const z=vo(g[1]),K=new wt(z);c=c.add(K)}).next(()=>c)}containsKey(e,n){const o=ms(n.path),u=IDBKeyRange.bound([o],[xl(o)],!1,!0);let c=0;return ec(e).Y({index:"documentTargetsIndex",J:!0,range:u},([g,P],k,z)=>{0!==g&&(c++,z.done())}).next(()=>c>0)}_t(e,n){return eh(e).get(n).next(o=>o?jh(o):null)}}function eh(i){return ss(i,"targets")}function lp(i){return ss(i,"targetGlobal")}function ec(i){return ss(i,"targetDocuments")}function j_([i,e],[n,o]){const u=In(i,n);return 0===u?In(e,o):u}class Uv{constructor(e){this.Qn=e,this.buffer=new Cr(j_),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();j_(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class H_{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;at("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ie.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){Ue(o)?at("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield N(o)}yield n.Gn(3e5)}))}}class Bv{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return C.resolve(Pi._e);const o=new Uv(n);return this.zn.forEachTarget(e,u=>o.Un(u.sequenceNumber)).next(()=>this.zn.Hn(e,u=>o.Un(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.zn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector","Garbage collection skipped; disabled"),C.resolve(V_)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),V_):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let o,u,c,g,P,k,z;const K=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(se=>(se>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${se}`),u=this.params.maximumSequenceNumbersToCollect):u=se,g=Date.now(),this.nthSequenceNumber(e,u))).next(se=>(o=se,P=Date.now(),this.removeTargets(e,o,n))).next(se=>(c=se,k=Date.now(),this.removeOrphanedDocuments(e,o))).next(se=>(z=Date.now(),zs()<=Ce.in.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-K}ms\n\tDetermined least recently used ${u} in `+(P-g)+`ms\n\tRemoved ${c} targets in `+(k-P)+`ms\n\tRemoved ${se} documents in `+(z-k)+`ms\nTotal Duration: ${z-K}ms`),C.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:c,documentsRemoved:se})))}}class jI{constructor(e,n){this.db=e,this.garbageCollector=function Fg(i,e){return new Bv(i,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}Yn(e){let n=0;return this.Hn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(o,u)=>n(u))}addReference(e,n,o){return Lg(e,o)}removeReference(e,n,o){return Lg(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return Lg(e,n)}Xn(e,n){return function(u,c){let g=!1;return B_(u).Z(P=>Kh(u,P,c).next(k=>(k&&(g=!0),C.resolve(!k)))).next(()=>g)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let c=0;return this.Zn(e,(g,P)=>{if(P<=n){const k=this.Xn(e,g).next(z=>{if(!z)return c++,o.getEntry(e,g).next(()=>(o.removeEntry(g,zt.min()),ec(e).delete([0,ms(g.path)])))});u.push(k)}}).next(()=>C.waitFor(u)).next(()=>o.apply(e)).next(()=>c)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return Lg(e,n)}Zn(e,n){const o=ec(e);let u,c=Pi._e;return o.Y({index:"documentTargetsIndex"},([g,P],{path:k,sequenceNumber:z})=>{0===g?(c!==Pi._e&&n(new wt(vo(u)),c),c=z,u=k):c=Pi._e}).next(()=>{c!==Pi._e&&n(new wt(vo(u)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lg(i,e){return ec(i).put((u=i.currentSequenceNumber,{targetId:0,path:ms(e.path),sequenceNumber:u}));var u}class th{constructor(){this.changes=new Na(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?C.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Zh{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return tc(e).put(o)}removeEntry(e,n,o){return tc(e).delete(function(c,g){const P=c.path.toArray();return[P.slice(0,P.length-2),P[P.length-2],np(g),P[P.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.er(e,o)))}getEntry(e,n){let o=On.newInvalidDocument(n);return tc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Qh(n))},(u,c)=>{o=this.tr(n,c)}).next(()=>o)}nr(e,n){let o={size:0,document:On.newInvalidDocument(n)};return tc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Qh(n))},(u,c)=>{o={document:this.tr(n,c),size:up(c)}}).next(()=>o)}getEntries(e,n){let o=ho();return this.rr(e,n,(u,c)=>{const g=this.tr(u,c);o=o.insert(u,g)}).next(()=>o)}ir(e,n){let o=ho(),u=new Pr(wt.comparator);return this.rr(e,n,(c,g)=>{const P=this.tr(c,g);o=o.insert(c,P),u=u.insert(c,up(g))}).next(()=>({documents:o,sr:u}))}rr(e,n,o){if(n.isEmpty())return C.resolve();let u=new Cr(Bg);n.forEach(k=>u=u.add(k));const c=IDBKeyRange.bound(Qh(u.first()),Qh(u.last())),g=u.getIterator();let P=g.getNext();return tc(e).Y({index:"documentKeyIndex",range:c},(k,z,K)=>{const se=wt.fromSegments([...z.prefixPath,z.collectionGroup,z.documentId]);for(;P&&Bg(P,se)<0;)o(P,null),P=g.getNext();P&&P.isEqual(se)&&(o(P,z),P=g.hasNext()?g.getNext():null),P?K.U(Qh(P)):K.done()}).next(()=>{for(;P;)o(P,null),P=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,n,o,u,c){const g=n.path,P=[g.popLast().toArray(),g.lastSegment(),np(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],k=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tc(e).W(IDBKeyRange.bound(P,k,!0)).next(z=>{c?.incrementDocumentReadCount(z.length);let K=ho();for(const se of z){const Te=this.tr(wt.fromSegments(se.prefixPath.concat(se.collectionGroup,se.documentId)),se);Te.isFoundDocument()&&(Su(n,Te)||u.has(Te.key))&&(K=K.insert(Te.key,Te))}return K})}getAllFromCollectionGroup(e,n,o,u){let c=ho();const g=Ug(n,o),P=Ug(n,Ms.max());return tc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,P,!0)},(k,z,K)=>{const se=this.tr(wt.fromSegments(z.prefixPath.concat(z.collectionGroup,z.documentId)),z);c=c.insert(se.key,se),c.size===u&&K.done()}).next(()=>c)}newChangeBuffer(e){return new $_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return cp(e).get("remoteDocumentGlobalKey").next(n=>(jt(!!n),n))}er(e,n){return cp(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const o=function Qd(i,e){let n;if(e.document)n=od(i.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=wt.fromSegments(e.noDocument.path),u=ad(e.noDocument.readTime);n=On.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Vt();{const o=wt.fromSegments(e.unknownDocument.path),u=ad(e.unknownDocument.version);n=On.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(u){const c=new Tr(u[0],u[1]);return zt.fromTimestamp(c)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual(zt.min()))return o}return On.newInvalidDocument(e)}}function Vg(i){return new Zh(i)}class $_ extends th{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Na(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new Cr((c,g)=>In(c.canonicalString(),g.canonicalString()));return this.changes.forEach((c,g)=>{const P=this.ar.get(c);if(n.push(this._r.removeEntry(e,c,P.readTime)),g.isValidDocument()){const k=O_(this._r.serializer,g);u=u.add(c.path.popLast());const z=up(k);o+=z-P.size,n.push(this._r.addEntry(e,c,k))}else if(o-=P.size,this.trackRemovals){const k=O_(this._r.serializer,g.convertToNoDocument(zt.min()));n.push(this._r.addEntry(e,c,k))}}),u.forEach(c=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,c))}),n.push(this._r.updateMetadata(e,o)),C.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(o=>(this.ar.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:o,sr:u})=>(u.forEach((c,g)=>{this.ar.set(c,{size:g,readTime:o.get(c).readTime})}),o))}}function cp(i){return ss(i,"remoteDocumentGlobal")}function tc(i){return ss(i,"remoteDocumentsV14")}function Qh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ug(i,e){const n=e.documentKey.path.toArray();return[i,np(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Bg(i,e){const n=i.path.toArray(),o=e.path.toArray();let u=0;for(let c=0;c<n.length-2&&c<o.length-2;++c)if(u=In(n[c],o[c]),u)return u;return u=In(n.length,o.length),u||(u=In(n[n.length-2],o[o.length-2]),u||In(n[n.length-1],o[o.length-1]))}class dp{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class jv{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==o&&ka(o.mutation,u,_s.empty(),Tr.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,B()).next(()=>o))}getLocalViewOfDocuments(e,n,o=B()){const u=v();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(c=>{let g=ql();return c.forEach((P,k)=>{g=g.insert(P,k.overlayedDocument)}),g}))}getOverlayedDocuments(e,n){const o=v();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,B()))}populateOverlays(e,n,o){const u=[];return o.forEach(c=>{n.has(c)||u.push(c)}),this.documentOverlayCache.getOverlays(e,u).next(c=>{c.forEach((g,P)=>{n.set(g,P)})})}computeViews(e,n,o,u){let c=ho();const g=m(),P=m();return n.forEach((k,z)=>{const K=o.get(z.key);u.has(z.key)&&(void 0===K||K.mutation instanceof bn)?c=c.insert(z.key,z):void 0!==K?(g.set(z.key,K.mutation.getFieldMask()),ka(K.mutation,z,K.mutation.getFieldMask(),Tr.now())):g.set(z.key,_s.empty())}),this.recalculateAndSaveOverlays(e,c).next(k=>(k.forEach((z,K)=>g.set(z,K)),n.forEach((z,K)=>{var se;return P.set(z,new dp(K,null!==(se=g.get(z))&&void 0!==se?se:null))}),P))}recalculateAndSaveOverlays(e,n){const o=m();let u=new Pr((g,P)=>g-P),c=B();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(g=>{for(const P of g)P.keys().forEach(k=>{const z=n.get(k);if(null===z)return;let K=o.get(k)||_s.empty();K=P.applyToLocalView(z,K),o.set(k,K);const se=(u.get(P.batchId)||B()).add(k);u=u.insert(P.batchId,se)})}).next(()=>{const g=[],P=u.getReverseIterator();for(;P.hasNext();){const k=P.getNext(),z=k.key,K=k.value,se=h();K.forEach(Te=>{if(!c.has(Te)){const $e=cu(n.get(Te),o.get(Te));null!==$e&&se.set(Te,$e),c=c.add(Te)}}),g.push(this.documentOverlayCache.saveOverlays(e,z,se))}return C.waitFor(g)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,u){return wt.isDocumentKey((g=n).path)&&null===g.collectionGroup&&0===g.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):tl(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u);var g}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(c=>{const g=u-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-c.size):C.resolve(v());let P=-1,k=c;return g.next(z=>C.forEach(z,(K,se)=>(P<se.largestBatchId&&(P=se.largestBatchId),c.get(K)?C.resolve():this.remoteDocumentCache.getEntry(e,K).next(Te=>{k=k.insert(K,Te)}))).next(()=>this.populateOverlays(e,z,c)).next(()=>this.computeViews(e,k,z,B())).next(K=>({batchId:P,changes:rd(K)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new wt(n)).next(o=>{let u=ql();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const c=n.collectionGroup;let g=ql();return this.indexManager.getCollectionParents(e,c).next(P=>C.forEach(P,k=>{const z=(se=n,Te=k.child(c),new Go(Te,null,se.explicitOrderBy.slice(),se.filters.slice(),se.limit,se.limitType,se.startAt,se.endAt));var se,Te;return this.getDocumentsMatchingCollectionQuery(e,z,o,u).next(K=>{K.forEach((se,Te)=>{g=g.insert(se,Te)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,n,o,u){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(g=>(c=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,c,u))).next(g=>{c.forEach((k,z)=>{const K=z.getKey();null===g.get(K)&&(g=g.insert(K,On.newInvalidDocument(K)))});let P=ql();return g.forEach((k,z)=>{const K=c.get(k);void 0!==K&&ka(K.mutation,z,_s.empty(),Tr.now()),Su(n,z)&&(P=P.insert(k,z))}),P})}}class jg{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return C.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(u=n).id,version:u.version,createTime:Mi(u.createTime)}),C.resolve();var u}getNamedQuery(e,n){return C.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(u=n).name,query:Jd(u.bundledQuery),readTime:Mi(u.readTime)}),C.resolve();var u}}class Hv{constructor(){this.overlays=new Pr(wt.comparator),this.lr=new Map}getOverlay(e,n){return C.resolve(this.overlays.get(n))}getOverlays(e,n){const o=v();return C.forEach(n,u=>this.getOverlay(e,u).next(c=>{null!==c&&o.set(u,c)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,c)=>{this.lt(e,n,c)}),C.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.lr.get(o);return void 0!==u&&(u.forEach(c=>this.overlays=this.overlays.remove(c)),this.lr.delete(o)),C.resolve()}getOverlaysForCollection(e,n,o){const u=v(),c=n.length+1,g=new wt(n.child("")),P=this.overlays.getIteratorFrom(g);for(;P.hasNext();){const k=P.getNext().value,z=k.getKey();if(!n.isPrefixOf(z.path))break;z.path.length===c&&k.largestBatchId>o&&u.set(k.getKey(),k)}return C.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let c=new Pr((z,K)=>z-K);const g=this.overlays.getIterator();for(;g.hasNext();){const z=g.getNext().value;if(z.getKey().getCollectionGroup()===n&&z.largestBatchId>o){let K=c.get(z.largestBatchId);null===K&&(K=v(),c=c.insert(z.largestBatchId,K)),K.set(z.getKey(),z)}}const P=v(),k=c.getIterator();for(;k.hasNext()&&(k.getNext().value.forEach((z,K)=>P.set(z,K)),!(P.size()>=u)););return C.resolve(P)}lt(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const g=this.lr.get(u.largestBatchId).delete(o.key);this.lr.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(o.key,new as(n,o));let c=this.lr.get(n);void 0===c&&(c=B(),this.lr.set(n,c)),this.lr.set(n,c.add(o.key))}}class Yh{constructor(){this.hr=new Cr(po.Pr),this.Ir=new Cr(po.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const o=new po(e,n);this.hr=this.hr.add(o),this.Ir=this.Ir.add(o)}Er(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.dr(new po(e,n))}Ar(e,n){e.forEach(o=>this.removeReference(o,n))}Rr(e){const n=new wt(new Bn([])),o=new po(n,e),u=new po(n,e+1),c=[];return this.Ir.forEachInRange([o,u],g=>{this.dr(g),c.push(g.key)}),c}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new wt(new Bn([])),o=new po(n,e),u=new po(n,e+1);let c=B();return this.Ir.forEachInRange([o,u],g=>{c=c.add(g.key)}),c}containsKey(e){const n=new po(e,0),o=this.hr.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class po{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return wt.comparator(e.key,n.key)||In(e.gr,n.gr)}static Tr(e,n){return In(e.gr,n.gr)||wt.comparator(e.key,n.key)}}class z_{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Cr(po.Pr)}checkEmpty(e){return C.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const c=this.pr;this.pr++;const g=new Zl(c,n,o,u);this.mutationQueue.push(g);for(const P of u)this.yr=this.yr.add(new po(P.key,c)),this.indexManager.addToCollectionParentIndex(e,P.key.path.popLast());return C.resolve(g)}lookupMutationBatch(e,n){return C.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.Sr(n+1),c=u<0?0:u;return C.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return C.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return C.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new po(n,0),u=new po(n,Number.POSITIVE_INFINITY),c=[];return this.yr.forEachInRange([o,u],g=>{const P=this.wr(g.gr);c.push(P)}),C.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Cr(In);return n.forEach(u=>{const c=new po(u,0),g=new po(u,Number.POSITIVE_INFINITY);this.yr.forEachInRange([c,g],P=>{o=o.add(P.gr)})}),C.resolve(this.br(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let c=o;wt.isDocumentKey(c)||(c=c.child(""));const g=new po(new wt(c),0);let P=new Cr(In);return this.yr.forEachWhile(k=>{const z=k.key.path;return!!o.isPrefixOf(z)&&(z.length===u&&(P=P.add(k.gr)),!0)},g),C.resolve(this.br(P))}br(e){const n=[];return e.forEach(o=>{const u=this.wr(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){jt(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let o=this.yr;return C.forEach(n.mutations,u=>{const c=new po(u.key,n.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.yr=o})}Fn(e){}containsKey(e,n){const o=new po(n,0),u=this.yr.firstAfterOrEqual(o);return C.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return C.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class hd{constructor(e){this.Cr=e,this.docs=new Pr(wt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),c=u?u.size:0,g=this.Cr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:g}),this.size+=g-c,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return C.resolve(o?o.document.mutableCopy():On.newInvalidDocument(n))}getEntries(e,n){let o=ho();return n.forEach(u=>{const c=this.docs.get(u);o=o.insert(u,c?c.document.mutableCopy():On.newInvalidDocument(u))}),C.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let c=ho();const g=n.path,P=new wt(g.child("")),k=this.docs.getIteratorFrom(P);for(;k.hasNext();){const{key:z,value:{document:K}}=k.getNext();if(!g.isPrefixOf(z.path))break;z.path.length>g.length+1||_l(ml(K),o)<=0||(u.has(K.key)||Su(n,K))&&(c=c.insert(K.key,K.mutableCopy()))}return C.resolve(c)}getAllFromCollectionGroup(e,n,o,u){Vt()}vr(e,n){return C.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new $v(this)}getSize(e){return C.resolve(this.size)}}class $v extends th{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this._r.addEntry(e,u)):this._r.removeEntry(o)}),C.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class Hg{constructor(e){this.persistence=e,this.Fr=new Na(n=>xo(n),Cl),this.lastRemoteSnapshotVersion=zt.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Yh,this.targetCount=0,this.Nr=Nu.On()}forEachTarget(e,n){return this.Fr.forEach((o,u)=>n(u)),C.resolve()}getLastRemoteSnapshotVersion(e){return C.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return C.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),C.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Mr&&(this.Mr=n),C.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Nu(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,C.resolve()}updateTargetData(e,n){return this.kn(n),C.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,C.resolve()}removeTargets(e,n,o){let u=0;const c=[];return this.Fr.forEach((g,P)=>{P.sequenceNumber<=n&&null===o.get(P.targetId)&&(this.Fr.delete(g),c.push(this.removeMatchingKeysForTargetId(e,P.targetId)),u++)}),C.waitFor(c).next(()=>u)}getTargetCount(e){return C.resolve(this.targetCount)}getTargetData(e,n){const o=this.Fr.get(n)||null;return C.resolve(o)}addMatchingKeys(e,n,o){return this.Or.Er(n,o),C.resolve()}removeMatchingKeys(e,n,o){this.Or.Ar(n,o);const u=this.persistence.referenceDelegate,c=[];return u&&n.forEach(g=>{c.push(u.markPotentiallyOrphaned(e,g))}),C.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),C.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Or.mr(n);return C.resolve(o)}containsKey(e,n){return C.resolve(this.Or.containsKey(n))}}class nh{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Pi(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Hg(this),this.indexManager=new F_,this.remoteDocumentCache=new hd(o=>this.referenceDelegate.Qr(o)),this.serializer=new tp(n),this.Kr=new jg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Hv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Br[e.toKey()];return o||(o=new z_(n,this.referenceDelegate),this.Br[e.toKey()]=o),o}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,o){at("MemoryPersistence","Starting transaction:",e);const u=new zv(this.Lr.next());return this.referenceDelegate.$r(),o(u).next(c=>this.referenceDelegate.Ur(u).next(()=>c)).toPromise().then(c=>(u.raiseOnCommittedEvent(),c))}Wr(e,n){return C.or(Object.values(this.Br).map(o=>()=>o.containsKey(e,n)))}}class zv extends b{constructor(e){super(),this.currentSequenceNumber=e}}class rh{constructor(e){this.persistence=e,this.Gr=new Yh,this.zr=null}static jr(e){return new rh(e)}get Hr(){if(this.zr)return this.zr;throw Vt()}addReference(e,n,o){return this.Gr.addReference(o,n),this.Hr.delete(o.toString()),C.resolve()}removeReference(e,n,o){return this.Gr.removeReference(o,n),this.Hr.add(o.toString()),C.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),C.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(u=>this.Hr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(c=>this.Hr.add(c.toString()))}).next(()=>o.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return C.forEach(this.Hr,o=>{const u=wt.fromPath(o);return this.Jr(e,u).next(c=>{c||n.removeEntry(u,zt.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(o=>{o?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return C.or([()=>C.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class bl{constructor(e){this.serializer=e}N(e,n,o,u){const c=new U("createOrUpgrade",n);var k;o<1&&u>=1&&(e.createObjectStore("owner"),(k=e).createObjectStore("mutationQueues",{keyPath:"userId"}),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uc,{unique:!0}),k.createObjectStore("documentMutations"),pd(e),function(k){k.createObjectStore("remoteDocuments")}(e));let g=C.resolve();return o<3&&u>=3&&(0!==o&&(function(k){k.deleteObjectStore("targetDocuments"),k.deleteObjectStore("targets"),k.deleteObjectStore("targetGlobal")}(e),pd(e)),g=g.next(()=>function(k){const z=k.store("targetGlobal"),K={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:zt.min().toTimestamp(),targetCount:0};return z.put("targetGlobalKey",K)}(c))),o<4&&u>=4&&(0!==o&&(g=g.next(()=>function(k,z){return z.store("mutations").W().next(K=>{k.deleteObjectStore("mutations"),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uc,{unique:!0});const se=z.store("mutations"),Te=K.map($e=>se.put($e));return C.waitFor(Te)})}(e,c))),g=g.next(()=>{!function(k){k.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(g=g.next(()=>this.Zr(c))),o<6&&u>=6&&(g=g.next(()=>(function(k){k.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(c)))),o<7&&u>=7&&(g=g.next(()=>this.ei(c))),o<8&&u>=8&&(g=g.next(()=>this.ti(e,c))),o<9&&u>=9&&(g=g.next(()=>{!function(k){k.objectStoreNames.contains("remoteDocumentChanges")&&k.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(g=g.next(()=>this.ni(c))),o<11&&u>=11&&(g=g.next(()=>{(function(k){k.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(k){k.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(g=g.next(()=>{!function(k){const z=k.createObjectStore("documentOverlays",{keyPath:Sh});z.createIndex("collectionPathOverlayIndex",Rh,{unique:!1}),z.createIndex("collectionGroupOverlayIndex",$c,{unique:!1})}(e)})),o<13&&u>=13&&(g=g.next(()=>function(k){const z=k.createObjectStore("remoteDocumentsV14",{keyPath:Ku});z.createIndex("documentKeyIndex",Vl),z.createIndex("collectionGroupIndex",Wf)}(e)).next(()=>this.ri(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(g=g.next(()=>this.ii(e,c))),o<15&&u>=15&&(g=g.next(()=>function(k){k.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),k.createObjectStore("indexState",{keyPath:jc}).createIndex("sequenceNumberIndex",qf,{unique:!1}),k.createObjectStore("indexEntries",{keyPath:xd}).createIndex("documentKeyIndex",Hc,{unique:!1})}(e))),g}Xr(e){let n=0;return e.store("remoteDocuments").Y((o,u)=>{n+=up(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Zr(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(u=>C.forEach(u,c=>{const g=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",g).next(P=>C.forEach(P,k=>{jt(k.userId===c.userId);const z=Jl(this.serializer,k);return U_(e,c.userId,z).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const c=[];return o.Y((g,P)=>{const k=new Bn(g),z=[0,ms(k)];c.push(n.get(z).next(K=>K?C.resolve():n.put({targetId:0,path:ms(k),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>C.waitFor(c))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:Nd});const o=n.store("collectionParents"),u=new L_,c=g=>{if(u.add(g)){const P=g.lastSegment(),k=g.popLast();return o.put({collectionId:P,parent:ms(k)})}};return n.store("remoteDocuments").Y({J:!0},(g,P)=>{const k=new Bn(g);return c(k.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([g,P,k],z)=>{const K=vo(P);return c(K.popLast())}))}ni(e){const n=e.store("targets");return n.Y((o,u)=>{const c=jh(u),g=ud(this.serializer,c);return n.put(g)})}ri(e,n){const o=n.store("remoteDocuments"),u=[];return o.Y((c,g)=>{const P=n.store("remoteDocumentsV14"),k=(se=g,se.document?new wt(Bn.fromString(se.document.name).popFirst(5)):se.noDocument?wt.fromSegments(se.noDocument.path):se.unknownDocument?wt.fromSegments(se.unknownDocument.path):Vt()).path.toArray(),z={prefixPath:k.slice(0,k.length-2),collectionGroup:k[k.length-2],documentId:k[k.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};var se;u.push(P.put(z))}).next(()=>C.waitFor(u))}ii(e,n){const o=n.store("mutations"),u=Vg(this.serializer),c=new nh(rh.jr,this.serializer.ut);return o.W().next(g=>{const P=new Map;return g.forEach(k=>{var z;let K=null!==(z=P.get(k.userId))&&void 0!==z?z:B();Jl(this.serializer,k).keys().forEach(se=>K=K.add(se)),P.set(k.userId,K)}),C.forEach(P,(k,z)=>{const K=new An(z),se=rp.ct(this.serializer,K),Te=c.getIndexManager(K),$e=qh.ct(K,this.serializer,Te,c.referenceDelegate);return new jv(u,$e,se,Te).recalculateAndSaveOverlaysForDocumentKeys(new Ul(n,Pi._e),k).next()})})}}function pd(i){i.createObjectStore("targetDocuments",{keyPath:ru}).createIndex("documentTargetsIndex",Zu,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Cu,{unique:!0}),i.createObjectStore("targetGlobal")}const Jh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $g{constructor(e,n,o,u,c,g,P,k,z,K,se=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.si=c,this.window=g,this.document=P,this.oi=z,this._i=K,this.ai=se,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=Te=>Promise.resolve(),!$g.D())throw new Ye(We.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jI(this,u),this.Ii=n+"main",this.serializer=new tp(k),this.Ti=new Y(this.Ii,this.ai,new bl(this.serializer)),this.qr=new Vv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Vg(this.serializer),this.Kr=new N_,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===K&&yr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ye(We.FAILED_PRECONDITION,Jh);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Pi(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var o=(0,Ie.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,Ie.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,Ie.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ef(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Ue(e))return at("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return at("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Xh(e).get("owner").next(n=>C.resolve(this.wi(n)))}Si(e){return ef(e).delete(this.clientId)}bi(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=ss(o,"clientMetadata");return u.W().next(c=>{const g=e.Ci(c,18e5),P=c.filter(k=>-1===g.indexOf(k));return C.forEach(P,k=>u.delete(k.clientId)).next(()=>P)})}).catch(()=>[]);if(e.Ei)for(const o of n)e.Ei.removeItem(e.vi(o.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?C.resolve(!0):Xh(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new Ye(We.FAILED_PRECONDITION,Jh);return!1}}return!(!this.networkEnabled||!this.inForeground)||ef(e).W().next(o=>void 0===this.Ci(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&at("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new Ul(n,Pi._e);return e.pi(o).next(()=>e.Si(o))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(o=>this.Di(o.updateTimeMs,n)&&!this.Fi(o.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>ef(e).W().next(n=>this.Ci(n,18e5).map(o=>o.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return qh.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new BI(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return rp.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,o){at("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",c=15===(k=this.ai)?El:14===k?lc:13===k?Du:12===k?Ph:11===k?ba:void Vt();var k;let g;return this.Ti.runTransaction(e,u,c,P=>(g=new Ul(P,this.Lr?this.Lr.next():Pi._e),"readwrite-primary"===n?this.fi(g).next(k=>!!k||this.gi(g)).next(k=>{if(!k)throw yr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new Ye(We.FAILED_PRECONDITION,Bc);return o(g)}).next(k=>this.yi(g).next(()=>k)):this.Li(g).next(()=>o(g)))).then(P=>(g.raiseOnCommittedEvent(),P))}Li(e){return Xh(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Ye(We.FAILED_PRECONDITION,Jh)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xh(e).put("owner",n)}static D(){return Y.D()}pi(e){const n=Xh(e);return n.get("owner").next(o=>this.wi(o)?(at("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):C.resolve())}Di(e,n){const o=Date.now();return!(e<o-n||e>o&&(yr(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,Ge.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const o=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return at("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return yr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){yr("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xh(i){return ss(i,"owner")}function ef(i){return ss(i,"clientMetadata")}function Cc(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class zg{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.ki=o,this.qi=u}static Qi(e,n){let o=B(),u=B();for(const c of n.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:u=u.add(c.doc.key)}return new zg(e,n.fromCache,o,u)}}class Gv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class G_{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,o,u){const c={result:null};return this.zi(e,n).next(g=>{c.result=g}).next(()=>{if(!c.result)return this.ji(e,n,u,o).next(g=>{c.result=g})}).next(()=>{if(c.result)return;const g=new Gv;return this.Hi(e,n,g).next(P=>{if(c.result=P,this.$i)return this.Ji(e,n,g,P.size)})}).next(()=>c.result)}Ji(e,n,o,u){return o.documentReadCount<this.Ui?(zs()<=Ce.in.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",nl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),C.resolve()):(zs()<=Ce.in.DEBUG&&at("QueryEngine","Query:",nl(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Wi*u?(zs()<=Ce.in.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",nl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,co(n))):C.resolve())}zi(e,n){if(td(n))return C.resolve(null);let o=co(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=gc(n,null,"F"),o=co(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(c=>{const g=B(...c);return this.Gi.getDocuments(e,g).next(P=>this.indexManager.getMinOffset(e,o).next(k=>{const z=this.Yi(n,P);return this.Zi(n,z,g,k.readTime)?this.zi(e,gc(n,null,"F")):this.Xi(e,z,n,k)}))})))}ji(e,n,o,u){return td(n)||u.isEqual(zt.min())?C.resolve(null):this.Gi.getDocuments(e,o).next(c=>{const g=this.Yi(n,c);return this.Zi(n,g,o,u)?C.resolve(null):(zs()<=Ce.in.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),nl(n)),this.Xi(e,g,n,kl(u,-1)).next(P=>P))})}Yi(e,n){let o=new Cr(mc(e));return n.forEach((u,c)=>{Su(e,c)&&(o=o.add(c))}),o}Zi(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const c="F"===e.limitType?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(u)>0)}Hi(e,n,o){return zs()<=Ce.in.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",nl(n)),this.Gi.getDocumentsMatchingQuery(e,n,Ms.min(),o)}Xi(e,n,o,u){return this.Gi.getDocumentsMatchingQuery(e,o,u).next(c=>(n.forEach(g=>{c=c.insert(g.key,g)}),c))}}class Gg{constructor(e,n,o,u){this.persistence=e,this.es=n,this.serializer=u,this.ts=new Pr(In),this.ns=new Na(c=>xo(c),Cl),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(o)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jv(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function Wg(i,e,n,o){return new Gg(i,e,n,o)}function W_(i,e){return hp.apply(this,arguments)}function hp(){return hp=(0,Ie.Z)(function*(i,e){const n=St(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(c=>(u=c,n.os(e),n.mutationQueue.getAllMutationBatches(o))).next(c=>{const g=[],P=[];let k=B();for(const z of u){g.push(z.batchId);for(const K of z.mutations)k=k.add(K.key)}for(const z of c){P.push(z.batchId);for(const K of z.mutations)k=k.add(K.key)}return n.localDocuments.getDocuments(o,k).next(z=>({_s:z,removedBatchIds:g,addedBatchIds:P}))})})}),hp.apply(this,arguments)}function Wv(i){const e=St(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function q_(i,e,n){let o=B(),u=B();return n.forEach(c=>o=o.add(c)),e.getEntries(i,o).next(c=>{let g=ho();return n.forEach((P,k)=>{const z=c.get(P);k.isFoundDocument()!==z.isFoundDocument()&&(u=u.add(P)),k.isNoDocument()&&k.version.isEqual(zt.min())?(e.removeEntry(P,k.readTime),g=g.insert(P,k)):!z.isValidDocument()||k.version.compareTo(z.version)>0||0===k.version.compareTo(z.version)&&z.hasPendingWrites?(e.addEntry(k),g=g.insert(P,k)):at("LocalStore","Ignoring outdated watch update for ",P,". Current version:",z.version," Watch version:",k.version)}),{us:g,cs:u}})}function Kv(i,e){const n=St(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function tf(i,e){const n=St(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.qr.getTargetData(o,e).next(c=>c?(u=c,C.resolve(u)):n.qr.allocateTargetId(o).next(g=>(u=new Ou(e,g,"TargetPurposeListen",o.currentSequenceNumber),n.qr.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.ts.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.ts=n.ts.insert(o.targetId,o),n.ns.set(e,o.targetId)),o})}function nf(i,e,n){return ih.apply(this,arguments)}function ih(){return ih=(0,Ie.Z)(function*(i,e,n){const o=St(i),u=o.ts.get(e),c=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",c,g=>o.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!Ue(g))throw g;at("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}o.ts=o.ts.remove(e),o.ns.delete(u.target)}),ih.apply(this,arguments)}function fp(i,e,n){const o=St(i);let u=zt.min(),c=B();return o.persistence.runTransaction("Execute query","readwrite",g=>function(k,z,K){const se=St(k),Te=se.ns.get(K);return void 0!==Te?C.resolve(se.ts.get(Te)):se.qr.getTargetData(z,K)}(o,g,co(e)).next(P=>{if(P)return u=P.lastLimboFreeSnapshotVersion,o.qr.getMatchingKeysForTargetId(g,P.targetId).next(k=>{c=k})}).next(()=>o.es.getDocumentsMatchingQuery(g,e,n?u:zt.min(),n?c:B())).next(P=>(gd(o,Wl(e),P),{documents:P,ls:c})))}function pp(i,e){const n=St(i),o=St(n.qr),u=n.ts.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",c=>o._t(c,e).next(g=>g?g.target:null))}function gp(i,e){const n=St(i),o=n.rs.get(e)||zt.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.ss.getAllFromCollectionGroup(u,e,kl(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(gd(n,e,u),u))}function gd(i,e,n){let o=i.rs.get(e)||zt.min();n.forEach((u,c)=>{c.readTime.compareTo(o)>0&&(o=c.readTime)}),i.rs.set(e,o)}function rf(){return rf=(0,Ie.Z)(function*(i,e,n,o){const u=St(i);let c=B(),g=ho();for(const z of n){const K=e.hs(z.metadata.name);z.document&&(c=c.add(K));const se=e.Ps(z);se.setReadTime(e.Is(z.metadata.readTime)),g=g.insert(K,se)}const P=u.ss.newChangeBuffer({trackRemovals:!0}),k=yield tf(u,(K=o,co(el(Bn.fromString(`__bundle__/docs/${K}`)))));var K;return u.persistence.runTransaction("Apply bundle documents","readwrite",z=>q_(z,P,g).next(K=>(P.apply(z),K)).next(K=>u.qr.removeMatchingKeysForTargetId(z,k.targetId).next(()=>u.qr.addMatchingKeys(z,c,k.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(z,K.us,K.cs)).next(()=>K.us)))}),rf.apply(this,arguments)}function sf(i,e){return sh.apply(this,arguments)}function sh(){return sh=(0,Ie.Z)(function*(i,e,n=B()){const o=yield tf(i,co(Jd(e.bundledQuery))),u=St(i);return u.persistence.runTransaction("Save named query","readwrite",c=>{const g=Mi(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return u.Kr.saveNamedQuery(c,e);const P=o.withResumeToken(Ii.EMPTY_BYTE_STRING,g);return u.ts=u.ts.insert(P.targetId,P),u.qr.updateTargetData(c,P).next(()=>u.qr.removeMatchingKeysForTargetId(c,o.targetId)).next(()=>u.qr.addMatchingKeys(c,n,o.targetId)).next(()=>u.Kr.saveNamedQuery(c,e))})}),sh.apply(this,arguments)}function md(i,e){return`firestore_clients_${i}_${e}`}function mp(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function af(i,e){return`firestore_targets_${i}_${e}`}class _d{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Ts(e,n,o){const u=JSON.parse(o);let c,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(c=new Ye(u.error.code,u.error.message))),g?new _d(e,n,u.state,c):(yr("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _p{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Ts(e,n){const o=JSON.parse(n);let u,c="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(u=new Ye(o.error.code,o.error.message))),c?new _p(e,o.state,u):(yr("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class oh{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,c=oe();for(let g=0;u&&g<o.activeTargetIds.length;++g)u=Fl(o.activeTargetIds[g]),c=c.add(o.activeTargetIds[g]);return u?new oh(e,c):(yr("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class yd{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new yd(n.clientId,n.onlineState):(yr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Zg{constructor(){this.activeTargetIds=oe()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yp{constructor(e,n,o,u,c){this.window=e,this.si=n,this.persistenceKey=o,this.Rs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Pr(In),this.started=!1,this.ps=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ys=md(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new Zg),this.Ss=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(k){return`firestore_bundle_loaded_v2_${k}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const n=yield e.syncEngine.Bi();for(const u of n){if(u===e.Rs)continue;const c=e.getItem(md(e.persistenceKey,u));if(c){const g=oh.Ts(u,c);g&&(e.gs=e.gs.insert(g.clientId,g))}}e.Fs();const o=e.storage.getItem(e.Cs);if(o){const u=e.Ms(o);u&&e.xs(u)}for(const u of e.ps)e.fs(u);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,o){this.Ns(e,n,o),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(af(this.persistenceKey,e));if(o){const u=_p.Ts(e,o);u&&(n=u.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(af(this.persistenceKey,e))}updateQueryState(e,n,o){this.ks(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Bs(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return at("SharedClientState","READ",e,n),n}setItem(e,n){at("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){at("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const o=e;if(o.storageArea===this.storage){if(at("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ys)return void yr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,Ie.Z)(function*(){if(n.started){if(null!==o.key)if(n.Ss.test(o.key)){if(null==o.newValue){const u=n.Ks(o.key);return n.$s(u,null)}{const u=n.Us(o.key,o.newValue);if(u)return n.$s(u.clientId,u)}}else if(n.bs.test(o.key)){if(null!==o.newValue){const u=n.Ws(o.key,o.newValue);if(u)return n.Gs(u)}}else if(n.Ds.test(o.key)){if(null!==o.newValue){const u=n.zs(o.key,o.newValue);if(u)return n.js(u)}}else if(o.key===n.Cs){if(null!==o.newValue){const u=n.Ms(o.newValue);if(u)return n.xs(u)}}else if(o.key===n.ws){const u=function(g){let P=Pi._e;if(null!=g)try{const k=JSON.parse(g);jt("number"==typeof k),P=k}catch(k){yr("SharedClientState","Failed to read sequence number from WebStorage",k)}return P}(o.newValue);u!==Pi._e&&n.sequenceNumberHandler(u)}else if(o.key===n.vs){const u=n.Hs(o.newValue);yield Promise.all(u.map(c=>n.syncEngine.Js(c)))}}else n.ps.push(o)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,o){const u=new _d(this.currentUser,e,n,o),c=mp(this.persistenceKey,this.currentUser,e);this.setItem(c,u.Es())}Bs(e){const n=mp(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,o){const u=af(this.persistenceKey,e),c=new _p(e,n,o);this.setItem(u,c.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const o=this.Ks(e);return oh.Ts(o,n)}Ws(e,n){const o=this.bs.exec(e),u=Number(o[1]);return _d.Ts(new An(void 0!==o[2]?o[2]:null),u,n)}zs(e,n){const o=this.Ds.exec(e),u=Number(o[1]);return _p.Ts(u,n)}Ms(e){return yd.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,Ie.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);at("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const o=n?this.gs.insert(e,n):this.gs.remove(e),u=this.Os(this.gs),c=this.Os(o),g=[],P=[];return c.forEach(k=>{u.has(k)||g.push(k)}),u.forEach(k=>{c.has(k)||P.push(k)}),this.syncEngine.Xs(g,P).then(()=>{this.gs=o})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=oe();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class K_{constructor(){this.eo=new Zg,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,o){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Zg,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Zv{ro(e){}shutdown(){}}class vp{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){at("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){at("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let uf=null;function Qg(){return null===uf?uf=268435456+Math.round(2147483648*Math.random()):uf++,"0x"+uf.toString(16)}const Qv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HI{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const qo="WebChannelConnection";class Ep extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.mo=o+"://"+n.host,this.fo=`projects/${u}/databases/${c}`,this.po="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${c}`}get yo(){return!1}wo(n,o,u,c,g){const P=Qg(),k=this.So(n,o);at("RestConnection",`Sending RPC '${n}' ${P}:`,k,u);const z={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(z,c,g),this.Do(n,k,z,u).then(K=>(at("RestConnection",`Received RPC '${n}' ${P}: `,K),K),K=>{throw gs("RestConnection",`RPC '${n}' ${P} failed with error: `,K,"url: ",k,"request:",u),K})}Co(n,o,u,c,g,P){return this.wo(n,o,u,c,g)}bo(n,o,u){n["X-Goog-Api-Client"]="gl-js/ fire/"+Mo,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((c,g)=>n[g]=c),u&&u.headers.forEach((c,g)=>n[g]=c)}So(n,o){return`${this.mo}/v1/${o}:${Qv[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,o,u){const c=Qg();return new Promise((g,P)=>{const k=new Ps;k.setWithCredentials(!0),k.listenOnce(Po.COMPLETE,()=>{try{switch(k.getLastErrorCode()){case qi.NO_ERROR:const K=k.getResponseJson();at(qo,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(K)),g(K);break;case qi.TIMEOUT:at(qo,`RPC '${e}' ${c} timed out`),P(new Ye(We.DEADLINE_EXCEEDED,"Request time out"));break;case qi.HTTP_ERROR:const se=k.getStatus();if(at(qo,`RPC '${e}' ${c} failed with status:`,se,"response text:",k.getResponseText()),se>0){let Te=k.getResponseJson();Array.isArray(Te)&&(Te=Te[0]);const $e=Te?.error;if($e&&$e.status&&$e.message){const _t=function(At){const _n=At.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(_n)>=0?_n:We.UNKNOWN}($e.status);P(new Ye(_t,$e.message))}else P(new Ye(We.UNKNOWN,"Server responded with status "+k.getStatus()))}else P(new Ye(We.UNAVAILABLE,"Connection failed."));break;default:Vt()}}finally{at(qo,`RPC '${e}' ${c} completed.`)}});const z=JSON.stringify(u);at(qo,`RPC '${e}' ${c} sending request:`,u),k.send(n,"POST",z,o,15)})}vo(e,n,o){const u=Qg(),c=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=Wi(),P=Ca(),k={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},z=this.longPollingOptions.timeoutSeconds;void 0!==z&&(k.longPollingTimeout=Math.round(1e3*z)),this.useFetchStreams&&(k.xmlHttpFactory=new Eu({})),this.bo(k.initMessageHeaders,n,o),k.encodeInitMessageHeaders=!0;const K=c.join("");at(qo,`Creating RPC '${e}' stream ${u}: ${K}`,k);const se=g.createWebChannel(K,k);let Te=!1,$e=!1;const _t=new HI({co:At=>{$e?at(qo,`Not sending because RPC '${e}' stream ${u} is closed:`,At):(Te||(at(qo,`Opening RPC '${e}' stream ${u} transport.`),se.open(),Te=!0),at(qo,`RPC '${e}' stream ${u} sending:`,At),se.send(At))},lo:()=>se.close()}),Ct=(At,_n,Cn)=>{At.listen(_n,gn=>{try{Cn(gn)}catch(Jn){setTimeout(()=>{throw Jn},0)}})};return Ct(se,Da.EventType.OPEN,()=>{$e||at(qo,`RPC '${e}' stream ${u} transport opened.`)}),Ct(se,Da.EventType.CLOSE,()=>{$e||($e=!0,at(qo,`RPC '${e}' stream ${u} transport closed`),_t.Ro())}),Ct(se,Da.EventType.ERROR,At=>{$e||($e=!0,gs(qo,`RPC '${e}' stream ${u} transport errored:`,At),_t.Ro(new Ye(We.UNAVAILABLE,"The operation could not be completed")))}),Ct(se,Da.EventType.MESSAGE,At=>{var _n;if(!$e){const Cn=At.data[0];jt(!!Cn);const Jn=Cn.error||(null===(_n=Cn[0])||void 0===_n?void 0:_n.error);if(Jn){at(qo,`RPC '${e}' stream ${u} received error:`,Jn);const Mr=Jn.status;let Nr=function(yv){const __=ri[yv];if(void 0!==__)return Fa(__)}(Mr),ks=Jn.message;void 0===Nr&&(Nr=We.INTERNAL,ks="Unknown error status: "+Mr+" with message "+Jn.message),$e=!0,_t.Ro(new Ye(Nr,ks)),se.close()}else at(qo,`RPC '${e}' stream ${u} received:`,Cn),_t.Vo(Cn)}}),Ct(P,zu.STAT_EVENT,At=>{At.stat===Sr.PROXY?at(qo,`RPC '${e}' stream ${u} detected buffering proxy`):At.stat===Sr.NOPROXY&&at(qo,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{_t.Ao()},0),_t}}function Ip(){return typeof window<"u"?window:null}function wp(){return typeof document<"u"?document:null}function ah(i){return new Yt(i,!0)}class lf{constructor(e,n,o=1e3,u=1.5,c=6e4){this.si=e,this.timerId=n,this.Fo=o,this.Mo=u,this.xo=c,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),o=Math.max(0,Date.now()-this.Bo),u=Math.max(0,n-o);u>0&&at("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,u,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class cf{constructor(e,n,o,u,c,g,P,k){this.si=e,this.Ko=o,this.$o=u,this.connection=c,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=P,this.listener=k,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new lf(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,Ie.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,Ie.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var o=this;return(0,Ie.Z)(function*(){o.t_(),o.n_(),o.zo.cancel(),o.Uo++,4!==e?o.zo.reset():n&&n.code===We.RESOURCE_EXHAUSTED?(yr(n.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),o.zo.Lo()):n&&n.code===We.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.r_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Uo===n&&this.s_(o,u)},o=>{e(()=>{const u=new Ye(We.UNKNOWN,"Fetching auth token failed: "+o.message);return this.o_(u)})})}s_(e,n){const o=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{o(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(u=>{o(()=>this.o_(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Jo(){var e=this;this.state=5,this.zo.ko((0,Ie.Z)(function*(){e.state=0,e.start()}))}o_(e){return at("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(at("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Yv extends cf{constructor(e,n,o,u,c,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,g),this.serializer=c}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function Cg(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(z=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===z?1:"REMOVE"===z?2:"CURRENT"===z?3:"RESET"===z?4:Vt(),u=e.targetChange.targetIds||[],c=function(z,K){return z.useProto3Json?(jt(void 0===K||"string"==typeof K),Ii.fromBase64String(K||"")):(jt(void 0===K||K instanceof Uint8Array),Ii.fromUint8Array(K||new Uint8Array))}(i,e.targetChange.resumeToken),g=e.targetChange.cause,P=g&&function(z){const K=void 0===z.code?We.UNKNOWN:Fa(z.code);return new Ye(K,z.message||"")}(g);n=new p(o,u,c,P||null)}else if("documentChange"in e){const o=e.documentChange,u=ga(i,o.document.name),c=Mi(o.document.updateTime),g=o.document.createTime?Mi(o.document.createTime):zt.min(),P=new ys({mapValue:{fields:o.document.fields}}),k=On.newFoundDocument(u,c,g,P);n=new _(o.targetIds||[],o.removedTargetIds||[],k.key,k)}else if("documentDelete"in e){const o=e.documentDelete,u=ga(i,o.document),c=o.readTime?Mi(o.readTime):zt.min(),g=On.newNoDocument(u,c);n=new _([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const o=e.documentRemove,u=ga(i,o.document);n=new _([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Vt();{const o=e.filter,{count:u=0,unchangedNames:c}=o,g=new Xr(u,c);n=new d(o.targetId,g)}}var z;return n}(this.serializer,e),o=function(c){if(!("targetChange"in c))return zt.min();const g=c.targetChange;return g.targetIds&&g.targetIds.length?zt.min():g.readTime?Mi(g.readTime):zt.min()}(e);return this.listener.a_(n,o)}u_(e){const n={};n.database=Mu(this.serializer),n.addTarget=function(c,g){let P;const k=g.target;if(P=uu(k)?{documents:Dg(c,k)}:{query:Vh(c,k)},P.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){P.resumeToken=La(c,g.resumeToken);const z=Wt(c,g.expectedCount);null!==z&&(P.expectedCount=z)}else if(g.snapshotVersion.compareTo(zt.min())>0){P.readTime=Lr(c,g.snapshotVersion.toTimestamp());const z=Wt(c,g.expectedCount);null!==z&&(P.expectedCount=z)}return P}(this.serializer,e);const o=function S_(i,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Vt()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.e_(n)}c_(e){const n={};n.database=Mu(this.serializer),n.removeTarget=e,this.e_(n)}}class Z_ extends cf{constructor(e,n,o,u,c,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,g),this.serializer=c,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(jt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function Lh(i,e){return i&&i.length>0?(jt(void 0!==e),i.map(n=>function(u,c){let g=Mi(u.updateTime?u.updateTime:c);return g.isEqual(zt.min())&&(g=Mi(c)),new xs(g,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=Mi(e.commitTime);return this.listener.I_(o,n)}return jt(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Mu(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>qd(this.serializer,o))};this.e_(n)}}class Jv extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.d_=!1}A_(){if(this.d_)throw new Ye(We.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,o){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.wo(e,n,o,u,c)).catch(u=>{throw"FirebaseError"===u.name?(u.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ye(We.UNKNOWN,u.toString())})}Co(e,n,o,u){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,g])=>this.connection.Co(e,n,o,c,g,u)).catch(c=>{throw"FirebaseError"===c.name?(c.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ye(We.UNKNOWN,c.toString())})}terminate(){this.d_=!0}}class Xv{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(yr(n),this.f_=!1):at("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Tp{constructor(e,n,o,u,c){var g=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=c,this.F_.ro(P=>{o.enqueueAndForget((0,Ie.Z)(function*(){var k;Rl(g)&&(at("RemoteStore","Restarting streams for network reachability change."),yield(k=(0,Ie.Z)(function*(K){const se=St(K);se.C_.add(4),yield Sl(se),se.M_.set("Unknown"),se.C_.delete(4),yield df(se)}),function z(K){return k.apply(this,arguments)})(g))}))}),this.M_=new Xv(o,u)}}function df(i){return Dc.apply(this,arguments)}function Dc(){return Dc=(0,Ie.Z)(function*(i){if(Rl(i))for(const e of i.v_)yield e(!0)}),Dc.apply(this,arguments)}function Sl(i){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,Ie.Z)(function*(i){for(const e of i.v_)yield e(!1)}),Yg.apply(this,arguments)}function hf(i,e){const n=St(i);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),Dp(n)?Cp(n):uh(n).Ho()&&Jg(n,e))}function ff(i,e){const n=St(i),o=uh(n);n.D_.delete(e),o.Ho()&&J_(n,e),0===n.D_.size&&(o.Ho()?o.Zo():Rl(n)&&n.M_.set("Unknown"))}function Jg(i,e){if(i.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(zt.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uh(i).u_(e)}function J_(i,e){i.x_.Oe(e),uh(i).c_(e)}function Cp(i){i.x_=new V({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.D_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),uh(i).start(),i.M_.g_()}function Dp(i){return Rl(i)&&!uh(i).jo()&&i.D_.size>0}function Rl(i){return 0===St(i).C_.size}function eE(i){i.x_=void 0}function Xg(i){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,Ie.Z)(function*(i){i.D_.forEach((e,n)=>{Jg(i,e)})}),Ap.apply(this,arguments)}function tE(i,e){return em.apply(this,arguments)}function em(){return em=(0,Ie.Z)(function*(i,e){eE(i),Dp(i)?(i.M_.w_(e),Cp(i)):i.M_.set("Unknown")}),em.apply(this,arguments)}function X_(i,e,n){return tm.apply(this,arguments)}function tm(){return tm=(0,Ie.Z)(function*(i,e,n){if(i.M_.set("Online"),e instanceof p&&2===e.state&&e.cause)try{yield(o=(0,Ie.Z)(function*(c,g){const P=g.cause;for(const k of g.targetIds)c.D_.has(k)&&(yield c.remoteSyncer.rejectListen(k,P),c.D_.delete(k),c.x_.removeTarget(k))}),function u(c,g){return o.apply(this,arguments)})(i,e)}catch(o){at("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield pf(i,o)}else if(e instanceof _?i.x_.$e(e):e instanceof d?i.x_.Je(e):i.x_.Ge(e),!n.isEqual(zt.min()))try{const o=yield Wv(i.localStore);n.compareTo(o)>=0&&(yield function(c,g){const P=c.x_.it(g);return P.targetChanges.forEach((k,z)=>{if(k.resumeToken.approximateByteSize()>0){const K=c.D_.get(z);K&&c.D_.set(z,K.withResumeToken(k.resumeToken,g))}}),P.targetMismatches.forEach((k,z)=>{const K=c.D_.get(k);if(!K)return;c.D_.set(k,K.withResumeToken(Ii.EMPTY_BYTE_STRING,K.snapshotVersion)),J_(c,k);const se=new Ou(K.target,k,z,K.sequenceNumber);Jg(c,se)}),c.remoteSyncer.applyRemoteEvent(P)}(i,n))}catch(o){at("RemoteStore","Failed to raise snapshot:",o),yield pf(i,o)}var o}),tm.apply(this,arguments)}function pf(i,e,n){return nm.apply(this,arguments)}function nm(){return nm=(0,Ie.Z)(function*(i,e,n){if(!Ue(e))throw e;i.C_.add(1),yield Sl(i),i.M_.set("Offline"),n||(n=()=>Wv(i.localStore)),i.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){at("RemoteStore","Retrying IndexedDB access"),yield n(),i.C_.delete(1),yield df(i)}))}),nm.apply(this,arguments)}function ey(i,e){return e().catch(n=>pf(i,n,e))}function gf(i){return bp.apply(this,arguments)}function bp(){return bp=(0,Ie.Z)(function*(i){const e=St(i),n=Ml(e);let o=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;ty(e);)try{const u=yield Kv(e.localStore,o);if(null===u){0===e.b_.length&&n.Zo();break}o=u.batchId,sl(e,u)}catch(u){yield pf(e,u)}rm(e)&&nE(e)}),bp.apply(this,arguments)}function ty(i){return Rl(i)&&i.b_.length<10}function sl(i,e){i.b_.push(e);const n=Ml(i);n.Ho()&&n.h_&&n.P_(e.mutations)}function rm(i){return Rl(i)&&!Ml(i).jo()&&i.b_.length>0}function nE(i){Ml(i).start()}function im(i){return Pl.apply(this,arguments)}function Pl(){return Pl=(0,Ie.Z)(function*(i){Ml(i).E_()}),Pl.apply(this,arguments)}function sm(i){return om.apply(this,arguments)}function om(){return om=(0,Ie.Z)(function*(i){const e=Ml(i);for(const n of i.b_)e.P_(n.mutations)}),om.apply(this,arguments)}function $I(i,e,n){return am.apply(this,arguments)}function am(){return am=(0,Ie.Z)(function*(i,e,n){const o=i.b_.shift(),u=id.from(o,e,n);yield ey(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield gf(i)}),am.apply(this,arguments)}function um(i,e){return xu.apply(this,arguments)}function xu(){return xu=(0,Ie.Z)(function*(i,e){var n;e&&Ml(i).h_&&(yield(n=(0,Ie.Z)(function*(u,c){if($d(P=c.code)&&P!==We.ABORTED){const g=u.b_.shift();Ml(u).Yo(),yield ey(u,()=>u.remoteSyncer.rejectFailedWrite(g.batchId,c)),yield gf(u)}var P}),function o(u,c){return n.apply(this,arguments)})(i,e)),rm(i)&&nE(i)}),xu.apply(this,arguments)}function lm(i,e){return cm.apply(this,arguments)}function cm(){return cm=(0,Ie.Z)(function*(i,e){const n=St(i);n.asyncQueue.verifyOperationInProgress(),at("RemoteStore","RemoteStore received new credentials");const o=Rl(n);n.C_.add(3),yield Sl(n),o&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield df(n)}),cm.apply(this,arguments)}function ny(i,e){return Zs.apply(this,arguments)}function Zs(){return Zs=(0,Ie.Z)(function*(i,e){const n=St(i);e?(n.C_.delete(2),yield df(n)):e||(n.C_.add(2),yield Sl(n),n.M_.set("Unknown"))}),Zs.apply(this,arguments)}function uh(i){return i.O_||(i.O_=function(n,o,u){const c=St(n);return c.A_(),new Yv(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(i.datastore,i.asyncQueue,{ho:Xg.bind(null,i),Io:tE.bind(null,i),a_:X_.bind(null,i)}),i.v_.push(function(){var e=(0,Ie.Z)(function*(n){n?(i.O_.Yo(),Dp(i)?Cp(i):i.M_.set("Unknown")):(yield i.O_.stop(),eE(i))});return function(n){return e.apply(this,arguments)}}())),i.O_}function Ml(i){return i.N_||(i.N_=function(n,o,u){const c=St(n);return c.A_(),new Z_(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(i.datastore,i.asyncQueue,{ho:im.bind(null,i),Io:um.bind(null,i),T_:sm.bind(null,i),I_:$I.bind(null,i)}),i.v_.push(function(){var e=(0,Ie.Z)(function*(n){n?(i.N_.Yo(),yield gf(i)):(yield i.N_.stop(),i.b_.length>0&&(at("RemoteStore",`Stopping write stream with ${i.b_.length} pending writes`),i.b_=[]))});return function(n){return e.apply(this,arguments)}}())),i.N_}class dm{constructor(e,n,o,u,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=c,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,c){const g=Date.now()+o,P=new dm(e,n,g,u,c);return P.start(o),P}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ye(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lh(i,e){if(yr("AsyncQueue",`${e}: ${i}`),Ue(i))return new Ye(We.UNAVAILABLE,`${e}: ${i}`);throw i}class Ac{constructor(e){this.comparator=e?(n,o)=>e(n,o)||wt.comparator(n.key,o.key):(n,o)=>wt.comparator(n.key,o.key),this.keyedMap=ql(),this.sortedSet=new Pr(this.comparator)}static emptySet(e){return new Ac(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ac)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=o.getNext().key;if(!u.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new Ac;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class hm{constructor(){this.B_=new Pr(wt.comparator)}track(e){const n=e.doc.key,o=this.B_.get(n);o?0!==e.type&&3===o.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==o.type?this.B_=this.B_.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.B_=this.B_.remove(n):1===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Vt():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,o)=>{e.push(o)}),e}}class vd{constructor(e,n,o,u,c,g,P,k,z){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=c,this.fromCache=g,this.syncStateChanged=P,this.excludesMetadataChanges=k,this.hasCachedResults=z}static fromInitialDocuments(e,n,o,u,c){const g=[];return n.forEach(P=>{g.push({type:0,doc:P})}),new vd(e,n,Ac.emptySet(n),g,o,u,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class rE{constructor(){this.k_=void 0,this.listeners=[]}}class ry{constructor(){this.queries=new Na(e=>nd(e),lu),this.onlineState="Unknown",this.q_=new Set}}function Sp(i,e){return fm.apply(this,arguments)}function fm(){return fm=(0,Ie.Z)(function*(i,e){const n=St(i),o=e.query;let u=!1,c=n.queries.get(o);if(c||(u=!0,c=new rE),u)try{c.k_=yield n.onListen(o)}catch(g){const P=lh(g,`Initialization of query '${nl(e.query)}' failed`);return void e.onError(P)}n.queries.set(o,c),c.listeners.push(e),e.Q_(n.onlineState),c.k_&&e.K_(c.k_)&&ol(n)}),fm.apply(this,arguments)}function pm(i,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,Ie.Z)(function*(i,e){const n=St(i),o=e.query;let u=!1;const c=n.queries.get(o);if(c){const g=c.listeners.indexOf(e);g>=0&&(c.listeners.splice(g,1),u=0===c.listeners.length)}if(u)return n.queries.delete(o),n.onUnlisten(o)}),Rp.apply(this,arguments)}function iy(i,e){const n=St(i);let o=!1;for(const u of e){const g=n.queries.get(u.query);if(g){for(const P of g.listeners)P.K_(u)&&(o=!0);g.k_=u}}o&&ol(n)}function ch(i,e,n){const o=St(i),u=o.queries.get(e);if(u)for(const c of u.listeners)c.onError(n);o.queries.delete(e)}function ol(i){i.q_.forEach(e=>{e.next()})}class bc{constructor(e,n,o){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=o||{}}K_(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new vd(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=vd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class iE{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class sy{constructor(e){this.serializer=e}hs(e){return ga(this.serializer,e)}Ps(e){return e.metadata.exists?od(this.serializer,e.document,!1):On.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Mi(e)}}class oy{constructor(e,n,o){this.X_=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gm(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const o=Bn.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,o=new sy(this.serializer);for(const u of e)if(u.metadata.queries){const c=o.hs(u.metadata.name);for(const g of u.metadata.queries){const P=(n.get(g)||B()).add(c);n.set(g,P)}}return n}complete(){var e=this;return(0,Ie.Z)(function*(){const n=yield function Kg(i,e,n,o){return rf.apply(this,arguments)}(e.localStore,new sy(e.serializer),e.documents,e.X_.id),o=e.ta(e.documents);for(const u of e.queries)yield sf(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function gm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Pp{constructor(e){this.key=e}}class dh{constructor(e){this.key=e}}class mf{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=B(),this.mutatedKeys=B(),this._a=mc(e),this.aa=new Ac(this._a)}get ua(){return this.ia}ca(e,n){const o=n?n.la:new hm,u=n?n.aa:this.aa;let c=n?n.mutatedKeys:this.mutatedKeys,g=u,P=!1;const k="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,z="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((K,se)=>{const Te=u.get(K),$e=Su(this.query,se)?se:null,_t=!!Te&&this.mutatedKeys.has(Te.key),Ct=!!$e&&($e.hasLocalMutations||this.mutatedKeys.has($e.key)&&$e.hasCommittedMutations);let At=!1;Te&&$e?Te.data.isEqual($e.data)?_t!==Ct&&(o.track({type:3,doc:$e}),At=!0):this.ha(Te,$e)||(o.track({type:2,doc:$e}),At=!0,(k&&this._a($e,k)>0||z&&this._a($e,z)<0)&&(P=!0)):!Te&&$e?(o.track({type:0,doc:$e}),At=!0):Te&&!$e&&(o.track({type:1,doc:Te}),At=!0,(k||z)&&(P=!0)),At&&($e?(g=g.add($e),c=Ct?c.add(K):c.delete(K)):(g=g.delete(K),c=c.delete(K)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const K="F"===this.query.limitType?g.last():g.first();g=g.delete(K.key),c=c.delete(K.key),o.track({type:1,doc:K})}return{aa:g,la:o,Zi:P,mutatedKeys:c}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o){const u=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const c=e.la.L_();c.sort((z,K)=>function(Te,$e){const _t=Ct=>{switch(Ct){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vt()}};return _t(Te)-_t($e)}(z.type,K.type)||this._a(z.doc,K.doc)),this.Pa(o);const g=n?this.Ia():[],P=0===this.oa.size&&this.current?1:0,k=P!==this.sa;return this.sa=P,0!==c.length||k?{snapshot:new vd(this.query,e.aa,u,c,e.mutatedKeys,0===P,k,!1,!!o&&o.resumeToken.approximateByteSize()>0),Ta:g}:{Ta:g}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new hm,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=B(),this.aa.forEach(o=>{this.Ea(o.key)&&(this.oa=this.oa.add(o.key))});const n=[];return e.forEach(o=>{this.oa.has(o)||n.push(new dh(o))}),this.oa.forEach(o=>{e.has(o)||n.push(new Pp(o))}),n}da(e){this.ia=e.ls,this.oa=B();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return vd.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class ay{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class uy{constructor(e){this.key=e,this.Ra=!1}}class sE{constructor(e,n,o,u,c,g){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=c,this.maxConcurrentLimboResolutions=g,this.Va={},this.ma=new Na(P=>nd(P),lu),this.fa=new Map,this.ga=new Set,this.pa=new Pr(wt.comparator),this.ya=new Map,this.wa=new Yh,this.Sa={},this.ba=new Map,this.Da=Nu.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function oE(i,e){return mm.apply(this,arguments)}function mm(){return mm=(0,Ie.Z)(function*(i,e){const n=Rm(i);let o,u;const c=n.ma.get(e);if(c)o=c.targetId,n.sharedClientState.addLocalQueryTarget(o),u=c.view.Aa();else{const g=yield tf(n.localStore,co(e)),P=n.sharedClientState.addLocalQueryTarget(g.targetId);o=g.targetId,u=yield _m(n,e,o,"current"===P,g.resumeToken),n.isPrimaryClient&&hf(n.remoteStore,g)}return u}),mm.apply(this,arguments)}function _m(i,e,n,o,u){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,Ie.Z)(function*(i,e,n,o,u){i.va=(se,Te,$e)=>{return(_t=(0,Ie.Z)(function*(At,_n,Cn,gn){let Jn=_n.view.ca(Cn);Jn.Zi&&(Jn=yield fp(At.localStore,_n.query,!1).then(({documents:ks})=>_n.view.ca(ks,Jn)));const Mr=gn&&gn.targetChanges.get(_n.targetId),Nr=_n.view.applyChanges(Jn,At.isPrimaryClient,Mr);return hh(At,_n.targetId,Nr.Ta),Nr.snapshot}),function Ct(At,_n,Cn,gn){return _t.apply(this,arguments)})(i,se,Te,$e);var _t};const c=yield fp(i.localStore,e,!0),g=new mf(e,c.ls),P=g.ca(c.documents),k=Al.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,u),z=g.applyChanges(P,i.isPrimaryClient,k);hh(i,n,z.Ta);const K=new ay(e,n,g);return i.ma.set(e,K),i.fa.has(n)?i.fa.get(n).push(e):i.fa.set(n,[e]),z.snapshot}),Mp.apply(this,arguments)}function zI(i,e){return ym.apply(this,arguments)}function ym(){return ym=(0,Ie.Z)(function*(i,e){const n=St(i),o=n.ma.get(e),u=n.fa.get(o.targetId);if(u.length>1)return n.fa.set(o.targetId,u.filter(c=>!lu(c,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield nf(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),ff(n.remoteStore,o.targetId),Ed(n,o.targetId)}).catch(N))):(Ed(n,o.targetId),yield nf(n.localStore,o.targetId,!0))}),ym.apply(this,arguments)}function ly(){return ly=(0,Ie.Z)(function*(i,e,n){const o=my(i);try{const u=yield function(g,P){const k=St(g),z=Tr.now(),K=P.reduce(($e,_t)=>$e.add(_t.key),B());let se,Te;return k.persistence.runTransaction("Locally write mutations","readwrite",$e=>{let _t=ho(),Ct=B();return k.ss.getEntries($e,K).next(At=>{_t=At,_t.forEach((_n,Cn)=>{Cn.isValidDocument()||(Ct=Ct.add(_n))})}).next(()=>k.localDocuments.getOverlayedDocuments($e,_t)).next(At=>{se=At;const _n=[];for(const Cn of P){const gn=xt(Cn,se.get(Cn.key).overlayedDocument);null!=gn&&_n.push(new bn(Cn.key,gn,Ld(gn.value.mapValue),gr.exists(!0)))}return k.mutationQueue.addMutationBatch($e,z,_n,P)}).next(At=>{Te=At;const _n=At.applyToLocalDocumentSet(se,Ct);return k.documentOverlayCache.saveOverlays($e,At.batchId,_n)})}).then(()=>({batchId:Te.batchId,changes:rd(se)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(g,P,k){let z=g.Sa[g.currentUser.toKey()];z||(z=new Pr(In)),z=z.insert(P,k),g.Sa[g.currentUser.toKey()]=z}(o,u.batchId,n),yield du(o,u.changes),yield gf(o.remoteStore)}catch(u){const c=lh(u,"Failed to persist write");n.reject(c)}}),ly.apply(this,arguments)}function vm(i,e){return Op.apply(this,arguments)}function Op(){return Op=(0,Ie.Z)(function*(i,e){const n=St(i);try{const o=yield function qv(i,e){const n=St(i),o=e.snapshotVersion;let u=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const g=n.ss.newChangeBuffer({trackRemovals:!0});u=n.ts;const P=[];e.targetChanges.forEach((K,se)=>{const Te=u.get(se);if(!Te)return;P.push(n.qr.removeMatchingKeys(c,K.removedDocuments,se).next(()=>n.qr.addMatchingKeys(c,K.addedDocuments,se)));let $e=Te.withSequenceNumber(c.currentSequenceNumber);var Ct,At,_n;null!==e.targetMismatches.get(se)?$e=$e.withResumeToken(Ii.EMPTY_BYTE_STRING,zt.min()).withLastLimboFreeSnapshotVersion(zt.min()):K.resumeToken.approximateByteSize()>0&&($e=$e.withResumeToken(K.resumeToken,o)),u=u.insert(se,$e),At=$e,_n=K,(0===(Ct=Te).resumeToken.approximateByteSize()||At.snapshotVersion.toMicroseconds()-Ct.snapshotVersion.toMicroseconds()>=3e8||_n.addedDocuments.size+_n.modifiedDocuments.size+_n.removedDocuments.size>0)&&P.push(n.qr.updateTargetData(c,$e))});let k=ho(),z=B();if(e.documentUpdates.forEach(K=>{e.resolvedLimboDocuments.has(K)&&P.push(n.persistence.referenceDelegate.updateLimboDocument(c,K))}),P.push(q_(c,g,e.documentUpdates).next(K=>{k=K.us,z=K.cs})),!o.isEqual(zt.min())){const K=n.qr.getLastRemoteSnapshotVersion(c).next(se=>n.qr.setTargetsMetadata(c,c.currentSequenceNumber,o));P.push(K)}return C.waitFor(P).next(()=>g.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,k,z)).next(()=>k)}).then(c=>(n.ts=u,c))}(n.localStore,e);e.targetChanges.forEach((u,c)=>{const g=n.ya.get(c);g&&(jt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.Ra=!0:u.modifiedDocuments.size>0?jt(g.Ra):u.removedDocuments.size>0&&(jt(g.Ra),g.Ra=!1))}),yield du(n,o,e)}catch(o){yield N(o)}}),Op.apply(this,arguments)}function aE(i,e,n){const o=St(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.ma.forEach((c,g)=>{const P=g.view.Q_(e);P.snapshot&&u.push(P.snapshot)}),function(g,P){const k=St(g);k.onlineState=P;let z=!1;k.queries.forEach((K,se)=>{for(const Te of se.listeners)Te.Q_(P)&&(z=!0)}),z&&ol(k)}(o.eventManager,e),u.length&&o.Va.a_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Np(i,e,n){return xp.apply(this,arguments)}function xp(){return xp=(0,Ie.Z)(function*(i,e,n){const o=St(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.ya.get(e),c=u&&u.key;if(c){let g=new Pr(wt.comparator);g=g.insert(c,On.newNoDocument(c,zt.min()));const P=B().add(c),k=new Pu(zt.min(),new Map,new Pr(In),g,P);yield vm(o,k),o.pa=o.pa.remove(c),o.ya.delete(e),_f(o)}else yield nf(o.localStore,e,!1).then(()=>Ed(o,e,n)).catch(N)}),xp.apply(this,arguments)}function cy(i,e){return Em.apply(this,arguments)}function Em(){return Em=(0,Ie.Z)(function*(i,e){const n=St(i),o=e.batch.batchId;try{const u=yield function qg(i,e){const n=St(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),c=n.ss.newChangeBuffer({trackRemovals:!0});return function(P,k,z,K){const se=z.batch,Te=se.keys();let $e=C.resolve();return Te.forEach(_t=>{$e=$e.next(()=>K.getEntry(k,_t)).next(Ct=>{const At=z.docVersions.get(_t);jt(null!==At),Ct.version.compareTo(At)<0&&(se.applyToRemoteDocument(Ct,z),Ct.isValidDocument()&&(Ct.setReadTime(z.commitVersion),K.addEntry(Ct)))})}),$e.next(()=>P.mutationQueue.removeMutationBatch(k,se))}(n,o,e,c).next(()=>c.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(P){let k=B();for(let z=0;z<P.mutationResults.length;++z)P.mutationResults[z].transformResults.length>0&&(k=k.add(P.batch.mutations[z].key));return k}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}(n.localStore,e);Sc(n,o,null),Lp(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield du(n,u)}catch(u){yield N(u)}}),Em.apply(this,arguments)}function dy(i,e,n){return kp.apply(this,arguments)}function kp(){return kp=(0,Ie.Z)(function*(i,e,n){const o=St(i);try{const u=yield function(g,P){const k=St(g);return k.persistence.runTransaction("Reject batch","readwrite-primary",z=>{let K;return k.mutationQueue.lookupMutationBatch(z,P).next(se=>(jt(null!==se),K=se.keys(),k.mutationQueue.removeMutationBatch(z,se))).next(()=>k.mutationQueue.performConsistencyCheck(z)).next(()=>k.documentOverlayCache.removeOverlaysForBatchId(z,K,P)).next(()=>k.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(z,K)).next(()=>k.localDocuments.getDocuments(z,K))})}(o.localStore,e);Sc(o,e,n),Lp(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield du(o,u)}catch(u){yield N(u)}}),kp.apply(this,arguments)}function Fp(){return Fp=(0,Ie.Z)(function*(i,e){const n=St(i);Rl(n.remoteStore)||at("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(g){const P=St(g);return P.persistence.runTransaction("Get highest unacknowledged batch id","readonly",k=>P.mutationQueue.getHighestUnacknowledgedBatchId(k))}(n.localStore);if(-1===o)return void e.resolve();const u=n.ba.get(o)||[];u.push(e),n.ba.set(o,u)}catch(o){const u=lh(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Fp.apply(this,arguments)}function Lp(i,e){(i.ba.get(e)||[]).forEach(n=>{n.resolve()}),i.ba.delete(e)}function Sc(i,e,n){const o=St(i);let u=o.Sa[o.currentUser.toKey()];if(u){const c=u.get(e);c&&(n?c.reject(n):c.resolve(),u=u.remove(e)),o.Sa[o.currentUser.toKey()]=u}}function Ed(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.fa.get(e))i.ma.delete(o),n&&i.Va.Fa(o,n);i.fa.delete(e),i.isPrimaryClient&&i.wa.Rr(e).forEach(o=>{i.wa.containsKey(o)||hy(i,o)})}function hy(i,e){i.ga.delete(e.path.canonicalString());const n=i.pa.get(e);null!==n&&(ff(i.remoteStore,n),i.pa=i.pa.remove(e),i.ya.delete(n),_f(i))}function hh(i,e,n){for(const o of n)o instanceof Pp?(i.wa.addReference(o.key,e),fh(i,o)):o instanceof dh?(at("SyncEngine","Document no longer in limbo: "+o.key),i.wa.removeReference(o.key,e),i.wa.containsKey(o.key)||hy(i,o.key)):Vt()}function fh(i,e){const n=e.key,o=n.path.canonicalString();i.pa.get(n)||i.ga.has(o)||(at("SyncEngine","New document in limbo: "+n),i.ga.add(o),_f(i))}function _f(i){for(;i.ga.size>0&&i.pa.size<i.maxConcurrentLimboResolutions;){const e=i.ga.values().next().value;i.ga.delete(e);const n=new wt(Bn.fromString(e)),o=i.Da.next();i.ya.set(o,new uy(n)),i.pa=i.pa.insert(n,o),hf(i.remoteStore,new Ou(co(el(n.path)),o,"TargetPurposeLimboResolution",Pi._e))}}function du(i,e,n){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,Ie.Z)(function*(i,e,n){const o=St(i),u=[],c=[],g=[];var P;o.ma.isEmpty()||(o.ma.forEach((P,k)=>{g.push(o.va(k,e,n).then(z=>{if((z||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(k.targetId,z?.fromCache?"not-current":"current"),z){u.push(z);const K=zg.Qi(k.targetId,z);c.push(K)}}))}),yield Promise.all(g),o.Va.a_(u),yield(P=(0,Ie.Z)(function*(z,K){const se=St(z);try{yield se.persistence.runTransaction("notifyLocalViewChanges","readwrite",Te=>C.forEach(K,$e=>C.forEach($e.ki,_t=>se.persistence.referenceDelegate.addReference(Te,$e.targetId,_t)).next(()=>C.forEach($e.qi,_t=>se.persistence.referenceDelegate.removeReference(Te,$e.targetId,_t)))))}catch(Te){if(!Ue(Te))throw Te;at("LocalStore","Failed to update sequence numbers: "+Te)}for(const Te of K){const $e=Te.targetId;if(!Te.fromCache){const _t=se.ts.get($e),At=_t.withLastLimboFreeSnapshotVersion(_t.snapshotVersion);se.ts=se.ts.insert($e,At)}}}),function k(z,K){return P.apply(this,arguments)})(o.localStore,c))}),Vp.apply(this,arguments)}function Im(i,e){return yf.apply(this,arguments)}function yf(){return yf=(0,Ie.Z)(function*(i,e){const n=St(i);if(!n.currentUser.isEqual(e)){at("SyncEngine","User change. New user:",e.toKey());const o=yield W_(n.localStore,e);n.currentUser=e,(c=n).ba.forEach(P=>{P.forEach(k=>{k.reject(new Ye(We.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.ba.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield du(n,o._s)}var c}),yf.apply(this,arguments)}function wm(i,e){const n=St(i),o=n.ya.get(e);if(o&&o.Ra)return B().add(o.key);{let u=B();const c=n.fa.get(e);if(!c)return u;for(const g of c){const P=n.ma.get(g);u=u.unionWith(P.view.ua)}return u}}function fy(i,e){return vf.apply(this,arguments)}function vf(){return vf=(0,Ie.Z)(function*(i,e){const n=St(i),o=yield fp(n.localStore,e.query,!0),u=e.view.da(o);return n.isPrimaryClient&&hh(n,e.targetId,u.Ta),u}),vf.apply(this,arguments)}function uE(i,e){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,Ie.Z)(function*(i,e){const n=St(i);return gp(n.localStore,e).then(o=>du(n,o))}),Tm.apply(this,arguments)}function lE(i,e,n,o){return Up.apply(this,arguments)}function Up(){return Up=(0,Ie.Z)(function*(i,e,n,o){const u=St(i),c=yield function(P,k){const z=St(P),K=St(z.mutationQueue);return z.persistence.runTransaction("Lookup mutation documents","readonly",se=>K.Cn(se,k).next(Te=>Te?z.localDocuments.getDocuments(se,Te):C.resolve(null)))}(u.localStore,e);var k;null!==c?("pending"===n?yield gf(u.remoteStore):"acknowledged"===n||"rejected"===n?(Sc(u,e,o||null),Lp(u,e),k=e,St(St(u.localStore).mutationQueue).Fn(k)):Vt(),yield du(u,c)):at("SyncEngine","Cannot apply mutation batch with id: "+e)}),Up.apply(this,arguments)}function Cm(){return Cm=(0,Ie.Z)(function*(i,e){const n=St(i);if(Rm(n),my(n),!0===e&&!0!==n.Ca){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield py(n,o.toArray());n.Ca=!0,yield ny(n.remoteStore,!0);for(const c of u)hf(n.remoteStore,c)}else if(!1===e&&!1!==n.Ca){const o=[];let u=Promise.resolve();n.fa.forEach((c,g)=>{n.sharedClientState.isLocalQueryTarget(g)?o.push(g):u=u.then(()=>(Ed(n,g),nf(n.localStore,g,!0))),ff(n.remoteStore,g)}),yield u,yield py(n,o),function(g){const P=St(g);P.ya.forEach((k,z)=>{ff(P.remoteStore,z)}),P.wa.Vr(),P.ya=new Map,P.pa=new Pr(wt.comparator)}(n),n.Ca=!1,yield ny(n.remoteStore,!1)}}),Cm.apply(this,arguments)}function py(i,e,n){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,Ie.Z)(function*(i,e,n){const o=St(i),u=[],c=[];for(const g of e){let P;const k=o.fa.get(g);if(k&&0!==k.length){P=yield tf(o.localStore,co(k[0]));for(const z of k){const K=o.ma.get(z),se=yield fy(o,K);se.snapshot&&c.push(se.snapshot)}}else{const z=yield pp(o.localStore,g);P=yield tf(o.localStore,z),yield _m(o,Am(z),g,!1,P.resumeToken)}u.push(P)}return o.Va.a_(c),u}),Dm.apply(this,arguments)}function Am(i){return ed(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function gy(i){return n=St(i).localStore,St(St(n).persistence).Bi();var n}function dE(i,e,n,o){return bm.apply(this,arguments)}function bm(){return bm=(0,Ie.Z)(function*(i,e,n,o){const u=St(i);if(u.Ca)return void at("SyncEngine","Ignoring unexpected query state notification.");const c=u.fa.get(e);if(c&&c.length>0)switch(n){case"current":case"not-current":{const g=yield gp(u.localStore,Wl(c[0])),P=Pu.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Ii.EMPTY_BYTE_STRING);yield du(u,g,P);break}case"rejected":yield nf(u.localStore,e,!0),Ed(u,e,o);break;default:Vt()}}),bm.apply(this,arguments)}function hu(i,e,n){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,Ie.Z)(function*(i,e,n){const o=Rm(i);if(o.Ca){for(const u of e){if(o.fa.has(u)){at("SyncEngine","Adding an already active target "+u);continue}const c=yield pp(o.localStore,u),g=yield tf(o.localStore,c);yield _m(o,Am(c),g.targetId,!1,g.resumeToken),hf(o.remoteStore,g)}for(const u of n)o.fa.has(u)&&(yield nf(o.localStore,u,!1).then(()=>{ff(o.remoteStore,u),Ed(o,u)}).catch(N))}}),Sm.apply(this,arguments)}function Rm(i){const e=St(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=vm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Np.bind(null,e),e.Va.a_=iy.bind(null,e.eventManager),e.Va.Fa=ch.bind(null,e.eventManager),e}function my(i){const e=St(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cy.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dy.bind(null,e),e}class ph{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Ie.Z)(function*(){n.serializer=ah(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Wg(this.persistence,new G_,e.initialUser,this.serializer)}createPersistence(e){return new nh(rh.jr,this.serializer)}createSharedClientState(e){return new K_}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Mm extends ph{constructor(e,n,o){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,Ie.Z)(function*(){yield n().call(o,e),yield o.xa.initialize(o,e),yield my(o.xa.syncEngine),yield gf(o.xa.remoteStore),yield o.persistence.mi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Wg(this.persistence,new G_,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new H_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new qu(n,this.persistence);return new nr(e.asyncQueue,o)}createPersistence(e){const n=Cc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Wo.withCacheSize(this.cacheSizeBytes):Wo.DEFAULT;return new $g(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,Ip(),wp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new K_}}class _y extends Mm{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,Ie.Z)(function*(){yield n().call(o,e);const u=o.xa.syncEngine;o.sharedClientState instanceof yp&&(o.sharedClientState.syncEngine={Ys:lE.bind(null,u),Zs:dE.bind(null,u),Xs:hu.bind(null,u),Bi:gy.bind(null,u),Js:uE.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.mi(function(){var c=(0,Ie.Z)(function*(g){yield function cE(i,e){return Cm.apply(this,arguments)}(o.xa.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start():g||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(g&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():g||o.indexBackfillerScheduler.stop())});return function(g){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const n=Ip();if(!yp.D(n))throw new Ye(We.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Cc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yp(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class Id{initialize(e,n){var o=this;return(0,Ie.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>aE(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Im.bind(null,o.syncEngine),yield ny(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ry}createDatastore(e){const n=ah(e.databaseInfo.databaseId),o=new Ep(e.databaseInfo);return new Jv(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return o=this.localStore,u=this.datastore,c=e.asyncQueue,g=n=>aE(this.syncEngine,n,0),P=vp.D()?new vp:new Zv,new Tp(o,u,c,g,P);var o,u,c,g,P}createSyncEngine(e,n){return function(u,c,g,P,k,z,K){const se=new sE(u,c,g,P,k,z);return K&&(se.Ca=!0),se}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,Ie.Z)(function*(o){const u=St(o);at("RemoteStore","RemoteStore shutting down."),u.C_.add(5),yield Sl(u),u.F_.shutdown(),u.M_.set("Unknown")}),function n(o){return e.apply(this,arguments)})(this.remoteStore);var e}}function yy(i,e=10240){let n=0;return{read:()=>(0,Ie.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Bp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class Om{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Rr,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(o=>{o&&o.Z_()?this.metadata.resolve(o.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.Y_)}`))},o=>this.metadata.reject(o))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,Ie.Z)(function*(){const n=yield e.qa();if(null===n)return null;const o=e.La.decode(n),u=Number(o);isNaN(u)&&e.Qa(`length string (${o}) is not valid number`);const c=yield e.Ka(u);return new iE(JSON.parse(c),n.length+u)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,Ie.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}Ka(e){var n=this;return(0,Ie.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const o=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,Ie.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class fE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Ie.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new Ye(We.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,Ie.Z)(function*(g,P){const k=St(g),z=Mu(k.serializer)+"/documents",K={documents:P.map(_t=>Yl(k.serializer,_t))},se=yield k.Co("BatchGetDocuments",z,K,P.length),Te=new Map;se.forEach(_t=>{const Ct=function Xf(i,e){return"found"in e?function(o,u){jt(!!u.found);const c=ga(o,u.found.name),g=Mi(u.found.updateTime),P=u.found.createTime?Mi(u.found.createTime):zt.min(),k=new ys({mapValue:{fields:u.found.fields}});return On.newFoundDocument(c,g,P,k)}(i,e):"missing"in e?function(o,u){jt(!!u.missing),jt(!!u.readTime);const c=ga(o,u.missing),g=Mi(u.readTime);return On.newNoDocument(c,g)}(i,e):Vt()}(k.serializer,_t);Te.set(Ct.key.toString(),Ct)});const $e=[];return P.forEach(_t=>{const Ct=Te.get(_t.toString());jt(!!Ct),$e.push(Ct)}),$e}),function c(g,P){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Li(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const c=wt.fromPath(u);e.mutations.push(new Jr(c,e.precondition(c)))}),yield(o=(0,Ie.Z)(function*(c,g){const P=St(c),k=Mu(P.serializer)+"/documents",z={writes:g.map(K=>qd(P.serializer,K))};yield P.wo("Commit",k,z)}),function u(c,g){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Vt();n=zt.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new Ye(We.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(zt.min())?gr.exists(!1):gr.updateTime(n):gr.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(zt.min()))throw new Ye(We.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gr.updateTime(n)}return gr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pE{constructor(e,n,o,u,c){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=c,this.Wa=o.maxAttempts,this.zo=new lf(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,Ie.Z)(function*(){const n=new fE(e.datastore),o=e.za(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(c=>{e.ja(c)}))}).catch(u=>{e.ja(u)})}))}za(e){try{const n=this.updateFunction(e);return!Ho(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!$d(n)}return!1}}class gE{constructor(e,n,o,u){var c=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=An.UNAUTHENTICATED,this.clientId=ai.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var g=(0,Ie.Z)(function*(P){at("FirestoreClient","Received user=",P.uid),yield c.authCredentialListener(P),c.user=P});return function(P){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(o,g=>(at("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ye(We.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=lh(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function jp(i,e){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,Ie.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),at("FirestoreClient","Initializing OfflineComponentProvider");const n=yield i.getConfiguration();yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,Ie.Z)(function*(c){o.isEqual(c)||(yield W_(e.localStore,c),o=c)});return function(c){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),Nm.apply(this,arguments)}function ku(i,e){return Ef.apply(this,arguments)}function Ef(){return Ef=(0,Ie.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield Hp(i);at("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(n,o),i.setCredentialChangeListener(u=>lm(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,c)=>lm(e.remoteStore,c)),i._onlineComponents=e}),Ef.apply(this,arguments)}function vy(i){return"FirebaseError"===i.name?i.code===We.FAILED_PRECONDITION||i.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function Hp(i){return xm.apply(this,arguments)}function xm(){return xm=(0,Ie.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){at("FirestoreClient","Using user provided OfflineComponentProvider");try{yield jp(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!vy(n))throw n;gs("Error using user provided cache. Falling back to memory cache: "+n),yield jp(i,new ph)}}else at("FirestoreClient","Using default OfflineComponentProvider"),yield jp(i,new ph);return i._offlineComponents}),xm.apply(this,arguments)}function If(i){return $p.apply(this,arguments)}function $p(){return $p=(0,Ie.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(at("FirestoreClient","Using user provided OnlineComponentProvider"),yield ku(i,i._uninitializedComponentsProvider._online)):(at("FirestoreClient","Using default OnlineComponentProvider"),yield ku(i,new Id))),i._onlineComponents}),$p.apply(this,arguments)}function wf(i){return Hp(i).then(e=>e.persistence)}function Rc(i){return Hp(i).then(e=>e.localStore)}function mE(i){return If(i).then(e=>e.remoteStore)}function zp(i){return If(i).then(e=>e.syncEngine)}function wd(i){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,Ie.Z)(function*(i){const e=yield If(i),n=e.eventManager;return n.onListen=oE.bind(null,e.syncEngine),n.onUnlisten=zI.bind(null,e.syncEngine),n}),Gp.apply(this,arguments)}function Ey(i,e,n={}){const o=new Rr;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(c,g,P,k,z){const K=new Bp({next:Te=>{g.enqueueAndForget(()=>pm(c,se));const $e=Te.docs.has(P);!$e&&Te.fromCache?z.reject(new Ye(We.UNAVAILABLE,"Failed to get document because the client is offline.")):$e&&Te.fromCache&&k&&"server"===k.source?z.reject(new Ye(We.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):z.resolve(Te)},error:Te=>z.reject(Te)}),se=new bc(el(P.path),K,{includeMetadataChanges:!0,J_:!0});return Sp(c,se)}(yield wd(i),i.asyncQueue,e,n,o)})),o.promise}function Iy(i,e,n={}){const o=new Rr;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(c,g,P,k,z){const K=new Bp({next:Te=>{g.enqueueAndForget(()=>pm(c,se)),Te.fromCache&&"server"===k.source?z.reject(new Ye(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):z.resolve(Te)},error:Te=>z.reject(Te)}),se=new bc(P,K,{includeMetadataChanges:!0,J_:!0});return Sp(c,se)}(yield wd(i),i.asyncQueue,e,n,o)})),o.promise}function vE(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const Cy=new Map;function Kp(i,e,n){if(!n)throw new Ye(We.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Vm(i,e,n,o){if(!0===e&&!0===o)throw new Ye(We.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Dy(i){if(!wt.isDocumentKey(i))throw new Ye(We.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Ay(i){if(wt.isDocumentKey(i))throw new Ye(We.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Cf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(o=i).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof i?"a function":Vt()}function or(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ye(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cf(i);throw new Ye(We.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function gh(i,e){if(e<=0)throw new Ye(We.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class by{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new Ye(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ye(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Vm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=vE(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(c){if(void 0!==c.timeoutSeconds){if(isNaN(c.timeoutSeconds))throw new Ye(We.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new Ye(We.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new Ye(We.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mh{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new by({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ye(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ye(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new by(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new Gu;switch(o.type){case"firstParty":return new Gs(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Ye(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=Cy.get(n);o&&(at("ComponentProvider","Removing Datastore"),Cy.delete(n),o.terminate())}(this),Promise.resolve()}}class ko{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ko(this.firestore,e,this._query)}}class Vi{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Va(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vi(this.firestore,e,this._key)}}class Va extends ko{constructor(e,n,o){super(e,n,el(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vi(this.firestore,null,new wt(e))}withConverter(e){return new Va(this.firestore,e,this._path)}}function Sy(i,e,...n){if(i=(0,Ge.m9)(i),Kp("collection","path",e),i instanceof mh){const o=Bn.fromString(e,...n);return Ay(o),new Va(i,null,o)}{if(!(i instanceof Vi||i instanceof Va))throw new Ye(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Bn.fromString(e,...n));return Ay(o),new Va(i.firestore,null,o)}}function Zp(i,e,...n){if(i=(0,Ge.m9)(i),1===arguments.length&&(e=ai.newId()),Kp("doc","path",e),i instanceof mh){const o=Bn.fromString(e,...n);return Dy(o),new Vi(i,null,new wt(o))}{if(!(i instanceof Vi||i instanceof Va))throw new Ye(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Bn.fromString(e,...n));return Dy(o),new Vi(i.firestore,i instanceof Va?i.converter:null,new wt(o))}}function Ry(i,e){return i=(0,Ge.m9)(i),e=(0,Ge.m9)(e),(i instanceof Vi||i instanceof Va)&&(e instanceof Vi||e instanceof Va)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Bm(i,e){return i=(0,Ge.m9)(i),e=(0,Ge.m9)(e),i instanceof ko&&e instanceof ko&&i.firestore===e.firestore&&lu(i._query,e._query)&&i.converter===e.converter}class IE{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new lf(this,"async_queue_retry"),this.iu=()=>{const n=wp();n&&at("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=wp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=wp();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Rr;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!Ue(n))throw n;at("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(o=>{throw this.eu=o,this.tu=!1,yr("INTERNAL UNHANDLED ERROR: ",function(g){let P=g.message||"";return g.stack&&(P=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),P}(o)),o}).then(o=>(this.tu=!1,o))));return this.Ja=n,n}enqueueAfterDelay(e,n,o){this.su(),this.ru.indexOf(e)>-1&&(n=0);const u=dm.createAndSchedule(this,e,n,o,c=>this.au(c));return this.Xa.push(u),u}su(){this.eu&&Vt()}verifyOperationInProgress(){}uu(){var e=this;return(0,Ie.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function jm(i){return function(n,o){if("object"!=typeof n||null===n)return!1;const u=n;for(const c of["next","error","complete"])if(c in u&&"function"==typeof u[c])return!0;return!1}(i)}class wE{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ci extends mh{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new IE,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||My(this),this._firestoreClient.terminate()}}function Is(i){return i._firestoreClient||My(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function My(i){var e,n,o;const u=i._freezeSettings(),c=(k=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new bu(i._databaseId,k,i._persistenceKey,(K=u).host,K.ssl,K.experimentalForceLongPolling,K.experimentalAutoDetectLongPolling,vE(K.experimentalLongPollingOptions),K.useFetchStreams));var k,K;i._firestoreClient=new gE(i._authCredentials,i._appCheckCredentials,i._queue,c),null!==(n=u.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Oy(i,e,n){const o=new Rr;return i.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield jp(i,n),yield ku(i,e),o.resolve()}catch(u){const c=u;if(!vy(c))throw c;gs("Error enabling indexeddb cache. Falling back to memory cache: "+c),o.reject(c)}})).then(()=>o.promise)}function $m(i){if(i._initialized||i._terminated)throw new Ye(We.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ol{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ol(Ii.fromBase64String(e))}catch(n){throw new Ye(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ol(Ii.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class rc{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Ye(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Td{constructor(e){this._methodName=e}}class fu{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ye(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ye(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return In(this._lat,e._lat)||In(this._long,e._long)}}const Df=/^__.*__$/;class Ko{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new bn(e,this.data,this.fieldMask,n,this.fieldTransforms):new on(e,this.data,n,this.fieldTransforms)}}class Pc{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new bn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Af(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vt()}}class ma{constructor(e,n,o,u,c,g){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===c&&this.Pu(),this.fieldTransforms=c||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new ma(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Au(e),u}Ru(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Pu(),u}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Ih(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(Af(this.Iu)&&Df.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class zm{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||ah(e)}pu(e,n,o,u=!1){return new ma({Iu:e,methodName:n,gu:o,path:Fr.emptyPath(),du:!1,fu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fu(i){const e=i._freezeSettings(),n=ah(i._databaseId);return new zm(i._databaseId,!!e.ignoreUndefinedProperties,n)}function ic(i,e,n,o,u,c={}){const g=i.pu(c.merge||c.mergeFields?2:0,e,n,u);Xp("Data must be an object, but it was:",g,o);const P=Wm(o,g);let k,z;if(c.merge)k=new _s(g.fieldMask),z=g.fieldTransforms;else if(c.mergeFields){const K=[];for(const se of c.mergeFields){const Te=Eh(e,se,n);if(!g.contains(Te))throw new Ye(We.INVALID_ARGUMENT,`Field '${Te}' is specified in your field mask but missing from your input data.`);Vy(K,Te)||K.push(Te)}k=new _s(K),z=g.fieldTransforms.filter(se=>k.covers(se.field))}else k=null,z=g.fieldTransforms;return new Ko(new ys(P),k,z)}class Nl extends Td{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nl}}function Cd(i,e,n){return new ma({Iu:3,gu:e.settings.gu,methodName:i._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Mc extends Td{_toFieldTransform(e){return new li(e.path,new Gt)}isEqual(e){return e instanceof Mc}}class _h extends Td{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=Cd(this,e,!0),o=this.yu.map(c=>Nc(c,n)),u=new un(o);return new li(e.path,u)}isEqual(e){return this===e}}class yh extends Td{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=Cd(this,e,!0),o=this.yu.map(c=>Nc(c,n)),u=new jn(o);return new li(e.path,u)}isEqual(e){return this===e}}class vh extends Td{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new Mn(e.serializer,Je(e.serializer,this.wu));return new li(e.path,n)}isEqual(e){return this===e}}function Oc(i,e,n,o){const u=i.pu(1,e,n);Xp("Data must be an object, but it was:",u,o);const c=[],g=ys.empty();Sa(o,(k,z)=>{const K=bf(e,k,n);z=(0,Ge.m9)(z);const se=u.Ru(K);if(z instanceof Nl)c.push(K);else{const Te=Nc(z,se);null!=Te&&(c.push(K),g.set(K,Te))}});const P=new _s(c);return new Pc(g,P,u.fieldTransforms)}function Jp(i,e,n,o,u,c){const g=i.pu(1,e,n),P=[Eh(e,o,n)],k=[u];if(c.length%2!=0)throw new Ye(We.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Te=0;Te<c.length;Te+=2)P.push(Eh(e,c[Te])),k.push(c[Te+1]);const z=[],K=ys.empty();for(let Te=P.length-1;Te>=0;--Te)if(!Vy(z,P[Te])){const $e=P[Te];let _t=k[Te];_t=(0,Ge.m9)(_t);const Ct=g.Ru($e);if(_t instanceof Nl)z.push($e);else{const At=Nc(_t,Ct);null!=At&&(z.push($e),K.set($e,At))}}const se=new _s(z);return new Pc(K,se,g.fieldTransforms)}function Gm(i,e,n,o=!1){return Nc(n,i.pu(o?4:3,e))}function Nc(i,e){if(qm(i=(0,Ge.m9)(i)))return Xp("Unsupported field value:",e,i),Wm(i,e);if(i instanceof Td)return function(o,u){if(!Af(u.Iu))throw u.mu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.mu(`${o._methodName}() is not currently supported inside arrays`);const c=o._toFieldTransform(u);c&&u.fieldTransforms.push(c)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(o,u){const c=[];let g=0;for(const P of o){let k=Nc(P,u.Vu(g));null==k&&(k={nullValue:"NULL_VALUE"}),c.push(k),g++}return{arrayValue:{values:c}}}(i,e)}return function(o,u){if(null===(o=(0,Ge.m9)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return Je(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const c=Tr.fromDate(o);return{timestampValue:Lr(u.serializer,c)}}if(o instanceof Tr){const c=new Tr(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Lr(u.serializer,c)}}if(o instanceof fu)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Ol)return{bytesValue:La(u.serializer,o._byteString)};if(o instanceof Vi){const c=u.databaseId,g=o.firestore._databaseId;if(!g.isEqual(c))throw u.mu(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:vc(o.firestore._databaseId||u.databaseId,o._key.path)}}throw u.mu(`Unsupported field value: ${Cf(o)}`)}(i,e)}function Wm(i,e){const n={};return oo(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sa(i,(o,u)=>{const c=Nc(u,e.Eu(o));null!=c&&(n[o]=c)}),{mapValue:{fields:n}}}function qm(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Tr||i instanceof fu||i instanceof Ol||i instanceof Vi||i instanceof Td)}function Xp(i,e,n){if(!qm(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=Cf(n);throw e.mu("an object"===o?i+" a custom object":i+" "+o)}var u}function Eh(i,e,n){if((e=(0,Ge.m9)(e))instanceof rc)return e._internalPath;if("string"==typeof e)return bf(i,e);throw Ih("Field path arguments must be of type string or ",i,!1,void 0,n)}const Ly=new RegExp("[~\\*/\\[\\]]");function bf(i,e,n){if(e.search(Ly)>=0)throw Ih(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new rc(...e.split("."))._internalPath}catch{throw Ih(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Ih(i,e,n,o,u){const c=o&&!o.isEmpty(),g=void 0!==u;let P=`Function ${e}() called with invalid data`;n&&(P+=" (via `toFirestore()`)"),P+=". ";let k="";return(c||g)&&(k+=" (found",c&&(k+=` in field ${o}`),g&&(k+=` in document ${u}`),k+=")"),new Ye(We.INVALID_ARGUMENT,P+i+k)}function Vy(i,e){return i.some(n=>n.isEqual(e))}class eg{constructor(e,n,o,u,c){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Vi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ZI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class ZI extends eg{data(){return super.data()}}function tg(i,e){return"string"==typeof e?bf(i,e):e instanceof rc?e._internalPath:e._delegate._internalPath}function Uy(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Ye(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class By{}class Sf extends By{}function Dd(i,e,...n){let o=[];e instanceof By&&o.push(e),o=o.concat(n),function(c){const g=c.filter(k=>k instanceof wh).length,P=c.filter(k=>k instanceof Rf).length;if(g>1||g>0&&P>0)throw new Ye(We.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class Rf extends Sf{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Rf(e,n,o)}_apply(e){const n=this._parse(e);return ME(e._query,n),new ko(e.firestore,e.converter,Oa(e._query,n))}_parse(e){const n=Fu(e.firestore);return function(c,g,P,k,z,K,se){let Te;if(z.isKeyField()){if("array-contains"===K||"array-contains-any"===K)throw new Ye(We.INVALID_ARGUMENT,`Invalid Query. You can't perform '${K}' queries on documentId().`);if("in"===K||"not-in"===K){kf(se,K);const $e=[];for(const _t of se)$e.push(xf(k,c,_t));Te={arrayValue:{values:$e}}}else Te=xf(k,c,se)}else"in"!==K&&"not-in"!==K&&"array-contains-any"!==K||kf(se,K),Te=Gm(P,"where",se,"in"===K||"not-in"===K);return xn.create(z,K,Te)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class wh extends By{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wh(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:pr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,c){let g=u;const P=c.getFlattenedFilters();for(const k of P)ME(g,k),g=Oa(g,k)}(e._query,n),new ko(e.firestore,e.converter,Oa(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Pf extends Sf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Pf(e,n)}_apply(e){const n=function(u,c,g){if(null!==u.startAt)throw new Ye(We.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new Ye(We.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ns(c,g)}(e._query,this._field,this._direction);return new ko(e.firestore,e.converter,function(u,c){const g=u.explicitOrderBy.concat([c]);return new Go(u.path,u.collectionGroup,g,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}class Mf extends Sf{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new Mf(e,n,o)}_apply(e){return new ko(e.firestore,e.converter,gc(e._query,this._limit,this._limitType))}}class ig extends Sf{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new ig(e,n,o)}_apply(e){const n=og(e,this.type,this._docOrFields,this._inclusive);return new ko(e.firestore,e.converter,(c=n,new Go((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,c,u.endAt)));var u,c}}class sg extends Sf{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new sg(e,n,o)}_apply(e){const n=og(e,this.type,this._docOrFields,this._inclusive);return new ko(e.firestore,e.converter,(c=n,new Go((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,c)));var u,c}}function og(i,e,n,o){if(n[0]=(0,Ge.m9)(n[0]),n[0]instanceof eg)return function(c,g,P,k,z){if(!k)throw new Ye(We.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${P}().`);const K=[];for(const se of qs(c))if(se.field.isKeyField())K.push(da(g,k.key));else{const Te=k.data.field(se.field);if(cc(Te))throw new Ye(We.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+se.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Te){const $e=se.field.canonicalString();throw new Ye(We.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$e}' (used as the orderBy) does not exist.`)}K.push(Te)}return new Ju(K,z)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=Fu(i.firestore);return function(g,P,k,z,K,se){const Te=g.explicitOrderBy;if(K.length>Te.length)throw new Ye(We.INVALID_ARGUMENT,`Too many arguments provided to ${z}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $e=[];for(let _t=0;_t<K.length;_t++){const Ct=K[_t];if(Te[_t].field.isKeyField()){if("string"!=typeof Ct)throw new Ye(We.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${z}(), but got a ${typeof Ct}`);if(!tl(g)&&-1!==Ct.indexOf("/"))throw new Ye(We.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${z}() must be a plain document ID, but '${Ct}' contains a slash.`);const At=g.path.child(Bn.fromString(Ct));if(!wt.isDocumentKey(At))throw new Ye(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${z}() must result in a valid document path, but '${At}' is not because it contains an odd number of segments.`);const _n=new wt(At);$e.push(da(P,_n))}else{const At=Gm(k,z,Ct);$e.push(At)}}return new Ju($e,se)}(i._query,i.firestore._databaseId,u,e,n,o)}}function xf(i,e,n){if("string"==typeof(n=(0,Ge.m9)(n))){if(""===n)throw new Ye(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tl(e)&&-1!==n.indexOf("/"))throw new Ye(We.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(Bn.fromString(n));if(!wt.isDocumentKey(o))throw new Ye(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return da(i,new wt(o))}if(n instanceof Vi)return da(i,n._key);throw new Ye(We.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cf(n)}.`)}function kf(i,e){if(!Array.isArray(i)||0===i.length)throw new Ye(We.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ME(i,e){const n=function(u,c){for(const g of u)for(const P of g.getFlattenedFilters())if(c.indexOf(P.op)>=0)return P.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Ye(We.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Km{convertValue(e,n="none"){switch(No(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Vt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return Sa(e,(u,c)=>{o[u]=this.convertValue(c,n)}),o}convertGeoPoint(e){return new fu(vr(e.latitude),vr(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Au(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Il(e));default:return null}}convertTimestamp(e){const n=os(e);return new Tr(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Bn.fromString(e);jt(Ag(o));const u=new Eo(o.get(1),o.get(3)),c=new wt(o.popFirst(5));return u.isEqual(n)||yr(`Document ${c} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function Th(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class OE extends Km{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ol(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vi(this.firestore,null,n)}}class xc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sc extends eg{constructor(e,n,o,u,c,g){super(e,n,o,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ff(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(tg("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Ff extends sc{data(e={}){return super.data(e)}}class kc{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new xc(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new Ff(this._firestore,this._userDataWriter,o.key,o,new xc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ye(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,c){if(u._snapshot.oldDocs.isEmpty()){let g=0;return u._snapshot.docChanges.map(P=>({type:"added",doc:new Ff(u._firestore,u._userDataWriter,P.doc.key,P.doc,new xc(u._snapshot.mutatedKeys.has(P.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:g++}))}{let g=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(P=>c||3!==P.type).map(P=>{const k=new Ff(u._firestore,u._userDataWriter,P.doc.key,P.doc,new xc(u._snapshot.mutatedKeys.has(P.doc.key),u._snapshot.fromCache),u.query.converter);let z=-1,K=-1;return 0!==P.type&&(z=g.indexOf(P.doc.key),g=g.delete(P.doc.key)),1!==P.type&&(g=g.add(P.doc),K=g.indexOf(P.doc.key)),{type:zy(P.type),doc:k,oldIndex:z,newIndex:K}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function zy(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vt()}}function ag(i,e){return i instanceof sc&&e instanceof sc?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof kc&&e instanceof kc&&i._firestore===e._firestore&&Bm(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Fc extends Km{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ol(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vi(this.firestore,null,n)}}function Wy(i,e,n){i=or(i,Vi);const o=or(i.firestore,ci),u=Th(i.converter,e,n);return Ch(o,[ic(Fu(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,gr.none())])}function qy(i,e,n,...o){i=or(i,Vi);const u=or(i.firestore,ci),c=Fu(u);let g;return g="string"==typeof(e=(0,Ge.m9)(e))||e instanceof rc?Jp(c,"updateDoc",i._key,e,n,o):Oc(c,"updateDoc",i._key,e),Ch(u,[g.toMutation(i._key,gr.exists(!0))])}function Xm(i,...e){var n,o,u;i=(0,Ge.m9)(i);let c={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||jm(e[g])||(c=e[g],g++);const P={includeMetadataChanges:c.includeMetadataChanges};if(jm(e[g])){const se=e[g];e[g]=null===(n=se.next)||void 0===n?void 0:n.bind(se),e[g+1]=null===(o=se.error)||void 0===o?void 0:o.bind(se),e[g+2]=null===(u=se.complete)||void 0===u?void 0:u.bind(se)}let k,z,K;if(i instanceof Vi)z=or(i.firestore,ci),K=el(i._key.path),k={next:se=>{e[g]&&e[g](e_(z,i,se))},error:e[g+1],complete:e[g+2]};else{const se=or(i,ko);z=or(se.firestore,ci),K=se._query;const Te=new Fc(z);k={next:$e=>{e[g]&&e[g](new kc(z,Te,se,$e))},error:e[g+1],complete:e[g+2]},Uy(i._query)}return function(Te,$e,_t,Ct){const At=new Bp(Ct),_n=new bc($e,At,_t);return Te.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return Sp(yield wd(Te),_n)})),()=>{At.Na(),Te.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return pm(yield wd(Te),_n)}))}}(Is(z),K,P,k)}function Ch(i,e){return function(o,u){const c=new Rr;return o.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function GI(i,e,n){return ly.apply(this,arguments)}(yield zp(o),u,c)})),c.promise}(Is(i),e)}function e_(i,e,n){const o=n.docs.get(e._key),u=new Fc(i);return new sc(i,u,e._key,o,new xc(n.hasPendingWrites,n.fromCache),e.converter)}const r_={maxAttempts:5};class i_{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Fu(e)}set(e,n,o){this._verifyNotCommitted();const u=oc(e,this._firestore),c=Th(u.converter,n,o),g=ic(this._dataReader,"WriteBatch.set",u._key,c,null!==u.converter,o);return this._mutations.push(g.toMutation(u._key,gr.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const c=oc(e,this._firestore);let g;return g="string"==typeof(n=(0,Ge.m9)(n))||n instanceof rc?Jp(this._dataReader,"WriteBatch.update",c._key,n,o,u):Oc(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(g.toMutation(c._key,gr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=oc(e,this._firestore);return this._mutations=this._mutations.concat(new Li(n._key,gr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ye(We.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function oc(i,e){if((i=(0,Ge.m9)(i)).firestore!==e)throw new Ye(We.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Xy extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=Fu(n)}get(n){const o=oc(n,this._firestore),u=new OE(this._firestore);return this._transaction.lookup([o._key]).then(c=>{if(!c||1!==c.length)return Vt();const g=c[0];if(g.isFoundDocument())return new eg(this._firestore,u,g.key,g,o.converter);if(g.isNoDocument())return new eg(this._firestore,u,o._key,null,o.converter);throw Vt()})}set(n,o,u){const c=oc(n,this._firestore),g=Th(c.converter,o,u),P=ic(this._dataReader,"Transaction.set",c._key,g,null!==c.converter,u);return this._transaction.set(c._key,P),this}update(n,o,u,...c){const g=oc(n,this._firestore);let P;return P="string"==typeof(o=(0,Ge.m9)(o))||o instanceof rc?Jp(this._dataReader,"Transaction.update",g._key,o,u,c):Oc(this._dataReader,"Transaction.update",g._key,o),this._transaction.update(g._key,P),this}delete(n){const o=oc(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=oc(e,this._firestore),o=new Fc(this._firestore);return super.get(e).then(u=>new sc(this._firestore,o,n._key,u._document,new xc(!1,!1),n.converter))}}function dg(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ye("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function uv(){if(typeof Uint8Array>"u")throw new Ye("unimplemented","Uint8Arrays are not available in this environment.")}function lv(){if(!function Gc(){return typeof atob<"u"}())throw new Ye("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Mo=ce.SDK_VERSION,(0,ce._registerComponent)(new ke.wA("firestore",(o,{instanceIdentifier:u,options:c})=>{const g=o.getProvider("app").getImmediate(),P=new ci(new Xa(o.getProvider("auth-internal")),new Uc(o.getProvider("app-check-internal")),function(z,K){if(!Object.prototype.hasOwnProperty.apply(z.options,["projectId"]))throw new Ye(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eo(z.options.projectId,K)}(g,u),g);return c=Object.assign({useFetchStreams:n},c),P._setSettings(c),P},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(Iu,"4.3.2",e),(0,ce.registerVersion)(Iu,"4.3.2","esm2017")}();class Ah{constructor(e){this._delegate=e}static fromBase64String(e){return lv(),new Ah(Ol.fromBase64String(e))}static fromUint8Array(e){return uv(),new Ah(Ol.fromUint8Array(e))}toBase64(){return lv(),this._delegate.toBase64()}toUint8Array(){return uv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function a_(i){return function cv(i,e){if("object"!=typeof i||null===i)return!1;const n=i;for(const o of e)if(o in n&&"function"==typeof n[o])return!0;return!1}(i,["next","error","complete"])}class dv{enableIndexedDbPersistence(e,n){return function TE(i,e){$m(i=or(i,ci));const n=Is(i);if(n._uninitializedComponentsProvider)throw new Ye(We.FAILED_PRECONDITION,"SDK cache is already specified.");gs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),u=new Id;return Oy(n,u,new Mm(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function CE(i){$m(i=or(i,ci));const e=Is(i);if(e._uninitializedComponentsProvider)throw new Ye(We.FAILED_PRECONDITION,"SDK cache is already specified.");gs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),o=new Id;return Oy(e,o,new _y(o,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function DE(i){if(i._initialized&&!i._terminated)throw new Ye(We.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(n=(0,Ie.Z)(function*(u){if(!Y.D())return Promise.resolve();const c=u+"main";yield Y.delete(c)}),function o(u){return n.apply(this,arguments)})(Cc(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class bd{constructor(e,n,o){this._delegate=n,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Eo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&gs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,o={}){!function Um(i,e,n,o={}){var u;const c=(i=or(i,mh))._getSettings(),g=`${e}:${n}`;if("firestore.googleapis.com"!==c.host&&c.host!==g&&gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:g,ssl:!1})),o.mockUserToken){let P,k;if("string"==typeof o.mockUserToken)P=o.mockUserToken,k=An.MOCK_USER;else{P=(0,Ge.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const z=o.mockUserToken.sub||o.mockUserToken.user_id;if(!z)throw new Ye(We.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new An(z)}i._authCredentials=new pl(new Ja(P,k))}}(this._delegate,e,n,o)}enableNetwork(){return function Ny(i){return function Fm(i){return i.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield wf(i),n=yield mE(i);return e.setNetworkEnabled(!0),function(u){const c=St(u);return c.C_.delete(0),df(c)}(n)}))}(Is(i=or(i,ci)))}(this._delegate)}disableNetwork(){return function xy(i){return function nc(i){return i.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield wf(i),n=yield mE(i);return e.setNetworkEnabled(!1),(o=(0,Ie.Z)(function*(c){const g=St(c);g.C_.add(0),yield Sl(g),g.M_.set("Offline")}),function u(c){return o.apply(this,arguments)})(n);var o}))}(Is(i=or(i,ci)))}(this._delegate)}enablePersistence(e){let n=!1,o=!1;return e&&(n=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Vm("synchronizeTabs",n,"experimentalForceOwningTab",o)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function AE(i){return function(n){const o=new Rr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function kn(i,e){return Fp.apply(this,arguments)}(yield zp(n),o)})),o.promise}(Is(i=or(i,ci)))}(this._delegate)}onSnapshotsInSync(e){return function Ky(i,e){return function wy(i,e){const n=new Bp(e);return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return u=yield wd(i),c=n,St(u).q_.add(c),void c.next();var u,c})),()=>{n.Na(),i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return u=yield wd(i),c=n,void St(u).q_.delete(c);var u,c}))}}(Is(i=or(i,ci)),jm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ye("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Sd(this,Sy(this._delegate,e))}catch(n){throw Zo(n,"collection()","Firestore.collection()")}}doc(e){try{return new al(this,Zp(this._delegate,e))}catch(n){throw Zo(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Zi(this,function EE(i,e){if(i=or(i,mh),Kp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ye(We.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ko(i,null,(o=e,new Go(Bn.emptyPath(),o)));var o}(this._delegate,e))}catch(n){throw Zo(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ev(i,e,n){i=or(i,ci);const o=Object.assign(Object.assign({},r_),n);return function(c){if(c.maxAttempts<1)throw new Ye(We.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(c,g,P){const k=new Rr;return c.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const z=yield function km(i){return If(i).then(e=>e.datastore)}(c);new pE(c.asyncQueue,z,P,g,k).run()})),k.promise}(Is(i),u=>e(new Xy(i,u)),o)}(this._delegate,n=>e(new u_(this,n)))}batch(){return Is(this._delegate),new hv(new i_(this._delegate,e=>Ch(this._delegate,e)))}loadBundle(e){return function KI(i,e){const n=Is(i=or(i,ci)),o=new wE;return function yE(i,e,n,o){const u=function(g,P){let k;return k="string"==typeof g?Ql().encode(g):g,K=function(K,se){if(K instanceof Uint8Array)return yy(K,void 0);if(K instanceof ArrayBuffer)return yy(new Uint8Array(K),void 0);if(K instanceof ReadableStream)return K.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(k),new Om(K,P);var K}(n,ah(e));i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function Pm(i,e,n){const o=St(i);var u;(u=(0,Ie.Z)(function*(g,P,k){try{const z=yield P.getMetadata();if(yield function(_t,Ct){const At=St(_t),_n=Mi(Ct.createTime);return At.persistence.runTransaction("hasNewerBundle","readonly",Cn=>At.Kr.getBundleMetadata(Cn,Ct.id)).then(Cn=>!!Cn&&Cn.createTime.compareTo(_n)>=0)}(g.localStore,z))return yield P.close(),k._completeWith({taskState:"Success",documentsLoaded:(_t=z).totalDocuments,bytesLoaded:_t.totalBytes,totalDocuments:_t.totalDocuments,totalBytes:_t.totalBytes}),Promise.resolve(new Set);k._updateProgress(gm(z));const K=new oy(z,g.localStore,P.serializer);let se=yield P.Ma();for(;se;){const $e=yield K.ea(se);$e&&k._updateProgress($e),se=yield P.Ma()}const Te=yield K.complete();return yield du(g,Te.ra,void 0),yield function(_t,Ct){const At=St(_t);return At.persistence.runTransaction("Save bundle","readwrite",_n=>At.Kr.saveBundleMetadata(_n,Ct))}(g.localStore,z),k._completeWith(Te.progress),Promise.resolve(Te.na)}catch(z){return gs("SyncEngine",`Loading bundle failed with ${z}`),k._failWith(z),Promise.resolve(new Set)}var _t}),function c(g,P,k){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield zp(i),u,o)}))}(n,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function ky(i,e){return function Wp(i,e){return i.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(o,u){const c=St(o);return c.persistence.runTransaction("Get named query","readonly",g=>c.Kr.getNamedQuery(g,u))}(yield Rc(i),e)}))}(Is(i=or(i,ci)),e).then(n=>n?new ko(i,null,n.query):null)}(this._delegate,e).then(n=>n?new Zi(this,n):null)}}class hg extends Km{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ah(new Ol(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return al.forKey(n,this.firestore,null)}}class u_{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new hg(e)}get(e){const n=Vc(e);return this._delegate.get(n).then(o=>new Vf(this._firestore,new sc(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,n.converter)))}set(e,n,o){const u=Vc(e);return o?(dg("Transaction.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const c=Vc(e);return 2===arguments.length?this._delegate.update(c,n):this._delegate.update(c,n,o,...u),this}delete(e){const n=Vc(e);return this._delegate.delete(n),this}}class hv{constructor(e){this._delegate=e}set(e,n,o){const u=Vc(e);return o?(dg("WriteBatch.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const c=Vc(e);return 2===arguments.length?this._delegate.update(c,n):this._delegate.update(c,n,o,...u),this}delete(e){const n=Vc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Lc{constructor(e,n,o){this._firestore=e,this._userDataWriter=n,this._delegate=o}fromFirestore(e,n){const o=new Ff(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Uf(this._firestore,o),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const o=Lc.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let c=u.get(n);return c||(c=new Lc(e,new hg(e),n),u.set(n,c)),c}}Lc.INSTANCES=new WeakMap;class al{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new hg(e)}static forPath(e,n,o){if(e.length%2!=0)throw new Ye("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new al(n,new Vi(n._delegate,o,new wt(e)))}static forKey(e,n,o){return new al(n,new Vi(n._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Sd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Sd(this.firestore,Sy(this._delegate,e))}catch(n){throw Zo(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ge.m9)(e))instanceof Vi&&Ry(this._delegate,e)}set(e,n){n=dg("DocumentReference.set",n);try{return n?Wy(this._delegate,e,n):Wy(this._delegate,e)}catch(o){throw Zo(o,"setDoc()","DocumentReference.set()")}}update(e,n,...o){try{return 1===arguments.length?qy(this._delegate,e):qy(this._delegate,e,n,...o)}catch(u){throw Zo(u,"updateDoc()","DocumentReference.update()")}}delete(){return function Ym(i){return Ch(or(i.firestore,ci),[new Li(i._key,gr.none())])}(this._delegate)}onSnapshot(...e){const n=fg(e),o=ul(e,u=>new Vf(this.firestore,new sc(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Xm(this._delegate,n,o)}get(e){let n;return n="cache"===e?.source?function ug(i){i=or(i,Vi);const e=or(i.firestore,ci),n=Is(e),o=new Fc(e);return function _E(i,e){const n=new Rr;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(o=(0,Ie.Z)(function*(c,g,P){try{const k=yield function(K,se){const Te=St(K);return Te.persistence.runTransaction("read document","readonly",$e=>Te.localDocuments.getDocument($e,se))}(c,g);k.isFoundDocument()?P.resolve(k):k.isNoDocument()?P.resolve(null):P.reject(new Ye(We.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(k){const z=lh(k,`Failed to get document '${g} from cache`);P.reject(z)}}),function u(c,g,P){return o.apply(this,arguments)})(yield Rc(i),e,n);var o})),n.promise}(n,i._key).then(u=>new sc(e,o,i._key,u,new xc(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function lg(i){i=or(i,Vi);const e=or(i.firestore,ci);return Ey(Is(e),i._key,{source:"server"}).then(n=>e_(e,i,n))}(this._delegate):function Zm(i){i=or(i,Vi);const e=or(i.firestore,ci);return Ey(Is(e),i._key).then(n=>e_(e,i,n))}(this._delegate),n.then(o=>new Vf(this.firestore,new sc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new al(this.firestore,this._delegate.withConverter(e?Lc.getInstance(this.firestore,e):null))}}function Zo(i,e,n){return i.message=i.message.replace(e,n),i}function fg(i){for(const e of i)if("object"==typeof e&&!a_(e))return e;return{}}function ul(i,e){var n,o;let u;return u=a_(i[0])?i[0]:a_(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:c=>{u.next&&u.next(e(c))},error:null===(n=u.error)||void 0===n?void 0:n.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Vf{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new al(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return ag(this._delegate,e._delegate)}}class Uf extends Vf{data(e){const n=this._delegate.data(e);return this._delegate._converter||function cn(i,e){i||Vt()}(void 0!==n),n}}class Zi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new hg(e)}where(e,n,o){try{return new Zi(this.firestore,Dd(this._delegate,function bE(i,e,n){const o=e,u=tg("where",i);return Rf._create(u,o,n)}(e,n,o)))}catch(u){throw Zo(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Zi(this.firestore,Dd(this._delegate,function rg(i,e="asc"){const n=e,o=tg("orderBy",i);return Pf._create(o,n)}(e,n)))}catch(o){throw Zo(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Zi(this.firestore,Dd(this._delegate,function Of(i){return gh("limit",i),Mf._create("limit",i,"F")}(e)))}catch(n){throw Zo(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Zi(this.firestore,Dd(this._delegate,function Hy(i){return gh("limitToLast",i),Mf._create("limitToLast",i,"L")}(e)))}catch(n){throw Zo(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Zi(this.firestore,Dd(this._delegate,function Nf(...i){return ig._create("startAt",i,!0)}(...e)))}catch(n){throw Zo(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Zi(this.firestore,Dd(this._delegate,function SE(...i){return ig._create("startAfter",i,!1)}(...e)))}catch(n){throw Zo(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Zi(this.firestore,Dd(this._delegate,function RE(...i){return sg._create("endBefore",i,!1)}(...e)))}catch(n){throw Zo(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Zi(this.firestore,Dd(this._delegate,function PE(...i){return sg._create("endAt",i,!0)}(...e)))}catch(n){throw Zo(n,"endAt()","Query.endAt()")}}isEqual(e){return Bm(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function Gy(i){i=or(i,ko);const e=or(i.firestore,ci),n=Is(e),o=new Fc(e);return function Lm(i,e){const n=new Rr;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(o=(0,Ie.Z)(function*(c,g,P){try{const k=yield fp(c,g,!0),z=new mf(g,k.ls),K=z.ca(k.documents),se=z.applyChanges(K,!1);P.resolve(se.snapshot)}catch(k){const z=lh(k,`Failed to execute query '${g} against cache`);P.reject(z)}}),function u(c,g,P){return o.apply(this,arguments)})(yield Rc(i),e,n);var o})),n.promise}(n,i._query).then(u=>new kc(e,o,i,u))}(this._delegate):"server"===e?.source?function LE(i){i=or(i,ko);const e=or(i.firestore,ci),n=Is(e),o=new Fc(e);return Iy(n,i._query,{source:"server"}).then(u=>new kc(e,o,i,u))}(this._delegate):function Qm(i){i=or(i,ko);const e=or(i.firestore,ci),n=Is(e),o=new Fc(e);return Uy(i._query),Iy(n,i._query).then(u=>new kc(e,o,i,u))}(this._delegate),n.then(o=>new pu(this.firestore,new kc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const n=fg(e),o=ul(e,u=>new pu(this.firestore,new kc(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Xm(this._delegate,n,o)}withConverter(e){return new Zi(this.firestore,this._delegate.withConverter(e?Lc.getInstance(this.firestore,e):null))}}class ll{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Uf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class pu{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Zi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Uf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new ll(this._firestore,n))}forEach(e,n){this._delegate.forEach(o=>{e.call(n,new Uf(this._firestore,o))})}isEqual(e){return ag(this._delegate,e._delegate)}}class Sd extends Zi{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new al(this.firestore,e):null}doc(e){try{return new al(this.firestore,void 0===e?Zp(this._delegate):Zp(this._delegate,e))}catch(n){throw Zo(n,"doc()","CollectionReference.doc()")}}add(e){return function Jm(i,e){const n=or(i.firestore,ci),o=Zp(i),u=Th(i.converter,e);return Ch(n,[ic(Fu(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,gr.exists(!1))]).then(()=>o)}(this._delegate,e).then(n=>new al(this.firestore,n))}isEqual(e){return Ry(this._delegate,e._delegate)}withConverter(e){return new Sd(this.firestore,this._delegate.withConverter(e?Lc.getInstance(this.firestore,e):null))}}function Vc(i){return or(i,Vi)}class l_{constructor(...e){this._delegate=new rc(...e)}static documentId(){return new l_(Fr.keyField().canonicalString())}isEqual(e){return(e=(0,Ge.m9)(e))instanceof rc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Rd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function nv(){return new Mc("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Rd(e)}static delete(){const e=function tv(){return new Nl("deleteField")}();return e._methodName="FieldValue.delete",new Rd(e)}static arrayUnion(...e){const n=function rv(...i){return new _h("arrayUnion",i)}(...e);return n._methodName="FieldValue.arrayUnion",new Rd(n)}static arrayRemove(...e){const n=function iv(...i){return new yh("arrayRemove",i)}(...e);return n._methodName="FieldValue.arrayRemove",new Rd(n)}static increment(e){const n=function cg(i){return new vh("increment",i)}(e);return n._methodName="FieldValue.increment",new Rd(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const QE={Firestore:bd,GeoPoint:fu,Timestamp:Tr,Blob:Ah,Transaction:u_,WriteBatch:hv,DocumentReference:al,DocumentSnapshot:Vf,Query:Zi,QueryDocumentSnapshot:Uf,QuerySnapshot:pu,CollectionReference:Sd,FieldPath:l_,FieldValue:Rd,setLogLevel:function ZE(i){!function la(i){Ki.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function c_(i){(function YE(i,e){i.INTERNAL.registerComponent(new ke.wA("firestore-compat",n=>{const o=n.getProvider("app-compat").getImmediate(),u=n.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},QE)))})(i,(e,n)=>new bd(e,n,new dv)),i.registerVersion("@firebase/firestore-compat","0.3.22")}(Ft.Z);var Bf=$(7142);function d_(i,e){return function JE(i,e=ve.z){return new Re.y(n=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},n)}):o=i.onSnapshot({includeMetadataChanges:!0},n),()=>{o?.()}})}(i,e)}function h_(i,e){return d_(i,e).pipe((0,Ke.U)(n=>({payload:n,type:"query"})))}class f_{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const o=this.ref.collection(e),{ref:u,query:c}=g_(o,n);return new pv(u,c,this.afs)}snapshotChanges(){return function XE(i,e){return d_(i,e).pipe((0,ue.O)(void 0),et(),(0,Ke.U)(n=>{const[o,u]=n;return u.exists?o?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ie.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ke.U)(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return(0,R.D)(this.ref.get(e)).pipe(ie.iC)}}function jf(i,e){return h_(i,e).pipe((0,ue.O)(void 0),et(),(0,Ke.U)(n=>{const[o,u]=n,c=u.payload.docChanges(),g=c.map(P=>({type:P.type,payload:P}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((P,k)=>{const z=c.find(se=>se.doc.ref.isEqual(P.ref)),K=o?.payload.docs.find(se=>se.ref.isEqual(P.ref));z&&JSON.stringify(z.doc.metadata)===JSON.stringify(P.metadata)||!z&&K&&JSON.stringify(K.metadata)===JSON.stringify(P.metadata)||g.push({type:"modified",payload:{oldIndex:k,newIndex:k,type:"modified",doc:P}})}),g}))}function Hf(i,e,n){return jf(i,n).pipe((0,ht.R)((o,u)=>function eI(i,e,n){return e.forEach(o=>{n.indexOf(o.type)>-1&&(i=function fv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return pg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=i.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return pg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return pg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(c=>c.payload),e),[]),(0,nt.x)(),(0,Ke.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function pg(i,e,n,...o){const u=i.slice();return u.splice(e,n,...o),u}function p_(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class pv{ref;query;afs;constructor(e,n,o){this.ref=e,this.query=n,this.afs=o}stateChanges(e){let n=jf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,Ke.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),n.pipe((0,ue.O)(void 0),et(),(0,pt.h)(([o,u])=>u.length>0||!o),(0,Ke.U)(([,o])=>o),ie.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ht.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=p_(e);return Hf(this.query,n,this.afs.schedulers.outsideAngular).pipe(ie.iC)}valueChanges(e={}){return h_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(n=>n.payload.docs.map(o=>e.idField?{...o.data(),[e.idField]:o.id}:o.data())),ie.iC)}get(e){return(0,R.D)(this.query.get(e)).pipe(ie.iC)}add(e){return this.ref.add(e)}doc(e){return new f_(this.ref.doc(e),this.afs)}}class tI{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?jf(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(n=>n.filter(o=>e.indexOf(o.type)>-1)),(0,pt.h)(n=>n.length>0),ie.iC):jf(this.query,this.afs.schedulers.outsideAngular).pipe(ie.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ht.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=p_(e);return Hf(this.query,n,this.afs.schedulers.outsideAngular).pipe(ie.iC)}valueChanges(e={}){return h_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(o=>o.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),ie.iC)}get(e){return(0,R.D)(this.query.get(e)).pipe(ie.iC)}}const gg=new W.OlP("angularfire2.enableFirestorePersistence"),mg=new W.OlP("angularfire2.firestore.persistenceSettings"),gv=new W.OlP("angularfire2.firestore.settings"),mv=new W.OlP("angularfire2.firestore.use-emulator");function g_(i,e=(n=>n)){return{query:e(i),ref:i}}let m_=(()=>{class i{schedulers;firestore;persistenceEnabled$;constructor(n,o,u,c,g,P,k,z,K,se,Te,$e,_t,Ct,At,_n,Cn){this.schedulers=k;const gn=(0,Ee.on)(n,P,o),Jn=K;se&&(0,pe.nw)(gn,P,Te,_t,Ct,At,$e,_n),[this.firestore,this.persistenceEnabled$]=(0,Ee.cc)(`${gn.name}.firestore`,"AngularFirestore",gn.name,()=>{const Mr=P.runOutsideAngular(()=>gn.firestore());if(c&&Mr.settings(c),Jn&&Mr.useEmulator(...Jn),u&&!(0,w.PM)(g)){const Nr=()=>{try{return(0,R.D)(Mr.enablePersistence(z||void 0).then(()=>!0,()=>!1))}catch(ks){return typeof console<"u"&&console.warn(ks),(0,Ne.of)(!1)}};return[Mr,P.runOutsideAngular(Nr)]}return[Mr,(0,Ne.of)(!1)]},[c,Jn,u])}collection(n,o){let u;u="string"==typeof n?this.firestore.collection(n):n;const{ref:c,query:g}=g_(u,o),P=this.schedulers.ngZone.run(()=>c);return new pv(P,g,this)}collectionGroup(n,o){const u=o||(g=>g),c=this.firestore.collectionGroup(n);return new tI(u(c),this)}doc(n){let o;o="string"==typeof n?this.firestore.doc(n):n;const u=this.schedulers.ngZone.run(()=>o);return new f_(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||i)(W.LFG(Ee.Dh),W.LFG(Ee.xv,8),W.LFG(gg,8),W.LFG(gv,8),W.LFG(W.Lbi),W.LFG(W.R0b),W.LFG(ie.HU),W.LFG(mg,8),W.LFG(mv,8),W.LFG(pe.zQ,8),W.LFG(pe.Qv,8),W.LFG(pe.L6,8),W.LFG(pe._Q,8),W.LFG(pe.rT,8),W.LFG(pe.lh,8),W.LFG(pe.f7,8),W.LFG(ie.Rf,8))};static \u0275prov=W.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})(),_v=(()=>{class i{constructor(){Bf.Z.registerVersion("angularfire",ie.q4.full,"fst-compat")}static enablePersistence(n){return{ngModule:i,providers:[{provide:gg,useValue:!0},{provide:mg,useValue:n}]}}static \u0275fac=function(o){return new(o||i)};static \u0275mod=W.oAB({type:i});static \u0275inj=W.cJS({providers:[m_]})}return i})()},7217:(bt,Le,$)=>{$.d(Le,{Dh:()=>R,GT:()=>ve,cc:()=>Ke,hO:()=>et,on:()=>ue,pX:()=>pe,xv:()=>Ne});var w=$(5879),W=$(8326),ie=$(7142);const Ee=["ngOnDestroy"],pe=(ut,Ft,Ie,ce={})=>new Proxy(ut,{get:(ke,Ce)=>Ie.runOutsideAngular(()=>{if(ut[Ce])return ce?.spy?.get&&ce.spy.get(Ce,ut[Ce]),ut[Ce];if(Ee.indexOf(Ce)>-1)return()=>{};const Ge=Ft.toPromise().then(Qe=>{const rt=Qe?.[Ce];return"function"==typeof rt?rt.bind(Qe):rt?.then?rt.then(fe=>Ie.run(()=>fe)):Ie.run(()=>rt)});return new Proxy(()=>{},{get:(Qe,rt)=>Ge[rt],apply:(Qe,rt,fe)=>Ge.then(Et=>{const lt=Et?.(...fe);return ce?.spy?.apply&&ce.spy.apply(Ce,fe,lt),lt})})})}),ve=(ut,Ft)=>{Ft.forEach(Ie=>{Object.getOwnPropertyNames(Ie.prototype||Ie).forEach(ce=>{Object.defineProperty(ut.prototype,ce,Object.getOwnPropertyDescriptor(Ie.prototype||Ie,ce))})})};class Re{constructor(Ft){return Ft}}const R=new w.OlP("angularfire2.app.options"),Ne=new w.OlP("angularfire2.app.name");function ue(ut,Ft,Ie){const ke="object"==typeof Ie&&Ie||{};ke.name=ke.name||"string"==typeof Ie&&Ie||"[DEFAULT]";const Ge=ie.Z.apps.filter(Qe=>Qe&&Qe.name===ke.name)[0]||Ft.runOutsideAngular(()=>ie.Z.initializeApp(ut,ke));try{if(JSON.stringify(ut)!==JSON.stringify(Ge.options)){const Qe=!!module.hot;he("error",`${Ge.name} Firebase App already initialized with different options${Qe?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Re(Ge)}const he=(ut,...Ft)=>{(0,w.X6Q)()&&typeof console<"u"&&console[ut](...Ft)},De={provide:Re,useFactory:ue,deps:[R,w.R0b,[new w.FiY,Ne]]};let et=(()=>{class ut{static initializeApp(Ie,ce){return{ngModule:ut,providers:[{provide:R,useValue:Ie},{provide:Ne,useValue:ce}]}}constructor(Ie){ie.Z.registerVersion("angularfire",W.q4.full,"core"),ie.Z.registerVersion("angularfire",W.q4.full,"app-compat"),ie.Z.registerVersion("angular",w.q4F.full,Ie.toString())}static \u0275fac=function(ce){return new(ce||ut)(w.LFG(w.Lbi))};static \u0275mod=w.oAB({type:ut});static \u0275inj=w.cJS({providers:[De]})}return ut})();function Ke(ut,Ft,Ie,ce,ke){const[,Ce,Ge]=globalThis.\u0275AngularfireInstanceCache.find(Qe=>Qe[0]===ut)||[];if(Ce)return function ht(ut,Ft){try{return ut.toString()===Ft.toString()}catch{return ut===Ft}}(ke,Ge)||(pt("error",`${Ft} was already initialized on the ${Ie} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),pt("warn",{is:ke,was:Ge})),Ce;{const Qe=ce();return globalThis.\u0275AngularfireInstanceCache.push([ut,Qe,ke]),Qe}}const nt=typeof module<"u"&&!!module.hot,pt=(ut,...Ft)=>{(0,w.X6Q)()&&typeof console<"u"&&console[ut](...Ft)};globalThis.\u0275AngularfireInstanceCache||=[]},8326:(bt,Le,$)=>{$.d(Le,{q4:()=>ht,iC:()=>ur,fc:()=>Et,HU:()=>Ge,Rf:()=>Ft});var w=$(5879),W=$(534);(0,W.registerVersion)("firebase","10.6.0","app");var pe=$(1954),Re=$(2631);const Ne=new class R extends Re.v{}(class ve extends pe.o{constructor(Rt,_e){super(Rt,_e),this.scheduler=Rt,this.work=_e}schedule(Rt,_e=0){return _e>0?super.schedule(Rt,_e):(this.delay=_e,this.state=Rt,this.scheduler.flush(this),this)}execute(Rt,_e){return _e>0||this.closed?super.execute(Rt,_e):this._execute(Rt,_e)}requestAsyncId(Rt,_e,we=0){return null!=we&&we>0||null==we&&this.delay>0?super.requestAsyncId(Rt,_e,we):(Rt.flush(this),0)}});var he=$(6321),De=$(9397),et=$(3093),Ke=$(5137);const ht=new w.GfV("ANGULARFIRE2_VERSION");class Ft{constructor(){return((It,Rt)=>{const _e=(0,W.getApps)(),we=[];return _e.forEach(Ve=>{Ve.container.getProvider(It).instances.forEach(Se=>{we.includes(Se)||we.push(Se)})}),we})(Ie)}}const Ie="app-check";function ce(){}class ke{zone;delegate;constructor(Rt,_e=Ne){this.zone=Rt,this.delegate=_e}now(){return this.delegate.now()}schedule(Rt,_e,we){const Ve=this.zone;return this.delegate.schedule(function(Se){Ve.runGuarded(()=>{Rt.apply(this,[Se])})},_e,we)}}class Ce{zone;task=null;constructor(Rt){this.zone=Rt}call(Rt,_e){const we=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ce,{},ce,ce)),_e.pipe((0,De.b)({next:we,complete:we,error:we})).subscribe(Rt).add(we)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ge=(()=>{class It{ngZone;outsideAngular;insideAngular;constructor(_e){this.ngZone=_e,this.outsideAngular=_e.runOutsideAngular(()=>new ke(Zone.current)),this.insideAngular=_e.run(()=>new ke(Zone.current,he.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(we){return new(we||It)(w.LFG(w.R0b))};static \u0275prov=w.Yz7({token:It,factory:It.\u0275fac,providedIn:"root"})}return It})();function Qe(){const It=globalThis.\u0275AngularFireScheduler;if(!It)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return It}function Et(It){return It.pipe((0,et.Q)(Qe().outsideAngular))}function ur(It){return function Ar(It){return function(_e){return(_e=_e.lift(new Ce(It.ngZone))).pipe((0,Ke.R)(It.outsideAngular),(0,et.Q)(It.insideAngular))}}(Qe())(It)}},6593:(bt,Le,$)=>{$.d(Le,{Dx:()=>Ui,b2:()=>$n,q6:()=>en,se:()=>rt});var w=$(5879),W=$(6814);class ie extends W.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ee extends ie{static makeCurrent(){(0,W.HT)(new Ee)}onAndCancel(te,J,ne){return te.addEventListener(J,ne),()=>{te.removeEventListener(J,ne)}}dispatchEvent(te,J){te.dispatchEvent(J)}remove(te){te.parentNode&&te.parentNode.removeChild(te)}createElement(te,J){return(J=J||this.getDefaultDocument()).createElement(te)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(te){return te.nodeType===Node.ELEMENT_NODE}isShadowRoot(te){return te instanceof DocumentFragment}getGlobalEventTarget(te,J){return"window"===J?window:"document"===J?te:"body"===J?te.body:null}getBaseHref(te){const J=function ve(){return pe=pe||document.querySelector("base"),pe?pe.getAttribute("href"):null}();return null==J?null:function R(ee){Re=Re||document.createElement("a"),Re.setAttribute("href",ee);const te=Re.pathname;return"/"===te.charAt(0)?te:`/${te}`}(J)}resetBaseElement(){pe=null}getUserAgent(){return window.navigator.userAgent}getCookie(te){return(0,W.Mx)(document.cookie,te)}}let Re,pe=null,ue=(()=>{class ee{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(ne){return new(ne||ee)};static#t=this.\u0275prov=w.Yz7({token:ee,factory:ee.\u0275fac})}return ee})();const he=new w.OlP("EventManagerPlugins");let De=(()=>{class ee{constructor(J,ne){this._zone=ne,this._eventNameToPlugin=new Map,J.forEach(Pe=>{Pe.manager=this}),this._plugins=J.slice().reverse()}addEventListener(J,ne,Pe){return this._findPluginFor(ne).addEventListener(J,ne,Pe)}getZone(){return this._zone}_findPluginFor(J){let ne=this._eventNameToPlugin.get(J);if(ne)return ne;if(ne=this._plugins.find(Ze=>Ze.supports(J)),!ne)throw new w.vHH(5101,!1);return this._eventNameToPlugin.set(J,ne),ne}static#e=this.\u0275fac=function(ne){return new(ne||ee)(w.LFG(he),w.LFG(w.R0b))};static#t=this.\u0275prov=w.Yz7({token:ee,factory:ee.\u0275fac})}return ee})();class et{constructor(te){this._doc=te}}const Ke="ng-app-id";let ht=(()=>{class ee{constructor(J,ne,Pe,Ze={}){this.doc=J,this.appId=ne,this.nonce=Pe,this.platformId=Ze,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,W.PM)(Ze),this.resetHostNodes()}addStyles(J){for(const ne of J)1===this.changeUsageCount(ne,1)&&this.onStyleAdded(ne)}removeStyles(J){for(const ne of J)this.changeUsageCount(ne,-1)<=0&&this.onStyleRemoved(ne)}ngOnDestroy(){const J=this.styleNodesInDOM;J&&(J.forEach(ne=>ne.remove()),J.clear());for(const ne of this.getAllStyles())this.onStyleRemoved(ne);this.resetHostNodes()}addHost(J){this.hostNodes.add(J);for(const ne of this.getAllStyles())this.addStyleToHost(J,ne)}removeHost(J){this.hostNodes.delete(J)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(J){for(const ne of this.hostNodes)this.addStyleToHost(ne,J)}onStyleRemoved(J){const ne=this.styleRef;ne.get(J)?.elements?.forEach(Pe=>Pe.remove()),ne.delete(J)}collectServerRenderedStyles(){const J=this.doc.head?.querySelectorAll(`style[${Ke}="${this.appId}"]`);if(J?.length){const ne=new Map;return J.forEach(Pe=>{null!=Pe.textContent&&ne.set(Pe.textContent,Pe)}),ne}return null}changeUsageCount(J,ne){const Pe=this.styleRef;if(Pe.has(J)){const Ze=Pe.get(J);return Ze.usage+=ne,Ze.usage}return Pe.set(J,{usage:ne,elements:[]}),ne}getStyleElement(J,ne){const Pe=this.styleNodesInDOM,Ze=Pe?.get(ne);if(Ze?.parentNode===J)return Pe.delete(ne),Ze.removeAttribute(Ke),Ze;{const dt=this.doc.createElement("style");return this.nonce&&dt.setAttribute("nonce",this.nonce),dt.textContent=ne,this.platformIsServer&&dt.setAttribute(Ke,this.appId),dt}}addStyleToHost(J,ne){const Pe=this.getStyleElement(J,ne);J.appendChild(Pe);const Ze=this.styleRef,dt=Ze.get(ne)?.elements;dt?dt.push(Pe):Ze.set(ne,{elements:[Pe],usage:1})}resetHostNodes(){const J=this.hostNodes;J.clear(),J.add(this.doc.head)}static#e=this.\u0275fac=function(ne){return new(ne||ee)(w.LFG(W.K0),w.LFG(w.AFp),w.LFG(w.Ojb,8),w.LFG(w.Lbi))};static#t=this.\u0275prov=w.Yz7({token:ee,factory:ee.\u0275fac})}return ee})();const nt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pt=/%COMP%/g,ke=new w.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Qe(ee,te){return te.map(J=>J.replace(pt,ee))}let rt=(()=>{class ee{constructor(J,ne,Pe,Ze,dt,Jt,rn,Dt=null){this.eventManager=J,this.sharedStylesHost=ne,this.appId=Pe,this.removeStylesOnCompDestroy=Ze,this.doc=dt,this.platformId=Jt,this.ngZone=rn,this.nonce=Dt,this.rendererByCompId=new Map,this.platformIsServer=(0,W.PM)(Jt),this.defaultRenderer=new fe(J,dt,rn,this.platformIsServer)}createRenderer(J,ne){if(!J||!ne)return this.defaultRenderer;this.platformIsServer&&ne.encapsulation===w.ifc.ShadowDom&&(ne={...ne,encapsulation:w.ifc.Emulated});const Pe=this.getOrCreateRenderer(J,ne);return Pe instanceof an?Pe.applyToHost(J):Pe instanceof lr&&Pe.applyStyles(),Pe}getOrCreateRenderer(J,ne){const Pe=this.rendererByCompId;let Ze=Pe.get(ne.id);if(!Ze){const dt=this.doc,Jt=this.ngZone,rn=this.eventManager,Dt=this.sharedStylesHost,Lt=this.removeStylesOnCompDestroy,cr=this.platformIsServer;switch(ne.encapsulation){case w.ifc.Emulated:Ze=new an(rn,Dt,ne,this.appId,Lt,dt,Jt,cr);break;case w.ifc.ShadowDom:return new Ar(rn,Dt,J,ne,dt,Jt,this.nonce,cr);default:Ze=new lr(rn,Dt,ne,Lt,dt,Jt,cr)}Pe.set(ne.id,Ze)}return Ze}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(ne){return new(ne||ee)(w.LFG(De),w.LFG(ht),w.LFG(w.AFp),w.LFG(ke),w.LFG(W.K0),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(w.Ojb))};static#t=this.\u0275prov=w.Yz7({token:ee,factory:ee.\u0275fac})}return ee})();class fe{constructor(te,J,ne,Pe){this.eventManager=te,this.doc=J,this.ngZone=ne,this.platformIsServer=Pe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(te,J){return J?this.doc.createElementNS(nt[J]||J,te):this.doc.createElement(te)}createComment(te){return this.doc.createComment(te)}createText(te){return this.doc.createTextNode(te)}appendChild(te,J){(ur(te)?te.content:te).appendChild(J)}insertBefore(te,J,ne){te&&(ur(te)?te.content:te).insertBefore(J,ne)}removeChild(te,J){te&&te.removeChild(J)}selectRootElement(te,J){let ne="string"==typeof te?this.doc.querySelector(te):te;if(!ne)throw new w.vHH(-5104,!1);return J||(ne.textContent=""),ne}parentNode(te){return te.parentNode}nextSibling(te){return te.nextSibling}setAttribute(te,J,ne,Pe){if(Pe){J=Pe+":"+J;const Ze=nt[Pe];Ze?te.setAttributeNS(Ze,J,ne):te.setAttribute(J,ne)}else te.setAttribute(J,ne)}removeAttribute(te,J,ne){if(ne){const Pe=nt[ne];Pe?te.removeAttributeNS(Pe,J):te.removeAttribute(`${ne}:${J}`)}else te.removeAttribute(J)}addClass(te,J){te.classList.add(J)}removeClass(te,J){te.classList.remove(J)}setStyle(te,J,ne,Pe){Pe&(w.JOm.DashCase|w.JOm.Important)?te.style.setProperty(J,ne,Pe&w.JOm.Important?"important":""):te.style[J]=ne}removeStyle(te,J,ne){ne&w.JOm.DashCase?te.style.removeProperty(J):te.style[J]=""}setProperty(te,J,ne){te[J]=ne}setValue(te,J){te.nodeValue=J}listen(te,J,ne){if("string"==typeof te&&!(te=(0,W.q)().getGlobalEventTarget(this.doc,te)))throw new Error(`Unsupported event target ${te} for event ${J}`);return this.eventManager.addEventListener(te,J,this.decoratePreventDefault(ne))}decoratePreventDefault(te){return J=>{if("__ngUnwrap__"===J)return te;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>te(J)):te(J))&&J.preventDefault()}}}function ur(ee){return"TEMPLATE"===ee.tagName&&void 0!==ee.content}class Ar extends fe{constructor(te,J,ne,Pe,Ze,dt,Jt,rn){super(te,Ze,dt,rn),this.sharedStylesHost=J,this.hostEl=ne,this.shadowRoot=ne.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Dt=Qe(Pe.id,Pe.styles);for(const Lt of Dt){const cr=document.createElement("style");Jt&&cr.setAttribute("nonce",Jt),cr.textContent=Lt,this.shadowRoot.appendChild(cr)}}nodeOrShadowRoot(te){return te===this.hostEl?this.shadowRoot:te}appendChild(te,J){return super.appendChild(this.nodeOrShadowRoot(te),J)}insertBefore(te,J,ne){return super.insertBefore(this.nodeOrShadowRoot(te),J,ne)}removeChild(te,J){return super.removeChild(this.nodeOrShadowRoot(te),J)}parentNode(te){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(te)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class lr extends fe{constructor(te,J,ne,Pe,Ze,dt,Jt,rn){super(te,Ze,dt,Jt),this.sharedStylesHost=J,this.removeStylesOnCompDestroy=Pe,this.styles=rn?Qe(rn,ne.styles):ne.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class an extends lr{constructor(te,J,ne,Pe,Ze,dt,Jt,rn){const Dt=Pe+"-"+ne.id;super(te,J,ne,Ze,dt,Jt,rn,Dt),this.contentAttr=function Ce(ee){return"_ngcontent-%COMP%".replace(pt,ee)}(Dt),this.hostAttr=function Ge(ee){return"_nghost-%COMP%".replace(pt,ee)}(Dt)}applyToHost(te){this.applyStyles(),this.setAttribute(te,this.hostAttr,"")}createElement(te,J){const ne=super.createElement(te,J);return super.setAttribute(ne,this.contentAttr,""),ne}}let It=(()=>{class ee extends et{constructor(J){super(J)}supports(J){return!0}addEventListener(J,ne,Pe){return J.addEventListener(ne,Pe,!1),()=>this.removeEventListener(J,ne,Pe)}removeEventListener(J,ne,Pe){return J.removeEventListener(ne,Pe)}static#e=this.\u0275fac=function(ne){return new(ne||ee)(w.LFG(W.K0))};static#t=this.\u0275prov=w.Yz7({token:ee,factory:ee.\u0275fac})}return ee})();const Rt=["alt","control","meta","shift"],_e={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},we={alt:ee=>ee.altKey,control:ee=>ee.ctrlKey,meta:ee=>ee.metaKey,shift:ee=>ee.shiftKey};let Ve=(()=>{class ee extends et{constructor(J){super(J)}supports(J){return null!=ee.parseEventName(J)}addEventListener(J,ne,Pe){const Ze=ee.parseEventName(ne),dt=ee.eventCallback(Ze.fullKey,Pe,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,W.q)().onAndCancel(J,Ze.domEventName,dt))}static parseEventName(J){const ne=J.toLowerCase().split("."),Pe=ne.shift();if(0===ne.length||"keydown"!==Pe&&"keyup"!==Pe)return null;const Ze=ee._normalizeKey(ne.pop());let dt="",Jt=ne.indexOf("code");if(Jt>-1&&(ne.splice(Jt,1),dt="code."),Rt.forEach(Dt=>{const Lt=ne.indexOf(Dt);Lt>-1&&(ne.splice(Lt,1),dt+=Dt+".")}),dt+=Ze,0!=ne.length||0===Ze.length)return null;const rn={};return rn.domEventName=Pe,rn.fullKey=dt,rn}static matchEventFullKeyCode(J,ne){let Pe=_e[J.key]||J.key,Ze="";return ne.indexOf("code.")>-1&&(Pe=J.code,Ze="code."),!(null==Pe||!Pe)&&(Pe=Pe.toLowerCase()," "===Pe?Pe="space":"."===Pe&&(Pe="dot"),Rt.forEach(dt=>{dt!==Pe&&(0,we[dt])(J)&&(Ze+=dt+".")}),Ze+=Pe,Ze===ne)}static eventCallback(J,ne,Pe){return Ze=>{ee.matchEventFullKeyCode(Ze,J)&&Pe.runGuarded(()=>ne(Ze))}}static _normalizeKey(J){return"esc"===J?"escape":J}static#e=this.\u0275fac=function(ne){return new(ne||ee)(w.LFG(W.K0))};static#t=this.\u0275prov=w.Yz7({token:ee,factory:ee.\u0275fac})}return ee})();const en=(0,w.eFA)(w._c5,"browser",[{provide:w.Lbi,useValue:W.bD},{provide:w.g9A,useValue:function gt(){Ee.makeCurrent()},multi:!0},{provide:W.K0,useFactory:function Pt(){return(0,w.RDi)(document),document},deps:[]}]),Ln=new w.OlP(""),sn=[{provide:w.rWj,useClass:class Ne{addToWindow(te){w.dqk.getAngularTestability=(ne,Pe=!0)=>{const Ze=te.findTestabilityInTree(ne,Pe);if(null==Ze)throw new w.vHH(5103,!1);return Ze},w.dqk.getAllAngularTestabilities=()=>te.getAllTestabilities(),w.dqk.getAllAngularRootElements=()=>te.getAllRootElements(),w.dqk.frameworkStabilizers||(w.dqk.frameworkStabilizers=[]),w.dqk.frameworkStabilizers.push(ne=>{const Pe=w.dqk.getAllAngularTestabilities();let Ze=Pe.length,dt=!1;const Jt=function(rn){dt=dt||rn,Ze--,0==Ze&&ne(dt)};Pe.forEach(rn=>{rn.whenStable(Jt)})})}findTestabilityInTree(te,J,ne){return null==J?null:te.getTestability(J)??(ne?(0,W.q)().isShadowRoot(J)?this.findTestabilityInTree(te,J.host,!0):this.findTestabilityInTree(te,J.parentElement,!0):null)}},deps:[]},{provide:w.lri,useClass:w.dDg,deps:[w.R0b,w.eoX,w.rWj]},{provide:w.dDg,useClass:w.dDg,deps:[w.R0b,w.eoX,w.rWj]}],yn=[{provide:w.zSh,useValue:"root"},{provide:w.qLn,useFactory:function mr(){return new w.qLn},deps:[]},{provide:he,useClass:It,multi:!0,deps:[W.K0,w.R0b,w.Lbi]},{provide:he,useClass:Ve,multi:!0,deps:[W.K0]},rt,ht,De,{provide:w.FYo,useExisting:rt},{provide:W.JF,useClass:ue,deps:[]},[]];let $n=(()=>{class ee{constructor(J){}static withServerTransition(J){return{ngModule:ee,providers:[{provide:w.AFp,useValue:J.appId}]}}static#e=this.\u0275fac=function(ne){return new(ne||ee)(w.LFG(Ln,12))};static#t=this.\u0275mod=w.oAB({type:ee});static#n=this.\u0275inj=w.cJS({providers:[...yn,...sn],imports:[W.ez,w.hGG]})}return ee})(),Ui=(()=>{class ee{constructor(J){this._doc=J}getTitle(){return this._doc.title}setTitle(J){this._doc.title=J||""}static#e=this.\u0275fac=function(ne){return new(ne||ee)(w.LFG(W.K0))};static#t=this.\u0275prov=w.Yz7({token:ee,factory:function(ne){let Pe=null;return Pe=ne?new ne:function Xn(){return new Ui((0,w.LFG)(W.K0))}(),Pe},providedIn:"root"})}return ee})();typeof window<"u"&&window},8878:(bt,Le,$)=>{$.d(Le,{gz:()=>Sn,wm:()=>gs,F0:()=>An,rH:()=>zs,Bz:()=>Fr,lC:()=>gi,eV:()=>Si});var w=$(5879),W=$(5592),ie=$(4674),pe=$(2459),ve=$(2096),Re=$(5619),R=$(7453),Ne=$(2737),ue=$(7400),he=$(9940),De=$(2714),et=$(8251),Ke=$(7103);function ht(...b){const N=(0,he.yG)(b),T=(0,he.jO)(b),{args:C,keys:U}=(0,R.D)(b);if(0===C.length)return(0,pe.D)([],N);const Y=new W.y(function nt(b,N,T=Ne.y){return C=>{pt(N,()=>{const{length:U}=b,Y=new Array(U);let le=U,je=U;for(let Ue=0;Ue<U;Ue++)pt(N,()=>{const Mt=(0,pe.D)(b[Ue],N);let fn=!1;Mt.subscribe((0,et.x)(C,Rn=>{Y[Ue]=Rn,fn||(fn=!0,je--),je||C.next(T(Y.slice()))},()=>{--le||C.complete()}))},C)},C)}}(C,N,U?le=>(0,De.n)(U,le):Ne.y));return T?Y.pipe((0,ue.Z)(T)):Y}function pt(b,N,T){b?(0,Ke.f)(T,b,N):N()}var ut=$(6973),Ft=$(5211),Ie=$(4911),ce=$(8407),ke=$(8504),Ce=$(6232),Ge=$(3168),Qe=$(8645),rt=$(7394),fe=$(6814),Et=$(7398),lt=$(4664),ur=$(8180),Ar=$(7921),lr=$(2181),an=$(1631),It=$(1374);function Rt(b,N){return(0,ie.m)(N)?(0,an.z)(b,N,1):(0,an.z)(b,1)}var _e=$(9397),we=$(4829),Ve=$(9360);function be(b){return(0,Ve.e)((N,T)=>{let Y,C=null,U=!1;C=N.subscribe((0,et.x)(T,void 0,void 0,le=>{Y=(0,we.Xf)(b(le,be(b)(N))),C?(C.unsubscribe(),C=null,Y.subscribe(T)):U=!0})),U&&(C.unsubscribe(),C=null,Y.subscribe(T))})}var Se=$(6699),Be=$(3572);function yt(b){return b<=0?()=>Ce.E:(0,Ve.e)((N,T)=>{let C=[];N.subscribe((0,et.x)(T,U=>{C.push(U),b<C.length&&C.shift()},()=>{for(const U of C)T.next(U);T.complete()},void 0,()=>{C=null}))})}var gt=$(3026),Pt=$(975);function wn(b){return(0,Ve.e)((N,T)=>{try{N.subscribe(T)}finally{T.add(b)}})}var en=$(6196),Ln=$(2420),yn=$(7537),$n=$(6593);const qt="primary",En=Symbol("RouteTitle");class Vr{constructor(N){this.params=N||{}}has(N){return Object.prototype.hasOwnProperty.call(this.params,N)}get(N){if(this.has(N)){const T=this.params[N];return Array.isArray(T)?T[0]:T}return null}getAll(N){if(this.has(N)){const T=this.params[N];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function Xn(b){return new Vr(b)}function Ui(b,N,T){const C=T.path.split("/");if(C.length>b.length||"full"===T.pathMatch&&(N.hasChildren()||C.length<b.length))return null;const U={};for(let Y=0;Y<C.length;Y++){const le=C[Y],je=b[Y];if(le.startsWith(":"))U[le.substring(1)]=je;else if(le!==je.path)return null}return{consumed:b.slice(0,C.length),posParams:U}}function Zn(b,N){const T=b?Object.keys(b):void 0,C=N?Object.keys(N):void 0;if(!T||!C||T.length!=C.length)return!1;let U;for(let Y=0;Y<T.length;Y++)if(U=T[Y],!Kt(b[U],N[U]))return!1;return!0}function Kt(b,N){if(Array.isArray(b)&&Array.isArray(N)){if(b.length!==N.length)return!1;const T=[...b].sort(),C=[...N].sort();return T.every((U,Y)=>C[Y]===U)}return b===N}function vn(b){return b.length>0?b[b.length-1]:null}function Bt(b){return function Ee(b){return!!b&&(b instanceof W.y||(0,ie.m)(b.lift)&&(0,ie.m)(b.subscribe))}(b)?b:(0,w.QGY)(b)?(0,pe.D)(Promise.resolve(b)):(0,ve.of)(b)}const Vn={exact:function br(b,N,T){if(!di(b.segments,N.segments)||!dn(b.segments,N.segments,T)||b.numberOfChildren!==N.numberOfChildren)return!1;for(const C in N.children)if(!b.children[C]||!br(b.children[C],N.children[C],T))return!1;return!0},subset:kt},Un={exact:function zn(b,N){return Zn(b,N)},subset:function To(b,N){return Object.keys(N).length<=Object.keys(b).length&&Object.keys(N).every(T=>Kt(b[T],N[T]))},ignored:()=>!0};function ei(b,N,T){return Vn[T.paths](b.root,N.root,T.matrixParams)&&Un[T.queryParams](b.queryParams,N.queryParams)&&!("exact"===T.fragment&&b.fragment!==N.fragment)}function kt(b,N,T){return Qi(b,N,N.segments,T)}function Qi(b,N,T,C){if(b.segments.length>T.length){const U=b.segments.slice(0,T.length);return!(!di(U,T)||N.hasChildren()||!dn(U,T,C))}if(b.segments.length===T.length){if(!di(b.segments,T)||!dn(b.segments,T,C))return!1;for(const U in N.children)if(!b.children[U]||!kt(b.children[U],N.children[U],C))return!1;return!0}{const U=T.slice(0,b.segments.length),Y=T.slice(b.segments.length);return!!(di(b.segments,U)&&dn(b.segments,U,C)&&b.children[qt])&&Qi(b.children[qt],N,Y,C)}}function dn(b,N,T){return N.every((C,U)=>Un[T](b[U].parameters,C.parameters))}class Er{constructor(N=new mn([],{}),T={},C=null){this.root=N,this.queryParams=T,this.fragment=C}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xn(this.queryParams)),this._queryParamMap}toString(){return Bi.serialize(this)}}class mn{constructor(N,T){this.segments=N,this.children=T,this.parent=null,Object.values(T).forEach(C=>C.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rr(this)}}class Yi{constructor(N,T){this.path=N,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=Xn(this.parameters)),this._parameterMap}toString(){return Pe(this)}}function di(b,N){return b.length===N.length&&b.every((T,C)=>T.path===N[C].path)}let $r=(()=>{class b{static#e=this.\u0275fac=function(C){return new(C||b)};static#t=this.\u0275prov=w.Yz7({token:b,factory:function(){return new Ti},providedIn:"root"})}return b})();class Ti{parse(N){const T=new qe(N);return new Er(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(N){const T=`/${xr(N.root,!0)}`,C=function dt(b){const N=Object.keys(b).map(T=>{const C=b[T];return Array.isArray(C)?C.map(U=>`${me(T)}=${me(U)}`).join("&"):`${me(T)}=${me(C)}`}).filter(T=>!!T);return N.length?`?${N.join("&")}`:""}(N.queryParams);return`${T}${C}${"string"==typeof N.fragment?`#${function ee(b){return encodeURI(b)}(N.fragment)}`:""}`}}const Bi=new Ti;function rr(b){return b.segments.map(N=>Pe(N)).join("/")}function xr(b,N){if(!b.hasChildren())return rr(b);if(N){const T=b.children[qt]?xr(b.children[qt],!1):"",C=[];return Object.entries(b.children).forEach(([U,Y])=>{U!==qt&&C.push(`${U}:${xr(Y,!1)}`)}),C.length>0?`${T}(${C.join("//")})`:T}{const T=function Ur(b,N){let T=[];return Object.entries(b.children).forEach(([C,U])=>{C===qt&&(T=T.concat(N(U,C)))}),Object.entries(b.children).forEach(([C,U])=>{C!==qt&&(T=T.concat(N(U,C)))}),T}(b,(C,U)=>U===qt?[xr(b.children[qt],!1)]:[`${U}:${xr(C,!1)}`]);return 1===Object.keys(b.children).length&&null!=b.children[qt]?`${rr(b)}/${T[0]}`:`${rr(b)}/(${T.join("//")})`}}function us(b){return encodeURIComponent(b).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function me(b){return us(b).replace(/%3B/gi,";")}function te(b){return us(b).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function J(b){return decodeURIComponent(b)}function ne(b){return J(b.replace(/\+/g,"%20"))}function Pe(b){return`${te(b.path)}${function Ze(b){return Object.keys(b).map(N=>`;${te(N)}=${te(b[N])}`).join("")}(b.parameters)}`}const Jt=/^[^\/()?;#]+/;function rn(b){const N=b.match(Jt);return N?N[0]:""}const Dt=/^[^\/()?;=#]+/,cr=/^[^=?&#]+/,Co=/^[^&#]+/;class qe{constructor(N){this.url=N,this.remaining=N}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new mn([],{}):new mn([],this.parseChildren())}parseQueryParams(){const N={};if(this.consumeOptional("?"))do{this.parseQueryParam(N)}while(this.consumeOptional("&"));return N}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const N=[];for(this.peekStartsWith("(")||N.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),N.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let C={};return this.peekStartsWith("(")&&(C=this.parseParens(!1)),(N.length>0||Object.keys(T).length>0)&&(C[qt]=new mn(N,T)),C}parseSegment(){const N=rn(this.remaining);if(""===N&&this.peekStartsWith(";"))throw new w.vHH(4009,!1);return this.capture(N),new Yi(J(N),this.parseMatrixParams())}parseMatrixParams(){const N={};for(;this.consumeOptional(";");)this.parseParam(N);return N}parseParam(N){const T=function Lt(b){const N=b.match(Dt);return N?N[0]:""}(this.remaining);if(!T)return;this.capture(T);let C="";if(this.consumeOptional("=")){const U=rn(this.remaining);U&&(C=U,this.capture(C))}N[J(T)]=J(C)}parseQueryParam(N){const T=function Ci(b){const N=b.match(cr);return N?N[0]:""}(this.remaining);if(!T)return;this.capture(T);let C="";if(this.consumeOptional("=")){const le=function Ua(b){const N=b.match(Co);return N?N[0]:""}(this.remaining);le&&(C=le,this.capture(C))}const U=ne(T),Y=ne(C);if(N.hasOwnProperty(U)){let le=N[U];Array.isArray(le)||(le=[le],N[U]=le),le.push(Y)}else N[U]=Y}parseParens(N){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const C=rn(this.remaining),U=this.remaining[C.length];if("/"!==U&&")"!==U&&";"!==U)throw new w.vHH(4010,!1);let Y;C.indexOf(":")>-1?(Y=C.slice(0,C.indexOf(":")),this.capture(Y),this.capture(":")):N&&(Y=qt);const le=this.parseChildren();T[Y]=1===Object.keys(le).length?le[qt]:new mn([],le),this.consumeOptional("//")}return T}peekStartsWith(N){return this.remaining.startsWith(N)}consumeOptional(N){return!!this.peekStartsWith(N)&&(this.remaining=this.remaining.substring(N.length),!0)}capture(N){if(!this.consumeOptional(N))throw new w.vHH(4011,!1)}}function Oe(b){return b.segments.length>0?new mn([],{[qt]:b}):b}function st(b){const N={};for(const C of Object.keys(b.children)){const Y=st(b.children[C]);if(C===qt&&0===Y.segments.length&&Y.hasChildren())for(const[le,je]of Object.entries(Y.children))N[le]=je;else(Y.segments.length>0||Y.hasChildren())&&(N[C]=Y)}return function Ht(b){if(1===b.numberOfChildren&&b.children[qt]){const N=b.children[qt];return new mn(b.segments.concat(N.segments),N.children)}return b}(new mn(b.segments,N))}function Zt(b){return b instanceof Er}function Xt(b){let N;const U=Oe(function T(Y){const le={};for(const Ue of Y.children){const Mt=T(Ue);le[Ue.outlet]=Mt}const je=new mn(Y.url,le);return Y===b&&(N=je),je}(b.root));return N??U}function Gn(b,N,T,C){let U=b;for(;U.parent;)U=U.parent;if(0===N.length)return ti(U,U,U,T,C);const Y=function Qs(b){if("string"==typeof b[0]&&1===b.length&&"/"===b[0])return new Do(!0,0,b);let N=0,T=!1;const C=b.reduce((U,Y,le)=>{if("object"==typeof Y&&null!=Y){if(Y.outlets){const je={};return Object.entries(Y.outlets).forEach(([Ue,Mt])=>{je[Ue]="string"==typeof Mt?Mt.split("/"):Mt}),[...U,{outlets:je}]}if(Y.segmentPath)return[...U,Y.segmentPath]}return"string"!=typeof Y?[...U,Y]:0===le?(Y.split("/").forEach((je,Ue)=>{0==Ue&&"."===je||(0==Ue&&""===je?T=!0:".."===je?N++:""!=je&&U.push(je))}),U):[...U,Y]},[]);return new Do(T,N,C)}(N);if(Y.toRoot())return ti(U,U,new mn([],{}),T,C);const le=function Js(b,N,T){if(b.isAbsolute)return new Ys(N,!0,0);if(!T)return new Ys(N,!1,NaN);if(null===T.parent)return new Ys(T,!0,0);const C=Wn(b.commands[0])?0:1;return function Qo(b,N,T){let C=b,U=N,Y=T;for(;Y>U;){if(Y-=U,C=C.parent,!C)throw new w.vHH(4005,!1);U=C.segments.length}return new Ys(C,!1,U-Y)}(T,T.segments.length-1+C,b.numberOfDoubleDots)}(Y,U,b),je=le.processChildren?Di(le.segmentGroup,le.index,Y.commands):Yo(le.segmentGroup,le.index,Y.commands);return ti(U,le.segmentGroup,je,T,C)}function Wn(b){return"object"==typeof b&&null!=b&&!b.outlets&&!b.segmentPath}function ii(b){return"object"==typeof b&&null!=b&&b.outlets}function ti(b,N,T,C,U){let le,Y={};C&&Object.entries(C).forEach(([Ue,Mt])=>{Y[Ue]=Array.isArray(Mt)?Mt.map(fn=>`${fn}`):`${Mt}`}),le=b===N?T:ls(b,N,T);const je=Oe(st(le));return new Er(je,Y,U)}function ls(b,N,T){const C={};return Object.entries(b.children).forEach(([U,Y])=>{C[U]=Y===N?T:ls(Y,N,T)}),new mn(b.segments,C)}class Do{constructor(N,T,C){if(this.isAbsolute=N,this.numberOfDoubleDots=T,this.commands=C,N&&C.length>0&&Wn(C[0]))throw new w.vHH(4003,!1);const U=C.find(ii);if(U&&U!==vn(C))throw new w.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ys{constructor(N,T,C){this.segmentGroup=N,this.processChildren=T,this.index=C}}function Yo(b,N,T){if(b||(b=new mn([],{})),0===b.segments.length&&b.hasChildren())return Di(b,N,T);const C=function Ji(b,N,T){let C=0,U=N;const Y={match:!1,pathIndex:0,commandIndex:0};for(;U<b.segments.length;){if(C>=T.length)return Y;const le=b.segments[U],je=T[C];if(ii(je))break;const Ue=`${je}`,Mt=C<T.length-1?T[C+1]:null;if(U>0&&void 0===Ue)break;if(Ue&&Mt&&"object"==typeof Mt&&void 0===Mt.outlets){if(!kr(Ue,Mt,le))return Y;C+=2}else{if(!kr(Ue,{},le))return Y;C++}U++}return{match:!0,pathIndex:U,commandIndex:C}}(b,N,T),U=T.slice(C.commandIndex);if(C.match&&C.pathIndex<b.segments.length){const Y=new mn(b.segments.slice(0,C.pathIndex),{});return Y.children[qt]=new mn(b.segments.slice(C.pathIndex),b.children),Di(Y,0,U)}return C.match&&0===U.length?new mn(b.segments,{}):C.match&&!b.hasChildren()?Ao(b,N,T):C.match?Di(b,0,U):Ao(b,N,T)}function Di(b,N,T){if(0===T.length)return new mn(b.segments,{});{const C=function Fn(b){return ii(b[0])?b[0].outlets:{[qt]:b}}(T),U={};if(Object.keys(C).some(Y=>Y!==qt)&&b.children[qt]&&1===b.numberOfChildren&&0===b.children[qt].segments.length){const Y=Di(b.children[qt],N,T);return new mn(b.segments,Y.children)}return Object.entries(C).forEach(([Y,le])=>{"string"==typeof le&&(le=[le]),null!==le&&(U[Y]=Yo(b.children[Y],N,le))}),Object.entries(b.children).forEach(([Y,le])=>{void 0===C[Y]&&(U[Y]=le)}),new mn(b.segments,U)}}function Ao(b,N,T){const C=b.segments.slice(0,N);let U=0;for(;U<T.length;){const Y=T[U];if(ii(Y)){const Ue=Xi(Y.outlets);return new mn(C,Ue)}if(0===U&&Wn(T[0])){C.push(new Yi(b.segments[N].path,mo(T[0]))),U++;continue}const le=ii(Y)?Y.outlets[qt]:`${Y}`,je=U<T.length-1?T[U+1]:null;le&&je&&Wn(je)?(C.push(new Yi(le,mo(je))),U+=2):(C.push(new Yi(le,{})),U++)}return new mn(C,{})}function Xi(b){const N={};return Object.entries(b).forEach(([T,C])=>{"string"==typeof C&&(C=[C]),null!==C&&(N[T]=Ao(new mn([],{}),0,C))}),N}function mo(b){const N={};return Object.entries(b).forEach(([T,C])=>N[T]=`${C}`),N}function kr(b,N,T){return b==T.path&&Zn(N,T.parameters)}const zr="imperative";class hi{constructor(N,T){this.id=N,this.url=T}}class ws extends hi{constructor(N,T,C="imperative",U=null){super(N,T),this.type=0,this.navigationTrigger=C,this.restoredState=U}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ni extends hi{constructor(N,T,C){super(N,T),this.urlAfterRedirects=C,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class cs extends hi{constructor(N,T,C,U){super(N,T),this.reason=C,this.code=U,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Xs extends hi{constructor(N,T,C,U){super(N,T),this.reason=C,this.code=U,this.type=16}}class Gr extends hi{constructor(N,T,C,U){super(N,T),this.error=C,this.target=U,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class mu extends hi{constructor(N,T,C,U){super(N,T),this.urlAfterRedirects=C,this.state=U,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fi extends hi{constructor(N,T,C,U){super(N,T),this.urlAfterRedirects=C,this.state=U,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fo extends hi{constructor(N,T,C,U,Y){super(N,T),this.urlAfterRedirects=C,this.state=U,this.shouldActivate=Y,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _o extends hi{constructor(N,T,C,U){super(N,T),this.urlAfterRedirects=C,this.state=U,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jo extends hi{constructor(N,T,C,U){super(N,T),this.urlAfterRedirects=C,this.state=U,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _u{constructor(N){this.route=N,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ba{constructor(N){this.route=N,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xi{constructor(N){this.snapshot=N,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ja{constructor(N){this.snapshot=N,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xo{constructor(N){this.snapshot=N,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wr{constructor(N){this.snapshot=N,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fs{constructor(N,T,C){this.routerEvent=N,this.position=T,this.anchor=C,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Tn{}class er{constructor(N){this.url=N}}class eo{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new qr,this.attachRef=null}}let qr=(()=>{class b{constructor(){this.contexts=new Map}onChildOutletCreated(T,C){const U=this.getOrCreateContext(T);U.outlet=C,this.contexts.set(T,U)}onChildOutletDestroyed(T){const C=this.getContext(T);C&&(C.outlet=null,C.attachRef=null)}onOutletDeactivated(){const T=this.contexts;return this.contexts=new Map,T}onOutletReAttached(T){this.contexts=T}getOrCreateContext(T){let C=this.getContext(T);return C||(C=new eo,this.contexts.set(T,C)),C}getContext(T){return this.contexts.get(T)||null}static#e=this.\u0275fac=function(C){return new(C||b)};static#t=this.\u0275prov=w.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})();class Br{constructor(N){this._root=N}get root(){return this._root.value}parent(N){const T=this.pathFromRoot(N);return T.length>1?T[T.length-2]:null}children(N){const T=Ls(N,this._root);return T?T.children.map(C=>C.value):[]}firstChild(N){const T=Ls(N,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(N){const T=Vs(N,this._root);return T.length<2?[]:T[T.length-2].children.map(U=>U.value).filter(U=>U!==N)}pathFromRoot(N){return Vs(N,this._root).map(T=>T.value)}}function Ls(b,N){if(b===N.value)return N;for(const T of N.children){const C=Ls(b,T);if(C)return C}return null}function Vs(b,N){if(b===N.value)return[N];for(const T of N.children){const C=Vs(b,T);if(C.length)return C.unshift(N),C}return[]}class Ts{constructor(N,T){this.value=N,this.children=T}toString(){return`TreeNode(${this.value})`}}function Cs(b){const N={};return b&&b.children.forEach(T=>N[T.value.outlet]=T),N}class dr extends Br{constructor(N,T){super(N),this.snapshot=T,hr(this,N)}toString(){return this.snapshot.toString()}}function vt(b,N){const T=function hn(b,N){const le=new pi([],{},{},"",{},qt,N,null,{});return new to("",new Ts(le,[]))}(0,N),C=new Re.X([new Yi("",{})]),U=new Re.X({}),Y=new Re.X({}),le=new Re.X({}),je=new Re.X(""),Ue=new Sn(C,U,le,je,Y,qt,N,T.root);return Ue.snapshot=T.root,new dr(new Ts(Ue,[]),T)}class Sn{constructor(N,T,C,U,Y,le,je,Ue){this.urlSubject=N,this.paramsSubject=T,this.queryParamsSubject=C,this.fragmentSubject=U,this.dataSubject=Y,this.outlet=le,this.component=je,this._futureSnapshot=Ue,this.title=this.dataSubject?.pipe((0,Et.U)(Mt=>Mt[En]))??(0,ve.of)(void 0),this.url=N,this.params=T,this.queryParams=C,this.fragment=U,this.data=Y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Et.U)(N=>Xn(N)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Et.U)(N=>Xn(N)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Kr(b,N="emptyOnly"){const T=b.pathFromRoot;let C=0;if("always"!==N)for(C=T.length-1;C>=1;){const U=T[C],Y=T[C-1];if(U.routeConfig&&""===U.routeConfig.path)C--;else{if(Y.component)break;C--}}return function bo(b){return b.reduce((N,T)=>({params:{...N.params,...T.params},data:{...N.data,...T.data},resolve:{...T.data,...N.resolve,...T.routeConfig?.data,...T._resolvedData}}),{params:{},data:{},resolve:{}})}(T.slice(C))}class pi{get title(){return this.data?.[En]}constructor(N,T,C,U,Y,le,je,Ue,Mt){this.url=N,this.params=T,this.queryParams=C,this.fragment=U,this.data=Y,this.outlet=le,this.component=je,this.routeConfig=Ue,this._resolve=Mt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Xn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(C=>C.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class to extends Br{constructor(N,T){super(T),this.url=N,hr(this,T)}toString(){return ji(this._root)}}function hr(b,N){N.value._routerState=b,N.children.forEach(T=>hr(b,T))}function ji(b){const N=b.children.length>0?` { ${b.children.map(ji).join(", ")} } `:"";return`${b.value}${N}`}function Hi(b){if(b.snapshot){const N=b.snapshot,T=b._futureSnapshot;b.snapshot=T,Zn(N.queryParams,T.queryParams)||b.queryParamsSubject.next(T.queryParams),N.fragment!==T.fragment&&b.fragmentSubject.next(T.fragment),Zn(N.params,T.params)||b.paramsSubject.next(T.params),function Oi(b,N){if(b.length!==N.length)return!1;for(let T=0;T<b.length;++T)if(!Zn(b[T],N[T]))return!1;return!0}(N.url,T.url)||b.urlSubject.next(T.url),Zn(N.data,T.data)||b.dataSubject.next(T.data)}else b.snapshot=b._futureSnapshot,b.dataSubject.next(b._futureSnapshot.data)}function $t(b,N){const T=Zn(b.params,N.params)&&function Hr(b,N){return di(b,N)&&b.every((T,C)=>Zn(T.parameters,N[C].parameters))}(b.url,N.url);return T&&!(!b.parent!=!N.parent)&&(!b.parent||$t(b.parent,N.parent))}let gi=(()=>{class b{constructor(){this.activated=null,this._activatedRoute=null,this.name=qt,this.activateEvents=new w.vpe,this.deactivateEvents=new w.vpe,this.attachEvents=new w.vpe,this.detachEvents=new w.vpe,this.parentContexts=(0,w.f3M)(qr),this.location=(0,w.f3M)(w.s_b),this.changeDetector=(0,w.f3M)(w.sBO),this.environmentInjector=(0,w.f3M)(w.lqb),this.inputBinder=(0,w.f3M)(jr,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(T){if(T.name){const{firstChange:C,previousValue:U}=T.name;if(C)return;this.isTrackedInParentContexts(U)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(U)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(T){return this.parentContexts.getContext(T)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const T=this.parentContexts.getContext(this.name);T?.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new w.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new w.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new w.vHH(4012,!1);this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,C){this.activated=T,this._activatedRoute=C,this.location.insert(T.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,C){if(this.isActivated)throw new w.vHH(4013,!1);this._activatedRoute=T;const U=this.location,le=T.snapshot.component,je=this.parentContexts.getOrCreateContext(this.name).children,Ue=new ea(T,je,U.injector);this.activated=U.createComponent(le,{index:U.length,injector:Ue,environmentInjector:C??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(C){return new(C||b)};static#t=this.\u0275dir=w.lG2({type:b,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[w.TTD]})}return b})();class ea{constructor(N,T,C){this.route=N,this.childContexts=T,this.parent=C}get(N,T){return N===Sn?this.route:N===qr?this.childContexts:this.parent.get(N,T)}}const jr=new w.OlP("");let Or=(()=>{class b{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(T){this.unsubscribeFromRouteData(T),this.subscribeToRouteData(T)}unsubscribeFromRouteData(T){this.outletDataSubscriptions.get(T)?.unsubscribe(),this.outletDataSubscriptions.delete(T)}subscribeToRouteData(T){const{activatedRoute:C}=T,U=ht([C.queryParams,C.params,C.data]).pipe((0,lt.w)(([Y,le,je],Ue)=>(je={...Y,...le,...je},0===Ue?(0,ve.of)(je):Promise.resolve(je)))).subscribe(Y=>{if(!T.isActivated||!T.activatedComponentRef||T.activatedRoute!==C||null===C.component)return void this.unsubscribeFromRouteData(T);const le=(0,w.qFp)(C.component);if(le)for(const{templateName:je}of le.inputs)T.activatedComponentRef.setInput(je,Y[je]);else this.unsubscribeFromRouteData(T)});this.outletDataSubscriptions.set(T,U)}static#e=this.\u0275fac=function(C){return new(C||b)};static#t=this.\u0275prov=w.Yz7({token:b,factory:b.\u0275fac})}return b})();function $i(b,N,T){if(T&&b.shouldReuseRoute(N.value,T.value.snapshot)){const C=T.value;C._futureSnapshot=N.value;const U=function mi(b,N,T){return N.children.map(C=>{for(const U of T.children)if(b.shouldReuseRoute(C.value,U.value.snapshot))return $i(b,C,U);return $i(b,C)})}(b,N,T);return new Ts(C,U)}{if(b.shouldAttach(N.value)){const Y=b.retrieve(N.value);if(null!==Y){const le=Y.route;return le.value._futureSnapshot=N.value,le.children=N.children.map(je=>$i(b,je)),le}}const C=function Us(b){return new Sn(new Re.X(b.url),new Re.X(b.params),new Re.X(b.queryParams),new Re.X(b.fragment),new Re.X(b.data),b.outlet,b.component,b)}(N.value),U=N.children.map(Y=>$i(b,Y));return new Ts(C,U)}}const Lo="ngNavigationCancelingError";function Ds(b,N){const{redirectTo:T,navigationBehaviorOptions:C}=Zt(N)?{redirectTo:N,navigationBehaviorOptions:void 0}:N,U=es(!1,0,N);return U.url=T,U.navigationBehaviorOptions=C,U}function es(b,N,T){const C=new Error("NavigationCancelingError: "+(b||""));return C[Lo]=!0,C.cancellationCode=N,T&&(C.url=T),C}function zi(b){return b&&b[Lo]}let Dn=(()=>{class b{static#e=this.\u0275fac=function(C){return new(C||b)};static#t=this.\u0275cmp=w.Xpm({type:b,selectors:[["ng-component"]],standalone:!0,features:[w.jDz],decls:1,vars:0,template:function(C,U){1&C&&w._UZ(0,"router-outlet")},dependencies:[gi],encapsulation:2})}return b})();function oi(b){const N=b.children&&b.children.map(oi),T=N?{...b,children:N}:{...b};return!T.component&&!T.loadComponent&&(N||T.loadChildren)&&T.outlet&&T.outlet!==qt&&(T.component=Dn),T}function fr(b){return b.outlet||qt}function bs(b){if(!b)return null;if(b.routeConfig?._injector)return b.routeConfig._injector;for(let N=b.parent;N;N=N.parent){const T=N.routeConfig;if(T?._loadedInjector)return T._loadedInjector;if(T?._injector)return T._injector}return null}class _a{constructor(N,T,C,U,Y){this.routeReuseStrategy=N,this.futureState=T,this.currState=C,this.forwardEvent=U,this.inputBindingEnabled=Y}activate(N){const T=this.futureState._root,C=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,C,N),Hi(this.futureState.root),this.activateChildRoutes(T,C,N)}deactivateChildRoutes(N,T,C){const U=Cs(T);N.children.forEach(Y=>{const le=Y.value.outlet;this.deactivateRoutes(Y,U[le],C),delete U[le]}),Object.values(U).forEach(Y=>{this.deactivateRouteAndItsChildren(Y,C)})}deactivateRoutes(N,T,C){const U=N.value,Y=T?T.value:null;if(U===Y)if(U.component){const le=C.getContext(U.outlet);le&&this.deactivateChildRoutes(N,T,le.children)}else this.deactivateChildRoutes(N,T,C);else Y&&this.deactivateRouteAndItsChildren(T,C)}deactivateRouteAndItsChildren(N,T){N.value.component&&this.routeReuseStrategy.shouldDetach(N.value.snapshot)?this.detachAndStoreRouteSubtree(N,T):this.deactivateRouteAndOutlet(N,T)}detachAndStoreRouteSubtree(N,T){const C=T.getContext(N.value.outlet),U=C&&N.value.component?C.children:T,Y=Cs(N);for(const le of Object.keys(Y))this.deactivateRouteAndItsChildren(Y[le],U);if(C&&C.outlet){const le=C.outlet.detach(),je=C.children.onOutletDeactivated();this.routeReuseStrategy.store(N.value.snapshot,{componentRef:le,route:N,contexts:je})}}deactivateRouteAndOutlet(N,T){const C=T.getContext(N.value.outlet),U=C&&N.value.component?C.children:T,Y=Cs(N);for(const le of Object.keys(Y))this.deactivateRouteAndItsChildren(Y[le],U);C&&(C.outlet&&(C.outlet.deactivate(),C.children.onOutletDeactivated()),C.attachRef=null,C.route=null)}activateChildRoutes(N,T,C){const U=Cs(T);N.children.forEach(Y=>{this.activateRoutes(Y,U[Y.value.outlet],C),this.forwardEvent(new Wr(Y.value.snapshot))}),N.children.length&&this.forwardEvent(new ja(N.value.snapshot))}activateRoutes(N,T,C){const U=N.value,Y=T?T.value:null;if(Hi(U),U===Y)if(U.component){const le=C.getOrCreateContext(U.outlet);this.activateChildRoutes(N,T,le.children)}else this.activateChildRoutes(N,T,C);else if(U.component){const le=C.getOrCreateContext(U.outlet);if(this.routeReuseStrategy.shouldAttach(U.snapshot)){const je=this.routeReuseStrategy.retrieve(U.snapshot);this.routeReuseStrategy.store(U.snapshot,null),le.children.onOutletReAttached(je.contexts),le.attachRef=je.componentRef,le.route=je.route.value,le.outlet&&le.outlet.attach(je.componentRef,je.route.value),Hi(je.route.value),this.activateChildRoutes(N,null,le.children)}else{const je=bs(U.snapshot);le.attachRef=null,le.route=U,le.injector=je,le.outlet&&le.outlet.activateWith(U,le.injector),this.activateChildRoutes(N,null,le.children)}}else this.activateChildRoutes(N,null,C)}}class Ha{constructor(N){this.path=N,this.route=this.path[this.path.length-1]}}class Ai{constructor(N,T){this.component=N,this.route=T}}function $a(b,N,T){const C=b._root;return Ir(C,N?N._root:null,T,[C.value])}function rs(b,N){const T=Symbol(),C=N.get(b,T);return C===T?"function"!=typeof b||(0,w.Z0I)(b)?N.get(b):b:C}function Ir(b,N,T,C,U={canDeactivateChecks:[],canActivateChecks:[]}){const Y=Cs(N);return b.children.forEach(le=>{(function ya(b,N,T,C,U={canDeactivateChecks:[],canActivateChecks:[]}){const Y=b.value,le=N?N.value:null,je=T?T.getContext(b.value.outlet):null;if(le&&Y.routeConfig===le.routeConfig){const Ue=function va(b,N,T){if("function"==typeof T)return T(b,N);switch(T){case"pathParamsChange":return!di(b.url,N.url);case"pathParamsOrQueryParamsChange":return!di(b.url,N.url)||!Zn(b.queryParams,N.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$t(b,N)||!Zn(b.queryParams,N.queryParams);default:return!$t(b,N)}}(le,Y,Y.routeConfig.runGuardsAndResolvers);Ue?U.canActivateChecks.push(new Ha(C)):(Y.data=le.data,Y._resolvedData=le._resolvedData),Ir(b,N,Y.component?je?je.children:null:T,C,U),Ue&&je&&je.outlet&&je.outlet.isActivated&&U.canDeactivateChecks.push(new Ai(je.outlet.component,le))}else le&&_r(N,je,U),U.canActivateChecks.push(new Ha(C)),Ir(b,null,Y.component?je?je.children:null:T,C,U)})(le,Y[le.value.outlet],T,C.concat([le.value]),U),delete Y[le.value.outlet]}),Object.entries(Y).forEach(([le,je])=>_r(je,T.getContext(le),U)),U}function _r(b,N,T){const C=Cs(b),U=b.value;Object.entries(C).forEach(([Y,le])=>{_r(le,U.component?N?N.children.getContext(Y):null:N,T)}),T.canDeactivateChecks.push(new Ai(U.component&&N&&N.outlet&&N.outlet.isActivated?N.outlet.component:null,U))}function js(b){return"function"==typeof b}function Vo(b){return b instanceof ut.K||"EmptyError"===b?.name}const Uo=Symbol("INITIAL_VALUE");function Hs(){return(0,lt.w)(b=>ht(b.map(N=>N.pipe((0,ur.q)(1),(0,Ar.O)(Uo)))).pipe((0,Et.U)(N=>{for(const T of N)if(!0!==T){if(T===Uo)return Uo;if(!1===T||T instanceof Er)return T}return!0}),(0,lr.h)(N=>N!==Uo),(0,ur.q)(1)))}function Bo(b){return(0,ce.z)((0,_e.b)(N=>{if(Zt(N))throw Ds(0,N)}),(0,Et.U)(N=>!0===N))}class $s{constructor(N){this.segmentGroup=N||null}}class Ia{constructor(N){this.urlTree=N}}function So(b){return(0,ke._)(new $s(b))}function ro(b){return(0,ke._)(new Ia(b))}class yu{constructor(N,T){this.urlSerializer=N,this.urlTree=T}noMatchError(N){return new w.vHH(4002,!1)}lineralizeSegments(N,T){let C=[],U=T.root;for(;;){if(C=C.concat(U.segments),0===U.numberOfChildren)return(0,ve.of)(C);if(U.numberOfChildren>1||!U.children[qt])return(0,ke._)(new w.vHH(4e3,!1));U=U.children[qt]}}applyRedirectCommands(N,T,C){return this.applyRedirectCreateUrlTree(T,this.urlSerializer.parse(T),N,C)}applyRedirectCreateUrlTree(N,T,C,U){const Y=this.createSegmentGroup(N,T.root,C,U);return new Er(Y,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(N,T){const C={};return Object.entries(N).forEach(([U,Y])=>{if("string"==typeof Y&&Y.startsWith(":")){const je=Y.substring(1);C[U]=T[je]}else C[U]=Y}),C}createSegmentGroup(N,T,C,U){const Y=this.createSegments(N,T.segments,C,U);let le={};return Object.entries(T.children).forEach(([je,Ue])=>{le[je]=this.createSegmentGroup(N,Ue,C,U)}),new mn(Y,le)}createSegments(N,T,C,U){return T.map(Y=>Y.path.startsWith(":")?this.findPosParam(N,Y,U):this.findOrReturn(Y,C))}findPosParam(N,T,C){const U=C[T.path.substring(1)];if(!U)throw new w.vHH(4001,!1);return U}findOrReturn(N,T){let C=0;for(const U of T){if(U.path===N.path)return T.splice(C),U;C++}return N}}const Ro={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function aa(b,N,T,C,U){const Y=ps(b,N,T);return Y.matched?(C=function ta(b,N){return b.providers&&!b._injector&&(b._injector=(0,w.MMx)(b.providers,N,`Route: ${b.path}`)),b._injector??N}(N,C),function oa(b,N,T,C){const U=N.canMatch;if(!U||0===U.length)return(0,ve.of)(!0);const Y=U.map(le=>{const je=rs(le,b);return Bt(function ia(b){return b&&js(b.canMatch)}(je)?je.canMatch(N,T):b.runInContext(()=>je(N,T)))});return(0,ve.of)(Y).pipe(Hs(),Bo())}(C,N,T).pipe((0,Et.U)(le=>!0===le?Y:{...Ro}))):(0,ve.of)(Y)}function ps(b,N,T){if(""===N.path)return"full"===N.pathMatch&&(b.hasChildren()||T.length>0)?{...Ro}:{matched:!0,consumedSegments:[],remainingSegments:T,parameters:{},positionalParamSegments:{}};const U=(N.matcher||Ui)(T,b,N);if(!U)return{...Ro};const Y={};Object.entries(U.posParams??{}).forEach(([je,Ue])=>{Y[je]=Ue.path});const le=U.consumed.length>0?{...Y,...U.consumed[U.consumed.length-1].parameters}:Y;return{matched:!0,consumedSegments:U.consumed,remainingSegments:T.slice(U.consumed.length),parameters:le,positionalParamSegments:U.posParams??{}}}function Ei(b,N,T,C){return T.length>0&&function Rs(b,N,T){return T.some(C=>Ta(b,N,C)&&fr(C)!==qt)}(b,T,C)?{segmentGroup:new mn(N,jo(C,new mn(T,b.children))),slicedSegments:[]}:0===T.length&&function hl(b,N,T){return T.some(C=>Ta(b,N,C))}(b,T,C)?{segmentGroup:new mn(b.segments,Zr(b,0,T,C,b.children)),slicedSegments:T}:{segmentGroup:new mn(b.segments,b.children),slicedSegments:T}}function Zr(b,N,T,C,U){const Y={};for(const le of C)if(Ta(b,T,le)&&!U[fr(le)]){const je=new mn([],{});Y[fr(le)]=je}return{...U,...Y}}function jo(b,N){const T={};T[qt]=N;for(const C of b)if(""===C.path&&fr(C)!==qt){const U=new mn([],{});T[fr(C)]=U}return T}function Ta(b,N,T){return(!(b.hasChildren()||N.length>0)||"full"!==T.pathMatch)&&""===T.path}class ua{constructor(N,T,C,U,Y,le,je){this.injector=N,this.configLoader=T,this.rootComponentType=C,this.config=U,this.urlTree=Y,this.paramsInheritanceStrategy=le,this.urlSerializer=je,this.allowRedirects=!0,this.applyRedirects=new yu(this.urlSerializer,this.urlTree)}noMatchError(N){return new w.vHH(4002,!1)}recognize(){const N=Ei(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,N,qt).pipe(be(T=>{if(T instanceof Ia)return this.allowRedirects=!1,this.urlTree=T.urlTree,this.match(T.urlTree);throw T instanceof $s?this.noMatchError(T):T}),(0,Et.U)(T=>{const C=new pi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,{}),U=new Ts(C,T),Y=new to("",U),le=function Tt(b,N,T=null,C=null){return Gn(Xt(b),N,T,C)}(C,[],this.urlTree.queryParams,this.urlTree.fragment);return le.queryParams=this.urlTree.queryParams,Y.url=this.urlSerializer.serialize(le),this.inheritParamsAndData(Y._root),{state:Y,tree:le}}))}match(N){return this.processSegmentGroup(this.injector,this.config,N.root,qt).pipe(be(C=>{throw C instanceof $s?this.noMatchError(C):C}))}inheritParamsAndData(N){const T=N.value,C=Kr(T,this.paramsInheritanceStrategy);T.params=Object.freeze(C.params),T.data=Object.freeze(C.data),N.children.forEach(U=>this.inheritParamsAndData(U))}processSegmentGroup(N,T,C,U){return 0===C.segments.length&&C.hasChildren()?this.processChildren(N,T,C):this.processSegment(N,T,C,C.segments,U,!0)}processChildren(N,T,C){const U=[];for(const Y of Object.keys(C.children))"primary"===Y?U.unshift(Y):U.push(Y);return(0,pe.D)(U).pipe(Rt(Y=>{const le=C.children[Y],je=function As(b,N){const T=b.filter(C=>fr(C)===N);return T.push(...b.filter(C=>fr(C)!==N)),T}(T,Y);return this.processSegmentGroup(N,je,le,Y)}),(0,Se.R)((Y,le)=>(Y.push(...le),Y)),(0,Be.d)(null),function mr(b,N){const T=arguments.length>=2;return C=>C.pipe(b?(0,lr.h)((U,Y)=>b(U,Y,C)):Ne.y,yt(1),T?(0,Be.d)(N):(0,gt.T)(()=>new ut.K))}(),(0,an.z)(Y=>{if(null===Y)return So(C);const le=fl(Y);return function $u(b){b.sort((N,T)=>N.value.outlet===qt?-1:T.value.outlet===qt?1:N.value.outlet.localeCompare(T.value.outlet))}(le),(0,ve.of)(le)}))}processSegment(N,T,C,U,Y,le){return(0,pe.D)(T).pipe(Rt(je=>this.processSegmentAgainstRoute(je._injector??N,T,je,C,U,Y,le).pipe(be(Ue=>{if(Ue instanceof $s)return(0,ve.of)(null);throw Ue}))),(0,It.P)(je=>!!je),be(je=>{if(Vo(je))return function vu(b,N,T){return 0===N.length&&!b.children[T]}(C,U,Y)?(0,ve.of)([]):So(C);throw je}))}processSegmentAgainstRoute(N,T,C,U,Y,le,je){return function Za(b,N,T,C){return!!(fr(b)===C||C!==qt&&Ta(N,T,b))&&("**"===b.path||ps(N,b,T).matched)}(C,U,Y,le)?void 0===C.redirectTo?this.matchSegmentAgainstRoute(N,U,C,Y,le,je):je&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(N,U,T,C,Y,le):So(U):So(U)}expandSegmentAgainstRouteUsingRedirect(N,T,C,U,Y,le){return"**"===U.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(N,C,U,le):this.expandRegularSegmentAgainstRouteUsingRedirect(N,T,C,U,Y,le)}expandWildCardWithParamsAgainstRouteUsingRedirect(N,T,C,U){const Y=this.applyRedirects.applyRedirectCommands([],C.redirectTo,{});return C.redirectTo.startsWith("/")?ro(Y):this.applyRedirects.lineralizeSegments(C,Y).pipe((0,an.z)(le=>{const je=new mn(le,{});return this.processSegment(N,T,je,le,U,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(N,T,C,U,Y,le){const{matched:je,consumedSegments:Ue,remainingSegments:Mt,positionalParamSegments:fn}=ps(T,U,Y);if(!je)return So(T);const Rn=this.applyRedirects.applyRedirectCommands(Ue,U.redirectTo,fn);return U.redirectTo.startsWith("/")?ro(Rn):this.applyRedirects.lineralizeSegments(U,Rn).pipe((0,an.z)(Pn=>this.processSegment(N,C,T,Pn.concat(Mt),le,!1)))}matchSegmentAgainstRoute(N,T,C,U,Y,le){let je;if("**"===C.path){const Ue=U.length>0?vn(U).parameters:{},Mt=new pi(U,Ue,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Qa(C),fr(C),C.component??C._loadedComponent??null,C,S(C));je=(0,ve.of)({snapshot:Mt,consumedSegments:[],remainingSegments:[]}),T.children={}}else je=aa(T,C,U,N).pipe((0,Et.U)(({matched:Ue,consumedSegments:Mt,remainingSegments:fn,parameters:Rn})=>Ue?{snapshot:new pi(Mt,Rn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Qa(C),fr(C),C.component??C._loadedComponent??null,C,S(C)),consumedSegments:Mt,remainingSegments:fn}:null));return je.pipe((0,lt.w)(Ue=>null===Ue?So(T):this.getChildConfig(N=C._injector??N,C,U).pipe((0,lt.w)(({routes:Mt})=>{const fn=C._loadedInjector??N,{snapshot:Rn,consumedSegments:Pn,remainingSegments:nr}=Ue,{segmentGroup:qu,slicedSegments:Pi}=Ei(T,Pn,nr,Mt);if(0===Pi.length&&qu.hasChildren())return this.processChildren(fn,Mt,qu).pipe((0,Et.U)(so=>null===so?null:[new Ts(Rn,so)]));if(0===Mt.length&&0===Pi.length)return(0,ve.of)([new Ts(Rn,[])]);const Ho=fr(C)===Y;return this.processSegment(fn,Mt,qu,Pi,Ho?qt:Y,!0).pipe((0,Et.U)(so=>[new Ts(Rn,so)]))}))))}getChildConfig(N,T,C){return T.children?(0,ve.of)({routes:T.children,injector:N}):T.loadChildren?void 0!==T._loadedRoutes?(0,ve.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):function Ea(b,N,T,C){const U=N.canLoad;if(void 0===U||0===U.length)return(0,ve.of)(!0);const Y=U.map(le=>{const je=rs(le,b);return Bt(function ju(b){return b&&js(b.canLoad)}(je)?je.canLoad(N,T):b.runInContext(()=>je(N,T)))});return(0,ve.of)(Y).pipe(Hs(),Bo())}(N,T,C).pipe((0,an.z)(U=>U?this.configLoader.loadChildren(N,T).pipe((0,_e.b)(Y=>{T._loadedRoutes=Y.routes,T._loadedInjector=Y.injector})):function wa(b){return(0,ke._)(es(!1,3))}())):(0,ve.of)({routes:[],injector:N})}}function io(b){const N=b.value.routeConfig;return N&&""===N.path}function fl(b){const N=[],T=new Set;for(const C of b){if(!io(C)){N.push(C);continue}const U=N.find(Y=>C.value.routeConfig===Y.value.routeConfig);void 0!==U?(U.children.push(...C.children),T.add(U)):N.push(C)}for(const C of T){const U=fl(C.children);N.push(new Ts(C.value,U))}return N.filter(C=>!T.has(C))}function Qa(b){return b.data||{}}function S(b){return b.resolve||{}}function F(b){return"string"==typeof b.title||null===b.title}function A(b){return(0,lt.w)(N=>{const T=b(N);return T?(0,pe.D)(T).pipe((0,Et.U)(()=>N)):(0,ve.of)(N)})}const j=new w.OlP("ROUTES");let X=(()=>{class b{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,w.f3M)(w.Sil)}loadComponent(T){if(this.componentLoaders.get(T))return this.componentLoaders.get(T);if(T._loadedComponent)return(0,ve.of)(T._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(T);const C=Bt(T.loadComponent()).pipe((0,Et.U)(tn),(0,_e.b)(Y=>{this.onLoadEndListener&&this.onLoadEndListener(T),T._loadedComponent=Y}),wn(()=>{this.componentLoaders.delete(T)})),U=new Ge.c(C,()=>new Qe.x).pipe((0,en.x)());return this.componentLoaders.set(T,U),U}loadChildren(T,C){if(this.childrenLoaders.get(C))return this.childrenLoaders.get(C);if(C._loadedRoutes)return(0,ve.of)({routes:C._loadedRoutes,injector:C._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(C);const Y=function He(b,N,T,C){return Bt(b.loadChildren()).pipe((0,Et.U)(tn),(0,an.z)(U=>U instanceof w.YKP||Array.isArray(U)?(0,ve.of)(U):(0,pe.D)(N.compileModuleAsync(U))),(0,Et.U)(U=>{C&&C(b);let Y,le,je=!1;return Array.isArray(U)?(le=U,!0):(Y=U.create(T).injector,le=Y.get(j,[],{optional:!0,self:!0}).flat()),{routes:le.map(oi),injector:Y}}))}(C,this.compiler,T,this.onLoadEndListener).pipe(wn(()=>{this.childrenLoaders.delete(C)})),le=new Ge.c(Y,()=>new Qe.x).pipe((0,en.x)());return this.childrenLoaders.set(C,le),le}static#e=this.\u0275fac=function(C){return new(C||b)};static#t=this.\u0275prov=w.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})();function tn(b){return function ot(b){return b&&"object"==typeof b&&"default"in b}(b)?b.default:b}let qn=(()=>{class b{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Qe.x,this.transitionAbortSubject=new Qe.x,this.configLoader=(0,w.f3M)(X),this.environmentInjector=(0,w.f3M)(w.lqb),this.urlSerializer=(0,w.f3M)($r),this.rootContexts=(0,w.f3M)(qr),this.inputBindingEnabled=null!==(0,w.f3M)(jr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ve.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=U=>this.events.next(new Ba(U)),this.configLoader.onLoadStartListener=U=>this.events.next(new _u(U))}complete(){this.transitions?.complete()}handleNavigationRequest(T){const C=++this.navigationId;this.transitions?.next({...this.transitions.value,...T,id:C})}setupNavigations(T,C,U){return this.transitions=new Re.X({id:0,currentUrlTree:C,currentRawUrl:C,currentBrowserUrl:C,extractedUrl:T.urlHandlingStrategy.extract(C),urlAfterRedirects:T.urlHandlingStrategy.extract(C),rawUrl:C,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:zr,restoredState:null,currentSnapshot:U.snapshot,targetSnapshot:null,currentRouterState:U,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,lr.h)(Y=>0!==Y.id),(0,Et.U)(Y=>({...Y,extractedUrl:T.urlHandlingStrategy.extract(Y.rawUrl)})),(0,lt.w)(Y=>{this.currentTransition=Y;let le=!1,je=!1;return(0,ve.of)(Y).pipe((0,_e.b)(Ue=>{this.currentNavigation={id:Ue.id,initialUrl:Ue.rawUrl,extractedUrl:Ue.extractedUrl,trigger:Ue.source,extras:Ue.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,lt.w)(Ue=>{const Mt=Ue.currentBrowserUrl.toString(),fn=!T.navigated||Ue.extractedUrl.toString()!==Mt||Mt!==Ue.currentUrlTree.toString();if(!fn&&"reload"!==(Ue.extras.onSameUrlNavigation??T.onSameUrlNavigation)){const Pn="";return this.events.next(new Xs(Ue.id,this.urlSerializer.serialize(Ue.rawUrl),Pn,0)),Ue.resolve(null),Ce.E}if(T.urlHandlingStrategy.shouldProcessUrl(Ue.rawUrl))return(0,ve.of)(Ue).pipe((0,lt.w)(Pn=>{const nr=this.transitions?.getValue();return this.events.next(new ws(Pn.id,this.urlSerializer.serialize(Pn.extractedUrl),Pn.source,Pn.restoredState)),nr!==this.transitions?.getValue()?Ce.E:Promise.resolve(Pn)}),function q(b,N,T,C,U,Y){return(0,an.z)(le=>function is(b,N,T,C,U,Y,le="emptyOnly"){return new ua(b,N,T,C,U,le,Y).recognize()}(b,N,T,C,le.extractedUrl,U,Y).pipe((0,Et.U)(({state:je,tree:Ue})=>({...le,targetSnapshot:je,urlAfterRedirects:Ue}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,T.config,this.urlSerializer,T.paramsInheritanceStrategy),(0,_e.b)(Pn=>{Y.targetSnapshot=Pn.targetSnapshot,Y.urlAfterRedirects=Pn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Pn.urlAfterRedirects};const nr=new mu(Pn.id,this.urlSerializer.serialize(Pn.extractedUrl),this.urlSerializer.serialize(Pn.urlAfterRedirects),Pn.targetSnapshot);this.events.next(nr)}));if(fn&&T.urlHandlingStrategy.shouldProcessUrl(Ue.currentRawUrl)){const{id:Pn,extractedUrl:nr,source:qu,restoredState:Pi,extras:Ho}=Ue,so=new ws(Pn,this.urlSerializer.serialize(nr),qu,Pi);this.events.next(so);const Fl=vt(0,this.rootComponentType).snapshot;return this.currentTransition=Y={...Ue,targetSnapshot:Fl,urlAfterRedirects:nr,extras:{...Ho,skipLocationChange:!1,replaceUrl:!1}},(0,ve.of)(Y)}{const Pn="";return this.events.next(new Xs(Ue.id,this.urlSerializer.serialize(Ue.extractedUrl),Pn,1)),Ue.resolve(null),Ce.E}}),(0,_e.b)(Ue=>{const Mt=new fi(Ue.id,this.urlSerializer.serialize(Ue.extractedUrl),this.urlSerializer.serialize(Ue.urlAfterRedirects),Ue.targetSnapshot);this.events.next(Mt)}),(0,Et.U)(Ue=>(this.currentTransition=Y={...Ue,guards:$a(Ue.targetSnapshot,Ue.currentSnapshot,this.rootContexts)},Y)),function Wa(b,N){return(0,an.z)(T=>{const{targetSnapshot:C,currentSnapshot:U,guards:{canActivateChecks:Y,canDeactivateChecks:le}}=T;return 0===le.length&&0===Y.length?(0,ve.of)({...T,guardsResult:!0}):function bi(b,N,T,C){return(0,pe.D)(b).pipe((0,an.z)(U=>function vi(b,N,T,C,U){const Y=N&&N.routeConfig?N.routeConfig.canDeactivate:null;if(!Y||0===Y.length)return(0,ve.of)(!0);const le=Y.map(je=>{const Ue=bs(N)??U,Mt=rs(je,Ue);return Bt(function Hu(b){return b&&js(b.canDeactivate)}(Mt)?Mt.canDeactivate(b,N,T,C):Ue.runInContext(()=>Mt(b,N,T,C))).pipe((0,It.P)())});return(0,ve.of)(le).pipe(Hs())}(U.component,U.route,T,N,C)),(0,It.P)(U=>!0!==U,!0))}(le,C,U,b).pipe((0,an.z)(je=>je&&function ra(b){return"boolean"==typeof b}(je)?function fs(b,N,T,C){return(0,pe.D)(N).pipe(Rt(U=>(0,Ft.z)(function ir(b,N){return null!==b&&N&&N(new xi(b)),(0,ve.of)(!0)}(U.route.parent,C),function qa(b,N){return null!==b&&N&&N(new Xo(b)),(0,ve.of)(!0)}(U.route,C),function Ss(b,N,T){const C=N[N.length-1],Y=N.slice(0,N.length-1).reverse().map(le=>function za(b){const N=b.routeConfig?b.routeConfig.canActivateChild:null;return N&&0!==N.length?{node:b,guards:N}:null}(le)).filter(le=>null!==le).map(le=>(0,Ie.P)(()=>{const je=le.guards.map(Ue=>{const Mt=bs(le.node)??T,fn=rs(Ue,Mt);return Bt(function Ga(b){return b&&js(b.canActivateChild)}(fn)?fn.canActivateChild(C,b):Mt.runInContext(()=>fn(C,b))).pipe((0,It.P)())});return(0,ve.of)(je).pipe(Hs())}));return(0,ve.of)(Y).pipe(Hs())}(b,U.path,T),function yi(b,N,T){const C=N.routeConfig?N.routeConfig.canActivate:null;if(!C||0===C.length)return(0,ve.of)(!0);const U=C.map(Y=>(0,Ie.P)(()=>{const le=bs(N)??T,je=rs(Y,le);return Bt(function wr(b){return b&&js(b.canActivate)}(je)?je.canActivate(N,b):le.runInContext(()=>je(N,b))).pipe((0,It.P)())}));return(0,ve.of)(U).pipe(Hs())}(b,U.route,T))),(0,It.P)(U=>!0!==U,!0))}(C,Y,b,N):(0,ve.of)(je)),(0,Et.U)(je=>({...T,guardsResult:je})))})}(this.environmentInjector,Ue=>this.events.next(Ue)),(0,_e.b)(Ue=>{if(Y.guardsResult=Ue.guardsResult,Zt(Ue.guardsResult))throw Ds(0,Ue.guardsResult);const Mt=new Fo(Ue.id,this.urlSerializer.serialize(Ue.extractedUrl),this.urlSerializer.serialize(Ue.urlAfterRedirects),Ue.targetSnapshot,!!Ue.guardsResult);this.events.next(Mt)}),(0,lr.h)(Ue=>!!Ue.guardsResult||(this.cancelNavigationTransition(Ue,"",3),!1)),A(Ue=>{if(Ue.guards.canActivateChecks.length)return(0,ve.of)(Ue).pipe((0,_e.b)(Mt=>{const fn=new _o(Mt.id,this.urlSerializer.serialize(Mt.extractedUrl),this.urlSerializer.serialize(Mt.urlAfterRedirects),Mt.targetSnapshot);this.events.next(fn)}),(0,lt.w)(Mt=>{let fn=!1;return(0,ve.of)(Mt).pipe(function L(b,N){return(0,an.z)(T=>{const{targetSnapshot:C,guards:{canActivateChecks:U}}=T;if(!U.length)return(0,ve.of)(T);let Y=0;return(0,pe.D)(U).pipe(Rt(le=>function G(b,N,T,C){const U=b.routeConfig,Y=b._resolve;return void 0!==U?.title&&!F(U)&&(Y[En]=U.title),function de(b,N,T,C){const U=function ze(b){return[...Object.keys(b),...Object.getOwnPropertySymbols(b)]}(b);if(0===U.length)return(0,ve.of)({});const Y={};return(0,pe.D)(U).pipe((0,an.z)(le=>function M(b,N,T,C){const U=bs(N)??C,Y=rs(b,U);return Bt(Y.resolve?Y.resolve(N,T):U.runInContext(()=>Y(N,T)))}(b[le],N,T,C).pipe((0,It.P)(),(0,_e.b)(je=>{Y[le]=je}))),yt(1),(0,Pt.h)(Y),be(le=>Vo(le)?Ce.E:(0,ke._)(le)))}(Y,b,N,C).pipe((0,Et.U)(le=>(b._resolvedData=le,b.data=Kr(b,T).resolve,U&&F(U)&&(b.data[En]=U.title),null)))}(le.route,C,b,N)),(0,_e.b)(()=>Y++),yt(1),(0,an.z)(le=>Y===U.length?(0,ve.of)(T):Ce.E))})}(T.paramsInheritanceStrategy,this.environmentInjector),(0,_e.b)({next:()=>fn=!0,complete:()=>{fn||this.cancelNavigationTransition(Mt,"",2)}}))}),(0,_e.b)(Mt=>{const fn=new Jo(Mt.id,this.urlSerializer.serialize(Mt.extractedUrl),this.urlSerializer.serialize(Mt.urlAfterRedirects),Mt.targetSnapshot);this.events.next(fn)}))}),A(Ue=>{const Mt=fn=>{const Rn=[];fn.routeConfig?.loadComponent&&!fn.routeConfig._loadedComponent&&Rn.push(this.configLoader.loadComponent(fn.routeConfig).pipe((0,_e.b)(Pn=>{fn.component=Pn}),(0,Et.U)(()=>{})));for(const Pn of fn.children)Rn.push(...Mt(Pn));return Rn};return ht(Mt(Ue.targetSnapshot.root)).pipe((0,Be.d)(),(0,ur.q)(1))}),A(()=>this.afterPreactivation()),(0,Et.U)(Ue=>{const Mt=function tr(b,N,T){const C=$i(b,N._root,T?T._root:void 0);return new dr(C,N)}(T.routeReuseStrategy,Ue.targetSnapshot,Ue.currentRouterState);return this.currentTransition=Y={...Ue,targetRouterState:Mt},Y}),(0,_e.b)(()=>{this.events.next(new Tn)}),((b,N,T,C)=>(0,Et.U)(U=>(new _a(N,U.targetRouterState,U.currentRouterState,T,C).activate(b),U)))(this.rootContexts,T.routeReuseStrategy,Ue=>this.events.next(Ue),this.inputBindingEnabled),(0,ur.q)(1),(0,_e.b)({next:Ue=>{le=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ni(Ue.id,this.urlSerializer.serialize(Ue.extractedUrl),this.urlSerializer.serialize(Ue.urlAfterRedirects))),T.titleStrategy?.updateTitle(Ue.targetRouterState.snapshot),Ue.resolve(!0)},complete:()=>{le=!0}}),function sn(b){return(0,Ve.e)((N,T)=>{(0,we.Xf)(b).subscribe((0,et.x)(T,()=>T.complete(),Ln.Z)),!T.closed&&N.subscribe(T)})}(this.transitionAbortSubject.pipe((0,_e.b)(Ue=>{throw Ue}))),wn(()=>{le||je||this.cancelNavigationTransition(Y,"",1),this.currentNavigation?.id===Y.id&&(this.currentNavigation=null)}),be(Ue=>{if(je=!0,zi(Ue))this.events.next(new cs(Y.id,this.urlSerializer.serialize(Y.extractedUrl),Ue.message,Ue.cancellationCode)),function Bs(b){return zi(b)&&Zt(b.url)}(Ue)?this.events.next(new er(Ue.url)):Y.resolve(!1);else{this.events.next(new Gr(Y.id,this.urlSerializer.serialize(Y.extractedUrl),Ue,Y.targetSnapshot??void 0));try{Y.resolve(T.errorHandler(Ue))}catch(Mt){Y.reject(Mt)}}return Ce.E}))}))}cancelNavigationTransition(T,C,U){const Y=new cs(T.id,this.urlSerializer.serialize(T.extractedUrl),C,U);this.events.next(Y),T.resolve(!1)}static#e=this.\u0275fac=function(C){return new(C||b)};static#t=this.\u0275prov=w.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})();function Qr(b){return b!==zr}let Si=(()=>{class b{buildTitle(T){let C,U=T.root;for(;void 0!==U;)C=this.getResolvedTitleForRoute(U)??C,U=U.children.find(Y=>Y.outlet===qt);return C}getResolvedTitleForRoute(T){return T.data[En]}static#e=this.\u0275fac=function(C){return new(C||b)};static#t=this.\u0275prov=w.Yz7({token:b,factory:function(){return(0,w.f3M)(ni)},providedIn:"root"})}return b})(),ni=(()=>{class b extends Si{constructor(T){super(),this.title=T}updateTitle(T){const C=this.buildTitle(T);void 0!==C&&this.title.setTitle(C)}static#e=this.\u0275fac=function(C){return new(C||b)(w.LFG($n.Dx))};static#t=this.\u0275prov=w.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})(),Wi=(()=>{class b{static#e=this.\u0275fac=function(C){return new(C||b)};static#t=this.\u0275prov=w.Yz7({token:b,factory:function(){return(0,w.f3M)(qi)},providedIn:"root"})}return b})();class Ca{shouldDetach(N){return!1}store(N,T){}shouldAttach(N){return!1}retrieve(N){return null}shouldReuseRoute(N,T){return N.routeConfig===T.routeConfig}}let qi=(()=>{class b extends Ca{static#e=this.\u0275fac=function(){let T;return function(U){return(T||(T=w.n5z(b)))(U||b)}}();static#t=this.\u0275prov=w.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})();const Po=new w.OlP("",{providedIn:"root",factory:()=>({})});let zu=(()=>{class b{static#e=this.\u0275fac=function(C){return new(C||b)};static#t=this.\u0275prov=w.Yz7({token:b,factory:function(){return(0,w.f3M)(Sr)},providedIn:"root"})}return b})(),Sr=(()=>{class b{shouldProcessUrl(T){return!0}extract(T){return T}merge(T,C){return T}static#e=this.\u0275fac=function(C){return new(C||b)};static#t=this.\u0275prov=w.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})();var Eu=function(b){return b[b.COMPLETE=0]="COMPLETE",b[b.FAILED=1]="FAILED",b[b.REDIRECTING=2]="REDIRECTING",b}(Eu||{});function Da(b,N){b.events.pipe((0,lr.h)(T=>T instanceof Ni||T instanceof cs||T instanceof Gr||T instanceof Xs),(0,Et.U)(T=>T instanceof Ni||T instanceof Xs?Eu.COMPLETE:T instanceof cs&&(0===T.code||1===T.code)?Eu.REDIRECTING:Eu.FAILED),(0,lr.h)(T=>T!==Eu.REDIRECTING),(0,ur.q)(1)).subscribe(()=>{N()})}function Ps(b){throw b}function Md(b,N,T){return N.parse("/")}const Ya={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Iu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let An=(()=>{class b{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,w.f3M)(w.c2e),this.isNgZoneEnabled=!1,this._events=new Qe.x,this.options=(0,w.f3M)(Po,{optional:!0})||{},this.pendingTasks=(0,w.f3M)(w.HDt),this.errorHandler=this.options.errorHandler||Ps,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Md,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,w.f3M)(zu),this.routeReuseStrategy=(0,w.f3M)(Wi),this.titleStrategy=(0,w.f3M)(Si),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,w.f3M)(j,{optional:!0})?.flat()??[],this.navigationTransitions=(0,w.f3M)(qn),this.urlSerializer=(0,w.f3M)($r),this.location=(0,w.f3M)(fe.Ye),this.componentInputBindingEnabled=!!(0,w.f3M)(jr,{optional:!0}),this.eventsSubscription=new rt.w0,this.isNgZoneEnabled=(0,w.f3M)(w.R0b)instanceof w.R0b&&w.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Er,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=vt(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(T=>{this.lastSuccessfulId=T.id,this.currentPageId=this.browserPageId},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const T=this.navigationTransitions.events.subscribe(C=>{try{const{currentTransition:U}=this.navigationTransitions;if(null===U)return void(Ki(C)&&this._events.next(C));if(C instanceof ws)Qr(U.source)&&(this.browserUrlTree=U.extractedUrl);else if(C instanceof Xs)this.rawUrlTree=U.rawUrl;else if(C instanceof mu){if("eager"===this.urlUpdateStrategy){if(!U.extras.skipLocationChange){const Y=this.urlHandlingStrategy.merge(U.urlAfterRedirects,U.rawUrl);this.setBrowserUrl(Y,U)}this.browserUrlTree=U.urlAfterRedirects}}else if(C instanceof Tn)this.currentUrlTree=U.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(U.urlAfterRedirects,U.rawUrl),this.routerState=U.targetRouterState,"deferred"===this.urlUpdateStrategy&&(U.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,U),this.browserUrlTree=U.urlAfterRedirects);else if(C instanceof cs)0!==C.code&&1!==C.code&&(this.navigated=!0),(3===C.code||2===C.code)&&this.restoreHistory(U);else if(C instanceof er){const Y=this.urlHandlingStrategy.merge(C.url,U.currentRawUrl),le={skipLocationChange:U.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Qr(U.source)};this.scheduleNavigation(Y,zr,null,le,{resolve:U.resolve,reject:U.reject,promise:U.promise})}C instanceof Gr&&this.restoreHistory(U,!0),C instanceof Ni&&(this.navigated=!0),Ki(C)&&this._events.next(C)}catch(U){this.navigationTransitions.transitionAbortSubject.next(U)}});this.eventsSubscription.add(T)}resetRootComponentType(T){this.routerState.root.component=T,this.navigationTransitions.rootComponentType=T}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const T=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),zr,T)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const C="popstate"===T.type?"popstate":"hashchange";"popstate"===C&&setTimeout(()=>{this.navigateToSyncWithBrowser(T.url,C,T.state)},0)}))}navigateToSyncWithBrowser(T,C,U){const Y={replaceUrl:!0},le=U?.navigationId?U:null;if(U){const Ue={...U};delete Ue.navigationId,delete Ue.\u0275routerPageId,0!==Object.keys(Ue).length&&(Y.state=Ue)}const je=this.parseUrl(T);this.scheduleNavigation(je,C,le,Y)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(T){this.config=T.map(oi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(T,C={}){const{relativeTo:U,queryParams:Y,fragment:le,queryParamsHandling:je,preserveFragment:Ue}=C,Mt=Ue?this.currentUrlTree.fragment:le;let Rn,fn=null;switch(je){case"merge":fn={...this.currentUrlTree.queryParams,...Y};break;case"preserve":fn=this.currentUrlTree.queryParams;break;default:fn=Y||null}null!==fn&&(fn=this.removeEmptyProps(fn));try{Rn=Xt(U?U.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof T[0]||!T[0].startsWith("/"))&&(T=[]),Rn=this.currentUrlTree.root}return Gn(Rn,T,fn,Mt??null)}navigateByUrl(T,C={skipLocationChange:!1}){const U=Zt(T)?T:this.parseUrl(T),Y=this.urlHandlingStrategy.merge(U,this.rawUrlTree);return this.scheduleNavigation(Y,zr,null,C)}navigate(T,C={skipLocationChange:!1}){return function Mo(b){for(let N=0;N<b.length;N++)if(null==b[N])throw new w.vHH(4008,!1)}(T),this.navigateByUrl(this.createUrlTree(T,C),C)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let C;try{C=this.urlSerializer.parse(T)}catch(U){C=this.malformedUriErrorHandler(U,this.urlSerializer,T)}return C}isActive(T,C){let U;if(U=!0===C?{...Ya}:!1===C?{...Iu}:C,Zt(T))return ei(this.currentUrlTree,T,U);const Y=this.parseUrl(T);return ei(this.currentUrlTree,Y,U)}removeEmptyProps(T){return Object.keys(T).reduce((C,U)=>{const Y=T[U];return null!=Y&&(C[U]=Y),C},{})}scheduleNavigation(T,C,U,Y,le){if(this.disposed)return Promise.resolve(!1);let je,Ue,Mt;le?(je=le.resolve,Ue=le.reject,Mt=le.promise):Mt=new Promise((Rn,Pn)=>{je=Rn,Ue=Pn});const fn=this.pendingTasks.add();return Da(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(fn))}),this.navigationTransitions.handleNavigationRequest({source:C,restoredState:U,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:T,extras:Y,resolve:je,reject:Ue,promise:Mt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Mt.catch(Rn=>Promise.reject(Rn))}setBrowserUrl(T,C){const U=this.urlSerializer.serialize(T);if(this.location.isCurrentPathEqualTo(U)||C.extras.replaceUrl){const le={...C.extras.state,...this.generateNgRouterState(C.id,this.browserPageId)};this.location.replaceState(U,"",le)}else{const Y={...C.extras.state,...this.generateNgRouterState(C.id,this.browserPageId+1)};this.location.go(U,"",Y)}}restoreHistory(T,C=!1){if("computed"===this.canceledNavigationResolution){const Y=this.currentPageId-this.browserPageId;0!==Y?this.location.historyGo(Y):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===Y&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(C&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(T,C){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:C}:{navigationId:T}}static#e=this.\u0275fac=function(C){return new(C||b)};static#t=this.\u0275prov=w.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})();function Ki(b){return!(b instanceof Tn||b instanceof er)}let zs=(()=>{class b{constructor(T,C,U,Y,le,je){this.router=T,this.route=C,this.tabIndexAttribute=U,this.renderer=Y,this.el=le,this.locationStrategy=je,this.href=null,this.commands=null,this.onChanges=new Qe.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Ue=le.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Ue||"area"===Ue,this.isAnchorElement?this.subscription=T.events.subscribe(Mt=>{Mt instanceof Ni&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(T){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",T)}ngOnChanges(T){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(T){null!=T?(this.commands=Array.isArray(T)?T:[T],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(T,C,U,Y,le){return!!(null===this.urlTree||this.isAnchorElement&&(0!==T||C||U||Y||le||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const T=null===this.href?null:(0,w.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",T)}applyAttributeValue(T,C){const U=this.renderer,Y=this.el.nativeElement;null!==C?U.setAttribute(Y,T,C):U.removeAttribute(Y,T)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(C){return new(C||b)(w.Y36(An),w.Y36(Sn),w.$8M("tabindex"),w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(fe.S$))};static#t=this.\u0275dir=w.lG2({type:b,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(C,U){1&C&&w.NdJ("click",function(le){return U.onClick(le.button,le.ctrlKey,le.shiftKey,le.altKey,le.metaKey)}),2&C&&w.uIk("target",U.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",w.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",w.VuI],replaceUrl:["replaceUrl","replaceUrl",w.VuI],routerLink:"routerLink"},standalone:!0,features:[w.Xq5,w.TTD]})}return b})();class yr{}let gs=(()=>{class b{preload(T,C){return C().pipe(be(()=>(0,ve.of)(null)))}static#e=this.\u0275fac=function(C){return new(C||b)};static#t=this.\u0275prov=w.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})(),Vt=(()=>{class b{constructor(T,C,U,Y,le){this.router=T,this.injector=U,this.preloadingStrategy=Y,this.loader=le}setUpPreloading(){this.subscription=this.router.events.pipe((0,lr.h)(T=>T instanceof Ni),Rt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,C){const U=[];for(const Y of C){Y.providers&&!Y._injector&&(Y._injector=(0,w.MMx)(Y.providers,T,`Route: ${Y.path}`));const le=Y._injector??T,je=Y._loadedInjector??le;(Y.loadChildren&&!Y._loadedRoutes&&void 0===Y.canLoad||Y.loadComponent&&!Y._loadedComponent)&&U.push(this.preloadConfig(le,Y)),(Y.children||Y._loadedRoutes)&&U.push(this.processRoutes(je,Y.children??Y._loadedRoutes))}return(0,pe.D)(U).pipe((0,yn.J)())}preloadConfig(T,C){return this.preloadingStrategy.preload(C,()=>{let U;U=C.loadChildren&&void 0===C.canLoad?this.loader.loadChildren(T,C):(0,ve.of)(null);const Y=U.pipe((0,an.z)(le=>null===le?(0,ve.of)(void 0):(C._loadedRoutes=le.routes,C._loadedInjector=le.injector,this.processRoutes(le.injector??T,le.routes))));if(C.loadComponent&&!C._loadedComponent){const le=this.loader.loadComponent(C);return(0,pe.D)([Y,le]).pipe((0,yn.J)())}return Y})}static#e=this.\u0275fac=function(C){return new(C||b)(w.LFG(An),w.LFG(w.Sil),w.LFG(w.lqb),w.LFG(yr),w.LFG(X))};static#t=this.\u0275prov=w.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})();const jt=new w.OlP("");let cn=(()=>{class b{constructor(T,C,U,Y,le={}){this.urlSerializer=T,this.transitions=C,this.viewportScroller=U,this.zone=Y,this.options=le,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},le.scrollPositionRestoration=le.scrollPositionRestoration||"disabled",le.anchorScrolling=le.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof ws?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof Ni?(this.lastId=T.id,this.scheduleScrollEvent(T,this.urlSerializer.parse(T.urlAfterRedirects).fragment)):T instanceof Xs&&0===T.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(T,this.urlSerializer.parse(T.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof Fs&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,C){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Fs(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,C))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(C){w.$Z()};static#t=this.\u0275prov=w.Yz7({token:b,factory:b.\u0275fac})}return b})();function Ye(b,N){return{\u0275kind:b,\u0275providers:N}}function Xa(){const b=(0,w.f3M)(w.zs3);return N=>{const T=b.get(w.z2F);if(N!==T.components[0])return;const C=b.get(An),U=b.get(ac);1===b.get(Gs)&&C.initialNavigation(),b.get(Qn,null,w.XFs.Optional)?.setUpPreloading(),b.get(jt,null,w.XFs.Optional)?.init(),C.resetRootComponentType(T.componentTypes[0]),U.closed||(U.next(),U.complete(),U.unsubscribe())}}const ac=new w.OlP("",{factory:()=>new Qe.x}),Gs=new w.OlP("",{providedIn:"root",factory:()=>1}),Qn=new w.OlP("");function ai(b){return Ye(0,[{provide:Qn,useExisting:Vt},{provide:yr,useExisting:b}])}const eu=new w.OlP("ROUTER_FORROOT_GUARD"),Bn=[fe.Ye,{provide:$r,useClass:Ti},An,qr,{provide:Sn,useFactory:function We(b){return b.routerState.root},deps:[An]},X,[]];function Od(){return new w.PXZ("Router",An)}let Fr=(()=>{class b{constructor(T){}static forRoot(T,C){return{ngModule:b,providers:[Bn,[],{provide:j,multi:!0,useValue:T},{provide:eu,useFactory:Aa,deps:[[An,new w.FiY,new w.tp0]]},{provide:Po,useValue:C||{}},C?.useHash?{provide:fe.S$,useClass:fe.Do}:{provide:fe.S$,useClass:fe.b0},{provide:jt,useFactory:()=>{const b=(0,w.f3M)(fe.EM),N=(0,w.f3M)(w.R0b),T=(0,w.f3M)(Po),C=(0,w.f3M)(qn),U=(0,w.f3M)($r);return T.scrollOffset&&b.setOffset(T.scrollOffset),new cn(U,C,b,N,T)}},C?.preloadingStrategy?ai(C.preloadingStrategy).\u0275providers:[],{provide:w.PXZ,multi:!0,useFactory:Od},C?.initialNavigation?Oo(C):[],C?.bindToComponentInputs?Ye(8,[Or,{provide:jr,useExisting:Or}]).\u0275providers:[],[{provide:Ri,useFactory:Xa},{provide:w.tb,multi:!0,useExisting:Ri}]]}}static forChild(T){return{ngModule:b,providers:[{provide:j,multi:!0,useValue:T}]}}static#e=this.\u0275fac=function(C){return new(C||b)(w.LFG(eu,8))};static#t=this.\u0275mod=w.oAB({type:b});static#n=this.\u0275inj=w.cJS({})}return b})();function Aa(b){return"guarded"}function Oo(b){return["disabled"===b.initialNavigation?Ye(3,[{provide:w.ip1,multi:!0,useFactory:()=>{const N=(0,w.f3M)(An);return()=>{N.setUpLocationChangeListener()}}},{provide:Gs,useValue:2}]).\u0275providers:[],"enabledBlocking"===b.initialNavigation?Ye(2,[{provide:Gs,useValue:0},{provide:w.ip1,multi:!0,deps:[w.zs3],useFactory:N=>{const T=N.get(fe.V_,Promise.resolve());return()=>T.then(()=>new Promise(C=>{const U=N.get(An),Y=N.get(ac);Da(U,()=>{C(!0)}),N.get(qn).afterPreactivation=()=>(C(!0),Y.closed?(0,ve.of)(void 0):Y),U.initialNavigation()}))}}]).\u0275providers:[]]}const Ri=new w.OlP("")},3106:(bt,Le,$)=>{$.d(Le,{Z:()=>ht});var w=$(9058),W=$(4537),ie=$(534),Ee=$(7879);class pe{constructor(pt,ut){this._delegate=pt,this.firebase=ut,(0,ie._addComponent)(pt,new W.wA("app-compat",()=>this,"PUBLIC")),this.container=pt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pt){this._delegate.automaticDataCollectionEnabled=pt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pt=>{this._delegate.checkDestroyed(),pt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ie.deleteApp)(this._delegate)))}_getService(pt,ut=ie._DEFAULT_ENTRY_NAME){var Ft;this._delegate.checkDestroyed();const Ie=this._delegate.container.getProvider(pt);return!Ie.isInitialized()&&"EXPLICIT"===(null===(Ft=Ie.getComponent())||void 0===Ft?void 0:Ft.instantiationMode)&&Ie.initialize(),Ie.getImmediate({identifier:ut})}_removeServiceInstance(pt,ut=ie._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pt).clearInstance(ut)}_addComponent(pt){(0,ie._addComponent)(this._delegate,pt)}_addOrOverwriteComponent(pt){(0,ie._addOrOverwriteComponent)(this._delegate,pt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Re=new w.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ue=function Ne(){const nt=function R(nt){const pt={},ut={__esModule:!0,initializeApp:function ce(Qe,rt={}){const fe=ie.initializeApp(Qe,rt);if((0,w.r3)(pt,fe.name))return pt[fe.name];const Et=new nt(fe,ut);return pt[fe.name]=Et,Et},app:Ie,registerVersion:ie.registerVersion,setLogLevel:ie.setLogLevel,onLog:ie.onLog,apps:null,SDK_VERSION:ie.SDK_VERSION,INTERNAL:{registerComponent:function Ce(Qe){const rt=Qe.name,fe=rt.replace("-compat","");if(ie._registerComponent(Qe)&&"PUBLIC"===Qe.type){const Et=(lt=Ie())=>{if("function"!=typeof lt[fe])throw Re.create("invalid-app-argument",{appName:rt});return lt[fe]()};void 0!==Qe.serviceProps&&(0,w.ZB)(Et,Qe.serviceProps),ut[fe]=Et,nt.prototype[fe]=function(...lt){return this._getService.bind(this,rt).apply(this,Qe.multipleInstances?lt:[])}}return"PUBLIC"===Qe.type?ut[fe]:null},removeApp:function Ft(Qe){delete pt[Qe]},useAsService:function Ge(Qe,rt){return"serverAuth"===rt?null:rt},modularAPIs:ie}};function Ie(Qe){if(!(0,w.r3)(pt,Qe=Qe||ie._DEFAULT_ENTRY_NAME))throw Re.create("no-app",{appName:Qe});return pt[Qe]}return ut.default=ut,Object.defineProperty(ut,"apps",{get:function ke(){return Object.keys(pt).map(Qe=>pt[Qe])}}),Ie.App=nt,ut}(pe);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:Ne,extendNamespace:function pt(ut){(0,w.ZB)(nt,ut)},createSubscribe:w.ne,ErrorFactory:w.LL,deepExtend:w.ZB}),nt}(),he=new Ee.Yd("@firebase/app-compat");if((0,w.jU)()&&void 0!==self.firebase){he.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&he.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ht=ue;!function Ke(nt){(0,ie.registerVersion)("@firebase/app-compat","0.2.23",nt)}()},534:(bt,Le,$)=>{$.r(Le),$.d(Le,{FirebaseError:()=>Ee.ZR,SDK_VERSION:()=>mn,_DEFAULT_ENTRY_NAME:()=>Kt,_addComponent:()=>Un,_addOrOverwriteComponent:()=>ei,_apps:()=>Bt,_clearComponents:()=>kt,_components:()=>Vn,_getProvider:()=>br,_registerComponent:()=>zn,_removeServiceInstance:()=>To,deleteApp:()=>Ur,getApp:()=>Hr,getApps:()=>di,initializeApp:()=>Yi,onLog:()=>Bi,registerVersion:()=>Ti,setLogLevel:()=>rr});var w=$(5861),W=$(4537),ie=$(7879),Ee=$(9058);const pe=(qe,Oe)=>Oe.some(st=>qe instanceof st);let ve,Re;const ue=new WeakMap,he=new WeakMap,De=new WeakMap,et=new WeakMap,Ke=new WeakMap;let pt={get(qe,Oe,st){if(qe instanceof IDBTransaction){if("done"===Oe)return he.get(qe);if("objectStoreNames"===Oe)return qe.objectStoreNames||De.get(qe);if("store"===Oe)return st.objectStoreNames[1]?void 0:st.objectStore(st.objectStoreNames[0])}return ce(qe[Oe])},set:(qe,Oe,st)=>(qe[Oe]=st,!0),has:(qe,Oe)=>qe instanceof IDBTransaction&&("done"===Oe||"store"===Oe)||Oe in qe};function Ie(qe){return"function"==typeof qe?function Ft(qe){return qe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ne(){return Re||(Re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(qe)?function(...Oe){return qe.apply(ke(this),Oe),ce(ue.get(this))}:function(...Oe){return ce(qe.apply(ke(this),Oe))}:function(Oe,...st){const Ht=qe.call(ke(this),Oe,...st);return De.set(Ht,Oe.sort?Oe.sort():[Oe]),ce(Ht)}}(qe):(qe instanceof IDBTransaction&&function nt(qe){if(he.has(qe))return;const Oe=new Promise((st,Ht)=>{const Zt=()=>{qe.removeEventListener("complete",Tt),qe.removeEventListener("error",Xt),qe.removeEventListener("abort",Xt)},Tt=()=>{st(),Zt()},Xt=()=>{Ht(qe.error||new DOMException("AbortError","AbortError")),Zt()};qe.addEventListener("complete",Tt),qe.addEventListener("error",Xt),qe.addEventListener("abort",Xt)});he.set(qe,Oe)}(qe),pe(qe,function R(){return ve||(ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(qe,pt):qe)}function ce(qe){if(qe instanceof IDBRequest)return function ht(qe){const Oe=new Promise((st,Ht)=>{const Zt=()=>{qe.removeEventListener("success",Tt),qe.removeEventListener("error",Xt)},Tt=()=>{st(ce(qe.result)),Zt()},Xt=()=>{Ht(qe.error),Zt()};qe.addEventListener("success",Tt),qe.addEventListener("error",Xt)});return Oe.then(st=>{st instanceof IDBCursor&&ue.set(st,qe)}).catch(()=>{}),Ke.set(Oe,qe),Oe}(qe);if(et.has(qe))return et.get(qe);const Oe=Ie(qe);return Oe!==qe&&(et.set(qe,Oe),Ke.set(Oe,qe)),Oe}const ke=qe=>Ke.get(qe),Qe=["get","getKey","getAll","getAllKeys","count"],rt=["put","add","delete","clear"],fe=new Map;function Et(qe,Oe){if(!(qe instanceof IDBDatabase)||Oe in qe||"string"!=typeof Oe)return;if(fe.get(Oe))return fe.get(Oe);const st=Oe.replace(/FromIndex$/,""),Ht=Oe!==st,Zt=rt.includes(st);if(!(st in(Ht?IDBIndex:IDBObjectStore).prototype)||!Zt&&!Qe.includes(st))return;const Tt=function(){var Xt=(0,w.Z)(function*(Gn,...Wn){const ii=this.transaction(Gn,Zt?"readwrite":"readonly");let ti=ii.store;return Ht&&(ti=ti.index(Wn.shift())),(yield Promise.all([ti[st](...Wn),Zt&&ii.done]))[0]});return function(Wn){return Xt.apply(this,arguments)}}();return fe.set(Oe,Tt),Tt}!function ut(qe){pt=qe(pt)}(qe=>({...qe,get:(Oe,st,Ht)=>Et(Oe,st)||qe.get(Oe,st,Ht),has:(Oe,st)=>!!Et(Oe,st)||qe.has(Oe,st)}));class lt{constructor(Oe){this.container=Oe}getPlatformInfoString(){return this.container.getProviders().map(st=>{if(function ur(qe){const Oe=qe.getComponent();return"VERSION"===Oe?.type}(st)){const Ht=st.getImmediate();return`${Ht.library}/${Ht.version}`}return null}).filter(st=>st).join(" ")}}const Ar="@firebase/app",an=new ie.Yd("@firebase/app"),Kt="[DEFAULT]",vn={[Ar]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Bt=new Map,Vn=new Map;function Un(qe,Oe){try{qe.container.addComponent(Oe)}catch(st){an.debug(`Component ${Oe.name} failed to register with FirebaseApp ${qe.name}`,st)}}function ei(qe,Oe){qe.container.addOrOverwriteComponent(Oe)}function zn(qe){const Oe=qe.name;if(Vn.has(Oe))return an.debug(`There were multiple attempts to register component ${Oe}.`),!1;Vn.set(Oe,qe);for(const st of Bt.values())Un(st,qe);return!0}function br(qe,Oe){const st=qe.container.getProvider("heartbeat").getImmediate({optional:!0});return st&&st.triggerHeartbeat(),qe.container.getProvider(Oe)}function To(qe,Oe,st=Kt){br(qe,Oe).clearInstance(st)}function kt(){Vn.clear()}const dn=new Ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Er{constructor(Oe,st,Ht){this._isDeleted=!1,this._options=Object.assign({},Oe),this._config=Object.assign({},st),this._name=st.name,this._automaticDataCollectionEnabled=st.automaticDataCollectionEnabled,this._container=Ht,this.container.addComponent(new W.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Oe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Oe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Oe){this._isDeleted=Oe}checkDestroyed(){if(this.isDeleted)throw dn.create("app-deleted",{appName:this._name})}}const mn="10.6.0";function Yi(qe,Oe={}){let st=qe;"object"!=typeof Oe&&(Oe={name:Oe});const Ht=Object.assign({name:Kt,automaticDataCollectionEnabled:!1},Oe),Zt=Ht.name;if("string"!=typeof Zt||!Zt)throw dn.create("bad-app-name",{appName:String(Zt)});if(st||(st=(0,Ee.aH)()),!st)throw dn.create("no-options");const Tt=Bt.get(Zt);if(Tt){if((0,Ee.vZ)(st,Tt.options)&&(0,Ee.vZ)(Ht,Tt.config))return Tt;throw dn.create("duplicate-app",{appName:Zt})}const Xt=new W.H0(Zt);for(const Wn of Vn.values())Xt.addComponent(Wn);const Gn=new Er(st,Ht,Xt);return Bt.set(Zt,Gn),Gn}function Hr(qe=Kt){const Oe=Bt.get(qe);if(!Oe&&qe===Kt&&(0,Ee.aH)())return Yi();if(!Oe)throw dn.create("no-app",{appName:qe});return Oe}function di(){return Array.from(Bt.values())}function Ur(qe){return $r.apply(this,arguments)}function $r(){return($r=(0,w.Z)(function*(qe){const Oe=qe.name;Bt.has(Oe)&&(Bt.delete(Oe),yield Promise.all(qe.container.getProviders().map(st=>st.delete())),qe.isDeleted=!0)})).apply(this,arguments)}function Ti(qe,Oe,st){var Ht;let Zt=null!==(Ht=vn[qe])&&void 0!==Ht?Ht:qe;st&&(Zt+=`-${st}`);const Tt=Zt.match(/\s|\//),Xt=Oe.match(/\s|\//);if(Tt||Xt){const Gn=[`Unable to register library "${Zt}" with version "${Oe}":`];return Tt&&Gn.push(`library name "${Zt}" contains illegal characters (whitespace or "/")`),Tt&&Xt&&Gn.push("and"),Xt&&Gn.push(`version name "${Oe}" contains illegal characters (whitespace or "/")`),void an.warn(Gn.join(" "))}zn(new W.wA(`${Zt}-version`,()=>({library:Zt,version:Oe}),"VERSION"))}function Bi(qe,Oe){if(null!==qe&&"function"!=typeof qe)throw dn.create("invalid-log-argument");(0,ie.Am)(qe,Oe)}function rr(qe){(0,ie.Ub)(qe)}const xr="firebase-heartbeat-database",us=1,me="firebase-heartbeat-store";let ee=null;function te(){return ee||(ee=function Ce(qe,Oe,{blocked:st,upgrade:Ht,blocking:Zt,terminated:Tt}={}){const Xt=indexedDB.open(qe,Oe),Gn=ce(Xt);return Ht&&Xt.addEventListener("upgradeneeded",Wn=>{Ht(ce(Xt.result),Wn.oldVersion,Wn.newVersion,ce(Xt.transaction),Wn)}),st&&Xt.addEventListener("blocked",Wn=>st(Wn.oldVersion,Wn.newVersion,Wn)),Gn.then(Wn=>{Tt&&Wn.addEventListener("close",()=>Tt()),Zt&&Wn.addEventListener("versionchange",ii=>Zt(ii.oldVersion,ii.newVersion,ii))}).catch(()=>{}),Gn}(xr,us,{upgrade:(qe,Oe)=>{0===Oe&&qe.createObjectStore(me)}}).catch(qe=>{throw dn.create("idb-open",{originalErrorMessage:qe.message})})),ee}function ne(){return(ne=(0,w.Z)(function*(qe){try{return yield(yield te()).transaction(me).objectStore(me).get(dt(qe))}catch(Oe){if(Oe instanceof Ee.ZR)an.warn(Oe.message);else{const st=dn.create("idb-get",{originalErrorMessage:Oe?.message});an.warn(st.message)}}})).apply(this,arguments)}function Pe(qe,Oe){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,w.Z)(function*(qe,Oe){try{const Ht=(yield te()).transaction(me,"readwrite");yield Ht.objectStore(me).put(Oe,dt(qe)),yield Ht.done}catch(st){if(st instanceof Ee.ZR)an.warn(st.message);else{const Ht=dn.create("idb-set",{originalErrorMessage:st?.message});an.warn(Ht.message)}}})).apply(this,arguments)}function dt(qe){return`${qe.name}!${qe.options.appId}`}class Dt{constructor(Oe){this.container=Oe,this._heartbeatsCache=null;const st=this.container.getProvider("app").getImmediate();this._storage=new Ci(st),this._heartbeatsCachePromise=this._storage.read().then(Ht=>(this._heartbeatsCache=Ht,Ht))}triggerHeartbeat(){var Oe=this;return(0,w.Z)(function*(){var st;const Zt=Oe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=Lt();if(null==(null===(st=Oe._heartbeatsCache)||void 0===st?void 0:st.heartbeats)&&(Oe._heartbeatsCache=yield Oe._heartbeatsCachePromise),Oe._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!Oe._heartbeatsCache.heartbeats.some(Xt=>Xt.date===Tt))return Oe._heartbeatsCache.heartbeats.push({date:Tt,agent:Zt}),Oe._heartbeatsCache.heartbeats=Oe._heartbeatsCache.heartbeats.filter(Xt=>{const Gn=new Date(Xt.date).valueOf();return Date.now()-Gn<=2592e6}),Oe._storage.overwrite(Oe._heartbeatsCache)})()}getHeartbeatsHeader(){var Oe=this;return(0,w.Z)(function*(){var st;if(null===Oe._heartbeatsCache&&(yield Oe._heartbeatsCachePromise),null==(null===(st=Oe._heartbeatsCache)||void 0===st?void 0:st.heartbeats)||0===Oe._heartbeatsCache.heartbeats.length)return"";const Ht=Lt(),{heartbeatsToSend:Zt,unsentEntries:Tt}=function cr(qe,Oe=1024){const st=[];let Ht=qe.slice();for(const Zt of qe){const Tt=st.find(Xt=>Xt.agent===Zt.agent);if(Tt){if(Tt.dates.push(Zt.date),Co(st)>Oe){Tt.dates.pop();break}}else if(st.push({agent:Zt.agent,dates:[Zt.date]}),Co(st)>Oe){st.pop();break}Ht=Ht.slice(1)}return{heartbeatsToSend:st,unsentEntries:Ht}}(Oe._heartbeatsCache.heartbeats),Xt=(0,Ee.L)(JSON.stringify({version:2,heartbeats:Zt}));return Oe._heartbeatsCache.lastSentHeartbeatDate=Ht,Tt.length>0?(Oe._heartbeatsCache.heartbeats=Tt,yield Oe._storage.overwrite(Oe._heartbeatsCache)):(Oe._heartbeatsCache.heartbeats=[],Oe._storage.overwrite(Oe._heartbeatsCache)),Xt})()}}function Lt(){return(new Date).toISOString().substring(0,10)}class Ci{constructor(Oe){this.app=Oe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,w.Z)(function*(){return!!(0,Ee.hl)()&&(0,Ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Oe=this;return(0,w.Z)(function*(){return(yield Oe._canUseIndexedDBPromise)&&(yield function J(qe){return ne.apply(this,arguments)}(Oe.app))||{heartbeats:[]}})()}overwrite(Oe){var st=this;return(0,w.Z)(function*(){var Ht;if(yield st._canUseIndexedDBPromise){const Tt=yield st.read();return Pe(st.app,{lastSentHeartbeatDate:null!==(Ht=Oe.lastSentHeartbeatDate)&&void 0!==Ht?Ht:Tt.lastSentHeartbeatDate,heartbeats:Oe.heartbeats})}})()}add(Oe){var st=this;return(0,w.Z)(function*(){var Ht;if(yield st._canUseIndexedDBPromise){const Tt=yield st.read();return Pe(st.app,{lastSentHeartbeatDate:null!==(Ht=Oe.lastSentHeartbeatDate)&&void 0!==Ht?Ht:Tt.lastSentHeartbeatDate,heartbeats:[...Tt.heartbeats,...Oe.heartbeats]})}})()}}function Co(qe){return(0,Ee.L)(JSON.stringify({version:2,heartbeats:qe})).length}!function Ua(qe){zn(new W.wA("platform-logger",Oe=>new lt(Oe),"PRIVATE")),zn(new W.wA("heartbeat",Oe=>new Dt(Oe),"PRIVATE")),Ti(Ar,"0.9.23",qe),Ti(Ar,"0.9.23","esm2017"),Ti("fire-js","")}("")},4537:(bt,Le,$)=>{$.d(Le,{H0:()=>R,wA:()=>ie});var w=$(5861),W=$(9058);class ie{constructor(ue,he,De){this.name=ue,this.instanceFactory=he,this.type=De,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ue){return this.instantiationMode=ue,this}setMultipleInstances(ue){return this.multipleInstances=ue,this}setServiceProps(ue){return this.serviceProps=ue,this}setInstanceCreatedCallback(ue){return this.onInstanceCreated=ue,this}}const Ee="[DEFAULT]";class pe{constructor(ue,he){this.name=ue,this.container=he,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ue){const he=this.normalizeInstanceIdentifier(ue);if(!this.instancesDeferred.has(he)){const De=new W.BH;if(this.instancesDeferred.set(he,De),this.isInitialized(he)||this.shouldAutoInitialize())try{const et=this.getOrInitializeService({instanceIdentifier:he});et&&De.resolve(et)}catch{}}return this.instancesDeferred.get(he).promise}getImmediate(ue){var he;const De=this.normalizeInstanceIdentifier(ue?.identifier),et=null!==(he=ue?.optional)&&void 0!==he&&he;if(!this.isInitialized(De)&&!this.shouldAutoInitialize()){if(et)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:De})}catch(Ke){if(et)return null;throw Ke}}getComponent(){return this.component}setComponent(ue){if(ue.name!==this.name)throw Error(`Mismatching Component ${ue.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ue,this.shouldAutoInitialize()){if(function Re(Ne){return"EAGER"===Ne.instantiationMode}(ue))try{this.getOrInitializeService({instanceIdentifier:Ee})}catch{}for(const[he,De]of this.instancesDeferred.entries()){const et=this.normalizeInstanceIdentifier(he);try{const Ke=this.getOrInitializeService({instanceIdentifier:et});De.resolve(Ke)}catch{}}}}clearInstance(ue=Ee){this.instancesDeferred.delete(ue),this.instancesOptions.delete(ue),this.instances.delete(ue)}delete(){var ue=this;return(0,w.Z)(function*(){const he=Array.from(ue.instances.values());yield Promise.all([...he.filter(De=>"INTERNAL"in De).map(De=>De.INTERNAL.delete()),...he.filter(De=>"_delete"in De).map(De=>De._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ue=Ee){return this.instances.has(ue)}getOptions(ue=Ee){return this.instancesOptions.get(ue)||{}}initialize(ue={}){const{options:he={}}=ue,De=this.normalizeInstanceIdentifier(ue.instanceIdentifier);if(this.isInitialized(De))throw Error(`${this.name}(${De}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const et=this.getOrInitializeService({instanceIdentifier:De,options:he});for(const[Ke,ht]of this.instancesDeferred.entries())De===this.normalizeInstanceIdentifier(Ke)&&ht.resolve(et);return et}onInit(ue,he){var De;const et=this.normalizeInstanceIdentifier(he),Ke=null!==(De=this.onInitCallbacks.get(et))&&void 0!==De?De:new Set;Ke.add(ue),this.onInitCallbacks.set(et,Ke);const ht=this.instances.get(et);return ht&&ue(ht,et),()=>{Ke.delete(ue)}}invokeOnInitCallbacks(ue,he){const De=this.onInitCallbacks.get(he);if(De)for(const et of De)try{et(ue,he)}catch{}}getOrInitializeService({instanceIdentifier:ue,options:he={}}){let De=this.instances.get(ue);if(!De&&this.component&&(De=this.component.instanceFactory(this.container,{instanceIdentifier:(Ne=ue,Ne===Ee?void 0:Ne),options:he}),this.instances.set(ue,De),this.instancesOptions.set(ue,he),this.invokeOnInitCallbacks(De,ue),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ue,De)}catch{}var Ne;return De||null}normalizeInstanceIdentifier(ue=Ee){return this.component?this.component.multipleInstances?ue:Ee:ue}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class R{constructor(ue){this.name=ue,this.providers=new Map}addComponent(ue){const he=this.getProvider(ue.name);if(he.isComponentSet())throw new Error(`Component ${ue.name} has already been registered with ${this.name}`);he.setComponent(ue)}addOrOverwriteComponent(ue){this.getProvider(ue.name).isComponentSet()&&this.providers.delete(ue.name),this.addComponent(ue)}getProvider(ue){if(this.providers.has(ue))return this.providers.get(ue);const he=new pe(ue,this);return this.providers.set(ue,he),he}getProviders(){return Array.from(this.providers.values())}}},7879:(bt,Le,$)=>{$.d(Le,{Am:()=>Ne,Ub:()=>R,Yd:()=>Re,in:()=>W});const w=[];var W=function(ue){return ue[ue.DEBUG=0]="DEBUG",ue[ue.VERBOSE=1]="VERBOSE",ue[ue.INFO=2]="INFO",ue[ue.WARN=3]="WARN",ue[ue.ERROR=4]="ERROR",ue[ue.SILENT=5]="SILENT",ue}(W||{});const ie={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},Ee=W.INFO,pe={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},ve=(ue,he,...De)=>{if(he<ue.logLevel)return;const et=(new Date).toISOString(),Ke=pe[he];if(!Ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${he})`);console[Ke](`[${et}]  ${ue.name}:`,...De)};class Re{constructor(he){this.name=he,this._logLevel=Ee,this._logHandler=ve,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(he){if(!(he in W))throw new TypeError(`Invalid value "${he}" assigned to \`logLevel\``);this._logLevel=he}setLogLevel(he){this._logLevel="string"==typeof he?ie[he]:he}get logHandler(){return this._logHandler}set logHandler(he){if("function"!=typeof he)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=he}get userLogHandler(){return this._userLogHandler}set userLogHandler(he){this._userLogHandler=he}debug(...he){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...he),this._logHandler(this,W.DEBUG,...he)}log(...he){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...he),this._logHandler(this,W.VERBOSE,...he)}info(...he){this._userLogHandler&&this._userLogHandler(this,W.INFO,...he),this._logHandler(this,W.INFO,...he)}warn(...he){this._userLogHandler&&this._userLogHandler(this,W.WARN,...he),this._logHandler(this,W.WARN,...he)}error(...he){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...he),this._logHandler(this,W.ERROR,...he)}}function R(ue){w.forEach(he=>{he.setLogLevel(ue)})}function Ne(ue,he){for(const De of w){let et=null;he&&he.level&&(et=ie[he.level]),De.userLogHandler=null===ue?null:(Ke,ht,...nt)=>{const pt=nt.map(ut=>{if(null==ut)return null;if("string"==typeof ut)return ut;if("number"==typeof ut||"boolean"==typeof ut)return ut.toString();if(ut instanceof Error)return ut.message;try{return JSON.stringify(ut)}catch{return null}}).filter(ut=>ut).join(" ");ht>=(et??Ke.logLevel)&&ue({level:W[ht].toLowerCase(),message:pt,args:nt,type:Ke.name})}}}},7142:(bt,Le,$)=>{$.d(Le,{Z:()=>w.Z});var w=$(3106);w.Z.registerVersion("firebase","10.6.0","app-compat")},3956:(bt,Le,$)=>{$.r(Le);var w=$(5861),W=$(3106),ie=$(9058),Ee=$(534),pe=$(7879),ve=$(7582),Re=$(4537);const Ne={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const ht=function et(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},nt=function Ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pt=new ie.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ft=new pe.Yd("@firebase/auth");function ce(_,...d){Ft.logLevel<=pe.in.ERROR&&Ft.error(`Auth (${Ee.SDK_VERSION}): ${_}`,...d)}function ke(_,...d){throw rt(_,...d)}function Ce(_,...d){return rt(_,...d)}function Ge(_,d,p){const I=Object.assign(Object.assign({},nt()),{[d]:p});return new ie.LL("auth","Firebase",I).create(d,{appName:_.name})}function Qe(_,d,p){if(!(d instanceof p))throw p.name!==d.constructor.name&&ke(_,"argument-error"),Ge(_,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rt(_,...d){if("string"!=typeof _){const p=d[0],I=[...d.slice(1)];return I[0]&&(I[0].appName=_.name),_._errorFactory.create(p,...I)}return pt.create(_,...d)}function fe(_,d,...p){if(!_)throw rt(d,...p)}function Et(_){const d="INTERNAL ASSERTION FAILED: "+_;throw ce(d),new Error(d)}function lt(_,d){_||Et(d)}function ur(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Ar(){return"http:"===lr()||"https:"===lr()}function lr(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Rt{constructor(d,p){this.shortDelay=d,this.longDelay=p,lt(p>d,"Short delay should be less than long delay!"),this.isMobile=(0,ie.uI)()||(0,ie.b$)()}get(){return function an(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ar()||(0,ie.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _e(_,d){lt(_.emulator,"Emulator should always be set here");const{url:p}=_.emulator;return d?`${p}${d.startsWith("/")?d.slice(1):d}`:p}class we{static initialize(d,p,I){this.fetchImpl=d,p&&(this.headersImpl=p),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Et("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Et("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Et("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ve={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},be=new Rt(3e4,6e4);function Se(_,d){return _.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:_.tenantId}):d}function Be(_,d,p,I){return yt.apply(this,arguments)}function yt(){return(yt=(0,w.Z)(function*(_,d,p,I,V={}){return gt(_,V,(0,w.Z)(function*(){let Z={},ge={};I&&("GET"===d?ge=I:Z={body:JSON.stringify(I)});const Fe=(0,ie.xO)(Object.assign({key:_.config.apiKey},ge)).slice(1),tt=yield _._getAdditionalHeaders();return tt["Content-Type"]="application/json",_.languageCode&&(tt["X-Firebase-Locale"]=_.languageCode),we.fetch()(en(_,_.config.apiHost,p,Fe),Object.assign({method:d,headers:tt,referrerPolicy:"no-referrer"},Z))}))})).apply(this,arguments)}function gt(_,d,p){return mr.apply(this,arguments)}function mr(){return(mr=(0,w.Z)(function*(_,d,p){_._canInitEmulator=!1;const I=Object.assign(Object.assign({},Ve),d);try{const V=new sn(_),Z=yield Promise.race([p(),V.promise]);V.clearNetworkTimeout();const ge=yield Z.json();if("needConfirmation"in ge)throw yn(_,"account-exists-with-different-credential",ge);if(Z.ok&&!("errorMessage"in ge))return ge;{const Fe=Z.ok?ge.errorMessage:ge.error.message,[tt,Nt]=Fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===tt)throw yn(_,"credential-already-in-use",ge);if("EMAIL_EXISTS"===tt)throw yn(_,"email-already-in-use",ge);if("USER_DISABLED"===tt)throw yn(_,"user-disabled",ge);const Yt=I[tt]||tt.toLowerCase().replace(/[_\s]+/g,"-");if(Nt)throw Ge(_,Yt,Nt);ke(_,Yt)}}catch(V){if(V instanceof ie.ZR)throw V;ke(_,"network-request-failed",{message:String(V)})}})).apply(this,arguments)}function Pt(_,d,p,I){return wn.apply(this,arguments)}function wn(){return(wn=(0,w.Z)(function*(_,d,p,I,V={}){const Z=yield Be(_,d,p,I,V);return"mfaPendingCredential"in Z&&ke(_,"multi-factor-auth-required",{_serverResponse:Z}),Z})).apply(this,arguments)}function en(_,d,p,I){const V=`${d}${p}?${I}`;return _.config.emulator?_e(_.config,V):`${_.config.apiScheme}://${V}`}function Ln(_){switch(_){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sn{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((p,I)=>{this.timer=setTimeout(()=>I(Ce(this.auth,"network-request-failed")),be.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yn(_,d,p){const I={appName:_.name};p.email&&(I.email=p.email),p.phoneNumber&&(I.phoneNumber=p.phoneNumber);const V=Ce(_,d,I);return V.customData._tokenResponse=p,V}function $n(_){return void 0!==_&&void 0!==_.getResponse}function qt(_){return void 0!==_&&void 0!==_.enterprise}class En{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const p of this.recaptchaEnforcementState)if(p.provider&&p.provider===d)return Ln(p.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function Xn(){return(Xn=(0,w.Z)(function*(_){return(yield Be(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ui(_,d){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,w.Z)(function*(_,d){return Be(_,"GET","/v2/recaptchaConfig",Se(_,d))})).apply(this,arguments)}function Kt(){return(Kt=(0,w.Z)(function*(_,d){return Be(_,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Bt(){return(Bt=(0,w.Z)(function*(_,d){return Be(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Un(){return(Un=(0,w.Z)(function*(_,d){return Be(_,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function ei(_){if(_)try{const d=new Date(Number(_));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function To(){return(To=(0,w.Z)(function*(_,d=!1){const p=(0,ie.m9)(_),I=yield p.getIdToken(d),V=Qi(I);fe(V&&V.exp&&V.auth_time&&V.iat,p.auth,"internal-error");const Z="object"==typeof V.firebase?V.firebase:void 0,ge=Z?.sign_in_provider;return{claims:V,token:I,authTime:ei(kt(V.auth_time)),issuedAtTime:ei(kt(V.iat)),expirationTime:ei(kt(V.exp)),signInProvider:ge||null,signInSecondFactor:Z?.sign_in_second_factor||null}})).apply(this,arguments)}function kt(_){return 1e3*Number(_)}function Qi(_){const[d,p,I]=_.split(".");if(void 0===d||void 0===p||void 0===I)return ce("JWT malformed, contained fewer than 3 sections"),null;try{const V=(0,ie.tV)(p);return V?JSON.parse(V):(ce("Failed to decode base64 JWT payload"),null)}catch(V){return ce("Caught error parsing JWT payload as JSON",V?.toString()),null}}function Er(_,d){return mn.apply(this,arguments)}function mn(){return(mn=(0,w.Z)(function*(_,d,p=!1){if(p)return d;try{return yield d}catch(I){throw I instanceof ie.ZR&&function Yi({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}(I)&&_.auth.currentUser===_&&(yield _.auth.signOut()),I}})).apply(this,arguments)}class Hr{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var p;if(d){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const V=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,V)}}schedule(d=!1){var p=this;if(!this.isRunning)return;const I=this.getInterval(d);this.timerId=setTimeout((0,w.Z)(function*(){yield p.iteration()}),I)}iteration(){var d=this;return(0,w.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&d.schedule(!0))}d.schedule()})()}}class di{constructor(d,p){this.createdAt=d,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=ei(this.lastLoginAt),this.creationTime=ei(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ur(_){return $r.apply(this,arguments)}function $r(){return $r=(0,w.Z)(function*(_){var d;const p=_.auth,I=yield _.getIdToken(),V=yield Er(_,function Vn(_,d){return Un.apply(this,arguments)}(p,{idToken:I}));fe(V?.users.length,p,"internal-error");const Z=V.users[0];_._notifyReloadListener(Z);const ge=null!==(d=Z.providerUserInfo)&&void 0!==d&&d.length?function xr(_){return _.map(d=>{var{providerId:p}=d,I=(0,ve._T)(d,["providerId"]);return{providerId:p,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(Z.providerUserInfo):[],Fe=function rr(_,d){return[..._.filter(I=>!d.some(V=>V.providerId===I.providerId)),...d]}(_.providerData,ge),Yt=!!_.isAnonymous&&!(_.email&&Z.passwordHash||Fe?.length),Wt={uid:Z.localId,displayName:Z.displayName||null,photoURL:Z.photoUrl||null,email:Z.email||null,emailVerified:Z.emailVerified||!1,phoneNumber:Z.phoneNumber||null,tenantId:Z.tenantId||null,providerData:Fe,metadata:new di(Z.createdAt,Z.lastLoginAt),isAnonymous:Yt};Object.assign(_,Wt)}),$r.apply(this,arguments)}function Bi(){return(Bi=(0,w.Z)(function*(_){const d=(0,ie.m9)(_);yield Ur(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function me(){return(me=(0,w.Z)(function*(_,d){const p=yield gt(_,{},(0,w.Z)(function*(){const I=(0,ie.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:V,apiKey:Z}=_.config,ge=en(_,V,"/v1/token",`key=${Z}`),Fe=yield _._getAdditionalHeaders();return Fe["Content-Type"]="application/x-www-form-urlencoded",we.fetch()(ge,{method:"POST",headers:Fe,body:I})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}function te(){return(te=(0,w.Z)(function*(_,d){return Be(_,"POST","/v2/accounts:revokeToken",Se(_,d))})).apply(this,arguments)}class J{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){fe(d.idToken,"internal-error"),fe(typeof d.idToken<"u","internal-error"),fe(typeof d.refreshToken<"u","internal-error");const p="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function dn(_){const d=Qi(_);return fe(d,"internal-error"),fe(typeof d.exp<"u","internal-error"),fe(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,p)}getToken(d,p=!1){var I=this;return(0,w.Z)(function*(){return fe(!I.accessToken||I.refreshToken,d,"user-token-expired"),p||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(d,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,p){var I=this;return(0,w.Z)(function*(){const{accessToken:V,refreshToken:Z,expiresIn:ge}=yield function us(_,d){return me.apply(this,arguments)}(d,p);I.updateTokensAndExpiration(V,Z,Number(ge))})()}updateTokensAndExpiration(d,p,I){this.refreshToken=p||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(d,p){const{refreshToken:I,accessToken:V,expirationTime:Z}=p,ge=new J;return I&&(fe("string"==typeof I,"internal-error",{appName:d}),ge.refreshToken=I),V&&(fe("string"==typeof V,"internal-error",{appName:d}),ge.accessToken=V),Z&&(fe("number"==typeof Z,"internal-error",{appName:d}),ge.expirationTime=Z),ge}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new J,this.toJSON())}_performRefresh(){return Et("not implemented")}}function ne(_,d){fe("string"==typeof _||typeof _>"u","internal-error",{appName:d})}class Pe{constructor(d){var{uid:p,auth:I,stsTokenManager:V}=d,Z=(0,ve._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=I,this.stsTokenManager=V,this.accessToken=V.accessToken,this.displayName=Z.displayName||null,this.email=Z.email||null,this.emailVerified=Z.emailVerified||!1,this.phoneNumber=Z.phoneNumber||null,this.photoURL=Z.photoURL||null,this.isAnonymous=Z.isAnonymous||!1,this.tenantId=Z.tenantId||null,this.providerData=Z.providerData?[...Z.providerData]:[],this.metadata=new di(Z.createdAt||void 0,Z.lastLoginAt||void 0)}getIdToken(d){var p=this;return(0,w.Z)(function*(){const I=yield Er(p,p.stsTokenManager.getToken(p.auth,d));return fe(I,p.auth,"internal-error"),p.accessToken!==I&&(p.accessToken=I,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),I})()}getIdTokenResult(d){return function br(_){return To.apply(this,arguments)}(this,d)}reload(){return function Ti(_){return Bi.apply(this,arguments)}(this)}_assign(d){this!==d&&(fe(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(p=>Object.assign({},p)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const p=new Pe(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(d){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,p=!1){var I=this;return(0,w.Z)(function*(){let V=!1;d.idToken&&d.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(d),V=!0),p&&(yield Ur(I)),yield I.auth._persistUserIfCurrent(I),V&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var d=this;return(0,w.Z)(function*(){const p=yield d.getIdToken();return yield Er(d,function Zn(_,d){return Kt.apply(this,arguments)}(d.auth,{idToken:p})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,p){var I,V,Z,ge,Fe,tt,Nt,Yt;const Wt=null!==(I=p.displayName)&&void 0!==I?I:void 0,Lr=null!==(V=p.email)&&void 0!==V?V:void 0,La=null!==(Z=p.phoneNumber)&&void 0!==Z?Z:void 0,Gd=null!==(ge=p.photoURL)&&void 0!==ge?ge:void 0,Mi=null!==(Fe=p.tenantId)&&void 0!==Fe?Fe:void 0,vc=null!==(tt=p._redirectEventId)&&void 0!==tt?tt:void 0,rl=null!==(Nt=p.createdAt)&&void 0!==Nt?Nt:void 0,Yl=null!==(Yt=p.lastLoginAt)&&void 0!==Yt?Yt:void 0,{uid:ga,emailVerified:Wd,isAnonymous:Jf,providerData:Mu,stsTokenManager:kh}=p;fe(ga&&kh,d,"internal-error");const Fh=J.fromJSON(this.name,kh);fe("string"==typeof ga,d,"internal-error"),ne(Wt,d.name),ne(Lr,d.name),fe("boolean"==typeof Wd,d,"internal-error"),fe("boolean"==typeof Jf,d,"internal-error"),ne(La,d.name),ne(Gd,d.name),ne(Mi,d.name),ne(vc,d.name),ne(rl,d.name),ne(Yl,d.name);const od=new Pe({uid:ga,auth:d,email:Lr,emailVerified:Wd,displayName:Wt,isAnonymous:Jf,photoURL:Gd,phoneNumber:La,tenantId:Mi,stsTokenManager:Fh,createdAt:rl,lastLoginAt:Yl});return Mu&&Array.isArray(Mu)&&(od.providerData=Mu.map(Xf=>Object.assign({},Xf))),vc&&(od._redirectEventId=vc),od}static _fromIdTokenResponse(d,p,I=!1){return(0,w.Z)(function*(){const V=new J;V.updateFromServerResponse(p);const Z=new Pe({uid:p.localId,auth:d,stsTokenManager:V,isAnonymous:I});return yield Ur(Z),Z})()}}const Ze=new Map;function dt(_){lt(_ instanceof Function,"Expected a class definition");let d=Ze.get(_);return d?(lt(d instanceof _,"Instance stored in cache mismatched with class"),d):(d=new _,Ze.set(_,d),d)}const rn=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.Z)(function*(){return!0})()}_set(p,I){var V=this;return(0,w.Z)(function*(){V.storage[p]=I})()}_get(p){var I=this;return(0,w.Z)(function*(){const V=I.storage[p];return void 0===V?null:V})()}_remove(p){var I=this;return(0,w.Z)(function*(){delete I.storage[p]})()}_addListener(p,I){}_removeListener(p,I){}}return _.type="NONE",_})();function Dt(_,d,p){return`firebase:${_}:${d}:${p}`}class Lt{constructor(d,p,I){this.persistence=d,this.auth=p,this.userKey=I;const{config:V,name:Z}=this.auth;this.fullUserKey=Dt(this.userKey,V.apiKey,Z),this.fullPersistenceKey=Dt("persistence",V.apiKey,Z),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,w.Z)(function*(){const p=yield d.persistence._get(d.fullUserKey);return p?Pe._fromJSON(d.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var p=this;return(0,w.Z)(function*(){if(p.persistence===d)return;const I=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=d,I?p.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,p,I="authUser"){return(0,w.Z)(function*(){if(!p.length)return new Lt(dt(rn),d,I);const V=(yield Promise.all(p.map(function(){var Nt=(0,w.Z)(function*(Yt){if(yield Yt._isAvailable())return Yt});return function(Yt){return Nt.apply(this,arguments)}}()))).filter(Nt=>Nt);let Z=V[0]||dt(rn);const ge=Dt(I,d.config.apiKey,d.name);let Fe=null;for(const Nt of p)try{const Yt=yield Nt._get(ge);if(Yt){const Wt=Pe._fromJSON(d,Yt);Nt!==Z&&(Fe=Wt),Z=Nt;break}}catch{}const tt=V.filter(Nt=>Nt._shouldAllowMigration);return Z._shouldAllowMigration&&tt.length?(Z=tt[0],Fe&&(yield Z._set(ge,Fe.toJSON())),yield Promise.all(p.map(function(){var Nt=(0,w.Z)(function*(Yt){if(Yt!==Z)try{yield Yt._remove(ge)}catch{}});return function(Yt){return Nt.apply(this,arguments)}}())),new Lt(Z,d,I)):new Lt(Z,d,I)})()}}function cr(_){const d=_.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(qe(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Ci(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(st(d))return"Blackberry";if(Ht(d))return"Webos";if(Co(d))return"Safari";if((d.includes("chrome/")||Ua(d))&&!d.includes("edge/"))return"Chrome";if(Oe(d))return"Android";{const I=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function Ci(_=(0,ie.z$)()){return/firefox\//i.test(_)}function Co(_=(0,ie.z$)()){const d=_.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Ua(_=(0,ie.z$)()){return/crios\//i.test(_)}function qe(_=(0,ie.z$)()){return/iemobile/i.test(_)}function Oe(_=(0,ie.z$)()){return/android/i.test(_)}function st(_=(0,ie.z$)()){return/blackberry/i.test(_)}function Ht(_=(0,ie.z$)()){return/webos/i.test(_)}function Zt(_=(0,ie.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function Wn(_=(0,ie.z$)()){return Zt(_)||Oe(_)||Ht(_)||st(_)||/windows phone/i.test(_)||qe(_)}function ti(_,d=[]){let p;switch(_){case"Browser":p=cr((0,ie.z$)());break;case"Worker":p=`${cr((0,ie.z$)())}-${_}`;break;default:p=_}const I=d.length?d.join(","):"FirebaseCore-web";return`${p}/JsCore/${Ee.SDK_VERSION}/${I}`}class ls{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,p){const I=Z=>new Promise((ge,Fe)=>{try{ge(d(Z))}catch(tt){Fe(tt)}});I.onAbort=p,this.queue.push(I);const V=this.queue.length-1;return()=>{this.queue[V]=()=>Promise.resolve()}}runMiddleware(d){var p=this;return(0,w.Z)(function*(){if(p.auth.currentUser===d)return;const I=[];try{for(const V of p.queue)yield V(d),V.onAbort&&I.push(V.onAbort)}catch(V){I.reverse();for(const Z of I)try{Z()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:V?.message})}})()}}function Qs(){return(Qs=(0,w.Z)(function*(_,d={}){return Be(_,"GET","/v2/passwordPolicy",Se(_,d))})).apply(this,arguments)}class Js{constructor(d){var p,I,V,Z;const ge=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(p=ge.minPasswordLength)&&void 0!==p?p:6,ge.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ge.maxPasswordLength),void 0!==ge.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ge.containsLowercaseCharacter),void 0!==ge.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ge.containsUppercaseCharacter),void 0!==ge.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ge.containsNumericCharacter),void 0!==ge.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ge.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(V=null===(I=d.allowedNonAlphanumericCharacters)||void 0===I?void 0:I.join(""))&&void 0!==V?V:"",this.forceUpgradeOnSignin=null!==(Z=d.forceUpgradeOnSignin)&&void 0!==Z&&Z,this.schemaVersion=d.schemaVersion}validatePassword(d){var p,I,V,Z,ge,Fe;const tt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,tt),this.validatePasswordCharacterOptions(d,tt),tt.isValid&&(tt.isValid=null===(p=tt.meetsMinPasswordLength)||void 0===p||p),tt.isValid&&(tt.isValid=null===(I=tt.meetsMaxPasswordLength)||void 0===I||I),tt.isValid&&(tt.isValid=null===(V=tt.containsLowercaseLetter)||void 0===V||V),tt.isValid&&(tt.isValid=null===(Z=tt.containsUppercaseLetter)||void 0===Z||Z),tt.isValid&&(tt.isValid=null===(ge=tt.containsNumericCharacter)||void 0===ge||ge),tt.isValid&&(tt.isValid=null===(Fe=tt.containsNonAlphanumericCharacter)||void 0===Fe||Fe),tt}validatePasswordLengthOptions(d,p){const I=this.customStrengthOptions.minPasswordLength,V=this.customStrengthOptions.maxPasswordLength;I&&(p.meetsMinPasswordLength=d.length>=I),V&&(p.meetsMaxPasswordLength=d.length<=V)}validatePasswordCharacterOptions(d,p){let I;this.updatePasswordCharacterOptionsStatuses(p,!1,!1,!1,!1);for(let V=0;V<d.length;V++)I=d.charAt(V),this.updatePasswordCharacterOptionsStatuses(p,I>="a"&&I<="z",I>="A"&&I<="Z",I>="0"&&I<="9",this.allowedNonAlphanumericCharacters.includes(I))}updatePasswordCharacterOptionsStatuses(d,p,I,V,Z){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=p)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=I)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=V)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=Z))}}class Qo{constructor(d,p,I,V){this.app=d,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=I,this.config=V,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yo(this),this.idTokenSubscription=new Yo(this),this.beforeStateQueue=new ls(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=V.sdkClientVersion}_initializeWithPersistence(d,p){var I=this;return p&&(this._popupRedirectResolver=dt(p)),this._initializationPromise=this.queue((0,w.Z)(function*(){var V,Z;if(!I._deleted&&(I.persistenceManager=yield Lt.create(I,d),!I._deleted)){if(null!==(V=I._popupRedirectResolver)&&void 0!==V&&V._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(p),I.lastNotifiedUid=(null===(Z=I.currentUser)||void 0===Z?void 0:Z.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,w.Z)(function*(){if(d._deleted)return;const p=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||p){if(d.currentUser&&p&&d.currentUser.uid===p.uid)return d._currentUser._assign(p),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(p,!0)}})()}initializeCurrentUser(d){var p=this;return(0,w.Z)(function*(){var I;const V=yield p.assertedPersistence.getCurrentUser();let Z=V,ge=!1;if(d&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Fe=null===(I=p.redirectUser)||void 0===I?void 0:I._redirectEventId,tt=Z?._redirectEventId,Nt=yield p.tryRedirectSignIn(d);(!Fe||Fe===tt)&&Nt?.user&&(Z=Nt.user,ge=!0)}if(!Z)return p.directlySetCurrentUser(null);if(!Z._redirectEventId){if(ge)try{yield p.beforeStateQueue.runMiddleware(Z)}catch(Fe){Z=V,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Fe))}return Z?p.reloadAndSetCurrentUserOrClear(Z):p.directlySetCurrentUser(null)}return fe(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===Z._redirectEventId?p.directlySetCurrentUser(Z):p.reloadAndSetCurrentUserOrClear(Z)})()}tryRedirectSignIn(d){var p=this;return(0,w.Z)(function*(){let I=null;try{I=yield p._popupRedirectResolver._completeRedirectFn(p,d,!0)}catch{yield p._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(d){var p=this;return(0,w.Z)(function*(){try{yield Ur(d)}catch(I){if("auth/network-request-failed"!==I?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function It(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var d=this;return(0,w.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var p=this;return(0,w.Z)(function*(){const I=d?(0,ie.m9)(d):null;return I&&fe(I.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(I&&I._clone(p))})()}_updateCurrentUser(d,p=!1){var I=this;return(0,w.Z)(function*(){if(!I._deleted)return d&&fe(I.tenantId===d.tenantId,I,"tenant-id-mismatch"),p||(yield I.beforeStateQueue.runMiddleware(d)),I.queue((0,w.Z)(function*(){yield I.directlySetCurrentUser(d),I.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,w.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var p=this;return this.queue((0,w.Z)(function*(){yield p.assertedPersistence.setPersistence(dt(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var p=this;return(0,w.Z)(function*(){p._getPasswordPolicyInternal()||(yield p._updatePasswordPolicy());const I=p._getPasswordPolicyInternal();return I.schemaVersion!==p.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(p._errorFactory.create("unsupported-password-policy-schema-version",{})):I.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,w.Z)(function*(){const p=yield function Do(_){return Qs.apply(this,arguments)}(d),I=new Js(p);null===d.tenantId?d._projectPasswordPolicy=I:d._tenantPasswordPolicies[d.tenantId]=I})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new ie.LL("auth","Firebase",d())}onAuthStateChanged(d,p,I){return this.registerStateListener(this.authStateSubscription,d,p,I)}beforeAuthStateChanged(d,p){return this.beforeStateQueue.pushCallback(d,p)}onIdTokenChanged(d,p,I){return this.registerStateListener(this.idTokenSubscription,d,p,I)}authStateReady(){return new Promise((d,p)=>{if(this.currentUser)d();else{const I=this.onAuthStateChanged(()=>{I(),d()},p)}})}revokeAccessToken(d){var p=this;return(0,w.Z)(function*(){if(p.currentUser){const I=yield p.currentUser.getIdToken(),V={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:I};null!=p.tenantId&&(V.tenantId=p.tenantId),yield function ee(_,d){return te.apply(this,arguments)}(p,V)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,p){var I=this;return(0,w.Z)(function*(){const V=yield I.getOrInitRedirectPersistenceManager(p);return null===d?V.removeCurrentUser():V.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var p=this;return(0,w.Z)(function*(){if(!p.redirectPersistenceManager){const I=d&&dt(d)||p._popupRedirectResolver;fe(I,p,"argument-error"),p.redirectPersistenceManager=yield Lt.create(p,[dt(I._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(d){var p=this;return(0,w.Z)(function*(){var I,V;return p._isInitialized&&(yield p.queue((0,w.Z)(function*(){}))),(null===(I=p._currentUser)||void 0===I?void 0:I._redirectEventId)===d?p._currentUser:(null===(V=p.redirectUser)||void 0===V?void 0:V._redirectEventId)===d?p.redirectUser:null})()}_persistUserIfCurrent(d){var p=this;return(0,w.Z)(function*(){if(d===p.currentUser)return p.queue((0,w.Z)(function*(){return p.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(p=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,p,I,V){if(this._deleted)return()=>{};const Z="function"==typeof p?p:p.next.bind(p);let ge=!1;const Fe=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(Fe,this,"internal-error"),Fe.then(()=>{ge||Z(this.currentUser)}),"function"==typeof p){const tt=d.addObserver(p,I,V);return()=>{ge=!0,tt()}}{const tt=d.addObserver(p);return()=>{ge=!0,tt()}}}directlySetCurrentUser(d){var p=this;return(0,w.Z)(function*(){p.currentUser&&p.currentUser!==d&&p._currentUser._stopProactiveRefresh(),d&&p.isProactiveRefreshEnabled&&d._startProactiveRefresh(),p.currentUser=d,d?yield p.assertedPersistence.setCurrentUser(d):yield p.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=ti(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,w.Z)(function*(){var p;const I={"X-Client-Version":d.clientVersion};d.app.options.appId&&(I["X-Firebase-gmpid"]=d.app.options.appId);const V=yield null===(p=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();V&&(I["X-Firebase-Client"]=V);const Z=yield d._getAppCheckToken();return Z&&(I["X-Firebase-AppCheck"]=Z),I})()}_getAppCheckToken(){var d=this;return(0,w.Z)(function*(){var p;const I=yield null===(p=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return I?.error&&function Ie(_,...d){Ft.logLevel<=pe.in.WARN&&Ft.warn(`Auth (${Ee.SDK_VERSION}): ${_}`,...d)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function Fn(_){return(0,ie.m9)(_)}class Yo{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,ie.ne)(p=>this.observer=p)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ji(_){return new Promise((d,p)=>{const I=document.createElement("script");I.setAttribute("src",_),I.onload=d,I.onerror=V=>{const Z=Ce("internal-error");Z.customData=V,p(Z)},I.type="text/javascript",I.charset="UTF-8",function Di(){var _,d;return null!==(d=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==d?d:document}().appendChild(I)})}function Ao(_){return`__${_}${Math.floor(1e6*Math.random())}`}class zr{constructor(d){this.type="recaptcha-enterprise",this.auth=Fn(d)}verify(d="verify",p=!1){var I=this;return(0,w.Z)(function*(){function Z(){return Z=(0,w.Z)(function*(Fe){if(!p){if(null==Fe.tenantId&&null!=Fe._agentRecaptchaConfig)return Fe._agentRecaptchaConfig.siteKey;if(null!=Fe.tenantId&&void 0!==Fe._tenantRecaptchaConfigs[Fe.tenantId])return Fe._tenantRecaptchaConfigs[Fe.tenantId].siteKey}return new Promise(function(){var tt=(0,w.Z)(function*(Nt,Yt){Ui(Fe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Wt=>{if(void 0!==Wt.recaptchaKey){const Lr=new En(Wt);return null==Fe.tenantId?Fe._agentRecaptchaConfig=Lr:Fe._tenantRecaptchaConfigs[Fe.tenantId]=Lr,Nt(Lr.siteKey)}Yt(new Error("recaptcha Enterprise site key undefined"))}).catch(Wt=>{Yt(Wt)})});return function(Nt,Yt){return tt.apply(this,arguments)}}())}),Z.apply(this,arguments)}function ge(Fe,tt,Nt){const Yt=window.grecaptcha;qt(Yt)?Yt.enterprise.ready(()=>{Yt.enterprise.execute(Fe,{action:d}).then(Wt=>{tt(Wt)}).catch(()=>{tt("NO_RECAPTCHA")})}):Nt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Fe,tt)=>{(function V(Fe){return Z.apply(this,arguments)})(I.auth).then(Nt=>{if(!p&&qt(window.grecaptcha))ge(Nt,Fe,tt);else{if(typeof window>"u")return void tt(new Error("RecaptchaVerifier is only supported in browser"));Ji("https://www.google.com/recaptcha/enterprise.js?render="+Nt).then(()=>{ge(Nt,Fe,tt)}).catch(Yt=>{tt(Yt)})}}).catch(Nt=>{tt(Nt)})})})()}}function hi(_,d,p){return ws.apply(this,arguments)}function ws(){return(ws=(0,w.Z)(function*(_,d,p,I=!1){const V=new zr(_);let Z;try{Z=yield V.verify(p)}catch{Z=yield V.verify(p,!0)}const ge=Object.assign({},d);return Object.assign(ge,I?{captchaResp:Z}:{captchaResponse:Z}),Object.assign(ge,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ge,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ge})).apply(this,arguments)}function Ni(_,d,p,I){return cs.apply(this,arguments)}function cs(){return cs=(0,w.Z)(function*(_,d,p,I){var V;if(null!==(V=_._getRecaptchaConfig())&&void 0!==V&&V.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const Z=yield hi(_,d,p,"getOobCode"===p);return I(_,Z)}return I(_,d).catch(function(){var Z=(0,w.Z)(function*(ge){if("auth/missing-recaptcha-token"===ge.code){console.log(`${p} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Fe=yield hi(_,d,p,"getOobCode"===p);return I(_,Fe)}return Promise.reject(ge)});return function(ge){return Z.apply(this,arguments)}}())}),cs.apply(this,arguments)}function _o(_){const d=_.indexOf(":");return d<0?"":_.substr(0,d+1)}function _u(_){if(!_)return null;const d=Number(_);return isNaN(d)?null:d}class xi{constructor(d,p){this.providerId=d,this.signInMethod=p}toJSON(){return Et("not implemented")}_getIdTokenResponse(d){return Et("not implemented")}_linkToIdToken(d,p){return Et("not implemented")}_getReauthenticationResolver(d){return Et("not implemented")}}function ja(_,d){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,w.Z)(function*(_,d){return Be(_,"POST","/v1/accounts:resetPassword",Se(_,d))})).apply(this,arguments)}function Fs(){return(Fs=(0,w.Z)(function*(_,d){return Be(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Tn(_,d){return er.apply(this,arguments)}function er(){return(er=(0,w.Z)(function*(_,d){return Be(_,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function eo(){return(eo=(0,w.Z)(function*(_,d){return Be(_,"POST","/v1/accounts:update",Se(_,d))})).apply(this,arguments)}function qr(_,d){return Br.apply(this,arguments)}function Br(){return(Br=(0,w.Z)(function*(_,d){return Pt(_,"POST","/v1/accounts:signInWithPassword",Se(_,d))})).apply(this,arguments)}function Ls(_,d){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,w.Z)(function*(_,d){return Be(_,"POST","/v1/accounts:sendOobCode",Se(_,d))})).apply(this,arguments)}function Cs(){return(Cs=(0,w.Z)(function*(_,d){return Ls(_,d)})).apply(this,arguments)}function dr(_,d){return vt.apply(this,arguments)}function vt(){return(vt=(0,w.Z)(function*(_,d){return Ls(_,d)})).apply(this,arguments)}function hn(_,d){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,w.Z)(function*(_,d){return Ls(_,d)})).apply(this,arguments)}function bo(){return(bo=(0,w.Z)(function*(_,d){return Ls(_,d)})).apply(this,arguments)}function to(){return(to=(0,w.Z)(function*(_,d){return Pt(_,"POST","/v1/accounts:signInWithEmailLink",Se(_,d))})).apply(this,arguments)}function ji(){return(ji=(0,w.Z)(function*(_,d){return Pt(_,"POST","/v1/accounts:signInWithEmailLink",Se(_,d))})).apply(this,arguments)}class Hi extends xi{constructor(d,p,I,V=null){super("password",I),this._email=d,this._password=p,this._tenantId=V}static _fromEmailAndPassword(d,p){return new Hi(d,p,"password")}static _fromEmailAndCode(d,p,I=null){return new Hi(d,p,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(d){var p=this;return(0,w.Z)(function*(){switch(p.signInMethod){case"password":return Ni(d,{returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",qr);case"emailLink":return function pi(_,d){return to.apply(this,arguments)}(d,{email:p._email,oobCode:p._password});default:ke(d,"internal-error")}})()}_linkToIdToken(d,p){var I=this;return(0,w.Z)(function*(){switch(I.signInMethod){case"password":return Ni(d,{idToken:p,returnSecureToken:!0,email:I._email,password:I._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Tn);case"emailLink":return function hr(_,d){return ji.apply(this,arguments)}(d,{idToken:p,email:I._email,oobCode:I._password});default:ke(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function $t(_,d){return gi.apply(this,arguments)}function gi(){return(gi=(0,w.Z)(function*(_,d){return Pt(_,"POST","/v1/accounts:signInWithIdp",Se(_,d))})).apply(this,arguments)}class jr extends xi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const p=new jr(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(p.idToken=d.idToken),d.accessToken&&(p.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(p.nonce=d.nonce),d.pendingToken&&(p.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(p.accessToken=d.oauthToken,p.secret=d.oauthTokenSecret):ke("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:V}=p,Z=(0,ve._T)(p,["providerId","signInMethod"]);if(!I||!V)return null;const ge=new jr(I,V);return ge.idToken=Z.idToken||void 0,ge.accessToken=Z.accessToken||void 0,ge.secret=Z.secret,ge.nonce=Z.nonce,ge.pendingToken=Z.pendingToken||null,ge}_getIdTokenResponse(d){return $t(d,this.buildRequest())}_linkToIdToken(d,p){const I=this.buildRequest();return I.idToken=p,$t(d,I)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,$t(d,p)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),d.postBody=(0,ie.xO)(p)}return d}}function tr(){return(tr=(0,w.Z)(function*(_,d){return Be(_,"POST","/v1/accounts:sendVerificationCode",Se(_,d))})).apply(this,arguments)}function mi(){return(mi=(0,w.Z)(function*(_,d){return Pt(_,"POST","/v1/accounts:signInWithPhoneNumber",Se(_,d))})).apply(this,arguments)}function Lo(){return(Lo=(0,w.Z)(function*(_,d){const p=yield Pt(_,"POST","/v1/accounts:signInWithPhoneNumber",Se(_,d));if(p.temporaryProof)throw yn(_,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Ds={USER_NOT_FOUND:"user-not-found"};function Bs(){return(Bs=(0,w.Z)(function*(_,d){return Pt(_,"POST","/v1/accounts:signInWithPhoneNumber",Se(_,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Ds)})).apply(this,arguments)}class zi extends xi{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,p){return new zi({verificationId:d,verificationCode:p})}static _fromTokenResponse(d,p){return new zi({phoneNumber:d,temporaryProof:p})}_getIdTokenResponse(d){return function $i(_,d){return mi.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,p){return function Us(_,d){return Lo.apply(this,arguments)}(d,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function es(_,d){return Bs.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:p,verificationId:I,verificationCode:V}=this.params;return d&&p?{temporaryProof:d,phoneNumber:p}:{sessionInfo:I,code:V}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:p,verificationCode:I,phoneNumber:V,temporaryProof:Z}=d;return I||p||V||Z?new zi({verificationId:p,verificationCode:I,phoneNumber:V,temporaryProof:Z}):null}}class ds{constructor(d){var p,I,V,Z,ge,Fe;const tt=(0,ie.zd)((0,ie.pd)(d)),Nt=null!==(p=tt.apiKey)&&void 0!==p?p:null,Yt=null!==(I=tt.oobCode)&&void 0!==I?I:null,Wt=function Dn(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(V=tt.mode)&&void 0!==V?V:null);fe(Nt&&Yt&&Wt,"argument-error"),this.apiKey=Nt,this.operation=Wt,this.code=Yt,this.continueUrl=null!==(Z=tt.continueUrl)&&void 0!==Z?Z:null,this.languageCode=null!==(ge=tt.languageCode)&&void 0!==ge?ge:null,this.tenantId=null!==(Fe=tt.tenantId)&&void 0!==Fe?Fe:null}static parseLink(d){const p=function ta(_){const d=(0,ie.zd)((0,ie.pd)(_)).link,p=d?(0,ie.zd)((0,ie.pd)(d)).deep_link_id:null,I=(0,ie.zd)((0,ie.pd)(_)).deep_link_id;return(I?(0,ie.zd)((0,ie.pd)(I)).link:null)||I||p||d||_}(d);try{return new ds(p)}catch{return null}}}let hs=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(p,I){return Hi._fromEmailAndPassword(p,I)}static credentialWithLink(p,I){const V=ds.parseLink(I);return fe(V,"argument-error"),Hi._fromEmailAndCode(p,V.code,V.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class ts{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class _i extends ts{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class no extends _i{static credentialFromJSON(d){const p="string"==typeof d?JSON.parse(d):d;return fe("providerId"in p&&"signInMethod"in p,"argument-error"),jr._fromParams(p)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return fe(d.idToken||d.accessToken,"argument-error"),jr._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return no.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return no.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:I,oauthTokenSecret:V,pendingToken:Z,nonce:ge,providerId:Fe}=d;if(!I&&!V&&!p&&!Z||!Fe)return null;try{return new no(Fe)._credential({idToken:p,accessToken:I,nonce:ge,pendingToken:Z})}catch{return null}}}let si=(()=>{class _ extends _i{constructor(){super("facebook.com")}static credential(p){return jr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Bu=(()=>{class _ extends _i{constructor(){super("google.com"),this.addScope("profile")}static credential(p,I){return jr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:I})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:I,oauthAccessToken:V}=p;if(!I&&!V)return null;try{return _.credential(I,V)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),oi=(()=>{class _ extends _i{constructor(){super("github.com")}static credential(p){return jr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class As extends xi{constructor(d,p){super(d,d),this.pendingToken=p}_getIdTokenResponse(d){return $t(d,this.buildRequest())}_linkToIdToken(d,p){const I=this.buildRequest();return I.idToken=p,$t(d,I)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,$t(d,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:V,pendingToken:Z}=p;return I&&V&&Z&&I===V?new As(I,Z):null}static _create(d,p){return new As(d,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class yo extends ts{constructor(d){fe(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return yo.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return yo.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const p=As.fromJSON(d);return fe(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:p,providerId:I}=d;if(!p||!I)return null;try{return As._create(I,p)}catch{return null}}}let ns=(()=>{class _ extends _i{constructor(){super("twitter.com")}static credential(p,I){return jr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:I})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:I,oauthTokenSecret:V}=p;if(!I||!V)return null;try{return _.credential(I,V)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function _a(_,d){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,w.Z)(function*(_,d){return Pt(_,"POST","/v1/accounts:signUp",Se(_,d))})).apply(this,arguments)}class Ai{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,p,I,V=!1){return(0,w.Z)(function*(){const Z=yield Pe._fromIdTokenResponse(d,I,V),ge=$a(I);return new Ai({user:Z,providerId:ge,_tokenResponse:I,operationType:p})})()}static _forOperation(d,p,I){return(0,w.Z)(function*(){yield d._updateTokensIfNecessary(I,!0);const V=$a(I);return new Ai({user:d,providerId:V,_tokenResponse:I,operationType:p})})()}}function $a(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function rs(){return(rs=(0,w.Z)(function*(_){var d;const p=Fn(_);if(yield p._initializationPromise,null!==(d=p.currentUser)&&void 0!==d&&d.isAnonymous)return new Ai({user:p.currentUser,providerId:null,operationType:"signIn"});const I=yield _a(p,{returnSecureToken:!0}),V=yield Ai._fromIdTokenResponse(p,"signIn",I,!0);return yield p._updateCurrentUser(V.user),V})).apply(this,arguments)}class Ir extends ie.ZR{constructor(d,p,I,V){var Z;super(p.code,p.message),this.operationType=I,this.user=V,Object.setPrototypeOf(this,Ir.prototype),this.customData={appName:d.name,tenantId:null!==(Z=d.tenantId)&&void 0!==Z?Z:void 0,_serverResponse:p.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(d,p,I,V){return new Ir(d,p,I,V)}}function ya(_,d,p,I){return("reauthenticate"===d?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(Z=>{throw"auth/multi-factor-auth-required"===Z.code?Ir._fromErrorAndOperation(_,Z,d,I):Z})}function va(_){return new Set(_.map(({providerId:d})=>d).filter(d=>!!d))}function js(){return js=(0,w.Z)(function*(_,d){const p=(0,ie.m9)(_);yield wr(!0,p,d);const{providerUserInfo:I}=yield function vn(_,d){return Bt.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[d]}),V=va(I||[]);return p.providerData=p.providerData.filter(Z=>V.has(Z.providerId)),V.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),js.apply(this,arguments)}function ra(_,d){return ju.apply(this,arguments)}function ju(){return(ju=(0,w.Z)(function*(_,d,p=!1){const I=yield Er(_,d._linkToIdToken(_.auth,yield _.getIdToken()),p);return Ai._forOperation(_,"link",I)})).apply(this,arguments)}function wr(_,d,p){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,w.Z)(function*(_,d,p){yield Ur(d);const V=!1===_?"provider-already-linked":"no-such-provider";fe(va(d.providerData).has(p)===_,d.auth,V)})).apply(this,arguments)}function Hu(_,d){return ia.apply(this,arguments)}function ia(){return(ia=(0,w.Z)(function*(_,d,p=!1){const{auth:I}=_,V="reauthenticate";try{const Z=yield Er(_,ya(I,V,d,_),p);fe(Z.idToken,I,"internal-error");const ge=Qi(Z.idToken);fe(ge,I,"internal-error");const{sub:Fe}=ge;return fe(_.uid===Fe,I,"user-mismatch"),Ai._forOperation(_,V,Z)}catch(Z){throw"auth/user-not-found"===Z?.code&&ke(I,"user-mismatch"),Z}})).apply(this,arguments)}function dl(_,d){return sa.apply(this,arguments)}function sa(){return(sa=(0,w.Z)(function*(_,d,p=!1){const I="signIn",V=yield ya(_,I,d),Z=yield Ai._fromIdTokenResponse(_,I,V);return p||(yield _._updateCurrentUser(Z.user)),Z})).apply(this,arguments)}function Vo(_,d){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,w.Z)(function*(_,d){return dl(Fn(_),d)})).apply(this,arguments)}function Hs(_,d){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,w.Z)(function*(_,d){const p=(0,ie.m9)(_);return yield wr(!1,p,d.providerId),ra(p,d)})).apply(this,arguments)}function bi(_,d){return fs.apply(this,arguments)}function fs(){return(fs=(0,w.Z)(function*(_,d){return Hu((0,ie.m9)(_),d)})).apply(this,arguments)}function ir(){return(ir=(0,w.Z)(function*(_,d){return Pt(_,"POST","/v1/accounts:signInWithCustomToken",Se(_,d))})).apply(this,arguments)}function Ss(){return Ss=(0,w.Z)(function*(_,d){const p=Fn(_),I=yield function qa(_,d){return ir.apply(this,arguments)}(p,{token:d,returnSecureToken:!0}),V=yield Ai._fromIdTokenResponse(p,"signIn",I);return yield p._updateCurrentUser(V.user),V}),Ss.apply(this,arguments)}class vi{constructor(d,p){this.factorId=d,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(d,p){return"phoneInfo"in p?Ea._fromServerResponse(d,p):"totpInfo"in p?Bo._fromServerResponse(d,p):ke(d,"internal-error")}}class Ea extends vi{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,p){return new Ea(p)}}class Bo extends vi{constructor(d){super("totp",d)}static _fromServerResponse(d,p){return new Bo(p)}}function oa(_,d,p){var I;fe((null===(I=p.url)||void 0===I?void 0:I.length)>0,_,"invalid-continue-uri"),fe(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),d.continueUrl=p.url,d.dynamicLinkDomain=p.dynamicLinkDomain,d.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(fe(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),d.iOSBundleId=p.iOS.bundleId),p.android&&(fe(p.android.packageName.length>0,_,"missing-android-pkg-name"),d.androidInstallApp=p.android.installApp,d.androidMinimumVersionCode=p.android.minimumVersion,d.androidPackageName=p.android.packageName)}function $s(_){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,w.Z)(function*(_){const d=Fn(_);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function ro(){return(ro=(0,w.Z)(function*(_,d,p){const I=Fn(_),V={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};p&&oa(I,V,p),yield Ni(I,V,"getOobCode",dr)})).apply(this,arguments)}function wa(){return wa=(0,w.Z)(function*(_,d,p){yield ja((0,ie.m9)(_),{oobCode:d,newPassword:p}).catch(function(){var I=(0,w.Z)(function*(V){throw"auth/password-does-not-meet-requirements"===V.code&&$s(_),V});return function(V){return I.apply(this,arguments)}}())}),wa.apply(this,arguments)}function Ro(){return Ro=(0,w.Z)(function*(_,d){yield function ki(_,d){return eo.apply(this,arguments)}((0,ie.m9)(_),{oobCode:d})}),Ro.apply(this,arguments)}function aa(_,d){return ps.apply(this,arguments)}function ps(){return(ps=(0,w.Z)(function*(_,d){const p=(0,ie.m9)(_),I=yield ja(p,{oobCode:d}),V=I.requestType;switch(fe(V,p,"internal-error"),V){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":fe(I.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":fe(I.mfaInfo,p,"internal-error");default:fe(I.email,p,"internal-error")}let Z=null;return I.mfaInfo&&(Z=vi._fromServerResponse(Fn(p),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:Z},operation:V}})).apply(this,arguments)}function Zr(){return(Zr=(0,w.Z)(function*(_,d){const{data:p}=yield aa((0,ie.m9)(_),d);return p.email})).apply(this,arguments)}function Rs(){return(Rs=(0,w.Z)(function*(_,d,p){const I=Fn(_),ge=yield Ni(I,{returnSecureToken:!0,email:d,password:p,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_a).catch(tt=>{throw"auth/password-does-not-meet-requirements"===tt.code&&$s(_),tt}),Fe=yield Ai._fromIdTokenResponse(I,"signIn",ge);return yield I._updateCurrentUser(Fe.user),Fe})).apply(this,arguments)}function Za(){return(Za=(0,w.Z)(function*(_,d,p){const I=Fn(_),V={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function Z(ge,Fe){fe(Fe.handleCodeInApp,I,"argument-error"),Fe&&oa(I,ge,Fe)})(V,p),yield Ni(I,V,"getOobCode",hn)})).apply(this,arguments)}function ua(){return(ua=(0,w.Z)(function*(_,d,p){const I=(0,ie.m9)(_),V=hs.credentialWithLink(d,p||ur());return fe(V._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Vo(I,V)})).apply(this,arguments)}function io(){return(io=(0,w.Z)(function*(_,d){return Be(_,"POST","/v1/accounts:createAuthUri",Se(_,d))})).apply(this,arguments)}function Gi(){return Gi=(0,w.Z)(function*(_,d){const I={identifier:d,continueUri:Ar()?ur():"http://localhost"},{signinMethods:V}=yield function $u(_,d){return io.apply(this,arguments)}((0,ie.m9)(_),I);return V||[]}),Gi.apply(this,arguments)}function S(){return S=(0,w.Z)(function*(_,d){const p=(0,ie.m9)(_),V={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};d&&oa(p.auth,V,d);const{email:Z}=yield function Ts(_,d){return Cs.apply(this,arguments)}(p.auth,V);Z!==_.email&&(yield _.reload())}),S.apply(this,arguments)}function L(){return L=(0,w.Z)(function*(_,d,p){const I=(0,ie.m9)(_),Z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:d};p&&oa(I.auth,Z,p);const{email:ge}=yield function Kr(_,d){return bo.apply(this,arguments)}(I.auth,Z);ge!==_.email&&(yield _.reload())}),L.apply(this,arguments)}function de(){return(de=(0,w.Z)(function*(_,d){return Be(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function M(){return M=(0,w.Z)(function*(_,{displayName:d,photoURL:p}){if(void 0===d&&void 0===p)return;const I=(0,ie.m9)(_),Z={idToken:yield I.getIdToken(),displayName:d,photoUrl:p,returnSecureToken:!0},ge=yield Er(I,function G(_,d){return de.apply(this,arguments)}(I.auth,Z));I.displayName=ge.displayName||null,I.photoURL=ge.photoUrl||null;const Fe=I.providerData.find(({providerId:tt})=>"password"===tt);Fe&&(Fe.displayName=I.displayName,Fe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(ge)}),M.apply(this,arguments)}function j(_,d,p){return X.apply(this,arguments)}function X(){return X=(0,w.Z)(function*(_,d,p){const{auth:I}=_,Z={idToken:yield _.getIdToken(),returnSecureToken:!0};d&&(Z.email=d),p&&(Z.password=p);const ge=yield Er(_,function Wr(_,d){return Fs.apply(this,arguments)}(I,Z));yield _._updateTokensIfNecessary(ge,!0)}),X.apply(this,arguments)}class ot{constructor(d,p,I={}){this.isNewUser=d,this.providerId=p,this.profile=I}}class tn extends ot{constructor(d,p,I,V){super(d,p,I),this.username=V}}class qn extends ot{constructor(d,p){super(d,"facebook.com",p)}}class Qr extends tn{constructor(d,p){super(d,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Si extends ot{constructor(d,p){super(d,"google.com",p)}}class ni extends tn{constructor(d,p,I){super(d,"twitter.com",p,I)}}function Wi(_){const{user:d,_tokenResponse:p}=_;return d.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function He(_){var d,p;if(!_)return null;const{providerId:I}=_,V=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},Z=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!I&&_?.idToken){const ge=null===(p=null===(d=Qi(_.idToken))||void 0===d?void 0:d.firebase)||void 0===p?void 0:p.sign_in_provider;if(ge)return new ot(Z,"anonymous"!==ge&&"custom"!==ge?ge:null)}if(!I)return null;switch(I){case"facebook.com":return new qn(Z,V);case"github.com":return new Qr(Z,V);case"google.com":return new Si(Z,V);case"twitter.com":return new ni(Z,V,_.screenName||null);case"custom":case"anonymous":return new ot(Z,null);default:return new ot(Z,I,V)}}(p)}class Ki{constructor(d,p,I){this.type=d,this.credential=p,this.user=I}static _fromIdtoken(d,p){return new Ki("enroll",d,p)}static _fromMfaPendingCredential(d){return new Ki("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var p,I;if(d?.multiFactorSession){if(null!==(p=d.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Ki._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(I=d.multiFactorSession)&&void 0!==I&&I.idToken)return Ki._fromIdtoken(d.multiFactorSession.idToken)}return null}}class zs{constructor(d,p,I){this.session=d,this.hints=p,this.signInResolver=I}static _fromError(d,p){const I=Fn(d),V=p.customData._serverResponse,Z=(V.mfaInfo||[]).map(Fe=>vi._fromServerResponse(I,Fe));fe(V.mfaPendingCredential,I,"internal-error");const ge=Ki._fromMfaPendingCredential(V.mfaPendingCredential);return new zs(ge,Z,function(){var Fe=(0,w.Z)(function*(tt){const Nt=yield tt._process(I,ge);delete V.mfaInfo,delete V.mfaPendingCredential;const Yt=Object.assign(Object.assign({},V),{idToken:Nt.idToken,refreshToken:Nt.refreshToken});switch(p.operationType){case"signIn":const Wt=yield Ai._fromIdTokenResponse(I,p.operationType,Yt);return yield I._updateCurrentUser(Wt.user),Wt;case"reauthenticate":return fe(p.user,I,"internal-error"),Ai._forOperation(p.user,p.operationType,Yt);default:ke(I,"internal-error")}});return function(tt){return Fe.apply(this,arguments)}}())}resolveSignIn(d){var p=this;return(0,w.Z)(function*(){return p.signInResolver(d)})()}}class jt{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(I=>vi._fromServerResponse(d.auth,I)))})}static _fromUser(d){return new jt(d)}getSession(){var d=this;return(0,w.Z)(function*(){return Ki._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,p){var I=this;return(0,w.Z)(function*(){const V=d,Z=yield I.getSession(),ge=yield Er(I.user,V._process(I.user.auth,Z,p));return yield I.user._updateTokensIfNecessary(ge),I.user.reload()})()}unenroll(d){var p=this;return(0,w.Z)(function*(){const I="string"==typeof d?d:d.uid,V=yield p.user.getIdToken();try{const Z=yield Er(p.user,function Vt(_,d){return Be(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Se(_,d))}(p.user.auth,{idToken:V,mfaEnrollmentId:I}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ge})=>ge!==I),yield p.user._updateTokensIfNecessary(Z),yield p.user.reload()}catch(Z){throw Z}})()}}const cn=new WeakMap,We="__sak";class Ye{constructor(d,p){this.storageRetriever=d,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(We,"1"),this.storage.removeItem(We),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,p){return this.storage.setItem(d,JSON.stringify(p)),Promise.resolve()}_get(d){const p=this.storage.getItem(d);return Promise.resolve(p?JSON.parse(p):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const Xa=(()=>{class _ extends Ye{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,I)=>this.onStorageEvent(p,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Rr(){const _=(0,ie.z$)();return Co(_)||Zt(_)}()&&function ii(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Wn(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const I of Object.keys(this.listeners)){const V=this.storage.getItem(I),Z=this.localCache[I];V!==Z&&p(I,Z,V)}}onStorageEvent(p,I=!1){if(!p.key)return void this.forAllChangedKeys((Fe,tt,Nt)=>{this.notifyListeners(Fe,Nt)});const V=p.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Fe=this.storage.getItem(V);if(p.newValue!==Fe)null!==p.newValue?this.storage.setItem(V,p.newValue):this.storage.removeItem(V);else if(this.localCache[V]===p.newValue&&!I)return}const Z=()=>{const Fe=this.storage.getItem(V);!I&&this.localCache[V]===Fe||this.notifyListeners(V,Fe)},ge=this.storage.getItem(V);!function Gn(){return(0,ie.w1)()&&10===document.documentMode}()||ge===p.newValue||p.newValue===p.oldValue?Z():setTimeout(Z,10)}notifyListeners(p,I){this.localCache[p]=I;const V=this.listeners[p];if(V)for(const Z of Array.from(V))Z(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,I,V)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:I,newValue:V}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(I)}_removeListener(p,I){this.listeners[p]&&(this.listeners[p].delete(I),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,I){var V=()=>super._set,Z=this;return(0,w.Z)(function*(){yield V().call(Z,p,I),Z.localCache[p]=JSON.stringify(I)})()}_get(p){var I=()=>super._get,V=this;return(0,w.Z)(function*(){const Z=yield I().call(V,p);return V.localCache[p]=JSON.stringify(Z),Z})()}_remove(p){var I=()=>super._remove,V=this;return(0,w.Z)(function*(){yield I().call(V,p),delete V.localCache[p]})()}}return _.type="LOCAL",_})(),Gs=(()=>{class _ extends Ye{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,I){}_removeListener(p,I){}}return _.type="SESSION",_})();let Uc=(()=>{class _{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const I=this.receivers.find(Z=>Z.isListeningto(p));if(I)return I;const V=new _(p);return this.receivers.push(V),V}isListeningto(p){return this.eventTarget===p}handleEvent(p){var I=this;return(0,w.Z)(function*(){const V=p,{eventId:Z,eventType:ge,data:Fe}=V.data,tt=I.handlersMap[ge];if(!tt?.size)return;V.ports[0].postMessage({status:"ack",eventId:Z,eventType:ge});const Nt=Array.from(tt).map(function(){var Wt=(0,w.Z)(function*(Lr){return Lr(V.origin,Fe)});return function(Lr){return Wt.apply(this,arguments)}}()),Yt=yield function Wu(_){return Promise.all(_.map(function(){var d=(0,w.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(I){return{fulfilled:!1,reason:I}}});return function(p){return d.apply(this,arguments)}}()))}(Nt);V.ports[0].postMessage({status:"done",eventId:Z,eventType:ge,response:Yt})})()}_subscribe(p,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(I)}_unsubscribe(p,I){this.handlersMap[p]&&I&&this.handlersMap[p].delete(I),(!I||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function it(_="",d=10){let p="";for(let I=0;I<d;I++)p+=Math.floor(10*Math.random());return _+p}class Qn{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,p,I=50){var V=this;return(0,w.Z)(function*(){const Z=typeof MessageChannel<"u"?new MessageChannel:null;if(!Z)throw new Error("connection_unavailable");let ge,Fe;return new Promise((tt,Nt)=>{const Yt=it("",20);Z.port1.start();const Wt=setTimeout(()=>{Nt(new Error("unsupported_event"))},I);Fe={messageChannel:Z,onMessage(Lr){const La=Lr;if(La.data.eventId===Yt)switch(La.data.status){case"ack":clearTimeout(Wt),ge=setTimeout(()=>{Nt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ge),tt(La.data.response);break;default:clearTimeout(Wt),clearTimeout(ge),Nt(new Error("invalid_response"))}}},V.handlers.add(Fe),Z.port1.addEventListener("message",Fe.onMessage),V.target.postMessage({eventType:d,eventId:Yt,data:p},[Z.port2])}).finally(()=>{Fe&&V.removeMessageHandler(Fe)})})()}}function ai(){return window}function Kn(){return typeof ai().WorkerGlobalScope<"u"&&"function"==typeof ai().importScripts}function Tr(){return(Tr=(0,w.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Bn="firebaseLocalStorageDb",Fr="firebaseLocalStorage",wt="fbase_key";class Yr{constructor(d){this.request=d}toPromise(){return new Promise((d,p)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Ws(_,d){return _.transaction([Fr],d?"readwrite":"readonly").objectStore(Fr)}function Oo(){const _=indexedDB.open(Bn,1);return new Promise((d,p)=>{_.addEventListener("error",()=>{p(_.error)}),_.addEventListener("upgradeneeded",()=>{const I=_.result;try{I.createObjectStore(Fr,{keyPath:wt})}catch(V){p(V)}}),_.addEventListener("success",(0,w.Z)(function*(){const I=_.result;I.objectStoreNames.contains(Fr)?d(I):(I.close(),yield function Aa(){const _=indexedDB.deleteDatabase(Bn);return new Yr(_).toPromise()}(),d(yield Oo()))}))})}function Ri(_,d,p){return gl.apply(this,arguments)}function gl(){return(gl=(0,w.Z)(function*(_,d,p){const I=Ws(_,!0).put({[wt]:d,value:p});return new Yr(I).toPromise()})).apply(this,arguments)}function kl(){return(kl=(0,w.Z)(function*(_,d){const p=Ws(_,!1).get(d),I=yield new Yr(p).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function ml(_,d){const p=Ws(_,!0).delete(d);return new Yr(p).toPromise()}const b=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,w.Z)(function*(){return p.db||(p.db=yield Oo()),p.db})()}_withRetries(p){var I=this;return(0,w.Z)(function*(){let V=0;for(;;)try{const Z=yield I._openDb();return yield p(Z)}catch(Z){if(V++>3)throw Z;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,w.Z)(function*(){return Kn()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,w.Z)(function*(){p.receiver=Uc._getInstance(function eu(){return Kn()?self:null}()),p.receiver._subscribe("keyChanged",function(){var I=(0,w.Z)(function*(V,Z){return{keyProcessed:(yield p._poll()).includes(Z.key)}});return function(V,Z){return I.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var I=(0,w.Z)(function*(V,Z){return["keyChanged"]});return function(V,Z){return I.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,w.Z)(function*(){var I,V;if(p.activeServiceWorker=yield function xl(){return Tr.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Qn(p.activeServiceWorker);const Z=yield p.sender._send("ping",{},800);Z&&null!==(I=Z[0])&&void 0!==I&&I.fulfilled&&null!==(V=Z[0])&&void 0!==V&&V.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var I=this;return(0,w.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function zt(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:p},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,w.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Oo();return yield Ri(p,We,"1"),yield ml(p,We),!0}catch{}return!1})()}_withPendingWrite(p){var I=this;return(0,w.Z)(function*(){I.pendingWrites++;try{yield p()}finally{I.pendingWrites--}})()}_set(p,I){var V=this;return(0,w.Z)(function*(){return V._withPendingWrite((0,w.Z)(function*(){return yield V._withRetries(Z=>Ri(Z,p,I)),V.localCache[p]=I,V.notifyServiceWorker(p)}))})()}_get(p){var I=this;return(0,w.Z)(function*(){const V=yield I._withRetries(Z=>function tu(_,d){return kl.apply(this,arguments)}(Z,p));return I.localCache[p]=V,V})()}_remove(p){var I=this;return(0,w.Z)(function*(){return I._withPendingWrite((0,w.Z)(function*(){return yield I._withRetries(V=>ml(V,p)),delete I.localCache[p],I.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,w.Z)(function*(){const I=yield p._withRetries(ge=>{const Fe=Ws(ge,!1).getAll();return new Yr(Fe).toPromise()});if(!I)return[];if(0!==p.pendingWrites)return[];const V=[],Z=new Set;for(const{fbase_key:ge,value:Fe}of I)Z.add(ge),JSON.stringify(p.localCache[ge])!==JSON.stringify(Fe)&&(p.notifyListeners(ge,Fe),V.push(ge));for(const ge of Object.keys(p.localCache))p.localCache[ge]&&!Z.has(ge)&&(p.notifyListeners(ge,null),V.push(ge));return V})()}notifyListeners(p,I){this.localCache[p]=I;const V=this.listeners[p];if(V)for(const Z of Array.from(V))Z(I)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,w.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(I)}_removeListener(p,I){this.listeners[p]&&(this.listeners[p].delete(I),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})(),le=1e12;class je{constructor(d){this.auth=d,this.counter=le,this._widgets=new Map}render(d,p){const I=this.counter;return this._widgets.set(I,new Ue(d,this.auth.name,p||{})),this.counter++,I}reset(d){var p;const I=d||le;null===(p=this._widgets.get(I))||void 0===p||p.delete(),this._widgets.delete(I)}getResponse(d){var p;return(null===(p=this._widgets.get(d||le))||void 0===p?void 0:p.getResponse())||""}execute(d){var p=this;return(0,w.Z)(function*(){var I;return null===(I=p._widgets.get(d||le))||void 0===I||I.execute(),""})()}}class Ue{constructor(d,p,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const V="string"==typeof d?document.getElementById(d):d;fe(V,"argument-error",{appName:p}),this.container=V,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Mt(_){const d=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<_;I++)d.push(p.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":p}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const fn=Ao("rcb"),Rn=new Rt(3e4,6e4);class nr{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=ai().grecaptcha)||void 0===d||!d.render)}load(d,p=""){return fe(function qu(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(p),d,"argument-error"),this.shouldResolveImmediately(p)&&$n(ai().grecaptcha)?Promise.resolve(ai().grecaptcha):new Promise((I,V)=>{const Z=ai().setTimeout(()=>{V(Ce(d,"network-request-failed"))},Rn.get());ai()[fn]=()=>{ai().clearTimeout(Z),delete ai()[fn];const Fe=ai().grecaptcha;if(!Fe||!$n(Fe))return void V(Ce(d,"internal-error"));const tt=Fe.render;Fe.render=(Nt,Yt)=>{const Wt=tt(Nt,Yt);return this.counter++,Wt},this.hostLanguage=p,I(Fe)},Ji(`https://www.google.com/recaptcha/api.js??${(0,ie.xO)({onload:fn,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(Z),V(Ce(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var p;return!(null===(p=ai().grecaptcha)||void 0===p||!p.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Pi{load(d){return(0,w.Z)(function*(){return new je(d)})()}clearedOneInstance(){}}const Ho="recaptcha",so={theme:"light",type:"image"};class Fl{constructor(d,p,I=Object.assign({},so)){this.parameters=I,this.type=Ho,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Fn(d),this.isInvisible="invisible"===this.parameters.size,fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const V="string"==typeof p?document.getElementById(p):p;fe(V,this.auth,"argument-error"),this.container=V,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Pi:new nr,this.validateStartingState()}verify(){var d=this;return(0,w.Z)(function*(){d.assertNotDestroyed();const p=yield d.render(),I=d.getAssertedRecaptcha();return I.getResponse(p)||new Promise(Z=>{const ge=Fe=>{Fe&&(d.tokenChangeListeners.delete(ge),Z(Fe))};d.tokenChangeListeners.add(ge),d.isInvisible&&I.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return p=>{if(this.tokenChangeListeners.forEach(I=>I(p)),"function"==typeof d)d(p);else if("string"==typeof d){const I=ai()[d];"function"==typeof I&&I(p)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,w.Z)(function*(){if(yield d.init(),!d.widgetId){let p=d.container;if(!d.isInvisible){const I=document.createElement("div");p.appendChild(I),p=I}d.widgetId=d.getAssertedRecaptcha().render(p,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,w.Z)(function*(){fe(Ar()&&!Kn(),d.auth,"internal-error"),yield function ms(){let _=null;return new Promise(d=>{"complete"!==document.readyState?(_=()=>d(),window.addEventListener("load",_)):d()}).catch(d=>{throw _&&window.removeEventListener("load",_),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const p=yield function Vr(_){return Xn.apply(this,arguments)}(d.auth);fe(p,d.auth,"internal-error"),d.parameters.sitekey=p})()}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class yl{constructor(d,p){this.verificationId=d,this.onConfirmation=p}confirm(d){const p=zi._fromVerification(this.verificationId,d);return this.onConfirmation(p)}}function vo(){return(vo=(0,w.Z)(function*(_,d,p){const I=Fn(_),V=yield Ku(I,d,(0,ie.m9)(p));return new yl(V,Z=>Vo(I,Z))})).apply(this,arguments)}function nu(){return(nu=(0,w.Z)(function*(_,d,p){const I=(0,ie.m9)(_);yield wr(!1,I,"phone");const V=yield Ku(I.auth,d,(0,ie.m9)(p));return new yl(V,Z=>Hs(I,Z))})).apply(this,arguments)}function vl(){return(vl=(0,w.Z)(function*(_,d,p){const I=(0,ie.m9)(_),V=yield Ku(I.auth,d,(0,ie.m9)(p));return new yl(V,Z=>bi(I,Z))})).apply(this,arguments)}function Ku(_,d,p){return Vl.apply(this,arguments)}function Vl(){return Vl=(0,w.Z)(function*(_,d,p){var I;const V=yield p.verify();try{let Z;if(fe("string"==typeof V,_,"argument-error"),fe(p.type===Ho,_,"argument-error"),Z="string"==typeof d?{phoneNumber:d}:d,"session"in Z){const ge=Z.session;if("phoneNumber"in Z)return fe("enroll"===ge.type,_,"internal-error"),(yield function at(_,d){return Be(_,"POST","/v2/accounts/mfaEnrollment:start",Se(_,d))}(_,{idToken:ge.credential,phoneEnrollmentInfo:{phoneNumber:Z.phoneNumber,recaptchaToken:V}})).phoneSessionInfo.sessionInfo;{fe("signin"===ge.type,_,"internal-error");const Fe=(null===(I=Z.multiFactorHint)||void 0===I?void 0:I.uid)||Z.multiFactorUid;return fe(Fe,_,"missing-multi-factor-info"),(yield function N(_,d){return Be(_,"POST","/v2/accounts/mfaSignIn:start",Se(_,d))}(_,{mfaPendingCredential:ge.credential,mfaEnrollmentId:Fe,phoneSignInInfo:{recaptchaToken:V}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ge}=yield function Or(_,d){return tr.apply(this,arguments)}(_,{phoneNumber:Z.phoneNumber,recaptchaToken:V});return ge}}finally{p._reset()}}),Vl.apply(this,arguments)}function Cu(){return(Cu=(0,w.Z)(function*(_,d){yield ra((0,ie.m9)(_),d)})).apply(this,arguments)}let ru=(()=>{class _{constructor(p){this.providerId=_.PROVIDER_ID,this.auth=Fn(p)}verifyPhoneNumber(p,I){return Ku(this.auth,p,(0,ie.m9)(I))}static credential(p,I){return zi._fromVerification(p,I)}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:I,temporaryProof:V}=p;return I&&V?zi._fromTokenResponse(I,V):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Zu(_,d){return d?dt(d):(fe(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Nd extends xi{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return $t(d,this._buildIdpRequest())}_linkToIdToken(d,p){return $t(d,this._buildIdpRequest(p))}_getReauthenticationResolver(d){return $t(d,this._buildIdpRequest())}_buildIdpRequest(d){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(p.idToken=d),p}}function jc(_){return dl(_.auth,new Nd(_),_.bypassAuthState)}function qf(_){const{auth:d,user:p}=_;return fe(p,d,"internal-error"),Hu(p,new Nd(_),_.bypassAuthState)}function xd(_){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,w.Z)(function*(_){const{auth:d,user:p}=_;return fe(p,d,"internal-error"),ra(p,new Nd(_),_.bypassAuthState)})).apply(this,arguments)}class Sh{constructor(d,p,I,V,Z=!1){this.auth=d,this.resolver=I,this.user=V,this.bypassAuthState=Z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var d=this;return new Promise(function(){var p=(0,w.Z)(function*(I,V){d.pendingPromise={resolve:I,reject:V};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(Z){d.reject(Z)}});return function(I,V){return p.apply(this,arguments)}}())}onAuthEvent(d){var p=this;return(0,w.Z)(function*(){const{urlResponse:I,sessionId:V,postBody:Z,tenantId:ge,error:Fe,type:tt}=d;if(Fe)return void p.reject(Fe);const Nt={auth:p.auth,requestUri:I,sessionId:V,tenantId:ge||void 0,postBody:Z||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(tt)(Nt))}catch(Yt){p.reject(Yt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return jc;case"linkViaPopup":case"linkViaRedirect":return xd;case"reauthViaPopup":case"reauthViaRedirect":return qf;default:ke(this.auth,"internal-error")}}resolve(d){lt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){lt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rh=new Rt(2e3,1e4);function ba(){return(ba=(0,w.Z)(function*(_,d,p){const I=Fn(_);Qe(_,d,ts);const V=Zu(I,p);return new Ul(I,"signInViaPopup",d,V).executeNotNull()})).apply(this,arguments)}function Du(){return(Du=(0,w.Z)(function*(_,d,p){const I=(0,ie.m9)(_);Qe(I.auth,d,ts);const V=Zu(I.auth,p);return new Ul(I.auth,"reauthViaPopup",d,V,I).executeNotNull()})).apply(this,arguments)}function El(){return(El=(0,w.Z)(function*(_,d,p){const I=(0,ie.m9)(_);Qe(I.auth,d,ts);const V=Zu(I.auth,p);return new Ul(I.auth,"linkViaPopup",d,V,I).executeNotNull()})).apply(this,arguments)}let Ul=(()=>{class _ extends Sh{constructor(p,I,V,Z,ge){super(p,I,Z,ge),this.provider=V,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var p=this;return(0,w.Z)(function*(){const I=yield p.execute();return fe(I,p.auth,"internal-error"),I})()}onExecution(){var p=this;return(0,w.Z)(function*(){lt(1===p.filter.length,"Popup operations only handle one event");const I=it();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],I),p.authWindow.associatedEvent=I,p.resolver._originValidation(p.auth).catch(V=>{p.reject(V)}),p.resolver._isIframeWebStorageSupported(p.auth,V=>{V||p.reject(Ce(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const p=()=>{var I,V;this.pollId=null!==(V=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==V&&V.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,Rh.get())};p()}}return _.currentPopupAction=null,_})();const ss="pendingRedirect",Os=new Map;class Sa extends Sh{constructor(d,p,I=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,I),this.eventId=null}execute(){var d=()=>super.execute,p=this;return(0,w.Z)(function*(){let I=Os.get(p.auth._key());if(!I){try{const Z=(yield function oo(_,d){return Pr.apply(this,arguments)}(p.resolver,p.auth))?yield d().call(p):null;I=()=>Promise.resolve(Z)}catch(V){I=()=>Promise.reject(V)}Os.set(p.auth._key(),I)}return p.bypassAuthState||Os.set(p.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(d){var p=()=>super.onAuthEvent,I=this;return(0,w.Z)(function*(){if("signInViaRedirect"===d.type)return p().call(I,d);if("unknown"!==d.type){if(d.eventId){const V=yield I.auth._redirectUserForId(d.eventId);if(V)return I.user=V,p().call(I,d);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,w.Z)(function*(){})()}cleanUp(){}}function Pr(){return(Pr=(0,w.Z)(function*(_,d){const p=_s(d),I=su(_);if(!(yield I._isAvailable()))return!1;const V="true"===(yield I._get(p));return yield I._remove(p),V})).apply(this,arguments)}function iu(_,d){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,w.Z)(function*(_,d){return su(_)._set(_s(d),"true")})).apply(this,arguments)}function Qu(_,d){Os.set(_._key(),d)}function su(_){return dt(_._redirectPersistence)}function _s(_){return Dt(ss,_.config.apiKey,_.name)}function zc(_,d,p){return function Gc(_,d,p){return Ii.apply(this,arguments)}(_,d,p)}function Ii(){return(Ii=(0,w.Z)(function*(_,d,p){const I=Fn(_);Qe(_,d,ts),yield I._initializationPromise;const V=Zu(I,p);return yield iu(V,I),V._openRedirect(I,d,"signInViaRedirect")})).apply(this,arguments)}function Wc(_,d,p){return function os(_,d,p){return vr.apply(this,arguments)}(_,d,p)}function vr(){return(vr=(0,w.Z)(function*(_,d,p){const I=(0,ie.m9)(_);Qe(I.auth,d,ts),yield I.auth._initializationPromise;const V=Zu(I.auth,p);yield iu(V,I.auth);const Z=yield Bl(I);return V._openRedirect(I.auth,d,"reauthViaRedirect",Z)})).apply(this,arguments)}function ao(_,d,p){return function cc(_,d,p){return Au.apply(this,arguments)}(_,d,p)}function Au(){return(Au=(0,w.Z)(function*(_,d,p){const I=(0,ie.m9)(_);Qe(I.auth,d,ts),yield I.auth._initializationPromise;const V=Zu(I.auth,p);yield wr(!1,I,d.providerId),yield iu(V,I.auth);const Z=yield Bl(I);return V._openRedirect(I.auth,d,"linkViaRedirect",Z)})).apply(this,arguments)}function bu(){return(bu=(0,w.Z)(function*(_,d){return yield Fn(_)._initializationPromise,Eo(_,d,!1)})).apply(this,arguments)}function Eo(_,d){return ui.apply(this,arguments)}function ui(){return(ui=(0,w.Z)(function*(_,d,p=!1){const I=Fn(_),V=Zu(I,d),ge=yield new Sa(I,V,p).execute();return ge&&!p&&(delete ge.user._redirectEventId,yield I._persistUserIfCurrent(ge.user),yield I._setRedirectUser(null,d)),ge})).apply(this,arguments)}function Bl(_){return No.apply(this,arguments)}function No(){return(No=(0,w.Z)(function*(_){const d=it(`${_.uid}:::`);return _._redirectEventId=d,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),d})).apply(this,arguments)}class Yu{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let p=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(d,I)&&(p=!0,this.sendToConsumer(d,I),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function ca(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jl(_);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=d,p=!0)),p}sendToConsumer(d,p){var I;if(d.error&&!jl(d)){const V=(null===(I=d.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";p.onError(Ce(this.auth,V))}else p.onAuthEvent(d)}isEventForConsumer(d,p){const I=null===p.eventId||!!d.eventId&&d.eventId===p.eventId;return p.filter.includes(d.type)&&I}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ra(d))}saveEventToCache(d){this.cachedEventUids.add(Ra(d)),this.lastProcessedEventTime=Date.now()}}function Ra(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(d=>d).join("-")}function jl({type:_,error:d}){return"unknown"===_&&"auth/no-auth-event"===d?.code}function ou(_){return zo.apply(this,arguments)}function zo(){return(zo=(0,w.Z)(function*(_,d={}){return Be(_,"GET","/v1/projects",d)})).apply(this,arguments)}const da=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wl=/^https?/;function dc(){return(dc=(0,w.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:d}=yield ou(_);for(const p of d)try{if(kd(p))return}catch{}ke(_,"unauthorized-domain")})).apply(this,arguments)}function kd(_){const d=ur(),{protocol:p,hostname:I}=new URL(d);if(_.startsWith("chrome-extension://")){const ge=new URL(_);return""===ge.hostname&&""===I?"chrome-extension:"===p&&_.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===p&&ge.hostname===I}if(!wl.test(p))return!1;if(da.test(_))return I===_;const V=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+V+"|"+V+")$","i").test(I)}const qc=new Rt(3e4,6e4);function Hl(){const _=ai().___jsl;if(_?.H)for(const d of Object.keys(_.H))if(_.H[d].r=_.H[d].r||[],_.H[d].L=_.H[d].L||[],_.H[d].r=[..._.H[d].L],_.CP)for(let p=0;p<_.CP.length;p++)_.CP[p]=null}let Kc=null;const Fd=new Rt(5e3,15e3),au="__/auth/iframe",ys="emulator/auth/iframe",Ld={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},On=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ju(_){const d=_.config;fe(d.authDomain,_,"auth-domain-config-required");const p=d.emulator?_e(d,ys):`https://${_.config.authDomain}/${au}`,I={apiKey:d.apiKey,appName:_.name,v:Ee.SDK_VERSION},V=On.get(_.config.apiHost);V&&(I.eid=V);const Z=_._getFrameworks();return Z.length&&(I.fw=Z.join(",")),`${p}?${(0,ie.xO)(I).slice(1)}`}function hc(){return hc=(0,w.Z)(function*(_){const d=yield function Kf(_){return Kc=Kc||function Mh(_){return new Promise((d,p)=>{var I,V,Z;function ge(){Hl(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Hl(),p(Ce(_,"network-request-failed"))},timeout:qc.get()})}if(null!==(V=null===(I=ai().gapi)||void 0===I?void 0:I.iframes)&&void 0!==V&&V.Iframe)d(gapi.iframes.getContext());else{if(null===(Z=ai().gapi)||void 0===Z||!Z.load){const Fe=Ao("iframefcb");return ai()[Fe]=()=>{gapi.load?ge():p(Ce(_,"network-request-failed"))},Ji(`https://apis.google.com/js/api.js?onload=${Fe}`).catch(tt=>p(tt))}ge()}}).catch(d=>{throw Kc=null,d})}(_),Kc}(_),p=ai().gapi;return fe(p,_,"internal-error"),d.open({where:document.body,url:Ju(_),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ld,dontclear:!0},I=>new Promise(function(){var V=(0,w.Z)(function*(Z,ge){yield I.restyle({setHideOnLeave:!1});const Fe=Ce(_,"network-request-failed"),tt=ai().setTimeout(()=>{ge(Fe)},Fd.get());function Nt(){ai().clearTimeout(tt),Z(I)}I.ping(Nt).then(Nt,()=>{ge(Fe)})});return function(Z,ge){return V.apply(this,arguments)}}()))}),hc.apply(this,arguments)}const Ns={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class uo{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Oh="__/auth/handler",lo="emulator/auth/handler",Xu=encodeURIComponent("fac");function Ma(_,d,p,I,V,Z){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,w.Z)(function*(_,d,p,I,V,Z){fe(_.config.authDomain,_,"auth-domain-config-required"),fe(_.config.apiKey,_,"invalid-api-key");const ge={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:I,v:Ee.SDK_VERSION,eventId:V};if(d instanceof ts){d.setDefaultLanguage(_.languageCode),ge.providerId=d.providerId||"",(0,ie.xb)(d.getCustomParameters())||(ge.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Yt,Wt]of Object.entries(Z||{}))ge[Yt]=Wt}if(d instanceof _i){const Yt=d.getScopes().filter(Wt=>""!==Wt);Yt.length>0&&(ge.scopes=Yt.join(","))}_.tenantId&&(ge.tid=_.tenantId);const Fe=ge;for(const Yt of Object.keys(Fe))void 0===Fe[Yt]&&delete Fe[Yt];const tt=yield _._getAppCheckToken(),Nt=tt?`#${Xu}=${encodeURIComponent(tt)}`:"";return`${function Ud({config:_}){return _.emulator?_e(_,lo):`https://${_.authDomain}/${Oh}`}(_)}?${(0,ie.xO)(Fe).slice(1)}${Nt}`})).apply(this,arguments)}const Yc="webStorageSupport",Gl=class Bd{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gs,this._completeRedirectFn=Eo,this._overrideRedirectResult=Qu}_openPopup(d,p,I,V){var Z=this;return(0,w.Z)(function*(){var ge;lt(null===(ge=Z.eventManagers[d._key()])||void 0===ge?void 0:ge.manager,"_initialize() not called before _openPopup()");const Fe=yield Ma(d,p,I,ur(),V);return function Vd(_,d,p,I=500,V=600){const Z=Math.max((window.screen.availHeight-V)/2,0).toString(),ge=Math.max((window.screen.availWidth-I)/2,0).toString();let Fe="";const tt=Object.assign(Object.assign({},Ns),{width:I.toString(),height:V.toString(),top:Z,left:ge}),Nt=(0,ie.z$)().toLowerCase();p&&(Fe=Ua(Nt)?"_blank":p),Ci(Nt)&&(d=d||"http://localhost",tt.scrollbars="yes");const Yt=Object.entries(tt).reduce((Lr,[La,Gd])=>`${Lr}${La}=${Gd},`,"");if(function Xt(_=(0,ie.z$)()){var d;return Zt(_)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Nt)&&"_self"!==Fe)return function Zc(_,d){const p=document.createElement("a");p.href=_,p.target=d;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(I)}(d||"",Fe),new uo(null);const Wt=window.open(d||"",Fe,Yt);fe(Wt,_,"popup-blocked");try{Wt.focus()}catch{}return new uo(Wt)}(d,Fe,it())})()}_openRedirect(d,p,I,V){var Z=this;return(0,w.Z)(function*(){return yield Z._originValidation(d),function In(_){ai().location.href=_}(yield Ma(d,p,I,ur(),V)),new Promise(()=>{})})()}_initialize(d){const p=d._key();if(this.eventManagers[p]){const{manager:V,promise:Z}=this.eventManagers[p];return V?Promise.resolve(V):(lt(Z,"If manager is not set, promise should be"),Z)}const I=this.initAndGetManager(d);return this.eventManagers[p]={promise:I},I.catch(()=>{delete this.eventManagers[p]}),I}initAndGetManager(d){var p=this;return(0,w.Z)(function*(){const I=yield function $l(_){return hc.apply(this,arguments)}(d),V=new Yu(d);return I.register("authEvent",Z=>(fe(Z?.authEvent,d,"invalid-auth-event"),{status:V.onEvent(Z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[d._key()]={manager:V},p.iframes[d._key()]=I,V})()}_isIframeWebStorageSupported(d,p){this.iframes[d._key()].send(Yc,{type:Yc},V=>{var Z;const ge=null===(Z=V?.[0])||void 0===Z?void 0:Z[Yc];void 0!==ge&&p(!!ge),ke(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Pa(_){return dc.apply(this,arguments)}(d)),this.originValidationPromises[p]}get _shouldInitProactively(){return Wn()||Co()||Zt()}};class jd{constructor(d){this.factorId=d}_process(d,p,I){switch(p.type){case"enroll":return this._finalizeEnroll(d,p.credential,I);case"signin":return this._finalizeSignIn(d,p.credential);default:return Et("unexpected MultiFactorSessionType")}}}class ha extends jd{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new ha(d)}_finalizeEnroll(d,p,I){return function yr(_,d){return Be(_,"POST","/v2/accounts/mfaEnrollment:finalize",Se(_,d))}(d,{idToken:p,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,p){return function T(_,d){return Be(_,"POST","/v2/accounts/mfaSignIn:finalize",Se(_,d))}(d,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Zf=(()=>{class _{constructor(){}static assertion(p){return ha._fromCredential(p)}}return _.FACTOR_ID="phone",_})();var Cl="@firebase/auth";class pc{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var p=this;return(0,w.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const p=this.auth.onIdTokenChanged(I=>{d(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,p),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const p=this.internalListeners.get(d);p&&(this.internalListeners.delete(d),p(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qs(){return window}(0,ie.Pz)("authIdTokenMaxAge"),function pa(_){(0,Ee._registerComponent)(new Re.wA("auth",(d,{options:p})=>{const I=d.getProvider("app").getImmediate(),V=d.getProvider("heartbeat"),Z=d.getProvider("app-check-internal"),{apiKey:ge,authDomain:Fe}=I.options;fe(ge&&!ge.includes(":"),"invalid-api-key",{appName:I.name});const tt={apiKey:ge,authDomain:Fe,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ti(_)},Nt=new Qo(I,V,Z,tt);return function fi(_,d){const p=d?.persistence||[],I=(Array.isArray(p)?p:[p]).map(dt);d?.errorMap&&_._updateErrorMap(d.errorMap),_._initializeWithPersistence(I,d?.popupRedirectResolver)}(Nt,p),Nt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,p,I)=>{d.getProvider("auth-internal").initialize()})),(0,Ee._registerComponent)(new Re.wA("auth-internal",d=>{const p=Fn(d.getProvider("auth").getImmediate());return new pc(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ee.registerVersion)(Cl,"1.4.0",function Xc(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,Ee.registerVersion)(Cl,"1.4.0","esm2017")}("Browser");function Oa(){return Oa=(0,w.Z)(function*(_,d,p){var I;const{BuildInfo:V}=qs();lt(d.sessionId,"AuthEvent did not contain a session ID");const Z=yield function mc(_){return _c.apply(this,arguments)}(d.sessionId),ge={};return Zt()?ge.ibi=V.packageName:Oe()?ge.apn=V.packageName:ke(_,"operation-not-supported-in-this-environment"),V.displayName&&(ge.appDisplayName=V.displayName),ge.sessionId=Z,Ma(_,p,d.type,void 0,null!==(I=d.eventId)&&void 0!==I?I:void 0,ge)}),Oa.apply(this,arguments)}function lu(){return(lu=(0,w.Z)(function*(_){const{BuildInfo:d}=qs(),p={};Zt()?p.iosBundleId=d.packageName:Oe()?p.androidPackageName=d.packageName:ke(_,"operation-not-supported-in-this-environment"),yield ou(_,p)})).apply(this,arguments)}function Su(){return(Su=(0,w.Z)(function*(_,d,p){const{cordova:I}=qs();let V=()=>{};try{yield new Promise((Z,ge)=>{let Fe=null;function tt(){var Wt;Z();const Lr=null===(Wt=I.plugins.browsertab)||void 0===Wt?void 0:Wt.close;"function"==typeof Lr&&Lr(),"function"==typeof p?.close&&p.close()}function Nt(){Fe||(Fe=window.setTimeout(()=>{ge(Ce(_,"redirect-cancelled-by-user"))},2e3))}function Yt(){"visible"===document?.visibilityState&&Nt()}d.addPassiveListener(tt),document.addEventListener("resume",Nt,!1),Oe()&&document.addEventListener("visibilitychange",Yt,!1),V=()=>{d.removePassiveListener(tt),document.removeEventListener("resume",Nt,!1),document.removeEventListener("visibilitychange",Yt,!1),Fe&&window.clearTimeout(Fe)}})}finally{V()}})).apply(this,arguments)}function _c(){return(_c=(0,w.Z)(function*(_){const d=function Na(_){if(lt(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const d=new ArrayBuffer(_.length),p=new Uint8Array(d);for(let I=0;I<_.length;I++)p[I]=_.charCodeAt(I);return p}(_),p=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(p)).map(V=>V.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class ho extends Yu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(d)),super.onEvent(d)}initialized(){var d=this;return(0,w.Z)(function*(){yield d.initPromise})()}}function rd(_){return v.apply(this,arguments)}function v(){return(v=(0,w.Z)(function*(_){const d=yield E()._get(x(_));return d&&(yield E()._remove(x(_))),d})).apply(this,arguments)}function m(){const _=[];for(let p=0;p<20;p++){const I=Math.floor(62*Math.random());_.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(I))}return _.join("")}function E(){return dt(Xa)}function x(_){return Dt("authEvent",_.config.apiKey,_.name)}function oe(_){if(!_?.includes("?"))return{};const[d,...p]=_.split("?");return(0,ie.zd)(p.join("?"))}const Je=class Me{constructor(){this._redirectPersistence=Gs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Eo,this._overrideRedirectResult=Qu}_initialize(d){var p=this;return(0,w.Z)(function*(){const I=d._key();let V=p.eventManagers.get(I);return V||(V=new ho(d),p.eventManagers.set(I,V),p.attachCallbackListeners(d,V)),V})()}_openPopup(d){ke(d,"operation-not-supported-in-this-environment")}_openRedirect(d,p,I,V){var Z=this;return(0,w.Z)(function*(){!function Wl(_){var d,p,I,V,Z,ge,Fe,tt,Nt,Yt;const Wt=qs();fe("function"==typeof(null===(d=Wt?.universalLinks)||void 0===d?void 0:d.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),fe(typeof(null===(p=Wt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),fe("function"==typeof(null===(Z=null===(V=null===(I=Wt?.cordova)||void 0===I?void 0:I.plugins)||void 0===V?void 0:V.browsertab)||void 0===Z?void 0:Z.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fe("function"==typeof(null===(tt=null===(Fe=null===(ge=Wt?.cordova)||void 0===ge?void 0:ge.plugins)||void 0===Fe?void 0:Fe.browsertab)||void 0===tt?void 0:tt.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fe("function"==typeof(null===(Yt=null===(Nt=Wt?.cordova)||void 0===Nt?void 0:Nt.InAppBrowser)||void 0===Yt?void 0:Yt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const ge=yield Z._initialize(d);yield ge.initialized(),ge.resetRedirect(),function Cr(){Os.clear()}(),yield Z._originValidation(d);const Fe=function xh(_,d,p=null){return{type:d,eventId:p,urlResponse:null,sessionId:m(),postBody:null,tenantId:_.tenantId,error:Ce(_,"no-auth-event")}}(d,I,V);yield function ql(_,d){return E()._set(x(_),d)}(d,Fe);const tt=yield function Nh(_,d,p){return Oa.apply(this,arguments)}(d,Fe,p),Nt=yield function nd(_){const{cordova:d}=qs();return new Promise(p=>{d.plugins.browsertab.isAvailable(I=>{let V=null;I?d.plugins.browsertab.openUrl(_):V=d.InAppBrowser.open(_,function Tt(_=(0,ie.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),p(V)})})}(tt);return function nl(_,d,p){return Su.apply(this,arguments)}(d,ge,Nt)})()}_isIframeWebStorageSupported(d,p){throw new Error("Method not implemented.")}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function gc(_){return lu.apply(this,arguments)}(d)),this.originValidationPromises[p]}attachCallbackListeners(d,p){const{universalLinks:I,handleOpenURL:V,BuildInfo:Z}=qs(),ge=setTimeout((0,w.Z)(function*(){yield rd(d),p.onEvent(ft())}),500),Fe=function(){var Yt=(0,w.Z)(function*(Wt){clearTimeout(ge);const Lr=yield rd(d);let La=null;Lr&&Wt?.url&&(La=function h(_,d){var p,I;const V=function re(_){const d=oe(_),p=d.link?decodeURIComponent(d.link):void 0,I=oe(p).link,V=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return oe(V).link||V||I||p||_}(d);if(V.includes("/__/auth/callback")){const Z=oe(V),ge=Z.firebaseError?function B(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(Z.firebaseError)):null,Fe=null===(I=null===(p=ge?.code)||void 0===p?void 0:p.split("auth/"))||void 0===I?void 0:I[1],tt=Fe?Ce(Fe):null;return tt?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:tt,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:V,postBody:null}}return null}(Lr,Wt.url)),p.onEvent(La||ft())});return function(Lr){return Yt.apply(this,arguments)}}();typeof I<"u"&&"function"==typeof I.subscribe&&I.subscribe(null,Fe);const tt=V,Nt=`${Z.packageName.toLowerCase()}://`;qs().handleOpenURL=function(){var Yt=(0,w.Z)(function*(Wt){if(Wt.toLowerCase().startsWith(Nt)&&Fe({url:Wt}),"function"==typeof tt)try{tt(Wt)}catch(Lr){console.error(Lr)}});return function(Wt){return Yt.apply(this,arguments)}}()}};function ft(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ce("no-auth-event")}}function un(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function jn(_=(0,ie.z$)()){return!("file:"!==un()&&"ionic:"!==un()&&"capacitor:"!==un()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function li(){try{const _=self.localStorage,d=it();if(_)return _.setItem(d,"1"),_.removeItem(d),!function vs(_=(0,ie.z$)()){return function Mn(){return(0,ie.w1)()&&11===document?.documentMode}()||function Io(_=(0,ie.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,ie.hl)()}catch{return Es()&&(0,ie.hl)()}return!1}function Es(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function xs(){return(function Dr(){return"http:"===un()||"https:"===un()}()||(0,ie.ru)()||jn())&&!function Yn(){return(0,ie.b$)()||(0,ie.UG)()}()&&li()&&!Es()}function gr(){return jn()&&typeof document<"u"}function xa(){return(xa=(0,w.Z)(function*(){return!!gr()&&new Promise(_=>{const d=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),_(!0)})})})).apply(this,arguments)}const wo={LOCAL:"local",NONE:"none",SESSION:"session"},ka=fe,xt="persistence";function on(_){return bn.apply(this,arguments)}function bn(){return(bn=(0,w.Z)(function*(_){yield _._initializationPromise;const d=Ks(),p=Dt(xt,_.config.apiKey,_.name);d&&d.setItem(p,_._getPersistence())})).apply(this,arguments)}function Ks(){var _;try{return(null===(_=function cu(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const fo=fe;class Li{constructor(){this.browserResolver=dt(Gl),this.cordovaResolver=dt(Je),this.underlyingResolver=null,this._redirectPersistence=Gs,this._completeRedirectFn=Eo,this._overrideRedirectResult=Qu}_initialize(d){var p=this;return(0,w.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,p,I,V){var Z=this;return(0,w.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openPopup(d,p,I,V)})()}_openRedirect(d,p,I,V){var Z=this;return(0,w.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openRedirect(d,p,I,V)})()}_isIframeWebStorageSupported(d,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,p)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return gr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return fo(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,w.Z)(function*(){if(d.underlyingResolver)return;const p=yield function Kl(){return xa.apply(this,arguments)}();d.underlyingResolver=p?d.cordovaResolver:d.browserResolver})()}}function Jr(_){return _.unwrap()}function id(_){return Ru(_)}function Ru(_){const{_tokenResponse:d}=_ instanceof ie.ZR?_.customData:_;if(!d)return null;if(!(_ instanceof ie.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return ru.credentialFromResult(_);const p=d.providerId;if(!p||p===Ne.PASSWORD)return null;let I;switch(p){case Ne.GOOGLE:I=Bu;break;case Ne.FACEBOOK:I=si;break;case Ne.GITHUB:I=oi;break;case Ne.TWITTER:I=ns;break;default:const{oauthIdToken:V,oauthAccessToken:Z,oauthTokenSecret:ge,pendingToken:Fe,nonce:tt}=d;return Z||ge||V||Fe?Fe?p.startsWith("saml.")?As._create(p,Fe):jr._fromParams({providerId:p,signInMethod:p,pendingToken:Fe,idToken:V,accessToken:Z}):new no(p).credential({idToken:V,accessToken:Z,rawNonce:tt}):null}return _ instanceof ie.ZR?I.credentialFromError(_):I.credentialFromResult(_)}function Xr(_,d){return d.catch(p=>{throw p instanceof ie.ZR&&function as(_,d){var p;const I=null===(p=d.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new $d(_,function la(_,d){var p;const I=(0,ie.m9)(_),V=d;return fe(d.customData.operationType,I,"argument-error"),fe(null===(p=V.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,I,"argument-error"),zs._fromError(I,V)}(_,d));else if(I){const V=Ru(d),Z=d;V&&(Z.credential=V,Z.tenantId=I.tenantId||void 0,Z.email=I.email||void 0,Z.phoneNumber=I.phoneNumber||void 0)}}(_,p),p}).then(p=>{const V=p.user;return{operationType:p.operationType,credential:id(p),additionalUserInfo:Wi(p),user:Fa.getOrCreate(V)}})}function ri(_,d){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,w.Z)(function*(_,d){const p=yield d;return{verificationId:p.verificationId,confirm:I=>Xr(_,p.confirm(I))}})).apply(this,arguments)}class $d{constructor(d,p){this.resolver=p,this.auth=function Zl(_){return _.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Xr(Jr(this.auth),this.resolver.resolveSignIn(d))}}class Fa{constructor(d){this._delegate=d,this.multiFactor=function St(_){const d=(0,ie.m9)(_);return cn.has(d)||cn.set(d,jt._fromUser(d)),cn.get(d)}(d)}static getOrCreate(d){return Fa.USER_MAP.has(d)||Fa.USER_MAP.set(d,new Fa(d)),Fa.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var p=this;return(0,w.Z)(function*(){return Xr(p.auth,Hs(p._delegate,d))})()}linkWithPhoneNumber(d,p){var I=this;return(0,w.Z)(function*(){return ri(I.auth,function uc(_,d,p){return nu.apply(this,arguments)}(I._delegate,d,p))})()}linkWithPopup(d){var p=this;return(0,w.Z)(function*(){return Xr(p.auth,function lc(_,d,p){return El.apply(this,arguments)}(p._delegate,d,Li))})()}linkWithRedirect(d){var p=this;return(0,w.Z)(function*(){return yield on(Fn(p.auth)),ao(p._delegate,d,Li)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var p=this;return(0,w.Z)(function*(){return Xr(p.auth,bi(p._delegate,d))})()}reauthenticateWithPhoneNumber(d,p){return ri(this.auth,function Ll(_,d,p){return vl.apply(this,arguments)}(this._delegate,d,p))}reauthenticateWithPopup(d){return Xr(this.auth,function Ph(_,d,p){return Du.apply(this,arguments)}(this._delegate,d,Li))}reauthenticateWithRedirect(d){var p=this;return(0,w.Z)(function*(){return yield on(Fn(p.auth)),Wc(p._delegate,d,Li)})()}sendEmailVerification(d){return function Qa(_,d){return S.apply(this,arguments)}(this._delegate,d)}unlink(d){var p=this;return(0,w.Z)(function*(){return yield function _r(_,d){return js.apply(this,arguments)}(p._delegate,d),p})()}updateEmail(d){return function F(_,d){return j((0,ie.m9)(_),d,null)}(this._delegate,d)}updatePassword(d){return function A(_,d){return j((0,ie.m9)(_),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function Wf(_,d){return Cu.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function ze(_,d){return M.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,p){return function q(_,d,p){return L.apply(this,arguments)}(this._delegate,d,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Fa.USER_MAP=new WeakMap;const Dl=fe;let Ql=(()=>{class _{constructor(p,I){if(this.app=p,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:V}=p.options;Dl(V,"invalid-api-key",{appName:p.name}),Dl(V,"invalid-api-key",{appName:p.name});const Z=typeof window<"u"?Li:void 0;this._delegate=I.initialize({options:{persistence:Yf(V,p.name),popupRedirectResolver:Z}}),this._delegate._updateErrorMap(ht),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Fa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,I){!function Fo(_,d,p){const I=Fn(_);fe(I._canInitEmulator,I,"emulator-config-failed"),fe(/^https?:\/\//.test(d),I,"invalid-emulator-scheme");const V=!!p?.disableWarnings,Z=_o(d),{host:ge,port:Fe}=function Jo(_){const d=_o(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(d.length));if(!p)return{host:"",port:null};const I=p[2].split("@").pop()||"",V=/^(\[[^\]]+\])(:|$)/.exec(I);if(V){const Z=V[1];return{host:Z,port:_u(I.substr(Z.length+1))}}{const[Z,ge]=I.split(":");return{host:Z,port:_u(ge)}}}(d);I.config.emulator={url:`${Z}//${ge}${null===Fe?"":`:${Fe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:ge,port:Fe,protocol:Z.replace(":",""),options:Object.freeze({disableWarnings:V})}),V||function Ba(){function _(){const d=document.createElement("p"),p=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,p,I)}applyActionCode(p){return function yu(_,d){return Ro.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return aa(this._delegate,p)}confirmPasswordReset(p,I){return function Ka(_,d,p){return wa.apply(this,arguments)}(this._delegate,p,I)}createUserWithEmailAndPassword(p,I){var V=this;return(0,w.Z)(function*(){return Xr(V._delegate,function jo(_,d,p){return Rs.apply(this,arguments)}(V._delegate,p,I))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function fl(_,d){return Gi.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function vu(_,d){const p=ds.parseLink(d);return"EMAIL_SIGNIN"===p?.operation}(0,p)}getRedirectResult(){var p=this;return(0,w.Z)(function*(){Dl(xs(),p._delegate,"operation-not-supported-in-this-environment");const I=yield function Il(_,d){return bu.apply(this,arguments)}(p._delegate,Li);return I?Xr(p._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function nn(_,d){Fn(_)._logFramework(d)}(this._delegate,p)}onAuthStateChanged(p,I,V){const{next:Z,error:ge,complete:Fe}=Qf(p,I,V);return this._delegate.onAuthStateChanged(Z,ge,Fe)}onIdTokenChanged(p,I,V){const{next:Z,error:ge,complete:Fe}=Qf(p,I,V);return this._delegate.onIdTokenChanged(Z,ge,Fe)}sendSignInLinkToEmail(p,I){return function Ta(_,d,p){return Za.apply(this,arguments)}(this._delegate,p,I)}sendPasswordResetEmail(p,I){return function So(_,d,p){return ro.apply(this,arguments)}(this._delegate,p,I||void 0)}setPersistence(p){var I=this;return(0,w.Z)(function*(){let V;switch(function ln(_,d){ka(Object.values(wo).includes(d),_,"invalid-persistence-type"),(0,ie.b$)()?ka(d!==wo.SESSION,_,"unsupported-persistence-type"):(0,ie.UG)()?ka(d===wo.NONE,_,"unsupported-persistence-type"):Es()?ka(d===wo.NONE||d===wo.LOCAL&&(0,ie.hl)(),_,"unsupported-persistence-type"):ka(d===wo.NONE||li(),_,"unsupported-persistence-type")}(I._delegate,p),p){case wo.SESSION:V=Gs;break;case wo.LOCAL:V=(yield dt(b)._isAvailable())?b:Xa;break;case wo.NONE:V=rn;break;default:return ke("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(V)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Xr(this._delegate,function za(_){return rs.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Xr(this._delegate,Vo(this._delegate,p))}signInWithCustomToken(p){return Xr(this._delegate,function yi(_,d){return Ss.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,I){return Xr(this._delegate,function hl(_,d,p){return Vo((0,ie.m9)(_),hs.credential(d,p)).catch(function(){var I=(0,w.Z)(function*(V){throw"auth/password-does-not-meet-requirements"===V.code&&$s(_),V});return function(V){return I.apply(this,arguments)}}())}(this._delegate,p,I))}signInWithEmailLink(p,I){return Xr(this._delegate,function is(_,d,p){return ua.apply(this,arguments)}(this._delegate,p,I))}signInWithPhoneNumber(p,I){return ri(this._delegate,function Tu(_,d,p){return vo.apply(this,arguments)}(this._delegate,p,I))}signInWithPopup(p){var I=this;return(0,w.Z)(function*(){return Dl(xs(),I._delegate,"operation-not-supported-in-this-environment"),Xr(I._delegate,function $c(_,d,p){return ba.apply(this,arguments)}(I._delegate,p,Li))})()}signInWithRedirect(p){var I=this;return(0,w.Z)(function*(){return Dl(xs(),I._delegate,"operation-not-supported-in-this-environment"),yield on(I._delegate),zc(I._delegate,p,Li)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Ei(_,d){return Zr.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=wo,_})();function Qf(_,d,p){let I=_;"function"!=typeof _&&({next:I,error:d,complete:p}=_);const V=I;return{next:ge=>V(ge&&Fa.getOrCreate(ge)),error:d,complete:p}}function Yf(_,d){const p=function sr(_,d){const p=Ks();if(!p)return[];const I=Dt(xt,_,d);switch(p.getItem(I)){case wo.NONE:return[rn];case wo.LOCAL:return[b,Gs];case wo.SESSION:return[Gs];default:return[]}}(_,d);if(typeof self<"u"&&!p.includes(b)&&p.push(b),typeof window<"u")for(const I of[Xa,Gs])p.includes(I)||p.push(I);return p.includes(rn)||p.push(rn),p}class sd{constructor(){this.providerId="phone",this._delegate=new ru(Jr(W.Z.auth()))}static credential(d,p){return ru.credential(d,p)}verifyPhoneNumber(d,p){return this._delegate.verifyPhoneNumber(d,p)}unwrap(){return this._delegate}}sd.PHONE_SIGN_IN_METHOD=ru.PHONE_SIGN_IN_METHOD,sd.PROVIDER_ID=ru.PROVIDER_ID;const zd=fe;class yc{constructor(d,p,I=W.Z.app()){var V;zd(null===(V=I.options)||void 0===V?void 0:V.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new Fl(I.auth(),d,p),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Al(_){_.INTERNAL.registerComponent(new Re.wA("auth-compat",d=>{const p=d.getProvider("app-compat").getImmediate(),I=d.getProvider("auth");return new Ql(p,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:hs,FacebookAuthProvider:si,GithubAuthProvider:oi,GoogleAuthProvider:Bu,OAuthProvider:no,SAMLAuthProvider:yo,PhoneAuthProvider:sd,PhoneMultiFactorGenerator:Zf,RecaptchaVerifier:yc,TwitterAuthProvider:ns,Auth:Ql,AuthCredential:xi,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.4.9")}(W.Z)},5861:(bt,Le,$)=>{function w(ie,Ee,pe,ve,Re,R,Ne){try{var ue=ie[R](Ne),he=ue.value}catch(De){return void pe(De)}ue.done?Ee(he):Promise.resolve(he).then(ve,Re)}function W(ie){return function(){var Ee=this,pe=arguments;return new Promise(function(ve,Re){var R=ie.apply(Ee,pe);function Ne(he){w(R,ve,Re,Ne,ue,"next",he)}function ue(he){w(R,ve,Re,Ne,ue,"throw",he)}Ne(void 0)})}}$.d(Le,{Z:()=>W})},7582:(bt,Le,$)=>{function Ee(_e,we){var Ve={};for(var be in _e)Object.prototype.hasOwnProperty.call(_e,be)&&we.indexOf(be)<0&&(Ve[be]=_e[be]);if(null!=_e&&"function"==typeof Object.getOwnPropertySymbols){var Se=0;for(be=Object.getOwnPropertySymbols(_e);Se<be.length;Se++)we.indexOf(be[Se])<0&&Object.prototype.propertyIsEnumerable.call(_e,be[Se])&&(Ve[be[Se]]=_e[be[Se]])}return Ve}function De(_e,we,Ve,be){return new(Ve||(Ve=Promise))(function(Be,yt){function gt(wn){try{Pt(be.next(wn))}catch(en){yt(en)}}function mr(wn){try{Pt(be.throw(wn))}catch(en){yt(en)}}function Pt(wn){wn.done?Be(wn.value):function Se(Be){return Be instanceof Ve?Be:new Ve(function(yt){yt(Be)})}(wn.value).then(gt,mr)}Pt((be=be.apply(_e,we||[])).next())})}function ce(_e){return this instanceof ce?(this.v=_e,this):new ce(_e)}function ke(_e,we,Ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se,be=Ve.apply(_e,we||[]),Be=[];return Se={},yt("next"),yt("throw"),yt("return"),Se[Symbol.asyncIterator]=function(){return this},Se;function yt(Ln){be[Ln]&&(Se[Ln]=function(sn){return new Promise(function(yn,$n){Be.push([Ln,sn,yn,$n])>1||gt(Ln,sn)})})}function gt(Ln,sn){try{!function mr(Ln){Ln.value instanceof ce?Promise.resolve(Ln.value.v).then(Pt,wn):en(Be[0][2],Ln)}(be[Ln](sn))}catch(yn){en(Be[0][3],yn)}}function Pt(Ln){gt("next",Ln)}function wn(Ln){gt("throw",Ln)}function en(Ln,sn){Ln(sn),Be.shift(),Be.length&&gt(Be[0][0],Be[0][1])}}function Ge(_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,we=_e[Symbol.asyncIterator];return we?we.call(_e):(_e=function nt(_e){var we="function"==typeof Symbol&&Symbol.iterator,Ve=we&&_e[we],be=0;if(Ve)return Ve.call(_e);if(_e&&"number"==typeof _e.length)return{next:function(){return _e&&be>=_e.length&&(_e=void 0),{value:_e&&_e[be++],done:!_e}}};throw new TypeError(we?"Object is not iterable.":"Symbol.iterator is not defined.")}(_e),Ve={},be("next"),be("throw"),be("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve);function be(Be){Ve[Be]=_e[Be]&&function(yt){return new Promise(function(gt,mr){!function Se(Be,yt,gt,mr){Promise.resolve(mr).then(function(Pt){Be({value:Pt,done:gt})},yt)}(gt,mr,(yt=_e[Be](yt)).done,yt.value)})}}}$.d(Le,{FC:()=>ke,KL:()=>Ge,_T:()=>Ee,mG:()=>De,qq:()=>ce}),"function"==typeof SuppressedError&&SuppressedError}},bt=>{bt(bt.s=3757)}]);